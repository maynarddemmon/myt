<!doctype html><html><head>
<title>Myt Framework : Canvas Example</title>
<link rel="stylesheet" href="../src/css/myt.scss"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../src/js/jquery/jquery-1.10.0.min.js">\x3C/script>');</script>
<script src="../src/js/boilerplate.js"></script>
<script src="../src/js/jsclass/min/loader-browser.js"></script>
<script src="../src/js/myt/manifest.js"></script>
</head><body>

<div id="appDiv" style="position:absolute;"></div>
<div id="tooltipDiv" style="position:absolute;"></div>

<script>
    JS.require('myt.all', function() {this.init();});
    
    function init() {
        var appDiv = document.getElementById("appDiv");
        var rootView = new myt.View(appDiv, {bgColor:'#ffffff'}, [myt.SizeToWindow]);
        
        new myt.IconTextPanelButton(rootView, {x:920, y:10, width:100, text:'zoom in'}, [{
            doActivated: function() {
                graph.setScaleX(graph.scaleX + 0.025);
                graph.setScaleY(graph.scaleY + 0.025);
                
                var xMin = graph.getMinX(), xMax = graph.getMaxX(),
                    yMin = graph.getMinY(), yMax = graph.getMaxY();
                graph.animatePoints([
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax)
                ]);
            }
        }]);
        
        new myt.IconTextPanelButton(rootView, {x:920, y:40, width:100, text:'zoom out'}, [{
            doActivated: function() {
                graph.setScaleX(graph.scaleX - 0.025);
                graph.setScaleY(graph.scaleY - 0.025);
                
                var xMin = graph.getMinX(), xMax = graph.getMaxX(),
                    yMin = graph.getMinY(), yMax = graph.getMaxY();
                graph.animatePoints([
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax),
                    
                    graph.getDataPointById('id_' + myt.getRandomInt(0, count)),
                    myt.getRandomInt(xMin, xMax), 
                    myt.getRandomInt(yMin, yMax)
                ]);
            }
        }]);
        
        
        var graph = new myt.ScatterGraph(rootView, {x:10, y:10, width:900, height:500});
        graph.addPointTemplate('red', myt.ScatterGraph.createCircleTemplate(16, '#ff0000', 0.25, 0.5, null, 1));
        graph.addPointTemplate('green', myt.ScatterGraph.createCircleTemplate(3, '#009900'));
        graph.addPointTemplate('blue', myt.ScatterGraph.createCircleTemplate(5, '#0000ff', 0.25, 0.5, null, 1));
        graph.addPointTemplate('black', myt.ScatterGraph.createCircleTemplate(4, '#000000', 0.25, 0.5, null, 1));
        
        // Generate data points
        var data = [];
        
        var i = 1000, count = i, 
            config,
            config0 = {templateKey:'red'},
            config1 = {templateKey:'green'},
            config2 = {templateKey:'blue'},
            xMin = graph.getMinX(), xMax = graph.getMaxX(),
            yMin = graph.getMinY(), yMax = graph.getMaxY();
        
        while (i) {
            switch (i % 3) {
                case 0: config = config0; break;
                case 1: config = config1; break;
                case 2: config = config2; break;
            }
            data[--i] = new myt.ScatterGraphPoint('id_' + i, 
                myt.getRandomInt(xMin, xMax), 
                myt.getRandomInt(yMin, yMax), config
            );
        }
        
        graph.setData(data);
        
        var start = Date.now();
        var nearest = graph.nearest({x:4, y:2}, 1000, 16*16);
        console.log(Date.now() - start);
        
        console.log(nearest);
    }
</script>
</body></html>
