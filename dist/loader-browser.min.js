((k,m)=>{const n=function(a){this._members=this.list=[];this._index={};if(a)for(let b=0,c=a.length;b<c;)this.push(a[b++])};n.prototype.push=function(a){const b=void 0!==a.id?a.id:a,c=this._index;c.hasOwnProperty(b)||(c[b]=this._members.length,this._members.push(a))};const f=function(a){f._index(this);this._loader=a;this._names=new n;this._deps=new n;this._uses=new n;this._observers={};this._events={}};f.ENV=m.ENV=k;f._throw=a=>{throw Error(a);};k=f.prototype;k.requires=function(){const a=arguments.length;
for(let b=0;b<a;)this._deps.push(arguments[b++]);return this};k.uses=function(){const a=arguments.length;for(let b=0;b<a;)this._uses.push(arguments[b++]);return this};k.provides=function(){const a=arguments.length;for(let b=0;b<a;b++)this._names.push(arguments[b]),f._getFromCache(arguments[b]).pkg=this;return this};k._on=function(a,b,c){if(this._events[a])return b.call(c);(this._observers[a]=this._observers[a]||[]).push([b,c]);this._load()};k._fire=function(a){if(this._events[a])return!1;this._events[a]=
!0;const b=this._observers[a];if(b){delete this._observers[a];for(let c=0,d=b.length;c<d;c++)b[c][0].call(b[c][1])}return!0};k._isLoaded=function(a){if(!a&&void 0!==this.__isLoaded)return this.__isLoaded;const b=this._names.list;let c=b.length;for(;c--;){const d=b[c];if(void 0===f._getObject(d,this._exports))return a?f._throw("Expected package at "+this._loader+" to define "+d):this.__isLoaded=!1}return this.__isLoaded=!0};k._load=function(){const a=this;if(a._fire("request")){if(!a._isLoaded()&&
!a._source&&a._loader instanceof Array){a._source=[];for(let e=0,g=a._loader.length;e<g;e++)a._source[e]=u(a._loader[e])}const b=a._deps.list.concat(a._uses.list),c=a._source||[];let d=(a._loader||{}).length;f.when({load:b});f.when({complete:a._deps.list},function(){f.when({complete:b,load:[this]},function(){this._fire("complete")},this);const e=h=>{if(0===d)return g(h);d--;h=a._loader.length-d-1;v(a._loader[h],e,c[h])},g=h=>{a._exports=h;a._onload&&a._onload();a._isLoaded(!0);a._fire("load")};if(this._isLoaded())return this._fire("download"),
this._fire("load");if(void 0===this._loader)return f._throw("No load path found for "+this._names.list[0]);"function"===typeof this._loader?this._loader(g):e()},a)}};f.when=(a,b,c)=>{const d=[],e={};let g,h;for(const l in a)if(a.hasOwnProperty(l))for(e[l]=[],g=new n(a[l]),h=g.list.length;h--;)d.push([l,g.list[h],h]);let p=h=d.length;if(0===p)return b&&b.call(c,e);for(;h--;)(l=>{const q=f._getByName(l[1]);q._on(l[0],()=>{e[l[0]][l[2]]=f._getObject(l[1],q._exports);0===--p&&b&&b.call(c,e)})})(d[h])};
f._autoIncrement=1;f._indexByPath={};f._indexByName={};f._index=function(a){a.id=this._autoIncrement;this._autoIncrement++};f._getByPath=function(a){const b=a.toString();let c=this._indexByPath[b];c||("string"===typeof a&&(a=[].slice.call(arguments)),c=this._indexByPath[b]=new this(a));return c};f._getByName=function(a){if("string"!==typeof a)return a;var b=this._getFromCache(a);if(b.pkg)return b.pkg;b=new this;b.provides(a);return b};f._getFromCache=function(a){return this._indexByName[a]=this._indexByName[a]||
{}};f._getObject=function(a,b){if("string"===typeof a){const c=b?{}:this._getFromCache(a);if(void 0!==c.obj)return c.obj;let d=b||this.ENV,e;const g=a.split(".");for(;e=g.shift();)d=d&&d[e];return b&&void 0===d?this._getObject(a):c.obj=d}};k=f.Deferred=function(){this._status="deferred";this._value=null;this._callbacks=[]};k.prototype.callback=function(a,b){"succeeded"===this._status?a.call(b,this._value):this._callbacks.push([a,b])};k.prototype.succeed=function(a){this._status="succeeded";this._value=
a;let b;for(;b=this._callbacks.shift();)b[0].call(b[1],a)};const r=/^(https?:)?\/\/[^\/]+/i,t=r.exec(window.location.href),u=a=>{const b=r.exec(a);if(t&&(!b||b[0]===t[0])){const c=new f.Deferred;fetch(a,{method:"GET"}).then(d=>{if(d.ok)return d.text();throw Error("Manifest loading error for:"+a);}).then(d=>{c.succeed(d+"\n//# sourceURL="+a)});return c}},v=(a,b,c)=>{if(c)return c.callback(g=>{(new Function("code","eval(code)"))(g);b()});let d=document.getElementsByTagName("head")[0],e=document.createElement("script");
e.type="text/javascript";e.src=a;e.onload=e.onreadystatechange=()=>{const g=e.readyState,h=e.status;if(!g||"loaded"===g||"complete"===g||4===g&&200===h)b(),e.onload=e.onreadystatechange=()=>{},e=d=null};d.appendChild(e)};m.Packages=a=>{a.call({file:function(b){const c=[];let d=arguments.length;for(;d--;){var e=d,g=arguments[d];!/^https?:/.test(g)&&m.ROOT&&(g=(m.ROOT+"/"+g).replace(/\/+/g,"/"));c[e]=g}return f._getByPath.apply(f,c)}})};m.require=function(){const a=[];let b=0;for(;"string"===typeof arguments[b];)a.push(arguments[b++]);
const c=arguments[b++],d=arguments[b];f.when({complete:a},e=>{c&&c.apply(d,e&&e.complete)});return this}})(global,global.JS=global.JS||{});
//# sourceMappingURL=./loader-browser.min.js.map
