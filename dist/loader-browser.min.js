var JS="undefined"===typeof this.JS?{}:this.JS;JS.Date=Date;
(function(n){var h="object"===typeof this.global?this.global:this;"object"===typeof exports?JS=exports.JS=exports:h.JS=JS;n(h,JS)})(function(n,h){var c=function(a){c._index(this);this._loader=a;this._names=new p;this._deps=new p;this._uses=new p;this._styles=new p;this._observers={};this._events={}};c.displayName="Package";c.toString=function(){return c.displayName};c.log=function(a){h.debug&&"undefined"!==typeof window&&("object"===typeof n.runtime&&runtime.trace(a),n.console&&console.info&&console.info(a))};
var r=function(a){if(/^https?:/.test(a))return a;var b=h.ROOT;b&&(a=(b+"/"+a).replace(/\/+/g,"/"));return a},p=function(a){this._members=this.list=[];this._index={};if(a)for(var b=0,d=a.length;b<d;b++)this.push(a[b])};p.prototype.push=function(a){var b=void 0!==a.id?a.id:a,d=this._index;d.hasOwnProperty(b)||(d[b]=this._members.length,this._members.push(a))};var k=c.Deferred=function(){this._status="deferred";this._value=null;this._callbacks=[]};k.prototype.callback=function(a,b){"succeeded"===this._status?
a.call(b,this._value):this._callbacks.push([a,b])};k.prototype.succeed=function(a){this._status="succeeded";this._value=a;for(var b;b=this._callbacks.shift();)b[0].call(b[1],a)};c.ENV=h.ENV=n;c.onerror=function(a){throw a;};c._throw=function(a){c.onerror(Error(a))};for(var l=c.prototype,k=[["requires","_deps"],["uses","_uses"]],t=k.length;t--;)(function(a){var b=a[1];l[a[0]]=function(){var a=arguments.length,c;for(c=0;c<a;c++)this[b].push(arguments[c]);return this}})(k[t]);l.provides=function(){var a=
arguments.length,b;for(b=0;b<a;b++)this._names.push(arguments[b]),c._getFromCache(arguments[b]).pkg=this;return this};l.styling=function(){for(var a=0,b=arguments.length;a<b;a++)this._styles.push(r(arguments[a]))};l.setup=function(a){this._onload=a;return this};l._on=function(a,b,d){if(this._events[a])return b.call(d);(this._observers[a]=this._observers[a]||[]).push([b,d]);this._load()};l._fire=function(a){if(this._events[a])return!1;this._events[a]=!0;var b=this._observers[a];if(!b)return!0;delete this._observers[a];
a=0;for(var d=b.length;a<d;a++)b[a][0].call(b[a][1]);return!0};l._isLoaded=function(a){if(!a&&void 0!==this.__isLoaded)return this.__isLoaded;for(var b=this._names.list,d=b.length,e,g;d--;)if(e=b[d],g=c._getObject(e,this._exports),void 0===g)return a?c._throw("Expected package at "+this._loader+" to define "+e):this.__isLoaded=!1;return this.__isLoaded=!0};l._load=function(){if(this._fire("request")){this._isLoaded()||this._prefetch();var a=this._deps.list.concat(this._uses.list),b=this._source||
[],d=(this._loader||{}).length,e=this;c.when({load:a});c.when({complete:this._deps.list},function(){c.when({complete:a,load:[this]},function(){this._fire("complete")},this);var g=function(a){if(0===d)return f(a);--d;a=e._loader.length-d-1;c.loader.loadFile(e._loader[a],g,b[a])},f=function(a){e._exports=a;e._onload&&e._onload();e._isLoaded(!0);e._fire("load")};if(this._isLoaded())return this._fire("download"),this._fire("load");if(void 0===this._loader)return c._throw("No load path found for "+this._names.list[0]);
"function"===typeof this._loader?this._loader(f):g();if(c.loader.loadStyle){for(var h=this._styles.list,m=h.length;m--;)c.loader.loadStyle(h[m]);this._fire("download")}},this)}};l._prefetch=function(){if(!this._source&&this._loader instanceof Array&&c.loader.fetch){this._source=[];for(var a=0,b=this._loader.length;a<b;a++)this._source[a]=c.loader.fetch(this._loader[a])}};l.toString=function(){return"Package:"+this._names.list.join(",")};c.when=function(a,b,d){var e=[],g={},f,h,m;for(f in a)if(a.hasOwnProperty(f))for(g[f]=
[],h=new p(a[f]),m=h.list.length;m--;)e.push([f,h.list[m],m]);var k=m=e.length;if(0===k)return b&&b.call(d,g);for(;m--;)(function(a){var e=c._getByName(a[1]);e._on(a[0],function(){g[a[0]][a[2]]=c._getObject(a[1],e._exports);--k;0===k&&b&&b.call(d,g)})})(e[m])};k=(n.JS||{}).Package||{};c._autoIncrement=k._autoIncrement||1;c._indexByPath=k._indexByPath||{};c._indexByName=k._indexByName||{};c._autoloaders=k._autoloaders||[];c._index=function(a){a.id=this._autoIncrement;this._autoIncrement+=1};c._getByPath=
function(a){var b=a.toString(),d=this._indexByPath[b];if(d)return d;"string"===typeof a&&(a=[].slice.call(arguments));return d=this._indexByPath[b]=new this(a)};c._getByName=function(a){if("string"!==typeof a)return a;var b=this._getFromCache(a);if(b.pkg)return b.pkg;if(b=this._manufacture(a))return b;b=new this;b.provides(a);return b};c.remove=function(a){var b=this._getByName(a);delete this._indexByName[a];delete this._indexByPath[b._loader]};c._autoload=function(a,b){this._autoloaders.push([a,
b])};c._manufacture=function(a){var b=this._autoloaders,d=b.length,c,g;for(c=0;c<d;c++)if(g=b[c],g[0].test(a)){d=g[1].from;"string"===typeof d&&(d=this._convertNameToPath(d));c=new this([d(a)]);c.provides(a);if(d=g[1].require)for(d=[].concat(d),b=d.length;b--;)c.requires(a.replace(g[0],d[b]));return c}return null};c._convertNameToPath=function(a){return function(b){return a.replace(/\/?$/,"/")+b.replace(/([a-z])([A-Z])/g,function(a,b,c){return b+"_"+c}).replace(/\./g,"/").toLowerCase()+".js"}};c._getFromCache=
function(a){return this._indexByName[a]=this._indexByName[a]||{}};c._getObject=function(a,b){if("string"===typeof a){var c=b?{}:this._getFromCache(a);if(void 0!==c.obj)return c.obj;for(var e=b||this.ENV,g=a.split("."),f;f=g.shift();)e=e&&e[f];return b&&void 0===e?this._getObject(a):c.obj=e}};c.BrowserLoader={HOST_REGEX:/^(https?\:)?\/\/[^\/]+/i,usable:function(){return!!c._getObject("window.document.getElementsByTagName")&&"undefined"===typeof phantom},__FILE__:function(){var a=document.getElementsByTagName("script"),
a=a[a.length-1].src,b=window.location.href;return/^\w+\:\/+/.test(a)?a:/^\//.test(a)?window.location.origin+a:b.replace(/[^\/]*$/g,"")+a},cacheBust:function(a){if(!1!==h.cache)return a;var b=(new JS.Date).getTime();return a+(/\?/.test(a)?"&":"?")+b},fetch:function(a){var b=a;a=this.cacheBust(a);this.HOST=this.HOST||this.HOST_REGEX.exec(window.location.href);var d=this.HOST_REGEX.exec(a);if(!this.HOST||d&&d[0]!==this.HOST[0])return null;c.log("[FETCH] "+a);var e=new c.Deferred,g=this,f=window.ActiveXObject?
new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;f.open("GET",a,!0);f.onreadystatechange=function(){4===f.readyState&&(f.onreadystatechange=g._K,200!==f.status?console.error("Manifest loading error for file:"+b):e.succeed(f.responseText+"\n//# sourceURL="+b),f=null)};f.send(null);return e},loadFile:function(a,b,d){d||(a=this.cacheBust(a));var e=this,g=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript";if(d)return d.callback(function(d){c.log("[EXEC]  "+
a);(new Function("code","eval(code)"))(d);b()});c.log("[LOAD] "+a);f.src=a;f.onload=f.onreadystatechange=function(){var a=f.readyState,c=f.status;if(!a||"loaded"===a||"complete"===a||4===a&&200===c)b(),f.onload=f.onreadystatechange=e._K,f=g=null};g.appendChild(f)},loadStyle:function(a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=this.cacheBust(a);document.getElementsByTagName("head")[0].appendChild(b)},_K:function(){}};c.loader=c.BrowserLoader;var q={__FILE__:function(){return c.loader.__FILE__()},
pkg:function(a,b){var d=b?c._getByPath(b):c._getByName(a);d.provides(a);return d},file:function(a){for(var b=[],d=arguments.length;d--;)b[d]=r(arguments[d]);return c._getByPath.apply(c,b)},load:function(a,b){c.loader.loadFile(a,b)},autoload:function(a,b){c._autoload(a,b)}};q.files=q.file;q.loader=q.file;var u=function(a){for(var b=[],c=0;"string"===typeof a[c];)b.push(a[c]),c+=1;return{files:b,callback:a[c],context:a[c+1]}};h.load=function(a,b){var d=u(arguments),e=d.files.length,g=function(a){if(a===
e)return d.callback.call(d.context);c.loader.loadFile(d.files[a],function(){g(a+1)})};g(0)};h.require=function(){var a=u(arguments);c.when({complete:a.files},function(b){a.callback&&a.callback.apply(a.context,b&&b.complete)});return this};h.Package=c;h.Packages=h.packages=function(a){a.call(q)};h.DSL=q});
//# sourceMappingURL=./loader-browser.min.js.map
