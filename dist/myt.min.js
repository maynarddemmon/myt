var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findLastInternal=function(r,w,v){r instanceof String&&(r=String(r));for(var t=r.length-1;0<=t;t--){var h=r[t];if(w.call(v,h,t,r))return{i:t,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(r,w,v){if(r==Array.prototype||r==Object.prototype)return r;r[w]=v.value;return r};$jscomp.getGlobal=function(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var w=0;w<r.length;++w){var v=r[w];if(v&&v.Math==Math)return v}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(r,w,v){if(!v||null!=r){v=$jscomp.propertyToPolyfillSymbol[w];if(null==v)return r[w];v=r[v];return void 0!==v?v:r[w]}};
$jscomp.polyfill=function(r,w,v,t){w&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(r,w,v,t):$jscomp.polyfillUnisolated(r,w,v,t))};$jscomp.polyfillUnisolated=function(r,w,v,t){v=$jscomp.global;r=r.split(".");for(t=0;t<r.length-1;t++){var h=r[t];if(!(h in v))return;v=v[h]}r=r[r.length-1];t=v[r];w=w(t);w!=t&&null!=w&&$jscomp.defineProperty(v,r,{configurable:!0,writable:!0,value:w})};
$jscomp.polyfillIsolated=function(r,w,v,t){var h=r.split(".");r=1===h.length;t=h[0];t=!r&&t in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var d=0;d<h.length-1;d++){var e=h[d];if(!(e in t))return;t=t[e]}h=h[h.length-1];v=$jscomp.IS_SYMBOL_NATIVE&&"es6"===v?t[h]:null;w=w(v);null!=w&&(r?$jscomp.defineProperty($jscomp.polyfills,h,{configurable:!0,writable:!0,value:w}):w!==v&&(void 0===$jscomp.propertyToPolyfillSymbol[h]&&(v=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[h]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(h):$jscomp.POLYFILL_PREFIX+v+"$"+h),$jscomp.defineProperty(t,$jscomp.propertyToPolyfillSymbol[h],{configurable:!0,writable:!0,value:w})))};$jscomp.polyfill("Array.prototype.findLast",function(r){return r?r:function(w,v){return $jscomp.findLastInternal(this,w,v).v}},"es_next","es3");$jscomp.typedArrayFindLast=function(r){return r?r:function(w,v){return $jscomp.findLastInternal(this,w,v).v}};$jscomp.polyfill("Int8Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");
$jscomp.polyfill("Uint8Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Int16Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Uint16Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Int32Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");
$jscomp.polyfill("Uint32Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Float32Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");$jscomp.polyfill("Float64Array.prototype.findLast",$jscomp.typedArrayFindLast,"es_next","es5");
(r=>{let w;var v=e=>{let m=e.length;for(;m;){const k=e[--m];w=k.ver??k.id;if(k.str?.includes(k.sub)||k.prop)return k.id}};var t=e=>{const m=e.indexOf(w);if(0<=m)return parseFloat(e.slice(m+w.length+1))};const h=navigator.userAgent,d=navigator.platform;t=r.BrowserDetect={browser:v([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:h,sub:"Firefox",id:"Firefox"},{str:h,sub:"Chrome",id:"Chrome"},{str:h,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:t(h)||t(navigator.appVersion)||"UNKNOWN",os:v([{str:h,sub:"iPhone",id:"iPhone/iPod"},{str:d,sub:"Linux",id:"Linux"},{str:d,sub:"Mac",id:"Mac"},{str:d,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(t.browser){case "Chrome":case "Safari":r="WebKit";break;case "Explorer":r="MS";break;case "Firefox":r="Moz";break;case "Opera":r="O";break;default:r="UNKNOWN"}v=r.toLowerCase();t.prefix={dom:r,lowercase:v,css:"-"+v+"-",js:v[0].toUpperCase()+v.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:r,floor:w,ceil:v}=Math,t="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="January February March April May June July August September October November December".split(" "),d="Sun Mon Tue Wed Thu Fri Sat".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m=f=>(10>f?"0":"")+f,k=(f,b)=>{f=f.getTimezoneOffset();return(0<f?"-":"+")+m(w(r(f/60)))+(b?":":"")+(0==r(f%60)?"00":m(r(f%60)))},a={d:f=>
m(f.getDate()),D:f=>d[f.getDay()],j:f=>f.getDate(),l:f=>e[f.getDay()],N:f=>0==f.getDay()?7:f.getDay(),S:f=>{f=f.getDate();return 1==f%10&&11!=f?"st":2==f%10&&12!=f?"nd":3==f%10&&13!=f?"rd":"th"},w:f=>f.getDay(),z:f=>{const b=new Date(f.getFullYear(),0,1);return v((f-b)/864E5)},W:f=>{const b=new Date(f.valueOf());f=(f.getDay()+6)%7;b.setDate(b.getDate()-f+3);f=b.valueOf();b.setMonth(0,1);4!==b.getDay()&&b.setMonth(0,1+(4-b.getDay()+7)%7);return m(1+v((f-b)/6048E5))},F:f=>h[f.getMonth()],m:f=>m(f.getMonth()+
1),M:f=>t[f.getMonth()],n:f=>f.getMonth()+1,t:f=>{let b=f.getFullYear();f=f.getMonth()+1;12===f&&(b=b++,f=0);return(new Date(b,f,0)).getDate()},L:f=>{f=f.getFullYear();return 0==f%400||0!=f%100&&0==f%4},o:f=>{const b=new Date(f.valueOf());b.setDate(b.getDate()-(f.getDay()+6)%7+3);return b.getFullYear()},Y:f=>f.getFullYear(),y:f=>(""+f.getFullYear()).substr(2),a:f=>12>f.getHours()?"am":"pm",A:f=>12>f.getHours()?"AM":"PM",B:f=>w(1E3*((f.getUTCHours()+1)%24+f.getUTCMinutes()/60+f.getUTCSeconds()/3600)/
24),g:f=>f.getHours()%12||12,G:f=>f.getHours(),h:f=>m(f.getHours()%12||12),H:f=>m(f.getHours()),i:f=>m(f.getMinutes()),s:f=>m(f.getSeconds()),e:f=>/\((.*)\)/.exec((new Date).toString())[1],I:f=>{let b=null,g=0;for(;12>g;){const c=(new Date(f.getFullYear(),g++,1)).getTimezoneOffset();if(null===b)b=c;else if(c<b){b=c;break}else if(c>b)break}return f.getTimezoneOffset()==b|0},O:f=>k(f,!1),P:f=>k(f,!0),T:f=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:f=>60*-f.getTimezoneOffset(),c:f=>f.format("Y-m-d\\TH:i:sP"),
r:f=>f.toString(),U:f=>f.getTime()/1E3,x:f=>f.toLocaleDateString(),X:f=>f.toLocaleTimeString()};return function(f){return f.replace(/(\\?)(.)/g,(b,g,c)=>""===g&&a[c]?a[c](this):c)}})();
(r=>{const w=(g,c)=>{var q=g.__mct__.get(c);if(q)return q.slice();const x=[];if(q=g.__anc__){const u=q.length;for(let n=0;n<u;){const A=q[n++].__fns__;A.has(c)&&x.push(A.get(c))}}else{const u=g.__anc__=[],n=A=>{const J=A.__inc__,z=J.length;for(let C=0;C<z;)n(J[C++]);u.includes(A)||(u.push(A),A=A.__fns__,A.has(c)&&x.push(A.get(c)))};n(g)}g.__mct__.set(c,x.slice());return x},v=(g,c)=>{const q=g.callable;return g.__hs?function(...x){const u=this.callSuper,n=w(c,g.name);let A=n.length-1;if(0===A)u&&delete this.callSuper;
else{const z=x.length,C=this.callSuper=(...I)=>{for(let M=I.length;M<z;)I[M]=x[M++];0===--A&&delete this.callSuper;I=n[A].callable.call(this,...I);this.callSuper=C;A++;return I}}const J=q.call(this,...x);u?this.callSuper=u:delete this.callSuper;return J}:q},t=(g,c)=>{c=c??g;if(c===g){g.__anc__=null;g.__mct__=new Map;var q=g.__dep__;for(var x=q.length;0<x;)t(q[--x])}q=c.__tgt__;x=g.__inc__;const u=x.length;for(let n=0;n<u;)t(x[n++],c);for(const [n,A]of g.__fns__)g=A instanceof e?v(A,c):A,q[n]!==g&&
(q[n]=g)},h=g=>g.__meta__??(g.__meta__=new m(null,null,g)).include(g.klass,!0),d=g=>{const c=function(...q){return this.initialize(...q)??this};c.prototype=Object.create(g.prototype);return c},e=d(Object),m=r.Module=d(Object);e.prototype.initialize=function(g,c,q){this.module=g;this.name=c;this.callable=q;this.__hs=q.toString().includes("callSuper")};var k=m.prototype;k.initialize=function(g,c,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;g&&(this.__displayName=
g);this.include(c,!0)};k.include=function(g,c){if(g){if(g.__fns__)this.__inc__.push(g),g.__dep__.push(this);else{var q=g.extend,x=g.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(x&&(x.__fns__||"function"!==typeof x)){q=x.length;for(let u=0;u<q;)this.include(x[u++],!0)}for(const u of Object.keys(g))if(x=g[u],"extend"!==u&&"include"!==u||!x.__fns__&&"function"===typeof x)this.__fns__.has(u)?(console.warn('JS.Module already has field: "'+u+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new m("Auto_"+u,{[u]:x}),!1)):this.__fns__.set(u,x?.__fns__||"function"!==typeof x?x:new e(this,u,x))}!0!==c&&t(this)}return this};k.includes=function(g){if(g===this)return!0;const c=this.__inc__,q=c.length;for(let x=0;x<q;)if(c[x++].includes(g))return!0;return!1};k.instanceMethod=function(g){return w(this,g).pop()};const a=new m("Kernel",{extend:function(g){h(this).include(g)},isA:function(g){return"function"===typeof g&&this instanceof g||h(this).includes(g)}}),f=r.Class=d(m),b=f.prototype;
b.initialize=function(g,c,q){"function"!==typeof c&&(q=c,c=Object);m.prototype.initialize.call(this,g);g=d(c);for(const x in this)g[x]===this[x]||g.hasOwnProperty(x)||(g[x]=this[x]);g.prototype.constructor=g.prototype.klass=g;h(g).include(c.__meta__);g.__tgt__=g.prototype;c=c===Object?{}:c.__fns__?c:new m(c.prototype,!0);g.include(a,!0).include(c,!0).include(q,!0);t(g);return g};k=(g,c)=>{g.__inc__=[];g.__dep__=[];const q=g.__tgt__=g.prototype,x=g.__fns__=new Map;for(const C of Object.keys(q)){var u=
x,n=u.set;var A=g;var J=C,z=q[C];A=z?.__fns__||"function"!==typeof z?z:new e(A,J,z);n.call(u,C,A)}q.constructor=q.klass=g;for(const C in b)g[C]===b[C]||g.hasOwnProperty(C)||(g[C]=b[C]);g.include(c);g.constructor=g.klass=f};k(e,a);k(m,a);k(f,m);t(h(e));t(h(m));h(f).include(m.__meta__);r.Singleton=new f("Singleton",{initialize:(g,c,q)=>new (new f(g,c,q))})})(global.JS={});
(r=>{class w extends Error{constructor(p,y,...B){super(...B);this.name="FetchError";this.status=p;this.url=y}}let v=0,t,h={};const d=console.warn,e=Math,{abs:m,min:k,max:a,pow:f}=e,b=Array.isArray,g=document,c=g.head,q=g.createElement.bind(g),x={},u={"":!0},n=g.fonts,A=p=>{const y=p.family.split('"').join("");for(const B of[y,y+" "+p.weight])if(!u[B]){u[B]=!0;const D=x[B]??[];for(;D.length;)(p=D.pop())&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y))}},J={},z=(p,y=JSON.stringify,
B=Infinity)=>{const D=new Map;return(...F)=>{var K=y(F);if(D.has(K))return D.get(K);F=p(...F);D.set(K,F);D.size>B&&(K=D.keys().next().value,D.delete(K));return F}},C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,I=/\$(\d+)/g,M=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,O=/[\\"](.)/g,l=r.myt={version:2.02306021558E7,generateGuid:()=>++v,theme:{TextButtonActive:"#ddd",TextButtonHover:"#eee",TextButtonReady:"#fff",DialogRadius:12,DialogBgColor:"#fff",DialogInputFgColor:"#333",DialogShadow:[0,
4,20,"#666"],DialogBorder:[1,"solid","#fff"],DialogDayBtnBorder:[1,"solid","#fff"],DialogDayBtnBorderColor:"#fff",DialogDayBtnBorderColorToday:"#090",DimmerOpacity:.35,DimmerColor:"#000",ModalPanelPaddingX:20,ModalPanelPaddingY:15,ModalPanelMarginTop:40,ModalPanelMarginLeft:40,ModalPanelMarginBottom:40,ModalPanelMarginRight:40,TabSliderContainerSpacing:1,TabInset:8,TabOutset:8,TabContainerInset:0,TabContainerSpacing:1,BaseTooltipDelay:500,BaseTooltipHideDelay:100,TooltipEdgeColor:"#444",TooltipBgColor:"#444",
TooltipTextColor:"#eee",TooltipShadowColor:"#00000033",TooltipEdgeSize:0,TooltipShadowSize:2,TooltipHInset:6,TooltipVInset:3,focusShadow:[0,0,7,"#666"],disabledOpacity:.5,border1s3:[1,"solid","#333"],border1s9:[1,"solid","#999"]},hash:p=>p.split("").reduce((y,B)=>{y=(y<<5)-y+B.charCodeAt(0);return y&y},0),addEventListener:(p,y,B,D,F)=>{p.addEventListener(y,B,{capture:D||!1,passive:F||!1})},removeEventListener:(p,y,B,D)=>{p.removeEventListener(y,B,D||!1)},resolveName:(p,y)=>{if(p&&0!==p.length){y=
y??global;var B=b(p)?p:p.split("."),D=B.length;for(let F=0;F<D;F++)if(y=y[B[F]],null==y){d("resolveName failed for",p,"at part",F,B[F]);return}return y}},resolveClassname:p=>{"string"===typeof p&&(p=l.resolveName(p));return p&&"function"===typeof p.isA&&p.isA(JS.Class)?p:null},getExtension:p=>p?(p=p.split("."),1<p.length?p.pop():null):null,loadScript:function(p,y,B,D){const F=this._loadedScripts??(this._loadedScripts={});let K=F[p];if(!0===K)y?.(!0);else if(!1===K)y?.(!1);else if(Array.isArray(K))y&&
K.push(y);else{K=F[p]=[];y&&K.push(y);const L=q("script");L.type="text/javascript";L.async=!1;D&&(L.integrity=D,L.crossOrigin="anonymous");const P=N=>{L.onload=L.onreadystatechange=L.onerror=null;for(const U of K)U(N);F[p]=N};L.onerror=()=>{P(!1)};L.onload=L.onreadystatechange=()=>{L.readyState&&"complete"!==L.readyState||P(!0)};L.src=p+(B?"":(p.includes("?")?"&":"?")+"cacheBust="+Date.now());c.appendChild(L)}},dumpStack:(p,y)=>{let B;"string"===typeof p&&(B=p,p=null);l.global.error.notify(y||"error",
null,B,p)},getRandom:p=>{const y=e.random();return p?a(0,k(p(y),.9999999999)):y},getRandomArbitrary:(p,y,B)=>{const D=k(p,y);return l.getRandom(B)*(a(p,y)-D)+D},getRandomInt:(p,y,B)=>{const D=k(p,y);return e.floor(l.getRandom(B)*(a(p,y)-D+1)+D)},areFloatsEqual:(p,y,B)=>{const D=m(p),F=m(y);return m(p-y)<=(D>F?F:D)*(null==B?1E-6:m(B))},areArraysEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;let B=p.length;if(B!==y.length)return!1;for(;B;)if(p[--B]!==y[B])return!1}return!0},areObjectsEqual:(p,
y)=>{if(p!==y){if(null==p||null==y)return!1;for(const B in p)if(p[B]!==y[B])return!1;for(const B in y)if(p[B]!==y[B])return!1}return!0},getElement:(p,y)=>g.getElementsByTagName(p||"body")[0<y?y:0],loadFontFaces:(p,y)=>{Promise.all(p.map(({family:B,url:D,options:F})=>(new FontFace(B,"url("+D+")",F)).load())).then(B=>{for(const D of B)n.add(D),A(D);y?.(B)})},loadFontFace:(p,y,B={},D)=>{p=new FontFace(p,"url("+y+")",B);p.loaded.then(F=>{n.add(F);A(F);D?.(F)});p.load()},registerForFontNotification:(p,
y)=>{u[y]?p&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y)):(x[y]??(x[y]=[])).push(p)},createBaseFontCSSRule:p=>{l.addCSSRule(l.createStylesheet(),"body, input","font-family:"+p)},loadCSSFonts:p=>{p?.forEach(l.createStylesheetLink)},createStylesheetLink:p=>{if(p){let y=h[p];y?console.warn("stylesheet already exists",p):(y=h[p]=q("link"),y.rel="stylesheet",y.href=p,c.appendChild(y));return y}},createStylesheet:()=>{const p=q("style");c.appendChild(p);return p.sheet},addCSSRule:(p,
y,B,D)=>{p.insertRule(y+"{"+B+"}",D??0)},removeCSSRules:p=>{let y=p.cssRules.length;for(;y;)p.deleteRule(--y)},createInputPlaceholderCSSRule:(p,y,B,D=1)=>{let F=p.__sheet;F?l.removeCSSRules(F):F=p.__sheet=l.createStylesheet();p=p.getODE();p=p.id||(p.id="id"+ ++v);const K=[];y&&K.push("color:"+y);B&&K.push("font-family:"+B);D&&K.push("opacity:"+D);l.addCSSRule(F,"#"+p+"::placeholder",K.join("; "))},isSorted:(p,y)=>{const B=p.length;for(let D=1;D<B;D++)if(0<y(p[D-1],p[D]))return!1;return!0},chainSortFunc:(...p)=>
(y,B)=>{for(const D of p){const F=D(y,B);if(0!==F)return F}return 0},getAlphaObjSortFunc:z((p,y,B,D)=>{const F=y?1:-1,K=l.I18N.getLocale(),L={sensitivity:B?"accent":"variant"};return(P,N)=>{P=P[p];N=N[p];D?("string"!==typeof P&&(P=""+P),"string"!==typeof N&&(N=""+N)):(P=P||"",N=N||"");return P.localeCompare(N,K,L)*F}}),getNumericObjSortFunc:z((p,y)=>{const B=y?1:-1;return(D,F)=>{D=D[p]||0;F=F[p]||0;return(D-F)*B}}),csvStringToArray:(p,y)=>{if(!p)return[];const B=[[]];let D;for(;D=M.exec(p);)D[1].length&&
","!==D[1]&&B.push([]),B[B.length-1].push(void 0!==D[2]?D[2].replace(O,"$1"):D[3]);if(y){const F=B.shift();return B.map(K=>{let L=0;return F.reduce((P,N)=>{P[N]=K[L++];return P},{})})}return B},prepareCSVDataURI:(p,y)=>{const B=K=>{if(K&&b(K)){const L=[],P=K.length;for(let N=0,U;P>N;N++)U=K[N],U=null==U?"":U.toString(),U=U.replace(/"/g,'""'),0<=U.search(/("|,|\n)/g)&&(U='"'+U+'"'),L.push(U);return L.join(",")}d("Unexpected row",K);return null},D=[];if(y){var F=B(y);F&&D.push(F)}if(p)if(b(p)){F=p.length;
for(let K=0;F>K;K++){const L=B(p[K]);L&&D.push(L)}}else d("Rows were not an array");return l.encodeCSVDataURI(D.join("\r\n"),y)},encodeCSVDataURI:(p,y)=>"data:text/csv;charset=utf-8"+(null==y?"":";header="+(y?"present":"absent"))+","+encodeURIComponent(p),dataURIToBlob:p=>{var y=p.indexOf(",");const B=p.slice(0,y).split(":")[1].split(";")[0];p=p.slice(y+1);if(B.startsWith("text/"))p=decodeURIComponent(p);else{p=atob(p);y=p.length;const D=new Uint8Array(y);for(;y;)D[--y]=p.charCodeAt(y);p=D}return new Blob([p],
{type:B})},formatAsPercentage:(p,y=2)=>{switch(typeof p){case "number":return y=k(16,a(0,y)),p=e.round(a(0,k(1,p))*f(10,2+y))/f(10,y),(0===p%1?p:p.toFixed(y))+"%";case "string":return p;default:return d("formatAsPercentage expects a number"),p}},leftPadNumber:(p,y,B="0",D=10)=>{p=p.toString(D);return B.repeat(a(y-p.length,0))+p},removeMarkup:(p,y)=>{if(!p)return"";y?.brToLineFeed&&(p=p.replace(/<br\s*\/?>/gi,"\n"));return p.replace(/<\/?[^>]+(>|$)/g,"")},escapeMarkup:(()=>{const p=RegExp("[&<>\"']",
"g"),y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},B=D=>y[D];return D=>D.replace(p,B)})(),memoize:z,debounce:(p,y,B=!1)=>{let D;return function(...F){const K=this,L=B&&!D;clearTimeout(D);D=setTimeout(()=>{D=null;B||p.apply(K,F)},y);L&&p.apply(K,F)}},createFixedThresholdCounter:(p,y,B,D)=>{var F=l.AccessorSupport.generateName;const K="function"===typeof p||p instanceof JS.Module,L={};D=D||F("counter",B);const P=F(D,"increment");F=F(D,"decrement");if(void 0!==(K?p.instanceMethod(P):
p[P]))return d("Increment: Abort clobber",P,p),!1;if(void 0!==(K?p.instanceMethod(F):p[F]))return d("Decrement: Abort clobber",F,p),!1;L[P]=function(){const N=this[D]+1;this[D]=N;this.fireEvent(D,N);N===y&&this.set(B,!0)};L[F]=function(){const N=this[D];if(0!==N){var U=N-1;this[D]=U;this.fireEvent(D,U);N===y&&this.set(B,!1)}};p[K?"include":"extend"](L);return!0},makeURLSearchParams:(p={})=>{const y=new URLSearchParams;for(const B in p){const D=p[B];void 0!==D&&y.set(B,D)}return y},doFetch:(p,y,B,
D,F,K)=>fetch(p,y).then(L=>{if(!L.ok)throw new w(L.status,p,L.statusText);return L}).then(L=>B?L.text():L.json()).then(L=>{if(D)try{if(B)D(L);else{if(!1===L.success)throw new w(200,p,L.message??L.data?.message);D(L.data)}}catch(P){throw L=new w(200,p,P.message),L.stack=P.stack,L;}}).catch(L=>{if(F){if("FetchError"!==L.name){const P=new w(0,p,L.message);P.stack=L.stack;L=P}F(L)}}).finally(()=>{K?.()}),toNameCase:(p,y)=>{if(!p)return"";p=p.trim().toLowerCase().split(/([\s\-'\u2019"\u201c\u201d().,\/])/).reduce((B,
D)=>B+(D[0]??"").toUpperCase()+D.slice(1),"");if(/\bMac[A-Za-z]{2,}[^aciozj]\b/.test(p)||/\bMc/.test(p))p=p.replace(/\b(Ma?c)([A-Za-z]+)/,(B,D,F)=>D+(F[0]??"").toUpperCase()+F.slice(1)),p=p.replace(/\bMacEvicius\b/,"Macevicius").replace(/\bMacHado\b/,"Machado").replace(/\bMacHar\b/,"Machar").replace(/\bMacHin\b/,"Machin").replace(/\bMacHlin\b/,"Machlin").replace(/\bMacIas\b/,"Macias").replace(/\bMacIulis\b/,"Maciulis").replace(/\bMacKie\b/,"Mackie").replace(/\bMacKle\b/,"Mackle").replace(/\bMacKlin\b/,
"Macklin").replace(/\bMacQuarie\b/,"Macquarie").replace(/\bMacOmber\b/,"Macomber").replace(/\bMacIn\b/,"Macin").replace(/\bMacKintosh\b/,"Mackintosh").replace(/\bMacKen\b/,"Macken").replace(/\bMacHen\b/,"Machen").replace(/\bMacHiel\b/,"Machiel").replace(/\bMacIol\b/,"Maciol").replace(/\bMacKell\b/,"Mackell").replace(/\bMacKlem\b/,"Macklem").replace(/\bMacKrell\b/,"Mackrell").replace(/\bMacLin\b/,"Maclin").replace(/\bMacKey\b/,"Mackey").replace(/\bMacKley\b/,"Mackley").replace(/\bMacHell\b/,"Machell").replace(/\bMacHon\b/,
"Machon").replace(/\bMacAyla\b/,"Macayla");p=p.replace(/\bMacmurdo/,"MacMurdo").replace(/\bMacisaac/,"MacIsaac").replace(/\bAl(?=\s+\w)\b/g,"al").replace(/\bAp\b/g,"ap").replace(/\bBen(?=\s+\w)\b/g,"ben").replace(/\bDell([ae])\b/g,"dell$1").replace(/\bD([aeiu])\b/g,"d$1").replace(/\bDe([lr])\b/g,"de$1").replace(/\bEl\b/g,"el").replace(/\bLa\b/g,"la").replace(/\bLe(?=\s+\w)\b/g,"le").replace(/\bLo\b/g,"lo").replace(/\bVan(?=\s+\w)\b/g,"van").replace(/\bVon\b/g,"von").replace(/\bD['\u2019]/g,"d'").replace(/\b(?:\d{4}|(?:[IVX])(?:X{0,3}I{0,3}|X{0,2}VI{0,3}|X{0,2}I?[VX]))$/i,
B=>B.toUpperCase()).replace(/\b[0-9](x)\b/,B=>B.toUpperCase()).replace(/(?:^|\\s)[bcdfghjklmnpqrstvwxzBCDFGHJKLMNPQRSTVWXZ]{2}\s/,B=>B.toUpperCase()).replace(/\bMR\.?\b/,"Mr").replace(/\bMS\.?\b/,"Ms").replace(/\bDR\.?\b/,"Dr").replace(/\bST\.?\b/,"St").replace(/\bJR\.?\b/,"Jr").replace(/\bSR\.?\b/,"Sr").replace(/\bLT\.?\b/,"Lt").replace(/\bThe\b/g,"the").replace(/\bOf\b/g,"of").replace(/\bAnd\b/g,"and").replace(/\bY\s/g,"y").replace(/\s{2,}/g," ");return y?p:(p[0]??"").toUpperCase()+p.slice(1)},
I18N:{setLocale:p=>{t=p},getLocale:()=>t,addDictionary:(p,y)=>{J[y]=Object.assign(J[y]??{},p)},setDictionary:(p,y)=>{J[y]=p??{}},get:(p,...y)=>{var B=t??=(navigator.language??"en").split("-")[0].toLowerCase();B=(J[B]??J.en??{})[p];return null!=B?0<y.length?B.replaceAll(C,(D,F,K,L)=>K&&L?1==y[parseInt(F)]?K:L:"").replaceAll(I,(D,F)=>y[F]):B:p}}};n.onloadingdone=p=>{for(const y of p.fontfaces)A(y)}})(global);
(r=>{const w=(t,h)=>{t.startsWith('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return h?JSON.parse(t):t}catch(d){}},v=r.Cookie={defaults:{raw:!1,json:!1},read:(t,h)=>{h={...v.defaults,...h};const d=h.raw?f=>f:f=>decodeURIComponent(f.split("+").join(" "));h=h.json;const e=document.cookie.split("; "),m=e.length,k=t?void 0:{};for(let f=0;f<m;){var a=e[f++].split("=");const b=d(a.shift());a=d(a.join("="));if(t){if(t===b)return w(a,h)}else k[b]=w(a,h)}return k},write:(t,h,d)=>
{d={...v.defaults,...d};if("number"===typeof d.expires){const b=d.expires,g=d.expires=new Date;g.setDate(g.getDate()+b)}h=d.json?JSON.stringify(h):String(h);const {raw:e,expires:m,path:k,domain:a,samesite:f}=d;return document.cookie=[e?t:encodeURIComponent(t),"=",e?h:encodeURIComponent(h),m?"; expires="+m.toUTCString():"",k?"; path="+k:"",a?"; domain="+a:"",f?"; samesite="+f:"",d.secure?"; secure":""].join("")},remove:(t,h)=>void 0!==v.read(t,h)?(v.write(t,"",{...h,expires:-1}),!0):!1}})(myt);
(r=>{const w=console.error,v=JSON.parse,t=global.localStorage,h=t.getItem.bind(t),d=t.setItem.bind(t),e=t.removeItem.bind(t),m=t.clear.bind(t),k=(f,b,g)=>{if(0<b){const c="__timerId_"+g;(g=a[c])&&clearTimeout(g);a[c]=setTimeout(()=>{f();delete a[c]},b)}else f()},a=r.LocalStorage={hasDatum:(f,b)=>{if(f&&(b=h(b??"myt")))try{return null!=v(b)[f]}catch(g){w(g)}return!1},getDatum:(f,b)=>{if(f&&(b=h(b??"myt")))try{const g=v(b);if("object"===typeof g)return g[f]}catch(g){w(g)}},setDatum:(f,b,g,c)=>{g=g??
"myt";k(()=>{const q=a.getData(g);q[f]=b;d(g,JSON.stringify(q))},c,g+"___"+f)},removeDatum:(f,b,g)=>{b=b??"myt";k(()=>{const c=a.getData(b);delete c[f];d(b,JSON.stringify(c))},g,b+"___"+f)},hasData:f=>null!=h(f??"myt"),getData:f=>{if(f=h(f??"myt"))try{return v(f)}catch(b){w(b)}return{}},setData:(f,b,g)=>{b=b??"myt";f??={};return"object"===typeof f?(k(()=>{d(b,JSON.stringify(f))},g,b),!0):!1},removeData:(f,b)=>{f=f??"myt";k(()=>{e(f)},b,f)},getLength:()=>t.length,getKey:t.key.bind(t),getItem:h,setItem:d,
removeItem:e,clear:m,get:h,set:d,remove:e,clearAll:m}})(myt);
(r=>{const w=/(?:^|&)([^&=]*)=?([^&]*)/g,v=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;r.URI=new JS.Class("URI",{initialize:function(h,d){h&&this.parse(h,d)},setSource:function(h){this.source=h},setProtocol:function(h){this.protocol=
h},setAuthority:function(h){this.authority=h},setUserInfo:function(h){this.userInfo=h},setUser:function(h){this.user=h},setPassword:function(h){this.password=h},setHost:function(h){this.host=h},setPort:function(h){this.port=h},setRelative:function(h){this.relative=h},setPath:function(h){this.path=h},setDirectory:function(h){this.directory=h},setFile:function(h){this.file=h},setQuery:function(h){this.query=h},setAnchor:function(h){this.anchor=h},parse:function(h,d){const e=this,[m,k,a,f,b,g,c,q,x,
u,n,A,J,z]=(d?t:v).exec(h)??[];e.setSource(m??"");e.setProtocol(k??"");e.setAuthority(a??"");e.setUserInfo(f??"");e.setUser(b??"");e.setPassword(g??"");e.setHost(c??"");e.setPort(q??"");e.setRelative(x??"");e.setPath(u??"");e.setDirectory(n??"");e.setFile(A??"");e.setQuery(J??"");e.setAnchor(z??"");e.queryPairs={};e.query.replace(w,(C,I,M)=>{I&&(e.queryPairs[I]=M)})},decodeQueryParam:h=>decodeURIComponent(h).split("+").join(" "),getQuery:function(){var h=this.queryPairs;const d=[];for(const e in h)d.push(e+
"="+encodeURIComponent(this.getQueryParam(e)));h=d.join("&");return 0<h.length?"?"+h:h},getQueryParam:function(h){h=this.queryPairs[h];return null==h?void 0:this.decodeQueryParam(h)},setQueryParam:function(h,d){this.queryPairs[encodeURIComponent(h)]=encodeURIComponent(d)},removeQueryParam:function(h){delete this.queryPairs[h]},getPathParts:function(h){const d=this.path.split("/");if(!h)for(h=d.length;h;)0===d[--h].length&&d.splice(h,1);return d},toString:function(h){const d=this.path;h=h?this.query?
"?"+this.query:"":this.getQuery();const e=this.anchor;let m=this.toStringThroughPort();d?m+=d:this.host&&(h||e)&&(m+="/");h&&(m+=h);e&&(m+="#"+e);return m},toStringThroughPort:function(){const h=this.protocol,d=this.host,e=this.userInfo,m=this.port;let k="";h&&(k+=h+"://");e&&d&&(k+=e+"@");d&&(k+=d,m&&(k+=":"+m));return k}})})(myt);
(r=>{const w=Math,{PI:v,cos:t,sin:h,sqrt:d}=w,e=(a,f,b,g,c,q)=>{"object"===typeof a&&(q=c,c=g,g=b,b=f,f=a.y,a=a.x);"object"===typeof b&&(q=b.height,c=b.width,g=b.y,b=b.x);return a>=b&&f>=g&&a<=b+c&&f<=g+q},m=(a,f,b,g,c)=>{a=b-a;f=g-f;f=a*a+f*f;return c?f:d(f)},k=(a,f,b,g,c)=>{null==c&&(c=6371);a=a*v/180;b=b*v/180;return c*w.acos(h(a)*h(b)+t(a)*t(b)*t(g*v/180-f*v/180))};r.Geometry={getClosestPointOnALineToAPoint:(a,f,b,g,c,q,x)=>{b-=a;g-=f;c=(b*(c-a)+g*(q-f))/(b*b+g*g);x&&(c=w.min(1,w.max(0,c)));return{x:a+
b*c,y:f+g*c}},isPointInPath:(a,f,b,g)=>{"object"===typeof a&&(g=b,b=f,f=a.y,a=a.x);if(e(a,f,b)&&(b=g.length,6<=b)){let c=!1,q=g[0],x=g[1],u,n;for(;b;)n=g[--b],u=g[--b],n>f!==x>f&&a<(q-u)*(f-n)/(x-n)+u&&(c=!c),q=u,x=n;return c}return!1},measureDistance:m,measureLatLngDistance:k,degreesToRadians:a=>a*v/180,radiansToDegrees:a=>180*a/v,rectContainsPoint:e,circleContainsPoint:(a,f,b,g,c)=>m(a,f,b,g,!0)<=c*c,circleContainsLatLng:(a,f,b,g,c,q)=>k(a,f,b,g,q)<=c,polarToCartesian:(a,f,b,g)=>{b??=0;g??=0;f%=
360;if(0===f)f=a,a=0;else if(90===f)f=0;else if(180===f)f=-a,a=0;else if(270===f)f=0,a=-a;else{const c=f*v/180;f=a*t(c);a*=h(c)}return[b+f,g+a]},cartesianToPolar:(a,f,b,g,c)=>{b??=0;g??=0;a-=b;g=f-g;f=d(a*a+g*g);g=w.atan2(g,a);0>g&&(g+=2*v);return[f,c?g:180*g/v]}}})(myt);
(r=>{const w=JS.Module,v=console.log,t=r.dumpStack;r.Observable=new w("Observable",{attachObserver:function(h,d,e){return h&&d&&e?(this.getObservers(e).push(d,h),!0):!1},detachObserver:function(h,d,e){if(h&&d&&e){var m=this.__obsbt;if(m&&(e=m[e])){m=!1;let k=e.length;for(;2<=k;){const a=e[--k],f=e[--k];h===a&&d===f&&(e.splice(k,2),m=!0)}return m}}return!1},detachAllObservers:function(){const h=this.__obsbt;if(h)for(const d in h){const e=h[d];let m=e.length;for(;2<=m;){const k=e[--m],a=e[--m];k&&a&&
("function"===typeof k.detachFrom&&k.detachFrom(this,a,d)||e.splice(m,2))}}},getObservers:function(h){let d;return(d=this.__obsbt??(this.__obsbt={}))[h]??(d[h]=[])},hasObservers:function(h){const d=this.__obsbt;return d?0<d[h]?.length:!1},createEvent:function(h,d){return{source:this,type:h,value:d}},fireEvent:function(h,d,e){if(null==e){var m=this.__obsbt;m&&(e=m[h])}if(e){m={source:this,type:h,value:d};const k=this.__aet??(this.__aet={});if(k[h])r.global.error.notify("warn","eventLoop","Abort refiring event:"+
h,null,{observable:this,type:h,value:d});else{k[h]=!0;for(d=e.length;2<=d;){const a=e[--d],f=e[--d];if(a&&f)try{if("function"===typeof f){if(f.call(a,m))break}else if(a[f]?.(m))break}catch(b){t(b),v("Additional context",f,a)}}k[h]=!1}}}});r.Observer=new w("Observer",{valueFromEvent:h=>h&&"object"===typeof h&&h.type?h.value:h,syncTo:function(h,d,e,m,k){m??=e;try{this[d](h.createEvent(e,h.get(m)))}catch(a){t(a)}k||this.attachTo(h,d,e,k)},isAttachedTo:function(h,d,e){if(h&&d&&e){var m=this.__obt;if(m&&
(e=m[e]))for(m=e.length;2<=m;){const k=e[--m],a=e[--m];if(h===k&&d===a)return!0}}return!1},getObservables:function(h){let d;return(d=this.__obt??(this.__obt={}))[h]??(d[h]=[])},hasObservables:function(h){const d=this.__obt;return d?0<d[h]?.length:!1},attachTo:function(h,d,e,m){if(h&&d&&e){const k=this.getObservables(e);if(m){const a=this,f=d;this.__methodNameCounter??(this.__methodNameCounter=0);d="__DO_ONCE_"+this.__methodNameCounter++;this[d]=b=>{a.detachFrom(h,d,e);delete a[d];return a[f](b)}}if(h.attachObserver(this,
d,e))return k.push(d,h),!0}return!1},detachFrom:function(h,d,e){if(h&&d&&e){var m=this.__obt;if(m&&(m=m[e])){let k=!1,a=m.length;for(;2<=a;){const f=m[--a],b=m[--a];h===f&&d===b&&h.detachObserver(this,d,e)&&(m.splice(a,2),k=!0)}return k}}return!1},detachFromAllObservables:function(){var h=this.__obt;if(h)for(const [d,e]of Object.entries(h)){for(h=e.length;2<=h;){const m=e[--h],k=e[--h];m.detachObserver(this,k,d)}e.length=0}},constrain:function(h,d){if(h&&d){const m=d.length;if(0!==m%2)v("Observables uneven",
this);else{var e;const k=(e=this.__cbmn??(this.__cbmn={}))[h]??(e[h]=[]);if(0<k.length)v("Constraint exists for "+h+" on",this);else{for(e=0;e<m;){const a=d[e++],f=d[e++];a&&f&&(this.attachTo(a,h,f),k.push(a,f))}try{this[h]()}catch(a){t(a)}}}}},releaseConstraint:function(h){if(h){var d=this.__cbmn;if(d&&(d=d[h])){let e=d.length;for(;2<=e;){const m=d[e--],k=d[e--];this.detachFrom(k,h,m)}d.length=0}}},releaseAllConstraints:function(){const h=this.__cbmn;if(h)for(const d in h)this.releaseConstraint(d)}})})(myt);
(r=>{const w=console.warn,v=r.global=new JS.Singleton("Global",{include:[r.Observable],initialize:()=>{},register:(t,h)=>{v.hasOwnProperty(t)&&(w("Global key in use",t),v.unregister(t));v[t]=h;v.fireEvent("register"+t,h)},unregister:t=>{if(v.hasOwnProperty(t)){const h=v[t];delete v[t];v.fireEvent("unregister"+t,h)}else w("Global key not in use",t)}})})(myt);
(r=>{let w;new JS.Singleton("GlobalError",{include:[r.Observable],initialize:function(){w=this;w.setStackTraceLimit(50);w.setConsoleLogging(!0);r.global.register("error",w)},setConsoleLogging:v=>{w.consoleLogging=v},setStackTraceLimit:v=>{Error.stackTraceLimit=w.stackTraceLimit=v},notify:(v,t,h,d,e)=>{d??=Error(h??t);d=d.stack??d.stacktrace;w.fireEvent(t??"error",{msg:h,stacktrace:d,...e});if(w.consoleLogging&&v)console[v](d)}})})(myt);
(r=>{const w=global,v=w.getComputedStyle,t=document,h=Math.max,d=k=>{const {zIndex:a,opacity:f}=v(k);if("auto"===a){if(1===parseInt(f,10)){let b=0;k=k.childNodes;let g=k.length;for(;g;){const c=k[--g];1===c.nodeType&&(b=h(b,d(c)))}return b}return 0}return parseInt(a,10)},e=(k,a)=>{const f=[];for(;k;){f.push(k);if(k===a)break;k=k.parentNode}return f},m=r.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(k,a,f)=>{k=t.createElement(k);for(const b in f)k[b]=f[b];for(const b in a)k.style[b]=
a[b];return k},isDomElementVisible:k=>{if("INPUT"!==k.nodeName||"hidden"!==k.type)for(;k;){if(k===t)return!0;const {display:a,visibility:f}=v(k);if("none"===a||"hidden"===f)break;k=k.parentNode}return!1},getZIndexRelativeToAncestor:(k,a)=>{if(k&&a)for(k=e(k,a),a=k.length-1;a;){const f=v(k[--a]),b=f.zIndex,g="auto"===b;if(0===a||!g||1!==parseInt(f.opacity,10))return g?0:parseInt(b,10)}return 0},getAncestorArray:e,getHighestZIndex:d,getRelativePosition:(k,a)=>{if(k){let f=0,b=0;for(;k&&"BODY"!==k.nodeName&&
k!==a;)if(f+=k.offsetLeft,b+=k.offsetTop,(k=k.offsetParent)&&"BODY"!==k.nodeName){const {borderLeftWidth:g,borderTopWidth:c}=v(k);f+=parseInt(g,10)-k.scrollLeft;b+=parseInt(c,10)-k.scrollTop}return{x:f,y:b}}},getTruePosition:k=>{if(k)return k=k.getBoundingClientRect(),k.left+=w.scrollX,k.top+=w.scrollY,k},simulateDomEvent:(k,a,f)=>{if(k){const b={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},g={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(f)for(const q in f)b[q]=f[q];let c;for(const q in g)if(g[q].test(a)){c=q;break}if(!c)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(t.createEvent)f=t.createEvent(c),"HTMLEvents"===c?f.initEvent(a,b.bubbles,b.cancelable):f.initMouseEvent(a,b.bubbles,b.cancelable,t.defaultView,b.button,b.pointerX,b.pointerY,b.pointerX,b.pointerY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,null),k.dispatchEvent(f);
else{b.clientX=b.pointerX;b.clientY=b.pointerY;f=t.createEventObject();for(const q in b)f[q]=b[q];k.fireEvent("on"+a,f)}}},getScrollbarSize:r.memoize(()=>{const k=t.body,a=m.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});k.appendChild(a);const f=a.offsetWidth-a.clientWidth;k.removeChild(a);return f})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(k){if(Array.isArray(k)){const [a,
f]=k;this.__oE=a;this.__iE=f;this.__iS=f.style;this.__oS=a.style;f.model=a.model=this}else this.__oE=this.__iE=k,this.__iS=this.__oS=k.style,k.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(k){this.__iE.className=this.domClass=k},addDomClass:function(k){const a=this.__iE.className;this.setDomClass((a?
a+" ":"")+k)},removeDomClass:function(k){var a=this.__iE.className;if(a){a=a.split(" ");let f=a.length;for(;f;)a[--f]===k&&a.splice(f,1);this.setDomClass(a.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(k){this.__iE.id=this.domId=k},setZIndex:function(k){this.__oS.zIndex=k},setStyleProperty:function(k,a){this.__iS[k]=a},getPagePosition:function(k){return m["get"+(k?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){m.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return d(this.__iE)},getHighestChildZIndex:function(k){const a=this.__iE.childNodes;let f=a.length,b=0;for(;f;){const g=a[--f];1===g.nodeType&&g!==k&&(b=h(b,d(g)))}return b},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(k,a){(a?this.__iE:this.__oE).scrollTop=k||0}})})(myt);
(r=>{let w;const v=h=>{for(;h.lastChild;)h=h.lastChild;return h},t=(h,d)=>{w.lastTraversalWasForward=h;let e=document.body,m=e;var k=document.activeElement;let a=m,f;const b=h?"getNextFocus":"getPrevFocus";k&&(a=m=k,(k=m.model)??(k=w.findModelForDomElement(m)),k&&(d=k.getFocusTrap(d))&&(e=d.getIDE()));for(;a;){if(a.model&&a.model[b]&&(f=a.model[b]()))a=f.getIDE();else if(h)if(a.firstChild)a=a.firstChild;else{if(a===e)return m.model;if(a.nextSibling)a=a.nextSibling;else for(;a&&(a=a.parentNode,a!==
e);)if(a.nextSibling){a=a.nextSibling;break}}else a=a===e?v(e):a.previousSibling?v(a.previousSibling):a.parentNode;if(a===m)return m.model;if(1===a.nodeType)if((k=a.model)&&k instanceof r.View){if(k.isFocusable())return k}else if(d=a.nodeName,!("A"!==d&&"AREA"!==d&&"INPUT"!==d&&"TEXTAREA"!==d&&"SELECT"!==d&&"BUTTON"!==d||a.disabled||isNaN(a.tabIndex))&&r.DomElementProxy.isDomElementVisible(a)&&(k=w.findModelForDomElement(a),!k?.searchAncestorsOrSelf(g=>!0===g.maskFocus))){a.focus();w.focusedDom=a;
break}}};new JS.Singleton("GlobalFocus",{include:[r.Observable],initialize:function(){w=this;w.lastTraversalWasForward=!0;r.global.register("focus",w)},setFocusedView:h=>{if(w.focusedView!==h){w.prevFocusedView=w.focusedView;if(w.focusedView=h)w.focusedDom=null;w.fireEvent("focused",h)}},notifyFocus:h=>{w.focusedView!==h&&w.setFocusedView(h)},notifyBlur:h=>{w.focusedView===h&&w.setFocusedView(null)},clear:()=>{w.focusedView?w.focusedView.blur():w.focusedDom&&(w.focusedDom.blur(),w.focusedDom=null)},
next:h=>{t(!0,h)?.focus()},prev:h=>{t(!1,h)?.focus()},findModelForDomElement:h=>{for(;h;){let d=h.model;if(d&&d instanceof r.View)return d;h=h.parentNode}}})})(myt);
(r=>{const w=JS.Module,v=r.global,t=v.focus,h=()=>({source:null,type:null,value:null}),d=c=>{c=c.value??c;return(c.target??c.srcElement).model},e=r.KeyObservable=new w("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:h(),getKeyFromEvent:c=>c.value.key,getCodeFromEvent:c=>c.value.code,isEnterKeyEvent:c=>c.value.code===v.keys.CODE_ENTER,isEscKeyEvent:c=>c.value.code===v.keys.CODE_ESC,isShiftKeyEvent:c=>v.keys.isShiftCode(c.value.code)},createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,
q,x,e)??this.callSuper(c,q,x)}}),m=r.MouseObservable=new w("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:h(),getMouseFromEvent:c=>({x:c.value.pageX,y:c.value.pageY}),getMouseFromEventRelativeToView:(c,q)=>{q=q.getPagePosition();c=m.getMouseFromEvent(c);c.x-=q.x;c.y-=q.y;return c}},createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,q,x,m,!0)??this.callSuper(c,q,x)}}),k=r.ScrollObservable=
new w("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:h(),getScrollFromEvent:c=>{const {scrollLeft:q,scrollTop:x}=d(c)?.getIDE();return{x:q,y:x}}},createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,q,x,k)??this.callSuper(c,q,x)}}),a=r.TouchObservable=new w("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:h()},createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,q,x,a,!1)??this.callSuper(c,q,x)}}),
f=r.FocusObservable=new w("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:h()},initNode:function(c,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(c,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(c){this.focused!==c&&(this.focused=c,this.inited&&(this.fireEvent("focused",c),c?t.notifyFocus(this):t.notifyBlur(this)))},setFocusable:function(c){if(this.focusable!==c){const q=this.focusable;(this.focusable=c)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",c)}},setFocusIndicator:function(c){this.focusIndicator!==c&&(this.focusIndicator=c,this.focused&&(c?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(t.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(c=>!0===c.maskFocus)},focus:function(c){this.isFocusable()&&this.getIDE().focus({preventScroll:c})},blur:function(){this.getIDE().blur()},__doFocus:function(c){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(c){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const c=this.getIDS();c.outlineWidth="thin";c.outlineColor="#8bf";c.outlineStyle="solid";c.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(c,q,x){if(f.EVENT_TYPES[x]){const u=this;return n=>{n??=window.event;if(u._ignoreFocus)n.cancelBubble=!0,n.stopPropagation?.(),n.preventDefault();
else{var A=f.EVENT;A.source=u;A.type=n.type;A.value=n;c[q](A)||(n.cancelBubble=!0,n.stopPropagation?.());A.source=void 0}}}return this.callSuper(c,q,x)}}),b=r.InputObservable=new w("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:h()},createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,q,x,b)??this.callSuper(c,q,x)}}),g=r.DragDropObservable=new w("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:h()},
createDomHandler:function(c,q,x){return this.createStandardDomHandler(c,q,x,g,!0)??this.callSuper(c,q,x)}});r.DomObservable=new w("DomObservable",{attachDomObserver:function(c,q,x,u,n){if(c&&q&&x){const A=this.createDomHandler(c,q,x);if(A){u=!!u;const J=this.__dobsbt??(this.__dobsbt={}),z=J[x];z?z.push(c,q,A,u):J[x]=[c,q,A,u];r.addEventListener(this.getDomElementForDomObservable(x),x,A,u,n);return!0}}return!1},getDomElementForDomObservable:function(c){return this.getIDE()},createDomHandler:(c,q,x)=>
null,createStandardDomHandler:function(c,q,x,u,n){if(u.EVENT_TYPES[x]){const A=this,J=u.EVENT;return z=>{z??=window.event;J.source=A;J.type=z.type;J.value=z;c[q](J)||(z.cancelBubble=!0,z.stopPropagation?.(),n&&z.preventDefault());J.source=void 0}}},detachDomObserver:function(c,q,x,u){if(c&&q&&x){var n=this.__dobsbt;if(n&&(n=n[x])){u=!!u;const A=this.getDomElementForDomObservable(x);let J=!1,z=n.length;for(;4<=z;){const C=n[--z],I=n[--z],M=n[--z],O=n[--z];c===O&&q===M&&u===C&&(A&&r.removeEventListener(A,
x,I,u),n.splice(z,4),J=!0)}return J}}return!1},detachAllDomObservers:function(){var c=this.__dobsbt;if(c)for(const [q,x]of Object.entries(c)){for(c=x.length+2;4<=c;){const u=x[c-=3],n=x[--c];r.removeEventListener(this.getDomElementForDomObservable(q),q,n,u)}x.length=0}}});r.DomObserver=new w("DomObserver",{extend:{getSourceViewFromEvent:d},attachToDom:function(c,q,x,u,n){if(c&&q&&x){u=!!u;let A;const J=(A=this.__dobt??(this.__dobt={}))[x]??(A[x]=[]);c.attachDomObserver(this,q,x,u,n)&&J.push(u,q,c)}},
detachFromDom:function(c,q,x,u){if(c&&q&&x){var n=this.__dobt;if(n&&(n=n[x])){u=!!u;let A=!1,J=n.length;for(;3<=J;){const z=n[--J],C=n[--J],I=n[--J];c===z&&q===C&&u===I&&c.detachDomObserver(this,q,x,u)&&(n.splice(J,3),A=!0)}return A}}return!1},detachFromAllDomSources:function(){var c=this.__dobt;if(c)for(const [q,x]of Object.entries(c)){for(c=x.length;3<=c;){const u=x[--c],n=x[--c],A=x[--c];u.detachDomObserver(this,n,q,A)}x.length=0}}})})(myt);
(r=>{let w;const {KeyObservable:v,global:t}=r,h=t.focus,d=v.getCodeFromEvent,e=new Set,m="Firefox"===BrowserDetect.browser,k=m?"OSLeft":"MetaLeft",a=m?"OSRight":"MetaRight",f=()=>e.has("ShiftLeft")||e.has("ShiftRight"),b=()=>e.has("ControlLeft")||e.has("ControlRight"),g=()=>e.has("AltLeft")||e.has("AltRight"),c=()=>e.has(k)||e.has(a),q=(u,n)=>{switch(u){case "Backspace":return u=n.nodeName,!("TEXTAREA"===u||"INPUT"===u&&("text"===n.type||"number"===n.type||"password"===n.type)||"DIV"===u&&"true"===
n.contentEditable&&n.firstChild);case "Tab":return!0}return!1},x=(u,n)=>{for(const A of["keydown","keypress","keyup"])w[n](u,"__hndl_"+A,A)};new JS.Singleton("GlobalKeys",{include:[r.DomElementProxy,r.DomObservable,r.DomObserver,v,r.Observable,r.Observer],initialize:function(){t.register("keys",w=this);w.CODE_ENTER="Enter";w.CODE_ESC="Escape";w.CODE_SPACE="Space";w.CODE_ARROW_LEFT="ArrowLeft";w.CODE_ARROW_UP="ArrowUp";w.CODE_ARROW_RIGHT="ArrowRight";w.CODE_ARROW_DOWN="ArrowDown";w.CODE_DELETE="Delete";
w.CODE_BACKSPACE="Backspace";for(const u of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))w["CODE_"+u]="Key"+u;for(const u of"1234567890".split(""))w["CODE_"+u]="Digit"+u;w.ARROW_KEYS=[w.CODE_ARROW_LEFT,w.CODE_ARROW_UP,w.CODE_ARROW_RIGHT,w.CODE_ARROW_DOWN];w.LIST_KEYS=[w.CODE_ENTER,w.CODE_SPACE,w.CODE_ESC,...w.ARROW_KEYS];w.setDomElement(document);w.attachTo(h,"__hndl_focused","focused");x(w,"attachToDom");global.onblur=()=>{e.clear()}},isShiftKeyDown:f,isControlKeyDown:b,isAltKeyDown:g,isMetaKeyDown:c,isShiftCode:u=>
"ShiftLeft"===u||"ShiftRight"===u,isControlCode:u=>"ControlLeft"===u||"ControlRight"===u,isAltCode:u=>"AltLeft"===u||"AltRight"===u,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?c():b(),ignoreFocusTrap:()=>g(),__hndl_focused:u=>{(u=u.value)?(x(w,"detachFromDom"),x(u,"attachToDom")):((u=h.prevFocusedView)&&x(u,"detachFromDom"),x(w,"attachToDom"))},__hndl_keydown:u=>{const n=d(u);u=u.value;q(n,u.target)&&u.preventDefault();c()&&"ShiftLeft"!==n&&"ShiftRight"!==n&&"ControlLeft"!==n&&"ControlRight"!==
n&&"AltLeft"!==n&&"AltRight"!==n?(w.fireEvent("keydown",n),w.fireEvent("keyup",n)):(e.add(n),"Tab"===n&&(u=g(),f()?h.prev(u):h.next(u)),w.fireEvent("keydown",n))},__hndl_keypress:u=>{w.fireEvent("keypress",d(u))},__hndl_keyup:u=>{const n=d(u);u=u.value;q(n,u.target)&&u.preventDefault();e.delete(n);w.fireEvent("keyup",n)}})})(myt);
(r=>{const w=JS.Module,v=Math.max,t=(a,f,b,g,c=0)=>{const q=a.length;for(let x=b;c<q;c++)m(a[c],f,x),g&&(x+=b)},h=(a,f,b,g=0)=>{const c=a.length;for(let q=f;g<c;)a[g++].crossPos+=q,b&&(q+=f)},d=(a,f,b,g)=>{var c=a[f?"setWidthViaFlex":"setHeightViaFlex"];f=g?f?a.getFlexBasisWidth():a.getFlexBasisHeight():0;c.call(a,f+b)},e=(a,f,b)=>{a[f?"setXViaFlex":"setYViaFlex"](b,!1)},m=(a,f,b)=>{a[f?"setXViaFlex":"setYViaFlex"](b,!0)},k=(a,f,b)=>{a[f]!==b&&(a[f]=b,a.inited&&a.fireEvent(f,b),a.updateFlexboxLayout())};
r.FlexboxSupport=new w("FlexboxSupport",{initNode:function(a,f){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(a,f);this.updateFlexboxLayout()},setWidth:function(a){const f=this.width;this.callSuper(a);f!==this.width&&this.updateFlexboxLayout()},setHeight:function(a){const f=this.height;this.callSuper(a);f!==this.height&&this.updateFlexboxLayout()},
setDirection:function(a){k(this,"direction",a)},setWrap:function(a){k(this,"wrap",a)},setJustifyContent:function(a){k(this,"justifyContent",a)},setAlignItems:function(a){k(this,"alignItems",a)},setAlignContent:function(a){k(this,"alignContent",a)},setRowGap:function(a){k(this,"rowGap",v(0,a))},setColumnGap:function(a){k(this,"columnGap",v(0,a))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(a){this.set("totalBasisWidth",
a,!0)},setTotalBasisHeight:function(a){this.set("totalBasisHeight",a,!0)},ignoreSubviewForFlex:function(a){return a&&"function"===typeof a.ignoreFlex?a.ignoreFlex():!0},setFlexboxPaused:function(a,f){this.__flexboxPaused!==a&&((this.__flexboxPaused=a)||f||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(a){this.callSuper(a);a&&!this.ignoreSubviewForFlex(a)&&this.updateFlexboxLayout()},subviewRemoved:function(a){this.callSuper(a);!a||this.ignoreSubviewForFlex(a)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(a){this.callSuper(a);a&&this.ignoreSubviewForFlex(a)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(a){return a?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(a){return a?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(a){this._updateAgain=a},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const a=this;if(a.isOKToUpdateLayout()){var f=a.getSubviewsInLexicalOrder().filter(z=>!0!==a.ignoreSubviewForFlex(z)&&!0===z.visible);const J=f.length;if(0<J){a.__isUpdatingFlexboxLayout=!0;var b=a.direction;const z=b.startsWith("row"),C=!z;var g=a.getWidthForFlexboxLayout(),c=a.getHeightForFlexboxLayout();const I=z?a.columnGap:a.rowGap,M=z?g:c;var q=z?a.rowGap:
a.columnGap;const O=z?c:g,l=a.isWrapNotAllowed();g=a.justifyContent;c=a.alignItems;var x=l?"stretch":a.alignContent;b.endsWith("Reverse")&&f.reverse();let p=0,y=0,B=0,D=0,F={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:B,crossSize:0};b=[F];for(let K=0;K<J;){const L=f[K++],P=z?L.getFlexBasisWidth():L.getFlexBasisHeight(),N=L.getShrink(),U=L.getGrow();!l&&0<F.items.length&&p+(0===D?0:I)+P>M&&(F.extraSize=M-p,B+=F.crossSize+q,y=v(y,p),D=p=0,F={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:B,crossSize:0},b.push(F));0!==D&&(p+=I);0<N&&0<P&&(F.shrinkCount+=N,F.shrinkBasis+=P*N);0<U&&(F.growCount+=U);F.crossSize=v(F.crossSize,C?L.getFlexBasisWidth():L.getFlexBasisHeight());e(L,z,p);d(L,z,P);p+=P;F.items.push(L);D++}F.extraSize=M-p;B+=F.crossSize;y=v(y,p);if(a.isCompactOnMainAxis(z)&&(f=b.reduce((K,L)=>null==K?L.extraSize:Math.min(K,L.extraSize),null),0!==f))for(var u of b)u.extraSize-=f;a[z?"setTotalBasisWidth":"setTotalBasisHeight"](y);a[z?"setTotalBasisHeight":
"setTotalBasisWidth"](B);u=b.length;if(1<u&&"wrapReverse"===a.wrap){for(var n of b)n.crossPos=B-(n.crossPos+n.crossSize);b.reverse()}if(!a.isCompactOnCrossAxis(z))switch(n=O-B,x){default:case "start":break;case "end":h(b,n,!1);break;case "center":h(b,n/2,!1);break;case "spaceBetween":1<u&&h(b,n/(u-1),!0,1);break;case "spaceAround":n<=q?h(b,n/2,!1):(h(b,q/2,!1),n-=q,h(b,n/(2*u),!0),h(b,n/(2*u),!0,1));break;case "spaceEvenly":n<=2*q?h(b,n/2,!1):(h(b,q,!1),h(b,(n-2*q)/(u+1),!0));break;case "stretch":q=
n/u;n=0;for(var A of b)A.crossSize+=q,A.crossPos+=n,n+=q}for(const K of b){A=K.items;q=K.extraSize;if(0<q)if(0<K.growCount){q/=K.growCount;b=0;for(const N of A)0<b&&m(N,z,b),n=N.getGrow()*q,0<n&&(d(N,z,n,!0),b+=n)}else switch(b=A.length,g){default:case "start":break;case "end":t(A,z,q,!1);break;case "center":t(A,z,q/2,!1);break;case "spaceBetween":1<b&&t(A,z,q/(b-1),!0,1);break;case "spaceAround":q<=I?t(A,z,q/2,!1):(t(A,z,I/2,!1),q-=I,t(A,z,q/(2*b),!0),t(A,z,q/(2*b),!0,1));break;case "spaceEvenly":q<=
2*I?t(A,z,q/2,!1):(t(A,z,I,!1),q-=2*I,t(A,z,q/(b+1),!0))}else if(0>q&&0<K.shrinkCount){b=K.shrinkBasis;n=0;for(const N of A)0>n&&m(N,z,n),x=N.getShrink()*(z?N.getFlexBasisWidth():N.getFlexBasisHeight())/b*v(q,-b),0>x&&(d(N,z,x,!0),n+=x)}q=!1;const {crossSize:L,crossPos:P}=K;for(const N of A)switch(N.getAlignSelf()||c){case "start":e(N,C,P);d(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "end":e(N,C,P+L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()));d(N,C,C?N.getFlexBasisWidth():
N.getFlexBasisHeight(),!1);break;case "center":e(N,C,P+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2);d(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "baseline":q=!0;e(N,C,P+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2+N.getFlexBaselineOffset(z));d(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;default:e(N,C,P),d(N,C,L,!1)}q&&a.updateFlexboxLayoutBaselineAdjustment(A,z,P)}a.__isUpdatingFlexboxLayout=!1;a.isUpdateAgain()&&!a.__UPDATE_AGAIN_LOOP_PROTECTION&&
(a.setUpdateAgain(!1),a.__UPDATE_AGAIN_LOOP_PROTECTION=!0,a.updateFlexboxLayout(),a.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else a.setTotalBasisWidth(0),a.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(a,f,b)=>{}});r.FlexboxChildSupport=new w("FlexboxChildSupport",{setVisible:function(a){this.visible!==a&&(this.callSuper(a),this.updateFlexboxLayoutFromChild())},setXViaFlex(a,f){f&&(a+=this.x);this.x!==a&&(this.__isFlexUpdate=!0,this.setX(a),this.__isFlexUpdate=!1)},setYViaFlex(a,f){f&&
(a+=this.y);this.y!==a&&(this.__isFlexUpdate=!0,this.setY(a),this.__isFlexUpdate=!1)},setWidth:function(a){const f=this.width!==a;f&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(a);f&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(a){this.width!==a&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(a),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(a){const f=this.height!==a;
f&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(a);f&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(a){this.height!==a&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(a),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:a=>0,setIgnoreFlex:function(a){this.__ignoreFlex!==a&&(this.__ignoreFlex=a,this.inited&&(this.fireEvent("ignoreFlex",a),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(a){a=v(0,a);this.grow!==a&&(this.grow=a,this.inited&&(this.fireEvent("grow",a),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(a){a=v(0,a);this.shrink!==a&&(this.shrink=a,this.inited&&(this.fireEvent("shrink",a),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(a){this.alignSelf!==a&&(this.alignSelf=
a,this.inited&&(this.fireEvent("alignSelf",a),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const a=this.alignSelf;return"auto"===a||""===a?null:a},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(r=>{const w=console.log,v=new Map,t=new Map,h=(f,b)=>b+(f[0]??"").toUpperCase()+f.slice(1),d=f=>t.get(f)??(t.set(f,h(f,"set")),t.get(f)),e=f=>v.get(f)??(v.set(f,h(f,"get")),v.get(f)),m=(f,b)=>{let g;for(const c in b){const q=b[c],x=d(c);if(x in f)f[x](q);else f[c]!==q&&(f[c]=q,(g??=!1!==f.inited&&f.fireEvent)&&f.fireEvent(c,q))}},k=(f,b)=>{const g=e(b);f[g]&&w("Overwriting getter",g);f[g]=function(){return this[b]}},a=(f,b)=>{const g=d(b);f[g]&&w("Overwriting setter",g);f[g]=function(c){this[b]!==
c&&(this[b]=c,this.inited&&this.fireEvent(b,c))}};r.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:d,generateGetterName:e,generateName:h,createSetterFunction:a,createGetterFunction:k,createSetterMixin:(f,b)=>{const g={};for(const c of f)a(g,c),b&&k(g,c);return g}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(f,b){if(f)for(const g of f)this[g]=b[g],delete b[g]},callSetters:function(f){var b=this.earlyAttrs,g=this.lateAttrs;if(b||g){f={...f};if(b){var c=b.length;for(var q=0;q<c;){const u=b[q++];u in f&&(this.set(u,f[u]),delete f[u])}}let x;if(g)for(x=[],b=g.length,c=0;c<b;)q=g[c++],q in f&&(x.push(q,f[q]),delete f[q]);m(this,f);if(x)for(g=x.length,f=0;f<g;)this.set(x[f++],
x[f++])}else m(this,f)},get:function(f){const b=e(f);return"function"===typeof this[b]?this[b]():this[f]},set:function(f,b,g){if(!g&&(g=d(f),"function"===typeof this[g]))return this[g](b);this[f]!==b&&(this[f]=b,!1!==this.inited&&this?.fireEvent(f,b))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{const r=this.__meta__;if(r)for(const w of Object.keys(r))r[w]=null;for(const w of Object.keys(this))this[w]=null;this.destroyed=!0}}});
(r=>{const {Class:w,Module:v}=JS,t=console.warn;let h;const d=(g,c)=>c?(h=g).__op??(h.__op=[]):g.__op;let e;const m=(g,c)=>c?(e=g).__actives??(e.__actives=[]):g.__actives,k=new w("AbstractPool",{include:[r.Destructible],initialize:()=>{},destroy:function(){const g=d(this);g&&(g.length=0);this.callSuper()},getInstance:function(){const g=d(this,!0);return g.length?g.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(g){d(this,!0).push(this.cleanInstance(g))},
cleanInstance:g=>{"function"===typeof g.clean&&g.clean();return g},destroyPooledInstances:function(){var g=d(this);if(g){let c=g.length;for(;c;){const q=g[--c];"function"===typeof q.destroy&&q.destroy()}g.length=0}}}),a=r.SimplePool=new w("SimplePool",k,{initialize:function(g,c){this.callSuper();this.instanceClass=g??Object;this.instanceParent=c},createInstance:function(g){var c=this.instanceParent,q=this.instanceClass;return c?new q(c,g):new q}}),f=new v("TrackActives",{destroy:function(){const g=
m(this);g&&(g.length=0);this.callSuper()},getInstance:function(){const g=this.callSuper();m(this,!0).push(g);return g},putInstance:function(g){var c=m(this);if(c){const q=c.indexOf(g);if(-1<q){c.splice(q,1);this.callSuper(g);return}c="inactive"}else c="missing";t("Tried to put a "+c+" instance",g,this)},getActives:function(g){const c=m(this);if(c){if(g){const q=[],x=c.length;for(let u=0;x>u;){const n=c[u++];g.call(this,n)&&q.push(n)}return q}return c.slice()}return[]},putActives:function(){const g=
m(this);if(g){let c=g.length;for(;c;)this.putInstance(g[--c])}}}),b=r.TrackActivesPool=new w("TrackActivesPool",a,{include:[f]});r.TrackActivesMultiPool=new w("TrackActivesMultiPool",k,{initialize:function(g,c){this.callSuper();this.instanceClassesByKey=g;const q=this._poolsByClassName={},x=this.__pbk={};for(const u in g){const n=g[u];x[u]=q[n.__displayName]=new b(n,c)}},destroy:function(){const g=this.__pbk;for(const c in g)g[c].destroy();this.callSuper()},getInstance:function(){const g=arguments[0],
c=this.__pbk[g];if(c)return c.getInstance(arguments);t("No pool for key",g)},putInstance:function(g){const c=this._poolsByClassName[g.klass.__displayName];c?c.putInstance(g):t("No pool for obj",g)},destroyPooledInstances:function(){const g=this.__pbk;for(const c in g)g[c].destroyPooledInstances()},getActives:function(g){let c=[];const q=this.__pbk;for(const x in q)c.push(...q[x].getActives(g));return c},putActives:function(){const g=this.__pbk;for(const c in g)g[c].putActives()}});r.Reusable=new v("Reusable",
{clean:()=>{}})})(myt);
(r=>{const w=JS.Class,v=console.warn,t=[r.AccessorSupport,r.Destructible,r.Observable,r.Observer],h=(b,g)=>{if(g){const c=g.length;for(let q=0,x;c>q;)(x=g[q++])?b.extend(x):v("Missing mixin in",b.klass.__displayName)}b.inited=!1},d=(b,g)=>{if(g)for(;b;){if(g(b))return b;b=b.parent}},e=(b,g)=>{const c=g.name;void 0===b[c]?b[c]=g:v("Name in use",c)},m=(b,g)=>{const c=g.name;b[c]===g?delete b[c]:v("Name not in use",c)};let k;const a=b=>(k=b).__animPool??(k.__animPool=new r.TrackActivesPool(r.Animator,b));
let f;r.Eventable=new w("Eventable",{include:t,initialize:function(b,g){h(this,g);this.init(b??{})},init:function(b){this.callSetters(b);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});r.Node=new w("Node",{include:t,extend:{getMatchingAncestorOrSelf:d,getMatchingAncestor:(b,g)=>d(b?b.parent:null,g),DEFAULT_PLACEMENT:"*"},initialize:function(b,g,c){h(this,c);this.initNode(b,g??{})},initNode:function(b,g){this.callSetters(g);
this.setParent(b);this.inited=!0},destroy:function(){const b=this.subnodes;this.isBeingDestroyed=!0;if(b)for(let g=b.length;0<g;)b[--g].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(b){this.placement=b},setDefaultPlacement:function(b){this.defaultPlacement=
b},setIgnorePlacement:function(b){this.ignorePlacement=b},setParent:function(b){if(b&&!this.ignorePlacement){var g=this.placement??b.defaultPlacement;g&&(b=b.determinePlacement(g,this))}if(this.parent!==b&&!b?.destroyed){if(g=this.parent){const c=g.getSubnodes().indexOf(this);-1<c&&(this.name&&m(g,this),g.subnodes.splice(c,1),g.subnodeRemoved(this))}if(this.parent=b)b.getSubnodes().push(this),this.name&&e(b,this),b.subnodeAdded(this);this.inited&&this.fireEvent("parent",b)}},setName:function(b){if(this.name!==
b){const g=this.parent;g&&this.name&&m(g,this);this.name=b;g&&b&&e(g,this)}},determinePlacement:function(b,g){let c=b.indexOf("."),q;0<=c&&(q=b.slice(c+1),b=b.slice(0,c));"*"===b&&(b=this.defaultPlacement)&&(c=b.indexOf("."),0<=c&&(q=b.slice(c+1)+(q?"."+q:""),b=b.slice(0,c)));return(b=this[b])?q?b.determinePlacement(q,g):b:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(b){if(b){if(b===this)return!0;if(this.parent)return this.getIDE&&
b.getIDE?b.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(b)}return!1},isAncestorOf:function(b){return b?b.isDescendantOf(this):!1},getLeastCommonAncestor:function(b){for(;b;){if(this.isDescendantOf(b))return b;b=b.parent}},searchAncestorsForClass:function(b){if(b)return this.searchAncestors(g=>g instanceof b)},searchAncestorsForModule:function(b){if(b)return this.searchAncestors(g=>g.isA(b))},searchAncestors:function(b){return d(this?this.parent:null,b)},searchAncestorsOrSelf:function(b){return d(this,
b)},getAncestors:function(){const b=[];let g=this;for(;g;)b.push(g),g=g.parent;return b},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:b=>{},subnodeRemoved:b=>{},animate:function(b){if(b){const g=a(this),c=g.getInstance({ignorePlacement:!0}),q=b.callback;delete b.callback;c.callSetters(b);c.next(x=>{g.putInstance(c)});q&&c.next(q);c.setRunning(!0);return c}},getActiveAnimators:function(b){if("string"===typeof b){const g=b;b=c=>c.attribute===g}return a(this).getActives(b)},
stopActiveAnimators:function(b,g=!1){b=this.getActiveAnimators(b);let c=b.length;if(0<c){const q=a(this);for(;c;){const x=b[--c];x.reset(g);g||q.putInstance(x)}}},doOnceOnIdle:function(b){this.attachTo(r.global.idle,b,"idle",!0)},addRef:function(b,g){return((f=this).__REFS??(f.__REFS={}))[b]=g},getRef:function(b){return((f=this).__REFS??(f.__REFS={}))[b]},removeRef:function(b){const g=(f=this).__REFS??(f.__REFS={}),c=g[b];delete g[b];return c}})})(myt);
(r=>{let w=0,v=!1;const t=JS.Class,h=[],d=b=>{if(v!==b&&(v=b,!b)){for(b=h.length;b;){const g=h[--b];g.__deferredLayout=!1;g.update()}h.length=0}},e=(b,g,c,q)=>{const x=b.getSubviewIndex(g),u=b.subviews;-1<x&&(b=b.getSubviewIndex(c),u.splice(x,1),-1<b?(x<b&&--b,u.splice(b+(q?1:0),0,g)):q?u.push(g):u.unshift(g))},m=(b,g,c)=>{b[g]!==c&&(b[g]=c,b.inited&&(b.fireEvent(g,c),b.update()))},k=r.Layout=new t("Layout",r.Node,{extend:{incrementGlobalLock:()=>{1===++w&&d(!0)},decrementGlobalLock:()=>{0<w&&0===
--w&&d(!1)}},initNode:function(b,g){this.subviews=[];this.locked=!0;this.lockedCounter=1;const c=!0===g.locked;delete g.locked;this.callSuper(b,g);c||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(b){var g=this.parent;if(g!==b){const x=!this.locked;x&&(this.locked=!0);if(g){for(var c=this.subviews,q=c.length;q;)this.removeSubview(c[--q]);this.detachFrom(g,"__hndlPSA","subviewAdded");this.detachFrom(g,"__hndlPSR","subviewRemoved")}this.callSuper(b);
if(b=this.parent){g=b.getSubviews();c=g.length;for(q=0;c>q;)this.addSubview(g[q++]);this.attachTo(b,"__hndlPSA","subviewAdded");this.attachTo(b,"__hndlPSR","subviewRemoved")}x&&(this.locked=!1,this.inited&&b&&this.update())}},canUpdate:function(){return v?(this.__deferredLayout||(h.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(b){return this.subviews.includes(b)},getSubviewIndex:function(b){return this.subviews.indexOf(b)},addSubview:function(b){this.ignore(b)||
(this.subviews.push(b),this.startMonitoringSubview(b),this.locked||this.update())},startMonitoringSubview:b=>{},startMonitoringAllSubviews:function(){const b=this.subviews;let g=b.length;for(;g;)this.startMonitoringSubview(b[--g])},removeSubview:function(b){if(this.ignore(b))return-1;const g=this.getSubviewIndex(b);-1<g&&(this.stopMonitoringSubview(b),this.subviews.splice(g,1),this.locked||this.update());return g},stopMonitoringSubview:b=>{},stopMonitoringAllSubviews:function(){const b=this.subviews;
let g=b.length;for(;g;)this.stopMonitoringSubview(b[--g])},ignore:b=>b.ignoreLayout,__hndlPSA:function(b){b=b.value;b.parent===this.parent&&this.addSubview(b)},__hndlPSR:function(b){b=b.value;b.parent===this.parent&&this.removeSubview(b)},sortSubviews:function(b){this.subviews.sort(b)},moveSubviewBefore:function(b,g){e(this,b,g,!1)},moveSubviewAfter:function(b,g){e(this,b,g,!0)}});var a=r.ConstantLayout=new t("ConstantLayout",k,{setTargetAttrName:function(b){this.setterName=r.AccessorSupport.generateSetterName(b);
m(this,"targetAttrName",b)},setTargetValue:function(b){m(this,"targetValue",b)},update:function(){if(this.canUpdate()){const b=this.setterName,g=this.targetValue,c=this.subviews,q=c.length;if(b)for(let x=0;q>x;)c[x++][b](g)}}});a=r.VariableLayout=new t("VariableLayout",a,{initNode:function(b,g){this.collapseParent=this.reverse=!1;this.callSuper(b,g)},setCollapseParent:function(b){m(this,"collapseParent",b)},setReverse:function(b){m(this,"reverse",b)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const g=this.setterName,c=this.subviews;var b=c.length;let q=this.targetValue,x,u=0;if(this.reverse)for(x=b;x;)b=c[--x],this.skipSubview(b)||(q=this.updateSubview(++u,b,g,q));else for(x=0;b>x;){const n=c[x++];this.skipSubview(n)||(q=this.updateSubview(++u,n,g,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(g,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(b){this.attachTo(b,
"update","visible")},stopMonitoringSubview:function(b){this.detachFrom(b,"update","visible")},updateSubview:(b,g,c,q)=>{g[c](q);return q},skipSubview:b=>!b.visible,updateParent:(b,g)=>{}});const f=r.SpacedLayout=new t("SpacedLayout",a,{initNode:function(b,g){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(b,g)},setTargetAttrName:function(b){if(this.targetAttrName!==
b){const g="y"===b,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=g?"boundsHeight":"boundsWidth";this.measureAttrBaseName=g?"height":"width";this.parentSetterName=g?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(b)}},setNoAddSubviewOptimization:function(b){this.noAddSubviewOptimization=b},setAxis:function(b){this.setTargetAttrName(this.axis=b)},setInset:function(b){this.setTargetValue(this.inset=b)},setSpacing:function(b){m(this,"spacing",b)},setOutset:function(b){m(this,
"outset",b)},addSubview:function(b){const g=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(b);this.locked=g},startMonitoringSubview:function(b){this.attachTo(b,"update",this.measureAttrName);this.callSuper(b)},stopMonitoringSubview:function(b){this.detachFrom(b,"update",this.measureAttrName);this.callSuper(b)},updateSubview:function(b,g,c,q){b=g[this.measureAttrName];g[c](q+(b-g[this.measureAttrBaseName])/2);return q+b+this.spacing},updateParent:function(b,g){this.parent[this.parentSetterName](g+
this.outset-this.spacing)}});r.ResizeLayout=new t("ResizeLayout",f,{setCollapseParent:b=>{},setTargetAttrName:function(b){if(this.targetAttrName!==b){if(this.inited){const g="x"===b;this.stopMonitoringParent(g?"height":"width");this.startMonitoringParent(g?"width":"height")}this.callSuper(b)}},setParent:function(b){if(this.parent!==b){const g="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(g);this.callSuper(b);this.parent&&this.startMonitoringParent(g)}},startMonitoringParent:function(b){this.attachTo(this.parent,
"update",b)},stopMonitoringParent:function(b){this.detachFrom(this.parent,"update",b)},doBeforeUpdate:function(){const b=this.measureAttrName,g=this.subviews;let c=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=g.length,x=0,u=0;for(;q;){const n=g[--q];this.skipSubview(n)||(++x,0<n.layoutHint?u+=n.layoutHint:c-=n[b])}0!==x&&(this.remainder=c-=(x-1)*this.spacing,this.resizeSum=u,this.scalingFactor=c/u,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===b?
"setWidth":"setHeight")},updateSubview:function(b,g,c,q){var x=g.layoutHint;0<x&&(this.resizeSumUsed+=x,x=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(x*this.scalingFactor),this.remainderUsed+=x,g[this.measureSetter](x));return this.callSuper(b,g,c,q)},startMonitoringSubview:function(b){0<b.layoutHint||this.attachTo(b,"update",this.measureAttrName);this.attachTo(b,"update","visible")},stopMonitoringSubview:function(b){0<b.layoutHint||this.detachFrom(b,"update",
this.measureAttrName);this.detachFrom(b,"update","visible")},updateParent:(b,g)=>{}});r.AlignedLayout=new t("AlignedLayout",a,{initNode:function(b,g){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(b,g)},setTargetAttrName:function(b){if(this.targetAttrName!==b){const g="y"===b,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=
g?"boundsHeight":"boundsWidth";this.measureAttrBaseName=g?"height":"width";this.parentSetterName=g?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(b)}},setAlign:function(b){if(this.align!==b){this.align=b;const g=this.locked;this.locked=!0;this.setTargetAttrName("middle"===b||"bottom"===b||"top"===b?"y":"x");this.locked=g;this.inited&&(this.fireEvent("align",b),this.update())}},startMonitoringSubview:function(b){this.attachTo(b,"update",this.measureAttrName);this.callSuper(b)},
stopMonitoringSubview:function(b){this.detachFrom(b,"update",this.measureAttrName);this.callSuper(b)},doBeforeUpdate:function(){const b=this.measureAttrName,g=this.subviews;let c=0,q=g.length;for(;q;){const x=g[--q];this.skipSubview(x)||(c=c>x[b]?c:x[b])}this.setTargetValue(c)},updateSubview:function(b,g,c,q){switch(this.align){case "center":case "middle":g[c]((q-g[this.measureAttrName])/2);break;case "right":case "bottom":g[c](q-g[this.measureAttrName]);break;default:g[c](0)}return q},updateParent:function(b,
g){this.parent[this.parentSetterName](g)}});r.WrappingLayout=new t("WrappingLayout",a,{initNode:function(b,g){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(b,g)},
setTargetAttrName:function(b){if(this.targetAttrName!==b){const g="y"===b,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=g?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=g?"height":"width";this.otherMeasureAttrName=g?"boundsWidth":"boundsHeight";const x=this.otherMeasureAttrBaseName=g?"width":"height";this.parentSetterName=g?"setWidth":"setHeight";this.otherSetterName=g?"setX":"setY";c&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(x),this.startMonitoringParent(q));
this.callSuper(b)}},setParent:function(b){if(this.parent!==b){const g="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(g?"height":"width");this.callSuper(b);this.parent&&this.startMonitoringParent(g?"height":"width")}},setAxis:function(b){this.setTargetAttrName(this.axis=b)},setInset:function(b){this.setTargetValue(this.inset=b)},setSpacing:function(b){m(this,"spacing",b)},setOutset:function(b){m(this,"outset",b)},setLineSpacing:function(b){m(this,"lineSpacing",b)},setLineInset:function(b){m(this,
"lineInset",b)},setLineOutset:function(b){m(this,"lineOutset",b)},startMonitoringParent:function(b){this.attachTo(this.parent,"update",b)},stopMonitoringParent:function(b){this.detachFrom(this.parent,"update",b)},startMonitoringSubview:function(b){this.attachTo(b,"update",this.measureAttrName);this.attachTo(b,"update",this.otherMeasureAttrName);this.callSuper(b)},stopMonitoringSubview:function(b){this.detachFrom(b,"update",this.measureAttrName);this.detachFrom(b,"update",this.otherMeasureAttrName);
this.callSuper(b)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(b,g,c,q){b=g[this.measureAttrName];const x=g[this.otherMeasureAttrName];q+b>this.parentSizeLessOutset||"break"===g.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=x,++this.lineCount):x>this.lineSize&&(this.lineSize=x);g[this.otherSetterName](this.linePos+
(x-g[this.otherMeasureAttrBaseName])/2);g[c](q+(b-g[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+b+this.outset);return q+b+this.spacing},updateParent:function(b,g){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});r.createFixedThresholdCounter(k,1,"locked")})(myt);
(r=>{const w=Math.round,v=r.DomElementProxy,t=r.Geometry.rectContainsPoint,h=(c,q)=>{const x=r.global.focus.focusedView,u=c.getIDE();if(x===c||x?.isDescendantOf(c))x._ignoreFocus=!0;const {scrollTop:n,scrollLeft:A}=u;q();x&&(x._ignoreFocus=!1,x.focus(!0));u.scrollTop=n;u.scrollLeft=A},d=(c,q,x)=>{const u=c.getODE(),n=u.parentNode;if(n){const A=()=>{const J=u.nextElementSibling;n.removeChild(u);q();n.insertBefore(u,J)};x?h(c,A):A()}else q()},e=(c,q,x,u)=>{if(q&&"object"===typeof q){if(u){var n=c.getLeastCommonAncestor(q)?.getIDE();
if(n){const A=v.getZIndexRelativeToAncestor,J=x?-1:1;u=J*A(c.getODE(),n);n=J*A(q.getODE(),n);if(u<n)return!0;if(n<u)return!1}}c=c.getODE().compareDocumentPosition(q.getODE());return x?2===c||10===c:4===c||20===c}return!1},m=c=>{c=c.getAncestors();let q=c.length,x=1,u=1;for(;q;){const n=c[--q];x*=n.scaleX||1;u*=n.scaleY||1;n.__effectiveScaleX=x;n.__effectiveScaleY=u}return{scaleX:x,scaleY:u}},k=(c,q,x)=>{const u=c.getODE();if(t(q,x,0,0,u.offsetWidth*c.__effectiveScaleX,u.offsetHeight*c.__effectiveScaleY)){if(c=
c.parent){const n=c.getIDE();return k(c,q+(u.offsetLeft-n.scrollLeft)*c.__effectiveScaleX,x+(u.offsetTop-n.scrollTop)*c.__effectiveScaleY)}return!0}return!1},a=c=>{switch(c.align){case "center":c.releaseConstraint("__doAlignCenter");break;case "right":c.releaseConstraint("__doAlignRight")}},f=c=>{const q=c.parent;if(q)switch(c.align){case "center":c.constrain("__doAlignCenter",[c,"width",c,"alignOffset",q,"width"]);break;case "right":c.constrain("__doAlignRight",[c,"width",c,"alignOffset",q,"width"]);
break;case "left":c.setX(c.alignOffset||0)}},b=c=>{switch(c.valign){case "middle":c.releaseConstraint("__doValignMiddle");break;case "bottom":c.releaseConstraint("__doValignBottom")}},g=c=>{const q=c.parent;if(q)switch(c.valign){case "middle":c.constrain("__doValignMiddle",[c,"height",c,"valignOffset",q,"height"]);break;case "bottom":c.constrain("__doValignBottom",[c,"height",c,"valignOffset",q,"height"]);break;case "top":c.setY(c.valignOffset||0)}};r.View=new JS.Class("View",r.Node,{include:[v,r.DomObservable,
r.DomObserver,r.ScrollObservable,r.FocusObservable,r.KeyObservable,r.MouseObservable],extend:{retainFocusDuringDomUpdate:h,doWhileRemovedFromDom:d},initNode:function(c,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(c));const x=this.getODS();x.left=x.top="0px";this.callSuper(c,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(c){c=document.createElement(this.tagName??
"div");c.style.position="absolute";let q;c.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return c},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(c){this.parent!==c&&(this.inited&&(a(this),b(this)),this.callSuper(c),this.align&&f(this),this.valign&&g(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const c=[],q=this.getIDE().children,x=q.length;for(let u=0;u<x;){const n=q[u++].model;n?.parent===this&&c.push(n)}return c},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(c=>c!==this)},setFocusTrap:function(c){this.focusTrap=c},setFocusCage:function(c){this.focusCage=c},setMaskFocus:function(c){this.maskFocus=c},setLayoutHint:function(c){this.layoutHint=c},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(c){if(this.ignoreLayout!==c){var q=this.inited&&this.parent;let x;if(c){if(q)for(q=this.parent.getLayouts(),x=q.length;x;)q[--x].removeSubview(this);this.ignoreLayout=c}else if(this.ignoreLayout=c,q)for(q=this.parent.getLayouts(),x=q.length;x;)q[--x].addSubview(this)}},setDomClass:function(c){this.domClass!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domClass",c))},setDomId:function(c){this.domId!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domId",c))},setAlignOffset:function(c){this.alignOffset!==
c&&(this.alignOffset=c,this.inited&&this.fireEvent("alignOffset",c),this.parent&&"left"===this.align&&this.setX(c))},setAlign:function(c){this.align!==c&&(this.inited&&a(this),this.align=c,this.inited&&(this.fireEvent("align",c),f(this)))},__doAlignCenter:function(c){this.setX(w((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(c){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(c){this.valignOffset!==c&&(this.valignOffset=c,this.inited&&
this.fireEvent("valignOffset",c),this.parent&&"top"===this.valign&&this.setY(c))},setValign:function(c){this.valign!==c&&(this.inited&&b(this),this.valign=c,this.inited&&(this.fireEvent("valign",c),g(this)))},__doValignMiddle:function(c){this.setY(w((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(c){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(c){this.x!==c&&(this.x=c,this.visible&&(this.getODS().left=c+"px"),this.inited&&this.fireEvent("x",
c))},setY:function(c){this.y!==c&&(this.y=c,this.visible&&(this.getODS().top=c+"px"),this.inited&&this.fireEvent("y",c))},setWidth:function(c){0>c&&(c=0);this.width!==c&&(this.width=c,this.getODS().width=c+"px",this.inited&&(this.__updateBounds(c,this.height),this.fireEvent("width",c)))},setHeight:function(c){0>c&&(c=0);this.height!==c&&(this.height=c,this.getODS().height=c+"px",this.inited&&(this.__updateBounds(this.width,c),this.fireEvent("height",c)))},setDomMinWidth:function(c,q){(q?this.getIDS():
this.getODS()).minWidth=null!=c?c+"px":null},getDomMinWidth:function(c){c=(c?this.getIDS():this.getODS()).minWidth;return null!=c?Number.parseInt(c):null},setDomMinHeight:function(c,q){(q?this.getIDS():this.getODS()).minHeight=null!=c?c+"px":null},getDomMinHeight:function(c){c=(c?this.getIDS():this.getODS()).minHeight;return null!=c?Number.parseInt(c):null},setTextColor:function(c){this.textColor!==c&&(this.textColor=c,this.getODS().color=c||"inherit",this.inited&&this.fireEvent("textColor",c))},
setBgColor:function(c){this.bgColor!==c&&(this.getODS().backgroundColor=this.bgColor=c,this.inited&&this.fireEvent("bgColor",c))},isColorAttr:c=>"bgColor"===c||"textColor"===c,setOpacity:function(c){this.opacity!==c&&(this.getODS().opacity=this.opacity=c,this.inited&&this.fireEvent("opacity",c))},setOverflow:function(c){const q=this.overflow;if(q!==c){this.overflow=c;const x=this.getIDS();if("autox"===c)x.overflowX="auto",x.overflowY="hidden";else if("autoy"===c)x.overflowY="auto",x.overflowX="hidden";
else{if("autox"===q||"autoy"===q)x.overflowX=x.overflowY=null;x.overflow=c||"visible"}this.inited&&this.fireEvent("overflow",c)}},setVisible:function(c){if(this.visible!==c){this.visible=c;const q=this.getODS();q.visibility=c?"inherit":"hidden";q.left=c?this.x+"px":"-100000px";q.top=c?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",c)}},setPointerEvents:function(c){this.pointerEvents!==c&&(this.pointerEvents=c,this.getODS().pointerEvents=c||"auto",this.inited&&this.fireEvent("pointerEvents",
c))},setCursor:function(c){this.cursor!==c&&(this.cursor=c,this.getODS().cursor=c||"auto",this.inited&&this.fireEvent("cursor",c))},__updateBounds:function(c,q){this.boundsWidth!==c&&this.fireEvent("boundsWidth",this.boundsWidth=c);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(c){const [q,x,u]=c??[];this.setOutlineWidth(q);this.setOutlineStyle(x);this.setOutlineColor(u)},setOutlineWidth:function(c){this.getODS().outlineWidth=(this.outlineWidth=c||0)+
"px"},setOutlineStyle:function(c){this.getODS().outlineStyle=this.outlineStyle=c||"none"},setOutlineColor:function(c){this.getODS().outlineColor=this.outlineColor=c||"#000"},setBorder:function(c){const [q,x,u]=c??[];this.setBorderWidth(q);this.setBorderStyle(x);this.setBorderColor(u)},setBorderWidth:function(c){this.getODS().borderWidth=(this.borderWidth=c||0)+"px"},setBorderStyle:function(c){this.getODS().borderStyle=this.borderStyle=c||"none"},setBorderColor:function(c){this.getODS().borderColor=
this.borderColor=c||"#000"},setRoundedCorners:function(c){this.getODS().borderRadius=c+"px"},setRoundedTopLeftCorner:function(c){this.getODS().borderTopLeftRadius=c+"px"},setRoundedTopRightCorner:function(c){this.getODS().borderTopRightRadius=c+"px"},setRoundedBottomLeftCorner:function(c){this.getODS().borderBottomLeftRadius=c+"px"},setRoundedBottomRightCorner:function(c){this.getODS().borderBottomRightRadius=c+"px"},setBoxShadow:function(c){const [q,x,u,n]=c??[];this.getODS().boxShadow=c?(q||0)+
"px "+(x||0)+"px "+(u||7)+"px "+(n||"#000"):"none"},setGradient:function(c){const q=this.getODS();if(c){let u=c[0];"linear"===u||"radial"===u?c.shift():u="linear";let n=c[0];if("radial"===u){void 0===n?n="closest-side":c.shift();var x=c[0];if(void 0===x)x="circle";else{switch(x){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",x),x="circle"}c.shift()}let A=c[0];void 0===A?A="center":(A=A.replaceAll("middle","center"),c.shift());n=x+" "+n+" at "+A}else"number"===
typeof n?(n+="deg",c.shift()):n?(n="to "+n,c.shift()):n="0deg";x=A=>{c.push(A&&"inherit"!==A?A:"transparent")};2>c.length&&x(this.textColor);2>c.length&&x(this.bgColor);q.background=u+"-gradient("+n+","+c.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(c){this.tooltip!==c&&(this.tooltip=this.getODE().title=c,this.inited&&this.fireEvent("tooltip",c))},isVisible:function(){return null==this.searchAncestorsOrSelf(c=>!c.visible)},getFocusTrap:function(c){return this.searchAncestorsOrSelf(q=>
q.focusCage||q.focusTrap&&!c)},subnodeAdded:function(c){c instanceof r.View?(this.getIDE().appendChild(c.getODE()),this.getSubviews().push(c),this.fireEvent("subviewAdded",c),this.subviewAdded(c)):c instanceof r.Layout&&(this.getLayouts().push(c),this.fireEvent("layoutAdded",c),this.layoutAdded(c))},subnodeRemoved:function(c){let q;c instanceof r.View?(q=this.getSubviewIndex(c),-1<q&&(this.fireEvent("subviewRemoved",c),c.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(c))):c instanceof
r.Layout&&(q=this.getLayoutIndex(c),-1<q&&(this.fireEvent("layoutRemoved",c),this.layouts.splice(q,1),this.layoutRemoved(c)))},hasSubview:function(c){return this.getSubviews().includes(c)},getSubviewIndex:function(c){return this.getSubviews().indexOf(c)},subviewAdded:c=>{},subviewRemoved:c=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(c){const q=
this.getSubviews();for(let x=q.length;0<x;){const u=q[--x];c&&!c(u)||u.destroy()}},hasLayout:function(c){return this.getLayouts().includes(c)},getLayoutIndex:function(c){return this.getLayouts().indexOf(c)},layoutAdded:c=>{},layoutRemoved:c=>{},isBehind:function(c,q){return e(this,c,!1,q)},isInFrontOf:function(c,q){return e(this,c,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(c,q){this.parent.sendSubviewBehind(this,
c,q)},sendInFrontOf:function(c,q){this.parent.sendSubviewInFrontOf(this,c,q)},doSubviewsReorderedInDom:c=>{},bringSubviewToFront:function(c){const q=this;if(c?.parent===q){const x=q.getIDE(),u=c.getODE();u!==x.lastElementChild&&h(c,()=>{x.appendChild(u);q.doSubviewsReorderedInDom(c)})}},sendSubviewToBack:function(c){const q=this;if(c?.parent===q){const x=q.getIDE(),u=x.firstElementChild,n=c.getODE();n!==u&&h(c,()=>{x.insertBefore(n,u);q.doSubviewsReorderedInDom(c)})}},sendSubviewBehind:function(c,
q,x){x?.moveSubviewBefore(c,q);const u=this;if(c?.parent===u&&q?.parent===u){const n=c.getODE(),A=q.getODE();if(n!==A.previousElementSibling){const J=u.getIDE();h(c,()=>{J.insertBefore(n,A);u.doSubviewsReorderedInDom(c)})}}x?.update()},sendSubviewInFrontOf:function(c,q,x){x?.moveSubviewAfter(c,q);const u=this;if(c?.parent===u&&q?.parent===u){const n=c.getODE(),A=q.getODE().nextElementSibling;if(n!==A){const J=u.getIDE();h(c,()=>{J.insertBefore(n,A);u.doSubviewsReorderedInDom(c)})}}x?.update()},sortSubviews:function(c){const q=
this,x=q.getSubviews();r.isSorted(x,c)||(x.sort(c),d(q,()=>{const u=document.createDocumentFragment(),n=x.length;for(let A=0;n>A;)u.appendChild(x[A++].getODE());q.getIDE().appendChild(u)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(c,q,x){const u=this.getODE();if(!u)return!1;const {x:n,y:A}=v.getRelativePosition(u,x);return t(c,q,n,A,this.width,this.height)},isPointVisible:function(c,q){const {x,y:u}=this.getPagePosition(!0);m(this);return k(this,c-x,q-u)},intersectsWithSibling:function(c){return c.parent===
this.parent&&!(c.x>this.x+this.width||c.x+c.width<this.x||c.y>this.y+this.height||c.y+c.height<this.y)},getEffectiveScale:function(){return m(this)},getEffectiveScaleX:function(){return m(this).scaleX},getEffectiveScaleY:function(){return m(this).scaleY}})})(myt);
(r=>{const w=(t,h,d)=>{const e=v(t,h);t.getODS().transform=e+(0===e.length?"":" ")+h+"("+d+")"},v=(t,h)=>{t=t.getODS();var d=t.transform;if(!d||0===d.length)return"";d=d.split(" ");let e=d.length;for(;e;)if(d[--e].startsWith(h)){d.splice(e,1);break}return t.transform=d.join(" ")};r.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(t){this.transformOrigin!==t&&(this.transformOrigin=t,this.getODS().transformOrigin=t||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",t)))},setRotation:function(t){this.rotation!==t&&(this.rotation=t,w(this,"rotate",(t||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",t)))},setScale:function(t){const h=this.scaleX!==t,d=this.scaleY!==t;if(h){var e=this.scaleX=t;null==e?v(this,"scaleX"):w(this,"scaleX",e||1)}d&&(e=this.scaleY=t,null==e?v(this,"scaleY"):w(this,"scaleY",e||1));this.inited&&((h||d)&&this.__updateBounds(this.width,this.height),
h&&this.fireEvent("scaleX",t),d&&this.fireEvent("scaleY",t))},setScaleX:function(t){if(this.scaleX!==t){var h=this.scaleX=t;null==h?v(this,"scaleX"):w(this,"scaleX",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",t))}},setScaleY:function(t){if(this.scaleY!==t){var h=this.scaleY=t;null==h?v(this,"scaleY"):w(this,"scaleY",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",t))}},setSkewX:function(t){this.skewX!==t&&(this.skewX=
t,w(this,"skewX",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",t)))},setSkewY:function(t){this.skewY!==t&&(this.skewY=t,w(this,"skewY",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",t)))},__updateBounds:function(t,h){const {rotation:d,scaleX:e,scaleY:m}=this,k=(null==e||1===e)&&(null==m||1===m);if(!k||null!=d&&0!==d&&180!==d)!k||90!==d&&270!==d?{width:t,height:h}=this.getODE().getBoundingClientRect():{width:h,height:t}=
this;this.callSuper(t,h)}})})(myt);
(r=>{const w=JS.Module,v=(e,m)=>{if("auto"===m)e.__hasSetWidth=!1,e.getODS().width="auto",e.sizeViewToDom();else return e.__hasSetWidth=!0},t=(e,m)=>{if("auto"===m)e.__hasSetHeight=!1,e.getODS().height="auto",e.sizeViewToDom();else return e.__hasSetHeight=!0},h=e=>{if(!e.__hasSetWidth){const m=e.getODE().offsetWidth/e.getEffectiveScaleX();e.width!==m&&(e.width=m,e.inited&&e.__updateBounds(m,e.height),e.fireEvent("width",m))}},d=e=>{if(!e.__hasSetHeight){const m=e.getODE().offsetHeight/e.getEffectiveScaleY();
e.height!==m&&(e.height=m,e.inited&&e.__updateBounds(e.width,m),e.fireEvent("height",m))}};r.SizeToDom=new w("SizeToDom",{extend:{sizeWidth:h,sizeHeight:d},initNode:function(e,m){this.callSuper(e,m);this.sizeViewToDom()},setWidth:function(e){v(this,e)&&this.callSuper(e)},setHeight:function(e){t(this,e)&&this.callSuper(e)},sizeViewToDom:function(){h(this);d(this)}});r.SizeWidthToDom=new w("SizeWidthToDom",{initNode:function(e,m){this.callSuper(e,m);this.sizeViewToDom()},setWidth:function(e){v(this,
e)&&this.callSuper(e)},sizeViewToDom:function(){h(this)}});r.SizeHeightToDom=new w("SizeHeightToDom",{initNode:function(e,m){this.callSuper(e,m);this.sizeViewToDom()},setHeight:function(e){t(this,e)&&this.callSuper(e)},sizeViewToDom:function(){d(this)}})})(myt);
(r=>{const w=JS.Module,v=(e,m,k,a)=>{e[k]!==m&&(e[k]=m,e.getIDS()[k]=m||a||"inherit",e.inited&&(e.fireEvent(k,m),e.sizeViewToDom?.()))};r.TextSupport=new w("TextSupport",{setWidth:function(e){this.callSuper(e);"auto"!==e&&(e=this.whiteSpace,"normal"!==e&&"pre-line"!==e&&"pre-wrap"!==e&&"break-spaces"!==e||this.sizeViewToDom())},setText:function(e){e||="";e=this.valueFromEvent(e);this.text!==e&&(this.getIDE().innerHTML=this.text=e,this.inited&&(this.fireEvent("text",e),this.sizeViewToDom()))},setTextOverflow:function(e){this.textOverflow!==
e&&(this.textOverflow=e,this.getIDS().textOverflow=e||"inherit",this.inited&&this.fireEvent("textOverflow",e))},setTextAlign:function(e){this.textAlign!==e&&(this.textAlign=e,this.getIDS().textAlign=e||"inherit",this.inited&&this.fireEvent("textAlign",e))},setWhiteSpace:function(e){v(this,e,"whiteSpace")},setWordWrap:function(e){v(this,e,"wordWrap","normal")},setTextIndent:function(e){v(this,e,"textIndent")},setTextTransform:function(e){v(this,e,"textTransform")},setTextDecoration:function(e){v(this,
e,"textDecoration")},setLineHeight:function(e){v(this,e,"lineHeight")},setLetterSpacing:function(e){v(this,e,"letterSpacing")},setWordSpacing:function(e){v(this,e,"wordSpacing")},setFontFamily:function(e){v(this,e,"fontFamily")},setFontStyle:function(e){v(this,e,"fontStyle")},setFontVariant:function(e){v(this,e,"fontVariant")},setFontWeight:function(e){v(this,e,"fontWeight")},setFontSize:function(e){v(this,e,"fontSize")},setUserUnselectable:function(e){this.userUnselectable!==e&&(this.userUnselectable=
e,this[e?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(e?"default":"text"),this.inited&&this.fireEvent("userUnselectable",e))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(e,m,k,a){this.getIDS().textShadow=(e||0)+"px "+(m||0)+"px "+(null!=k?k:2)+"px "+(a||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const t=(e,m,k)=>{const a="padding"+k;m=Math.max(m,0);e[a]!==m&&(e[a]=m,e.getIDS()[a]=m+"px",e.fireEvent(a,m),"Left"===k||"Right"===k?h(e):d(e))},h=e=>{e.__hasSetWidth&&(e.getODS().width=e.width-(e.paddingLeft||0)-(e.paddingRight||0)+"px",e.inited&&e.sizeViewToDom())},d=e=>{e.__hasSetHeight&&(e.getODS().height=e.height-(e.paddingTop||0)-(e.paddingBottom||0)+"px",e.inited&&e.sizeViewToDom())};r.PaddedTextSupport=new w("PaddedTextSupport",{setWidth:function(e){this.callSuper(e);h(this)},setHeight:function(e){this.callSuper(e);
d(this)},setPadding:function(e){let m,k,a;e||=0;"object"===typeof e?(m=e.top||0,k=e.right||0,a=e.bottom||0,e=e.left||0):m=k=a=e;this.setPaddingTop(m);this.setPaddingRight(k);this.setPaddingBottom(a);this.setPaddingLeft(e)},setPaddingTop:function(e){t(this,e,"Top")},setPaddingRight:function(e){t(this,e,"Right")},setPaddingBottom:function(e){t(this,e,"Bottom")},setPaddingLeft:function(e){t(this,e,"Left")}})})(myt);
(r=>{const w={},v={},t=h=>{const d=h.imageUrl;if(h.calculateNaturalSize&&d){var e=w[d];if(e)h.setNaturalWidth(e.width),h.setNaturalHeight(e.height);else{e=v[d];if(!e){v[d]=e=[];const m=new Image;m.onerror=k=>{if(k=v[d]){let a=k.length;for(;a;)k[--a].setImageLoadingError(!0);k.length=0;delete v[d]}};m.onload=()=>{const k=m.width,a=m.height,f=v[d];if(f){let b=f.length;for(;b;){const g=f[--b];g.imageUrl===d&&(g.setNaturalWidth(k),g.setNaturalHeight(a))}f.length=0;delete v[d]}w[d]={width:k,height:a}};
m.src=d}e.push(h)}}};r.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:h=>w[h]},initNode:function(h,d){d.imageRepeat??(d.imageRepeat="no-repeat");d.imageAttachment??(d.imageAttachment="scroll");this.callSuper(h,d)},setImageUrl:function(h){this.imageUrl!==h&&(this.imageUrl=h,this.getIDS().backgroundImage=h?'url("'+h+'")':"none",this.inited&&(this.fireEvent("imageUrl",h),this.setNaturalWidth(),this.setNaturalHeight(),!h&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
t(this))},setImageLoadingError:function(h){this.set("imageLoadingError",h,!0)},setImageSize:function(h){this.imageSize!==h&&(this.imageSize=h,this.getIDS().backgroundSize=h||"auto",this.inited&&this.fireEvent("imageSize",h))},setImageRepeat:function(h){this.imageRepeat!==h&&(this.getIDS().backgroundRepeat=this.imageRepeat=h,this.inited&&this.fireEvent("imageRepeat",h))},setImagePosition:function(h){this.imagePosition!==h&&(this.getIDS().backgroundPosition=this.imagePosition=h,this.inited&&this.fireEvent("imagePosition",
h))},setImageAttachment:function(h){this.imageAttachment!==h&&(this.getIDS().backgroundAttachment=this.imageAttachment=h,this.inited&&this.fireEvent("imageAttachment",h))},setCalculateNaturalSize:function(h){this.calculateNaturalSize!==h&&(this.calculateNaturalSize=h,this.inited&&this.fireEvent("calculateNaturalSize",h),t(this))},setNaturalWidth:function(h){this.naturalWidth!==h&&(this.naturalWidth=h,this.inited&&this.fireEvent("naturalWidth",h),this.useNaturalSize&&h&&this.setWidth(h))},setNaturalHeight:function(h){this.naturalHeight!==
h&&(this.naturalHeight=h,this.inited&&this.fireEvent("naturalHeight",h),this.useNaturalSize&&h&&this.setHeight(h))},setUseNaturalSize:function(h){this.useNaturalSize!==h&&(this.useNaturalSize=h,this.inited&&this.fireEvent("useNaturalSize",h),h&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),h&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(r=>{const w=JS.Class,{View:v,SizeToDom:t}=r;r.Flexbox=new w("Flexbox",v,{include:[r.FlexboxSupport]});r.Frame=new w("Frame",v,{initNode:function(h,d){d.tagName??(d.tagName="iframe");this.callSuper(h,d);h=r.global.mouse;this.attachToDom(h,"__doMouseDown","mousedown",!0);this.attachToDom(h,"__doMouseUp","mouseup",!0)},createOurDomElement:function(h){h=this.callSuper(h);(Array.isArray(h)?h[1]:h).style.border="0px";return h},setSrc:function(h){this.src!==h&&(this.src=this.getIDE().src=h,this.inited&&
this.fireEvent("src",h))},__doMouseDown:function(h){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(h){this.setPointerEvents(this.__restorePointerEvents);return!0}});r.Markup=new w("Markup",v,{include:[t],setHtml:function(h){this.html!==h&&(this.getIDE().innerHTML=this.html=h,this.inited&&(this.fireEvent("html",h),this.sizeViewToDom()))}});r.Text=new w("Text",v,{include:[t,r.TextSupport],initNode:function(h,d){d.whiteSpace??(d.whiteSpace=
"nowrap");d.userUnselectable??(d.userUnselectable=!0);this.callSuper(h,d)},measureNoWrapWidth:function(){const h=this.__hasSetWidth,d=this.width;if(!h&&"nowrap"===this.whiteSpace)return d;const e=this.getIDS(),m=e.whiteSpace;h&&(e.width="auto");e.whiteSpace="nowrap";const k=this.getODE().getBoundingClientRect().width;e.whiteSpace=m;h&&(e.width=d);return k}});r.PaddedText=new w("PaddedText",r.Text,{include:[r.PaddedTextSupport]});r.Image=new w("Image",v,{include:[r.ImageSupport],initNode:function(h,
d){d.useNaturalSize??(d.useNaturalSize=!0);this.callSuper(h,d)}});r.BackView=new w("BackView",v,{sendSubviewToBack:function(h){if(h.parent===this){const d=this.getIDE(),e=d.childNodes[1];h=h.getODE();h!==e&&(h=d.removeChild(h))&&d.insertBefore(h,e)}}})})(myt);
(r=>{const w=Math.round,v=e=>{e.parent&&0<=e.percentOfParentWidth&&e.syncTo(e.parent,"__doPOPW","width")},t=e=>{0<=e.percentOfParentWidth&&e.detachFrom(e.parent,"__doPOPW","width")},h=e=>{e.parent&&0<=e.percentOfParentHeight&&e.syncTo(e.parent,"__doPOPH","height")},d=e=>{0<=e.percentOfParentHeight&&e.detachFrom(e.parent,"__doPOPH","height")};r.SizeToParent=new JS.Module("SizeToParent",{setParent:function(e){this.parent!==e&&(this.inited&&(t(this),d(this)),this.callSuper(e),v(this),h(this))},setPercentOfParentWidthOffset:function(e){this.percentOfParentWidthOffset!==
e&&(this.percentOfParentWidthOffset=e,this.inited&&(this.fireEvent("percentOfParentWidthOffset",e),this.__doPOPW()))},setPercentOfParentWidth:function(e){this.percentOfParentWidth!==e&&(this.inited&&t(this),this.percentOfParentWidth=e,this.inited&&(this.fireEvent("percentOfParentWidth",e),v(this)))},setPercentOfParentHeightOffset:function(e){this.percentOfParentHeightOffset!==e&&(this.percentOfParentHeightOffset=e,this.inited&&(this.fireEvent("percentOfParentHeightOffset",e),this.__doPOPH()))},setPercentOfParentHeight:function(e){this.percentOfParentHeight!==
e&&(this.inited&&d(this),this.percentOfParentHeight=e,this.inited&&(this.fireEvent("percentOfParentHeight",e),h(this)))},__doPOPW:function(e){this.setWidth((this.percentOfParentWidthOffset||0)+w(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(e){this.setHeight((this.percentOfParentHeightOffset||0)+w(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(r=>{let w;const v=[];new JS.Singleton("GlobalRootViewRegistry",{include:[r.Observable],initialize:function(){r.global.register("roots",w=this)},getRoots:()=>v,addRoot:t=>{v.push(t);w.fireEvent("rootAdded",t)},removeRoot:t=>{const h=v.indexOf(t);-1<h&&(v.splice(h,1),w.fireEvent("rootRemoved",t))}})})(myt);
(r=>{const {addEventListener:w,removeEventListener:v,global:{roots:t}}=r,h=r.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:d=>{const e=d.getIDE();d=d.__captureDrop=m=>{m.preventDefault()};w(e,"drop",d);w(e,"dragover",d)},teardownCaptureDrop:d=>{const e=d.getIDE();d=d.__captureDrop;v(e,"drop",d);v(e,"dragover",d)}},initNode:function(d,e){this.callSuper(d,e);this.setZIndex(0);this.addDomClass("myt");t.addRoot(this);h.setupCaptureDrop(this)},createOurDomElement:function(d){d||(d=this.callSuper(d),
r.getElement().appendChild(d));return d},destroy:function(){h.teardownCaptureDrop(this);t.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(d){this.keepDomElementWhenDestroyed=d},setParent:d=>{},bringToFront:function(){var d=this.getIDE();const e=d.parentNode;d!==e.lastChild&&(d=e.removeChild(d))&&e.appendChild(d)},sendToBack:function(){var d=this.getIDE();const e=d.parentNode;d!==e.firstChild&&(d=e.removeChild(d))&&
e.insertBefore(d,e.firstChild)},sendBehind:function(d,e){e=this.getIDE();d=d.getIDE();const m=e.parentNode;d.parentNode===m&&(e=m.removeChild(e))&&m.insertBefore(e,d)},sendInFrontOf:function(d,e){d.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(d,e),d.sendBehind(this,e))}})})(myt);
(r=>{let w,v,t=!1;const {requestAnimationFrame:h,cancelAnimationFrame:d}=window,e={},m=a=>{w=h(m);a=Math.round(a);-1!==v&&(e.delta=a-v,e.time=a,k.fireEvent("idle",e));v=a},k=new JS.Singleton("GlobalIdle",{include:[r.Observable],initialize:function(){r.global.register("idle",this)},attachObserver:(a,f,b)=>{a=k.callSuper(a,f,b);!t&&k.hasObservers("idle")&&(t=!0,v=-1,w=h(m));return a},detachObserver:(a,f,b)=>{a=k.callSuper(a,f,b);t&&!k.hasObservers("idle")&&(d(w),t=!1);return a}})})(myt);
(r=>{let w,v,t;const h=r.global,d=h.idle,e=window.document;new JS.Singleton("GlobalWindowResize",{include:[r.Observable,r.Observer],initialize:function(){w=this;w.attachTo(d,"__setup","idle");h.register("windowResize",w)},__setup:m=>{const k=e.body;k&&(w.detachFrom(d,"__setup","idle"),(new ResizeObserver(()=>{w.fireEvent("resize",{w:v=k.clientWidth,h:t=k.clientHeight})})).observe(k))},getWidth:()=>v??=e.body.clientWidth,getHeight:()=>t??=e.body.clientHeight})})(myt);
(r=>{const w=JS.Module,v=r.global.windowResize,t=Math.max,h=e=>{const m=e.resizeDimension;"both"!==m&&"width"!==m||e.setWidth(t(e.minWidth,v.getWidth()));"both"!==m&&"height"!==m||e.setHeight(t(e.minHeight,v.getHeight()))},d=r.SizeToWindow=new w("SizeToWindow",{include:[r.RootView],initNode:function(e,m){this.minWidth=this.minHeight=0;m.resizeDimension??(m.resizeDimension="both");this.attachTo(v,"__hndlResize","resize");this.callSuper(e,m)},setResizeDimension:function(e){this.resizeDimension!==e&&
(this.resizeDimension=e,h(this))},setMinWidth:function(e){this.minWidth!==e&&(this.minWidth=e,h(this))},setMinHeight:function(e){this.minHeight!==e&&(this.minHeight=e,h(this))},__hndlResize:function(e){h(this)}});r.SizeToWindowWidth=new w("SizeToWindowWidth",{include:[d],initNode:function(e,m){m.resizeDimension??(m.resizeDimension="width");this.callSuper(e,m)}});r.SizeToWindowHeight=new w("SizeToWindowHeight",{include:[d],initNode:function(e,m){m.resizeDimension??(m.resizeDimension="height");this.callSuper(e,
m)}})})(myt);
(r=>{const w=Math,{min:v,max:t}=w,h=g=>v(255,t(0,w.round(g))),d=g=>h(g).toString(16).padStart(2,"0"),e=(g,c,q,x)=>(x?"#":"")+d(g)+d(c)+d(q),m=g=>new b((16711680&g)>>16,(65280&g)>>8,255&g),k=(g,c)=>{if("string"===typeof g)if(g.endsWith("%"))g=parseFloat(g.slice(0,-1))*c/100;else return 0;g=v(c,t(0,g))/c;return 1E-6>w.abs(1-g)?1:g},a=(g,c,q)=>{g=k(g,255);c=k(c,255);q=k(q,255);const x=t(g,c,q),u=x-v(g,c,q);if(0===u)return{h:0,s:0,v:x};let n;switch(x){case g:n=(c-q)/u+(c<q?6:0);break;case c:n=(q-g)/u+
2;break;case q:n=(g-c)/u+4}return{h:60*n,s:0===x?0:u/x,v:x}},f=(g,c,q)=>{g=6*k(g,360);c=k(c,100);q=k(q,100);var x=w.floor(g);const u=g-x;g=q*(1-c);const n=q*(1-u*c);c=q*(1-(1-u)*c);x%=6;return{red:255*[q,n,g,g,c,q][x],green:255*[c,q,q,n,g,g][x],blue:255*[g,g,c,q,q,n][x]}},b=r.Color=new JS.Class("Color",{extend:{toUnitRange:k,rgbToHsv:a,hsvToRgb:f,toHex:d,rgbToHex:e,cleanChannelValue:h,getRedChannel:g=>(16711680&g)>>16,getGreenChannel:g=>(65280&g)>>8,getBlueChannel:g=>255&g,makeColorFromNumber:m,makeColorFromHexString:g=>
{if(g)switch(g.startsWith("#")&&(g=g.slice(1)),g.length){case 0:g+="0";case 1:g+="0";case 2:g+="0";case 3:case 4:case 5:const [c,q,x]=g;return new b(parseInt(c+c,16),parseInt(q+q,16),parseInt(x+x,16));case 6:return m(parseInt(g,16));default:return m(parseInt(g.slice(0,6),16))}},makeColorFromHSV:(g,c,q)=>{const {red:x,green:u,blue:n}=f(g,c,q);return new b(x,u,n)},getLighterColor:(g,c)=>m(g).isLighterThan(m(c))?g:c,makeColorNumberFromChannels:(g,c,q)=>(h(g)<<16)+(h(c)<<8)+h(q),makeBlendedColor:(g,c,
q)=>new b(g.red+q*(c.red-g.red),g.green+q*(c.green-g.green),g.blue+q*(c.blue-g.blue))},initialize:function(g,c,q){this.setRed(g);this.setGreen(c);this.setBlue(q)},setRed:function(g){this.red=h(g)},setGreen:function(g){this.green=h(g)},setBlue:function(g){this.blue=h(g)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return e(this.red,this.green,this.blue,!0)},getHSV:function(){return a(this.red,this.green,this.blue)},isLighterThan:function(g){g=
this.getDiffFrom(g);return 0>g.red+g.green+g.blue},getDiffFrom:function(g){return{red:g.red-this.red,green:g.green-this.green,blue:g.blue-this.blue}},applyDiff:function(g){return this.add(g)},add:function(g){this.setRed(this.red+g.red);this.setGreen(this.green+g.green);this.setBlue(this.blue+g.blue);return this},subtract:function(g){this.setRed(this.red-g.red);this.setGreen(this.green-g.green);this.setBlue(this.blue-g.blue);return this},multiply:function(g){this.setRed(this.red*g);this.setGreen(this.green*
g);this.setBlue(this.blue*g);return this},divide:function(g){this.setRed(this.red/g);this.setGreen(this.green/g);this.setBlue(this.blue/g);return this},clone:function(){return new b(this.red,this.green,this.blue)},equals:function(g){return g===this||g?.isA?.(b)&&g.red===this.red&&g.green===this.green&&g.blue===this.blue}})})(myt);
(r=>{const {max:w,sin:v,cos:t,pow:h,sqrt:d,PI:e}=Math,m=2*e,k=e/2,a=r.global.idle,f=r.Color.makeColorFromHexString,b=(n,A)=>A*(1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2),g={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>
1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>-t(n*k)+1,outSine:n=>v(n*k),inOutSine:n=>-(t(n*e)-1)/2,inCirc:n=>-(d(1-n*n)-1),outCirc:n=>d(1- --n*n),inOutCirc:n=>1>(n*=2)?-(d(1-n*n)-1)/2:(d(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:h(2,10*(n-1)),outExpo:n=>1===n?1:-h(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?h(2,10*(n-1))/2:(-h(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(h(2,10*--n)*v((1*n-.075)*m/.3)),outElastic:n=>0===n||1===n?n:h(2,-10*n)*v((1*n-.075)*m/.3)+1,inOutElastic:n=>0===n||1===n?
n:1>(n*=2)?-(h(2,10*--n)*v((1*n-.1125)*m/.45))/2:h(2,-10*--n)*v((1*n-.1125)*m/.45)/2+1,inBack:(n,A=1.70158)=>(n/=1)*n*((A+1)*n-A),outBack:(n,A=1.70158)=>(n=n/1-1)*n*((A+1)*n+A)+1,inOutBack:(n,A=1.70158)=>1>(n*=2)?n*n*(((A*=1.525)+1)*n-A)/2:((n-=2)*n*(((A*=1.525)+1)*n+A)+2)/2,inBounce:n=>1-g.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?g.inBounce(n)/2:(g.outBounce(n-
1)+1)/2,wiggle:n=>{n*=6;return 1>n?b(n-0,1):2>n?b(2-n,1):3>n?b(n-2,.5):4>n?b(4-n,.5):5>n?b(n-4,.25):b(6-n,.25)}},c=g.inOutQuad,q=n=>{n.__tmpFrom=!1;n.__loopCnt=n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},x=(n,A)=>{const {running:J,paused:z,reverse:C,duration:I,repeat:M,__prog:O,easingFunction:l,callback:p}=n;if(J&&!z){C&&(A*=-1);A=O+A;let L=0;A>I?(L=A-I,A=I,++n.__loopCnt===M&&(L=0)):0>A&&(L=-A,A=0,0>--n.__loopCnt&&0<M&&(L=0));var y=n.target??n.parent;if(y){const {relative:P,attribute:N,
__isColorAnim:U,__loopCnt:da,to:V}=n;var B=w(0,A/I),D=w(0,O/I);null==n.from&&(n.__tmpFrom=!0,n.from=P?U?"#000":0:y.get(N));D=l(B)-(P?l(D):0);var F=n.from,K=P?y.get(N):F;B=y.set;if(U){F=f(F);const ea=f(V);K=P?f(K):F;K.setRed(K.red+(ea.red-F.red)*D);K.setGreen(K.green+(ea.green-F.green)*D);K.setBlue(K.blue+(ea.blue-F.blue)*D);D=K.getHtmlHexString()}else D=K+(V-F)*D;B.call(y,N,D);!C&&da===M||C&&0>da&&0<M?(n.setRunning(!1),p?.call(n,!0)):0<L?(n.fireEvent("repeat",da),n.__prog=C?I:0,x(n,L)):n.__prog=A}else console.log("No target for animator",
n),n.setRunning(!1),p?.call(n,!1)}},u=(n,A,J,z)=>{n.stopActiveAnimators(z,!0);const C=n[z];n.animate({attribute:z,from:C,to:C+A,duration:J,easingFunction:"wiggle"}).next(()=>{n.set(z,C)})};r.Animator=new JS.Class("Animator",r.Node,{include:[r.Reusable],extend:{easings:g,bounceView:(n,A=-6,J=900)=>{u(n,A,J,"y")},shakeView:(n,A=10,J=300)=>{u(n,A,J,"x")},wiggleView:u},initNode:function(n,A){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=c;this.callSuper(n,
A);q(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const A=this.target??this.parent;this.__isColorAnim=A&&"function"===typeof A.isColorAttr?A.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),q(this);this[n?"attachTo":"detachFrom"](a,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](a,
"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&q(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&q(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&q(this)},setEasingFunction:function(n){"string"===typeof n&&(n=g[n]);this.set("easingFunction",n??c,!0)},setFrom:function(n){this.set("from",n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,
A){const J=this,z=J.callback;z&&!A?J.setCallback(C=>{z.call(J,C);n.call(J,C)}):J.setCallback(n)},reset:function(n){q(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=c;this.reset(!1)},__updateAnim:function(n){x(this,n.value.delta)}})})(myt);
(r=>{const w=Array.isArray,v=d=>{d.__additionalArgs=[];d.__pendingTransition="";d.__transDestinationState="";d.__transStage="leaveState"},t=(d,e)=>{if(d.__transInProgress){var m=d.__deferredTransitions;m??=d.__deferredTransitions=[];m.unshift(e)}else{d.__transInProgress=!0;m=e.shift();const k=e.shift();if(d.__pendingTransition)return 3;if(d.isFinished())return d.__transInProgress=!1,5;let a=d.map[d.current][k];a??=d.map["*"][k];if(a)return d.__pendingTransition=k,d.__transDestinationState=a,d.__additionalArgs=
e,d.resumeTransition(m);d.__transInProgress=!1;return 5}},h=d=>{d.__transInProgress=!1;const e=d.__deferredTransitions;if(e)for(;0<e.length;)t(d,e.pop())};r.StateMachine=new JS.Class("StateMachine",r.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(d,e){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";v(this);this.callSuper(d,e)},setInitialState:function(d){if(""===this.current){if(w(d)){var e=d;d=e.shift()}else e=[];this.current=
this.initial=d;this.doEnterState("","",d,e);e={name:"",from:"",to:d,args:e};this.fireEvent("enter"+d,e);this.fireEvent("enter",e);this.isFinished()&&this.fireEvent("finished",e)}},setTerminalState:function(d){this.terminal=d},addTransitions:function(d){for(const e of d)this.addTransition(...e)},addTransition:function(d,e,m){e=e?w(e)?e:[e]:["*"];const k=this.map;let a=e.length;for(;a;){let f,b;((f=k)[b=e[--a]]??(f[b]={}))[d]=m}},doTransition:function(...d){d.unshift("sync");return t(this,d)},doAsyncTransition:function(...d){d.unshift("async");
return t(this,d)},resumeTransition:function(d){const e=this.__pendingTransition;if(!e)return 4;const m=this.current,k=this.__transDestinationState,a=this.__additionalArgs,f={name:e,from:m,to:k,args:a},b=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const g=this.doLeaveState(e,m,k,a);if(!1===g)return v(this),h(this),2;if("async"===g||"async"===d)return this.__transStage="enterState",b("start"+e,f),b("start",f),b("leave"+m,f),b("leave",f),h(this),3;b("start"+e,f);b("start",f);
b("leave"+m,f);b("leave",f);case "enterState":this.current=k,v(this),this.doEnterState(e,m,k,a),b("enter"+k,f),b("enter",f),b("end"+e,f),b("end",f),this.isFinished()&&b("finished",f)}h(this);return 1},doLeaveState:(d,e,m,k)=>{},doEnterState:(d,e,m,k)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(d){return w(d)?d.includes(this.current):this.current===d},can:function(d){return void 0!==this.map[this.current][d]?!0:void 0!==this.map["*"][d]}})})(myt);
(r=>{const w=(d,e)=>d.replicationIndex-e.replicationIndex,v=(d,e)=>{let m=d.length;for(;m;){const k=d[--m];k.decrementLockedCounter();e&&k.update()}},t=d=>{h(d);const e=d.template;e&&(d.__pool=new r.TrackActivesPool(e,d.parent))},h=d=>{const e=d.__pool;if(e){d=d.parent.getLayouts();let m=d.length;for(;m;)d[--m].incrementLockedCounter();e.putActives();e.destroyPooledInstances();v(d,!1);e.destroy()}};r.Replicable=new JS.Module("Replicable",{include:[r.Reusable],replicate:function(d,e){this.replicationData=
d;this.replicationIndex=e},notify:(d,e)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(d,e){return e===this.replicationIndex&&d===this.replicationData}});r.Replicator=new JS.Class("Replicator",r.Node,{initNode:function(d,e){this.callSuper(d,e);t(this);this.doReplication()},destroy:function(){h(this);this.callSuper()},setTemplate:function(d){(this.template=d.includes(r.Replicable)?d:null)||r.dumpStack("Template not replicable");this.inited&&
(t(this),this.doReplication())},setData:function(d){this.data=d;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const d=this.__pool;let e;if(d){e=this.parent.getLayouts();for(var m=e.length;m;)e[--m].incrementLockedCounter();const k=(m=this.data)?m.length:0,a=d.getActives(),f=a.length,b=[];let g=f,c,q;for(a.sort(w);g;)if(c=a[--g],q=c.replicationIndex,q>=k||!c.alreadyHasReplicationData(m[q],q))b[q]=c;for(g=b.length;g;)(c=b[--g])&&
d.putInstance(c);for(g=0;k>g;++g)(g>=f||null!=b[g])&&d.getInstance().replicate(m[g],g);for(g=e.length;g;)e[--g].sortSubviews(w);v(e,!0)}},notify:function(d,e){var m=this.__pool;if(m){m=m.getActives();let k=m.length;for(;k;)m[--k].notify(d,e)}}})})(myt);
(r=>{const w=JS.Singleton,v=document,{DomElementProxy:t,DomObservable:h,global:{register:d}}=r;new w("GlobalMouse",{include:[t,h,r.MouseObservable],initialize:function(){this.setDomElement(v);d("mouse",this)}});new w("GlobalTouch",{include:[t,h,r.TouchObservable],initialize:function(){this.setDomElement(v);d("touch",this)}})})(myt);
(r=>{let w,v,t;const h=[],d=[],e=a=>{const f=t;f!==a&&(f&&(f.notifyDragLeave(v),v.destroyed||v.notifyDragLeaving(f),w("dragLeave",f)),t=a)&&(a.notifyDragEnter(v),v.destroyed||v.notifyDragEntering(a),w("dragEnter",f))},m=a=>{let f=v;if(f!==a)if(v=a){f=a;for(const b of k(f,d))b.notifyDragStart(f);for(const b of k(f,h))b.notifyAutoScrollerDragStart(f);w("startDrag",a)}else{for(const b of k(f,d))b.notifyDragStop(f);for(const b of k(f,h))b.notifyAutoScrollerDragStop(f);w("stopDrag",a)}},k=(a,f)=>{if(a.destroyed)return[];
if(a.isAnyDragGroup())return f;const b=[];a=a.getDragGroups();let g=f.length;for(;g;){const c=f[--g];if(c.isAnyDropGroup())b.push(c);else{const q=c.getDropGroups();for(const x in a)if(q[x]){b.push(c);break}}}return b};new JS.Singleton("GlobalDragManager",{include:[r.Observable],initialize:function(){r.global.register("dragManager",this);w=this.fireEvent.bind(this)},getDragView:()=>v,registerAutoScroller:a=>{h.push(a)},unregisterAutoScroller:a=>{a=h.indexOf(a);-1<a&&h.splice(a,1)},registerDropTarget:a=>
{d.push(a)},unregisterDropTarget:a=>{a=d.indexOf(a);-1<a&&d.splice(a,1)},startDrag:a=>{m(a)},stopDrag:(a,f,b)=>{f.notifyDropped(t,b);b||t?.notifyDrop(f);e();m();t&&!b&&w("drop",[f,t])},updateDrag:(a,f)=>{const b=k(f,d);let g=b.length,c;if(0<g){const {pageX:q,pageY:x}=a.value;for(;g;)a=b[--g],a.willAcceptDrop(f)&&f.willPermitDrop(a)&&a.isPointVisible(q,x)&&(!c||a.isInFrontOf(c))&&(c=a)}e(c)}})})(myt);
(r=>{const w=JS.Module,{mouse:v,keys:t,idle:h}=r.global;r.Activateable=new w("Activateable",{doActivated:()=>{}});r.UpdateableUI=new w("UpdateableUI",{initNode:function(d,e){this.callSuper(d,e);this.updateUI()},updateUI:()=>{}});r.Disableable=new w("Disableable",{initNode:function(d,e){e.disabled??(e.disabled=!1);this.callSuper(d,e)},setDisabled:function(d){d=this.valueFromEvent(d);this.disabled!==d&&(this.disabled=d,this.inited&&this.fireEvent("disabled",d),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});r.KeyActivation=new w("KeyActivation",{extend:{ACTIVATION_KEYS:[t.CODE_ENTER,t.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(d,e){this.activateKeyDown="";e.activationKeys??(e.activationKeys=r.KeyActivation.ACTIVATION_KEYS);this.callSuper(d,e);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(d){this.activationKeys=
d??[]},setRepeatKeyDown:function(d){this.repeatKeyDown=d},__hndlKeyDown:function(d){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const e=r.KeyObservable.getCodeFromEvent(d);this.activationKeys.includes(e)&&(this.activateKeyDown===e?this.doActivationKeyDown(e,!0):(this.activateKeyDown=e,this.doActivationKeyDown(e,!1)),d.value.preventDefault())}},__hndlKeyPress:function(d){if(!this.disabled){const e=r.KeyObservable.getCodeFromEvent(d);this.activateKeyDown===e&&this.activationKeys.includes(e)&&
d.value.preventDefault()}},__hndlKeyUp:function(d){if(!this.disabled){const e=r.KeyObservable.getCodeFromEvent(d);this.activateKeyDown===e&&this.activationKeys.includes(e)&&(this.activateKeyDown="",this.doActivationKeyUp(e),d.value.preventDefault())}},__doDomBlur:function(d){this.disabled||(d=this.activateKeyDown,""!==d&&(this.activateKeyDown="",this.doActivationKeyAborted(d)))},doActivationKeyDown:(d,e)=>{},doActivationKeyUp:function(d){this.doActivated()},doActivationKeyAborted:d=>{}});r.ArrowKeyActivation=
new w("KeyActivation",{doActivationKeyDown:function(d,e){switch(d){case t.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,e))return;break;case t.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,e))return;break;case t.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,e))return;break;case t.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,e))return}this.callSuper(d,e)},doKeyArrowLeftOrUp:(d,e)=>{},doKeyArrowRightOrDown:(d,e)=>{}});r.MouseOver=new w("MouseOver",{initNode:function(d,e){e.mouseOver??(e.mouseOver=
!1);this.callSuper(d,e);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(d){this.mouseOver!==d&&(this.mouseOver=d,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(h,"__doMouseOverOnIdle","idle")))},setDisabled:function(d){this.callSuper(d);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(h,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const d=this.mouseOver;this.__lastOverIdleValue!==d&&(this.__lastOverIdleValue=d,this.doSmoothMouseOver(d))},doSmoothMouseOver:function(d){this.inited&&this.updateUI?.()},doMouseOver:function(d){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(d){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});r.MouseDown=new w("MouseDown",{initNode:function(d,e){e.mouseDown??(e.mouseDown=!1);this.callSuper(d,
e);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(d){this.mouseDown!==d&&(this.mouseDown=d,this.inited&&(d&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(d){d&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(d)},doMouseOver:function(d){this.callSuper(d);this.mouseDown&&this.detachFromDom(v,"doMouseUp","mouseup",!0)},doMouseOut:function(d){this.callSuper(d);!this.disabled&&this.mouseDown&&this.attachToDom(v,
"doMouseUp","mouseup",!0)},doMouseDown:function(d){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(d){this.mouseOver||this.detachFromDom(v,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(d))},doMouseUpInside:function(d){this.doActivated?.()}});r.MouseOverAndDown=new w("MouseOverAndDown",{include:[r.MouseOver,r.MouseDown]});r.MouseEventsBubbleUp=new w("MouseEventsBubbleUp",
{doMouseOver:function(d){this.callSuper(d);return!0},doMouseOut:function(d){this.callSuper(d);return!0},doMouseDown:function(d){this.callSuper(d);return!0},doMouseUp:function(d){this.callSuper(d);return!0}});r.Draggable=new w("Draggable",{initNode:function(d,e){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let m=!0;null!=e.isDraggable&&(m=e.isDraggable,delete e.isDraggable);this.callSuper(d,e);this.setIsDraggable(m)},setIsDraggable:function(d){if(this.isDraggable!==
d){this.isDraggable=d;let e;d?e=this.attachToDom:this.inited&&(e=this.detachFromDom);if(e){d=this.getDragViews();let m=d.length;for(;m;){const k=d[--m];e.call(this,k,"__doMouseDown","mousedown");e.call(this,k,"__doContextMenu","contextmenu")}}}},setIsDragging:function(d){this.set("isDragging",d,!0)},setDragOffsetX:function(d,e){this.dragOffsetX!==d&&(this.dragOffsetX=d,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDragOffsetY:function(d,e){this.dragOffsetY!==d&&(this.dragOffsetY=
d,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(d){this.distanceBeforeDrag=d},setDraggableAllowBubble:function(d){this.draggableAllowBubble=d},setCenterOnMouse:function(d){this.centerOnMouse=d},setAllowAbort:function(d){this.allowAbort=d},getDragViews:function(){return[this]},__doContextMenu:d=>{},__doMouseDown:function(d){const e=r.MouseObservable.getMouseFromEvent(d),m=this.getODE();this.dragInitX=e.x-m.offsetLeft;this.dragInitY=e.y-m.offsetTop;
this.attachToDom(v,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(v,"__doDragCheck","mousemove",!0):this.startDrag(d);d.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(d){this.isDragging?this.stopDrag(d,!1):(this.detachFromDom(v,"__doMouseUp","mouseup",!0),this.detachFromDom(v,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(d){d.value===t.CODE_ESC&&this.stopDrag(d,!0)},__doDragCheck:function(d){const e=
r.MouseObservable.getMouseFromEvent(d);r.Geometry.measureDistance(e.x,e.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(v,"__doDragCheck","mousemove",!0),this.startDrag(d))},startDrag:function(d){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(t,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(v,"updateDrag","mousemove",!0);this.updateDrag(d)},
updateDrag:function(d){this.__lastMousePosition=r.MouseObservable.getMouseFromEvent(d);this.reRequestDragPosition()},__updateDragInitX:function(d){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(d){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(d,e){this.detachFromDom(v,"__doMouseUp","mouseup",!0);this.detachFromDom(v,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(t,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(d,e){this.disabled||(this.setX(d),this.setY(e))},reRequestDragPosition:function(){const d=this.__lastMousePosition;this.requestDragPosition(d.x-this.dragInitX+this.dragOffsetX,d.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(r=>{const {Class:w,Module:v}=JS,{View:t,KeyActivation:h,theme:d}=r;var e=r.Button=new v("Button",{include:[r.Activateable,r.UpdateableUI,r.Disableable,r.MouseOverAndDown,h],initNode:function(k,a){a.focusable??(a.focusable=!0);a.cursor??(a.cursor="pointer");this.callSuper(k,a)},setFocused:function(k){const a=this.focused;this.callSuper(k);this.inited&&this.focused!==a&&this.updateUI()},doActivationKeyDown:function(k,a){a||this.updateUI()},doActivationKeyUp:function(k){this.callSuper(k);this.updateUI()},
doActivationKeyAborted:function(k){this.callSuper(k);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const k=this.__restoreCursor;k&&(this.setCursor(k),this.__restoreCursor=null);this.activateKeyDown!==h.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=r.SimpleButtonStyle=new v("SimpleButtonStyle",{include:[e],setActiveColor:function(k){this.activeColor!==k&&(this.activeColor=k,this.inited&&this.updateUI())},setHoverColor:function(k){this.hoverColor!==k&&(this.hoverColor=k,this.inited&&this.updateUI())},setReadyColor:function(k){this.readyColor!==
k&&(this.readyColor=k,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,d.disabledOpacity)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(k,a=1){this.setOpacity(a);this.setBgColor(k)}});const m=r.SimpleButton=new w("SimpleButton",t,{include:[e],initNode:function(k,a){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(k,
a)}});r.SimpleTextButton=new w("SimpleTextButton",m,{initNode:function(k,a){this.inset=this.outset=0;a.shrinkToFit??(a.shrinkToFit=!1);a.height??(a.height=24);a.textY??(a.textY="middle");this.callSuper(k,a);k=this.textY;a={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof k?a.valign=k:a.y=k;k=this.textView=new r.Text(this,a);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",k,"visible",k,"width",
k,"height",k,"y"])},setInset:function(k){this.set("inset",this.valueFromEvent(k),!0)},setOutset:function(k){this.set("outset",this.valueFromEvent(k),!0)},setText:function(k){this.text!==k&&(this.text=k,this.inited&&(this.textView.setText(k),this.fireEvent("text",k)))},setShrinkToFit:function(k){this.shrinkToFit!==k&&(this.shrinkToFit=k,this.inited&&(this.textView.setWhiteSpace(k?"nowrap":"normal"),this.fireEvent("shrinkToFit",k)))},setTextY:function(k){if(this.textY!==k&&(this.textY=k,this.inited)){const a=
this.textView;this.fireEvent("textY",k);"string"===typeof k?a.setValign(k):(a.setValign(""),a.setY(k))}},__updateContent:function(k){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:a,outset:f,textView:b}=this;this.__updateContentLoopBlock=!0;b.setX(a);this.shrinkToFit?this.setWidth(a+(b.visible&&this.text?b.width:0)+f):b.setWidth(this.width-a-f);this.__updateContentLoopBlock=!1}}});r.TextButton=new w("TextButton",r.PaddedText,{include:[e],initNode:function(k,a){a.focusIndicator??
(a.focusIndicator=!1);a.roundedCorners??(a.roundedCorners=3);a.textAlign??(a.textAlign="center");a.paddingTop??(a.paddingTop=1);a.height??(a.height=23-(a.paddingTop??0));a.activeColor??(a.activeColor=d.TextButtonActive);a.hoverColor??(a.hoverColor=d.TextButtonHover);a.readyColor??(a.readyColor=d.TextButtonReady);this.callSuper(k,a)}})})(myt);
(r=>{const w=console.warn,{focus:v,mouse:t,windowResize:h}=r.global,d={};r.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:e=>d[e]},initNode:function(e,m){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(e,m)},setLastFloatingPanelShown:function(e){this.lastFloatingPanelShown=e},setLastFloatingPanelId:function(e){this.floatingPanelId=
e},setFloatingAlign:function(e){this.set("floatingAlign",e,!0)},setFloatingValign:function(e){this.set("floatingValign",e,!0)},setFloatingAlignOffset:function(e){this.set("floatingAlignOffset",e,!0)},setFloatingValignOffset:function(e){this.set("floatingValignOffset",e,!0)},setKeepInWindow:function(e){this.set("keepInWindow",e,!0)},setKeepInWindowBorder:function(e){this.set("keepInWindowBorder",e,!0)},createFloatingPanel:function(e,m,k){e=e??this.floatingPanelId;k=k??{};k.panelId=e;return d[e]=new m(null,
k)},getFloatingPanel:function(e){return d[e??this.floatingPanelId]},toggleFloatingPanel:function(e){this.getFloatingPanel(e??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(e):this.showFloatingPanel(e)},showFloatingPanel:function(e){if(e=this.getFloatingPanel(e??this.floatingPanelId))e.show(this),this.setLastFloatingPanelShown(e)},hideFloatingPanel:function(e){if(e=this.getFloatingPanel(e??this.floatingPanelId))e.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(e){this.callSuper?.()},
notifyPanelHidden:function(e){this.callSuper?.()},getFloatingAlignForPanel:function(e){return this.floatingAlign},getFloatingValignForPanel:function(e){return this.floatingValign},getFloatingAlignOffsetForPanel:function(e){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(e){return this.floatingValignOffset},getNextFocus:function(){const e=this.lastFloatingPanelShown;return e?.isShown()?e:this.callSuper?.()},getNextFocusAfterPanel:function(e){return this},getPrevFocusAfterPanel:function(e){return this}});
r.FloatingPanel=new JS.Class("FloatingPanel",r.View,{include:[r.RootView],initNode:function(e,m){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;m.visible=m.focusIndicator=!1;m.focusable=m.focusCage=!0;this.callSuper(e,m)},setOwner:function(e){this.owner=e},setPanelId:function(e){this.panelId=e},setIgnoreOwnerForHideOnMouseDown:function(e){this.ignoreOwnerForHideOnMouseDown=e},setHideOnBlur:function(e){this.hideOnBlur=e},setHideOnMouseDown:function(e){this.hideOnMouseDown=
e},setWidth:function(e){const m=this.width;this.callSuper(e);this.isShown()&&m!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(e){const m=this.height;this.callSuper(e);this.isShown()&&m!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(e){var m=e.value;e=m.pageX;m=m.pageY;this.containsPoint(e,m)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(e,m)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(e){this.hideOnMouseDown&&
this.hide(e)},focus:function(e){if(this.owner&&this.isAncestorOf(v.focusedView))this.owner[(v.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(e);else{const m=this.getFirstFocusableDescendant();m===this?this.callSuper(e):m.focus(e)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(e){(e=e.value)&&!this.isAncestorOf(e)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&v.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(e){this.isShown()||(this.bringToFront(),this.updateLocation(e),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(t,"__doMouseDown","mousedown",!0),this.attachTo(v,"__doFocusChange","focused"))},hide:function(e){this.isShown()&&(this.detachFromDom(t,"__doMouseDown","mousedown",!0),this.detachFrom(v,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),e||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(e){this.setOwner(e);this.updateLocationX(e);this.updateLocationY(e)},updateLocationX:function(e){const m=e.getFloatingAlignForPanel(this),k=typeof m;let a;if("string"===k){a=e.getPagePosition().x+e.getFloatingAlignOffsetForPanel(this);switch(m){case "outsideRight":a+=e.width;break;case "insideRight":a+=e.width-this.width;break;case "outsideLeft":a-=this.width;break;case "insideLeft":break;default:w("Invalid align value",k,m)}e.keepInWindow&&
(e=a+this.width+(e.keepInWindowBorder||0)-h.getWidth(),0<e&&(a-=e))}else"number"===k?a=m:w("Invalid align type",k,m);this.setX(a)},updateLocationY:function(e){const m=e.getFloatingValignForPanel(this),k=typeof m;let a;if("string"===k){a=e.getPagePosition().y+e.getFloatingValignOffsetForPanel(this);switch(m){case "outsideBottom":a+=e.height;break;case "insideBottom":a+=e.height-this.height;break;case "outsideTop":a-=this.height;break;case "insideTop":break;default:w("Invalid valign value",k,m)}e.keepInWindow&&
(e=a+this.height+(e.keepInWindowBorder||0)-h.getHeight(),0<e&&(a-=e))}else"number"===k?a=m:w("Invalid valign type",k,m);this.setY(a)}})})(myt);
(r=>{const {Class:w,Module:v}=JS,t=Math,{View:h,global:d}=r,e=d.focus,m=d.keys,{LIST_KEYS:k,CODE_ESC:a}=m,f=g=>{const c=g.itemConfig??[],q=c.length,{items:x,defaultItemClass:u,fixedWidth:n}=g,A=x.length,J=0<n,z=g.getContentView(),C=z.getLayouts();let I=0;for(var M of C)M.incrementLockedCounter();h.doWhileRemovedFromDom(z,()=>{const O={listView:g};J&&(O.width=n,O.enableEllipsis=!0);for(;q>I;++I){var l=c[I];const p=l.klass??u;l=l.attrs??{};let y=x[I];y&&!y.isA(p)&&(y.destroy(),y=null);y??=x[I]=new p(z,
{...O});y&&(y.callSetters(l),y.__LAYOUT_IDX=I)}});if(J)M=n;else for(M=g.minWidth,I=0;q>I;){const O=x[I++];O.syncToDom();M=t.max(M,O.getMinimumWidth())}for(;A>I;)x[I++].destroy();x.length=q;if(!J)for(I=0;q>I;)g.updateItemWidth(x[I++],M);g.updateContentWidth(z,M);for(const O of C)O.sortSubviews((l,p)=>l.__LAYOUT_IDX-p.__LAYOUT_IDX),O.decrementLockedCounter(),O.update()},b=r.ListViewItemMixin=new v("ListViewItemMixin",{setListView:function(g){this.listView=g},getMinimumWidth:()=>0,syncToDom:()=>{}});
r.ListView=new w("ListView",r.FloatingPanel,{initNode:function(g,c){this.items=[];this.maxHeight=-1;this.minWidth=0;c.defaultItemClass??(c.defaultItemClass=r.ListViewItem);c.overflow??(c.overflow="autoy");c.bgColor??(c.bgColor="#ccc");c.boxShadow??(c.boxShadow=r.theme.focusShadow);this.callSuper(g,c);f(this);this.buildLayout(this.getContentView())},buildLayout:g=>{new r.SpacedLayout(g,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(g){this.minWidth=g},setDefaultItemClass:function(g){this.defaultItemClass=
g},setItemConfig:function(g){this.itemConfig=g;this.inited&&f(this)},getContentView:function(){return this},setMaxHeight:function(g){this.maxHeight!==g&&(this.maxHeight=g,this.inited&&(this.fireEvent("maxHeight",g),this.setHeight(this.height)))},setHeight:function(g){this.callSuper(0<=this.maxHeight?t.min(this.maxHeight,g):g);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(g){this?.owner.doItemActivated(g)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(g=>g.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(g=>g.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(g,c)=>{g.setWidth(c)},updateContentWidth:(g,c)=>{g.setWidth(c)}});r.ListViewAnchor=new v("ListViewAnchor",{include:[r.FloatingPanelAnchor,r.ArrowKeyActivation],initNode:function(g,
c){c.listViewClass??(c.listViewClass=r.ListView);c.listViewAttrs??(c.listViewAttrs={});c.itemConfig??(c.itemConfig=[]);c.activationKeys??(c.activationKeys=k);this.callSuper(g,c)},setListViewClass:function(g){this.listViewClass=g},setListViewAttrs:function(g){this.listViewAttrs=g},setItemConfig:function(g){this.itemConfig=g},getFloatingValignForPanel:function(g){var c=g.height,q=this.getPagePosition().y,x=d.windowResize.getHeight()-this.getPagePosition().y-this.height;g=q-c;c=x-c;q=q>x;x=this.floatingValign;
switch(x){case "outsideBottom":0>c&&q&&(x="outsideTop");break;case "insideBottom":0>c&&q&&(x="insideTop");break;case "outsideTop":0>g&&!q&&(x="outsideBottom");break;case "insideTop":0>g&&!q&&(x="insideBottom")}return x},doItemActivated:function(g){this.hideFloatingPanel()},getFloatingPanel:function(g){return this.callSuper(g)??this.createFloatingPanel(g,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(g){const c=this.getFloatingPanel(g);c&&(c.setItemConfig(this.itemConfig),this.callSuper(g))},
doActivationKeyDown:function(g,c){g===a?this.hideFloatingPanel():this.callSuper(g,c)},doKeyArrowLeftOrUp:function(g,c){this.focusToLastItem()},doKeyArrowRightOrDown:function(g,c){this.focusToFirstItem()},doActivationKeyUp:function(g){if(g!==a)switch(this.callSuper(g),g){case m.CODE_ARROW_LEFT:case m.CODE_ARROW_UP:this.focusToLastItem();break;case m.CODE_ARROW_RIGHT:case m.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToLastItem()},
focusToFirstItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToFirstItem()},updateEntryAttr:function(g,c,q){(g=this.getEntryByValue(g))&&(g.attrs[c]=q);return g},getEntryByValue:function(g){return this.itemConfig.find(c=>c?.attrs&&c.attrs.value===g)}});r.ListViewItem=new w("ListViewItem",r.TextButton,{include:[b,r.ArrowKeyActivation],initNode:function(g,c){c.activeColor??(c.activeColor="#bbb");c.hoverColor??(c.hoverColor="#fff");c.readyColor??(c.readyColor="#eee");c.paddingLeft??
(c.paddingLeft=8);c.paddingRight??(c.paddingRight=8);c.textAlign??(c.textAlign="left");c.roundedCorners??(c.roundedCorners=0);c.activationKeys??(c.activationKeys=k);c.focusIndicator??(c.focusIndicator=!0);const q=this.__enableEllipsis=c.enableEllipsis;delete c.enableEllipsis;this.callSuper(g,c);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(g){this.callSuper(g);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return t.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(g,c){g===a?this.listView.owner.hideFloatingPanel():this.callSuper(g,c)},doKeyArrowLeftOrUp:function(g,c){e.prev()},doKeyArrowRightOrDown:function(g,c){e.next()}});r.ListViewSeparator=new w("ListViewSeparator",h,{include:[b],initNode:function(g,c){c.height??(c.height=1);c.bgColor??(c.bgColor="#666");this.callSuper(g,c)}})})(myt);
(r=>{const w=r.AccessorSupport,v=w.generateSetterName,t={},h=r.BAG=new JS.Class("BAG",{include:[w,r.Destructible,r.Observable],extend:{getGroup:(d,e)=>{if(d&&e){let m;return(m=t[d]??(t[d]={}))[e]??(m[e]=new h(d,e))}},removeGroup:(d,e)=>{if(d&&e&&(d=t[d])){const m=d[e];m&&delete d[e];return m}}},initialize:function(d,e){this.__nodes=[];this.trueNode=null;this.attrName=d;this.groupId=e},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&h.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(d){this.set("groupId",d,!0)},setAttrName:function(d){this.set("attrName",d,!0)},setTrueNode:function(d){this.set("trueNode",d,!0)},getNodes:function(){return this.__nodes},register:function(d){d&&!this.isRegistered(d)&&(this.__nodes.push(d),d[this.attrName]&&this.setTrue(d))},unregister:function(d){if(d){const e=this.__nodes,m=e.indexOf(d);-1<m&&e.splice(m,1);this.trueNode===d&&this.setTrueNode(null);0===e.length&&
this.destroy()}},setTrue:function(d){if(d&&this.trueNode!==d&&this.isRegistered(d)){const e=this.attrName,m=v(e),k=this.__nodes;let a=k.length;for(this.setTrueNode(d);a;){const f=k[--a];if(d===f){if(!f[e])f[m](!0)}else if(f[e])f[m](!1)}}},setFalse:function(d){d&&this.trueNode===d&&(d[v(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(d){return this.__nodes.includes(d)}});r.BAGMembership=new JS.Module("BAGMembership",{initNode:function(d,e){this.__bags=[];this.callSuper(d,e)},destroy:function(){const d=
this.__bags;let e=d.length;for(;e;){const m=d[--e];this.removeFromBAG(m.attrName,m.groupId)}this.callSuper()},isRegisteredWithBAG:function(d){return this.__bags.includes(d)},getBAG:(d,e)=>h.getGroup(d,e),addToBAG:function(d,e){e=this.getBAG(d,e);this.isRegisteredWithBAG(e)||(this.__bags.push(e),e.register(this),this.isAttachedTo(this,"__updateForBAG",d)||this.attachTo(this,"__updateForBAG",d))},removeFromBAG:function(d,e){e=this.getBAG(d,e);if(this.isRegisteredWithBAG(e)){const m=this.__bags;let k=
m.length,a=!0;for(;k;){const f=m[--k];f===e?(m.splice(k,1),e.unregister(this)):f.attrName===d&&(a=!1)}a&&this.detachFrom(this,"__updateForBAG",d)}},__updateForBAG:function(d){for(const e of this.__bags)if(e.attrName===d.type)e[d.value?"setTrue":"setFalse"](this)}})})(myt);
(r=>{const w=v=>{const t=v.label||"";v.setText('<i class="far fa-'+(!0===v.selected?"dot-":"")+'circle"></i>'+(0<t.length?" ":"")+t)};r.Radio=new JS.Class("Radio",r.Text,{include:[r.SimpleButtonStyle,r.BAGMembership],initNode:function(v,t){t.selected??(t.selected=!1);t.groupId??(t.groupId=r.generateGuid());t.focusIndicator??(t.focusIndicator=!1);t.activeColor??(t.activeColor="inherit");t.hoverColor??(t.hoverColor="inherit");t.readyColor??(t.readyColor="inherit");const h=t.value;delete t.value;this.callSuper(v,
t);this.setValue(h);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);r.FontAwesome.registerForNotification(this);w(this)},setOptionValue:function(v){this.set("optionValue",v,!0)},setValue:function(v){if(this.inited){const t=this.getBAG("selected",this.groupId);if(t){const h=t.getNodes();let d=h.length;for(;d;){const e=h[--d];if(e.optionValue===v){t.setTrue(e);break}}}}},getValue:function(){var v=this.getBAG("selected",this.groupId);return(v=v?v.trueNode:null)?v.optionValue:null},
setSelected:function(v){this.selected!==v&&(this.selected=v,this.inited&&(this.fireEvent("selected",v),w(this)))},setGroupId:function(v){if(this.groupId!==v){const t=this.groupId;this.groupId=v;t&&this.removeFromBAG("selected",t);v&&this.addToBAG("selected",v);this.inited&&this.fireEvent("groupId",v)}},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&w(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(v,t=1){this.setOpacity(t);this.setTextColor(v)}})})(myt);
(r=>{const w=JS.Module,v=r.global.keys,t=r.Selectable=new w("Selectable",{setSelected:function(d){d=this.valueFromEvent(d);this.selected!==d&&(this.selected=d,this.inited&&this.fireEvent?.("selected",d))},isSelected:function(){return!!this.selected},canSelect:d=>!0,canDeselect:d=>!0}),h=r.SelectionManager=new w("SelectionManager",{extend:{isAddMode:()=>v.isShiftKeyDown(),isToggleMode:()=>v.isAcceleratorKeyDown()},initNode:function(d,e){this.__selected={};this.__lastSelectedItem=null;e.selectedCount=
0;e.itemSelectionId??(e.itemSelectionId="id");e.maxSelected??(e.maxSelected=-1);this.callSuper(d,e)},setItemSelectionId:function(d){this.itemSelectionId=d},setMaxSelected:function(d){this.maxSelected=d},setSelectedCount:function(d){this.selectedCount!==d&&(this.selectedCount=d,this.inited&&this.fireEvent("selectedCount",d))},isAddMode:()=>h.isAddMode(),isToggleMode:()=>h.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(d){d&&!this.isSelectedItem(d)&&this.canSelectItem(d)&&
(d.setSelected(!0),this.__selected[d[this.itemSelectionId]]=d,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=d,this.doSelected(d),this.fireEvent("itemSelected",d))},doSelected:d=>{},selectById:function(d){this.select(this.getSelectableItem(d))},canSelectItem:function(d){const {maxSelected:e,selectedCount:m}=this;if(0===e)return!1;if(1===e){if(0<m&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<e&&m>=e)return!1;return d.canSelect(this)},selectAll:function(){const d=
this.getSelectableItems();let e=d.length;for(;e;)this.select(d[--e])},deselect:function(d){this.isSelectedItem(d)&&this.canDeselectItem(d)&&(d.setSelected(!1),delete this.__selected[d[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===d&&(this.__lastSelectedItem=null),this.doDeselected(d),this.fireEvent("itemDeselected",d))},doDeselected:d=>{},deselectById:function(d){this.deselect(this.getSelectableItem(d))},canDeselectItem:function(d){return d.canDeselect(this)},
deselectAll:function(){const d=this.__selected;for(const e in d)this.deselect(d[e])},isSelectedItem:d=>d?d.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const d=[],e=this.getSubviews();let m=e.length;for(;m;){const k=e[--m];k.isA(t)&&d.push(k)}return d},getSelectableItems:function(){const d=this.getManagedItems();let e=d.length;for(;e;)d[--e].canSelect(this)||d.splice(e,1);return d},getSelectableItem:function(d){const e=
this.getSelectableItems(),m=this.itemSelectionId;let k=e.length;for(;k;){const a=e[--k];if(a[m]===d)return a}}})})(myt);
(r=>{const w=JS.Class,{View:v,SizeToParent:t,LocalStorage:h,debounce:d}=r,e=r.TabSlider=new w("TabSlider",v,{include:[r.Selectable,r.Disableable,t],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(k,a){const f=this;let b;const g=a.noWrapperContainer;delete a.noWrapperContainer;a.defaultPlacement=g?"wrapper":"wrapper.container";a.percentOfParentWidth=100;a.expansionState="collapsed";a.tabId??(a.tabId=r.generateGuid());
a.tabContainer??(a.tabContainer=k);a.selected??(a.selected=!1);a.buttonClass??(a.buttonClass=r.SimpleButton);a.zIndex??(a.zIndex=0);a.buttonHeight??(a.buttonHeight=30);a.fillColorSelected??(a.fillColorSelected="#666");a.fillColorHover??(a.fillColorHover="#eee");a.fillColorActive??(a.fillColorActive="#ccc");a.fillColorReady??(a.fillColorReady="#fff");a.minContainerHeight??(a.minContainerHeight=100);a.layoutPaddingY??(a.layoutPaddingY=0);a.wrapperExpandedOverflow??(a.wrapperExpandedOverflow="autoy");
a.selected&&(b=!0,delete a.selected);f.callSuper(k,a);f.button=new f.buttonClass(f,{ignorePlacement:!0,zIndex:1,height:f.buttonHeight,focusIndicator:!0,groupId:f.parent.parent.groupId,percentOfParentWidth:100,hoverColor:f.fillColorHover,activeColor:f.fillColorActive,readyColor:f.fillColorReady},[t,{doActivated:()=>{const c=f.tabContainer;f.isSelected()&&1!==c.maxSelected?c.deselect(f):c.select(f)},updateUI:function(){this.callSuper();f.selected&&-1!==f.tabContainer.maxSelected&&this.setBgColor(f.fillColorSelected);
f.notifyButtonRedraw()}}]);k=f.wrapper=new v(f,{ignorePlacement:!0,y:f.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[t,{setHeight:function(c){this.callSuper(Math.round(c))},setWidth:function(c){this.callSuper(c);this.inited&&this.container?.setWidth(c)}}]);g||(f._wrapperLayout=new r.SizeToChildren(k.container=new v(k),{axis:"y",paddingY:f.layoutPaddingY}));f.constrain("__updateHeight",[k,"y",k,"height"]);b&&f.tabContainer.select(f);!0===a.disabled&&f.setDisabled(!0);
f.setHeight(f.getCollapsedHeight())},setSelected:function(k){this.callSuper(k);this.button?.updateUI()},setTabId:function(k){this.tabId=k},setTabContainer:function(k){this.tabContainer=k},setLayoutPaddingY:function(k){this.layoutPaddingY=k;this.inited&&this._wrapperLayout?.setPaddingY(k)},setMinContainerHeight:function(k){this.minContainerHeight=k},setButtonClass:function(k){this.buttonClass=k},setFillColorSelected:function(k){this.fillColorSelected=k},setFillColorHover:function(k){this.fillColorHover=
k},setFillColorActive:function(k){this.fillColorActive=k},setFillColorReady:function(k){this.fillColorReady=k},setWrapperExpandedOverflow:function(k){this.wrapperExpandedOverflow=k},setButtonHeight:function(k){this.buttonHeight!==k&&(this.buttonHeight=k,this.button&&(this.button.setHeight(k),this.wrapper.setY(k)))},setExpansionState:function(k){if(this.expansionState!==k){this.expansionState=k;this.inited&&this.fireEvent("expansionState",k);const a=this.wrapper;a&&("expanded"===k?(a.setMaskFocus(!1),
a.setOverflow(this.wrapperExpandedOverflow),this.tabContainer?.saveState()):"expanding"===k?a.setVisible(!0):"collapsed"===k?(a.setVisible(!1),this.tabContainer?.saveState()):"collapsing"===k&&(a.setMaskFocus(!0),a.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(k){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(k){const a=this,f=a.wrapper;k-=a.getCollapsedHeight();a.setExpansionState("expanding");
f.stopActiveAnimators();if(f.height!==k){const b=a.tabContainer.duration;1===b?(f.setHeight(k),a.setExpansionState("expanded")):f.animate({attribute:"height",to:k,duration:b}).next(g=>{a.setExpansionState("expanded")})}else a.setExpansionState("expanded")},collapse:function(){const k=this,a=k.wrapper;k.setExpansionState("collapsing");a.stopActiveAnimators();if(0!==a.height){const f=k.tabContainer.duration;1===f?(a.setHeight(0),k.setExpansionState("collapsed")):a.animate({attribute:"height",to:0,duration:f}).next(b=>
{k.setExpansionState("collapsed")})}else k.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container?.height}}),m=(k,a,f,b)=>{k[a]!==b&&(k[a]=b,k.button?.label?.set(labelAttrName,b))};r.TextTabSlider=new w("TextTabSlider",e,{initNode:function(k,a){this.labelTextColorChecked=
"#fff";this.labelTextColor="#333";this.labelAlign="center";this.labelValign="middle";this.labelFontSize="16px";this.labelFontWeight="bold";a.labelTextColorChecked??(a.labelTextColorChecked="#fff");a.labelTextColor??(a.labelTextColor="#333");a.labelAlign??(a.labelAlign="center");a.labelValign??(a.labelValign="middle");a.labelFontSize??(a.labelFontSize="16px");a.labelFontWeight??(a.labelFontWeight="bold");this.callSuper(k,a);this.button.label=new r.Text(this.button,{ignorePlacement:!0,fontSize:this.labelFontSize,
fontWeight:this.labelFontWeight,text:this.text,align:this.labelAlign,valign:this.labelValign,textColor:this.__getTextColor()})},setLabelTextColorChecked:function(k){this.labelTextColorChecked!==k&&(this.labelTextColorChecked=k,this.notifyButtonRedraw())},setLabelTextColor:function(k){this.labelTextColor!==k&&(this.labelTextColor=k,this.notifyButtonRedraw())},setLabelAlign:function(k){m(this,"labelAlign","align",k)},setLabelValign:function(k){m(this,"labelValign","valign",k)},setLabelFontSize:function(k){m(this,
"labelFontSize","fontSize",k)},setLabelFontWeight:function(k){m(this,"labelFontWeight","fontWeight",k)},setText:function(k){m(this,"text","text",k)},notifyButtonRedraw:function(){this.button?.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});r.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[r.SelectionManager],initNode:function(k,a){const f=this;f._tabSliders=
[];a.defaultPlacement="container";a.spacing??(a.spacing=r.theme.TabSliderContainerSpacing);a.overflow??(a.overflow="autoy");a.itemSelectionId??(a.itemSelectionId="tabId");a.maxSelected??(a.maxSelected=1);a.duration??(a.duration=500);f.updateLayout=d(f.updateLayout);f.callSuper(k,a);k=f.container=new v(f,{ignorePlacement:!0,percentOfParentWidth:100},[t,{subnodeAdded:function(b){this.callSuper(b);b instanceof e&&(f._tabSliders.push(b),f.attachTo(b,"updateLayout","selected"))},subnodeRemoved:function(b){if(b instanceof
e){const g=f._tabSliders,c=g.indexOf(b);-1<c&&(f.detachFrom(b,"updateLayout","selected"),g.splice(c,1))}this.callSuper(b)}}]);k.layout=new r.SpacedLayout(k,{axis:"y",spacing:f.spacing,collapseParent:!0});f.attachTo(f,"updateLayout","height")},setPersistenceId:function(k){this.persistenceId=k},getTabSliders:function(){return this._tabSliders},getTabSliderById:function(k){for(const a of this._tabSliders)if(a.tabId===k)return a},setSpacing:function(k){this.spacing!==k&&(this.spacing=k,this.layout?.setSpacing(k))},
setDuration:function(k){this.duration=k},updateLayout:function(k,a){k=this._tabSliders;for(var f=k.length,b=f,g=0,c=0,q=0;b;){var x=k[--b];x.visible&&(++q,x.selected?(g+=x.getMinimumExpandedHeight(),c+=x.getPreferredExpandedHeight()):(x=x.getCollapsedHeight(),g+=x,c+=x))}b=this.container.layout;q=b.inset+b.outset+b.spacing*(q-1);c+=q;b=this.height;g=g+q>b;q=c>b;x=this.duration;c-=b;0<a&&this.setDuration(a);for(b=f;b;)if(f=k[--b],f.visible)if(f.selected){let u;if(g)u=f.getMinimumExpandedHeight();else if(q){const n=
f.getPreferredExpandedHeight(),A=f.getMinimumExpandedHeight();u=n-c;A>u?(c-=n-A,u=A):c=0}else u=f.getPreferredExpandedHeight();f.expand(u)}else f.collapse();0<a&&this.setDuration(x)},readState:k=>h.getDatum(k),writeState:(k,a)=>{h.setDatum(k,a)},saveState:d(function(){const k=[];for(const a of this.getTabSliders())"expanded"===a.expansionState&&k.push(a.tabId);this.writeState(this.persistenceId,k)},1E3),restoreState:function(k){for(const a of this.readState(this.persistenceId)||k)this.select(this.getTabSliderById(a))}})})(myt);
(r=>{const w=r.theme,v=h=>{const d=[];switch(h.tabContainer.location){case "top":d.push("TopLeft","TopRight");break;case "bottom":d.push("BottomLeft","BottomRight");break;case "left":d.push("TopLeft","BottomLeft");break;case "right":d.push("TopRight","BottomRight")}for(const e of d)h["setRounded"+e+"Corner"](h.cornerRadius||0)},t=r.Tab=new JS.Class("Tab",r.SimpleTextButton,{include:[r.Selectable],initNode:function(h,d){d.tabId??(d.tabId=r.generateGuid());d.tabContainer??(d.tabContainer=h);let e;d.selected&&
(e=!0,delete d.selected);d.inset??(d.inset=w.TabInset);d.outset??(d.outset=w.TabOutset);d.selectedColor??(d.selectedColor="#fff");d.hoverColor??(d.hoverColor="#eee");d.activeColor??(d.activeColor="#aaa");d.readyColor??(d.readyColor="#ccc");d.labelTextSelectedColor??(d.labelTextSelectedColor="#333");d.height??(d.height=24);d.focusIndicator??(d.focusIndicator=!1);d.cornerRadius??(d.cornerRadius=6);this.callSuper(h,d);e&&this.tabContainer.select(this);v(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(h){this.tabId=h},setTabContainer:function(h){this.tabContainer=h},setSelectedColor:function(h){this.selectedColor=h},setLabelTextColor:function(h){this.labelTextColor=h},setCornerRadius:function(h){this.cornerRadius=h;this.inited&&v(this)},setLabelTextSelectedColor:function(h){this.labelTextSelectedColor=h;this.inited&&this.selected&&this.textView.setTextColor(h)},setSelected:function(h){this.callSuper(h);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}});r.TabContainer=new JS.Module("TabContainer",{include:[r.SelectionManager],initNode:function(h,d){this.__tabs=[];d.spacing??(d.spacing=w.TabContainerSpacing);d.inset??(d.inset=w.TabContainerInset);d.location??(d.location="top");d.itemSelectionId??(d.itemSelectionId=
"tabId");d.maxSelected??(d.maxSelected=1);const e=d.collapse??!0;delete d.collapse;this.callSuper(h,d);this.layout=new r.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:e})},setLocation:function(h){this.location=h},setSpacing:function(h){this.spacing!==h&&(this.spacing=h,this.layout?.setSpacing(h))},setInset:function(h){this.inset!==h&&(this.inset=h,this.layout?.setInset(h))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(h){this.callSuper(h);if(h.isA(t))switch(this.__tabs.push(h),this.location){case "top":h.setValign("bottom");break;case "bottom":h.setValign("top");break;case "left":h.setAlign("right");break;case "right":h.setAlign("left")}},subnodeRemoved:function(h){if(h.isA(t)){const d=this.__tabs,e=d.indexOf(h);-1<e&&d.splice(e,1)}this.callSuper(h)}})})(myt);
(r=>{const w=JS.Class,v=Math.min,t=Array.isArray,{SizeToDom:h,View:d,Disableable:e,KeyObservable:m,theme:k,global:{keys:a}}=r,f=(u,n,A)=>{u[A]!==n&&(u[A]=n,u.getIDS()[A]=n+"px",u.inited&&(u.fireEvent(A,n),u.sizeViewToDom()))},b=(u,n,A)=>{u[n]!==A&&(u.getIDE()[n]=u[n]=A,u.inited&&u.fireEvent(n,A))},g=r.NativeInputWrapper=new w("NativeInputWrapper",d,{include:[e,r.InputObservable],initNode:function(u,n){n.tagName??(n.tagName="input");n.focusable??(n.focusable=!0);this.callSuper(u,n);this.addDomClass("mytNativeInput")},
createOurDomElement:function(u){u=this.callSuper(u);this.inputType&&((t(u)?u[1]:u).type=this.inputType);return u},setDisabled:function(u){this.disabled!==u&&(this.getIDE().disabled=u,this.callSuper(u))},setValue:function(u){this.value!==u&&(this.value=u,this.setDomValue(u),this.inited&&this.fireEvent("value",u))},getDomValue:function(){return this.getIDE().value},setDomValue:function(u){const n=this.getIDE();n.value!==u&&(n.value=u)}}),c=r.InputSelectOption=new w("InputSelectOption",d,{include:[e,
r.Selectable],createOurDomElement:u=>document.createElement("option"),setSelected:function(u){u=this.valueFromEvent(u);const n=this.getIDE();n.selected!==u&&(n.selected=u)},setDisabled:function(u){this.disabled!==u&&(this.getIDE().disabled=u,this.callSuper(u))},setValue:function(u){b(this,"value",u)},setLabel:function(u){this.label!==u&&(this.getIDE().textContent=this.label=u,this.inited&&this.fireEvent("label",u))},isSelected:function(){return this.getIDE().selected},canSelect:function(u){return!this.disabled&&
!this.getIDE().selected&&this.parent===u},canDeselect:function(u){return!this.disabled&&this.getIDE().selected&&this.parent===u}}),q=r.BaseInputText=new w("BaseInputText",g,{include:[r.TextSupport],initNode:function(u,n){n.bgColor??(n.bgColor="transparent");n.spellcheck??(n.spellcheck=!1);this.callSuper(u,n);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(u){this.callSuper(u);this.setValue(u)},
setSpellcheck:function(u){b(this,"spellcheck",u)},setMaxLength:function(u){b(this,"maxLength",null==u||0>u?void 0:u)},setAllowedChars:function(u){this.allowedChars=u},setPlaceholder:function(u){b(this,"placeholder",u)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k.focusShadow)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(u){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(u){const n=
u.value,A=this.allowedChars;A&&!A.includes(m.getKeyFromEvent(u))&&n.preventDefault();this.filterInputPress(n)},filterInput:u=>u,filterInputPress:u=>{},__syncToDom:function(u){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const u=document.selection.createRange();u.moveStart("character",-this.getDomValue().length);return u.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(u,n){if(null==n||u===n){if(this.getCaretPosition()===u)return;
n=u}var A=this.getIDE();A.setSelectionRange?A.setSelectionRange(u,n):A.createTextRange&&(A=A.createTextRange(),A.collapse(!0),A.moveEnd("character",n),A.moveStart("character",u),A.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const u=this.getIDE();return{start:u.selectionStart,startElem:u,end:u.selectionEnd,endElem:u}},setSelection:function(u){u&&
this.setCaretPosition(u.start,u.end)},saveSelection:function(u){this._selRange=u||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),x=r.InputText=new w("InputText",q,{include:[r.SizeHeightToDom],initNode:function(u,n){this.inputType=!0===n.password?"password":"text";this.callSuper(u,n);this.setCaretToEnd()},setPassword:function(u){this.set("password",u,!0);this.inited&&(this.getIDE().type=u?"password":"text")}});r.InputTextMouseFixMixin=new JS.Module("InputTextMouseFixMixin",
{initNode:function(u,n){this.callSuper(u,n);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},createDomHandler:function(u,n,A){return"mousedown"===A||"mouseup"===A?this.createStandardDomHandler(u,n,A,r.MouseObservable,!1):this.callSuper(u,n,A)},doMouseDown:u=>{},doMouseUp:u=>{}});r.EditableText=new w("EditableText",q,{include:[h],initNode:function(u,n){n.tagName??(n.tagName="div");n.inputType=null;n.whiteSpace??(n.whiteSpace="pre");n.contentEditable??(n.contentEditable=
!0);this.callSuper(u,n);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(u){f(this,u,"minWidth")},setMinHeight:function(u){f(this,u,"minHeight")},setPadding:function(u){this.setPaddingTop(u);this.setPaddingRight(u);this.setPaddingBottom(u);this.setPaddingLeft(u)},setPaddingTop:function(u){f(this,u,"paddingTop")},setPaddingRight:function(u){f(this,u,"paddingRight")},
setPaddingBottom:function(u){f(this,u,"paddingBottom")},setPaddingLeft:function(u){f(this,u,"paddingLeft")},setContentEditable:function(u){b(this,"contentEditable",u)},filterInputPress:function(u){const n=this.maxLength;0<=n&&this.getCharacterCount()===n&&u.preventDefault();this.callSuper(u)},getDomValue:function(){return this.getIDE().innerHTML},setDomValue:function(u){const n=this.getIDE();n.innerHTML!==u&&(n.innerHTML=u,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(u){m.isEnterKeyEvent(u)&&
(u.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(u){this.callSuper(u);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(u,n){if(null==n||u===
n){if(this.getCaretPosition()===u)return;n=u}this.saveSelection({start:u,startElem:this.getIDE().firstChild,end:n,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(u){this.saveSelection();return!0},getSelection:function(){let u;if(window.getSelection){const n=window.getSelection();if(0<n.rangeCount){if(n.extentNode===this.getIDE())return;u=n.getRangeAt(0)}}else document.selection&&(u=document.selection.createRange());return{start:u?
u.startOffset:0,startElem:u?u.startContainer:this.getIDE().firstChild,end:u?u.endOffset:0,endElem:u?u.endContainer:this.getIDE().firstChild}},setSelection:function(u){if(u){const {startElem:n,endElem:A}=u;if(n&&n.parentNode&&A&&A.parentNode){const J=document.createRange();J.setStart(n,v(u.start,n.length));J.setEnd(A,v(u.end,A.length));window.getSelection?(u=window.getSelection(),0<u.rangeCount&&u.removeAllRanges(),u.addRange(J)):document.selection&&J.select()}}}});r.InputTextArea=new w("InputTextArea",
q,{initNode:function(u,n){n.tagName??(n.tagName="textarea");n.inputType=null;n.resize??(n.resize="none");n.wrap??(n.wrap="soft");this.callSuper(u,n)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(u){const n=this;n.resize!==u&&(u=n.resize=n.getIDS().resize=u||"none",n.inited&&n.fireEvent("resize",u),"none"!==u&&(n.__resizeObserver??(n.__resizeObserver=new ResizeObserver(()=>{n.doResize()}))).observe(n.getIDE()))},setWrap:function(u){b(this,
"wrap",u)},doResize:function(){const u=this.resize;"both"!==u&&"horizontal"!==u||h.sizeWidth(this);"both"!==u&&"vertical"!==u||h.sizeHeight(this)}});r.ComboBox=new w("ComboBox",x,{include:[r.Activateable,r.KeyActivation,r.ListViewAnchor],initNode:function(u,n){this.filterItems=!0;n.activationKeys??(n.activationKeys=[a.CODE_ENTER,a.CODE_ESC,a.CODE_ARROW_UP,a.CODE_ARROW_DOWN]);n.bgColor??(n.bgColor="#fff");n.borderWidth??(n.borderWidth=1);n.borderStyle??(n.borderStyle="solid");n.floatingAlignOffset??
(n.floatingAlignOffset=n.borderWidth);n.fullItemConfig??(n.fullItemConfig=[]);n.listViewAttrs={...n.listViewAttrs,maxHeight:n.listViewAttrs?.maxHeight??99};this.callSuper(u,n)},setFullItemConfig:function(u){this.fullItemConfig=u},setFilterItems:function(u){this.filterItems=u},__syncToDom:function(u){const n=this.value;this.callSuper(u);n!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(u){const n=this.getFloatingPanel(u);if(n){let J;if(this.filterItems){J=[];var A=this.value;A=null==
A?"":(""+A).toLowerCase();const z=this.fullItemConfig,C=z.length;for(let I=0;C>I;){const M=z[I++],O=M.attrs.text.toLowerCase(),l=O.indexOf(A);0===l?O!==A&&J.push(M):0<l&&J.push(M)}}else J=this.fullItemConfig;0<J.length?(n.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(J),this.callSuper(u)):this.hideFloatingPanel(u)}},doItemActivated:function(u){this.setValue(null==u.value?u.text:u.value);this.callSuper(u)},doActivated:function(){this.toggleFloatingPanel()}});r.InputSelect=new w("InputSelect",
g,{include:[h],initNode:function(u,n){n.tagName??(n.tagName="select");n.inputType=null;n.multiple??(n.multiple=!1);n.size??(n.size=n.multiple?4:1);this.callSuper(u,n);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(u){b(this,"multiple",u)},setSize:function(u){b(this,"size",u)},setOptions:function(u){this.destroyAllOptions();if(t(u))for(const n of u)this.addOption(n)},getOptions:function(){return this.getSubviews().slice()},setValue:function(u){t(u)&&r.areArraysEqual(u,
this.value)||this.value===u||(this.value=u,this.inited&&this.fireEvent("value",u))},subviewAdded:function(u){u instanceof c||(r.dumpStack("Subview unsupported. Destroying it"),u.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k.focusShadow)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(u=>u.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(u=>
u.value)},getOptionForValue:function(u){return this.getOptions().find(n=>n.value===u)},addOption:function(u){return new c(this,u)},destroyAllOptions:function(){for(const u of this.getOptions())u.destroy()},destroyOptionWithValue:function(u){if(u=this.getOptionForValue(u))if(u.destroy(),u.destroyed)return!0;return!1},deselectAll:function(){let u=!1;for(const n of this.getOptions())n.isSelected()&&(n.setSelected(!1),u=!0);u&&this.__doChanged()},selectValues:function(u){t(u)||(u=[u]);for(const n of u)this.selectValue(n)},
selectValue:function(u){this.select(this.getOptionForValue(u))},select:function(u){u?.canSelect(this)&&(u.setSelected(!0),this.__syncToDom())},deselectValue:function(u){this.deselect(this.getOptionForValue(u))},deselect:function(u){u?.canDeselect(this)&&(u.setSelected(!1),this.__syncToDom())},__doChanged:function(u){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(r=>{const w=JS.Module,v=Math.round;var t=r.ValueComponent=new w("ValueComponent",{initNode:function(d,e){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(d,e)},setValueFilter:function(d){this.valueFilter=d;this.inited&&d&&this.setValue(this.value)},setValue:function(d){this.valueFilter&&(d=this.valueFilter(d));this.value!==d&&(this.value=d,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(d,e){const m=this.valueFilter;
this.setValueFilter(m?"last"===e?k=>d(m(k)):k=>m(d(k)):d)}});const h=r.RangeComponent=new w("RangeComponent",{include:[t],setLowerValue:function(d){this.setValue({lower:d,upper:this.value&&void 0!==this.value.upper?this.value.upper:d})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(d){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:d,upper:d})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(d){if(d){var e=
this.value;const a=e?e.lower:void 0;e=e?e.upper:void 0;this.valueFilter&&(d=this.valueFilter(d));if(d.lower!==a||d.upper!==e){var m;(m=d).lower??(m.lower=d.upper);var k;(k=d).upper??(k.upper=d.lower);void 0!==d.lower&&void 0!==d.upper&&d.lower>d.upper&&(m=d.lower,d.lower=d.upper,d.upper=m);this.value=d;this.inited&&(this.fireEvent("value",this.getValue()),d.lower!==a&&this.fireEvent("lowerValue",d.lower),d.upper!==e&&this.fireEvent("upperValue",d.upper))}}else this.callSuper(d)},getValueCopy:function(){const d=
this.value;return{lower:d.lower,upper:d.upper}}});t=r.BoundedValueComponent=new w("BoundedValueComponent",{include:[t],initNode:function(d,e){const m=this;m.appendToEarlyAttrs("snapToInt","minValue","maxValue");e.snapToInt??(e.snapToInt=!0);e.valueFilter||(e.valueFilter=k=>{var a=m.maxValue;if(null!=a&&k>a)return a;a=m.minValue;return null!=a&&k<a?a:k});m.callSuper(d,e)},setSnapToInt:function(d){this.snapToInt!==d&&(this.snapToInt=d,this.inited&&(this.fireEvent("snapToInt",d),d&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(d){this.snapToInt&&null!=d&&(d=v(d));if(this.minValue!==d){const e=this.maxValue;null!=e&&d>e&&(d=e);this.minValue!==d&&(this.minValue=d,this.inited&&(this.fireEvent("minValue",d),this.setValue(this.value)))}},setMaxValue:function(d){this.snapToInt&&null!=d&&(d=v(d));if(this.maxValue!==d){const e=this.minValue;null!=e&&d<e&&(d=e);this.maxValue!==d&&(this.maxValue=d,this.inited&&(this.fireEvent("maxValue",d),this.setValue(this.value)))}},
setValue:function(d){this.callSuper(this.snapToInt&&null!=d&&!isNaN(d)?v(d):d)}});r.BoundedRangeComponent=new w("BoundedRangeComponent",{include:[t,h],initNode:function(d,e){const m=this;e.valueFilter||(e.valueFilter=k=>{if(k){const a=m.maxValue,f=m.minValue;null!=a&&k.upper>a&&(k.upper=a);null!=f&&k.lower<f&&(k.lower=f)}return k});m.callSuper(d,e)},setValue:function(d){this.snapToInt&&null!=d&&(null==d.lower||isNaN(d.lower)||(d.lower=v(d.lower)),null==d.upper||isNaN(d.upper)||(d.upper=v(d.upper)));
this.callSuper(d)}})})(myt);
(r=>{const w=v=>{const t=v.label??"";v.setText('<i class="'+("solid"===v.checkboxStyle?"fas":"far")+" fa-"+(v.isChecked()?"check-":"")+'square"></i>'+(0<t.length?" "+t:""))};r.Checkbox=new JS.Class("Checkbox",r.Text,{include:[r.SimpleButtonStyle,r.ValueComponent],initNode:function(v,t){this.appendToEarlyAttrs("userUnselectable");t.value??(t.value=!1);t.focusIndicator??(t.focusIndicator=!1);t.checkboxStyle??(t.checkboxStyle="outline");t.activeColor??(t.activeColor="inherit");t.hoverColor??(t.hoverColor=
"inherit");t.readyColor??(t.readyColor="inherit");this.callSuper(v,t);r.FontAwesome.registerForNotification(this);w(this)},setValue:function(v){this.value!==v&&(this.callSuper(v),this.inited&&w(this))},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&w(this))},setCheckboxStyle:function(v){this.checkboxStyle!==v&&(this.set("checkboxStyle",v,!0),this.inited&&w(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(v,
t=1){this.setOpacity(t);this.setTextColor(v)}})})(myt);
(r=>{let w;const {Class:v,Module:t}=JS,h=console.warn,{KeyObservable:d,UpdateableUI:e,dumpStack:m,global:k}=r,a=k.focus,f=k.keys,b={},g=(l,p)=>{if(l){const y=l.id;l.id?p(y):m("No ID")}else m("No processor")},c=l=>{g(l,p=>{b[p]=l})},q=l=>{const p=r.BAG.getGroup("selected",l.groupId);if(p){const y=p.getNodes();l=l.value;let B=y.length;for(;B;){const D=y[--B];if(D.optionValue===l){p.setTrue(D);break}}}},x=l=>{if(l.groupId){const p=r.BAG.getGroup("selected",l.groupId);p&&l.syncTo(p,"__syncValue","trueNode")}},
u=(l,p)=>{const y=[],B=l.__v;if(B)for(const D of B)p=D.isFormValid(l,null,y)&&p;l.setErrorMessages(y);l.setIsValid(p);return p},n=(l,p,y)=>{if(l=l.__vp)for(const B of l)B[y]&&(p=B.process(p));return p},A=r.ValueProcessor=new v("ValueProcessor",{initialize:function(l,p,y,B){this.id=l;this.runForDefault=!!p;this.runForRollback=!!y;this.runForCurrent=!!B},process:l=>l}),J=r.ToNumberValueProcessor=new v("ToNumberValueProcessor",A,{process:l=>{if(null==l||""===l||"-"===l)return l;const p=Number(l);return isNaN(p)?
l:p}}),z=r.TrimValueProcessor=new v("TrimValueProcessor",A,{initialize:function(l,p,y,B,D){this.callSuper(l,p,y,B);this.trim=D},process:function(l){l+="";switch(this.trim){case "start":case "left":return l.trimStart();case "end":case "right":return l.trimEnd();default:return l.trim()}}}),C=r.UndefinedValueProcessor=new v("UndefinedValueProcessor",A,{initialize:function(l,p,y,B,D){this.callSuper(l,p,y,B);this.defaultValue=D},process:function(l){return void 0===l?this.defaultValue:l}}),I=r.Form=new t("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(l,p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(l,p);this.form?.isA(I)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(I)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(l){this.set("errorMessages",l,!0)},getFullId:function(){const l=[this.id];let p=this.form;for(;p&&p.id;)l.unshift(p.id),
p=p.form;return l.join(".")},setId:function(l){if(this.id!==l){const p=this.id;this.id=l;(l=this.form)&&this.inited&&(l.removeSubForm(p),l.addSubForm(this))}},setForm:function(l){if(this.form!==l){const p=this.form;this.form=l;p?.removeSubForm(this.id);this.inited&&l?.addSubForm(this)}},setIsValid:function(l){this.isValid=l;this.inited&&this.fireEvent("isValid",l);const p=this.form;p&&!this._lockCascade&&(l?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(l){if(this.isChanged!==
l){this.isChanged=l;this.inited&&this.fireEvent("isChanged",l);const p=this.form;p&&!this._lockCascade&&(l?p.notifySubFormChanged():p.verifyChangedState(this))}},setValidators:function(l){let p=l.length;for(;p;){const y=l[--p];"string"===typeof y&&(l[p]=k.validators.getValidator(y),l[p]||l.splice(p,1))}this.__v=l},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const l={},p=this.__sf;for(const y in p)l[y]=p[y].getValue();return l},setValue:function(l){this.callSuper?.(l);
if("object"===typeof l&&!this.isA(M))for(const p in l){const y=this.getSubForm(p);y?l[p]=y.setValue(l[p]):h("ID in setValue for missing subform",p)}this.form?.notifyValueChanged(this);return l},getDefaultValue:function(){const l={};let p=this.__sf;for(const y in p)l[y]=p[y].getDefaultValue();return l},setDefaultValue:function(l){if("object"===typeof l)for(const p in l){const y=this.getSubForm(p);y?l[p]=y.setDefaultValue(l[p]):h("ID in setDefaultValue for missing subform",p)}return l},getRollbackValue:function(){const l=
{},p=this.__sf;for(const y in p)l[y]=p[y].getRollbackValue();return l},setRollbackValue:function(l){if("object"===typeof l)for(const p in l){const y=this.getSubForm(p);y?l[p]=y.setRollbackValue(l[p]):h("ID in setRollbackValue for missing subform",p)}return l},addAccelerator:function(l,p){this.__acc[l]=p},removeAccelerator:function(l){delete this.__acc[l]},invokeAccelerator:function(l,p){this.__acc[l]?.call(this,p??null)},addValidator:function(l){l&&this.__v.push(l)},removeValidator:function(l){if(l){const p=
this.__v;let y=p.length;for(;y;){const B=p[--y];if(B.id===l)return p.splice(y,1),B}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(l){const p=l.id;null!=this.getSubForm(p)?h("ID in use for subform, add aborted",p,l):(l.setForm(this),this.__sf[p]=l,l.isChanged&&this.notifySubFormChanged(),l.isValid||this.notifySubFormInvalid())},removeSubForm:function(l){const p=this.getSubForm(l);p&&(p.setForm(null),delete this.__sf[l],this.verifyChangedState(),this.verifyValidState());
return p},getSubForm:function(l){return this.__sf[l]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(l){l&&this.doValidation();const p=[];(function D(B){if(B.isA(M))B.isValid||p.push(B.getFullId());else{B=B.getSubForms();for(const F in B)D(B[F])}})(this);return p},getAllErrorMessages:function(){const l=this.__sf;let p=(this.errorMessages??[]).slice();for(const y in l)p.push(...l[y].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(l){const p=
this.__sf;let y=!0;for(const B in p){const D=p[B];D!==l&&(y=D.isValid&&y)}return u(this,y)},doValidation:function(){const l=this.__sf;let p=!0;for(const y in l)p=l[y].doValidation()&&p;this._lockCascade=!0;p=u(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(l){this.form?.notifyValueChanged(l)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(l){const p=this.__sf;let y=!1;for(const B in p){const D=p[B];D!==l&&(y=D.isChanged||y)}this.setIsChanged(y);
return y},setup:function(l,p,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;l??={};p??={};y??={};const B=this.__sf;for(const D in B)B[D].setup(l[D],p[D],y[D])},resetForm:function(){this._lockCascade=!0;const l=this.__sf;for(const p in l)l[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const l=this.__sf;for(const p in l)l[p].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const l={},p=this.__sf;for(const y in p){const B=p[y];B.isChanged&&(l[y]=B.getChangedValue())}return l}}),M=r.FormElement=new t("FormElement",{include:[I],initNode:function(l,p){this.__vp=[];this.callSuper(l,p)},getValue:function(){return n(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(l){void 0===l&&(l=this.getRollbackValue());this.value!==l&&
(this.callSuper(l),this.verifyChangedState());return l},getDefaultValue:function(){return n(this,this.defaultValue,"runForDefault")},setDefaultValue:function(l){this.defaultValue!==l&&(this.defaultValue=l,this.inited&&this.fireEvent("defaultValue",l),this.verifyChangedState());return l},getRollbackValue:function(){return n(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(l){void 0===l&&(l=this.getDefaultValue());this.rollbackValue!==l&&(this.rollbackValue=l,this.inited&&this.fireEvent("rollbackValue",
l),this.verifyChangedState());return l},setValueProcessors:function(l){let p=l.length;for(;p;){const y=l[--p];"string"===typeof y&&(l[p]=b[y],l[p]||l.splice(p,1))}this.__vp=l},addValueProcessor:function(l){this.__vp.push(l)},removeValueProcessor:function(l){if(l){const p=this.__vp;let y=p.length;for(;y;){const B=p[--y];if(B.id===l)return p.splice(y,1),B}}},addSubForm:l=>{m("addSubForm unsupported on FormElement")},getSubForm:l=>{m("getSubForm unsupported on FormElement")},removeSubForm:l=>{m("removeSubForm unsupported on FormElement")},
verifyChangedState:function(l){l=this.getValue()!==this.getRollbackValue();this.setIsChanged(l);return l},setup:function(l,p,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(l);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const l=this.getDefaultValue();this.setRollbackValue(l);this.setValue(l);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),O=r.FormInputTextMixin=new t("FormInputTextMixin",{include:[M,e],initNode:function(l,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";p.bgColor??(p.bgColor="#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(l,p);this.addValueProcessor(w);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=l},setActionRequiredColor:function(l){this.actionRequiredColor=
l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":a.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(l){d.isEnterKeyEvent(l)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(l){d.isEscKeyEvent(l)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
r.RootForm=new t("RootForm",{include:[I],initNode:function(l,p){this.callSuper(l,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:l=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});r.FormCheckbox=new v("FormCheckbox",r.Checkbox,{include:[M],initNode:function(l,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(l,p)}});r.FormComboBox=new v("FormComboBox",r.ComboBox,{include:[M,e],initNode:function(l,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(l,p);this.addValueProcessor(w);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=
l},setActionRequiredColor:function(l){this.actionRequiredColor=l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":a.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(l){this._isShown=!0},notifyPanelHidden:function(l){this._isShown=!1},doActivationKeyDown:function(l,p){l!==f.CODE_ESC||this._isShown?this.callSuper(l,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(l){l!==
f.CODE_ENTER||this._isShown?this.callSuper(l):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});r.FormEditableText=new v("FormEditableText",r.EditableText,{include:[O],__hndlKeyDown:function(l){"nowrap"===this.whitespace&&this.callSuper(l)}});r.FormInputText=new v("FormInputText",
r.InputText,{include:[O]});r.FormInputTextArea=new v("FormInputTextArea",r.InputTextArea,{include:[O],__hndlKeyDown:l=>{}});r.FormInputSelect=new v("FormInputSelect",r.InputSelect,{include:[M],setValue:function(l){if(!this.__abortSetValue)return l=this.callSuper(l),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(l),this.__abortSetValue=!1,this.verifyValidState(),l}});r.FormRadioGroup=new v("FormRadioGroup",r.Node,{include:[r.ValueComponent,M],initNode:function(l,p){p.groupId??(p.groupId=
r.generateGuid());this.callSuper(l,p);void 0!==this.value&&q(this);x(this)},setValue:function(l){l=this.callSuper(l);this.inited&&q(this);return l},setGroupId:function(l){if(this.groupId!==l){if(this.groupId){const p=r.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=l;this.inited&&x(this)}},__syncValue:function(l){l=l.value;this.setValue(l?l.optionValue:null)}});r.UseOtherFieldIfEmptyValueProcessor=new v("UseOtherFieldIfEmptyValueProcessor",A,{initialize:function(l,
p,y,B,D){this.callSuper(l,p,y,B);this.otherField=D},process:function(l){return null==l||""===l?this.otherField.getValue():l}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){c(w=new C("undefToEmpty",!0,!0,!0,""));c(new J("toNumber",!0,!0,!0));c(new z("trimLeft",!0,!0,!0,"left"));c(new z("trimRight",!0,!0,!0,"right"));c(new z("trimBoth",!0,!0,!0,"both"));k.register("valueProcessors",this)},getValueProcessor:l=>b[l],register:c,unregister:l=>{g(l,p=>{b[p]&&delete b[p]})}})})(myt);
(r=>{const w=JS.Class,v=r.dumpStack,t={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},h=(a,f)=>{a[f](a,"doDragOver","dragover",!1);a[f](a,"doDragEnter","dragenter",!1);a[f](a,"doDragLeave","dragleave",!1);a[f](a,"doDrop","drop",!1)},d=r.DragDropSupport=new JS.Module("DragDropSupport",{include:[r.DragDropObservable],initNode:function(a,f){this.callSuper(a,f);this.disabled||this.setupDragListeners()},setDisabled:function(a){this.disabled!==
a&&(this.getIDE().disabled=a,this.callSuper(a),this.inited&&(a?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){h(this,"attachToDom")},teardownDragListeners:function(){h(this,"detachFromDom")},doDragOver:a=>{},doDragEnter:a=>{},doDragLeave:a=>{},doDrop:function(a){this.handleFiles(a.value.dataTransfer.files,a)},handleFiles:function(a,f){if(void 0!==a){let b=a.length;for(;b;){const g=this.filterFiles(a[--b]);g&&this.handleDroppedFile(g,f)}}else v("No File API")},
filterFiles:a=>a,handleDroppedFile:(a,f)=>{}}),e=r.FileInput=new w("FileInput",r.NativeInputWrapper,{initNode:function(a,f){this.inputType="file";this.callSuper(a,f);this.attachToDom(this,"_onChange","change")},setAccept:function(a){this.set("accept",a,!0);this.getIDE().accept=this.accept},setMaxFiles:function(a){this.maxFiles!==a&&(this.set("maxFiles",a,!0),this.getIDE().multiple=1<this.maxFiles)},clearValue:function(){this.getIDE().value=""},_onChange:a=>{}}),m=r.Uploader=new w("Uploader",r.View,
{include:[d,r.Disableable,r.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(a,f,b)=>{if(void 0!==FileReader){const g=new FileReader;g.onload=c=>{f(c.target.result)};switch(b){case "text":g.readAsText(a);break;case "arrayBuffer":g.readAsArrayBuffer(a);break;default:g.readAsDataURL(a)}}},isSameFile:(a,f)=>null!=a&&null!=f&&a.name===f.name&&a.type===f.type&&a.size===f.size,createFile:a=>{const f=(new r.URI(a)).file;return{name:f,serverPath:a,size:-1,type:t[r.getExtension(f)]}}},initNode:function(a,
f){const b=this;b.files=[];f.requestFileParam??(f.requestFileParam="file");f.maxFiles??(f.maxFiles=-1);f.responseIsRaw??(f.responseIsRaw=!1);const g=f.accept;delete f.accept;b.callSuper(a,f);b.fileInput=new e(b,{maxFiles:b.maxFiles,accept:g,percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:b.disabled,overflow:"hidden"},[r.SizeToParent,{_onChange:function(c){b.handleFiles(this.getIDE().files,c)}}])},setAccept:function(a){this.fileInput?.setAccept(this.accept)},getAccept:function(){return this.fileInput?.accept},
setMaxFiles:function(a){this.fileInput?.setMaxFiles(this.maxFiles)},getMaxFiles:function(){return this.fileInput?.maxFiles},setValue:function(a){this.clearFiles();if(a){Array.isArray(a)||(a=[a]);for(const f of a)this.addFile(m.createFile(f))}return this.callSuper?this.callSuper(a):a},getValue:function(){return this.value},setDisabled:function(a){this.callSuper(a);this.fileInput?.setDisabled(a)},setUploadUrl:function(a){this.set("uploadUrl",a,!0)},setRequestFileParam:function(a){this.set("requestFileParam",
a,!0)},setResponseIsRaw:function(a){this.set("responseIsRaw",a,!0)},bringSubviewToFront:function(a){a===this.fileInput?this.callSuper(a):this.sendSubviewBehind(a,this.fileInput)},subviewAdded:function(a){this.callSuper(a);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(a,f){this.addFile(a)},filterFiles:function(a){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:a},uploadFiles:function(a,f){a??=this.uploadUrl;const b=this.files;let g=b.length;for(;g;)this.uploadFile(b[--g],
a,f)},makeFetchOptionsForUpload:a=>({method:"POST",body:a}),uploadFile:function(a,f,b){const g=this,c=new FormData;c.append(b??g.requestFileParam,a,a.name.replaceAll("%20"," "));r.doFetch(f??g.uploadUrl,g.makeFetchOptionsForUpload(c),g.responseIsRaw,q=>{g.handleUploadSuccess(a,q)},q=>{g.handleUploadFailure(a,q)})},handleUploadSuccess:function(a,f){a[m.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(a,f);this.updateValueFromFiles()},handleUploadFailure:(a,f)=>{v("Upload failure:"+f.status+
":"+f.message)},parseServerPathFromResponse:(a,f)=>null,addFile:function(a){this.files.push(a);this.updateValueFromFiles();this.fireEvent("addFile",a)},removeFile:function(a){const f=this.files;let b=f.length;for(;b;)if(m.isSameFile(f[--b],a)){f.splice(b,1);this.updateValueFromFiles();this.fireEvent("removeFile",a);break}},updateValueFromFiles:function(){const a=[];var f=this.files;let b=f.length;for(;b;){const g=f[--b][m.FILE_ATTR_SERVER_PATH];g&&a.push(g)}f=a.length;(this.value=1===f?a[0]:0===f?
void 0:a)||this.fileInput.clearValue();this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const a=this.files;let f=a.length;for(;f;)this.removeFile(a[--f])}}),k=r.ImageUploader=new w("ImageUploader",m,{extend:{isImageFile:a=>/image/i.test(a.type)},initNode:function(a,f){f.maxFiles=1;this.callSuper(a,f)},filterFiles:function(a){if(k.isImageFile(a)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(a)}},
addFile:function(a){const f=this,b=k.isImageFile(a);f.callSuper(a);const g=f.imageView=new r.Image(f,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[r.SizeToParent]);g.file=a;const c=q=>{const x=new Image;x.onload=()=>{a.width=x.width;a.height=x.height;g&&!g.destroyed&&f.updateImage(a,g,x.src)};x.src=q};b?-1===a.size?c(a.serverPath):k.isImageFile(a)&&m.readFile(a,c):-1===a.size?f.updateImage(a,g,a.serverPath):m.readFile(a,q=>{f.updateImage(a,
g,q)});return g},removeFile:function(a){this.callSuper(a);const f=this.getSubviews();let b=f.length;for(;b;){const g=f[--b];if(m.isSameFile(g.file,a)){g.destroy();break}}},handleDroppedFile:function(a,f){this.callSuper(a,f);this.uploadFile(a,this.uploadUrl)},updateImage:function(a,f,b){this.nativeWidth=a.width;this.nativeHeight=a.height;f.setImageUrl(b)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(r=>{const w=(v,t,h,d)=>{h=h.bind(v);"y"!==v.axis&&(h(t,d,"x"),h(t,d,"boundsWidth"));"x"!==v.axis&&(h(t,d,"y"),h(t,d,"boundsHeight"));h(t,d,"visible")};r.SizeToChildren=new JS.Class("SizeToChildren",r.Layout,{initNode:function(v,t){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(v,t)},setAxis:function(v){this.axis!==v&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=v,this.startMonitoringAllSubviews(),this.fireEvent("axis",v),this.update()):this.axis=v)},setPaddingX:function(v){this.paddingX!==
v&&(this.paddingX=v,this.inited&&(this.fireEvent("paddingX",v),this.update()))},setPaddingY:function(v){this.paddingY!==v&&(this.paddingY=v,this.inited&&(this.fireEvent("paddingY",v),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const t=this.parent;if(!t.isBeingDestroyed){const h=this.subviews;var v=h.length;const d=this.axis,e=Math.max;let m,k;if("y"!==d){m=v;for(k=0;m;){const a=h[--m];a.visible&&(k=e(k,a.x+(0<a.boundsWidth?a.boundsWidth:0)))}t.setWidth(k+
this.paddingX)}if("x"!==d){m=v;for(k=0;m;)v=h[--m],v.visible&&(k=e(k,v.y+(0<v.boundsHeight?v.boundsHeight:0)));t.setHeight(k+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(v){w(this,v,this.attachTo,"update")},stopMonitoringSubview:function(v){w(this,v,this.detachFrom,"update")}})})(myt);
(r=>{let w=0;const v=JS.Class,{View:t,SizeToParent:h,RootView:d,theme:e}=r,m=r.Dimmer=new v("Dimmer",t,{include:[h],initNode:function(k,a){this.restoreFocus=!0;a.focusable=a.focusCage=!0;a.percentOfParentWidth??(a.percentOfParentWidth=100);a.percentOfParentHeight??(a.percentOfParentHeight=100);a.visible??(a.visible=!1);a.ignoreLayout??(a.ignoreLayout=!0);this.callSuper(k,a);this.overlay=new t(this,{ignorePlacement:!0,opacity:e.DimmerOpacity,bgColor:e.DimmerColor,percentOfParentWidth:100,percentOfParentHeight:100},
[h]);for(const f of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",f);d.setupCaptureDrop(this)},destroy:function(){d.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(k){this.restoreFocus=k},eatMouseEvent:k=>!0,show:function(){const k=r.global.focus;this.prevFocus=k.focusedView??k.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(k){this.visible&&(this.setVisible(!1),
!k&&this.restoreFocus&&this.prevFocus?.focus())}});r.ModalPanel=new v("ModalPanel",m,{extend:{getOpenModalPanelCount:()=>w,hasOpenModalPanels:()=>0<w},initNode:function(k,a){const f={name:"content",ignorePlacement:!0},b={...f,align:"center",valign:"middle"};this.defaultPlacement="content";a.sizingStrategy??(a.sizingStrategy="children");a.marginTop??(a.marginTop=e.ModalPanelMarginTop);a.marginLeft??(a.marginLeft=e.ModalPanelMarginLeft);a.marginBottom??(a.marginBottom=e.ModalPanelMarginBottom);a.marginRight??
(a.marginRight=e.ModalPanelMarginRight);a.paddingX??(a.paddingX=e.ModalPanelPaddingX);a.paddingY??(a.paddingY=e.ModalPanelPaddingY);this.callSuper(k,a);switch(this.sizingStrategy){case "children":new r.SizeToChildren(new t(this,b),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new t(this,{...f,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,percentOfParentHeightOffset:-this.marginTop-this.marginBottom,
percentOfParentWidth:100,percentOfParentHeight:100},[h]);break;case "basic":new t(this,b);break;default:new t(this,f)}},setSizingStrategy:function(k){this.sizingStrategy=k},setMarginTop:function(k){this.marginTop=k},setMarginLeft:function(k){this.marginLeft=k},setMarginBottom:function(k){this.marginBottom=k},setMarginRight:function(k){this.marginRight=k},setPaddingX:function(k){this.paddingX=k},setPaddingY:function(k){this.paddingY=k},show:function(){this.callSuper();w++},hide:function(k){this.callSuper(k);
w=Math.max(0,w-1)}})})(myt);
(r=>{const w=t=>{t[t.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},v=t=>{const h=t.size,d=t.getIDS();t.setWidth(h);t.setHeight(h);d.width=d.height=h-2*t.borderWidth+"px"};r.Spinner=new JS.Class("Spinner",r.View,{initNode:function(t,h){this.lateAttrs=["spinColor"];h.visible??(h.visible=!1);h.borderWidth??(h.borderWidth=5);h.borderColor??(h.borderColor="#fff");h.borderStyle??(h.borderStyle="solid");h.spinColor??(h.spinColor="#000");this.callSuper(t,h);this.getIDS().borderRadius="50%";v(this);
w(this)},setSize:function(t){this.size!==t&&(this.size=t,this.inited&&v(this))},setSpinColor:function(t){this.spinColor!==t&&(this.getIDS().borderTopColor=this.spinColor=t,this.inited&&this.fireEvent("spinColor",t))},setBorderWidth:function(t){this.borderWidth!==t&&(this.callSuper(t),this.inited&&v(this))},setVisible:function(t){this.visible!==t&&(this.callSuper(t),this.inited&&w(this))}})})(myt);
(r=>{const w=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),v=d=>{if(Array.isArray(d)){let e=d.length;if(0<e){d.unshift("fa");e++;d[1].startsWith("fa-")||(d[1]="fa-"+d[1]);3<=e&&(d[2]=w[d[2]]??"");if(3<e)for(let m=3;e>m;m++)d[m].startsWith("fa-")||(d[m]="fa-"+d[m]);return'<i class="'+d.join(" ")+'"></i>'}}r.dumpStack("Error making tag");console.error(d);return""},t=d=>{let e=d.properties;e=e?"string"===typeof e?e.split(" "):e.slice():[];e.unshift(d.icon,d.size);d.setHtml(v(e))},h=d=>{for(const e of["Free 400",
"Free 900","Brands 400"])r.registerForFontNotification(d,"Font Awesome 5 "+e)};r.FontAwesome=new JS.Class("FontAwesome",r.Markup,{extend:{makeTag:v,registerForNotification:h},initNode:function(d,e){this.size=0;this.icon="";this.callSuper(d,e);t(this);h(this)},setIcon:function(d){const e=this.icon;this.set("icon",d,!0);this.inited&&e!==d&&t(this)},setSize:function(d){const e=this.size;this.set("size",d,!0);this.inited&&e!==d&&t(this)},setProperties:function(d){this.properties=d;this.fireEvent("properties",
d);this.inited&&t(this)}});r.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(r=>{let w,v,t,h,d=0,e=0,m=0,k=255,a=[],f,b,g,c,q,x,u,n,A,J,z,C,I,M,O,l,p,y,B,D,F,K,L,P,N,U;const da=JS.Class,{View:V,Text:ea,ModalPanel:Ha,SizeToChildren:ua,SpacedLayout:za,WrappingLayout:Aa,SelectionManager:Ba,Color:pa,LocalStorage:Ca,Button:va,TextButton:ma,Draggable:Da,FontAwesome:{makeTag:na},theme:T}=r,{min:ha,max:ia}=Math,Ia=new da("DialogButton",ma,{initNode:function(E,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??(G.paddingLeft=10);G.paddingRight??(G.paddingRight=
10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(E,G)}}),Ja=na(["check"]),Fa=E=>{for(let G of E)7===G?.length&&(G+="ff"),Ea[G]=!0},Ea={},Ka=new da("Swatch",V,{include:[va],initNode:function(E,G){const H=G.width=G.height=16;G.border=T.border1s9;G.domClass="mytCheckerboardPattern";const Q=G.bgColor;this.callSuper(E,G);this.colorView=new V(this,{width:H,height:H,bgColor:Q});Q===h&&(E=pa.makeColorFromHexString(h),
new ea(this,{x:2,y:2,text:Ja,fontSize:"12px",textColor:382.5>E.red+E.green+E.blue?"#fff":"#000"}))},setBgColor:function(E){this.colorView?.setBgColor(E);this.setTooltip(E)},doActivated:function(){w.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(T.border1s3)},drawReadyState:function(){this.setBorder(T.border1s9)}}),La=r.ColorPicker=new da("ColorPicker",V,{initNode:function(E,G){w=this;w._isReady=!1;let H=G.color??"transparent";delete G.color;t=G.alphaChannel??!1;delete G.alphaChannel;
f=G.palette??[];Fa(f);delete G.palette;v="transparent"===H;w.callSuper(E,G);b=new V(w,{width:160,height:170});new Aa(b,{spacing:4,lineSpacing:4});g=new V(w,{x:170,width:139,height:139,border:T.border1s3},[Da,{requestDragPosition:function(Q,R){g.callSuper(g.x,g.y);const W=this.getPagePosition();e=parseFloat(ia(0,ha(1,(Q+this.dragInitX-W.x)/this.width)));m=parseFloat(1-ia(0,ha(1,(R+this.dragInitY-W.y)/this.height)));v=!1;w.updateUI()}}]);E=new V(g,{width:139,height:139});G=new V(E,{width:139,height:139});
E.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";c=new V(G,{width:6,height:6,bgColor:"#000",border:[1,"solid","#fff"],roundedCorners:4});q=new V(w,{x:315,y:30,width:24,height:109,border:T.border1s3},[Da,{requestDragPosition:function(Q,R){this.callSuper(q.x,q.y);d=parseFloat(ia(0,ha(1,(R+this.dragInitY-this.getPagePosition().y)/this.height)));v=!1;w.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";x=new V(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new V(w,{x:315,width:24,height:24,border:T.border1s3,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[va,{doActivated:()=>{w.setColor("transparent")}}]);E=146;t&&(A=new r.LabelSlider(w,{x:170,y:E,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(Q,R){R=Q.value;if(null==R||
isNaN(R))R=0;Q.value=r.formatAsPercentage(R/255,0);this.callSuper(Q,!0);k=R;w._isReady&&(v=!1,w.updateUI())}}]),E+=23);u=new r.InputText(w,{x:236,y:E,width:105,height:25,roundedCorners:3,textColor:T.DialogInputFgColor,border:T.border1s3,maxLength:11,fontFamily:"monospace"});w.attachToDom(u,"_submitInput","blur");w.attachToDom(u,"_handleKeyDown","keydown");u.getIDS().paddingLeft="6px";E=new V(w,{x:170,y:E,width:60,height:23,border:T.border1s3,domClass:"mytCheckerboardPattern"});new V(E,{width:30,height:23,
focusIndicator:!1,bgColor:H},[va,{doActivated:()=>{w.setColor(H)}}]);n=new V(E,{x:30,width:30,height:23});if(E=Ca.getItem("myt.default"))a=E.split(";"),Fa(a);w.setColor(H);w._isReady=!0},_handleKeyDown:E=>{r.KeyObservable.isEnterKeyEvent(E)&&w._submitInput()},_submitInput:()=>{w.setColor(u.value)},addToPalette:E=>{E&&"transparent"!==E&&!Ea[E]&&(a.unshift(E),a.length=ha(a.length,56),Ca.setItem("myt.default",a.join(";")))},setColor:E=>{const G=E&&"transparent"!==E;if(t){let H="ff";G&&7<E.length&&(H=
E.slice(7,9),E=E.slice(0,7));A.setValue(parseInt(H,16))}else G&&7<E.length&&(E=E.slice(0,7));G?(E=pa.makeColorFromHexString(E).getHSV(),d=E.h/360,e=E.s,m=E.v,v=!1):v=!0;w.updateUI()},getColor:()=>{if(v)return"transparent";let E="";t&&(E=k.toString(16),2>E.length&&(E="0"+E));return pa.makeColorFromHSV(360*d,100*e,100*m).getHtmlHexString()+E},updateUI:()=>{const E=!v;x.setVisible(E);c.setVisible(E);E&&(c.setX(ia(0,ha(1,e)*(g.width+2))-5),c.setY(ia(0,ha(1,1-m)*(g.height+2))-5),x.setY(d*(q.height-2)-
1));g.setBgColor(pa.makeColorFromHSV(360*d,100,100).getHtmlHexString());h=w.getColor();u.setValue(h);n.setBgColor(h);w.redrawPalette()},redrawPalette:r.debounce(()=>{b.destroyAllSubviews();const E=new Set;f.push(...a);for(let G of f)if(t||7===G.length)7===G.length&&(G+="ff"),E.has(G)||(new Ka(b,{bgColor:G}),E.add(G))},50)}),wa=E=>{E=E.split(":");return[ia(0,ha(23,parseInt(E[0]))),ia(0,ha(60,parseInt(E[1])))]},Ga=new da("SelectableBtn",ma,{include:[r.Selectable],setSelected:function(E){this.callSuper(E);
this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Ma=new da("TimeBtn",Ga,{initNode:function(E,G){G.width=I?175:49;this.callSuper(E,G)},doActivated:function(){this.callSuper();const E=this.text,G=wa(E);U.selectById(E);F.setHours(G[0]);F.setMinutes(G[1])}}),Na=new da("DayBtn",Ga,{initNode:function(E,G){G.width=23;G.border=T.DialogDayBtnBorder;this.callSuper(E,G)},setData:function(E){this.data=E},setIsAnotherMonth:function(E){this.isAnotherMonth=
E},setIsToday:function(E){this.isToday=E},setIsSunday:function(E){this.isSunday=E},setIsSaturday:function(E){this.isSaturday=E},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?T.DialogDayBtnBorderColorToday:T.DialogDayBtnBorderColor))},doActivated:function(){this.callSuper();const E=new Date(this.data);E.setHours(F.getHours());E.setMinutes(F.getMinutes());
oa(E)}}),oa=E=>{E.setSeconds(0);E.setMilliseconds(0);var G=6>=O.length,H;if(G)for(H=7;H--&&!O.includes(E.getDay());)E.setDate(E.getDate()+1);F=E;const Q=U.getODE().scrollTop;var R=new Date,W=R.getFullYear(),S=R.getMonth(),X=R.getDate();R.getHours();R.getMinutes();const aa=E.getFullYear(),ba=E.getMonth(),ka=E.getDate();var ca=E.getTime();R=E.getHours();E=E.getMinutes();const qa=(new Date(aa,ba,1)).getDay()-M,ra=(new Date(aa,ba+1,0)).getDate(),xa=(new Date(aa,ba,0)).getDate(),sa=new Date(aa,ba,0),ta=
new Date(aa,ba+2,0);W=W==aa&&S==ba;if(!I){S=N;S.deselectAll();S.destroyAllSubviews();H=new Date(ca);const ja=7+M;S=z.days;L.setText(aa+" "+z.sep+" "+z.months[ba]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);K.setVisible(null==l||l<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ba+1);P.setVisible(null==p||p>H.getTime());for(H=0;7>H;H++)new ea(N,{width:23,height:20,textAlign:"center",text:S[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>qa&&(H=-7,
fa=35);S=new Date(ca);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);H<fa;H++){var Y=H+1-qa;const ya=(H+ja)%7,Z=new Na(N);qa>H?(Z.setText(xa+Y),Z.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(xa+Y)),Z.setIsAnotherMonth(!0),S.setDate(xa+Y),S.setMonth(sa.getMonth()),S.setYear(sa.getFullYear())):H<qa+ra?(Z.setText(Y),Z.setData(aa+"/"+(ba+1)+"/"+Y),S.setDate(Y),S.setMonth(ba),S.setYear(aa)):(Z.setText(Y-ra),Z.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(Y-ra)),Z.setIsAnotherMonth(!0),
S.setDate(Y-ra),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear()));G&&!O.includes(ya)?Z.setDisabled(!0):(0===ya?Z.setIsSunday(!0):6===ya&&Z.setIsSaturday(!0),Y===ka&&(N.select(Z),Z.focus()),W&&Y===X&&Z.setIsToday(!0),Y=new Date(S.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=l&&l>Y.getTime()||null!=p&&p<S.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!C){G=60*B[0]+B[1];X=U;X.deselectAll();X.destroyAllSubviews();let [ja,fa]=y;for(S=new Date(ca);60*ja+fa<G;)ca=new Ma(U,{text:("0"+
ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===R&&fa===E&&U.select(ca),S.setHours(ja),S.setMinutes(fa),X=S.getTime(),(null!=l&&l>X||null!=p&&p<X)&&ca.setDisabled(!0),fa+=D,60<=fa&&(fa-=60,ja++);U.scrollYTo(Q)}},Oa=r.DatePicker=new da("DatePicker",V,{initNode:function(E,G){J=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;J.callSuper(E,
G);z=H.locales[H.locale??"en"];C=H.dateOnly;I=H.timeOnly;M=H.firstDayOfWeek;D=ia(5,ha(30,H.minuteInterval));O=H.allowedDays;Array.isArray(O)&&0!==O.length||(O=[0,1,2,3,4,5,6]);l=Date.parse(H.minDate);l=isNaN(l)?null:l;p=Date.parse(H.maxDate);p=isNaN(p)?null:p;y=wa(H.minTime);B=wa(H.maxTime);E=new V(J,{visible:!I});H.showTodayButton&&new ma(E,{width:24,text:na(["home"]),tooltip:z.today},[{doActivated:()=>{oa(new Date)}}]);K=new ma(E,{width:24,x:28,text:na(["chevron-left"]),tooltip:z.prevMonth},[{doActivated:()=>
{const Q=(new Date(F.getFullYear(),F.getMonth(),0)).getDate();Q<F.getDate()&&F.setDate(Q);F.setMonth(F.getMonth()-1);oa(F);K.focus()}}]);L=new ea(E,{width:100,x:52,textAlign:"center"});P=new ma(E,{width:24,x:152,text:na(["chevron-right"]),tooltip:z.nextMonth},[{doActivated:()=>{var Q=(new Date(F.getFullYear(),F.getMonth()+1,0)).getDate();Q<F.getDate()&&F.setDate(Q);Q=(new Date(F.getFullYear(),F.getMonth()+2,0)).getDate();Q<F.getDate()&&F.setDate(Q);F.setMonth(F.getMonth()+1);oa(F);P.focus()}}]);N=
new V(J,{y:25,width:175,height:175,visible:!I,maxSelected:1,itemSelectionId:"data"},[Ba]);new Aa(N,{spacing:2,lineInset:2,lineSpacing:3});U=new V(J,{x:I?0:195,y:I?0:25,width:(I?175:49)+r.DomElementProxy.getScrollbarSize(),height:I?200:175,overflow:"autoy",visible:!C,maxSelected:1,itemSelectionId:"text"},[Ba]);new za(U,{axis:"y",inset:1,spacing:3});J.setWidth(U.visible?U.x+U.width:N.width);oa(H.current??new Date)},getPickedDate:()=>F}),la=r.Dialog=new da("Dialog",Ha,{extend:{BUTTON_CLASS:Ia,WRAP_TEXT_DEFAULTS:{width:200,
fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",
locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(E,G){G.buttonClass??(G.buttonClass=la.BUTTON_CLASS);this.callSuper(E,G);E=this.content;E.setRoundedCorners(T.DialogRadius);E.setBgColor(T.DialogBgColor);E.setBoxShadow(T.DialogShadow);E.setBorder(T.DialogBorder);E.setFocusCage(!0);this.makeCloseButton(E)},setButtonClass:function(E){this.buttonClass=
E},setCallbackFunction:function(E){this.callbackFunction=E},makeButton:function(E,G){const H=this;return new H.buttonClass(E,G,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(E){return E.closeBtn=this.makeButton(E,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:na(["times"]),tooltip:"Close Dialog."})},hide:function(E){this.spinner&&
(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(E)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const E=this.content,G=E.sizeToChildren;E.destroyAllSubviews(H=>"closeBtn"!==H.name);E.setVisible(!0);this.overlay.setBgColor(T.DimmerColor);this.setCallbackFunction();G.setPaddingY(T.ModalPanelPaddingY);G.setPaddingX(T.ModalPanelPaddingX);E.setRoundedCorners(T.DialogRadius);E.setBgColor(T.DialogBgColor);E.setBoxShadow(T.DialogShadow);E.setBorder(T.DialogBorder)},
doCallback:function(E){const G=this.callbackFunction;G&&G.call(this,E.name)||this.hide()},showBlank:function(E){this.destroyContent();this.content.setVisible(!1);E?.bgColor&&this.overlay.setBgColor(E.bgColor);this.show()},showMessage:function(E,G,H){const Q=this.content,R=Q.closeBtn;H={...la.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(G);E=Q.msg=new ea(Q,{text:E,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?T.ModalPanelPaddingX:H.msgX,
y:null==H.msgY?T.ModalPanelPaddingY:H.msgY,width:H.width});H.titleText&&(this.setupTitle(Q,H.titleText),E.setY(E.y+24));this.show();!1===H.showClose?R.destroyed||R.setVisible(!1):(R.setVisible(!0),R.focus())},showSimple:function(E,G,H,Q){H=H??{};const R=this.content,W=R.closeBtn,S=H.maxContainerHeight;this.destroyContent();H.bgColor&&R.setBgColor(H.bgColor);H.roundedCorners&&R.setRoundedCorners(H.roundedCorners);H.boxShadow&&R.setBoxShadow(H.boxShadow);H.border&&R.setBorder(H.border);R.sizeToChildren.setPaddingX(1);
this.setCallbackFunction(G);G=R.contentContainer=new V(R,{x:1,y:25,overflow:"auto"},[{setHeight:function(X){X>S&&(X=S);this.callSuper(X)}}]);E.call(this,G);new ua(G,{axis:"both"});this.show();W.setVisible(!0);W.focus();H.titleText&&(this.setupTitle(R,H.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();Q?.(this)},showConfirm:function(E,G,H){H={...la.CONFIRM_DEFAULTS,...H};this.showMessage(E,G,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(E,G,H,Q){H={...la.CONFIRM_DEFAULTS,
...H};const R=this.content,W=R.closeBtn,S=H.maxContainerHeight;this.destroyContent();R.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=R.contentContainer=new V(R,{x:1,y:25,overflow:"auto"},[{setHeight:function(X){this.callSuper(X>S?S:X)}}]);E.call(this,G);new ua(G,{axis:"both"});this.show();!1===H.showClose?W.destroyed||W.setVisible(!1):(W.setVisible(!0),W.focus());this.setupTitle(R,H.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,H);G.initialFocus?.focus();Q?.(this)},
showSpinner:function(E,G){const H=this.content;G={...la.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const Q=this.spinner=new r.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==G.msgY?T.ModalPanelPaddingY:G.msgY});E&&(this.msgTxt=new ea(H,{text:E,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?T.ModalPanelPaddingX:G.msgX,y:Q.y+Q.size+T.ModalPanelPaddingY,width:G.width}));this.show();H.closeBtn.setVisible(!1);this.focus()},updateMessage:function(E){this.msgTxt?.setText(E)},
showColorPicker:function(E,G){const H=this,Q=H.content,R=Q.closeBtn;G={...la.COLOR_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(W=>{switch(W){case "closeBtn":case "cancelBtn":E.call(H,W);break;case "confirmBtn":const S=w.getColor();w.addToPalette(S);E.call(H,W,S)}w.destroy()});w=new La(Q,{x:T.ModalPanelPaddingX,y:T.ModalPanelPaddingY+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});
H.show();R.setVisible(!0);R.focus();H.setupFooterButtons(w,G);H.setupTitle(Q,G.titleText)},showDatePicker:function(E,G){const H=this,Q=H.content,R=Q.closeBtn;G={...la.DATE_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(W=>{switch(W){case "closeBtn":case "cancelBtn":E.call(H,W);break;case "confirmBtn":E.call(H,W,J.getPickedDate())}J.destroy()});J=new Oa(Q,{x:T.ModalPanelPaddingX,y:T.ModalPanelPaddingY+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||
!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});H.show();R.setVisible(!0);R.focus();H.setupFooterButtons(J,G);H.setupTitle(Q,G.timeOnly?G.timeOnlyTitleText:G.titleText)},setupTitle:function(E,G){const H=T.DialogRadius;(this.header=new V(E,{ignoreLayout:!0,width:E.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();E.title=new ea(E,{x:H,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(E,G){const H=this.content;var Q=T.ModalPanelPaddingY,
R=Q/2;E=H.btnContainer=new V(H,{y:E.y+E.height+Q,align:"center"});const W=["active","hover","ready","text"];Q=G.cancelAttrs??{};var S;(S=Q).name??(S.name="cancelBtn");let X;(X=Q).text??(X.text=G.cancelTxt);for(let ca of W)ca+="Color",null!=G[ca]&&(Q[ca]=G[ca]);S=this.makeButton(E,Q);Q=G.confirmAttrs??{};var aa;(aa=Q).name??(aa.name="confirmBtn");let ba;(ba=Q).text??(ba.text=G.confirmTxt);for(var ka of W)ka+="Color",aa=ka+"Confirm",null!=G[aa]&&(Q[ka]=G[aa]);this.makeButton(E,Q);if(ka=G.button)for(const ca of ka)this.makeButton(E,
ca);new ua(E,{axis:"y"});new za(E,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(R);R=E.y-R;(new V(H,{ignoreLayout:!0,y:R,width:H.width,height:H.height-R,bgColor:"#eee"})).sendToBack();!1===G.showClose&&S.focus()}})})(myt);
(r=>{const w=JS.Class,v=r.dumpStack,t={},h=(b,g)=>{if(b){const c=b.id;b.id?g(c):v("No ID")}else v("No validator")},d=b=>{h(b,g=>{t[g]=b})},e=r.Validator=new w("Validator",{initialize:function(b){this.id=b},isValid:(b,g,c)=>!0,isFormValid:function(b,g,c){g??={};g.form=b;return this.isValid(b.getValue(),g,c)}}),m=r.RequiredFieldValidator=new w("RequiredFieldValidator",e,{isValid:(b,g,c)=>null==b||""===b||"string"===typeof b&&""===b.trim()?(c?.push("This value is required."),!1):!0}),k=r.EqualsIgnoreCaseValidator=
new w("EqualsIgnoreCaseValidator",e,{isValid:(b,g,c)=>{g=g.form.getRollbackValue();return b&&g&&b.toLowerCase()===g.toLowerCase()?(c?.push("Value must differ by more than just case."),!1):!0}}),a=r.URLValidator=new w("URLValidator",e,{initialize:function(b,g){this.callSuper(b);this.originalRawQuery=g},isValid:function(b,g,c){return(new r.URI(b)).toString(this.originalRawQuery)!==b?(c?.push("Invalid URL."),!1):!0}}),f=r.JSONValidator=new w("JSONValidator",e,{isValid:(b,g,c)=>{try{return JSON.parse(b),
!0}catch(q){return c?.push(q),!1}}});r.RegexValidator=new w("RegexValidator",e,{initialize:function(b,g,c){this.callSuper(b);this.regex=new RegExp(g);this.errorMsg=c},isValid:function(b,g,c){b=this.regex.test(b);!b&&this.errorMsg&&c?.push(this.errorMsg);return b}});r.EqualFieldsValidator=new w("EqualFieldsValidator",e,{initialize:function(b,g,c){this.callSuper(b);this.fieldA=g;this.fieldB=c},isValid:function(b,g,c){const {fieldA:q,fieldB:x}=this;if(q?.inited&&x?.inited){if(b&&q.getValue()===x.getValue())return!0;
c?.push('The field "'+q.key+'" must be equal to the field "'+x.key+'".')}return!1}});r.LengthValidator=new w("LengthValidator",e,{initialize:function(b,g,c){this.callSuper(b);this.min=g;this.max=c},isValid:function(b,g,c){b=b?b.length:0;g=this.min;const q=this.max;return void 0!==g&&g>b?(c?.push("The value must not be less than "+g+" characters long."),!1):void 0!==q&&q<b?(c?.push("The value must not be greater than "+q+" characters long."),!1):!0}});r.NumericRangeValidator=new w("NumericRangeValidator",
e,{initialize:function(b,g,c){this.callSuper(b);this.min=g;this.max=c},isValid:function(b,g,c){if(""===b)return!0;b=Number(b);g=this.min;const q=this.max;return isNaN(b)?(c?.push("Value is not a number."),!1):void 0!==g&&g>b?(c?.push("Value must not be less than "+g+"."),!1):void 0!==q&&q<b?(c?.push("Value must not be greater than "+q+"."),!1):!0}});r.CompoundValidator=new w("CompoundValidator",e,{initialize:function(b,...g){this.callSuper(b);for(b=g.length;b;){let c=g[--b];"string"===typeof c&&((g[b]=
c=t[c])||g.splice(b,1))}this.__v=g},addValidator:function(b){"string"===typeof b&&(b=t[b]);b&&this.__v.push(b)},isValid:function(b,g,c){const q=this.__v,x=q.length;let u=!0,n=0;for(;x>n;)u=q[n++].isValid(b,g,c)&&u;return u}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){d(new m("required"));d(new k("equalsIgnoreCase"));d(new a("url"));d(new f("json"));r.global.register("validators",this)},getValidator:b=>t[b],register:d,unregister:b=>{h(b,g=>{t[g]&&delete t[g]})}})})(myt);
(r=>{const w=JS.Class,{min:v,max:t,round:h,abs:d}=Math,e=r.View,m=new w("SliderThumb",r.SimpleButton,{include:[r.Draggable,r.ArrowKeyActivation],initNode:function(a,f){const b=f.width=a.thumbWidth,g=f.height=a.thumbHeight;f.roundedCorners=v(g,b)/2;f.repeatKeyDown=!0;f.activationKeys=r.global.keys.ARROW_KEYS;f.activeColor="#bbb";f.readyColor="#ccc";f.hoverColor="#ddd";f.boxShadow=[0,0,4,"#666"];this.callSuper(a,f);this["x"===a.axis?"setY":"setX"](a.thumbOffset);this.syncTo(a,"setDisabled","disabled");
a._syncThumbToValue(this,a.getValue())},setDisabled:function(a){this.callSuper(this.valueFromEvent(a))},setFocused:function(a){this.callSuper(a);a&&this.makeHighestZIndex()},setX:function(a){this.x!==a&&(this.callSuper(a),a=this.parent,"x"===a.axis&&a.syncValueToThumb(this))},setY:function(a){this.y!==a&&(this.callSuper(a),a=this.parent,"y"===a.axis&&a.syncValueToThumb(this))},requestDragPosition:function(a,f){if(!this.disabled){const b=this.parent,g=b.getMinPixelValueForThumb(this),c=b.getMaxPixelValueForThumb(this),
q=b.snapThreshold;let x;"x"===b.axis?(x=this.width/2,f="setX"):(x=this.height/2,a=f,f="setY");if(b.allowSnap(this))for(let u of b.getSnapValuesAsPx())if(u-=x,d(a-u)<=q){a=u;break}this[f](v(t(a,g-x),c-x))}},doKeyArrowLeftOrUp:function(a,f){a?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(a,f){a?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),k=r.BaseSlider=new w("BaseSlider",e,{include:[r.Disableable],initNode:function(a,
f){f.axis??(f.axis="x");"x"===f.axis?(f.width??(f.width=100),f.height??(f.height=18)):(f.width??(f.width=18),f.height??(f.height=100));f.bgColor??(f.bgColor="#999");f.roundedCorners??(f.roundedCorners=9);f.trackInset??(f.trackInset=9);f.trackOutset??(f.trackOutset=9);f.thumbWidth??(f.thumbWidth=16);f.thumbHeight??(f.thumbHeight=16);f.thumbOffset??(f.thumbOffset=1);f.nudgeAmount??(f.nudgeAmount=1);f.snapThreshold??(f.snapThreshold=8);f.snapValues??(f.snapValues=[]);this.callSuper(a,f)},setAxis:function(a){this.axis=
a},setTrackInset:function(a){this.trackInset=a},setTrackOutset:function(a){this.trackOutset=a},setThumbWidth:function(a){this.thumbWidth=a},setThumbHeight:function(a){this.thumbHeight=a},setThumbOffset:function(a){this.thumbOffset=a},setNudgeAmount:function(a){this.nudgeAmount=a},setSnapThreshold:function(a){this.snapThreshold=a},setSnapValues:function(a){this.snapValues=a},getSnapValuesAsPx:function(){const a=[];for(const f of this.snapValues)a.push(this.convertValueToPixels(f));return a},allowSnap:function(a){var f=
a.__lastMousePosition;const b=r.DomElementProxy.getRelativePosition(a.getODE()),g="x"===this.axis;a=g?a.height:a.width;f=g?f.y-b.y:f.x-b.x;return 0<f&&f<a},convertValueToPixels:function(a){const f=this.minValue,b=this.trackInset;return b+(("x"===this.axis?this.width:this.height)-b-this.trackOutset)/(this.maxValue-f)*(a-f)},convertPixelsToValue:function(a){const f=this.minValue,b=this.trackInset;return(this.maxValue-f)/(("x"===this.axis?this.width:this.height)-b-this.trackOutset)*(a-b)+f},nudgeValueLeft:function(a){this._nudge(a,
!1)},nudgeValueUp:function(a){this._nudge(a,!1)},nudgeValueRight:function(a){this._nudge(a,!0)},nudgeValueDown:function(a){this._nudge(a,!0)},_nudge:(a,f)=>{},_syncThumbToValue:function(a,f){f=this.convertValueToPixels(f);"x"===this.axis?a.setX(f-a.width/2):a.setY(f-a.height/2)},syncValueToThumb:function(a){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(a,this.convertPixelsToValue("x"===this.axis?a.x+a.width/2:a.y+a.height/2)),this.__lockSync=!1)},_syncValueToThumb:(a,f)=>
{},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(this.maxValue)}});r.RangeSlider=new w("RangeSlider",k,{include:[r.BoundedRangeComponent],initNode:function(a,f){this.callSuper(a,f);a=this.rangeFill=new e(this,{bgColor:"#666"});"x"===this.axis?(a.setY(this.thumbOffset),a.setHeight(this.thumbHeight),a.setRoundedCorners(this.thumbHeight/2)):(a.setX(this.thumbOffset),a.setWidth(this.thumbWidth),
a.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new m(this);this.thumbUpper=new m(this);this._syncRangeFillToValue()},setValue:function(a){this.callSuper(a);this.inited&&(this.__lockSync||(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,a)),this._syncRangeFillToValue())},setWidth:function(a){const f=this.width;this.callSuper(a);this.inited&&"x"===this.axis&&this.width!==f&&(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,
a))},setHeight:function(a){const f=this.height;this.callSuper(a);this.inited&&"y"===this.axis&&this.height!==f&&(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,a))},_syncRangeFillToValue:function(){const a=this.rangeFill;var f=this.getValue();const b=this.convertValueToPixels(f.lower);f=this.convertValueToPixels(f.upper)-b;"x"===this.axis?(a.setX(b),a.setWidth(f)):(a.setY(b),a.setHeight(f))},_syncThumbToValue:function(a,f){this.callSuper(a,a===this.thumbLower?
f.lower:f.upper)},_syncValueToThumb:function(a,f){let b=this.getValueCopy();b[a===this.thumbLower?"lower":"upper"]=f;this.setValue(b);b=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,b);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,b)},_nudge:function(a,f){const b=this.getValueCopy();f=this.nudgeAmount*(f?1:-1);a===this.thumbLower?b.lower=v(b.lower+f,b.upper):b.upper=t(b.upper+f,b.lower);this.setValue(b)},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(a===
this.thumbLower?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(a===this.thumbLower?this.getValue().upper:this.maxValue)}});r.Slider=new w("Slider",k,{include:[r.BoundedValueComponent],initNode:function(a,f){this.callSuper(a,f);this.thumb=new m(this)},setValue:function(a){this.callSuper(a);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(a){const f=this.width;this.callSuper(a);this.inited&&
"x"===this.axis&&this.width!==f&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(a){const f=this.height;this.callSuper(a);this.inited&&"y"===this.axis&&this.height!==f&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(a,f){this.setValue(f);this._syncThumbToValue(a,this.getValue())},_nudge:function(a,f){this.setValue(this.getValue()+this.nudgeAmount*(f?1:-1))}});r.LabelSlider=new w("LabelSlider",r.Slider,{initNode:function(a,f){const b=this;f.labelX??
(f.labelX=8);f.labelY??(f.labelY=2);f.labelFontSize??(f.labelFontSize="12px");f.labelColor??(f.labelColor="#000");f.flipThreshold??(f.flipThreshold=h((f.maxValue-f.minValue)/2)||0);b.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],f);b.callSuper(a,f);const g=b.labelX;b.labelTxt=new r.Text(b,{x:g,y:b.labelY,textColor:b.labelColor,fontSize:b.labelFontSize},[{initNode:function(c,q){this.targetX=g;this.callSuper(c,q)},updateX:function(c){const q=b.getValue()>=b.flipThreshold?
g:b.width-this.width-g;this.targetX!==q&&(this.targetX=q,this.stopActiveAnimators("x"),c?this.setX(q):this.animate({attribute:"x",to:q,duration:250}))}}]);b.syncTo(b,"setText","value")},setWidth:function(a){this.callSuper(a);this.labelTxt?.updateX(!0)},setText:function(a,f){const b=this.labelTxt;b&&(b.setText(a.value),b.updateX(f))}})})(myt);
(r=>{const w=JS.Class,{abs:v,min:t}=Math,{CODE_ENTER:h,CODE_SPACE:d,ARROW_KEYS:e}=r.global.keys,m=a=>{const f="y"===a.axis?"height":"width";a.constrain("__limitToParent",[a,"limitToParent",a,f,a.parent,f])};var k=r.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(a,f){f.nudgeTargetValue??(f.nudgeTargetValue="value");f.nudgeIncrement??(f.nudgeIncrement=1);f.nudgeMin??(f.nudgeMin=1);f.nudgeMax??(f.nudgeMax=64);this.__nudgeAcc=f.nudgeMin;this.callSuper(a,f)},setNudgeIncrement:function(a){this.set("nudgeIncrement",
v(a),!0)},setNudgeMin:function(a){this.set("nudgeMin",v(a),!0)},setNudgeMax:function(a){this.set("nudgeMax",v(a),!0)},setNudgeTargetValue:function(a){this.set("nudgeTargetValue",a,!0)},nudge:function(a,f){const b=this.nudgeTargetValue;f=this.__nudgeAcc=f?t(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(b,(this.get(b)||0)+(a?1:-1)*f);return!0}});k=new w("BaseDivider",r.SimpleButton,{include:[r.BoundedValueComponent,r.Draggable,r.ArrowKeyActivation,k],initNode:function(a,
f){f.activeColor??(f.activeColor="#bbb");f.hoverColor??(f.hoverColor="#ddd");f.readyColor??(f.readyColor="#ccc");f.axis??(f.axis="x");f.minValue??(f.minValue=0);f.value??(f.value=f.minValue);f.expansionState??(f.expansionState=2);f.focusIndicator??(f.focusIndicator=!1);f.repeatKeyDown??(f.repeatKeyDown=!0);f.activationKeys??(f.activationKeys=[h,d,...e]);"y"===f.axis?(f.height??(f.height=6),f.cursor??(f.cursor="row-resize")):(f.width??(f.width=6),f.cursor??(f.cursor="col-resize"));this.quickSet(["axis"],
f);this.callSuper(a,f);null==f.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&m(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(a){this.expansionState=a},setRestoreValue:function(a){this.restoreValue=a},setLimitToParent:function(a){this.limitToParent!==a&&(this.limitToParent=a,this.inited&&(this.fireEvent("limitToParent",a),null==a?this.releaseConstraint("__limitToParent"):m(this)))},setAxis:function(a){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=a},setValue:function(a){this.callSuper(a);a=this.value;"y"===this.axis?this.setY(a):this.setX(a)},__limitToParent:function(a){a="y"===this.axis?"height":"width";this.setMaxValue(this.parent[a]-this.limitToParent-this[a])},doActivationKeyDown:function(a,f){this.callSuper(a,f);switch(a){case h:case d:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(a,f){return this.nudge(!1,f)},doKeyArrowRightOrDown:function(a,f){return this.nudge(!0,f)},nudge:function(a,f){a=this.callSuper(a,f);this.setExpansionState(2);
this.setRestoreValue(this.value);return a},doPrimaryAction:function(){const {restoreValue:a,maxValue:f,minValue:b}=this;let g;switch(this.expansionState){case 0:null!=a&&(this.setExpansionState(1),a===b?a!==f&&this.doPrimaryAction():g=a);break;case 1:null!=f&&(this.setExpansionState(3),this.value===f?this.doPrimaryAction():g=f);break;case 2:null!=b&&(this.setExpansionState(0),this.value===b?this.doPrimaryAction():g=b);break;case 3:null!=a&&(this.setExpansionState(2),a===f?this.doPrimaryAction():g=
a)}this.animateToValue(g)},animateToValue:function(a,f=250){null!=a&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:a,duration:f}))},requestDragPosition:function(a,f){this.disabled||(a="y"===this.axis?f:a,f=this.value,a!==f&&(this.setValue(a),this.setRestoreValue(a),this.setExpansionState(f>a?2:1)))}});r.HorizontalDivider=new w("HorizontalDivider",k,{initNode:function(a,f){f.axis="x";this.callSuper(a,f)}});r.VerticalDivider=new w("VerticalDivider",k,{initNode:function(a,f){f.axis=
"y";this.callSuper(a,f)}})})(myt);
(r=>{let w=0;const {Class:v,Module:t}=JS,{min:h,max:d}=Math,{View:e,SpacedLayout:m,Node:{DEFAULT_PLACEMENT:k}}=r,a=l=>{const p=l.columnHeaders,[y,B]=l.sort??["",""];let D=p.length;for(;D;){const F=p[--D];F.columnId===y?F.sortable&&F.setSortState(B):F.setSortState("none")}l.locked||l.doSort()},f=(l,p,y,B)=>{if(0!==p){const L=0<p,P=[];for(var D=l.length;D;){var F=l[--D];F.resizable&&(y?0<F.flex:0===F.flex)&&P.push({hdr:F,limit:(L?F.maxValue:F.minValue)-F.value,amt:0})}l=P.length;if(0<l){for(D=0;0!==
p;){w>=l&&(D=w=0);F=P[w];var K=F.hdr;F.full?++D:(L?(K=h(y?K.flex:1,p),F.amt+K>F.limit&&(K=F.limit-F.amt,F.full=!0)):(K=d(y?-K.flex:-1,p),F.amt+K<F.limit&&(K=F.limit-F.amt,F.full=!0)),F.amt+=K,p-=K);if(D===l)break;++w}for(const N of P)N.hdr.setValue(N.hdr.value+N.amt);B?.(p)}}},b=l=>(l=l.gridController?.getPrevHdr(l))?l.maxValue-l.value+b(l):0,g=l=>(l=l.gridController?.getNextHdr(l))?l.maxValue-l.value+g(l):0,c=l=>(l=l.gridController?.getPrevHdr(l))?l.minValue-l.value+c(l):0,q=l=>(l=l.gridController?.getNextHdr(l))?
l.minValue-l.value+q(l):0,x=(l,p)=>{l=l.gridController?.getPrevHdr(l);var y=0;if(l){y=l.value+p;l.resizable&&l.setValue(y);const B=y-l.value;y=p-B;0>B&&(y+=x(l,B))}return y},u=(l,p)=>{l=l.gridController?.getPrevHdr(l);var y=0;if(l){y=l.value+p;l.resizable&&l.setValue(y);const B=y-l.value;y=p-B;0<B&&(y+=u(l,B))}return y},n=(l,p)=>{if(l=l.gridController?.getNextHdr(l))p=l.value+p,l.resizable&&l.setValue(p),p-=l.value,0>p&&n(l,p)},A=(l,p)=>{if(l=l.gridController?.getNextHdr(l))p=l.value+p,l.resizable&&
l.setValue(p),p-=l.value,0<p&&A(l,p)},J=l=>{let p="";if(l.sortable)switch(l.sortState){case O.SORT_ORDER_ASC:p="chevron-up";break;case O.SORT_ORDER_DESC:p="chevron-down"}l.sortIcon.setIcon(p)},z=l=>{const p=l.textView;p?.setWidth(l.width-l.outset-p.x)},C=r.GridController=new t("GridController",{initNode:function(l,p){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(l,p);this.fitHeadersToWidth();a(this)},setMaxWidth:function(l){this.set("maxWidth",
l,!0)},setMinWidth:function(l){this.set("minWidth",l,!0)},setFitToWidth:function(l){this.fitToWidth=l},setSort:function(l){r.areArraysEqual(l,this.sort)||(this.sort=l,this.inited&&(this.fireEvent("sort",l),a(this)))},setLastColumn:function(l){const p=this.lastColumn;p!==l&&(p?.setLast(!1),this.lastColumn=l,l?.setLast(!0))},setLocked:function(l){this.locked=l;if(this.inited&&!l){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const p of this.columnHeaders)this.notifyHdrXChange(p),this.notifyHdrWidthChange(p),this.notifyHdrVisibilityChange(p);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(l){l=this.valueFromEvent(l);this.gridWidth!==l&&(this.gridWidth=l,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(l){this.hdrChangeListener=l},doSort:()=>{},getPrevHdr:function(l){const p=this.columnHeaders;l=this.getHdrIndex(l);
if(0<l)for(;l;){const y=p[--l];if(y.visible)return y}},getNextHdr:function(l){const p=this.columnHeaders,y=p.length;l=this.getHdrIndex(l)+1;if(0<l&&l<y)for(;y>l;){const B=p[l++];if(B.visible)return B}},hasHdr:function(l){return this.columnHeaders.includes(l)},getHdrIndex:function(l){return this.columnHeaders.indexOf(l)},getHdrById:function(l){for(const p of this.columnHeaders)if(p.columnId===l)return p},getVisibleHdrs:function(){return this.columnHeaders.filter(l=>l.visible)},notifyAddHdr:function(l){this.hasHdr(l)||
(this.columnHeaders.push(l),l.visible&&this.setLastColumn(l),this.fixupResizerCursors())},notifyRemoveHdr:function(l){const p=this.getHdrIndex(l);-1<p&&(this.columnHeaders.splice(p,1),l.visible&&l.last&&this.setLastColumn(this.getPrevHdr(l)),this.fixupResizerCursors())},notifyHdrXChange:function(l){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrXChange(l);this._notifyHdrChange("X",l)}},notifyHdrWidthChange:function(l){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrWidthChange(l);
this._notifyHdrChange("Width",l)}},notifyHdrVisibilityChange:function(l){if((!this.__skipInvisibleHeaders||l.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(l);var p=this.setLastColumn;a:{var y=this.columnHeaders;let B=y.length;for(;B;){const D=y[--B];if(D.visible){y=D;break a}}y=void 0}p.call(this,y);p=l.visible?1:-1;this.setMaxWidth(this.maxWidth+l.maxValue*p);this.setMinWidth(this.minWidth+l.minValue*p);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
l)}},_notifyHdrChange:function(l,p){const y=this.hdrChangeListener;if(y)y["notifyHdr"+l+"Change"](p)},updateRowsForVisibilityChange:function(l){for(const p of this.rows)p.notifyHdrVisibilityChange(l)},hasRow:function(l){return this.rows.includes(l)},getRowIndex:function(l){return this.rows.indexOf(l)},getRowById:function(l,p=y=>y.model.id===l){return this.rows.find(p)},getPrevRow:function(l){l=this.getRowIndex(l)-1;return this.rows[0>l?this.rows.length-1:l]},getNextRow:function(l){l=this.getRowIndex(l)+
1;return this.rows[l<this.rows.length?l:0]},notifyAddRow:function(l,p){if(!this.hasRow(l)&&(this.rows.push(l),!this.locked)){const y=this.width;for(const B of this.columnHeaders)l.setWidth(y),l.notifyHdrXChange(B),l.notifyHdrWidthChange(B),l.notifyHdrVisibilityChange(B);p||this.doSort()}},notifyRemoveRow:function(l){l=this.getRowIndex(l);-1<l&&this.rows.splice(l,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const l=this.getVisibleHdrs();let p=0;for(const y of l)p=d(p,y.x+y.width);
f(l,this.gridWidth-p,!0,y=>{f(l,y,!1,null)})}},fixupResizerCursors:function(){const l=this.getVisibleHdrs();let p=!0,y=0;l.forEach((K,L)=>{p&&K.isFixed()?K.setResizerCursor("",!0):(p&&(y=L),p=!1,K.restoreResizerCursor())});let B=!0,D=l.length,F=D-1;for(;D>y;){const K=l[--D];B?K.setResizerCursor("",!0):K.restoreResizerCursor();K.isFixed()||(B&&(F=D),B=!1)}y===F&&l[y].setResizerCursor("",!0)}}),I=r.GridColHdr=new t("GridColHdr",{include:[r.BoundedValueComponent],initNode:function(l,p){const y=this,
B=p.resizerCursor??"col-resize";delete p.resizerCursor;p.minValue??(p.minValue=16);p.maxValue??(p.maxValue=1E3);p.value??(p.value=p.minValue);p.resizable??(p.resizable=!0);p.flex??(p.flex=0);p.cellXAdj??(p.cellXAdj=0);p.cellWidthAdj??(p.cellWidthAdj=0);p.sortable??(p.sortable=!0);p.sortState??(p.sortState="none");p.placement??(p.placement=k);y.callSuper(l,p);const D=y.gridController;y.resizer=new e(y,{cursor:B,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[r.SizeToParent,r.Draggable,{requestDragPosition:function(F,K){K=F-this.x;if(D.fitToWidth&&(0<K?K=h(K,-q(y),y.maxValue-y.value+b(y)):0>K&&(K=d(K,-g(y),y.minValue-y.value+c(y))),0===K))return;F=y.value+K;y.resizable&&y.setValue(F);F-=y.value;K=F-K;let L=0;0>F?L=x(y,F):0<F&&(L=u(y,F));this.dragInitX+=L;K-=L;D.fitToWidth&&(0>K?n(y,K):0<K&&A(y,K))}}]);D&&(D.notifyAddHdr(y),D.notifyHdrXChange(y),D.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(l){this.setGridController();this.callSuper(l)},setSortable:function(l){this.set("sortable",l,!0)},setSortState:function(l){this.set("sortState",l,!0)},setResizable:function(l){this.set("resizable",l,!0)},setCellWidthAdj:function(l){this.cellWidthAdj=l},setCellXAdj:function(l){this.cellXAdj=l},setFlex:function(l){this.flex=l},setColumnId:function(l){this.columnId=l},setResizerCursor:function(l,p){const y=this.resizer,B=y.cursor;l!==B&&(p&&(this.__rrc=B),y.setCursor(l))},restoreResizerCursor:function(){const l=
this.__rrc;l&&(this.setResizerCursor(l),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(l){this.last=l;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(l){const p=this.gridController;p!==l&&(p?.notifyRemoveHdr(this),this.gridController=l,this.inited&&l&&(l.notifyAddHdr(this),l.notifyHdrXChange(this),l.notifyHdrWidthChange(this),l.notifyHdrVisibilityChange(this)))},setValue:function(l){this.callSuper(l);
this.inited&&this.setWidth(this.value)},setMinValue:function(l){const p=this.minValue??0,y=this.gridController;this.callSuper(l);this.inited&&p!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-p)},setMaxValue:function(l){const p=this.maxValue??0,y=this.gridController;l??=1E3;this.callSuper(l);this.inited&&p!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-p)},setWidth:function(l){const p=this.width;this.callSuper(l);this.inited&&p!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(l){const p=this.x;this.callSuper(l);this.inited&&p!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(l){const p=this.visible;this.callSuper(l);this.inited&&p!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=r.GridRow=new t("GridRow",{initNode:function(l,p){p.placement??(p.placement=k);this.callSuper(l,p);this.gridController?.notifyAddRow(this)},destroy:function(l){this.setGridController();this.callSuper(l)},setGridController:function(l){const p=
this.gridController;p!==l&&(p?.notifyRemoveRow(this),this.gridController=l,this.inited&&l?.notifyAddRow(this))},notifyHdrXChange:function(l){this.getRef(l.columnId)?.setX(l.x+l.cellXAdj)},notifyHdrWidthChange:function(l){this.getRef(l.columnId)?.setWidth(l.width+l.cellWidthAdj)},notifyHdrVisibilityChange:function(l){this.getRef(l.columnId)?.setVisible(l.visible)}}),O=r.Grid=new v("Grid",e,{include:[C],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(l,p){p.overflow??
(p.overflow="autox");p.bgColor??(p.bgColor="#ccc");p.rowSpacing??(p.rowSpacing=1);p.columnSpacing??(p.columnSpacing=1);var y=p.isAutoScrolling;delete p.isAutoScrolling;this.callSuper(l,p);l=this.header=new e(this,{overflow:"hidden"});l.xLayout=new m(l,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});l.yLayout=new r.SizeToChildren(l,{locked:!0,axis:"y"});p=this.sizeHeightToRows;y=this.content=new e(this,{overflow:p?"hidden":"autoy"},y?[r.AutoScroller]:[]);y.yLayout=new m(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:p});this.syncTo(this,"setGridWidth","width");this.syncTo(l,"_updateContentWidth","width");this.constrain("_updateContentHeight",[p?y:this,"height",l,"height",l,"y"])},setSizeHeightToRows:function(l){this.sizeHeightToRows=l},setRowSpacing:function(l){this.rowSpacing!==l&&(this.rowSpacing=l,this.inited&&this.content.yLayout.setSpacing(l))},setColumnSpacing:function(l){this.columnSpacing!==l&&(this.columnSpacing=l,this.inited&&this.header.xLayout.setSpacing(l))},
setLocked:function(l){if(this.inited)for(const p of[this.header.xLayout,this.header.yLayout,this.content.yLayout])l?p.incrementLockedCounter():(p.decrementLockedCounter(),p.update());this.callSuper(l)},_updateContentWidth:function(l){const p=this.content;l=l.value;p.setWidth(l);for(const y of p.getSubviews())y.setWidth(l)},_updateContentHeight:function(l){const {header:p,content:y}=this;l=p.y+p.height;y.setY(l);this.sizeHeightToRows?this.setHeight(l+y.height):y.setHeight(this.height-l)},determinePlacement:function(l,
p){if(l===k){let y;p.isA(M)?y=this.content:p.isA(I)&&(y=this.header);if(y)return p.gridController!==this&&p.setGridController(this),y}return this.callSuper(l,p)},doSort:function(){const [l,p]=this.sort??["",""],y=this.getSortFunction(l,p);if(y){const B=this.content,D=B.yLayout;this.rows.sort(y);B.sortSubviews(y);D.sortSubviews(y);D.update()}},getSortFunction:(l,p)=>{if(l){const y=p===O.SORT_ORDER_ASC?1:-1;return(B,D)=>{B=B.getRef(l).text;D=D.getRef(l).text;return B>D?y:D>B?-y:0}}}});r.SimpleGridColHdr=
new v("SimpleGridColHdr",r.SimpleTextButton,{include:[I],initNode:function(l,p){p.activeColor??(p.activeColor="#999");p.hoverColor??(p.hoverColor="#bbb");p.readyColor??(p.readyColor="#aaa");p.inset??(p.inset=2);p.sortIconColor??(p.sortIconColor="#666");p.outset??(p.outset=p.sortable??!0?14:2);const y=p.textAlign;delete p.textAlign;this.callSuper(l,p);this.sortIcon=new r.FontAwesome(this,{align:"right",alignOffset:3,valign:"middle",textColor:this.sortIconColor},[{initNode:function(B,D){this.callSuper(B,
D);this.getIDS().fontSize="0.7em"}}]);this.textView.enableEllipsis();y&&this.textView.setTextAlign(y);this.setDisabled(!this.sortable);z(this);J(this)},setSortIconColor:function(l){this.sortIconColor=l;this.sortIcon?.setTextColor(l)},setSortable:function(l){this.callSuper(l);this.inited&&(l&&this.setOutset(14),this.setDisabled(!l),J(this))},setSortState:function(l){this.callSuper(l);this.inited&&J(this)},setWidth:function(l){this.callSuper(l);this.inited&&z(this)},doActivated:function(){this.disabled||
(this.setSortState(this.sortState===O.SORT_ORDER_ASC?O.SORT_ORDER_DESC:O.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(r=>{const {Class:w,Module:v}=JS,t=Math,h=t.max,{View:d,LocalStorage:{setDatum:e,getDatum:m},global:{focus:k,keys:a},getAlphaObjSortFunc:f}=r,b=z=>{const C=z.selectedRow;C&&(C.setSelected(!1),z.set("selectedRow",null,!0))},g=z=>z.__ssk??(z.__ssk="InfiniteGridMixin.sort."+r.hash(z.columnHeaders.map(C=>C.columnId).sort().join(","))),c=r.InfiniteListRow=new v("InfiniteListRow",{include:[r.Reusable],setInfiniteOwner:function(z){this.infiniteOwner=z},setModel:function(z){this.model=z},setClassKey:function(z){this.classKey=
z},notifyRefreshed:()=>{}}),q=r.SelectableInfiniteListRow=new v("SelectableInfiniteListRow",{include:[c,r.Selectable]}),x=r.InfiniteList=new w("InfiniteList",d,{initNode:function(z,C){let I=C.rowClasses;delete C.rowClasses;if("function"===typeof I){const M={};M["default"]=I;I=M}C.modelIDName??(C.modelIDName="id");C.numericSort??(C.numericSort=!0);C.ascendingSort??(C.ascendingSort=!0);C.overflow??(C.overflow="autoy");C.bgColor??(C.bgColor="#ccc");C.rowSpacing??(C.rowSpacing=1);C.rowInset??(C.rowInset=
0);C.rowOutset??(C.rowOutset=0);C.rowHeight??(C.rowHeight=30);C.overscrollBehavior??(C.overscrollBehavior="auto contain");this._rowExtent=this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(z,C);z=this._listView=new d(this);this._scrollAnchorView=new d(z,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(I,z);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(z,C)=>new r.TrackActivesMultiPool(z,
C),setOverscrollBehavior:function(z){this.overscrollBehavior=z;this.getIDS().overscrollBehavior=z},setCollectionModel:function(z){this.collectionModel=z},setModelIDName:function(z){this.modelIDName=z},setRowSpacing:function(z){this.rowSpacing=z;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(z){this.rowHeight=z;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(z){if(0<z&&(this.callSuper(z),this.inited)){z=this._listView;
const C=this.width;z.setWidth(C);for(const I of z.getSubviews())I.setWidth(C)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??{})},getVisibleRowForModel:function(z){const C=this.getVisibleRows();let I=C.length;for(;I;){const M=C[--I];if(M.model===z)return M}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const z=this.modelIDName,C=this.ascendingSort;
return this.numericSort?r.getNumericObjSortFunc(z,C):f(z,C,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(z,C){var I=this.getIndexOfModelInData(z);let M=!1;if(0<=I){var O=this._rowExtent;const l=this.getIDE().scrollTop,p=l+this.height;I=this.rowInset+I*O;O=I+O;I<=l?(this.scrollYTo(I,!0),M=!0):O>=p&&(this.scrollYTo(O-this.height,!0),M=!0);C&&((C=this.getVisibleRowForModel(z))?C.focus():this._focusToModel=z)}return M},isModelInData:function(z){return 0<=this.getIndexOfModelInData(z)},getNextModel:function(z,
C=!0,I=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return z+=1,z>=O?C?M[0]:M[O-1]:M[z];if(I&&0<O)return M[O-1]},getPrevModel:function(z,C=!0,I=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return--z,0>z?C?M[O-1]:M[0]:M[z];if(I&&0<O)return M[0]},getIndexOfModelInData:function(z){if(z){const C=this.getListData();let I=C.length;for(;I;)if(this.areModelsEqual(C[--I],z))return I}return-1},areModelsEqual:function(z,C){const I=this.modelIDName;
return z[I]===C[I]},getActiveRowForModel:function(z){if(z){const C=this._itemPool.getActives();let I=C.length;for(;I;){const M=C[--I];if(this.areModelsEqual(M.model,z))return M}}},refreshListData:function(z,C){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(z,C)},resetListUI:function(z,C){const I=this.getListData().length,M=this._listView,O=this._scrollAnchorView;M.setHeight(I*this._rowExtent-(0<I?this.rowSpacing:0)+this.rowInset+
this.rowOutset);O.setY(M.height-O.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=C;z||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(z){if(k.focusedView?.isDescendantOf(z)){const C=this.getFocusTrap();C?C.focus():k.clear()}z.setVisible(!1);this._itemPool.putInstance(z)},refreshListUI:function(z){z=this._rowExtent;const C=this.rowInset,I=this.forceFullResetOnNextRefresh;var M=this.getIDE().scrollTop;const O=this.getListData()??
[];var l=h(0,t.floor((M-C)/z));M=t.min(O.length,t.ceil((M-C+this.height)/z));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==l||this._endIdx!==M||I){const y=this.width,B=this.rowHeight,D=this._visibleRowsByIdx,F=this._focusToModel;this._startIdx=l;this._endIdx=M;for(var p in D)if(p<l||p>=M)this.putRowBackInPool(D[p]),delete D[p];for(p=l;p<M;p++){l=D[p];const K=O[p],L=this.getClassKey(K);let P=!1;l&&l.classKey===L||(l&&this.putRowBackInPool(l),D[p]=l=this._itemPool.getInstance(L),
l.setInfiniteOwner(this),l.setClassKey(L),l.setWidth(y),l.setHeight(B),l.setY(C+p*z),l.setVisible(!0),P=!0);!I&&l.model&&this.areModelsEqual(l.model,K)?P&&this.updateRow(l):(l.setModel(K),this.updateRow(l));l.notifyRefreshed();l.bringToFront();F&&this.areModelsEqual(F,K)&&(l.focus(),this._focusToModel=null)}}},getClassKey:z=>"default",updateRow:z=>{}}),u=r.SimpleSelectableInfiniteListRow=new w("SimpleSelectableInfiniteListRow",r.SimpleButton,{include:[q,r.ArrowKeyActivation],initNode:function(z,C){C.selectedColor??
(C.selectedColor="#ccf");C.activeColor??(C.activeColor="#f8f8f8");C.hoverColor??(C.hoverColor="#eee");C.readyColor??(C.readyColor="#fff");C.focusIndicator??(C.focusIndicator=!1);C.activationKeys??(C.activationKeys=a.LIST_KEYS);this.callSuper(z,C)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(z){this.callSuper(z);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},
updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(z,C){z===a.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(z,C)},doKeyArrowLeftOrUp:function(z,C){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(z,C){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(z){switch(z){case a.CODE_ENTER:case a.CODE_SPACE:this.doActivated()}}}),
n=r.SelectableInfiniteList=new w("SelectableInfiniteList",x,{setSelectedRow:function(z){const C=this.selectedRow;z!==C&&(C?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",z,!0),z&&(this.setSelectedRowModel(z.model),z.setSelected(!0)))},setSelectedRowModel:function(z){this.set("selectedRowModel",z,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(z,C,I){z&&(b(this),
this.setSelectedRowModel(z),this.refreshListUI(),C&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(z,C=!0){this.selectRowForModel(this.getNextModel(z),C,!0)},selectPrevRowForModel:function(z,C=!0){this.selectRowForModel(this.getPrevModel(z),C,!1)},resetListUI:function(z,C){this.isModelInData(this.selectedRowModel)?b(this):this.setSelectedRow();this.callSuper(z,C)},putRowBackInPool:function(z){z.selected&&b(this);this.callSuper(z)},refreshListUI:function(z){z=k.focusedView;this.callSuper();
const C=this.getActiveSelectedRow();C&&(this.set("selectedRow",C,!0),C.setSelected(!0),z&&z!==C||C.focus(!0))}}),A=new v("InfiniteGridRowMixin",{notifyXChange:function(z){this.getRef(z.columnId)?.setX(z.x+z.cellXAdj)},notifyWidthChange:function(z){this.getRef(z.columnId)?.setWidth(z.width+z.cellWidthAdj)},notifyVisibilityChange:function(z){this.getRef(z.columnId)?.setVisible(z.visible)}}),J=new v("InfiniteGridMixin",{setGridHeader:function(z){(this.gridHeader=z)?.setGrid(this)},makeReady:function(z,
C){const I=this.gridHeader;I?(this.forceFullResetOnNextRefresh=C,C=I.persistSortOrder?m(g(I)):void 0,I.setSort(C??z),I.setLocked(!1)):this.refreshListData(!1,C)},getSortFunction:function(){const [z,C]=this.gridHeader.sort??["",""];return z?f(z,C===r.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(z){const C=this.gridHeader;if(C)for(const I of C.columnHeaders)z.notifyXChange(I),z.notifyWidthChange(I),z.notifyVisibilityChange(I)},notifyXChange:function(z){for(const C of this.getVisibleRows())C.notifyXChange(z)},
notifyWidthChange:function(z){for(const C of this.getVisibleRows())C.notifyWidthChange(z)},notifyVisibilityChange:function(z){for(const C of this.getVisibleRows())C.notifyVisibilityChange(z)}});r.InfiniteGridRow=new v("InfiniteGridRow",{include:[c,A]});r.SelectableInfiniteGridRow=new v("SelectableInfiniteGridRow",{include:[q,A]});r.SimpleSelectableInfiniteGridRow=new w("SimpleSelectableInfiniteGridRow",u,{include:[A]});r.InfiniteGrid=new w("InfiniteGrid",x,{include:[J]});r.SelectableInfiniteGrid=
new w("InfiniteGrid",n,{include:[J]});r.InfiniteGridHeader=new w("InfiniteGridHeader",d,{include:[r.GridController],initNode:function(z,C){C.columnSpacing??(C.columnSpacing=1);C.persistSortOrder??(C.persistSortOrder=!0);C.overflow="hidden";this.callSuper(z,C);new r.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(z){this.grid=z},setColumnSpacing:function(z){this.columnSpacing=z},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:h(0,this.getVisibleHdrs().length-1)*this.columnSpacing},
setPersistSortOrder:function(z){this.persistSortOrder=z},setHeight:function(z){this.callSuper(z);if(this.inited){z=this.height;for(const C of this.columnHeaders)C.setHeight(z)}},setWidth:function(z){this.callSuper(h(this.minWidth,z));this.inited&&(z=this.width,this.setGridWidth(z),this.grid.setWidth(z))},subviewAdded:function(z){this.callSuper(z);z.isA(r.GridColHdr)&&(z.setGridController(this),z.setHeight(this.height))},doSort:function(){this.persistSort();this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},
persistSort:function(){this.persistSortOrder&&e(g(this),this.sort)},notifyHdrXChange:function(z){this.isLocked()||(this.grid.notifyXChange(z),this._notifyHdrChange("X",z))},notifyHdrWidthChange:function(z){this.isLocked()||(this.grid.notifyWidthChange(z),this._notifyHdrChange("Width",z))},updateRowsForVisibilityChange:function(z){this.grid.notifyVisibilityChange(z);this.isLocked()||this._notifyHdrChange("Visibility",z)}})})(myt);
(r=>{const w=JS.Class,v=r.PanelStackTransition=new w("PanelStackTransition",r.Node,{to:t=>Promise.resolve(t),from:t=>Promise.resolve(t)});r.PanelStack=new w("PanelStack",r.View,{include:[r.SelectionManager],initNode:function(t,h){h.overflow="hidden";h.itemSelectionId??(h.itemSelectionId="panelId");h.maxSelected??(h.maxSelected=1);this.callSuper(t,h);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(t){this.set("transition",t,!0)},__updateWidth:function(t){this.getActivePanel()?.setWidth(t.value)},
__updateHeight:function(t){this.getActivePanel()?.setHeight(t.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(t){return this.getSelectableItem(t)},selectPanel:function(t){this.selectById(t)},doSelected:function(t){t.setWidth(this.width);t.setHeight(this.height)},doStackTransition:function(t){this["doStackTransition"+(t.selected?"To":"From")](t)},doStackTransitionTo:function(t){const h=this;h.doBeforeTransitionTo(t);const d=h.transition;d?d.to(t).then(e=>{h.doAfterTransitionTo(e)}):
(t.makeHighestZIndex(),t.setVisible(!0),h.doAfterTransitionTo(t))},doBeforeTransitionTo:t=>{},doAfterTransitionTo:t=>{},doStackTransitionFrom:function(t){const h=this;h.doBeforeTransitionFrom(t);const d=h.transition;d?d.from(t).then(e=>{h.doAfterTransitionFrom(e)}):(t.setVisible(!1),h.doAfterTransitionFrom(t))},doBeforeTransitionFrom:t=>{},doAfterTransitionFrom:t=>{}});r.StackablePanel=new JS.Module("StackablePanel",{include:[r.Selectable],initNode:function(t,h){h.visible=h.selected=!1;h.bgColor??
(h.bgColor="#fff");h.panelId??(h.panelId=h.name);this.callSuper(t,h);this.selected&&this.doStackTransition()},setPanelStack:function(t){this.panelStack=t},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(t){this.panelId=t},setSelected:function(t){this.selected!==t&&(this.callSuper(t),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});r.PanelStackFadeTransition=new w("PanelStackFadeTransition",v,{initNode:function(t,
h){h.duration??(h.duration=1E3);this.callSuper(t,h)},setDuration:function(t){this.duration=t},to:function(t){return new Promise((h,d)=>{t.stopActiveAnimators("opacity");t.setVisible(!0);t.animate({attribute:"opacity",to:1,duration:this.duration}).next(e=>{t.makeHighestZIndex();h(t)})})},from:function(t){return new Promise((h,d)=>{t.stopActiveAnimators("opacity");t.animate({attribute:"opacity",to:0,duration:this.duration}).next(e=>{t.setVisible(!1);h(t)})})}});r.PanelStackSlideTransition=new w("PanelStackSlideTransition",
v,{initNode:function(t,h){h.duration??(h.duration=1E3);h.direction??(h.direction="right");this.callSuper(t,h)},setDuration:function(t){this.duration=t},setDirection:function(t){this.direction=t},to:function(t){const h=t.getPanelStack(),d=this.duration;let e,m;switch(this.direction){case "left":m="x";e=h.width;break;case "right":m="x";e=-h.width;break;case "up":m="y";e=h.height;break;case "down":m="y",e=-h.height}t.stopActiveAnimators(m);t.set(m,e);t.setVisible(!0);return new Promise((k,a)=>{a=f=>
{t.makeHighestZIndex();k(t)};0<d?t.animate({attribute:m,to:0,duration:d}).next(a):(t.set(m,0),t.makeHighestZIndex(),k(t))})},from:function(t){const h=t.getPanelStack(),d=this.duration;let e,m;switch(this.direction){case "left":m="x";e=-h.width;break;case "right":m="x";e=h.width;break;case "up":m="y";e=-h.height;break;case "down":m="y",e=h.height}t.stopActiveAnimators(m);return new Promise((k,a)=>{a=f=>{t.setVisible(!1);k(t)};0<d?t.animate({attribute:m,to:e,duration:d}).next(a):(t.set(m,e),t.setVisible(!1),
k(t))})}})})(myt);
(r=>{const w=JS.Module,{Draggable:v,global:{dragManager:t,mouse:h}}=r,d=(m,k,a)=>{for(const f of[k,a])m["__is"+f]=!1,m["__tmrId"+f]=null},e=r.DragGroupSupport=new w("DragGroupSupport",{initNode:function(m,k){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(m,k)},setDragGroups:function(m){const k=this.__dgs={};for(const a in m)k[a]=!0;this.__anyDG=k.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(m){const k=this.__drpgs=
{};for(const a in m)k[a]=!0;this.__anyDRPG=k.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(m){m&&(this.__dgs[m]=!0,"*"===m&&(this.__anyDG=!0))},removeDragGroup:function(m){m&&(delete this.__dgs[m],"*"===m&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(m){m&&(this.__drpgs[m]=!0,"*"===m&&(this.__anyDRPG=!0))},removeDropGroup:function(m){m&&(delete this.__drpgs[m],"*"===m&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
r.DropSource=new w("DropSource",{include:[v],initNode:function(m,k){k.distanceBeforeDrag??(k.distanceBeforeDrag=2);k.dropParent??(k.dropParent=m.getRoot());this.callSuper(m,k)},setDropClass:function(m){this.dropClass=r.resolveClassname(m)},setDropClassAttrs:function(m){this.dropClassAttrs=m},setDropParent:function(m){this.dropParent=m},startDrag:function(m){const k=this.dropable=this.makeDropable();if(k){const a=k.distanceBeforeDrag;k.distanceBeforeDrag=0;k.doMouseDown(m);k.__doMouseDown(m);k.distanceBeforeDrag=
a}},doMouseUp:function(m){this.callSuper(m);const k=this.dropable;k&&(k.__doMouseUp(m),k.doMouseUp(m),this.dropable=null)},makeDropable:function(){const m=this.dropClass,k=this.dropParent;if(m&&k){const a=r.DomElementProxy.getRelativePosition(this.getIDE(),k.getIDE());return new m(k,{...this.dropClassAttrs,x:a.x??0,y:a.y??0})}}});r.DropTarget=new w("DropTarget",{include:[e],initNode:function(m,k){this.callSuper(m,k);t.registerDropTarget(this)},destroy:function(){t.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(m){return!this.disabled&&this.isVisible()},notifyDragStart:m=>{},notifyDragStop:m=>{},notifyDragEnter:m=>{},notifyDragLeave:m=>{},notifyDrop:m=>{}});r.Dropable=new w("Dropable",{include:[v,e],setDropTarget:function(m){this.dropTarget=m},setDropped:function(m){this.dropped=m},setDropFailed:function(m){this.dropFailed=m},willPermitDrop:m=>!0,startDrag:function(m){this.setDropped(!1);this.setDropFailed(!1);t.startDrag(this);this.callSuper(m)},updateDrag:function(m){t.updateDrag(m,
this);this.callSuper(m)},stopDrag:function(m,k){t.stopDrag(m,this,k);this.callSuper(m,k);k?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(m){this.setDropTarget(m)},notifyDragLeaving:function(m){this.setDropTarget()},notifyDropped:function(m,k){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});r.AutoScroller=new w("AutoScroller",{include:[e],initNode:function(m,k){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;k.overflow??(k.overflow="auto");this.callSuper(m,k);t.registerAutoScroller(this)},destroy:function(){t.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(m){this.scrollBorder=Math.max(1,m)},setScrollFrequency:function(m){this.scrollFrequency=m},setScrollAmount:function(m){this.scrollAmount=m},setScrollAcceleration:function(m){this.scrollAcceleration=m},notifyAutoScrollerDragStart:function(m){m=this.getIDE();(m.scrollHeight>m.clientHeight||
m.scrollWidth>m.clientWidth)&&this.attachToDom(h,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(m){this.detachFromDom(h,"__hndlMove","mousemove",!0);d(this,"Up","Down");d(this,"Left","Right")},__hndlMove:function(m){const k=this;let {pageX:a,pageY:f}=m.value;if(k.containsPoint(a,f)){m=k.getPagePosition();const b=k.scrollBorder,g=(c,q)=>{k["__is"+c]&&(k.getIDE()["scroll"+("Up"===c||"Down"===c?"Top":"Left")]+=q*k["__amt"+c],k["__tmrId"+c]=setTimeout(()=>{g(c,q)},k.scrollFrequency))};
a-=m.x;f-=m.y;f<b?(k.__isUp=!0,k.__amtUp=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-f/b))),k.__tmrIdUp||g("Up",-1)):k.height-f<b?(k.__isDown=!0,k.__amtDown=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.height-f)/b))),k.__tmrIdDown||g("Down",1)):d(k,"Up","Down");a<b?(k.__isLeft=!0,k.__amtLeft=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-a/b))),k.__tmrIdLeft||g("Left",-1)):k.width-a<b?(k.__isRight=!0,k.__amtRight=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.width-
a)/b))),k.__tmrIdRight||g("Right",1)):d(k,"Left","Right")}else d(k,"Up","Down"),d(k,"Left","Right")}})})(myt);
(r=>{const {max:w,cos:v,sin:t,PI:h}=Math,d=r.Geometry.degreesToRadians,e=b=>{var g=d(b.startAngle),c=d(b.endAngle);if(g>c){var q=g;g=c;c=q}q=b.__path;var x=b.width/2,u=b.thickness;const n=b.radius,A=n+u;var J=c-g;const z=J+1E-4>=2*h;z&&(g=0,c=h);const C=[x+A*v(g),x+A*t(g)],I=[x+A*v(c),x+A*t(c)];c=[x+n*v(c),x+n*t(c)];g=[x+n*v(g),x+n*t(g)];x=["M"+C.join()];z?x.push("A"+[A,A,0,1,1,I].join(),"A"+[A,A,0,1,1,C].join(),"L"+c.join(),"A"+[n,n,0,1,0,g].join(),"A"+[n,n,0,1,0,c].join()):(J=J%(2*h)>h?1:0,u/=2,
x.push("A"+[A,A,0,J,1,I].join(),b.endCapRounding?"A"+[u,u,0,0,1,c].join():"L"+c.join(),"A"+[n,n,0,J,0,g].join(),b.startCapRounding?"A"+[u,u,0,0,1,C].join():""));x.push("z");q.setAttribute("d",x.join(" "));q.setAttribute("fill",b.color)},m=b=>{const g=2*(b.radius+b.thickness),c=b.__svg;b.setWidth(g);b.setHeight(g);c.setAttribute("viewBox","0 0 "+g+" "+g);c.setAttribute("width",g);c.setAttribute("height",g);e(b)},k=(b,g,c)=>{b[g]!==c&&(b[g]=c,b.inited&&(e(b),b.fireEvent(g,c)))},a=(b,g,c)=>{b[g]!==c&&
(b[g]=c=w(0,c),b.inited&&(m(b),b.fireEvent(g,c)))},f=(b,g)=>{b=document.createElementNS("http://www.w3.org/2000/svg",b);g?.appendChild(b);return b};r.Annulus=new JS.Class("Annulus",r.BackView,{initNode:function(b,g){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(b,g);m(this)},createOurDomElement:function(b){b=this.callSuper(b);var g=Array.isArray(b)?b[1]:b;g=this.__svg=f("svg",g);this.__path=f("path",g);g.style.pointerEvents=
"none";return b},setRadius:function(b){a(this,"radius",b)},setThickness:function(b){a(this,"thickness",b)},setStartAngle:function(b){k(this,"startAngle",b)},setEndAngle:function(b){k(this,"endAngle",b)},setStartCapRounding:function(b){k(this,"startCapRounding",b)},setEndCapRounding:function(b){k(this,"endCapRounding",b)},setColor:function(b){k(this,"color",b)},isColorAttr:function(b){return"color"===b||this.callSuper(b)}})})(myt);
(r=>{const w=JS.Class,v=r.RadialGuage=new w("RadialGuage",r.View,{include:[r.BoundedValueComponent],initNode:function(t,h){h.radius??(h.radius=32);h.thickness??(h.thickness=4);h.startAngle??(h.startAngle=270);h.color??(h.color="#666");const d=h.fontSize??h.radius;this.quickSet(["radius","thickness","startAngle","color"],h);const e=this.thickness,m=this.radius;h.width=h.height=2*m;h.minValue??(h.minValue=0);h.maxValue??(h.maxValue=100);h.value??(h.value=0);h.bgColor??(h.bgColor="#fff");h.roundedCorners=
m+e;h.borderWidth??(h.borderWidth=e);h.borderStyle??(h.borderStyle="solid");h.borderColor??(h.borderColor="#ccc");this.callSuper(t,h);this._progressView=new r.Annulus(this,{x:-e,y:-e,radius:m,thickness:e,startAngle:this.startAngle});this._valueView=new r.Text(this,{fontSize:d+"px",align:"center",valign:"middle"});this.redraw()},setMinValue:function(t){this.callSuper(t);this.inited&&this.redraw()},setMaxValue:function(t){this.callSuper(t);this.inited&&this.redraw()},setValue:function(t){this.callSuper(t);
this.inited&&this.redraw()},redraw:function(){const t=this._progressView,h=this._valueView,d=this.value,e=d/(this.maxValue-this.minValue),m=this.getColorByValue(d,e);t.setEndAngle(this.startAngle+360*e);t.setColor(m);h.setText(this.getTextByValue(d));h.setTextColor(m);this.setTooltip(this.getTooltipByValue(d))},getColorByValue:function(t,h){return this.color},getTooltipByValue:function(t){return this.getTextByValue(t)},getTextByValue:function(t){return""+t}});r.ColorThresholdRadialGuage=new w("ColorThresholdRadialGuage",
v,{initNode:function(t,h){h.thresholdType??(h.thresholdType="percent");h.thresholds??(h.thresholds=[]);this.quickSet(["thresholdType","thresholds"],h);this.thresholds.sort((d,e)=>e.value-d.value);this.callSuper(t,h)},getColorByValue:function(t,h){const d="percent"===this.thresholdType?h:t;for(const e of this.thresholds)if(d>=e.value)return e.color;return this.callSuper(t,h)}})})(myt);
(r=>{let w;var v=JS.Class;const {global:{mouse:t,windowResize:h,dragManager:d},theme:e}=r,{min:m,max:k,round:a}=Math,f=c=>{if(c.tooltip){const q=c._lastPos;if(c.tooltip.parent.containsPoint(q.x,q.y))return!0}c.hideTip();return!1},b=r.BaseTooltip=new v("BaseTooltip",r.View,{include:[r.RootView],initNode:function(c,q){this.tipDelay=this.nextTipDelay=e.BaseTooltipDelay;this.tipHideDelay=e.BaseTooltipHideDelay;q.visible??(q.visible=!1);this.callSuper(c,q)},setTooltip:function(c){this.inited&&(this.tooltip=
c)&&(this.attachToDom(t,"__hndl_mousemove","mousemove",!0),this.attachToDom(c.parent,"hideTip","mousedown",!0),this.attachToDom(c.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(c){const q=this;q._lastPos=r.MouseObservable.getMouseFromEvent(c);f(q)&&(q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID),q.__checkTID=setTimeout(()=>{delete q.__checkTID;f(q)&&q.showTip()},q.nextTipDelay))},hideTip:function(c){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(c=this.tooltip?.parent)this.detachFromDom(c,"hideTip","mousedown",!0),this.detachFromDom(c,"hideTip","mouseup",!0),this.detachFromDom(t,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){d.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}});v=r.Tooltip=new v("Tooltip",b,{initNode:function(c,q){q.edgeSize??(q.edgeSize=e.TooltipEdgeSize);q.edgeColor??(q.edgeColor=e.TooltipEdgeColor);q.shadowSize??
(q.shadowSize=e.TooltipShadowSize);q.shadowColor??(q.shadowColor=e.TooltipShadowColor);q.insetH??(q.insetH=e.TooltipHInset);q.insetV??(q.insetV=e.TooltipVInset);q.tipBgColor??(q.tipBgColor=e.TooltipBgColor);q.tipTextColor??(q.tipTextColor=e.TooltipTextColor);this.callSuper(c,q);this._tipText=new r.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},setEdgeSize:function(c){this.edgeSize=c},setEdgeColor:function(c){this.edgeColor=c},setShadowSize:function(c){this.shadowSize=
c},setShadowColor:function(c){this.shadowColor=c},setInsetH:function(c){this.insetH=c},setInsetV:function(c){this.insetV=c},setTipBgColor:function(c){this.tipBgColor=c},setTipTextColor:function(c){this.tipTextColor=c},showTip:function(){const c=this.tooltip;var q=c.text;const x=c.parent;var u=this._tipText;const n=this.edgeSize,A=this.shadowSize;u.text!==q&&u.setText(q);u.setWidth("auto");var J=m(u.measureNoWrapWidth(),c.maxTextWidth);q=J+2*u.x;const z=q+2*n;u.setWidth(J);u.sizeViewToDom();J=x.getPagePosition();
u=u.height+2*u.y;const C=u+2*n,I=J.y-C+("below"===c.tipvalign?x.height+C:0);J=J.x;switch(c.tipalign){case "right":J-=z;case "farright":J+=x.width;break;case "farleft":J-=z}this.setX(a(m(k(J,0),h.getWidth()-z)));this.setY(a(m(k(I,0),h.getHeight()-C)));this.setWidth(q);this.setHeight(u);this.setBgColor(this.tipBgColor);this.setBorder([n,"solid",this.edgeColor]);this.setBoxShadow([A,A,A,this.shadowColor]);this.callSuper()}});const g=r.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:v,MAX_TEXT_WIDTH:280},
setTooltip:function(c){this.callSuper("");this.set("tooltip",c,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(c){this.set("tipAlign",c,!0)},setTipValign:function(c){this.set("tipValign",c,!0)},setMaxTextWidth:function(c){this.set("maxTextWidth",c,!0)},setTipClass:function(c){this.set("tipClass",c,!0)},doSmoothMouseOver:function(c){const q=this.getTooltip();this.callSuper(c);if(c&&q){c=this.tipClass??g.TIP_CLASS;!w||w instanceof c||(w.destroy(),w=null);if(!w){let x=document.getElementById("tooltipDiv");
x||(x=r.DomElementProxy.createElement("div",{position:"absolute"}),r.getElement().appendChild(x));w=new c(x,{domId:"tooltipDiv"})}w.setTooltip({parent:this,text:q,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||g.MAX_TEXT_WIDTH})}}})})(myt);
(r=>{const w=Math,{min:v,max:t}=w;r.Path=new JS.Class("Path",{initialize:function(h){this.setVectors(h??[])},setVectors:function(h){this._boundingBox=null;this.vectors=h},copyFrom:function(h){this.vectors=h.vectors.slice();this._boundingBox=null},drawInto:function(h){h.beginPath();const d=this.vectors;let e=d.length,m=0;for(h.moveTo(d[m++],d[m++]);e>m;)h.lineTo(d[m++],d[m++]);h.closePath()},translate:function(h,d){const e=this.vectors;let m=e.length;for(;m;)e[--m]+=d,e[--m]+=h;this._boundingBox=null},
scale:function(h){const d=this.vectors;let e=d.length;for(;e;)d[--e]*=h,d[--e]*=h;this._boundingBox=null},rotate:function(h){const d=w.cos(h);h=w.sin(h);const e=this.vectors,m=e.length;for(let k=0;m>k;){const a=e[k]*d-e[k+1]*h,f=e[k]*h+e[k+1]*d;e[k++]=a;e[k++]=f}this._boundingBox=null},rotateAroundOrigin:function(h,d,e){this.translate(-d,-e);this.rotate(h);this.translate(d,e)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const h=this.vectors;let d=h.length,e,m,k,a;if(2<=
d){k=a=h[--d];for(e=m=h[--d];d;){const f=h[--d],b=h[--d];k=v(f,k);a=t(f,a);e=v(b,e);m=t(b,m)}return this._boundingBox={x:e,y:k,width:m-e,height:a-k}}return this._boundingBox=null},getCenter:function(){const h=this.getBoundingBox();return h?{x:h.x+h.width/2,y:h.y+h.height/2}:null},isPointInPath:function(h,d){"object"===typeof h&&(d=h.y,h=h.x);return r.Geometry.isPointInPath(h,d,this.getBoundingBox(),this.vectors)}})})(myt);
(r=>{const w=console.warn,v=Math.PI,t=v/2,h=3*v/2,d=r.AccessorSupport,e={};for(const m of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))e[m]=function(...k){this.__ctx[m](...k)};for(const m of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])e[m]=
function(...k){return this.__ctx[m](...k)};for(const m of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))e[d.generateSetterName(m)]=function(k){this.__ctx[m]=k},e[d.generateGetterName(m)]=function(){return this.__ctx[m]};r.Canvas=new JS.Class("Canvas",r.BackView,{include:[e],initNode:function(m,k){this.quickSet(["willReadFrequently"],k);this.callSuper(m,k)},
createOurDomElement:function(m){m=this.callSuper(m);var k=Array.isArray(m)?m[1]:m;const a=this.__cvs=document.createElement("canvas");a.className="mytUnselectable";k.appendChild(a);a.style.position="absolute";k={};this.willReadFrequently&&(k.willReadFrequently=!0);this.__ctx=a.getContext("2d",k);return m},setWidth:function(m){0>m&&(m=0);this.__cvs.setAttribute("width",m);this.callSuper(m)},setHeight:function(m){0>m&&(m=0);this.__cvs.setAttribute("height",m);this.callSuper(m)},clear:function(){const m=
this.__ctx;m.save();m.setTransform(1,0,0,1,0,0);m.clearRect(0,0,this.width,this.height);m.restore()},dataURItoBlob:function(m,k){m=atob(m.split(",")[1]);const a=m.length,f=[];for(let b=0;b<a;)f.push(m.charCodeAt(b++));return new Blob([new Uint8Array(f)],{type:k})},getDataURL:function(m,k){return this.__cvs.toDataURL(m,k)},getImageFile:function(m,k,a){switch(m){case "png":case "PNG":m="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":m="jpeg";a??=.5;break;default:w("Unexpected image type",
m),m=m.toLowerCase()}const f="image/"+m;a=this.dataURItoBlob(this.getDataURL(f,a),f);k&&(a.name=k+"."+m);return a},circle:function(m,k,a){this.__ctx.arc(m,k,a,0,2*v)},drawRoundedRect:function(m,k,a,f,b,g){const c=this.lineTo.bind(this),q=this.arc.bind(this);g=f+g;b=a+b;this.beginPath();this.moveTo(a,f+m);c(a,g-m);q(a+m,g-m,m,v,t,!0);c(b-m,g);q(b-m,g-m,m,t,0,!0);c(b,f+m);q(b-m,f+m,m,0,h,!0);c(a+m,f);q(a+m,f+m,m,h,v,!0);this.closePath();0<k&&(m-=k,a+=k,b-=k,f+=k,g-=k,this.moveTo(a,f+m),q(a+m,f+m,m,
v,h),c(b-m,f),q(b-m,f+m,m,h,0),c(b,g-m),q(b-m,g-m,m,0,t),c(a+m,g),q(a+m,g-m,m,t,v),this.closePath());return this},drawRectOutline:function(m,k,a,f,b){b=a+b;f=k+f;const g=k+m,c=f-m,q=a+m;m=b-m;const x=this.lineTo.bind(this);this.beginPath();this.moveTo(k,a);x(k,b);x(f,b);x(f,a);x(k,a);x(g,q);x(c,q);x(c,m);x(g,m);x(g,q);this.closePath();return this},drawPartiallyRoundedRect:function(m,k,a,f,b,g,c,q){q=g+q;c=b+c;const x=this.lineTo.bind(this),u=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(b,
g+m);x(b,q-a);0<a&&u(b,q,b+a,q);x(c-f,q);0<f&&u(c,q,c,q-f);x(c,g+k);0<k&&u(c,g,c-k,g);x(b+m,g);0<m&&u(b,g,b,g+m);this.closePath();return this},drawAnnulus:function(m,k,a,f,b,g,c,q=60){const x=r.Color;for(var u of c)"string"===typeof u.color&&(u.color=x.makeColorFromHexString(u.color));1>q&&(w("Invalid segements",q),q=60);q=v/q;u=0;for(var n=c.length-1;u<n;){var A=c[u++];const {angle:y,color:B}=A,{angle:D,color:F}=c[u];var J=Math.round((D-y)/q),z=B.getDiffFrom(F);A.colorDelta={red:z.red/J,green:z.green/
J,blue:z.blue/J}}a=new r.Path([m+a,k,m+f,k]);a.rotateAroundOrigin(b,m,k);f=a.vectors;let [C,I,M,O]=f,l=0,p=v/360;for(u=0;g>b;){J=C;z=I;n=M;A=O;b+=q;b>g&&(q+=g-b,p=0,b=g);a.rotateAroundOrigin(q+p,m,k);[C,I,M,O]=f;this.beginPath();this.moveTo(J,z);this.lineTo(n,A);this.lineTo(M,O);this.lineTo(C,I);this.closePath();const {color:y,colorDelta:B}=c[u];this.setFillStyle(x.rgbToHex(y.red+l*B.red,y.green+l*B.green,y.blue+l*B.blue,!0));this.fill();0<p&&(a.rotateAroundOrigin(-p,m,k),[C,I,M,O]=f);l++;b>=c[u+
1].angle&&(l=0,u++)}return this}})})(myt);
(r=>{const {Class:w,Module:v}=JS,{View:t,Text:h,FontAwesome:{makeTag:d}}=r;r.GrowlManager=new w("GrowlManager",t,{include:[r.SizeToWindowHeight],initNode:function(f,b){const g=this;b.overflow??(b.overflow="autoy");b.margin??(b.margin=8);b.spacing??(b.spacing=4);b.reverse??(b.reverse=!0);b.width??(b.width=300);b.visible??(b.visible=!1);b.pointerEvents??(b.pointerEvents="none");b.moveDuration??(b.moveDuration=300);b.dedupe??(b.dedupe=!0);b.simpleGrowlClass??(b.simpleGrowlClass=r.SimpleGrowl);g.quickSet(["moveDuration",
"dedupe"],b);g.callSuper(f,b);g.doAlignment();const c=g.moveDuration;new r.SpacedLayout(g,{axis:"y",reverse:g.reverse,spacing:g.spacing},[{updateParent:function(q,x){0<c?(g.stopActiveAnimators("height"),g.animate({attribute:"height",to:x+this.outset-this.spacing,duration:c})):this.callSuper(q,x)},updateSubview:function(q,x,u,n){return 0<c?(x.stopActiveAnimators("y"),x.animate({attribute:"y",to:n,duration:c}),n+x.height+this.spacing):this.callSuper(q,x,u,n)}}])},setHeight:function(f){this.callSuper(f-
2*this.margin)},setVisible:function(f){this.visible!==f&&(this.visible=f,this.getODS().display=f?"block":"none",this.inited&&this.fireEvent("visible",f))},setMargin:function(f){this.set("margin",f,!0);this.getODS().margin=f+"px"},setSpacing:function(f){this.set("spacing",f,!0)},setReverse:function(f){this.set("reverse",f,!0)},doAlignment:function(){const f=this.getODS();f.left=null;f.right="0px"},notifyChanged:function(){this.setVisible(0<this.getSubviews().length)},subviewAdded:function(f){this.callSuper(f);
this.notifyChanged()},subviewRemoved:function(f){this.callSuper(f);this.notifyChanged()},addGrowl:function(f){if(this.dedupe){const b=f.getHash(),g=this.getSubviews();let c=g.length;for(;c;){const q=g[--c];if(q!==f&&q.getHash?.()===b){this.removeGrowl(q);break}}}f.setVisible(!0)},removeGrowl:function(f){f.destroy()},addSimpleGrowl:function(f,b){this.addGrowl(new this.simpleGrowlClass(this,{text:f,...(b??{})}))}});r.KeepShowingMixin=new v("KeepShowingMixin",{include:[r.MouseOver],initNode:function(f,
b){b.initialKeepDuration??(b.initialKeepDuration=-1);b.keepDuration??(b.keepDuration=-1);this.quickSet(["initialKeepDuration","keepDuration"],b);this.callSuper(f,b);f=this.initialKeepDuration;0<=f&&this.keepShowing(!1,f)},keepShowing:function(f,b){const g=this;b??=g.keepDuration;(g.__keepShowing=f)&&g.__timerIdKS&&clearTimeout(g.__timerIdKS);0<=b&&!f&&(g.__timerIdKS=setTimeout(()=>{("function"===typeof g.isShown?g.isShown():g.visible)&&!g.__keepShowing&&("function"===typeof g.hide?g.hide(!0):g.setVisible(!1))},
b))},doMouseOver:function(f){this.keepShowing(!0);this.callSuper(f)},doMouseOut:function(f){this.keepShowing(!1);this.callSuper(f)}});r.KeepShowingChildMixin=new v("KeepShowingChildMixin",{doMouseOver:function(f){this.callSuper(f);return!0},doMouseOut:function(f){this.callSuper(f);return!0}});r.GrowlMixin=new v("GrowlMixin",{include:[r.SizeToParent,r.KeepShowingMixin],initNode:function(f,b){b.percentOfParentWidth??(b.percentOfParentWidth=100);b.pointerEvents??(b.pointerEvents="auto");b.overflow??
(b.overflow="hidden");b.bgColor??(b.bgColor="#fff");b.roundedCorners??(b.roundedCorners=3);b.boxShadow??(b.boxShadow=[0,0,8,"#00000088"]);b.initialKeepDuration??(b.initialKeepDuration=5E3);b.keepDuration??(b.keepDuration=1E3);b.showDuration??(b.showDuration=300);b.hideDuration??(b.hideDuration=300);this.quickSet(["showDuration","hideDuration"],b);b.opacity=0;b.visible=!1;this.callSuper(f,b)},setVisible:function(f){const b=this;b.inited?(b.stopActiveAnimators("opacity"),f?(b.animate({attribute:"opacity",
to:1,duration:b.showDuration}),b.callSuper(f)):b.animate({attribute:"opacity",to:0,duration:b.hideDuration}).next(g=>{b.parent.removeGrowl(b)})):b.callSuper(f)},getHash:function(){return this.hash??(this.hash=r.hash(this.getHashableString()))},getHashableString:()=>""+r.generateGuid()});const e=d(["times"]),m=d(["clipboard-check"]),k="maxHeight icon iconSize text padding spacing whiteSpace showCloseButton closeIcon closeOnly showCopyButton copyIcon activeColor hoverColor readyColor".split(" "),a=
new w("LocalTxtBtn",r.TextButton,{include:[r.KeepShowingChildMixin],initNode:function(f,b){b.width??(b.width=24);b.height??(b.height=24);b.paddingTop??(b.paddingTop=4);b.activeColor??(b.activeColor="#ccc");b.hoverColor??(b.hoverColor="#ddd");b.readyColor??(b.readyColor="#eee");this.callSuper(f,b)}});r.SimpleGrowl=new w("SimpleGrowl",t,{include:[r.GrowlMixin],initNode:function(f,b){const g={};b.maxHeight??(b.maxHeight=100);b.spacing??(b.spacing=6);b.padding??(b.padding=12);b.whiteSpace??(b.whiteSpace=
"normal");b.iconSize??(b.iconSize="24px");b.showCloseButton??(b.showCloseButton=!1);b.showCloseButton&&(b.closeIcon??(b.closeIcon=e),b.closeOnly??(b.closeOnly=!1));b.showCopyButton??(b.showCopyButton=!1);b.showCopyButton&&(b.copyIcon??(b.copyIcon=m));for(const u of k)g[u]=b[u],delete b[u];g.closeOnly&&(b.initialKeepDuration=b.keepDuration=-1);this.callSuper(f,b);const {maxHeight:c,padding:q,icon:x}=g;x&&(this.iconTxt=new h(this,{y:q,text:x,fontSize:g.iconSize}));f=this.msgTxt=new h(this,{y:q,text:g.text,
whiteSpace:g.whiteSpace,layoutHint:1});0<c&&(f.setOverflow("autoy"),f.getIDS().maxHeight=c+"px");g.showCopyButton&&(this.copyBtn=this.makeCopyButton(g),f.setUserUnselectable(!1));g.showCloseButton&&(this.closeBtn=this.makeCloseButton(g));new r.ResizeLayout(this,{inset:q,spacing:g.spacing,outset:q});new r.SizeToChildren(this,{axis:"y",paddingY:q})},makeCloseButton:function(f){const b=this;new a(b,{y:f.padding,text:f.closeIcon,tooltip:"Dismiss this notification.",activeColor:f.activeColor,hoverColor:f.hoverColor,
readyColor:f.readyColor},[{doActivated:()=>{b.parent.removeGrowl(b)}}])},makeCopyButton:function(f){const b=this;new a(b,{y:f.padding,text:f.copyIcon,tooltip:"Copy to system clipboard.",activeColor:f.activeColor,hoverColor:f.hoverColor,readyColor:f.readyColor},[{doActivated:()=>{global.isSecureContext?navigator.clipboard.writeText(r.removeMarkup(b.msgTxt.text,{brToLineFeed:!0})):console.warn("access to clipboard blocked because of insecure context.")}}])},getHashableString:function(){return this.iconTxt?.text+
" | "+this.msgTxt.text}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
