(t=>{let x;var w=d=>{let k=d.length;for(;k;){const h=d[--k];x=h.ver??h.id;if(h.str?.includes(h.sub)||h.prop)return h.id}};var u=d=>{const k=d.indexOf(x);if(0<=k)return parseFloat(d.slice(k+x.length+1))};const m=navigator.userAgent,a=navigator.platform;u=t.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:m,sub:"Firefox",id:"Firefox"},{str:m,sub:"Chrome",id:"Chrome"},{str:m,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:u(m)||u(navigator.appVersion)||"UNKNOWN",os:w([{str:m,sub:"iPhone",id:"iPhone/iPod"},{str:a,sub:"Linux",id:"Linux"},{str:a,sub:"Mac",id:"Mac"},{str:a,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(u.browser){case "Chrome":case "Safari":t="WebKit";break;case "Explorer":t="MS";break;case "Firefox":t="Moz";break;case "Opera":t="O";break;default:t="UNKNOWN"}w=t.toLowerCase();u.prefix={dom:t,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:t,floor:x,ceil:w}=Math,u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),k=b=>(10>b?"0":"")+b,h=(b,g)=>{b=b.getTimezoneOffset();return(0<b?"-":"+")+k(x(t(b/60)))+(g?":":"")+(0==t(b%60)?"00":k(t(b%60)))},f={d:b=>
k(b.getDate()),D:b=>a[b.getDay()],j:b=>b.getDate(),l:b=>d[b.getDay()],N:b=>0==b.getDay()?7:b.getDay(),S:b=>{b=b.getDate();return 1==b%10&&11!=b?"st":2==b%10&&12!=b?"nd":3==b%10&&13!=b?"rd":"th"},w:b=>b.getDay(),z:b=>{const g=new Date(b.getFullYear(),0,1);return w((b-g)/864E5)},W:b=>{const g=new Date(b.valueOf());b=(b.getDay()+6)%7;g.setDate(g.getDate()-b+3);b=g.valueOf();g.setMonth(0,1);4!==g.getDay()&&g.setMonth(0,1+(4-g.getDay()+7)%7);return k(1+w((b-g)/6048E5))},F:b=>m[b.getMonth()],m:b=>k(b.getMonth()+
1),M:b=>u[b.getMonth()],n:b=>b.getMonth()+1,t:b=>{let g=b.getFullYear();b=b.getMonth()+1;12===b&&(g=g++,b=0);return(new Date(g,b,0)).getDate()},L:b=>{b=b.getFullYear();return 0==b%400||0!=b%100&&0==b%4},o:b=>{const g=new Date(b.valueOf());g.setDate(g.getDate()-(b.getDay()+6)%7+3);return g.getFullYear()},Y:b=>b.getFullYear(),y:b=>(""+b.getFullYear()).substr(2),a:b=>12>b.getHours()?"am":"pm",A:b=>12>b.getHours()?"AM":"PM",B:b=>x(1E3*((b.getUTCHours()+1)%24+b.getUTCMinutes()/60+b.getUTCSeconds()/3600)/
24),g:b=>b.getHours()%12||12,G:b=>b.getHours(),h:b=>k(b.getHours()%12||12),H:b=>k(b.getHours()),i:b=>k(b.getMinutes()),s:b=>k(b.getSeconds()),e:b=>/\((.*)\)/.exec((new Date).toString())[1],I:b=>{let g=null,e=0;for(;12>e;){const c=(new Date(b.getFullYear(),e++,1)).getTimezoneOffset();if(null===g)g=c;else if(c<g){g=c;break}else if(c>g)break}return b.getTimezoneOffset()==g|0},O:b=>h(b,!1),P:b=>h(b,!0),T:b=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:b=>60*-b.getTimezoneOffset(),c:b=>b.format("Y-m-d\\TH:i:sP"),
r:b=>b.toString(),U:b=>b.getTime()/1E3};return function(b){return b.replace(/(\\?)(.)/g,(g,e,c)=>""===e&&f[c]?f[c](this):c)}})();
(t=>{const x=(e,c)=>{var q=e.__mct__.get(c);if(q)return q.slice();const n=[];if(q=e.__anc__){const p=q.length;for(let r=0;r<p;){const z=q[r++].__fns__;z.has(c)&&n.push(z.get(c))}}else{const p=e.__anc__=[],r=z=>{const D=z.__inc__,I=D.length;for(let K=0;K<I;)r(D[K++]);p.includes(z)||(p.push(z),z=z.__fns__,z.has(c)&&n.push(z.get(c)))};r(e)}e.__mct__.set(c,n.slice());return n},w=(e,c)=>{const q=e.callable;return e.__hs?function(...n){const p=this.callSuper,r=x(c,e.name);let z=r.length-1;if(0===z)p&&delete this.callSuper;
else{const I=n.length,K=this.callSuper=(...J)=>{for(let M=J.length;M<I;)J[M]=n[M++];0===--z&&delete this.callSuper;J=r[z].callable.call(this,...J);this.callSuper=K;z++;return J}}const D=q.call(this,...n);p?this.callSuper=p:delete this.callSuper;return D}:q},u=(e,c)=>{c=c??e;if(c===e){e.__anc__=null;e.__mct__=new Map;var q=e.__dep__;for(var n=q.length;0<n;)u(q[--n])}q=c.__tgt__;n=e.__inc__;const p=n.length;for(let r=0;r<p;)u(n[r++],c);for(const [r,z]of e.__fns__)e=z instanceof d?w(z,c):z,q[r]!==e&&
(q[r]=e)},m=e=>e.__meta__??(e.__meta__=new k(null,null,e)).include(e.klass,!0),a=e=>{const c=function(...q){return this.initialize(...q)??this};c.prototype=Object.create(e.prototype);return c},d=a(Object),k=t.Module=a(Object);d.prototype.initialize=function(e,c,q){this.module=e;this.name=c;this.callable=q;this.__hs=q.toString().includes("callSuper")};var h=k.prototype;h.initialize=function(e,c,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;e&&(this.__displayName=
e);this.include(c,!0)};h.include=function(e,c){if(e){if(e.__fns__)this.__inc__.push(e),e.__dep__.push(this);else{var q=e.extend,n=e.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(n&&(n.__fns__||"function"!==typeof n)){q=n.length;for(let p=0;p<q;)this.include(n[p++],!0)}for(const p of Object.keys(e))n=e[p],("extend"!==p&&"include"!==p||!n.__fns__&&"function"===typeof n)&&this.__fns__.set(p,n?.__fns__||"function"!==typeof n?n:new d(this,p,n))}!0!==c&&u(this)}return this};h.includes=
function(e){if(e===this)return!0;const c=this.__inc__,q=c.length;for(let n=0;n<q;)if(c[n++].includes(e))return!0;return!1};h.instanceMethod=function(e){return x(this,e).pop()};const f=new k("Kernel",{extend:function(e){m(this).include(e)},isA:function(e){return"function"===typeof e&&this instanceof e||m(this).includes(e)}}),b=t.Class=a(k),g=b.prototype;g.initialize=function(e,c,q){"function"!==typeof c&&(q=c,c=Object);k.prototype.initialize.call(this,e);e=a(c);for(const n in this)e[n]===this[n]||
e.hasOwnProperty(n)||(e[n]=this[n]);e.prototype.constructor=e.prototype.klass=e;m(e).include(c.__meta__);e.__tgt__=e.prototype;c=c===Object?{}:c.__fns__?c:new k(c.prototype,!0);e.include(f,!0).include(c,!0).include(q,!0);u(e);return e};h=(e,c)=>{e.__inc__=[];e.__dep__=[];const q=e.__tgt__=e.prototype,n=e.__fns__=new Map;for(const D of Object.keys(q)){var p=n,r=p.set;var z=q[D];z=z?.__fns__||"function"!==typeof z?z:new d(e,D,z);r.call(p,D,z)}q.constructor=q.klass=e;for(const D in g)e[D]===g[D]||e.hasOwnProperty(D)||
(e[D]=g[D]);e.include(c);e.constructor=e.klass=b};h(d,f);h(k,f);h(b,k);u(m(d));u(m(k));m(b).include(k.__meta__);t.Singleton=new b("Singleton",{initialize:(e,c,q)=>new (new b(e,c,q))})})(global.JS={});
(t=>{class x extends Error{constructor(l,v,...A){super(...A);this.name="FetchError";this.status=l;this.url=v}}let w=0,u;const m=console.warn,a=Math,{abs:d,min:k,max:h,pow:f}=a,b=Array.isArray,g=document,e=g.head,c=g.createElement.bind(g),q={},n={"":!0},p=g.fonts,r=l=>{var v=l.family.split('"').join("");for(const A of[v,v+" "+l.weight])if(!n[A])for(n[A]=!0,v=q[A]??[];v.length;)(l=v.pop())&&!l.destroyed&&l.sizeViewToDom()},z={},D=l=>{const v={};return(...A)=>{const B=JSON.stringify(A);return B in v?
v[B]:v[B]=l(...A)}},I=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,K=/\$(\d+)/g,J=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,M=/[\\"](.)/g,y=t.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:l=>l.split("").reduce((v,A)=>{v=(v<<5)-v+A.charCodeAt(0);return v&v},0),addEventListener:(l,v,A,B,E)=>{l.addEventListener(v,A,{capture:B||!1,passive:E||!1})},removeEventListener:(l,v,A,B)=>{l.removeEventListener(v,A,B||!1)},resolveName:(l,v)=>{if(l&&0!==l.length){v=v??global;var A=b(l)?l:l.split("."),
B=A.length;for(let E=0;E<B;E++)if(v=v[A[E]],null==v){m("resolveName failed for",l,"at part",E,A[E]);return}return v}},resolveClassname:l=>{"string"===typeof l&&(l=y.resolveName(l));return l&&"function"===typeof l.isA&&l.isA(JS.Class)?l:null},getExtension:l=>l?(l=l.split("."),1<l.length?l.pop():null):null,loadScript:function(l,v,A){const B=this._loadedScripts??(this._loadedScripts={});if(B[l])return m("script already loaded for src",l),null;B[l]=!0;const E=c("script");E.type="text/javascript";E.async=
!1;if(v){let H=!1;E.onload=E.onreadystatechange=()=>{H||E.readyState&&"complete"!==E.readyState||(H=!0,E.onload=E.onreadystatechange=null,v())}}E.src=l+(A?"":(l.includes("?")?"&":"?")+"cacheBust="+Date.now());e.appendChild(E);return E},dumpStack:(l,v)=>{let A;"string"===typeof l&&(A=l,l=null);y.global.error.notify(v||"error",null,A,l)},getRandom:l=>{const v=a.random();return l?h(0,k(l(v),.9999999999)):v},getRandomArbitrary:(l,v,A)=>{const B=k(l,v);return y.getRandom(A)*(h(l,v)-B)+B},getRandomInt:(l,
v,A)=>{const B=k(l,v);return a.floor(y.getRandom(A)*(h(l,v)-B+1)+B)},areFloatsEqual:(l,v,A)=>{const B=d(l),E=d(v);return d(l-v)<=(B>E?E:B)*(null==A?1E-6:d(A))},areArraysEqual:(l,v)=>{if(l!==v){if(null==l||null==v)return!1;let A=l.length;if(A!==v.length)return!1;for(;A;)if(l[--A]!==v[A])return!1}return!0},areObjectsEqual:(l,v)=>{if(l!==v){if(null==l||null==v)return!1;for(const A in l)if(l[A]!==v[A])return!1;for(const A in v)if(l[A]!==v[A])return!1}return!0},getElement:(l,v)=>g.getElementsByTagName(l||
"body")[0<v?v:0],loadFontFaces:(l,v)=>{const A=[];for(const B of l)l=new FontFace(B.family,"url("+B.url+")",B.options),A.push(l.load());Promise.all(A).then(B=>{for(const E of B)p.add(E),r(E);v?.(B)})},loadFontFace:(l,v,A={},B)=>{l=new FontFace(l,"url("+v+")",A);l.loaded.then(E=>{p.add(E);r(E);B?.(E)});l.load()},registerForFontNotification:(l,v)=>{n[v]?l&&!l.destroyed&&l.sizeViewToDom():(q[v]??(q[v]=[])).push(l)},createBaseFontCSSRule:l=>{y.addCSSRule(y.createStylesheet(),"body, input","font-family:"+
l,0)},loadCSSFonts:l=>{l?.forEach(y.createStylesheetLink)},createStylesheetLink:l=>{const v=c("link");v.rel="stylesheet";l&&(v.href=l);e.appendChild(v);return v},createStylesheet:()=>{const l=c("style");e.appendChild(l);return l.sheet},addCSSRule:(l,v,A,B)=>{l.insertRule(v+"{"+A+"}",B)},removeCSSRules:l=>{let v=l.cssRules.length;for(;v;)l.deleteRule(--v)},createInputPlaceholderCSSRule:(l,v,A,B=1)=>{let E=l.__sheet;E?y.removeCSSRules(E):E=l.__sheet=y.createStylesheet();l=l.getODE();l=l.id||(l.id="id"+
++w);const H=[];v&&H.push("color:"+v);A&&H.push("font-family:"+A);B&&H.push("opacity:"+B);y.addCSSRule(E,"#"+l+"::placeholder",H.join("; "),0)},isNotSorted:(l,v)=>{const A=l.length;for(let B=1;B<A;B++)if(0<v(l[B-1],l[B]))return!0},chainSortFunc:(...l)=>(v,A)=>{for(const B of l){const E=B(v,A);if(0!==E)return E}return 0},getAlphaObjSortFunc:D((l,v,A,B)=>{const E=v?1:-1;return(H,L)=>{H=H[l];L=L[l];B?("string"!==typeof H&&(H=""+H),"string"!==typeof L&&(L=""+L)):(H=H||"",L=L||"");A&&(H=H.toLowerCase(),
L=L.toLowerCase());return H.localeCompare(L)*E}}),getNumericObjSortFunc:D((l,v)=>{const A=v?1:-1;return(B,E)=>{B=B[l]||0;E=E[l]||0;return(B-E)*A}}),csvStringToArray:(l,v)=>{if(!l)return[];const A=[[]];let B;for(;B=J.exec(l);)B[1].length&&","!==B[1]&&A.push([]),A[A.length-1].push(B[2]?B[2].replace(M,"$1"):B[3]);if(v){const E=A.shift();return A.map(H=>{let L=0;return E.reduce((Q,R)=>{Q[R]=H[L++];return Q},{})})}return A},prepareCSVDataURI:(l,v)=>{const A=H=>{if(H&&b(H)){const L=[],Q=H.length;for(let R=
0,T;Q>R;R++)T=H[R],T=null==T?"":T.toString(),T=T.replace(/"/g,'""'),0<=T.search(/("|,|\n)/g)&&(T='"'+T+'"'),L.push(T);return L.join(",")}m("Unexpected row",H);return null},B=[];if(v){var E=A(v);E&&B.push(E)}if(l)if(b(l)){E=l.length;for(let H=0;E>H;H++){const L=A(l[H]);L&&B.push(L)}}else m("Rows were not an array");return y.encodeCSVDataURI(B.join("\r\n"),v)},encodeCSVDataURI:(l,v)=>"data:text/csv;charset=utf-8"+(null==v?"":";header="+(v?"present":"absent"))+","+encodeURIComponent(l),dataURIToBlob:l=>
{var v=l.indexOf(",");const A=l.slice(0,v).split(":")[1].split(";")[0];l=l.slice(v+1);if(A.startsWith("text/"))l=decodeURIComponent(l);else{l=atob(l);v=l.length;const B=new Uint8Array(v);for(;v;)B[--v]=l.charCodeAt(v);l=B}return new Blob([l],{type:A})},formatAsPercentage:(l,v=2)=>{switch(typeof l){case "number":return v=k(16,h(0,v)),l=a.round(h(0,k(1,l))*f(10,2+v))/f(10,v),(0===l%1?l:l.toFixed(v))+"%";case "string":return l;default:return m("formatAsPercentage: expects a number"),l}},memoize:D,debounce:(l,
v,A)=>{const B="__DBTO_"+ ++w;return function(){const E=this,H=E[B],L=arguments,Q=A&&!H;clearTimeout(H);E[B]=setTimeout(function(){E[B]=null;A||l.apply(E,L)},v);Q&&l.apply(E,L)}},createFixedThresholdCounter:(l,v,A,B)=>{var E=y.AccessorSupport.generateName;const H="function"===typeof l||l instanceof JS.Module,L={};B=B||E("counter",A);const Q=E(B,"increment");E=E(B,"decrement");if(void 0!==(H?l.instanceMethod(Q):l[Q]))return m("Increment: Abort clobber",Q,l),!1;if(void 0!==(H?l.instanceMethod(E):l[E]))return m("Decrement: Abort clobber",
E,l),!1;L[Q]=function(){const R=this[B]+1;this[B]=R;this.fireEvent(B,R);R===v&&this.set(A,!0)};L[E]=function(){const R=this[B];if(0!==R){var T=R-1;this[B]=T;this.fireEvent(B,T);R===v&&this.set(A,!1)}};l[H?"include":"extend"](L);return!0},makeURLSearchParams:(l={})=>{const v=new URLSearchParams;for(const A in l){const B=l[A];void 0!==B&&v.set(A,B)}return v},doFetch:(l,v,A,B,E,H)=>fetch(l,v).then(L=>{if(!L.ok)throw new x(L.status,l,L.statusText);return L}).then(L=>A?L.text():L.json()).then(L=>{if(B)try{if(A)B(L);
else{if(!1===L.success)throw new x(200,l,L.message);B(L.data)}}catch(Q){throw L=new x(200,l,Q.message),L.stack=Q.stack,L;}}).catch(L=>{if(E){if("FetchError"!==L.name){const Q=new x(0,l,L.message);Q.stack=L.stack;L=Q}E(L)}}).finally(()=>{H?.()}),I18N:{setLocale:l=>{u=l},getLocale:()=>u,addDictionary:(l,v)=>{z[v]=Object.assign(z[v]??{},l)},setDictionary:(l,v)=>{z[v]=l??{}},get:(l,...v)=>{var A=u??=(navigator.language??"en").split("-")[0].toLowerCase();A=(z[A]??z.en??{})[l];return null!=A?0<v.length?
A.replaceAll(I,(B,E,H,L)=>H&&L?1==v[parseInt(E)]?H:L:"").replaceAll(K,(B,E)=>v[E]):A:l}}};p.onloadingdone=l=>{for(const v of l.fontfaces)r(v)}})(global);
(t=>{const x=(u,m)=>{u.startsWith('"')&&(u=u.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return m?JSON.parse(u):u}catch(a){}},w=t.Cookie={defaults:{raw:!1,json:!1},read:(u,m)=>{m={...w.defaults,...m};const a=m.raw?b=>b:b=>decodeURIComponent(b.split("+").join(" "));m=m.json;const d=document.cookie.split("; "),k=d.length,h=u?void 0:{};for(let b=0;b<k;){var f=d[b++].split("=");const g=a(f.shift());f=a(f.join("="));if(u){if(u===g)return x(f,m)}else h[g]=x(f,m)}return h},write:(u,m,a)=>
{a={...w.defaults,...a};if("number"===typeof a.expires){const g=a.expires,e=a.expires=new Date;e.setDate(e.getDate()+g)}m=a.json?JSON.stringify(m):String(m);const {raw:d,expires:k,path:h,domain:f,samesite:b}=a;return document.cookie=[d?u:encodeURIComponent(u),"=",d?m:encodeURIComponent(m),k?"; expires="+k.toUTCString():"",h?"; path="+h:"",f?"; domain="+f:"",b?"; samesite="+b:"",a.secure?"; secure":""].join("")},remove:(u,m)=>void 0!==w.read(u,m)?(w.write(u,"",{...m,expires:-1}),!0):!1}})(myt);
(t=>{const x=console.error,w=JSON.parse,u=global.localStorage,m=u.getItem.bind(u),a=u.setItem.bind(u),d=u.removeItem.bind(u),k=u.clear.bind(u),h=(b,g,e)=>{if(0<g){const c="__timerId_"+e;(e=f[c])&&clearTimeout(e);f[c]=setTimeout(()=>{b();delete f[c]},g)}else b()},f=t.LocalStorage={hasDatum:(b,g)=>{if(b&&(g=m(g??"myt")))try{return null!=w(g)[b]}catch(e){x(e)}return!1},getDatum:(b,g)=>{if(b&&(g=m(g??"myt")))try{const e=w(g);if("object"===typeof e)return e[b]}catch(e){x(e)}},setDatum:(b,g,e,c)=>{e=e??
"myt";h(()=>{const q=f.getData(e);q[b]=g;a(e,JSON.stringify(q))},c,e+"___"+b)},removeDatum:(b,g,e)=>{g=g??"myt";h(()=>{const c=f.getData(g);delete c[b];a(g,JSON.stringify(c))},e,g+"___"+b)},hasData:b=>null!=m(b??"myt"),getData:b=>{if(b=m(b??"myt"))try{return w(b)}catch(g){x(g)}return{}},setData:(b,g,e)=>{g=g??"myt";b??={};return"object"===typeof b?(h(()=>{a(g,JSON.stringify(b))},e,g),!0):!1},removeData:(b,g)=>{b=b??"myt";h(()=>{d(b)},g,b)},getLength:()=>u.length,getKey:u.key.bind(u),getItem:m,setItem:a,
removeItem:d,clear:k,get:m,set:a,remove:d,clearAll:k}})(myt);
(t=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.URI=new JS.Class("URI",{initialize:function(m,a){m&&this.parse(m,a)},setSource:function(m){this.source=m},setProtocol:function(m){this.protocol=
m},setAuthority:function(m){this.authority=m},setUserInfo:function(m){this.userInfo=m},setUser:function(m){this.user=m},setPassword:function(m){this.password=m},setHost:function(m){this.host=m},setPort:function(m){this.port=m},setRelative:function(m){this.relative=m},setPath:function(m){this.path=m},setDirectory:function(m){this.directory=m},setFile:function(m){this.file=m},setQuery:function(m){this.query=m},setAnchor:function(m){this.anchor=m},parse:function(m,a){const d=this,[k,h,f,b,g,e,c,q,n,
p,r,z,D,I]=(a?u:w).exec(m)??[];d.setSource(k??"");d.setProtocol(h??"");d.setAuthority(f??"");d.setUserInfo(b??"");d.setUser(g??"");d.setPassword(e??"");d.setHost(c??"");d.setPort(q??"");d.setRelative(n??"");d.setPath(p??"");d.setDirectory(r??"");d.setFile(z??"");d.setQuery(D??"");d.setAnchor(I??"");d.queryPairs={};d.query.replace(x,(K,J,M)=>{J&&(d.queryPairs[J]=M)})},decodeQueryParam:m=>decodeURIComponent(m).split("+").join(" "),getQuery:function(){var m=this.queryPairs;const a=[];for(const d in m)a.push(d+
"="+encodeURIComponent(this.getQueryParam(d)));m=a.join("&");return 0<m.length?"?"+m:m},getQueryParam:function(m){m=this.queryPairs[m];return null==m?void 0:this.decodeQueryParam(m)},setQueryParam:function(m,a){this.queryPairs[encodeURIComponent(m)]=encodeURIComponent(a)},removeQueryParam:function(m){delete this.queryPairs[m]},getPathParts:function(m){const a=this.path.split("/");if(!m)for(m=a.length;m;)0===a[--m].length&&a.splice(m,1);return a},toString:function(m){const a=this.path;m=m?this.query?
"?"+this.query:"":this.getQuery();const d=this.anchor;let k=this.toStringThroughPort();a?k+=a:this.host&&(m||d)&&(k+="/");m&&(k+=m);d&&(k+="#"+d);return k},toStringThroughPort:function(){const m=this.protocol,a=this.host,d=this.userInfo,k=this.port;let h="";m&&(h+=m+"://");d&&a&&(h+=d+"@");a&&(h+=a,k&&(h+=":"+k));return h}})})(myt);
(t=>{const x=Math,{PI:w,cos:u,sin:m,sqrt:a}=x,d=(f,b,g,e,c,q)=>{"object"===typeof f&&(q=c,c=e,e=g,g=b,b=f.y,f=f.x);"object"===typeof g&&(q=g.height,c=g.width,e=g.y,g=g.x);return f>=g&&b>=e&&f<=g+c&&b<=e+q},k=(f,b,g,e,c)=>{f=g-f;b=e-b;b=f*f+b*b;return c?b:a(b)},h=(f,b,g,e,c)=>{null==c&&(c=6371);f=f*w/180;g=g*w/180;return c*x.acos(m(f)*m(g)+u(f)*u(g)*u(e*w/180-b*w/180))};t.Geometry={getClosestPointOnALineToAPoint:(f,b,g,e,c,q,n)=>{g-=f;e-=b;c=(g*(c-f)+e*(q-b))/(g*g+e*e);n&&(c=x.min(1,x.max(0,c)));return{x:f+
g*c,y:b+e*c}},isPointInPath:(f,b,g,e)=>{"object"===typeof f&&(e=g,g=b,b=f.y,f=f.x);if(d(f,b,g)&&(g=e.length,6<=g)){let c=!1,q=e[0],n=e[1],p,r;for(;g;)r=e[--g],p=e[--g],r>b!==n>b&&f<(q-p)*(b-r)/(n-r)+p&&(c=!c),q=p,n=r;return c}return!1},measureDistance:k,measureLatLngDistance:h,degreesToRadians:f=>f*w/180,radiansToDegrees:f=>180*f/w,rectContainsPoint:d,circleContainsPoint:(f,b,g,e,c)=>k(f,b,g,e,!0)<=c*c,circleContainsLatLng:(f,b,g,e,c,q)=>h(f,b,g,e,q)<=c,polarToCartesian:(f,b,g,e)=>{g??=0;e??=0;b%=
360;if(0===b)b=f,f=0;else if(90===b)b=0;else if(180===b)b=-f,f=0;else if(270===b)b=0,f=-f;else{const c=b*w/180;b=f*u(c);f*=m(c)}return[g+b,e+f]},cartesianToPolar:(f,b,g,e,c)=>{g??=0;e??=0;f-=g;e=b-e;b=a(f*f+e*e);e=x.atan2(e,f);0>e&&(e+=2*w);return[b,c?e:180*e/w]}}})(myt);
(t=>{const x=JS.Module,w=console.log,u=t.dumpStack;t.Observable=new x("Observable",{attachObserver:function(m,a,d){return m&&a&&d?(this.getObservers(d).push(a,m),!0):!1},detachObserver:function(m,a,d){if(m&&a&&d){var k=this.__obsbt;if(k&&(d=k[d])){k=!1;for(let h=d.length-2;0<=h;h-=2){const [f,b]=d.slice(h);m===b&&a===f&&(d.splice(h,2),k=!0)}return k}}return!1},detachAllObservers:function(){const m=this.__obsbt;if(m)for(const a in m){const d=m[a];for(let k=d.length-2;0<=k;k-=2){const [h,f]=d.slice(k);
f&&h&&("function"===typeof f.detachFrom&&f.detachFrom(this,h,a)||d.splice(k,2))}}},getObservers:function(m){let a;return(a=this.__obsbt??(this.__obsbt={}))[m]??(a[m]=[])},hasObservers:function(m){const a=this.__obsbt;return a?0<a[m]?.length:!1},createEvent:function(m,a){return{source:this,type:m,value:a}},fireEvent:function(m,a,d){if(d=d??(this.hasObservers(m)?this.__obsbt[m]:null)){const k={source:this,type:m,value:a},h=this.__aet??(this.__aet={});if(h[m])t.global.error.notify("warn","eventLoop",
"Abort refiring event:"+m,null,{observable:this,type:m,value:a});else{h[m]=!0;for(a=d.length-2;0<=a;a-=2){const [f,b]=d.slice(a);if(b&&f)try{if("function"===typeof f){if(f.call(b,k))break}else if(b[f](k))break}catch(g){u(g),w("Additional context",f,b)}}h[m]=!1}}}});t.Observer=new x("Observer",{valueFromEvent:m=>m&&"object"===typeof m&&m.type?m.value:m,syncTo:function(m,a,d,k,h){k??=d;try{this[a](m.createEvent(d,m.get(k)))}catch(f){u(f)}h||this.attachTo(m,a,d,h)},isAttachedTo:function(m,a,d){if(m&&
a&&d){var k=this.__obt;if(k&&(d=k[d]))for(k=d.length-2;0<=k;k-=2){const [h,f]=d.slice(k);if(m===f&&a===h)return!0}}return!1},getObservables:function(m){let a;return(a=this.__obt??(this.__obt={}))[m]??(a[m]=[])},hasObservables:function(m){const a=this.__obt;return a?0<a[m]?.length:!1},attachTo:function(m,a,d,k){if(m&&a&&d){const h=this.getObservables(d);if(k){const f=this,b=a;this.__methodNameCounter??(this.__methodNameCounter=0);a="__DO_ONCE_"+this.__methodNameCounter++;this[a]=g=>{f.detachFrom(m,
a,d);delete f[a];return f[b](g)}}if(m.attachObserver(this,a,d))return h.push(a,m),!0}return!1},detachFrom:function(m,a,d){if(m&&a&&d){var k=this.__obt;if(k&&(k=k[d])){let h=!1;for(let f=k.length-2;0<=f;f-=2){const [b,g]=k.slice(f);m===g&&a===b&&m.detachObserver(this,a,d)&&(k.splice(f,2),h=!0)}return h}}return!1},detachFromAllObservables:function(){var m=this.__obt;if(m)for(const [a,d]of Object.entries(m)){for(m=d.length-2;0<=m;m-=2){const [k,h]=d.slice(m);h.detachObserver(this,k,a)}d.length=0}},constrain:function(m,
a){if(m&&a){const k=a.length;if(0!==k%2)w("Observables uneven",this);else{var d;const h=(d=this.__cbmn??(this.__cbmn={}))[m]??(d[m]=[]);if(0<h.length)w("Constraint exists for "+m+" on "+this);else{for(d=0;d<k;d+=2){const [f,b]=a.slice(d);f&&b&&(this.attachTo(f,m,b),h.push(f,b))}try{this[m]()}catch(f){u(f)}}}}},releaseConstraint:function(m){if(m){var a=this.__cbmn;if(a&&(a=a[m])){for(let d=a.length;0<=d;d-=2){const [k,h]=a.slice(d);this.detachFrom(k,m,h)}a.length=0}}},releaseAllConstraints:function(){const m=
this.__cbmn;if(m)for(const a in m)this.releaseConstraint(a)}})})(myt);(t=>{const x=console.warn,w=t.global=new JS.Singleton("Global",{include:[t.Observable],initialize:()=>{},register:(u,m)=>{w.hasOwnProperty(u)&&(x("Global key in use",u),w.unregister(u));w[u]=m;w.fireEvent("register"+u,m)},unregister:u=>{if(w.hasOwnProperty(u)){const m=w[u];delete w[u];w.fireEvent("unregister"+u,m)}else x("Global key not in use",u)}})})(myt);
(t=>{let x;new JS.Singleton("GlobalError",{include:[t.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);t.global.register("error",x)},setConsoleLogging:w=>{x.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=x.stackTraceLimit=w},notify:(w,u,m,a,d)=>{a??=Error(m??u);a=a.stack??a.stacktrace;x.fireEvent(u??"error",{msg:m,stacktrace:a,...d});if(x.consoleLogging&&w)console[w](a)}})})(myt);
(t=>{const x=global,w=x.getComputedStyle,u=document,m=Math.max,a=h=>{const {zIndex:f,opacity:b}=w(h);if("auto"===f){if(1===parseInt(b,10)){let g=0;h=h.childNodes;let e=h.length;for(;e;){const c=h[--e];1===c.nodeType&&(g=m(g,a(c)))}return g}return 0}return parseInt(f,10)},d=(h,f)=>{const b=[];for(;h;){b.push(h);if(h===f)break;h=h.parentNode}return b},k=t.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(h,f,b)=>{h=u.createElement(h);for(const g in b)h[g]=b[g];for(const g in f)h.style[g]=
f[g];return h},isDomElementVisible:h=>{if("INPUT"!==h.nodeName||"hidden"!==h.type)for(;h;){if(h===u)return!0;const {display:f,visibility:b}=w(h);if("none"===f||"hidden"===b)break;h=h.parentNode}return!1},getZIndexRelativeToAncestor:(h,f)=>{if(h&&f)for(h=d(h,f),f=h.length-1;f;){const b=w(h[--f]),g=b.zIndex,e="auto"===g;if(0===f||!e||1!==parseInt(b.opacity,10))return e?0:parseInt(g,10)}return 0},getAncestorArray:d,getHighestZIndex:a,getRelativePosition:(h,f)=>{if(h){let b=0,g=0;for(;h&&"BODY"!==h.nodeName&&
h!==f;)if(b+=h.offsetLeft,g+=h.offsetTop,(h=h.offsetParent)&&"BODY"!==h.nodeName){const {borderLeftWidth:e,borderTopWidth:c}=w(h);b+=parseInt(e,10)-h.scrollLeft;g+=parseInt(c,10)-h.scrollTop}return{x:b,y:g}}},getTruePosition:h=>{if(h)return h=h.getBoundingClientRect(),h.left+=x.scrollX,h.top+=x.scrollY,h},simulateDomEvent:(h,f,b)=>{if(h){const g={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},e={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(b)for(const q in b)g[q]=b[q];let c;for(const q in e)if(e[q].test(f)){c=q;break}if(!c)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(u.createEvent)b=u.createEvent(c),"HTMLEvents"===c?b.initEvent(f,g.bubbles,g.cancelable):b.initMouseEvent(f,g.bubbles,g.cancelable,u.defaultView,g.button,g.pointerX,g.pointerY,g.pointerX,g.pointerY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,null),h.dispatchEvent(b);
else{g.clientX=g.pointerX;g.clientY=g.pointerY;b=u.createEventObject();for(const q in g)b[q]=g[q];h.fireEvent("on"+f,b)}}},getScrollbarSize:t.memoize(()=>{const h=u.body,f=k.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});h.appendChild(f);const b=f.offsetWidth-f.clientWidth;h.removeChild(f);return b})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(h){if(Array.isArray(h)){const [f,
b]=h;this.__oE=f;this.__iE=b;this.__iS=b.style;this.__oS=f.style;b.model=f.model=this}else this.__oE=this.__iE=h,this.__iS=this.__oS=h.style,h.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(h){this.__iE.className=this.domClass=h},addDomClass:function(h){const f=this.__iE.className;this.setDomClass((f?
f+" ":"")+h)},removeDomClass:function(h){var f=this.__iE.className;if(f){f=f.split(" ");let b=f.length;for(;b;)f[--b]===h&&f.splice(b,1);this.setDomClass(f.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(h){this.__iE.id=this.domId=h},setZIndex:function(h){this.__oS.zIndex=h},setStyleProperty:function(h,f){this.__iS[h]=f},getPagePosition:function(h){return k["get"+(h?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){k.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return a(this.__iE)},getHighestChildZIndex:function(h){const f=this.__iE.childNodes;let b=f.length,g=0;for(;b;){const e=f[--b];1===e.nodeType&&e!==h&&(g=m(g,a(e)))}return g},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(h,f){(f?this.__iE:this.__oE).scrollTop=h||0}})})(myt);
(t=>{let x;const w=m=>{for(;m.lastChild;)m=m.lastChild;return m},u=(m,a)=>{x.lastTraversalWasForward=m;let d=document.body,k=d;var h=document.activeElement;let f=k,b;const g=m?"getNextFocus":"getPrevFocus";h&&(f=k=h,(h=k.model)??(h=x.findModelForDomElement(k)),h&&(a=h.getFocusTrap(a))&&(d=a.getIDE()));for(;f;){if(f.model&&f.model[g]&&(b=f.model[g]()))f=b.getIDE();else if(m)if(f.firstChild)f=f.firstChild;else{if(f===d)return k.model;if(f.nextSibling)f=f.nextSibling;else for(;f&&(f=f.parentNode,f!==
d);)if(f.nextSibling){f=f.nextSibling;break}}else f=f===d?w(d):f.previousSibling?w(f.previousSibling):f.parentNode;if(f===k)return k.model;if(1===f.nodeType)if((h=f.model)&&h instanceof t.View){if(h.isFocusable())return h}else if(a=f.nodeName,!("A"!==a&&"AREA"!==a&&"INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a&&"BUTTON"!==a||f.disabled||isNaN(f.tabIndex))&&t.DomElementProxy.isDomElementVisible(f)&&(h=x.findModelForDomElement(f),!h?.searchAncestorsOrSelf(e=>!0===e.maskFocus))){f.focus();x.focusedDom=f;
break}}};new JS.Singleton("GlobalFocus",{include:[t.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;t.global.register("focus",x)},setFocusedView:m=>{if(x.focusedView!==m){x.prevFocusedView=x.focusedView;if(x.focusedView=m)x.focusedDom=null;x.fireEvent("focused",m)}},notifyFocus:m=>{x.focusedView!==m&&x.setFocusedView(m)},notifyBlur:m=>{x.focusedView===m&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:m=>{u(!0,m)?.focus()},prev:m=>{u(!1,m)?.focus()},findModelForDomElement:m=>{for(;m;){let a=m.model;if(a&&a instanceof t.View)return a;m=m.parentNode}}})})(myt);
(t=>{const x=JS.Module,w=t.global,u=w.focus,m=()=>({source:null,type:null,value:null}),a=c=>{c=c.value??c;return(c.target??c.srcElement).model},d=t.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:m(),getKeyFromEvent:c=>c.value.key,getCodeFromEvent:c=>c.value.code,isEnterKeyEvent:c=>c.value.code===w.keys.CODE_ENTER,isEscKeyEvent:c=>c.value.code===w.keys.CODE_ESC,isShiftKeyEvent:c=>w.keys.isShiftCode(c.value.code)},createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,
q,n,d)??this.callSuper(c,q,n)}}),k=t.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:m(),getMouseFromEvent:c=>({x:c.value.pageX,y:c.value.pageY}),getMouseFromEventRelativeToView:(c,q)=>{q=q.getPagePosition();c=k.getMouseFromEvent(c);c.x-=q.x;c.y-=q.y;return c}},createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,q,n,k,!0)??this.callSuper(c,q,n)}}),h=t.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:m(),getScrollFromEvent:c=>{const {scrollLeft:q,scrollTop:n}=a(c);return{x:q,y:n}}},createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,q,n,h)??this.callSuper(c,q,n)}}),f=t.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:m()},createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,q,n,f,!1)??this.callSuper(c,q,n)}}),b=t.FocusObservable=
new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:m()},initNode:function(c,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(c,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(c){this.focused!==c&&(this.focused=c,this.inited&&(this.fireEvent("focused",c),c?u.notifyFocus(this):u.notifyBlur(this)))},setFocusable:function(c){if(this.focusable!==c){const q=this.focusable;(this.focusable=c)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",c)}},setFocusIndicator:function(c){this.focusIndicator!==c&&(this.focusIndicator=c,this.focused&&(c?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(u.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(c=>!0===c.maskFocus)},focus:function(c){this.isFocusable()&&this.getIDE().focus({preventScroll:c})},blur:function(){this.getIDE().blur()},__doFocus:function(c){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(c){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const c=this.getIDS();c.outlineWidth="thin";c.outlineColor="#8bf";c.outlineStyle="solid";c.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(c,q,n){if(b.EVENT_TYPES[n]){const p=this;return r=>{r??=window.event;if(p._ignoreFocus)r.cancelBubble=!0,r.stopPropagation?.(),r.preventDefault();
else{var z=b.EVENT;z.source=p;z.type=r.type;z.value=r;c[q](z)||(r.cancelBubble=!0,r.stopPropagation?.());z.source=void 0}}}return this.callSuper(c,q,n)}}),g=t.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:m()},createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,q,n,g)??this.callSuper(c,q,n)}}),e=t.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:m()},
createDomHandler:function(c,q,n){return this.createStandardDomHandler(c,q,n,e,!0)??this.callSuper(c,q,n)}});t.DomObservable=new x("DomObservable",{attachDomObserver:function(c,q,n,p,r){if(c&&q&&n){p=!!p;const z=this.createDomHandler(c,q,n);if(z){const D=this.__dobsbt??(this.__dobsbt={}),I=D[n];I?I.push(c,q,z,p):D[n]=[c,q,z,p];t.addEventListener(this.getDomElementForDomObservable(n),n,z,p,r);return!0}}return!1},getDomElementForDomObservable:function(c){return this.getIDE()},createDomHandler:(c,q,n)=>
null,createStandardDomHandler:function(c,q,n,p,r){if(p.EVENT_TYPES[n]){const z=this,D=p.EVENT;return I=>{I??=window.event;D.source=z;D.type=I.type;D.value=I;c[q](D)||(I.cancelBubble=!0,I.stopPropagation?.(),r&&I.preventDefault());D.source=void 0}}},detachDomObserver:function(c,q,n,p){if(c&&q&&n){p=!!p;var r=this.__dobsbt;if(r&&(r=r[n])){const z=this.getDomElementForDomObservable(n);let D=!1;for(let I=r.length-4;0<=I;I-=4){const [K,J,M,y]=r.slice(I,I+4);c===K&&q===J&&p===y&&(z&&t.removeEventListener(z,
n,M,p),r.splice(I,4),D=!0)}return D}}return!1},detachAllDomObservers:function(){var c=this.__dobsbt;if(c)for(const [q,n]of Object.entries(c)){for(c=n.length-2;0<=c;c-=4){const [p,r]=n.slice(c);t.removeEventListener(this.getDomElementForDomObservable(q),q,p,r)}n.length=0}}});t.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:a},attachToDom:function(c,q,n,p,r){if(c&&q&&n){p=!!p;let z;const D=(z=this.__dobt??(this.__dobt={}))[n]??(z[n]=[]);c.attachDomObserver(this,q,n,p,r)&&D.push(p,q,
c)}},detachFromDom:function(c,q,n,p){if(c&&q&&n){p=!!p;var r=this.__dobt;if(r&&(r=r[n])){let z=!1;for(let D=r.length-3;0<=D;D-=3){const [I,K,J]=r.slice(D);c===J&&q===K&&p===I&&c.detachDomObserver(this,q,n,p)&&(r.splice(D,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var c=this.__dobt;if(c)for(const [q,n]of Object.entries(c)){for(c=n.length-3;0<=c;c-=3){const [p,r,z]=n.slice(c);z.detachDomObserver(this,r,q,p)}n.length=0}}})})(myt);
(t=>{let x;const {KeyObservable:w,global:u}=t,m=u.focus,a=w.getCodeFromEvent,d=new Set,k="Firefox"===BrowserDetect.browser,h=k?"OSLeft":"MetaLeft",f=k?"OSRight":"MetaRight",b=()=>d.has("ShiftLeft")||d.has("ShiftRight"),g=()=>d.has("ControlLeft")||d.has("ControlRight"),e=()=>d.has("AltLeft")||d.has("AltRight"),c=()=>d.has(h)||d.has(f),q=(p,r)=>{switch(p){case "Backspace":return p=r.nodeName,!("TEXTAREA"===p||"INPUT"===p&&("text"===r.type||"number"===r.type||"password"===r.type)||"DIV"===p&&"true"===
r.contentEditable&&r.firstChild);case "Tab":return!0}return!1},n=(p,r)=>{for(const z of["keydown","keypress","keyup"])x[r](p,"__hndl_"+z,z)};new JS.Singleton("GlobalKeys",{include:[t.DomElementProxy,t.DomObservable,t.DomObserver,w,t.Observable,t.Observer],initialize:function(){u.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const p of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+p]="Key"+p;for(const p of"1234567890".split(""))x["CODE_"+p]="Digit"+p;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(m,"__hndl_focused","focused");n(x,"attachToDom");global.onblur=()=>{d.clear()}},isShiftKeyDown:b,isControlKeyDown:g,isAltKeyDown:e,isMetaKeyDown:c,isShiftCode:p=>
"ShiftLeft"===p||"ShiftRight"===p,isControlCode:p=>"ControlLeft"===p||"ControlRight"===p,isAltCode:p=>"AltLeft"===p||"AltRight"===p,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?c():g(),ignoreFocusTrap:()=>e(),__hndl_focused:p=>{(p=p.value)?(n(x,"detachFromDom"),n(p,"attachToDom")):((p=m.prevFocusedView)&&n(p,"detachFromDom"),n(x,"attachToDom"))},__hndl_keydown:p=>{const r=a(p);p=p.value;q(r,p.target)&&p.preventDefault();c()&&"ShiftLeft"!==r&&"ShiftRight"!==r&&"ControlLeft"!==r&&"ControlRight"!==
r&&"AltLeft"!==r&&"AltRight"!==r?(x.fireEvent("keydown",r),x.fireEvent("keyup",r)):(d.add(r),"Tab"===r&&(p=e(),b()?m.prev(p):m.next(p)),x.fireEvent("keydown",r))},__hndl_keypress:p=>{x.fireEvent("keypress",a(p))},__hndl_keyup:p=>{const r=a(p);p=p.value;q(r,p.target)&&p.preventDefault();d.delete(r);x.fireEvent("keyup",r)}})})(myt);
(t=>{const x=JS.Module,w=Math.max,u=(b,g,e,c,q=0)=>{const n=b.length;for(let p=e;q<n;q++)h(b[q],g,p),c&&(p+=e)},m=(b,g,e,c=0)=>{const q=b.length;for(let n=g;c<q;)b[c++].crossPos+=n,e&&(n+=g)},a=(b,g)=>g?b.getFlexBasisWidth():b.getFlexBasisHeight(),d=(b,g,e,c)=>{b[g?"setWidthViaFlex":"setHeightViaFlex"]((c?a(b,g):0)+e)},k=(b,g,e)=>{b[g?"setXViaFlex":"setYViaFlex"](e,!1)},h=(b,g,e)=>{b[g?"setXViaFlex":"setYViaFlex"](e,!0)},f=(b,g,e)=>{b[g]!==e&&(b[g]=e,b.inited&&b.fireEvent(g,e),b.updateFlexboxLayout())};
t.FlexboxSupport=new x("FlexboxSupport",{initNode:function(b,g){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(b,g);this.updateFlexboxLayout()},setWidth:function(b){const g=this.width;this.callSuper(b);g!==this.width&&this.updateFlexboxLayout()},setHeight:function(b){const g=this.height;this.callSuper(b);g!==this.height&&this.updateFlexboxLayout()},
setDirection:function(b){f(this,"direction",b)},setWrap:function(b){f(this,"wrap",b)},setJustifyContent:function(b){f(this,"justifyContent",b)},setAlignItems:function(b){f(this,"alignItems",b)},setAlignContent:function(b){f(this,"alignContent",b)},setRowGap:function(b){f(this,"rowGap",w(0,b))},setColumnGap:function(b){f(this,"columnGap",w(0,b))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(b){this.set("totalBasisWidth",
b,!0)},setTotalBasisHeight:function(b){this.set("totalBasisHeight",b,!0)},ignoreSubviewForFlex:function(b){return b&&"function"===typeof b.ignoreFlex?b.ignoreFlex():!0},setFlexboxPaused:function(b,g){this.__flexboxPaused!==b&&((this.__flexboxPaused=b)||g||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(b){this.callSuper(b);b&&!this.ignoreSubviewForFlex(b)&&this.updateFlexboxLayout()},subviewRemoved:function(b){this.callSuper(b);!b||this.ignoreSubviewForFlex(b)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(b){this.callSuper(b);b&&this.ignoreSubviewForFlex(b)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(b){return b?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(b){return b?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(b){this._updateAgain=b},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const b=this;if(b.isOKToUpdateLayout()){var g=b.getSubviewsInLexicalOrder().filter(K=>!0!==b.ignoreSubviewForFlex(K)&&!0===K.visible);const I=g.length;if(0<I){b.__isUpdatingFlexboxLayout=!0;var e=b.direction;const K=e.startsWith("row"),J=!K;var c=b.getWidthForFlexboxLayout(),q=b.getHeightForFlexboxLayout();const M=K?b.columnGap:b.rowGap,y=K?c:q;var n=K?b.rowGap:
b.columnGap;const l=K?q:c,v=b.isWrapNotAllowed();c=b.justifyContent;q=b.alignItems;var p=v?"stretch":b.alignContent;e.endsWith("Reverse")&&g.reverse();let A=0,B=0,E=0,H=0,L={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:E,crossSize:0};e=[L];for(let Q=0;Q<I;){const R=g[Q++],T=a(R,K),P=R.getShrink(),ba=R.getGrow();!v&&0<L.items.length&&A+(0===H?0:M)+T>y&&(L.extraSize=y-A,E+=L.crossSize+n,B=w(B,A),H=A=0,L={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:E,
crossSize:0},e.push(L));0!==H&&(A+=M);0<P&&0<T&&(L.shrinkCount+=P,L.shrinkBasis+=T*P);0<ba&&(L.growCount+=ba);L.crossSize=w(L.crossSize,a(R,J));k(R,K,A);d(R,K,T);A+=T;L.items.push(R);H++}L.extraSize=y-A;E+=L.crossSize;B=w(B,A);if(b.isCompactOnMainAxis(K)&&(g=e.reduce((Q,R)=>null==Q?R.extraSize:Math.min(Q,R.extraSize),null),0!==g))for(var r of e)r.extraSize-=g;b[K?"setTotalBasisWidth":"setTotalBasisHeight"](B);b[K?"setTotalBasisHeight":"setTotalBasisWidth"](E);r=e.length;if(1<r&&"wrapReverse"===b.wrap){for(var z of e)z.crossPos=
E-(z.crossPos+z.crossSize);e.reverse()}if(!b.isCompactOnCrossAxis(K))switch(z=l-E,p){default:case "start":break;case "end":m(e,z,!1);break;case "center":m(e,z/2,!1);break;case "spaceBetween":1<r&&m(e,z/(r-1),!0,1);break;case "spaceAround":z<=n?m(e,z/2,!1):(m(e,n/2,!1),z-=n,m(e,z/(2*r),!0),m(e,z/(2*r),!0,1));break;case "spaceEvenly":z<=2*n?m(e,z/2,!1):(m(e,n,!1),m(e,(z-2*n)/(r+1),!0));break;case "stretch":n=z/r;z=0;for(var D of e)D.crossSize+=n,D.crossPos+=z,z+=n}for(const Q of e){D=Q.items;n=Q.extraSize;
if(0<n)if(0<Q.growCount){n/=Q.growCount;e=0;for(const P of D)0<e&&h(P,K,e),z=P.getGrow()*n,0<z&&(d(P,K,z,!0),e+=z)}else switch(e=D.length,c){default:case "start":break;case "end":u(D,K,n,!1);break;case "center":u(D,K,n/2,!1);break;case "spaceBetween":1<e&&u(D,K,n/(e-1),!0,1);break;case "spaceAround":n<=M?u(D,K,n/2,!1):(u(D,K,M/2,!1),n-=M,u(D,K,n/(2*e),!0),u(D,K,n/(2*e),!0,1));break;case "spaceEvenly":n<=2*M?u(D,K,n/2,!1):(u(D,K,M,!1),n-=2*M,u(D,K,n/(e+1),!0))}else if(0>n&&0<Q.shrinkCount){e=Q.shrinkBasis;
z=0;for(const P of D)0>z&&h(P,K,z),p=P.getShrink()*a(P,K)/e*w(n,-e),0>p&&(d(P,K,p,!0),z+=p)}n=!1;const {crossSize:R,crossPos:T}=Q;for(const P of D)switch(P.getAlignSelf()||q){case "start":k(P,J,T);d(P,J,a(P,J),!1);break;case "end":k(P,J,T+R-a(P,J));d(P,J,a(P,J),!1);break;case "center":k(P,J,T+(R-a(P,J))/2);d(P,J,a(P,J),!1);break;case "baseline":n=!0;k(P,J,T+(R-a(P,J))/2+P.getFlexBaselineOffset(K));d(P,J,a(P,J),!1);break;default:k(P,J,T),d(P,J,R,!1)}n&&b.updateFlexboxLayoutBaselineAdjustment(D,K,T)}b.__isUpdatingFlexboxLayout=
!1;b.isUpdateAgain()&&!b.__UPDATE_AGAIN_LOOP_PROTECTION&&(b.setUpdateAgain(!1),b.__UPDATE_AGAIN_LOOP_PROTECTION=!0,b.updateFlexboxLayout(),b.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else b.setTotalBasisWidth(0),b.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(b,g,e)=>{}});t.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(b){this.visible!==b&&(this.callSuper(b),this.updateFlexboxLayoutFromChild())},setXViaFlex(b,g){g&&(b+=this.x);this.x!==b&&(this.__isFlexUpdate=!0,
this.setX(b),this.__isFlexUpdate=!1)},setYViaFlex(b,g){g&&(b+=this.y);this.y!==b&&(this.__isFlexUpdate=!0,this.setY(b),this.__isFlexUpdate=!1)},setWidth:function(b){const g=this.width!==b;g&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(b);g&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(b){this.width!==b&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(b),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??
this.width},setHeight:function(b){const g=this.height!==b;g&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(b);g&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(b){this.height!==b&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(b),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:b=>0,setIgnoreFlex:function(b){this.__ignoreFlex!==b&&(this.__ignoreFlex=b,this.inited&&
(this.fireEvent("ignoreFlex",b),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(b){b=w(0,b);this.grow!==b&&(this.grow=b,this.inited&&(this.fireEvent("grow",b),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(b){b=w(0,b);this.shrink!==b&&(this.shrink=b,this.inited&&(this.fireEvent("shrink",b),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(b){this.alignSelf!==
b&&(this.alignSelf=b,this.inited&&(this.fireEvent("alignSelf",b),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const b=this.alignSelf;return"auto"===b||""===b?null:b},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(t=>{const x=console.log,w=new Map,u=new Map,m=(h,f)=>f+h.charAt(0).toUpperCase()+h.slice(1),a=h=>u.get(h)??(u.set(h,m(h,"set")),u.get(h)),d=h=>w.get(h)??(w.set(h,m(h,"get")),w.get(h)),k=(h,f)=>{let b;for(const g in f){const e=f[g],c=a(g);if(c in h)h[c](e);else h[g]!==e&&(h[g]=e,(b??=!1!==h.inited&&h.fireEvent)&&h.fireEvent(g,e))}};t.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:a,generateGetterName:d,generateName:m,createSetterFunction:(h,f)=>{const b=a(f);h[b]&&x("Overwriting setter",
b);h[b]=function(g){this[f]!==g&&(this[f]=g,this.inited&&this.fireEvent(f,g))}},createGetterFunction:(h,f)=>{const b=d(f);h[b]&&x("Overwriting getter",b);h[b]=function(){return this[f]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(h,f){if(h)for(const b of h)this[b]=f[b],delete f[b]},callSetters:function(h){var f=this.earlyAttrs,b=this.lateAttrs;if(f||b){h={...h};if(f){var g=f.length;for(var e=0;e<g;){const q=f[e++];q in h&&(this.set(q,h[q]),delete h[q])}}let c;if(b)for(c=[],f=b.length,g=0;g<f;)e=b[g++],e in h&&(c.push(e,h[e]),delete h[e]);k(this,h);if(c)for(b=c.length,h=0;h<b;)this.set(c[h++],c[h++])}else k(this,h)},get:function(h){const f=d(h);return"function"===
typeof this[f]?this[f]():this[h]},set:function(h,f,b){if(!b&&(b=a(h),"function"===typeof this[b]))return this[b](f);this[h]!==f&&(this[h]=f,!1!==this.inited&&this?.fireEvent(h,f))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var t=this.__meta__;if(t){var x=Object.keys(t);for(let w=x.length;0<w;)t[x[--w]]=null}t=Object.keys(this);for(x=t.length;0<x;)this[t[--x]]=null;this.destroyed=!0}}});
(t=>{const {Class:x,Module:w}=JS,u=console.warn;let m;const a=(e,c)=>c?(m=e).__op??(m.__op=[]):e.__op;let d;const k=(e,c)=>c?(d=e).__actives??(d.__actives=[]):e.__actives,h=new x("AbstractPool",{include:[t.Destructible],initialize:()=>{},destroy:function(){const e=a(this);e&&(e.length=0);this.callSuper()},getInstance:function(){const e=a(this,!0);return e.length?e.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(e){a(this,!0).push(this.cleanInstance(e))},
cleanInstance:e=>{"function"===typeof e.clean&&e.clean();return e},destroyPooledInstances:function(){var e=a(this);if(e){let c=e.length;for(;c;){const q=e[--c];"function"===typeof q.destroy&&q.destroy()}}}}),f=t.SimplePool=new x("SimplePool",h,{initialize:function(e,c){this.callSuper();this.instanceClass=e??Object;this.instanceParent=c},createInstance:function(e){var c=this.instanceParent,q=this.instanceClass;return c?new q(c,e):new q}}),b=new w("TrackActives",{destroy:function(){const e=k(this);
e&&(e.length=0);this.callSuper()},getInstance:function(){const e=this.callSuper();k(this,!0).push(e);return e},putInstance:function(e){var c=k(this);if(c){const q=c.indexOf(e);if(-1<q){c.splice(q,1);this.callSuper(e);return}c="inactive"}else c="missing";u("Tried to put a "+c+" instance",e,this)},getActives:function(e){const c=k(this);if(c){if(e){const q=[],n=c.length;for(let p=0;n>p;){const r=c[p++];e.call(this,r)&&q.push(r)}return q}return c.slice()}return[]},putActives:function(){const e=k(this);
if(e){let c=e.length;for(;c;)this.putInstance(e[--c])}}}),g=t.TrackActivesPool=new x("TrackActivesPool",f,{include:[b]});t.TrackActivesMultiPool=new x("TrackActivesMultiPool",h,{initialize:function(e,c){this.callSuper();this.instanceClassesByKey=e;const q=this._poolsByClassName={},n=this.__pbk={};for(const p in e){const r=e[p];n[p]=q[r.__displayName]=new g(r,c)}},destroy:function(){const e=this.__pbk;for(const c in e)e[c].destroy();this.callSuper()},getInstance:function(){const e=arguments[0],c=this.__pbk[e];
if(c)return c.getInstance(arguments);u("No pool for key",e)},putInstance:function(e){const c=this._poolsByClassName[e.klass.__displayName];c?c.putInstance(e):u("No pool for obj",e)},destroyPooledInstances:function(){const e=this.__pbk;for(const c in e)e[c].destroyPooledInstances()},getActives:function(e){let c=[];const q=this.__pbk;for(const n in q)c.push(...q[n].getActives(e));return c},putActives:function(){const e=this.__pbk;for(const c in e)e[c].putActives()}});t.Reusable=new w("Reusable",{clean:()=>
{}})})(myt);
(t=>{const x=JS.Class,w=console.warn,u=[t.AccessorSupport,t.Destructible,t.Observable,t.Observer],m=(b,g)=>{if(g){const e=g.length;for(let c=0,q;e>c;)(q=g[c++])?b.extend(q):w("Missing mixin in",b.klass.__displayName)}b.inited=!1},a=(b,g)=>{if(g)for(;b;){if(g(b))return b;b=b.parent}},d=(b,g)=>{const e=g.name;void 0===b[e]?b[e]=g:w("Name in use",e)},k=(b,g)=>{const e=g.name;b[e]===g?delete b[e]:w("Name not in use",e)};let h;const f=b=>(h=b).__animPool??(h.__animPool=new t.TrackActivesPool(t.Animator,b));
t.Eventable=new x("Eventable",{include:u,initialize:function(b,g){m(this,g);this.init(b??{})},init:function(b){this.callSetters(b);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});t.Node=new x("Node",{include:u,extend:{getMatchingAncestorOrSelf:a,getMatchingAncestor:(b,g)=>a(b?b.parent:null,g),DEFAULT_PLACEMENT:"*"},initialize:function(b,g,e){m(this,e);this.initNode(b,g??{})},initNode:function(b,g){this.callSetters(g);
this.setParent(b);this.inited=!0},destroy:function(){const b=this.subnodes;this.isBeingDestroyed=!0;if(b)for(let g=b.length;0<g;)b[--g].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(b){this.placement=b},setDefaultPlacement:function(b){this.defaultPlacement=
b},setIgnorePlacement:function(b){this.ignorePlacement=b},setParent:function(b){if(b&&!this.ignorePlacement){var g=this.placement??b.defaultPlacement;g&&(b=b.determinePlacement(g,this))}if(this.parent!==b&&!b?.destroyed){if(g=this.parent){const e=g.getSubnodes().indexOf(this);-1<e&&(this.name&&k(g,this),g.subnodes.splice(e,1),g.subnodeRemoved(this))}if(this.parent=b)b.getSubnodes().push(this),this.name&&d(b,this),b.subnodeAdded(this);this.inited&&this.fireEvent("parent",b)}},setName:function(b){if(this.name!==
b){const g=this.parent;g&&this.name&&k(g,this);this.name=b;g&&b&&d(g,this)}},determinePlacement:function(b,g){let e=b.indexOf("."),c;0<=e&&(c=b.slice(e+1),b=b.slice(0,e));"*"===b&&(b=this.defaultPlacement)&&(e=b.indexOf("."),0<=e&&(c=b.slice(e+1)+(c?"."+c:""),b=b.slice(0,e)));return(b=this[b])?c?b.determinePlacement(c,g):b:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(b){if(b){if(b===this)return!0;if(this.parent)return this.getIDE&&
b.getIDE?b.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(b)}return!1},isAncestorOf:function(b){return b?b.isDescendantOf(this):!1},getLeastCommonAncestor:function(b){for(;b;){if(this.isDescendantOf(b))return b;b=b.parent}},searchAncestorsForClass:function(b){if(b)return this.searchAncestors(g=>g instanceof b)},searchAncestorsForModule:function(b){if(b)return this.searchAncestors(g=>g.isA(b))},searchAncestors:function(b){return a(this?this.parent:null,b)},searchAncestorsOrSelf:function(b){return a(this,
b)},getAncestors:function(){const b=[];let g=this;for(;g;)b.push(g),g=g.parent;return b},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:b=>{},subnodeRemoved:b=>{},animate:function(b){if(b){const g=f(this),e=g.getInstance({ignorePlacement:!0}),c=b.callback;delete b.callback;e.callSetters(b);e.next(q=>{g.putInstance(e)});c&&e.next(c);e.setRunning(!0);return e}},getActiveAnimators:function(b){if("string"===typeof b){const g=b;b=e=>e.attribute===g}return f(this).getActives(b)},
stopActiveAnimators:function(b,g=!1){b=this.getActiveAnimators(b);let e=b.length;if(0<e){const c=f(this);for(;e;){const q=b[--e];q.reset(g);g||c.putInstance(q)}}},doOnceOnIdle:function(b){this.attachTo(t.global.idle,b,"idle",!0)}})})(myt);
(t=>{let x=0,w=!1;const u=JS.Class,m=[],a=g=>{if(w!==g&&(w=g,!g)){for(g=m.length;g;){const e=m[--g];e.__deferredLayout=!1;e.update()}m.length=0}},d=(g,e,c,q)=>{const n=g.getSubviewIndex(e),p=g.subviews;-1<n&&(g=g.getSubviewIndex(c),p.splice(n,1),-1<g?(n<g&&--g,p.splice(g+(q?1:0),0,e)):q?p.push(e):p.unshift(e))},k=(g,e,c)=>{g[e]!==c&&(g[e]=c,g.inited&&(g.fireEvent(e,c),g.update()))},h=t.Layout=new u("Layout",t.Node,{extend:{incrementGlobalLock:()=>{1===++x&&a(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&a(!1)}},initNode:function(g,e){this.subviews=[];this.locked=!0;this.lockedCounter=1;const c=!0===e.locked;delete e.locked;this.callSuper(g,e);c||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(g){var e=this.parent;if(e!==g){const c=!this.locked;c&&(this.locked=!0);let q,n;if(e){q=this.subviews;for(n=q.length;n;)this.removeSubview(q[--n]);this.detachFrom(e,"__hndlPSA","subviewAdded");this.detachFrom(e,"__hndlPSR","subviewRemoved")}this.callSuper(g);
if(g=this.parent){q=g.getSubviews();n=0;for(e=q.length;e>n;)this.addSubview(q[n++]);this.attachTo(g,"__hndlPSA","subviewAdded");this.attachTo(g,"__hndlPSR","subviewRemoved")}c&&(this.locked=!1,this.inited&&g&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(m.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(g){return this.subviews.includes(g)},getSubviewIndex:function(g){return this.subviews.indexOf(g)},addSubview:function(g){this.ignore(g)||
(this.subviews.push(g),this.startMonitoringSubview(g),this.locked||this.update())},startMonitoringSubview:g=>{},startMonitoringAllSubviews:function(){const g=this.subviews;let e=g.length;for(;e;)this.startMonitoringSubview(g[--e])},removeSubview:function(g){if(this.ignore(g))return-1;const e=this.getSubviewIndex(g);-1<e&&(this.stopMonitoringSubview(g),this.subviews.splice(e,1),this.locked||this.update());return e},stopMonitoringSubview:g=>{},stopMonitoringAllSubviews:function(){const g=this.subviews;
let e=g.length;for(;e;)this.stopMonitoringSubview(g[--e])},ignore:g=>g.ignoreLayout,__hndlPSA:function(g){g=g.value;g.parent===this.parent&&this.addSubview(g)},__hndlPSR:function(g){g=g.value;g.parent===this.parent&&this.removeSubview(g)},sortSubviews:function(g){this.subviews.sort(g)},moveSubviewBefore:function(g,e){d(this,g,e,!1)},moveSubviewAfter:function(g,e){d(this,g,e,!0)}});var f=t.ConstantLayout=new u("ConstantLayout",h,{setTargetAttrName:function(g){this.setterName=t.AccessorSupport.generateSetterName(g);
k(this,"targetAttrName",g)},setTargetValue:function(g){k(this,"targetValue",g)},update:function(){if(this.canUpdate()){const g=this.setterName,e=this.targetValue,c=this.subviews,q=c.length;if(g)for(let n=0;q>n;)c[n++][g](e)}}});f=t.VariableLayout=new u("VariableLayout",f,{initNode:function(g,e){this.collapseParent=this.reverse=!1;this.callSuper(g,e)},setCollapseParent:function(g){k(this,"collapseParent",g)},setReverse:function(g){k(this,"reverse",g)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const e=this.setterName,c=this.subviews;var g=c.length;let q=this.targetValue,n,p=0;if(this.reverse)for(n=g;n;)g=c[--n],this.skipSubview(g)||(q=this.updateSubview(++p,g,e,q));else for(n=0;g>n;){const r=c[n++];this.skipSubview(r)||(q=this.updateSubview(++p,r,e,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(e,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(g){this.attachTo(g,
"update","visible")},stopMonitoringSubview:function(g){this.detachFrom(g,"update","visible")},updateSubview:(g,e,c,q)=>{e[c](q);return q},skipSubview:g=>!g.visible,updateParent:(g,e)=>{}});const b=t.SpacedLayout=new u("SpacedLayout",f,{initNode:function(g,e){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(g,e)},setTargetAttrName:function(g){if(this.targetAttrName!==
g){const e="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=e?"boundsHeight":"boundsWidth";this.measureAttrBaseName=e?"height":"width";this.parentSetterName=e?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(g)}},setNoAddSubviewOptimization:function(g){this.noAddSubviewOptimization=g},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){k(this,"spacing",g)},setOutset:function(g){k(this,
"outset",g)},addSubview:function(g){const e=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(g);this.locked=e},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},updateSubview:function(g,e,c,q){g=e[this.measureAttrName];e[c](q+(g-e[this.measureAttrBaseName])/2);return q+g+this.spacing},updateParent:function(g,e){this.parent[this.parentSetterName](e+
this.outset-this.spacing)}});t.ResizeLayout=new u("ResizeLayout",b,{setCollapseParent:g=>{},setTargetAttrName:function(g){if(this.targetAttrName!==g){if(this.inited){const e="x"===g;this.stopMonitoringParent(e?"height":"width");this.startMonitoringParent(e?"width":"height")}this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const e="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(e);this.callSuper(g);this.parent&&this.startMonitoringParent(e)}},startMonitoringParent:function(g){this.attachTo(this.parent,
"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},doBeforeUpdate:function(){const g=this.measureAttrName,e=this.subviews;let c=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=e.length,n=0,p=0;for(;q;){const r=e[--q];this.skipSubview(r)||(++n,0<r.layoutHint?p+=r.layoutHint:c-=r[g])}0!==n&&(this.remainder=c-=(n-1)*this.spacing,this.resizeSum=p,this.scalingFactor=c/p,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===g?
"setWidth":"setHeight")},updateSubview:function(g,e,c,q){var n=e.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,e[this.measureSetter](n));return this.callSuper(g,e,c,q)},startMonitoringSubview:function(g){0<g.layoutHint||this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update","visible")},stopMonitoringSubview:function(g){0<g.layoutHint||this.detachFrom(g,"update",
this.measureAttrName);this.detachFrom(g,"update","visible")},updateParent:(g,e)=>{}});t.AlignedLayout=new u("AlignedLayout",f,{initNode:function(g,e){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(g,e)},setTargetAttrName:function(g){if(this.targetAttrName!==g){const e="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=
e?"boundsHeight":"boundsWidth";this.measureAttrBaseName=e?"height":"width";this.parentSetterName=e?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(g)}},setAlign:function(g){if(this.align!==g){this.align=g;const e=this.locked;this.locked=!0;this.setTargetAttrName("middle"===g||"bottom"===g||"top"===g?"y":"x");this.locked=e;this.inited&&(this.fireEvent("align",g),this.update())}},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},
stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},doBeforeUpdate:function(){const g=this.measureAttrName,e=this.subviews;let c=0,q=e.length;for(;q;){const n=e[--q];this.skipSubview(n)||(c=c>n[g]?c:n[g])}this.setTargetValue(c)},updateSubview:function(g,e,c,q){switch(this.align){case "center":case "middle":e[c]((q-e[this.measureAttrName])/2);break;case "right":case "bottom":e[c](q-e[this.measureAttrName]);break;default:e[c](0)}return q},updateParent:function(g,
e){this.parent[this.parentSetterName](e)}});t.WrappingLayout=new u("WrappingLayout",f,{initNode:function(g,e){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(g,e)},
setTargetAttrName:function(g){if(this.targetAttrName!==g){const e="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=e?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=e?"height":"width";this.otherMeasureAttrName=e?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=e?"width":"height";this.parentSetterName=e?"setWidth":"setHeight";this.otherSetterName=e?"setX":"setY";c&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(q));
this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const e="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(e?"height":"width");this.callSuper(g);this.parent&&this.startMonitoringParent(e?"height":"width")}},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){k(this,"spacing",g)},setOutset:function(g){k(this,"outset",g)},setLineSpacing:function(g){k(this,"lineSpacing",g)},setLineInset:function(g){k(this,
"lineInset",g)},setLineOutset:function(g){k(this,"lineOutset",g)},startMonitoringParent:function(g){this.attachTo(this.parent,"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update",this.otherMeasureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.detachFrom(g,"update",this.otherMeasureAttrName);
this.callSuper(g)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(g,e,c,q){g=e[this.measureAttrName];const n=e[this.otherMeasureAttrName];q+g>this.parentSizeLessOutset||"break"===e.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);e[this.otherSetterName](this.linePos+
(n-e[this.otherMeasureAttrBaseName])/2);e[c](q+(g-e[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+g+this.outset);return q+g+this.spacing},updateParent:function(g,e){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});t.createFixedThresholdCounter(h,1,"locked")})(myt);
(t=>{const x=Math.round,w=t.DomElementProxy,u=t.Geometry.rectContainsPoint,m=(c,q)=>{const n=t.global.focus.focusedView,p=c.getIDE();if(n===c||n?.isDescendantOf(c))n._ignoreFocus=!0;const {scrollTop:r,scrollLeft:z}=p;q();n&&(n._ignoreFocus=!1,n.focus(!0));p.scrollTop=r;p.scrollLeft=z},a=(c,q,n)=>{const p=c.getODE(),r=p.parentNode;if(r){const z=()=>{const D=p.nextElementSibling;r.removeChild(p);q();r.insertBefore(p,D)};n?m(c,z):z()}else q()},d=(c,q,n,p)=>{if(q&&"object"===typeof q){if(p){var r=c.getLeastCommonAncestor(q)?.getIDE();
if(r){const z=w.getZIndexRelativeToAncestor,D=n?-1:1;p=D*z(c.getODE(),r);r=D*z(q.getODE(),r);if(p<r)return!0;if(r<p)return!1}}c=c.getODE().compareDocumentPosition(q.getODE());return n?2===c||10===c:4===c||20===c}return!1},k=c=>{c=c.getAncestors();let q=c.length,n=1,p=1;for(;q;){const r=c[--q];n*=r.scaleX||1;p*=r.scaleY||1;r.__effectiveScaleX=n;r.__effectiveScaleY=p}return{scaleX:n,scaleY:p}},h=(c,q,n)=>{const p=c.getODE();if(u(q,n,0,0,p.offsetWidth*c.__effectiveScaleX,p.offsetHeight*c.__effectiveScaleY)){if(c=
c.parent){const r=c.getIDE();return h(c,q+(p.offsetLeft-r.scrollLeft)*c.__effectiveScaleX,n+(p.offsetTop-r.scrollTop)*c.__effectiveScaleY)}return!0}return!1},f=c=>{switch(c.align){case "center":c.releaseConstraint("__doAlignCenter");break;case "right":c.releaseConstraint("__doAlignRight")}},b=c=>{const q=c.parent;if(q)switch(c.align){case "center":c.constrain("__doAlignCenter",[c,"width",c,"alignOffset",q,"width"]);break;case "right":c.constrain("__doAlignRight",[c,"width",c,"alignOffset",q,"width"]);
break;case "left":c.setX(c.alignOffset||0)}},g=c=>{switch(c.valign){case "middle":c.releaseConstraint("__doValignMiddle");break;case "bottom":c.releaseConstraint("__doValignBottom")}},e=c=>{const q=c.parent;if(q)switch(c.valign){case "middle":c.constrain("__doValignMiddle",[c,"height",c,"valignOffset",q,"height"]);break;case "bottom":c.constrain("__doValignBottom",[c,"height",c,"valignOffset",q,"height"]);break;case "top":c.setY(c.valignOffset||0)}};t.View=new JS.Class("View",t.Node,{include:[w,t.DomObservable,
t.DomObserver,t.ScrollObservable,t.FocusObservable,t.KeyObservable,t.MouseObservable],extend:{retainFocusDuringDomUpdate:m,doWhileRemovedFromDom:a},initNode:function(c,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(c));const n=this.getODS();n.left=n.top="0px";this.callSuper(c,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(c){c=document.createElement(this.tagName??
"div");c.style.position="absolute";let q;c.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return c},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(c){this.parent!==c&&(this.inited&&(f(this),g(this)),this.callSuper(c),this.align&&b(this),this.valign&&e(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const c=[],q=this.getIDE().children,n=q.length;for(let p=0;p<n;){const r=q[p++].model;r?.parent===this&&c.push(r)}return c},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(c=>c!==this)},setFocusTrap:function(c){this.focusTrap=c},setFocusCage:function(c){this.focusCage=c},setMaskFocus:function(c){this.maskFocus=c},setLayoutHint:function(c){this.layoutHint=c},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(c){if(this.ignoreLayout!==
c){var q=this.inited&&this.parent;let n;if(c){if(q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].removeSubview(this);this.ignoreLayout=c}else if(this.ignoreLayout=c,q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].addSubview(this)}},setDomClass:function(c){this.domClass!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domClass",c))},setDomId:function(c){this.domId!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domId",c))},setAlignOffset:function(c){this.alignOffset!==c&&(this.alignOffset=
c,this.inited&&this.fireEvent("alignOffset",c),this.parent&&"left"===this.align&&this.setX(c))},setAlign:function(c){this.align!==c&&(this.inited&&f(this),this.align=c,this.inited&&(this.fireEvent("align",c),b(this)))},__doAlignCenter:function(c){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(c){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(c){this.valignOffset!==c&&(this.valignOffset=c,this.inited&&this.fireEvent("valignOffset",
c),this.parent&&"top"===this.valign&&this.setY(c))},setValign:function(c){this.valign!==c&&(this.inited&&g(this),this.valign=c,this.inited&&(this.fireEvent("valign",c),e(this)))},__doValignMiddle:function(c){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(c){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(c){this.x!==c&&(this.x=c,this.visible&&(this.getODS().left=c+"px"),this.inited&&this.fireEvent("x",c))},setY:function(c){this.y!==
c&&(this.y=c,this.visible&&(this.getODS().top=c+"px"),this.inited&&this.fireEvent("y",c))},setWidth:function(c){0>c&&(c=0);this.width!==c&&(this.width=c,this.getODS().width=c+"px",this.inited&&(this.__updateBounds(c,this.height),this.fireEvent("width",c)))},setHeight:function(c){0>c&&(c=0);this.height!==c&&(this.height=c,this.getODS().height=c+"px",this.inited&&(this.__updateBounds(this.width,c),this.fireEvent("height",c)))},setDomMinWidth:function(c,q){(q?this.getIDS():this.getODS()).minWidth=null!=
c?c+"px":null},getDomMinWidth:function(c){c=(c?this.getIDS():this.getODS()).minWidth;return null!=c?Number.parseInt(c):null},setDomMinHeight:function(c,q){(q?this.getIDS():this.getODS()).minHeight=null!=c?c+"px":null},getDomMinHeight:function(c){c=(c?this.getIDS():this.getODS()).minHeight;return null!=c?Number.parseInt(c):null},setTextColor:function(c){this.textColor!==c&&(this.textColor=c,this.getODS().color=c||"inherit",this.inited&&this.fireEvent("textColor",c))},setBgColor:function(c){this.bgColor!==
c&&(this.getODS().backgroundColor=this.bgColor=c,this.inited&&this.fireEvent("bgColor",c))},isColorAttr:c=>"bgColor"===c||"textColor"===c,setOpacity:function(c){this.opacity!==c&&(this.getODS().opacity=this.opacity=c,this.inited&&this.fireEvent("opacity",c))},setOverflow:function(c){const q=this.overflow;if(q!==c){this.overflow=c;const n=this.getIDS();if("autox"===c)n.overflowX="auto",n.overflowY="hidden";else if("autoy"===c)n.overflowY="auto",n.overflowX="hidden";else{if("autox"===q||"autoy"===q)n.overflowX=
n.overflowY=null;n.overflow=c||"visible"}this.inited&&this.fireEvent("overflow",c)}},setVisible:function(c){if(this.visible!==c){this.visible=c;const q=this.getODS();q.visibility=c?"inherit":"hidden";q.left=c?this.x+"px":"-100000px";q.top=c?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",c)}},setPointerEvents:function(c){this.pointerEvents!==c&&(this.pointerEvents=c,this.getODS().pointerEvents=c||"auto",this.inited&&this.fireEvent("pointerEvents",c))},setCursor:function(c){this.cursor!==
c&&(this.cursor=c,this.getODS().cursor=c||"auto",this.inited&&this.fireEvent("cursor",c))},__updateBounds:function(c,q){this.boundsWidth!==c&&this.fireEvent("boundsWidth",this.boundsWidth=c);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(c){const [q,n,p]=c??[];this.setOutlineWidth(q);this.setOutlineStyle(n);this.setOutlineColor(p)},setOutlineWidth:function(c){this.getODS().outlineWidth=(this.outlineWidth=c||0)+"px"},setOutlineStyle:function(c){this.getODS().outlineStyle=
this.outlineStyle=c||"none"},setOutlineColor:function(c){this.getODS().outlineColor=this.outlineColor=c||"#000"},setBorder:function(c){const [q,n,p]=c??[];this.setBorderWidth(q);this.setBorderStyle(n);this.setBorderColor(p)},setBorderWidth:function(c){this.getODS().borderWidth=(this.borderWidth=c||0)+"px"},setBorderStyle:function(c){this.getODS().borderStyle=this.borderStyle=c||"none"},setBorderColor:function(c){this.getODS().borderColor=this.borderColor=c||"#000"},setRoundedCorners:function(c){this.getODS().borderRadius=
c+"px"},setRoundedTopLeftCorner:function(c){this.getODS().borderTopLeftRadius=c+"px"},setRoundedTopRightCorner:function(c){this.getODS().borderTopRightRadius=c+"px"},setRoundedBottomLeftCorner:function(c){this.getODS().borderBottomLeftRadius=c+"px"},setRoundedBottomRightCorner:function(c){this.getODS().borderBottomRightRadius=c+"px"},setBoxShadow:function(c){const [q,n,p,r]=c??[];this.getODS().boxShadow=c?(q||0)+"px "+(n||0)+"px "+(p||7)+"px "+(r||"#000"):"none"},setGradient:function(c){const q=this.getODS();
if(c){let p=c[0];"linear"===p||"radial"===p?c.shift():p="linear";let r=c[0];if("radial"===p){void 0===r?r="closest-side":c.shift();var n=c[0];if(void 0===n)n="circle";else{switch(n){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",n),n="circle"}c.shift()}let z=c[0];void 0===z?z="center":(z=z.replaceAll("middle","center"),c.shift());r=n+" "+r+" at "+z}else"number"===typeof r?(r+="deg",c.shift()):r?(r="to "+r,c.shift()):r="0deg";n=z=>{c.push(z&&"inherit"!==
z?z:"transparent")};2>c.length&&n(this.textColor);2>c.length&&n(this.bgColor);q.background=p+"-gradient("+r+","+c.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(c){this.tooltip!==c&&(this.tooltip=this.getODE().title=c,this.inited&&this.fireEvent("tooltip",c))},isVisible:function(){return null==this.searchAncestorsOrSelf(c=>!c.visible)},getFocusTrap:function(c){return this.searchAncestorsOrSelf(q=>q.focusCage||q.focusTrap&&!c)},subnodeAdded:function(c){c instanceof
t.View?(this.getIDE().appendChild(c.getODE()),this.getSubviews().push(c),this.fireEvent("subviewAdded",c),this.subviewAdded(c)):c instanceof t.Layout&&(this.getLayouts().push(c),this.fireEvent("layoutAdded",c),this.layoutAdded(c))},subnodeRemoved:function(c){let q;c instanceof t.View?(q=this.getSubviewIndex(c),-1<q&&(this.fireEvent("subviewRemoved",c),c.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(c))):c instanceof t.Layout&&(q=this.getLayoutIndex(c),-1<q&&(this.fireEvent("layoutRemoved",
c),this.layouts.splice(q,1),this.layoutRemoved(c)))},hasSubview:function(c){return this.getSubviews().includes(c)},getSubviewIndex:function(c){return this.getSubviews().indexOf(c)},subviewAdded:c=>{},subviewRemoved:c=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(c){return this.getLayouts().includes(c)},getLayoutIndex:function(c){return this.getLayouts().indexOf(c)},
layoutAdded:c=>{},layoutRemoved:c=>{},isBehind:function(c,q){return d(this,c,!1,q)},isInFrontOf:function(c,q){return d(this,c,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(c){this.parent.sendSubviewBehind(this,c)},sendInFrontOf:function(c){this.parent.sendSubviewInFrontOf(this,c)},doSubviewsReorderedInDom:c=>{},bringSubviewToFront:function(c){const q=this;if(c?.parent===q){const n=q.getIDE(),p=c.getODE();
p!==n.lastElementChild&&m(c,()=>{n.appendChild(p);q.doSubviewsReorderedInDom(c)})}},sendSubviewToBack:function(c){const q=this;if(c?.parent===q){const n=q.getIDE(),p=n.firstElementChild,r=c.getODE();r!==p&&m(c,()=>{n.insertBefore(r,p);q.doSubviewsReorderedInDom(c)})}},sendSubviewBehind:function(c,q){const n=this;if(c?.parent===n&&q?.parent===n){const p=c.getODE(),r=q.getODE();if(p!==r.previousElementSibling){const z=n.getIDE();m(c,()=>{z.insertBefore(p,r);n.doSubviewsReorderedInDom(c)})}}},sendSubviewInFrontOf:function(c,
q){const n=this;if(c?.parent===n&&q?.parent===n){const p=c.getODE(),r=q.getODE().nextElementSibling;if(p!==r){const z=n.getIDE();m(c,()=>{z.insertBefore(p,r);n.doSubviewsReorderedInDom(c)})}}},sortSubviews:function(c){const q=this,n=q.getSubviews();t.isNotSorted(n,c)&&(n.sort(c),a(q,()=>{const p=document.createDocumentFragment(),r=n.length;for(let z=0;r>z;)p.appendChild(n[z++].getODE());q.getIDE().appendChild(p)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(c,q,n){const p=this.getODE();
if(!p)return!1;const {x:r,y:z}=w.getRelativePosition(p,n);return u(c,q,r,z,this.width,this.height)},isPointVisible:function(c,q){const {x:n,y:p}=this.getPagePosition(!0);k(this);return h(this,c-n,q-p)},intersectsWithSibling:function(c){return c.parent===this.parent&&!(c.x>this.x+this.width||c.x+c.width<this.x||c.y>this.y+this.height||c.y+c.height<this.y)},getEffectiveScale:function(){return k(this)},getEffectiveScaleX:function(){return k(this).scaleX},getEffectiveScaleY:function(){return k(this).scaleY}})})(myt);
(t=>{const x=(u,m,a)=>{const d=w(u,m);u.getODS().transform=d+(0===d.length?"":" ")+m+"("+a+")"},w=(u,m)=>{u=u.getODS();var a=u.transform;if(!a||0===a.length)return"";a=a.split(" ");let d=a.length;for(;d;)if(a[--d].startsWith(m)){a.splice(d,1);break}return u.transform=a.join(" ")};t.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(u){this.transformOrigin!==u&&(this.transformOrigin=u,this.getODS().transformOrigin=u||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",u)))},setRotation:function(u){this.rotation!==u&&(this.rotation=u,x(this,"rotate",(u||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",u)))},setScale:function(u){const m=this.scaleX!==u,a=this.scaleY!==u;if(m){var d=this.scaleX=u;null==d?w(this,"scaleX"):x(this,"scaleX",d||1)}a&&(d=this.scaleY=u,null==d?w(this,"scaleY"):x(this,"scaleY",d||1));this.inited&&((m||a)&&this.__updateBounds(this.width,this.height),
m&&this.fireEvent("scaleX",u),a&&this.fireEvent("scaleY",u))},setScaleX:function(u){if(this.scaleX!==u){var m=this.scaleX=u;null==m?w(this,"scaleX"):x(this,"scaleX",m||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",u))}},setScaleY:function(u){if(this.scaleY!==u){var m=this.scaleY=u;null==m?w(this,"scaleY"):x(this,"scaleY",m||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",u))}},setSkewX:function(u){this.skewX!==u&&(this.skewX=
u,x(this,"skewX",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",u)))},setSkewY:function(u){this.skewY!==u&&(this.skewY=u,x(this,"skewY",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",u)))},__updateBounds:function(u,m){const {rotation:a,scaleX:d,scaleY:k}=this,h=(null==d||1===d)&&(null==k||1===k);if(!h||null!=a&&0!==a&&180!==a)!h||90!==a&&270!==a?{width:u,height:m}=this.getODE().getBoundingClientRect():{width:m,height:u}=
this;this.callSuper(u,m)}})})(myt);
(t=>{const x=JS.Module,w=(d,k)=>{if("auto"===k)d.__hasSetWidth=!1,d.getODS().width="auto",d.sizeViewToDom();else return d.__hasSetWidth=!0},u=(d,k)=>{if("auto"===k)d.__hasSetHeight=!1,d.getODS().height="auto",d.sizeViewToDom();else return d.__hasSetHeight=!0},m=d=>{if(!d.__hasSetWidth){const k=d.getODE().offsetWidth/d.getEffectiveScaleX();d.width!==k&&(d.width=k,d.inited&&d.__updateBounds(k,d.height),d.fireEvent("width",k))}},a=d=>{if(!d.__hasSetHeight){const k=d.getODE().offsetHeight/d.getEffectiveScaleY();
d.height!==k&&(d.height=k,d.inited&&d.__updateBounds(d.width,k),d.fireEvent("height",k))}};t.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:m,sizeHeight:a},initNode:function(d,k){this.callSuper(d,k);this.sizeViewToDom()},setWidth:function(d){w(this,d)&&this.callSuper(d)},setHeight:function(d){u(this,d)&&this.callSuper(d)},sizeViewToDom:function(){m(this);a(this)}});t.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(d,k){this.callSuper(d,k);this.sizeViewToDom()},setWidth:function(d,k){w(this,
d)&&this.callSuper(d,k)},sizeViewToDom:function(){m(this)}});t.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(d,k){this.callSuper(d,k);this.sizeViewToDom()},setHeight:function(d,k){u(this,d)&&this.callSuper(d,k)},sizeViewToDom:function(){a(this)}})})(myt);
(t=>{const x=JS.Module,w=(d,k,h,f)=>{d[h]!==k&&(d[h]=k,d.getIDS()[h]=k||f||"inherit",d.inited&&(d.fireEvent(h,k),d.sizeViewToDom()))};t.TextSupport=new x("TextSupport",{setWidth:function(d){this.callSuper(d);"auto"!==d&&(d=this.whiteSpace,"normal"!==d&&"pre-line"!==d&&"pre-wrap"!==d&&"break-spaces"!==d||this.sizeViewToDom())},setText:function(d){d||="";d=this.valueFromEvent(d);this.text!==d&&(this.getIDE().innerHTML=this.text=d,this.inited&&(this.fireEvent("text",d),this.sizeViewToDom()))},setTextOverflow:function(d){this.textOverflow!==
d&&(this.textOverflow=d,this.getIDS().textOverflow=d||"inherit",this.inited&&this.fireEvent("textOverflow",d))},setTextAlign:function(d){this.textAlign!==d&&(this.textAlign=d,this.getIDS().textAlign=d||"inherit",this.inited&&this.fireEvent("textAlign",d))},setWhiteSpace:function(d){w(this,d,"whiteSpace")},setWordWrap:function(d){w(this,d,"wordWrap","normal")},setTextIndent:function(d){w(this,d,"textIndent")},setTextTransform:function(d){w(this,d,"textTransform")},setTextDecoration:function(d){w(this,
d,"textDecoration")},setLineHeight:function(d){w(this,d,"lineHeight")},setLetterSpacing:function(d){w(this,d,"letterSpacing")},setWordSpacing:function(d){w(this,d,"wordSpacing")},setFontFamily:function(d){w(this,d,"fontFamily")},setFontStyle:function(d){w(this,d,"fontStyle")},setFontVariant:function(d){w(this,d,"fontVariant")},setFontWeight:function(d){w(this,d,"fontWeight")},setFontSize:function(d){w(this,d,"fontSize")},setUserUnselectable:function(d){this.userUnselectable!==d&&(this.userUnselectable=
d,this[d?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(d?"default":"text"),this.inited&&this.fireEvent("userUnselectable",d))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(d,k,h,f){this.getIDS().textShadow=(d||0)+"px "+(k||0)+"px "+(null!=h?h:2)+"px "+(f||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const u=(d,k,h)=>{const f="padding"+h;k=Math.max(k,0);d[f]!==k&&(d[f]=k,d.getIDS()[f]=k+"px",d.fireEvent(f,k),"Left"===h||"Right"===h?m(d):a(d))},m=d=>{d.__hasSetWidth&&(d.getODS().width=d.width-(d.paddingLeft||0)-(d.paddingRight||0)+"px",d.inited&&d.sizeViewToDom())},a=d=>{d.__hasSetHeight&&(d.getODS().height=d.height-(d.paddingTop||0)-(d.paddingBottom||0)+"px",d.inited&&d.sizeViewToDom())};t.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(d){this.callSuper(d);m(this)},setHeight:function(d){this.callSuper(d);
a(this)},setPadding:function(d){let k,h,f;d||=0;"object"===typeof d?(k=d.top||0,h=d.right||0,f=d.bottom||0,d=d.left||0):k=h=f=d;this.setPaddingTop(k);this.setPaddingRight(h);this.setPaddingBottom(f);this.setPaddingLeft(d)},setPaddingTop:function(d){u(this,d,"Top")},setPaddingRight:function(d){u(this,d,"Right")},setPaddingBottom:function(d){u(this,d,"Bottom")},setPaddingLeft:function(d){u(this,d,"Left")}})})(myt);
(t=>{const x={},w={},u=m=>{const a=m.imageUrl;if(m.calculateNaturalSize&&a){var d=x[a];if(d)m.setNaturalWidth(d.width),m.setNaturalHeight(d.height);else{d=w[a];if(!d){w[a]=d=[];const k=new Image;k.onerror=h=>{if(h=w[a]){let f=h.length;for(;f;)h[--f].setImageLoadingError(!0);h.length=0;delete w[a]}};k.onload=()=>{const h=k.width,f=k.height,b=w[a];if(b){let g=b.length;for(;g;){const e=b[--g];e.imageUrl===a&&(e.setNaturalWidth(h),e.setNaturalHeight(f))}b.length=0;delete w[a]}x[a]={width:h,height:f}};
k.src=a}d.push(m)}}};t.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:m=>x[m]},initNode:function(m,a){a.imageRepeat??(a.imageRepeat="no-repeat");a.imageAttachment??(a.imageAttachment="scroll");this.callSuper(m,a)},setImageUrl:function(m){this.imageUrl!==m&&(this.imageUrl=m,this.getIDS().backgroundImage=m?'url("'+m+'")':"none",this.inited&&(this.fireEvent("imageUrl",m),this.setNaturalWidth(),this.setNaturalHeight(),!m&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
u(this))},setImageLoadingError:function(m){this.set("imageLoadingError",m,!0)},setImageSize:function(m){this.imageSize!==m&&(this.imageSize=m,this.getIDS().backgroundSize=m||"auto",this.inited&&this.fireEvent("imageSize",m))},setImageRepeat:function(m){this.imageRepeat!==m&&(this.getIDS().backgroundRepeat=this.imageRepeat=m,this.inited&&this.fireEvent("imageRepeat",m))},setImagePosition:function(m){this.imagePosition!==m&&(this.getIDS().backgroundPosition=this.imagePosition=m,this.inited&&this.fireEvent("imagePosition",
m))},setImageAttachment:function(m){this.imageAttachment!==m&&(this.getIDS().backgroundAttachment=this.imageAttachment=m,this.inited&&this.fireEvent("imageAttachment",m))},setCalculateNaturalSize:function(m){this.calculateNaturalSize!==m&&(this.calculateNaturalSize=m,this.inited&&this.fireEvent("calculateNaturalSize",m),u(this))},setNaturalWidth:function(m){this.naturalWidth!==m&&(this.naturalWidth=m,this.inited&&this.fireEvent("naturalWidth",m),this.useNaturalSize&&m&&this.setWidth(m))},setNaturalHeight:function(m){this.naturalHeight!==
m&&(this.naturalHeight=m,this.inited&&this.fireEvent("naturalHeight",m),this.useNaturalSize&&m&&this.setHeight(m))},setUseNaturalSize:function(m){this.useNaturalSize!==m&&(this.useNaturalSize=m,this.inited&&this.fireEvent("useNaturalSize",m),m&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),m&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(t=>{const x=JS.Class,{View:w,SizeToDom:u}=t;t.Flexbox=new x("Flexbox",w,{include:[t.FlexboxSupport]});t.Frame=new x("Frame",w,{initNode:function(m,a){a.tagName??(a.tagName="iframe");this.callSuper(m,a);m=t.global.mouse;this.attachToDom(m,"__doMouseDown","mousedown",!0);this.attachToDom(m,"__doMouseUp","mouseup",!0)},createOurDomElement:function(m){m=this.callSuper(m);(Array.isArray(m)?m[1]:m).style.border="0px";return m},setSrc:function(m){this.src!==m&&(this.src=this.getIDE().src=m,this.inited&&
this.fireEvent("src",m))},__doMouseDown:function(m){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(m){this.setPointerEvents(this.__restorePointerEvents);return!0}});t.Markup=new x("Markup",w,{include:[u],setHtml:function(m){this.html!==m&&(this.getIDE().innerHTML=this.html=m,this.inited&&(this.fireEvent("html",m),this.sizeViewToDom()))}});t.Text=new x("Text",w,{include:[u,t.TextSupport],initNode:function(m,a){a.whiteSpace??(a.whiteSpace=
"nowrap");a.userUnselectable??(a.userUnselectable=!0);this.callSuper(m,a)},measureNoWrapWidth:function(){const m=this.__hasSetWidth,a=this.width;if(!m&&"nowrap"===this.whiteSpace)return a;const d=this.getIDS(),k=d.whiteSpace;m&&(d.width="auto");d.whiteSpace="nowrap";const h=this.getODE().getBoundingClientRect().width;d.whiteSpace=k;m&&(d.width=a);return h}});t.PaddedText=new x("PaddedText",t.Text,{include:[t.PaddedTextSupport]});t.Image=new x("Image",w,{include:[t.ImageSupport],initNode:function(m,
a){a.useNaturalSize??(a.useNaturalSize=!0);this.callSuper(m,a)}});t.BackView=new x("BackView",w,{sendSubviewToBack:function(m){if(m.parent===this){const a=this.getIDE(),d=a.childNodes[1];m=m.getODE();m!==d&&(m=a.removeChild(m))&&a.insertBefore(m,d)}}})})(myt);
(t=>{const x=Math.round,w=d=>{d.parent&&0<=d.percentOfParentWidth&&d.syncTo(d.parent,"__doPOPW","width")},u=d=>{0<=d.percentOfParentWidth&&d.detachFrom(d.parent,"__doPOPW","width")},m=d=>{d.parent&&0<=d.percentOfParentHeight&&d.syncTo(d.parent,"__doPOPH","height")},a=d=>{0<=d.percentOfParentHeight&&d.detachFrom(d.parent,"__doPOPH","height")};t.SizeToParent=new JS.Module("SizeToParent",{setParent:function(d){this.parent!==d&&(this.inited&&(u(this),a(this)),this.callSuper(d),w(this),m(this))},setPercentOfParentWidthOffset:function(d){this.percentOfParentWidthOffset!==
d&&(this.percentOfParentWidthOffset=d,this.inited&&(this.fireEvent("percentOfParentWidthOffset",d),this.__doPOPW()))},setPercentOfParentWidth:function(d){this.percentOfParentWidth!==d&&(this.inited&&u(this),this.percentOfParentWidth=d,this.inited&&this.fireEvent("percentOfParentWidth",d),w(this))},setPercentOfParentHeightOffset:function(d){this.percentOfParentHeightOffset!==d&&(this.percentOfParentHeightOffset=d,this.inited&&(this.fireEvent("percentOfParentHeightOffset",d),this.__doPOPH()))},setPercentOfParentHeight:function(d){this.percentOfParentHeight!==
d&&(this.inited&&a(this),this.percentOfParentHeight=d,this.inited&&this.fireEvent("percentOfParentHeight",d),m(this))},__doPOPW:function(d){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(d){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(t=>{let x;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[t.Observable],initialize:function(){t.global.register("roots",x=this)},getRoots:()=>w,addRoot:u=>{w.push(u);x.fireEvent("rootAdded",u)},removeRoot:u=>{const m=w.indexOf(u);-1<m&&(w.splice(m,1),x.fireEvent("rootRemoved",u))}})})(myt);
(t=>{const {addEventListener:x,removeEventListener:w,global:{roots:u}}=t,m=t.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:a=>{const d=a.getIDE();a=a.__captureDrop=k=>{k.preventDefault()};x(d,"drop",a);x(d,"dragover",a)},teardownCaptureDrop:a=>{const d=a.getIDE();a=a.__captureDrop;w(d,"drop",a);w(d,"dragover",a)}},initNode:function(a,d){this.callSuper(a,d);this.setZIndex(0);this.addDomClass("myt");u.addRoot(this);m.setupCaptureDrop(this)},createOurDomElement:function(a){a||(a=this.callSuper(a),
t.getElement().appendChild(a));return a},destroy:function(){m.teardownCaptureDrop(this);u.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(a){this.keepDomElementWhenDestroyed=a},setParent:a=>{},bringToFront:function(){var a=this.getIDE();const d=a.parentNode;a!==d.lastChild&&(a=d.removeChild(a))&&d.appendChild(a)},sendToBack:function(){var a=this.getIDE();const d=a.parentNode;a!==d.firstChild&&(a=d.removeChild(a))&&
d.insertBefore(a,d.firstChild)},sendBehind:function(a){var d=this.getIDE();a=a.getIDE();const k=d.parentNode;a.parentNode===k&&(d=k.removeChild(d))&&k.insertBefore(d,a)},sendInFrontOf:function(a){a.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(a),a.sendBehind(this))}})})(myt);
(t=>{let x,w,u=!1;const {requestAnimationFrame:m,cancelAnimationFrame:a}=window,d={},k=f=>{x=m(k);f=Math.round(f);-1!==w&&(d.delta=f-w,d.time=f,h.fireEvent("idle",d));w=f},h=new JS.Singleton("GlobalIdle",{include:[t.Observable],initialize:function(){t.global.register("idle",this)},attachObserver:(f,b,g)=>{f=h.callSuper(f,b,g);!u&&h.hasObservers("idle")&&(u=!0,w=-1,x=m(k));return f},detachObserver:(f,b,g)=>{f=h.callSuper(f,b,g);u&&!h.hasObservers("idle")&&(a(x),u=!1);return f}})})(myt);
(t=>{let x,w,u;const m=t.global,a=m.idle,d=window.document;new JS.Singleton("GlobalWindowResize",{include:[t.Observable,t.Observer],initialize:function(){x=this;x.attachTo(a,"__setup","idle");m.register("windowResize",x)},__setup:k=>{const h=d.body;h&&(x.detachFrom(a,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:w=h.clientWidth,h:u=h.clientHeight})})).observe(h))},getWidth:()=>w??=d.body.clientWidth,getHeight:()=>u??=d.body.clientHeight})})(myt);
(t=>{const x=JS.Module,w=t.global.windowResize,u=Math.max,m=d=>{const k=d.resizeDimension;"both"!==k&&"width"!==k||d.setWidth(u(d.minWidth,w.getWidth()));"both"!==k&&"height"!==k||d.setHeight(u(d.minHeight,w.getHeight()))},a=t.SizeToWindow=new x("SizeToWindow",{include:[t.RootView],initNode:function(d,k){this.minWidth=this.minHeight=0;k.resizeDimension??(k.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(d,k)},setResizeDimension:function(d){this.resizeDimension!==d&&
(this.resizeDimension=d,m(this))},setMinWidth:function(d){this.minWidth!==d&&(this.minWidth=d,m(this))},setMinHeight:function(d){this.minHeight!==d&&(this.minHeight=d,m(this))},__hndlResize:function(d){m(this)}});t.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[a],initNode:function(d,k){k.resizeDimension??(k.resizeDimension="width");this.callSuper(d,k)}});t.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[a],initNode:function(d,k){k.resizeDimension??(k.resizeDimension="height");this.callSuper(d,
k)}})})(myt);
(t=>{const x=Math,{min:w,max:u}=x,m=e=>w(255,u(0,x.round(e))),a=e=>m(e).toString(16).padStart(2,"0"),d=(e,c,q,n)=>(n?"#":"")+a(e)+a(c)+a(q),k=e=>new g((16711680&e)>>16,(65280&e)>>8,255&e),h=(e,c)=>{if("string"===typeof e)if(e.endsWith("%"))e=parseFloat(e.slice(0,-1))*c/100;else return 0;e=w(c,u(0,e))/c;return 1E-6>x.abs(1-e)?1:e},f=(e,c,q)=>{e=h(e,255);c=h(c,255);q=h(q,255);const n=u(e,c,q),p=n-w(e,c,q);if(0===p)return{h:0,s:0,v:n};let r;switch(n){case e:r=(c-q)/p+(c<q?6:0);break;case c:r=(q-e)/p+
2;break;case q:r=(e-c)/p+4}return{h:60*r,s:0===n?0:p/n,v:n}},b=(e,c,q)=>{e=6*h(e,360);c=h(c,100);q=h(q,100);var n=x.floor(e);const p=e-n;e=q*(1-c);const r=q*(1-p*c);c=q*(1-(1-p)*c);n%=6;return{red:255*[q,r,e,e,c,q][n],green:255*[c,q,q,r,e,e][n],blue:255*[e,e,c,q,q,r][n]}},g=t.Color=new JS.Class("Color",{extend:{toUnitRange:h,rgbToHsv:f,hsvToRgb:b,toHex:a,rgbToHex:d,cleanChannelValue:m,getRedChannel:e=>(16711680&e)>>16,getGreenChannel:e=>(65280&e)>>8,getBlueChannel:e=>255&e,makeColorFromNumber:k,makeColorFromHexString:e=>
{if(e)switch(e.startsWith("#")&&(e=e.slice(1)),e.length){case 0:e+="0";case 1:e+="0";case 2:e+="0";case 3:case 4:case 5:const [c,q,n]=e;return new g(parseInt(c+c,16),parseInt(q+q,16),parseInt(n+n,16));case 6:return k(parseInt(e,16));default:return k(parseInt(e.slice(0,6),16))}},makeColorFromHSV:(e,c,q)=>{const {red:n,green:p,blue:r}=b(e,c,q);return new g(n,p,r)},getLighterColor:(e,c)=>k(e).isLighterThan(k(c))?e:c,makeColorNumberFromChannels:(e,c,q)=>(m(e)<<16)+(m(c)<<8)+m(q),makeBlendedColor:(e,c,
q)=>new g(e.red+q*(c.red-e.red),e.green+q*(c.green-e.green),e.blue+q*(c.blue-e.blue))},initialize:function(e,c,q){this.setRed(e);this.setGreen(c);this.setBlue(q)},setRed:function(e){this.red=m(e)},setGreen:function(e){this.green=m(e)},setBlue:function(e){this.blue=m(e)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return d(this.red,this.green,this.blue,!0)},getHSV:function(){return f(this.red,this.green,this.blue)},isLighterThan:function(e){e=
this.getDiffFrom(e);return 0>e.red+e.green+e.blue},getDiffFrom:function(e){return{red:e.red-this.red,green:e.green-this.green,blue:e.blue-this.blue}},applyDiff:function(e){return this.add(e)},add:function(e){this.setRed(this.red+e.red);this.setGreen(this.green+e.green);this.setBlue(this.blue+e.blue);return this},subtract:function(e){this.setRed(this.red-e.red);this.setGreen(this.green-e.green);this.setBlue(this.blue-e.blue);return this},multiply:function(e){this.setRed(this.red*e);this.setGreen(this.green*
e);this.setBlue(this.blue*e);return this},divide:function(e){this.setRed(this.red/e);this.setGreen(this.green/e);this.setBlue(this.blue/e);return this},clone:function(){return new g(this.red,this.green,this.blue)},equals:function(e){return e===this||e?.isA?.(g)&&e.red===this.red&&e.green===this.green&&e.blue===this.blue}})})(myt);
(t=>{const {max:x,sin:w,cos:u,pow:m,sqrt:a,PI:d}=Math,k=2*d,h=d/2,f=t.global.idle,b=t.Color.makeColorFromHexString,g={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-u(n*h)+1,outSine:n=>w(n*h),inOutSine:n=>-(u(n*d)-1)/2,inCirc:n=>-(a(1-n*n)-1),outCirc:n=>a(1- --n*n),inOutCirc:n=>1>(n*=2)?-(a(1-n*n)-1)/2:(a(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:m(2,10*(n-1)),outExpo:n=>1===n?1:-m(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?m(2,10*(n-1))/2:(-m(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(m(2,10*--n)*w((1*n-.075)*k/.3)),outElastic:n=>0===n||1===n?n:m(2,-10*n)*w((1*n-.075)*k/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(m(2,10*--n)*w((1*n-.1125)*k/.45))/2:m(2,
-10*--n)*w((1*n-.1125)*k/.45)/2+1,inBack:(n,p=1.70158)=>(n/=1)*n*((p+1)*n-p),outBack:(n,p=1.70158)=>(n=n/1-1)*n*((p+1)*n+p)+1,inOutBack:(n,p=1.70158)=>1>(n*=2)?n*n*(((p*=1.525)+1)*n-p)/2:((n-=2)*n*(((p*=1.525)+1)*n+p)+2)/2,inBounce:n=>1-g.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?g.inBounce(n)/2:(g.outBounce(n-1)+1)/2},e=g.inOutQuad,c=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},q=(n,p)=>{const {running:r,paused:z,reverse:D,duration:I,repeat:K,__prog:J,easingFunction:M,callback:y}=n;if(r&&!z){D&&(p*=-1);p=J+p;let Q=0;p>I?(Q=p-I,p=I,++n.__loopCnt===K&&(Q=0)):0>p&&(Q=-p,p=0,0>--n.__loopCnt&&0<K&&(Q=0));var l=n.target??n.parent;if(l){const {relative:R,attribute:T,__isColorAnim:P,__loopCnt:ba,to:U}=n;var v=x(0,p/I),A=x(0,J/I);null==n.from&&(n.__tmpFrom=!0,n.from=R?P?"#000":0:l.get(T));A=M(v)-(R?M(A):0);var B=n.from,E=R?
l.get(T):B;v=l.set;if(P){var H=U,L=R;B=b(B);H=b(H);L=L?b(E):B;L.setRed(L.red+(H.red-B.red)*A);L.setGreen(L.green+(H.green-B.green)*A);L.setBlue(L.blue+(H.blue-B.blue)*A);A=L.getHtmlHexString()}else A=E+(U-B)*A;v.call(l,T,A);!D&&ba===K||D&&0>ba&&0<K?(n.setRunning(!1),y?.call(n,!0)):0<Q?(n.fireEvent("repeat",ba),n.__prog=D?I:0,q(n,Q)):n.__prog=p}else console.log("No target for animator",n),n.setRunning(!1),y?.call(n,!1)}};t.Animator=new JS.Class("Animator",t.Node,{include:[t.Reusable],extend:{easings:g},
initNode:function(n,p){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=e;this.callSuper(n,p);c(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const p=this.target??this.parent;this.__isColorAnim=p&&"function"===typeof p.isColorAttr?p.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),c(this);this[n?"attachTo":"detachFrom"](f,"__updateAnim",
"idle")}},setPaused:function(n){if(this.paused!==n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](f,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&c(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&c(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&c(this)},setEasingFunction:function(n){"string"===typeof n&&(n=g[n]);this.set("easingFunction",
n??e,!0)},setFrom:function(n){this.set("from",n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,p){const r=this,z=r.callback;z&&!p?r.setCallback(D=>{z.call(r,D);n.call(r,D)}):r.setCallback(n)},reset:function(n){c(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=e;this.reset(!1)},
__updateAnim:function(n){q(this,n.value.delta)}})})(myt);
(t=>{const x=Array.isArray,w=a=>{a.__additionalArgs=[];a.__pendingTransition="";a.__transDestinationState="";a.__transStage="leaveState"},u=(a,d)=>{if(a.__transInProgress){var k=a.__deferredTransitions;k??=a.__deferredTransitions=[];k.unshift(d)}else{a.__transInProgress=!0;k=d.shift();const h=d.shift();if(a.__pendingTransition)return 3;if(a.isFinished())return a.__transInProgress=!1,5;let f=a.map[a.current][h];f??=a.map["*"][h];if(f)return a.__pendingTransition=h,a.__transDestinationState=f,a.__additionalArgs=
d,a.resumeTransition(k);a.__transInProgress=!1;return 5}},m=a=>{a.__transInProgress=!1;const d=a.__deferredTransitions;if(d)for(;0<d.length;)u(a,d.pop())};t.StateMachine=new JS.Class("StateMachine",t.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(a,d){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(a,d)},setInitialState:function(a){if(""===this.current){if(x(a)){var d=a;a=d.shift()}else d=[];this.current=
this.initial=a;this.doEnterState("","",a,d);d={name:"",from:"",to:a,args:d};this.fireEvent("enter"+a,d);this.fireEvent("enter",d);this.isFinished()&&this.fireEvent("finished",d)}},setTerminalState:function(a){this.terminal=a},addTransitions:function(a){for(const d of a)this.addTransition(...d)},addTransition:function(a,d,k){d=d?x(d)?d:[d]:["*"];const h=this.map;let f=d.length;for(;f;){let b,g;((b=h)[g=d[--f]]??(b[g]={}))[a]=k}},doTransition:function(...a){a.unshift("sync");return u(this,a)},doAsyncTransition:function(...a){a.unshift("async");
return u(this,a)},resumeTransition:function(a){const d=this.__pendingTransition;if(!d)return 4;const k=this.current,h=this.__transDestinationState,f=this.__additionalArgs,b={name:d,from:k,to:h,args:f},g=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const e=this.doLeaveState(d,k,h,f);if(!1===e)return w(this),m(this),2;if("async"===e||"async"===a)return this.__transStage="enterState",g("start"+d,b),g("start",b),g("leave"+k,b),g("leave",b),m(this),3;g("start"+d,b);g("start",b);
g("leave"+k,b);g("leave",b);case "enterState":this.current=h,w(this),this.doEnterState(d,k,h,f),g("enter"+h,b),g("enter",b),g("end"+d,b),g("end",b),this.isFinished()&&g("finished",b)}m(this);return 1},doLeaveState:(a,d,k,h)=>{},doEnterState:(a,d,k,h)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(a){return x(a)?a.includes(this.current):this.current===a},can:function(a){return void 0!==this.map[this.current][a]?!0:void 0!==this.map["*"][a]}})})(myt);
(t=>{const x=(a,d)=>a.replicationIndex-d.replicationIndex,w=(a,d)=>{let k=a.length;for(;k;){const h=a[--k];h.decrementLockedCounter();d&&h.update()}},u=a=>{m(a);const d=a.template;d&&(a.__pool=new t.TrackActivesPool(d,a.parent))},m=a=>{const d=a.__pool;if(d){const k=a.parent.getLayouts();a=k;let h=a.length;for(;h;)a[--h].incrementLockedCounter();d.putActives();d.destroyPooledInstances();w(k,!1);d.destroy()}};t.Replicable=new JS.Module("Replicable",{include:[t.Reusable],replicate:function(a,d){this.replicationData=
a;this.replicationIndex=d},notify:(a,d)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(a,d){return d===this.replicationIndex&&a===this.replicationData}});t.Replicator=new JS.Class("Replicator",t.Node,{initNode:function(a,d){this.callSuper(a,d);u(this);this.doReplication()},destroy:function(){m(this);this.callSuper()},setTemplate:function(a){(this.template=a.includes(t.Replicable)?a:null)||t.dumpStack("Template not replicable");this.inited&&
(u(this),this.doReplication())},setData:function(a){this.data=a;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const a=this.__pool;let d;if(a){d=this.parent.getLayouts();for(var k=d.length;k;)d[--k].incrementLockedCounter();const h=(k=this.data)?k.length:0,f=a.getActives(),b=f.length,g=[];let e=b,c,q;for(f.sort(x);e;)if(c=f[--e],q=c.replicationIndex,q>=h||!c.alreadyHasReplicationData(k[q],q))g[q]=c;for(e=g.length;e;)(c=g[--e])&&
a.putInstance(c);for(e=0;h>e;++e)(e>=b||null!=g[e])&&a.getInstance().replicate(k[e],e);for(e=d.length;e;)d[--e].sortSubviews(x);w(d,!0)}},notify:function(a,d){var k=this.__pool;if(k){k=k.getActives();let h=k.length;for(;h;)k[--h].notify(a,d)}}})})(myt);
(t=>{const x=JS.Singleton,w=document,{DomElementProxy:u,DomObservable:m,global:{register:a}}=t;new x("GlobalMouse",{include:[u,m,t.MouseObservable],initialize:function(){this.setDomElement(w);a("mouse",this)}});new x("GlobalTouch",{include:[u,m,t.TouchObservable],initialize:function(){this.setDomElement(w);a("touch",this)}})})(myt);
(t=>{let x,w,u;const m=[],a=[],d=f=>{const b=u;b!==f&&(b&&(b.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(b),x("dragLeave",b)),u=f)&&(f.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(f),x("dragEnter",b))},k=f=>{let b=w;if(b!==f)if(w=f){b=f;for(const g of h(b,a))g.notifyDragStart(b);for(const g of h(b,m))g.notifyAutoScrollerDragStart(b);x("startDrag",f)}else{for(const g of h(b,a))g.notifyDragStop(b);for(const g of h(b,m))g.notifyAutoScrollerDragStop(b);x("stopDrag",f)}},h=(f,b)=>{if(f.destroyed)return[];
if(f.isAnyDragGroup())return b;const g=[];f=f.getDragGroups();let e=b.length;for(;e;){const c=b[--e];if(c.isAnyDropGroup())g.push(c);else{const q=c.getDropGroups();for(const n in f)if(q[n]){g.push(c);break}}}return g};new JS.Singleton("GlobalDragManager",{include:[t.Observable],initialize:function(){t.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:f=>{m.push(f)},unregisterAutoScroller:f=>{f=m.indexOf(f);-1<f&&m.splice(f,1)},registerDropTarget:f=>
{a.push(f)},unregisterDropTarget:f=>{f=a.indexOf(f);-1<f&&a.splice(f,1)},startDrag:f=>{k(f)},stopDrag:(f,b,g)=>{b.notifyDropped(u,g);g||u?.notifyDrop(b);d();k();u&&!g&&x("drop",[b,u])},updateDrag:(f,b)=>{const g=h(b,a);let e=g.length,c;if(0<e){const {pageX:q,pageY:n}=f.value;for(;e;)f=g[--e],f.willAcceptDrop(b)&&b.willPermitDrop(f)&&f.isPointVisible(q,n)&&(!c||f.isInFrontOf(c))&&(c=f)}d(c)}})})(myt);
(t=>{const x=JS.Module,{mouse:w,keys:u,idle:m}=t.global;t.Activateable=new x("Activateable",{doActivated:()=>{}});t.UpdateableUI=new x("UpdateableUI",{initNode:function(a,d){this.callSuper(a,d);this.updateUI()},updateUI:()=>{}});t.Disableable=new x("Disableable",{initNode:function(a,d){d.disabled??(d.disabled=!1);this.callSuper(a,d)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});t.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[u.CODE_ENTER,u.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,d){this.activateKeyDown="";d.activationKeys??(d.activationKeys=t.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,d);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=
a??[]},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const d=t.KeyObservable.getCodeFromEvent(a);this.activationKeys.includes(d)&&(this.activateKeyDown===d?this.doActivationKeyDown(d,!0):(this.activateKeyDown=d,this.doActivationKeyDown(d,!1)),a.value.preventDefault())}},__hndlKeyPress:function(a){if(!this.disabled){const d=t.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===d&&this.activationKeys.includes(d)&&
a.value.preventDefault()}},__hndlKeyUp:function(a){if(!this.disabled){const d=t.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===d&&this.activationKeys.includes(d)&&(this.activateKeyDown="",this.doActivationKeyUp(d),a.value.preventDefault())}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,d)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});t.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(a,d){switch(a){case u.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,d))return;break;case u.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,d))return;break;case u.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,d))return;break;case u.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,d))return}this.callSuper(a,d)},doKeyArrowLeftOrUp:(a,d)=>{},doKeyArrowRightOrDown:(a,d)=>{}});t.MouseOver=new x("MouseOver",{initNode:function(a,d){d.mouseOver??(d.mouseOver=
!1);this.callSuper(a,d);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(m,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(m,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI?.()},doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});t.MouseDown=new x("MouseDown",{initNode:function(a,d){d.mouseDown??(d.mouseDown=!1);this.callSuper(a,
d);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated?.()}});t.MouseOverAndDown=new x("MouseOverAndDown",{include:[t.MouseOver,t.MouseDown]});t.Draggable=new x("Draggable",{initNode:function(a,d){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let k=!0;null!=d.isDraggable&&(k=d.isDraggable,delete d.isDraggable);this.callSuper(a,d);this.setIsDraggable(k)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;let d;a?d=this.attachToDom:this.inited&&(d=this.detachFromDom);if(d){a=this.getDragViews();let k=a.length;for(;k;){const h=a[--k];d.call(this,h,"__doMouseDown","mousedown");d.call(this,h,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",
a,!0)},setDragOffsetX:function(a,d){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDragOffsetY:function(a,d){this.dragOffsetY!==a&&(this.dragOffsetY=a,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},
getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const d=t.MouseObservable.getMouseFromEvent(a),k=this.getODE();this.dragInitX=d.x-k.offsetLeft;this.dragInitY=d.y-k.offsetTop;this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(w,"__doMouseUp",
"mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===u.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const d=t.MouseObservable.getMouseFromEvent(a);t.Geometry.measureDistance(d.x,d.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(u,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(a)},updateDrag:function(a){this.__lastMousePosition=t.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,d){this.detachFromDom(w,
"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(u,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,d){this.disabled||(this.setX(a),this.setY(d))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,{View:u,KeyActivation:m}=t;var a=t.Button=new w("Button",{include:[t.Activateable,t.UpdateableUI,t.Disableable,t.MouseOverAndDown,m],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(k,h){h.focusable??(h.focusable=!0);h.cursor??(h.cursor="pointer");this.callSuper(k,h)},setFocused:function(k){const h=this.focused;this.callSuper(k);this.inited&&this.focused!==h&&this.updateUI()},doActivationKeyDown:function(k,h){h||this.updateUI()},doActivationKeyUp:function(k){this.callSuper(k);
this.updateUI()},doActivationKeyAborted:function(k){this.callSuper(k);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const k=this.__restoreCursor;k&&(this.setCursor(k),this.__restoreCursor=null);this.activateKeyDown!==m.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});a=t.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[a],setActiveColor:function(k){this.activeColor!==k&&(this.activeColor=k,this.inited&&this.updateUI())},setHoverColor:function(k){this.hoverColor!==k&&(this.hoverColor=k,this.inited&&this.updateUI())},setReadyColor:function(k){this.readyColor!==
k&&(this.readyColor=k,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(k,h=1){this.setOpacity(h);this.setBgColor(k)}});const d=t.SimpleButton=new x("SimpleButton",u,{include:[a],initNode:function(k,h){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(k,
h)}});t.SimpleTextButton=new x("SimpleTextButton",d,{initNode:function(k,h){this.inset=this.outset=0;h.shrinkToFit??(h.shrinkToFit=!1);h.height??(h.height=24);h.textY??(h.textY="middle");this.callSuper(k,h);k=this.textY;h={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof k?h.valign=k:h.y=k;k=this.textView=new t.Text(this,h);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",k,"visible",k,"width",
k,"height",k,"y"])},setInset:function(k){this.set("inset",this.valueFromEvent(k),!0)},setOutset:function(k){this.set("outset",this.valueFromEvent(k),!0)},setText:function(k){this.text!==k&&(this.text=k,this.inited&&(this.textView.setText(k),this.fireEvent("text",k)))},setShrinkToFit:function(k){this.shrinkToFit!==k&&(this.shrinkToFit=k,this.inited&&(this.textView.setWhiteSpace(k?"nowrap":"normal"),this.fireEvent("shrinkToFit",k)))},setTextY:function(k){if(this.textY!==k&&(this.textY=k,this.inited)){const h=
this.textView;this.fireEvent("textY",k);"string"===typeof k?h.setValign(k):(h.setValign(""),h.setY(k))}},__updateContent:function(k){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:h,outset:f,textView:b}=this;this.__updateContentLoopBlock=!0;b.setX(h);this.shrinkToFit?this.setWidth(h+(b.visible&&this.text?b.width:0)+f):b.setWidth(this.width-h-f);this.__updateContentLoopBlock=!1}}});t.TextButton=new x("TextButton",t.PaddedText,{include:[a],initNode:function(k,h){h.focusIndicator??
(h.focusIndicator=!1);h.roundedCorners??(h.roundedCorners=3);h.textAlign??(h.textAlign="center");h.paddingTop??(h.paddingTop=1);h.height??(h.height=23-(h.paddingTop??0));h.activeColor??(h.activeColor="#ddd");h.hoverColor??(h.hoverColor="#eee");h.readyColor??(h.readyColor="#fff");this.callSuper(k,h)}})})(myt);
(t=>{const x=console.warn,{focus:w,mouse:u}=t.global,m={};t.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:a=>m[a]},initNode:function(a,d){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(a,d)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=a},setFloatingAlign:function(a){this.set("floatingAlign",a,!0)},
setFloatingValign:function(a){this.set("floatingValign",a,!0)},setFloatingAlignOffset:function(a){this.set("floatingAlignOffset",a,!0)},setFloatingValignOffset:function(a){this.set("floatingValignOffset",a,!0)},createFloatingPanel:function(a,d,k){a=a??this.floatingPanelId;k=k??{};k.panelId=a;return m[a]=new d(null,k)},getFloatingPanel:function(a){return m[a??this.floatingPanelId]},toggleFloatingPanel:function(a){this.getFloatingPanel(a??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(a):
this.showFloatingPanel(a)},showFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.show(this),this.setLastFloatingPanelShown(a)},hideFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(a){this.callSuper?.()},notifyPanelHidden:function(a){this.callSuper?.()},getFloatingAlignForPanel:function(a){return this.floatingAlign},getFloatingValignForPanel:function(a){return this.floatingValign},
getFloatingAlignOffsetForPanel:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(a){return this.floatingValignOffset},getNextFocus:function(){const a=this.lastFloatingPanelShown;return a?.isShown()?a:this.callSuper?.()},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});t.FloatingPanel=new JS.Class("FloatingPanel",t.View,{include:[t.RootView],initNode:function(a,d){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=
this.hideOnBlur=this.hideOnMouseDown=!0;d.visible=d.focusIndicator=!1;d.focusable=d.focusCage=!0;this.callSuper(a,d)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=a},__doMouseDown:function(a){var d=a.value;a=d.pageX;d=d.pageY;this.containsPoint(a,d)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(a,
d)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(a){this.hideOnMouseDown&&this.hide(a)},focus:function(a){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(a);else{const d=this.getFirstFocusableDescendant();d===this?this.callSuper(a):d.focus(a)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(a){(a=a.value)&&!this.isAncestorOf(a)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||
this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||this.hide(!0)},isShown:function(){return this.visible},show:function(a){this.isShown()||(this.bringToFront(),this.updateLocation(a),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(u,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(a){this.isShown()&&(this.detachFromDom(u,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),
a||this.restoreFocus(),this.setOwner())},restoreFocus:function(){this.owner?.focus()},updateLocation:function(a){this.setOwner(a);this.updateLocationX(a);this.updateLocationY(a)},updateLocationX:function(a){const d=a.getFloatingAlignForPanel(this),k=typeof d;let h;if("string"===k)switch(h=a.getPagePosition().x+a.getFloatingAlignOffsetForPanel(this),d){case "outsideRight":h+=a.width;break;case "insideRight":h+=a.width-this.width;break;case "outsideLeft":h-=this.width;break;case "insideLeft":break;
default:x("Invalid align value",k,d)}else"number"===k?h=d:x("Invalid align type",k,d);this.setX(h)},updateLocationY:function(a){const d=a.getFloatingValignForPanel(this),k=typeof d;let h;if("string"===k)switch(h=a.getPagePosition().y+a.getFloatingValignOffsetForPanel(this),d){case "outsideBottom":h+=a.height;break;case "insideBottom":h+=a.height-this.height;break;case "outsideTop":h-=this.height;break;case "insideTop":break;default:x("Invalid valign value",k,d)}else"number"===k?h=d:x("Invalid valign type",
k,d);this.setY(h)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,u=Math,{View:m,global:a}=t,d=a.focus,k=a.keys,{LIST_KEYS:h,CODE_ESC:f}=k,b=e=>{const c=e.itemConfig??[],q=c.length,{items:n,defaultItemClass:p,fixedWidth:r}=e,z=n.length,D=0<r,I=e.getContentView(),K=I.getLayouts();let J=0;for(var M of K)M.incrementLockedCounter();m.doWhileRemovedFromDom(I,()=>{const y={listView:e};D&&(y.width=r,y.enableEllipsis=!0);for(;q>J;++J){var l=c[J];const v=l.klass??p;l=l.attrs??{};let A=n[J];A&&!A.isA(v)&&(A.destroy(),A=null);A??=n[J]=new v(I,
{...y});A&&(A.callSetters(l),A.__LAYOUT_IDX=J)}});if(D)M=r;else for(M=e.minWidth,J=0;q>J;){const y=n[J++];y.syncToDom();M=u.max(M,y.getMinimumWidth())}for(;z>J;)n[J++].destroy();n.length=q;if(!D)for(J=0;q>J;)e.updateItemWidth(n[J++],M);e.updateContentWidth(I,M);for(const y of K)y.sortSubviews((l,v)=>l.__LAYOUT_IDX-v.__LAYOUT_IDX),y.decrementLockedCounter(),y.update()},g=t.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(e){this.listView=e},getMinimumWidth:()=>0,syncToDom:()=>{}});
t.ListView=new x("ListView",t.FloatingPanel,{initNode:function(e,c){this.items=[];this.maxHeight=-1;this.minWidth=0;c.defaultItemClass??(c.defaultItemClass=t.ListViewItem);c.overflow??(c.overflow="autoy");c.bgColor??(c.bgColor="#ccc");c.boxShadow??(c.boxShadow=t.Button.FOCUS_SHADOW);this.callSuper(e,c);b(this);this.buildLayout(this.getContentView())},buildLayout:e=>{new t.SpacedLayout(e,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(e){this.minWidth=e},setDefaultItemClass:function(e){this.defaultItemClass=
e},setItemConfig:function(e){this.itemConfig=e;this.inited&&b(this)},getContentView:function(){return this},setMaxHeight:function(e){this.maxHeight!==e&&(this.maxHeight=e,this.inited&&(this.fireEvent("maxHeight",e),this.setHeight(this.height)))},setHeight:function(e){this.callSuper(0<=this.maxHeight?u.min(this.maxHeight,e):e);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(e){this?.owner.doItemActivated(e)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(e=>e.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(e=>e.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(e,c)=>{e.setWidth(c)},updateContentWidth:(e,c)=>{e.setWidth(c)}});t.ListViewAnchor=new w("ListViewAnchor",{include:[t.FloatingPanelAnchor,t.ArrowKeyActivation],initNode:function(e,
c){c.listViewClass??(c.listViewClass=t.ListView);c.listViewAttrs??(c.listViewAttrs={});c.itemConfig??(c.itemConfig=[]);c.activationKeys??(c.activationKeys=h);this.callSuper(e,c)},setListViewClass:function(e){this.listViewClass=e},setListViewAttrs:function(e){this.listViewAttrs=e},setItemConfig:function(e){this.itemConfig=e},getFloatingValignForPanel:function(e){var c=e.height,q=this.getPagePosition().y,n=a.windowResize.getHeight()-this.getPagePosition().y-this.height;e=q-c;c=n-c;q=q>n;n=this.floatingValign;
switch(n){case "outsideBottom":0>c&&q&&(n="outsideTop");break;case "insideBottom":0>c&&q&&(n="insideTop");break;case "outsideTop":0>e&&!q&&(n="outsideBottom");break;case "insideTop":0>e&&!q&&(n="insideBottom")}return n},doItemActivated:function(e){this.hideFloatingPanel()},getFloatingPanel:function(e){return this.callSuper(e)??this.createFloatingPanel(e,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(e){const c=this.getFloatingPanel(e);c&&(c.setItemConfig(this.itemConfig),this.callSuper(e))},
doActivationKeyDown:function(e,c){e===f?this.hideFloatingPanel():this.callSuper(e,c)},doKeyArrowLeftOrUp:function(e,c){this.focusToLastItem()},doKeyArrowRightOrDown:function(e,c){this.focusToFirstItem()},doActivationKeyUp:function(e){if(e!==f)switch(this.callSuper(e),e){case k.CODE_ARROW_LEFT:case k.CODE_ARROW_UP:this.focusToLastItem();break;case k.CODE_ARROW_RIGHT:case k.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const e=this.getFloatingPanel();e?.isShown()&&e.focusToLastItem()},
focusToFirstItem:function(){const e=this.getFloatingPanel();e?.isShown()&&e.focusToFirstItem()},updateEntryAttr:function(e,c,q){(e=this.getEntryByValue(e))&&(e.attrs[c]=q);return e},getEntryByValue:function(e){return this.itemConfig.find(c=>c?.attrs&&c.attrs.value===e)}});t.ListViewItem=new x("ListViewItem",t.TextButton,{include:[g,t.ArrowKeyActivation],initNode:function(e,c){c.activeColor??(c.activeColor="#bbb");c.hoverColor??(c.hoverColor="#fff");c.readyColor??(c.readyColor="#eee");c.paddingLeft??
(c.paddingLeft=8);c.paddingRight??(c.paddingRight=8);c.textAlign??(c.textAlign="left");c.roundedCorners??(c.roundedCorners=0);c.activationKeys??(c.activationKeys=h);c.focusIndicator??(c.focusIndicator=!0);const q=this.__enableEllipsis=c.enableEllipsis;delete c.enableEllipsis;this.callSuper(e,c);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(e){this.callSuper(e);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return u.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(e,c){e===f?this.listView.owner.hideFloatingPanel():this.callSuper(e,c)},doKeyArrowLeftOrUp:function(e,c){d.prev()},doKeyArrowRightOrDown:function(e,c){d.next()}});t.ListViewSeparator=new x("ListViewSeparator",m,{include:[g],initNode:function(e,c){c.height??(c.height=1);c.bgColor??(c.bgColor="#666");this.callSuper(e,c)}})})(myt);
(t=>{const x=t.AccessorSupport,w=x.generateSetterName,u={},m=t.BAG=new JS.Class("BAG",{include:[x,t.Destructible,t.Observable],extend:{getGroup:(a,d)=>{if(a&&d){let k;return(k=u[a]??(u[a]={}))[d]??(k[d]=new m(a,d))}},removeGroup:(a,d)=>{if(a&&d&&(a=u[a])){const k=a[d];k&&delete a[d];return k}}},initialize:function(a,d){this.__nodes=[];this.trueNode=null;this.attrName=a;this.groupId=d},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&m.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(a){this.set("groupId",a,!0)},setAttrName:function(a){this.set("attrName",a,!0)},setTrueNode:function(a){this.set("trueNode",a,!0)},getNodes:function(){return this.__nodes},register:function(a){a&&!this.isRegistered(a)&&(this.__nodes.push(a),a[this.attrName]&&this.setTrue(a))},unregister:function(a){if(a){const d=this.__nodes,k=d.indexOf(a);-1<k&&d.splice(k,1);this.trueNode===a&&this.setTrueNode(null);0===d.length&&
this.destroy()}},setTrue:function(a){if(a&&this.trueNode!==a&&this.isRegistered(a)){const d=this.attrName,k=w(d),h=this.__nodes;let f=h.length;for(this.setTrueNode(a);f;){const b=h[--f];if(a===b){if(!b[d])b[k](!0)}else if(b[d])b[k](!1)}}},setFalse:function(a){a&&this.trueNode===a&&(a[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(a){return this.__nodes.includes(a)}});t.BAGMembership=new JS.Module("BAGMembership",{initNode:function(a,d){this.__bags=[];this.callSuper(a,d)},destroy:function(){const a=
this.__bags;let d=a.length;for(;d;){const k=a[--d];this.removeFromBAG(k.attrName,k.groupId)}this.callSuper()},isRegisteredWithBAG:function(a){return this.__bags.includes(a)},getBAG:(a,d)=>m.getGroup(a,d),addToBAG:function(a,d){d=this.getBAG(a,d);this.isRegisteredWithBAG(d)||(this.__bags.push(d),d.register(this),this.isAttachedTo(this,"__updateForBAG",a)||this.attachTo(this,"__updateForBAG",a))},removeFromBAG:function(a,d){d=this.getBAG(a,d);if(this.isRegisteredWithBAG(d)){const k=this.__bags;let h=
k.length,f=!0;for(;h;){const b=k[--h];b===d?(k.splice(h,1),d.unregister(this)):b.attrName===a&&(f=!1)}f&&this.detachFrom(this,"__updateForBAG",a)}},__updateForBAG:function(a){for(const d of this.__bags)if(d.attrName===a.type)d[a.value?"setTrue":"setFalse"](this)}})})(myt);
(t=>{const x=w=>{const u=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<u.length?" ":"")+u)};t.Radio=new JS.Class("Radio",t.Text,{include:[t.SimpleButtonStyle,t.BAGMembership],initNode:function(w,u){u.selected??(u.selected=!1);u.groupId??(u.groupId=t.generateGuid());u.focusIndicator??(u.focusIndicator=!1);u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor="inherit");u.readyColor??(u.readyColor="inherit");const m=u.value;delete u.value;this.callSuper(w,
u);this.setValue(m);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);t.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const u=this.getBAG("selected",this.groupId);if(u){const m=u.getNodes();let a=m.length;for(;a;){const d=m[--a];if(d.optionValue===w){u.setTrue(d);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),x(this)))},setGroupId:function(w){if(this.groupId!==w){const u=this.groupId;this.groupId=w;u&&this.removeFromBAG("selected",u);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,u=1){this.setOpacity(u);this.setTextColor(w)}})})(myt);
(t=>{const x=JS.Module,w=t.global.keys,u=t.Selectable=new x("Selectable",{setSelected:function(a){a=this.valueFromEvent(a);this.selected!==a&&(this.selected=a,this.inited&&this.fireEvent?.("selected",a))},isSelected:function(){return!!this.selected},canSelect:a=>!0,canDeselect:a=>!0}),m=t.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(a,d){this.__selected={};this.__lastSelectedItem=null;d.selectedCount=
0;d.itemSelectionId??(d.itemSelectionId="id");d.maxSelected??(d.maxSelected=-1);this.callSuper(a,d)},setItemSelectionId:function(a){this.itemSelectionId=a},setMaxSelected:function(a){this.maxSelected=a},setSelectedCount:function(a){this.selectedCount!==a&&(this.selectedCount=a,this.inited&&this.fireEvent("selectedCount",a))},isAddMode:()=>m.isAddMode(),isToggleMode:()=>m.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(a){a&&!this.isSelectedItem(a)&&this.canSelectItem(a)&&
(a.setSelected(!0),this.__selected[a[this.itemSelectionId]]=a,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=a,this.doSelected(a),this.fireEvent("itemSelected",a))},doSelected:a=>{},selectById:function(a){this.select(this.getSelectableItem(a))},canSelectItem:function(a){const {maxSelected:d,selectedCount:k}=this;if(0===d)return!1;if(1===d){if(0<k&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<d&&k>=d)return!1;return a.canSelect(this)},selectAll:function(){const a=
this.getSelectableItems();let d=a.length;for(;d;)this.select(a[--d])},deselect:function(a){this.isSelectedItem(a)&&this.canDeselectItem(a)&&(a.setSelected(!1),delete this.__selected[a[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===a&&(this.__lastSelectedItem=null),this.doDeselected(a),this.fireEvent("itemDeselected",a))},doDeselected:a=>{},deselectById:function(a){this.deselect(this.getSelectableItem(a))},canDeselectItem:function(a){return a.canDeselect(this)},
deselectAll:function(){const a=this.__selected;for(const d in a)this.deselect(a[d])},isSelectedItem:a=>a?a.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const a=[],d=this.getSubviews();let k=d.length;for(;k;){const h=d[--k];h.isA(u)&&a.push(h)}return a},getSelectableItems:function(){const a=this.getManagedItems();let d=a.length;for(;d;)a[--d].canSelect(this)||a.splice(d,1);return a},getSelectableItem:function(a){const d=
this.getSelectableItems(),k=this.itemSelectionId;let h=d.length;for(;h;){const f=d[--h];if(f[k]===a)return f}}})})(myt);
(t=>{const x=JS.Class,{View:w,SizeToParent:u}=t,m=t.TabSlider=new x("TabSlider",w,{include:[t.Selectable,t.Disableable,u],initNode:function(d,k){const h=this;let f;k.defaultPlacement="wrapper.container";k.percentOfParentWidth=100;k.expansionState="collapsed";k.tabId??(k.tabId=t.generateGuid());k.tabContainer??(k.tabContainer=d);k.selected??(k.selected=!1);k.buttonClass??(k.buttonClass=t.SimpleButton);k.zIndex??(k.zIndex=0);k.buttonHeight??(k.buttonHeight=30);k.fillColorSelected??(k.fillColorSelected=
"#666");k.fillColorHover??(k.fillColorHover="#eee");k.fillColorActive??(k.fillColorActive="#ccc");k.fillColorReady??(k.fillColorReady="#fff");k.minContainerHeight??(k.minContainerHeight=100);k.selected&&(f=!0,delete k.selected);h.callSuper(d,k);h.button=new h.buttonClass(h,{ignorePlacement:!0,zIndex:1,height:h.buttonHeight,focusIndicator:!0,groupId:h.parent.parent.groupId,percentOfParentWidth:100,hoverColor:h.fillColorHover,activeColor:h.fillColorActive,readyColor:h.fillColorReady},[u,{doActivated:()=>
{const b=h.tabContainer;h.isSelected()&&1!==b.maxSelected?b.deselect(h):b.select(h)},updateUI:function(){this.callSuper();h.selected&&-1!==h.tabContainer.maxSelected&&this.setBgColor(h.fillColorSelected);h.notifyButtonRedraw()}}]);d=h.wrapper=new w(h,{ignorePlacement:!0,y:h.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[u,{setHeight:function(b){this.callSuper(Math.round(b))},setWidth:function(b){this.callSuper(b);this.inited&&this.container.setWidth(b)}}]);new t.SizeToChildren(d.container=
new w(d),{axis:"y"});h.constrain("__updateHeight",[d,"y",d,"height"]);f&&h.tabContainer.select(h);!0===k.disabled&&h.setDisabled(!0);h.setHeight(h.getCollapsedHeight())},setSelected:function(d){this.callSuper(d);this.button?.updateUI()},setTabId:function(d){this.tabId=d},setTabContainer:function(d){this.tabContainer=d},setMinContainerHeight:function(d){this.minContainerHeight=d},setButtonClass:function(d){this.buttonClass=d},setFillColorSelected:function(d){this.fillColorSelected=d},setFillColorHover:function(d){this.fillColorHover=
d},setFillColorActive:function(d){this.fillColorActive=d},setFillColorReady:function(d){this.fillColorReady=d},setButtonHeight:function(d){this.buttonHeight!==d&&(this.buttonHeight=d,this.button&&(this.button.setHeight(d),this.wrapper.setY(d)))},setExpansionState:function(d){if(this.expansionState!==d){this.expansionState=d;this.inited&&this.fireEvent("expansionState",d);const k=this.wrapper;k&&("expanded"===d?(k.setMaskFocus(!1),k.setOverflow("auto")):"expanding"===d?k.setVisible(!0):"collapsed"===
d?k.setVisible(!1):"collapsing"===d&&(k.setMaskFocus(!0),k.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(d){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(d){const k=this,h=k.wrapper;d-=k.getCollapsedHeight();k.setExpansionState("expanding");h.stopActiveAnimators();if(h.height!==d){const f=k.tabContainer.duration;1===f?(h.setHeight(d),k.setExpansionState("expanded")):h.animate({attribute:"height",
to:d,duration:f}).next(b=>{k.setExpansionState("expanded")})}else k.setExpansionState("expanded")},collapse:function(){const d=this,k=d.wrapper;d.setExpansionState("collapsing");k.stopActiveAnimators();if(0!==k.height){const h=d.tabContainer.duration;1===h?(k.setHeight(0),d.setExpansionState("collapsed")):k.animate({attribute:"height",to:0,duration:h}).next(f=>{d.setExpansionState("collapsed")})}else d.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});t.TextTabSlider=new x("TextTabSlider",m,{initNode:function(d,k){k.labelTextColorChecked??(k.labelTextColorChecked="#fff");k.labelTextColor??(k.labelTextColor="#333");this.callSuper(d,k);this.button.label=new t.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(d){this.labelTextColorChecked=d},setLabelTextColor:function(d){this.labelTextColor=d},setText:function(d){this.text!==d&&(this.text=d,this.button?.label?.setText(d))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const a=t.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[t.SelectionManager],
extend:{SPACING:1},initNode:function(d,k){const h=this;h._tabSliders=[];k.defaultPlacement="container";k.spacing??(k.spacing=a.SPACING);k.overflow??(k.overflow="autoy");k.itemSelectionId??(k.itemSelectionId="tabId");k.maxSelected??(k.maxSelected=1);k.duration??(k.duration=500);h.updateLayout=t.debounce(h.updateLayout);h.callSuper(d,k);d=h.container=new w(h,{ignorePlacement:!0,percentOfParentWidth:100},[u,{subnodeAdded:function(f){this.callSuper(f);f instanceof m&&(h._tabSliders.push(f),h.attachTo(f,
"updateLayout","selected"))},subnodeRemoved:function(f){if(f instanceof m){const b=h._tabSliders,g=b.indexOf(f);-1<g&&(h.detachFrom(f,"updateLayout","selected"),b.splice(g,1))}this.callSuper(f)}}]);d.layout=new t.SpacedLayout(d,{axis:"y",spacing:h.spacing,collapseParent:!0});h.attachTo(h,"updateLayout","height")},setSpacing:function(d){this.spacing!==d&&(this.spacing=d,this.layout?.setSpacing(d))},setDuration:function(d){this.duration=d},updateLayout:function(d,k){d=this._tabSliders;for(var h=d.length,
f=h,b=0,g=0,e=0;f;){var c=d[--f];c.visible&&(++e,c.selected?(b+=c.getMinimumExpandedHeight(),g+=c.getPreferredExpandedHeight()):(c=c.getCollapsedHeight(),b+=c,g+=c))}f=this.container.layout;e=f.inset+f.outset+f.spacing*(e-1);g+=e;f=this.height;b=b+e>f;e=g>f;c=this.duration;g-=f;0<k&&this.setDuration(k);for(f=h;f;)if(h=d[--f],h.visible)if(h.selected){let q;if(b)q=h.getMinimumExpandedHeight();else if(e){const n=h.getPreferredExpandedHeight(),p=h.getMinimumExpandedHeight();q=n-g;p>q?(g-=n-p,q=p):g=0}else q=
h.getPreferredExpandedHeight();h.expand(q)}else h.collapse();0<k&&this.setDuration(c)}})})(myt);
(t=>{const x=m=>{const a=[];switch(m.tabContainer.location){case "top":a.push("TopLeft","TopRight");break;case "bottom":a.push("BottomLeft","BottomRight");break;case "left":a.push("TopLeft","BottomLeft");break;case "right":a.push("TopRight","BottomRight")}for(const d of a)m["setRounded"+d+"Corner"](m.cornerRadius||0)},w=t.Tab=new JS.Class("Tab",t.SimpleTextButton,{include:[t.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(m,a){a.tabId??(a.tabId=t.generateGuid());a.tabContainer??(a.tabContainer=
m);let d;a.selected&&(d=!0,delete a.selected);a.inset??(a.inset=w.INSET);a.outset??(a.outset=w.OUTSET);a.selectedColor??(a.selectedColor="#fff");a.hoverColor??(a.hoverColor="#eee");a.activeColor??(a.activeColor="#aaa");a.readyColor??(a.readyColor="#ccc");a.labelTextSelectedColor??(a.labelTextSelectedColor="#333");a.height??(a.height=24);a.focusIndicator??(a.focusIndicator=!1);a.cornerRadius??(a.cornerRadius=6);this.callSuper(m,a);d&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(m){this.tabId=m},setTabContainer:function(m){this.tabContainer=m},setSelectedColor:function(m){this.selectedColor=m},setLabelTextColor:function(m){this.labelTextColor=m},setCornerRadius:function(m){this.cornerRadius=m;this.inited&&x(this)},setLabelTextSelectedColor:function(m){this.labelTextSelectedColor=m;this.inited&&this.selected&&this.textView.setTextColor(m)},setSelected:function(m){this.callSuper(m);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),u=t.TabContainer=new JS.Module("TabContainer",{include:[t.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(m,a){this.__tabs=[];a.spacing??(a.spacing=u.SPACING);a.inset??(a.inset=u.INSET);a.location??(a.location="top");a.itemSelectionId??
(a.itemSelectionId="tabId");a.maxSelected??(a.maxSelected=1);this.callSuper(m,a);this.layout=new t.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(m){this.location=m},setSpacing:function(m){this.spacing!==m&&(this.spacing=m,this.layout?.setSpacing(m))},setInset:function(m){this.inset!==m&&(this.inset=m,this.layout?.setInset(m))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(m){this.callSuper(m);if(m.isA(w))switch(this.__tabs.push(m),this.location){case "top":m.setValign("bottom");break;case "bottom":m.setValign("top");break;case "left":m.setAlign("right");break;case "right":m.setAlign("left")}},subnodeRemoved:function(m){if(m.isA(w)){const a=this.__tabs,d=a.indexOf(m);-1<d&&a.splice(d,1)}this.callSuper(m)}})})(myt);
(t=>{const x=JS.Class,w=Math.min,u=Array.isArray,{SizeToDom:m,View:a,Disableable:d,KeyObservable:k,Button:{FOCUS_SHADOW:h},global:{keys:f}}=t,b=(p,r,z)=>{p[z]!==r&&(p[z]=r,p.getIDS()[z]=r+"px",p.inited&&(p.fireEvent(z,r),p.sizeViewToDom()))},g=(p,r,z)=>{p[r]!==z&&(p.getIDE()[r]=p[r]=z,p.inited&&p.fireEvent(r,z))},e=t.NativeInputWrapper=new x("NativeInputWrapper",a,{include:[d,t.InputObservable],initNode:function(p,r){r.tagName??(r.tagName="input");r.focusable??(r.focusable=!0);this.callSuper(p,r);
this.addDomClass("mytNativeInput")},createOurDomElement:function(p){p=this.callSuper(p);this.inputType&&((u(p)?p[1]:p).type=this.inputType);return p},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){this.value!==p&&(this.value=p,this.setDomValue(p),this.inited&&this.fireEvent("value",p))},getDomValue:function(){return this.getIDE().value},setDomValue:function(p){const r=this.getIDE();r.value!==p&&(r.value=p)}}),c=t.InputSelectOption=new x("InputSelectOption",
a,{include:[d,t.Selectable],createOurDomElement:p=>document.createElement("option"),setSelected:function(p){p=this.valueFromEvent(p);const r=this.getIDE();r.selected!==p&&(r.selected=p)},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){g(this,"value",p)},setLabel:function(p){this.label!==p&&(this.getIDE().textContent=this.label=p,this.inited&&this.fireEvent("label",p))},isSelected:function(){return this.getIDE().selected},canSelect:function(p){return!this.disabled&&
!this.getIDE().selected&&this.parent===p},canDeselect:function(p){return!this.disabled&&this.getIDE().selected&&this.parent===p}}),q=t.BaseInputText=new x("BaseInputText",e,{include:[t.TextSupport],initNode:function(p,r){r.bgColor??(r.bgColor="transparent");r.spellcheck??(r.spellcheck=!1);this.callSuper(p,r);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(p){this.callSuper(p);this.setValue(p)},
setSpellcheck:function(p){g(this,"spellcheck",p)},setMaxLength:function(p){g(this,"maxLength",null==p||0>p?void 0:p)},setAllowedChars:function(p){this.allowedChars=p},setPlaceholder:function(p){g(this,"placeholder",p)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(h)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(p){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(p){const r=
p.value,z=this.allowedChars;z&&!z.includes(k.getKeyFromEvent(p))&&r.preventDefault();this.filterInputPress(r)},filterInput:p=>p,filterInputPress:p=>{},__syncToDom:function(p){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const p=document.selection.createRange();p.moveStart("character",-this.getDomValue().length);return p.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(p,r){if(null==r||p===r){if(this.getCaretPosition()===p)return;
r=p}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(p,r):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",r),z.moveStart("character",p),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const p=this.getIDE();return{start:p.selectionStart,startElem:p,end:p.selectionEnd,endElem:p}},setSelection:function(p){p&&
this.setCaretPosition(p.start,p.end)},saveSelection:function(p){this._selRange=p||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=t.InputText=new x("InputText",q,{include:[t.SizeHeightToDom],initNode:function(p,r){this.inputType=!0===r.password?"password":"text";this.callSuper(p,r);this.setCaretToEnd()},setPassword:function(p){this.set("password",p,!0);this.inited&&(this.getIDE().type=p?"password":"text")}});t.EditableText=new x("EditableText",
q,{include:[m],initNode:function(p,r){r.tagName??(r.tagName="div");r.inputType=null;r.whiteSpace??(r.whiteSpace="pre");r.contentEditable??(r.contentEditable=!0);this.callSuper(p,r);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(p){b(this,p,"minWidth")},setMinHeight:function(p){b(this,p,"minHeight")},setPadding:function(p){this.setPaddingTop(p);this.setPaddingRight(p);
this.setPaddingBottom(p);this.setPaddingLeft(p)},setPaddingTop:function(p){b(this,p,"paddingTop")},setPaddingRight:function(p){b(this,p,"paddingRight")},setPaddingBottom:function(p){b(this,p,"paddingBottom")},setPaddingLeft:function(p){b(this,p,"paddingLeft")},setContentEditable:function(p){g(this,"contentEditable",p)},filterInputPress:function(p){const r=this.maxLength;0<=r&&this.getCharacterCount()===r&&p.preventDefault();this.callSuper(p)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(p){const r=this.getIDE();r.innerHTML!==p&&(r.innerHTML=p,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(p){k.isEnterKeyEvent(p)&&(p.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(p){this.callSuper(p);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(p,r){if(null==r||p===r){if(this.getCaretPosition()===p)return;r=p}this.saveSelection({start:p,startElem:this.getIDE().firstChild,end:r,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(p){this.saveSelection();return!0},getSelection:function(){let p;if(window.getSelection){const r=window.getSelection();if(0<r.rangeCount){if(r.extentNode===
this.getIDE())return;p=r.getRangeAt(0)}}else document.selection&&(p=document.selection.createRange());return{start:p?p.startOffset:0,startElem:p?p.startContainer:this.getIDE().firstChild,end:p?p.endOffset:0,endElem:p?p.endContainer:this.getIDE().firstChild}},setSelection:function(p){if(p){const {startElem:r,endElem:z}=p;if(r&&r.parentNode&&z&&z.parentNode){const D=document.createRange();D.setStart(r,w(p.start,r.length));D.setEnd(z,w(p.end,z.length));window.getSelection?(p=window.getSelection(),0<
p.rangeCount&&p.removeAllRanges(),p.addRange(D)):document.selection&&D.select()}}}});t.InputTextArea=new x("InputTextArea",q,{initNode:function(p,r){r.tagName??(r.tagName="textarea");r.inputType=null;r.resize??(r.resize="none");r.wrap??(r.wrap="soft");this.callSuper(p,r)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(p){const r=this;r.resize!==p&&(p=r.resize=r.getIDS().resize=p||"none",r.inited&&r.fireEvent("resize",p),"none"!==p&&(r.__resizeObserver??
(r.__resizeObserver=new ResizeObserver(()=>{r.doResize()}))).observe(r.getIDE()))},setWrap:function(p){g(this,"wrap",p)},doResize:function(){const p=this.resize;"both"!==p&&"horizontal"!==p||m.sizeWidth(this);"both"!==p&&"vertical"!==p||m.sizeHeight(this)}});t.ComboBox=new x("ComboBox",n,{include:[t.Activateable,t.KeyActivation,t.ListViewAnchor],initNode:function(p,r){this.filterItems=!0;r.activationKeys??(r.activationKeys=[f.CODE_ENTER,f.CODE_ESC,f.CODE_ARROW_UP,f.CODE_ARROW_DOWN]);r.bgColor??(r.bgColor=
"#fff");r.borderWidth??(r.borderWidth=1);r.borderStyle??(r.borderStyle="solid");r.floatingAlignOffset??(r.floatingAlignOffset=r.borderWidth);r.fullItemConfig??(r.fullItemConfig=[]);r.listViewAttrs={...r.listViewAttrs,maxHeight:r.listViewAttrs?.maxHeight??99};this.callSuper(p,r)},setFullItemConfig:function(p){this.fullItemConfig=p},setFilterItems:function(p){this.filterItems=p},__syncToDom:function(p){const r=this.value;this.callSuper(p);r!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(p){const r=
this.getFloatingPanel(p);if(r){let D;if(this.filterItems){D=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const I=this.fullItemConfig,K=I.length;for(let J=0;K>J;){const M=I[J++],y=M.attrs.text.toLowerCase(),l=y.indexOf(z);0===l?y!==z&&D.push(M):0<l&&D.push(M)}}else D=this.fullItemConfig;0<D.length?(r.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(D),this.callSuper(p)):this.hideFloatingPanel(p)}},doItemActivated:function(p){this.setValue(null==p.value?p.text:p.value);this.callSuper(p)},
doActivated:function(){this.toggleFloatingPanel()}});t.InputSelect=new x("InputSelect",e,{include:[m],initNode:function(p,r){r.tagName??(r.tagName="select");r.inputType=null;r.multiple??(r.multiple=!1);r.size??(r.size=r.multiple?4:1);this.callSuper(p,r);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(p){g(this,"multiple",p)},setSize:function(p){g(this,"size",p)},setOptions:function(p){this.destroyAllOptions();if(u(p))for(const r of p)this.addOption(r)},getOptions:function(){return this.getSubviews().slice()},
setValue:function(p){u(p)&&t.areArraysEqual(p,this.value)||this.value===p||(this.value=p,this.inited&&this.fireEvent("value",p))},subviewAdded:function(p){p instanceof c||(t.dumpStack("Subview unsupported. Destroying it"),p.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(h)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(p=>p.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(p=>
p.value)},getOptionForValue:function(p){return this.getOptions().find(r=>r.value===p)},addOption:function(p){return new c(this,p)},destroyAllOptions:function(){for(const p of this.getOptions())p.destroy()},destroyOptionWithValue:function(p){if(p=this.getOptionForValue(p))if(p.destroy(),p.destroyed)return!0;return!1},deselectAll:function(){let p=!1;for(const r of this.getOptions())r.isSelected()&&(r.setSelected(!1),p=!0);p&&this.__doChanged()},selectValues:function(p){u(p)||(p=[p]);for(const r of p)this.selectValue(r)},
selectValue:function(p){this.select(this.getOptionForValue(p))},select:function(p){p?.canSelect(this)&&(p.setSelected(!0),this.__syncToDom())},deselectValue:function(p){this.deselect(this.getOptionForValue(p))},deselect:function(p){p?.canDeselect(this)&&(p.setSelected(!1),this.__syncToDom())},__doChanged:function(p){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(t=>{const x=JS.Module,w=Math.round;var u=t.ValueComponent=new x("ValueComponent",{initNode:function(a,d){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(a,d)},setValueFilter:function(a){this.valueFilter=a;this.inited&&a&&this.setValue(this.value)},setValue:function(a){this.valueFilter&&(a=this.valueFilter(a));this.value!==a&&(this.value=a,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(a,d){const k=this.valueFilter;
this.setValueFilter(k?"last"===d?h=>a(k(h)):h=>k(a(h)):a)}});const m=t.RangeComponent=new x("RangeComponent",{include:[u],setLowerValue:function(a){this.setValue({lower:a,upper:this.value&&void 0!==this.value.upper?this.value.upper:a})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(a){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:a,upper:a})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(a){if(a){var d=
this.value;const f=d?d.lower:void 0;d=d?d.upper:void 0;this.valueFilter&&(a=this.valueFilter(a));if(a.lower!==f||a.upper!==d){var k;(k=a).lower??(k.lower=a.upper);var h;(h=a).upper??(h.upper=a.lower);void 0!==a.lower&&void 0!==a.upper&&a.lower>a.upper&&(k=a.lower,a.lower=a.upper,a.upper=k);this.value=a;this.inited&&(this.fireEvent("value",this.getValue()),a.lower!==f&&this.fireEvent("lowerValue",a.lower),a.upper!==d&&this.fireEvent("upperValue",a.upper))}}else this.callSuper(a)},getValueCopy:function(){const a=
this.value;return{lower:a.lower,upper:a.upper}}});u=t.BoundedValueComponent=new x("BoundedValueComponent",{include:[u],initNode:function(a,d){const k=this;k.appendToEarlyAttrs("snapToInt","minValue","maxValue");d.snapToInt??(d.snapToInt=!0);d.valueFilter||(d.valueFilter=h=>{var f=k.maxValue;if(null!=f&&h>f)return f;f=k.minValue;return null!=f&&h<f?f:h});k.callSuper(a,d)},setSnapToInt:function(a){this.snapToInt!==a&&(this.snapToInt=a,this.inited&&(this.fireEvent("snapToInt",a),a&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(a){this.snapToInt&&null!=a&&(a=w(a));if(this.minValue!==a){const d=this.maxValue;null!=d&&a>d&&(a=d);this.minValue!==a&&(this.minValue=a,this.inited&&(this.fireEvent("minValue",a),this.setValue(this.value)))}},setMaxValue:function(a){this.snapToInt&&null!=a&&(a=w(a));if(this.maxValue!==a){const d=this.minValue;null!=d&&a<d&&(a=d);this.maxValue!==a&&(this.maxValue=a,this.inited&&(this.fireEvent("maxValue",a),this.setValue(this.value)))}},
setValue:function(a){this.callSuper(this.snapToInt&&null!=a&&!isNaN(a)?w(a):a)}});t.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[u,m],initNode:function(a,d){const k=this;d.valueFilter||(d.valueFilter=h=>{if(h){const f=k.maxValue,b=k.minValue;null!=f&&h.upper>f&&(h.upper=f);null!=b&&h.lower<b&&(h.lower=b)}return h});k.callSuper(a,d)},setValue:function(a){this.snapToInt&&null!=a&&(null==a.lower||isNaN(a.lower)||(a.lower=w(a.lower)),null==a.upper||isNaN(a.upper)||(a.upper=w(a.upper)));
this.callSuper(a)}})})(myt);
(t=>{const x=w=>{const u=w.label??"";w.setText('<i class="'+("solid"===(w.checkboxStyle??"outline")?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<u.length?" ":"")+u)};t.Checkbox=new JS.Class("Checkbox",t.Text,{include:[t.SimpleButtonStyle,t.ValueComponent],initNode:function(w,u){this.appendToEarlyAttrs("userUnselectable");u.value??(u.value=!1);u.focusIndicator??(u.focusIndicator=!1);u.checkboxStyle??(u.checkboxStyle="outline");u.activeColor??(u.activeColor="inherit");u.hoverColor??
(u.hoverColor="inherit");u.readyColor??(u.readyColor="inherit");this.callSuper(w,u);t.FontAwesome.registerForNotification(this);x(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&x(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(w,u=1){this.setOpacity(u);this.setTextColor(w)}})})(myt);
(t=>{let x;const {Class:w,Module:u}=JS,m=console.warn,{KeyObservable:a,UpdateableUI:d,dumpStack:k,global:h}=t,f=h.focus,b=h.keys,g={},e=(l,v)=>{if(l){const A=l.id;l.id?v(A):k("No ID")}else k("No processor")},c=l=>{e(l,v=>{g[v]=l})},q=l=>{const v=t.BAG.getGroup("selected",l.groupId);if(v){const A=v.getNodes();l=l.value;let B=A.length;for(;B;){const E=A[--B];if(E.optionValue===l){v.setTrue(E);break}}}},n=l=>{if(l.groupId){const v=t.BAG.getGroup("selected",l.groupId);v&&l.syncTo(v,"__syncValue","trueNode")}},
p=(l,v)=>{const A=[],B=l.__v;if(B)for(const E of B)v=E.isFormValid(l,null,A)&&v;l.setErrorMessages(A);l.setIsValid(v);return v},r=(l,v,A)=>{if(l=l.__vp)for(const B of l)B[A]&&(v=B.process(v));return v},z=t.ValueProcessor=new w("ValueProcessor",{initialize:function(l,v,A,B){this.id=l;this.runForDefault=!!v;this.runForRollback=!!A;this.runForCurrent=!!B},process:l=>l}),D=t.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:l=>{if(null==l||""===l||"-"===l)return l;const v=Number(l);return isNaN(v)?
l:v}}),I=t.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(l,v,A,B,E){this.callSuper(l,v,A,B);this.trim=E},process:function(l){l+="";switch(this.trim){case "start":case "left":return l.trimStart();case "end":case "right":return l.trimEnd();default:return l.trim()}}}),K=t.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(l,v,A,B,E){this.callSuper(l,v,A,B);this.defaultValue=E},process:function(l){return void 0===l?this.defaultValue:l}}),J=t.Form=new u("Form",
{initNode:function(l,v){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(l,v);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(l){this.set("errorMessages",l,!0)},getFullId:function(){const l=[this.id];let v=this.form;for(;v&&v.id;)l.unshift(v.id),v=v.form;return l.join(".")},setId:function(l){if(this.id!==l){const v=this.id;this.id=
l;(l=this.form)&&this.inited&&(l.removeSubForm(v),l.addSubForm(this))}},setForm:function(l){if(this.form!==l){const v=this.form;this.form=l;v?.removeSubForm(this.id);this.inited&&l?.addSubForm(this)}},setIsValid:function(l){this.isValid=l;this.inited&&this.fireEvent("isValid",l);const v=this.form;v&&!this._lockCascade&&(l?v.verifyValidState(this):v.notifySubFormInvalid())},setIsChanged:function(l){if(this.isChanged!==l){this.isChanged=l;this.inited&&this.fireEvent("isChanged",l);const v=this.form;
v&&!this._lockCascade&&(l?v.notifySubFormChanged():v.verifyChangedState(this))}},setValidators:function(l){let v=l.length;for(;v;){const A=l[--v];"string"===typeof A&&(l[v]=h.validators.getValidator(A),l[v]||l.splice(v,1))}this.__v=l},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const l={},v=this.__sf;for(const A in v)l[A]=v[A].getValue();return l},setValue:function(l){this.callSuper?.(l);if("object"===typeof l&&!this.isA(M))for(const v in l){const A=
this.getSubForm(v);A?l[v]=A.setValue(l[v]):m("ID in setValue for missing subform",v)}this.form?.notifyValueChanged(this);return l},getDefaultValue:function(){const l={};let v=this.__sf;for(const A in v)l[A]=v[A].getDefaultValue();return l},setDefaultValue:function(l){if("object"===typeof l)for(const v in l){const A=this.getSubForm(v);A?l[v]=A.setDefaultValue(l[v]):m("ID in setDefaultValue for missing subform",v)}return l},getRollbackValue:function(){const l={},v=this.__sf;for(const A in v)l[A]=v[A].getRollbackValue();
return l},setRollbackValue:function(l){if("object"===typeof l)for(const v in l){const A=this.getSubForm(v);A?l[v]=A.setRollbackValue(l[v]):m("ID in setRollbackValue for missing subform",v)}return l},addAccelerator:function(l,v){this.__acc[l]=v},removeAccelerator:function(l){delete this.__acc[l]},invokeAccelerator:function(l,v){this.__acc[l]?.call(this,v??null)},addValidator:function(l){l&&this.__v.push(l)},removeValidator:function(l){if(l){const v=this.__v;let A=v.length;for(;A;){const B=v[--A];if(B.id===
l)return v.splice(A,1),B}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(l){const v=l.id;null!=this.getSubForm(v)?m("ID in use for subform, add aborted",v,l):(l.setForm(this),this.__sf[v]=l,l.isChanged&&this.notifySubFormChanged(),l.isValid||this.notifySubFormInvalid())},removeSubForm:function(l){const v=this.getSubForm(l);v&&(v.setForm(null),delete this.__sf[l],this.verifyChangedState(),this.verifyValidState());return v},getSubForm:function(l){return this.__sf[l]},
getSubForms:function(){return this.__sf},getInvalidSubformIds:function(l){l&&this.doValidation();const v=[];(function E(B){if(B.isA(M))B.isValid||v.push(B.getFullId());else{B=B.getSubForms();for(const H in B)E(B[H])}})(this);return v},getAllErrorMessages:function(){const l=this.__sf;let v=(this.errorMessages??[]).slice();for(const A in l)v.push(...l[A].getAllErrorMessages());return v},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(l){const v=this.__sf;let A=!0;for(const B in v){const E=
v[B];E!==l&&(A=E.isValid&&A)}return p(this,A)},doValidation:function(){const l=this.__sf;let v=!0;for(const A in l)v=l[A].doValidation()&&v;this._lockCascade=!0;v=p(this,v);this._lockCascade=!1;return v},notifyValueChanged:function(l){this.form?.notifyValueChanged(l)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(l){const v=this.__sf;let A=!1;for(const B in v){const E=v[B];E!==l&&(A=E.isChanged||A)}this.setIsChanged(A);return A},setup:function(l,v,A){this._lockCascade=
!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;l??={};v??={};A??={};const B=this.__sf;for(const E in B)B[E].setup(l[E],v[E],A[E])},resetForm:function(){this._lockCascade=!0;const l=this.__sf;for(const v in l)l[v].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const l=this.__sf;for(const v in l)l[v].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const l={},v=this.__sf;for(const A in v){const B=v[A];B.isChanged&&(l[A]=B.getChangedValue())}return l}}),M=t.FormElement=new u("FormElement",{include:[J],initNode:function(l,v){this.__vp=[];this.callSuper(l,v)},getValue:function(){return r(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(l){void 0===l&&(l=this.getRollbackValue());this.value!==l&&(this.callSuper(l),this.verifyChangedState());return l},
getDefaultValue:function(){return r(this,this.defaultValue,"runForDefault")},setDefaultValue:function(l){this.defaultValue!==l&&(this.defaultValue=l,this.inited&&this.fireEvent("defaultValue",l),this.verifyChangedState());return l},getRollbackValue:function(){return r(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(l){void 0===l&&(l=this.getDefaultValue());this.rollbackValue!==l&&(this.rollbackValue=l,this.inited&&this.fireEvent("rollbackValue",l),this.verifyChangedState());return l},
setValueProcessors:function(l){let v=l.length;for(;v;){const A=l[--v];"string"===typeof A&&(l[v]=g[A],l[v]||l.splice(v,1))}this.__vp=l},addValueProcessor:function(l){this.__vp.push(l)},removeValueProcessor:function(l){if(l){const v=this.__vp;let A=v.length;for(;A;){const B=v[--A];if(B.id===l)return v.splice(A,1),B}}},addSubForm:l=>{k("addSubForm unsupported on FormElement")},getSubForm:l=>{k("getSubForm unsupported on FormElement")},removeSubForm:l=>{k("removeSubForm unsupported on FormElement")},
verifyChangedState:function(l){l=this.getValue()!==this.getRollbackValue();this.setIsChanged(l);return l},setup:function(l,v,A){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(l);this.setRollbackValue(v);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(A)},resetForm:function(){this._lockCascade=!0;const l=this.getDefaultValue();this.setRollbackValue(l);this.setValue(l);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),y=t.FormInputTextMixin=new u("FormInputTextMixin",{include:[M,d],initNode:function(l,v){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";v.bgColor??(v.bgColor="#fff");v.borderWidth??(v.borderWidth=1);v.borderStyle??(v.borderStyle="solid");this.callSuper(l,v);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=l},setActionRequiredColor:function(l){this.actionRequiredColor=
l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const v=this.validateWhen;"key"!==v&&"blurWithKeyFix"!==v||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":f.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(l){a.isEnterKeyEvent(l)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(l){a.isEscKeyEvent(l)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
t.RootForm=new u("RootForm",{include:[J],initNode:function(l,v){this.callSuper(l,v);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:l=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});t.FormCheckbox=new w("FormCheckbox",t.Checkbox,{include:[M],initNode:function(l,v){this.rollbackValue=this.defaultValue=
!1;this.callSuper(l,v)}});t.FormComboBox=new w("FormComboBox",t.ComboBox,{include:[M,d],initNode:function(l,v){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(l,v);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=
l},setActionRequiredColor:function(l){this.actionRequiredColor=l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const v=this.validateWhen;"key"!==v&&"blurWithKeyFix"!==v||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":f.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(l){this._isShown=!0},notifyPanelHidden:function(l){this._isShown=!1},doActivationKeyDown:function(l,v){l!==b.CODE_ESC||this._isShown?this.callSuper(l,v):this.invokeAccelerator("reject")},doActivationKeyUp:function(l){l!==
b.CODE_ENTER||this._isShown?this.callSuper(l):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});t.FormEditableText=new w("FormEditableText",t.EditableText,{include:[y],__hndlKeyDown:function(l){"nowrap"===this.whitespace&&this.callSuper(l)}});t.FormInputText=new w("FormInputText",
t.InputText,{include:[y]});t.FormInputTextArea=new w("FormInputTextArea",t.InputTextArea,{include:[y],__hndlKeyDown:l=>{}});t.FormInputSelect=new w("FormInputSelect",t.InputSelect,{include:[M],setValue:function(l){if(!this.__abortSetValue)return l=this.callSuper(l),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(l),this.__abortSetValue=!1,this.verifyValidState(),l}});t.FormRadioGroup=new w("FormRadioGroup",t.Node,{include:[t.ValueComponent,M],initNode:function(l,v){v.groupId??(v.groupId=
t.generateGuid());this.callSuper(l,v);void 0!==this.value&&q(this);n(this)},setValue:function(l){l=this.callSuper(l);this.inited&&q(this);return l},setGroupId:function(l){if(this.groupId!==l){if(this.groupId){const v=t.BAG.getGroup("selected",this.groupId);v&&this.detachFrom(v,"__syncValue","trueNode")}this.groupId=l;this.inited&&n(this)}},__syncValue:function(l){l=l.value;this.setValue(l?l.optionValue:null)}});t.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(l,
v,A,B,E){this.callSuper(l,v,A,B);this.otherField=E},process:function(l){return null==l||""===l?this.otherField.getValue():l}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){c(x=new K("undefToEmpty",!0,!0,!0,""));c(new D("toNumber",!0,!0,!0));c(new I("trimLeft",!0,!0,!0,"left"));c(new I("trimRight",!0,!0,!0,"right"));c(new I("trimBoth",!0,!0,!0,"both"));h.register("valueProcessors",this)},getValueProcessor:l=>g[l],register:c,unregister:l=>{e(l,v=>{g[v]&&delete g[v]})}})})(myt);
(t=>{const x=JS.Class,w=t.dumpStack,u=Math.round,m={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},a=(f,b)=>{f[b](f,"doDragOver","dragover",!1);f[b](f,"doDragEnter","dragenter",!1);f[b](f,"doDragLeave","dragleave",!1);f[b](f,"doDrop","drop",!1)},d=t.DragDropSupport=new JS.Module("DragDropSupport",{include:[t.DragDropObservable],initNode:function(f,b){this.callSuper(f,b);this.disabled||this.setupDragListeners()},setDisabled:function(f){this.disabled!==
f&&(this.getIDE().disabled=f,this.callSuper(f),this.inited&&(f?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){a(this,"attachToDom")},teardownDragListeners:function(){a(this,"detachFromDom")},doDragOver:f=>{},doDragEnter:f=>{},doDragLeave:f=>{},doDrop:function(f){this.handleFiles(f.value.dataTransfer.files,f)},handleFiles:function(f,b){if(void 0!==f){let g=f.length;for(;g;){const e=this.filterFiles(f[--g]);e&&this.handleDroppedFile(e,b)}}else w("No File API")},
filterFiles:f=>f,handleDroppedFile:(f,b)=>{}}),k=t.Uploader=new x("Uploader",t.View,{include:[d,t.Disableable,t.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(f,b,g)=>{if(void 0!==FileReader){const e=new FileReader;e.onload=c=>{b(c.target.result)};g?e.readAsText(f):e.readAsDataURL(f)}},isSameFile:(f,b)=>null!=f&&null!=b&&f.name===b.name&&f.type===b.type&&f.size===b.size,createFile:f=>{const b=(new t.URI(f)).file;return{name:b,serverPath:f,size:-1,type:m[t.getExtension(b)]}}},initNode:function(f,
b){const g=this;g.files=[];b.requestFileParam??(b.requestFileParam="file");b.maxFiles??(b.maxFiles=-1);g.callSuper(f,b);g.fileInput=new t.NativeInputWrapper(g,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:g.disabled,overflow:"hidden"},[t.SizeToParent,{initNode:function(e,c){this.inputType="file";this.callSuper(e,c);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<g.maxFiles},_hndlInput:function(e){g.handleFiles(this.getIDE().files,e)}}])},setValue:function(f){this.clearFiles();
if(f){Array.isArray(f)||(f=[f]);for(const b of f)this.addFile(k.createFile(b))}return this.callSuper?this.callSuper(f):f},getValue:function(){return this.value},setDisabled:function(f){this.callSuper(f);this.fileInput?.setDisabled(f)},setMaxFiles:function(f){this.maxFiles!==f&&(this.maxFiles=f,this.inited&&this.fireEvent("maxFiles",f),this.fileInput&&(this.fileInput.getIDE().multiple=1<f))},setUploadUrl:function(f){this.set("uploadUrl",f,!0)},setRequestFileParam:function(f){this.set("requestFileParam",
f,!0)},bringSubviewToFront:function(f){f===this.fileInput?this.callSuper(f):this.sendSubviewBehind(f,this.fileInput)},subviewAdded:function(f){this.callSuper(f);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(f,b){this.addFile(f)},filterFiles:function(f){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:f},uploadFiles:function(f,b){f??=this.uploadUrl;const g=this.files;let e=g.length;for(;e;)this.uploadFile(g[--e],f,b)},makeFetchOptionsForUpload:f=>
({method:"POST",body:f}),uploadFile:function(f,b,g){const e=this,c=new FormData;c.append(g??e.requestFileParam,f,f.name);t.doFetch(b??e.uploadUrl,e.makeFetchOptionsForUpload(c),!1,q=>{e.handleUploadSuccess(f,q)},q=>{e.handleUploadFailure(f,q)})},handleUploadSuccess:function(f,b){f[k.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(f,b);this.updateValueFromFiles()},handleUploadFailure:(f,b)=>{w("Upload failure:"+b.status+":"+b.message)},parseServerPathFromResponse:(f,b)=>null,addFile:function(f){this.files.push(f);
this.updateValueFromFiles();this.fireEvent("addFile",f)},removeFile:function(f){const b=this.files;let g=b.length;for(;g;)if(k.isSameFile(b[--g],f)){b.splice(g,1);this.updateValueFromFiles();this.fireEvent("removeFile",f);break}},updateValueFromFiles:function(){const f=[];var b=this.files;let g=b.length;for(;g;){const e=b[--g][k.FILE_ATTR_SERVER_PATH];e&&f.push(e)}b=f.length;this.value=1===b?f[0]:0===b?void 0:f;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const f=this.files;let b=f.length;for(;b;)this.removeFile(f[--b])}}),h=t.ImageUploader=new x("ImageUploader",k,{extend:{isImageFile:f=>/image/i.test(f.type)},initNode:function(f,b){b.maxFiles=1;this.callSuper(f,b)},setWidth:function(f){this.callSuper(f);this.inited&&this.updateImageSize()},setHeight:function(f){this.callSuper(f);this.inited&&this.updateImageSize()},filterFiles:function(f){if(h.isImageFile(f)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(f)}},addFile:function(f){const b=this,g=h.isImageFile(f);b.callSuper(f);const e=b.image=new t.Image(b,{useNaturalSize:!1,align:"center",valign:"middle"});e.file=f;const c=q=>{const n=new Image;n.onload=()=>{f.width=n.width;f.height=n.height;e&&!e.destroyed&&b.updateImage(f,e,n.src)};n.src=q};g?-1===f.size?c(f.serverPath):h.isImageFile(f)&&k.readFile(f,c):-1===f.size?b.updateImage(f,e,f.serverPath):k.readFile(f,q=>{b.updateImage(f,e,q)})},scaleToFit:(f,b,g,e)=>g/e>f/b?[f,e*f/
g]:[g*b/e,b],removeFile:function(f){this.callSuper(f);const b=this.getSubviews();let g=b.length;for(;g;){const e=b[--g];if(k.isSameFile(e.file,f)){e.destroy();break}}},handleDroppedFile:function(f,b){this.callSuper(f,b);this.uploadFile(f,this.uploadUrl)},updateImage:function(f,b,g){this.nativeWidth=f.width;this.nativeHeight=f.height;this.updateImageSize();b.setImageUrl(g)},updateImageSize:function(){const f=this.image;if(f&&!f.destroyed){var b=this.scaleToFit(this.width,this.height,this.nativeWidth,
this.nativeHeight);const g=u(b[0]);b=u(b[1]);f.setImageSize(g+"px "+b+"px");f.setWidth(g);f.setHeight(b)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(t=>{const x=(w,u,m,a)=>{m=m.bind(w);"y"!==w.axis&&(m(u,a,"x"),m(u,a,"boundsWidth"));"x"!==w.axis&&(m(u,a,"y"),m(u,a,"boundsHeight"));m(u,a,"visible")};t.SizeToChildren=new JS.Class("SizeToChildren",t.Layout,{initNode:function(w,u){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,u)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const u=this.parent;if(!u.isBeingDestroyed){const m=this.subviews;var w=m.length;const a=this.axis,d=Math.max;let k,h;if("y"!==a){k=w;for(h=0;k;){const f=m[--k];f.visible&&(h=d(h,f.x+(0<f.boundsWidth?f.boundsWidth:0)))}u.setWidth(h+
this.paddingX)}if("x"!==a){k=w;for(h=0;k;)w=m[--k],w.visible&&(h=d(h,w.y+(0<w.boundsHeight?w.boundsHeight:0)));u.setHeight(h+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){x(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){x(this,w,this.detachFrom,"update")}})})(myt);
(t=>{let x=0;const w=JS.Class,{View:u,SizeToParent:m,RootView:a}=t,d=t.Dimmer=new w("Dimmer",u,{include:[m],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(h,f){this.restoreFocus=!0;f.focusable=f.focusCage=!0;f.percentOfParentWidth??(f.percentOfParentWidth=100);f.percentOfParentHeight??(f.percentOfParentHeight=100);f.visible??(f.visible=!1);f.ignoreLayout??(f.ignoreLayout=!0);this.callSuper(h,f);this.overlay=new u(this,{ignorePlacement:!0,opacity:d.OPACITY,bgColor:d.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[m]);for(const b of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",b);a.setupCaptureDrop(this)},destroy:function(){a.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(h){this.restoreFocus=h},eatMouseEvent:h=>!0,show:function(){const h=t.global.focus;this.prevFocus=h.focusedView??h.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(h){this.visible&&
(this.setVisible(!1),!h&&this.restoreFocus&&this.prevFocus?.focus())}}),k=t.ModalPanel=new w("ModalPanel",d,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(h,f){const b={name:"content",ignorePlacement:!0},g={...b,align:"center",valign:"middle"};this.defaultPlacement="content";f.sizingStrategy??(f.sizingStrategy="children");f.marginTop??(f.marginTop=k.MARGIN_TOP);f.marginLeft??
(f.marginLeft=k.MARGIN_LEFT);f.marginBottom??(f.marginBottom=k.MARGIN_BOTTOM);f.marginRight??(f.marginRight=k.MARGIN_RIGHT);f.paddingX??(f.paddingX=k.PADDING_X);f.paddingY??(f.paddingY=k.PADDING_Y);this.callSuper(h,f);switch(this.sizingStrategy){case "children":new t.SizeToChildren(new u(this,g),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new u(this,{...b,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[m]);break;case "basic":new u(this,g);break;default:new u(this,b)}},setSizingStrategy:function(h){this.sizingStrategy=h},setMarginTop:function(h){this.marginTop=h},setMarginLeft:function(h){this.marginLeft=h},setMarginBottom:function(h){this.marginBottom=h},setMarginRight:function(h){this.marginRight=h},setPaddingX:function(h){this.paddingX=h},setPaddingY:function(h){this.paddingY=h},
show:function(){this.callSuper();x++},hide:function(h){this.callSuper(h);x=Math.max(0,x-1)}})})(myt);
(t=>{const x=u=>{u[u.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=u=>{const m=u.size,a=u.getIDS();u.setWidth(m);u.setHeight(m);a.width=a.height=m-2*u.borderWidth+"px"};t.Spinner=new JS.Class("Spinner",t.View,{initNode:function(u,m){this.lateAttrs=["spinColor"];m.visible??(m.visible=!1);m.borderWidth??(m.borderWidth=5);m.borderColor??(m.borderColor="#fff");m.borderStyle??(m.borderStyle="solid");m.spinColor??(m.spinColor="#000");this.callSuper(u,m);this.getIDS().borderRadius="50%";w(this);
x(this)},setSize:function(u){this.size!==u&&(this.size=u,this.inited&&w(this))},setSpinColor:function(u){this.spinColor!==u&&(this.getIDS().borderTopColor=this.spinColor=u,this.inited&&this.fireEvent("spinColor",u))},setBorderWidth:function(u){this.borderWidth!==u&&(this.callSuper(u),this.inited&&w(this))},setVisible:function(u){this.visible!==u&&(this.callSuper(u),this.inited&&x(this))}})})(myt);
(t=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=a=>{if(Array.isArray(a)){let d=a.length;if(0<d){a.unshift("fa");d++;a[1].startsWith("fa-")||(a[1]="fa-"+a[1]);3<=d&&(a[2]=x[a[2]]??"");if(3<d)for(let k=3;d>k;k++)a[k].startsWith("fa-")||(a[k]="fa-"+a[k]);return'<i class="'+a.join(" ")+'"></i>'}}t.dumpStack("Error making tag");console.error(a);return""},u=a=>{let d=a.properties;d=d?"string"===typeof d?d.split(" "):d.slice():[];d.unshift(a.icon,a.size);a.setHtml(w(d))},m=a=>{for(const d of["Free 400",
"Free 900","Brands 400"])t.registerForFontNotification(a,"Font Awesome 5 "+d)};t.FontAwesome=new JS.Class("FontAwesome",t.Markup,{extend:{makeTag:w,registerForNotification:m},initNode:function(a,d){this.size=0;this.icon="";this.callSuper(a,d);u(this);m(this)},setIcon:function(a){const d=this.icon;this.set("icon",a,!0);this.inited&&d!==a&&u(this)},setSize:function(a){const d=this.size;this.set("size",a,!0);this.inited&&d!==a&&u(this)},setProperties:function(a){this.properties=a;this.fireEvent("properties",
a);this.inited&&u(this)}});t.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(t=>{let x,w,u,m,a=0,d=0,k=0,h=255,f=[],b,g,e,c,q,n,p,r,z,D,I,K,J,M,y,l,v,A,B,E,H,L,Q,R,T,P;const ba=JS.Class,{View:U,Text:ka,ModalPanel:ca,SizeToChildren:ua,SpacedLayout:Aa,WrappingLayout:Ba,SelectionManager:Ca,Color:pa,LocalStorage:Da,Button:va,TextButton:ma,Draggable:Ea,FontAwesome:{makeTag:na}}=t,{min:ha,max:ia}=Math,la=[1,"solid","#333"],Fa=[1,"solid","#999"],wa=[1,"solid","#fff"],Ka=new ba("DialogButton",ma,{initNode:function(C,F){F.height??(F.height=17);F.paddingTop??(F.paddingTop=3);F.paddingLeft??
(F.paddingLeft=10);F.paddingRight??(F.paddingRight=10);F.activeColor??(F.activeColor="#bbb");F.hoverColor??(F.hoverColor="#ddd");F.readyColor??(F.readyColor="#ccc");F.domClass="mytButtonText";this.callSuper(C,F)}}),La=na(["check"]),Ha=C=>{for(let F of C)7===F?.length&&(F+="ff"),Ga[F]=!0},Ga={},Ma=new ba("Swatch",U,{include:[va],initNode:function(C,F){const G=F.width=F.height=16;F.border=Fa;F.domClass="mytCheckerboardPattern";const N=F.bgColor;this.callSuper(C,F);this.colorView=new U(this,{width:G,
height:G,bgColor:N});N===m&&(C=pa.makeColorFromHexString(m),new ka(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView?.setBgColor(C);this.setTooltip(C)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(la)},drawReadyState:function(){this.setBorder(Fa)}}),Na=t.ColorPicker=new ba("ColorPicker",U,{initNode:function(C,F){x=this;x._isReady=!1;let G=F.color??"transparent";delete F.color;
u=F.alphaChannel??!1;delete F.alphaChannel;b=F.palette??[];Ha(b);delete F.palette;w="transparent"===G;x.callSuper(C,F);g=new U(x,{width:160,height:170});new Ba(g,{spacing:4,lineSpacing:4});e=new U(x,{x:170,width:139,height:139,border:la},[Ea,{requestDragPosition:function(N,O){e.callSuper(e.x,e.y);const S=this.getPagePosition();d=parseFloat(ia(0,ha(1,(N+this.dragInitX-S.x)/this.width)));k=parseFloat(1-ia(0,ha(1,(O+this.dragInitY-S.y)/this.height)));w=!1;x.updateUI()}}]);C=new U(e,{width:139,height:139});
F=new U(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";F.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";c=new U(F,{width:6,height:6,bgColor:"#000",border:wa,roundedCorners:4});q=new U(x,{x:315,y:30,width:24,height:109,border:la},[Ea,{requestDragPosition:function(N,O){this.callSuper(q.x,q.y);a=parseFloat(ia(0,ha(1,(O+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;x.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new U(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new U(x,{x:315,width:24,height:24,border:la,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[va,{doActivated:()=>{x.setColor("transparent")}}]);C=146;u&&(z=new t.LabelSlider(x,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(N,O){O=N.value;if(null==O||isNaN(O))O=
0;N.value=t.formatAsPercentage(O/255,0);this.callSuper(N,!0);h=O;x._isReady&&(w=!1,x.updateUI())}}]),C+=23);p=new t.InputText(x,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:la,maxLength:11,fontFamily:"monospace"});x.attachToDom(p,"_submitInput","blur");x.attachToDom(p,"_handleKeyDown","keydown");p.getIDS().paddingLeft="6px";C=new U(x,{x:170,y:C,width:60,height:23,border:la,domClass:"mytCheckerboardPattern"});new U(C,{width:30,height:23,focusIndicator:!1,bgColor:G},[va,{doActivated:()=>
{x.setColor(G)}}]);r=new U(C,{x:30,width:30,height:23});if(C=Da.getItem("myt.default"))f=C.split(";"),Ha(f);x.setColor(G);x._isReady=!0},_handleKeyDown:C=>{t.KeyObservable.isEnterKeyEvent(C)&&x._submitInput()},_submitInput:()=>{x.setColor(p.value)},addToPalette:C=>{C&&"transparent"!==C&&!Ga[C]&&(f.unshift(C),f.length=ha(f.length,56),Da.setItem("myt.default",f.join(";")))},setColor:C=>{const F=C&&"transparent"!==C;if(u){let G="ff";F&&7<C.length&&(G=C.slice(7,9),C=C.slice(0,7));z.setValue(parseInt(G,
16))}else F&&7<C.length&&(C=C.slice(0,7));F?(C=pa.makeColorFromHexString(C).getHSV(),a=C.h/360,d=C.s,k=C.v,w=!1):w=!0;x.updateUI()},getColor:()=>{if(w)return"transparent";let C="";u&&(C=h.toString(16),2>C.length&&(C="0"+C));return pa.makeColorFromHSV(360*a,100*d,100*k).getHtmlHexString()+C},updateUI:()=>{const C=!w;n.setVisible(C);c.setVisible(C);C&&(c.setX(ia(0,ha(1,d)*(e.width+2))-5),c.setY(ia(0,ha(1,1-k)*(e.height+2))-5),n.setY(a*(q.height-2)-1));e.setBgColor(pa.makeColorFromHSV(360*a,100,100).getHtmlHexString());
m=x.getColor();p.setValue(m);r.setBgColor(m);x.redrawPalette()},redrawPalette:t.debounce(()=>{var C=g.getSubviews();let F=C.length;for(;F;)C[--F].destroy();C=new Set;b.push(...f);for(let G of b)if(u||7===G.length)7===G.length&&(G+="ff"),C.has(G)||(new Ma(g,{bgColor:G}),C.add(G))},50)}),xa=C=>{C=C.split(":");return[ia(0,ha(23,parseInt(C[0]))),ia(0,ha(60,parseInt(C[1])))]},Ia=C=>{C.deselectAll();C=C.getSubviews();let F=C.length;for(;F;)C[--F].destroy()},Ja=new ba("SelectableBtn",ma,{include:[t.Selectable],
setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ba("TimeBtn",Ja,{initNode:function(C,F){F.width=J?175:49;this.callSuper(C,F)},doActivated:function(){this.callSuper();const C=this.text,F=xa(C);P.selectById(C);H.setHours(F[0]);H.setMinutes(F[1])}}),Pa=new ba("DayBtn",Ja,{initNode:function(C,F){F.width=23;F.border=wa;this.callSuper(C,F)},setData:function(C){this.data=
C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const C=new Date(this.data);C.setHours(H.getHours());C.setMinutes(H.getMinutes());
oa(C)}}),oa=C=>{C.setSeconds(0);C.setMilliseconds(0);var F=6>=y.length,G;if(F)for(G=7;G--&&!y.includes(C.getDay());)C.setDate(C.getDate()+1);H=C;const N=P.getODE().scrollTop;var O=new Date,S=O.getFullYear();G=O.getMonth();var W=O.getDate();O.getHours();O.getMinutes();const V=C.getFullYear(),X=C.getMonth(),qa=C.getDate();var da=C.getTime();O=C.getHours();C=C.getMinutes();const ea=(new Date(V,X,1)).getDay()-M,ra=(new Date(V,X+1,0)).getDate(),ya=(new Date(V,X,0)).getDate(),sa=new Date(V,X,0),ta=new Date(V,
X+2,0),Qa=S==V&&G==X;if(!J){Ia(T);G=new Date(da);const ja=7+M;S=I.days;Q.setText(V+" "+I.sep+" "+I.months[X]);G.setMinutes(59);G.setHours(23);G.setSeconds(59);G.setDate(0);L.setVisible(null==l||l<G.getTime());G.setMinutes(0);G.setHours(0);G.setSeconds(0);G.setDate(1);G.setMonth(X+1);R.setVisible(null==v||v>G.getTime());for(G=0;7>G;G++)new ka(T,{width:23,height:20,textAlign:"center",text:S[(G+ja)%7],textColor:"#999"});G=0;let fa=42;0>ea&&(G=-7,fa=35);S=new Date(da);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);G<
fa;G++){var Y=G+1-ea;const za=(G+ja)%7,Z=new Pa(T);ea>G?(Z.setText(ya+Y),Z.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(ya+Y)),Z.setIsAnotherMonth(!0),S.setDate(ya+Y),S.setMonth(sa.getMonth()),S.setYear(sa.getFullYear())):G<ea+ra?(Z.setText(Y),Z.setData(V+"/"+(X+1)+"/"+Y),S.setDate(Y),S.setMonth(X),S.setYear(V)):(Z.setText(Y-ra),Z.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(Y-ra)),Z.setIsAnotherMonth(!0),S.setDate(Y-ra),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear()));F&&!y.includes(za)?
Z.setDisabled(!0):(0===za?Z.setIsSunday(!0):6===za&&Z.setIsSaturday(!0),Y===qa&&(T.select(Z),Z.focus()),Qa&&Y===W&&Z.setIsToday(!0),Y=new Date(S.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=l&&l>Y.getTime()||null!=v&&v<S.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!K){F=60*B[0]+B[1];Ia(P);let [ja,fa]=A;for(S=new Date(da);60*ja+fa<F;)W=new Oa(P,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===O&&fa===C&&P.select(W),S.setHours(ja),S.setMinutes(fa),da=S.getTime(),(null!=
l&&l>da||null!=v&&v<da)&&W.setDisabled(!0),fa+=E,60<=fa&&(fa-=60,ja++);P.scrollYTo(N)}},Ra=t.DatePicker=new ba("DatePicker",U,{initNode:function(C,F){D=this;const G={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...F.opt};delete F.opt;D.callSuper(C,F);I=G.locales[G.locale??"en"];K=G.dateOnly;J=G.timeOnly;M=G.firstDayOfWeek;E=ia(5,ha(30,G.minuteInterval));y=
G.allowedDays;Array.isArray(y)&&0!==y.length||(y=[0,1,2,3,4,5,6]);l=Date.parse(G.minDate);l=isNaN(l)?null:l;v=Date.parse(G.maxDate);v=isNaN(v)?null:v;A=xa(G.minTime);B=xa(G.maxTime);C=new U(D,{visible:!J});G.showTodayButton&&new ma(C,{width:24,text:na(["home"]),tooltip:I.today},[{doActivated:()=>{oa(new Date)}}]);L=new ma(C,{width:24,x:28,text:na(["chevron-left"]),tooltip:I.prevMonth},[{doActivated:()=>{const N=(new Date(H.getFullYear(),H.getMonth(),0)).getDate();N<H.getDate()&&H.setDate(N);H.setMonth(H.getMonth()-
1);oa(H);L.focus()}}]);Q=new ka(C,{width:100,x:52,textAlign:"center"});R=new ma(C,{width:24,x:152,text:na(["chevron-right"]),tooltip:I.nextMonth},[{doActivated:()=>{var N=(new Date(H.getFullYear(),H.getMonth()+1,0)).getDate();N<H.getDate()&&H.setDate(N);N=(new Date(H.getFullYear(),H.getMonth()+2,0)).getDate();N<H.getDate()&&H.setDate(N);H.setMonth(H.getMonth()+1);oa(H);R.focus()}}]);T=new U(D,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Ca]);new Ba(T,{spacing:2,lineInset:2,
lineSpacing:3});P=new U(D,{x:J?0:195,y:J?0:25,width:(J?175:49)+t.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!K,maxSelected:1,itemSelectionId:"text"},[Ca]);new Aa(P,{axis:"y",inset:1,spacing:3});D.setWidth(P.visible?P.x+P.width:T.width);oa(G.current??new Date)},getPickedDate:()=>H}),aa=t.Dialog=new ba("Dialog",ca,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:wa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},
NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,F){F.buttonClass??(F.buttonClass=aa.BUTTON_CLASS);this.callSuper(C,F);C=this.content;C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER);C.setFocusCage(!0);this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=C},makeButton:function(C,F){const G=this;return new G.buttonClass(C,
F,[{doActivated:function(){G.doCallback(this)}}])},makeCloseButton:function(C){return C.closeBtn=this.makeButton(C,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:na(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const C=this.content,F=C.sizeToChildren,G=C.getSubviews();let N=G.length;for(;N;){const O=G[--N];"closeBtn"!==O.name&&O.destroy()}C.setVisible(!0);this.overlay.setBgColor(t.Dimmer.COLOR);this.setCallbackFunction();F.setPaddingY(ca.PADDING_Y);F.setPaddingX(ca.PADDING_X);C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER)},doCallback:function(C){const F=this.callbackFunction;F&&F.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();
this.content.setVisible(!1);C?.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,F,G){const N=this.content,O=N.closeBtn;G={...aa.WRAP_TEXT_DEFAULTS,...G};this.destroyContent();this.setCallbackFunction(F);C=N.msg=new ka(N,{text:C,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ca.PADDING_X:G.msgX,y:null==G.msgY?ca.PADDING_Y:G.msgY,width:G.width});G.titleText&&(this.setupTitle(N,G.titleText),C.setY(C.y+24));this.show();!1===G.showClose?
O.setVisible(!1):(O.setVisible(!0),O.focus())},showSimple:function(C,F,G,N){G=G??{};const O=this.content,S=O.closeBtn,W=G.maxContainerHeight;this.destroyContent();G.bgColor&&O.setBgColor(G.bgColor);G.roundedCorners&&O.setRoundedCorners(G.roundedCorners);G.boxShadow&&O.setBoxShadow(G.boxShadow);G.border&&O.setBorder(G.border);O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=O.contentContainer=new U(O,{x:1,y:25,overflow:"auto"},[{setHeight:function(V){V>W&&(V=W);this.callSuper(V)}}]);C.call(this,
F);new ua(F,{axis:"both"});this.show();S.setVisible(!0);S.focus();G.titleText&&(this.setupTitle(O,G.titleText),F.setY(this.header.height+1));F.initialFocus?.focus();N?.(this)},showConfirm:function(C,F,G){G={...aa.CONFIRM_DEFAULTS,...G};this.showMessage(C,F,G);this.setupFooterButtons(this.content.msg,G)},showContentConfirm:function(C,F,G,N){G={...aa.CONFIRM_DEFAULTS,...G};const O=this.content,S=O.closeBtn,W=G.maxContainerHeight;this.destroyContent();O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);
F=O.contentContainer=new U(O,{x:1,y:25,overflow:"auto"},[{setHeight:function(V){this.callSuper(V>W?W:V)}}]);C.call(this,F);new ua(F,{axis:"both"});this.show();S.setVisible(!0);S.focus();this.setupTitle(O,G.titleText);F.setY(this.header.height+1);this.setupFooterButtons(F,G);F.initialFocus?.focus();N?.(this)},showSpinner:function(C,F){const G=this.content;F={...aa.NO_WRAP_TEXT_DEFAULTS,...F};this.destroyContent();const N=this.spinner=new t.Spinner(G,{align:"center",visible:!0,borderColor:"#ccc",size:50,
y:null==F.msgY?ca.PADDING_Y:F.msgY});C&&new ka(G,{text:C,whiteSpace:F.whiteSpace,wordWrap:F.wordWrap,fontWeight:F.fontWeight,x:null==F.msgX?ca.PADDING_X:F.msgX,y:N.y+N.size+ca.PADDING_Y,width:F.width});this.show();G.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,F){const G=this,N=G.content,O=N.closeBtn;F={...aa.COLOR_PICKER_DEFAULTS,...F};G.destroyContent();G.setCallbackFunction(S=>{switch(S){case "closeBtn":case "cancelBtn":C.call(G,S);break;case "confirmBtn":const W=x.getColor();
x.addToPalette(W);C.call(G,S,W)}x.destroy()});x=new Na(N,{x:ca.PADDING_X,y:ca.PADDING_Y+24,width:337,height:177+(F.alphaChannel?23:0),color:F.color,alphaChannel:F.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});G.show();O.setVisible(!0);O.focus();G.setupFooterButtons(x,F);G.setupTitle(N,F.titleText)},showDatePicker:function(C,F){const G=this,N=G.content,O=N.closeBtn;F={...aa.DATE_PICKER_DEFAULTS,
...F};G.destroyContent();G.setCallbackFunction(S=>{switch(S){case "closeBtn":case "cancelBtn":C.call(G,S);break;case "confirmBtn":C.call(G,S,D.getPickedDate())}D.destroy()});D=new Ra(N,{x:ca.PADDING_X,y:ca.PADDING_Y+24,height:195,opt:{current:new Date(F.initialDate??Date.now()),dateOnly:F.dateOnly||!1,timeOnly:F.timeOnly||!1,locales:F.locales,locale:F.locale}});G.show();O.setVisible(!0);O.focus();G.setupFooterButtons(D,F);G.setupTitle(N,F.timeOnly?F.timeOnlyTitleText:F.titleText)},setupTitle:function(C,
F){const G=aa.RADIUS;(this.header=new U(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:G,roundedTopRightCorner:G})).sendToBack();C.title=new ka(C,{x:G,y:4,text:F,fontWeight:"bold"})},setupFooterButtons:function(C,F){const G=this.content;var N=ca.PADDING_Y,O=N/2;C=G.btnContainer=new U(G,{y:C.y+C.height+N,align:"center"});const S=["active","hover","ready","text"];N=F.cancelAttrs??{};var W;(W=N).name??(W.name="cancelBtn");let V;(V=N).text??(V.text=F.cancelTxt);for(let ea of S)ea+=
"Color",null!=F[ea]&&(N[ea]=F[ea]);W=this.makeButton(C,N);N=F.confirmAttrs??{};var X;(X=N).name??(X.name="confirmBtn");let qa;(qa=N).text??(qa.text=F.confirmTxt);for(var da of S)da+="Color",X=da+"Confirm",null!=F[X]&&(N[da]=F[X]);this.makeButton(C,N);if(da=F.button)for(const ea of da)this.makeButton(C,ea);new ua(C,{axis:"y"});new Aa(C,{spacing:4,collapseParent:!0});G.sizeToChildren.setPaddingY(O);O=C.y-O;(new U(G,{ignoreLayout:!0,y:O,width:G.width,height:G.height-O,bgColor:"#eee"})).sendToBack();
!1===F.showClose&&W.focus()}})})(myt);
(t=>{const x=JS.Class,w=t.dumpStack,u={},m=(g,e)=>{if(g){const c=g.id;g.id?e(c):w("No ID")}else w("No validator")},a=g=>{m(g,e=>{u[e]=g})},d=t.Validator=new x("Validator",{initialize:function(g){this.id=g},isValid:(g,e,c)=>!0,isFormValid:function(g,e,c){e??={};e.form=g;return this.isValid(g.getValue(),e,c)}}),k=t.RequiredFieldValidator=new x("RequiredFieldValidator",d,{isValid:(g,e,c)=>null==g||""===g||"string"===typeof g&&""===g.trim()?(c?.push("This value is required."),!1):!0}),h=t.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",d,{isValid:(g,e,c)=>{e=e.form.getRollbackValue();return g&&e&&g.toLowerCase()===e.toLowerCase()?(c?.push("Value must differ by more than just case."),!1):!0}}),f=t.URLValidator=new x("URLValidator",d,{initialize:function(g,e){this.callSuper(g);this.originalRawQuery=e},isValid:function(g,e,c){return(new t.URI(g)).toString(this.originalRawQuery)!==g?(c?.push("Invalid URL."),!1):!0}}),b=t.JSONValidator=new x("JSONValidator",d,{isValid:(g,e,c)=>{try{return JSON.parse(g),
!0}catch(q){return c?.push(q),!1}}});t.EqualFieldsValidator=new x("EqualFieldsValidator",d,{initialize:function(g,e,c){this.callSuper(g);this.fieldA=e;this.fieldB=c},isValid:function(g,e,c){if(g&&this.fieldA.getValue()===this.fieldB.getValue())return!0;c?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});t.LengthValidator=new x("LengthValidator",d,{initialize:function(g,e,c){this.callSuper(g);this.min=e;this.max=c},isValid:function(g,e,c){g=g?g.length:
0;e=this.min;const q=this.max;return void 0!==e&&e>g?(c?.push("The value must not be less than "+e+" characters long."),!1):void 0!==q&&q<g?(c?.push("The value must not be greater than "+q+" characters long."),!1):!0}});t.NumericRangeValidator=new x("NumericRangeValidator",d,{initialize:function(g,e,c){this.callSuper(g);this.min=e;this.max=c},isValid:function(g,e,c){if(""===g)return!0;g=Number(g);e=this.min;const q=this.max;return isNaN(g)?(c?.push("Value is not a number."),!1):void 0!==e&&e>g?(c?.push("Value must not be less than "+
e+"."),!1):void 0!==q&&q<g?(c?.push("Value must not be greater than "+q+"."),!1):!0}});t.CompoundValidator=new x("CompoundValidator",d,{initialize:function(g,...e){this.callSuper(g);for(g=e.length;g;){let c=e[--g];"string"===typeof c&&((e[g]=c=u[c])||e.splice(g,1))}this.__v=e},addValidator:function(g){"string"===typeof g&&(g=u[g]);g&&this.__v.push(g)},isValid:function(g,e,c){const q=this.__v,n=q.length;let p=!0,r=0;for(;n>r;)p=q[r++].isValid(g,e,c)&&p;return p}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){a(new k("required"));a(new h("equalsIgnoreCase"));a(new f("url"));a(new b("json"));t.global.register("validators",this)},getValidator:g=>u[g],register:a,unregister:g=>{m(g,e=>{u[e]&&delete u[e]})}})})(myt);
(t=>{const x=JS.Class,{min:w,max:u,round:m}=Math,a=t.View,d=new x("SliderThumb",t.SimpleButton,{include:[t.Draggable,t.ArrowKeyActivation],initNode:function(h,f){const b=f.width=h.thumbWidth,g=f.height=h.thumbHeight;f.roundedCorners=w(g,b)/2;f.repeatKeyDown=!0;f.activationKeys=t.global.keys.ARROW_KEYS;f.activeColor="#bbb";f.readyColor="#ccc";f.hoverColor="#ddd";f.boxShadow=[0,0,4,"#666"];this.callSuper(h,f);this["x"===h.axis?"setY":"setX"](h.thumbOffset);this.syncTo(h,"setDisabled","disabled");h._syncThumbToValue(this,
h.getValue())},setDisabled:function(h){this.callSuper(this.valueFromEvent(h))},setFocused:function(h){this.callSuper(h);h&&this.makeHighestZIndex()},setX:function(h){this.x!==h&&(this.callSuper(h),h=this.parent,"x"===h.axis&&h.syncValueToThumb(this))},setY:function(h){this.y!==h&&(this.callSuper(h),h=this.parent,"y"===h.axis&&h.syncValueToThumb(this))},requestDragPosition:function(h,f){if(!this.disabled){var b=this.parent;const g=b.getMinPixelValueForThumb(this),e=b.getMaxPixelValueForThumb(this);
"x"===b.axis?(b=this.width/2,f="setX"):(b=this.height/2,h=f,f="setY");this[f](w(u(h,g-b),e-b))}},doKeyArrowLeftOrUp:function(h,f){h?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(h,f){h?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),k=t.BaseSlider=new x("BaseSlider",a,{include:[t.Disableable],initNode:function(h,f){f.axis??(f.axis="x");"x"===f.axis?(f.width??(f.width=100),f.height??(f.height=18)):(f.width??(f.width=
18),f.height??(f.height=100));f.bgColor??(f.bgColor="#999");f.roundedCorners??(f.roundedCorners=9);f.trackInset??(f.trackInset=9);f.trackOutset??(f.trackOutset=9);f.thumbWidth??(f.thumbWidth=16);f.thumbHeight??(f.thumbHeight=16);f.thumbOffset??(f.thumbOffset=1);f.nudgeAmount??(f.nudgeAmount=1);this.callSuper(h,f)},setAxis:function(h){this.axis=h},setTrackInset:function(h){this.trackInset=h},setTrackOutset:function(h){this.trackOutset=h},setThumbWidth:function(h){this.thumbWidth=h},setThumbHeight:function(h){this.thumbHeight=
h},setThumbOffset:function(h){this.thumbOffset=h},setNudgeAmount:function(h){this.nudgeAmount=h},convertValueToPixels:function(h){const f=this.minValue,b=this.trackInset;return b+(("x"===this.axis?this.width:this.height)-b-this.trackOutset)/(this.maxValue-f)*(h-f)},convertPixelsToValue:function(h){const f=this.minValue,b=this.trackInset;return(this.maxValue-f)/(("x"===this.axis?this.width:this.height)-b-this.trackOutset)*(h-b)+f},nudgeValueLeft:function(h){this._nudge(h,!1)},nudgeValueUp:function(h){this._nudge(h,
!1)},nudgeValueRight:function(h){this._nudge(h,!0)},nudgeValueDown:function(h){this._nudge(h,!0)},_nudge:(h,f)=>{},_syncThumbToValue:function(h,f){f=this.convertValueToPixels(f);"x"===this.axis?h.setX(f-h.width/2):h.setY(f-h.height/2)},syncValueToThumb:function(h){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(h,this.convertPixelsToValue("x"===this.axis?h.x+h.width/2:h.y+h.height/2)),this.__lockSync=!1)},_syncValueToThumb:(h,f)=>{},getMinPixelValueForThumb:function(h){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(h){return this.convertValueToPixels(this.maxValue)}});t.RangeSlider=new x("RangeSlider",k,{include:[t.BoundedRangeComponent],initNode:function(h,f){this.callSuper(h,f);h=this.rangeFill=new a(this,{bgColor:"#666"});"x"===this.axis?(h.setY(this.thumbOffset),h.setHeight(this.thumbHeight),h.setRoundedCorners(this.thumbHeight/2)):(h.setX(this.thumbOffset),h.setWidth(this.thumbWidth),h.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new d(this);this.thumbUpper=new d(this);
this._syncRangeFillToValue()},setValue:function(h){this.callSuper(h);this.inited&&(this.__lockSync||(h=this.getValue(),this._syncThumbToValue(this.thumbLower,h),this._syncThumbToValue(this.thumbUpper,h)),this._syncRangeFillToValue())},setWidth:function(h){const f=this.width;this.callSuper(h);this.inited&&"x"===this.axis&&this.width!==f&&(h=this.getValue(),this._syncThumbToValue(this.thumbLower,h),this._syncThumbToValue(this.thumbUpper,h))},setHeight:function(h){const f=this.height;this.callSuper(h);
this.inited&&"y"===this.axis&&this.height!==f&&(h=this.getValue(),this._syncThumbToValue(this.thumbLower,h),this._syncThumbToValue(this.thumbUpper,h))},_syncRangeFillToValue:function(){const h=this.rangeFill;var f=this.getValue();const b=this.convertValueToPixels(f.lower);f=this.convertValueToPixels(f.upper)-b;"x"===this.axis?(h.setX(b),h.setWidth(f)):(h.setY(b),h.setHeight(f))},_syncThumbToValue:function(h,f){this.callSuper(h,"thumbLower"===h.name?f.lower:f.upper)},_syncValueToThumb:function(h,f){let b=
this.getValueCopy();b["thumbLower"===h.name?"lower":"upper"]=f;this.setValue(b);b=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,b);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,b)},_nudge:function(h,f){const b=this.getValueCopy();f=this.nudgeAmount*(f?1:-1);"thumbLower"===h.name?b.lower=w(b.lower+f,b.upper):b.upper=u(b.upper+f,b.lower);this.setValue(b)},getMinPixelValueForThumb:function(h){return this.convertValueToPixels("thumbLower"===h.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(h){return this.convertValueToPixels("thumbLower"===h.name?this.getValue().upper:this.maxValue)}});t.Slider=new x("Slider",k,{include:[t.BoundedValueComponent],initNode:function(h,f){this.callSuper(h,f);this.thumb=new d(this)},setValue:function(h){this.callSuper(h);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(h){const f=this.width;this.callSuper(h);this.inited&&"x"===this.axis&&this.width!==f&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(h){const f=this.height;this.callSuper(h);this.inited&&"y"===this.axis&&this.height!==f&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(h,f){this.setValue(f);this._syncThumbToValue(h,this.getValue())},_nudge:function(h,f){this.setValue(this.getValue()+this.nudgeAmount*(f?1:-1))}});t.LabelSlider=new x("LabelSlider",t.Slider,{initNode:function(h,f){const b=this;f.labelX??(f.labelX=8);f.labelY??(f.labelY=2);f.labelFontSize??(f.labelFontSize=
"12px");f.labelColor??(f.labelColor="#000");f.flipThreshold??(f.flipThreshold=m((f.maxValue-f.minValue)/2)||0);b.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],f);b.callSuper(h,f);const g=b.labelX;b.labelTxt=new t.Text(b,{x:g,y:b.labelY,textColor:b.labelColor,fontSize:b.labelFontSize},[{initNode:function(e,c){this.targetX=g;this.callSuper(e,c)},updateX:function(e){const c=b.getValue()>=b.flipThreshold?g:b.width-this.width-g;this.targetX!==c&&(this.targetX=c,this.stopActiveAnimators("x"),
e?this.setX(c):this.animate({attribute:"x",to:c,duration:250}))}}]);b.syncTo(b,"setText","value")},setWidth:function(h){this.callSuper(h);this.labelTxt?.updateX(!0)},setText:function(h,f){const b=this.labelTxt;b&&(b.setText(h.value),b.updateX(f))}})})(myt);
(t=>{const x=JS.Class,{abs:w,min:u}=Math,{CODE_ENTER:m,CODE_SPACE:a,ARROW_KEYS:d}=t.global.keys,k=f=>{const b="y"===f.axis?"height":"width";f.constrain("__limitToParent",[f,"limitToParent",f,b,f.parent,b])};var h=t.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(f,b){b.nudgeTargetValue??(b.nudgeTargetValue="value");b.nudgeIncrement??(b.nudgeIncrement=1);b.nudgeMin??(b.nudgeMin=1);b.nudgeMax??(b.nudgeMax=64);this.__nudgeAcc=b.nudgeMin;this.callSuper(f,b)},setNudgeIncrement:function(f){this.set("nudgeIncrement",
w(f),!0)},setNudgeMin:function(f){this.set("nudgeMin",w(f),!0)},setNudgeMax:function(f){this.set("nudgeMax",w(f),!0)},setNudgeTargetValue:function(f){this.set("nudgeTargetValue",f,!0)},nudge:function(f,b){const g=this.nudgeTargetValue;b=this.__nudgeAcc=b?u(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(g,(this.get(g)||0)+(f?1:-1)*b);return!0}});h=new x("BaseDivider",t.SimpleButton,{include:[t.BoundedValueComponent,t.Draggable,t.ArrowKeyActivation,h],initNode:function(f,
b){b.activeColor??(b.activeColor="#bbb");b.hoverColor??(b.hoverColor="#ddd");b.readyColor??(b.readyColor="#ccc");b.axis??(b.axis="x");b.minValue??(b.minValue=0);b.value??(b.value=b.minValue);b.expansionState??(b.expansionState=2);b.focusIndicator??(b.focusIndicator=!1);b.repeatKeyDown??(b.repeatKeyDown=!0);b.activationKeys??(b.activationKeys=[m,a,...d]);"y"===b.axis?(b.height??(b.height=6),b.cursor??(b.cursor="row-resize")):(b.width??(b.width=6),b.cursor??(b.cursor="col-resize"));this.quickSet(["axis"],
b);this.callSuper(f,b);null==b.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&k(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(f){this.expansionState=f},setRestoreValue:function(f){this.restoreValue=f},setLimitToParent:function(f){this.limitToParent!==f&&(this.limitToParent=f,this.inited&&(this.fireEvent("limitToParent",f),null==f?this.releaseConstraint("__limitToParent"):k(this)))},setAxis:function(f){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=f},setValue:function(f){this.callSuper(f);f=this.value;"y"===this.axis?this.setY(f):this.setX(f)},__limitToParent:function(f){f="y"===this.axis?"height":"width";this.setMaxValue(this.parent[f]-this.limitToParent-this[f])},doActivationKeyDown:function(f,b){this.callSuper(f,b);switch(f){case m:case a:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(f,b){return this.nudge(!1,b)},doKeyArrowRightOrDown:function(f,b){return this.nudge(!0,b)},nudge:function(f,b){f=this.callSuper(f,b);this.setExpansionState(2);
this.setRestoreValue(this.value);return f},doPrimaryAction:function(){const {restoreValue:f,maxValue:b,minValue:g}=this;let e;switch(this.expansionState){case 0:null!=f&&(this.setExpansionState(1),f===g?f!==b&&this.doPrimaryAction():e=f);break;case 1:null!=b&&(this.setExpansionState(3),this.value===b?this.doPrimaryAction():e=b);break;case 2:null!=g&&(this.setExpansionState(0),this.value===g?this.doPrimaryAction():e=g);break;case 3:null!=f&&(this.setExpansionState(2),f===b?this.doPrimaryAction():e=
f)}this.animateToValue(e)},animateToValue:function(f,b=250){null!=f&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:f,duration:b}))},requestDragPosition:function(f,b){this.disabled||(f="y"===this.axis?b:f,b=this.value,f!==b&&(this.setValue(f),this.setRestoreValue(f),this.setExpansionState(b>f?2:1)))}});t.HorizontalDivider=new x("HorizontalDivider",h,{initNode:function(f,b){b.axis="x";this.callSuper(f,b)}});t.VerticalDivider=new x("VerticalDivider",h,{initNode:function(f,b){b.axis=
"y";this.callSuper(f,b)}})})(myt);
(t=>{let x=0;const {Class:w,Module:u}=JS,{min:m,max:a}=Math,{View:d,SpacedLayout:k,Node:{DEFAULT_PLACEMENT:h}}=t,f=y=>{const l=y.columnHeaders,[v,A]=y.sort??["",""];let B=l.length;for(;B;){const E=l[--B];E.columnId===v?E.sortable&&E.setSortState(A):E.setSortState("none")}y.locked||y.doSort()},b=(y,l,v,A)=>{if(0!==l){const L=0<l,Q=[];for(var B=y.length;B;){var E=y[--B];E.resizable&&(v?0<E.flex:0===E.flex)&&Q.push({hdr:E,limit:(L?E.maxValue:E.minValue)-E.value,amt:0})}y=Q.length;if(0<y){for(B=0;0!==
l;){x>=y&&(B=x=0);E=Q[x];var H=E.hdr;E.full?++B:(L?(H=m(v?H.flex:1,l),E.amt+H>E.limit&&(H=E.limit-E.amt,E.full=!0)):(H=a(v?-H.flex:-1,l),E.amt+H<E.limit&&(H=E.limit-E.amt,E.full=!0)),E.amt+=H,l-=H);if(B===y)break;++x}for(const R of Q)R.hdr.setValue(R.hdr.value+R.amt);A?.(l)}}},g=y=>(y=y.gridController?y.gridController.getPrevHdr(y):null)?y.maxValue-y.value+g(y):0,e=y=>(y=y.gridController?y.gridController.getNextHdr(y):null)?y.maxValue-y.value+e(y):0,c=y=>(y=y.gridController?y.gridController.getPrevHdr(y):
null)?y.minValue-y.value+c(y):0,q=y=>(y=y.gridController?y.gridController.getNextHdr(y):null)?y.minValue-y.value+q(y):0,n=(y,l)=>{y=y.gridController?y.gridController.getPrevHdr(y):null;var v=0;if(y){v=y.value+l;y.resizable&&y.setValue(v);const A=v-y.value;v=l-A;0>A&&(v+=n(y,A))}return v},p=(y,l)=>{y=y.gridController?y.gridController.getPrevHdr(y):null;var v=0;if(y){v=y.value+l;y.resizable&&y.setValue(v);const A=v-y.value;v=l-A;0<A&&(v+=p(y,A))}return v},r=(y,l)=>{if(y=y.gridController?y.gridController.getNextHdr(y):
null)l=y.value+l,y.resizable&&y.setValue(l),l-=y.value,0>l&&r(y,l)},z=(y,l)=>{if(y=y.gridController?y.gridController.getNextHdr(y):null)l=y.value+l,y.resizable&&y.setValue(l),l-=y.value,0<l&&z(y,l)},D=y=>{let l="";if(y.sortable)switch(y.sortState){case "ascending":l="chevron-up";break;case "descending":l="chevron-down"}y.sortIcon.setIcon(l)},I=y=>{const l=y.textView;l?.setWidth(y.width-y.outset-l.x)},K=t.GridController=new u("GridController",{initNode:function(y,l){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(y,l);this.fitHeadersToWidth();f(this)},setMaxWidth:function(y){this.set("maxWidth",y,!0)},setMinWidth:function(y){this.set("minWidth",y,!0)},setFitToWidth:function(y){this.fitToWidth=y},setSort:function(y){t.areArraysEqual(y,this.sort)||(this.sort=y,this.inited&&(this.fireEvent("sort",y),f(this)))},setLastColumn:function(y){const l=this.lastColumn;l!==y&&(l?.setLast(!1),this.lastColumn=y,y?.setLast(!0))},
setLocked:function(y){this.locked=y;if(this.inited&&!y){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=!0;for(const l of this.columnHeaders)this.notifyHdrXChange(l),this.notifyHdrWidthChange(l),this.notifyHdrVisibilityChange(l);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(y){y=this.valueFromEvent(y);this.gridWidth!==y&&(this.gridWidth=
y,this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(y){const l=this.columnHeaders;y=this.getHdrIndex(y);if(0<y)for(;y;){const v=l[--y];if(v.visible)return v}},getNextHdr:function(y){const l=this.columnHeaders,v=l.length;y=this.getHdrIndex(y)+1;if(0<y&&y<v)for(;v>y;){const A=l[y++];if(A.visible)return A}},hasHdr:function(y){return this.columnHeaders.includes(y)},getHdrIndex:function(y){return this.columnHeaders.indexOf(y)},getHdrById:function(y){const l=this.columnHeaders;let v=
l.length;for(;v;){const A=l[--v];if(A.columnId===y)return A}},getVisibleHdrs:function(){return this.columnHeaders.filter(y=>y.visible)},notifyAddHdr:function(y){this.hasHdr(y)||(this.columnHeaders.push(y),y.visible&&this.setLastColumn(y),this.fixupResizerCursors())},notifyRemoveHdr:function(y){const l=this.getHdrIndex(y);-1<l&&(this.columnHeaders.splice(l,1),y.visible&&y.last&&this.setLastColumn(this.getPrevHdr(y)),this.fixupResizerCursors())},notifyHdrXChange:function(y){if(!this.isLocked())for(const l of this.rows)l.notifyHdrXChange(y)},
notifyHdrWidthChange:function(y){if(!this.isLocked())for(const l of this.rows)l.notifyHdrWidthChange(y)},notifyHdrVisibilityChange:function(y){if((!this.__skipInvisibleHeaders||y.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(y);var l=this.setLastColumn;a:{var v=this.columnHeaders;let A=v.length;for(;A;){const B=v[--A];if(B.visible){v=B;break a}}v=void 0}l.call(this,v);l=y.visible?1:-1;this.setMaxWidth(this.maxWidth+y.maxValue*l);this.setMinWidth(this.minWidth+y.minValue*l);this.fitHeadersToWidth();
this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(y){for(const l of this.rows)l.notifyHdrVisibilityChange(y)},hasRow:function(y){return this.rows.includes(y)},getRowIndex:function(y){return this.rows.indexOf(y)},getRowById:function(y,l=v=>v.model.id===y){return this.rows.find(l)},getPrevRow:function(y){y=this.getRowIndex(y)-1;return this.rows[0>y?this.rows.length-1:y]},getNextRow:function(y){y=this.getRowIndex(y)+1;return this.rows[y<this.rows.length?y:0]},notifyAddRow:function(y,
l){if(!this.hasRow(y)&&(this.rows.push(y),!this.locked)){const v=this.width;for(const A of this.columnHeaders)y.setWidth(v),y.notifyHdrXChange(A),y.notifyHdrWidthChange(A),y.notifyHdrVisibilityChange(A);l||this.doSort()}},notifyRemoveRow:function(y){y=this.getRowIndex(y);-1<y&&this.rows.splice(y,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const y=this.getVisibleHdrs();let l=0;for(const v of y)l=a(l,v.x+v.width);b(y,this.gridWidth-l,!0,v=>{b(y,v,!1,null)})}},fixupResizerCursors:function(){const y=
this.getVisibleHdrs();let l=!0,v=0;y.forEach((H,L)=>{l&&H.isFixed()?H.setResizerCursor("",!0):(l&&(v=L),l=!1,H.restoreResizerCursor())});let A=!0,B=y.length,E=B-1;for(;B>v;){const H=y[--B];A?H.setResizerCursor("",!0):H.restoreResizerCursor();H.isFixed()||(A&&(E=B),A=!1)}v===E&&y[v].setResizerCursor("",!0)}}),J=t.GridColHdr=new u("GridColHdr",{include:[t.BoundedValueComponent],initNode:function(y,l){const v=this,A=l.resizerCursor??"col-resize";delete l.resizerCursor;l.minValue??(l.minValue=16);l.maxValue??
(l.maxValue=1E3);l.value??(l.value=l.minValue);l.resizable??(l.resizable=!0);l.flex??(l.flex=0);l.cellXAdj??(l.cellXAdj=0);l.cellWidthAdj??(l.cellWidthAdj=0);l.sortable??(l.sortable=!0);l.sortState??(l.sortState="none");l.placement??(l.placement=h);v.callSuper(y,l);const B=v.gridController;v.resizer=new d(v,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[t.SizeToParent,t.Draggable,{requestDragPosition:function(E,H){H=E-this.x;if(B.fitToWidth&&
(0<H?H=m(H,m(-q(v),v.maxValue-v.value+g(v))):0>H&&(H=a(H,a(-e(v),v.minValue-v.value+c(v)))),0===H))return;E=v.value+H;v.resizable&&v.setValue(E);E-=v.value;H=E-H;let L=0;0>E?L=n(v,E):0<E&&(L=p(v,E));this.dragInitX+=L;H-=L;B.fitToWidth&&(0>H?r(v,H):0<H&&z(v,H))}}]);B&&(B.notifyAddHdr(v),B.notifyHdrXChange(v),B.notifyHdrVisibilityChange(v));v.setWidth(v.value);v.resizer.setVisible(!(v.last&&v.gridController.fitToWidth))},destroy:function(y){this.setGridController();this.callSuper(y)},setSortable:function(y){this.set("sortable",
y,!0)},setSortState:function(y){this.set("sortState",y,!0)},setResizable:function(y){this.set("resizable",y,!0)},setCellWidthAdj:function(y){this.cellWidthAdj=y},setCellXAdj:function(y){this.cellXAdj=y},setFlex:function(y){this.flex=y},setColumnId:function(y){this.columnId=y},setResizerCursor:function(y,l){const v=this.resizer,A=v.cursor;y!==A&&(l&&(this.__rrc=A),v.setCursor(y))},restoreResizerCursor:function(){const y=this.__rrc;y&&(this.setResizerCursor(y),this.__rrc=null)},isFixed:function(){return this.minValue===
this.maxValue},setLast:function(y){this.last=y;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(y){const l=this.gridController;l!==y&&(l?.notifyRemoveHdr(this),this.gridController=y,this.inited&&y&&(y.notifyAddHdr(this),y.notifyHdrXChange(this),y.notifyHdrWidthChange(this),y.notifyHdrVisibilityChange(this)))},setValue:function(y){this.callSuper(y);this.inited&&this.setWidth(this.value)},setMinValue:function(y){const l=this.minValue??0,
v=this.gridController;this.callSuper(y);this.inited&&l!==this.minValue&&v?.setMinWidth(v.minWidth+this.minValue-l)},setMaxValue:function(y){const l=this.maxValue??0,v=this.gridController;y??=1E3;this.callSuper(y);this.inited&&l!==this.maxValue&&v?.setMaxWidth(v.maxWidth+this.maxValue-l)},setWidth:function(y){const l=this.width;this.callSuper(y);this.inited&&l!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(y){const l=this.x;this.callSuper(y);this.inited&&l!==this.x&&this.gridController?.notifyHdrXChange(this)},
setVisible:function(y){const l=this.visible;this.callSuper(y);this.inited&&l!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=t.GridRow=new u("GridRow",{initNode:function(y,l){l.placement??(l.placement=h);this.callSuper(y,l);this.gridController?.notifyAddRow(this)},destroy:function(y){this.setGridController();this.callSuper(y)},setGridController:function(y){const l=this.gridController;l!==y&&(l?.notifyRemoveRow(this),this.gridController=y,this.inited&&y?.notifyAddRow(this))},
notifyHdrXChange:function(y){this[y.columnId+"View"]?.setX(y.x+y.cellXAdj)},notifyHdrWidthChange:function(y){this[y.columnId+"View"]?.setWidth(y.width+y.cellWidthAdj)},notifyHdrVisibilityChange:function(y){this[y.columnId+"View"]?.setVisible(y.visible)}});t.Grid=new w("Grid",d,{include:[K],initNode:function(y,l){l.overflow??(l.overflow="autox");l.bgColor??(l.bgColor="#ccc");l.rowSpacing??(l.rowSpacing=1);l.columnSpacing??(l.columnSpacing=1);var v=l.isAutoScrolling;delete l.isAutoScrolling;this.callSuper(y,
l);y=this.header=new d(this,{overflow:"hidden"});y.xLayout=new k(y,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});y.yLayout=new t.SizeToChildren(y,{locked:!0,axis:"y"});l=this.sizeHeightToRows;v=this.content=new d(this,{overflow:l?"hidden":"autoy"},v?[t.AutoScroller]:[]);v.yLayout=new k(v,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:l});this.syncTo(this,"setGridWidth","width");this.syncTo(y,"_updateContentWidth","width");this.constrain("_updateContentHeight",[l?v:this,"height",
y,"height",y,"y"])},setSizeHeightToRows:function(y){this.sizeHeightToRows=y},setRowSpacing:function(y){this.rowSpacing!==y&&(this.rowSpacing=y,this.inited&&this.content.yLayout.setSpacing(y))},setColumnSpacing:function(y){this.columnSpacing!==y&&(this.columnSpacing=y,this.inited&&this.header.xLayout.setSpacing(y))},setLocked:function(y){if(this.inited)for(const l of[this.header.xLayout,this.header.yLayout,this.content.yLayout])y?l.incrementLockedCounter():(l.decrementLockedCounter(),l.update());this.callSuper(y)},
_updateContentWidth:function(y){const l=this.content;y=y.value;l.setWidth(y);for(const v of l.getSubviews())v.setWidth(y)},_updateContentHeight:function(y){var l=this.header;y=this.content;l=l.y+l.height;y.setY(l);this.sizeHeightToRows?this.setHeight(l+y.height):y.setHeight(this.height-l)},determinePlacement:function(y,l){if(y===h){let v;l.isA(M)?v=this.content:l.isA(J)&&(v=this.header);if(v)return l.gridController!==this&&l.setGridController(this),v}return this.callSuper(y,l)},doSort:function(){const [y,
l]=this.sort??["",""],v=this.getSortFunction(y,l);if(v){const A=this.content,B=A.yLayout;this.rows.sort(v);A.sortSubviews(v);B.sortSubviews(v);B.update()}},getSortFunction:(y,l)=>{if(y){const v="ascending"===l?1:-1,A=y+"View";return(B,E)=>{B=B[A].text;E=E[A].text;return B>E?v:E>B?-v:0}}}});t.SimpleGridColHdr=new w("SimpleGridColHdr",t.SimpleTextButton,{include:[J],initNode:function(y,l){const v=this;l.activeColor??(l.activeColor="#999");l.hoverColor??(l.hoverColor="#bbb");l.readyColor??(l.readyColor=
"#aaa");l.inset??(l.inset=2);l.sortIconColor??(l.sortIconColor="#666");const A=l.outset??2;delete l.outset;v.callSuper(y,l);v.sortIcon=new t.FontAwesome(v,{align:"right",alignOffset:3,valign:"middle",textColor:v.sortIconColor},[{initNode:function(B,E){this.callSuper(B,E);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();v.setOutset(this.width+A);I(v)}}]);v.textView.enableEllipsis();v.setDisabled(!v.sortable);I(v);D(v)},setSortIconColor:function(y){this.sortIconColor=y;this.sortIcon?.setTextColor(y)},
setSortable:function(y){this.callSuper(y);this.inited&&(y&&this.setOutset(14),this.setDisabled(!y),D(this))},setSortState:function(y){this.callSuper(y);this.inited&&D(this)},setWidth:function(y){this.callSuper(y);this.inited&&I(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,u=Math,m=u.max,{View:a,global:{focus:d,keys:k},getAlphaObjSortFunc:h}=t,f=r=>{const z=r.selectedRow;z&&(z.setSelected(!1),r.set("selectedRow",null,!0))},b=t.InfiniteListRow=new w("InfiniteListRow",{include:[t.Reusable],setInfiniteOwner:function(r){this.infiniteOwner=r},setModel:function(r){this.model=r},setClassKey:function(r){this.classKey=r},notifyRefreshed:()=>{}}),g=t.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[b,t.Selectable]}),e=t.InfiniteList=
new x("InfiniteList",a,{initNode:function(r,z){let D=z.rowClasses;delete z.rowClasses;if("function"===typeof D){const I={};I["default"]=D;D=I}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(r,z);r=this._listView=new a(this);this._scrollAnchorView=new a(r,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(D,r);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(r,z)=>new t.TrackActivesMultiPool(r,z),setOverscrollBehavior:function(r){this.overscrollBehavior=r;this.getIDS().overscrollBehavior=r},setCollectionModel:function(r){this.collectionModel=
r},setModelIDName:function(r){this.modelIDName=r},setRowSpacing:function(r){this.rowSpacing=r;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(r){this.rowHeight=r;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(r){if(0<r&&(this.callSuper(r),this.inited)){r=this._listView;const z=this.width;r.setWidth(z);for(const D of r.getSubviews())D.setWidth(z)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(r){const z=this.getVisibleRows();let D=z.length;for(;D;){const I=z[--D];if(I.model===r)return I}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const r=this.modelIDName,z=this.ascendingSort;return this.numericSort?t.getNumericObjSortFunc(r,z):h(r,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(r,z){var D=this.getIndexOfModelInData(r);
let I=!1;if(0<=D){var K=this._rowExtent;const J=this.getIDE().scrollTop,M=J+this.height;D=this.rowInset+D*K;K=D+K;D<=J?(this.scrollYTo(D,!0),I=!0):K>=M&&(this.scrollYTo(K-this.height,!0),I=!0);z&&((z=this.getVisibleRowForModel(r))?z.focus():this._focusToModel=r)}return I},isModelInData:function(r){return 0<=this.getIndexOfModelInData(r)},getNextModel:function(r,z=!0,D=!0){const I=this.getListData(),K=I.length;r=this.getIndexOfModelInData(r);if(0<=r)return r+=1,r>=K?z?I[0]:I[K-1]:I[r];if(D&&0<K)return I[K-
1]},getPrevModel:function(r,z=!0,D=!0){const I=this.getListData(),K=I.length;r=this.getIndexOfModelInData(r);if(0<=r)return--r,0>r?z?I[K-1]:I[0]:I[r];if(D&&0<K)return I[0]},getIndexOfModelInData:function(r){if(r){const z=this.getListData();let D=z.length;for(;D;)if(this.areModelsEqual(z[--D],r))return D}return-1},areModelsEqual:function(r,z){const D=this.modelIDName;return r[D]===z[D]},getActiveRowForModel:function(r){if(r){const z=this._itemPool.getActives();let D=z.length;for(;D;){const I=z[--D];
if(this.areModelsEqual(I.model,r))return I}}},refreshListData:function(r,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(r,z)},resetListUI:function(r,z){const D=this.getListData().length,I=this._listView,K=this._scrollAnchorView;I.setHeight(D*this._rowExtent-(0<D?this.rowSpacing:0)+this.rowInset+this.rowOutset);K.setY(I.height-K.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;r||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(r){if(d.focusedView?.isDescendantOf(r)){const z=this.getFocusTrap();z?z.focus():d.clear()}r.setVisible(!1);this._itemPool.putInstance(r)},refreshListUI:function(r){r=this._rowExtent;const z=this.rowInset,D=this.forceFullResetOnNextRefresh;var I=this.getIDE().scrollTop;const K=this.getListData()??[];var J=m(0,u.floor((I-z)/r));I=u.min(K.length,u.ceil((I-z+this.height)/r));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==J||this._endIdx!==I||D){const y=this.width,l=this.rowHeight,v=this._visibleRowsByIdx,A=this._focusToModel;this._startIdx=J;this._endIdx=I;for(var M in v)if(M<J||M>=I)this.putRowBackInPool(v[M]),delete v[M];for(M=J;M<I;M++){J=v[M];const B=K[M],E=this.getClassKey(B);let H=!1;J&&J.classKey===E||(J&&this.putRowBackInPool(J),v[M]=J=this._itemPool.getInstance(E),J.setInfiniteOwner(this),J.setClassKey(E),J.setWidth(y),J.setHeight(l),J.setY(z+M*r),J.setVisible(!0),H=!0);!D&&J.model&&
this.areModelsEqual(J.model,B)?H&&this.updateRow(J):(J.setModel(B),this.updateRow(J));J.notifyRefreshed();J.bringToFront();A&&this.areModelsEqual(A,B)&&(J.focus(),this._focusToModel=null)}}},getClassKey:r=>"default",updateRow:r=>{}}),c=t.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",t.SimpleButton,{include:[g,t.ArrowKeyActivation],initNode:function(r,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=k.LIST_KEYS);this.callSuper(r,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(r){this.callSuper(r);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(r,z){r===k.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(r,z)},doKeyArrowLeftOrUp:function(r,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(r,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(r){switch(r){case k.CODE_ENTER:case k.CODE_SPACE:this.doActivated()}}}),q=t.SelectableInfiniteList=new x("SelectableInfiniteList",
e,{setSelectedRow:function(r){const z=this.selectedRow;r!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",r,!0),r&&(this.setSelectedRowModel(r.model),r.setSelected(!0)))},setSelectedRowModel:function(r){this.set("selectedRowModel",r,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(r,z,D){r&&(f(this),this.setSelectedRowModel(r),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(r,z=!0){this.selectRowForModel(this.getNextModel(r),z,!0)},selectPrevRowForModel:function(r,z=!0){this.selectRowForModel(this.getPrevModel(r),z,!1)},resetListUI:function(r,z){this.isModelInData(this.selectedRowModel)?f(this):this.setSelectedRow();this.callSuper(r,z)},putRowBackInPool:function(r){r.selected&&f(this);this.callSuper(r)},refreshListUI:function(r){r=d.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),r&&r!==z||z.focus(!0))}}),n=new w("InfiniteGridRowMixin",{notifyXChange:function(r){this[r.columnId+"View"]?.setX(r.x+r.cellXAdj)},notifyWidthChange:function(r){this[r.columnId+"View"]?.setWidth(r.width+r.cellWidthAdj)},notifyVisibilityChange:function(r){this[r.columnId+"View"]?.setVisible(r.visible)}}),p=new w("InfiniteGridMixin",{setGridHeader:function(r){(this.gridHeader=r)?.setGrid(this)},makeReady:function(r,z){const D=this.gridHeader;D?(this.forceFullResetOnNextRefresh=
z,D.setSort(r),D.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [r,z]=this.gridHeader.sort??["",""];return r?h(r,"ascending"===z,!1):this.callSuper()},updateRow:function(r){const z=this.gridHeader;if(z)for(const D of z.columnHeaders)r.notifyXChange(D),r.notifyWidthChange(D),r.notifyVisibilityChange(D)},notifyXChange:function(r){for(const z of this.getVisibleRows())z.notifyXChange(r)},notifyWidthChange:function(r){for(const z of this.getVisibleRows())z.notifyWidthChange(r)},
notifyVisibilityChange:function(r){for(const z of this.getVisibleRows())z.notifyVisibilityChange(r)}});t.InfiniteGridRow=new w("InfiniteGridRow",{include:[b,n]});t.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[g,n]});t.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",c,{include:[n]});t.InfiniteGrid=new x("InfiniteGrid",e,{include:[p]});t.SelectableInfiniteGrid=new x("InfiniteGrid",q,{include:[p]});t.InfiniteGridHeader=new x("InfiniteGridHeader",a,{include:[t.GridController],
initNode:function(r,z){z.columnSpacing??(z.columnSpacing=1);z.overflow="hidden";this.callSuper(r,z);new t.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(r){this.grid=r},setColumnSpacing:function(r){this.columnSpacing=r},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:m(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(r){this.callSuper(r);if(this.inited){r=this.height;for(const z of this.columnHeaders)z.setHeight(r)}},setWidth:function(r){this.callSuper(m(this.minWidth,
r));this.inited&&(r=this.width,this.setGridWidth(r),this.grid.setWidth(r))},subviewAdded:function(r){this.callSuper(r);r.isA(t.GridColHdr)&&(r.setGridController(this),r.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(r){this.isLocked()||this.grid.notifyXChange(r)},notifyHdrWidthChange:function(r){this.isLocked()||this.grid.notifyWidthChange(r)},updateRowsForVisibilityChange:function(r){this.grid.notifyVisibilityChange(r)}})})(myt);
(t=>{const x=JS.Class,w=t.PanelStackTransition=new x("PanelStackTransition",t.Node,{to:u=>Promise.resolve(u),from:u=>Promise.resolve(u)});t.PanelStack=new x("PanelStack",t.View,{include:[t.SelectionManager],initNode:function(u,m){m.overflow="hidden";m.itemSelectionId??(m.itemSelectionId="panelId");m.maxSelected??(m.maxSelected=1);this.callSuper(u,m);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(u){this.set("transition",u,!0)},__updateWidth:function(u){this.getActivePanel()?.setWidth(u.value)},
__updateHeight:function(u){this.getActivePanel()?.setHeight(u.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(u){return this.getSelectableItem(u)},selectPanel:function(u){this.selectById(u)},doSelected:function(u){u.setWidth(this.width);u.setHeight(this.height)},doStackTransition:function(u){this["doStackTransition"+(u.selected?"To":"From")](u)},doStackTransitionTo:function(u){const m=this;m.doBeforeTransitionTo(u);const a=m.transition;a?a.to(u).then(d=>{m.doAfterTransitionTo(d)}):
(u.makeHighestZIndex(),u.setVisible(!0),m.doAfterTransitionTo(u))},doBeforeTransitionTo:u=>{},doAfterTransitionTo:u=>{},doStackTransitionFrom:function(u){const m=this;m.doBeforeTransitionFrom(u);const a=m.transition;a?a.from(u).then(d=>{m.doAfterTransitionFrom(d)}):(u.setVisible(!1),m.doAfterTransitionFrom(u))},doBeforeTransitionFrom:u=>{},doAfterTransitionFrom:u=>{}});t.StackablePanel=new JS.Module("StackablePanel",{include:[t.Selectable],initNode:function(u,m){m.visible=m.selected=!1;m.bgColor??
(m.bgColor="#fff");m.panelId??(m.panelId=m.name);this.callSuper(u,m);this.selected&&this.doStackTransition()},setPanelStack:function(u){this.panelStack=u},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(u){this.panelId=u},setSelected:function(u){this.selected!==u&&(this.callSuper(u),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});t.PanelStackFadeTransition=new x("PanelStackFadeTransition",w,{initNode:function(u,
m){m.duration??(m.duration=1E3);this.callSuper(u,m)},setDuration:function(u){this.duration=u},to:function(u){return new Promise((m,a)=>{u.stopActiveAnimators("opacity");u.setVisible(!0);u.animate({attribute:"opacity",to:1,duration:this.duration}).next(d=>{u.makeHighestZIndex();m(u)})})},from:function(u){return new Promise((m,a)=>{u.stopActiveAnimators("opacity");u.animate({attribute:"opacity",to:0,duration:this.duration}).next(d=>{u.setVisible(!1);m(u)})})}});t.PanelStackSlideTransition=new x("PanelStackSlideTransition",
w,{initNode:function(u,m){m.duration??(m.duration=1E3);m.direction??(m.direction="right");this.callSuper(u,m)},setDuration:function(u){this.duration=u},setDirection:function(u){this.direction=u},to:function(u){const m=u.getPanelStack(),a=this.duration;let d,k;switch(this.direction){case "left":k="x";d=m.width;break;case "right":k="x";d=-m.width;break;case "up":k="y";d=m.height;break;case "down":k="y",d=-m.height}u.stopActiveAnimators(k);u.set(k,d);u.setVisible(!0);return new Promise((h,f)=>{f=b=>
{u.makeHighestZIndex();h(u)};0<a?u.animate({attribute:k,to:0,duration:a}).next(f):(u.set(k,0),u.makeHighestZIndex(),h(u))})},from:function(u){const m=u.getPanelStack(),a=this.duration;let d,k;switch(this.direction){case "left":k="x";d=-m.width;break;case "right":k="x";d=m.width;break;case "up":k="y";d=-m.height;break;case "down":k="y",d=m.height}u.stopActiveAnimators(k);return new Promise((h,f)=>{f=b=>{u.setVisible(!1);h(u)};0<a?u.animate({attribute:k,to:d,duration:a}).next(f):(u.set(k,d),u.setVisible(!1),
h(u))})}})})(myt);
(t=>{const x=JS.Module,{Draggable:w,global:{dragManager:u,mouse:m}}=t,a=(k,h,f)=>{for(const b of[h,f])k["__is"+b]=!1,k["__tmrId"+b]=null},d=t.DragGroupSupport=new x("DragGroupSupport",{initNode:function(k,h){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(k,h)},setDragGroups:function(k){const h=this.__dgs={};for(const f in k)h[f]=!0;this.__anyDG=h.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(k){const h=this.__drpgs=
{};for(const f in k)h[f]=!0;this.__anyDRPG=h.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(k){k&&(this.__dgs[k]=!0,"*"===k&&(this.__anyDG=!0))},removeDragGroup:function(k){k&&(delete this.__dgs[k],"*"===k&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(k){k&&(this.__drpgs[k]=!0,"*"===k&&(this.__anyDRPG=!0))},removeDropGroup:function(k){k&&(delete this.__drpgs[k],"*"===k&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
t.DropSource=new x("DropSource",{include:[w],initNode:function(k,h){h.distanceBeforeDrag??(h.distanceBeforeDrag=2);h.dropParent??(h.dropParent=k.getRoot());this.callSuper(k,h)},setDropClass:function(k){this.dropClass=t.resolveClassname(k)},setDropClassAttrs:function(k){this.dropClassAttrs=k},setDropParent:function(k){this.dropParent=k},startDrag:function(k){const h=this.dropable=this.makeDropable();if(h){const f=h.distanceBeforeDrag;h.distanceBeforeDrag=0;h.doMouseDown(k);h.__doMouseDown(k);h.distanceBeforeDrag=
f}},doMouseUp:function(k){this.callSuper(k);const h=this.dropable;h&&(h.__doMouseUp(k),h.doMouseUp(k),this.dropable=null)},makeDropable:function(){const k=this.dropClass,h=this.dropParent;if(k&&h){const f=t.DomElementProxy.getRelativePosition(this.getIDE(),h.getIDE());return new k(h,{...this.dropClassAttrs,x:f.x??0,y:f.y??0})}}});t.DropTarget=new x("DropTarget",{include:[d],initNode:function(k,h){this.callSuper(k,h);u.registerDropTarget(this)},destroy:function(){u.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(k){return!this.disabled&&this.isVisible()},notifyDragStart:k=>{},notifyDragStop:k=>{},notifyDragEnter:k=>{},notifyDragLeave:k=>{},notifyDrop:k=>{}});t.Dropable=new x("Dropable",{include:[w,d],setDropTarget:function(k){this.dropTarget=k},setDropped:function(k){this.dropped=k},setDropFailed:function(k){this.dropFailed=k},willPermitDrop:k=>!0,startDrag:function(k){this.setDropped(!1);this.setDropFailed(!1);u.startDrag(this);this.callSuper(k)},updateDrag:function(k){u.updateDrag(k,
this);this.callSuper(k)},stopDrag:function(k,h){u.stopDrag(k,this,h);this.callSuper(k,h);h?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(k){this.setDropTarget(k)},notifyDragLeaving:function(k){this.setDropTarget()},notifyDropped:function(k,h){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});t.AutoScroller=new x("AutoScroller",{include:[d],initNode:function(k,h){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;h.overflow??(h.overflow="auto");this.callSuper(k,h);u.registerAutoScroller(this)},destroy:function(){u.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(k){this.scrollBorder=Math.max(1,k)},setScrollFrequency:function(k){this.scrollFrequency=k},setScrollAmount:function(k){this.scrollAmount=k},setScrollAcceleration:function(k){this.scrollAcceleration=k},notifyAutoScrollerDragStart:function(k){k=this.getIDE();(k.scrollHeight>k.clientHeight||
k.scrollWidth>k.clientWidth)&&this.attachToDom(m,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(k){this.detachFromDom(m,"__hndlMove","mousemove",!0);a(this,"Up","Down");a(this,"Left","Right")},__hndlMove:function(k){const h=this;let {pageX:f,pageY:b}=k.value;if(h.containsPoint(f,b)){k=h.getPagePosition();const g=h.scrollBorder,e=(c,q)=>{h["__is"+c]&&(h.getIDE()["scroll"+("Up"===c||"Down"===c?"Top":"Left")]+=q*h["__amt"+c],h["__tmrId"+c]=setTimeout(()=>{e(c,q)},h.scrollFrequency))};
f-=k.x;b-=k.y;b<g?(h.__isUp=!0,h.__amtUp=Math.round(h.scrollAmount*(1+h.scrollAcceleration*(1-b/g))),h.__tmrIdUp||e("Up",-1)):h.height-b<g?(h.__isDown=!0,h.__amtDown=Math.round(h.scrollAmount*(1+h.scrollAcceleration*(1-(h.height-b)/g))),h.__tmrIdDown||e("Down",1)):a(h,"Up","Down");f<g?(h.__isLeft=!0,h.__amtLeft=Math.round(h.scrollAmount*(1+h.scrollAcceleration*(1-f/g))),h.__tmrIdLeft||e("Left",-1)):h.width-f<g?(h.__isRight=!0,h.__amtRight=Math.round(h.scrollAmount*(1+h.scrollAcceleration*(1-(h.width-
f)/g))),h.__tmrIdRight||e("Right",1)):a(h,"Left","Right")}else a(h,"Up","Down"),a(h,"Left","Right")}})})(myt);
(t=>{const {max:x,cos:w,sin:u,PI:m}=Math,a=t.Geometry.degreesToRadians,d=g=>{var e=a(g.startAngle),c=a(g.endAngle);if(e>c){var q=e;e=c;c=q}q=g.__path;var n=g.width/2,p=g.thickness;const r=g.radius,z=r+p;var D=c-e;const I=D+1E-4>=2*m;I&&(e=0,c=m);const K=[n+z*w(e),n+z*u(e)],J=[n+z*w(c),n+z*u(c)];c=[n+r*w(c),n+r*u(c)];e=[n+r*w(e),n+r*u(e)];n=["M"+K.join()];I?n.push("A"+[z,z,0,1,1,J].join(),"A"+[z,z,0,1,1,K].join(),"L"+c.join(),"A"+[r,r,0,1,0,e].join(),"A"+[r,r,0,1,0,c].join()):(D=D%(2*m)>m?1:0,p/=2,
n.push("A"+[z,z,0,D,1,J].join(),g.endCapRounding?"A"+[p,p,0,0,1,c].join():"L"+c.join(),"A"+[r,r,0,D,0,e].join(),g.startCapRounding?"A"+[p,p,0,0,1,K].join():""));n.push("z");q.setAttribute("d",n.join(" "));q.setAttribute("fill",g.color)},k=g=>{const e=2*(g.radius+g.thickness),c=g.__svg;g.setWidth(e);g.setHeight(e);c.setAttribute("viewBox","0 0 "+e+" "+e);c.setAttribute("width",e);c.setAttribute("height",e);d(g)},h=(g,e,c)=>{g[e]!==c&&(g[e]=c,g.inited&&(d(g),g.fireEvent(e,c)))},f=(g,e,c)=>{g[e]!==c&&
(g[e]=c=x(0,c),g.inited&&(k(g),g.fireEvent(e,c)))},b=(g,e)=>{g=document.createElementNS("http://www.w3.org/2000/svg",g);e?.appendChild(g);return g};t.Annulus=new JS.Class("Annulus",t.BackView,{initNode:function(g,e){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(g,e);k(this)},createOurDomElement:function(g){g=this.callSuper(g);var e=Array.isArray(g)?g[1]:g;e=this.__svg=b("svg",e);this.__path=b("path",e);e.style.pointerEvents=
"none";return g},setRadius:function(g){f(this,"radius",g)},setThickness:function(g){f(this,"thickness",g)},setStartAngle:function(g){h(this,"startAngle",g)},setEndAngle:function(g){h(this,"endAngle",g)},setStartCapRounding:function(g){h(this,"startCapRounding",g)},setEndCapRounding:function(g){h(this,"endCapRounding",g)},setColor:function(g){h(this,"color",g)},isColorAttr:function(g){return"color"===g||this.callSuper(g)}})})(myt);
(t=>{let x;const w=JS.Class,{mouse:u,windowResize:m,dragManager:a}=t.global,{min:d,max:k,round:h}=Math,f=q=>{q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID)},b=q=>{if(q.tooltip){const n=q._lastPos;if(q.tooltip.parent.containsPoint(n.x,n.y))return!0}q.hideTip();return!1},g=t.BaseTooltip=new w("BaseTooltip",t.View,{include:[t.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(q,n){this.tipDelay=this.nextTipDelay=g.TIP_DELAY;this.tipHideDelay=g.TIP_HIDE_DELAY;n.visible??
(n.visible=!1);this.callSuper(q,n)},setTooltip:function(q){this.inited&&(this.tooltip=q)&&(this.attachToDom(u,"__hndl_mousemove","mousemove",!0),this.attachToDom(q.parent,"hideTip","mousedown",!0),this.attachToDom(q.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(q){const n=this;n._lastPos=t.MouseObservable.getMouseFromEvent(q);b(n)&&(f(n),n.__checkTID=setTimeout(()=>{delete n.__checkTID;b(n)&&n.showTip()},n.nextTipDelay))},hideTip:function(q){f(this);if(q=this.tooltip?.parent)this.detachFromDom(q,
"hideTip","mousedown",!0),this.detachFromDom(q,"hideTip","mouseup",!0),this.detachFromDom(u,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){a.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),e=t.Tooltip=new w("Tooltip",g,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},initNode:function(q,
n){n.edgeSize??(n.edgeSize=e.EDGE_SIZE);n.edgeColor??(n.edgeColor=e.EDGE_COLOR);n.shadowSize??(n.shadowSize=e.SHADOW_SIZE);n.shadowColor??(n.shadowColor=e.SHADOW_COLOR);n.insetH??(n.insetH=e.HORIZONTAL_INSET);n.insetV??(n.insetV=e.VERTICAL_INSET);n.tipBgColor??(n.tipBgColor=e.TIP_BG_COLOR);n.tipTextColor??(n.tipTextColor=e.TIP_TEXT_COLOR);this.callSuper(q,n);this._tipText=new t.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},setEdgeSize:function(q){this.edgeSize=
q},setEdgeColor:function(q){this.edgeColor=q},setShadowSize:function(q){this.shadowSize=q},setShadowColor:function(q){this.shadowColor=q},setInsetH:function(q){this.insetH=q},setInsetV:function(q){this.insetV=q},setTipBgColor:function(q){this.tipBgColor=q},setTipTextColor:function(q){this.tipTextColor=q},showTip:function(){const q=this.tooltip;var n=q.text;const p=q.parent;var r=this._tipText;const z=this.edgeSize,D=this.shadowSize;r.text!==n&&r.setText(n);r.setWidth("auto");var I=d(r.measureNoWrapWidth(),
q.maxTextWidth);n=I+2*r.x;const K=n+2*z;r.setWidth(I);r.sizeViewToDom();I=p.getPagePosition();r=r.height+2*r.y;const J=r+2*z,M=I.y-J+("below"===q.tipvalign?p.height+J:0);I=I.x;switch(q.tipalign){case "right":I-=K;case "farright":I+=p.width;break;case "farleft":I-=K}this.setX(h(d(k(I,0),m.getWidth()-K)));this.setY(h(d(k(M,0),m.getHeight()-J)));this.setWidth(n);this.setHeight(r);this.setBgColor(this.tipBgColor);this.setBorder([z,"solid",this.edgeColor]);this.setBoxShadow([D,D,D,this.shadowColor]);this.callSuper()}}),
c=t.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:e,MAX_TEXT_WIDTH:280},setTooltip:function(q){this.callSuper("");this.set("tooltip",q,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(q){this.set("tipAlign",q,!0)},setTipValign:function(q){this.set("tipValign",q,!0)},setMaxTextWidth:function(q){this.set("maxTextWidth",q,!0)},setTipClass:function(q){this.set("tipClass",q,!0)},doSmoothMouseOver:function(q){const n=this.getTooltip();this.callSuper(q);if(q&&n){q=this.tipClass??
c.TIP_CLASS;!x||x instanceof q||(x.destroy(),x=null);if(!x){let p=document.getElementById("tooltipDiv");p||(p=t.DomElementProxy.createElement("div",{position:"absolute"}),t.getElement().appendChild(p));x=new q(p,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:n,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||c.MAX_TEXT_WIDTH})}}})})(myt);
(t=>{const x=Math,{min:w,max:u}=x;t.Path=new JS.Class("Path",{initialize:function(m){this.setVectors(m??[])},setVectors:function(m){this._boundingBox=null;this.vectors=m},copyFrom:function(m){this.vectors=m.vectors.slice();this._boundingBox=null},drawInto:function(m){m.beginPath();const a=this.vectors;let d=a.length,k=0;for(m.moveTo(a[k++],a[k++]);d>k;)m.lineTo(a[k++],a[k++]);m.closePath()},translate:function(m,a){const d=this.vectors;let k=d.length;for(;k;)d[--k]+=a,d[--k]+=m;this._boundingBox=null},
rotate:function(m){const a=x.cos(m);m=x.sin(m);const d=this.vectors,k=d.length;for(let h=0;k>h;){const f=d[h]*a-d[h+1]*m,b=d[h]*m+d[h+1]*a;d[h++]=f;d[h++]=b}this._boundingBox=null},rotateAroundOrigin:function(m,a,d){this.translate(-a,-d);this.rotate(m);this.translate(a,d)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const m=this.vectors;let a=m.length,d,k,h,f;if(2<=a){h=f=m[--a];for(d=k=m[--a];a;){const b=m[--a],g=m[--a];h=w(b,h);f=u(b,f);d=w(g,d);k=u(g,k)}return this._boundingBox=
{x:d,y:h,width:k-d,height:f-h}}return this._boundingBox=null},getCenter:function(){const m=this.getBoundingBox();return m?{x:m.x+m.width/2,y:m.y+m.height/2}:null},isPointInPath:function(m,a){"object"===typeof m&&(a=m.y,m=m.x);return t.Geometry.isPointInPath(m,a,this.getBoundingBox(),this.vectors)}})})(myt);
(t=>{const x=console.warn,w=Math.PI,u=w/2,m=3*w/2,a=t.AccessorSupport,d={};for(const k of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))d[k]=function(...h){this.__ctx[k](...h)};for(const k of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])d[k]=
function(...h){return this.__ctx[k](...h)};for(const k of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))d[a.generateSetterName(k)]=function(h){this.__ctx[k]=h},d[a.generateGetterName(k)]=function(){return this.__ctx[k]};t.Canvas=new JS.Class("Canvas",t.BackView,{include:[d],createOurDomElement:function(k){k=this.callSuper(k);const h=Array.isArray(k)?k[1]:k,
f=this.__cvs=document.createElement("canvas");f.className="mytUnselectable";h.appendChild(f);f.style.position="absolute";this.__ctx=f.getContext("2d");return k},setWidth:function(k){0>k&&(k=0);this.__cvs.setAttribute("width",k);this.callSuper(k)},setHeight:function(k){0>k&&(k=0);this.__cvs.setAttribute("height",k);this.callSuper(k)},clear:function(){const k=this.__ctx;k.save();k.setTransform(1,0,0,1,0,0);k.clearRect(0,0,this.width,this.height);k.restore()},dataURItoBlob:function(k,h){k=atob(k.split(",")[1]);
const f=k.length,b=[];for(let g=0;g<f;)b.push(k.charCodeAt(g++));return new Blob([new Uint8Array(b)],{type:h})},getDataURL:function(k,h){return this.__cvs.toDataURL(k,h)},getImageFile:function(k,h,f){switch(k){case "png":case "PNG":k="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":k="jpeg";f??=.5;break;default:x("Unexpected image type",k),k=k.toLowerCase()}const b="image/"+k;f=this.dataURItoBlob(this.getDataURL(b,f),b);h&&(f.name=h+"."+k);return f},circle:function(k,h,f){this.__ctx.arc(k,
h,f,0,2*w)},drawRoundedRect:function(k,h,f,b,g,e){const c=this.lineTo.bind(this),q=this.arc.bind(this);e=b+e;g=f+g;this.beginPath();this.moveTo(f,b+k);c(f,e-k);q(f+k,e-k,k,w,u,!0);c(g-k,e);q(g-k,e-k,k,u,0,!0);c(g,b+k);q(g-k,b+k,k,0,m,!0);c(f+k,b);q(f+k,b+k,k,m,w,!0);this.closePath();0<h&&(k-=h,f+=h,g-=h,b+=h,e-=h,this.moveTo(f,b+k),q(f+k,b+k,k,w,m),c(g-k,b),q(g-k,b+k,k,m,0),c(g,e-k),q(g-k,e-k,k,0,u),c(f+k,e),q(f+k,e-k,k,u,w),this.closePath());return this},drawRectOutline:function(k,h,f,b,g){g=f+g;
b=h+b;const e=h+k,c=b-k,q=f+k;k=g-k;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(h,f);n(h,g);n(b,g);n(b,f);n(h,f);n(e,q);n(c,q);n(c,k);n(e,k);n(e,q);this.closePath();return this},drawPartiallyRoundedRect:function(k,h,f,b,g,e,c,q){q=e+q;c=g+c;const n=this.lineTo.bind(this),p=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(g,e+k);n(g,q-f);0<f&&p(g,q,g+f,q);n(c-b,q);0<b&&p(c,q,c,q-b);n(c,e+h);0<h&&p(c,e,c-h,e);n(g+k,e);0<k&&p(g,e,g,e+k);this.closePath();return this},drawAnnulus:function(k,
h,f,b,g,e,c,q=60){const n=t.Color;for(var p of c)"string"===typeof p.color&&(p.color=n.makeColorFromHexString(p.color));1>q&&(x("Invalid segements",q),q=60);q=w/q;p=0;for(var r=c.length-1;p<r;){var z=c[p++];const {angle:A,color:B}=z,{angle:E,color:H}=c[p];var D=Math.round((E-A)/q),I=B.getDiffFrom(H);z.colorDelta={red:I.red/D,green:I.green/D,blue:I.blue/D}}f=new t.Path([k+f,h,k+b,h]);f.rotateAroundOrigin(g,k,h);b=f.vectors;let [K,J,M,y]=b,l=0,v=w/360;for(p=0;e>g;){D=K;I=J;r=M;z=y;g+=q;g>e&&(q+=e-g,
v=0,g=e);f.rotateAroundOrigin(q+v,k,h);[K,J,M,y]=b;this.beginPath();this.moveTo(D,I);this.lineTo(r,z);this.lineTo(M,y);this.lineTo(K,J);this.closePath();const {color:A,colorDelta:B}=c[p];this.setFillStyle(n.rgbToHex(A.red+l*B.red,A.green+l*B.green,A.blue+l*B.blue,!0));this.fill();0<v&&(f.rotateAroundOrigin(-v,k,h),[K,J,M,y]=b);l++;g>=c[p+1].angle&&(l=0,p++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
