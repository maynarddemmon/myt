(u=>{let x;var w=c=>{let h=c.length;for(;h;){const l=c[--h];x=l.ver??l.id;if(l.str?.includes(l.sub)||l.prop)return l.id}};var v=c=>{const h=c.indexOf(x);if(0<=h)return parseFloat(c.slice(h+x.length+1))};const k=navigator.userAgent,e=navigator.platform;v=u.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:k,sub:"Firefox",id:"Firefox"},{str:k,sub:"Chrome",id:"Chrome"},{str:k,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:v(k)||v(navigator.appVersion)||"UNKNOWN",os:w([{str:k,sub:"iPhone",id:"iPhone/iPod"},{str:e,sub:"Linux",id:"Linux"},{str:e,sub:"Mac",id:"Mac"},{str:e,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(v.browser){case "Chrome":case "Safari":u="WebKit";break;case "Explorer":u="MS";break;case "Firefox":u="Moz";break;case "Opera":u="O";break;default:u="UNKNOWN"}w=u.toLowerCase();v.prefix={dom:u,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:u,floor:x,ceil:w}=Math,v="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),k="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h=g=>(10>g?"0":"")+g,l=(g,d)=>{g=g.getTimezoneOffset();return(0<g?"-":"+")+h(x(u(g/60)))+(d?":":"")+(0==u(g%60)?"00":h(u(g%60)))},b={d:g=>
h(g.getDate()),D:g=>e[g.getDay()],j:g=>g.getDate(),l:g=>c[g.getDay()],N:g=>0==g.getDay()?7:g.getDay(),S:g=>{g=g.getDate();return 1==g%10&&11!=g?"st":2==g%10&&12!=g?"nd":3==g%10&&13!=g?"rd":"th"},w:g=>g.getDay(),z:g=>{const d=new Date(g.getFullYear(),0,1);return w((g-d)/864E5)},W:g=>{const d=new Date(g.valueOf());g=(g.getDay()+6)%7;d.setDate(d.getDate()-g+3);g=d.valueOf();d.setMonth(0,1);4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7);return h(1+w((g-d)/6048E5))},F:g=>k[g.getMonth()],m:g=>h(g.getMonth()+
1),M:g=>v[g.getMonth()],n:g=>g.getMonth()+1,t:g=>{let d=g.getFullYear();g=g.getMonth()+1;12===g&&(d=d++,g=0);return(new Date(d,g,0)).getDate()},L:g=>{g=g.getFullYear();return 0==g%400||0!=g%100&&0==g%4},o:g=>{const d=new Date(g.valueOf());d.setDate(d.getDate()-(g.getDay()+6)%7+3);return d.getFullYear()},Y:g=>g.getFullYear(),y:g=>(""+g.getFullYear()).substr(2),a:g=>12>g.getHours()?"am":"pm",A:g=>12>g.getHours()?"AM":"PM",B:g=>x(1E3*((g.getUTCHours()+1)%24+g.getUTCMinutes()/60+g.getUTCSeconds()/3600)/
24),g:g=>g.getHours()%12||12,G:g=>g.getHours(),h:g=>h(g.getHours()%12||12),H:g=>h(g.getHours()),i:g=>h(g.getMinutes()),s:g=>h(g.getSeconds()),e:g=>/\((.*)\)/.exec((new Date).toString())[1],I:g=>{let d=null,f=0;for(;12>f;){const a=(new Date(g.getFullYear(),f++,1)).getTimezoneOffset();if(null===d)d=a;else if(a<d){d=a;break}else if(a>d)break}return g.getTimezoneOffset()==d|0},O:g=>l(g,!1),P:g=>l(g,!0),T:g=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:g=>60*-g.getTimezoneOffset(),c:g=>g.format("Y-m-d\\TH:i:sP"),
r:g=>g.toString(),U:g=>g.getTime()/1E3,x:g=>g.toLocaleDateString(),X:g=>g.toLocaleTimeString()};return function(g){return g.replace(/(\\?)(.)/g,(d,f,a)=>""===f&&b[a]?b[a](this):a)}})();
(u=>{const x=(f,a)=>{var q=f.__mct__.get(a);if(q)return q.slice();const n=[];if(q=f.__anc__){const r=q.length;for(let t=0;t<r;){const z=q[t++].__fns__;z.has(a)&&n.push(z.get(a))}}else{const r=f.__anc__=[],t=z=>{const D=z.__inc__,G=D.length;for(let L=0;L<G;)t(D[L++]);r.includes(z)||(r.push(z),z=z.__fns__,z.has(a)&&n.push(z.get(a)))};t(f)}f.__mct__.set(a,n.slice());return n},w=(f,a)=>{const q=f.callable;return f.__hs?function(...n){const r=this.callSuper,t=x(a,f.name);let z=t.length-1;if(0===z)r&&delete this.callSuper;
else{const G=n.length,L=this.callSuper=(...J)=>{for(let N=J.length;N<G;)J[N]=n[N++];0===--z&&delete this.callSuper;J=t[z].callable.call(this,...J);this.callSuper=L;z++;return J}}const D=q.call(this,...n);r?this.callSuper=r:delete this.callSuper;return D}:q},v=(f,a)=>{a=a??f;if(a===f){f.__anc__=null;f.__mct__=new Map;var q=f.__dep__;for(var n=q.length;0<n;)v(q[--n])}q=a.__tgt__;n=f.__inc__;const r=n.length;for(let t=0;t<r;)v(n[t++],a);for(const [t,z]of f.__fns__)f=z instanceof c?w(z,a):z,q[t]!==f&&
(q[t]=f)},k=f=>f.__meta__??(f.__meta__=new h(null,null,f)).include(f.klass,!0),e=f=>{const a=function(...q){return this.initialize(...q)??this};a.prototype=Object.create(f.prototype);return a},c=e(Object),h=u.Module=e(Object);c.prototype.initialize=function(f,a,q){this.module=f;this.name=a;this.callable=q;this.__hs=q.toString().includes("callSuper")};var l=h.prototype;l.initialize=function(f,a,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;f&&(this.__displayName=
f);this.include(a,!0)};l.include=function(f,a){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var q=f.extend,n=f.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(n&&(n.__fns__||"function"!==typeof n)){q=n.length;for(let r=0;r<q;)this.include(n[r++],!0)}for(const r of Object.keys(f))if(n=f[r],"extend"!==r&&"include"!==r||!n.__fns__&&"function"===typeof n)this.__fns__.has(r)?(console.warn('JS.Module already has field: "'+r+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new h("Auto_"+r,{[r]:n}),!1)):this.__fns__.set(r,n?.__fns__||"function"!==typeof n?n:new c(this,r,n))}!0!==a&&v(this)}return this};l.includes=function(f){if(f===this)return!0;const a=this.__inc__,q=a.length;for(let n=0;n<q;)if(a[n++].includes(f))return!0;return!1};l.instanceMethod=function(f){return x(this,f).pop()};const b=new h("Kernel",{extend:function(f){k(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||k(this).includes(f)}}),g=u.Class=e(h),d=g.prototype;
d.initialize=function(f,a,q){"function"!==typeof a&&(q=a,a=Object);h.prototype.initialize.call(this,f);f=e(a);for(const n in this)f[n]===this[n]||f.hasOwnProperty(n)||(f[n]=this[n]);f.prototype.constructor=f.prototype.klass=f;k(f).include(a.__meta__);f.__tgt__=f.prototype;a=a===Object?{}:a.__fns__?a:new h(a.prototype,!0);f.include(b,!0).include(a,!0).include(q,!0);v(f);return f};l=(f,a)=>{f.__inc__=[];f.__dep__=[];const q=f.__tgt__=f.prototype,n=f.__fns__=new Map;for(const D of Object.keys(q)){var r=
n,t=r.set;var z=q[D];z=z?.__fns__||"function"!==typeof z?z:new c(f,D,z);t.call(r,D,z)}q.constructor=q.klass=f;for(const D in d)f[D]===d[D]||f.hasOwnProperty(D)||(f[D]=d[D]);f.include(a);f.constructor=f.klass=g};l(c,b);l(h,b);l(g,h);v(k(c));v(k(h));k(g).include(h.__meta__);u.Singleton=new g("Singleton",{initialize:(f,a,q)=>new (new g(f,a,q))})})(global.JS={});
(u=>{class x extends Error{constructor(p,y,...A){super(...A);this.name="FetchError";this.status=p;this.url=y}}let w=0,v,k={};const e=console.warn,c=Math,{abs:h,min:l,max:b,pow:g}=c,d=Array.isArray,f=document,a=f.head,q=f.createElement.bind(f),n={},r={"":!0},t=f.fonts,z=p=>{const y=p.family.split('"').join("");for(const A of[y,y+" "+p.weight])if(!r[A]){r[A]=!0;const C=n[A]??[];for(;C.length;)(p=C.pop())&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y))}},D={},G=p=>{const y=
{};return(...A)=>{const C=JSON.stringify(A);return C in y?y[C]:y[C]=p(...A)}},L=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,J=/\$(\d+)/g,N=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,Q=/[\\"](.)/g,m=u.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:p=>p.split("").reduce((y,A)=>{y=(y<<5)-y+A.charCodeAt(0);return y&y},0),addEventListener:(p,y,A,C,E)=>{p.addEventListener(y,A,{capture:C||!1,passive:E||!1})},removeEventListener:(p,y,A,C)=>{p.removeEventListener(y,A,C||!1)},resolveName:(p,
y)=>{if(p&&0!==p.length){y=y??global;var A=d(p)?p:p.split("."),C=A.length;for(let E=0;E<C;E++)if(y=y[A[E]],null==y){e("resolveName failed for",p,"at part",E,A[E]);return}return y}},resolveClassname:p=>{"string"===typeof p&&(p=m.resolveName(p));return p&&"function"===typeof p.isA&&p.isA(JS.Class)?p:null},getExtension:p=>p?(p=p.split("."),1<p.length?p.pop():null):null,loadScript:function(p,y,A,C){const E=this._loadedScripts??(this._loadedScripts={});if(E[p])return e("script already loaded for src",
p),null;E[p]=!0;const I=q("script");I.type="text/javascript";I.async=!1;C&&(I.integrity=C,I.crossOrigin="anonymous");if(y){let K=!1;I.onerror=()=>{I.onload=I.onreadystatechange=I.onerror=null;y(!1)};I.onload=I.onreadystatechange=()=>{K||I.readyState&&"complete"!==I.readyState||(K=!0,I.onload=I.onreadystatechange=I.onerror=null,y(!0))}}I.src=p+(A?"":(p.includes("?")?"&":"?")+"cacheBust="+Date.now());a.appendChild(I);return I},dumpStack:(p,y)=>{let A;"string"===typeof p&&(A=p,p=null);m.global.error.notify(y||
"error",null,A,p)},getRandom:p=>{const y=c.random();return p?b(0,l(p(y),.9999999999)):y},getRandomArbitrary:(p,y,A)=>{const C=l(p,y);return m.getRandom(A)*(b(p,y)-C)+C},getRandomInt:(p,y,A)=>{const C=l(p,y);return c.floor(m.getRandom(A)*(b(p,y)-C+1)+C)},areFloatsEqual:(p,y,A)=>{const C=h(p),E=h(y);return h(p-y)<=(C>E?E:C)*(null==A?1E-6:h(A))},areArraysEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;let A=p.length;if(A!==y.length)return!1;for(;A;)if(p[--A]!==y[A])return!1}return!0},areObjectsEqual:(p,
y)=>{if(p!==y){if(null==p||null==y)return!1;for(const A in p)if(p[A]!==y[A])return!1;for(const A in y)if(p[A]!==y[A])return!1}return!0},getElement:(p,y)=>f.getElementsByTagName(p||"body")[0<y?y:0],loadFontFaces:(p,y)=>{const A=[];for(const C of p)p=new FontFace(C.family,"url("+C.url+")",C.options),A.push(p.load());Promise.all(A).then(C=>{for(const E of C)t.add(E),z(E);y?.(C)})},loadFontFace:(p,y,A={},C)=>{p=new FontFace(p,"url("+y+")",A);p.loaded.then(E=>{t.add(E);z(E);C?.(E)});p.load()},registerForFontNotification:(p,
y)=>{r[y]?p&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y)):(n[y]??(n[y]=[])).push(p)},createBaseFontCSSRule:p=>{m.addCSSRule(m.createStylesheet(),"body, input","font-family:"+p,0)},loadCSSFonts:p=>{p?.forEach(m.createStylesheetLink)},createStylesheetLink:p=>{if(p){let y=k[p];y?console.warn("stylesheet already exists",p):(y=k[p]=q("link"),y.rel="stylesheet",y.href=p,a.appendChild(y));return y}},createStylesheet:()=>{const p=q("style");a.appendChild(p);return p.sheet},addCSSRule:(p,
y,A,C)=>{p.insertRule(y+"{"+A+"}",C)},removeCSSRules:p=>{let y=p.cssRules.length;for(;y;)p.deleteRule(--y)},createInputPlaceholderCSSRule:(p,y,A,C=1)=>{let E=p.__sheet;E?m.removeCSSRules(E):E=p.__sheet=m.createStylesheet();p=p.getODE();p=p.id||(p.id="id"+ ++w);const I=[];y&&I.push("color:"+y);A&&I.push("font-family:"+A);C&&I.push("opacity:"+C);m.addCSSRule(E,"#"+p+"::placeholder",I.join("; "),0)},isNotSorted:(p,y)=>{const A=p.length;for(let C=1;C<A;C++)if(0<y(p[C-1],p[C]))return!0},chainSortFunc:(...p)=>
(y,A)=>{for(const C of p){const E=C(y,A);if(0!==E)return E}return 0},getAlphaObjSortFunc:G((p,y,A,C)=>{const E=y?1:-1;return(I,K)=>{I=I[p];K=K[p];C?("string"!==typeof I&&(I=""+I),"string"!==typeof K&&(K=""+K)):(I=I||"",K=K||"");A&&(I=I.toLowerCase(),K=K.toLowerCase());return I.localeCompare(K)*E}}),getNumericObjSortFunc:G((p,y)=>{const A=y?1:-1;return(C,E)=>{C=C[p]||0;E=E[p]||0;return(C-E)*A}}),csvStringToArray:(p,y)=>{if(!p)return[];const A=[[]];let C;for(;C=N.exec(p);)C[1].length&&","!==C[1]&&A.push([]),
A[A.length-1].push(C[2]?C[2].replace(Q,"$1"):C[3]);if(y){const E=A.shift();return A.map(I=>{let K=0;return E.reduce((R,M)=>{R[M]=I[K++];return R},{})})}return A},prepareCSVDataURI:(p,y)=>{const A=I=>{if(I&&d(I)){const K=[],R=I.length;for(let M=0,T;R>M;M++)T=I[M],T=null==T?"":T.toString(),T=T.replace(/"/g,'""'),0<=T.search(/("|,|\n)/g)&&(T='"'+T+'"'),K.push(T);return K.join(",")}e("Unexpected row",I);return null},C=[];if(y){var E=A(y);E&&C.push(E)}if(p)if(d(p)){E=p.length;for(let I=0;E>I;I++){const K=
A(p[I]);K&&C.push(K)}}else e("Rows were not an array");return m.encodeCSVDataURI(C.join("\r\n"),y)},encodeCSVDataURI:(p,y)=>"data:text/csv;charset=utf-8"+(null==y?"":";header="+(y?"present":"absent"))+","+encodeURIComponent(p),dataURIToBlob:p=>{var y=p.indexOf(",");const A=p.slice(0,y).split(":")[1].split(";")[0];p=p.slice(y+1);if(A.startsWith("text/"))p=decodeURIComponent(p);else{p=atob(p);y=p.length;const C=new Uint8Array(y);for(;y;)C[--y]=p.charCodeAt(y);p=C}return new Blob([p],{type:A})},formatAsPercentage:(p,
y=2)=>{switch(typeof p){case "number":return y=l(16,b(0,y)),p=c.round(b(0,l(1,p))*g(10,2+y))/g(10,y),(0===p%1?p:p.toFixed(y))+"%";case "string":return p;default:return e("formatAsPercentage: expects a number"),p}},memoize:G,debounce:(p,y,A)=>{const C="__DBTO_"+ ++w;return function(){const E=this,I=E[C],K=arguments,R=A&&!I;clearTimeout(I);E[C]=setTimeout(function(){E[C]=null;A||p.apply(E,K)},y);R&&p.apply(E,K)}},createFixedThresholdCounter:(p,y,A,C)=>{var E=m.AccessorSupport.generateName;const I="function"===
typeof p||p instanceof JS.Module,K={};C=C||E("counter",A);const R=E(C,"increment");E=E(C,"decrement");if(void 0!==(I?p.instanceMethod(R):p[R]))return e("Increment: Abort clobber",R,p),!1;if(void 0!==(I?p.instanceMethod(E):p[E]))return e("Decrement: Abort clobber",E,p),!1;K[R]=function(){const M=this[C]+1;this[C]=M;this.fireEvent(C,M);M===y&&this.set(A,!0)};K[E]=function(){const M=this[C];if(0!==M){var T=M-1;this[C]=T;this.fireEvent(C,T);M===y&&this.set(A,!1)}};p[I?"include":"extend"](K);return!0},
makeURLSearchParams:(p={})=>{const y=new URLSearchParams;for(const A in p){const C=p[A];void 0!==C&&y.set(A,C)}return y},doFetch:(p,y,A,C,E,I)=>fetch(p,y).then(K=>{if(!K.ok)throw new x(K.status,p,K.statusText);return K}).then(K=>A?K.text():K.json()).then(K=>{if(C)try{if(A)C(K);else{if(!1===K.success)throw new x(200,p,K.message);C(K.data)}}catch(R){throw K=new x(200,p,R.message),K.stack=R.stack,K;}}).catch(K=>{if(E){if("FetchError"!==K.name){const R=new x(0,p,K.message);R.stack=K.stack;K=R}E(K)}}).finally(()=>
{I?.()}),I18N:{setLocale:p=>{v=p},getLocale:()=>v,addDictionary:(p,y)=>{D[y]=Object.assign(D[y]??{},p)},setDictionary:(p,y)=>{D[y]=p??{}},get:(p,...y)=>{var A=v??=(navigator.language??"en").split("-")[0].toLowerCase();A=(D[A]??D.en??{})[p];return null!=A?0<y.length?A.replaceAll(L,(C,E,I,K)=>I&&K?1==y[parseInt(E)]?I:K:"").replaceAll(J,(C,E)=>y[E]):A:p}}};t.onloadingdone=p=>{for(const y of p.fontfaces)z(y)}})(global);
(u=>{const x=(v,k)=>{v.startsWith('"')&&(v=v.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return k?JSON.parse(v):v}catch(e){}},w=u.Cookie={defaults:{raw:!1,json:!1},read:(v,k)=>{k={...w.defaults,...k};const e=k.raw?g=>g:g=>decodeURIComponent(g.split("+").join(" "));k=k.json;const c=document.cookie.split("; "),h=c.length,l=v?void 0:{};for(let g=0;g<h;){var b=c[g++].split("=");const d=e(b.shift());b=e(b.join("="));if(v){if(v===d)return x(b,k)}else l[d]=x(b,k)}return l},write:(v,k,e)=>
{e={...w.defaults,...e};if("number"===typeof e.expires){const d=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+d)}k=e.json?JSON.stringify(k):String(k);const {raw:c,expires:h,path:l,domain:b,samesite:g}=e;return document.cookie=[c?v:encodeURIComponent(v),"=",c?k:encodeURIComponent(k),h?"; expires="+h.toUTCString():"",l?"; path="+l:"",b?"; domain="+b:"",g?"; samesite="+g:"",e.secure?"; secure":""].join("")},remove:(v,k)=>void 0!==w.read(v,k)?(w.write(v,"",{...k,expires:-1}),!0):!1}})(myt);
(u=>{const x=console.error,w=JSON.parse,v=global.localStorage,k=v.getItem.bind(v),e=v.setItem.bind(v),c=v.removeItem.bind(v),h=v.clear.bind(v),l=(g,d,f)=>{if(0<d){const a="__timerId_"+f;(f=b[a])&&clearTimeout(f);b[a]=setTimeout(()=>{g();delete b[a]},d)}else g()},b=u.LocalStorage={hasDatum:(g,d)=>{if(g&&(d=k(d??"myt")))try{return null!=w(d)[g]}catch(f){x(f)}return!1},getDatum:(g,d)=>{if(g&&(d=k(d??"myt")))try{const f=w(d);if("object"===typeof f)return f[g]}catch(f){x(f)}},setDatum:(g,d,f,a)=>{f=f??
"myt";l(()=>{const q=b.getData(f);q[g]=d;e(f,JSON.stringify(q))},a,f+"___"+g)},removeDatum:(g,d,f)=>{d=d??"myt";l(()=>{const a=b.getData(d);delete a[g];e(d,JSON.stringify(a))},f,d+"___"+g)},hasData:g=>null!=k(g??"myt"),getData:g=>{if(g=k(g??"myt"))try{return w(g)}catch(d){x(d)}return{}},setData:(g,d,f)=>{d=d??"myt";g??={};return"object"===typeof g?(l(()=>{e(d,JSON.stringify(g))},f,d),!0):!1},removeData:(g,d)=>{g=g??"myt";l(()=>{c(g)},d,g)},getLength:()=>v.length,getKey:v.key.bind(v),getItem:k,setItem:e,
removeItem:c,clear:h,get:k,set:e,remove:c,clearAll:h}})(myt);
(u=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,v=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;u.URI=new JS.Class("URI",{initialize:function(k,e){k&&this.parse(k,e)},setSource:function(k){this.source=k},setProtocol:function(k){this.protocol=
k},setAuthority:function(k){this.authority=k},setUserInfo:function(k){this.userInfo=k},setUser:function(k){this.user=k},setPassword:function(k){this.password=k},setHost:function(k){this.host=k},setPort:function(k){this.port=k},setRelative:function(k){this.relative=k},setPath:function(k){this.path=k},setDirectory:function(k){this.directory=k},setFile:function(k){this.file=k},setQuery:function(k){this.query=k},setAnchor:function(k){this.anchor=k},parse:function(k,e){const c=this,[h,l,b,g,d,f,a,q,n,
r,t,z,D,G]=(e?v:w).exec(k)??[];c.setSource(h??"");c.setProtocol(l??"");c.setAuthority(b??"");c.setUserInfo(g??"");c.setUser(d??"");c.setPassword(f??"");c.setHost(a??"");c.setPort(q??"");c.setRelative(n??"");c.setPath(r??"");c.setDirectory(t??"");c.setFile(z??"");c.setQuery(D??"");c.setAnchor(G??"");c.queryPairs={};c.query.replace(x,(L,J,N)=>{J&&(c.queryPairs[J]=N)})},decodeQueryParam:k=>decodeURIComponent(k).split("+").join(" "),getQuery:function(){var k=this.queryPairs;const e=[];for(const c in k)e.push(c+
"="+encodeURIComponent(this.getQueryParam(c)));k=e.join("&");return 0<k.length?"?"+k:k},getQueryParam:function(k){k=this.queryPairs[k];return null==k?void 0:this.decodeQueryParam(k)},setQueryParam:function(k,e){this.queryPairs[encodeURIComponent(k)]=encodeURIComponent(e)},removeQueryParam:function(k){delete this.queryPairs[k]},getPathParts:function(k){const e=this.path.split("/");if(!k)for(k=e.length;k;)0===e[--k].length&&e.splice(k,1);return e},toString:function(k){const e=this.path;k=k?this.query?
"?"+this.query:"":this.getQuery();const c=this.anchor;let h=this.toStringThroughPort();e?h+=e:this.host&&(k||c)&&(h+="/");k&&(h+=k);c&&(h+="#"+c);return h},toStringThroughPort:function(){const k=this.protocol,e=this.host,c=this.userInfo,h=this.port;let l="";k&&(l+=k+"://");c&&e&&(l+=c+"@");e&&(l+=e,h&&(l+=":"+h));return l}})})(myt);
(u=>{const x=Math,{PI:w,cos:v,sin:k,sqrt:e}=x,c=(b,g,d,f,a,q)=>{"object"===typeof b&&(q=a,a=f,f=d,d=g,g=b.y,b=b.x);"object"===typeof d&&(q=d.height,a=d.width,f=d.y,d=d.x);return b>=d&&g>=f&&b<=d+a&&g<=f+q},h=(b,g,d,f,a)=>{b=d-b;g=f-g;g=b*b+g*g;return a?g:e(g)},l=(b,g,d,f,a)=>{null==a&&(a=6371);b=b*w/180;d=d*w/180;return a*x.acos(k(b)*k(d)+v(b)*v(d)*v(f*w/180-g*w/180))};u.Geometry={getClosestPointOnALineToAPoint:(b,g,d,f,a,q,n)=>{d-=b;f-=g;a=(d*(a-b)+f*(q-g))/(d*d+f*f);n&&(a=x.min(1,x.max(0,a)));return{x:b+
d*a,y:g+f*a}},isPointInPath:(b,g,d,f)=>{"object"===typeof b&&(f=d,d=g,g=b.y,b=b.x);if(c(b,g,d)&&(d=f.length,6<=d)){let a=!1,q=f[0],n=f[1],r,t;for(;d;)t=f[--d],r=f[--d],t>g!==n>g&&b<(q-r)*(g-t)/(n-t)+r&&(a=!a),q=r,n=t;return a}return!1},measureDistance:h,measureLatLngDistance:l,degreesToRadians:b=>b*w/180,radiansToDegrees:b=>180*b/w,rectContainsPoint:c,circleContainsPoint:(b,g,d,f,a)=>h(b,g,d,f,!0)<=a*a,circleContainsLatLng:(b,g,d,f,a,q)=>l(b,g,d,f,q)<=a,polarToCartesian:(b,g,d,f)=>{d??=0;f??=0;g%=
360;if(0===g)g=b,b=0;else if(90===g)g=0;else if(180===g)g=-b,b=0;else if(270===g)g=0,b=-b;else{const a=g*w/180;g=b*v(a);b*=k(a)}return[d+g,f+b]},cartesianToPolar:(b,g,d,f,a)=>{d??=0;f??=0;b-=d;f=g-f;g=e(b*b+f*f);f=x.atan2(f,b);0>f&&(f+=2*w);return[g,a?f:180*f/w]}}})(myt);
(u=>{const x=JS.Module,w=console.log,v=u.dumpStack;u.Observable=new x("Observable",{attachObserver:function(k,e,c){return k&&e&&c?(this.getObservers(c).push(e,k),!0):!1},detachObserver:function(k,e,c){if(k&&e&&c){var h=this.__obsbt;if(h&&(c=h[c])){h=!1;let l=c.length;for(;2<=l;){const b=c[--l],g=c[--l];k===b&&e===g&&(c.splice(l,2),h=!0)}return h}}return!1},detachAllObservers:function(){const k=this.__obsbt;if(k)for(const e in k){const c=k[e];let h=c.length;for(;2<=h;){const l=c[--h],b=c[--h];l&&b&&
("function"===typeof l.detachFrom&&l.detachFrom(this,b,e)||c.splice(h,2))}}},getObservers:function(k){let e;return(e=this.__obsbt??(this.__obsbt={}))[k]??(e[k]=[])},hasObservers:function(k){const e=this.__obsbt;return e?0<e[k]?.length:!1},createEvent:function(k,e){return{source:this,type:k,value:e}},fireEvent:function(k,e,c){if(null==c){var h=this.__obsbt;h&&(c=h[k])}if(c){h={source:this,type:k,value:e};const l=this.__aet??(this.__aet={});if(l[k])u.global.error.notify("warn","eventLoop","Abort refiring event:"+
k,null,{observable:this,type:k,value:e});else{l[k]=!0;for(e=c.length;2<=e;){const b=c[--e],g=c[--e];if(b&&g)try{if("function"===typeof g){if(g.call(b,h))break}else if(b[g](h))break}catch(d){v(d),w("Additional context",g,b)}}l[k]=!1}}}});u.Observer=new x("Observer",{valueFromEvent:k=>k&&"object"===typeof k&&k.type?k.value:k,syncTo:function(k,e,c,h,l){h??=c;try{this[e](k.createEvent(c,k.get(h)))}catch(b){v(b)}l||this.attachTo(k,e,c,l)},isAttachedTo:function(k,e,c){if(k&&e&&c){var h=this.__obt;if(h&&
(c=h[c]))for(h=c.length;2<=h;){const l=c[--h],b=c[--h];if(k===l&&e===b)return!0}}return!1},getObservables:function(k){let e;return(e=this.__obt??(this.__obt={}))[k]??(e[k]=[])},hasObservables:function(k){const e=this.__obt;return e?0<e[k]?.length:!1},attachTo:function(k,e,c,h){if(k&&e&&c){const l=this.getObservables(c);if(h){const b=this,g=e;this.__methodNameCounter??(this.__methodNameCounter=0);e="__DO_ONCE_"+this.__methodNameCounter++;this[e]=d=>{b.detachFrom(k,e,c);delete b[e];return b[g](d)}}if(k.attachObserver(this,
e,c))return l.push(e,k),!0}return!1},detachFrom:function(k,e,c){if(k&&e&&c){var h=this.__obt;if(h&&(h=h[c])){let l=!1,b=h.length;for(;2<=b;){const g=h[--b],d=h[--b];k===g&&e===d&&k.detachObserver(this,e,c)&&(h.splice(b,2),l=!0)}return l}}return!1},detachFromAllObservables:function(){var k=this.__obt;if(k)for(const [e,c]of Object.entries(k)){for(k=c.length;2<=k;){const h=c[--k],l=c[--k];h.detachObserver(this,l,e)}c.length=0}},constrain:function(k,e){if(k&&e){const h=e.length;if(0!==h%2)w("Observables uneven",
this);else{var c;const l=(c=this.__cbmn??(this.__cbmn={}))[k]??(c[k]=[]);if(0<l.length)w("Constraint exists for "+k+" on",this);else{for(c=0;c<h;){const b=e[c++],g=e[c++];b&&g&&(this.attachTo(b,k,g),l.push(b,g))}try{this[k]()}catch(b){v(b)}}}}},releaseConstraint:function(k){if(k){var e=this.__cbmn;if(e&&(e=e[k])){let c=e.length;for(;2<=c;){const h=e[c--],l=e[c--];this.detachFrom(l,k,h)}e.length=0}}},releaseAllConstraints:function(){const k=this.__cbmn;if(k)for(const e in k)this.releaseConstraint(e)}})})(myt);
(u=>{const x=console.warn,w=u.global=new JS.Singleton("Global",{include:[u.Observable],initialize:()=>{},register:(v,k)=>{w.hasOwnProperty(v)&&(x("Global key in use",v),w.unregister(v));w[v]=k;w.fireEvent("register"+v,k)},unregister:v=>{if(w.hasOwnProperty(v)){const k=w[v];delete w[v];w.fireEvent("unregister"+v,k)}else x("Global key not in use",v)}})})(myt);
(u=>{let x;new JS.Singleton("GlobalError",{include:[u.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);u.global.register("error",x)},setConsoleLogging:w=>{x.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=x.stackTraceLimit=w},notify:(w,v,k,e,c)=>{e??=Error(k??v);e=e.stack??e.stacktrace;x.fireEvent(v??"error",{msg:k,stacktrace:e,...c});if(x.consoleLogging&&w)console[w](e)}})})(myt);
(u=>{const x=global,w=x.getComputedStyle,v=document,k=Math.max,e=l=>{const {zIndex:b,opacity:g}=w(l);if("auto"===b){if(1===parseInt(g,10)){let d=0;l=l.childNodes;let f=l.length;for(;f;){const a=l[--f];1===a.nodeType&&(d=k(d,e(a)))}return d}return 0}return parseInt(b,10)},c=(l,b)=>{const g=[];for(;l;){g.push(l);if(l===b)break;l=l.parentNode}return g},h=u.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(l,b,g)=>{l=v.createElement(l);for(const d in g)l[d]=g[d];for(const d in b)l.style[d]=
b[d];return l},isDomElementVisible:l=>{if("INPUT"!==l.nodeName||"hidden"!==l.type)for(;l;){if(l===v)return!0;const {display:b,visibility:g}=w(l);if("none"===b||"hidden"===g)break;l=l.parentNode}return!1},getZIndexRelativeToAncestor:(l,b)=>{if(l&&b)for(l=c(l,b),b=l.length-1;b;){const g=w(l[--b]),d=g.zIndex,f="auto"===d;if(0===b||!f||1!==parseInt(g.opacity,10))return f?0:parseInt(d,10)}return 0},getAncestorArray:c,getHighestZIndex:e,getRelativePosition:(l,b)=>{if(l){let g=0,d=0;for(;l&&"BODY"!==l.nodeName&&
l!==b;)if(g+=l.offsetLeft,d+=l.offsetTop,(l=l.offsetParent)&&"BODY"!==l.nodeName){const {borderLeftWidth:f,borderTopWidth:a}=w(l);g+=parseInt(f,10)-l.scrollLeft;d+=parseInt(a,10)-l.scrollTop}return{x:g,y:d}}},getTruePosition:l=>{if(l)return l=l.getBoundingClientRect(),l.left+=x.scrollX,l.top+=x.scrollY,l},simulateDomEvent:(l,b,g)=>{if(l){const d={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(g)for(const q in g)d[q]=g[q];let a;for(const q in f)if(f[q].test(b)){a=q;break}if(!a)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(v.createEvent)g=v.createEvent(a),"HTMLEvents"===a?g.initEvent(b,d.bubbles,d.cancelable):g.initMouseEvent(b,d.bubbles,d.cancelable,v.defaultView,d.button,d.pointerX,d.pointerY,d.pointerX,d.pointerY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,null),l.dispatchEvent(g);
else{d.clientX=d.pointerX;d.clientY=d.pointerY;g=v.createEventObject();for(const q in d)g[q]=d[q];l.fireEvent("on"+b,g)}}},getScrollbarSize:u.memoize(()=>{const l=v.body,b=h.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});l.appendChild(b);const g=b.offsetWidth-b.clientWidth;l.removeChild(b);return g})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(l){if(Array.isArray(l)){const [b,
g]=l;this.__oE=b;this.__iE=g;this.__iS=g.style;this.__oS=b.style;g.model=b.model=this}else this.__oE=this.__iE=l,this.__iS=this.__oS=l.style,l.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(l){this.__iE.className=this.domClass=l},addDomClass:function(l){const b=this.__iE.className;this.setDomClass((b?
b+" ":"")+l)},removeDomClass:function(l){var b=this.__iE.className;if(b){b=b.split(" ");let g=b.length;for(;g;)b[--g]===l&&b.splice(g,1);this.setDomClass(b.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(l){this.__iE.id=this.domId=l},setZIndex:function(l){this.__oS.zIndex=l},setStyleProperty:function(l,b){this.__iS[l]=b},getPagePosition:function(l){return h["get"+(l?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){h.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return e(this.__iE)},getHighestChildZIndex:function(l){const b=this.__iE.childNodes;let g=b.length,d=0;for(;g;){const f=b[--g];1===f.nodeType&&f!==l&&(d=k(d,e(f)))}return d},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(l,b){(b?this.__iE:this.__oE).scrollTop=l||0}})})(myt);
(u=>{let x;const w=k=>{for(;k.lastChild;)k=k.lastChild;return k},v=(k,e)=>{x.lastTraversalWasForward=k;let c=document.body,h=c;var l=document.activeElement;let b=h,g;const d=k?"getNextFocus":"getPrevFocus";l&&(b=h=l,(l=h.model)??(l=x.findModelForDomElement(h)),l&&(e=l.getFocusTrap(e))&&(c=e.getIDE()));for(;b;){if(b.model&&b.model[d]&&(g=b.model[d]()))b=g.getIDE();else if(k)if(b.firstChild)b=b.firstChild;else{if(b===c)return h.model;if(b.nextSibling)b=b.nextSibling;else for(;b&&(b=b.parentNode,b!==
c);)if(b.nextSibling){b=b.nextSibling;break}}else b=b===c?w(c):b.previousSibling?w(b.previousSibling):b.parentNode;if(b===h)return h.model;if(1===b.nodeType)if((l=b.model)&&l instanceof u.View){if(l.isFocusable())return l}else if(e=b.nodeName,!("A"!==e&&"AREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e&&"BUTTON"!==e||b.disabled||isNaN(b.tabIndex))&&u.DomElementProxy.isDomElementVisible(b)&&(l=x.findModelForDomElement(b),!l?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){b.focus();x.focusedDom=b;
break}}};new JS.Singleton("GlobalFocus",{include:[u.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;u.global.register("focus",x)},setFocusedView:k=>{if(x.focusedView!==k){x.prevFocusedView=x.focusedView;if(x.focusedView=k)x.focusedDom=null;x.fireEvent("focused",k)}},notifyFocus:k=>{x.focusedView!==k&&x.setFocusedView(k)},notifyBlur:k=>{x.focusedView===k&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:k=>{v(!0,k)?.focus()},prev:k=>{v(!1,k)?.focus()},findModelForDomElement:k=>{for(;k;){let e=k.model;if(e&&e instanceof u.View)return e;k=k.parentNode}}})})(myt);
(u=>{const x=JS.Module,w=u.global,v=w.focus,k=()=>({source:null,type:null,value:null}),e=a=>{a=a.value??a;return(a.target??a.srcElement).model},c=u.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:k(),getKeyFromEvent:a=>a.value.key,getCodeFromEvent:a=>a.value.code,isEnterKeyEvent:a=>a.value.code===w.keys.CODE_ENTER,isEscKeyEvent:a=>a.value.code===w.keys.CODE_ESC,isShiftKeyEvent:a=>w.keys.isShiftCode(a.value.code)},createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,
q,n,c)??this.callSuper(a,q,n)}}),h=u.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:k(),getMouseFromEvent:a=>({x:a.value.pageX,y:a.value.pageY}),getMouseFromEventRelativeToView:(a,q)=>{q=q.getPagePosition();a=h.getMouseFromEvent(a);a.x-=q.x;a.y-=q.y;return a}},createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,q,n,h,!0)??this.callSuper(a,q,n)}}),l=u.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:k(),getScrollFromEvent:a=>{const {scrollLeft:q,scrollTop:n}=e(a)?.getIDE();return{x:q,y:n}}},createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,q,n,l)??this.callSuper(a,q,n)}}),b=u.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:k()},createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,q,n,b,!1)??this.callSuper(a,q,n)}}),
g=u.FocusObservable=new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:k()},initNode:function(a,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(a,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(a){this.focused!==a&&(this.focused=a,this.inited&&(this.fireEvent("focused",a),a?v.notifyFocus(this):v.notifyBlur(this)))},setFocusable:function(a){if(this.focusable!==a){const q=this.focusable;(this.focusable=a)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",a)}},setFocusIndicator:function(a){this.focusIndicator!==a&&(this.focusIndicator=a,this.focused&&(a?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(v.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(a=>!0===a.maskFocus)},focus:function(a){this.isFocusable()&&this.getIDE().focus({preventScroll:a})},blur:function(){this.getIDE().blur()},__doFocus:function(a){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(a){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const a=this.getIDS();a.outlineWidth="thin";a.outlineColor="#8bf";a.outlineStyle="solid";a.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(a,q,n){if(g.EVENT_TYPES[n]){const r=this;return t=>{t??=window.event;if(r._ignoreFocus)t.cancelBubble=!0,t.stopPropagation?.(),t.preventDefault();
else{var z=g.EVENT;z.source=r;z.type=t.type;z.value=t;a[q](z)||(t.cancelBubble=!0,t.stopPropagation?.());z.source=void 0}}}return this.callSuper(a,q,n)}}),d=u.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:k()},createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,q,n,d)??this.callSuper(a,q,n)}}),f=u.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:k()},
createDomHandler:function(a,q,n){return this.createStandardDomHandler(a,q,n,f,!0)??this.callSuper(a,q,n)}});u.DomObservable=new x("DomObservable",{attachDomObserver:function(a,q,n,r,t){if(a&&q&&n){const z=this.createDomHandler(a,q,n);if(z){r=!!r;const D=this.__dobsbt??(this.__dobsbt={}),G=D[n];G?G.push(a,q,z,r):D[n]=[a,q,z,r];u.addEventListener(this.getDomElementForDomObservable(n),n,z,r,t);return!0}}return!1},getDomElementForDomObservable:function(a){return this.getIDE()},createDomHandler:(a,q,n)=>
null,createStandardDomHandler:function(a,q,n,r,t){if(r.EVENT_TYPES[n]){const z=this,D=r.EVENT;return G=>{G??=window.event;D.source=z;D.type=G.type;D.value=G;a[q](D)||(G.cancelBubble=!0,G.stopPropagation?.(),t&&G.preventDefault());D.source=void 0}}},detachDomObserver:function(a,q,n,r){if(a&&q&&n){var t=this.__dobsbt;if(t&&(t=t[n])){r=!!r;const z=this.getDomElementForDomObservable(n);let D=!1,G=t.length;for(;4<=G;){const L=t[--G],J=t[--G],N=t[--G],Q=t[--G];a===Q&&q===N&&r===L&&(z&&u.removeEventListener(z,
n,J,r),t.splice(G,4),D=!0)}return D}}return!1},detachAllDomObservers:function(){var a=this.__dobsbt;if(a)for(const [q,n]of Object.entries(a)){for(a=n.length+2;4<=a;){const r=n[a-=3],t=n[--a];u.removeEventListener(this.getDomElementForDomObservable(q),q,t,r)}n.length=0}}});u.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:e},attachToDom:function(a,q,n,r,t){if(a&&q&&n){r=!!r;let z;const D=(z=this.__dobt??(this.__dobt={}))[n]??(z[n]=[]);a.attachDomObserver(this,q,n,r,t)&&D.push(r,q,a)}},
detachFromDom:function(a,q,n,r){if(a&&q&&n){var t=this.__dobt;if(t&&(t=t[n])){r=!!r;let z=!1,D=t.length;for(;3<=D;){const G=t[--D],L=t[--D],J=t[--D];a===G&&q===L&&r===J&&a.detachDomObserver(this,q,n,r)&&(t.splice(D,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var a=this.__dobt;if(a)for(const [q,n]of Object.entries(a)){for(a=n.length;3<=a;){const r=n[--a],t=n[--a],z=n[--a];r.detachDomObserver(this,t,q,z)}n.length=0}}})})(myt);
(u=>{let x;const {KeyObservable:w,global:v}=u,k=v.focus,e=w.getCodeFromEvent,c=new Set,h="Firefox"===BrowserDetect.browser,l=h?"OSLeft":"MetaLeft",b=h?"OSRight":"MetaRight",g=()=>c.has("ShiftLeft")||c.has("ShiftRight"),d=()=>c.has("ControlLeft")||c.has("ControlRight"),f=()=>c.has("AltLeft")||c.has("AltRight"),a=()=>c.has(l)||c.has(b),q=(r,t)=>{switch(r){case "Backspace":return r=t.nodeName,!("TEXTAREA"===r||"INPUT"===r&&("text"===t.type||"number"===t.type||"password"===t.type)||"DIV"===r&&"true"===
t.contentEditable&&t.firstChild);case "Tab":return!0}return!1},n=(r,t)=>{for(const z of["keydown","keypress","keyup"])x[t](r,"__hndl_"+z,z)};new JS.Singleton("GlobalKeys",{include:[u.DomElementProxy,u.DomObservable,u.DomObserver,w,u.Observable,u.Observer],initialize:function(){v.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const r of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+r]="Key"+r;for(const r of"1234567890".split(""))x["CODE_"+r]="Digit"+r;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(k,"__hndl_focused","focused");n(x,"attachToDom");global.onblur=()=>{c.clear()}},isShiftKeyDown:g,isControlKeyDown:d,isAltKeyDown:f,isMetaKeyDown:a,isShiftCode:r=>
"ShiftLeft"===r||"ShiftRight"===r,isControlCode:r=>"ControlLeft"===r||"ControlRight"===r,isAltCode:r=>"AltLeft"===r||"AltRight"===r,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?a():d(),ignoreFocusTrap:()=>f(),__hndl_focused:r=>{(r=r.value)?(n(x,"detachFromDom"),n(r,"attachToDom")):((r=k.prevFocusedView)&&n(r,"detachFromDom"),n(x,"attachToDom"))},__hndl_keydown:r=>{const t=e(r);r=r.value;q(t,r.target)&&r.preventDefault();a()&&"ShiftLeft"!==t&&"ShiftRight"!==t&&"ControlLeft"!==t&&"ControlRight"!==
t&&"AltLeft"!==t&&"AltRight"!==t?(x.fireEvent("keydown",t),x.fireEvent("keyup",t)):(c.add(t),"Tab"===t&&(r=f(),g()?k.prev(r):k.next(r)),x.fireEvent("keydown",t))},__hndl_keypress:r=>{x.fireEvent("keypress",e(r))},__hndl_keyup:r=>{const t=e(r);r=r.value;q(t,r.target)&&r.preventDefault();c.delete(t);x.fireEvent("keyup",t)}})})(myt);
(u=>{const x=JS.Module,w=Math.max,v=(b,g,d,f,a=0)=>{const q=b.length;for(let n=d;a<q;a++)h(b[a],g,n),f&&(n+=d)},k=(b,g,d,f=0)=>{const a=b.length;for(let q=g;f<a;)b[f++].crossPos+=q,d&&(q+=g)},e=(b,g,d,f)=>{var a=b[g?"setWidthViaFlex":"setHeightViaFlex"];g=f?g?b.getFlexBasisWidth():b.getFlexBasisHeight():0;a.call(b,g+d)},c=(b,g,d)=>{b[g?"setXViaFlex":"setYViaFlex"](d,!1)},h=(b,g,d)=>{b[g?"setXViaFlex":"setYViaFlex"](d,!0)},l=(b,g,d)=>{b[g]!==d&&(b[g]=d,b.inited&&b.fireEvent(g,d),b.updateFlexboxLayout())};
u.FlexboxSupport=new x("FlexboxSupport",{initNode:function(b,g){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(b,g);this.updateFlexboxLayout()},setWidth:function(b){const g=this.width;this.callSuper(b);g!==this.width&&this.updateFlexboxLayout()},setHeight:function(b){const g=this.height;this.callSuper(b);g!==this.height&&this.updateFlexboxLayout()},
setDirection:function(b){l(this,"direction",b)},setWrap:function(b){l(this,"wrap",b)},setJustifyContent:function(b){l(this,"justifyContent",b)},setAlignItems:function(b){l(this,"alignItems",b)},setAlignContent:function(b){l(this,"alignContent",b)},setRowGap:function(b){l(this,"rowGap",w(0,b))},setColumnGap:function(b){l(this,"columnGap",w(0,b))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(b){this.set("totalBasisWidth",
b,!0)},setTotalBasisHeight:function(b){this.set("totalBasisHeight",b,!0)},ignoreSubviewForFlex:function(b){return b&&"function"===typeof b.ignoreFlex?b.ignoreFlex():!0},setFlexboxPaused:function(b,g){this.__flexboxPaused!==b&&((this.__flexboxPaused=b)||g||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(b){this.callSuper(b);b&&!this.ignoreSubviewForFlex(b)&&this.updateFlexboxLayout()},subviewRemoved:function(b){this.callSuper(b);!b||this.ignoreSubviewForFlex(b)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(b){this.callSuper(b);b&&this.ignoreSubviewForFlex(b)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(b){return b?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(b){return b?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(b){this._updateAgain=b},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const b=this;if(b.isOKToUpdateLayout()){var g=b.getSubviewsInLexicalOrder().filter(G=>!0!==b.ignoreSubviewForFlex(G)&&!0===G.visible);const D=g.length;if(0<D){b.__isUpdatingFlexboxLayout=!0;var d=b.direction;const G=d.startsWith("row"),L=!G;var f=b.getWidthForFlexboxLayout(),a=b.getHeightForFlexboxLayout();const J=G?b.columnGap:b.rowGap,N=G?f:a;var q=G?b.rowGap:
b.columnGap;const Q=G?a:f,m=b.isWrapNotAllowed();f=b.justifyContent;a=b.alignItems;var n=m?"stretch":b.alignContent;d.endsWith("Reverse")&&g.reverse();let p=0,y=0,A=0,C=0,E={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:A,crossSize:0};d=[E];for(let I=0;I<D;){const K=g[I++],R=G?K.getFlexBasisWidth():K.getFlexBasisHeight(),M=K.getShrink(),T=K.getGrow();!m&&0<E.items.length&&p+(0===C?0:J)+R>N&&(E.extraSize=N-p,A+=E.crossSize+q,y=w(y,p),C=p=0,E={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:A,crossSize:0},d.push(E));0!==C&&(p+=J);0<M&&0<R&&(E.shrinkCount+=M,E.shrinkBasis+=R*M);0<T&&(E.growCount+=T);E.crossSize=w(E.crossSize,L?K.getFlexBasisWidth():K.getFlexBasisHeight());c(K,G,p);e(K,G,R);p+=R;E.items.push(K);C++}E.extraSize=N-p;A+=E.crossSize;y=w(y,p);if(b.isCompactOnMainAxis(G)&&(g=d.reduce((I,K)=>null==I?K.extraSize:Math.min(I,K.extraSize),null),0!==g))for(var r of d)r.extraSize-=g;b[G?"setTotalBasisWidth":"setTotalBasisHeight"](y);b[G?"setTotalBasisHeight":
"setTotalBasisWidth"](A);r=d.length;if(1<r&&"wrapReverse"===b.wrap){for(var t of d)t.crossPos=A-(t.crossPos+t.crossSize);d.reverse()}if(!b.isCompactOnCrossAxis(G))switch(t=Q-A,n){default:case "start":break;case "end":k(d,t,!1);break;case "center":k(d,t/2,!1);break;case "spaceBetween":1<r&&k(d,t/(r-1),!0,1);break;case "spaceAround":t<=q?k(d,t/2,!1):(k(d,q/2,!1),t-=q,k(d,t/(2*r),!0),k(d,t/(2*r),!0,1));break;case "spaceEvenly":t<=2*q?k(d,t/2,!1):(k(d,q,!1),k(d,(t-2*q)/(r+1),!0));break;case "stretch":q=
t/r;t=0;for(var z of d)z.crossSize+=q,z.crossPos+=t,t+=q}for(const I of d){z=I.items;q=I.extraSize;if(0<q)if(0<I.growCount){q/=I.growCount;d=0;for(const M of z)0<d&&h(M,G,d),t=M.getGrow()*q,0<t&&(e(M,G,t,!0),d+=t)}else switch(d=z.length,f){default:case "start":break;case "end":v(z,G,q,!1);break;case "center":v(z,G,q/2,!1);break;case "spaceBetween":1<d&&v(z,G,q/(d-1),!0,1);break;case "spaceAround":q<=J?v(z,G,q/2,!1):(v(z,G,J/2,!1),q-=J,v(z,G,q/(2*d),!0),v(z,G,q/(2*d),!0,1));break;case "spaceEvenly":q<=
2*J?v(z,G,q/2,!1):(v(z,G,J,!1),q-=2*J,v(z,G,q/(d+1),!0))}else if(0>q&&0<I.shrinkCount){d=I.shrinkBasis;t=0;for(const M of z)0>t&&h(M,G,t),n=M.getShrink()*(G?M.getFlexBasisWidth():M.getFlexBasisHeight())/d*w(q,-d),0>n&&(e(M,G,n,!0),t+=n)}q=!1;const {crossSize:K,crossPos:R}=I;for(const M of z)switch(M.getAlignSelf()||a){case "start":c(M,L,R);e(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;case "end":c(M,L,R+K-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()));e(M,L,L?M.getFlexBasisWidth():
M.getFlexBasisHeight(),!1);break;case "center":c(M,L,R+(K-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()))/2);e(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;case "baseline":q=!0;c(M,L,R+(K-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()))/2+M.getFlexBaselineOffset(G));e(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;default:c(M,L,R),e(M,L,K,!1)}q&&b.updateFlexboxLayoutBaselineAdjustment(z,G,R)}b.__isUpdatingFlexboxLayout=!1;b.isUpdateAgain()&&!b.__UPDATE_AGAIN_LOOP_PROTECTION&&
(b.setUpdateAgain(!1),b.__UPDATE_AGAIN_LOOP_PROTECTION=!0,b.updateFlexboxLayout(),b.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else b.setTotalBasisWidth(0),b.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(b,g,d)=>{}});u.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(b){this.visible!==b&&(this.callSuper(b),this.updateFlexboxLayoutFromChild())},setXViaFlex(b,g){g&&(b+=this.x);this.x!==b&&(this.__isFlexUpdate=!0,this.setX(b),this.__isFlexUpdate=!1)},setYViaFlex(b,g){g&&
(b+=this.y);this.y!==b&&(this.__isFlexUpdate=!0,this.setY(b),this.__isFlexUpdate=!1)},setWidth:function(b){const g=this.width!==b;g&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(b);g&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(b){this.width!==b&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(b),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(b){const g=this.height!==b;
g&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(b);g&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(b){this.height!==b&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(b),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:b=>0,setIgnoreFlex:function(b){this.__ignoreFlex!==b&&(this.__ignoreFlex=b,this.inited&&(this.fireEvent("ignoreFlex",b),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(b){b=w(0,b);this.grow!==b&&(this.grow=b,this.inited&&(this.fireEvent("grow",b),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(b){b=w(0,b);this.shrink!==b&&(this.shrink=b,this.inited&&(this.fireEvent("shrink",b),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(b){this.alignSelf!==b&&(this.alignSelf=
b,this.inited&&(this.fireEvent("alignSelf",b),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const b=this.alignSelf;return"auto"===b||""===b?null:b},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(u=>{const x=console.log,w=new Map,v=new Map,k=(g,d)=>d+g.charAt(0).toUpperCase()+g.slice(1),e=g=>v.get(g)??(v.set(g,k(g,"set")),v.get(g)),c=g=>w.get(g)??(w.set(g,k(g,"get")),w.get(g)),h=(g,d)=>{let f;for(const a in d){const q=d[a],n=e(a);if(n in g)g[n](q);else g[a]!==q&&(g[a]=q,(f??=!1!==g.inited&&g.fireEvent)&&g.fireEvent(a,q))}},l=(g,d)=>{const f=c(d);g[f]&&x("Overwriting getter",f);g[f]=function(){return this[d]}},b=(g,d)=>{const f=e(d);g[f]&&x("Overwriting setter",f);g[f]=function(a){this[d]!==
a&&(this[d]=a,this.inited&&this.fireEvent(d,a))}};u.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:e,generateGetterName:c,generateName:k,createSetterFunction:b,createGetterFunction:l,createSetterMixin:(g,d)=>{const f={};for(const a of g)b(f,a),d&&l(f,a);return f}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(g,d){if(g)for(const f of g)this[f]=d[f],delete d[f]},callSetters:function(g){var d=this.earlyAttrs,f=this.lateAttrs;if(d||f){g={...g};if(d){var a=d.length;for(var q=0;q<a;){const r=d[q++];r in g&&(this.set(r,g[r]),delete g[r])}}let n;if(f)for(n=[],d=f.length,a=0;a<d;)q=f[a++],q in g&&(n.push(q,g[q]),delete g[q]);h(this,g);if(n)for(f=n.length,g=0;g<f;)this.set(n[g++],
n[g++])}else h(this,g)},get:function(g){const d=c(g);return"function"===typeof this[d]?this[d]():this[g]},set:function(g,d,f){if(!f&&(f=e(g),"function"===typeof this[f]))return this[f](d);this[g]!==d&&(this[g]=d,!1!==this.inited&&this?.fireEvent(g,d))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{const u=this.__meta__;if(u)for(const x of Object.keys(u))u[x]=null;for(const x of Object.keys(this))this[x]=null;this.destroyed=!0}}});
(u=>{const {Class:x,Module:w}=JS,v=console.warn;let k;const e=(f,a)=>a?(k=f).__op??(k.__op=[]):f.__op;let c;const h=(f,a)=>a?(c=f).__actives??(c.__actives=[]):f.__actives,l=new x("AbstractPool",{include:[u.Destructible],initialize:()=>{},destroy:function(){const f=e(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=e(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){e(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=e(this);if(f){let a=f.length;for(;a;){const q=f[--a];"function"===typeof q.destroy&&q.destroy()}f.length=0}}}),b=u.SimplePool=new x("SimplePool",l,{initialize:function(f,a){this.callSuper();this.instanceClass=f??Object;this.instanceParent=a},createInstance:function(f){var a=this.instanceParent,q=this.instanceClass;return a?new q(a,f):new q}}),g=new w("TrackActives",{destroy:function(){const f=
h(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();h(this,!0).push(f);return f},putInstance:function(f){var a=h(this);if(a){const q=a.indexOf(f);if(-1<q){a.splice(q,1);this.callSuper(f);return}a="inactive"}else a="missing";v("Tried to put a "+a+" instance",f,this)},getActives:function(f){const a=h(this);if(a){if(f){const q=[],n=a.length;for(let r=0;n>r;){const t=a[r++];f.call(this,t)&&q.push(t)}return q}return a.slice()}return[]},putActives:function(){const f=
h(this);if(f){let a=f.length;for(;a;)this.putInstance(f[--a])}}}),d=u.TrackActivesPool=new x("TrackActivesPool",b,{include:[g]});u.TrackActivesMultiPool=new x("TrackActivesMultiPool",l,{initialize:function(f,a){this.callSuper();this.instanceClassesByKey=f;const q=this._poolsByClassName={},n=this.__pbk={};for(const r in f){const t=f[r];n[r]=q[t.__displayName]=new d(t,a)}},destroy:function(){const f=this.__pbk;for(const a in f)f[a].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],
a=this.__pbk[f];if(a)return a.getInstance(arguments);v("No pool for key",f)},putInstance:function(f){const a=this._poolsByClassName[f.klass.__displayName];a?a.putInstance(f):v("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const a in f)f[a].destroyPooledInstances()},getActives:function(f){let a=[];const q=this.__pbk;for(const n in q)a.push(...q[n].getActives(f));return a},putActives:function(){const f=this.__pbk;for(const a in f)f[a].putActives()}});u.Reusable=new w("Reusable",
{clean:()=>{}})})(myt);
(u=>{const x=JS.Class,w=console.warn,v=[u.AccessorSupport,u.Destructible,u.Observable,u.Observer],k=(d,f)=>{if(f){const a=f.length;for(let q=0,n;a>q;)(n=f[q++])?d.extend(n):w("Missing mixin in",d.klass.__displayName)}d.inited=!1},e=(d,f)=>{if(f)for(;d;){if(f(d))return d;d=d.parent}},c=(d,f)=>{const a=f.name;void 0===d[a]?d[a]=f:w("Name in use",a)},h=(d,f)=>{const a=f.name;d[a]===f?delete d[a]:w("Name not in use",a)};let l;const b=d=>(l=d).__animPool??(l.__animPool=new u.TrackActivesPool(u.Animator,d));
let g;u.Eventable=new x("Eventable",{include:v,initialize:function(d,f){k(this,f);this.init(d??{})},init:function(d){this.callSetters(d);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});u.Node=new x("Node",{include:v,extend:{getMatchingAncestorOrSelf:e,getMatchingAncestor:(d,f)=>e(d?d.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(d,f,a){k(this,a);this.initNode(d,f??{})},initNode:function(d,f){this.callSetters(f);
this.setParent(d);this.inited=!0},destroy:function(){const d=this.subnodes;this.isBeingDestroyed=!0;if(d)for(let f=d.length;0<f;)d[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(d){this.placement=d},setDefaultPlacement:function(d){this.defaultPlacement=
d},setIgnorePlacement:function(d){this.ignorePlacement=d},setParent:function(d){if(d&&!this.ignorePlacement){var f=this.placement??d.defaultPlacement;f&&(d=d.determinePlacement(f,this))}if(this.parent!==d&&!d?.destroyed){if(f=this.parent){const a=f.getSubnodes().indexOf(this);-1<a&&(this.name&&h(f,this),f.subnodes.splice(a,1),f.subnodeRemoved(this))}if(this.parent=d)d.getSubnodes().push(this),this.name&&c(d,this),d.subnodeAdded(this);this.inited&&this.fireEvent("parent",d)}},setName:function(d){if(this.name!==
d){const f=this.parent;f&&this.name&&h(f,this);this.name=d;f&&d&&c(f,this)}},determinePlacement:function(d,f){let a=d.indexOf("."),q;0<=a&&(q=d.slice(a+1),d=d.slice(0,a));"*"===d&&(d=this.defaultPlacement)&&(a=d.indexOf("."),0<=a&&(q=d.slice(a+1)+(q?"."+q:""),d=d.slice(0,a)));return(d=this[d])?q?d.determinePlacement(q,f):d:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(d){if(d){if(d===this)return!0;if(this.parent)return this.getIDE&&
d.getIDE?d.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(d)}return!1},isAncestorOf:function(d){return d?d.isDescendantOf(this):!1},getLeastCommonAncestor:function(d){for(;d;){if(this.isDescendantOf(d))return d;d=d.parent}},searchAncestorsForClass:function(d){if(d)return this.searchAncestors(f=>f instanceof d)},searchAncestorsForModule:function(d){if(d)return this.searchAncestors(f=>f.isA(d))},searchAncestors:function(d){return e(this?this.parent:null,d)},searchAncestorsOrSelf:function(d){return e(this,
d)},getAncestors:function(){const d=[];let f=this;for(;f;)d.push(f),f=f.parent;return d},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:d=>{},subnodeRemoved:d=>{},animate:function(d){if(d){const f=b(this),a=f.getInstance({ignorePlacement:!0}),q=d.callback;delete d.callback;a.callSetters(d);a.next(n=>{f.putInstance(a)});q&&a.next(q);a.setRunning(!0);return a}},getActiveAnimators:function(d){if("string"===typeof d){const f=d;d=a=>a.attribute===f}return b(this).getActives(d)},
stopActiveAnimators:function(d,f=!1){d=this.getActiveAnimators(d);let a=d.length;if(0<a){const q=b(this);for(;a;){const n=d[--a];n.reset(f);f||q.putInstance(n)}}},doOnceOnIdle:function(d){this.attachTo(u.global.idle,d,"idle",!0)},addRef:function(d,f){return((g=this).__REFS??(g.__REFS={}))[d]=f},getRef:function(d){return((g=this).__REFS??(g.__REFS={}))[d]},removeRef:function(d){const f=(g=this).__REFS??(g.__REFS={}),a=f[d];delete f[d];return a}})})(myt);
(u=>{let x=0,w=!1;const v=JS.Class,k=[],e=d=>{if(w!==d&&(w=d,!d)){for(d=k.length;d;){const f=k[--d];f.__deferredLayout=!1;f.update()}k.length=0}},c=(d,f,a,q)=>{const n=d.getSubviewIndex(f),r=d.subviews;-1<n&&(d=d.getSubviewIndex(a),r.splice(n,1),-1<d?(n<d&&--d,r.splice(d+(q?1:0),0,f)):q?r.push(f):r.unshift(f))},h=(d,f,a)=>{d[f]!==a&&(d[f]=a,d.inited&&(d.fireEvent(f,a),d.update()))},l=u.Layout=new v("Layout",u.Node,{extend:{incrementGlobalLock:()=>{1===++x&&e(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&e(!1)}},initNode:function(d,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const a=!0===f.locked;delete f.locked;this.callSuper(d,f);a||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(d){var f=this.parent;if(f!==d){const n=!this.locked;n&&(this.locked=!0);if(f){for(var a=this.subviews,q=a.length;q;)this.removeSubview(a[--q]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(d);
if(d=this.parent){f=d.getSubviews();a=f.length;for(q=0;a>q;)this.addSubview(f[q++]);this.attachTo(d,"__hndlPSA","subviewAdded");this.attachTo(d,"__hndlPSR","subviewRemoved")}n&&(this.locked=!1,this.inited&&d&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(k.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(d){return this.subviews.includes(d)},getSubviewIndex:function(d){return this.subviews.indexOf(d)},addSubview:function(d){this.ignore(d)||
(this.subviews.push(d),this.startMonitoringSubview(d),this.locked||this.update())},startMonitoringSubview:d=>{},startMonitoringAllSubviews:function(){const d=this.subviews;let f=d.length;for(;f;)this.startMonitoringSubview(d[--f])},removeSubview:function(d){if(this.ignore(d))return-1;const f=this.getSubviewIndex(d);-1<f&&(this.stopMonitoringSubview(d),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:d=>{},stopMonitoringAllSubviews:function(){const d=this.subviews;
let f=d.length;for(;f;)this.stopMonitoringSubview(d[--f])},ignore:d=>d.ignoreLayout,__hndlPSA:function(d){d=d.value;d.parent===this.parent&&this.addSubview(d)},__hndlPSR:function(d){d=d.value;d.parent===this.parent&&this.removeSubview(d)},sortSubviews:function(d){this.subviews.sort(d)},moveSubviewBefore:function(d,f){c(this,d,f,!1)},moveSubviewAfter:function(d,f){c(this,d,f,!0)}});var b=u.ConstantLayout=new v("ConstantLayout",l,{setTargetAttrName:function(d){this.setterName=u.AccessorSupport.generateSetterName(d);
h(this,"targetAttrName",d)},setTargetValue:function(d){h(this,"targetValue",d)},update:function(){if(this.canUpdate()){const d=this.setterName,f=this.targetValue,a=this.subviews,q=a.length;if(d)for(let n=0;q>n;)a[n++][d](f)}}});b=u.VariableLayout=new v("VariableLayout",b,{initNode:function(d,f){this.collapseParent=this.reverse=!1;this.callSuper(d,f)},setCollapseParent:function(d){h(this,"collapseParent",d)},setReverse:function(d){h(this,"reverse",d)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,a=this.subviews;var d=a.length;let q=this.targetValue,n,r=0;if(this.reverse)for(n=d;n;)d=a[--n],this.skipSubview(d)||(q=this.updateSubview(++r,d,f,q));else for(n=0;d>n;){const t=a[n++];this.skipSubview(t)||(q=this.updateSubview(++r,t,f,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(d){this.attachTo(d,
"update","visible")},stopMonitoringSubview:function(d){this.detachFrom(d,"update","visible")},updateSubview:(d,f,a,q)=>{f[a](q);return q},skipSubview:d=>!d.visible,updateParent:(d,f)=>{}});const g=u.SpacedLayout=new v("SpacedLayout",b,{initNode:function(d,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(d,f)},setTargetAttrName:function(d){if(this.targetAttrName!==
d){const f="y"===d,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";a&&this.startMonitoringAllSubviews();this.callSuper(d)}},setNoAddSubviewOptimization:function(d){this.noAddSubviewOptimization=d},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){h(this,"spacing",d)},setOutset:function(d){h(this,
"outset",d)},addSubview:function(d){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(d);this.locked=f},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},updateSubview:function(d,f,a,q){d=f[this.measureAttrName];f[a](q+(d-f[this.measureAttrBaseName])/2);return q+d+this.spacing},updateParent:function(d,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});u.ResizeLayout=new v("ResizeLayout",g,{setCollapseParent:d=>{},setTargetAttrName:function(d){if(this.targetAttrName!==d){if(this.inited){const f="x"===d;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(d);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(d){this.attachTo(this.parent,
"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},doBeforeUpdate:function(){const d=this.measureAttrName,f=this.subviews;let a=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=f.length,n=0,r=0;for(;q;){const t=f[--q];this.skipSubview(t)||(++n,0<t.layoutHint?r+=t.layoutHint:a-=t[d])}0!==n&&(this.remainder=a-=(n-1)*this.spacing,this.resizeSum=r,this.scalingFactor=a/r,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===d?
"setWidth":"setHeight")},updateSubview:function(d,f,a,q){var n=f.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,f[this.measureSetter](n));return this.callSuper(d,f,a,q)},startMonitoringSubview:function(d){0<d.layoutHint||this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update","visible")},stopMonitoringSubview:function(d){0<d.layoutHint||this.detachFrom(d,"update",
this.measureAttrName);this.detachFrom(d,"update","visible")},updateParent:(d,f)=>{}});u.AlignedLayout=new v("AlignedLayout",b,{initNode:function(d,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(d,f)},setTargetAttrName:function(d){if(this.targetAttrName!==d){const f="y"===d,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";a&&this.startMonitoringAllSubviews();this.callSuper(d)}},setAlign:function(d){if(this.align!==d){this.align=d;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===d||"bottom"===d||"top"===d?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",d),this.update())}},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},
stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},doBeforeUpdate:function(){const d=this.measureAttrName,f=this.subviews;let a=0,q=f.length;for(;q;){const n=f[--q];this.skipSubview(n)||(a=a>n[d]?a:n[d])}this.setTargetValue(a)},updateSubview:function(d,f,a,q){switch(this.align){case "center":case "middle":f[a]((q-f[this.measureAttrName])/2);break;case "right":case "bottom":f[a](q-f[this.measureAttrName]);break;default:f[a](0)}return q},updateParent:function(d,
f){this.parent[this.parentSetterName](f)}});u.WrappingLayout=new v("WrappingLayout",b,{initNode:function(d,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(d,f)},
setTargetAttrName:function(d){if(this.targetAttrName!==d){const f="y"===d,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";a&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(q));
this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(d);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){h(this,"spacing",d)},setOutset:function(d){h(this,"outset",d)},setLineSpacing:function(d){h(this,"lineSpacing",d)},setLineInset:function(d){h(this,
"lineInset",d)},setLineOutset:function(d){h(this,"lineOutset",d)},startMonitoringParent:function(d){this.attachTo(this.parent,"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update",this.otherMeasureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.detachFrom(d,"update",this.otherMeasureAttrName);
this.callSuper(d)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(d,f,a,q){d=f[this.measureAttrName];const n=f[this.otherMeasureAttrName];q+d>this.parentSizeLessOutset||"break"===f.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);f[this.otherSetterName](this.linePos+
(n-f[this.otherMeasureAttrBaseName])/2);f[a](q+(d-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+d+this.outset);return q+d+this.spacing},updateParent:function(d,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});u.createFixedThresholdCounter(l,1,"locked")})(myt);
(u=>{const x=Math.round,w=u.DomElementProxy,v=u.Geometry.rectContainsPoint,k=(a,q)=>{const n=u.global.focus.focusedView,r=a.getIDE();if(n===a||n?.isDescendantOf(a))n._ignoreFocus=!0;const {scrollTop:t,scrollLeft:z}=r;q();n&&(n._ignoreFocus=!1,n.focus(!0));r.scrollTop=t;r.scrollLeft=z},e=(a,q,n)=>{const r=a.getODE(),t=r.parentNode;if(t){const z=()=>{const D=r.nextElementSibling;t.removeChild(r);q();t.insertBefore(r,D)};n?k(a,z):z()}else q()},c=(a,q,n,r)=>{if(q&&"object"===typeof q){if(r){var t=a.getLeastCommonAncestor(q)?.getIDE();
if(t){const z=w.getZIndexRelativeToAncestor,D=n?-1:1;r=D*z(a.getODE(),t);t=D*z(q.getODE(),t);if(r<t)return!0;if(t<r)return!1}}a=a.getODE().compareDocumentPosition(q.getODE());return n?2===a||10===a:4===a||20===a}return!1},h=a=>{a=a.getAncestors();let q=a.length,n=1,r=1;for(;q;){const t=a[--q];n*=t.scaleX||1;r*=t.scaleY||1;t.__effectiveScaleX=n;t.__effectiveScaleY=r}return{scaleX:n,scaleY:r}},l=(a,q,n)=>{const r=a.getODE();if(v(q,n,0,0,r.offsetWidth*a.__effectiveScaleX,r.offsetHeight*a.__effectiveScaleY)){if(a=
a.parent){const t=a.getIDE();return l(a,q+(r.offsetLeft-t.scrollLeft)*a.__effectiveScaleX,n+(r.offsetTop-t.scrollTop)*a.__effectiveScaleY)}return!0}return!1},b=a=>{switch(a.align){case "center":a.releaseConstraint("__doAlignCenter");break;case "right":a.releaseConstraint("__doAlignRight")}},g=a=>{const q=a.parent;if(q)switch(a.align){case "center":a.constrain("__doAlignCenter",[a,"width",a,"alignOffset",q,"width"]);break;case "right":a.constrain("__doAlignRight",[a,"width",a,"alignOffset",q,"width"]);
break;case "left":a.setX(a.alignOffset||0)}},d=a=>{switch(a.valign){case "middle":a.releaseConstraint("__doValignMiddle");break;case "bottom":a.releaseConstraint("__doValignBottom")}},f=a=>{const q=a.parent;if(q)switch(a.valign){case "middle":a.constrain("__doValignMiddle",[a,"height",a,"valignOffset",q,"height"]);break;case "bottom":a.constrain("__doValignBottom",[a,"height",a,"valignOffset",q,"height"]);break;case "top":a.setY(a.valignOffset||0)}};u.View=new JS.Class("View",u.Node,{include:[w,u.DomObservable,
u.DomObserver,u.ScrollObservable,u.FocusObservable,u.KeyObservable,u.MouseObservable],extend:{retainFocusDuringDomUpdate:k,doWhileRemovedFromDom:e},initNode:function(a,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(a));const n=this.getODS();n.left=n.top="0px";this.callSuper(a,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(a){a=document.createElement(this.tagName??
"div");a.style.position="absolute";let q;a.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return a},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(a){this.parent!==a&&(this.inited&&(b(this),d(this)),this.callSuper(a),this.align&&g(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const a=[],q=this.getIDE().children,n=q.length;for(let r=0;r<n;){const t=q[r++].model;t?.parent===this&&a.push(t)}return a},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(a=>a!==this)},setFocusTrap:function(a){this.focusTrap=a},setFocusCage:function(a){this.focusCage=a},setMaskFocus:function(a){this.maskFocus=a},setLayoutHint:function(a){this.layoutHint=a},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(a){if(this.ignoreLayout!==a){var q=this.inited&&this.parent;let n;if(a){if(q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].removeSubview(this);this.ignoreLayout=a}else if(this.ignoreLayout=a,q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].addSubview(this)}},setDomClass:function(a){this.domClass!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domClass",a))},setDomId:function(a){this.domId!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domId",a))},setAlignOffset:function(a){this.alignOffset!==
a&&(this.alignOffset=a,this.inited&&this.fireEvent("alignOffset",a),this.parent&&"left"===this.align&&this.setX(a))},setAlign:function(a){this.align!==a&&(this.inited&&b(this),this.align=a,this.inited&&(this.fireEvent("align",a),g(this)))},__doAlignCenter:function(a){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(a){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(a){this.valignOffset!==a&&(this.valignOffset=a,this.inited&&
this.fireEvent("valignOffset",a),this.parent&&"top"===this.valign&&this.setY(a))},setValign:function(a){this.valign!==a&&(this.inited&&d(this),this.valign=a,this.inited&&(this.fireEvent("valign",a),f(this)))},__doValignMiddle:function(a){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(a){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(a){this.x!==a&&(this.x=a,this.visible&&(this.getODS().left=a+"px"),this.inited&&this.fireEvent("x",
a))},setY:function(a){this.y!==a&&(this.y=a,this.visible&&(this.getODS().top=a+"px"),this.inited&&this.fireEvent("y",a))},setWidth:function(a){0>a&&(a=0);this.width!==a&&(this.width=a,this.getODS().width=a+"px",this.inited&&(this.__updateBounds(a,this.height),this.fireEvent("width",a)))},setHeight:function(a){0>a&&(a=0);this.height!==a&&(this.height=a,this.getODS().height=a+"px",this.inited&&(this.__updateBounds(this.width,a),this.fireEvent("height",a)))},setDomMinWidth:function(a,q){(q?this.getIDS():
this.getODS()).minWidth=null!=a?a+"px":null},getDomMinWidth:function(a){a=(a?this.getIDS():this.getODS()).minWidth;return null!=a?Number.parseInt(a):null},setDomMinHeight:function(a,q){(q?this.getIDS():this.getODS()).minHeight=null!=a?a+"px":null},getDomMinHeight:function(a){a=(a?this.getIDS():this.getODS()).minHeight;return null!=a?Number.parseInt(a):null},setTextColor:function(a){this.textColor!==a&&(this.textColor=a,this.getODS().color=a||"inherit",this.inited&&this.fireEvent("textColor",a))},
setBgColor:function(a){this.bgColor!==a&&(this.getODS().backgroundColor=this.bgColor=a,this.inited&&this.fireEvent("bgColor",a))},isColorAttr:a=>"bgColor"===a||"textColor"===a,setOpacity:function(a){this.opacity!==a&&(this.getODS().opacity=this.opacity=a,this.inited&&this.fireEvent("opacity",a))},setOverflow:function(a){const q=this.overflow;if(q!==a){this.overflow=a;const n=this.getIDS();if("autox"===a)n.overflowX="auto",n.overflowY="hidden";else if("autoy"===a)n.overflowY="auto",n.overflowX="hidden";
else{if("autox"===q||"autoy"===q)n.overflowX=n.overflowY=null;n.overflow=a||"visible"}this.inited&&this.fireEvent("overflow",a)}},setVisible:function(a){if(this.visible!==a){this.visible=a;const q=this.getODS();q.visibility=a?"inherit":"hidden";q.left=a?this.x+"px":"-100000px";q.top=a?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",a)}},setPointerEvents:function(a){this.pointerEvents!==a&&(this.pointerEvents=a,this.getODS().pointerEvents=a||"auto",this.inited&&this.fireEvent("pointerEvents",
a))},setCursor:function(a){this.cursor!==a&&(this.cursor=a,this.getODS().cursor=a||"auto",this.inited&&this.fireEvent("cursor",a))},__updateBounds:function(a,q){this.boundsWidth!==a&&this.fireEvent("boundsWidth",this.boundsWidth=a);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(a){const [q,n,r]=a??[];this.setOutlineWidth(q);this.setOutlineStyle(n);this.setOutlineColor(r)},setOutlineWidth:function(a){this.getODS().outlineWidth=(this.outlineWidth=a||0)+
"px"},setOutlineStyle:function(a){this.getODS().outlineStyle=this.outlineStyle=a||"none"},setOutlineColor:function(a){this.getODS().outlineColor=this.outlineColor=a||"#000"},setBorder:function(a){const [q,n,r]=a??[];this.setBorderWidth(q);this.setBorderStyle(n);this.setBorderColor(r)},setBorderWidth:function(a){this.getODS().borderWidth=(this.borderWidth=a||0)+"px"},setBorderStyle:function(a){this.getODS().borderStyle=this.borderStyle=a||"none"},setBorderColor:function(a){this.getODS().borderColor=
this.borderColor=a||"#000"},setRoundedCorners:function(a){this.getODS().borderRadius=a+"px"},setRoundedTopLeftCorner:function(a){this.getODS().borderTopLeftRadius=a+"px"},setRoundedTopRightCorner:function(a){this.getODS().borderTopRightRadius=a+"px"},setRoundedBottomLeftCorner:function(a){this.getODS().borderBottomLeftRadius=a+"px"},setRoundedBottomRightCorner:function(a){this.getODS().borderBottomRightRadius=a+"px"},setBoxShadow:function(a){const [q,n,r,t]=a??[];this.getODS().boxShadow=a?(q||0)+
"px "+(n||0)+"px "+(r||7)+"px "+(t||"#000"):"none"},setGradient:function(a){const q=this.getODS();if(a){let r=a[0];"linear"===r||"radial"===r?a.shift():r="linear";let t=a[0];if("radial"===r){void 0===t?t="closest-side":a.shift();var n=a[0];if(void 0===n)n="circle";else{switch(n){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",n),n="circle"}a.shift()}let z=a[0];void 0===z?z="center":(z=z.replaceAll("middle","center"),a.shift());t=n+" "+t+" at "+z}else"number"===
typeof t?(t+="deg",a.shift()):t?(t="to "+t,a.shift()):t="0deg";n=z=>{a.push(z&&"inherit"!==z?z:"transparent")};2>a.length&&n(this.textColor);2>a.length&&n(this.bgColor);q.background=r+"-gradient("+t+","+a.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(a){this.tooltip!==a&&(this.tooltip=this.getODE().title=a,this.inited&&this.fireEvent("tooltip",a))},isVisible:function(){return null==this.searchAncestorsOrSelf(a=>!a.visible)},getFocusTrap:function(a){return this.searchAncestorsOrSelf(q=>
q.focusCage||q.focusTrap&&!a)},subnodeAdded:function(a){a instanceof u.View?(this.getIDE().appendChild(a.getODE()),this.getSubviews().push(a),this.fireEvent("subviewAdded",a),this.subviewAdded(a)):a instanceof u.Layout&&(this.getLayouts().push(a),this.fireEvent("layoutAdded",a),this.layoutAdded(a))},subnodeRemoved:function(a){let q;a instanceof u.View?(q=this.getSubviewIndex(a),-1<q&&(this.fireEvent("subviewRemoved",a),a.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(a))):a instanceof
u.Layout&&(q=this.getLayoutIndex(a),-1<q&&(this.fireEvent("layoutRemoved",a),this.layouts.splice(q,1),this.layoutRemoved(a)))},hasSubview:function(a){return this.getSubviews().includes(a)},getSubviewIndex:function(a){return this.getSubviews().indexOf(a)},subviewAdded:a=>{},subviewRemoved:a=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(a){const q=
this.getSubviews();for(let n=q.length;0<n;){const r=q[--n];a&&!a(r)||r.destroy()}},hasLayout:function(a){return this.getLayouts().includes(a)},getLayoutIndex:function(a){return this.getLayouts().indexOf(a)},layoutAdded:a=>{},layoutRemoved:a=>{},isBehind:function(a,q){return c(this,a,!1,q)},isInFrontOf:function(a,q){return c(this,a,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(a,q){this.parent.sendSubviewBehind(this,
a,q)},sendInFrontOf:function(a,q){this.parent.sendSubviewInFrontOf(this,a,q)},doSubviewsReorderedInDom:a=>{},bringSubviewToFront:function(a){const q=this;if(a?.parent===q){const n=q.getIDE(),r=a.getODE();r!==n.lastElementChild&&k(a,()=>{n.appendChild(r);q.doSubviewsReorderedInDom(a)})}},sendSubviewToBack:function(a){const q=this;if(a?.parent===q){const n=q.getIDE(),r=n.firstElementChild,t=a.getODE();t!==r&&k(a,()=>{n.insertBefore(t,r);q.doSubviewsReorderedInDom(a)})}},sendSubviewBehind:function(a,
q,n){n?.moveSubviewBefore(a,q);const r=this;if(a?.parent===r&&q?.parent===r){const t=a.getODE(),z=q.getODE();if(t!==z.previousElementSibling){const D=r.getIDE();k(a,()=>{D.insertBefore(t,z);r.doSubviewsReorderedInDom(a)})}}n?.update()},sendSubviewInFrontOf:function(a,q,n){n?.moveSubviewAfter(a,q);const r=this;if(a?.parent===r&&q?.parent===r){const t=a.getODE(),z=q.getODE().nextElementSibling;if(t!==z){const D=r.getIDE();k(a,()=>{D.insertBefore(t,z);r.doSubviewsReorderedInDom(a)})}}n?.update()},sortSubviews:function(a){const q=
this,n=q.getSubviews();u.isNotSorted(n,a)&&(n.sort(a),e(q,()=>{const r=document.createDocumentFragment(),t=n.length;for(let z=0;t>z;)r.appendChild(n[z++].getODE());q.getIDE().appendChild(r)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(a,q,n){const r=this.getODE();if(!r)return!1;const {x:t,y:z}=w.getRelativePosition(r,n);return v(a,q,t,z,this.width,this.height)},isPointVisible:function(a,q){const {x:n,y:r}=this.getPagePosition(!0);h(this);return l(this,a-n,q-r)},intersectsWithSibling:function(a){return a.parent===
this.parent&&!(a.x>this.x+this.width||a.x+a.width<this.x||a.y>this.y+this.height||a.y+a.height<this.y)},getEffectiveScale:function(){return h(this)},getEffectiveScaleX:function(){return h(this).scaleX},getEffectiveScaleY:function(){return h(this).scaleY}})})(myt);
(u=>{const x=(v,k,e)=>{const c=w(v,k);v.getODS().transform=c+(0===c.length?"":" ")+k+"("+e+")"},w=(v,k)=>{v=v.getODS();var e=v.transform;if(!e||0===e.length)return"";e=e.split(" ");let c=e.length;for(;c;)if(e[--c].startsWith(k)){e.splice(c,1);break}return v.transform=e.join(" ")};u.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(v){this.transformOrigin!==v&&(this.transformOrigin=v,this.getODS().transformOrigin=v||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",v)))},setRotation:function(v){this.rotation!==v&&(this.rotation=v,x(this,"rotate",(v||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",v)))},setScale:function(v){const k=this.scaleX!==v,e=this.scaleY!==v;if(k){var c=this.scaleX=v;null==c?w(this,"scaleX"):x(this,"scaleX",c||1)}e&&(c=this.scaleY=v,null==c?w(this,"scaleY"):x(this,"scaleY",c||1));this.inited&&((k||e)&&this.__updateBounds(this.width,this.height),
k&&this.fireEvent("scaleX",v),e&&this.fireEvent("scaleY",v))},setScaleX:function(v){if(this.scaleX!==v){var k=this.scaleX=v;null==k?w(this,"scaleX"):x(this,"scaleX",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",v))}},setScaleY:function(v){if(this.scaleY!==v){var k=this.scaleY=v;null==k?w(this,"scaleY"):x(this,"scaleY",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",v))}},setSkewX:function(v){this.skewX!==v&&(this.skewX=
v,x(this,"skewX",v||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",v)))},setSkewY:function(v){this.skewY!==v&&(this.skewY=v,x(this,"skewY",v||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",v)))},__updateBounds:function(v,k){const {rotation:e,scaleX:c,scaleY:h}=this,l=(null==c||1===c)&&(null==h||1===h);if(!l||null!=e&&0!==e&&180!==e)!l||90!==e&&270!==e?{width:v,height:k}=this.getODE().getBoundingClientRect():{width:k,height:v}=
this;this.callSuper(v,k)}})})(myt);
(u=>{const x=JS.Module,w=(c,h)=>{if("auto"===h)c.__hasSetWidth=!1,c.getODS().width="auto",c.sizeViewToDom();else return c.__hasSetWidth=!0},v=(c,h)=>{if("auto"===h)c.__hasSetHeight=!1,c.getODS().height="auto",c.sizeViewToDom();else return c.__hasSetHeight=!0},k=c=>{if(!c.__hasSetWidth){const h=c.getODE().offsetWidth/c.getEffectiveScaleX();c.width!==h&&(c.width=h,c.inited&&c.__updateBounds(h,c.height),c.fireEvent("width",h))}},e=c=>{if(!c.__hasSetHeight){const h=c.getODE().offsetHeight/c.getEffectiveScaleY();
c.height!==h&&(c.height=h,c.inited&&c.__updateBounds(c.width,h),c.fireEvent("height",h))}};u.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:k,sizeHeight:e},initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c){w(this,c)&&this.callSuper(c)},setHeight:function(c){v(this,c)&&this.callSuper(c)},sizeViewToDom:function(){k(this);e(this)}});u.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c){w(this,
c)&&this.callSuper(c)},sizeViewToDom:function(){k(this)}});u.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setHeight:function(c){v(this,c)&&this.callSuper(c)},sizeViewToDom:function(){e(this)}})})(myt);
(u=>{const x=JS.Module,w=(c,h,l,b)=>{c[l]!==h&&(c[l]=h,c.getIDS()[l]=h||b||"inherit",c.inited&&(c.fireEvent(l,h),c.sizeViewToDom()))};u.TextSupport=new x("TextSupport",{setWidth:function(c){this.callSuper(c);"auto"!==c&&(c=this.whiteSpace,"normal"!==c&&"pre-line"!==c&&"pre-wrap"!==c&&"break-spaces"!==c||this.sizeViewToDom())},setText:function(c){c||="";c=this.valueFromEvent(c);this.text!==c&&(this.getIDE().innerHTML=this.text=c,this.inited&&(this.fireEvent("text",c),this.sizeViewToDom()))},setTextOverflow:function(c){this.textOverflow!==
c&&(this.textOverflow=c,this.getIDS().textOverflow=c||"inherit",this.inited&&this.fireEvent("textOverflow",c))},setTextAlign:function(c){this.textAlign!==c&&(this.textAlign=c,this.getIDS().textAlign=c||"inherit",this.inited&&this.fireEvent("textAlign",c))},setWhiteSpace:function(c){w(this,c,"whiteSpace")},setWordWrap:function(c){w(this,c,"wordWrap","normal")},setTextIndent:function(c){w(this,c,"textIndent")},setTextTransform:function(c){w(this,c,"textTransform")},setTextDecoration:function(c){w(this,
c,"textDecoration")},setLineHeight:function(c){w(this,c,"lineHeight")},setLetterSpacing:function(c){w(this,c,"letterSpacing")},setWordSpacing:function(c){w(this,c,"wordSpacing")},setFontFamily:function(c){w(this,c,"fontFamily")},setFontStyle:function(c){w(this,c,"fontStyle")},setFontVariant:function(c){w(this,c,"fontVariant")},setFontWeight:function(c){w(this,c,"fontWeight")},setFontSize:function(c){w(this,c,"fontSize")},setUserUnselectable:function(c){this.userUnselectable!==c&&(this.userUnselectable=
c,this[c?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(c?"default":"text"),this.inited&&this.fireEvent("userUnselectable",c))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(c,h,l,b){this.getIDS().textShadow=(c||0)+"px "+(h||0)+"px "+(null!=l?l:2)+"px "+(b||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const v=(c,h,l)=>{const b="padding"+l;h=Math.max(h,0);c[b]!==h&&(c[b]=h,c.getIDS()[b]=h+"px",c.fireEvent(b,h),"Left"===l||"Right"===l?k(c):e(c))},k=c=>{c.__hasSetWidth&&(c.getODS().width=c.width-(c.paddingLeft||0)-(c.paddingRight||0)+"px",c.inited&&c.sizeViewToDom())},e=c=>{c.__hasSetHeight&&(c.getODS().height=c.height-(c.paddingTop||0)-(c.paddingBottom||0)+"px",c.inited&&c.sizeViewToDom())};u.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(c){this.callSuper(c);k(this)},setHeight:function(c){this.callSuper(c);
e(this)},setPadding:function(c){let h,l,b;c||=0;"object"===typeof c?(h=c.top||0,l=c.right||0,b=c.bottom||0,c=c.left||0):h=l=b=c;this.setPaddingTop(h);this.setPaddingRight(l);this.setPaddingBottom(b);this.setPaddingLeft(c)},setPaddingTop:function(c){v(this,c,"Top")},setPaddingRight:function(c){v(this,c,"Right")},setPaddingBottom:function(c){v(this,c,"Bottom")},setPaddingLeft:function(c){v(this,c,"Left")}})})(myt);
(u=>{const x={},w={},v=k=>{const e=k.imageUrl;if(k.calculateNaturalSize&&e){var c=x[e];if(c)k.setNaturalWidth(c.width),k.setNaturalHeight(c.height);else{c=w[e];if(!c){w[e]=c=[];const h=new Image;h.onerror=l=>{if(l=w[e]){let b=l.length;for(;b;)l[--b].setImageLoadingError(!0);l.length=0;delete w[e]}};h.onload=()=>{const l=h.width,b=h.height,g=w[e];if(g){let d=g.length;for(;d;){const f=g[--d];f.imageUrl===e&&(f.setNaturalWidth(l),f.setNaturalHeight(b))}g.length=0;delete w[e]}x[e]={width:l,height:b}};
h.src=e}c.push(k)}}};u.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:k=>x[k]},initNode:function(k,e){e.imageRepeat??(e.imageRepeat="no-repeat");e.imageAttachment??(e.imageAttachment="scroll");this.callSuper(k,e)},setImageUrl:function(k){this.imageUrl!==k&&(this.imageUrl=k,this.getIDS().backgroundImage=k?'url("'+k+'")':"none",this.inited&&(this.fireEvent("imageUrl",k),this.setNaturalWidth(),this.setNaturalHeight(),!k&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
v(this))},setImageLoadingError:function(k){this.set("imageLoadingError",k,!0)},setImageSize:function(k){this.imageSize!==k&&(this.imageSize=k,this.getIDS().backgroundSize=k||"auto",this.inited&&this.fireEvent("imageSize",k))},setImageRepeat:function(k){this.imageRepeat!==k&&(this.getIDS().backgroundRepeat=this.imageRepeat=k,this.inited&&this.fireEvent("imageRepeat",k))},setImagePosition:function(k){this.imagePosition!==k&&(this.getIDS().backgroundPosition=this.imagePosition=k,this.inited&&this.fireEvent("imagePosition",
k))},setImageAttachment:function(k){this.imageAttachment!==k&&(this.getIDS().backgroundAttachment=this.imageAttachment=k,this.inited&&this.fireEvent("imageAttachment",k))},setCalculateNaturalSize:function(k){this.calculateNaturalSize!==k&&(this.calculateNaturalSize=k,this.inited&&this.fireEvent("calculateNaturalSize",k),v(this))},setNaturalWidth:function(k){this.naturalWidth!==k&&(this.naturalWidth=k,this.inited&&this.fireEvent("naturalWidth",k),this.useNaturalSize&&k&&this.setWidth(k))},setNaturalHeight:function(k){this.naturalHeight!==
k&&(this.naturalHeight=k,this.inited&&this.fireEvent("naturalHeight",k),this.useNaturalSize&&k&&this.setHeight(k))},setUseNaturalSize:function(k){this.useNaturalSize!==k&&(this.useNaturalSize=k,this.inited&&this.fireEvent("useNaturalSize",k),k&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),k&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToDom:v}=u;u.Flexbox=new x("Flexbox",w,{include:[u.FlexboxSupport]});u.Frame=new x("Frame",w,{initNode:function(k,e){e.tagName??(e.tagName="iframe");this.callSuper(k,e);k=u.global.mouse;this.attachToDom(k,"__doMouseDown","mousedown",!0);this.attachToDom(k,"__doMouseUp","mouseup",!0)},createOurDomElement:function(k){k=this.callSuper(k);(Array.isArray(k)?k[1]:k).style.border="0px";return k},setSrc:function(k){this.src!==k&&(this.src=this.getIDE().src=k,this.inited&&
this.fireEvent("src",k))},__doMouseDown:function(k){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(k){this.setPointerEvents(this.__restorePointerEvents);return!0}});u.Markup=new x("Markup",w,{include:[v],setHtml:function(k){this.html!==k&&(this.getIDE().innerHTML=this.html=k,this.inited&&(this.fireEvent("html",k),this.sizeViewToDom()))}});u.Text=new x("Text",w,{include:[v,u.TextSupport],initNode:function(k,e){e.whiteSpace??(e.whiteSpace=
"nowrap");e.userUnselectable??(e.userUnselectable=!0);this.callSuper(k,e)},measureNoWrapWidth:function(){const k=this.__hasSetWidth,e=this.width;if(!k&&"nowrap"===this.whiteSpace)return e;const c=this.getIDS(),h=c.whiteSpace;k&&(c.width="auto");c.whiteSpace="nowrap";const l=this.getODE().getBoundingClientRect().width;c.whiteSpace=h;k&&(c.width=e);return l}});u.PaddedText=new x("PaddedText",u.Text,{include:[u.PaddedTextSupport]});u.Image=new x("Image",w,{include:[u.ImageSupport],initNode:function(k,
e){e.useNaturalSize??(e.useNaturalSize=!0);this.callSuper(k,e)}});u.BackView=new x("BackView",w,{sendSubviewToBack:function(k){if(k.parent===this){const e=this.getIDE(),c=e.childNodes[1];k=k.getODE();k!==c&&(k=e.removeChild(k))&&e.insertBefore(k,c)}}})})(myt);
(u=>{const x=Math.round,w=c=>{c.parent&&0<=c.percentOfParentWidth&&c.syncTo(c.parent,"__doPOPW","width")},v=c=>{0<=c.percentOfParentWidth&&c.detachFrom(c.parent,"__doPOPW","width")},k=c=>{c.parent&&0<=c.percentOfParentHeight&&c.syncTo(c.parent,"__doPOPH","height")},e=c=>{0<=c.percentOfParentHeight&&c.detachFrom(c.parent,"__doPOPH","height")};u.SizeToParent=new JS.Module("SizeToParent",{setParent:function(c){this.parent!==c&&(this.inited&&(v(this),e(this)),this.callSuper(c),w(this),k(this))},setPercentOfParentWidthOffset:function(c){this.percentOfParentWidthOffset!==
c&&(this.percentOfParentWidthOffset=c,this.inited&&(this.fireEvent("percentOfParentWidthOffset",c),this.__doPOPW()))},setPercentOfParentWidth:function(c){this.percentOfParentWidth!==c&&(this.inited&&v(this),this.percentOfParentWidth=c,this.inited&&(this.fireEvent("percentOfParentWidth",c),w(this)))},setPercentOfParentHeightOffset:function(c){this.percentOfParentHeightOffset!==c&&(this.percentOfParentHeightOffset=c,this.inited&&(this.fireEvent("percentOfParentHeightOffset",c),this.__doPOPH()))},setPercentOfParentHeight:function(c){this.percentOfParentHeight!==
c&&(this.inited&&e(this),this.percentOfParentHeight=c,this.inited&&(this.fireEvent("percentOfParentHeight",c),k(this)))},__doPOPW:function(c){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(c){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(u=>{let x;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[u.Observable],initialize:function(){u.global.register("roots",x=this)},getRoots:()=>w,addRoot:v=>{w.push(v);x.fireEvent("rootAdded",v)},removeRoot:v=>{const k=w.indexOf(v);-1<k&&(w.splice(k,1),x.fireEvent("rootRemoved",v))}})})(myt);
(u=>{const {addEventListener:x,removeEventListener:w,global:{roots:v}}=u,k=u.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:e=>{const c=e.getIDE();e=e.__captureDrop=h=>{h.preventDefault()};x(c,"drop",e);x(c,"dragover",e)},teardownCaptureDrop:e=>{const c=e.getIDE();e=e.__captureDrop;w(c,"drop",e);w(c,"dragover",e)}},initNode:function(e,c){this.callSuper(e,c);this.setZIndex(0);this.addDomClass("myt");v.addRoot(this);k.setupCaptureDrop(this)},createOurDomElement:function(e){e||(e=this.callSuper(e),
u.getElement().appendChild(e));return e},destroy:function(){k.teardownCaptureDrop(this);v.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(e){this.keepDomElementWhenDestroyed=e},setParent:e=>{},bringToFront:function(){var e=this.getIDE();const c=e.parentNode;e!==c.lastChild&&(e=c.removeChild(e))&&c.appendChild(e)},sendToBack:function(){var e=this.getIDE();const c=e.parentNode;e!==c.firstChild&&(e=c.removeChild(e))&&
c.insertBefore(e,c.firstChild)},sendBehind:function(e,c){c=this.getIDE();e=e.getIDE();const h=c.parentNode;e.parentNode===h&&(c=h.removeChild(c))&&h.insertBefore(c,e)},sendInFrontOf:function(e,c){e.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(e,c),e.sendBehind(this,c))}})})(myt);
(u=>{let x,w,v=!1;const {requestAnimationFrame:k,cancelAnimationFrame:e}=window,c={},h=b=>{x=k(h);b=Math.round(b);-1!==w&&(c.delta=b-w,c.time=b,l.fireEvent("idle",c));w=b},l=new JS.Singleton("GlobalIdle",{include:[u.Observable],initialize:function(){u.global.register("idle",this)},attachObserver:(b,g,d)=>{b=l.callSuper(b,g,d);!v&&l.hasObservers("idle")&&(v=!0,w=-1,x=k(h));return b},detachObserver:(b,g,d)=>{b=l.callSuper(b,g,d);v&&!l.hasObservers("idle")&&(e(x),v=!1);return b}})})(myt);
(u=>{let x,w,v;const k=u.global,e=k.idle,c=window.document;new JS.Singleton("GlobalWindowResize",{include:[u.Observable,u.Observer],initialize:function(){x=this;x.attachTo(e,"__setup","idle");k.register("windowResize",x)},__setup:h=>{const l=c.body;l&&(x.detachFrom(e,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:w=l.clientWidth,h:v=l.clientHeight})})).observe(l))},getWidth:()=>w??=c.body.clientWidth,getHeight:()=>v??=c.body.clientHeight})})(myt);
(u=>{const x=JS.Module,w=u.global.windowResize,v=Math.max,k=c=>{const h=c.resizeDimension;"both"!==h&&"width"!==h||c.setWidth(v(c.minWidth,w.getWidth()));"both"!==h&&"height"!==h||c.setHeight(v(c.minHeight,w.getHeight()))},e=u.SizeToWindow=new x("SizeToWindow",{include:[u.RootView],initNode:function(c,h){this.minWidth=this.minHeight=0;h.resizeDimension??(h.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(c,h)},setResizeDimension:function(c){this.resizeDimension!==c&&
(this.resizeDimension=c,k(this))},setMinWidth:function(c){this.minWidth!==c&&(this.minWidth=c,k(this))},setMinHeight:function(c){this.minHeight!==c&&(this.minHeight=c,k(this))},__hndlResize:function(c){k(this)}});u.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[e],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="width");this.callSuper(c,h)}});u.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[e],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="height");this.callSuper(c,
h)}})})(myt);
(u=>{const x=Math,{min:w,max:v}=x,k=f=>w(255,v(0,x.round(f))),e=f=>k(f).toString(16).padStart(2,"0"),c=(f,a,q,n)=>(n?"#":"")+e(f)+e(a)+e(q),h=f=>new d((16711680&f)>>16,(65280&f)>>8,255&f),l=(f,a)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*a/100;else return 0;f=w(a,v(0,f))/a;return 1E-6>x.abs(1-f)?1:f},b=(f,a,q)=>{f=l(f,255);a=l(a,255);q=l(q,255);const n=v(f,a,q),r=n-w(f,a,q);if(0===r)return{h:0,s:0,v:n};let t;switch(n){case f:t=(a-q)/r+(a<q?6:0);break;case a:t=(q-f)/r+
2;break;case q:t=(f-a)/r+4}return{h:60*t,s:0===n?0:r/n,v:n}},g=(f,a,q)=>{f=6*l(f,360);a=l(a,100);q=l(q,100);var n=x.floor(f);const r=f-n;f=q*(1-a);const t=q*(1-r*a);a=q*(1-(1-r)*a);n%=6;return{red:255*[q,t,f,f,a,q][n],green:255*[a,q,q,t,f,f][n],blue:255*[f,f,a,q,q,t][n]}},d=u.Color=new JS.Class("Color",{extend:{toUnitRange:l,rgbToHsv:b,hsvToRgb:g,toHex:e,rgbToHex:c,cleanChannelValue:k,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:h,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [a,q,n]=f;return new d(parseInt(a+a,16),parseInt(q+q,16),parseInt(n+n,16));case 6:return h(parseInt(f,16));default:return h(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,a,q)=>{const {red:n,green:r,blue:t}=g(f,a,q);return new d(n,r,t)},getLighterColor:(f,a)=>h(f).isLighterThan(h(a))?f:a,makeColorNumberFromChannels:(f,a,q)=>(k(f)<<16)+(k(a)<<8)+k(q),makeBlendedColor:(f,a,
q)=>new d(f.red+q*(a.red-f.red),f.green+q*(a.green-f.green),f.blue+q*(a.blue-f.blue))},initialize:function(f,a,q){this.setRed(f);this.setGreen(a);this.setBlue(q)},setRed:function(f){this.red=k(f)},setGreen:function(f){this.green=k(f)},setBlue:function(f){this.blue=k(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return c(this.red,this.green,this.blue,!0)},getHSV:function(){return b(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new d(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(d)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(u=>{const {max:x,sin:w,cos:v,pow:k,sqrt:e,PI:c}=Math,h=2*c,l=c/2,b=u.global.idle,g=u.Color.makeColorFromHexString,d={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-v(n*l)+1,outSine:n=>w(n*l),inOutSine:n=>-(v(n*c)-1)/2,inCirc:n=>-(e(1-n*n)-1),outCirc:n=>e(1- --n*n),inOutCirc:n=>1>(n*=2)?-(e(1-n*n)-1)/2:(e(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:k(2,10*(n-1)),outExpo:n=>1===n?1:-k(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?k(2,10*(n-1))/2:(-k(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(k(2,10*--n)*w((1*n-.075)*h/.3)),outElastic:n=>0===n||1===n?n:k(2,-10*n)*w((1*n-.075)*h/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(k(2,10*--n)*w((1*n-.1125)*h/.45))/2:k(2,
-10*--n)*w((1*n-.1125)*h/.45)/2+1,inBack:(n,r=1.70158)=>(n/=1)*n*((r+1)*n-r),outBack:(n,r=1.70158)=>(n=n/1-1)*n*((r+1)*n+r)+1,inOutBack:(n,r=1.70158)=>1>(n*=2)?n*n*(((r*=1.525)+1)*n-r)/2:((n-=2)*n*(((r*=1.525)+1)*n+r)+2)/2,inBounce:n=>1-d.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?d.inBounce(n)/2:(d.outBounce(n-1)+1)/2},f=d.inOutQuad,a=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},q=(n,r)=>{const {running:t,paused:z,reverse:D,duration:G,repeat:L,__prog:J,easingFunction:N,callback:Q}=n;if(t&&!z){D&&(r*=-1);r=J+r;let E=0;r>G?(E=r-G,r=G,++n.__loopCnt===L&&(E=0)):0>r&&(E=-r,r=0,0>--n.__loopCnt&&0<L&&(E=0));var m=n.target??n.parent;if(m){const {relative:I,attribute:K,__isColorAnim:R,__loopCnt:M,to:T}=n;var p=x(0,r/G),y=x(0,J/G);null==n.from&&(n.__tmpFrom=!0,n.from=I?R?"#000":0:m.get(K));y=N(p)-(I?N(y):0);var A=n.from,C=I?m.get(K):
A;p=m.set;if(R){A=g(A);const ea=g(T);C=I?g(C):A;C.setRed(C.red+(ea.red-A.red)*y);C.setGreen(C.green+(ea.green-A.green)*y);C.setBlue(C.blue+(ea.blue-A.blue)*y);y=C.getHtmlHexString()}else y=C+(T-A)*y;p.call(m,K,y);!D&&M===L||D&&0>M&&0<L?(n.setRunning(!1),Q?.call(n,!0)):0<E?(n.fireEvent("repeat",M),n.__prog=D?G:0,q(n,E)):n.__prog=r}else console.log("No target for animator",n),n.setRunning(!1),Q?.call(n,!1)}};u.Animator=new JS.Class("Animator",u.Node,{include:[u.Reusable],extend:{easings:d},initNode:function(n,
r){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=f;this.callSuper(n,r);a(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const r=this.target??this.parent;this.__isColorAnim=r&&"function"===typeof r.isColorAttr?r.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),a(this);this[n?"attachTo":"detachFrom"](b,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](b,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&a(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&a(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&a(this)},setEasingFunction:function(n){"string"===typeof n&&(n=d[n]);this.set("easingFunction",n??f,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,r){const t=this,z=t.callback;z&&!r?t.setCallback(D=>{z.call(t,D);n.call(t,D)}):t.setCallback(n)},reset:function(n){a(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},__updateAnim:function(n){q(this,
n.value.delta)}})})(myt);
(u=>{const x=Array.isArray,w=e=>{e.__additionalArgs=[];e.__pendingTransition="";e.__transDestinationState="";e.__transStage="leaveState"},v=(e,c)=>{if(e.__transInProgress){var h=e.__deferredTransitions;h??=e.__deferredTransitions=[];h.unshift(c)}else{e.__transInProgress=!0;h=c.shift();const l=c.shift();if(e.__pendingTransition)return 3;if(e.isFinished())return e.__transInProgress=!1,5;let b=e.map[e.current][l];b??=e.map["*"][l];if(b)return e.__pendingTransition=l,e.__transDestinationState=b,e.__additionalArgs=
c,e.resumeTransition(h);e.__transInProgress=!1;return 5}},k=e=>{e.__transInProgress=!1;const c=e.__deferredTransitions;if(c)for(;0<c.length;)v(e,c.pop())};u.StateMachine=new JS.Class("StateMachine",u.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(e,c){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(e,c)},setInitialState:function(e){if(""===this.current){if(x(e)){var c=e;e=c.shift()}else c=[];this.current=
this.initial=e;this.doEnterState("","",e,c);c={name:"",from:"",to:e,args:c};this.fireEvent("enter"+e,c);this.fireEvent("enter",c);this.isFinished()&&this.fireEvent("finished",c)}},setTerminalState:function(e){this.terminal=e},addTransitions:function(e){for(const c of e)this.addTransition(...c)},addTransition:function(e,c,h){c=c?x(c)?c:[c]:["*"];const l=this.map;let b=c.length;for(;b;){let g,d;((g=l)[d=c[--b]]??(g[d]={}))[e]=h}},doTransition:function(...e){e.unshift("sync");return v(this,e)},doAsyncTransition:function(...e){e.unshift("async");
return v(this,e)},resumeTransition:function(e){const c=this.__pendingTransition;if(!c)return 4;const h=this.current,l=this.__transDestinationState,b=this.__additionalArgs,g={name:c,from:h,to:l,args:b},d=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(c,h,l,b);if(!1===f)return w(this),k(this),2;if("async"===f||"async"===e)return this.__transStage="enterState",d("start"+c,g),d("start",g),d("leave"+h,g),d("leave",g),k(this),3;d("start"+c,g);d("start",g);
d("leave"+h,g);d("leave",g);case "enterState":this.current=l,w(this),this.doEnterState(c,h,l,b),d("enter"+l,g),d("enter",g),d("end"+c,g),d("end",g),this.isFinished()&&d("finished",g)}k(this);return 1},doLeaveState:(e,c,h,l)=>{},doEnterState:(e,c,h,l)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(e){return x(e)?e.includes(this.current):this.current===e},can:function(e){return void 0!==this.map[this.current][e]?!0:void 0!==this.map["*"][e]}})})(myt);
(u=>{const x=(e,c)=>e.replicationIndex-c.replicationIndex,w=(e,c)=>{let h=e.length;for(;h;){const l=e[--h];l.decrementLockedCounter();c&&l.update()}},v=e=>{k(e);const c=e.template;c&&(e.__pool=new u.TrackActivesPool(c,e.parent))},k=e=>{const c=e.__pool;if(c){e=e.parent.getLayouts();let h=e.length;for(;h;)e[--h].incrementLockedCounter();c.putActives();c.destroyPooledInstances();w(e,!1);c.destroy()}};u.Replicable=new JS.Module("Replicable",{include:[u.Reusable],replicate:function(e,c){this.replicationData=
e;this.replicationIndex=c},notify:(e,c)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(e,c){return c===this.replicationIndex&&e===this.replicationData}});u.Replicator=new JS.Class("Replicator",u.Node,{initNode:function(e,c){this.callSuper(e,c);v(this);this.doReplication()},destroy:function(){k(this);this.callSuper()},setTemplate:function(e){(this.template=e.includes(u.Replicable)?e:null)||u.dumpStack("Template not replicable");this.inited&&
(v(this),this.doReplication())},setData:function(e){this.data=e;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const e=this.__pool;let c;if(e){c=this.parent.getLayouts();for(var h=c.length;h;)c[--h].incrementLockedCounter();const l=(h=this.data)?h.length:0,b=e.getActives(),g=b.length,d=[];let f=g,a,q;for(b.sort(x);f;)if(a=b[--f],q=a.replicationIndex,q>=l||!a.alreadyHasReplicationData(h[q],q))d[q]=a;for(f=d.length;f;)(a=d[--f])&&
e.putInstance(a);for(f=0;l>f;++f)(f>=g||null!=d[f])&&e.getInstance().replicate(h[f],f);for(f=c.length;f;)c[--f].sortSubviews(x);w(c,!0)}},notify:function(e,c){var h=this.__pool;if(h){h=h.getActives();let l=h.length;for(;l;)h[--l].notify(e,c)}}})})(myt);
(u=>{const x=JS.Singleton,w=document,{DomElementProxy:v,DomObservable:k,global:{register:e}}=u;new x("GlobalMouse",{include:[v,k,u.MouseObservable],initialize:function(){this.setDomElement(w);e("mouse",this)}});new x("GlobalTouch",{include:[v,k,u.TouchObservable],initialize:function(){this.setDomElement(w);e("touch",this)}})})(myt);
(u=>{let x,w,v;const k=[],e=[],c=b=>{const g=v;g!==b&&(g&&(g.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(g),x("dragLeave",g)),v=b)&&(b.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(b),x("dragEnter",g))},h=b=>{let g=w;if(g!==b)if(w=b){g=b;for(const d of l(g,e))d.notifyDragStart(g);for(const d of l(g,k))d.notifyAutoScrollerDragStart(g);x("startDrag",b)}else{for(const d of l(g,e))d.notifyDragStop(g);for(const d of l(g,k))d.notifyAutoScrollerDragStop(g);x("stopDrag",b)}},l=(b,g)=>{if(b.destroyed)return[];
if(b.isAnyDragGroup())return g;const d=[];b=b.getDragGroups();let f=g.length;for(;f;){const a=g[--f];if(a.isAnyDropGroup())d.push(a);else{const q=a.getDropGroups();for(const n in b)if(q[n]){d.push(a);break}}}return d};new JS.Singleton("GlobalDragManager",{include:[u.Observable],initialize:function(){u.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:b=>{k.push(b)},unregisterAutoScroller:b=>{b=k.indexOf(b);-1<b&&k.splice(b,1)},registerDropTarget:b=>
{e.push(b)},unregisterDropTarget:b=>{b=e.indexOf(b);-1<b&&e.splice(b,1)},startDrag:b=>{h(b)},stopDrag:(b,g,d)=>{g.notifyDropped(v,d);d||v?.notifyDrop(g);c();h();v&&!d&&x("drop",[g,v])},updateDrag:(b,g)=>{const d=l(g,e);let f=d.length,a;if(0<f){const {pageX:q,pageY:n}=b.value;for(;f;)b=d[--f],b.willAcceptDrop(g)&&g.willPermitDrop(b)&&b.isPointVisible(q,n)&&(!a||b.isInFrontOf(a))&&(a=b)}c(a)}})})(myt);
(u=>{const x=JS.Module,{mouse:w,keys:v,idle:k}=u.global;u.Activateable=new x("Activateable",{doActivated:()=>{}});u.UpdateableUI=new x("UpdateableUI",{initNode:function(e,c){this.callSuper(e,c);this.updateUI()},updateUI:()=>{}});u.Disableable=new x("Disableable",{initNode:function(e,c){c.disabled??(c.disabled=!1);this.callSuper(e,c)},setDisabled:function(e){e=this.valueFromEvent(e);this.disabled!==e&&(this.disabled=e,this.inited&&this.fireEvent("disabled",e),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});u.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[v.CODE_ENTER,v.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(e,c){this.activateKeyDown="";c.activationKeys??(c.activationKeys=u.KeyActivation.ACTIVATION_KEYS);this.callSuper(e,c);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(e){this.activationKeys=
e??[]},setRepeatKeyDown:function(e){this.repeatKeyDown=e},__hndlKeyDown:function(e){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const c=u.KeyObservable.getCodeFromEvent(e);this.activationKeys.includes(c)&&(this.activateKeyDown===c?this.doActivationKeyDown(c,!0):(this.activateKeyDown=c,this.doActivationKeyDown(c,!1)),e.value.preventDefault())}},__hndlKeyPress:function(e){if(!this.disabled){const c=u.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===c&&this.activationKeys.includes(c)&&
e.value.preventDefault()}},__hndlKeyUp:function(e){if(!this.disabled){const c=u.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===c&&this.activationKeys.includes(c)&&(this.activateKeyDown="",this.doActivationKeyUp(c),e.value.preventDefault())}},__doDomBlur:function(e){this.disabled||(e=this.activateKeyDown,""!==e&&(this.activateKeyDown="",this.doActivationKeyAborted(e)))},doActivationKeyDown:(e,c)=>{},doActivationKeyUp:function(e){this.doActivated()},doActivationKeyAborted:e=>{}});u.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(e,c){switch(e){case v.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,c))return;break;case v.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,c))return;break;case v.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,c))return;break;case v.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,c))return}this.callSuper(e,c)},doKeyArrowLeftOrUp:(e,c)=>{},doKeyArrowRightOrDown:(e,c)=>{}});u.MouseOver=new x("MouseOver",{initNode:function(e,c){c.mouseOver??(c.mouseOver=
!1);this.callSuper(e,c);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(e){this.mouseOver!==e&&(this.mouseOver=e,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(k,"__doMouseOverOnIdle","idle")))},setDisabled:function(e){this.callSuper(e);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(k,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const e=this.mouseOver;this.__lastOverIdleValue!==e&&(this.__lastOverIdleValue=e,this.doSmoothMouseOver(e))},doSmoothMouseOver:function(e){this.inited&&this.updateUI?.()},doMouseOver:function(e){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(e){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});u.MouseDown=new x("MouseDown",{initNode:function(e,c){c.mouseDown??(c.mouseDown=!1);this.callSuper(e,
c);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(e){this.mouseDown!==e&&(this.mouseDown=e,this.inited&&(e&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(e){e&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(e)},doMouseOver:function(e){this.callSuper(e);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(e){this.callSuper(e);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(e){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(e){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(e))},doMouseUpInside:function(e){this.doActivated?.()}});u.MouseOverAndDown=new x("MouseOverAndDown",{include:[u.MouseOver,u.MouseDown]});u.MouseEventsBubbleUp=new x("MouseEventsBubbleUp",
{doMouseOver:function(e){this.callSuper(e);return!0},doMouseOut:function(e){this.callSuper(e);return!0},doMouseDown:function(e){this.callSuper(e);return!0},doMouseUp:function(e){this.callSuper(e);return!0}});u.Draggable=new x("Draggable",{initNode:function(e,c){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let h=!0;null!=c.isDraggable&&(h=c.isDraggable,delete c.isDraggable);this.callSuper(e,c);this.setIsDraggable(h)},setIsDraggable:function(e){if(this.isDraggable!==
e){this.isDraggable=e;let c;e?c=this.attachToDom:this.inited&&(c=this.detachFromDom);if(c){e=this.getDragViews();let h=e.length;for(;h;){const l=e[--h];c.call(this,l,"__doMouseDown","mousedown");c.call(this,l,"__doContextMenu","contextmenu")}}}},setIsDragging:function(e){this.set("isDragging",e,!0)},setDragOffsetX:function(e,c){this.dragOffsetX!==e&&(this.dragOffsetX=e,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDragOffsetY:function(e,c){this.dragOffsetY!==e&&(this.dragOffsetY=
e,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(e){this.distanceBeforeDrag=e},setDraggableAllowBubble:function(e){this.draggableAllowBubble=e},setCenterOnMouse:function(e){this.centerOnMouse=e},setAllowAbort:function(e){this.allowAbort=e},getDragViews:function(){return[this]},__doContextMenu:e=>{},__doMouseDown:function(e){const c=u.MouseObservable.getMouseFromEvent(e),h=this.getODE();this.dragInitX=c.x-h.offsetLeft;this.dragInitY=c.y-h.offsetTop;
this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(e);e.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(e){this.isDragging?this.stopDrag(e,!1):(this.detachFromDom(w,"__doMouseUp","mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(e){e.value===v.CODE_ESC&&this.stopDrag(e,!0)},__doDragCheck:function(e){const c=
u.MouseObservable.getMouseFromEvent(e);u.Geometry.measureDistance(c.x,c.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(e))},startDrag:function(e){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(v,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(e)},
updateDrag:function(e){this.__lastMousePosition=u.MouseObservable.getMouseFromEvent(e);this.reRequestDragPosition()},__updateDragInitX:function(e){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(e){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(e,c){this.detachFromDom(w,"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(v,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(e,c){this.disabled||(this.setX(e),this.setY(c))},reRequestDragPosition:function(){const e=this.__lastMousePosition;this.requestDragPosition(e.x-this.dragInitX+this.dragOffsetX,e.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,{View:v,KeyActivation:k}=u;var e=u.Button=new w("Button",{include:[u.Activateable,u.UpdateableUI,u.Disableable,u.MouseOverAndDown,k],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(h,l){l.focusable??(l.focusable=!0);l.cursor??(l.cursor="pointer");this.callSuper(h,l)},setFocused:function(h){const l=this.focused;this.callSuper(h);this.inited&&this.focused!==l&&this.updateUI()},doActivationKeyDown:function(h,l){l||this.updateUI()},doActivationKeyUp:function(h){this.callSuper(h);
this.updateUI()},doActivationKeyAborted:function(h){this.callSuper(h);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const h=this.__restoreCursor;h&&(this.setCursor(h),this.__restoreCursor=null);this.activateKeyDown!==k.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=u.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[e],setActiveColor:function(h){this.activeColor!==h&&(this.activeColor=h,this.inited&&this.updateUI())},setHoverColor:function(h){this.hoverColor!==h&&(this.hoverColor=h,this.inited&&this.updateUI())},setReadyColor:function(h){this.readyColor!==
h&&(this.readyColor=h,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(h,l=1){this.setOpacity(l);this.setBgColor(h)}});const c=u.SimpleButton=new x("SimpleButton",v,{include:[e],initNode:function(h,l){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(h,
l)}});u.SimpleTextButton=new x("SimpleTextButton",c,{initNode:function(h,l){this.inset=this.outset=0;l.shrinkToFit??(l.shrinkToFit=!1);l.height??(l.height=24);l.textY??(l.textY="middle");this.callSuper(h,l);h=this.textY;l={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof h?l.valign=h:l.y=h;h=this.textView=new u.Text(this,l);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",h,"visible",h,"width",
h,"height",h,"y"])},setInset:function(h){this.set("inset",this.valueFromEvent(h),!0)},setOutset:function(h){this.set("outset",this.valueFromEvent(h),!0)},setText:function(h){this.text!==h&&(this.text=h,this.inited&&(this.textView.setText(h),this.fireEvent("text",h)))},setShrinkToFit:function(h){this.shrinkToFit!==h&&(this.shrinkToFit=h,this.inited&&(this.textView.setWhiteSpace(h?"nowrap":"normal"),this.fireEvent("shrinkToFit",h)))},setTextY:function(h){if(this.textY!==h&&(this.textY=h,this.inited)){const l=
this.textView;this.fireEvent("textY",h);"string"===typeof h?l.setValign(h):(l.setValign(""),l.setY(h))}},__updateContent:function(h){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:l,outset:b,textView:g}=this;this.__updateContentLoopBlock=!0;g.setX(l);this.shrinkToFit?this.setWidth(l+(g.visible&&this.text?g.width:0)+b):g.setWidth(this.width-l-b);this.__updateContentLoopBlock=!1}}});u.TextButton=new x("TextButton",u.PaddedText,{include:[e],initNode:function(h,l){l.focusIndicator??
(l.focusIndicator=!1);l.roundedCorners??(l.roundedCorners=3);l.textAlign??(l.textAlign="center");l.paddingTop??(l.paddingTop=1);l.height??(l.height=23-(l.paddingTop??0));l.activeColor??(l.activeColor="#ddd");l.hoverColor??(l.hoverColor="#eee");l.readyColor??(l.readyColor="#fff");this.callSuper(h,l)}})})(myt);
(u=>{const x=console.warn,{focus:w,mouse:v,windowResize:k}=u.global,e={};u.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:c=>e[c]},initNode:function(c,h){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(c,h)},setLastFloatingPanelShown:function(c){this.lastFloatingPanelShown=c},setLastFloatingPanelId:function(c){this.floatingPanelId=
c},setFloatingAlign:function(c){this.set("floatingAlign",c,!0)},setFloatingValign:function(c){this.set("floatingValign",c,!0)},setFloatingAlignOffset:function(c){this.set("floatingAlignOffset",c,!0)},setFloatingValignOffset:function(c){this.set("floatingValignOffset",c,!0)},setKeepInWindow:function(c){this.set("keepInWindow",c,!0)},setKeepInWindowBorder:function(c){this.set("keepInWindowBorder",c,!0)},createFloatingPanel:function(c,h,l){c=c??this.floatingPanelId;l=l??{};l.panelId=c;return e[c]=new h(null,
l)},getFloatingPanel:function(c){return e[c??this.floatingPanelId]},toggleFloatingPanel:function(c){this.getFloatingPanel(c??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(c):this.showFloatingPanel(c)},showFloatingPanel:function(c){if(c=this.getFloatingPanel(c??this.floatingPanelId))c.show(this),this.setLastFloatingPanelShown(c)},hideFloatingPanel:function(c){if(c=this.getFloatingPanel(c??this.floatingPanelId))c.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(c){this.callSuper?.()},
notifyPanelHidden:function(c){this.callSuper?.()},getFloatingAlignForPanel:function(c){return this.floatingAlign},getFloatingValignForPanel:function(c){return this.floatingValign},getFloatingAlignOffsetForPanel:function(c){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(c){return this.floatingValignOffset},getNextFocus:function(){const c=this.lastFloatingPanelShown;return c?.isShown()?c:this.callSuper?.()},getNextFocusAfterPanel:function(c){return this},getPrevFocusAfterPanel:function(c){return this}});
u.FloatingPanel=new JS.Class("FloatingPanel",u.View,{include:[u.RootView],initNode:function(c,h){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;h.visible=h.focusIndicator=!1;h.focusable=h.focusCage=!0;this.callSuper(c,h)},setOwner:function(c){this.owner=c},setPanelId:function(c){this.panelId=c},setIgnoreOwnerForHideOnMouseDown:function(c){this.ignoreOwnerForHideOnMouseDown=c},setHideOnBlur:function(c){this.hideOnBlur=c},setHideOnMouseDown:function(c){this.hideOnMouseDown=
c},setWidth:function(c){const h=this.width;this.callSuper(c);this.isShown()&&h!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(c){const h=this.height;this.callSuper(c);this.isShown()&&h!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(c){var h=c.value;c=h.pageX;h=h.pageY;this.containsPoint(c,h)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(c,h)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(c){this.hideOnMouseDown&&
this.hide(c)},focus:function(c){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(c);else{const h=this.getFirstFocusableDescendant();h===this?this.callSuper(c):h.focus(c)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(c){(c=c.value)&&!this.isAncestorOf(c)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(c){this.isShown()||(this.bringToFront(),this.updateLocation(c),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(v,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(c){this.isShown()&&(this.detachFromDom(v,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),c||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(c){this.setOwner(c);this.updateLocationX(c);this.updateLocationY(c)},updateLocationX:function(c){const h=c.getFloatingAlignForPanel(this),l=typeof h;let b;if("string"===l){b=c.getPagePosition().x+c.getFloatingAlignOffsetForPanel(this);switch(h){case "outsideRight":b+=c.width;break;case "insideRight":b+=c.width-this.width;break;case "outsideLeft":b-=this.width;break;case "insideLeft":break;default:x("Invalid align value",l,h)}c.keepInWindow&&
(c=b+this.width+(c.keepInWindowBorder||0)-k.getWidth(),0<c&&(b-=c))}else"number"===l?b=h:x("Invalid align type",l,h);this.setX(b)},updateLocationY:function(c){const h=c.getFloatingValignForPanel(this),l=typeof h;let b;if("string"===l){b=c.getPagePosition().y+c.getFloatingValignOffsetForPanel(this);switch(h){case "outsideBottom":b+=c.height;break;case "insideBottom":b+=c.height-this.height;break;case "outsideTop":b-=this.height;break;case "insideTop":break;default:x("Invalid valign value",l,h)}c.keepInWindow&&
(c=b+this.height+(c.keepInWindowBorder||0)-k.getHeight(),0<c&&(b-=c))}else"number"===l?b=h:x("Invalid valign type",l,h);this.setY(b)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,v=Math,{View:k,global:e}=u,c=e.focus,h=e.keys,{LIST_KEYS:l,CODE_ESC:b}=h,g=f=>{const a=f.itemConfig??[],q=a.length,{items:n,defaultItemClass:r,fixedWidth:t}=f,z=n.length,D=0<t,G=f.getContentView(),L=G.getLayouts();let J=0;for(var N of L)N.incrementLockedCounter();k.doWhileRemovedFromDom(G,()=>{const Q={listView:f};D&&(Q.width=t,Q.enableEllipsis=!0);for(;q>J;++J){var m=a[J];const p=m.klass??r;m=m.attrs??{};let y=n[J];y&&!y.isA(p)&&(y.destroy(),y=null);y??=n[J]=new p(G,
{...Q});y&&(y.callSetters(m),y.__LAYOUT_IDX=J)}});if(D)N=t;else for(N=f.minWidth,J=0;q>J;){const Q=n[J++];Q.syncToDom();N=v.max(N,Q.getMinimumWidth())}for(;z>J;)n[J++].destroy();n.length=q;if(!D)for(J=0;q>J;)f.updateItemWidth(n[J++],N);f.updateContentWidth(G,N);for(const Q of L)Q.sortSubviews((m,p)=>m.__LAYOUT_IDX-p.__LAYOUT_IDX),Q.decrementLockedCounter(),Q.update()},d=u.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
u.ListView=new x("ListView",u.FloatingPanel,{initNode:function(f,a){this.items=[];this.maxHeight=-1;this.minWidth=0;a.defaultItemClass??(a.defaultItemClass=u.ListViewItem);a.overflow??(a.overflow="autoy");a.bgColor??(a.bgColor="#ccc");a.boxShadow??(a.boxShadow=u.Button.FOCUS_SHADOW);this.callSuper(f,a);g(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new u.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&g(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?v.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,a)=>{f.setWidth(a)},updateContentWidth:(f,a)=>{f.setWidth(a)}});u.ListViewAnchor=new w("ListViewAnchor",{include:[u.FloatingPanelAnchor,u.ArrowKeyActivation],initNode:function(f,
a){a.listViewClass??(a.listViewClass=u.ListView);a.listViewAttrs??(a.listViewAttrs={});a.itemConfig??(a.itemConfig=[]);a.activationKeys??(a.activationKeys=l);this.callSuper(f,a)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var a=f.height,q=this.getPagePosition().y,n=e.windowResize.getHeight()-this.getPagePosition().y-this.height;f=q-a;a=n-a;q=q>n;n=this.floatingValign;
switch(n){case "outsideBottom":0>a&&q&&(n="outsideTop");break;case "insideBottom":0>a&&q&&(n="insideTop");break;case "outsideTop":0>f&&!q&&(n="outsideBottom");break;case "insideTop":0>f&&!q&&(n="insideBottom")}return n},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const a=this.getFloatingPanel(f);a&&(a.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,a){f===b?this.hideFloatingPanel():this.callSuper(f,a)},doKeyArrowLeftOrUp:function(f,a){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,a){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==b)switch(this.callSuper(f),f){case h.CODE_ARROW_LEFT:case h.CODE_ARROW_UP:this.focusToLastItem();break;case h.CODE_ARROW_RIGHT:case h.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,a,q){(f=this.getEntryByValue(f))&&(f.attrs[a]=q);return f},getEntryByValue:function(f){return this.itemConfig.find(a=>a?.attrs&&a.attrs.value===f)}});u.ListViewItem=new x("ListViewItem",u.TextButton,{include:[d,u.ArrowKeyActivation],initNode:function(f,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor="#fff");a.readyColor??(a.readyColor="#eee");a.paddingLeft??
(a.paddingLeft=8);a.paddingRight??(a.paddingRight=8);a.textAlign??(a.textAlign="left");a.roundedCorners??(a.roundedCorners=0);a.activationKeys??(a.activationKeys=l);a.focusIndicator??(a.focusIndicator=!0);const q=this.__enableEllipsis=a.enableEllipsis;delete a.enableEllipsis;this.callSuper(f,a);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return v.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,a){f===b?this.listView.owner.hideFloatingPanel():this.callSuper(f,a)},doKeyArrowLeftOrUp:function(f,a){c.prev()},doKeyArrowRightOrDown:function(f,a){c.next()}});u.ListViewSeparator=new x("ListViewSeparator",k,{include:[d],initNode:function(f,a){a.height??(a.height=1);a.bgColor??(a.bgColor="#666");this.callSuper(f,a)}})})(myt);
(u=>{const x=u.AccessorSupport,w=x.generateSetterName,v={},k=u.BAG=new JS.Class("BAG",{include:[x,u.Destructible,u.Observable],extend:{getGroup:(e,c)=>{if(e&&c){let h;return(h=v[e]??(v[e]={}))[c]??(h[c]=new k(e,c))}},removeGroup:(e,c)=>{if(e&&c&&(e=v[e])){const h=e[c];h&&delete e[c];return h}}},initialize:function(e,c){this.__nodes=[];this.trueNode=null;this.attrName=e;this.groupId=c},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&k.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(e){this.set("groupId",e,!0)},setAttrName:function(e){this.set("attrName",e,!0)},setTrueNode:function(e){this.set("trueNode",e,!0)},getNodes:function(){return this.__nodes},register:function(e){e&&!this.isRegistered(e)&&(this.__nodes.push(e),e[this.attrName]&&this.setTrue(e))},unregister:function(e){if(e){const c=this.__nodes,h=c.indexOf(e);-1<h&&c.splice(h,1);this.trueNode===e&&this.setTrueNode(null);0===c.length&&
this.destroy()}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){const c=this.attrName,h=w(c),l=this.__nodes;let b=l.length;for(this.setTrueNode(e);b;){const g=l[--b];if(e===g){if(!g[c])g[h](!0)}else if(g[c])g[h](!1)}}},setFalse:function(e){e&&this.trueNode===e&&(e[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(e){return this.__nodes.includes(e)}});u.BAGMembership=new JS.Module("BAGMembership",{initNode:function(e,c){this.__bags=[];this.callSuper(e,c)},destroy:function(){const e=
this.__bags;let c=e.length;for(;c;){const h=e[--c];this.removeFromBAG(h.attrName,h.groupId)}this.callSuper()},isRegisteredWithBAG:function(e){return this.__bags.includes(e)},getBAG:(e,c)=>k.getGroup(e,c),addToBAG:function(e,c){c=this.getBAG(e,c);this.isRegisteredWithBAG(c)||(this.__bags.push(c),c.register(this),this.isAttachedTo(this,"__updateForBAG",e)||this.attachTo(this,"__updateForBAG",e))},removeFromBAG:function(e,c){c=this.getBAG(e,c);if(this.isRegisteredWithBAG(c)){const h=this.__bags;let l=
h.length,b=!0;for(;l;){const g=h[--l];g===c?(h.splice(l,1),c.unregister(this)):g.attrName===e&&(b=!1)}b&&this.detachFrom(this,"__updateForBAG",e)}},__updateForBAG:function(e){for(const c of this.__bags)if(c.attrName===e.type)c[e.value?"setTrue":"setFalse"](this)}})})(myt);
(u=>{const x=w=>{const v=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<v.length?" ":"")+v)};u.Radio=new JS.Class("Radio",u.Text,{include:[u.SimpleButtonStyle,u.BAGMembership],initNode:function(w,v){v.selected??(v.selected=!1);v.groupId??(v.groupId=u.generateGuid());v.focusIndicator??(v.focusIndicator=!1);v.activeColor??(v.activeColor="inherit");v.hoverColor??(v.hoverColor="inherit");v.readyColor??(v.readyColor="inherit");const k=v.value;delete v.value;this.callSuper(w,
v);this.setValue(k);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);u.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const v=this.getBAG("selected",this.groupId);if(v){const k=v.getNodes();let e=k.length;for(;e;){const c=k[--e];if(c.optionValue===w){v.setTrue(c);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),x(this)))},setGroupId:function(w){if(this.groupId!==w){const v=this.groupId;this.groupId=w;v&&this.removeFromBAG("selected",v);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,v=1){this.setOpacity(v);this.setTextColor(w)}})})(myt);
(u=>{const x=JS.Module,w=u.global.keys,v=u.Selectable=new x("Selectable",{setSelected:function(e){e=this.valueFromEvent(e);this.selected!==e&&(this.selected=e,this.inited&&this.fireEvent?.("selected",e))},isSelected:function(){return!!this.selected},canSelect:e=>!0,canDeselect:e=>!0}),k=u.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(e,c){this.__selected={};this.__lastSelectedItem=null;c.selectedCount=
0;c.itemSelectionId??(c.itemSelectionId="id");c.maxSelected??(c.maxSelected=-1);this.callSuper(e,c)},setItemSelectionId:function(e){this.itemSelectionId=e},setMaxSelected:function(e){this.maxSelected=e},setSelectedCount:function(e){this.selectedCount!==e&&(this.selectedCount=e,this.inited&&this.fireEvent("selectedCount",e))},isAddMode:()=>k.isAddMode(),isToggleMode:()=>k.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(e){e&&!this.isSelectedItem(e)&&this.canSelectItem(e)&&
(e.setSelected(!0),this.__selected[e[this.itemSelectionId]]=e,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=e,this.doSelected(e),this.fireEvent("itemSelected",e))},doSelected:e=>{},selectById:function(e){this.select(this.getSelectableItem(e))},canSelectItem:function(e){const {maxSelected:c,selectedCount:h}=this;if(0===c)return!1;if(1===c){if(0<h&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<c&&h>=c)return!1;return e.canSelect(this)},selectAll:function(){const e=
this.getSelectableItems();let c=e.length;for(;c;)this.select(e[--c])},deselect:function(e){this.isSelectedItem(e)&&this.canDeselectItem(e)&&(e.setSelected(!1),delete this.__selected[e[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===e&&(this.__lastSelectedItem=null),this.doDeselected(e),this.fireEvent("itemDeselected",e))},doDeselected:e=>{},deselectById:function(e){this.deselect(this.getSelectableItem(e))},canDeselectItem:function(e){return e.canDeselect(this)},
deselectAll:function(){const e=this.__selected;for(const c in e)this.deselect(e[c])},isSelectedItem:e=>e?e.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const e=[],c=this.getSubviews();let h=c.length;for(;h;){const l=c[--h];l.isA(v)&&e.push(l)}return e},getSelectableItems:function(){const e=this.getManagedItems();let c=e.length;for(;c;)e[--c].canSelect(this)||e.splice(c,1);return e},getSelectableItem:function(e){const c=
this.getSelectableItems(),h=this.itemSelectionId;let l=c.length;for(;l;){const b=c[--l];if(b[h]===e)return b}}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToParent:v}=u,k=u.TabSlider=new x("TabSlider",w,{include:[u.Selectable,u.Disableable,v],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(c,h){const l=this;let b;h.defaultPlacement="wrapper.container";h.percentOfParentWidth=100;h.expansionState="collapsed";h.tabId??(h.tabId=u.generateGuid());h.tabContainer??(h.tabContainer=c);h.selected??(h.selected=!1);h.buttonClass??(h.buttonClass=
u.SimpleButton);h.zIndex??(h.zIndex=0);h.buttonHeight??(h.buttonHeight=30);h.fillColorSelected??(h.fillColorSelected="#666");h.fillColorHover??(h.fillColorHover="#eee");h.fillColorActive??(h.fillColorActive="#ccc");h.fillColorReady??(h.fillColorReady="#fff");h.minContainerHeight??(h.minContainerHeight=100);h.layoutPaddingY??(h.layoutPaddingY=0);h.selected&&(b=!0,delete h.selected);l.callSuper(c,h);l.button=new l.buttonClass(l,{ignorePlacement:!0,zIndex:1,height:l.buttonHeight,focusIndicator:!0,groupId:l.parent.parent.groupId,
percentOfParentWidth:100,hoverColor:l.fillColorHover,activeColor:l.fillColorActive,readyColor:l.fillColorReady},[v,{doActivated:()=>{const g=l.tabContainer;l.isSelected()&&1!==g.maxSelected?g.deselect(l):g.select(l)},updateUI:function(){this.callSuper();l.selected&&-1!==l.tabContainer.maxSelected&&this.setBgColor(l.fillColorSelected);l.notifyButtonRedraw()}}]);c=l.wrapper=new w(l,{ignorePlacement:!0,y:l.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[v,{setHeight:function(g){this.callSuper(Math.round(g))},
setWidth:function(g){this.callSuper(g);this.inited&&this.container.setWidth(g)}}]);l._wrapperLayout=new u.SizeToChildren(c.container=new w(c),{axis:"y",paddingY:l.layoutPaddingY});l.constrain("__updateHeight",[c,"y",c,"height"]);b&&l.tabContainer.select(l);!0===h.disabled&&l.setDisabled(!0);l.setHeight(l.getCollapsedHeight())},setSelected:function(c){this.callSuper(c);this.button?.updateUI()},setTabId:function(c){this.tabId=c},setTabContainer:function(c){this.tabContainer=c},setLayoutPaddingY:function(c){this.layoutPaddingY=
c;this.inited&&this._wrapperLayout.setPaddingY(c)},setMinContainerHeight:function(c){this.minContainerHeight=c},setButtonClass:function(c){this.buttonClass=c},setFillColorSelected:function(c){this.fillColorSelected=c},setFillColorHover:function(c){this.fillColorHover=c},setFillColorActive:function(c){this.fillColorActive=c},setFillColorReady:function(c){this.fillColorReady=c},setButtonHeight:function(c){this.buttonHeight!==c&&(this.buttonHeight=c,this.button&&(this.button.setHeight(c),this.wrapper.setY(c)))},
setExpansionState:function(c){if(this.expansionState!==c){this.expansionState=c;this.inited&&this.fireEvent("expansionState",c);const h=this.wrapper;h&&("expanded"===c?(h.setMaskFocus(!1),h.setOverflow("auto")):"expanding"===c?h.setVisible(!0):"collapsed"===c?h.setVisible(!1):"collapsing"===c&&(h.setMaskFocus(!0),h.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(c){this.setHeight(this.wrapper.y+this.wrapper.height)},
expand:function(c){const h=this,l=h.wrapper;c-=h.getCollapsedHeight();h.setExpansionState("expanding");l.stopActiveAnimators();if(l.height!==c){const b=h.tabContainer.duration;1===b?(l.setHeight(c),h.setExpansionState("expanded")):l.animate({attribute:"height",to:c,duration:b}).next(g=>{h.setExpansionState("expanded")})}else h.setExpansionState("expanded")},collapse:function(){const c=this,h=c.wrapper;c.setExpansionState("collapsing");h.stopActiveAnimators();if(0!==h.height){const l=c.tabContainer.duration;
1===l?(h.setHeight(0),c.setExpansionState("collapsed")):h.animate({attribute:"height",to:0,duration:l}).next(b=>{c.setExpansionState("collapsed")})}else c.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});u.TextTabSlider=new x("TextTabSlider",
k,{initNode:function(c,h){h.labelTextColorChecked??(h.labelTextColorChecked="#fff");h.labelTextColor??(h.labelTextColor="#333");this.callSuper(c,h);this.button.label=new u.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(c){this.labelTextColorChecked=c},setLabelTextColor:function(c){this.labelTextColor=c},setText:function(c){this.text!==c&&(this.text=c,this.button?.label?.setText(c))},
notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const e=u.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[u.SelectionManager],extend:{SPACING:1},initNode:function(c,h){const l=this;l._tabSliders=[];h.defaultPlacement="container";h.spacing??(h.spacing=e.SPACING);h.overflow??(h.overflow="autoy");h.itemSelectionId??
(h.itemSelectionId="tabId");h.maxSelected??(h.maxSelected=1);h.duration??(h.duration=500);l.updateLayout=u.debounce(l.updateLayout);l.callSuper(c,h);c=l.container=new w(l,{ignorePlacement:!0,percentOfParentWidth:100},[v,{subnodeAdded:function(b){this.callSuper(b);b instanceof k&&(l._tabSliders.push(b),l.attachTo(b,"updateLayout","selected"))},subnodeRemoved:function(b){if(b instanceof k){const g=l._tabSliders,d=g.indexOf(b);-1<d&&(l.detachFrom(b,"updateLayout","selected"),g.splice(d,1))}this.callSuper(b)}}]);
c.layout=new u.SpacedLayout(c,{axis:"y",spacing:l.spacing,collapseParent:!0});l.attachTo(l,"updateLayout","height")},setSpacing:function(c){this.spacing!==c&&(this.spacing=c,this.layout?.setSpacing(c))},setDuration:function(c){this.duration=c},updateLayout:function(c,h){c=this._tabSliders;for(var l=c.length,b=l,g=0,d=0,f=0;b;){var a=c[--b];a.visible&&(++f,a.selected?(g+=a.getMinimumExpandedHeight(),d+=a.getPreferredExpandedHeight()):(a=a.getCollapsedHeight(),g+=a,d+=a))}b=this.container.layout;f=
b.inset+b.outset+b.spacing*(f-1);d+=f;b=this.height;g=g+f>b;f=d>b;a=this.duration;d-=b;0<h&&this.setDuration(h);for(b=l;b;)if(l=c[--b],l.visible)if(l.selected){let q;if(g)q=l.getMinimumExpandedHeight();else if(f){const n=l.getPreferredExpandedHeight(),r=l.getMinimumExpandedHeight();q=n-d;r>q?(d-=n-r,q=r):d=0}else q=l.getPreferredExpandedHeight();l.expand(q)}else l.collapse();0<h&&this.setDuration(a)}})})(myt);
(u=>{const x=k=>{const e=[];switch(k.tabContainer.location){case "top":e.push("TopLeft","TopRight");break;case "bottom":e.push("BottomLeft","BottomRight");break;case "left":e.push("TopLeft","BottomLeft");break;case "right":e.push("TopRight","BottomRight")}for(const c of e)k["setRounded"+c+"Corner"](k.cornerRadius||0)},w=u.Tab=new JS.Class("Tab",u.SimpleTextButton,{include:[u.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(k,e){e.tabId??(e.tabId=u.generateGuid());e.tabContainer??(e.tabContainer=
k);let c;e.selected&&(c=!0,delete e.selected);e.inset??(e.inset=w.INSET);e.outset??(e.outset=w.OUTSET);e.selectedColor??(e.selectedColor="#fff");e.hoverColor??(e.hoverColor="#eee");e.activeColor??(e.activeColor="#aaa");e.readyColor??(e.readyColor="#ccc");e.labelTextSelectedColor??(e.labelTextSelectedColor="#333");e.height??(e.height=24);e.focusIndicator??(e.focusIndicator=!1);e.cornerRadius??(e.cornerRadius=6);this.callSuper(k,e);c&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(k){this.tabId=k},setTabContainer:function(k){this.tabContainer=k},setSelectedColor:function(k){this.selectedColor=k},setLabelTextColor:function(k){this.labelTextColor=k},setCornerRadius:function(k){this.cornerRadius=k;this.inited&&x(this)},setLabelTextSelectedColor:function(k){this.labelTextSelectedColor=k;this.inited&&this.selected&&this.textView.setTextColor(k)},setSelected:function(k){this.callSuper(k);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),v=u.TabContainer=new JS.Module("TabContainer",{include:[u.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(k,e){this.__tabs=[];e.spacing??(e.spacing=v.SPACING);e.inset??(e.inset=v.INSET);e.location??(e.location="top");e.itemSelectionId??
(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);const c=e.collapse??!0;delete e.collapse;this.callSuper(k,e);this.layout=new u.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:c})},setLocation:function(k){this.location=k},setSpacing:function(k){this.spacing!==k&&(this.spacing=k,this.layout?.setSpacing(k))},setInset:function(k){this.inset!==k&&(this.inset=k,this.layout?.setInset(k))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(k){this.callSuper(k);if(k.isA(w))switch(this.__tabs.push(k),this.location){case "top":k.setValign("bottom");break;case "bottom":k.setValign("top");break;case "left":k.setAlign("right");break;case "right":k.setAlign("left")}},subnodeRemoved:function(k){if(k.isA(w)){const e=this.__tabs,c=e.indexOf(k);-1<c&&e.splice(c,1)}this.callSuper(k)}})})(myt);
(u=>{const x=JS.Class,w=Math.min,v=Array.isArray,{SizeToDom:k,View:e,Disableable:c,KeyObservable:h,Button:{FOCUS_SHADOW:l},global:{keys:b}}=u,g=(r,t,z)=>{r[z]!==t&&(r[z]=t,r.getIDS()[z]=t+"px",r.inited&&(r.fireEvent(z,t),r.sizeViewToDom()))},d=(r,t,z)=>{r[t]!==z&&(r.getIDE()[t]=r[t]=z,r.inited&&r.fireEvent(t,z))},f=u.NativeInputWrapper=new x("NativeInputWrapper",e,{include:[c,u.InputObservable],initNode:function(r,t){t.tagName??(t.tagName="input");t.focusable??(t.focusable=!0);this.callSuper(r,t);
this.addDomClass("mytNativeInput")},createOurDomElement:function(r){r=this.callSuper(r);this.inputType&&((v(r)?r[1]:r).type=this.inputType);return r},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){this.value!==r&&(this.value=r,this.setDomValue(r),this.inited&&this.fireEvent("value",r))},getDomValue:function(){return this.getIDE().value},setDomValue:function(r){const t=this.getIDE();t.value!==r&&(t.value=r)}}),a=u.InputSelectOption=new x("InputSelectOption",
e,{include:[c,u.Selectable],createOurDomElement:r=>document.createElement("option"),setSelected:function(r){r=this.valueFromEvent(r);const t=this.getIDE();t.selected!==r&&(t.selected=r)},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){d(this,"value",r)},setLabel:function(r){this.label!==r&&(this.getIDE().textContent=this.label=r,this.inited&&this.fireEvent("label",r))},isSelected:function(){return this.getIDE().selected},canSelect:function(r){return!this.disabled&&
!this.getIDE().selected&&this.parent===r},canDeselect:function(r){return!this.disabled&&this.getIDE().selected&&this.parent===r}}),q=u.BaseInputText=new x("BaseInputText",f,{include:[u.TextSupport],initNode:function(r,t){t.bgColor??(t.bgColor="transparent");t.spellcheck??(t.spellcheck=!1);this.callSuper(r,t);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(r){this.callSuper(r);this.setValue(r)},
setSpellcheck:function(r){d(this,"spellcheck",r)},setMaxLength:function(r){d(this,"maxLength",null==r||0>r?void 0:r)},setAllowedChars:function(r){this.allowedChars=r},setPlaceholder:function(r){d(this,"placeholder",r)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(l)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(r){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(r){const t=
r.value,z=this.allowedChars;z&&!z.includes(h.getKeyFromEvent(r))&&t.preventDefault();this.filterInputPress(t)},filterInput:r=>r,filterInputPress:r=>{},__syncToDom:function(r){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const r=document.selection.createRange();r.moveStart("character",-this.getDomValue().length);return r.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(r,t){if(null==t||r===t){if(this.getCaretPosition()===r)return;
t=r}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(r,t):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",t),z.moveStart("character",r),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const r=this.getIDE();return{start:r.selectionStart,startElem:r,end:r.selectionEnd,endElem:r}},setSelection:function(r){r&&
this.setCaretPosition(r.start,r.end)},saveSelection:function(r){this._selRange=r||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=u.InputText=new x("InputText",q,{include:[u.SizeHeightToDom],initNode:function(r,t){this.inputType=!0===t.password?"password":"text";this.callSuper(r,t);this.setCaretToEnd()},setPassword:function(r){this.set("password",r,!0);this.inited&&(this.getIDE().type=r?"password":"text")}});u.EditableText=new x("EditableText",
q,{include:[k],initNode:function(r,t){t.tagName??(t.tagName="div");t.inputType=null;t.whiteSpace??(t.whiteSpace="pre");t.contentEditable??(t.contentEditable=!0);this.callSuper(r,t);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(r){g(this,r,"minWidth")},setMinHeight:function(r){g(this,r,"minHeight")},setPadding:function(r){this.setPaddingTop(r);this.setPaddingRight(r);
this.setPaddingBottom(r);this.setPaddingLeft(r)},setPaddingTop:function(r){g(this,r,"paddingTop")},setPaddingRight:function(r){g(this,r,"paddingRight")},setPaddingBottom:function(r){g(this,r,"paddingBottom")},setPaddingLeft:function(r){g(this,r,"paddingLeft")},setContentEditable:function(r){d(this,"contentEditable",r)},filterInputPress:function(r){const t=this.maxLength;0<=t&&this.getCharacterCount()===t&&r.preventDefault();this.callSuper(r)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(r){const t=this.getIDE();t.innerHTML!==r&&(t.innerHTML=r,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(r){h.isEnterKeyEvent(r)&&(r.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(r){this.callSuper(r);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(r,t){if(null==t||r===t){if(this.getCaretPosition()===r)return;t=r}this.saveSelection({start:r,startElem:this.getIDE().firstChild,end:t,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(r){this.saveSelection();return!0},getSelection:function(){let r;if(window.getSelection){const t=window.getSelection();if(0<t.rangeCount){if(t.extentNode===
this.getIDE())return;r=t.getRangeAt(0)}}else document.selection&&(r=document.selection.createRange());return{start:r?r.startOffset:0,startElem:r?r.startContainer:this.getIDE().firstChild,end:r?r.endOffset:0,endElem:r?r.endContainer:this.getIDE().firstChild}},setSelection:function(r){if(r){const {startElem:t,endElem:z}=r;if(t&&t.parentNode&&z&&z.parentNode){const D=document.createRange();D.setStart(t,w(r.start,t.length));D.setEnd(z,w(r.end,z.length));window.getSelection?(r=window.getSelection(),0<
r.rangeCount&&r.removeAllRanges(),r.addRange(D)):document.selection&&D.select()}}}});u.InputTextArea=new x("InputTextArea",q,{initNode:function(r,t){t.tagName??(t.tagName="textarea");t.inputType=null;t.resize??(t.resize="none");t.wrap??(t.wrap="soft");this.callSuper(r,t)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(r){const t=this;t.resize!==r&&(r=t.resize=t.getIDS().resize=r||"none",t.inited&&t.fireEvent("resize",r),"none"!==r&&(t.__resizeObserver??
(t.__resizeObserver=new ResizeObserver(()=>{t.doResize()}))).observe(t.getIDE()))},setWrap:function(r){d(this,"wrap",r)},doResize:function(){const r=this.resize;"both"!==r&&"horizontal"!==r||k.sizeWidth(this);"both"!==r&&"vertical"!==r||k.sizeHeight(this)}});u.ComboBox=new x("ComboBox",n,{include:[u.Activateable,u.KeyActivation,u.ListViewAnchor],initNode:function(r,t){this.filterItems=!0;t.activationKeys??(t.activationKeys=[b.CODE_ENTER,b.CODE_ESC,b.CODE_ARROW_UP,b.CODE_ARROW_DOWN]);t.bgColor??(t.bgColor=
"#fff");t.borderWidth??(t.borderWidth=1);t.borderStyle??(t.borderStyle="solid");t.floatingAlignOffset??(t.floatingAlignOffset=t.borderWidth);t.fullItemConfig??(t.fullItemConfig=[]);t.listViewAttrs={...t.listViewAttrs,maxHeight:t.listViewAttrs?.maxHeight??99};this.callSuper(r,t)},setFullItemConfig:function(r){this.fullItemConfig=r},setFilterItems:function(r){this.filterItems=r},__syncToDom:function(r){const t=this.value;this.callSuper(r);t!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(r){const t=
this.getFloatingPanel(r);if(t){let D;if(this.filterItems){D=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const G=this.fullItemConfig,L=G.length;for(let J=0;L>J;){const N=G[J++],Q=N.attrs.text.toLowerCase(),m=Q.indexOf(z);0===m?Q!==z&&D.push(N):0<m&&D.push(N)}}else D=this.fullItemConfig;0<D.length?(t.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(D),this.callSuper(r)):this.hideFloatingPanel(r)}},doItemActivated:function(r){this.setValue(null==r.value?r.text:r.value);this.callSuper(r)},
doActivated:function(){this.toggleFloatingPanel()}});u.InputSelect=new x("InputSelect",f,{include:[k],initNode:function(r,t){t.tagName??(t.tagName="select");t.inputType=null;t.multiple??(t.multiple=!1);t.size??(t.size=t.multiple?4:1);this.callSuper(r,t);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(r){d(this,"multiple",r)},setSize:function(r){d(this,"size",r)},setOptions:function(r){this.destroyAllOptions();if(v(r))for(const t of r)this.addOption(t)},getOptions:function(){return this.getSubviews().slice()},
setValue:function(r){v(r)&&u.areArraysEqual(r,this.value)||this.value===r||(this.value=r,this.inited&&this.fireEvent("value",r))},subviewAdded:function(r){r instanceof a||(u.dumpStack("Subview unsupported. Destroying it"),r.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(l)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(r=>r.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(r=>
r.value)},getOptionForValue:function(r){return this.getOptions().find(t=>t.value===r)},addOption:function(r){return new a(this,r)},destroyAllOptions:function(){for(const r of this.getOptions())r.destroy()},destroyOptionWithValue:function(r){if(r=this.getOptionForValue(r))if(r.destroy(),r.destroyed)return!0;return!1},deselectAll:function(){let r=!1;for(const t of this.getOptions())t.isSelected()&&(t.setSelected(!1),r=!0);r&&this.__doChanged()},selectValues:function(r){v(r)||(r=[r]);for(const t of r)this.selectValue(t)},
selectValue:function(r){this.select(this.getOptionForValue(r))},select:function(r){r?.canSelect(this)&&(r.setSelected(!0),this.__syncToDom())},deselectValue:function(r){this.deselect(this.getOptionForValue(r))},deselect:function(r){r?.canDeselect(this)&&(r.setSelected(!1),this.__syncToDom())},__doChanged:function(r){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(u=>{const x=JS.Module,w=Math.round;var v=u.ValueComponent=new x("ValueComponent",{initNode:function(e,c){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(e,c)},setValueFilter:function(e){this.valueFilter=e;this.inited&&e&&this.setValue(this.value)},setValue:function(e){this.valueFilter&&(e=this.valueFilter(e));this.value!==e&&(this.value=e,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(e,c){const h=this.valueFilter;
this.setValueFilter(h?"last"===c?l=>e(h(l)):l=>h(e(l)):e)}});const k=u.RangeComponent=new x("RangeComponent",{include:[v],setLowerValue:function(e){this.setValue({lower:e,upper:this.value&&void 0!==this.value.upper?this.value.upper:e})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(e){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:e,upper:e})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(e){if(e){var c=
this.value;const b=c?c.lower:void 0;c=c?c.upper:void 0;this.valueFilter&&(e=this.valueFilter(e));if(e.lower!==b||e.upper!==c){var h;(h=e).lower??(h.lower=e.upper);var l;(l=e).upper??(l.upper=e.lower);void 0!==e.lower&&void 0!==e.upper&&e.lower>e.upper&&(h=e.lower,e.lower=e.upper,e.upper=h);this.value=e;this.inited&&(this.fireEvent("value",this.getValue()),e.lower!==b&&this.fireEvent("lowerValue",e.lower),e.upper!==c&&this.fireEvent("upperValue",e.upper))}}else this.callSuper(e)},getValueCopy:function(){const e=
this.value;return{lower:e.lower,upper:e.upper}}});v=u.BoundedValueComponent=new x("BoundedValueComponent",{include:[v],initNode:function(e,c){const h=this;h.appendToEarlyAttrs("snapToInt","minValue","maxValue");c.snapToInt??(c.snapToInt=!0);c.valueFilter||(c.valueFilter=l=>{var b=h.maxValue;if(null!=b&&l>b)return b;b=h.minValue;return null!=b&&l<b?b:l});h.callSuper(e,c)},setSnapToInt:function(e){this.snapToInt!==e&&(this.snapToInt=e,this.inited&&(this.fireEvent("snapToInt",e),e&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(e){this.snapToInt&&null!=e&&(e=w(e));if(this.minValue!==e){const c=this.maxValue;null!=c&&e>c&&(e=c);this.minValue!==e&&(this.minValue=e,this.inited&&(this.fireEvent("minValue",e),this.setValue(this.value)))}},setMaxValue:function(e){this.snapToInt&&null!=e&&(e=w(e));if(this.maxValue!==e){const c=this.minValue;null!=c&&e<c&&(e=c);this.maxValue!==e&&(this.maxValue=e,this.inited&&(this.fireEvent("maxValue",e),this.setValue(this.value)))}},
setValue:function(e){this.callSuper(this.snapToInt&&null!=e&&!isNaN(e)?w(e):e)}});u.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[v,k],initNode:function(e,c){const h=this;c.valueFilter||(c.valueFilter=l=>{if(l){const b=h.maxValue,g=h.minValue;null!=b&&l.upper>b&&(l.upper=b);null!=g&&l.lower<g&&(l.lower=g)}return l});h.callSuper(e,c)},setValue:function(e){this.snapToInt&&null!=e&&(null==e.lower||isNaN(e.lower)||(e.lower=w(e.lower)),null==e.upper||isNaN(e.upper)||(e.upper=w(e.upper)));
this.callSuper(e)}})})(myt);
(u=>{const x=w=>{const v=w.label??"";w.setText('<i class="'+("solid"===w.checkboxStyle?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<v.length?" "+v:""))};u.Checkbox=new JS.Class("Checkbox",u.Text,{include:[u.SimpleButtonStyle,u.ValueComponent],initNode:function(w,v){this.appendToEarlyAttrs("userUnselectable");v.value??(v.value=!1);v.focusIndicator??(v.focusIndicator=!1);v.checkboxStyle??(v.checkboxStyle="outline");v.activeColor??(v.activeColor="inherit");v.hoverColor??(v.hoverColor=
"inherit");v.readyColor??(v.readyColor="inherit");this.callSuper(w,v);u.FontAwesome.registerForNotification(this);x(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&x(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(w,
v=1){this.setOpacity(v);this.setTextColor(w)}})})(myt);
(u=>{let x;const {Class:w,Module:v}=JS,k=console.warn,{KeyObservable:e,UpdateableUI:c,dumpStack:h,global:l}=u,b=l.focus,g=l.keys,d={},f=(m,p)=>{if(m){const y=m.id;m.id?p(y):h("No ID")}else h("No processor")},a=m=>{f(m,p=>{d[p]=m})},q=m=>{const p=u.BAG.getGroup("selected",m.groupId);if(p){const y=p.getNodes();m=m.value;let A=y.length;for(;A;){const C=y[--A];if(C.optionValue===m){p.setTrue(C);break}}}},n=m=>{if(m.groupId){const p=u.BAG.getGroup("selected",m.groupId);p&&m.syncTo(p,"__syncValue","trueNode")}},
r=(m,p)=>{const y=[],A=m.__v;if(A)for(const C of A)p=C.isFormValid(m,null,y)&&p;m.setErrorMessages(y);m.setIsValid(p);return p},t=(m,p,y)=>{if(m=m.__vp)for(const A of m)A[y]&&(p=A.process(p));return p},z=u.ValueProcessor=new w("ValueProcessor",{initialize:function(m,p,y,A){this.id=m;this.runForDefault=!!p;this.runForRollback=!!y;this.runForCurrent=!!A},process:m=>m}),D=u.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:m=>{if(null==m||""===m||"-"===m)return m;const p=Number(m);return isNaN(p)?
m:p}}),G=u.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(m,p,y,A,C){this.callSuper(m,p,y,A);this.trim=C},process:function(m){m+="";switch(this.trim){case "start":case "left":return m.trimStart();case "end":case "right":return m.trimEnd();default:return m.trim()}}}),L=u.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(m,p,y,A,C){this.callSuper(m,p,y,A);this.defaultValue=C},process:function(m){return void 0===m?this.defaultValue:m}}),J=u.Form=new v("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(m,p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(m,p);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(m){this.set("errorMessages",m,!0)},getFullId:function(){const m=[this.id];let p=this.form;for(;p&&p.id;)m.unshift(p.id),
p=p.form;return m.join(".")},setId:function(m){if(this.id!==m){const p=this.id;this.id=m;(m=this.form)&&this.inited&&(m.removeSubForm(p),m.addSubForm(this))}},setForm:function(m){if(this.form!==m){const p=this.form;this.form=m;p?.removeSubForm(this.id);this.inited&&m?.addSubForm(this)}},setIsValid:function(m){this.isValid=m;this.inited&&this.fireEvent("isValid",m);const p=this.form;p&&!this._lockCascade&&(m?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(m){if(this.isChanged!==
m){this.isChanged=m;this.inited&&this.fireEvent("isChanged",m);const p=this.form;p&&!this._lockCascade&&(m?p.notifySubFormChanged():p.verifyChangedState(this))}},setValidators:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=l.validators.getValidator(y),m[p]||m.splice(p,1))}this.__v=m},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(N))return this.value;const m={},p=this.__sf;for(const y in p)m[y]=p[y].getValue();return m},setValue:function(m){this.callSuper?.(m);
if("object"===typeof m&&!this.isA(N))for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setValue(m[p]):k("ID in setValue for missing subform",p)}this.form?.notifyValueChanged(this);return m},getDefaultValue:function(){const m={};let p=this.__sf;for(const y in p)m[y]=p[y].getDefaultValue();return m},setDefaultValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setDefaultValue(m[p]):k("ID in setDefaultValue for missing subform",p)}return m},getRollbackValue:function(){const m=
{},p=this.__sf;for(const y in p)m[y]=p[y].getRollbackValue();return m},setRollbackValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setRollbackValue(m[p]):k("ID in setRollbackValue for missing subform",p)}return m},addAccelerator:function(m,p){this.__acc[m]=p},removeAccelerator:function(m){delete this.__acc[m]},invokeAccelerator:function(m,p){this.__acc[m]?.call(this,p??null)},addValidator:function(m){m&&this.__v.push(m)},removeValidator:function(m){if(m){const p=
this.__v;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(m){const p=m.id;null!=this.getSubForm(p)?k("ID in use for subform, add aborted",p,m):(m.setForm(this),this.__sf[p]=m,m.isChanged&&this.notifySubFormChanged(),m.isValid||this.notifySubFormInvalid())},removeSubForm:function(m){const p=this.getSubForm(m);p&&(p.setForm(null),delete this.__sf[m],this.verifyChangedState(),this.verifyValidState());
return p},getSubForm:function(m){return this.__sf[m]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(m){m&&this.doValidation();const p=[];(function C(A){if(A.isA(N))A.isValid||p.push(A.getFullId());else{A=A.getSubForms();for(const E in A)C(A[E])}})(this);return p},getAllErrorMessages:function(){const m=this.__sf;let p=(this.errorMessages??[]).slice();for(const y in m)p.push(...m[y].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(m){const p=
this.__sf;let y=!0;for(const A in p){const C=p[A];C!==m&&(y=C.isValid&&y)}return r(this,y)},doValidation:function(){const m=this.__sf;let p=!0;for(const y in m)p=m[y].doValidation()&&p;this._lockCascade=!0;p=r(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(m){this.form?.notifyValueChanged(m)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(m){const p=this.__sf;let y=!1;for(const A in p){const C=p[A];C!==m&&(y=C.isChanged||y)}this.setIsChanged(y);
return y},setup:function(m,p,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;m??={};p??={};y??={};const A=this.__sf;for(const C in A)A[C].setup(m[C],p[C],y[C])},resetForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const m={},p=this.__sf;for(const y in p){const A=p[y];A.isChanged&&(m[y]=A.getChangedValue())}return m}}),N=u.FormElement=new v("FormElement",{include:[J],initNode:function(m,p){this.__vp=[];this.callSuper(m,p)},getValue:function(){return t(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(m){void 0===m&&(m=this.getRollbackValue());this.value!==m&&
(this.callSuper(m),this.verifyChangedState());return m},getDefaultValue:function(){return t(this,this.defaultValue,"runForDefault")},setDefaultValue:function(m){this.defaultValue!==m&&(this.defaultValue=m,this.inited&&this.fireEvent("defaultValue",m),this.verifyChangedState());return m},getRollbackValue:function(){return t(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(m){void 0===m&&(m=this.getDefaultValue());this.rollbackValue!==m&&(this.rollbackValue=m,this.inited&&this.fireEvent("rollbackValue",
m),this.verifyChangedState());return m},setValueProcessors:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=d[y],m[p]||m.splice(p,1))}this.__vp=m},addValueProcessor:function(m){this.__vp.push(m)},removeValueProcessor:function(m){if(m){const p=this.__vp;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},addSubForm:m=>{h("addSubForm unsupported on FormElement")},getSubForm:m=>{h("getSubForm unsupported on FormElement")},removeSubForm:m=>{h("removeSubForm unsupported on FormElement")},
verifyChangedState:function(m){m=this.getValue()!==this.getRollbackValue();this.setIsChanged(m);return m},setup:function(m,p,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(m);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const m=this.getDefaultValue();this.setRollbackValue(m);this.setValue(m);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),Q=u.FormInputTextMixin=new v("FormInputTextMixin",{include:[N,c],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";p.bgColor??(p.bgColor="#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(m,p);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=m},setActionRequiredColor:function(m){this.actionRequiredColor=
m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(m){e.isEnterKeyEvent(m)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(m){e.isEscKeyEvent(m)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
u.RootForm=new v("RootForm",{include:[J],initNode:function(m,p){this.callSuper(m,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:m=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});u.FormCheckbox=new w("FormCheckbox",u.Checkbox,{include:[N],initNode:function(m,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(m,p)}});u.FormComboBox=new w("FormComboBox",u.ComboBox,{include:[N,c],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(m,p);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=
m},setActionRequiredColor:function(m){this.actionRequiredColor=m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(m){this._isShown=!0},notifyPanelHidden:function(m){this._isShown=!1},doActivationKeyDown:function(m,p){m!==g.CODE_ESC||this._isShown?this.callSuper(m,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(m){m!==
g.CODE_ENTER||this._isShown?this.callSuper(m):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});u.FormEditableText=new w("FormEditableText",u.EditableText,{include:[Q],__hndlKeyDown:function(m){"nowrap"===this.whitespace&&this.callSuper(m)}});u.FormInputText=new w("FormInputText",
u.InputText,{include:[Q]});u.FormInputTextArea=new w("FormInputTextArea",u.InputTextArea,{include:[Q],__hndlKeyDown:m=>{}});u.FormInputSelect=new w("FormInputSelect",u.InputSelect,{include:[N],setValue:function(m){if(!this.__abortSetValue)return m=this.callSuper(m),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(m),this.__abortSetValue=!1,this.verifyValidState(),m}});u.FormRadioGroup=new w("FormRadioGroup",u.Node,{include:[u.ValueComponent,N],initNode:function(m,p){p.groupId??(p.groupId=
u.generateGuid());this.callSuper(m,p);void 0!==this.value&&q(this);n(this)},setValue:function(m){m=this.callSuper(m);this.inited&&q(this);return m},setGroupId:function(m){if(this.groupId!==m){if(this.groupId){const p=u.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=m;this.inited&&n(this)}},__syncValue:function(m){m=m.value;this.setValue(m?m.optionValue:null)}});u.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(m,
p,y,A,C){this.callSuper(m,p,y,A);this.otherField=C},process:function(m){return null==m||""===m?this.otherField.getValue():m}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){a(x=new L("undefToEmpty",!0,!0,!0,""));a(new D("toNumber",!0,!0,!0));a(new G("trimLeft",!0,!0,!0,"left"));a(new G("trimRight",!0,!0,!0,"right"));a(new G("trimBoth",!0,!0,!0,"both"));l.register("valueProcessors",this)},getValueProcessor:m=>d[m],register:a,unregister:m=>{f(m,p=>{d[p]&&delete d[p]})}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,v={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},k=(b,g)=>{b[g](b,"doDragOver","dragover",!1);b[g](b,"doDragEnter","dragenter",!1);b[g](b,"doDragLeave","dragleave",!1);b[g](b,"doDrop","drop",!1)},e=u.DragDropSupport=new JS.Module("DragDropSupport",{include:[u.DragDropObservable],initNode:function(b,g){this.callSuper(b,g);this.disabled||this.setupDragListeners()},setDisabled:function(b){this.disabled!==
b&&(this.getIDE().disabled=b,this.callSuper(b),this.inited&&(b?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){k(this,"attachToDom")},teardownDragListeners:function(){k(this,"detachFromDom")},doDragOver:b=>{},doDragEnter:b=>{},doDragLeave:b=>{},doDrop:function(b){this.handleFiles(b.value.dataTransfer.files,b)},handleFiles:function(b,g){if(void 0!==b){let d=b.length;for(;d;){const f=this.filterFiles(b[--d]);f&&this.handleDroppedFile(f,g)}}else w("No File API")},
filterFiles:b=>b,handleDroppedFile:(b,g)=>{}}),c=u.FileInput=new x("FileInput",u.NativeInputWrapper,{initNode:function(b,g){this.inputType="file";this.callSuper(b,g);this.attachToDom(this,"_onChange","change")},setAccept:function(b){this.set("accept",b,!0);this.getIDE().accept=this.accept},setMaxFiles:function(b){this.maxFiles!==b&&(this.set("maxFiles",b,!0),this.getIDE().multiple=1<this.maxFiles)},clearValue:function(){this.getIDE().value=""},_onChange:b=>{}}),h=u.Uploader=new x("Uploader",u.View,
{include:[e,u.Disableable,u.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(b,g,d)=>{if(void 0!==FileReader){const f=new FileReader;f.onload=a=>{g(a.target.result)};switch(d){case "text":f.readAsText(b);break;case "arrayBuffer":f.readAsArrayBuffer(b);break;default:f.readAsDataURL(b)}}},isSameFile:(b,g)=>null!=b&&null!=g&&b.name===g.name&&b.type===g.type&&b.size===g.size,createFile:b=>{const g=(new u.URI(b)).file;return{name:g,serverPath:b,size:-1,type:v[u.getExtension(g)]}}},initNode:function(b,
g){const d=this;d.files=[];g.requestFileParam??(g.requestFileParam="file");g.maxFiles??(g.maxFiles=-1);g.responseIsRaw??(g.responseIsRaw=!1);const f=g.accept;delete g.accept;d.callSuper(b,g);d.fileInput=new c(d,{maxFiles:d.maxFiles,accept:f,percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:d.disabled,overflow:"hidden"},[u.SizeToParent,{_onChange:function(a){d.handleFiles(this.getIDE().files,a)}}])},setAccept:function(b){this.fileInput?.setAccept(this.accept)},getAccept:function(){return this.fileInput?.accept},
setMaxFiles:function(b){this.fileInput?.setMaxFiles(this.maxFiles)},getMaxFiles:function(){return this.fileInput?.maxFiles},setValue:function(b){this.clearFiles();if(b){Array.isArray(b)||(b=[b]);for(const g of b)this.addFile(h.createFile(g))}return this.callSuper?this.callSuper(b):b},getValue:function(){return this.value},setDisabled:function(b){this.callSuper(b);this.fileInput?.setDisabled(b)},setUploadUrl:function(b){this.set("uploadUrl",b,!0)},setRequestFileParam:function(b){this.set("requestFileParam",
b,!0)},setResponseIsRaw:function(b){this.set("responseIsRaw",b,!0)},bringSubviewToFront:function(b){b===this.fileInput?this.callSuper(b):this.sendSubviewBehind(b,this.fileInput)},subviewAdded:function(b){this.callSuper(b);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(b,g){this.addFile(b)},filterFiles:function(b){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:b},uploadFiles:function(b,g){b??=this.uploadUrl;const d=this.files;let f=d.length;for(;f;)this.uploadFile(d[--f],
b,g)},makeFetchOptionsForUpload:b=>({method:"POST",body:b}),uploadFile:function(b,g,d){const f=this,a=new FormData;a.append(d??f.requestFileParam,b,b.name.replaceAll("%20"," "));u.doFetch(g??f.uploadUrl,f.makeFetchOptionsForUpload(a),f.responseIsRaw,q=>{f.handleUploadSuccess(b,q)},q=>{f.handleUploadFailure(b,q)})},handleUploadSuccess:function(b,g){b[h.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(b,g);this.updateValueFromFiles()},handleUploadFailure:(b,g)=>{w("Upload failure:"+g.status+
":"+g.message)},parseServerPathFromResponse:(b,g)=>null,addFile:function(b){this.files.push(b);this.updateValueFromFiles();this.fireEvent("addFile",b)},removeFile:function(b){const g=this.files;let d=g.length;for(;d;)if(h.isSameFile(g[--d],b)){g.splice(d,1);this.updateValueFromFiles();this.fireEvent("removeFile",b);break}},updateValueFromFiles:function(){const b=[];var g=this.files;let d=g.length;for(;d;){const f=g[--d][h.FILE_ATTR_SERVER_PATH];f&&b.push(f)}g=b.length;(this.value=1===g?b[0]:0===g?
void 0:b)||this.fileInput.clearValue();this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const b=this.files;let g=b.length;for(;g;)this.removeFile(b[--g])}}),l=u.ImageUploader=new x("ImageUploader",h,{extend:{isImageFile:b=>/image/i.test(b.type)},initNode:function(b,g){g.maxFiles=1;this.callSuper(b,g)},filterFiles:function(b){if(l.isImageFile(b)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(b)}},
addFile:function(b){const g=this,d=l.isImageFile(b);g.callSuper(b);const f=g.imageView=new u.Image(g,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[u.SizeToParent]);f.file=b;const a=q=>{const n=new Image;n.onload=()=>{b.width=n.width;b.height=n.height;f&&!f.destroyed&&g.updateImage(b,f,n.src)};n.src=q};d?-1===b.size?a(b.serverPath):l.isImageFile(b)&&h.readFile(b,a):-1===b.size?g.updateImage(b,f,b.serverPath):h.readFile(b,q=>{g.updateImage(b,
f,q)});return f},removeFile:function(b){this.callSuper(b);const g=this.getSubviews();let d=g.length;for(;d;){const f=g[--d];if(h.isSameFile(f.file,b)){f.destroy();break}}},handleDroppedFile:function(b,g){this.callSuper(b,g);this.uploadFile(b,this.uploadUrl)},updateImage:function(b,g,d){this.nativeWidth=b.width;this.nativeHeight=b.height;g.setImageUrl(d)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(u=>{const x=(w,v,k,e)=>{k=k.bind(w);"y"!==w.axis&&(k(v,e,"x"),k(v,e,"boundsWidth"));"x"!==w.axis&&(k(v,e,"y"),k(v,e,"boundsHeight"));k(v,e,"visible")};u.SizeToChildren=new JS.Class("SizeToChildren",u.Layout,{initNode:function(w,v){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,v)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const v=this.parent;if(!v.isBeingDestroyed){const k=this.subviews;var w=k.length;const e=this.axis,c=Math.max;let h,l;if("y"!==e){h=w;for(l=0;h;){const b=k[--h];b.visible&&(l=c(l,b.x+(0<b.boundsWidth?b.boundsWidth:0)))}v.setWidth(l+
this.paddingX)}if("x"!==e){h=w;for(l=0;h;)w=k[--h],w.visible&&(l=c(l,w.y+(0<w.boundsHeight?w.boundsHeight:0)));v.setHeight(l+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){x(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){x(this,w,this.detachFrom,"update")}})})(myt);
(u=>{let x=0;const w=JS.Class,{View:v,SizeToParent:k,RootView:e}=u,c=u.Dimmer=new w("Dimmer",v,{include:[k],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(l,b){this.restoreFocus=!0;b.focusable=b.focusCage=!0;b.percentOfParentWidth??(b.percentOfParentWidth=100);b.percentOfParentHeight??(b.percentOfParentHeight=100);b.visible??(b.visible=!1);b.ignoreLayout??(b.ignoreLayout=!0);this.callSuper(l,b);this.overlay=new v(this,{ignorePlacement:!0,opacity:c.OPACITY,bgColor:c.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[k]);for(const g of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",g);e.setupCaptureDrop(this)},destroy:function(){e.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(l){this.restoreFocus=l},eatMouseEvent:l=>!0,show:function(){const l=u.global.focus;this.prevFocus=l.focusedView??l.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(l){this.visible&&
(this.setVisible(!1),!l&&this.restoreFocus&&this.prevFocus?.focus())}}),h=u.ModalPanel=new w("ModalPanel",c,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(l,b){const g={name:"content",ignorePlacement:!0},d={...g,align:"center",valign:"middle"};this.defaultPlacement="content";b.sizingStrategy??(b.sizingStrategy="children");b.marginTop??(b.marginTop=h.MARGIN_TOP);b.marginLeft??
(b.marginLeft=h.MARGIN_LEFT);b.marginBottom??(b.marginBottom=h.MARGIN_BOTTOM);b.marginRight??(b.marginRight=h.MARGIN_RIGHT);b.paddingX??(b.paddingX=h.PADDING_X);b.paddingY??(b.paddingY=h.PADDING_Y);this.callSuper(l,b);switch(this.sizingStrategy){case "children":new u.SizeToChildren(new v(this,d),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new v(this,{...g,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[k]);break;case "basic":new v(this,d);break;default:new v(this,g)}},setSizingStrategy:function(l){this.sizingStrategy=l},setMarginTop:function(l){this.marginTop=l},setMarginLeft:function(l){this.marginLeft=l},setMarginBottom:function(l){this.marginBottom=l},setMarginRight:function(l){this.marginRight=l},setPaddingX:function(l){this.paddingX=l},setPaddingY:function(l){this.paddingY=l},
show:function(){this.callSuper();x++},hide:function(l){this.callSuper(l);x=Math.max(0,x-1)}})})(myt);
(u=>{const x=v=>{v[v.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=v=>{const k=v.size,e=v.getIDS();v.setWidth(k);v.setHeight(k);e.width=e.height=k-2*v.borderWidth+"px"};u.Spinner=new JS.Class("Spinner",u.View,{initNode:function(v,k){this.lateAttrs=["spinColor"];k.visible??(k.visible=!1);k.borderWidth??(k.borderWidth=5);k.borderColor??(k.borderColor="#fff");k.borderStyle??(k.borderStyle="solid");k.spinColor??(k.spinColor="#000");this.callSuper(v,k);this.getIDS().borderRadius="50%";w(this);
x(this)},setSize:function(v){this.size!==v&&(this.size=v,this.inited&&w(this))},setSpinColor:function(v){this.spinColor!==v&&(this.getIDS().borderTopColor=this.spinColor=v,this.inited&&this.fireEvent("spinColor",v))},setBorderWidth:function(v){this.borderWidth!==v&&(this.callSuper(v),this.inited&&w(this))},setVisible:function(v){this.visible!==v&&(this.callSuper(v),this.inited&&x(this))}})})(myt);
(u=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=e=>{if(Array.isArray(e)){let c=e.length;if(0<c){e.unshift("fa");c++;e[1].startsWith("fa-")||(e[1]="fa-"+e[1]);3<=c&&(e[2]=x[e[2]]??"");if(3<c)for(let h=3;c>h;h++)e[h].startsWith("fa-")||(e[h]="fa-"+e[h]);return'<i class="'+e.join(" ")+'"></i>'}}u.dumpStack("Error making tag");console.error(e);return""},v=e=>{let c=e.properties;c=c?"string"===typeof c?c.split(" "):c.slice():[];c.unshift(e.icon,e.size);e.setHtml(w(c))},k=e=>{for(const c of["Free 400",
"Free 900","Brands 400"])u.registerForFontNotification(e,"Font Awesome 5 "+c)};u.FontAwesome=new JS.Class("FontAwesome",u.Markup,{extend:{makeTag:w,registerForNotification:k},initNode:function(e,c){this.size=0;this.icon="";this.callSuper(e,c);v(this);k(this)},setIcon:function(e){const c=this.icon;this.set("icon",e,!0);this.inited&&c!==e&&v(this)},setSize:function(e){const c=this.size;this.set("size",e,!0);this.inited&&c!==e&&v(this)},setProperties:function(e){this.properties=e;this.fireEvent("properties",
e);this.inited&&v(this)}});u.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(u=>{let x,w,v,k,e=0,c=0,h=0,l=255,b=[],g,d,f,a,q,n,r,t,z,D,G,L,J,N,Q,m,p,y,A,C,E,I,K,R,M,T;const ea=JS.Class,{View:U,Text:la,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=u,{min:ha,max:ia}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(B,F){F.height??(F.height=17);F.paddingTop??(F.paddingTop=3);F.paddingLeft??
(F.paddingLeft=10);F.paddingRight??(F.paddingRight=10);F.activeColor??(F.activeColor="#bbb");F.hoverColor??(F.hoverColor="#ddd");F.readyColor??(F.readyColor="#ccc");F.domClass="mytButtonText";this.callSuper(B,F)}}),La=oa(["check"]),Ia=B=>{for(let F of B)7===F?.length&&(F+="ff"),Ha[F]=!0},Ha={},Ma=new ea("Swatch",U,{include:[wa],initNode:function(B,F){const H=F.width=F.height=16;F.border=Ga;F.domClass="mytCheckerboardPattern";const O=F.bgColor;this.callSuper(B,F);this.colorView=new U(this,{width:H,
height:H,bgColor:O});O===k&&(B=qa.makeColorFromHexString(k),new la(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>B.red+B.green+B.blue?"#fff":"#000"}))},setBgColor:function(B){this.colorView?.setBgColor(B);this.setTooltip(B)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=u.ColorPicker=new ea("ColorPicker",U,{initNode:function(B,F){x=this;x._isReady=!1;let H=F.color??"transparent";delete F.color;
v=F.alphaChannel??!1;delete F.alphaChannel;g=F.palette??[];Ia(g);delete F.palette;w="transparent"===H;x.callSuper(B,F);d=new U(x,{width:160,height:170});new Ca(d,{spacing:4,lineSpacing:4});f=new U(x,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(O,P){f.callSuper(f.x,f.y);const V=this.getPagePosition();c=parseFloat(ia(0,ha(1,(O+this.dragInitX-V.x)/this.width)));h=parseFloat(1-ia(0,ha(1,(P+this.dragInitY-V.y)/this.height)));w=!1;x.updateUI()}}]);B=new U(f,{width:139,height:139});
F=new U(B,{width:139,height:139});B.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";F.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";a=new U(F,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});q=new U(x,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(O,P){this.callSuper(q.x,q.y);e=parseFloat(ia(0,ha(1,(P+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;x.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new U(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new U(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);B=146;v&&(z=new u.LabelSlider(x,{x:170,y:B,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(O,P){P=O.value;if(null==P||isNaN(P))P=
0;O.value=u.formatAsPercentage(P/255,0);this.callSuper(O,!0);l=P;x._isReady&&(w=!1,x.updateUI())}}]),B+=23);r=new u.InputText(x,{x:236,y:B,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(r,"_submitInput","blur");x.attachToDom(r,"_handleKeyDown","keydown");r.getIDS().paddingLeft="6px";B=new U(x,{x:170,y:B,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new U(B,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{x.setColor(H)}}]);t=new U(B,{x:30,width:30,height:23});if(B=Ea.getItem("myt.default"))b=B.split(";"),Ia(b);x.setColor(H);x._isReady=!0},_handleKeyDown:B=>{u.KeyObservable.isEnterKeyEvent(B)&&x._submitInput()},_submitInput:()=>{x.setColor(r.value)},addToPalette:B=>{B&&"transparent"!==B&&!Ha[B]&&(b.unshift(B),b.length=ha(b.length,56),Ea.setItem("myt.default",b.join(";")))},setColor:B=>{const F=B&&"transparent"!==B;if(v){let H="ff";F&&7<B.length&&(H=B.slice(7,9),B=B.slice(0,7));z.setValue(parseInt(H,
16))}else F&&7<B.length&&(B=B.slice(0,7));F?(B=qa.makeColorFromHexString(B).getHSV(),e=B.h/360,c=B.s,h=B.v,w=!1):w=!0;x.updateUI()},getColor:()=>{if(w)return"transparent";let B="";v&&(B=l.toString(16),2>B.length&&(B="0"+B));return qa.makeColorFromHSV(360*e,100*c,100*h).getHtmlHexString()+B},updateUI:()=>{const B=!w;n.setVisible(B);a.setVisible(B);B&&(a.setX(ia(0,ha(1,c)*(f.width+2))-5),a.setY(ia(0,ha(1,1-h)*(f.height+2))-5),n.setY(e*(q.height-2)-1));f.setBgColor(qa.makeColorFromHSV(360*e,100,100).getHtmlHexString());
k=x.getColor();r.setValue(k);t.setBgColor(k);x.redrawPalette()},redrawPalette:u.debounce(()=>{d.destroyAllSubviews();const B=new Set;g.push(...b);for(let F of g)if(v||7===F.length)7===F.length&&(F+="ff"),B.has(F)||(new Ma(d,{bgColor:F}),B.add(F))},50)}),ya=B=>{B=B.split(":");return[ia(0,ha(23,parseInt(B[0]))),ia(0,ha(60,parseInt(B[1])))]},Ja=new ea("SelectableBtn",na,{include:[u.Selectable],setSelected:function(B){this.callSuper(B);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(B,F){F.width=J?175:49;this.callSuper(B,F)},doActivated:function(){this.callSuper();const B=this.text,F=ya(B);T.selectById(B);E.setHours(F[0]);E.setMinutes(F[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(B,F){F.width=23;F.border=xa;this.callSuper(B,F)},setData:function(B){this.data=B},setIsAnotherMonth:function(B){this.isAnotherMonth=B},setIsToday:function(B){this.isToday=B},setIsSunday:function(B){this.isSunday=
B},setIsSaturday:function(B){this.isSaturday=B},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const B=new Date(this.data);B.setHours(E.getHours());B.setMinutes(E.getMinutes());pa(B)}}),pa=B=>{B.setSeconds(0);B.setMilliseconds(0);var F=6>=Q.length,H;if(F)for(H=7;H--&&!Q.includes(B.getDay());)B.setDate(B.getDate()+
1);E=B;const O=T.getODE().scrollTop;var P=new Date,V=P.getFullYear(),S=P.getMonth(),W=P.getDate();P.getHours();P.getMinutes();const aa=B.getFullYear(),ca=B.getMonth(),ka=B.getDate();var da=B.getTime();P=B.getHours();B=B.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-N,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);V=V==aa&&S==ca;if(!J){S=M;S.deselectAll();S.destroyAllSubviews();H=new Date(da);const ja=7+N;S=G.days;K.setText(aa+" "+
G.sep+" "+G.months[ca]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);I.setVisible(null==m||m<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ca+1);R.setVisible(null==p||p>H.getTime());for(H=0;7>H;H++)new la(M,{width:23,height:20,textAlign:"center",text:S[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>ra&&(H=-7,fa=35);S=new Date(da);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);H<fa;H++){var X=H+1-ra;const Aa=(H+ja)%7,Y=new Pa(M);ra>H?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),S.setDate(za+X),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear())):H<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),S.setDate(X),S.setMonth(ca),S.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),S.setDate(X-sa),S.setMonth(ua.getMonth()),S.setYear(ua.getFullYear()));F&&!Q.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===ka&&(M.select(Y),Y.focus()),V&&X===W&&Y.setIsToday(!0),X=new Date(S.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=m&&m>X.getTime()||null!=p&&p<S.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!L){F=60*A[0]+A[1];W=T;W.deselectAll();W.destroyAllSubviews();let [ja,fa]=y;for(S=new Date(da);60*ja+fa<F;)da=new Oa(T,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===P&&fa===B&&T.select(da),S.setHours(ja),S.setMinutes(fa),W=S.getTime(),(null!=m&&m>W||null!=p&&p<W)&&da.setDisabled(!0),
fa+=C,60<=fa&&(fa-=60,ja++);T.scrollYTo(O)}},Qa=u.DatePicker=new ea("DatePicker",U,{initNode:function(B,F){D=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...F.opt};delete F.opt;D.callSuper(B,F);G=H.locales[H.locale??"en"];L=H.dateOnly;J=H.timeOnly;N=H.firstDayOfWeek;C=ia(5,ha(30,H.minuteInterval));Q=H.allowedDays;Array.isArray(Q)&&0!==Q.length||
(Q=[0,1,2,3,4,5,6]);m=Date.parse(H.minDate);m=isNaN(m)?null:m;p=Date.parse(H.maxDate);p=isNaN(p)?null:p;y=ya(H.minTime);A=ya(H.maxTime);B=new U(D,{visible:!J});H.showTodayButton&&new na(B,{width:24,text:oa(["home"]),tooltip:G.today},[{doActivated:()=>{pa(new Date)}}]);I=new na(B,{width:24,x:28,text:oa(["chevron-left"]),tooltip:G.prevMonth},[{doActivated:()=>{const O=(new Date(E.getFullYear(),E.getMonth(),0)).getDate();O<E.getDate()&&E.setDate(O);E.setMonth(E.getMonth()-1);pa(E);I.focus()}}]);K=new la(B,
{width:100,x:52,textAlign:"center"});R=new na(B,{width:24,x:152,text:oa(["chevron-right"]),tooltip:G.nextMonth},[{doActivated:()=>{var O=(new Date(E.getFullYear(),E.getMonth()+1,0)).getDate();O<E.getDate()&&E.setDate(O);O=(new Date(E.getFullYear(),E.getMonth()+2,0)).getDate();O<E.getDate()&&E.setDate(O);E.setMonth(E.getMonth()+1);pa(E);R.focus()}}]);M=new U(D,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(M,{spacing:2,lineInset:2,lineSpacing:3});T=new U(D,
{x:J?0:195,y:J?0:25,width:(J?175:49)+u.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!L,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(T,{axis:"y",inset:1,spacing:3});D.setWidth(T.visible?T.x+T.width:M.width);pa(H.current??new Date)},getPickedDate:()=>E}),Z=u.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(B,F){F.buttonClass??(F.buttonClass=Z.BUTTON_CLASS);this.callSuper(B,F);B=this.content;B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER);B.setFocusCage(!0);this.makeCloseButton(B)},setButtonClass:function(B){this.buttonClass=B},setCallbackFunction:function(B){this.callbackFunction=B},makeButton:function(B,F){const H=this;return new H.buttonClass(B,
F,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(B){return B.closeBtn=this.makeButton(B,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(B){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(B)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const B=this.content,F=B.sizeToChildren;B.destroyAllSubviews(H=>"closeBtn"!==H.name);B.setVisible(!0);this.overlay.setBgColor(u.Dimmer.COLOR);this.setCallbackFunction();F.setPaddingY(ba.PADDING_Y);F.setPaddingX(ba.PADDING_X);B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER)},doCallback:function(B){const F=this.callbackFunction;F&&F.call(this,B.name)||this.hide()},showBlank:function(B){this.destroyContent();this.content.setVisible(!1);
B?.bgColor&&this.overlay.setBgColor(B.bgColor);this.show()},showMessage:function(B,F,H){const O=this.content,P=O.closeBtn;H={...Z.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(F);B=O.msg=new la(O,{text:B,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ba.PADDING_X:H.msgX,y:null==H.msgY?ba.PADDING_Y:H.msgY,width:H.width});H.titleText&&(this.setupTitle(O,H.titleText),B.setY(B.y+24));this.show();!1===H.showClose?P.setVisible(!1):(P.setVisible(!0),
P.focus())},showSimple:function(B,F,H,O){H=H??{};const P=this.content,V=P.closeBtn,S=H.maxContainerHeight;this.destroyContent();H.bgColor&&P.setBgColor(H.bgColor);H.roundedCorners&&P.setRoundedCorners(H.roundedCorners);H.boxShadow&&P.setBoxShadow(H.boxShadow);H.border&&P.setBorder(H.border);P.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=P.contentContainer=new U(P,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>S&&(W=S);this.callSuper(W)}}]);B.call(this,F);new va(F,{axis:"both"});
this.show();V.setVisible(!0);V.focus();H.titleText&&(this.setupTitle(P,H.titleText),F.setY(this.header.height+1));F.initialFocus?.focus();O?.(this)},showConfirm:function(B,F,H){H={...Z.CONFIRM_DEFAULTS,...H};this.showMessage(B,F,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(B,F,H,O){H={...Z.CONFIRM_DEFAULTS,...H};const P=this.content,V=P.closeBtn,S=H.maxContainerHeight;this.destroyContent();P.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=P.contentContainer=
new U(P,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>S?S:W)}}]);B.call(this,F);new va(F,{axis:"both"});this.show();V.setVisible(!0);V.focus();this.setupTitle(P,H.titleText);F.setY(this.header.height+1);this.setupFooterButtons(F,H);F.initialFocus?.focus();O?.(this)},showSpinner:function(B,F){const H=this.content;F={...Z.NO_WRAP_TEXT_DEFAULTS,...F};this.destroyContent();const O=this.spinner=new u.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==F.msgY?ba.PADDING_Y:
F.msgY});B&&new la(H,{text:B,whiteSpace:F.whiteSpace,wordWrap:F.wordWrap,fontWeight:F.fontWeight,x:null==F.msgX?ba.PADDING_X:F.msgX,y:O.y+O.size+ba.PADDING_Y,width:F.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(B,F){const H=this,O=H.content,P=O.closeBtn;F={...Z.COLOR_PICKER_DEFAULTS,...F};H.destroyContent();H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":B.call(H,V);break;case "confirmBtn":const S=x.getColor();x.addToPalette(S);B.call(H,
V,S)}x.destroy()});x=new Na(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(F.alphaChannel?23:0),color:F.color,alphaChannel:F.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();P.setVisible(!0);P.focus();H.setupFooterButtons(x,F);H.setupTitle(O,F.titleText)},showDatePicker:function(B,F){const H=this,O=H.content,P=O.closeBtn;F={...Z.DATE_PICKER_DEFAULTS,...F};H.destroyContent();
H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":B.call(H,V);break;case "confirmBtn":B.call(H,V,D.getPickedDate())}D.destroy()});D=new Qa(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(F.initialDate??Date.now()),dateOnly:F.dateOnly||!1,timeOnly:F.timeOnly||!1,locales:F.locales,locale:F.locale}});H.show();P.setVisible(!0);P.focus();H.setupFooterButtons(D,F);H.setupTitle(O,F.timeOnly?F.timeOnlyTitleText:F.titleText)},setupTitle:function(B,F){const H=Z.RADIUS;
(this.header=new U(B,{ignoreLayout:!0,width:B.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();B.title=new la(B,{x:H,y:4,text:F,fontWeight:"bold"})},setupFooterButtons:function(B,F){const H=this.content;var O=ba.PADDING_Y,P=O/2;B=H.btnContainer=new U(H,{y:B.y+B.height+O,align:"center"});const V=["active","hover","ready","text"];O=F.cancelAttrs??{};var S;(S=O).name??(S.name="cancelBtn");let W;(W=O).text??(W.text=F.cancelTxt);for(let da of V)da+="Color",
null!=F[da]&&(O[da]=F[da]);S=this.makeButton(B,O);O=F.confirmAttrs??{};var aa;(aa=O).name??(aa.name="confirmBtn");let ca;(ca=O).text??(ca.text=F.confirmTxt);for(var ka of V)ka+="Color",aa=ka+"Confirm",null!=F[aa]&&(O[ka]=F[aa]);this.makeButton(B,O);if(ka=F.button)for(const da of ka)this.makeButton(B,da);new va(B,{axis:"y"});new Ba(B,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(P);P=B.y-P;(new U(H,{ignoreLayout:!0,y:P,width:H.width,height:H.height-P,bgColor:"#eee"})).sendToBack();!1===
F.showClose&&S.focus()}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,v={},k=(d,f)=>{if(d){const a=d.id;d.id?f(a):w("No ID")}else w("No validator")},e=d=>{k(d,f=>{v[f]=d})},c=u.Validator=new x("Validator",{initialize:function(d){this.id=d},isValid:(d,f,a)=>!0,isFormValid:function(d,f,a){f??={};f.form=d;return this.isValid(d.getValue(),f,a)}}),h=u.RequiredFieldValidator=new x("RequiredFieldValidator",c,{isValid:(d,f,a)=>null==d||""===d||"string"===typeof d&&""===d.trim()?(a?.push("This value is required."),!1):!0}),l=u.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",c,{isValid:(d,f,a)=>{f=f.form.getRollbackValue();return d&&f&&d.toLowerCase()===f.toLowerCase()?(a?.push("Value must differ by more than just case."),!1):!0}}),b=u.URLValidator=new x("URLValidator",c,{initialize:function(d,f){this.callSuper(d);this.originalRawQuery=f},isValid:function(d,f,a){return(new u.URI(d)).toString(this.originalRawQuery)!==d?(a?.push("Invalid URL."),!1):!0}}),g=u.JSONValidator=new x("JSONValidator",c,{isValid:(d,f,a)=>{try{return JSON.parse(d),
!0}catch(q){return a?.push(q),!1}}});u.EqualFieldsValidator=new x("EqualFieldsValidator",c,{initialize:function(d,f,a){this.callSuper(d);this.fieldA=f;this.fieldB=a},isValid:function(d,f,a){if(d&&this.fieldA.getValue()===this.fieldB.getValue())return!0;a?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});u.LengthValidator=new x("LengthValidator",c,{initialize:function(d,f,a){this.callSuper(d);this.min=f;this.max=a},isValid:function(d,f,a){d=d?d.length:
0;f=this.min;const q=this.max;return void 0!==f&&f>d?(a?.push("The value must not be less than "+f+" characters long."),!1):void 0!==q&&q<d?(a?.push("The value must not be greater than "+q+" characters long."),!1):!0}});u.NumericRangeValidator=new x("NumericRangeValidator",c,{initialize:function(d,f,a){this.callSuper(d);this.min=f;this.max=a},isValid:function(d,f,a){if(""===d)return!0;d=Number(d);f=this.min;const q=this.max;return isNaN(d)?(a?.push("Value is not a number."),!1):void 0!==f&&f>d?(a?.push("Value must not be less than "+
f+"."),!1):void 0!==q&&q<d?(a?.push("Value must not be greater than "+q+"."),!1):!0}});u.CompoundValidator=new x("CompoundValidator",c,{initialize:function(d,...f){this.callSuper(d);for(d=f.length;d;){let a=f[--d];"string"===typeof a&&((f[d]=a=v[a])||f.splice(d,1))}this.__v=f},addValidator:function(d){"string"===typeof d&&(d=v[d]);d&&this.__v.push(d)},isValid:function(d,f,a){const q=this.__v,n=q.length;let r=!0,t=0;for(;n>t;)r=q[t++].isValid(d,f,a)&&r;return r}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){e(new h("required"));e(new l("equalsIgnoreCase"));e(new b("url"));e(new g("json"));u.global.register("validators",this)},getValidator:d=>v[d],register:e,unregister:d=>{k(d,f=>{v[f]&&delete v[f]})}})})(myt);
(u=>{const x=JS.Class,{min:w,max:v,round:k,abs:e}=Math,c=u.View,h=new x("SliderThumb",u.SimpleButton,{include:[u.Draggable,u.ArrowKeyActivation],initNode:function(b,g){const d=g.width=b.thumbWidth,f=g.height=b.thumbHeight;g.roundedCorners=w(f,d)/2;g.repeatKeyDown=!0;g.activationKeys=u.global.keys.ARROW_KEYS;g.activeColor="#bbb";g.readyColor="#ccc";g.hoverColor="#ddd";g.boxShadow=[0,0,4,"#666"];this.callSuper(b,g);this["x"===b.axis?"setY":"setX"](b.thumbOffset);this.syncTo(b,"setDisabled","disabled");
b._syncThumbToValue(this,b.getValue())},setDisabled:function(b){this.callSuper(this.valueFromEvent(b))},setFocused:function(b){this.callSuper(b);b&&this.makeHighestZIndex()},setX:function(b){this.x!==b&&(this.callSuper(b),b=this.parent,"x"===b.axis&&b.syncValueToThumb(this))},setY:function(b){this.y!==b&&(this.callSuper(b),b=this.parent,"y"===b.axis&&b.syncValueToThumb(this))},requestDragPosition:function(b,g){if(!this.disabled){const d=this.parent,f=d.getMinPixelValueForThumb(this),a=d.getMaxPixelValueForThumb(this),
q=d.snapThreshold;let n;"x"===d.axis?(n=this.width/2,g="setX"):(n=this.height/2,b=g,g="setY");if(d.allowSnap(this))for(let r of d.getSnapValuesAsPx())if(r-=n,e(b-r)<=q){b=r;break}this[g](w(v(b,f-n),a-n))}},doKeyArrowLeftOrUp:function(b,g){b?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(b,g){b?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),l=u.BaseSlider=new x("BaseSlider",c,{include:[u.Disableable],initNode:function(b,
g){g.axis??(g.axis="x");"x"===g.axis?(g.width??(g.width=100),g.height??(g.height=18)):(g.width??(g.width=18),g.height??(g.height=100));g.bgColor??(g.bgColor="#999");g.roundedCorners??(g.roundedCorners=9);g.trackInset??(g.trackInset=9);g.trackOutset??(g.trackOutset=9);g.thumbWidth??(g.thumbWidth=16);g.thumbHeight??(g.thumbHeight=16);g.thumbOffset??(g.thumbOffset=1);g.nudgeAmount??(g.nudgeAmount=1);g.snapThreshold??(g.snapThreshold=8);g.snapValues??(g.snapValues=[]);this.callSuper(b,g)},setAxis:function(b){this.axis=
b},setTrackInset:function(b){this.trackInset=b},setTrackOutset:function(b){this.trackOutset=b},setThumbWidth:function(b){this.thumbWidth=b},setThumbHeight:function(b){this.thumbHeight=b},setThumbOffset:function(b){this.thumbOffset=b},setNudgeAmount:function(b){this.nudgeAmount=b},setSnapThreshold:function(b){this.snapThreshold=b},setSnapValues:function(b){this.snapValues=b},getSnapValuesAsPx:function(){const b=[];for(const g of this.snapValues)b.push(this.convertValueToPixels(g));return b},allowSnap:function(b){var g=
b.__lastMousePosition;const d=u.DomElementProxy.getRelativePosition(b.getODE()),f="x"===this.axis;b=f?b.height:b.width;g=f?g.y-d.y:g.x-d.x;return 0<g&&g<b},convertValueToPixels:function(b){const g=this.minValue,d=this.trackInset;return d+(("x"===this.axis?this.width:this.height)-d-this.trackOutset)/(this.maxValue-g)*(b-g)},convertPixelsToValue:function(b){const g=this.minValue,d=this.trackInset;return(this.maxValue-g)/(("x"===this.axis?this.width:this.height)-d-this.trackOutset)*(b-d)+g},nudgeValueLeft:function(b){this._nudge(b,
!1)},nudgeValueUp:function(b){this._nudge(b,!1)},nudgeValueRight:function(b){this._nudge(b,!0)},nudgeValueDown:function(b){this._nudge(b,!0)},_nudge:(b,g)=>{},_syncThumbToValue:function(b,g){g=this.convertValueToPixels(g);"x"===this.axis?b.setX(g-b.width/2):b.setY(g-b.height/2)},syncValueToThumb:function(b){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(b,this.convertPixelsToValue("x"===this.axis?b.x+b.width/2:b.y+b.height/2)),this.__lockSync=!1)},_syncValueToThumb:(b,g)=>
{},getMinPixelValueForThumb:function(b){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(b){return this.convertValueToPixels(this.maxValue)}});u.RangeSlider=new x("RangeSlider",l,{include:[u.BoundedRangeComponent],initNode:function(b,g){this.callSuper(b,g);b=this.rangeFill=new c(this,{bgColor:"#666"});"x"===this.axis?(b.setY(this.thumbOffset),b.setHeight(this.thumbHeight),b.setRoundedCorners(this.thumbHeight/2)):(b.setX(this.thumbOffset),b.setWidth(this.thumbWidth),
b.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new h(this);this.thumbUpper=new h(this);this._syncRangeFillToValue()},setValue:function(b){this.callSuper(b);this.inited&&(this.__lockSync||(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,b)),this._syncRangeFillToValue())},setWidth:function(b){const g=this.width;this.callSuper(b);this.inited&&"x"===this.axis&&this.width!==g&&(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,
b))},setHeight:function(b){const g=this.height;this.callSuper(b);this.inited&&"y"===this.axis&&this.height!==g&&(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,b))},_syncRangeFillToValue:function(){const b=this.rangeFill;var g=this.getValue();const d=this.convertValueToPixels(g.lower);g=this.convertValueToPixels(g.upper)-d;"x"===this.axis?(b.setX(d),b.setWidth(g)):(b.setY(d),b.setHeight(g))},_syncThumbToValue:function(b,g){this.callSuper(b,"thumbLower"===
b.name?g.lower:g.upper)},_syncValueToThumb:function(b,g){let d=this.getValueCopy();d["thumbLower"===b.name?"lower":"upper"]=g;this.setValue(d);d=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,d);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,d)},_nudge:function(b,g){const d=this.getValueCopy();g=this.nudgeAmount*(g?1:-1);"thumbLower"===b.name?d.lower=w(d.lower+g,d.upper):d.upper=v(d.upper+g,d.lower);this.setValue(d)},getMinPixelValueForThumb:function(b){return this.convertValueToPixels("thumbLower"===
b.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(b){return this.convertValueToPixels("thumbLower"===b.name?this.getValue().upper:this.maxValue)}});u.Slider=new x("Slider",l,{include:[u.BoundedValueComponent],initNode:function(b,g){this.callSuper(b,g);this.thumb=new h(this)},setValue:function(b){this.callSuper(b);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(b){const g=this.width;this.callSuper(b);this.inited&&"x"===
this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(b){const g=this.height;this.callSuper(b);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(b,g){this.setValue(g);this._syncThumbToValue(b,this.getValue())},_nudge:function(b,g){this.setValue(this.getValue()+this.nudgeAmount*(g?1:-1))}});u.LabelSlider=new x("LabelSlider",u.Slider,{initNode:function(b,g){const d=this;g.labelX??
(g.labelX=8);g.labelY??(g.labelY=2);g.labelFontSize??(g.labelFontSize="12px");g.labelColor??(g.labelColor="#000");g.flipThreshold??(g.flipThreshold=k((g.maxValue-g.minValue)/2)||0);d.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],g);d.callSuper(b,g);const f=d.labelX;d.labelTxt=new u.Text(d,{x:f,y:d.labelY,textColor:d.labelColor,fontSize:d.labelFontSize},[{initNode:function(a,q){this.targetX=f;this.callSuper(a,q)},updateX:function(a){const q=d.getValue()>=d.flipThreshold?
f:d.width-this.width-f;this.targetX!==q&&(this.targetX=q,this.stopActiveAnimators("x"),a?this.setX(q):this.animate({attribute:"x",to:q,duration:250}))}}]);d.syncTo(d,"setText","value")},setWidth:function(b){this.callSuper(b);this.labelTxt?.updateX(!0)},setText:function(b,g){const d=this.labelTxt;d&&(d.setText(b.value),d.updateX(g))}})})(myt);
(u=>{const x=JS.Class,{abs:w,min:v}=Math,{CODE_ENTER:k,CODE_SPACE:e,ARROW_KEYS:c}=u.global.keys,h=b=>{const g="y"===b.axis?"height":"width";b.constrain("__limitToParent",[b,"limitToParent",b,g,b.parent,g])};var l=u.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(b,g){g.nudgeTargetValue??(g.nudgeTargetValue="value");g.nudgeIncrement??(g.nudgeIncrement=1);g.nudgeMin??(g.nudgeMin=1);g.nudgeMax??(g.nudgeMax=64);this.__nudgeAcc=g.nudgeMin;this.callSuper(b,g)},setNudgeIncrement:function(b){this.set("nudgeIncrement",
w(b),!0)},setNudgeMin:function(b){this.set("nudgeMin",w(b),!0)},setNudgeMax:function(b){this.set("nudgeMax",w(b),!0)},setNudgeTargetValue:function(b){this.set("nudgeTargetValue",b,!0)},nudge:function(b,g){const d=this.nudgeTargetValue;g=this.__nudgeAcc=g?v(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(d,(this.get(d)||0)+(b?1:-1)*g);return!0}});l=new x("BaseDivider",u.SimpleButton,{include:[u.BoundedValueComponent,u.Draggable,u.ArrowKeyActivation,l],initNode:function(b,
g){g.activeColor??(g.activeColor="#bbb");g.hoverColor??(g.hoverColor="#ddd");g.readyColor??(g.readyColor="#ccc");g.axis??(g.axis="x");g.minValue??(g.minValue=0);g.value??(g.value=g.minValue);g.expansionState??(g.expansionState=2);g.focusIndicator??(g.focusIndicator=!1);g.repeatKeyDown??(g.repeatKeyDown=!0);g.activationKeys??(g.activationKeys=[k,e,...c]);"y"===g.axis?(g.height??(g.height=6),g.cursor??(g.cursor="row-resize")):(g.width??(g.width=6),g.cursor??(g.cursor="col-resize"));this.quickSet(["axis"],
g);this.callSuper(b,g);null==g.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&h(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(b){this.expansionState=b},setRestoreValue:function(b){this.restoreValue=b},setLimitToParent:function(b){this.limitToParent!==b&&(this.limitToParent=b,this.inited&&(this.fireEvent("limitToParent",b),null==b?this.releaseConstraint("__limitToParent"):h(this)))},setAxis:function(b){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=b},setValue:function(b){this.callSuper(b);b=this.value;"y"===this.axis?this.setY(b):this.setX(b)},__limitToParent:function(b){b="y"===this.axis?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b])},doActivationKeyDown:function(b,g){this.callSuper(b,g);switch(b){case k:case e:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(b,g){return this.nudge(!1,g)},doKeyArrowRightOrDown:function(b,g){return this.nudge(!0,g)},nudge:function(b,g){b=this.callSuper(b,g);this.setExpansionState(2);
this.setRestoreValue(this.value);return b},doPrimaryAction:function(){const {restoreValue:b,maxValue:g,minValue:d}=this;let f;switch(this.expansionState){case 0:null!=b&&(this.setExpansionState(1),b===d?b!==g&&this.doPrimaryAction():f=b);break;case 1:null!=g&&(this.setExpansionState(3),this.value===g?this.doPrimaryAction():f=g);break;case 2:null!=d&&(this.setExpansionState(0),this.value===d?this.doPrimaryAction():f=d);break;case 3:null!=b&&(this.setExpansionState(2),b===g?this.doPrimaryAction():f=
b)}this.animateToValue(f)},animateToValue:function(b,g=250){null!=b&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:b,duration:g}))},requestDragPosition:function(b,g){this.disabled||(b="y"===this.axis?g:b,g=this.value,b!==g&&(this.setValue(b),this.setRestoreValue(b),this.setExpansionState(g>b?2:1)))}});u.HorizontalDivider=new x("HorizontalDivider",l,{initNode:function(b,g){g.axis="x";this.callSuper(b,g)}});u.VerticalDivider=new x("VerticalDivider",l,{initNode:function(b,g){g.axis=
"y";this.callSuper(b,g)}})})(myt);
(u=>{let x=0;const {Class:w,Module:v}=JS,{min:k,max:e}=Math,{View:c,SpacedLayout:h,Node:{DEFAULT_PLACEMENT:l}}=u,b=m=>{const p=m.columnHeaders,[y,A]=m.sort??["",""];let C=p.length;for(;C;){const E=p[--C];E.columnId===y?E.sortable&&E.setSortState(A):E.setSortState("none")}m.locked||m.doSort()},g=(m,p,y,A)=>{if(0!==p){const K=0<p,R=[];for(var C=m.length;C;){var E=m[--C];E.resizable&&(y?0<E.flex:0===E.flex)&&R.push({hdr:E,limit:(K?E.maxValue:E.minValue)-E.value,amt:0})}m=R.length;if(0<m){for(C=0;0!==
p;){x>=m&&(C=x=0);E=R[x];var I=E.hdr;E.full?++C:(K?(I=k(y?I.flex:1,p),E.amt+I>E.limit&&(I=E.limit-E.amt,E.full=!0)):(I=e(y?-I.flex:-1,p),E.amt+I<E.limit&&(I=E.limit-E.amt,E.full=!0)),E.amt+=I,p-=I);if(C===m)break;++x}for(const M of R)M.hdr.setValue(M.hdr.value+M.amt);A?.(p)}}},d=m=>(m=m.gridController?.getPrevHdr(m))?m.maxValue-m.value+d(m):0,f=m=>(m=m.gridController?.getNextHdr(m))?m.maxValue-m.value+f(m):0,a=m=>(m=m.gridController?.getPrevHdr(m))?m.minValue-m.value+a(m):0,q=m=>(m=m.gridController?.getNextHdr(m))?
m.minValue-m.value+q(m):0,n=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0>A&&(y+=n(m,A))}return y},r=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0<A&&(y+=r(m,A))}return y},t=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&m.setValue(p),p-=m.value,0>p&&t(m,p)},z=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&
m.setValue(p),p-=m.value,0<p&&z(m,p)},D=m=>{let p="";if(m.sortable)switch(m.sortState){case Q.SORT_ORDER_ASC:p="chevron-up";break;case Q.SORT_ORDER_DESC:p="chevron-down"}m.sortIcon.setIcon(p)},G=m=>{const p=m.textView;p?.setWidth(m.width-m.outset-p.x)},L=u.GridController=new v("GridController",{initNode:function(m,p){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(m,p);this.fitHeadersToWidth();b(this)},setMaxWidth:function(m){this.set("maxWidth",
m,!0)},setMinWidth:function(m){this.set("minWidth",m,!0)},setFitToWidth:function(m){this.fitToWidth=m},setSort:function(m){u.areArraysEqual(m,this.sort)||(this.sort=m,this.inited&&(this.fireEvent("sort",m),b(this)))},setLastColumn:function(m){const p=this.lastColumn;p!==m&&(p?.setLast(!1),this.lastColumn=m,m?.setLast(!0))},setLocked:function(m){this.locked=m;if(this.inited&&!m){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const p of this.columnHeaders)this.notifyHdrXChange(p),this.notifyHdrWidthChange(p),this.notifyHdrVisibilityChange(p);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(m){m=this.valueFromEvent(m);this.gridWidth!==m&&(this.gridWidth=m,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(m){this.hdrChangeListener=m},doSort:()=>{},getPrevHdr:function(m){const p=this.columnHeaders;m=this.getHdrIndex(m);
if(0<m)for(;m;){const y=p[--m];if(y.visible)return y}},getNextHdr:function(m){const p=this.columnHeaders,y=p.length;m=this.getHdrIndex(m)+1;if(0<m&&m<y)for(;y>m;){const A=p[m++];if(A.visible)return A}},hasHdr:function(m){return this.columnHeaders.includes(m)},getHdrIndex:function(m){return this.columnHeaders.indexOf(m)},getHdrById:function(m){for(const p of this.columnHeaders)if(p.columnId===m)return p},getVisibleHdrs:function(){return this.columnHeaders.filter(m=>m.visible)},notifyAddHdr:function(m){this.hasHdr(m)||
(this.columnHeaders.push(m),m.visible&&this.setLastColumn(m),this.fixupResizerCursors())},notifyRemoveHdr:function(m){const p=this.getHdrIndex(m);-1<p&&(this.columnHeaders.splice(p,1),m.visible&&m.last&&this.setLastColumn(this.getPrevHdr(m)),this.fixupResizerCursors())},notifyHdrXChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrXChange(m);this._notifyHdrChange("X",m)}},notifyHdrWidthChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrWidthChange(m);
this._notifyHdrChange("Width",m)}},notifyHdrVisibilityChange:function(m){if((!this.__skipInvisibleHeaders||m.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(m);var p=this.setLastColumn;a:{var y=this.columnHeaders;let A=y.length;for(;A;){const C=y[--A];if(C.visible){y=C;break a}}y=void 0}p.call(this,y);p=m.visible?1:-1;this.setMaxWidth(this.maxWidth+m.maxValue*p);this.setMinWidth(this.minWidth+m.minValue*p);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
m)}},_notifyHdrChange:function(m,p){const y=this.hdrChangeListener;if(y)y["notifyHdr"+m+"Change"](p)},updateRowsForVisibilityChange:function(m){for(const p of this.rows)p.notifyHdrVisibilityChange(m)},hasRow:function(m){return this.rows.includes(m)},getRowIndex:function(m){return this.rows.indexOf(m)},getRowById:function(m,p=y=>y.model.id===m){return this.rows.find(p)},getPrevRow:function(m){m=this.getRowIndex(m)-1;return this.rows[0>m?this.rows.length-1:m]},getNextRow:function(m){m=this.getRowIndex(m)+
1;return this.rows[m<this.rows.length?m:0]},notifyAddRow:function(m,p){if(!this.hasRow(m)&&(this.rows.push(m),!this.locked)){const y=this.width;for(const A of this.columnHeaders)m.setWidth(y),m.notifyHdrXChange(A),m.notifyHdrWidthChange(A),m.notifyHdrVisibilityChange(A);p||this.doSort()}},notifyRemoveRow:function(m){m=this.getRowIndex(m);-1<m&&this.rows.splice(m,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const m=this.getVisibleHdrs();let p=0;for(const y of m)p=e(p,y.x+y.width);
g(m,this.gridWidth-p,!0,y=>{g(m,y,!1,null)})}},fixupResizerCursors:function(){const m=this.getVisibleHdrs();let p=!0,y=0;m.forEach((I,K)=>{p&&I.isFixed()?I.setResizerCursor("",!0):(p&&(y=K),p=!1,I.restoreResizerCursor())});let A=!0,C=m.length,E=C-1;for(;C>y;){const I=m[--C];A?I.setResizerCursor("",!0):I.restoreResizerCursor();I.isFixed()||(A&&(E=C),A=!1)}y===E&&m[y].setResizerCursor("",!0)}}),J=u.GridColHdr=new v("GridColHdr",{include:[u.BoundedValueComponent],initNode:function(m,p){const y=this,
A=p.resizerCursor??"col-resize";delete p.resizerCursor;p.minValue??(p.minValue=16);p.maxValue??(p.maxValue=1E3);p.value??(p.value=p.minValue);p.resizable??(p.resizable=!0);p.flex??(p.flex=0);p.cellXAdj??(p.cellXAdj=0);p.cellWidthAdj??(p.cellWidthAdj=0);p.sortable??(p.sortable=!0);p.sortState??(p.sortState="none");p.placement??(p.placement=l);y.callSuper(m,p);const C=y.gridController;y.resizer=new c(y,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[u.SizeToParent,u.Draggable,{requestDragPosition:function(E,I){I=E-this.x;if(C.fitToWidth&&(0<I?I=k(I,-q(y),y.maxValue-y.value+d(y)):0>I&&(I=e(I,-f(y),y.minValue-y.value+a(y))),0===I))return;E=y.value+I;y.resizable&&y.setValue(E);E-=y.value;I=E-I;let K=0;0>E?K=n(y,E):0<E&&(K=r(y,E));this.dragInitX+=K;I-=K;C.fitToWidth&&(0>I?t(y,I):0<I&&z(y,I))}}]);C&&(C.notifyAddHdr(y),C.notifyHdrXChange(y),C.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(m){this.setGridController();this.callSuper(m)},setSortable:function(m){this.set("sortable",m,!0)},setSortState:function(m){this.set("sortState",m,!0)},setResizable:function(m){this.set("resizable",m,!0)},setCellWidthAdj:function(m){this.cellWidthAdj=m},setCellXAdj:function(m){this.cellXAdj=m},setFlex:function(m){this.flex=m},setColumnId:function(m){this.columnId=m},setResizerCursor:function(m,p){const y=this.resizer,A=y.cursor;m!==A&&(p&&(this.__rrc=A),y.setCursor(m))},restoreResizerCursor:function(){const m=
this.__rrc;m&&(this.setResizerCursor(m),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(m){this.last=m;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(m){const p=this.gridController;p!==m&&(p?.notifyRemoveHdr(this),this.gridController=m,this.inited&&m&&(m.notifyAddHdr(this),m.notifyHdrXChange(this),m.notifyHdrWidthChange(this),m.notifyHdrVisibilityChange(this)))},setValue:function(m){this.callSuper(m);
this.inited&&this.setWidth(this.value)},setMinValue:function(m){const p=this.minValue??0,y=this.gridController;this.callSuper(m);this.inited&&p!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-p)},setMaxValue:function(m){const p=this.maxValue??0,y=this.gridController;m??=1E3;this.callSuper(m);this.inited&&p!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-p)},setWidth:function(m){const p=this.width;this.callSuper(m);this.inited&&p!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(m){const p=this.x;this.callSuper(m);this.inited&&p!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(m){const p=this.visible;this.callSuper(m);this.inited&&p!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),N=u.GridRow=new v("GridRow",{initNode:function(m,p){p.placement??(p.placement=l);this.callSuper(m,p);this.gridController?.notifyAddRow(this)},destroy:function(m){this.setGridController();this.callSuper(m)},setGridController:function(m){const p=
this.gridController;p!==m&&(p?.notifyRemoveRow(this),this.gridController=m,this.inited&&m?.notifyAddRow(this))},notifyHdrXChange:function(m){this.getRef(m.columnId)?.setX(m.x+m.cellXAdj)},notifyHdrWidthChange:function(m){this.getRef(m.columnId)?.setWidth(m.width+m.cellWidthAdj)},notifyHdrVisibilityChange:function(m){this.getRef(m.columnId)?.setVisible(m.visible)}}),Q=u.Grid=new w("Grid",c,{include:[L],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(m,p){p.overflow??
(p.overflow="autox");p.bgColor??(p.bgColor="#ccc");p.rowSpacing??(p.rowSpacing=1);p.columnSpacing??(p.columnSpacing=1);var y=p.isAutoScrolling;delete p.isAutoScrolling;this.callSuper(m,p);m=this.header=new c(this,{overflow:"hidden"});m.xLayout=new h(m,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});m.yLayout=new u.SizeToChildren(m,{locked:!0,axis:"y"});p=this.sizeHeightToRows;y=this.content=new c(this,{overflow:p?"hidden":"autoy"},y?[u.AutoScroller]:[]);y.yLayout=new h(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:p});this.syncTo(this,"setGridWidth","width");this.syncTo(m,"_updateContentWidth","width");this.constrain("_updateContentHeight",[p?y:this,"height",m,"height",m,"y"])},setSizeHeightToRows:function(m){this.sizeHeightToRows=m},setRowSpacing:function(m){this.rowSpacing!==m&&(this.rowSpacing=m,this.inited&&this.content.yLayout.setSpacing(m))},setColumnSpacing:function(m){this.columnSpacing!==m&&(this.columnSpacing=m,this.inited&&this.header.xLayout.setSpacing(m))},
setLocked:function(m){if(this.inited)for(const p of[this.header.xLayout,this.header.yLayout,this.content.yLayout])m?p.incrementLockedCounter():(p.decrementLockedCounter(),p.update());this.callSuper(m)},_updateContentWidth:function(m){const p=this.content;m=m.value;p.setWidth(m);for(const y of p.getSubviews())y.setWidth(m)},_updateContentHeight:function(m){const {header:p,content:y}=this;m=p.y+p.height;y.setY(m);this.sizeHeightToRows?this.setHeight(m+y.height):y.setHeight(this.height-m)},determinePlacement:function(m,
p){if(m===l){let y;p.isA(N)?y=this.content:p.isA(J)&&(y=this.header);if(y)return p.gridController!==this&&p.setGridController(this),y}return this.callSuper(m,p)},doSort:function(){const [m,p]=this.sort??["",""],y=this.getSortFunction(m,p);if(y){const A=this.content,C=A.yLayout;this.rows.sort(y);A.sortSubviews(y);C.sortSubviews(y);C.update()}},getSortFunction:(m,p)=>{if(m){const y=p===Q.SORT_ORDER_ASC?1:-1;return(A,C)=>{A=A.getRef(m).text;C=C.getRef(m).text;return A>C?y:C>A?-y:0}}}});u.SimpleGridColHdr=
new w("SimpleGridColHdr",u.SimpleTextButton,{include:[J],initNode:function(m,p){const y=this;p.activeColor??(p.activeColor="#999");p.hoverColor??(p.hoverColor="#bbb");p.readyColor??(p.readyColor="#aaa");p.inset??(p.inset=2);p.sortIconColor??(p.sortIconColor="#666");const A=p.outset??2;delete p.outset;y.callSuper(m,p);y.sortIcon=new u.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(C,E){this.callSuper(C,E);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
y.setOutset(this.width+A);G(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);G(y);D(y)},setSortIconColor:function(m){this.sortIconColor=m;this.sortIcon?.setTextColor(m)},setSortable:function(m){this.callSuper(m);this.inited&&(m&&this.setOutset(14),this.setDisabled(!m),D(this))},setSortState:function(m){this.callSuper(m);this.inited&&D(this)},setWidth:function(m){this.callSuper(m);this.inited&&G(this)},doActivated:function(){this.disabled||(this.setSortState(this.sortState===Q.SORT_ORDER_ASC?
Q.SORT_ORDER_DESC:Q.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,v=Math,k=v.max,{View:e,global:{focus:c,keys:h},getAlphaObjSortFunc:l}=u,b=t=>{const z=t.selectedRow;z&&(z.setSelected(!1),t.set("selectedRow",null,!0))},g=u.InfiniteListRow=new w("InfiniteListRow",{include:[u.Reusable],setInfiniteOwner:function(t){this.infiniteOwner=t},setModel:function(t){this.model=t},setClassKey:function(t){this.classKey=t},notifyRefreshed:()=>{}}),d=u.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[g,u.Selectable]}),f=u.InfiniteList=
new x("InfiniteList",e,{initNode:function(t,z){let D=z.rowClasses;delete z.rowClasses;if("function"===typeof D){const G={};G["default"]=D;D=G}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(t,z);t=this._listView=new e(this);this._scrollAnchorView=new e(t,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(D,t);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(t,z)=>new u.TrackActivesMultiPool(t,z),setOverscrollBehavior:function(t){this.overscrollBehavior=t;this.getIDS().overscrollBehavior=t},setCollectionModel:function(t){this.collectionModel=
t},setModelIDName:function(t){this.modelIDName=t},setRowSpacing:function(t){this.rowSpacing=t;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(t){this.rowHeight=t;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(t){if(0<t&&(this.callSuper(t),this.inited)){t=this._listView;const z=this.width;t.setWidth(z);for(const D of t.getSubviews())D.setWidth(z)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(t){const z=this.getVisibleRows();let D=z.length;for(;D;){const G=z[--D];if(G.model===t)return G}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const t=this.modelIDName,z=this.ascendingSort;return this.numericSort?u.getNumericObjSortFunc(t,z):l(t,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(t,z){var D=this.getIndexOfModelInData(t);
let G=!1;if(0<=D){var L=this._rowExtent;const J=this.getIDE().scrollTop,N=J+this.height;D=this.rowInset+D*L;L=D+L;D<=J?(this.scrollYTo(D,!0),G=!0):L>=N&&(this.scrollYTo(L-this.height,!0),G=!0);z&&((z=this.getVisibleRowForModel(t))?z.focus():this._focusToModel=t)}return G},isModelInData:function(t){return 0<=this.getIndexOfModelInData(t)},getNextModel:function(t,z=!0,D=!0){const G=this.getListData(),L=G.length;t=this.getIndexOfModelInData(t);if(0<=t)return t+=1,t>=L?z?G[0]:G[L-1]:G[t];if(D&&0<L)return G[L-
1]},getPrevModel:function(t,z=!0,D=!0){const G=this.getListData(),L=G.length;t=this.getIndexOfModelInData(t);if(0<=t)return--t,0>t?z?G[L-1]:G[0]:G[t];if(D&&0<L)return G[0]},getIndexOfModelInData:function(t){if(t){const z=this.getListData();let D=z.length;for(;D;)if(this.areModelsEqual(z[--D],t))return D}return-1},areModelsEqual:function(t,z){const D=this.modelIDName;return t[D]===z[D]},getActiveRowForModel:function(t){if(t){const z=this._itemPool.getActives();let D=z.length;for(;D;){const G=z[--D];
if(this.areModelsEqual(G.model,t))return G}}},refreshListData:function(t,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(t,z)},resetListUI:function(t,z){const D=this.getListData().length,G=this._listView,L=this._scrollAnchorView;G.setHeight(D*this._rowExtent-(0<D?this.rowSpacing:0)+this.rowInset+this.rowOutset);L.setY(G.height-L.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;t||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(t){if(c.focusedView?.isDescendantOf(t)){const z=this.getFocusTrap();z?z.focus():c.clear()}t.setVisible(!1);this._itemPool.putInstance(t)},refreshListUI:function(t){t=this._rowExtent;const z=this.rowInset,D=this.forceFullResetOnNextRefresh;var G=this.getIDE().scrollTop;const L=this.getListData()??[];var J=k(0,v.floor((G-z)/t));G=v.min(L.length,v.ceil((G-z+this.height)/t));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==J||this._endIdx!==G||D){const Q=this.width,m=this.rowHeight,p=this._visibleRowsByIdx,y=this._focusToModel;this._startIdx=J;this._endIdx=G;for(var N in p)if(N<J||N>=G)this.putRowBackInPool(p[N]),delete p[N];for(N=J;N<G;N++){J=p[N];const A=L[N],C=this.getClassKey(A);let E=!1;J&&J.classKey===C||(J&&this.putRowBackInPool(J),p[N]=J=this._itemPool.getInstance(C),J.setInfiniteOwner(this),J.setClassKey(C),J.setWidth(Q),J.setHeight(m),J.setY(z+N*t),J.setVisible(!0),E=!0);!D&&J.model&&
this.areModelsEqual(J.model,A)?E&&this.updateRow(J):(J.setModel(A),this.updateRow(J));J.notifyRefreshed();J.bringToFront();y&&this.areModelsEqual(y,A)&&(J.focus(),this._focusToModel=null)}}},getClassKey:t=>"default",updateRow:t=>{}}),a=u.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",u.SimpleButton,{include:[d,u.ArrowKeyActivation],initNode:function(t,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=h.LIST_KEYS);this.callSuper(t,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(t){this.callSuper(t);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(t,z){t===h.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(t,z)},doKeyArrowLeftOrUp:function(t,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(t,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(t){switch(t){case h.CODE_ENTER:case h.CODE_SPACE:this.doActivated()}}}),q=u.SelectableInfiniteList=new x("SelectableInfiniteList",
f,{setSelectedRow:function(t){const z=this.selectedRow;t!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",t,!0),t&&(this.setSelectedRowModel(t.model),t.setSelected(!0)))},setSelectedRowModel:function(t){this.set("selectedRowModel",t,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(t,z,D){t&&(b(this),this.setSelectedRowModel(t),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(t,z=!0){this.selectRowForModel(this.getNextModel(t),z,!0)},selectPrevRowForModel:function(t,z=!0){this.selectRowForModel(this.getPrevModel(t),z,!1)},resetListUI:function(t,z){this.isModelInData(this.selectedRowModel)?b(this):this.setSelectedRow();this.callSuper(t,z)},putRowBackInPool:function(t){t.selected&&b(this);this.callSuper(t)},refreshListUI:function(t){t=c.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),t&&t!==z||z.focus(!0))}}),n=new w("InfiniteGridRowMixin",{notifyXChange:function(t){this.getRef(t.columnId)?.setX(t.x+t.cellXAdj)},notifyWidthChange:function(t){this.getRef(t.columnId)?.setWidth(t.width+t.cellWidthAdj)},notifyVisibilityChange:function(t){this.getRef(t.columnId)?.setVisible(t.visible)}}),r=new w("InfiniteGridMixin",{setGridHeader:function(t){(this.gridHeader=t)?.setGrid(this)},makeReady:function(t,z){const D=this.gridHeader;D?(this.forceFullResetOnNextRefresh=
z,D.setSort(t),D.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [t,z]=this.gridHeader.sort??["",""];return t?l(t,z===u.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(t){const z=this.gridHeader;if(z)for(const D of z.columnHeaders)t.notifyXChange(D),t.notifyWidthChange(D),t.notifyVisibilityChange(D)},notifyXChange:function(t){for(const z of this.getVisibleRows())z.notifyXChange(t)},notifyWidthChange:function(t){for(const z of this.getVisibleRows())z.notifyWidthChange(t)},
notifyVisibilityChange:function(t){for(const z of this.getVisibleRows())z.notifyVisibilityChange(t)}});u.InfiniteGridRow=new w("InfiniteGridRow",{include:[g,n]});u.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[d,n]});u.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",a,{include:[n]});u.InfiniteGrid=new x("InfiniteGrid",f,{include:[r]});u.SelectableInfiniteGrid=new x("InfiniteGrid",q,{include:[r]});u.InfiniteGridHeader=new x("InfiniteGridHeader",e,{include:[u.GridController],
initNode:function(t,z){z.columnSpacing??(z.columnSpacing=1);z.overflow="hidden";this.callSuper(t,z);new u.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(t){this.grid=t},setColumnSpacing:function(t){this.columnSpacing=t},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:k(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(t){this.callSuper(t);if(this.inited){t=this.height;for(const z of this.columnHeaders)z.setHeight(t)}},setWidth:function(t){this.callSuper(k(this.minWidth,
t));this.inited&&(t=this.width,this.setGridWidth(t),this.grid.setWidth(t))},subviewAdded:function(t){this.callSuper(t);t.isA(u.GridColHdr)&&(t.setGridController(this),t.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(t){this.isLocked()||(this.grid.notifyXChange(t),this._notifyHdrChange("X",t))},notifyHdrWidthChange:function(t){this.isLocked()||(this.grid.notifyWidthChange(t),this._notifyHdrChange("Width",t))},
updateRowsForVisibilityChange:function(t){this.grid.notifyVisibilityChange(t);this.isLocked()||this._notifyHdrChange("Visibility",t)}})})(myt);
(u=>{const x=JS.Class,w=u.PanelStackTransition=new x("PanelStackTransition",u.Node,{to:v=>Promise.resolve(v),from:v=>Promise.resolve(v)});u.PanelStack=new x("PanelStack",u.View,{include:[u.SelectionManager],initNode:function(v,k){k.overflow="hidden";k.itemSelectionId??(k.itemSelectionId="panelId");k.maxSelected??(k.maxSelected=1);this.callSuper(v,k);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(v){this.set("transition",v,!0)},__updateWidth:function(v){this.getActivePanel()?.setWidth(v.value)},
__updateHeight:function(v){this.getActivePanel()?.setHeight(v.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(v){return this.getSelectableItem(v)},selectPanel:function(v){this.selectById(v)},doSelected:function(v){v.setWidth(this.width);v.setHeight(this.height)},doStackTransition:function(v){this["doStackTransition"+(v.selected?"To":"From")](v)},doStackTransitionTo:function(v){const k=this;k.doBeforeTransitionTo(v);const e=k.transition;e?e.to(v).then(c=>{k.doAfterTransitionTo(c)}):
(v.makeHighestZIndex(),v.setVisible(!0),k.doAfterTransitionTo(v))},doBeforeTransitionTo:v=>{},doAfterTransitionTo:v=>{},doStackTransitionFrom:function(v){const k=this;k.doBeforeTransitionFrom(v);const e=k.transition;e?e.from(v).then(c=>{k.doAfterTransitionFrom(c)}):(v.setVisible(!1),k.doAfterTransitionFrom(v))},doBeforeTransitionFrom:v=>{},doAfterTransitionFrom:v=>{}});u.StackablePanel=new JS.Module("StackablePanel",{include:[u.Selectable],initNode:function(v,k){k.visible=k.selected=!1;k.bgColor??
(k.bgColor="#fff");k.panelId??(k.panelId=k.name);this.callSuper(v,k);this.selected&&this.doStackTransition()},setPanelStack:function(v){this.panelStack=v},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(v){this.panelId=v},setSelected:function(v){this.selected!==v&&(this.callSuper(v),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});u.PanelStackFadeTransition=new x("PanelStackFadeTransition",w,{initNode:function(v,
k){k.duration??(k.duration=1E3);this.callSuper(v,k)},setDuration:function(v){this.duration=v},to:function(v){return new Promise((k,e)=>{v.stopActiveAnimators("opacity");v.setVisible(!0);v.animate({attribute:"opacity",to:1,duration:this.duration}).next(c=>{v.makeHighestZIndex();k(v)})})},from:function(v){return new Promise((k,e)=>{v.stopActiveAnimators("opacity");v.animate({attribute:"opacity",to:0,duration:this.duration}).next(c=>{v.setVisible(!1);k(v)})})}});u.PanelStackSlideTransition=new x("PanelStackSlideTransition",
w,{initNode:function(v,k){k.duration??(k.duration=1E3);k.direction??(k.direction="right");this.callSuper(v,k)},setDuration:function(v){this.duration=v},setDirection:function(v){this.direction=v},to:function(v){const k=v.getPanelStack(),e=this.duration;let c,h;switch(this.direction){case "left":h="x";c=k.width;break;case "right":h="x";c=-k.width;break;case "up":h="y";c=k.height;break;case "down":h="y",c=-k.height}v.stopActiveAnimators(h);v.set(h,c);v.setVisible(!0);return new Promise((l,b)=>{b=g=>
{v.makeHighestZIndex();l(v)};0<e?v.animate({attribute:h,to:0,duration:e}).next(b):(v.set(h,0),v.makeHighestZIndex(),l(v))})},from:function(v){const k=v.getPanelStack(),e=this.duration;let c,h;switch(this.direction){case "left":h="x";c=-k.width;break;case "right":h="x";c=k.width;break;case "up":h="y";c=-k.height;break;case "down":h="y",c=k.height}v.stopActiveAnimators(h);return new Promise((l,b)=>{b=g=>{v.setVisible(!1);l(v)};0<e?v.animate({attribute:h,to:c,duration:e}).next(b):(v.set(h,c),v.setVisible(!1),
l(v))})}})})(myt);
(u=>{const x=JS.Module,{Draggable:w,global:{dragManager:v,mouse:k}}=u,e=(h,l,b)=>{for(const g of[l,b])h["__is"+g]=!1,h["__tmrId"+g]=null},c=u.DragGroupSupport=new x("DragGroupSupport",{initNode:function(h,l){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(h,l)},setDragGroups:function(h){const l=this.__dgs={};for(const b in h)l[b]=!0;this.__anyDG=l.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(h){const l=this.__drpgs=
{};for(const b in h)l[b]=!0;this.__anyDRPG=l.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(h){h&&(this.__dgs[h]=!0,"*"===h&&(this.__anyDG=!0))},removeDragGroup:function(h){h&&(delete this.__dgs[h],"*"===h&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(h){h&&(this.__drpgs[h]=!0,"*"===h&&(this.__anyDRPG=!0))},removeDropGroup:function(h){h&&(delete this.__drpgs[h],"*"===h&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
u.DropSource=new x("DropSource",{include:[w],initNode:function(h,l){l.distanceBeforeDrag??(l.distanceBeforeDrag=2);l.dropParent??(l.dropParent=h.getRoot());this.callSuper(h,l)},setDropClass:function(h){this.dropClass=u.resolveClassname(h)},setDropClassAttrs:function(h){this.dropClassAttrs=h},setDropParent:function(h){this.dropParent=h},startDrag:function(h){const l=this.dropable=this.makeDropable();if(l){const b=l.distanceBeforeDrag;l.distanceBeforeDrag=0;l.doMouseDown(h);l.__doMouseDown(h);l.distanceBeforeDrag=
b}},doMouseUp:function(h){this.callSuper(h);const l=this.dropable;l&&(l.__doMouseUp(h),l.doMouseUp(h),this.dropable=null)},makeDropable:function(){const h=this.dropClass,l=this.dropParent;if(h&&l){const b=u.DomElementProxy.getRelativePosition(this.getIDE(),l.getIDE());return new h(l,{...this.dropClassAttrs,x:b.x??0,y:b.y??0})}}});u.DropTarget=new x("DropTarget",{include:[c],initNode:function(h,l){this.callSuper(h,l);v.registerDropTarget(this)},destroy:function(){v.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(h){return!this.disabled&&this.isVisible()},notifyDragStart:h=>{},notifyDragStop:h=>{},notifyDragEnter:h=>{},notifyDragLeave:h=>{},notifyDrop:h=>{}});u.Dropable=new x("Dropable",{include:[w,c],setDropTarget:function(h){this.dropTarget=h},setDropped:function(h){this.dropped=h},setDropFailed:function(h){this.dropFailed=h},willPermitDrop:h=>!0,startDrag:function(h){this.setDropped(!1);this.setDropFailed(!1);v.startDrag(this);this.callSuper(h)},updateDrag:function(h){v.updateDrag(h,
this);this.callSuper(h)},stopDrag:function(h,l){v.stopDrag(h,this,l);this.callSuper(h,l);l?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(h){this.setDropTarget(h)},notifyDragLeaving:function(h){this.setDropTarget()},notifyDropped:function(h,l){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});u.AutoScroller=new x("AutoScroller",{include:[c],initNode:function(h,l){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;l.overflow??(l.overflow="auto");this.callSuper(h,l);v.registerAutoScroller(this)},destroy:function(){v.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(h){this.scrollBorder=Math.max(1,h)},setScrollFrequency:function(h){this.scrollFrequency=h},setScrollAmount:function(h){this.scrollAmount=h},setScrollAcceleration:function(h){this.scrollAcceleration=h},notifyAutoScrollerDragStart:function(h){h=this.getIDE();(h.scrollHeight>h.clientHeight||
h.scrollWidth>h.clientWidth)&&this.attachToDom(k,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(h){this.detachFromDom(k,"__hndlMove","mousemove",!0);e(this,"Up","Down");e(this,"Left","Right")},__hndlMove:function(h){const l=this;let {pageX:b,pageY:g}=h.value;if(l.containsPoint(b,g)){h=l.getPagePosition();const d=l.scrollBorder,f=(a,q)=>{l["__is"+a]&&(l.getIDE()["scroll"+("Up"===a||"Down"===a?"Top":"Left")]+=q*l["__amt"+a],l["__tmrId"+a]=setTimeout(()=>{f(a,q)},l.scrollFrequency))};
b-=h.x;g-=h.y;g<d?(l.__isUp=!0,l.__amtUp=Math.round(l.scrollAmount*(1+l.scrollAcceleration*(1-g/d))),l.__tmrIdUp||f("Up",-1)):l.height-g<d?(l.__isDown=!0,l.__amtDown=Math.round(l.scrollAmount*(1+l.scrollAcceleration*(1-(l.height-g)/d))),l.__tmrIdDown||f("Down",1)):e(l,"Up","Down");b<d?(l.__isLeft=!0,l.__amtLeft=Math.round(l.scrollAmount*(1+l.scrollAcceleration*(1-b/d))),l.__tmrIdLeft||f("Left",-1)):l.width-b<d?(l.__isRight=!0,l.__amtRight=Math.round(l.scrollAmount*(1+l.scrollAcceleration*(1-(l.width-
b)/d))),l.__tmrIdRight||f("Right",1)):e(l,"Left","Right")}else e(l,"Up","Down"),e(l,"Left","Right")}})})(myt);
(u=>{const {max:x,cos:w,sin:v,PI:k}=Math,e=u.Geometry.degreesToRadians,c=d=>{var f=e(d.startAngle),a=e(d.endAngle);if(f>a){var q=f;f=a;a=q}q=d.__path;var n=d.width/2,r=d.thickness;const t=d.radius,z=t+r;var D=a-f;const G=D+1E-4>=2*k;G&&(f=0,a=k);const L=[n+z*w(f),n+z*v(f)],J=[n+z*w(a),n+z*v(a)];a=[n+t*w(a),n+t*v(a)];f=[n+t*w(f),n+t*v(f)];n=["M"+L.join()];G?n.push("A"+[z,z,0,1,1,J].join(),"A"+[z,z,0,1,1,L].join(),"L"+a.join(),"A"+[t,t,0,1,0,f].join(),"A"+[t,t,0,1,0,a].join()):(D=D%(2*k)>k?1:0,r/=2,
n.push("A"+[z,z,0,D,1,J].join(),d.endCapRounding?"A"+[r,r,0,0,1,a].join():"L"+a.join(),"A"+[t,t,0,D,0,f].join(),d.startCapRounding?"A"+[r,r,0,0,1,L].join():""));n.push("z");q.setAttribute("d",n.join(" "));q.setAttribute("fill",d.color)},h=d=>{const f=2*(d.radius+d.thickness),a=d.__svg;d.setWidth(f);d.setHeight(f);a.setAttribute("viewBox","0 0 "+f+" "+f);a.setAttribute("width",f);a.setAttribute("height",f);c(d)},l=(d,f,a)=>{d[f]!==a&&(d[f]=a,d.inited&&(c(d),d.fireEvent(f,a)))},b=(d,f,a)=>{d[f]!==a&&
(d[f]=a=x(0,a),d.inited&&(h(d),d.fireEvent(f,a)))},g=(d,f)=>{d=document.createElementNS("http://www.w3.org/2000/svg",d);f?.appendChild(d);return d};u.Annulus=new JS.Class("Annulus",u.BackView,{initNode:function(d,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(d,f);h(this)},createOurDomElement:function(d){d=this.callSuper(d);var f=Array.isArray(d)?d[1]:d;f=this.__svg=g("svg",f);this.__path=g("path",f);f.style.pointerEvents=
"none";return d},setRadius:function(d){b(this,"radius",d)},setThickness:function(d){b(this,"thickness",d)},setStartAngle:function(d){l(this,"startAngle",d)},setEndAngle:function(d){l(this,"endAngle",d)},setStartCapRounding:function(d){l(this,"startCapRounding",d)},setEndCapRounding:function(d){l(this,"endCapRounding",d)},setColor:function(d){l(this,"color",d)},isColorAttr:function(d){return"color"===d||this.callSuper(d)}})})(myt);
(u=>{let x;const w=JS.Class,{mouse:v,windowResize:k,dragManager:e}=u.global,{min:c,max:h,round:l}=Math,b=a=>{if(a.tooltip){const q=a._lastPos;if(a.tooltip.parent.containsPoint(q.x,q.y))return!0}a.hideTip();return!1},g=u.BaseTooltip=new w("BaseTooltip",u.View,{include:[u.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(a,q){this.tipDelay=this.nextTipDelay=g.TIP_DELAY;this.tipHideDelay=g.TIP_HIDE_DELAY;q.visible??(q.visible=!1);this.callSuper(a,q)},setTooltip:function(a){this.inited&&
(this.tooltip=a)&&(this.attachToDom(v,"__hndl_mousemove","mousemove",!0),this.attachToDom(a.parent,"hideTip","mousedown",!0),this.attachToDom(a.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(a){const q=this;q._lastPos=u.MouseObservable.getMouseFromEvent(a);b(q)&&(q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID),q.__checkTID=setTimeout(()=>{delete q.__checkTID;b(q)&&q.showTip()},q.nextTipDelay))},hideTip:function(a){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(a=this.tooltip?.parent)this.detachFromDom(a,"hideTip","mousedown",!0),this.detachFromDom(a,"hideTip","mouseup",!0),this.detachFromDom(v,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){e.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),d=u.Tooltip=new w("Tooltip",g,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(a,q){q.edgeSize??(q.edgeSize=d.EDGE_SIZE);q.edgeColor??(q.edgeColor=d.EDGE_COLOR);q.shadowSize??(q.shadowSize=d.SHADOW_SIZE);q.shadowColor??(q.shadowColor=d.SHADOW_COLOR);q.insetH??(q.insetH=d.HORIZONTAL_INSET);q.insetV??(q.insetV=d.VERTICAL_INSET);q.tipBgColor??(q.tipBgColor=d.TIP_BG_COLOR);q.tipTextColor??(q.tipTextColor=d.TIP_TEXT_COLOR);this.callSuper(a,q);this._tipText=new u.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(a){this.edgeSize=a},setEdgeColor:function(a){this.edgeColor=a},setShadowSize:function(a){this.shadowSize=a},setShadowColor:function(a){this.shadowColor=a},setInsetH:function(a){this.insetH=a},setInsetV:function(a){this.insetV=a},setTipBgColor:function(a){this.tipBgColor=a},setTipTextColor:function(a){this.tipTextColor=a},showTip:function(){const a=this.tooltip;var q=a.text;const n=a.parent;var r=this._tipText;const t=this.edgeSize,z=this.shadowSize;r.text!==
q&&r.setText(q);r.setWidth("auto");var D=c(r.measureNoWrapWidth(),a.maxTextWidth);q=D+2*r.x;const G=q+2*t;r.setWidth(D);r.sizeViewToDom();D=n.getPagePosition();r=r.height+2*r.y;const L=r+2*t,J=D.y-L+("below"===a.tipvalign?n.height+L:0);D=D.x;switch(a.tipalign){case "right":D-=G;case "farright":D+=n.width;break;case "farleft":D-=G}this.setX(l(c(h(D,0),k.getWidth()-G)));this.setY(l(c(h(J,0),k.getHeight()-L)));this.setWidth(q);this.setHeight(r);this.setBgColor(this.tipBgColor);this.setBorder([t,"solid",
this.edgeColor]);this.setBoxShadow([z,z,z,this.shadowColor]);this.callSuper()}}),f=u.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:d,MAX_TEXT_WIDTH:280},setTooltip:function(a){this.callSuper("");this.set("tooltip",a,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(a){this.set("tipAlign",a,!0)},setTipValign:function(a){this.set("tipValign",a,!0)},setMaxTextWidth:function(a){this.set("maxTextWidth",a,!0)},setTipClass:function(a){this.set("tipClass",a,!0)},doSmoothMouseOver:function(a){const q=
this.getTooltip();this.callSuper(a);if(a&&q){a=this.tipClass??f.TIP_CLASS;!x||x instanceof a||(x.destroy(),x=null);if(!x){let n=document.getElementById("tooltipDiv");n||(n=u.DomElementProxy.createElement("div",{position:"absolute"}),u.getElement().appendChild(n));x=new a(n,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:q,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||f.MAX_TEXT_WIDTH})}}})})(myt);
(u=>{const x=Math,{min:w,max:v}=x;u.Path=new JS.Class("Path",{initialize:function(k){this.setVectors(k??[])},setVectors:function(k){this._boundingBox=null;this.vectors=k},copyFrom:function(k){this.vectors=k.vectors.slice();this._boundingBox=null},drawInto:function(k){k.beginPath();const e=this.vectors;let c=e.length,h=0;for(k.moveTo(e[h++],e[h++]);c>h;)k.lineTo(e[h++],e[h++]);k.closePath()},translate:function(k,e){const c=this.vectors;let h=c.length;for(;h;)c[--h]+=e,c[--h]+=k;this._boundingBox=null},
scale:function(k){const e=this.vectors;let c=e.length;for(;c;)e[--c]*=k,e[--c]*=k;this._boundingBox=null},rotate:function(k){const e=x.cos(k);k=x.sin(k);const c=this.vectors,h=c.length;for(let l=0;h>l;){const b=c[l]*e-c[l+1]*k,g=c[l]*k+c[l+1]*e;c[l++]=b;c[l++]=g}this._boundingBox=null},rotateAroundOrigin:function(k,e,c){this.translate(-e,-c);this.rotate(k);this.translate(e,c)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const k=this.vectors;let e=k.length,c,h,l,b;if(2<=
e){l=b=k[--e];for(c=h=k[--e];e;){const g=k[--e],d=k[--e];l=w(g,l);b=v(g,b);c=w(d,c);h=v(d,h)}return this._boundingBox={x:c,y:l,width:h-c,height:b-l}}return this._boundingBox=null},getCenter:function(){const k=this.getBoundingBox();return k?{x:k.x+k.width/2,y:k.y+k.height/2}:null},isPointInPath:function(k,e){"object"===typeof k&&(e=k.y,k=k.x);return u.Geometry.isPointInPath(k,e,this.getBoundingBox(),this.vectors)}})})(myt);
(u=>{const x=console.warn,w=Math.PI,v=w/2,k=3*w/2,e=u.AccessorSupport,c={};for(const h of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))c[h]=function(...l){this.__ctx[h](...l)};for(const h of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])c[h]=
function(...l){return this.__ctx[h](...l)};for(const h of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))c[e.generateSetterName(h)]=function(l){this.__ctx[h]=l},c[e.generateGetterName(h)]=function(){return this.__ctx[h]};u.Canvas=new JS.Class("Canvas",u.BackView,{include:[c],initNode:function(h,l){this.quickSet(["willReadFrequently"],l);this.callSuper(h,l)},
createOurDomElement:function(h){h=this.callSuper(h);var l=Array.isArray(h)?h[1]:h;const b=this.__cvs=document.createElement("canvas");b.className="mytUnselectable";l.appendChild(b);b.style.position="absolute";l={};this.willReadFrequently&&(l.willReadFrequently=!0);this.__ctx=b.getContext("2d",l);return h},setWidth:function(h){0>h&&(h=0);this.__cvs.setAttribute("width",h);this.callSuper(h)},setHeight:function(h){0>h&&(h=0);this.__cvs.setAttribute("height",h);this.callSuper(h)},clear:function(){const h=
this.__ctx;h.save();h.setTransform(1,0,0,1,0,0);h.clearRect(0,0,this.width,this.height);h.restore()},dataURItoBlob:function(h,l){h=atob(h.split(",")[1]);const b=h.length,g=[];for(let d=0;d<b;)g.push(h.charCodeAt(d++));return new Blob([new Uint8Array(g)],{type:l})},getDataURL:function(h,l){return this.__cvs.toDataURL(h,l)},getImageFile:function(h,l,b){switch(h){case "png":case "PNG":h="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":h="jpeg";b??=.5;break;default:x("Unexpected image type",
h),h=h.toLowerCase()}const g="image/"+h;b=this.dataURItoBlob(this.getDataURL(g,b),g);l&&(b.name=l+"."+h);return b},circle:function(h,l,b){this.__ctx.arc(h,l,b,0,2*w)},drawRoundedRect:function(h,l,b,g,d,f){const a=this.lineTo.bind(this),q=this.arc.bind(this);f=g+f;d=b+d;this.beginPath();this.moveTo(b,g+h);a(b,f-h);q(b+h,f-h,h,w,v,!0);a(d-h,f);q(d-h,f-h,h,v,0,!0);a(d,g+h);q(d-h,g+h,h,0,k,!0);a(b+h,g);q(b+h,g+h,h,k,w,!0);this.closePath();0<l&&(h-=l,b+=l,d-=l,g+=l,f-=l,this.moveTo(b,g+h),q(b+h,g+h,h,
w,k),a(d-h,g),q(d-h,g+h,h,k,0),a(d,f-h),q(d-h,f-h,h,0,v),a(b+h,f),q(b+h,f-h,h,v,w),this.closePath());return this},drawRectOutline:function(h,l,b,g,d){d=b+d;g=l+g;const f=l+h,a=g-h,q=b+h;h=d-h;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(l,b);n(l,d);n(g,d);n(g,b);n(l,b);n(f,q);n(a,q);n(a,h);n(f,h);n(f,q);this.closePath();return this},drawPartiallyRoundedRect:function(h,l,b,g,d,f,a,q){q=f+q;a=d+a;const n=this.lineTo.bind(this),r=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(d,
f+h);n(d,q-b);0<b&&r(d,q,d+b,q);n(a-g,q);0<g&&r(a,q,a,q-g);n(a,f+l);0<l&&r(a,f,a-l,f);n(d+h,f);0<h&&r(d,f,d,f+h);this.closePath();return this},drawAnnulus:function(h,l,b,g,d,f,a,q=60){const n=u.Color;for(var r of a)"string"===typeof r.color&&(r.color=n.makeColorFromHexString(r.color));1>q&&(x("Invalid segements",q),q=60);q=w/q;r=0;for(var t=a.length-1;r<t;){var z=a[r++];const {angle:y,color:A}=z,{angle:C,color:E}=a[r];var D=Math.round((C-y)/q),G=A.getDiffFrom(E);z.colorDelta={red:G.red/D,green:G.green/
D,blue:G.blue/D}}b=new u.Path([h+b,l,h+g,l]);b.rotateAroundOrigin(d,h,l);g=b.vectors;let [L,J,N,Q]=g,m=0,p=w/360;for(r=0;f>d;){D=L;G=J;t=N;z=Q;d+=q;d>f&&(q+=f-d,p=0,d=f);b.rotateAroundOrigin(q+p,h,l);[L,J,N,Q]=g;this.beginPath();this.moveTo(D,G);this.lineTo(t,z);this.lineTo(N,Q);this.lineTo(L,J);this.closePath();const {color:y,colorDelta:A}=a[r];this.setFillStyle(n.rgbToHex(y.red+m*A.red,y.green+m*A.green,y.blue+m*A.blue,!0));this.fill();0<p&&(b.rotateAroundOrigin(-p,h,l),[L,J,N,Q]=g);m++;d>=a[r+
1].angle&&(m=0,r++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
