(u=>{let x;var w=b=>{let l=b.length;for(;l;){const k=b[--l];x=k.ver??k.id;if(k.str?.includes(k.sub)||k.prop)return k.id}};var v=b=>{const l=b.indexOf(x);if(0<=l)return parseFloat(b.slice(l+x.length+1))};const m=navigator.userAgent,e=navigator.platform;v=u.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:m,sub:"Firefox",id:"Firefox"},{str:m,sub:"Chrome",id:"Chrome"},{str:m,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:v(m)||v(navigator.appVersion)||"UNKNOWN",os:w([{str:m,sub:"iPhone",id:"iPhone/iPod"},{str:e,sub:"Linux",id:"Linux"},{str:e,sub:"Mac",id:"Mac"},{str:e,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(v.browser){case "Chrome":case "Safari":u="WebKit";break;case "Explorer":u="MS";break;case "Firefox":u="Moz";break;case "Opera":u="O";break;default:u="UNKNOWN"}w=u.toLowerCase();v.prefix={dom:u,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:u,floor:x,ceil:w}=Math,v="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" "),b="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),l=h=>(10>h?"0":"")+h,k=(h,c)=>{h=h.getTimezoneOffset();return(0<h?"-":"+")+l(x(u(h/60)))+(c?":":"")+(0==u(h%60)?"00":l(u(h%60)))},d={d:h=>
l(h.getDate()),D:h=>e[h.getDay()],j:h=>h.getDate(),l:h=>b[h.getDay()],N:h=>0==h.getDay()?7:h.getDay(),S:h=>{h=h.getDate();return 1==h%10&&11!=h?"st":2==h%10&&12!=h?"nd":3==h%10&&13!=h?"rd":"th"},w:h=>h.getDay(),z:h=>{const c=new Date(h.getFullYear(),0,1);return w((h-c)/864E5)},W:h=>{const c=new Date(h.valueOf());h=(h.getDay()+6)%7;c.setDate(c.getDate()-h+3);h=c.valueOf();c.setMonth(0,1);4!==c.getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7);return l(1+w((h-c)/6048E5))},F:h=>m[h.getMonth()],m:h=>l(h.getMonth()+
1),M:h=>v[h.getMonth()],n:h=>h.getMonth()+1,t:h=>{let c=h.getFullYear();h=h.getMonth()+1;12===h&&(c=c++,h=0);return(new Date(c,h,0)).getDate()},L:h=>{h=h.getFullYear();return 0==h%400||0!=h%100&&0==h%4},o:h=>{const c=new Date(h.valueOf());c.setDate(c.getDate()-(h.getDay()+6)%7+3);return c.getFullYear()},Y:h=>h.getFullYear(),y:h=>(""+h.getFullYear()).substr(2),a:h=>12>h.getHours()?"am":"pm",A:h=>12>h.getHours()?"AM":"PM",B:h=>x(1E3*((h.getUTCHours()+1)%24+h.getUTCMinutes()/60+h.getUTCSeconds()/3600)/
24),g:h=>h.getHours()%12||12,G:h=>h.getHours(),h:h=>l(h.getHours()%12||12),H:h=>l(h.getHours()),i:h=>l(h.getMinutes()),s:h=>l(h.getSeconds()),e:h=>/\((.*)\)/.exec((new Date).toString())[1],I:h=>{let c=null,f=0;for(;12>f;){const a=(new Date(h.getFullYear(),f++,1)).getTimezoneOffset();if(null===c)c=a;else if(a<c){c=a;break}else if(a>c)break}return h.getTimezoneOffset()==c|0},O:h=>k(h,!1),P:h=>k(h,!0),T:h=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:h=>60*-h.getTimezoneOffset(),c:h=>h.format("Y-m-d\\TH:i:sP"),
r:h=>h.toString(),U:h=>h.getTime()/1E3,x:h=>h.toLocaleDateString(),X:h=>h.toLocaleTimeString()};return function(h){return h.replace(/(\\?)(.)/g,(c,f,a)=>""===f&&d[a]?d[a](this):a)}})();
(u=>{const x=(f,a)=>{var p=f.__mct__.get(a);if(p)return p.slice();const n=[];if(p=f.__anc__){const q=p.length;for(let r=0;r<q;){const z=p[r++].__fns__;z.has(a)&&n.push(z.get(a))}}else{const q=f.__anc__=[],r=z=>{const C=z.__inc__,G=C.length;for(let K=0;K<G;)r(C[K++]);q.includes(z)||(q.push(z),z=z.__fns__,z.has(a)&&n.push(z.get(a)))};r(f)}f.__mct__.set(a,n.slice());return n},w=(f,a)=>{const p=f.callable;return f.__hs?function(...n){const q=this.callSuper,r=x(a,f.name);let z=r.length-1;if(0===z)q&&delete this.callSuper;
else{const G=n.length,K=this.callSuper=(...J)=>{for(let M=J.length;M<G;)J[M]=n[M++];0===--z&&delete this.callSuper;J=r[z].callable.call(this,...J);this.callSuper=K;z++;return J}}const C=p.call(this,...n);q?this.callSuper=q:delete this.callSuper;return C}:p},v=(f,a)=>{a=a??f;if(a===f){f.__anc__=null;f.__mct__=new Map;var p=f.__dep__;for(var n=p.length;0<n;)v(p[--n])}p=a.__tgt__;n=f.__inc__;const q=n.length;for(let r=0;r<q;)v(n[r++],a);for(const [r,z]of f.__fns__)f=z instanceof b?w(z,a):z,p[r]!==f&&
(p[r]=f)},m=f=>f.__meta__??(f.__meta__=new l(null,null,f)).include(f.klass,!0),e=f=>{const a=function(...p){return this.initialize(...p)??this};a.prototype=Object.create(f.prototype);return a},b=e(Object),l=u.Module=e(Object);b.prototype.initialize=function(f,a,p){this.module=f;this.name=a;this.callable=p;this.__hs=p.toString().includes("callSuper")};var k=l.prototype;k.initialize=function(f,a,p){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=p;f&&(this.__displayName=
f);this.include(a,!0)};k.include=function(f,a){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var p=f.extend,n=f.include;p&&(p.__fns__||"function"!==typeof p)&&this.extend(p);if(n&&(n.__fns__||"function"!==typeof n)){p=n.length;for(let q=0;q<p;)this.include(n[q++],!0)}for(const q of Object.keys(f))if(n=f[q],"extend"!==q&&"include"!==q||!n.__fns__&&"function"===typeof n)this.__fns__.has(q)?(console.warn('JS.Module already has field: "'+q+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new l("Auto_"+q,{[q]:n}),!1)):this.__fns__.set(q,n?.__fns__||"function"!==typeof n?n:new b(this,q,n))}!0!==a&&v(this)}return this};k.includes=function(f){if(f===this)return!0;const a=this.__inc__,p=a.length;for(let n=0;n<p;)if(a[n++].includes(f))return!0;return!1};k.instanceMethod=function(f){return x(this,f).pop()};const d=new l("Kernel",{extend:function(f){m(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||m(this).includes(f)}}),h=u.Class=e(l),c=h.prototype;
c.initialize=function(f,a,p){"function"!==typeof a&&(p=a,a=Object);l.prototype.initialize.call(this,f);f=e(a);for(const n in this)f[n]===this[n]||f.hasOwnProperty(n)||(f[n]=this[n]);f.prototype.constructor=f.prototype.klass=f;m(f).include(a.__meta__);f.__tgt__=f.prototype;a=a===Object?{}:a.__fns__?a:new l(a.prototype,!0);f.include(d,!0).include(a,!0).include(p,!0);v(f);return f};k=(f,a)=>{f.__inc__=[];f.__dep__=[];const p=f.__tgt__=f.prototype,n=f.__fns__=new Map;for(const C of Object.keys(p)){var q=
n,r=q.set;var z=p[C];z=z?.__fns__||"function"!==typeof z?z:new b(f,C,z);r.call(q,C,z)}p.constructor=p.klass=f;for(const C in c)f[C]===c[C]||f.hasOwnProperty(C)||(f[C]=c[C]);f.include(a);f.constructor=f.klass=h};k(b,d);k(l,d);k(h,l);v(m(b));v(m(l));m(h).include(l.__meta__);u.Singleton=new h("Singleton",{initialize:(f,a,p)=>new (new h(f,a,p))})})(global.JS={});
(u=>{class x extends Error{constructor(g,t,...y){super(...y);this.name="FetchError";this.status=g;this.url=t}}let w=0,v;const m=console.warn,e=Math,{abs:b,min:l,max:k,pow:d}=e,h=Array.isArray,c=document,f=c.head,a=c.createElement.bind(c),p={},n={"":!0},q=c.fonts,r=g=>{var t=g.family.split('"').join("");for(const y of[t,t+" "+g.weight])if(!n[y])for(n[y]=!0,t=p[y]??[];t.length;)(g=t.pop())&&!g.destroyed&&g.isVisible()&&g.sizeViewToDom()},z={},C=g=>{const t={};return(...y)=>{const A=JSON.stringify(y);
return A in t?t[A]:t[A]=g(...y)}},G=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,K=/\$(\d+)/g,J=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,M=/[\\"](.)/g,N=u.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:g=>g.split("").reduce((t,y)=>{t=(t<<5)-t+y.charCodeAt(0);return t&t},0),addEventListener:(g,t,y,A,E)=>{g.addEventListener(t,y,{capture:A||!1,passive:E||!1})},removeEventListener:(g,t,y,A)=>{g.removeEventListener(t,y,A||!1)},resolveName:(g,t)=>{if(g&&0!==g.length){t=t??global;var y=
h(g)?g:g.split("."),A=y.length;for(let E=0;E<A;E++)if(t=t[y[E]],null==t){m("resolveName failed for",g,"at part",E,y[E]);return}return t}},resolveClassname:g=>{"string"===typeof g&&(g=N.resolveName(g));return g&&"function"===typeof g.isA&&g.isA(JS.Class)?g:null},getExtension:g=>g?(g=g.split("."),1<g.length?g.pop():null):null,loadScript:function(g,t,y,A){const E=this._loadedScripts??(this._loadedScripts={});if(E[g])return m("script already loaded for src",g),null;E[g]=!0;const D=a("script");D.type=
"text/javascript";D.async=!1;A&&(D.integrity=A,D.crossOrigin="anonymous");if(t){let I=!1;D.onerror=()=>{D.onload=D.onreadystatechange=D.onerror=null;t(!1)};D.onload=D.onreadystatechange=()=>{I||D.readyState&&"complete"!==D.readyState||(I=!0,D.onload=D.onreadystatechange=D.onerror=null,t(!0))}}D.src=g+(y?"":(g.includes("?")?"&":"?")+"cacheBust="+Date.now());f.appendChild(D);return D},dumpStack:(g,t)=>{let y;"string"===typeof g&&(y=g,g=null);N.global.error.notify(t||"error",null,y,g)},getRandom:g=>
{const t=e.random();return g?k(0,l(g(t),.9999999999)):t},getRandomArbitrary:(g,t,y)=>{const A=l(g,t);return N.getRandom(y)*(k(g,t)-A)+A},getRandomInt:(g,t,y)=>{const A=l(g,t);return e.floor(N.getRandom(y)*(k(g,t)-A+1)+A)},areFloatsEqual:(g,t,y)=>{const A=b(g),E=b(t);return b(g-t)<=(A>E?E:A)*(null==y?1E-6:b(y))},areArraysEqual:(g,t)=>{if(g!==t){if(null==g||null==t)return!1;let y=g.length;if(y!==t.length)return!1;for(;y;)if(g[--y]!==t[y])return!1}return!0},areObjectsEqual:(g,t)=>{if(g!==t){if(null==
g||null==t)return!1;for(const y in g)if(g[y]!==t[y])return!1;for(const y in t)if(g[y]!==t[y])return!1}return!0},getElement:(g,t)=>c.getElementsByTagName(g||"body")[0<t?t:0],loadFontFaces:(g,t)=>{const y=[];for(const A of g)g=new FontFace(A.family,"url("+A.url+")",A.options),y.push(g.load());Promise.all(y).then(A=>{for(const E of A)q.add(E),r(E);t?.(A)})},loadFontFace:(g,t,y={},A)=>{g=new FontFace(g,"url("+t+")",y);g.loaded.then(E=>{q.add(E);r(E);A?.(E)});g.load()},registerForFontNotification:(g,t)=>
{n[t]?g&&!g.destroyed&&g.isVisible()&&g.sizeViewToDom():(p[t]??(p[t]=[])).push(g)},createBaseFontCSSRule:g=>{N.addCSSRule(N.createStylesheet(),"body, input","font-family:"+g,0)},loadCSSFonts:g=>{g?.forEach(N.createStylesheetLink)},createStylesheetLink:g=>{const t=a("link");t.rel="stylesheet";g&&(t.href=g);f.appendChild(t);return t},createStylesheet:()=>{const g=a("style");f.appendChild(g);return g.sheet},addCSSRule:(g,t,y,A)=>{g.insertRule(t+"{"+y+"}",A)},removeCSSRules:g=>{let t=g.cssRules.length;
for(;t;)g.deleteRule(--t)},createInputPlaceholderCSSRule:(g,t,y,A=1)=>{let E=g.__sheet;E?N.removeCSSRules(E):E=g.__sheet=N.createStylesheet();g=g.getODE();g=g.id||(g.id="id"+ ++w);const D=[];t&&D.push("color:"+t);y&&D.push("font-family:"+y);A&&D.push("opacity:"+A);N.addCSSRule(E,"#"+g+"::placeholder",D.join("; "),0)},isNotSorted:(g,t)=>{const y=g.length;for(let A=1;A<y;A++)if(0<t(g[A-1],g[A]))return!0},chainSortFunc:(...g)=>(t,y)=>{for(const A of g){const E=A(t,y);if(0!==E)return E}return 0},getAlphaObjSortFunc:C((g,
t,y,A)=>{const E=t?1:-1;return(D,I)=>{D=D[g];I=I[g];A?("string"!==typeof D&&(D=""+D),"string"!==typeof I&&(I=""+I)):(D=D||"",I=I||"");y&&(D=D.toLowerCase(),I=I.toLowerCase());return D.localeCompare(I)*E}}),getNumericObjSortFunc:C((g,t)=>{const y=t?1:-1;return(A,E)=>{A=A[g]||0;E=E[g]||0;return(A-E)*y}}),csvStringToArray:(g,t)=>{if(!g)return[];const y=[[]];let A;for(;A=J.exec(g);)A[1].length&&","!==A[1]&&y.push([]),y[y.length-1].push(A[2]?A[2].replace(M,"$1"):A[3]);if(t){const E=y.shift();return y.map(D=>
{let I=0;return E.reduce((P,S)=>{P[S]=D[I++];return P},{})})}return y},prepareCSVDataURI:(g,t)=>{const y=D=>{if(D&&h(D)){const I=[],P=D.length;for(let S=0,L;P>S;S++)L=D[S],L=null==L?"":L.toString(),L=L.replace(/"/g,'""'),0<=L.search(/("|,|\n)/g)&&(L='"'+L+'"'),I.push(L);return I.join(",")}m("Unexpected row",D);return null},A=[];if(t){var E=y(t);E&&A.push(E)}if(g)if(h(g)){E=g.length;for(let D=0;E>D;D++){const I=y(g[D]);I&&A.push(I)}}else m("Rows were not an array");return N.encodeCSVDataURI(A.join("\r\n"),
t)},encodeCSVDataURI:(g,t)=>"data:text/csv;charset=utf-8"+(null==t?"":";header="+(t?"present":"absent"))+","+encodeURIComponent(g),dataURIToBlob:g=>{var t=g.indexOf(",");const y=g.slice(0,t).split(":")[1].split(";")[0];g=g.slice(t+1);if(y.startsWith("text/"))g=decodeURIComponent(g);else{g=atob(g);t=g.length;const A=new Uint8Array(t);for(;t;)A[--t]=g.charCodeAt(t);g=A}return new Blob([g],{type:y})},formatAsPercentage:(g,t=2)=>{switch(typeof g){case "number":return t=l(16,k(0,t)),g=e.round(k(0,l(1,
g))*d(10,2+t))/d(10,t),(0===g%1?g:g.toFixed(t))+"%";case "string":return g;default:return m("formatAsPercentage: expects a number"),g}},memoize:C,debounce:(g,t,y)=>{const A="__DBTO_"+ ++w;return function(){const E=this,D=E[A],I=arguments,P=y&&!D;clearTimeout(D);E[A]=setTimeout(function(){E[A]=null;y||g.apply(E,I)},t);P&&g.apply(E,I)}},createFixedThresholdCounter:(g,t,y,A)=>{var E=N.AccessorSupport.generateName;const D="function"===typeof g||g instanceof JS.Module,I={};A=A||E("counter",y);const P=
E(A,"increment");E=E(A,"decrement");if(void 0!==(D?g.instanceMethod(P):g[P]))return m("Increment: Abort clobber",P,g),!1;if(void 0!==(D?g.instanceMethod(E):g[E]))return m("Decrement: Abort clobber",E,g),!1;I[P]=function(){const S=this[A]+1;this[A]=S;this.fireEvent(A,S);S===t&&this.set(y,!0)};I[E]=function(){const S=this[A];if(0!==S){var L=S-1;this[A]=L;this.fireEvent(A,L);S===t&&this.set(y,!1)}};g[D?"include":"extend"](I);return!0},makeURLSearchParams:(g={})=>{const t=new URLSearchParams;for(const y in g){const A=
g[y];void 0!==A&&t.set(y,A)}return t},doFetch:(g,t,y,A,E,D)=>fetch(g,t).then(I=>{if(!I.ok)throw new x(I.status,g,I.statusText);return I}).then(I=>y?I.text():I.json()).then(I=>{if(A)try{if(y)A(I);else{if(!1===I.success)throw new x(200,g,I.message);A(I.data)}}catch(P){throw I=new x(200,g,P.message),I.stack=P.stack,I;}}).catch(I=>{if(E){if("FetchError"!==I.name){const P=new x(0,g,I.message);P.stack=I.stack;I=P}E(I)}}).finally(()=>{D?.()}),I18N:{setLocale:g=>{v=g},getLocale:()=>v,addDictionary:(g,t)=>
{z[t]=Object.assign(z[t]??{},g)},setDictionary:(g,t)=>{z[t]=g??{}},get:(g,...t)=>{var y=v??=(navigator.language??"en").split("-")[0].toLowerCase();y=(z[y]??z.en??{})[g];return null!=y?0<t.length?y.replaceAll(G,(A,E,D,I)=>D&&I?1==t[parseInt(E)]?D:I:"").replaceAll(K,(A,E)=>t[E]):y:g}}};q.onloadingdone=g=>{for(const t of g.fontfaces)r(t)}})(global);
(u=>{const x=(v,m)=>{v.startsWith('"')&&(v=v.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return m?JSON.parse(v):v}catch(e){}},w=u.Cookie={defaults:{raw:!1,json:!1},read:(v,m)=>{m={...w.defaults,...m};const e=m.raw?h=>h:h=>decodeURIComponent(h.split("+").join(" "));m=m.json;const b=document.cookie.split("; "),l=b.length,k=v?void 0:{};for(let h=0;h<l;){var d=b[h++].split("=");const c=e(d.shift());d=e(d.join("="));if(v){if(v===c)return x(d,m)}else k[c]=x(d,m)}return k},write:(v,m,e)=>
{e={...w.defaults,...e};if("number"===typeof e.expires){const c=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+c)}m=e.json?JSON.stringify(m):String(m);const {raw:b,expires:l,path:k,domain:d,samesite:h}=e;return document.cookie=[b?v:encodeURIComponent(v),"=",b?m:encodeURIComponent(m),l?"; expires="+l.toUTCString():"",k?"; path="+k:"",d?"; domain="+d:"",h?"; samesite="+h:"",e.secure?"; secure":""].join("")},remove:(v,m)=>void 0!==w.read(v,m)?(w.write(v,"",{...m,expires:-1}),!0):!1}})(myt);
(u=>{const x=console.error,w=JSON.parse,v=global.localStorage,m=v.getItem.bind(v),e=v.setItem.bind(v),b=v.removeItem.bind(v),l=v.clear.bind(v),k=(h,c,f)=>{if(0<c){const a="__timerId_"+f;(f=d[a])&&clearTimeout(f);d[a]=setTimeout(()=>{h();delete d[a]},c)}else h()},d=u.LocalStorage={hasDatum:(h,c)=>{if(h&&(c=m(c??"myt")))try{return null!=w(c)[h]}catch(f){x(f)}return!1},getDatum:(h,c)=>{if(h&&(c=m(c??"myt")))try{const f=w(c);if("object"===typeof f)return f[h]}catch(f){x(f)}},setDatum:(h,c,f,a)=>{f=f??
"myt";k(()=>{const p=d.getData(f);p[h]=c;e(f,JSON.stringify(p))},a,f+"___"+h)},removeDatum:(h,c,f)=>{c=c??"myt";k(()=>{const a=d.getData(c);delete a[h];e(c,JSON.stringify(a))},f,c+"___"+h)},hasData:h=>null!=m(h??"myt"),getData:h=>{if(h=m(h??"myt"))try{return w(h)}catch(c){x(c)}return{}},setData:(h,c,f)=>{c=c??"myt";h??={};return"object"===typeof h?(k(()=>{e(c,JSON.stringify(h))},f,c),!0):!1},removeData:(h,c)=>{h=h??"myt";k(()=>{b(h)},c,h)},getLength:()=>v.length,getKey:v.key.bind(v),getItem:m,setItem:e,
removeItem:b,clear:l,get:m,set:e,remove:b,clearAll:l}})(myt);
(u=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,v=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;u.URI=new JS.Class("URI",{initialize:function(m,e){m&&this.parse(m,e)},setSource:function(m){this.source=m},setProtocol:function(m){this.protocol=
m},setAuthority:function(m){this.authority=m},setUserInfo:function(m){this.userInfo=m},setUser:function(m){this.user=m},setPassword:function(m){this.password=m},setHost:function(m){this.host=m},setPort:function(m){this.port=m},setRelative:function(m){this.relative=m},setPath:function(m){this.path=m},setDirectory:function(m){this.directory=m},setFile:function(m){this.file=m},setQuery:function(m){this.query=m},setAnchor:function(m){this.anchor=m},parse:function(m,e){const b=this,[l,k,d,h,c,f,a,p,n,
q,r,z,C,G]=(e?v:w).exec(m)??[];b.setSource(l??"");b.setProtocol(k??"");b.setAuthority(d??"");b.setUserInfo(h??"");b.setUser(c??"");b.setPassword(f??"");b.setHost(a??"");b.setPort(p??"");b.setRelative(n??"");b.setPath(q??"");b.setDirectory(r??"");b.setFile(z??"");b.setQuery(C??"");b.setAnchor(G??"");b.queryPairs={};b.query.replace(x,(K,J,M)=>{J&&(b.queryPairs[J]=M)})},decodeQueryParam:m=>decodeURIComponent(m).split("+").join(" "),getQuery:function(){var m=this.queryPairs;const e=[];for(const b in m)e.push(b+
"="+encodeURIComponent(this.getQueryParam(b)));m=e.join("&");return 0<m.length?"?"+m:m},getQueryParam:function(m){m=this.queryPairs[m];return null==m?void 0:this.decodeQueryParam(m)},setQueryParam:function(m,e){this.queryPairs[encodeURIComponent(m)]=encodeURIComponent(e)},removeQueryParam:function(m){delete this.queryPairs[m]},getPathParts:function(m){const e=this.path.split("/");if(!m)for(m=e.length;m;)0===e[--m].length&&e.splice(m,1);return e},toString:function(m){const e=this.path;m=m?this.query?
"?"+this.query:"":this.getQuery();const b=this.anchor;let l=this.toStringThroughPort();e?l+=e:this.host&&(m||b)&&(l+="/");m&&(l+=m);b&&(l+="#"+b);return l},toStringThroughPort:function(){const m=this.protocol,e=this.host,b=this.userInfo,l=this.port;let k="";m&&(k+=m+"://");b&&e&&(k+=b+"@");e&&(k+=e,l&&(k+=":"+l));return k}})})(myt);
(u=>{const x=Math,{PI:w,cos:v,sin:m,sqrt:e}=x,b=(d,h,c,f,a,p)=>{"object"===typeof d&&(p=a,a=f,f=c,c=h,h=d.y,d=d.x);"object"===typeof c&&(p=c.height,a=c.width,f=c.y,c=c.x);return d>=c&&h>=f&&d<=c+a&&h<=f+p},l=(d,h,c,f,a)=>{d=c-d;h=f-h;h=d*d+h*h;return a?h:e(h)},k=(d,h,c,f,a)=>{null==a&&(a=6371);d=d*w/180;c=c*w/180;return a*x.acos(m(d)*m(c)+v(d)*v(c)*v(f*w/180-h*w/180))};u.Geometry={getClosestPointOnALineToAPoint:(d,h,c,f,a,p,n)=>{c-=d;f-=h;a=(c*(a-d)+f*(p-h))/(c*c+f*f);n&&(a=x.min(1,x.max(0,a)));return{x:d+
c*a,y:h+f*a}},isPointInPath:(d,h,c,f)=>{"object"===typeof d&&(f=c,c=h,h=d.y,d=d.x);if(b(d,h,c)&&(c=f.length,6<=c)){let a=!1,p=f[0],n=f[1],q,r;for(;c;)r=f[--c],q=f[--c],r>h!==n>h&&d<(p-q)*(h-r)/(n-r)+q&&(a=!a),p=q,n=r;return a}return!1},measureDistance:l,measureLatLngDistance:k,degreesToRadians:d=>d*w/180,radiansToDegrees:d=>180*d/w,rectContainsPoint:b,circleContainsPoint:(d,h,c,f,a)=>l(d,h,c,f,!0)<=a*a,circleContainsLatLng:(d,h,c,f,a,p)=>k(d,h,c,f,p)<=a,polarToCartesian:(d,h,c,f)=>{c??=0;f??=0;h%=
360;if(0===h)h=d,d=0;else if(90===h)h=0;else if(180===h)h=-d,d=0;else if(270===h)h=0,d=-d;else{const a=h*w/180;h=d*v(a);d*=m(a)}return[c+h,f+d]},cartesianToPolar:(d,h,c,f,a)=>{c??=0;f??=0;d-=c;f=h-f;h=e(d*d+f*f);f=x.atan2(f,d);0>f&&(f+=2*w);return[h,a?f:180*f/w]}}})(myt);
(u=>{const x=JS.Module,w=console.log,v=u.dumpStack;u.Observable=new x("Observable",{attachObserver:function(m,e,b){return m&&e&&b?(this.getObservers(b).push(e,m),!0):!1},detachObserver:function(m,e,b){if(m&&e&&b){var l=this.__obsbt;if(l&&(b=l[b])){l=!1;for(let k=b.length-2;0<=k;k-=2){const [d,h]=b.slice(k);m===h&&e===d&&(b.splice(k,2),l=!0)}return l}}return!1},detachAllObservers:function(){const m=this.__obsbt;if(m)for(const e in m){const b=m[e];for(let l=b.length-2;0<=l;l-=2){const [k,d]=b.slice(l);
d&&k&&("function"===typeof d.detachFrom&&d.detachFrom(this,k,e)||b.splice(l,2))}}},getObservers:function(m){let e;return(e=this.__obsbt??(this.__obsbt={}))[m]??(e[m]=[])},hasObservers:function(m){const e=this.__obsbt;return e?0<e[m]?.length:!1},createEvent:function(m,e){return{source:this,type:m,value:e}},fireEvent:function(m,e,b){if(b=b??(this.hasObservers(m)?this.__obsbt[m]:null)){const l={source:this,type:m,value:e},k=this.__aet??(this.__aet={});if(k[m])u.global.error.notify("warn","eventLoop",
"Abort refiring event:"+m,null,{observable:this,type:m,value:e});else{k[m]=!0;for(e=b.length-2;0<=e;e-=2){const [d,h]=b.slice(e);if(h&&d)try{if("function"===typeof d){if(d.call(h,l))break}else if(h[d](l))break}catch(c){v(c),w("Additional context",d,h)}}k[m]=!1}}}});u.Observer=new x("Observer",{valueFromEvent:m=>m&&"object"===typeof m&&m.type?m.value:m,syncTo:function(m,e,b,l,k){l??=b;try{this[e](m.createEvent(b,m.get(l)))}catch(d){v(d)}k||this.attachTo(m,e,b,k)},isAttachedTo:function(m,e,b){if(m&&
e&&b){var l=this.__obt;if(l&&(b=l[b]))for(l=b.length-2;0<=l;l-=2){const [k,d]=b.slice(l);if(m===d&&e===k)return!0}}return!1},getObservables:function(m){let e;return(e=this.__obt??(this.__obt={}))[m]??(e[m]=[])},hasObservables:function(m){const e=this.__obt;return e?0<e[m]?.length:!1},attachTo:function(m,e,b,l){if(m&&e&&b){const k=this.getObservables(b);if(l){const d=this,h=e;this.__methodNameCounter??(this.__methodNameCounter=0);e="__DO_ONCE_"+this.__methodNameCounter++;this[e]=c=>{d.detachFrom(m,
e,b);delete d[e];return d[h](c)}}if(m.attachObserver(this,e,b))return k.push(e,m),!0}return!1},detachFrom:function(m,e,b){if(m&&e&&b){var l=this.__obt;if(l&&(l=l[b])){let k=!1;for(let d=l.length-2;0<=d;d-=2){const [h,c]=l.slice(d);m===c&&e===h&&m.detachObserver(this,e,b)&&(l.splice(d,2),k=!0)}return k}}return!1},detachFromAllObservables:function(){var m=this.__obt;if(m)for(const [e,b]of Object.entries(m)){for(m=b.length-2;0<=m;m-=2){const [l,k]=b.slice(m);k.detachObserver(this,l,e)}b.length=0}},constrain:function(m,
e){if(m&&e){const l=e.length;if(0!==l%2)w("Observables uneven",this);else{var b;const k=(b=this.__cbmn??(this.__cbmn={}))[m]??(b[m]=[]);if(0<k.length)w("Constraint exists for "+m+" on "+this);else{for(b=0;b<l;b+=2){const [d,h]=e.slice(b);d&&h&&(this.attachTo(d,m,h),k.push(d,h))}try{this[m]()}catch(d){v(d)}}}}},releaseConstraint:function(m){if(m){var e=this.__cbmn;if(e&&(e=e[m])){for(let b=e.length;0<=b;b-=2){const [l,k]=e.slice(b);this.detachFrom(l,m,k)}e.length=0}}},releaseAllConstraints:function(){const m=
this.__cbmn;if(m)for(const e in m)this.releaseConstraint(e)}})})(myt);(u=>{const x=console.warn,w=u.global=new JS.Singleton("Global",{include:[u.Observable],initialize:()=>{},register:(v,m)=>{w.hasOwnProperty(v)&&(x("Global key in use",v),w.unregister(v));w[v]=m;w.fireEvent("register"+v,m)},unregister:v=>{if(w.hasOwnProperty(v)){const m=w[v];delete w[v];w.fireEvent("unregister"+v,m)}else x("Global key not in use",v)}})})(myt);
(u=>{let x;new JS.Singleton("GlobalError",{include:[u.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);u.global.register("error",x)},setConsoleLogging:w=>{x.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=x.stackTraceLimit=w},notify:(w,v,m,e,b)=>{e??=Error(m??v);e=e.stack??e.stacktrace;x.fireEvent(v??"error",{msg:m,stacktrace:e,...b});if(x.consoleLogging&&w)console[w](e)}})})(myt);
(u=>{const x=global,w=x.getComputedStyle,v=document,m=Math.max,e=k=>{const {zIndex:d,opacity:h}=w(k);if("auto"===d){if(1===parseInt(h,10)){let c=0;k=k.childNodes;let f=k.length;for(;f;){const a=k[--f];1===a.nodeType&&(c=m(c,e(a)))}return c}return 0}return parseInt(d,10)},b=(k,d)=>{const h=[];for(;k;){h.push(k);if(k===d)break;k=k.parentNode}return h},l=u.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(k,d,h)=>{k=v.createElement(k);for(const c in h)k[c]=h[c];for(const c in d)k.style[c]=
d[c];return k},isDomElementVisible:k=>{if("INPUT"!==k.nodeName||"hidden"!==k.type)for(;k;){if(k===v)return!0;const {display:d,visibility:h}=w(k);if("none"===d||"hidden"===h)break;k=k.parentNode}return!1},getZIndexRelativeToAncestor:(k,d)=>{if(k&&d)for(k=b(k,d),d=k.length-1;d;){const h=w(k[--d]),c=h.zIndex,f="auto"===c;if(0===d||!f||1!==parseInt(h.opacity,10))return f?0:parseInt(c,10)}return 0},getAncestorArray:b,getHighestZIndex:e,getRelativePosition:(k,d)=>{if(k){let h=0,c=0;for(;k&&"BODY"!==k.nodeName&&
k!==d;)if(h+=k.offsetLeft,c+=k.offsetTop,(k=k.offsetParent)&&"BODY"!==k.nodeName){const {borderLeftWidth:f,borderTopWidth:a}=w(k);h+=parseInt(f,10)-k.scrollLeft;c+=parseInt(a,10)-k.scrollTop}return{x:h,y:c}}},getTruePosition:k=>{if(k)return k=k.getBoundingClientRect(),k.left+=x.scrollX,k.top+=x.scrollY,k},simulateDomEvent:(k,d,h)=>{if(k){const c={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(h)for(const p in h)c[p]=h[p];let a;for(const p in f)if(f[p].test(d)){a=p;break}if(!a)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(v.createEvent)h=v.createEvent(a),"HTMLEvents"===a?h.initEvent(d,c.bubbles,c.cancelable):h.initMouseEvent(d,c.bubbles,c.cancelable,v.defaultView,c.button,c.pointerX,c.pointerY,c.pointerX,c.pointerY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,null),k.dispatchEvent(h);
else{c.clientX=c.pointerX;c.clientY=c.pointerY;h=v.createEventObject();for(const p in c)h[p]=c[p];k.fireEvent("on"+d,h)}}},getScrollbarSize:u.memoize(()=>{const k=v.body,d=l.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});k.appendChild(d);const h=d.offsetWidth-d.clientWidth;k.removeChild(d);return h})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(k){if(Array.isArray(k)){const [d,
h]=k;this.__oE=d;this.__iE=h;this.__iS=h.style;this.__oS=d.style;h.model=d.model=this}else this.__oE=this.__iE=k,this.__iS=this.__oS=k.style,k.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(k){this.__iE.className=this.domClass=k},addDomClass:function(k){const d=this.__iE.className;this.setDomClass((d?
d+" ":"")+k)},removeDomClass:function(k){var d=this.__iE.className;if(d){d=d.split(" ");let h=d.length;for(;h;)d[--h]===k&&d.splice(h,1);this.setDomClass(d.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(k){this.__iE.id=this.domId=k},setZIndex:function(k){this.__oS.zIndex=k},setStyleProperty:function(k,d){this.__iS[k]=d},getPagePosition:function(k){return l["get"+(k?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){l.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return e(this.__iE)},getHighestChildZIndex:function(k){const d=this.__iE.childNodes;let h=d.length,c=0;for(;h;){const f=d[--h];1===f.nodeType&&f!==k&&(c=m(c,e(f)))}return c},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(k,d){(d?this.__iE:this.__oE).scrollTop=k||0}})})(myt);
(u=>{let x;const w=m=>{for(;m.lastChild;)m=m.lastChild;return m},v=(m,e)=>{x.lastTraversalWasForward=m;let b=document.body,l=b;var k=document.activeElement;let d=l,h;const c=m?"getNextFocus":"getPrevFocus";k&&(d=l=k,(k=l.model)??(k=x.findModelForDomElement(l)),k&&(e=k.getFocusTrap(e))&&(b=e.getIDE()));for(;d;){if(d.model&&d.model[c]&&(h=d.model[c]()))d=h.getIDE();else if(m)if(d.firstChild)d=d.firstChild;else{if(d===b)return l.model;if(d.nextSibling)d=d.nextSibling;else for(;d&&(d=d.parentNode,d!==
b);)if(d.nextSibling){d=d.nextSibling;break}}else d=d===b?w(b):d.previousSibling?w(d.previousSibling):d.parentNode;if(d===l)return l.model;if(1===d.nodeType)if((k=d.model)&&k instanceof u.View){if(k.isFocusable())return k}else if(e=d.nodeName,!("A"!==e&&"AREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e&&"BUTTON"!==e||d.disabled||isNaN(d.tabIndex))&&u.DomElementProxy.isDomElementVisible(d)&&(k=x.findModelForDomElement(d),!k?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){d.focus();x.focusedDom=d;
break}}};new JS.Singleton("GlobalFocus",{include:[u.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;u.global.register("focus",x)},setFocusedView:m=>{if(x.focusedView!==m){x.prevFocusedView=x.focusedView;if(x.focusedView=m)x.focusedDom=null;x.fireEvent("focused",m)}},notifyFocus:m=>{x.focusedView!==m&&x.setFocusedView(m)},notifyBlur:m=>{x.focusedView===m&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:m=>{v(!0,m)?.focus()},prev:m=>{v(!1,m)?.focus()},findModelForDomElement:m=>{for(;m;){let e=m.model;if(e&&e instanceof u.View)return e;m=m.parentNode}}})})(myt);
(u=>{const x=JS.Module,w=u.global,v=w.focus,m=()=>({source:null,type:null,value:null}),e=a=>{a=a.value??a;return(a.target??a.srcElement).model},b=u.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:m(),getKeyFromEvent:a=>a.value.key,getCodeFromEvent:a=>a.value.code,isEnterKeyEvent:a=>a.value.code===w.keys.CODE_ENTER,isEscKeyEvent:a=>a.value.code===w.keys.CODE_ESC,isShiftKeyEvent:a=>w.keys.isShiftCode(a.value.code)},createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,
p,n,b)??this.callSuper(a,p,n)}}),l=u.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:m(),getMouseFromEvent:a=>({x:a.value.pageX,y:a.value.pageY}),getMouseFromEventRelativeToView:(a,p)=>{p=p.getPagePosition();a=l.getMouseFromEvent(a);a.x-=p.x;a.y-=p.y;return a}},createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,p,n,l,!0)??this.callSuper(a,p,n)}}),k=u.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:m(),getScrollFromEvent:a=>{const {scrollLeft:p,scrollTop:n}=e(a)?.getIDE();return{x:p,y:n}}},createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,p,n,k)??this.callSuper(a,p,n)}}),d=u.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:m()},createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,p,n,d,!1)??this.callSuper(a,p,n)}}),
h=u.FocusObservable=new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:m()},initNode:function(a,p){this.focusable=!1;this.focusIndicator=!0;this.callSuper(a,p)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(a){this.focused!==a&&(this.focused=a,this.inited&&(this.fireEvent("focused",a),a?v.notifyFocus(this):v.notifyBlur(this)))},setFocusable:function(a){if(this.focusable!==a){const p=this.focusable;(this.focusable=a)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):p&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",a)}},setFocusIndicator:function(a){this.focusIndicator!==a&&(this.focusIndicator=a,this.focused&&(a?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(v.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(a=>!0===a.maskFocus)},focus:function(a){this.isFocusable()&&this.getIDE().focus({preventScroll:a})},blur:function(){this.getIDE().blur()},__doFocus:function(a){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(a){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const a=this.getIDS();a.outlineWidth="thin";a.outlineColor="#8bf";a.outlineStyle="solid";a.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(a,p,n){if(h.EVENT_TYPES[n]){const q=this;return r=>{r??=window.event;if(q._ignoreFocus)r.cancelBubble=!0,r.stopPropagation?.(),r.preventDefault();
else{var z=h.EVENT;z.source=q;z.type=r.type;z.value=r;a[p](z)||(r.cancelBubble=!0,r.stopPropagation?.());z.source=void 0}}}return this.callSuper(a,p,n)}}),c=u.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:m()},createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,p,n,c)??this.callSuper(a,p,n)}}),f=u.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:m()},
createDomHandler:function(a,p,n){return this.createStandardDomHandler(a,p,n,f,!0)??this.callSuper(a,p,n)}});u.DomObservable=new x("DomObservable",{attachDomObserver:function(a,p,n,q,r){if(a&&p&&n){q=!!q;const z=this.createDomHandler(a,p,n);if(z){const C=this.__dobsbt??(this.__dobsbt={}),G=C[n];G?G.push(a,p,z,q):C[n]=[a,p,z,q];u.addEventListener(this.getDomElementForDomObservable(n),n,z,q,r);return!0}}return!1},getDomElementForDomObservable:function(a){return this.getIDE()},createDomHandler:(a,p,n)=>
null,createStandardDomHandler:function(a,p,n,q,r){if(q.EVENT_TYPES[n]){const z=this,C=q.EVENT;return G=>{G??=window.event;C.source=z;C.type=G.type;C.value=G;a[p](C)||(G.cancelBubble=!0,G.stopPropagation?.(),r&&G.preventDefault());C.source=void 0}}},detachDomObserver:function(a,p,n,q){if(a&&p&&n){q=!!q;var r=this.__dobsbt;if(r&&(r=r[n])){const z=this.getDomElementForDomObservable(n);let C=!1;for(let G=r.length-4;0<=G;G-=4){const [K,J,M,N]=r.slice(G,G+4);a===K&&p===J&&q===N&&(z&&u.removeEventListener(z,
n,M,q),r.splice(G,4),C=!0)}return C}}return!1},detachAllDomObservers:function(){var a=this.__dobsbt;if(a)for(const [p,n]of Object.entries(a)){for(a=n.length-2;0<=a;a-=4){const [q,r]=n.slice(a);u.removeEventListener(this.getDomElementForDomObservable(p),p,q,r)}n.length=0}}});u.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:e},attachToDom:function(a,p,n,q,r){if(a&&p&&n){q=!!q;let z;const C=(z=this.__dobt??(this.__dobt={}))[n]??(z[n]=[]);a.attachDomObserver(this,p,n,q,r)&&C.push(q,p,
a)}},detachFromDom:function(a,p,n,q){if(a&&p&&n){q=!!q;var r=this.__dobt;if(r&&(r=r[n])){let z=!1;for(let C=r.length-3;0<=C;C-=3){const [G,K,J]=r.slice(C);a===J&&p===K&&q===G&&a.detachDomObserver(this,p,n,q)&&(r.splice(C,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var a=this.__dobt;if(a)for(const [p,n]of Object.entries(a)){for(a=n.length-3;0<=a;a-=3){const [q,r,z]=n.slice(a);z.detachDomObserver(this,r,p,q)}n.length=0}}})})(myt);
(u=>{let x;const {KeyObservable:w,global:v}=u,m=v.focus,e=w.getCodeFromEvent,b=new Set,l="Firefox"===BrowserDetect.browser,k=l?"OSLeft":"MetaLeft",d=l?"OSRight":"MetaRight",h=()=>b.has("ShiftLeft")||b.has("ShiftRight"),c=()=>b.has("ControlLeft")||b.has("ControlRight"),f=()=>b.has("AltLeft")||b.has("AltRight"),a=()=>b.has(k)||b.has(d),p=(q,r)=>{switch(q){case "Backspace":return q=r.nodeName,!("TEXTAREA"===q||"INPUT"===q&&("text"===r.type||"number"===r.type||"password"===r.type)||"DIV"===q&&"true"===
r.contentEditable&&r.firstChild);case "Tab":return!0}return!1},n=(q,r)=>{for(const z of["keydown","keypress","keyup"])x[r](q,"__hndl_"+z,z)};new JS.Singleton("GlobalKeys",{include:[u.DomElementProxy,u.DomObservable,u.DomObserver,w,u.Observable,u.Observer],initialize:function(){v.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const q of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+q]="Key"+q;for(const q of"1234567890".split(""))x["CODE_"+q]="Digit"+q;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(m,"__hndl_focused","focused");n(x,"attachToDom");global.onblur=()=>{b.clear()}},isShiftKeyDown:h,isControlKeyDown:c,isAltKeyDown:f,isMetaKeyDown:a,isShiftCode:q=>
"ShiftLeft"===q||"ShiftRight"===q,isControlCode:q=>"ControlLeft"===q||"ControlRight"===q,isAltCode:q=>"AltLeft"===q||"AltRight"===q,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?a():c(),ignoreFocusTrap:()=>f(),__hndl_focused:q=>{(q=q.value)?(n(x,"detachFromDom"),n(q,"attachToDom")):((q=m.prevFocusedView)&&n(q,"detachFromDom"),n(x,"attachToDom"))},__hndl_keydown:q=>{const r=e(q);q=q.value;p(r,q.target)&&q.preventDefault();a()&&"ShiftLeft"!==r&&"ShiftRight"!==r&&"ControlLeft"!==r&&"ControlRight"!==
r&&"AltLeft"!==r&&"AltRight"!==r?(x.fireEvent("keydown",r),x.fireEvent("keyup",r)):(b.add(r),"Tab"===r&&(q=f(),h()?m.prev(q):m.next(q)),x.fireEvent("keydown",r))},__hndl_keypress:q=>{x.fireEvent("keypress",e(q))},__hndl_keyup:q=>{const r=e(q);q=q.value;p(r,q.target)&&q.preventDefault();b.delete(r);x.fireEvent("keyup",r)}})})(myt);
(u=>{const x=JS.Module,w=Math.max,v=(d,h,c,f,a=0)=>{const p=d.length;for(let n=c;a<p;a++)l(d[a],h,n),f&&(n+=c)},m=(d,h,c,f=0)=>{const a=d.length;for(let p=h;f<a;)d[f++].crossPos+=p,c&&(p+=h)},e=(d,h,c,f)=>{var a=d[h?"setWidthViaFlex":"setHeightViaFlex"];h=f?h?d.getFlexBasisWidth():d.getFlexBasisHeight():0;a.call(d,h+c)},b=(d,h,c)=>{d[h?"setXViaFlex":"setYViaFlex"](c,!1)},l=(d,h,c)=>{d[h?"setXViaFlex":"setYViaFlex"](c,!0)},k=(d,h,c)=>{d[h]!==c&&(d[h]=c,d.inited&&d.fireEvent(h,c),d.updateFlexboxLayout())};
u.FlexboxSupport=new x("FlexboxSupport",{initNode:function(d,h){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(d,h);this.updateFlexboxLayout()},setWidth:function(d){const h=this.width;this.callSuper(d);h!==this.width&&this.updateFlexboxLayout()},setHeight:function(d){const h=this.height;this.callSuper(d);h!==this.height&&this.updateFlexboxLayout()},
setDirection:function(d){k(this,"direction",d)},setWrap:function(d){k(this,"wrap",d)},setJustifyContent:function(d){k(this,"justifyContent",d)},setAlignItems:function(d){k(this,"alignItems",d)},setAlignContent:function(d){k(this,"alignContent",d)},setRowGap:function(d){k(this,"rowGap",w(0,d))},setColumnGap:function(d){k(this,"columnGap",w(0,d))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(d){this.set("totalBasisWidth",
d,!0)},setTotalBasisHeight:function(d){this.set("totalBasisHeight",d,!0)},ignoreSubviewForFlex:function(d){return d&&"function"===typeof d.ignoreFlex?d.ignoreFlex():!0},setFlexboxPaused:function(d,h){this.__flexboxPaused!==d&&((this.__flexboxPaused=d)||h||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(d){this.callSuper(d);d&&!this.ignoreSubviewForFlex(d)&&this.updateFlexboxLayout()},subviewRemoved:function(d){this.callSuper(d);!d||this.ignoreSubviewForFlex(d)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(d){this.callSuper(d);d&&this.ignoreSubviewForFlex(d)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(d){return d?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(d){return d?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(d){this._updateAgain=d},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const d=this;if(d.isOKToUpdateLayout()){var h=d.getSubviewsInLexicalOrder().filter(G=>!0!==d.ignoreSubviewForFlex(G)&&!0===G.visible);const C=h.length;if(0<C){d.__isUpdatingFlexboxLayout=!0;var c=d.direction;const G=c.startsWith("row"),K=!G;var f=d.getWidthForFlexboxLayout(),a=d.getHeightForFlexboxLayout();const J=G?d.columnGap:d.rowGap,M=G?f:a;var p=G?d.rowGap:
d.columnGap;const N=G?a:f,g=d.isWrapNotAllowed();f=d.justifyContent;a=d.alignItems;var n=g?"stretch":d.alignContent;c.endsWith("Reverse")&&h.reverse();let t=0,y=0,A=0,E=0,D={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:A,crossSize:0};c=[D];for(let I=0;I<C;){const P=h[I++],S=G?P.getFlexBasisWidth():P.getFlexBasisHeight(),L=P.getShrink(),V=P.getGrow();!g&&0<D.items.length&&t+(0===E?0:J)+S>M&&(D.extraSize=M-t,A+=D.crossSize+p,y=w(y,t),E=t=0,D={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:A,crossSize:0},c.push(D));0!==E&&(t+=J);0<L&&0<S&&(D.shrinkCount+=L,D.shrinkBasis+=S*L);0<V&&(D.growCount+=V);D.crossSize=w(D.crossSize,K?P.getFlexBasisWidth():P.getFlexBasisHeight());b(P,G,t);e(P,G,S);t+=S;D.items.push(P);E++}D.extraSize=M-t;A+=D.crossSize;y=w(y,t);if(d.isCompactOnMainAxis(G)&&(h=c.reduce((I,P)=>null==I?P.extraSize:Math.min(I,P.extraSize),null),0!==h))for(var q of c)q.extraSize-=h;d[G?"setTotalBasisWidth":"setTotalBasisHeight"](y);d[G?"setTotalBasisHeight":
"setTotalBasisWidth"](A);q=c.length;if(1<q&&"wrapReverse"===d.wrap){for(var r of c)r.crossPos=A-(r.crossPos+r.crossSize);c.reverse()}if(!d.isCompactOnCrossAxis(G))switch(r=N-A,n){default:case "start":break;case "end":m(c,r,!1);break;case "center":m(c,r/2,!1);break;case "spaceBetween":1<q&&m(c,r/(q-1),!0,1);break;case "spaceAround":r<=p?m(c,r/2,!1):(m(c,p/2,!1),r-=p,m(c,r/(2*q),!0),m(c,r/(2*q),!0,1));break;case "spaceEvenly":r<=2*p?m(c,r/2,!1):(m(c,p,!1),m(c,(r-2*p)/(q+1),!0));break;case "stretch":p=
r/q;r=0;for(var z of c)z.crossSize+=p,z.crossPos+=r,r+=p}for(const I of c){z=I.items;p=I.extraSize;if(0<p)if(0<I.growCount){p/=I.growCount;c=0;for(const L of z)0<c&&l(L,G,c),r=L.getGrow()*p,0<r&&(e(L,G,r,!0),c+=r)}else switch(c=z.length,f){default:case "start":break;case "end":v(z,G,p,!1);break;case "center":v(z,G,p/2,!1);break;case "spaceBetween":1<c&&v(z,G,p/(c-1),!0,1);break;case "spaceAround":p<=J?v(z,G,p/2,!1):(v(z,G,J/2,!1),p-=J,v(z,G,p/(2*c),!0),v(z,G,p/(2*c),!0,1));break;case "spaceEvenly":p<=
2*J?v(z,G,p/2,!1):(v(z,G,J,!1),p-=2*J,v(z,G,p/(c+1),!0))}else if(0>p&&0<I.shrinkCount){c=I.shrinkBasis;r=0;for(const L of z)0>r&&l(L,G,r),n=L.getShrink()*(G?L.getFlexBasisWidth():L.getFlexBasisHeight())/c*w(p,-c),0>n&&(e(L,G,n,!0),r+=n)}p=!1;const {crossSize:P,crossPos:S}=I;for(const L of z)switch(L.getAlignSelf()||a){case "start":b(L,K,S);e(L,K,K?L.getFlexBasisWidth():L.getFlexBasisHeight(),!1);break;case "end":b(L,K,S+P-(K?L.getFlexBasisWidth():L.getFlexBasisHeight()));e(L,K,K?L.getFlexBasisWidth():
L.getFlexBasisHeight(),!1);break;case "center":b(L,K,S+(P-(K?L.getFlexBasisWidth():L.getFlexBasisHeight()))/2);e(L,K,K?L.getFlexBasisWidth():L.getFlexBasisHeight(),!1);break;case "baseline":p=!0;b(L,K,S+(P-(K?L.getFlexBasisWidth():L.getFlexBasisHeight()))/2+L.getFlexBaselineOffset(G));e(L,K,K?L.getFlexBasisWidth():L.getFlexBasisHeight(),!1);break;default:b(L,K,S),e(L,K,P,!1)}p&&d.updateFlexboxLayoutBaselineAdjustment(z,G,S)}d.__isUpdatingFlexboxLayout=!1;d.isUpdateAgain()&&!d.__UPDATE_AGAIN_LOOP_PROTECTION&&
(d.setUpdateAgain(!1),d.__UPDATE_AGAIN_LOOP_PROTECTION=!0,d.updateFlexboxLayout(),d.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else d.setTotalBasisWidth(0),d.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(d,h,c)=>{}});u.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(d){this.visible!==d&&(this.callSuper(d),this.updateFlexboxLayoutFromChild())},setXViaFlex(d,h){h&&(d+=this.x);this.x!==d&&(this.__isFlexUpdate=!0,this.setX(d),this.__isFlexUpdate=!1)},setYViaFlex(d,h){h&&
(d+=this.y);this.y!==d&&(this.__isFlexUpdate=!0,this.setY(d),this.__isFlexUpdate=!1)},setWidth:function(d){const h=this.width!==d;h&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(d);h&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(d){this.width!==d&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(d),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(d){const h=this.height!==d;
h&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(d);h&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(d){this.height!==d&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(d),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:d=>0,setIgnoreFlex:function(d){this.__ignoreFlex!==d&&(this.__ignoreFlex=d,this.inited&&(this.fireEvent("ignoreFlex",d),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(d){d=w(0,d);this.grow!==d&&(this.grow=d,this.inited&&(this.fireEvent("grow",d),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(d){d=w(0,d);this.shrink!==d&&(this.shrink=d,this.inited&&(this.fireEvent("shrink",d),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(d){this.alignSelf!==d&&(this.alignSelf=
d,this.inited&&(this.fireEvent("alignSelf",d),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const d=this.alignSelf;return"auto"===d||""===d?null:d},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(u=>{const x=console.log,w=new Map,v=new Map,m=(h,c)=>c+h.charAt(0).toUpperCase()+h.slice(1),e=h=>v.get(h)??(v.set(h,m(h,"set")),v.get(h)),b=h=>w.get(h)??(w.set(h,m(h,"get")),w.get(h)),l=(h,c)=>{let f;for(const a in c){const p=c[a],n=e(a);if(n in h)h[n](p);else h[a]!==p&&(h[a]=p,(f??=!1!==h.inited&&h.fireEvent)&&h.fireEvent(a,p))}},k=(h,c)=>{const f=b(c);h[f]&&x("Overwriting getter",f);h[f]=function(){return this[c]}},d=(h,c)=>{const f=e(c);h[f]&&x("Overwriting setter",f);h[f]=function(a){this[c]!==
a&&(this[c]=a,this.inited&&this.fireEvent(c,a))}};u.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:e,generateGetterName:b,generateName:m,createSetterFunction:d,createGetterFunction:k,createSetterMixin:(h,c)=>{const f={};for(const a of h)d(f,a),c&&k(f,a);return f}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(h,c){if(h)for(const f of h)this[f]=c[f],delete c[f]},callSetters:function(h){var c=this.earlyAttrs,f=this.lateAttrs;if(c||f){h={...h};if(c){var a=c.length;for(var p=0;p<a;){const q=c[p++];q in h&&(this.set(q,h[q]),delete h[q])}}let n;if(f)for(n=[],c=f.length,a=0;a<c;)p=f[a++],p in h&&(n.push(p,h[p]),delete h[p]);l(this,h);if(n)for(f=n.length,h=0;h<f;)this.set(n[h++],
n[h++])}else l(this,h)},get:function(h){const c=b(h);return"function"===typeof this[c]?this[c]():this[h]},set:function(h,c,f){if(!f&&(f=e(h),"function"===typeof this[f]))return this[f](c);this[h]!==c&&(this[h]=c,!1!==this.inited&&this?.fireEvent(h,c))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var u=this.__meta__;if(u){var x=Object.keys(u);for(let w=x.length;0<w;)u[x[--w]]=null}u=Object.keys(this);for(x=u.length;0<x;)this[u[--x]]=null;this.destroyed=!0}}});
(u=>{const {Class:x,Module:w}=JS,v=console.warn;let m;const e=(f,a)=>a?(m=f).__op??(m.__op=[]):f.__op;let b;const l=(f,a)=>a?(b=f).__actives??(b.__actives=[]):f.__actives,k=new x("AbstractPool",{include:[u.Destructible],initialize:()=>{},destroy:function(){const f=e(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=e(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){e(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=e(this);if(f){let a=f.length;for(;a;){const p=f[--a];"function"===typeof p.destroy&&p.destroy()}f.length=0}}}),d=u.SimplePool=new x("SimplePool",k,{initialize:function(f,a){this.callSuper();this.instanceClass=f??Object;this.instanceParent=a},createInstance:function(f){var a=this.instanceParent,p=this.instanceClass;return a?new p(a,f):new p}}),h=new w("TrackActives",{destroy:function(){const f=
l(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();l(this,!0).push(f);return f},putInstance:function(f){var a=l(this);if(a){const p=a.indexOf(f);if(-1<p){a.splice(p,1);this.callSuper(f);return}a="inactive"}else a="missing";v("Tried to put a "+a+" instance",f,this)},getActives:function(f){const a=l(this);if(a){if(f){const p=[],n=a.length;for(let q=0;n>q;){const r=a[q++];f.call(this,r)&&p.push(r)}return p}return a.slice()}return[]},putActives:function(){const f=
l(this);if(f){let a=f.length;for(;a;)this.putInstance(f[--a])}}}),c=u.TrackActivesPool=new x("TrackActivesPool",d,{include:[h]});u.TrackActivesMultiPool=new x("TrackActivesMultiPool",k,{initialize:function(f,a){this.callSuper();this.instanceClassesByKey=f;const p=this._poolsByClassName={},n=this.__pbk={};for(const q in f){const r=f[q];n[q]=p[r.__displayName]=new c(r,a)}},destroy:function(){const f=this.__pbk;for(const a in f)f[a].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],
a=this.__pbk[f];if(a)return a.getInstance(arguments);v("No pool for key",f)},putInstance:function(f){const a=this._poolsByClassName[f.klass.__displayName];a?a.putInstance(f):v("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const a in f)f[a].destroyPooledInstances()},getActives:function(f){let a=[];const p=this.__pbk;for(const n in p)a.push(...p[n].getActives(f));return a},putActives:function(){const f=this.__pbk;for(const a in f)f[a].putActives()}});u.Reusable=new w("Reusable",
{clean:()=>{}})})(myt);
(u=>{const x=JS.Class,w=console.warn,v=[u.AccessorSupport,u.Destructible,u.Observable,u.Observer],m=(c,f)=>{if(f){const a=f.length;for(let p=0,n;a>p;)(n=f[p++])?c.extend(n):w("Missing mixin in",c.klass.__displayName)}c.inited=!1},e=(c,f)=>{if(f)for(;c;){if(f(c))return c;c=c.parent}},b=(c,f)=>{const a=f.name;void 0===c[a]?c[a]=f:w("Name in use",a)},l=(c,f)=>{const a=f.name;c[a]===f?delete c[a]:w("Name not in use",a)};let k;const d=c=>(k=c).__animPool??(k.__animPool=new u.TrackActivesPool(u.Animator,c));
let h;u.Eventable=new x("Eventable",{include:v,initialize:function(c,f){m(this,f);this.init(c??{})},init:function(c){this.callSetters(c);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});u.Node=new x("Node",{include:v,extend:{getMatchingAncestorOrSelf:e,getMatchingAncestor:(c,f)=>e(c?c.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(c,f,a){m(this,a);this.initNode(c,f??{})},initNode:function(c,f){this.callSetters(f);
this.setParent(c);this.inited=!0},destroy:function(){const c=this.subnodes;this.isBeingDestroyed=!0;if(c)for(let f=c.length;0<f;)c[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(c){this.placement=c},setDefaultPlacement:function(c){this.defaultPlacement=
c},setIgnorePlacement:function(c){this.ignorePlacement=c},setParent:function(c){if(c&&!this.ignorePlacement){var f=this.placement??c.defaultPlacement;f&&(c=c.determinePlacement(f,this))}if(this.parent!==c&&!c?.destroyed){if(f=this.parent){const a=f.getSubnodes().indexOf(this);-1<a&&(this.name&&l(f,this),f.subnodes.splice(a,1),f.subnodeRemoved(this))}if(this.parent=c)c.getSubnodes().push(this),this.name&&b(c,this),c.subnodeAdded(this);this.inited&&this.fireEvent("parent",c)}},setName:function(c){if(this.name!==
c){const f=this.parent;f&&this.name&&l(f,this);this.name=c;f&&c&&b(f,this)}},determinePlacement:function(c,f){let a=c.indexOf("."),p;0<=a&&(p=c.slice(a+1),c=c.slice(0,a));"*"===c&&(c=this.defaultPlacement)&&(a=c.indexOf("."),0<=a&&(p=c.slice(a+1)+(p?"."+p:""),c=c.slice(0,a)));return(c=this[c])?p?c.determinePlacement(p,f):c:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(c){if(c){if(c===this)return!0;if(this.parent)return this.getIDE&&
c.getIDE?c.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(c)}return!1},isAncestorOf:function(c){return c?c.isDescendantOf(this):!1},getLeastCommonAncestor:function(c){for(;c;){if(this.isDescendantOf(c))return c;c=c.parent}},searchAncestorsForClass:function(c){if(c)return this.searchAncestors(f=>f instanceof c)},searchAncestorsForModule:function(c){if(c)return this.searchAncestors(f=>f.isA(c))},searchAncestors:function(c){return e(this?this.parent:null,c)},searchAncestorsOrSelf:function(c){return e(this,
c)},getAncestors:function(){const c=[];let f=this;for(;f;)c.push(f),f=f.parent;return c},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:c=>{},subnodeRemoved:c=>{},animate:function(c){if(c){const f=d(this),a=f.getInstance({ignorePlacement:!0}),p=c.callback;delete c.callback;a.callSetters(c);a.next(n=>{f.putInstance(a)});p&&a.next(p);a.setRunning(!0);return a}},getActiveAnimators:function(c){if("string"===typeof c){const f=c;c=a=>a.attribute===f}return d(this).getActives(c)},
stopActiveAnimators:function(c,f=!1){c=this.getActiveAnimators(c);let a=c.length;if(0<a){const p=d(this);for(;a;){const n=c[--a];n.reset(f);f||p.putInstance(n)}}},doOnceOnIdle:function(c){this.attachTo(u.global.idle,c,"idle",!0)},addRef:function(c,f){return((h=this).__REFS??(h.__REFS={}))[c]=f},getRef:function(c){return((h=this).__REFS??(h.__REFS={}))[c]},removeRef:function(c){const f=(h=this).__REFS??(h.__REFS={}),a=f[c];delete f[c];return a}})})(myt);
(u=>{let x=0,w=!1;const v=JS.Class,m=[],e=c=>{if(w!==c&&(w=c,!c)){for(c=m.length;c;){const f=m[--c];f.__deferredLayout=!1;f.update()}m.length=0}},b=(c,f,a,p)=>{const n=c.getSubviewIndex(f),q=c.subviews;-1<n&&(c=c.getSubviewIndex(a),q.splice(n,1),-1<c?(n<c&&--c,q.splice(c+(p?1:0),0,f)):p?q.push(f):q.unshift(f))},l=(c,f,a)=>{c[f]!==a&&(c[f]=a,c.inited&&(c.fireEvent(f,a),c.update()))},k=u.Layout=new v("Layout",u.Node,{extend:{incrementGlobalLock:()=>{1===++x&&e(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&e(!1)}},initNode:function(c,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const a=!0===f.locked;delete f.locked;this.callSuper(c,f);a||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(c){var f=this.parent;if(f!==c){const a=!this.locked;a&&(this.locked=!0);let p,n;if(f){p=this.subviews;for(n=p.length;n;)this.removeSubview(p[--n]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(c);
if(c=this.parent){p=c.getSubviews();n=0;for(f=p.length;f>n;)this.addSubview(p[n++]);this.attachTo(c,"__hndlPSA","subviewAdded");this.attachTo(c,"__hndlPSR","subviewRemoved")}a&&(this.locked=!1,this.inited&&c&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(m.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(c){return this.subviews.includes(c)},getSubviewIndex:function(c){return this.subviews.indexOf(c)},addSubview:function(c){this.ignore(c)||
(this.subviews.push(c),this.startMonitoringSubview(c),this.locked||this.update())},startMonitoringSubview:c=>{},startMonitoringAllSubviews:function(){const c=this.subviews;let f=c.length;for(;f;)this.startMonitoringSubview(c[--f])},removeSubview:function(c){if(this.ignore(c))return-1;const f=this.getSubviewIndex(c);-1<f&&(this.stopMonitoringSubview(c),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:c=>{},stopMonitoringAllSubviews:function(){const c=this.subviews;
let f=c.length;for(;f;)this.stopMonitoringSubview(c[--f])},ignore:c=>c.ignoreLayout,__hndlPSA:function(c){c=c.value;c.parent===this.parent&&this.addSubview(c)},__hndlPSR:function(c){c=c.value;c.parent===this.parent&&this.removeSubview(c)},sortSubviews:function(c){this.subviews.sort(c)},moveSubviewBefore:function(c,f){b(this,c,f,!1)},moveSubviewAfter:function(c,f){b(this,c,f,!0)}});var d=u.ConstantLayout=new v("ConstantLayout",k,{setTargetAttrName:function(c){this.setterName=u.AccessorSupport.generateSetterName(c);
l(this,"targetAttrName",c)},setTargetValue:function(c){l(this,"targetValue",c)},update:function(){if(this.canUpdate()){const c=this.setterName,f=this.targetValue,a=this.subviews,p=a.length;if(c)for(let n=0;p>n;)a[n++][c](f)}}});d=u.VariableLayout=new v("VariableLayout",d,{initNode:function(c,f){this.collapseParent=this.reverse=!1;this.callSuper(c,f)},setCollapseParent:function(c){l(this,"collapseParent",c)},setReverse:function(c){l(this,"reverse",c)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,a=this.subviews;var c=a.length;let p=this.targetValue,n,q=0;if(this.reverse)for(n=c;n;)c=a[--n],this.skipSubview(c)||(p=this.updateSubview(++q,c,f,p));else for(n=0;c>n;){const r=a[n++];this.skipSubview(r)||(p=this.updateSubview(++q,r,f,p))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,p);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(c){this.attachTo(c,
"update","visible")},stopMonitoringSubview:function(c){this.detachFrom(c,"update","visible")},updateSubview:(c,f,a,p)=>{f[a](p);return p},skipSubview:c=>!c.visible,updateParent:(c,f)=>{}});const h=u.SpacedLayout=new v("SpacedLayout",d,{initNode:function(c,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(c,f)},setTargetAttrName:function(c){if(this.targetAttrName!==
c){const f="y"===c,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";a&&this.startMonitoringAllSubviews();this.callSuper(c)}},setNoAddSubviewOptimization:function(c){this.noAddSubviewOptimization=c},setAxis:function(c){this.setTargetAttrName(this.axis=c)},setInset:function(c){this.setTargetValue(this.inset=c)},setSpacing:function(c){l(this,"spacing",c)},setOutset:function(c){l(this,
"outset",c)},addSubview:function(c){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(c);this.locked=f},startMonitoringSubview:function(c){this.attachTo(c,"update",this.measureAttrName);this.callSuper(c)},stopMonitoringSubview:function(c){this.detachFrom(c,"update",this.measureAttrName);this.callSuper(c)},updateSubview:function(c,f,a,p){c=f[this.measureAttrName];f[a](p+(c-f[this.measureAttrBaseName])/2);return p+c+this.spacing},updateParent:function(c,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});u.ResizeLayout=new v("ResizeLayout",h,{setCollapseParent:c=>{},setTargetAttrName:function(c){if(this.targetAttrName!==c){if(this.inited){const f="x"===c;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(c)}},setParent:function(c){if(this.parent!==c){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(c);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(c){this.attachTo(this.parent,
"update",c)},stopMonitoringParent:function(c){this.detachFrom(this.parent,"update",c)},doBeforeUpdate:function(){const c=this.measureAttrName,f=this.subviews;let a=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,p=f.length,n=0,q=0;for(;p;){const r=f[--p];this.skipSubview(r)||(++n,0<r.layoutHint?q+=r.layoutHint:a-=r[c])}0!==n&&(this.remainder=a-=(n-1)*this.spacing,this.resizeSum=q,this.scalingFactor=a/q,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===c?
"setWidth":"setHeight")},updateSubview:function(c,f,a,p){var n=f.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,f[this.measureSetter](n));return this.callSuper(c,f,a,p)},startMonitoringSubview:function(c){0<c.layoutHint||this.attachTo(c,"update",this.measureAttrName);this.attachTo(c,"update","visible")},stopMonitoringSubview:function(c){0<c.layoutHint||this.detachFrom(c,"update",
this.measureAttrName);this.detachFrom(c,"update","visible")},updateParent:(c,f)=>{}});u.AlignedLayout=new v("AlignedLayout",d,{initNode:function(c,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(c,f)},setTargetAttrName:function(c){if(this.targetAttrName!==c){const f="y"===c,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";a&&this.startMonitoringAllSubviews();this.callSuper(c)}},setAlign:function(c){if(this.align!==c){this.align=c;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===c||"bottom"===c||"top"===c?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",c),this.update())}},startMonitoringSubview:function(c){this.attachTo(c,"update",this.measureAttrName);this.callSuper(c)},
stopMonitoringSubview:function(c){this.detachFrom(c,"update",this.measureAttrName);this.callSuper(c)},doBeforeUpdate:function(){const c=this.measureAttrName,f=this.subviews;let a=0,p=f.length;for(;p;){const n=f[--p];this.skipSubview(n)||(a=a>n[c]?a:n[c])}this.setTargetValue(a)},updateSubview:function(c,f,a,p){switch(this.align){case "center":case "middle":f[a]((p-f[this.measureAttrName])/2);break;case "right":case "bottom":f[a](p-f[this.measureAttrName]);break;default:f[a](0)}return p},updateParent:function(c,
f){this.parent[this.parentSetterName](f)}});u.WrappingLayout=new v("WrappingLayout",d,{initNode:function(c,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(c,f)},
setTargetAttrName:function(c){if(this.targetAttrName!==c){const f="y"===c,a=this.inited;a&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const p=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";a&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(p));
this.callSuper(c)}},setParent:function(c){if(this.parent!==c){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(c);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(c){this.setTargetAttrName(this.axis=c)},setInset:function(c){this.setTargetValue(this.inset=c)},setSpacing:function(c){l(this,"spacing",c)},setOutset:function(c){l(this,"outset",c)},setLineSpacing:function(c){l(this,"lineSpacing",c)},setLineInset:function(c){l(this,
"lineInset",c)},setLineOutset:function(c){l(this,"lineOutset",c)},startMonitoringParent:function(c){this.attachTo(this.parent,"update",c)},stopMonitoringParent:function(c){this.detachFrom(this.parent,"update",c)},startMonitoringSubview:function(c){this.attachTo(c,"update",this.measureAttrName);this.attachTo(c,"update",this.otherMeasureAttrName);this.callSuper(c)},stopMonitoringSubview:function(c){this.detachFrom(c,"update",this.measureAttrName);this.detachFrom(c,"update",this.otherMeasureAttrName);
this.callSuper(c)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(c,f,a,p){c=f[this.measureAttrName];const n=f[this.otherMeasureAttrName];p+c>this.parentSizeLessOutset||"break"===f.layoutHint?(p=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);f[this.otherSetterName](this.linePos+
(n-f[this.otherMeasureAttrBaseName])/2);f[a](p+(c-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,p+c+this.outset);return p+c+this.spacing},updateParent:function(c,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});u.createFixedThresholdCounter(k,1,"locked")})(myt);
(u=>{const x=Math.round,w=u.DomElementProxy,v=u.Geometry.rectContainsPoint,m=(a,p)=>{const n=u.global.focus.focusedView,q=a.getIDE();if(n===a||n?.isDescendantOf(a))n._ignoreFocus=!0;const {scrollTop:r,scrollLeft:z}=q;p();n&&(n._ignoreFocus=!1,n.focus(!0));q.scrollTop=r;q.scrollLeft=z},e=(a,p,n)=>{const q=a.getODE(),r=q.parentNode;if(r){const z=()=>{const C=q.nextElementSibling;r.removeChild(q);p();r.insertBefore(q,C)};n?m(a,z):z()}else p()},b=(a,p,n,q)=>{if(p&&"object"===typeof p){if(q){var r=a.getLeastCommonAncestor(p)?.getIDE();
if(r){const z=w.getZIndexRelativeToAncestor,C=n?-1:1;q=C*z(a.getODE(),r);r=C*z(p.getODE(),r);if(q<r)return!0;if(r<q)return!1}}a=a.getODE().compareDocumentPosition(p.getODE());return n?2===a||10===a:4===a||20===a}return!1},l=a=>{a=a.getAncestors();let p=a.length,n=1,q=1;for(;p;){const r=a[--p];n*=r.scaleX||1;q*=r.scaleY||1;r.__effectiveScaleX=n;r.__effectiveScaleY=q}return{scaleX:n,scaleY:q}},k=(a,p,n)=>{const q=a.getODE();if(v(p,n,0,0,q.offsetWidth*a.__effectiveScaleX,q.offsetHeight*a.__effectiveScaleY)){if(a=
a.parent){const r=a.getIDE();return k(a,p+(q.offsetLeft-r.scrollLeft)*a.__effectiveScaleX,n+(q.offsetTop-r.scrollTop)*a.__effectiveScaleY)}return!0}return!1},d=a=>{switch(a.align){case "center":a.releaseConstraint("__doAlignCenter");break;case "right":a.releaseConstraint("__doAlignRight")}},h=a=>{const p=a.parent;if(p)switch(a.align){case "center":a.constrain("__doAlignCenter",[a,"width",a,"alignOffset",p,"width"]);break;case "right":a.constrain("__doAlignRight",[a,"width",a,"alignOffset",p,"width"]);
break;case "left":a.setX(a.alignOffset||0)}},c=a=>{switch(a.valign){case "middle":a.releaseConstraint("__doValignMiddle");break;case "bottom":a.releaseConstraint("__doValignBottom")}},f=a=>{const p=a.parent;if(p)switch(a.valign){case "middle":a.constrain("__doValignMiddle",[a,"height",a,"valignOffset",p,"height"]);break;case "bottom":a.constrain("__doValignBottom",[a,"height",a,"valignOffset",p,"height"]);break;case "top":a.setY(a.valignOffset||0)}};u.View=new JS.Class("View",u.Node,{include:[w,u.DomObservable,
u.DomObserver,u.ScrollObservable,u.FocusObservable,u.KeyObservable,u.MouseObservable],extend:{retainFocusDuringDomUpdate:m,doWhileRemovedFromDom:e},initNode:function(a,p){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;p.tagName&&(this.tagName=p.tagName,delete p.tagName);this.setDomElement(this.createOurDomElement(a));const n=this.getODS();n.left=n.top="0px";this.callSuper(a,p);this.__updateBounds(this.width,this.height)},createOurDomElement:function(a){a=document.createElement(this.tagName??
"div");a.style.position="absolute";let p;a.className=(p=this.klass).__cssClassName??(p.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return a},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(a){this.parent!==a&&(this.inited&&(d(this),c(this)),this.callSuper(a),this.align&&h(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const a=[],p=this.getIDE().children,n=p.length;for(let q=0;q<n;){const r=p[q++].model;r?.parent===this&&a.push(r)}return a},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(a=>a!==this)},setFocusTrap:function(a){this.focusTrap=a},setFocusCage:function(a){this.focusCage=a},setMaskFocus:function(a){this.maskFocus=a},setLayoutHint:function(a){this.layoutHint=a},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(a){if(this.ignoreLayout!==a){var p=this.inited&&this.parent;let n;if(a){if(p)for(p=this.parent.getLayouts(),n=p.length;n;)p[--n].removeSubview(this);this.ignoreLayout=a}else if(this.ignoreLayout=a,p)for(p=this.parent.getLayouts(),n=p.length;n;)p[--n].addSubview(this)}},setDomClass:function(a){this.domClass!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domClass",a))},setDomId:function(a){this.domId!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domId",a))},setAlignOffset:function(a){this.alignOffset!==
a&&(this.alignOffset=a,this.inited&&this.fireEvent("alignOffset",a),this.parent&&"left"===this.align&&this.setX(a))},setAlign:function(a){this.align!==a&&(this.inited&&d(this),this.align=a,this.inited&&(this.fireEvent("align",a),h(this)))},__doAlignCenter:function(a){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(a){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(a){this.valignOffset!==a&&(this.valignOffset=a,this.inited&&
this.fireEvent("valignOffset",a),this.parent&&"top"===this.valign&&this.setY(a))},setValign:function(a){this.valign!==a&&(this.inited&&c(this),this.valign=a,this.inited&&(this.fireEvent("valign",a),f(this)))},__doValignMiddle:function(a){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(a){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(a){this.x!==a&&(this.x=a,this.visible&&(this.getODS().left=a+"px"),this.inited&&this.fireEvent("x",
a))},setY:function(a){this.y!==a&&(this.y=a,this.visible&&(this.getODS().top=a+"px"),this.inited&&this.fireEvent("y",a))},setWidth:function(a){0>a&&(a=0);this.width!==a&&(this.width=a,this.getODS().width=a+"px",this.inited&&(this.__updateBounds(a,this.height),this.fireEvent("width",a)))},setHeight:function(a){0>a&&(a=0);this.height!==a&&(this.height=a,this.getODS().height=a+"px",this.inited&&(this.__updateBounds(this.width,a),this.fireEvent("height",a)))},setDomMinWidth:function(a,p){(p?this.getIDS():
this.getODS()).minWidth=null!=a?a+"px":null},getDomMinWidth:function(a){a=(a?this.getIDS():this.getODS()).minWidth;return null!=a?Number.parseInt(a):null},setDomMinHeight:function(a,p){(p?this.getIDS():this.getODS()).minHeight=null!=a?a+"px":null},getDomMinHeight:function(a){a=(a?this.getIDS():this.getODS()).minHeight;return null!=a?Number.parseInt(a):null},setTextColor:function(a){this.textColor!==a&&(this.textColor=a,this.getODS().color=a||"inherit",this.inited&&this.fireEvent("textColor",a))},
setBgColor:function(a){this.bgColor!==a&&(this.getODS().backgroundColor=this.bgColor=a,this.inited&&this.fireEvent("bgColor",a))},isColorAttr:a=>"bgColor"===a||"textColor"===a,setOpacity:function(a){this.opacity!==a&&(this.getODS().opacity=this.opacity=a,this.inited&&this.fireEvent("opacity",a))},setOverflow:function(a){const p=this.overflow;if(p!==a){this.overflow=a;const n=this.getIDS();if("autox"===a)n.overflowX="auto",n.overflowY="hidden";else if("autoy"===a)n.overflowY="auto",n.overflowX="hidden";
else{if("autox"===p||"autoy"===p)n.overflowX=n.overflowY=null;n.overflow=a||"visible"}this.inited&&this.fireEvent("overflow",a)}},setVisible:function(a){if(this.visible!==a){this.visible=a;const p=this.getODS();p.visibility=a?"inherit":"hidden";p.left=a?this.x+"px":"-100000px";p.top=a?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",a)}},setPointerEvents:function(a){this.pointerEvents!==a&&(this.pointerEvents=a,this.getODS().pointerEvents=a||"auto",this.inited&&this.fireEvent("pointerEvents",
a))},setCursor:function(a){this.cursor!==a&&(this.cursor=a,this.getODS().cursor=a||"auto",this.inited&&this.fireEvent("cursor",a))},__updateBounds:function(a,p){this.boundsWidth!==a&&this.fireEvent("boundsWidth",this.boundsWidth=a);this.boundsHeight!==p&&this.fireEvent("boundsHeight",this.boundsHeight=p)},setOutline:function(a){const [p,n,q]=a??[];this.setOutlineWidth(p);this.setOutlineStyle(n);this.setOutlineColor(q)},setOutlineWidth:function(a){this.getODS().outlineWidth=(this.outlineWidth=a||0)+
"px"},setOutlineStyle:function(a){this.getODS().outlineStyle=this.outlineStyle=a||"none"},setOutlineColor:function(a){this.getODS().outlineColor=this.outlineColor=a||"#000"},setBorder:function(a){const [p,n,q]=a??[];this.setBorderWidth(p);this.setBorderStyle(n);this.setBorderColor(q)},setBorderWidth:function(a){this.getODS().borderWidth=(this.borderWidth=a||0)+"px"},setBorderStyle:function(a){this.getODS().borderStyle=this.borderStyle=a||"none"},setBorderColor:function(a){this.getODS().borderColor=
this.borderColor=a||"#000"},setRoundedCorners:function(a){this.getODS().borderRadius=a+"px"},setRoundedTopLeftCorner:function(a){this.getODS().borderTopLeftRadius=a+"px"},setRoundedTopRightCorner:function(a){this.getODS().borderTopRightRadius=a+"px"},setRoundedBottomLeftCorner:function(a){this.getODS().borderBottomLeftRadius=a+"px"},setRoundedBottomRightCorner:function(a){this.getODS().borderBottomRightRadius=a+"px"},setBoxShadow:function(a){const [p,n,q,r]=a??[];this.getODS().boxShadow=a?(p||0)+
"px "+(n||0)+"px "+(q||7)+"px "+(r||"#000"):"none"},setGradient:function(a){const p=this.getODS();if(a){let q=a[0];"linear"===q||"radial"===q?a.shift():q="linear";let r=a[0];if("radial"===q){void 0===r?r="closest-side":a.shift();var n=a[0];if(void 0===n)n="circle";else{switch(n){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",n),n="circle"}a.shift()}let z=a[0];void 0===z?z="center":(z=z.replaceAll("middle","center"),a.shift());r=n+" "+r+" at "+z}else"number"===
typeof r?(r+="deg",a.shift()):r?(r="to "+r,a.shift()):r="0deg";n=z=>{a.push(z&&"inherit"!==z?z:"transparent")};2>a.length&&n(this.textColor);2>a.length&&n(this.bgColor);p.background=q+"-gradient("+r+","+a.join(",")+")"}else p.background="none";this.bgColor=void 0},setTooltip:function(a){this.tooltip!==a&&(this.tooltip=this.getODE().title=a,this.inited&&this.fireEvent("tooltip",a))},isVisible:function(){return null==this.searchAncestorsOrSelf(a=>!a.visible)},getFocusTrap:function(a){return this.searchAncestorsOrSelf(p=>
p.focusCage||p.focusTrap&&!a)},subnodeAdded:function(a){a instanceof u.View?(this.getIDE().appendChild(a.getODE()),this.getSubviews().push(a),this.fireEvent("subviewAdded",a),this.subviewAdded(a)):a instanceof u.Layout&&(this.getLayouts().push(a),this.fireEvent("layoutAdded",a),this.layoutAdded(a))},subnodeRemoved:function(a){let p;a instanceof u.View?(p=this.getSubviewIndex(a),-1<p&&(this.fireEvent("subviewRemoved",a),a.removeDomElement(),this.subviews.splice(p,1),this.subviewRemoved(a))):a instanceof
u.Layout&&(p=this.getLayoutIndex(a),-1<p&&(this.fireEvent("layoutRemoved",a),this.layouts.splice(p,1),this.layoutRemoved(a)))},hasSubview:function(a){return this.getSubviews().includes(a)},getSubviewIndex:function(a){return this.getSubviews().indexOf(a)},subviewAdded:a=>{},subviewRemoved:a=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(a){const p=
this.getSubviews();for(let n=p.length;0<n;){const q=p[--n];a&&!a(q)||q.destroy()}},hasLayout:function(a){return this.getLayouts().includes(a)},getLayoutIndex:function(a){return this.getLayouts().indexOf(a)},layoutAdded:a=>{},layoutRemoved:a=>{},isBehind:function(a,p){return b(this,a,!1,p)},isInFrontOf:function(a,p){return b(this,a,!0,p)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(a,p){this.parent.sendSubviewBehind(this,
a,p)},sendInFrontOf:function(a,p){this.parent.sendSubviewInFrontOf(this,a,p)},doSubviewsReorderedInDom:a=>{},bringSubviewToFront:function(a){const p=this;if(a?.parent===p){const n=p.getIDE(),q=a.getODE();q!==n.lastElementChild&&m(a,()=>{n.appendChild(q);p.doSubviewsReorderedInDom(a)})}},sendSubviewToBack:function(a){const p=this;if(a?.parent===p){const n=p.getIDE(),q=n.firstElementChild,r=a.getODE();r!==q&&m(a,()=>{n.insertBefore(r,q);p.doSubviewsReorderedInDom(a)})}},sendSubviewBehind:function(a,
p,n){n?.moveSubviewBefore(a,p);const q=this;if(a?.parent===q&&p?.parent===q){const r=a.getODE(),z=p.getODE();if(r!==z.previousElementSibling){const C=q.getIDE();m(a,()=>{C.insertBefore(r,z);q.doSubviewsReorderedInDom(a)})}}n?.update()},sendSubviewInFrontOf:function(a,p,n){n?.moveSubviewAfter(a,p);const q=this;if(a?.parent===q&&p?.parent===q){const r=a.getODE(),z=p.getODE().nextElementSibling;if(r!==z){const C=q.getIDE();m(a,()=>{C.insertBefore(r,z);q.doSubviewsReorderedInDom(a)})}}n?.update()},sortSubviews:function(a){const p=
this,n=p.getSubviews();u.isNotSorted(n,a)&&(n.sort(a),e(p,()=>{const q=document.createDocumentFragment(),r=n.length;for(let z=0;r>z;)q.appendChild(n[z++].getODE());p.getIDE().appendChild(q)},!0),p.doSubviewsReorderedInDom(null))},containsPoint:function(a,p,n){const q=this.getODE();if(!q)return!1;const {x:r,y:z}=w.getRelativePosition(q,n);return v(a,p,r,z,this.width,this.height)},isPointVisible:function(a,p){const {x:n,y:q}=this.getPagePosition(!0);l(this);return k(this,a-n,p-q)},intersectsWithSibling:function(a){return a.parent===
this.parent&&!(a.x>this.x+this.width||a.x+a.width<this.x||a.y>this.y+this.height||a.y+a.height<this.y)},getEffectiveScale:function(){return l(this)},getEffectiveScaleX:function(){return l(this).scaleX},getEffectiveScaleY:function(){return l(this).scaleY}})})(myt);
(u=>{const x=(v,m,e)=>{const b=w(v,m);v.getODS().transform=b+(0===b.length?"":" ")+m+"("+e+")"},w=(v,m)=>{v=v.getODS();var e=v.transform;if(!e||0===e.length)return"";e=e.split(" ");let b=e.length;for(;b;)if(e[--b].startsWith(m)){e.splice(b,1);break}return v.transform=e.join(" ")};u.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(v){this.transformOrigin!==v&&(this.transformOrigin=v,this.getODS().transformOrigin=v||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",v)))},setRotation:function(v){this.rotation!==v&&(this.rotation=v,x(this,"rotate",(v||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",v)))},setScale:function(v){const m=this.scaleX!==v,e=this.scaleY!==v;if(m){var b=this.scaleX=v;null==b?w(this,"scaleX"):x(this,"scaleX",b||1)}e&&(b=this.scaleY=v,null==b?w(this,"scaleY"):x(this,"scaleY",b||1));this.inited&&((m||e)&&this.__updateBounds(this.width,this.height),
m&&this.fireEvent("scaleX",v),e&&this.fireEvent("scaleY",v))},setScaleX:function(v){if(this.scaleX!==v){var m=this.scaleX=v;null==m?w(this,"scaleX"):x(this,"scaleX",m||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",v))}},setScaleY:function(v){if(this.scaleY!==v){var m=this.scaleY=v;null==m?w(this,"scaleY"):x(this,"scaleY",m||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",v))}},setSkewX:function(v){this.skewX!==v&&(this.skewX=
v,x(this,"skewX",v||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",v)))},setSkewY:function(v){this.skewY!==v&&(this.skewY=v,x(this,"skewY",v||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",v)))},__updateBounds:function(v,m){const {rotation:e,scaleX:b,scaleY:l}=this,k=(null==b||1===b)&&(null==l||1===l);if(!k||null!=e&&0!==e&&180!==e)!k||90!==e&&270!==e?{width:v,height:m}=this.getODE().getBoundingClientRect():{width:m,height:v}=
this;this.callSuper(v,m)}})})(myt);
(u=>{const x=JS.Module,w=(b,l)=>{if("auto"===l)b.__hasSetWidth=!1,b.getODS().width="auto",b.sizeViewToDom();else return b.__hasSetWidth=!0},v=(b,l)=>{if("auto"===l)b.__hasSetHeight=!1,b.getODS().height="auto",b.sizeViewToDom();else return b.__hasSetHeight=!0},m=b=>{if(!b.__hasSetWidth){const l=b.getODE().offsetWidth/b.getEffectiveScaleX();b.width!==l&&(b.width=l,b.inited&&b.__updateBounds(l,b.height),b.fireEvent("width",l))}},e=b=>{if(!b.__hasSetHeight){const l=b.getODE().offsetHeight/b.getEffectiveScaleY();
b.height!==l&&(b.height=l,b.inited&&b.__updateBounds(b.width,l),b.fireEvent("height",l))}};u.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:m,sizeHeight:e},initNode:function(b,l){this.callSuper(b,l);this.sizeViewToDom()},setWidth:function(b){w(this,b)&&this.callSuper(b)},setHeight:function(b){v(this,b)&&this.callSuper(b)},sizeViewToDom:function(){m(this);e(this)}});u.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(b,l){this.callSuper(b,l);this.sizeViewToDom()},setWidth:function(b){w(this,
b)&&this.callSuper(b)},sizeViewToDom:function(){m(this)}});u.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(b,l){this.callSuper(b,l);this.sizeViewToDom()},setHeight:function(b){v(this,b)&&this.callSuper(b)},sizeViewToDom:function(){e(this)}})})(myt);
(u=>{const x=JS.Module,w=(b,l,k,d)=>{b[k]!==l&&(b[k]=l,b.getIDS()[k]=l||d||"inherit",b.inited&&(b.fireEvent(k,l),b.sizeViewToDom()))};u.TextSupport=new x("TextSupport",{setWidth:function(b){this.callSuper(b);"auto"!==b&&(b=this.whiteSpace,"normal"!==b&&"pre-line"!==b&&"pre-wrap"!==b&&"break-spaces"!==b||this.sizeViewToDom())},setText:function(b){b||="";b=this.valueFromEvent(b);this.text!==b&&(this.getIDE().innerHTML=this.text=b,this.inited&&(this.fireEvent("text",b),this.sizeViewToDom()))},setTextOverflow:function(b){this.textOverflow!==
b&&(this.textOverflow=b,this.getIDS().textOverflow=b||"inherit",this.inited&&this.fireEvent("textOverflow",b))},setTextAlign:function(b){this.textAlign!==b&&(this.textAlign=b,this.getIDS().textAlign=b||"inherit",this.inited&&this.fireEvent("textAlign",b))},setWhiteSpace:function(b){w(this,b,"whiteSpace")},setWordWrap:function(b){w(this,b,"wordWrap","normal")},setTextIndent:function(b){w(this,b,"textIndent")},setTextTransform:function(b){w(this,b,"textTransform")},setTextDecoration:function(b){w(this,
b,"textDecoration")},setLineHeight:function(b){w(this,b,"lineHeight")},setLetterSpacing:function(b){w(this,b,"letterSpacing")},setWordSpacing:function(b){w(this,b,"wordSpacing")},setFontFamily:function(b){w(this,b,"fontFamily")},setFontStyle:function(b){w(this,b,"fontStyle")},setFontVariant:function(b){w(this,b,"fontVariant")},setFontWeight:function(b){w(this,b,"fontWeight")},setFontSize:function(b){w(this,b,"fontSize")},setUserUnselectable:function(b){this.userUnselectable!==b&&(this.userUnselectable=
b,this[b?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(b?"default":"text"),this.inited&&this.fireEvent("userUnselectable",b))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(b,l,k,d){this.getIDS().textShadow=(b||0)+"px "+(l||0)+"px "+(null!=k?k:2)+"px "+(d||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const v=(b,l,k)=>{const d="padding"+k;l=Math.max(l,0);b[d]!==l&&(b[d]=l,b.getIDS()[d]=l+"px",b.fireEvent(d,l),"Left"===k||"Right"===k?m(b):e(b))},m=b=>{b.__hasSetWidth&&(b.getODS().width=b.width-(b.paddingLeft||0)-(b.paddingRight||0)+"px",b.inited&&b.sizeViewToDom())},e=b=>{b.__hasSetHeight&&(b.getODS().height=b.height-(b.paddingTop||0)-(b.paddingBottom||0)+"px",b.inited&&b.sizeViewToDom())};u.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(b){this.callSuper(b);m(this)},setHeight:function(b){this.callSuper(b);
e(this)},setPadding:function(b){let l,k,d;b||=0;"object"===typeof b?(l=b.top||0,k=b.right||0,d=b.bottom||0,b=b.left||0):l=k=d=b;this.setPaddingTop(l);this.setPaddingRight(k);this.setPaddingBottom(d);this.setPaddingLeft(b)},setPaddingTop:function(b){v(this,b,"Top")},setPaddingRight:function(b){v(this,b,"Right")},setPaddingBottom:function(b){v(this,b,"Bottom")},setPaddingLeft:function(b){v(this,b,"Left")}})})(myt);
(u=>{const x={},w={},v=m=>{const e=m.imageUrl;if(m.calculateNaturalSize&&e){var b=x[e];if(b)m.setNaturalWidth(b.width),m.setNaturalHeight(b.height);else{b=w[e];if(!b){w[e]=b=[];const l=new Image;l.onerror=k=>{if(k=w[e]){let d=k.length;for(;d;)k[--d].setImageLoadingError(!0);k.length=0;delete w[e]}};l.onload=()=>{const k=l.width,d=l.height,h=w[e];if(h){let c=h.length;for(;c;){const f=h[--c];f.imageUrl===e&&(f.setNaturalWidth(k),f.setNaturalHeight(d))}h.length=0;delete w[e]}x[e]={width:k,height:d}};
l.src=e}b.push(m)}}};u.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:m=>x[m]},initNode:function(m,e){e.imageRepeat??(e.imageRepeat="no-repeat");e.imageAttachment??(e.imageAttachment="scroll");this.callSuper(m,e)},setImageUrl:function(m){this.imageUrl!==m&&(this.imageUrl=m,this.getIDS().backgroundImage=m?'url("'+m+'")':"none",this.inited&&(this.fireEvent("imageUrl",m),this.setNaturalWidth(),this.setNaturalHeight(),!m&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
v(this))},setImageLoadingError:function(m){this.set("imageLoadingError",m,!0)},setImageSize:function(m){this.imageSize!==m&&(this.imageSize=m,this.getIDS().backgroundSize=m||"auto",this.inited&&this.fireEvent("imageSize",m))},setImageRepeat:function(m){this.imageRepeat!==m&&(this.getIDS().backgroundRepeat=this.imageRepeat=m,this.inited&&this.fireEvent("imageRepeat",m))},setImagePosition:function(m){this.imagePosition!==m&&(this.getIDS().backgroundPosition=this.imagePosition=m,this.inited&&this.fireEvent("imagePosition",
m))},setImageAttachment:function(m){this.imageAttachment!==m&&(this.getIDS().backgroundAttachment=this.imageAttachment=m,this.inited&&this.fireEvent("imageAttachment",m))},setCalculateNaturalSize:function(m){this.calculateNaturalSize!==m&&(this.calculateNaturalSize=m,this.inited&&this.fireEvent("calculateNaturalSize",m),v(this))},setNaturalWidth:function(m){this.naturalWidth!==m&&(this.naturalWidth=m,this.inited&&this.fireEvent("naturalWidth",m),this.useNaturalSize&&m&&this.setWidth(m))},setNaturalHeight:function(m){this.naturalHeight!==
m&&(this.naturalHeight=m,this.inited&&this.fireEvent("naturalHeight",m),this.useNaturalSize&&m&&this.setHeight(m))},setUseNaturalSize:function(m){this.useNaturalSize!==m&&(this.useNaturalSize=m,this.inited&&this.fireEvent("useNaturalSize",m),m&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),m&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToDom:v}=u;u.Flexbox=new x("Flexbox",w,{include:[u.FlexboxSupport]});u.Frame=new x("Frame",w,{initNode:function(m,e){e.tagName??(e.tagName="iframe");this.callSuper(m,e);m=u.global.mouse;this.attachToDom(m,"__doMouseDown","mousedown",!0);this.attachToDom(m,"__doMouseUp","mouseup",!0)},createOurDomElement:function(m){m=this.callSuper(m);(Array.isArray(m)?m[1]:m).style.border="0px";return m},setSrc:function(m){this.src!==m&&(this.src=this.getIDE().src=m,this.inited&&
this.fireEvent("src",m))},__doMouseDown:function(m){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(m){this.setPointerEvents(this.__restorePointerEvents);return!0}});u.Markup=new x("Markup",w,{include:[v],setHtml:function(m){this.html!==m&&(this.getIDE().innerHTML=this.html=m,this.inited&&(this.fireEvent("html",m),this.sizeViewToDom()))}});u.Text=new x("Text",w,{include:[v,u.TextSupport],initNode:function(m,e){e.whiteSpace??(e.whiteSpace=
"nowrap");e.userUnselectable??(e.userUnselectable=!0);this.callSuper(m,e)},measureNoWrapWidth:function(){const m=this.__hasSetWidth,e=this.width;if(!m&&"nowrap"===this.whiteSpace)return e;const b=this.getIDS(),l=b.whiteSpace;m&&(b.width="auto");b.whiteSpace="nowrap";const k=this.getODE().getBoundingClientRect().width;b.whiteSpace=l;m&&(b.width=e);return k}});u.PaddedText=new x("PaddedText",u.Text,{include:[u.PaddedTextSupport]});u.Image=new x("Image",w,{include:[u.ImageSupport],initNode:function(m,
e){e.useNaturalSize??(e.useNaturalSize=!0);this.callSuper(m,e)}});u.BackView=new x("BackView",w,{sendSubviewToBack:function(m){if(m.parent===this){const e=this.getIDE(),b=e.childNodes[1];m=m.getODE();m!==b&&(m=e.removeChild(m))&&e.insertBefore(m,b)}}})})(myt);
(u=>{const x=Math.round,w=b=>{b.parent&&0<=b.percentOfParentWidth&&b.syncTo(b.parent,"__doPOPW","width")},v=b=>{0<=b.percentOfParentWidth&&b.detachFrom(b.parent,"__doPOPW","width")},m=b=>{b.parent&&0<=b.percentOfParentHeight&&b.syncTo(b.parent,"__doPOPH","height")},e=b=>{0<=b.percentOfParentHeight&&b.detachFrom(b.parent,"__doPOPH","height")};u.SizeToParent=new JS.Module("SizeToParent",{setParent:function(b){this.parent!==b&&(this.inited&&(v(this),e(this)),this.callSuper(b),w(this),m(this))},setPercentOfParentWidthOffset:function(b){this.percentOfParentWidthOffset!==
b&&(this.percentOfParentWidthOffset=b,this.inited&&(this.fireEvent("percentOfParentWidthOffset",b),this.__doPOPW()))},setPercentOfParentWidth:function(b){this.percentOfParentWidth!==b&&(this.inited&&v(this),this.percentOfParentWidth=b,this.inited&&this.fireEvent("percentOfParentWidth",b),w(this))},setPercentOfParentHeightOffset:function(b){this.percentOfParentHeightOffset!==b&&(this.percentOfParentHeightOffset=b,this.inited&&(this.fireEvent("percentOfParentHeightOffset",b),this.__doPOPH()))},setPercentOfParentHeight:function(b){this.percentOfParentHeight!==
b&&(this.inited&&e(this),this.percentOfParentHeight=b,this.inited&&this.fireEvent("percentOfParentHeight",b),m(this))},__doPOPW:function(b){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(b){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(u=>{let x;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[u.Observable],initialize:function(){u.global.register("roots",x=this)},getRoots:()=>w,addRoot:v=>{w.push(v);x.fireEvent("rootAdded",v)},removeRoot:v=>{const m=w.indexOf(v);-1<m&&(w.splice(m,1),x.fireEvent("rootRemoved",v))}})})(myt);
(u=>{const {addEventListener:x,removeEventListener:w,global:{roots:v}}=u,m=u.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:e=>{const b=e.getIDE();e=e.__captureDrop=l=>{l.preventDefault()};x(b,"drop",e);x(b,"dragover",e)},teardownCaptureDrop:e=>{const b=e.getIDE();e=e.__captureDrop;w(b,"drop",e);w(b,"dragover",e)}},initNode:function(e,b){this.callSuper(e,b);this.setZIndex(0);this.addDomClass("myt");v.addRoot(this);m.setupCaptureDrop(this)},createOurDomElement:function(e){e||(e=this.callSuper(e),
u.getElement().appendChild(e));return e},destroy:function(){m.teardownCaptureDrop(this);v.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(e){this.keepDomElementWhenDestroyed=e},setParent:e=>{},bringToFront:function(){var e=this.getIDE();const b=e.parentNode;e!==b.lastChild&&(e=b.removeChild(e))&&b.appendChild(e)},sendToBack:function(){var e=this.getIDE();const b=e.parentNode;e!==b.firstChild&&(e=b.removeChild(e))&&
b.insertBefore(e,b.firstChild)},sendBehind:function(e,b){b=this.getIDE();e=e.getIDE();const l=b.parentNode;e.parentNode===l&&(b=l.removeChild(b))&&l.insertBefore(b,e)},sendInFrontOf:function(e,b){e.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(e,b),e.sendBehind(this,b))}})})(myt);
(u=>{let x,w,v=!1;const {requestAnimationFrame:m,cancelAnimationFrame:e}=window,b={},l=d=>{x=m(l);d=Math.round(d);-1!==w&&(b.delta=d-w,b.time=d,k.fireEvent("idle",b));w=d},k=new JS.Singleton("GlobalIdle",{include:[u.Observable],initialize:function(){u.global.register("idle",this)},attachObserver:(d,h,c)=>{d=k.callSuper(d,h,c);!v&&k.hasObservers("idle")&&(v=!0,w=-1,x=m(l));return d},detachObserver:(d,h,c)=>{d=k.callSuper(d,h,c);v&&!k.hasObservers("idle")&&(e(x),v=!1);return d}})})(myt);
(u=>{let x,w,v;const m=u.global,e=m.idle,b=window.document;new JS.Singleton("GlobalWindowResize",{include:[u.Observable,u.Observer],initialize:function(){x=this;x.attachTo(e,"__setup","idle");m.register("windowResize",x)},__setup:l=>{const k=b.body;k&&(x.detachFrom(e,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:w=k.clientWidth,h:v=k.clientHeight})})).observe(k))},getWidth:()=>w??=b.body.clientWidth,getHeight:()=>v??=b.body.clientHeight})})(myt);
(u=>{const x=JS.Module,w=u.global.windowResize,v=Math.max,m=b=>{const l=b.resizeDimension;"both"!==l&&"width"!==l||b.setWidth(v(b.minWidth,w.getWidth()));"both"!==l&&"height"!==l||b.setHeight(v(b.minHeight,w.getHeight()))},e=u.SizeToWindow=new x("SizeToWindow",{include:[u.RootView],initNode:function(b,l){this.minWidth=this.minHeight=0;l.resizeDimension??(l.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(b,l)},setResizeDimension:function(b){this.resizeDimension!==b&&
(this.resizeDimension=b,m(this))},setMinWidth:function(b){this.minWidth!==b&&(this.minWidth=b,m(this))},setMinHeight:function(b){this.minHeight!==b&&(this.minHeight=b,m(this))},__hndlResize:function(b){m(this)}});u.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[e],initNode:function(b,l){l.resizeDimension??(l.resizeDimension="width");this.callSuper(b,l)}});u.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[e],initNode:function(b,l){l.resizeDimension??(l.resizeDimension="height");this.callSuper(b,
l)}})})(myt);
(u=>{const x=Math,{min:w,max:v}=x,m=f=>w(255,v(0,x.round(f))),e=f=>m(f).toString(16).padStart(2,"0"),b=(f,a,p,n)=>(n?"#":"")+e(f)+e(a)+e(p),l=f=>new c((16711680&f)>>16,(65280&f)>>8,255&f),k=(f,a)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*a/100;else return 0;f=w(a,v(0,f))/a;return 1E-6>x.abs(1-f)?1:f},d=(f,a,p)=>{f=k(f,255);a=k(a,255);p=k(p,255);const n=v(f,a,p),q=n-w(f,a,p);if(0===q)return{h:0,s:0,v:n};let r;switch(n){case f:r=(a-p)/q+(a<p?6:0);break;case a:r=(p-f)/q+
2;break;case p:r=(f-a)/q+4}return{h:60*r,s:0===n?0:q/n,v:n}},h=(f,a,p)=>{f=6*k(f,360);a=k(a,100);p=k(p,100);var n=x.floor(f);const q=f-n;f=p*(1-a);const r=p*(1-q*a);a=p*(1-(1-q)*a);n%=6;return{red:255*[p,r,f,f,a,p][n],green:255*[a,p,p,r,f,f][n],blue:255*[f,f,a,p,p,r][n]}},c=u.Color=new JS.Class("Color",{extend:{toUnitRange:k,rgbToHsv:d,hsvToRgb:h,toHex:e,rgbToHex:b,cleanChannelValue:m,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:l,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [a,p,n]=f;return new c(parseInt(a+a,16),parseInt(p+p,16),parseInt(n+n,16));case 6:return l(parseInt(f,16));default:return l(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,a,p)=>{const {red:n,green:q,blue:r}=h(f,a,p);return new c(n,q,r)},getLighterColor:(f,a)=>l(f).isLighterThan(l(a))?f:a,makeColorNumberFromChannels:(f,a,p)=>(m(f)<<16)+(m(a)<<8)+m(p),makeBlendedColor:(f,a,
p)=>new c(f.red+p*(a.red-f.red),f.green+p*(a.green-f.green),f.blue+p*(a.blue-f.blue))},initialize:function(f,a,p){this.setRed(f);this.setGreen(a);this.setBlue(p)},setRed:function(f){this.red=m(f)},setGreen:function(f){this.green=m(f)},setBlue:function(f){this.blue=m(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return b(this.red,this.green,this.blue,!0)},getHSV:function(){return d(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new c(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(c)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(u=>{const {max:x,sin:w,cos:v,pow:m,sqrt:e,PI:b}=Math,l=2*b,k=b/2,d=u.global.idle,h=u.Color.makeColorFromHexString,c={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-v(n*k)+1,outSine:n=>w(n*k),inOutSine:n=>-(v(n*b)-1)/2,inCirc:n=>-(e(1-n*n)-1),outCirc:n=>e(1- --n*n),inOutCirc:n=>1>(n*=2)?-(e(1-n*n)-1)/2:(e(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:m(2,10*(n-1)),outExpo:n=>1===n?1:-m(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?m(2,10*(n-1))/2:(-m(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(m(2,10*--n)*w((1*n-.075)*l/.3)),outElastic:n=>0===n||1===n?n:m(2,-10*n)*w((1*n-.075)*l/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(m(2,10*--n)*w((1*n-.1125)*l/.45))/2:m(2,
-10*--n)*w((1*n-.1125)*l/.45)/2+1,inBack:(n,q=1.70158)=>(n/=1)*n*((q+1)*n-q),outBack:(n,q=1.70158)=>(n=n/1-1)*n*((q+1)*n+q)+1,inOutBack:(n,q=1.70158)=>1>(n*=2)?n*n*(((q*=1.525)+1)*n-q)/2:((n-=2)*n*(((q*=1.525)+1)*n+q)+2)/2,inBounce:n=>1-c.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?c.inBounce(n)/2:(c.outBounce(n-1)+1)/2},f=c.inOutQuad,a=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},p=(n,q)=>{const {running:r,paused:z,reverse:C,duration:G,repeat:K,__prog:J,easingFunction:M,callback:N}=n;if(r&&!z){C&&(q*=-1);q=J+q;let D=0;q>G?(D=q-G,q=G,++n.__loopCnt===K&&(D=0)):0>q&&(D=-q,q=0,0>--n.__loopCnt&&0<K&&(D=0));var g=n.target??n.parent;if(g){const {relative:I,attribute:P,__isColorAnim:S,__loopCnt:L,to:V}=n;var t=x(0,q/G),y=x(0,J/G);null==n.from&&(n.__tmpFrom=!0,n.from=I?S?"#000":0:g.get(P));y=M(t)-(I?M(y):0);var A=n.from,E=I?g.get(P):
A;t=g.set;if(S){A=h(A);const ea=h(V);E=I?h(E):A;E.setRed(E.red+(ea.red-A.red)*y);E.setGreen(E.green+(ea.green-A.green)*y);E.setBlue(E.blue+(ea.blue-A.blue)*y);y=E.getHtmlHexString()}else y=E+(V-A)*y;t.call(g,P,y);!C&&L===K||C&&0>L&&0<K?(n.setRunning(!1),N?.call(n,!0)):0<D?(n.fireEvent("repeat",L),n.__prog=C?G:0,p(n,D)):n.__prog=q}else console.log("No target for animator",n),n.setRunning(!1),N?.call(n,!1)}};u.Animator=new JS.Class("Animator",u.Node,{include:[u.Reusable],extend:{easings:c},initNode:function(n,
q){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=f;this.callSuper(n,q);a(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const q=this.target??this.parent;this.__isColorAnim=q&&"function"===typeof q.isColorAttr?q.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),a(this);this[n?"attachTo":"detachFrom"](d,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](d,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&a(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&a(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&a(this)},setEasingFunction:function(n){"string"===typeof n&&(n=c[n]);this.set("easingFunction",n??f,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,q){const r=this,z=r.callback;z&&!q?r.setCallback(C=>{z.call(r,C);n.call(r,C)}):r.setCallback(n)},reset:function(n){a(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},__updateAnim:function(n){p(this,
n.value.delta)}})})(myt);
(u=>{const x=Array.isArray,w=e=>{e.__additionalArgs=[];e.__pendingTransition="";e.__transDestinationState="";e.__transStage="leaveState"},v=(e,b)=>{if(e.__transInProgress){var l=e.__deferredTransitions;l??=e.__deferredTransitions=[];l.unshift(b)}else{e.__transInProgress=!0;l=b.shift();const k=b.shift();if(e.__pendingTransition)return 3;if(e.isFinished())return e.__transInProgress=!1,5;let d=e.map[e.current][k];d??=e.map["*"][k];if(d)return e.__pendingTransition=k,e.__transDestinationState=d,e.__additionalArgs=
b,e.resumeTransition(l);e.__transInProgress=!1;return 5}},m=e=>{e.__transInProgress=!1;const b=e.__deferredTransitions;if(b)for(;0<b.length;)v(e,b.pop())};u.StateMachine=new JS.Class("StateMachine",u.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(e,b){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(e,b)},setInitialState:function(e){if(""===this.current){if(x(e)){var b=e;e=b.shift()}else b=[];this.current=
this.initial=e;this.doEnterState("","",e,b);b={name:"",from:"",to:e,args:b};this.fireEvent("enter"+e,b);this.fireEvent("enter",b);this.isFinished()&&this.fireEvent("finished",b)}},setTerminalState:function(e){this.terminal=e},addTransitions:function(e){for(const b of e)this.addTransition(...b)},addTransition:function(e,b,l){b=b?x(b)?b:[b]:["*"];const k=this.map;let d=b.length;for(;d;){let h,c;((h=k)[c=b[--d]]??(h[c]={}))[e]=l}},doTransition:function(...e){e.unshift("sync");return v(this,e)},doAsyncTransition:function(...e){e.unshift("async");
return v(this,e)},resumeTransition:function(e){const b=this.__pendingTransition;if(!b)return 4;const l=this.current,k=this.__transDestinationState,d=this.__additionalArgs,h={name:b,from:l,to:k,args:d},c=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(b,l,k,d);if(!1===f)return w(this),m(this),2;if("async"===f||"async"===e)return this.__transStage="enterState",c("start"+b,h),c("start",h),c("leave"+l,h),c("leave",h),m(this),3;c("start"+b,h);c("start",h);
c("leave"+l,h);c("leave",h);case "enterState":this.current=k,w(this),this.doEnterState(b,l,k,d),c("enter"+k,h),c("enter",h),c("end"+b,h),c("end",h),this.isFinished()&&c("finished",h)}m(this);return 1},doLeaveState:(e,b,l,k)=>{},doEnterState:(e,b,l,k)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(e){return x(e)?e.includes(this.current):this.current===e},can:function(e){return void 0!==this.map[this.current][e]?!0:void 0!==this.map["*"][e]}})})(myt);
(u=>{const x=(e,b)=>e.replicationIndex-b.replicationIndex,w=(e,b)=>{let l=e.length;for(;l;){const k=e[--l];k.decrementLockedCounter();b&&k.update()}},v=e=>{m(e);const b=e.template;b&&(e.__pool=new u.TrackActivesPool(b,e.parent))},m=e=>{const b=e.__pool;if(b){e=e.parent.getLayouts();let l=e.length;for(;l;)e[--l].incrementLockedCounter();b.putActives();b.destroyPooledInstances();w(e,!1);b.destroy()}};u.Replicable=new JS.Module("Replicable",{include:[u.Reusable],replicate:function(e,b){this.replicationData=
e;this.replicationIndex=b},notify:(e,b)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(e,b){return b===this.replicationIndex&&e===this.replicationData}});u.Replicator=new JS.Class("Replicator",u.Node,{initNode:function(e,b){this.callSuper(e,b);v(this);this.doReplication()},destroy:function(){m(this);this.callSuper()},setTemplate:function(e){(this.template=e.includes(u.Replicable)?e:null)||u.dumpStack("Template not replicable");this.inited&&
(v(this),this.doReplication())},setData:function(e){this.data=e;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const e=this.__pool;let b;if(e){b=this.parent.getLayouts();for(var l=b.length;l;)b[--l].incrementLockedCounter();const k=(l=this.data)?l.length:0,d=e.getActives(),h=d.length,c=[];let f=h,a,p;for(d.sort(x);f;)if(a=d[--f],p=a.replicationIndex,p>=k||!a.alreadyHasReplicationData(l[p],p))c[p]=a;for(f=c.length;f;)(a=c[--f])&&
e.putInstance(a);for(f=0;k>f;++f)(f>=h||null!=c[f])&&e.getInstance().replicate(l[f],f);for(f=b.length;f;)b[--f].sortSubviews(x);w(b,!0)}},notify:function(e,b){var l=this.__pool;if(l){l=l.getActives();let k=l.length;for(;k;)l[--k].notify(e,b)}}})})(myt);
(u=>{const x=JS.Singleton,w=document,{DomElementProxy:v,DomObservable:m,global:{register:e}}=u;new x("GlobalMouse",{include:[v,m,u.MouseObservable],initialize:function(){this.setDomElement(w);e("mouse",this)}});new x("GlobalTouch",{include:[v,m,u.TouchObservable],initialize:function(){this.setDomElement(w);e("touch",this)}})})(myt);
(u=>{let x,w,v;const m=[],e=[],b=d=>{const h=v;h!==d&&(h&&(h.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(h),x("dragLeave",h)),v=d)&&(d.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(d),x("dragEnter",h))},l=d=>{let h=w;if(h!==d)if(w=d){h=d;for(const c of k(h,e))c.notifyDragStart(h);for(const c of k(h,m))c.notifyAutoScrollerDragStart(h);x("startDrag",d)}else{for(const c of k(h,e))c.notifyDragStop(h);for(const c of k(h,m))c.notifyAutoScrollerDragStop(h);x("stopDrag",d)}},k=(d,h)=>{if(d.destroyed)return[];
if(d.isAnyDragGroup())return h;const c=[];d=d.getDragGroups();let f=h.length;for(;f;){const a=h[--f];if(a.isAnyDropGroup())c.push(a);else{const p=a.getDropGroups();for(const n in d)if(p[n]){c.push(a);break}}}return c};new JS.Singleton("GlobalDragManager",{include:[u.Observable],initialize:function(){u.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:d=>{m.push(d)},unregisterAutoScroller:d=>{d=m.indexOf(d);-1<d&&m.splice(d,1)},registerDropTarget:d=>
{e.push(d)},unregisterDropTarget:d=>{d=e.indexOf(d);-1<d&&e.splice(d,1)},startDrag:d=>{l(d)},stopDrag:(d,h,c)=>{h.notifyDropped(v,c);c||v?.notifyDrop(h);b();l();v&&!c&&x("drop",[h,v])},updateDrag:(d,h)=>{const c=k(h,e);let f=c.length,a;if(0<f){const {pageX:p,pageY:n}=d.value;for(;f;)d=c[--f],d.willAcceptDrop(h)&&h.willPermitDrop(d)&&d.isPointVisible(p,n)&&(!a||d.isInFrontOf(a))&&(a=d)}b(a)}})})(myt);
(u=>{const x=JS.Module,{mouse:w,keys:v,idle:m}=u.global;u.Activateable=new x("Activateable",{doActivated:()=>{}});u.UpdateableUI=new x("UpdateableUI",{initNode:function(e,b){this.callSuper(e,b);this.updateUI()},updateUI:()=>{}});u.Disableable=new x("Disableable",{initNode:function(e,b){b.disabled??(b.disabled=!1);this.callSuper(e,b)},setDisabled:function(e){e=this.valueFromEvent(e);this.disabled!==e&&(this.disabled=e,this.inited&&this.fireEvent("disabled",e),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});u.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[v.CODE_ENTER,v.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(e,b){this.activateKeyDown="";b.activationKeys??(b.activationKeys=u.KeyActivation.ACTIVATION_KEYS);this.callSuper(e,b);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(e){this.activationKeys=
e??[]},setRepeatKeyDown:function(e){this.repeatKeyDown=e},__hndlKeyDown:function(e){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const b=u.KeyObservable.getCodeFromEvent(e);this.activationKeys.includes(b)&&(this.activateKeyDown===b?this.doActivationKeyDown(b,!0):(this.activateKeyDown=b,this.doActivationKeyDown(b,!1)),e.value.preventDefault())}},__hndlKeyPress:function(e){if(!this.disabled){const b=u.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===b&&this.activationKeys.includes(b)&&
e.value.preventDefault()}},__hndlKeyUp:function(e){if(!this.disabled){const b=u.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===b&&this.activationKeys.includes(b)&&(this.activateKeyDown="",this.doActivationKeyUp(b),e.value.preventDefault())}},__doDomBlur:function(e){this.disabled||(e=this.activateKeyDown,""!==e&&(this.activateKeyDown="",this.doActivationKeyAborted(e)))},doActivationKeyDown:(e,b)=>{},doActivationKeyUp:function(e){this.doActivated()},doActivationKeyAborted:e=>{}});u.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(e,b){switch(e){case v.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,b))return;break;case v.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,b))return;break;case v.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,b))return;break;case v.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,b))return}this.callSuper(e,b)},doKeyArrowLeftOrUp:(e,b)=>{},doKeyArrowRightOrDown:(e,b)=>{}});u.MouseOver=new x("MouseOver",{initNode:function(e,b){b.mouseOver??(b.mouseOver=
!1);this.callSuper(e,b);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(e){this.mouseOver!==e&&(this.mouseOver=e,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(m,"__doMouseOverOnIdle","idle")))},setDisabled:function(e){this.callSuper(e);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(m,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const e=this.mouseOver;this.__lastOverIdleValue!==e&&(this.__lastOverIdleValue=e,this.doSmoothMouseOver(e))},doSmoothMouseOver:function(e){this.inited&&this.updateUI?.()},doMouseOver:function(e){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(e){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});u.MouseDown=new x("MouseDown",{initNode:function(e,b){b.mouseDown??(b.mouseDown=!1);this.callSuper(e,
b);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(e){this.mouseDown!==e&&(this.mouseDown=e,this.inited&&(e&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(e){e&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(e)},doMouseOver:function(e){this.callSuper(e);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(e){this.callSuper(e);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(e){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(e){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(e))},doMouseUpInside:function(e){this.doActivated?.()}});u.MouseOverAndDown=new x("MouseOverAndDown",{include:[u.MouseOver,u.MouseDown]});u.MouseEventsBubbleUp=new x("MouseEventsBubbleUp",
{doMouseOver:function(e){this.callSuper(e);return!0},doMouseOut:function(e){this.callSuper(e);return!0},doMouseDown:function(e){this.callSuper(e);return!0},doMouseUp:function(e){this.callSuper(e);return!0}});u.Draggable=new x("Draggable",{initNode:function(e,b){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let l=!0;null!=b.isDraggable&&(l=b.isDraggable,delete b.isDraggable);this.callSuper(e,b);this.setIsDraggable(l)},setIsDraggable:function(e){if(this.isDraggable!==
e){this.isDraggable=e;let b;e?b=this.attachToDom:this.inited&&(b=this.detachFromDom);if(b){e=this.getDragViews();let l=e.length;for(;l;){const k=e[--l];b.call(this,k,"__doMouseDown","mousedown");b.call(this,k,"__doContextMenu","contextmenu")}}}},setIsDragging:function(e){this.set("isDragging",e,!0)},setDragOffsetX:function(e,b){this.dragOffsetX!==e&&(this.dragOffsetX=e,this.inited&&this.isDragging&&!b&&this.reRequestDragPosition())},setDragOffsetY:function(e,b){this.dragOffsetY!==e&&(this.dragOffsetY=
e,this.inited&&this.isDragging&&!b&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(e){this.distanceBeforeDrag=e},setDraggableAllowBubble:function(e){this.draggableAllowBubble=e},setCenterOnMouse:function(e){this.centerOnMouse=e},setAllowAbort:function(e){this.allowAbort=e},getDragViews:function(){return[this]},__doContextMenu:e=>{},__doMouseDown:function(e){const b=u.MouseObservable.getMouseFromEvent(e),l=this.getODE();this.dragInitX=b.x-l.offsetLeft;this.dragInitY=b.y-l.offsetTop;
this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(e);e.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(e){this.isDragging?this.stopDrag(e,!1):(this.detachFromDom(w,"__doMouseUp","mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(e){e.value===v.CODE_ESC&&this.stopDrag(e,!0)},__doDragCheck:function(e){const b=
u.MouseObservable.getMouseFromEvent(e);u.Geometry.measureDistance(b.x,b.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(e))},startDrag:function(e){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(v,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(e)},
updateDrag:function(e){this.__lastMousePosition=u.MouseObservable.getMouseFromEvent(e);this.reRequestDragPosition()},__updateDragInitX:function(e){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(e){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(e,b){this.detachFromDom(w,"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(v,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(e,b){this.disabled||(this.setX(e),this.setY(b))},reRequestDragPosition:function(){const e=this.__lastMousePosition;this.requestDragPosition(e.x-this.dragInitX+this.dragOffsetX,e.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,{View:v,KeyActivation:m}=u;var e=u.Button=new w("Button",{include:[u.Activateable,u.UpdateableUI,u.Disableable,u.MouseOverAndDown,m],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(l,k){k.focusable??(k.focusable=!0);k.cursor??(k.cursor="pointer");this.callSuper(l,k)},setFocused:function(l){const k=this.focused;this.callSuper(l);this.inited&&this.focused!==k&&this.updateUI()},doActivationKeyDown:function(l,k){k||this.updateUI()},doActivationKeyUp:function(l){this.callSuper(l);
this.updateUI()},doActivationKeyAborted:function(l){this.callSuper(l);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const l=this.__restoreCursor;l&&(this.setCursor(l),this.__restoreCursor=null);this.activateKeyDown!==m.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=u.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[e],setActiveColor:function(l){this.activeColor!==l&&(this.activeColor=l,this.inited&&this.updateUI())},setHoverColor:function(l){this.hoverColor!==l&&(this.hoverColor=l,this.inited&&this.updateUI())},setReadyColor:function(l){this.readyColor!==
l&&(this.readyColor=l,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(l,k=1){this.setOpacity(k);this.setBgColor(l)}});const b=u.SimpleButton=new x("SimpleButton",v,{include:[e],initNode:function(l,k){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(l,
k)}});u.SimpleTextButton=new x("SimpleTextButton",b,{initNode:function(l,k){this.inset=this.outset=0;k.shrinkToFit??(k.shrinkToFit=!1);k.height??(k.height=24);k.textY??(k.textY="middle");this.callSuper(l,k);l=this.textY;k={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof l?k.valign=l:k.y=l;l=this.textView=new u.Text(this,k);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",l,"visible",l,"width",
l,"height",l,"y"])},setInset:function(l){this.set("inset",this.valueFromEvent(l),!0)},setOutset:function(l){this.set("outset",this.valueFromEvent(l),!0)},setText:function(l){this.text!==l&&(this.text=l,this.inited&&(this.textView.setText(l),this.fireEvent("text",l)))},setShrinkToFit:function(l){this.shrinkToFit!==l&&(this.shrinkToFit=l,this.inited&&(this.textView.setWhiteSpace(l?"nowrap":"normal"),this.fireEvent("shrinkToFit",l)))},setTextY:function(l){if(this.textY!==l&&(this.textY=l,this.inited)){const k=
this.textView;this.fireEvent("textY",l);"string"===typeof l?k.setValign(l):(k.setValign(""),k.setY(l))}},__updateContent:function(l){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:k,outset:d,textView:h}=this;this.__updateContentLoopBlock=!0;h.setX(k);this.shrinkToFit?this.setWidth(k+(h.visible&&this.text?h.width:0)+d):h.setWidth(this.width-k-d);this.__updateContentLoopBlock=!1}}});u.TextButton=new x("TextButton",u.PaddedText,{include:[e],initNode:function(l,k){k.focusIndicator??
(k.focusIndicator=!1);k.roundedCorners??(k.roundedCorners=3);k.textAlign??(k.textAlign="center");k.paddingTop??(k.paddingTop=1);k.height??(k.height=23-(k.paddingTop??0));k.activeColor??(k.activeColor="#ddd");k.hoverColor??(k.hoverColor="#eee");k.readyColor??(k.readyColor="#fff");this.callSuper(l,k)}})})(myt);
(u=>{const x=console.warn,{focus:w,mouse:v,windowResize:m}=u.global,e={};u.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:b=>e[b]},initNode:function(b,l){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(b,l)},setLastFloatingPanelShown:function(b){this.lastFloatingPanelShown=b},setLastFloatingPanelId:function(b){this.floatingPanelId=
b},setFloatingAlign:function(b){this.set("floatingAlign",b,!0)},setFloatingValign:function(b){this.set("floatingValign",b,!0)},setFloatingAlignOffset:function(b){this.set("floatingAlignOffset",b,!0)},setFloatingValignOffset:function(b){this.set("floatingValignOffset",b,!0)},setKeepInWindow:function(b){this.set("keepInWindow",b,!0)},setKeepInWindowBorder:function(b){this.set("keepInWindowBorder",b,!0)},createFloatingPanel:function(b,l,k){b=b??this.floatingPanelId;k=k??{};k.panelId=b;return e[b]=new l(null,
k)},getFloatingPanel:function(b){return e[b??this.floatingPanelId]},toggleFloatingPanel:function(b){this.getFloatingPanel(b??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(b):this.showFloatingPanel(b)},showFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.show(this),this.setLastFloatingPanelShown(b)},hideFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(b){this.callSuper?.()},
notifyPanelHidden:function(b){this.callSuper?.()},getFloatingAlignForPanel:function(b){return this.floatingAlign},getFloatingValignForPanel:function(b){return this.floatingValign},getFloatingAlignOffsetForPanel:function(b){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(b){return this.floatingValignOffset},getNextFocus:function(){const b=this.lastFloatingPanelShown;return b?.isShown()?b:this.callSuper?.()},getNextFocusAfterPanel:function(b){return this},getPrevFocusAfterPanel:function(b){return this}});
u.FloatingPanel=new JS.Class("FloatingPanel",u.View,{include:[u.RootView],initNode:function(b,l){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;l.visible=l.focusIndicator=!1;l.focusable=l.focusCage=!0;this.callSuper(b,l)},setOwner:function(b){this.owner=b},setPanelId:function(b){this.panelId=b},setIgnoreOwnerForHideOnMouseDown:function(b){this.ignoreOwnerForHideOnMouseDown=b},setHideOnBlur:function(b){this.hideOnBlur=b},setHideOnMouseDown:function(b){this.hideOnMouseDown=
b},setWidth:function(b){const l=this.width;this.callSuper(b);this.isShown()&&l!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(b){const l=this.height;this.callSuper(b);this.isShown()&&l!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(b){var l=b.value;b=l.pageX;l=l.pageY;this.containsPoint(b,l)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(b,l)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(b){this.hideOnMouseDown&&
this.hide(b)},focus:function(b){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(b);else{const l=this.getFirstFocusableDescendant();l===this?this.callSuper(b):l.focus(b)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){(b=b.value)&&!this.isAncestorOf(b)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(b){this.isShown()||(this.bringToFront(),this.updateLocation(b),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(v,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(b){this.isShown()&&(this.detachFromDom(v,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),b||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(b){this.setOwner(b);this.updateLocationX(b);this.updateLocationY(b)},updateLocationX:function(b){const l=b.getFloatingAlignForPanel(this),k=typeof l;let d;if("string"===k){d=b.getPagePosition().x+b.getFloatingAlignOffsetForPanel(this);switch(l){case "outsideRight":d+=b.width;break;case "insideRight":d+=b.width-this.width;break;case "outsideLeft":d-=this.width;break;case "insideLeft":break;default:x("Invalid align value",k,l)}b.keepInWindow&&
(b=d+this.width+(b.keepInWindowBorder||0)-m.getWidth(),0<b&&(d-=b))}else"number"===k?d=l:x("Invalid align type",k,l);this.setX(d)},updateLocationY:function(b){const l=b.getFloatingValignForPanel(this),k=typeof l;let d;if("string"===k){d=b.getPagePosition().y+b.getFloatingValignOffsetForPanel(this);switch(l){case "outsideBottom":d+=b.height;break;case "insideBottom":d+=b.height-this.height;break;case "outsideTop":d-=this.height;break;case "insideTop":break;default:x("Invalid valign value",k,l)}b.keepInWindow&&
(b=d+this.height+(b.keepInWindowBorder||0)-m.getHeight(),0<b&&(d-=b))}else"number"===k?d=l:x("Invalid valign type",k,l);this.setY(d)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,v=Math,{View:m,global:e}=u,b=e.focus,l=e.keys,{LIST_KEYS:k,CODE_ESC:d}=l,h=f=>{const a=f.itemConfig??[],p=a.length,{items:n,defaultItemClass:q,fixedWidth:r}=f,z=n.length,C=0<r,G=f.getContentView(),K=G.getLayouts();let J=0;for(var M of K)M.incrementLockedCounter();m.doWhileRemovedFromDom(G,()=>{const N={listView:f};C&&(N.width=r,N.enableEllipsis=!0);for(;p>J;++J){var g=a[J];const t=g.klass??q;g=g.attrs??{};let y=n[J];y&&!y.isA(t)&&(y.destroy(),y=null);y??=n[J]=new t(G,
{...N});y&&(y.callSetters(g),y.__LAYOUT_IDX=J)}});if(C)M=r;else for(M=f.minWidth,J=0;p>J;){const N=n[J++];N.syncToDom();M=v.max(M,N.getMinimumWidth())}for(;z>J;)n[J++].destroy();n.length=p;if(!C)for(J=0;p>J;)f.updateItemWidth(n[J++],M);f.updateContentWidth(G,M);for(const N of K)N.sortSubviews((g,t)=>g.__LAYOUT_IDX-t.__LAYOUT_IDX),N.decrementLockedCounter(),N.update()},c=u.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
u.ListView=new x("ListView",u.FloatingPanel,{initNode:function(f,a){this.items=[];this.maxHeight=-1;this.minWidth=0;a.defaultItemClass??(a.defaultItemClass=u.ListViewItem);a.overflow??(a.overflow="autoy");a.bgColor??(a.bgColor="#ccc");a.boxShadow??(a.boxShadow=u.Button.FOCUS_SHADOW);this.callSuper(f,a);h(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new u.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&h(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?v.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,a)=>{f.setWidth(a)},updateContentWidth:(f,a)=>{f.setWidth(a)}});u.ListViewAnchor=new w("ListViewAnchor",{include:[u.FloatingPanelAnchor,u.ArrowKeyActivation],initNode:function(f,
a){a.listViewClass??(a.listViewClass=u.ListView);a.listViewAttrs??(a.listViewAttrs={});a.itemConfig??(a.itemConfig=[]);a.activationKeys??(a.activationKeys=k);this.callSuper(f,a)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var a=f.height,p=this.getPagePosition().y,n=e.windowResize.getHeight()-this.getPagePosition().y-this.height;f=p-a;a=n-a;p=p>n;n=this.floatingValign;
switch(n){case "outsideBottom":0>a&&p&&(n="outsideTop");break;case "insideBottom":0>a&&p&&(n="insideTop");break;case "outsideTop":0>f&&!p&&(n="outsideBottom");break;case "insideTop":0>f&&!p&&(n="insideBottom")}return n},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const a=this.getFloatingPanel(f);a&&(a.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,a){f===d?this.hideFloatingPanel():this.callSuper(f,a)},doKeyArrowLeftOrUp:function(f,a){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,a){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==d)switch(this.callSuper(f),f){case l.CODE_ARROW_LEFT:case l.CODE_ARROW_UP:this.focusToLastItem();break;case l.CODE_ARROW_RIGHT:case l.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,a,p){(f=this.getEntryByValue(f))&&(f.attrs[a]=p);return f},getEntryByValue:function(f){return this.itemConfig.find(a=>a?.attrs&&a.attrs.value===f)}});u.ListViewItem=new x("ListViewItem",u.TextButton,{include:[c,u.ArrowKeyActivation],initNode:function(f,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor="#fff");a.readyColor??(a.readyColor="#eee");a.paddingLeft??
(a.paddingLeft=8);a.paddingRight??(a.paddingRight=8);a.textAlign??(a.textAlign="left");a.roundedCorners??(a.roundedCorners=0);a.activationKeys??(a.activationKeys=k);a.focusIndicator??(a.focusIndicator=!0);const p=this.__enableEllipsis=a.enableEllipsis;delete a.enableEllipsis;this.callSuper(f,a);this.addDomClass("mytButtonText");p&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return v.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,a){f===d?this.listView.owner.hideFloatingPanel():this.callSuper(f,a)},doKeyArrowLeftOrUp:function(f,a){b.prev()},doKeyArrowRightOrDown:function(f,a){b.next()}});u.ListViewSeparator=new x("ListViewSeparator",m,{include:[c],initNode:function(f,a){a.height??(a.height=1);a.bgColor??(a.bgColor="#666");this.callSuper(f,a)}})})(myt);
(u=>{const x=u.AccessorSupport,w=x.generateSetterName,v={},m=u.BAG=new JS.Class("BAG",{include:[x,u.Destructible,u.Observable],extend:{getGroup:(e,b)=>{if(e&&b){let l;return(l=v[e]??(v[e]={}))[b]??(l[b]=new m(e,b))}},removeGroup:(e,b)=>{if(e&&b&&(e=v[e])){const l=e[b];l&&delete e[b];return l}}},initialize:function(e,b){this.__nodes=[];this.trueNode=null;this.attrName=e;this.groupId=b},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&m.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(e){this.set("groupId",e,!0)},setAttrName:function(e){this.set("attrName",e,!0)},setTrueNode:function(e){this.set("trueNode",e,!0)},getNodes:function(){return this.__nodes},register:function(e){e&&!this.isRegistered(e)&&(this.__nodes.push(e),e[this.attrName]&&this.setTrue(e))},unregister:function(e){if(e){const b=this.__nodes,l=b.indexOf(e);-1<l&&b.splice(l,1);this.trueNode===e&&this.setTrueNode(null);0===b.length&&
this.destroy()}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){const b=this.attrName,l=w(b),k=this.__nodes;let d=k.length;for(this.setTrueNode(e);d;){const h=k[--d];if(e===h){if(!h[b])h[l](!0)}else if(h[b])h[l](!1)}}},setFalse:function(e){e&&this.trueNode===e&&(e[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(e){return this.__nodes.includes(e)}});u.BAGMembership=new JS.Module("BAGMembership",{initNode:function(e,b){this.__bags=[];this.callSuper(e,b)},destroy:function(){const e=
this.__bags;let b=e.length;for(;b;){const l=e[--b];this.removeFromBAG(l.attrName,l.groupId)}this.callSuper()},isRegisteredWithBAG:function(e){return this.__bags.includes(e)},getBAG:(e,b)=>m.getGroup(e,b),addToBAG:function(e,b){b=this.getBAG(e,b);this.isRegisteredWithBAG(b)||(this.__bags.push(b),b.register(this),this.isAttachedTo(this,"__updateForBAG",e)||this.attachTo(this,"__updateForBAG",e))},removeFromBAG:function(e,b){b=this.getBAG(e,b);if(this.isRegisteredWithBAG(b)){const l=this.__bags;let k=
l.length,d=!0;for(;k;){const h=l[--k];h===b?(l.splice(k,1),b.unregister(this)):h.attrName===e&&(d=!1)}d&&this.detachFrom(this,"__updateForBAG",e)}},__updateForBAG:function(e){for(const b of this.__bags)if(b.attrName===e.type)b[e.value?"setTrue":"setFalse"](this)}})})(myt);
(u=>{const x=w=>{const v=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<v.length?" ":"")+v)};u.Radio=new JS.Class("Radio",u.Text,{include:[u.SimpleButtonStyle,u.BAGMembership],initNode:function(w,v){v.selected??(v.selected=!1);v.groupId??(v.groupId=u.generateGuid());v.focusIndicator??(v.focusIndicator=!1);v.activeColor??(v.activeColor="inherit");v.hoverColor??(v.hoverColor="inherit");v.readyColor??(v.readyColor="inherit");const m=v.value;delete v.value;this.callSuper(w,
v);this.setValue(m);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);u.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const v=this.getBAG("selected",this.groupId);if(v){const m=v.getNodes();let e=m.length;for(;e;){const b=m[--e];if(b.optionValue===w){v.setTrue(b);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),x(this)))},setGroupId:function(w){if(this.groupId!==w){const v=this.groupId;this.groupId=w;v&&this.removeFromBAG("selected",v);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,v=1){this.setOpacity(v);this.setTextColor(w)}})})(myt);
(u=>{const x=JS.Module,w=u.global.keys,v=u.Selectable=new x("Selectable",{setSelected:function(e){e=this.valueFromEvent(e);this.selected!==e&&(this.selected=e,this.inited&&this.fireEvent?.("selected",e))},isSelected:function(){return!!this.selected},canSelect:e=>!0,canDeselect:e=>!0}),m=u.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(e,b){this.__selected={};this.__lastSelectedItem=null;b.selectedCount=
0;b.itemSelectionId??(b.itemSelectionId="id");b.maxSelected??(b.maxSelected=-1);this.callSuper(e,b)},setItemSelectionId:function(e){this.itemSelectionId=e},setMaxSelected:function(e){this.maxSelected=e},setSelectedCount:function(e){this.selectedCount!==e&&(this.selectedCount=e,this.inited&&this.fireEvent("selectedCount",e))},isAddMode:()=>m.isAddMode(),isToggleMode:()=>m.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(e){e&&!this.isSelectedItem(e)&&this.canSelectItem(e)&&
(e.setSelected(!0),this.__selected[e[this.itemSelectionId]]=e,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=e,this.doSelected(e),this.fireEvent("itemSelected",e))},doSelected:e=>{},selectById:function(e){this.select(this.getSelectableItem(e))},canSelectItem:function(e){const {maxSelected:b,selectedCount:l}=this;if(0===b)return!1;if(1===b){if(0<l&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<b&&l>=b)return!1;return e.canSelect(this)},selectAll:function(){const e=
this.getSelectableItems();let b=e.length;for(;b;)this.select(e[--b])},deselect:function(e){this.isSelectedItem(e)&&this.canDeselectItem(e)&&(e.setSelected(!1),delete this.__selected[e[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===e&&(this.__lastSelectedItem=null),this.doDeselected(e),this.fireEvent("itemDeselected",e))},doDeselected:e=>{},deselectById:function(e){this.deselect(this.getSelectableItem(e))},canDeselectItem:function(e){return e.canDeselect(this)},
deselectAll:function(){const e=this.__selected;for(const b in e)this.deselect(e[b])},isSelectedItem:e=>e?e.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const e=[],b=this.getSubviews();let l=b.length;for(;l;){const k=b[--l];k.isA(v)&&e.push(k)}return e},getSelectableItems:function(){const e=this.getManagedItems();let b=e.length;for(;b;)e[--b].canSelect(this)||e.splice(b,1);return e},getSelectableItem:function(e){const b=
this.getSelectableItems(),l=this.itemSelectionId;let k=b.length;for(;k;){const d=b[--k];if(d[l]===e)return d}}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToParent:v}=u,m=u.TabSlider=new x("TabSlider",w,{include:[u.Selectable,u.Disableable,v],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(b,l){const k=this;let d;l.defaultPlacement="wrapper.container";l.percentOfParentWidth=100;l.expansionState="collapsed";l.tabId??(l.tabId=u.generateGuid());l.tabContainer??(l.tabContainer=b);l.selected??(l.selected=!1);l.buttonClass??(l.buttonClass=
u.SimpleButton);l.zIndex??(l.zIndex=0);l.buttonHeight??(l.buttonHeight=30);l.fillColorSelected??(l.fillColorSelected="#666");l.fillColorHover??(l.fillColorHover="#eee");l.fillColorActive??(l.fillColorActive="#ccc");l.fillColorReady??(l.fillColorReady="#fff");l.minContainerHeight??(l.minContainerHeight=100);l.layoutPaddingY??(l.layoutPaddingY=0);l.selected&&(d=!0,delete l.selected);k.callSuper(b,l);k.button=new k.buttonClass(k,{ignorePlacement:!0,zIndex:1,height:k.buttonHeight,focusIndicator:!0,groupId:k.parent.parent.groupId,
percentOfParentWidth:100,hoverColor:k.fillColorHover,activeColor:k.fillColorActive,readyColor:k.fillColorReady},[v,{doActivated:()=>{const h=k.tabContainer;k.isSelected()&&1!==h.maxSelected?h.deselect(k):h.select(k)},updateUI:function(){this.callSuper();k.selected&&-1!==k.tabContainer.maxSelected&&this.setBgColor(k.fillColorSelected);k.notifyButtonRedraw()}}]);b=k.wrapper=new w(k,{ignorePlacement:!0,y:k.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[v,{setHeight:function(h){this.callSuper(Math.round(h))},
setWidth:function(h){this.callSuper(h);this.inited&&this.container.setWidth(h)}}]);k._wrapperLayout=new u.SizeToChildren(b.container=new w(b),{axis:"y",paddingY:k.layoutPaddingY});k.constrain("__updateHeight",[b,"y",b,"height"]);d&&k.tabContainer.select(k);!0===l.disabled&&k.setDisabled(!0);k.setHeight(k.getCollapsedHeight())},setSelected:function(b){this.callSuper(b);this.button?.updateUI()},setTabId:function(b){this.tabId=b},setTabContainer:function(b){this.tabContainer=b},setLayoutPaddingY:function(b){this.layoutPaddingY=
b;this.inited&&this._wrapperLayout.setPaddingY(b)},setMinContainerHeight:function(b){this.minContainerHeight=b},setButtonClass:function(b){this.buttonClass=b},setFillColorSelected:function(b){this.fillColorSelected=b},setFillColorHover:function(b){this.fillColorHover=b},setFillColorActive:function(b){this.fillColorActive=b},setFillColorReady:function(b){this.fillColorReady=b},setButtonHeight:function(b){this.buttonHeight!==b&&(this.buttonHeight=b,this.button&&(this.button.setHeight(b),this.wrapper.setY(b)))},
setExpansionState:function(b){if(this.expansionState!==b){this.expansionState=b;this.inited&&this.fireEvent("expansionState",b);const l=this.wrapper;l&&("expanded"===b?(l.setMaskFocus(!1),l.setOverflow("auto")):"expanding"===b?l.setVisible(!0):"collapsed"===b?l.setVisible(!1):"collapsing"===b&&(l.setMaskFocus(!0),l.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(b){this.setHeight(this.wrapper.y+this.wrapper.height)},
expand:function(b){const l=this,k=l.wrapper;b-=l.getCollapsedHeight();l.setExpansionState("expanding");k.stopActiveAnimators();if(k.height!==b){const d=l.tabContainer.duration;1===d?(k.setHeight(b),l.setExpansionState("expanded")):k.animate({attribute:"height",to:b,duration:d}).next(h=>{l.setExpansionState("expanded")})}else l.setExpansionState("expanded")},collapse:function(){const b=this,l=b.wrapper;b.setExpansionState("collapsing");l.stopActiveAnimators();if(0!==l.height){const k=b.tabContainer.duration;
1===k?(l.setHeight(0),b.setExpansionState("collapsed")):l.animate({attribute:"height",to:0,duration:k}).next(d=>{b.setExpansionState("collapsed")})}else b.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});u.TextTabSlider=new x("TextTabSlider",
m,{initNode:function(b,l){l.labelTextColorChecked??(l.labelTextColorChecked="#fff");l.labelTextColor??(l.labelTextColor="#333");this.callSuper(b,l);this.button.label=new u.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(b){this.labelTextColorChecked=b},setLabelTextColor:function(b){this.labelTextColor=b},setText:function(b){this.text!==b&&(this.text=b,this.button?.label?.setText(b))},
notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const e=u.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[u.SelectionManager],extend:{SPACING:1},initNode:function(b,l){const k=this;k._tabSliders=[];l.defaultPlacement="container";l.spacing??(l.spacing=e.SPACING);l.overflow??(l.overflow="autoy");l.itemSelectionId??
(l.itemSelectionId="tabId");l.maxSelected??(l.maxSelected=1);l.duration??(l.duration=500);k.updateLayout=u.debounce(k.updateLayout);k.callSuper(b,l);b=k.container=new w(k,{ignorePlacement:!0,percentOfParentWidth:100},[v,{subnodeAdded:function(d){this.callSuper(d);d instanceof m&&(k._tabSliders.push(d),k.attachTo(d,"updateLayout","selected"))},subnodeRemoved:function(d){if(d instanceof m){const h=k._tabSliders,c=h.indexOf(d);-1<c&&(k.detachFrom(d,"updateLayout","selected"),h.splice(c,1))}this.callSuper(d)}}]);
b.layout=new u.SpacedLayout(b,{axis:"y",spacing:k.spacing,collapseParent:!0});k.attachTo(k,"updateLayout","height")},setSpacing:function(b){this.spacing!==b&&(this.spacing=b,this.layout?.setSpacing(b))},setDuration:function(b){this.duration=b},updateLayout:function(b,l){b=this._tabSliders;for(var k=b.length,d=k,h=0,c=0,f=0;d;){var a=b[--d];a.visible&&(++f,a.selected?(h+=a.getMinimumExpandedHeight(),c+=a.getPreferredExpandedHeight()):(a=a.getCollapsedHeight(),h+=a,c+=a))}d=this.container.layout;f=
d.inset+d.outset+d.spacing*(f-1);c+=f;d=this.height;h=h+f>d;f=c>d;a=this.duration;c-=d;0<l&&this.setDuration(l);for(d=k;d;)if(k=b[--d],k.visible)if(k.selected){let p;if(h)p=k.getMinimumExpandedHeight();else if(f){const n=k.getPreferredExpandedHeight(),q=k.getMinimumExpandedHeight();p=n-c;q>p?(c-=n-q,p=q):c=0}else p=k.getPreferredExpandedHeight();k.expand(p)}else k.collapse();0<l&&this.setDuration(a)}})})(myt);
(u=>{const x=m=>{const e=[];switch(m.tabContainer.location){case "top":e.push("TopLeft","TopRight");break;case "bottom":e.push("BottomLeft","BottomRight");break;case "left":e.push("TopLeft","BottomLeft");break;case "right":e.push("TopRight","BottomRight")}for(const b of e)m["setRounded"+b+"Corner"](m.cornerRadius||0)},w=u.Tab=new JS.Class("Tab",u.SimpleTextButton,{include:[u.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(m,e){e.tabId??(e.tabId=u.generateGuid());e.tabContainer??(e.tabContainer=
m);let b;e.selected&&(b=!0,delete e.selected);e.inset??(e.inset=w.INSET);e.outset??(e.outset=w.OUTSET);e.selectedColor??(e.selectedColor="#fff");e.hoverColor??(e.hoverColor="#eee");e.activeColor??(e.activeColor="#aaa");e.readyColor??(e.readyColor="#ccc");e.labelTextSelectedColor??(e.labelTextSelectedColor="#333");e.height??(e.height=24);e.focusIndicator??(e.focusIndicator=!1);e.cornerRadius??(e.cornerRadius=6);this.callSuper(m,e);b&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(m){this.tabId=m},setTabContainer:function(m){this.tabContainer=m},setSelectedColor:function(m){this.selectedColor=m},setLabelTextColor:function(m){this.labelTextColor=m},setCornerRadius:function(m){this.cornerRadius=m;this.inited&&x(this)},setLabelTextSelectedColor:function(m){this.labelTextSelectedColor=m;this.inited&&this.selected&&this.textView.setTextColor(m)},setSelected:function(m){this.callSuper(m);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),v=u.TabContainer=new JS.Module("TabContainer",{include:[u.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(m,e){this.__tabs=[];e.spacing??(e.spacing=v.SPACING);e.inset??(e.inset=v.INSET);e.location??(e.location="top");e.itemSelectionId??
(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);const b=e.collapse??!0;delete e.collapse;this.callSuper(m,e);this.layout=new u.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:b})},setLocation:function(m){this.location=m},setSpacing:function(m){this.spacing!==m&&(this.spacing=m,this.layout?.setSpacing(m))},setInset:function(m){this.inset!==m&&(this.inset=m,this.layout?.setInset(m))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(m){this.callSuper(m);if(m.isA(w))switch(this.__tabs.push(m),this.location){case "top":m.setValign("bottom");break;case "bottom":m.setValign("top");break;case "left":m.setAlign("right");break;case "right":m.setAlign("left")}},subnodeRemoved:function(m){if(m.isA(w)){const e=this.__tabs,b=e.indexOf(m);-1<b&&e.splice(b,1)}this.callSuper(m)}})})(myt);
(u=>{const x=JS.Class,w=Math.min,v=Array.isArray,{SizeToDom:m,View:e,Disableable:b,KeyObservable:l,Button:{FOCUS_SHADOW:k},global:{keys:d}}=u,h=(q,r,z)=>{q[z]!==r&&(q[z]=r,q.getIDS()[z]=r+"px",q.inited&&(q.fireEvent(z,r),q.sizeViewToDom()))},c=(q,r,z)=>{q[r]!==z&&(q.getIDE()[r]=q[r]=z,q.inited&&q.fireEvent(r,z))},f=u.NativeInputWrapper=new x("NativeInputWrapper",e,{include:[b,u.InputObservable],initNode:function(q,r){r.tagName??(r.tagName="input");r.focusable??(r.focusable=!0);this.callSuper(q,r);
this.addDomClass("mytNativeInput")},createOurDomElement:function(q){q=this.callSuper(q);this.inputType&&((v(q)?q[1]:q).type=this.inputType);return q},setDisabled:function(q){this.disabled!==q&&(this.getIDE().disabled=q,this.callSuper(q))},setValue:function(q){this.value!==q&&(this.value=q,this.setDomValue(q),this.inited&&this.fireEvent("value",q))},getDomValue:function(){return this.getIDE().value},setDomValue:function(q){const r=this.getIDE();r.value!==q&&(r.value=q)}}),a=u.InputSelectOption=new x("InputSelectOption",
e,{include:[b,u.Selectable],createOurDomElement:q=>document.createElement("option"),setSelected:function(q){q=this.valueFromEvent(q);const r=this.getIDE();r.selected!==q&&(r.selected=q)},setDisabled:function(q){this.disabled!==q&&(this.getIDE().disabled=q,this.callSuper(q))},setValue:function(q){c(this,"value",q)},setLabel:function(q){this.label!==q&&(this.getIDE().textContent=this.label=q,this.inited&&this.fireEvent("label",q))},isSelected:function(){return this.getIDE().selected},canSelect:function(q){return!this.disabled&&
!this.getIDE().selected&&this.parent===q},canDeselect:function(q){return!this.disabled&&this.getIDE().selected&&this.parent===q}}),p=u.BaseInputText=new x("BaseInputText",f,{include:[u.TextSupport],initNode:function(q,r){r.bgColor??(r.bgColor="transparent");r.spellcheck??(r.spellcheck=!1);this.callSuper(q,r);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(q){this.callSuper(q);this.setValue(q)},
setSpellcheck:function(q){c(this,"spellcheck",q)},setMaxLength:function(q){c(this,"maxLength",null==q||0>q?void 0:q)},setAllowedChars:function(q){this.allowedChars=q},setPlaceholder:function(q){c(this,"placeholder",q)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(q){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(q){const r=
q.value,z=this.allowedChars;z&&!z.includes(l.getKeyFromEvent(q))&&r.preventDefault();this.filterInputPress(r)},filterInput:q=>q,filterInputPress:q=>{},__syncToDom:function(q){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const q=document.selection.createRange();q.moveStart("character",-this.getDomValue().length);return q.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(q,r){if(null==r||q===r){if(this.getCaretPosition()===q)return;
r=q}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(q,r):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",r),z.moveStart("character",q),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const q=this.getIDE();return{start:q.selectionStart,startElem:q,end:q.selectionEnd,endElem:q}},setSelection:function(q){q&&
this.setCaretPosition(q.start,q.end)},saveSelection:function(q){this._selRange=q||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=u.InputText=new x("InputText",p,{include:[u.SizeHeightToDom],initNode:function(q,r){this.inputType=!0===r.password?"password":"text";this.callSuper(q,r);this.setCaretToEnd()},setPassword:function(q){this.set("password",q,!0);this.inited&&(this.getIDE().type=q?"password":"text")}});u.EditableText=new x("EditableText",
p,{include:[m],initNode:function(q,r){r.tagName??(r.tagName="div");r.inputType=null;r.whiteSpace??(r.whiteSpace="pre");r.contentEditable??(r.contentEditable=!0);this.callSuper(q,r);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(q){h(this,q,"minWidth")},setMinHeight:function(q){h(this,q,"minHeight")},setPadding:function(q){this.setPaddingTop(q);this.setPaddingRight(q);
this.setPaddingBottom(q);this.setPaddingLeft(q)},setPaddingTop:function(q){h(this,q,"paddingTop")},setPaddingRight:function(q){h(this,q,"paddingRight")},setPaddingBottom:function(q){h(this,q,"paddingBottom")},setPaddingLeft:function(q){h(this,q,"paddingLeft")},setContentEditable:function(q){c(this,"contentEditable",q)},filterInputPress:function(q){const r=this.maxLength;0<=r&&this.getCharacterCount()===r&&q.preventDefault();this.callSuper(q)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(q){const r=this.getIDE();r.innerHTML!==q&&(r.innerHTML=q,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(q){l.isEnterKeyEvent(q)&&(q.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(q){this.callSuper(q);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(q,r){if(null==r||q===r){if(this.getCaretPosition()===q)return;r=q}this.saveSelection({start:q,startElem:this.getIDE().firstChild,end:r,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(q){this.saveSelection();return!0},getSelection:function(){let q;if(window.getSelection){const r=window.getSelection();if(0<r.rangeCount){if(r.extentNode===
this.getIDE())return;q=r.getRangeAt(0)}}else document.selection&&(q=document.selection.createRange());return{start:q?q.startOffset:0,startElem:q?q.startContainer:this.getIDE().firstChild,end:q?q.endOffset:0,endElem:q?q.endContainer:this.getIDE().firstChild}},setSelection:function(q){if(q){const {startElem:r,endElem:z}=q;if(r&&r.parentNode&&z&&z.parentNode){const C=document.createRange();C.setStart(r,w(q.start,r.length));C.setEnd(z,w(q.end,z.length));window.getSelection?(q=window.getSelection(),0<
q.rangeCount&&q.removeAllRanges(),q.addRange(C)):document.selection&&C.select()}}}});u.InputTextArea=new x("InputTextArea",p,{initNode:function(q,r){r.tagName??(r.tagName="textarea");r.inputType=null;r.resize??(r.resize="none");r.wrap??(r.wrap="soft");this.callSuper(q,r)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(q){const r=this;r.resize!==q&&(q=r.resize=r.getIDS().resize=q||"none",r.inited&&r.fireEvent("resize",q),"none"!==q&&(r.__resizeObserver??
(r.__resizeObserver=new ResizeObserver(()=>{r.doResize()}))).observe(r.getIDE()))},setWrap:function(q){c(this,"wrap",q)},doResize:function(){const q=this.resize;"both"!==q&&"horizontal"!==q||m.sizeWidth(this);"both"!==q&&"vertical"!==q||m.sizeHeight(this)}});u.ComboBox=new x("ComboBox",n,{include:[u.Activateable,u.KeyActivation,u.ListViewAnchor],initNode:function(q,r){this.filterItems=!0;r.activationKeys??(r.activationKeys=[d.CODE_ENTER,d.CODE_ESC,d.CODE_ARROW_UP,d.CODE_ARROW_DOWN]);r.bgColor??(r.bgColor=
"#fff");r.borderWidth??(r.borderWidth=1);r.borderStyle??(r.borderStyle="solid");r.floatingAlignOffset??(r.floatingAlignOffset=r.borderWidth);r.fullItemConfig??(r.fullItemConfig=[]);r.listViewAttrs={...r.listViewAttrs,maxHeight:r.listViewAttrs?.maxHeight??99};this.callSuper(q,r)},setFullItemConfig:function(q){this.fullItemConfig=q},setFilterItems:function(q){this.filterItems=q},__syncToDom:function(q){const r=this.value;this.callSuper(q);r!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(q){const r=
this.getFloatingPanel(q);if(r){let C;if(this.filterItems){C=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const G=this.fullItemConfig,K=G.length;for(let J=0;K>J;){const M=G[J++],N=M.attrs.text.toLowerCase(),g=N.indexOf(z);0===g?N!==z&&C.push(M):0<g&&C.push(M)}}else C=this.fullItemConfig;0<C.length?(r.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(C),this.callSuper(q)):this.hideFloatingPanel(q)}},doItemActivated:function(q){this.setValue(null==q.value?q.text:q.value);this.callSuper(q)},
doActivated:function(){this.toggleFloatingPanel()}});u.InputSelect=new x("InputSelect",f,{include:[m],initNode:function(q,r){r.tagName??(r.tagName="select");r.inputType=null;r.multiple??(r.multiple=!1);r.size??(r.size=r.multiple?4:1);this.callSuper(q,r);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(q){c(this,"multiple",q)},setSize:function(q){c(this,"size",q)},setOptions:function(q){this.destroyAllOptions();if(v(q))for(const r of q)this.addOption(r)},getOptions:function(){return this.getSubviews().slice()},
setValue:function(q){v(q)&&u.areArraysEqual(q,this.value)||this.value===q||(this.value=q,this.inited&&this.fireEvent("value",q))},subviewAdded:function(q){q instanceof a||(u.dumpStack("Subview unsupported. Destroying it"),q.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(q=>q.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(q=>
q.value)},getOptionForValue:function(q){return this.getOptions().find(r=>r.value===q)},addOption:function(q){return new a(this,q)},destroyAllOptions:function(){for(const q of this.getOptions())q.destroy()},destroyOptionWithValue:function(q){if(q=this.getOptionForValue(q))if(q.destroy(),q.destroyed)return!0;return!1},deselectAll:function(){let q=!1;for(const r of this.getOptions())r.isSelected()&&(r.setSelected(!1),q=!0);q&&this.__doChanged()},selectValues:function(q){v(q)||(q=[q]);for(const r of q)this.selectValue(r)},
selectValue:function(q){this.select(this.getOptionForValue(q))},select:function(q){q?.canSelect(this)&&(q.setSelected(!0),this.__syncToDom())},deselectValue:function(q){this.deselect(this.getOptionForValue(q))},deselect:function(q){q?.canDeselect(this)&&(q.setSelected(!1),this.__syncToDom())},__doChanged:function(q){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(u=>{const x=JS.Module,w=Math.round;var v=u.ValueComponent=new x("ValueComponent",{initNode:function(e,b){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(e,b)},setValueFilter:function(e){this.valueFilter=e;this.inited&&e&&this.setValue(this.value)},setValue:function(e){this.valueFilter&&(e=this.valueFilter(e));this.value!==e&&(this.value=e,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(e,b){const l=this.valueFilter;
this.setValueFilter(l?"last"===b?k=>e(l(k)):k=>l(e(k)):e)}});const m=u.RangeComponent=new x("RangeComponent",{include:[v],setLowerValue:function(e){this.setValue({lower:e,upper:this.value&&void 0!==this.value.upper?this.value.upper:e})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(e){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:e,upper:e})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(e){if(e){var b=
this.value;const d=b?b.lower:void 0;b=b?b.upper:void 0;this.valueFilter&&(e=this.valueFilter(e));if(e.lower!==d||e.upper!==b){var l;(l=e).lower??(l.lower=e.upper);var k;(k=e).upper??(k.upper=e.lower);void 0!==e.lower&&void 0!==e.upper&&e.lower>e.upper&&(l=e.lower,e.lower=e.upper,e.upper=l);this.value=e;this.inited&&(this.fireEvent("value",this.getValue()),e.lower!==d&&this.fireEvent("lowerValue",e.lower),e.upper!==b&&this.fireEvent("upperValue",e.upper))}}else this.callSuper(e)},getValueCopy:function(){const e=
this.value;return{lower:e.lower,upper:e.upper}}});v=u.BoundedValueComponent=new x("BoundedValueComponent",{include:[v],initNode:function(e,b){const l=this;l.appendToEarlyAttrs("snapToInt","minValue","maxValue");b.snapToInt??(b.snapToInt=!0);b.valueFilter||(b.valueFilter=k=>{var d=l.maxValue;if(null!=d&&k>d)return d;d=l.minValue;return null!=d&&k<d?d:k});l.callSuper(e,b)},setSnapToInt:function(e){this.snapToInt!==e&&(this.snapToInt=e,this.inited&&(this.fireEvent("snapToInt",e),e&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(e){this.snapToInt&&null!=e&&(e=w(e));if(this.minValue!==e){const b=this.maxValue;null!=b&&e>b&&(e=b);this.minValue!==e&&(this.minValue=e,this.inited&&(this.fireEvent("minValue",e),this.setValue(this.value)))}},setMaxValue:function(e){this.snapToInt&&null!=e&&(e=w(e));if(this.maxValue!==e){const b=this.minValue;null!=b&&e<b&&(e=b);this.maxValue!==e&&(this.maxValue=e,this.inited&&(this.fireEvent("maxValue",e),this.setValue(this.value)))}},
setValue:function(e){this.callSuper(this.snapToInt&&null!=e&&!isNaN(e)?w(e):e)}});u.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[v,m],initNode:function(e,b){const l=this;b.valueFilter||(b.valueFilter=k=>{if(k){const d=l.maxValue,h=l.minValue;null!=d&&k.upper>d&&(k.upper=d);null!=h&&k.lower<h&&(k.lower=h)}return k});l.callSuper(e,b)},setValue:function(e){this.snapToInt&&null!=e&&(null==e.lower||isNaN(e.lower)||(e.lower=w(e.lower)),null==e.upper||isNaN(e.upper)||(e.upper=w(e.upper)));
this.callSuper(e)}})})(myt);
(u=>{const x=w=>{const v=w.label??"";w.setText('<i class="'+("solid"===w.checkboxStyle?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<v.length?" "+v:""))};u.Checkbox=new JS.Class("Checkbox",u.Text,{include:[u.SimpleButtonStyle,u.ValueComponent],initNode:function(w,v){this.appendToEarlyAttrs("userUnselectable");v.value??(v.value=!1);v.focusIndicator??(v.focusIndicator=!1);v.checkboxStyle??(v.checkboxStyle="outline");v.activeColor??(v.activeColor="inherit");v.hoverColor??(v.hoverColor=
"inherit");v.readyColor??(v.readyColor="inherit");this.callSuper(w,v);u.FontAwesome.registerForNotification(this);x(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&x(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(w,
v=1){this.setOpacity(v);this.setTextColor(w)}})})(myt);
(u=>{let x;const {Class:w,Module:v}=JS,m=console.warn,{KeyObservable:e,UpdateableUI:b,dumpStack:l,global:k}=u,d=k.focus,h=k.keys,c={},f=(g,t)=>{if(g){const y=g.id;g.id?t(y):l("No ID")}else l("No processor")},a=g=>{f(g,t=>{c[t]=g})},p=g=>{const t=u.BAG.getGroup("selected",g.groupId);if(t){const y=t.getNodes();g=g.value;let A=y.length;for(;A;){const E=y[--A];if(E.optionValue===g){t.setTrue(E);break}}}},n=g=>{if(g.groupId){const t=u.BAG.getGroup("selected",g.groupId);t&&g.syncTo(t,"__syncValue","trueNode")}},
q=(g,t)=>{const y=[],A=g.__v;if(A)for(const E of A)t=E.isFormValid(g,null,y)&&t;g.setErrorMessages(y);g.setIsValid(t);return t},r=(g,t,y)=>{if(g=g.__vp)for(const A of g)A[y]&&(t=A.process(t));return t},z=u.ValueProcessor=new w("ValueProcessor",{initialize:function(g,t,y,A){this.id=g;this.runForDefault=!!t;this.runForRollback=!!y;this.runForCurrent=!!A},process:g=>g}),C=u.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:g=>{if(null==g||""===g||"-"===g)return g;const t=Number(g);return isNaN(t)?
g:t}}),G=u.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(g,t,y,A,E){this.callSuper(g,t,y,A);this.trim=E},process:function(g){g+="";switch(this.trim){case "start":case "left":return g.trimStart();case "end":case "right":return g.trimEnd();default:return g.trim()}}}),K=u.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(g,t,y,A,E){this.callSuper(g,t,y,A);this.defaultValue=E},process:function(g){return void 0===g?this.defaultValue:g}}),J=u.Form=new v("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(g,t){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(g,t);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(g){this.set("errorMessages",g,!0)},getFullId:function(){const g=[this.id];let t=this.form;for(;t&&t.id;)g.unshift(t.id),
t=t.form;return g.join(".")},setId:function(g){if(this.id!==g){const t=this.id;this.id=g;(g=this.form)&&this.inited&&(g.removeSubForm(t),g.addSubForm(this))}},setForm:function(g){if(this.form!==g){const t=this.form;this.form=g;t?.removeSubForm(this.id);this.inited&&g?.addSubForm(this)}},setIsValid:function(g){this.isValid=g;this.inited&&this.fireEvent("isValid",g);const t=this.form;t&&!this._lockCascade&&(g?t.verifyValidState(this):t.notifySubFormInvalid())},setIsChanged:function(g){if(this.isChanged!==
g){this.isChanged=g;this.inited&&this.fireEvent("isChanged",g);const t=this.form;t&&!this._lockCascade&&(g?t.notifySubFormChanged():t.verifyChangedState(this))}},setValidators:function(g){let t=g.length;for(;t;){const y=g[--t];"string"===typeof y&&(g[t]=k.validators.getValidator(y),g[t]||g.splice(t,1))}this.__v=g},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const g={},t=this.__sf;for(const y in t)g[y]=t[y].getValue();return g},setValue:function(g){this.callSuper?.(g);
if("object"===typeof g&&!this.isA(M))for(const t in g){const y=this.getSubForm(t);y?g[t]=y.setValue(g[t]):m("ID in setValue for missing subform",t)}this.form?.notifyValueChanged(this);return g},getDefaultValue:function(){const g={};let t=this.__sf;for(const y in t)g[y]=t[y].getDefaultValue();return g},setDefaultValue:function(g){if("object"===typeof g)for(const t in g){const y=this.getSubForm(t);y?g[t]=y.setDefaultValue(g[t]):m("ID in setDefaultValue for missing subform",t)}return g},getRollbackValue:function(){const g=
{},t=this.__sf;for(const y in t)g[y]=t[y].getRollbackValue();return g},setRollbackValue:function(g){if("object"===typeof g)for(const t in g){const y=this.getSubForm(t);y?g[t]=y.setRollbackValue(g[t]):m("ID in setRollbackValue for missing subform",t)}return g},addAccelerator:function(g,t){this.__acc[g]=t},removeAccelerator:function(g){delete this.__acc[g]},invokeAccelerator:function(g,t){this.__acc[g]?.call(this,t??null)},addValidator:function(g){g&&this.__v.push(g)},removeValidator:function(g){if(g){const t=
this.__v;let y=t.length;for(;y;){const A=t[--y];if(A.id===g)return t.splice(y,1),A}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(g){const t=g.id;null!=this.getSubForm(t)?m("ID in use for subform, add aborted",t,g):(g.setForm(this),this.__sf[t]=g,g.isChanged&&this.notifySubFormChanged(),g.isValid||this.notifySubFormInvalid())},removeSubForm:function(g){const t=this.getSubForm(g);t&&(t.setForm(null),delete this.__sf[g],this.verifyChangedState(),this.verifyValidState());
return t},getSubForm:function(g){return this.__sf[g]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(g){g&&this.doValidation();const t=[];(function E(A){if(A.isA(M))A.isValid||t.push(A.getFullId());else{A=A.getSubForms();for(const D in A)E(A[D])}})(this);return t},getAllErrorMessages:function(){const g=this.__sf;let t=(this.errorMessages??[]).slice();for(const y in g)t.push(...g[y].getAllErrorMessages());return t},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(g){const t=
this.__sf;let y=!0;for(const A in t){const E=t[A];E!==g&&(y=E.isValid&&y)}return q(this,y)},doValidation:function(){const g=this.__sf;let t=!0;for(const y in g)t=g[y].doValidation()&&t;this._lockCascade=!0;t=q(this,t);this._lockCascade=!1;return t},notifyValueChanged:function(g){this.form?.notifyValueChanged(g)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(g){const t=this.__sf;let y=!1;for(const A in t){const E=t[A];E!==g&&(y=E.isChanged||y)}this.setIsChanged(y);
return y},setup:function(g,t,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;g??={};t??={};y??={};const A=this.__sf;for(const E in A)A[E].setup(g[E],t[E],y[E])},resetForm:function(){this._lockCascade=!0;const g=this.__sf;for(const t in g)g[t].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const g=this.__sf;for(const t in g)g[t].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const g={},t=this.__sf;for(const y in t){const A=t[y];A.isChanged&&(g[y]=A.getChangedValue())}return g}}),M=u.FormElement=new v("FormElement",{include:[J],initNode:function(g,t){this.__vp=[];this.callSuper(g,t)},getValue:function(){return r(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(g){void 0===g&&(g=this.getRollbackValue());this.value!==g&&
(this.callSuper(g),this.verifyChangedState());return g},getDefaultValue:function(){return r(this,this.defaultValue,"runForDefault")},setDefaultValue:function(g){this.defaultValue!==g&&(this.defaultValue=g,this.inited&&this.fireEvent("defaultValue",g),this.verifyChangedState());return g},getRollbackValue:function(){return r(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(g){void 0===g&&(g=this.getDefaultValue());this.rollbackValue!==g&&(this.rollbackValue=g,this.inited&&this.fireEvent("rollbackValue",
g),this.verifyChangedState());return g},setValueProcessors:function(g){let t=g.length;for(;t;){const y=g[--t];"string"===typeof y&&(g[t]=c[y],g[t]||g.splice(t,1))}this.__vp=g},addValueProcessor:function(g){this.__vp.push(g)},removeValueProcessor:function(g){if(g){const t=this.__vp;let y=t.length;for(;y;){const A=t[--y];if(A.id===g)return t.splice(y,1),A}}},addSubForm:g=>{l("addSubForm unsupported on FormElement")},getSubForm:g=>{l("getSubForm unsupported on FormElement")},removeSubForm:g=>{l("removeSubForm unsupported on FormElement")},
verifyChangedState:function(g){g=this.getValue()!==this.getRollbackValue();this.setIsChanged(g);return g},setup:function(g,t,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(g);this.setRollbackValue(t);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const g=this.getDefaultValue();this.setRollbackValue(g);this.setValue(g);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),N=u.FormInputTextMixin=new v("FormInputTextMixin",{include:[M,b],initNode:function(g,t){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";t.bgColor??(t.bgColor="#fff");t.borderWidth??(t.borderWidth=1);t.borderStyle??(t.borderStyle="solid");this.callSuper(g,t);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(g){this.validateWhen=g},setAcceleratorScope:function(g){this.acceleratorScope=g},setErrorColor:function(g){this.errorColor=g},setActionRequiredColor:function(g){this.actionRequiredColor=
g},setNormalColor:function(g){this.normalColor=g},setIsChanged:function(g){this.callSuper(g);this.inited&&this.updateUI()},setIsValid:function(g){this.callSuper(g);this.inited&&this.updateUI()},setValue:function(g){g=this.callSuper(g);const t=this.validateWhen;"key"!==t&&"blurWithKeyFix"!==t||this.verifyValidState();return g},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":d.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(g){e.isEnterKeyEvent(g)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(g){e.isEscKeyEvent(g)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const g=this.validateWhen;"blur"!==g&&"blurWithKeyFix"!==g||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
u.RootForm=new v("RootForm",{include:[J],initNode:function(g,t){this.callSuper(g,t);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:g=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});u.FormCheckbox=new w("FormCheckbox",u.Checkbox,{include:[M],initNode:function(g,t){this.rollbackValue=this.defaultValue=
!1;this.callSuper(g,t)}});u.FormComboBox=new w("FormComboBox",u.ComboBox,{include:[M,b],initNode:function(g,t){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(g,t);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(g){this.validateWhen=g},setAcceleratorScope:function(g){this.acceleratorScope=g},setErrorColor:function(g){this.errorColor=
g},setActionRequiredColor:function(g){this.actionRequiredColor=g},setNormalColor:function(g){this.normalColor=g},setIsChanged:function(g){this.callSuper(g);this.inited&&this.updateUI()},setIsValid:function(g){this.callSuper(g);this.inited&&this.updateUI()},setValue:function(g){g=this.callSuper(g);const t=this.validateWhen;"key"!==t&&"blurWithKeyFix"!==t||this.verifyValidState();return g},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":d.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(g){this._isShown=!0},notifyPanelHidden:function(g){this._isShown=!1},doActivationKeyDown:function(g,t){g!==h.CODE_ESC||this._isShown?this.callSuper(g,t):this.invokeAccelerator("reject")},doActivationKeyUp:function(g){g!==
h.CODE_ENTER||this._isShown?this.callSuper(g):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const g=this.validateWhen;"blur"!==g&&"blurWithKeyFix"!==g||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});u.FormEditableText=new w("FormEditableText",u.EditableText,{include:[N],__hndlKeyDown:function(g){"nowrap"===this.whitespace&&this.callSuper(g)}});u.FormInputText=new w("FormInputText",
u.InputText,{include:[N]});u.FormInputTextArea=new w("FormInputTextArea",u.InputTextArea,{include:[N],__hndlKeyDown:g=>{}});u.FormInputSelect=new w("FormInputSelect",u.InputSelect,{include:[M],setValue:function(g){if(!this.__abortSetValue)return g=this.callSuper(g),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(g),this.__abortSetValue=!1,this.verifyValidState(),g}});u.FormRadioGroup=new w("FormRadioGroup",u.Node,{include:[u.ValueComponent,M],initNode:function(g,t){t.groupId??(t.groupId=
u.generateGuid());this.callSuper(g,t);void 0!==this.value&&p(this);n(this)},setValue:function(g){g=this.callSuper(g);this.inited&&p(this);return g},setGroupId:function(g){if(this.groupId!==g){if(this.groupId){const t=u.BAG.getGroup("selected",this.groupId);t&&this.detachFrom(t,"__syncValue","trueNode")}this.groupId=g;this.inited&&n(this)}},__syncValue:function(g){g=g.value;this.setValue(g?g.optionValue:null)}});u.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(g,
t,y,A,E){this.callSuper(g,t,y,A);this.otherField=E},process:function(g){return null==g||""===g?this.otherField.getValue():g}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){a(x=new K("undefToEmpty",!0,!0,!0,""));a(new C("toNumber",!0,!0,!0));a(new G("trimLeft",!0,!0,!0,"left"));a(new G("trimRight",!0,!0,!0,"right"));a(new G("trimBoth",!0,!0,!0,"both"));k.register("valueProcessors",this)},getValueProcessor:g=>c[g],register:a,unregister:g=>{f(g,t=>{c[t]&&delete c[t]})}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,v={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},m=(k,d)=>{k[d](k,"doDragOver","dragover",!1);k[d](k,"doDragEnter","dragenter",!1);k[d](k,"doDragLeave","dragleave",!1);k[d](k,"doDrop","drop",!1)},e=u.DragDropSupport=new JS.Module("DragDropSupport",{include:[u.DragDropObservable],initNode:function(k,d){this.callSuper(k,d);this.disabled||this.setupDragListeners()},setDisabled:function(k){this.disabled!==
k&&(this.getIDE().disabled=k,this.callSuper(k),this.inited&&(k?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){m(this,"attachToDom")},teardownDragListeners:function(){m(this,"detachFromDom")},doDragOver:k=>{},doDragEnter:k=>{},doDragLeave:k=>{},doDrop:function(k){this.handleFiles(k.value.dataTransfer.files,k)},handleFiles:function(k,d){if(void 0!==k){let h=k.length;for(;h;){const c=this.filterFiles(k[--h]);c&&this.handleDroppedFile(c,d)}}else w("No File API")},
filterFiles:k=>k,handleDroppedFile:(k,d)=>{}}),b=u.Uploader=new x("Uploader",u.View,{include:[e,u.Disableable,u.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(k,d,h)=>{if(void 0!==FileReader){const c=new FileReader;c.onload=f=>{d(f.target.result)};switch(h){case "text":c.readAsText(k);break;case "arrayBuffer":c.readAsArrayBuffer(k);break;default:c.readAsDataURL(k)}}},isSameFile:(k,d)=>null!=k&&null!=d&&k.name===d.name&&k.type===d.type&&k.size===d.size,createFile:k=>{const d=(new u.URI(k)).file;
return{name:d,serverPath:k,size:-1,type:v[u.getExtension(d)]}}},initNode:function(k,d){const h=this;h.files=[];d.requestFileParam??(d.requestFileParam="file");d.maxFiles??(d.maxFiles=-1);d.responseIsRaw??(d.responseIsRaw=!1);const c=d.accept;delete d.accept;h.callSuper(k,d);h.fileInput=new u.NativeInputWrapper(h,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:h.disabled,overflow:"hidden"},[u.SizeToParent,{initNode:function(f,a){this.inputType="file";this.callSuper(f,a);this.attachToDom(this,
"_hndlInput","change");this.getIDE().multiple=1<h.maxFiles},_hndlInput:function(f){h.handleFiles(this.getIDE().files,f)}}]);h.setAccept(c)},setAccept:function(k){this.set("accept",k,!0);this.fileInput&&(this.fileInput.getIDE().accept=this.accept)},setValue:function(k){this.clearFiles();if(k){Array.isArray(k)||(k=[k]);for(const d of k)this.addFile(b.createFile(d))}return this.callSuper?this.callSuper(k):k},getValue:function(){return this.value},setDisabled:function(k){this.callSuper(k);this.fileInput?.setDisabled(k)},
setMaxFiles:function(k){this.maxFiles!==k&&(this.maxFiles=k,this.inited&&this.fireEvent("maxFiles",k),this.fileInput&&(this.fileInput.getIDE().multiple=1<k))},setUploadUrl:function(k){this.set("uploadUrl",k,!0)},setRequestFileParam:function(k){this.set("requestFileParam",k,!0)},setResponseIsRaw:function(k){this.set("responseIsRaw",k,!0)},bringSubviewToFront:function(k){k===this.fileInput?this.callSuper(k):this.sendSubviewBehind(k,this.fileInput)},subviewAdded:function(k){this.callSuper(k);this.fileInput&&
this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(k,d){this.addFile(k)},filterFiles:function(k){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:k},uploadFiles:function(k,d){k??=this.uploadUrl;const h=this.files;let c=h.length;for(;c;)this.uploadFile(h[--c],k,d)},makeFetchOptionsForUpload:k=>({method:"POST",body:k}),uploadFile:function(k,d,h){const c=this,f=new FormData;f.append(h??c.requestFileParam,k,k.name.replaceAll("%20"," "));u.doFetch(d??c.uploadUrl,c.makeFetchOptionsForUpload(f),
c.responseIsRaw,a=>{c.handleUploadSuccess(k,a)},a=>{c.handleUploadFailure(k,a)})},handleUploadSuccess:function(k,d){k[b.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(k,d);this.updateValueFromFiles()},handleUploadFailure:(k,d)=>{w("Upload failure:"+d.status+":"+d.message)},parseServerPathFromResponse:(k,d)=>null,addFile:function(k){this.files.push(k);this.updateValueFromFiles();this.fireEvent("addFile",k)},removeFile:function(k){const d=this.files;let h=d.length;for(;h;)if(b.isSameFile(d[--h],
k)){d.splice(h,1);this.updateValueFromFiles();this.fireEvent("removeFile",k);break}},updateValueFromFiles:function(){const k=[];var d=this.files;let h=d.length;for(;h;){const c=d[--h][b.FILE_ATTR_SERVER_PATH];c&&k.push(c)}d=k.length;this.value=1===d?k[0]:0===d?void 0:k;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const k=this.files;let d=k.length;for(;d;)this.removeFile(k[--d])}}),
l=u.ImageUploader=new x("ImageUploader",b,{extend:{isImageFile:k=>/image/i.test(k.type)},initNode:function(k,d){d.maxFiles=1;this.callSuper(k,d)},filterFiles:function(k){if(l.isImageFile(k)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(k)}},addFile:function(k){const d=this,h=l.isImageFile(k);d.callSuper(k);const c=new u.Image(d,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[u.SizeToParent]);
c.file=k;const f=a=>{const p=new Image;p.onload=()=>{k.width=p.width;k.height=p.height;c&&!c.destroyed&&d.updateImage(k,c,p.src)};p.src=a};h?-1===k.size?f(k.serverPath):l.isImageFile(k)&&b.readFile(k,f):-1===k.size?d.updateImage(k,c,k.serverPath):b.readFile(k,a=>{d.updateImage(k,c,a)});return c},removeFile:function(k){this.callSuper(k);const d=this.getSubviews();let h=d.length;for(;h;){const c=d[--h];if(b.isSameFile(c.file,k)){c.destroy();break}}},handleDroppedFile:function(k,d){this.callSuper(k,
d);this.uploadFile(k,this.uploadUrl)},updateImage:function(k,d,h){this.nativeWidth=k.width;this.nativeHeight=k.height;d.setImageUrl(h)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(u=>{const x=(w,v,m,e)=>{m=m.bind(w);"y"!==w.axis&&(m(v,e,"x"),m(v,e,"boundsWidth"));"x"!==w.axis&&(m(v,e,"y"),m(v,e,"boundsHeight"));m(v,e,"visible")};u.SizeToChildren=new JS.Class("SizeToChildren",u.Layout,{initNode:function(w,v){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,v)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const v=this.parent;if(!v.isBeingDestroyed){const m=this.subviews;var w=m.length;const e=this.axis,b=Math.max;let l,k;if("y"!==e){l=w;for(k=0;l;){const d=m[--l];d.visible&&(k=b(k,d.x+(0<d.boundsWidth?d.boundsWidth:0)))}v.setWidth(k+
this.paddingX)}if("x"!==e){l=w;for(k=0;l;)w=m[--l],w.visible&&(k=b(k,w.y+(0<w.boundsHeight?w.boundsHeight:0)));v.setHeight(k+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){x(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){x(this,w,this.detachFrom,"update")}})})(myt);
(u=>{let x=0;const w=JS.Class,{View:v,SizeToParent:m,RootView:e}=u,b=u.Dimmer=new w("Dimmer",v,{include:[m],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(k,d){this.restoreFocus=!0;d.focusable=d.focusCage=!0;d.percentOfParentWidth??(d.percentOfParentWidth=100);d.percentOfParentHeight??(d.percentOfParentHeight=100);d.visible??(d.visible=!1);d.ignoreLayout??(d.ignoreLayout=!0);this.callSuper(k,d);this.overlay=new v(this,{ignorePlacement:!0,opacity:b.OPACITY,bgColor:b.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[m]);for(const h of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",h);e.setupCaptureDrop(this)},destroy:function(){e.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(k){this.restoreFocus=k},eatMouseEvent:k=>!0,show:function(){const k=u.global.focus;this.prevFocus=k.focusedView??k.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(k){this.visible&&
(this.setVisible(!1),!k&&this.restoreFocus&&this.prevFocus?.focus())}}),l=u.ModalPanel=new w("ModalPanel",b,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(k,d){const h={name:"content",ignorePlacement:!0},c={...h,align:"center",valign:"middle"};this.defaultPlacement="content";d.sizingStrategy??(d.sizingStrategy="children");d.marginTop??(d.marginTop=l.MARGIN_TOP);d.marginLeft??
(d.marginLeft=l.MARGIN_LEFT);d.marginBottom??(d.marginBottom=l.MARGIN_BOTTOM);d.marginRight??(d.marginRight=l.MARGIN_RIGHT);d.paddingX??(d.paddingX=l.PADDING_X);d.paddingY??(d.paddingY=l.PADDING_Y);this.callSuper(k,d);switch(this.sizingStrategy){case "children":new u.SizeToChildren(new v(this,c),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new v(this,{...h,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[m]);break;case "basic":new v(this,c);break;default:new v(this,h)}},setSizingStrategy:function(k){this.sizingStrategy=k},setMarginTop:function(k){this.marginTop=k},setMarginLeft:function(k){this.marginLeft=k},setMarginBottom:function(k){this.marginBottom=k},setMarginRight:function(k){this.marginRight=k},setPaddingX:function(k){this.paddingX=k},setPaddingY:function(k){this.paddingY=k},
show:function(){this.callSuper();x++},hide:function(k){this.callSuper(k);x=Math.max(0,x-1)}})})(myt);
(u=>{const x=v=>{v[v.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=v=>{const m=v.size,e=v.getIDS();v.setWidth(m);v.setHeight(m);e.width=e.height=m-2*v.borderWidth+"px"};u.Spinner=new JS.Class("Spinner",u.View,{initNode:function(v,m){this.lateAttrs=["spinColor"];m.visible??(m.visible=!1);m.borderWidth??(m.borderWidth=5);m.borderColor??(m.borderColor="#fff");m.borderStyle??(m.borderStyle="solid");m.spinColor??(m.spinColor="#000");this.callSuper(v,m);this.getIDS().borderRadius="50%";w(this);
x(this)},setSize:function(v){this.size!==v&&(this.size=v,this.inited&&w(this))},setSpinColor:function(v){this.spinColor!==v&&(this.getIDS().borderTopColor=this.spinColor=v,this.inited&&this.fireEvent("spinColor",v))},setBorderWidth:function(v){this.borderWidth!==v&&(this.callSuper(v),this.inited&&w(this))},setVisible:function(v){this.visible!==v&&(this.callSuper(v),this.inited&&x(this))}})})(myt);
(u=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=e=>{if(Array.isArray(e)){let b=e.length;if(0<b){e.unshift("fa");b++;e[1].startsWith("fa-")||(e[1]="fa-"+e[1]);3<=b&&(e[2]=x[e[2]]??"");if(3<b)for(let l=3;b>l;l++)e[l].startsWith("fa-")||(e[l]="fa-"+e[l]);return'<i class="'+e.join(" ")+'"></i>'}}u.dumpStack("Error making tag");console.error(e);return""},v=e=>{let b=e.properties;b=b?"string"===typeof b?b.split(" "):b.slice():[];b.unshift(e.icon,e.size);e.setHtml(w(b))},m=e=>{for(const b of["Free 400",
"Free 900","Brands 400"])u.registerForFontNotification(e,"Font Awesome 5 "+b)};u.FontAwesome=new JS.Class("FontAwesome",u.Markup,{extend:{makeTag:w,registerForNotification:m},initNode:function(e,b){this.size=0;this.icon="";this.callSuper(e,b);v(this);m(this)},setIcon:function(e){const b=this.icon;this.set("icon",e,!0);this.inited&&b!==e&&v(this)},setSize:function(e){const b=this.size;this.set("size",e,!0);this.inited&&b!==e&&v(this)},setProperties:function(e){this.properties=e;this.fireEvent("properties",
e);this.inited&&v(this)}});u.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(u=>{let x,w,v,m,e=0,b=0,l=0,k=255,d=[],h,c,f,a,p,n,q,r,z,C,G,K,J,M,N,g,t,y,A,E,D,I,P,S,L,V;const ea=JS.Class,{View:T,Text:la,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=u,{min:ha,max:ia}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(B,F){F.height??(F.height=17);F.paddingTop??(F.paddingTop=3);F.paddingLeft??
(F.paddingLeft=10);F.paddingRight??(F.paddingRight=10);F.activeColor??(F.activeColor="#bbb");F.hoverColor??(F.hoverColor="#ddd");F.readyColor??(F.readyColor="#ccc");F.domClass="mytButtonText";this.callSuper(B,F)}}),La=oa(["check"]),Ia=B=>{for(let F of B)7===F?.length&&(F+="ff"),Ha[F]=!0},Ha={},Ma=new ea("Swatch",T,{include:[wa],initNode:function(B,F){const H=F.width=F.height=16;F.border=Ga;F.domClass="mytCheckerboardPattern";const O=F.bgColor;this.callSuper(B,F);this.colorView=new T(this,{width:H,
height:H,bgColor:O});O===m&&(B=qa.makeColorFromHexString(m),new la(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>B.red+B.green+B.blue?"#fff":"#000"}))},setBgColor:function(B){this.colorView?.setBgColor(B);this.setTooltip(B)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=u.ColorPicker=new ea("ColorPicker",T,{initNode:function(B,F){x=this;x._isReady=!1;let H=F.color??"transparent";delete F.color;
v=F.alphaChannel??!1;delete F.alphaChannel;h=F.palette??[];Ia(h);delete F.palette;w="transparent"===H;x.callSuper(B,F);c=new T(x,{width:160,height:170});new Ca(c,{spacing:4,lineSpacing:4});f=new T(x,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(O,Q){f.callSuper(f.x,f.y);const U=this.getPagePosition();b=parseFloat(ia(0,ha(1,(O+this.dragInitX-U.x)/this.width)));l=parseFloat(1-ia(0,ha(1,(Q+this.dragInitY-U.y)/this.height)));w=!1;x.updateUI()}}]);B=new T(f,{width:139,height:139});
F=new T(B,{width:139,height:139});B.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";F.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";a=new T(F,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});p=new T(x,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(O,Q){this.callSuper(p.x,p.y);e=parseFloat(ia(0,ha(1,(Q+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;x.updateUI()}}]);p.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new T(p,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new T(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);B=146;v&&(z=new u.LabelSlider(x,{x:170,y:B,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(O,Q){Q=O.value;if(null==Q||isNaN(Q))Q=
0;O.value=u.formatAsPercentage(Q/255,0);this.callSuper(O,!0);k=Q;x._isReady&&(w=!1,x.updateUI())}}]),B+=23);q=new u.InputText(x,{x:236,y:B,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(q,"_submitInput","blur");x.attachToDom(q,"_handleKeyDown","keydown");q.getIDS().paddingLeft="6px";B=new T(x,{x:170,y:B,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new T(B,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{x.setColor(H)}}]);r=new T(B,{x:30,width:30,height:23});if(B=Ea.getItem("myt.default"))d=B.split(";"),Ia(d);x.setColor(H);x._isReady=!0},_handleKeyDown:B=>{u.KeyObservable.isEnterKeyEvent(B)&&x._submitInput()},_submitInput:()=>{x.setColor(q.value)},addToPalette:B=>{B&&"transparent"!==B&&!Ha[B]&&(d.unshift(B),d.length=ha(d.length,56),Ea.setItem("myt.default",d.join(";")))},setColor:B=>{const F=B&&"transparent"!==B;if(v){let H="ff";F&&7<B.length&&(H=B.slice(7,9),B=B.slice(0,7));z.setValue(parseInt(H,
16))}else F&&7<B.length&&(B=B.slice(0,7));F?(B=qa.makeColorFromHexString(B).getHSV(),e=B.h/360,b=B.s,l=B.v,w=!1):w=!0;x.updateUI()},getColor:()=>{if(w)return"transparent";let B="";v&&(B=k.toString(16),2>B.length&&(B="0"+B));return qa.makeColorFromHSV(360*e,100*b,100*l).getHtmlHexString()+B},updateUI:()=>{const B=!w;n.setVisible(B);a.setVisible(B);B&&(a.setX(ia(0,ha(1,b)*(f.width+2))-5),a.setY(ia(0,ha(1,1-l)*(f.height+2))-5),n.setY(e*(p.height-2)-1));f.setBgColor(qa.makeColorFromHSV(360*e,100,100).getHtmlHexString());
m=x.getColor();q.setValue(m);r.setBgColor(m);x.redrawPalette()},redrawPalette:u.debounce(()=>{c.destroyAllSubviews();const B=new Set;h.push(...d);for(let F of h)if(v||7===F.length)7===F.length&&(F+="ff"),B.has(F)||(new Ma(c,{bgColor:F}),B.add(F))},50)}),ya=B=>{B=B.split(":");return[ia(0,ha(23,parseInt(B[0]))),ia(0,ha(60,parseInt(B[1])))]},Ja=new ea("SelectableBtn",na,{include:[u.Selectable],setSelected:function(B){this.callSuper(B);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(B,F){F.width=J?175:49;this.callSuper(B,F)},doActivated:function(){this.callSuper();const B=this.text,F=ya(B);V.selectById(B);D.setHours(F[0]);D.setMinutes(F[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(B,F){F.width=23;F.border=xa;this.callSuper(B,F)},setData:function(B){this.data=B},setIsAnotherMonth:function(B){this.isAnotherMonth=B},setIsToday:function(B){this.isToday=B},setIsSunday:function(B){this.isSunday=
B},setIsSaturday:function(B){this.isSaturday=B},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const B=new Date(this.data);B.setHours(D.getHours());B.setMinutes(D.getMinutes());pa(B)}}),pa=B=>{B.setSeconds(0);B.setMilliseconds(0);var F=6>=N.length,H;if(F)for(H=7;H--&&!N.includes(B.getDay());)B.setDate(B.getDate()+
1);D=B;const O=V.getODE().scrollTop;var Q=new Date,U=Q.getFullYear(),R=Q.getMonth(),W=Q.getDate();Q.getHours();Q.getMinutes();const aa=B.getFullYear(),ca=B.getMonth(),ka=B.getDate();var da=B.getTime();Q=B.getHours();B=B.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-M,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);U=U==aa&&R==ca;if(!J){R=L;R.deselectAll();R.destroyAllSubviews();H=new Date(da);const ja=7+M;R=G.days;P.setText(aa+" "+
G.sep+" "+G.months[ca]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);I.setVisible(null==g||g<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ca+1);S.setVisible(null==t||t>H.getTime());for(H=0;7>H;H++)new la(L,{width:23,height:20,textAlign:"center",text:R[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>ra&&(H=-7,fa=35);R=new Date(da);R.setHours(0);R.setMinutes(0);for(R.setSeconds(0);H<fa;H++){var X=H+1-ra;const Aa=(H+ja)%7,Y=new Pa(L);ra>H?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),R.setDate(za+X),R.setMonth(ta.getMonth()),R.setYear(ta.getFullYear())):H<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),R.setDate(X),R.setMonth(ca),R.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),R.setDate(X-sa),R.setMonth(ua.getMonth()),R.setYear(ua.getFullYear()));F&&!N.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===ka&&(L.select(Y),Y.focus()),U&&X===W&&Y.setIsToday(!0),X=new Date(R.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=g&&g>X.getTime()||null!=t&&t<R.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!K){F=60*A[0]+A[1];W=V;W.deselectAll();W.destroyAllSubviews();let [ja,fa]=y;for(R=new Date(da);60*ja+fa<F;)da=new Oa(V,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===Q&&fa===B&&V.select(da),R.setHours(ja),R.setMinutes(fa),W=R.getTime(),(null!=g&&g>W||null!=t&&t<W)&&da.setDisabled(!0),
fa+=E,60<=fa&&(fa-=60,ja++);V.scrollYTo(O)}},Qa=u.DatePicker=new ea("DatePicker",T,{initNode:function(B,F){C=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...F.opt};delete F.opt;C.callSuper(B,F);G=H.locales[H.locale??"en"];K=H.dateOnly;J=H.timeOnly;M=H.firstDayOfWeek;E=ia(5,ha(30,H.minuteInterval));N=H.allowedDays;Array.isArray(N)&&0!==N.length||
(N=[0,1,2,3,4,5,6]);g=Date.parse(H.minDate);g=isNaN(g)?null:g;t=Date.parse(H.maxDate);t=isNaN(t)?null:t;y=ya(H.minTime);A=ya(H.maxTime);B=new T(C,{visible:!J});H.showTodayButton&&new na(B,{width:24,text:oa(["home"]),tooltip:G.today},[{doActivated:()=>{pa(new Date)}}]);I=new na(B,{width:24,x:28,text:oa(["chevron-left"]),tooltip:G.prevMonth},[{doActivated:()=>{const O=(new Date(D.getFullYear(),D.getMonth(),0)).getDate();O<D.getDate()&&D.setDate(O);D.setMonth(D.getMonth()-1);pa(D);I.focus()}}]);P=new la(B,
{width:100,x:52,textAlign:"center"});S=new na(B,{width:24,x:152,text:oa(["chevron-right"]),tooltip:G.nextMonth},[{doActivated:()=>{var O=(new Date(D.getFullYear(),D.getMonth()+1,0)).getDate();O<D.getDate()&&D.setDate(O);O=(new Date(D.getFullYear(),D.getMonth()+2,0)).getDate();O<D.getDate()&&D.setDate(O);D.setMonth(D.getMonth()+1);pa(D);S.focus()}}]);L=new T(C,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(L,{spacing:2,lineInset:2,lineSpacing:3});V=new T(C,
{x:J?0:195,y:J?0:25,width:(J?175:49)+u.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!K,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(V,{axis:"y",inset:1,spacing:3});C.setWidth(V.visible?V.x+V.width:L.width);pa(H.current??new Date)},getPickedDate:()=>D}),Z=u.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(B,F){F.buttonClass??(F.buttonClass=Z.BUTTON_CLASS);this.callSuper(B,F);B=this.content;B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER);B.setFocusCage(!0);this.makeCloseButton(B)},setButtonClass:function(B){this.buttonClass=B},setCallbackFunction:function(B){this.callbackFunction=B},makeButton:function(B,F){const H=this;return new H.buttonClass(B,
F,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(B){return B.closeBtn=this.makeButton(B,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(B){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(B)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const B=this.content,F=B.sizeToChildren;B.destroyAllSubviews(H=>"closeBtn"!==H.name);B.setVisible(!0);this.overlay.setBgColor(u.Dimmer.COLOR);this.setCallbackFunction();F.setPaddingY(ba.PADDING_Y);F.setPaddingX(ba.PADDING_X);B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER)},doCallback:function(B){const F=this.callbackFunction;F&&F.call(this,B.name)||this.hide()},showBlank:function(B){this.destroyContent();this.content.setVisible(!1);
B?.bgColor&&this.overlay.setBgColor(B.bgColor);this.show()},showMessage:function(B,F,H){const O=this.content,Q=O.closeBtn;H={...Z.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(F);B=O.msg=new la(O,{text:B,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ba.PADDING_X:H.msgX,y:null==H.msgY?ba.PADDING_Y:H.msgY,width:H.width});H.titleText&&(this.setupTitle(O,H.titleText),B.setY(B.y+24));this.show();!1===H.showClose?Q.setVisible(!1):(Q.setVisible(!0),
Q.focus())},showSimple:function(B,F,H,O){H=H??{};const Q=this.content,U=Q.closeBtn,R=H.maxContainerHeight;this.destroyContent();H.bgColor&&Q.setBgColor(H.bgColor);H.roundedCorners&&Q.setRoundedCorners(H.roundedCorners);H.boxShadow&&Q.setBoxShadow(H.boxShadow);H.border&&Q.setBorder(H.border);Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=Q.contentContainer=new T(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>R&&(W=R);this.callSuper(W)}}]);B.call(this,F);new va(F,{axis:"both"});
this.show();U.setVisible(!0);U.focus();H.titleText&&(this.setupTitle(Q,H.titleText),F.setY(this.header.height+1));F.initialFocus?.focus();O?.(this)},showConfirm:function(B,F,H){H={...Z.CONFIRM_DEFAULTS,...H};this.showMessage(B,F,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(B,F,H,O){H={...Z.CONFIRM_DEFAULTS,...H};const Q=this.content,U=Q.closeBtn,R=H.maxContainerHeight;this.destroyContent();Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=Q.contentContainer=
new T(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>R?R:W)}}]);B.call(this,F);new va(F,{axis:"both"});this.show();U.setVisible(!0);U.focus();this.setupTitle(Q,H.titleText);F.setY(this.header.height+1);this.setupFooterButtons(F,H);F.initialFocus?.focus();O?.(this)},showSpinner:function(B,F){const H=this.content;F={...Z.NO_WRAP_TEXT_DEFAULTS,...F};this.destroyContent();const O=this.spinner=new u.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==F.msgY?ba.PADDING_Y:
F.msgY});B&&new la(H,{text:B,whiteSpace:F.whiteSpace,wordWrap:F.wordWrap,fontWeight:F.fontWeight,x:null==F.msgX?ba.PADDING_X:F.msgX,y:O.y+O.size+ba.PADDING_Y,width:F.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(B,F){const H=this,O=H.content,Q=O.closeBtn;F={...Z.COLOR_PICKER_DEFAULTS,...F};H.destroyContent();H.setCallbackFunction(U=>{switch(U){case "closeBtn":case "cancelBtn":B.call(H,U);break;case "confirmBtn":const R=x.getColor();x.addToPalette(R);B.call(H,
U,R)}x.destroy()});x=new Na(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(F.alphaChannel?23:0),color:F.color,alphaChannel:F.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(x,F);H.setupTitle(O,F.titleText)},showDatePicker:function(B,F){const H=this,O=H.content,Q=O.closeBtn;F={...Z.DATE_PICKER_DEFAULTS,...F};H.destroyContent();
H.setCallbackFunction(U=>{switch(U){case "closeBtn":case "cancelBtn":B.call(H,U);break;case "confirmBtn":B.call(H,U,C.getPickedDate())}C.destroy()});C=new Qa(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(F.initialDate??Date.now()),dateOnly:F.dateOnly||!1,timeOnly:F.timeOnly||!1,locales:F.locales,locale:F.locale}});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(C,F);H.setupTitle(O,F.timeOnly?F.timeOnlyTitleText:F.titleText)},setupTitle:function(B,F){const H=Z.RADIUS;
(this.header=new T(B,{ignoreLayout:!0,width:B.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();B.title=new la(B,{x:H,y:4,text:F,fontWeight:"bold"})},setupFooterButtons:function(B,F){const H=this.content;var O=ba.PADDING_Y,Q=O/2;B=H.btnContainer=new T(H,{y:B.y+B.height+O,align:"center"});const U=["active","hover","ready","text"];O=F.cancelAttrs??{};var R;(R=O).name??(R.name="cancelBtn");let W;(W=O).text??(W.text=F.cancelTxt);for(let da of U)da+="Color",
null!=F[da]&&(O[da]=F[da]);R=this.makeButton(B,O);O=F.confirmAttrs??{};var aa;(aa=O).name??(aa.name="confirmBtn");let ca;(ca=O).text??(ca.text=F.confirmTxt);for(var ka of U)ka+="Color",aa=ka+"Confirm",null!=F[aa]&&(O[ka]=F[aa]);this.makeButton(B,O);if(ka=F.button)for(const da of ka)this.makeButton(B,da);new va(B,{axis:"y"});new Ba(B,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(Q);Q=B.y-Q;(new T(H,{ignoreLayout:!0,y:Q,width:H.width,height:H.height-Q,bgColor:"#eee"})).sendToBack();!1===
F.showClose&&R.focus()}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,v={},m=(c,f)=>{if(c){const a=c.id;c.id?f(a):w("No ID")}else w("No validator")},e=c=>{m(c,f=>{v[f]=c})},b=u.Validator=new x("Validator",{initialize:function(c){this.id=c},isValid:(c,f,a)=>!0,isFormValid:function(c,f,a){f??={};f.form=c;return this.isValid(c.getValue(),f,a)}}),l=u.RequiredFieldValidator=new x("RequiredFieldValidator",b,{isValid:(c,f,a)=>null==c||""===c||"string"===typeof c&&""===c.trim()?(a?.push("This value is required."),!1):!0}),k=u.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",b,{isValid:(c,f,a)=>{f=f.form.getRollbackValue();return c&&f&&c.toLowerCase()===f.toLowerCase()?(a?.push("Value must differ by more than just case."),!1):!0}}),d=u.URLValidator=new x("URLValidator",b,{initialize:function(c,f){this.callSuper(c);this.originalRawQuery=f},isValid:function(c,f,a){return(new u.URI(c)).toString(this.originalRawQuery)!==c?(a?.push("Invalid URL."),!1):!0}}),h=u.JSONValidator=new x("JSONValidator",b,{isValid:(c,f,a)=>{try{return JSON.parse(c),
!0}catch(p){return a?.push(p),!1}}});u.EqualFieldsValidator=new x("EqualFieldsValidator",b,{initialize:function(c,f,a){this.callSuper(c);this.fieldA=f;this.fieldB=a},isValid:function(c,f,a){if(c&&this.fieldA.getValue()===this.fieldB.getValue())return!0;a?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});u.LengthValidator=new x("LengthValidator",b,{initialize:function(c,f,a){this.callSuper(c);this.min=f;this.max=a},isValid:function(c,f,a){c=c?c.length:
0;f=this.min;const p=this.max;return void 0!==f&&f>c?(a?.push("The value must not be less than "+f+" characters long."),!1):void 0!==p&&p<c?(a?.push("The value must not be greater than "+p+" characters long."),!1):!0}});u.NumericRangeValidator=new x("NumericRangeValidator",b,{initialize:function(c,f,a){this.callSuper(c);this.min=f;this.max=a},isValid:function(c,f,a){if(""===c)return!0;c=Number(c);f=this.min;const p=this.max;return isNaN(c)?(a?.push("Value is not a number."),!1):void 0!==f&&f>c?(a?.push("Value must not be less than "+
f+"."),!1):void 0!==p&&p<c?(a?.push("Value must not be greater than "+p+"."),!1):!0}});u.CompoundValidator=new x("CompoundValidator",b,{initialize:function(c,...f){this.callSuper(c);for(c=f.length;c;){let a=f[--c];"string"===typeof a&&((f[c]=a=v[a])||f.splice(c,1))}this.__v=f},addValidator:function(c){"string"===typeof c&&(c=v[c]);c&&this.__v.push(c)},isValid:function(c,f,a){const p=this.__v,n=p.length;let q=!0,r=0;for(;n>r;)q=p[r++].isValid(c,f,a)&&q;return q}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){e(new l("required"));e(new k("equalsIgnoreCase"));e(new d("url"));e(new h("json"));u.global.register("validators",this)},getValidator:c=>v[c],register:e,unregister:c=>{m(c,f=>{v[f]&&delete v[f]})}})})(myt);
(u=>{const x=JS.Class,{min:w,max:v,round:m,abs:e}=Math,b=u.View,l=new x("SliderThumb",u.SimpleButton,{include:[u.Draggable,u.ArrowKeyActivation],initNode:function(d,h){const c=h.width=d.thumbWidth,f=h.height=d.thumbHeight;h.roundedCorners=w(f,c)/2;h.repeatKeyDown=!0;h.activationKeys=u.global.keys.ARROW_KEYS;h.activeColor="#bbb";h.readyColor="#ccc";h.hoverColor="#ddd";h.boxShadow=[0,0,4,"#666"];this.callSuper(d,h);this["x"===d.axis?"setY":"setX"](d.thumbOffset);this.syncTo(d,"setDisabled","disabled");
d._syncThumbToValue(this,d.getValue())},setDisabled:function(d){this.callSuper(this.valueFromEvent(d))},setFocused:function(d){this.callSuper(d);d&&this.makeHighestZIndex()},setX:function(d){this.x!==d&&(this.callSuper(d),d=this.parent,"x"===d.axis&&d.syncValueToThumb(this))},setY:function(d){this.y!==d&&(this.callSuper(d),d=this.parent,"y"===d.axis&&d.syncValueToThumb(this))},requestDragPosition:function(d,h){if(!this.disabled){const c=this.parent,f=c.getMinPixelValueForThumb(this),a=c.getMaxPixelValueForThumb(this),
p=c.snapThreshold;let n;"x"===c.axis?(n=this.width/2,h="setX"):(n=this.height/2,d=h,h="setY");if(c.allowSnap(this))for(let q of c.getSnapValuesAsPx())if(q-=n,e(d-q)<=p){d=q;break}this[h](w(v(d,f-n),a-n))}},doKeyArrowLeftOrUp:function(d,h){d?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(d,h){d?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),k=u.BaseSlider=new x("BaseSlider",b,{include:[u.Disableable],initNode:function(d,
h){h.axis??(h.axis="x");"x"===h.axis?(h.width??(h.width=100),h.height??(h.height=18)):(h.width??(h.width=18),h.height??(h.height=100));h.bgColor??(h.bgColor="#999");h.roundedCorners??(h.roundedCorners=9);h.trackInset??(h.trackInset=9);h.trackOutset??(h.trackOutset=9);h.thumbWidth??(h.thumbWidth=16);h.thumbHeight??(h.thumbHeight=16);h.thumbOffset??(h.thumbOffset=1);h.nudgeAmount??(h.nudgeAmount=1);h.snapThreshold??(h.snapThreshold=8);h.snapValues??(h.snapValues=[]);this.callSuper(d,h)},setAxis:function(d){this.axis=
d},setTrackInset:function(d){this.trackInset=d},setTrackOutset:function(d){this.trackOutset=d},setThumbWidth:function(d){this.thumbWidth=d},setThumbHeight:function(d){this.thumbHeight=d},setThumbOffset:function(d){this.thumbOffset=d},setNudgeAmount:function(d){this.nudgeAmount=d},setSnapThreshold:function(d){this.snapThreshold=d},setSnapValues:function(d){this.snapValues=d},getSnapValuesAsPx:function(){const d=[];for(const h of this.snapValues)d.push(this.convertValueToPixels(h));return d},allowSnap:function(d){var h=
d.__lastMousePosition;const c=u.DomElementProxy.getRelativePosition(d.getODE()),f="x"===this.axis;d=f?d.height:d.width;h=f?h.y-c.y:h.x-c.x;return 0<h&&h<d},convertValueToPixels:function(d){const h=this.minValue,c=this.trackInset;return c+(("x"===this.axis?this.width:this.height)-c-this.trackOutset)/(this.maxValue-h)*(d-h)},convertPixelsToValue:function(d){const h=this.minValue,c=this.trackInset;return(this.maxValue-h)/(("x"===this.axis?this.width:this.height)-c-this.trackOutset)*(d-c)+h},nudgeValueLeft:function(d){this._nudge(d,
!1)},nudgeValueUp:function(d){this._nudge(d,!1)},nudgeValueRight:function(d){this._nudge(d,!0)},nudgeValueDown:function(d){this._nudge(d,!0)},_nudge:(d,h)=>{},_syncThumbToValue:function(d,h){h=this.convertValueToPixels(h);"x"===this.axis?d.setX(h-d.width/2):d.setY(h-d.height/2)},syncValueToThumb:function(d){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(d,this.convertPixelsToValue("x"===this.axis?d.x+d.width/2:d.y+d.height/2)),this.__lockSync=!1)},_syncValueToThumb:(d,h)=>
{},getMinPixelValueForThumb:function(d){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(d){return this.convertValueToPixels(this.maxValue)}});u.RangeSlider=new x("RangeSlider",k,{include:[u.BoundedRangeComponent],initNode:function(d,h){this.callSuper(d,h);d=this.rangeFill=new b(this,{bgColor:"#666"});"x"===this.axis?(d.setY(this.thumbOffset),d.setHeight(this.thumbHeight),d.setRoundedCorners(this.thumbHeight/2)):(d.setX(this.thumbOffset),d.setWidth(this.thumbWidth),
d.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new l(this);this.thumbUpper=new l(this);this._syncRangeFillToValue()},setValue:function(d){this.callSuper(d);this.inited&&(this.__lockSync||(d=this.getValue(),this._syncThumbToValue(this.thumbLower,d),this._syncThumbToValue(this.thumbUpper,d)),this._syncRangeFillToValue())},setWidth:function(d){const h=this.width;this.callSuper(d);this.inited&&"x"===this.axis&&this.width!==h&&(d=this.getValue(),this._syncThumbToValue(this.thumbLower,d),this._syncThumbToValue(this.thumbUpper,
d))},setHeight:function(d){const h=this.height;this.callSuper(d);this.inited&&"y"===this.axis&&this.height!==h&&(d=this.getValue(),this._syncThumbToValue(this.thumbLower,d),this._syncThumbToValue(this.thumbUpper,d))},_syncRangeFillToValue:function(){const d=this.rangeFill;var h=this.getValue();const c=this.convertValueToPixels(h.lower);h=this.convertValueToPixels(h.upper)-c;"x"===this.axis?(d.setX(c),d.setWidth(h)):(d.setY(c),d.setHeight(h))},_syncThumbToValue:function(d,h){this.callSuper(d,"thumbLower"===
d.name?h.lower:h.upper)},_syncValueToThumb:function(d,h){let c=this.getValueCopy();c["thumbLower"===d.name?"lower":"upper"]=h;this.setValue(c);c=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,c);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,c)},_nudge:function(d,h){const c=this.getValueCopy();h=this.nudgeAmount*(h?1:-1);"thumbLower"===d.name?c.lower=w(c.lower+h,c.upper):c.upper=v(c.upper+h,c.lower);this.setValue(c)},getMinPixelValueForThumb:function(d){return this.convertValueToPixels("thumbLower"===
d.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(d){return this.convertValueToPixels("thumbLower"===d.name?this.getValue().upper:this.maxValue)}});u.Slider=new x("Slider",k,{include:[u.BoundedValueComponent],initNode:function(d,h){this.callSuper(d,h);this.thumb=new l(this)},setValue:function(d){this.callSuper(d);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(d){const h=this.width;this.callSuper(d);this.inited&&"x"===
this.axis&&this.width!==h&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(d){const h=this.height;this.callSuper(d);this.inited&&"y"===this.axis&&this.height!==h&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(d,h){this.setValue(h);this._syncThumbToValue(d,this.getValue())},_nudge:function(d,h){this.setValue(this.getValue()+this.nudgeAmount*(h?1:-1))}});u.LabelSlider=new x("LabelSlider",u.Slider,{initNode:function(d,h){const c=this;h.labelX??
(h.labelX=8);h.labelY??(h.labelY=2);h.labelFontSize??(h.labelFontSize="12px");h.labelColor??(h.labelColor="#000");h.flipThreshold??(h.flipThreshold=m((h.maxValue-h.minValue)/2)||0);c.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],h);c.callSuper(d,h);const f=c.labelX;c.labelTxt=new u.Text(c,{x:f,y:c.labelY,textColor:c.labelColor,fontSize:c.labelFontSize},[{initNode:function(a,p){this.targetX=f;this.callSuper(a,p)},updateX:function(a){const p=c.getValue()>=c.flipThreshold?
f:c.width-this.width-f;this.targetX!==p&&(this.targetX=p,this.stopActiveAnimators("x"),a?this.setX(p):this.animate({attribute:"x",to:p,duration:250}))}}]);c.syncTo(c,"setText","value")},setWidth:function(d){this.callSuper(d);this.labelTxt?.updateX(!0)},setText:function(d,h){const c=this.labelTxt;c&&(c.setText(d.value),c.updateX(h))}})})(myt);
(u=>{const x=JS.Class,{abs:w,min:v}=Math,{CODE_ENTER:m,CODE_SPACE:e,ARROW_KEYS:b}=u.global.keys,l=d=>{const h="y"===d.axis?"height":"width";d.constrain("__limitToParent",[d,"limitToParent",d,h,d.parent,h])};var k=u.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(d,h){h.nudgeTargetValue??(h.nudgeTargetValue="value");h.nudgeIncrement??(h.nudgeIncrement=1);h.nudgeMin??(h.nudgeMin=1);h.nudgeMax??(h.nudgeMax=64);this.__nudgeAcc=h.nudgeMin;this.callSuper(d,h)},setNudgeIncrement:function(d){this.set("nudgeIncrement",
w(d),!0)},setNudgeMin:function(d){this.set("nudgeMin",w(d),!0)},setNudgeMax:function(d){this.set("nudgeMax",w(d),!0)},setNudgeTargetValue:function(d){this.set("nudgeTargetValue",d,!0)},nudge:function(d,h){const c=this.nudgeTargetValue;h=this.__nudgeAcc=h?v(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(c,(this.get(c)||0)+(d?1:-1)*h);return!0}});k=new x("BaseDivider",u.SimpleButton,{include:[u.BoundedValueComponent,u.Draggable,u.ArrowKeyActivation,k],initNode:function(d,
h){h.activeColor??(h.activeColor="#bbb");h.hoverColor??(h.hoverColor="#ddd");h.readyColor??(h.readyColor="#ccc");h.axis??(h.axis="x");h.minValue??(h.minValue=0);h.value??(h.value=h.minValue);h.expansionState??(h.expansionState=2);h.focusIndicator??(h.focusIndicator=!1);h.repeatKeyDown??(h.repeatKeyDown=!0);h.activationKeys??(h.activationKeys=[m,e,...b]);"y"===h.axis?(h.height??(h.height=6),h.cursor??(h.cursor="row-resize")):(h.width??(h.width=6),h.cursor??(h.cursor="col-resize"));this.quickSet(["axis"],
h);this.callSuper(d,h);null==h.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&l(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(d){this.expansionState=d},setRestoreValue:function(d){this.restoreValue=d},setLimitToParent:function(d){this.limitToParent!==d&&(this.limitToParent=d,this.inited&&(this.fireEvent("limitToParent",d),null==d?this.releaseConstraint("__limitToParent"):l(this)))},setAxis:function(d){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=d},setValue:function(d){this.callSuper(d);d=this.value;"y"===this.axis?this.setY(d):this.setX(d)},__limitToParent:function(d){d="y"===this.axis?"height":"width";this.setMaxValue(this.parent[d]-this.limitToParent-this[d])},doActivationKeyDown:function(d,h){this.callSuper(d,h);switch(d){case m:case e:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(d,h){return this.nudge(!1,h)},doKeyArrowRightOrDown:function(d,h){return this.nudge(!0,h)},nudge:function(d,h){d=this.callSuper(d,h);this.setExpansionState(2);
this.setRestoreValue(this.value);return d},doPrimaryAction:function(){const {restoreValue:d,maxValue:h,minValue:c}=this;let f;switch(this.expansionState){case 0:null!=d&&(this.setExpansionState(1),d===c?d!==h&&this.doPrimaryAction():f=d);break;case 1:null!=h&&(this.setExpansionState(3),this.value===h?this.doPrimaryAction():f=h);break;case 2:null!=c&&(this.setExpansionState(0),this.value===c?this.doPrimaryAction():f=c);break;case 3:null!=d&&(this.setExpansionState(2),d===h?this.doPrimaryAction():f=
d)}this.animateToValue(f)},animateToValue:function(d,h=250){null!=d&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:d,duration:h}))},requestDragPosition:function(d,h){this.disabled||(d="y"===this.axis?h:d,h=this.value,d!==h&&(this.setValue(d),this.setRestoreValue(d),this.setExpansionState(h>d?2:1)))}});u.HorizontalDivider=new x("HorizontalDivider",k,{initNode:function(d,h){h.axis="x";this.callSuper(d,h)}});u.VerticalDivider=new x("VerticalDivider",k,{initNode:function(d,h){h.axis=
"y";this.callSuper(d,h)}})})(myt);
(u=>{let x=0;const {Class:w,Module:v}=JS,{min:m,max:e}=Math,{View:b,SpacedLayout:l,Node:{DEFAULT_PLACEMENT:k}}=u,d=g=>{const t=g.columnHeaders,[y,A]=g.sort??["",""];let E=t.length;for(;E;){const D=t[--E];D.columnId===y?D.sortable&&D.setSortState(A):D.setSortState("none")}g.locked||g.doSort()},h=(g,t,y,A)=>{if(0!==t){const P=0<t,S=[];for(var E=g.length;E;){var D=g[--E];D.resizable&&(y?0<D.flex:0===D.flex)&&S.push({hdr:D,limit:(P?D.maxValue:D.minValue)-D.value,amt:0})}g=S.length;if(0<g){for(E=0;0!==
t;){x>=g&&(E=x=0);D=S[x];var I=D.hdr;D.full?++E:(P?(I=m(y?I.flex:1,t),D.amt+I>D.limit&&(I=D.limit-D.amt,D.full=!0)):(I=e(y?-I.flex:-1,t),D.amt+I<D.limit&&(I=D.limit-D.amt,D.full=!0)),D.amt+=I,t-=I);if(E===g)break;++x}for(const L of S)L.hdr.setValue(L.hdr.value+L.amt);A?.(t)}}},c=g=>(g=g.gridController?.getPrevHdr(g))?g.maxValue-g.value+c(g):0,f=g=>(g=g.gridController?.getNextHdr(g))?g.maxValue-g.value+f(g):0,a=g=>(g=g.gridController?.getPrevHdr(g))?g.minValue-g.value+a(g):0,p=g=>(g=g.gridController?.getNextHdr(g))?
g.minValue-g.value+p(g):0,n=(g,t)=>{g=g.gridController?.getPrevHdr(g);var y=0;if(g){y=g.value+t;g.resizable&&g.setValue(y);const A=y-g.value;y=t-A;0>A&&(y+=n(g,A))}return y},q=(g,t)=>{g=g.gridController?.getPrevHdr(g);var y=0;if(g){y=g.value+t;g.resizable&&g.setValue(y);const A=y-g.value;y=t-A;0<A&&(y+=q(g,A))}return y},r=(g,t)=>{if(g=g.gridController?.getNextHdr(g))t=g.value+t,g.resizable&&g.setValue(t),t-=g.value,0>t&&r(g,t)},z=(g,t)=>{if(g=g.gridController?.getNextHdr(g))t=g.value+t,g.resizable&&
g.setValue(t),t-=g.value,0<t&&z(g,t)},C=g=>{let t="";if(g.sortable)switch(g.sortState){case N.SORT_ORDER_ASC:t="chevron-up";break;case N.SORT_ORDER_DESC:t="chevron-down"}g.sortIcon.setIcon(t)},G=g=>{const t=g.textView;t?.setWidth(g.width-g.outset-t.x)},K=u.GridController=new v("GridController",{initNode:function(g,t){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(g,t);this.fitHeadersToWidth();d(this)},setMaxWidth:function(g){this.set("maxWidth",
g,!0)},setMinWidth:function(g){this.set("minWidth",g,!0)},setFitToWidth:function(g){this.fitToWidth=g},setSort:function(g){u.areArraysEqual(g,this.sort)||(this.sort=g,this.inited&&(this.fireEvent("sort",g),d(this)))},setLastColumn:function(g){const t=this.lastColumn;t!==g&&(t?.setLast(!1),this.lastColumn=g,g?.setLast(!0))},setLocked:function(g){this.locked=g;if(this.inited&&!g){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const t of this.columnHeaders)this.notifyHdrXChange(t),this.notifyHdrWidthChange(t),this.notifyHdrVisibilityChange(t);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(g){g=this.valueFromEvent(g);this.gridWidth!==g&&(this.gridWidth=g,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(g){this.hdrChangeListener=g},doSort:()=>{},getPrevHdr:function(g){const t=this.columnHeaders;g=this.getHdrIndex(g);
if(0<g)for(;g;){const y=t[--g];if(y.visible)return y}},getNextHdr:function(g){const t=this.columnHeaders,y=t.length;g=this.getHdrIndex(g)+1;if(0<g&&g<y)for(;y>g;){const A=t[g++];if(A.visible)return A}},hasHdr:function(g){return this.columnHeaders.includes(g)},getHdrIndex:function(g){return this.columnHeaders.indexOf(g)},getHdrById:function(g){for(const t of this.columnHeaders)if(t.columnId===g)return t},getVisibleHdrs:function(){return this.columnHeaders.filter(g=>g.visible)},notifyAddHdr:function(g){this.hasHdr(g)||
(this.columnHeaders.push(g),g.visible&&this.setLastColumn(g),this.fixupResizerCursors())},notifyRemoveHdr:function(g){const t=this.getHdrIndex(g);-1<t&&(this.columnHeaders.splice(t,1),g.visible&&g.last&&this.setLastColumn(this.getPrevHdr(g)),this.fixupResizerCursors())},notifyHdrXChange:function(g){if(!this.isLocked()){for(const t of this.rows)t.notifyHdrXChange(g);this._notifyHdrChange("X",g)}},notifyHdrWidthChange:function(g){if(!this.isLocked()){for(const t of this.rows)t.notifyHdrWidthChange(g);
this._notifyHdrChange("Width",g)}},notifyHdrVisibilityChange:function(g){if((!this.__skipInvisibleHeaders||g.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(g);var t=this.setLastColumn;a:{var y=this.columnHeaders;let A=y.length;for(;A;){const E=y[--A];if(E.visible){y=E;break a}}y=void 0}t.call(this,y);t=g.visible?1:-1;this.setMaxWidth(this.maxWidth+g.maxValue*t);this.setMinWidth(this.minWidth+g.minValue*t);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
g)}},_notifyHdrChange:function(g,t){const y=this.hdrChangeListener;if(y)y["notifyHdr"+g+"Change"](t)},updateRowsForVisibilityChange:function(g){for(const t of this.rows)t.notifyHdrVisibilityChange(g)},hasRow:function(g){return this.rows.includes(g)},getRowIndex:function(g){return this.rows.indexOf(g)},getRowById:function(g,t=y=>y.model.id===g){return this.rows.find(t)},getPrevRow:function(g){g=this.getRowIndex(g)-1;return this.rows[0>g?this.rows.length-1:g]},getNextRow:function(g){g=this.getRowIndex(g)+
1;return this.rows[g<this.rows.length?g:0]},notifyAddRow:function(g,t){if(!this.hasRow(g)&&(this.rows.push(g),!this.locked)){const y=this.width;for(const A of this.columnHeaders)g.setWidth(y),g.notifyHdrXChange(A),g.notifyHdrWidthChange(A),g.notifyHdrVisibilityChange(A);t||this.doSort()}},notifyRemoveRow:function(g){g=this.getRowIndex(g);-1<g&&this.rows.splice(g,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const g=this.getVisibleHdrs();let t=0;for(const y of g)t=e(t,y.x+y.width);
h(g,this.gridWidth-t,!0,y=>{h(g,y,!1,null)})}},fixupResizerCursors:function(){const g=this.getVisibleHdrs();let t=!0,y=0;g.forEach((I,P)=>{t&&I.isFixed()?I.setResizerCursor("",!0):(t&&(y=P),t=!1,I.restoreResizerCursor())});let A=!0,E=g.length,D=E-1;for(;E>y;){const I=g[--E];A?I.setResizerCursor("",!0):I.restoreResizerCursor();I.isFixed()||(A&&(D=E),A=!1)}y===D&&g[y].setResizerCursor("",!0)}}),J=u.GridColHdr=new v("GridColHdr",{include:[u.BoundedValueComponent],initNode:function(g,t){const y=this,
A=t.resizerCursor??"col-resize";delete t.resizerCursor;t.minValue??(t.minValue=16);t.maxValue??(t.maxValue=1E3);t.value??(t.value=t.minValue);t.resizable??(t.resizable=!0);t.flex??(t.flex=0);t.cellXAdj??(t.cellXAdj=0);t.cellWidthAdj??(t.cellWidthAdj=0);t.sortable??(t.sortable=!0);t.sortState??(t.sortState="none");t.placement??(t.placement=k);y.callSuper(g,t);const E=y.gridController;y.resizer=new b(y,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[u.SizeToParent,u.Draggable,{requestDragPosition:function(D,I){I=D-this.x;if(E.fitToWidth&&(0<I?I=m(I,-p(y),y.maxValue-y.value+c(y)):0>I&&(I=e(I,-f(y),y.minValue-y.value+a(y))),0===I))return;D=y.value+I;y.resizable&&y.setValue(D);D-=y.value;I=D-I;let P=0;0>D?P=n(y,D):0<D&&(P=q(y,D));this.dragInitX+=P;I-=P;E.fitToWidth&&(0>I?r(y,I):0<I&&z(y,I))}}]);E&&(E.notifyAddHdr(y),E.notifyHdrXChange(y),E.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(g){this.setGridController();this.callSuper(g)},setSortable:function(g){this.set("sortable",g,!0)},setSortState:function(g){this.set("sortState",g,!0)},setResizable:function(g){this.set("resizable",g,!0)},setCellWidthAdj:function(g){this.cellWidthAdj=g},setCellXAdj:function(g){this.cellXAdj=g},setFlex:function(g){this.flex=g},setColumnId:function(g){this.columnId=g},setResizerCursor:function(g,t){const y=this.resizer,A=y.cursor;g!==A&&(t&&(this.__rrc=A),y.setCursor(g))},restoreResizerCursor:function(){const g=
this.__rrc;g&&(this.setResizerCursor(g),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(g){this.last=g;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(g){const t=this.gridController;t!==g&&(t?.notifyRemoveHdr(this),this.gridController=g,this.inited&&g&&(g.notifyAddHdr(this),g.notifyHdrXChange(this),g.notifyHdrWidthChange(this),g.notifyHdrVisibilityChange(this)))},setValue:function(g){this.callSuper(g);
this.inited&&this.setWidth(this.value)},setMinValue:function(g){const t=this.minValue??0,y=this.gridController;this.callSuper(g);this.inited&&t!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-t)},setMaxValue:function(g){const t=this.maxValue??0,y=this.gridController;g??=1E3;this.callSuper(g);this.inited&&t!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-t)},setWidth:function(g){const t=this.width;this.callSuper(g);this.inited&&t!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(g){const t=this.x;this.callSuper(g);this.inited&&t!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(g){const t=this.visible;this.callSuper(g);this.inited&&t!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=u.GridRow=new v("GridRow",{initNode:function(g,t){t.placement??(t.placement=k);this.callSuper(g,t);this.gridController?.notifyAddRow(this)},destroy:function(g){this.setGridController();this.callSuper(g)},setGridController:function(g){const t=
this.gridController;t!==g&&(t?.notifyRemoveRow(this),this.gridController=g,this.inited&&g?.notifyAddRow(this))},notifyHdrXChange:function(g){this.getRef(g.columnId)?.setX(g.x+g.cellXAdj)},notifyHdrWidthChange:function(g){this.getRef(g.columnId)?.setWidth(g.width+g.cellWidthAdj)},notifyHdrVisibilityChange:function(g){this.getRef(g.columnId)?.setVisible(g.visible)}}),N=u.Grid=new w("Grid",b,{include:[K],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(g,t){t.overflow??
(t.overflow="autox");t.bgColor??(t.bgColor="#ccc");t.rowSpacing??(t.rowSpacing=1);t.columnSpacing??(t.columnSpacing=1);var y=t.isAutoScrolling;delete t.isAutoScrolling;this.callSuper(g,t);g=this.header=new b(this,{overflow:"hidden"});g.xLayout=new l(g,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});g.yLayout=new u.SizeToChildren(g,{locked:!0,axis:"y"});t=this.sizeHeightToRows;y=this.content=new b(this,{overflow:t?"hidden":"autoy"},y?[u.AutoScroller]:[]);y.yLayout=new l(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:t});this.syncTo(this,"setGridWidth","width");this.syncTo(g,"_updateContentWidth","width");this.constrain("_updateContentHeight",[t?y:this,"height",g,"height",g,"y"])},setSizeHeightToRows:function(g){this.sizeHeightToRows=g},setRowSpacing:function(g){this.rowSpacing!==g&&(this.rowSpacing=g,this.inited&&this.content.yLayout.setSpacing(g))},setColumnSpacing:function(g){this.columnSpacing!==g&&(this.columnSpacing=g,this.inited&&this.header.xLayout.setSpacing(g))},
setLocked:function(g){if(this.inited)for(const t of[this.header.xLayout,this.header.yLayout,this.content.yLayout])g?t.incrementLockedCounter():(t.decrementLockedCounter(),t.update());this.callSuper(g)},_updateContentWidth:function(g){const t=this.content;g=g.value;t.setWidth(g);for(const y of t.getSubviews())y.setWidth(g)},_updateContentHeight:function(g){const {header:t,content:y}=this;g=t.y+t.height;y.setY(g);this.sizeHeightToRows?this.setHeight(g+y.height):y.setHeight(this.height-g)},determinePlacement:function(g,
t){if(g===k){let y;t.isA(M)?y=this.content:t.isA(J)&&(y=this.header);if(y)return t.gridController!==this&&t.setGridController(this),y}return this.callSuper(g,t)},doSort:function(){const [g,t]=this.sort??["",""],y=this.getSortFunction(g,t);if(y){const A=this.content,E=A.yLayout;this.rows.sort(y);A.sortSubviews(y);E.sortSubviews(y);E.update()}},getSortFunction:(g,t)=>{if(g){const y=t===N.SORT_ORDER_ASC?1:-1;return(A,E)=>{A=A.getRef(g).text;E=E.getRef(g).text;return A>E?y:E>A?-y:0}}}});u.SimpleGridColHdr=
new w("SimpleGridColHdr",u.SimpleTextButton,{include:[J],initNode:function(g,t){const y=this;t.activeColor??(t.activeColor="#999");t.hoverColor??(t.hoverColor="#bbb");t.readyColor??(t.readyColor="#aaa");t.inset??(t.inset=2);t.sortIconColor??(t.sortIconColor="#666");const A=t.outset??2;delete t.outset;y.callSuper(g,t);y.sortIcon=new u.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(E,D){this.callSuper(E,D);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
y.setOutset(this.width+A);G(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);G(y);C(y)},setSortIconColor:function(g){this.sortIconColor=g;this.sortIcon?.setTextColor(g)},setSortable:function(g){this.callSuper(g);this.inited&&(g&&this.setOutset(14),this.setDisabled(!g),C(this))},setSortState:function(g){this.callSuper(g);this.inited&&C(this)},setWidth:function(g){this.callSuper(g);this.inited&&G(this)},doActivated:function(){this.disabled||(this.setSortState(this.sortState===N.SORT_ORDER_ASC?
N.SORT_ORDER_DESC:N.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,v=Math,m=v.max,{View:e,global:{focus:b,keys:l},getAlphaObjSortFunc:k}=u,d=r=>{const z=r.selectedRow;z&&(z.setSelected(!1),r.set("selectedRow",null,!0))},h=u.InfiniteListRow=new w("InfiniteListRow",{include:[u.Reusable],setInfiniteOwner:function(r){this.infiniteOwner=r},setModel:function(r){this.model=r},setClassKey:function(r){this.classKey=r},notifyRefreshed:()=>{}}),c=u.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[h,u.Selectable]}),f=u.InfiniteList=
new x("InfiniteList",e,{initNode:function(r,z){let C=z.rowClasses;delete z.rowClasses;if("function"===typeof C){const G={};G["default"]=C;C=G}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(r,z);r=this._listView=new e(this);this._scrollAnchorView=new e(r,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(C,r);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(r,z)=>new u.TrackActivesMultiPool(r,z),setOverscrollBehavior:function(r){this.overscrollBehavior=r;this.getIDS().overscrollBehavior=r},setCollectionModel:function(r){this.collectionModel=
r},setModelIDName:function(r){this.modelIDName=r},setRowSpacing:function(r){this.rowSpacing=r;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(r){this.rowHeight=r;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(r){if(0<r&&(this.callSuper(r),this.inited)){r=this._listView;const z=this.width;r.setWidth(z);for(const C of r.getSubviews())C.setWidth(z)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(r){const z=this.getVisibleRows();let C=z.length;for(;C;){const G=z[--C];if(G.model===r)return G}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const r=this.modelIDName,z=this.ascendingSort;return this.numericSort?u.getNumericObjSortFunc(r,z):k(r,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(r,z){var C=this.getIndexOfModelInData(r);
let G=!1;if(0<=C){var K=this._rowExtent;const J=this.getIDE().scrollTop,M=J+this.height;C=this.rowInset+C*K;K=C+K;C<=J?(this.scrollYTo(C,!0),G=!0):K>=M&&(this.scrollYTo(K-this.height,!0),G=!0);z&&((z=this.getVisibleRowForModel(r))?z.focus():this._focusToModel=r)}return G},isModelInData:function(r){return 0<=this.getIndexOfModelInData(r)},getNextModel:function(r,z=!0,C=!0){const G=this.getListData(),K=G.length;r=this.getIndexOfModelInData(r);if(0<=r)return r+=1,r>=K?z?G[0]:G[K-1]:G[r];if(C&&0<K)return G[K-
1]},getPrevModel:function(r,z=!0,C=!0){const G=this.getListData(),K=G.length;r=this.getIndexOfModelInData(r);if(0<=r)return--r,0>r?z?G[K-1]:G[0]:G[r];if(C&&0<K)return G[0]},getIndexOfModelInData:function(r){if(r){const z=this.getListData();let C=z.length;for(;C;)if(this.areModelsEqual(z[--C],r))return C}return-1},areModelsEqual:function(r,z){const C=this.modelIDName;return r[C]===z[C]},getActiveRowForModel:function(r){if(r){const z=this._itemPool.getActives();let C=z.length;for(;C;){const G=z[--C];
if(this.areModelsEqual(G.model,r))return G}}},refreshListData:function(r,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(r,z)},resetListUI:function(r,z){const C=this.getListData().length,G=this._listView,K=this._scrollAnchorView;G.setHeight(C*this._rowExtent-(0<C?this.rowSpacing:0)+this.rowInset+this.rowOutset);K.setY(G.height-K.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;r||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(r){if(b.focusedView?.isDescendantOf(r)){const z=this.getFocusTrap();z?z.focus():b.clear()}r.setVisible(!1);this._itemPool.putInstance(r)},refreshListUI:function(r){r=this._rowExtent;const z=this.rowInset,C=this.forceFullResetOnNextRefresh;var G=this.getIDE().scrollTop;const K=this.getListData()??[];var J=m(0,v.floor((G-z)/r));G=v.min(K.length,v.ceil((G-z+this.height)/r));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==J||this._endIdx!==G||C){const N=this.width,g=this.rowHeight,t=this._visibleRowsByIdx,y=this._focusToModel;this._startIdx=J;this._endIdx=G;for(var M in t)if(M<J||M>=G)this.putRowBackInPool(t[M]),delete t[M];for(M=J;M<G;M++){J=t[M];const A=K[M],E=this.getClassKey(A);let D=!1;J&&J.classKey===E||(J&&this.putRowBackInPool(J),t[M]=J=this._itemPool.getInstance(E),J.setInfiniteOwner(this),J.setClassKey(E),J.setWidth(N),J.setHeight(g),J.setY(z+M*r),J.setVisible(!0),D=!0);!C&&J.model&&
this.areModelsEqual(J.model,A)?D&&this.updateRow(J):(J.setModel(A),this.updateRow(J));J.notifyRefreshed();J.bringToFront();y&&this.areModelsEqual(y,A)&&(J.focus(),this._focusToModel=null)}}},getClassKey:r=>"default",updateRow:r=>{}}),a=u.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",u.SimpleButton,{include:[c,u.ArrowKeyActivation],initNode:function(r,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=l.LIST_KEYS);this.callSuper(r,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(r){this.callSuper(r);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(r,z){r===l.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(r,z)},doKeyArrowLeftOrUp:function(r,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(r,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(r){switch(r){case l.CODE_ENTER:case l.CODE_SPACE:this.doActivated()}}}),p=u.SelectableInfiniteList=new x("SelectableInfiniteList",
f,{setSelectedRow:function(r){const z=this.selectedRow;r!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",r,!0),r&&(this.setSelectedRowModel(r.model),r.setSelected(!0)))},setSelectedRowModel:function(r){this.set("selectedRowModel",r,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(r,z,C){r&&(d(this),this.setSelectedRowModel(r),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(r,z=!0){this.selectRowForModel(this.getNextModel(r),z,!0)},selectPrevRowForModel:function(r,z=!0){this.selectRowForModel(this.getPrevModel(r),z,!1)},resetListUI:function(r,z){this.isModelInData(this.selectedRowModel)?d(this):this.setSelectedRow();this.callSuper(r,z)},putRowBackInPool:function(r){r.selected&&d(this);this.callSuper(r)},refreshListUI:function(r){r=b.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),r&&r!==z||z.focus(!0))}}),n=new w("InfiniteGridRowMixin",{notifyXChange:function(r){this.getRef(r.columnId)?.setX(r.x+r.cellXAdj)},notifyWidthChange:function(r){this.getRef(r.columnId)?.setWidth(r.width+r.cellWidthAdj)},notifyVisibilityChange:function(r){this.getRef(r.columnId)?.setVisible(r.visible)}}),q=new w("InfiniteGridMixin",{setGridHeader:function(r){(this.gridHeader=r)?.setGrid(this)},makeReady:function(r,z){const C=this.gridHeader;C?(this.forceFullResetOnNextRefresh=
z,C.setSort(r),C.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [r,z]=this.gridHeader.sort??["",""];return r?k(r,z===u.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(r){const z=this.gridHeader;if(z)for(const C of z.columnHeaders)r.notifyXChange(C),r.notifyWidthChange(C),r.notifyVisibilityChange(C)},notifyXChange:function(r){for(const z of this.getVisibleRows())z.notifyXChange(r)},notifyWidthChange:function(r){for(const z of this.getVisibleRows())z.notifyWidthChange(r)},
notifyVisibilityChange:function(r){for(const z of this.getVisibleRows())z.notifyVisibilityChange(r)}});u.InfiniteGridRow=new w("InfiniteGridRow",{include:[h,n]});u.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[c,n]});u.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",a,{include:[n]});u.InfiniteGrid=new x("InfiniteGrid",f,{include:[q]});u.SelectableInfiniteGrid=new x("InfiniteGrid",p,{include:[q]});u.InfiniteGridHeader=new x("InfiniteGridHeader",e,{include:[u.GridController],
initNode:function(r,z){z.columnSpacing??(z.columnSpacing=1);z.overflow="hidden";this.callSuper(r,z);new u.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(r){this.grid=r},setColumnSpacing:function(r){this.columnSpacing=r},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:m(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(r){this.callSuper(r);if(this.inited){r=this.height;for(const z of this.columnHeaders)z.setHeight(r)}},setWidth:function(r){this.callSuper(m(this.minWidth,
r));this.inited&&(r=this.width,this.setGridWidth(r),this.grid.setWidth(r))},subviewAdded:function(r){this.callSuper(r);r.isA(u.GridColHdr)&&(r.setGridController(this),r.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(r){this.isLocked()||(this.grid.notifyXChange(r),this._notifyHdrChange("X",r))},notifyHdrWidthChange:function(r){this.isLocked()||(this.grid.notifyWidthChange(r),this._notifyHdrChange("Width",r))},
updateRowsForVisibilityChange:function(r){this.grid.notifyVisibilityChange(r);this.isLocked()||this._notifyHdrChange("Visibility",r)}})})(myt);
(u=>{const x=JS.Class,w=u.PanelStackTransition=new x("PanelStackTransition",u.Node,{to:v=>Promise.resolve(v),from:v=>Promise.resolve(v)});u.PanelStack=new x("PanelStack",u.View,{include:[u.SelectionManager],initNode:function(v,m){m.overflow="hidden";m.itemSelectionId??(m.itemSelectionId="panelId");m.maxSelected??(m.maxSelected=1);this.callSuper(v,m);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(v){this.set("transition",v,!0)},__updateWidth:function(v){this.getActivePanel()?.setWidth(v.value)},
__updateHeight:function(v){this.getActivePanel()?.setHeight(v.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(v){return this.getSelectableItem(v)},selectPanel:function(v){this.selectById(v)},doSelected:function(v){v.setWidth(this.width);v.setHeight(this.height)},doStackTransition:function(v){this["doStackTransition"+(v.selected?"To":"From")](v)},doStackTransitionTo:function(v){const m=this;m.doBeforeTransitionTo(v);const e=m.transition;e?e.to(v).then(b=>{m.doAfterTransitionTo(b)}):
(v.makeHighestZIndex(),v.setVisible(!0),m.doAfterTransitionTo(v))},doBeforeTransitionTo:v=>{},doAfterTransitionTo:v=>{},doStackTransitionFrom:function(v){const m=this;m.doBeforeTransitionFrom(v);const e=m.transition;e?e.from(v).then(b=>{m.doAfterTransitionFrom(b)}):(v.setVisible(!1),m.doAfterTransitionFrom(v))},doBeforeTransitionFrom:v=>{},doAfterTransitionFrom:v=>{}});u.StackablePanel=new JS.Module("StackablePanel",{include:[u.Selectable],initNode:function(v,m){m.visible=m.selected=!1;m.bgColor??
(m.bgColor="#fff");m.panelId??(m.panelId=m.name);this.callSuper(v,m);this.selected&&this.doStackTransition()},setPanelStack:function(v){this.panelStack=v},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(v){this.panelId=v},setSelected:function(v){this.selected!==v&&(this.callSuper(v),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});u.PanelStackFadeTransition=new x("PanelStackFadeTransition",w,{initNode:function(v,
m){m.duration??(m.duration=1E3);this.callSuper(v,m)},setDuration:function(v){this.duration=v},to:function(v){return new Promise((m,e)=>{v.stopActiveAnimators("opacity");v.setVisible(!0);v.animate({attribute:"opacity",to:1,duration:this.duration}).next(b=>{v.makeHighestZIndex();m(v)})})},from:function(v){return new Promise((m,e)=>{v.stopActiveAnimators("opacity");v.animate({attribute:"opacity",to:0,duration:this.duration}).next(b=>{v.setVisible(!1);m(v)})})}});u.PanelStackSlideTransition=new x("PanelStackSlideTransition",
w,{initNode:function(v,m){m.duration??(m.duration=1E3);m.direction??(m.direction="right");this.callSuper(v,m)},setDuration:function(v){this.duration=v},setDirection:function(v){this.direction=v},to:function(v){const m=v.getPanelStack(),e=this.duration;let b,l;switch(this.direction){case "left":l="x";b=m.width;break;case "right":l="x";b=-m.width;break;case "up":l="y";b=m.height;break;case "down":l="y",b=-m.height}v.stopActiveAnimators(l);v.set(l,b);v.setVisible(!0);return new Promise((k,d)=>{d=h=>
{v.makeHighestZIndex();k(v)};0<e?v.animate({attribute:l,to:0,duration:e}).next(d):(v.set(l,0),v.makeHighestZIndex(),k(v))})},from:function(v){const m=v.getPanelStack(),e=this.duration;let b,l;switch(this.direction){case "left":l="x";b=-m.width;break;case "right":l="x";b=m.width;break;case "up":l="y";b=-m.height;break;case "down":l="y",b=m.height}v.stopActiveAnimators(l);return new Promise((k,d)=>{d=h=>{v.setVisible(!1);k(v)};0<e?v.animate({attribute:l,to:b,duration:e}).next(d):(v.set(l,b),v.setVisible(!1),
k(v))})}})})(myt);
(u=>{const x=JS.Module,{Draggable:w,global:{dragManager:v,mouse:m}}=u,e=(l,k,d)=>{for(const h of[k,d])l["__is"+h]=!1,l["__tmrId"+h]=null},b=u.DragGroupSupport=new x("DragGroupSupport",{initNode:function(l,k){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(l,k)},setDragGroups:function(l){const k=this.__dgs={};for(const d in l)k[d]=!0;this.__anyDG=k.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(l){const k=this.__drpgs=
{};for(const d in l)k[d]=!0;this.__anyDRPG=k.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(l){l&&(this.__dgs[l]=!0,"*"===l&&(this.__anyDG=!0))},removeDragGroup:function(l){l&&(delete this.__dgs[l],"*"===l&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(l){l&&(this.__drpgs[l]=!0,"*"===l&&(this.__anyDRPG=!0))},removeDropGroup:function(l){l&&(delete this.__drpgs[l],"*"===l&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
u.DropSource=new x("DropSource",{include:[w],initNode:function(l,k){k.distanceBeforeDrag??(k.distanceBeforeDrag=2);k.dropParent??(k.dropParent=l.getRoot());this.callSuper(l,k)},setDropClass:function(l){this.dropClass=u.resolveClassname(l)},setDropClassAttrs:function(l){this.dropClassAttrs=l},setDropParent:function(l){this.dropParent=l},startDrag:function(l){const k=this.dropable=this.makeDropable();if(k){const d=k.distanceBeforeDrag;k.distanceBeforeDrag=0;k.doMouseDown(l);k.__doMouseDown(l);k.distanceBeforeDrag=
d}},doMouseUp:function(l){this.callSuper(l);const k=this.dropable;k&&(k.__doMouseUp(l),k.doMouseUp(l),this.dropable=null)},makeDropable:function(){const l=this.dropClass,k=this.dropParent;if(l&&k){const d=u.DomElementProxy.getRelativePosition(this.getIDE(),k.getIDE());return new l(k,{...this.dropClassAttrs,x:d.x??0,y:d.y??0})}}});u.DropTarget=new x("DropTarget",{include:[b],initNode:function(l,k){this.callSuper(l,k);v.registerDropTarget(this)},destroy:function(){v.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(l){return!this.disabled&&this.isVisible()},notifyDragStart:l=>{},notifyDragStop:l=>{},notifyDragEnter:l=>{},notifyDragLeave:l=>{},notifyDrop:l=>{}});u.Dropable=new x("Dropable",{include:[w,b],setDropTarget:function(l){this.dropTarget=l},setDropped:function(l){this.dropped=l},setDropFailed:function(l){this.dropFailed=l},willPermitDrop:l=>!0,startDrag:function(l){this.setDropped(!1);this.setDropFailed(!1);v.startDrag(this);this.callSuper(l)},updateDrag:function(l){v.updateDrag(l,
this);this.callSuper(l)},stopDrag:function(l,k){v.stopDrag(l,this,k);this.callSuper(l,k);k?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(l){this.setDropTarget(l)},notifyDragLeaving:function(l){this.setDropTarget()},notifyDropped:function(l,k){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});u.AutoScroller=new x("AutoScroller",{include:[b],initNode:function(l,k){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;k.overflow??(k.overflow="auto");this.callSuper(l,k);v.registerAutoScroller(this)},destroy:function(){v.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(l){this.scrollBorder=Math.max(1,l)},setScrollFrequency:function(l){this.scrollFrequency=l},setScrollAmount:function(l){this.scrollAmount=l},setScrollAcceleration:function(l){this.scrollAcceleration=l},notifyAutoScrollerDragStart:function(l){l=this.getIDE();(l.scrollHeight>l.clientHeight||
l.scrollWidth>l.clientWidth)&&this.attachToDom(m,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(l){this.detachFromDom(m,"__hndlMove","mousemove",!0);e(this,"Up","Down");e(this,"Left","Right")},__hndlMove:function(l){const k=this;let {pageX:d,pageY:h}=l.value;if(k.containsPoint(d,h)){l=k.getPagePosition();const c=k.scrollBorder,f=(a,p)=>{k["__is"+a]&&(k.getIDE()["scroll"+("Up"===a||"Down"===a?"Top":"Left")]+=p*k["__amt"+a],k["__tmrId"+a]=setTimeout(()=>{f(a,p)},k.scrollFrequency))};
d-=l.x;h-=l.y;h<c?(k.__isUp=!0,k.__amtUp=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-h/c))),k.__tmrIdUp||f("Up",-1)):k.height-h<c?(k.__isDown=!0,k.__amtDown=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.height-h)/c))),k.__tmrIdDown||f("Down",1)):e(k,"Up","Down");d<c?(k.__isLeft=!0,k.__amtLeft=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-d/c))),k.__tmrIdLeft||f("Left",-1)):k.width-d<c?(k.__isRight=!0,k.__amtRight=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.width-
d)/c))),k.__tmrIdRight||f("Right",1)):e(k,"Left","Right")}else e(k,"Up","Down"),e(k,"Left","Right")}})})(myt);
(u=>{const {max:x,cos:w,sin:v,PI:m}=Math,e=u.Geometry.degreesToRadians,b=c=>{var f=e(c.startAngle),a=e(c.endAngle);if(f>a){var p=f;f=a;a=p}p=c.__path;var n=c.width/2,q=c.thickness;const r=c.radius,z=r+q;var C=a-f;const G=C+1E-4>=2*m;G&&(f=0,a=m);const K=[n+z*w(f),n+z*v(f)],J=[n+z*w(a),n+z*v(a)];a=[n+r*w(a),n+r*v(a)];f=[n+r*w(f),n+r*v(f)];n=["M"+K.join()];G?n.push("A"+[z,z,0,1,1,J].join(),"A"+[z,z,0,1,1,K].join(),"L"+a.join(),"A"+[r,r,0,1,0,f].join(),"A"+[r,r,0,1,0,a].join()):(C=C%(2*m)>m?1:0,q/=2,
n.push("A"+[z,z,0,C,1,J].join(),c.endCapRounding?"A"+[q,q,0,0,1,a].join():"L"+a.join(),"A"+[r,r,0,C,0,f].join(),c.startCapRounding?"A"+[q,q,0,0,1,K].join():""));n.push("z");p.setAttribute("d",n.join(" "));p.setAttribute("fill",c.color)},l=c=>{const f=2*(c.radius+c.thickness),a=c.__svg;c.setWidth(f);c.setHeight(f);a.setAttribute("viewBox","0 0 "+f+" "+f);a.setAttribute("width",f);a.setAttribute("height",f);b(c)},k=(c,f,a)=>{c[f]!==a&&(c[f]=a,c.inited&&(b(c),c.fireEvent(f,a)))},d=(c,f,a)=>{c[f]!==a&&
(c[f]=a=x(0,a),c.inited&&(l(c),c.fireEvent(f,a)))},h=(c,f)=>{c=document.createElementNS("http://www.w3.org/2000/svg",c);f?.appendChild(c);return c};u.Annulus=new JS.Class("Annulus",u.BackView,{initNode:function(c,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(c,f);l(this)},createOurDomElement:function(c){c=this.callSuper(c);var f=Array.isArray(c)?c[1]:c;f=this.__svg=h("svg",f);this.__path=h("path",f);f.style.pointerEvents=
"none";return c},setRadius:function(c){d(this,"radius",c)},setThickness:function(c){d(this,"thickness",c)},setStartAngle:function(c){k(this,"startAngle",c)},setEndAngle:function(c){k(this,"endAngle",c)},setStartCapRounding:function(c){k(this,"startCapRounding",c)},setEndCapRounding:function(c){k(this,"endCapRounding",c)},setColor:function(c){k(this,"color",c)},isColorAttr:function(c){return"color"===c||this.callSuper(c)}})})(myt);
(u=>{let x;const w=JS.Class,{mouse:v,windowResize:m,dragManager:e}=u.global,{min:b,max:l,round:k}=Math,d=a=>{if(a.tooltip){const p=a._lastPos;if(a.tooltip.parent.containsPoint(p.x,p.y))return!0}a.hideTip();return!1},h=u.BaseTooltip=new w("BaseTooltip",u.View,{include:[u.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(a,p){this.tipDelay=this.nextTipDelay=h.TIP_DELAY;this.tipHideDelay=h.TIP_HIDE_DELAY;p.visible??(p.visible=!1);this.callSuper(a,p)},setTooltip:function(a){this.inited&&
(this.tooltip=a)&&(this.attachToDom(v,"__hndl_mousemove","mousemove",!0),this.attachToDom(a.parent,"hideTip","mousedown",!0),this.attachToDom(a.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(a){const p=this;p._lastPos=u.MouseObservable.getMouseFromEvent(a);d(p)&&(p.__checkTID&&(clearTimeout(p.__checkTID),delete p.__checkTID),p.__checkTID=setTimeout(()=>{delete p.__checkTID;d(p)&&p.showTip()},p.nextTipDelay))},hideTip:function(a){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(a=this.tooltip?.parent)this.detachFromDom(a,"hideTip","mousedown",!0),this.detachFromDom(a,"hideTip","mouseup",!0),this.detachFromDom(v,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){e.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),c=u.Tooltip=new w("Tooltip",h,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(a,p){p.edgeSize??(p.edgeSize=c.EDGE_SIZE);p.edgeColor??(p.edgeColor=c.EDGE_COLOR);p.shadowSize??(p.shadowSize=c.SHADOW_SIZE);p.shadowColor??(p.shadowColor=c.SHADOW_COLOR);p.insetH??(p.insetH=c.HORIZONTAL_INSET);p.insetV??(p.insetV=c.VERTICAL_INSET);p.tipBgColor??(p.tipBgColor=c.TIP_BG_COLOR);p.tipTextColor??(p.tipTextColor=c.TIP_TEXT_COLOR);this.callSuper(a,p);this._tipText=new u.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(a){this.edgeSize=a},setEdgeColor:function(a){this.edgeColor=a},setShadowSize:function(a){this.shadowSize=a},setShadowColor:function(a){this.shadowColor=a},setInsetH:function(a){this.insetH=a},setInsetV:function(a){this.insetV=a},setTipBgColor:function(a){this.tipBgColor=a},setTipTextColor:function(a){this.tipTextColor=a},showTip:function(){const a=this.tooltip;var p=a.text;const n=a.parent;var q=this._tipText;const r=this.edgeSize,z=this.shadowSize;q.text!==
p&&q.setText(p);q.setWidth("auto");var C=b(q.measureNoWrapWidth(),a.maxTextWidth);p=C+2*q.x;const G=p+2*r;q.setWidth(C);q.sizeViewToDom();C=n.getPagePosition();q=q.height+2*q.y;const K=q+2*r,J=C.y-K+("below"===a.tipvalign?n.height+K:0);C=C.x;switch(a.tipalign){case "right":C-=G;case "farright":C+=n.width;break;case "farleft":C-=G}this.setX(k(b(l(C,0),m.getWidth()-G)));this.setY(k(b(l(J,0),m.getHeight()-K)));this.setWidth(p);this.setHeight(q);this.setBgColor(this.tipBgColor);this.setBorder([r,"solid",
this.edgeColor]);this.setBoxShadow([z,z,z,this.shadowColor]);this.callSuper()}}),f=u.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:c,MAX_TEXT_WIDTH:280},setTooltip:function(a){this.callSuper("");this.set("tooltip",a,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(a){this.set("tipAlign",a,!0)},setTipValign:function(a){this.set("tipValign",a,!0)},setMaxTextWidth:function(a){this.set("maxTextWidth",a,!0)},setTipClass:function(a){this.set("tipClass",a,!0)},doSmoothMouseOver:function(a){const p=
this.getTooltip();this.callSuper(a);if(a&&p){a=this.tipClass??f.TIP_CLASS;!x||x instanceof a||(x.destroy(),x=null);if(!x){let n=document.getElementById("tooltipDiv");n||(n=u.DomElementProxy.createElement("div",{position:"absolute"}),u.getElement().appendChild(n));x=new a(n,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:p,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||f.MAX_TEXT_WIDTH})}}})})(myt);
(u=>{const x=Math,{min:w,max:v}=x;u.Path=new JS.Class("Path",{initialize:function(m){this.setVectors(m??[])},setVectors:function(m){this._boundingBox=null;this.vectors=m},copyFrom:function(m){this.vectors=m.vectors.slice();this._boundingBox=null},drawInto:function(m){m.beginPath();const e=this.vectors;let b=e.length,l=0;for(m.moveTo(e[l++],e[l++]);b>l;)m.lineTo(e[l++],e[l++]);m.closePath()},translate:function(m,e){const b=this.vectors;let l=b.length;for(;l;)b[--l]+=e,b[--l]+=m;this._boundingBox=null},
scale:function(m){const e=this.vectors;let b=e.length;for(;b;)e[--b]*=m,e[--b]*=m;this._boundingBox=null},rotate:function(m){const e=x.cos(m);m=x.sin(m);const b=this.vectors,l=b.length;for(let k=0;l>k;){const d=b[k]*e-b[k+1]*m,h=b[k]*m+b[k+1]*e;b[k++]=d;b[k++]=h}this._boundingBox=null},rotateAroundOrigin:function(m,e,b){this.translate(-e,-b);this.rotate(m);this.translate(e,b)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const m=this.vectors;let e=m.length,b,l,k,d;if(2<=
e){k=d=m[--e];for(b=l=m[--e];e;){const h=m[--e],c=m[--e];k=w(h,k);d=v(h,d);b=w(c,b);l=v(c,l)}return this._boundingBox={x:b,y:k,width:l-b,height:d-k}}return this._boundingBox=null},getCenter:function(){const m=this.getBoundingBox();return m?{x:m.x+m.width/2,y:m.y+m.height/2}:null},isPointInPath:function(m,e){"object"===typeof m&&(e=m.y,m=m.x);return u.Geometry.isPointInPath(m,e,this.getBoundingBox(),this.vectors)}})})(myt);
(u=>{const x=console.warn,w=Math.PI,v=w/2,m=3*w/2,e=u.AccessorSupport,b={};for(const l of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))b[l]=function(...k){this.__ctx[l](...k)};for(const l of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])b[l]=
function(...k){return this.__ctx[l](...k)};for(const l of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))b[e.generateSetterName(l)]=function(k){this.__ctx[l]=k},b[e.generateGetterName(l)]=function(){return this.__ctx[l]};u.Canvas=new JS.Class("Canvas",u.BackView,{include:[b],initNode:function(l,k){this.quickSet(["willReadFrequently"],k);this.callSuper(l,k)},
createOurDomElement:function(l){l=this.callSuper(l);var k=Array.isArray(l)?l[1]:l;const d=this.__cvs=document.createElement("canvas");d.className="mytUnselectable";k.appendChild(d);d.style.position="absolute";k={};this.willReadFrequently&&(k.willReadFrequently=!0);this.__ctx=d.getContext("2d",k);return l},setWidth:function(l){0>l&&(l=0);this.__cvs.setAttribute("width",l);this.callSuper(l)},setHeight:function(l){0>l&&(l=0);this.__cvs.setAttribute("height",l);this.callSuper(l)},clear:function(){const l=
this.__ctx;l.save();l.setTransform(1,0,0,1,0,0);l.clearRect(0,0,this.width,this.height);l.restore()},dataURItoBlob:function(l,k){l=atob(l.split(",")[1]);const d=l.length,h=[];for(let c=0;c<d;)h.push(l.charCodeAt(c++));return new Blob([new Uint8Array(h)],{type:k})},getDataURL:function(l,k){return this.__cvs.toDataURL(l,k)},getImageFile:function(l,k,d){switch(l){case "png":case "PNG":l="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":l="jpeg";d??=.5;break;default:x("Unexpected image type",
l),l=l.toLowerCase()}const h="image/"+l;d=this.dataURItoBlob(this.getDataURL(h,d),h);k&&(d.name=k+"."+l);return d},circle:function(l,k,d){this.__ctx.arc(l,k,d,0,2*w)},drawRoundedRect:function(l,k,d,h,c,f){const a=this.lineTo.bind(this),p=this.arc.bind(this);f=h+f;c=d+c;this.beginPath();this.moveTo(d,h+l);a(d,f-l);p(d+l,f-l,l,w,v,!0);a(c-l,f);p(c-l,f-l,l,v,0,!0);a(c,h+l);p(c-l,h+l,l,0,m,!0);a(d+l,h);p(d+l,h+l,l,m,w,!0);this.closePath();0<k&&(l-=k,d+=k,c-=k,h+=k,f-=k,this.moveTo(d,h+l),p(d+l,h+l,l,
w,m),a(c-l,h),p(c-l,h+l,l,m,0),a(c,f-l),p(c-l,f-l,l,0,v),a(d+l,f),p(d+l,f-l,l,v,w),this.closePath());return this},drawRectOutline:function(l,k,d,h,c){c=d+c;h=k+h;const f=k+l,a=h-l,p=d+l;l=c-l;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(k,d);n(k,c);n(h,c);n(h,d);n(k,d);n(f,p);n(a,p);n(a,l);n(f,l);n(f,p);this.closePath();return this},drawPartiallyRoundedRect:function(l,k,d,h,c,f,a,p){p=f+p;a=c+a;const n=this.lineTo.bind(this),q=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(c,
f+l);n(c,p-d);0<d&&q(c,p,c+d,p);n(a-h,p);0<h&&q(a,p,a,p-h);n(a,f+k);0<k&&q(a,f,a-k,f);n(c+l,f);0<l&&q(c,f,c,f+l);this.closePath();return this},drawAnnulus:function(l,k,d,h,c,f,a,p=60){const n=u.Color;for(var q of a)"string"===typeof q.color&&(q.color=n.makeColorFromHexString(q.color));1>p&&(x("Invalid segements",p),p=60);p=w/p;q=0;for(var r=a.length-1;q<r;){var z=a[q++];const {angle:y,color:A}=z,{angle:E,color:D}=a[q];var C=Math.round((E-y)/p),G=A.getDiffFrom(D);z.colorDelta={red:G.red/C,green:G.green/
C,blue:G.blue/C}}d=new u.Path([l+d,k,l+h,k]);d.rotateAroundOrigin(c,l,k);h=d.vectors;let [K,J,M,N]=h,g=0,t=w/360;for(q=0;f>c;){C=K;G=J;r=M;z=N;c+=p;c>f&&(p+=f-c,t=0,c=f);d.rotateAroundOrigin(p+t,l,k);[K,J,M,N]=h;this.beginPath();this.moveTo(C,G);this.lineTo(r,z);this.lineTo(M,N);this.lineTo(K,J);this.closePath();const {color:y,colorDelta:A}=a[q];this.setFillStyle(n.rgbToHex(y.red+g*A.red,y.green+g*A.green,y.blue+g*A.blue,!0));this.fill();0<t&&(d.rotateAroundOrigin(-t,l,k),[K,J,M,N]=h);g++;c>=a[q+
1].angle&&(g=0,q++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
