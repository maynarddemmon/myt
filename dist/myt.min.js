BrowserDetect=(function(){var f,h=function(m){var k,l=m.length;while(l){k=m[--l];f=k.ver||k.id;if((k.str&&k.str.indexOf(k.sub)>=0)||k.prop){return k.id}}},j=function(l){var k=l.indexOf(f);if(k>=0){return parseFloat(l.substring(k+f.length+1))}},g=navigator.userAgent,c=navigator.platform,a="UNKNOWN",b={browser:h([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:g,sub:"Firefox",id:"Firefox"},{str:g,sub:"Chrome",id:"Chrome"},{str:g,sub:"MSIE",id:"Explorer",ver:"MSIE"}])||a,version:j(g)||j(navigator.appVersion)||a,os:h([{str:g,sub:"iPhone",id:"iPhone/iPod"},{str:c,sub:"Linux",id:"Linux"},{str:c,sub:"Mac",id:"Mac"},{str:c,sub:"Win",id:"Windows"}])||a},e,d;switch(b.browser){case"Chrome":case"Safari":e="WebKit";break;case"Explorer":e="MS";break;case"Firefox":e="Moz";break;case"Opera":e="O";break;default:e=a;break}d=e.toLowerCase();b.prefix={dom:e,lowercase:d,css:"-"+d+"-",js:d[0].toUpperCase()+d.substr(1)};return b})();if(typeof console!=="object"){console={log:function(a){},warn:function(a){},error:function(a){}}}if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(!global.mytNoHistoryShim){(function(b,c){var a=b.History=b.History||{};if(typeof a.Adapter!=="undefined"){throw new Error("History.js Adapter has already been loaded...")}a.Adapter={handlers:{},_uid:1,uid:function(d){return d._uid||(d._uid=a.Adapter._uid++)},bind:function(f,d,g){var e=a.Adapter.uid(f);a.Adapter.handlers[e]=a.Adapter.handlers[e]||{};a.Adapter.handlers[e][d]=a.Adapter.handlers[e][d]||[];a.Adapter.handlers[e][d].push(g);f["on"+d]=(function(j,h){return function(k){a.Adapter.trigger(j,h,k)}})(f,d)},trigger:function(g,d,h){h=h||{};var f=a.Adapter.uid(g),e,j;a.Adapter.handlers[f]=a.Adapter.handlers[f]||{};a.Adapter.handlers[f][d]=a.Adapter.handlers[f][d]||[];for(e=0,j=a.Adapter.handlers[f][d].length;e<j;++e){a.Adapter.handlers[f][d][e].apply(this,[h])}},extractEventData:function(e,f){var d=(f&&f[e])||c;return d},onDomLoad:function(e){var d=b.setTimeout(function(){e()},2000);b.onload=function(){clearTimeout(d);e()}}};if(typeof a.init!=="undefined"){a.init()}})(window);(function(d,g){var a=d.document,e=d.setTimeout||e,f=d.clearTimeout||f,b=d.setInterval||b,c=d.History=d.History||{};if(typeof c.initHtml4!=="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}c.initHtml4=function(){if(typeof c.initHtml4.initialized!=="undefined"){return false}else{c.initHtml4.initialized=true}c.enabled=true;c.savedHashes=[];c.isLastHash=function(h){var k=c.getHashByIndex(),j;j=h===k;return j};c.isHashEqual=function(h,j){h=encodeURIComponent(h).replace(/%25/g,"%");j=encodeURIComponent(j).replace(/%25/g,"%");return h===j};c.saveHash=function(h){if(c.isLastHash(h)){return false}c.savedHashes.push(h);return true};c.getHashByIndex=function(h){var j=null;if(typeof h==="undefined"){j=c.savedHashes[c.savedHashes.length-1]}else{if(h<0){j=c.savedHashes[c.savedHashes.length+h]}else{j=c.savedHashes[h]}}return j};c.discardedHashes={};c.discardedStates={};c.discardState=function(m,h,l){var j=c.getHashByState(m),k;k={discardedState:m,backState:l,forwardState:h};c.discardedStates[j]=k;return true};c.discardHash=function(j,h,l){var k={discardedHash:j,backState:l,forwardState:h};c.discardedHashes[j]=k;return true};c.discardedState=function(h){var k=c.getHashByState(h),j;j=c.discardedStates[k]||false;return j};c.discardedHash=function(j){var h=c.discardedHashes[j]||false;return h};c.recycleState=function(h){var j=c.getHashByState(h);if(c.discardedState(h)){delete c.discardedStates[j]}return true};if(c.emulated.hashChange){c.hashChangeInit=function(){c.checkerFunction=null;var h="",n,j,l,m,k=Boolean(c.getHash());if(c.isInternetExplorer()){n="historyjs-iframe";j=a.createElement("iframe");j.setAttribute("id",n);j.setAttribute("src","#");j.style.display="none";a.body.appendChild(j);j.contentWindow.document.open();j.contentWindow.document.close();l="";m=false;c.checkerFunction=function(){if(m){return false}m=true;var p=c.getHash(),o=c.getHash(j.contentWindow.document);if(p!==h){h=p;if(o!==p){l=o=p;j.contentWindow.document.open();j.contentWindow.document.close();j.contentWindow.document.location.hash=c.escapeHash(p)}c.Adapter.trigger(d,"hashchange")}else{if(o!==l){l=o;if(k&&o===""){c.back()}else{c.setHash(o,false)}}}m=false;return true}}else{c.checkerFunction=function(){var o=c.getHash()||"";if(o!==h){h=o;c.Adapter.trigger(d,"hashchange")}return true}}c.intervalList.push(b(c.checkerFunction,c.options.hashChangeInterval));return true};c.Adapter.onDomLoad(c.hashChangeInit)}if(c.emulated.pushState){c.onHashChange=function(m){var n=((m&&m.newURL)||c.getLocationHref()),l=c.getHashByUrl(n),k=null,h=null,o=null,j;if(c.isLastHash(l)){c.busy(false);return false}c.doubleCheckComplete();c.saveHash(l);if(l&&c.isTraditionalAnchor(l)){c.Adapter.trigger(d,"anchorchange");c.busy(false);return false}k=c.extractState(c.getFullUrl(l||c.getLocationHref()),true);if(c.isLastSavedState(k)){c.busy(false);return false}h=c.getHashByState(k);j=c.discardedState(k);if(j){if(c.getHashByIndex(-2)===c.getHashByState(j.forwardState)){c.back(false)}else{c.forward(false)}return false}c.pushState(k.data,k.title,encodeURI(k.url),false);return true};c.Adapter.bind(d,"hashchange",c.onHashChange);c.pushState=function(m,r,h,o){h=encodeURI(h).replace(/%25/g,"%");if(c.getHashByUrl(h)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(o!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:o});return false}c.busy(true);var l=c.createStateObject(m,r,h),j=c.getHashByState(l),k=c.getState(false),n=c.getHashByState(k),q=c.getHash(),p=c.expectedStateId==l.id;c.storeState(l);c.expectedStateId=l.id;c.recycleState(l);c.setTitle(l);if(j===n){c.busy(false);return false}c.saveState(l);if(!p){c.Adapter.trigger(d,"statechange")}if(!c.isHashEqual(j,q)&&!c.isHashEqual(j,c.getShortUrl(c.getLocationHref()))){c.setHash(j,false)}c.busy(false);return true};c.replaceState=function(m,q,h,o){h=encodeURI(h).replace(/%25/g,"%");if(c.getHashByUrl(h)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(o!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:o});return false}c.busy(true);var l=c.createStateObject(m,q,h),j=c.getHashByState(l),k=c.getState(false),n=c.getHashByState(k),p=c.getStateByIndex(-2);c.discardState(k,l,p);if(j===n){c.storeState(l);c.expectedStateId=l.id;c.recycleState(l);c.setTitle(l);c.saveState(l);c.Adapter.trigger(d,"statechange");c.busy(false)}else{c.pushState(l.data,l.title,l.url,false)}return true}}if(c.emulated.pushState){if(c.getHash()&&!c.emulated.hashChange){c.Adapter.onDomLoad(function(){c.Adapter.trigger(d,"hashchange")})}}};if(typeof c.init!=="undefined"){c.init()}})(window);(function(j,a){var d=j.console||a,l=j.document,o=j.navigator,n=false,c=j.setTimeout,m=j.clearTimeout,f=j.setInterval,q=j.clearInterval,p=j.JSON,k=j.alert,b=j.History=j.History||{},h=j.history;try{n=j.sessionStorage;n.setItem("TEST","1");n.removeItem("TEST")}catch(g){n=false}p.stringify=p.stringify||p.encode;p.parse=p.parse||p.decode;if(typeof b.init!=="undefined"){throw new Error("History.js Core has already been loaded...")}b.init=function(e){if(typeof b.Adapter==="undefined"){return false}if(typeof b.initCore!=="undefined"){b.initCore()}if(typeof b.initHtml4!=="undefined"){b.initHtml4()}return true};b.initCore=function(e){if(typeof b.initCore.initialized!=="undefined"){return false}else{b.initCore.initialized=true}b.options=b.options||{};b.options.hashChangeInterval=b.options.hashChangeInterval||100;b.options.safariPollInterval=b.options.safariPollInterval||500;b.options.doubleCheckInterval=b.options.doubleCheckInterval||500;b.options.disableSuid=b.options.disableSuid||false;b.options.storeInterval=b.options.storeInterval||1000;b.options.busyDelay=b.options.busyDelay||250;b.options.debug=b.options.debug||false;b.options.initialTitle=b.options.initialTitle||l.title;b.options.html4Mode=b.options.html4Mode||false;b.options.delayInit=b.options.delayInit||false;b.intervalList=[];b.clearAllIntervals=function(){var u,t=b.intervalList;if(typeof t!=="undefined"&&t!==null){for(u=0;u<t.length;u++){q(t[u])}b.intervalList=null}};b.debug=function(){if((b.options.debug||false)){b.log.apply(b,arguments)}};b.log=function(){var z=!(typeof d==="undefined"||typeof d.log==="undefined"||typeof d.log.apply==="undefined"),u=l.getElementById("log"),y,x,A,v,t;if(z){v=Array.prototype.slice.call(arguments);y=v.shift();if(typeof d.debug!=="undefined"){d.debug.apply(d,[y,v])}else{d.log.apply(d,[y,v])}}else{y=("\n"+arguments[0]+"\n")}for(x=1,A=arguments.length;x<A;++x){t=arguments[x];if(typeof t==="object"&&typeof p!=="undefined"){try{t=p.stringify(t)}catch(w){}}y+="\n"+t+"\n"}if(u){u.value+=y+"\n-----\n";u.scrollTop=u.scrollHeight-u.clientHeight}else{if(!z){k(y)}}return true};b.getInternetExplorerMajorVersion=function(){var t=b.getInternetExplorerMajorVersion.cached=(typeof b.getInternetExplorerMajorVersion.cached!=="undefined")?b.getInternetExplorerMajorVersion.cached:(function(){var u=3,x=l.createElement("div"),w=x.getElementsByTagName("i");while((x.innerHTML="<!--[if gt IE "+(++u)+"]><i></i><![endif]-->")&&w[0]){}return(u>4)?u:false})();return t};b.isInternetExplorer=function(){var t=b.isInternetExplorer.cached=(typeof b.isInternetExplorer.cached!=="undefined")?b.isInternetExplorer.cached:Boolean(b.getInternetExplorerMajorVersion());return t};if(b.options.html4Mode){b.emulated={pushState:true,hashChange:true}}else{b.emulated={pushState:!Boolean(j.history&&j.history.pushState&&j.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(o.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(o.userAgent))),hashChange:Boolean(!(("onhashchange" in j)||("onhashchange" in l))||(b.isInternetExplorer()&&b.getInternetExplorerMajorVersion()<8))}}b.enabled=!b.emulated.pushState;b.bugs={setHash:Boolean(!b.emulated.pushState&&o.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!b.emulated.pushState&&o.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(b.isInternetExplorer()&&b.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(b.isInternetExplorer()&&b.getInternetExplorerMajorVersion()<7)};b.isEmptyObject=function(u){for(var t in u){if(u.hasOwnProperty(t)){return false}}return true};b.cloneObject=function(v){var u,t;if(v){u=p.stringify(v);t=p.parse(u)}else{t={}}return t};b.getRootUrl=function(){var t=l.location.protocol+"//"+(l.location.hostname||l.location.host);if(l.location.port||false){t+=":"+l.location.port}t+="/";return t};b.getBaseHref=function(){var t=l.getElementsByTagName("base"),v=null,u="";if(t.length===1){v=t[0];u=v.href.replace(/[^\/]+$/,"")}u=u.replace(/\/+$/,"");if(u){u+="/"}return u};b.getBaseUrl=function(){var t=b.getBaseHref()||b.getBasePageUrl()||b.getRootUrl();return t};b.getPageUrl=function(){var t=b.getState(false,false),v=(t||{}).url||b.getLocationHref(),u;u=v.replace(/\/+$/,"").replace(/[^\/]+$/,function(y,x,w){return(/\./).test(y)?y:y+"/"});return u};b.getBasePageUrl=function(){var t=(b.getLocationHref()).replace(/[#\?].*/,"").replace(/[^\/]+$/,function(w,v,u){return(/[^\/]$/).test(w)?"":w}).replace(/\/+$/,"")+"/";return t};b.getFullUrl=function(u,w){var t=u,v=u.substring(0,1);w=(typeof w==="undefined")?true:w;if(/[a-z]+\:\/\//.test(u)){}else{if(v==="/"){t=b.getRootUrl()+u.replace(/^\/+/,"")}else{if(v==="#"){t=b.getPageUrl().replace(/#.*/,"")+u}else{if(v==="?"){t=b.getPageUrl().replace(/[\?#].*/,"")+u}else{if(w){t=b.getBaseUrl()+u.replace(/^(\.\/)+/,"")}else{t=b.getBasePageUrl()+u.replace(/^(\.\/)+/,"")}}}}}return t.replace(/\#$/,"")};b.getShortUrl=function(v){var u=v,w=b.getBaseUrl(),t=b.getRootUrl();if(b.emulated.pushState){u=u.replace(w,"")}u=u.replace(t,"/");if(b.isTraditionalAnchor(u)){u="./"+u}u=u.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return u};b.getLocationHref=function(t){t=t||l;if(t.URL===t.location.href){return t.location.href}if(t.location.href===decodeURIComponent(t.URL)){return t.URL}if(t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash){return t.location.href}if(t.URL.indexOf("#")==-1&&t.location.href.indexOf("#")!=-1){return t.location.href}return t.URL||t.location.href};b.store={};b.idToState=b.idToState||{};b.stateToId=b.stateToId||{};b.urlToId=b.urlToId||{};b.storedStates=b.storedStates||[];b.savedStates=b.savedStates||[];b.normalizeStore=function(){b.store.idToState=b.store.idToState||{};b.store.urlToId=b.store.urlToId||{};b.store.stateToId=b.store.stateToId||{}};b.getState=function(v,u){if(typeof v==="undefined"){v=true}if(typeof u==="undefined"){u=true}var t=b.getLastSavedState();if(!t&&u){t=b.createStateObject()}if(v){t=b.cloneObject(t);t.url=t.cleanUrl||t.url}return t};b.getIdByState=function(t){var v=b.extractId(t.url),u;if(!v){u=b.getStateString(t);if(typeof b.stateToId[u]!=="undefined"){v=b.stateToId[u]}else{if(typeof b.store.stateToId[u]!=="undefined"){v=b.store.stateToId[u]}else{while(true){v=(new Date()).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof b.idToState[v]==="undefined"&&typeof b.store.idToState[v]==="undefined"){break}}b.stateToId[u]=v;b.idToState[v]=t}}}return v};b.normalizeState=function(u){var v,t;if(!u||(typeof u!=="object")){u={}}if(typeof u.normalized!=="undefined"){return u}if(!u.data||(typeof u.data!=="object")){u.data={}}v={};v.normalized=true;v.title=u.title||"";v.url=b.getFullUrl(u.url?u.url:(b.getLocationHref()));v.hash=b.getShortUrl(v.url);v.data=b.cloneObject(u.data);v.id=b.getIdByState(v);v.cleanUrl=v.url.replace(/\??\&_suid.*/,"");v.url=v.cleanUrl;t=!b.isEmptyObject(v.data);if((v.title||t)&&b.options.disableSuid!==true){v.hash=b.getShortUrl(v.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(v.hash)){v.hash+="?"}v.hash+="&_suid="+v.id}v.hashedUrl=b.getFullUrl(v.hash);if((b.emulated.pushState||b.bugs.safariPoll)&&b.hasUrlDuplicate(v)){v.url=v.hashedUrl}return v};b.createStateObject=function(v,w,u){var t={data:v,title:w,url:u};t=b.normalizeState(t);return t};b.getStateById=function(u){u=String(u);var t=b.idToState[u]||b.store.idToState[u]||a;return t};b.getStateString=function(u){var t,v,w;t=b.normalizeState(u);v={data:t.data,title:u.title,url:u.url};w=p.stringify(v);return w};b.getStateId=function(u){var t,v;t=b.normalizeState(u);v=t.id;return v};b.getHashByState=function(u){var t,v;t=b.normalizeState(u);v=t.hash;return v};b.extractId=function(w){var x,v,t,u;if(w.indexOf("#")!=-1){u=w.split("#")[0]}else{u=w}v=/(.*)\&_suid=([0-9]+)$/.exec(u);t=v?(v[1]||w):w;x=v?String(v[2]||""):"";return x||false};b.isTraditionalAnchor=function(u){var t=!(/[\/\?\.]/.test(u));return t};b.extractState=function(w,v){var t=null,x,u;v=v||false;x=b.extractId(w);if(x){t=b.getStateById(x)}if(!t){u=b.getFullUrl(w);x=b.getIdByUrl(u)||false;if(x){t=b.getStateById(x)}if(!t&&v&&!b.isTraditionalAnchor(w)){t=b.createStateObject(null,null,u)}}return t};b.getIdByUrl=function(t){var u=b.urlToId[t]||b.store.urlToId[t]||a;return u};b.getLastSavedState=function(){return b.savedStates[b.savedStates.length-1]||a};b.getLastStoredState=function(){return b.storedStates[b.storedStates.length-1]||a};b.hasUrlDuplicate=function(v){var u=false,t;t=b.extractState(v.url);u=t&&t.id!==v.id;return u};b.storeState=function(t){b.urlToId[t.url]=t.id;b.storedStates.push(b.cloneObject(t));return t};b.isLastSavedState=function(w){var v=false,u,t,x;if(b.savedStates.length){u=w.id;t=b.getLastSavedState();x=t.id;v=(u===x)}return v};b.saveState=function(t){if(b.isLastSavedState(t)){return false}b.savedStates.push(b.cloneObject(t));return true};b.getStateByIndex=function(u){var t=null;if(typeof u==="undefined"){t=b.savedStates[b.savedStates.length-1]}else{if(u<0){t=b.savedStates[b.savedStates.length+u]}else{t=b.savedStates[u]}}return t};b.getCurrentIndex=function(){var t=null;if(b.savedStates.length<1){t=0}else{t=b.savedStates.length-1}return t};b.getHash=function(v){var t=b.getLocationHref(v),u;u=b.getHashByUrl(t);return u};b.unescapeHash=function(u){var t=b.normalizeHash(u);t=decodeURIComponent(t);return t};b.normalizeHash=function(u){var t=u.replace(/[^#]*#/,"").replace(/#.*/,"");return t};b.setHash=function(w,t){var u,v;if(t!==false&&b.busy()){b.pushQueue({scope:b,callback:b.setHash,args:arguments,queue:t});return false}b.busy(true);u=b.extractState(w,true);if(u&&!b.emulated.pushState){b.pushState(u.data,u.title,u.url,false)}else{if(b.getHash()!==w){if(b.bugs.setHash){v=b.getPageUrl();b.pushState(null,null,v+"#"+w,false)}else{l.location.hash=w}}}return b};b.escapeHash=function(u){var t=b.normalizeHash(u);t=j.encodeURIComponent(t);if(!b.bugs.hashEscape){t=t.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")}return t};b.getHashByUrl=function(t){var u=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");u=b.unescapeHash(u);return u};b.setTitle=function(v){var w=v.title,u;if(!w){u=b.getStateByIndex(0);if(u&&u.url===v.url){w=u.title||b.options.initialTitle}}try{l.getElementsByTagName("title")[0].innerHTML=w.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}l.title=w;return b};b.queues=[];b.busy=function(u){if(typeof u!=="undefined"){b.busy.flag=u}else{if(typeof b.busy.flag==="undefined"){b.busy.flag=false}}if(!b.busy.flag){m(b.busy.timeout);var t=function(){var w,v,x;if(b.busy.flag){return}for(w=b.queues.length-1;w>=0;--w){v=b.queues[w];if(v.length===0){continue}x=v.shift();b.fireQueueItem(x);b.busy.timeout=c(t,b.options.busyDelay)}};b.busy.timeout=c(t,b.options.busyDelay)}return b.busy.flag};b.busy.flag=false;b.fireQueueItem=function(t){return t.callback.apply(t.scope||b,t.args||[])};b.pushQueue=function(t){b.queues[t.queue||0]=b.queues[t.queue||0]||[];b.queues[t.queue||0].push(t);return b};b.queue=function(u,t){if(typeof u==="function"){u={callback:u}}if(typeof t!=="undefined"){u.queue=t}if(b.busy()){b.pushQueue(u)}else{b.fireQueueItem(u)}return b};b.clearQueue=function(){b.busy.flag=false;b.queues=[];return b};b.stateChanged=false;b.doubleChecker=false;b.doubleCheckComplete=function(){b.stateChanged=true;b.doubleCheckClear();return b};b.doubleCheckClear=function(){if(b.doubleChecker){m(b.doubleChecker);b.doubleChecker=false}return b};b.doubleCheck=function(t){b.stateChanged=false;b.doubleCheckClear();if(b.bugs.ieDoubleCheck){b.doubleChecker=c(function(){b.doubleCheckClear();if(!b.stateChanged){t()}return true},b.options.doubleCheckInterval)}return b};b.safariStatePoll=function(){var u=b.extractState(b.getLocationHref()),t;if(!b.isLastSavedState(u)){t=u}else{return}if(!t){t=b.createStateObject()}b.Adapter.trigger(j,"popstate");return b};b.back=function(t){if(t!==false&&b.busy()){b.pushQueue({scope:b,callback:b.back,args:arguments,queue:t});return false}b.busy(true);b.doubleCheck(function(){b.back(false)});h.go(-1);return true};b.forward=function(t){if(t!==false&&b.busy()){b.pushQueue({scope:b,callback:b.forward,args:arguments,queue:t});return false}b.busy(true);b.doubleCheck(function(){b.forward(false)});h.go(1);return true};b.go=function(u,t){var v;if(u>0){for(v=1;v<=u;++v){b.forward(t)}}else{if(u<0){for(v=-1;v>=u;--v){b.back(t)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}}return b};if(b.emulated.pushState){var s=function(){};b.pushState=b.pushState||s;b.replaceState=b.replaceState||s}else{b.onPopState=function(w,t){var y=false,x=false,v,u;b.doubleCheckComplete();v=b.getHash();if(v){u=b.extractState(v||b.getLocationHref(),true);if(u){b.replaceState(u.data,u.title,u.url,false)}else{b.Adapter.trigger(j,"anchorchange");b.busy(false)}b.expectedStateId=false;return false}y=b.Adapter.extractEventData("state",w,t)||false;if(y){x=b.getStateById(y)}else{if(b.expectedStateId){x=b.getStateById(b.expectedStateId)}else{x=b.extractState(b.getLocationHref())}}if(!x){x=b.createStateObject(null,null,b.getLocationHref())}b.expectedStateId=false;if(b.isLastSavedState(x)){b.busy(false);return false}b.storeState(x);b.saveState(x);b.setTitle(x);b.Adapter.trigger(j,"statechange");b.busy(false);return true};b.Adapter.bind(j,"popstate",b.onPopState);b.pushState=function(v,x,u,t){if(b.getHashByUrl(u)&&b.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(t!==false&&b.busy()){b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:t});return false}b.busy(true);var w=b.createStateObject(v,x,u);if(b.isLastSavedState(w)){b.busy(false)}else{b.storeState(w);b.expectedStateId=w.id;h.pushState(w.id,w.title,w.url);b.Adapter.trigger(j,"popstate")}return true};b.replaceState=function(v,x,u,t){if(b.getHashByUrl(u)&&b.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(t!==false&&b.busy()){b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:t});return false}b.busy(true);var w=b.createStateObject(v,x,u);if(b.isLastSavedState(w)){b.busy(false)}else{b.storeState(w);b.expectedStateId=w.id;h.replaceState(w.id,w.title,w.url);b.Adapter.trigger(j,"popstate")}return true}}if(n){try{b.store=p.parse(n.getItem("History.store"))||{}}catch(r){b.store={}}b.normalizeStore()}else{b.store={};b.normalizeStore()}b.Adapter.bind(j,"unload",b.clearAllIntervals);b.saveState(b.storeState(b.extractState(b.getLocationHref(),true)));if(n){b.onUnload=function(){var t,v,x;try{t=p.parse(n.getItem("History.store"))||{}}catch(u){t={}}t.idToState=t.idToState||{};t.urlToId=t.urlToId||{};t.stateToId=t.stateToId||{};for(v in b.idToState){if(!b.idToState.hasOwnProperty(v)){continue}t.idToState[v]=b.idToState[v]}for(v in b.urlToId){if(!b.urlToId.hasOwnProperty(v)){continue}t.urlToId[v]=b.urlToId[v]}for(v in b.stateToId){if(!b.stateToId.hasOwnProperty(v)){continue}t.stateToId[v]=b.stateToId[v]}b.store=t;b.normalizeStore();x=p.stringify(t);try{n.setItem("History.store",x)}catch(w){if(w.code===DOMException.QUOTA_EXCEEDED_ERR){if(n.length){n.removeItem("History.store");n.setItem("History.store",x)}else{}}else{throw w}}};b.intervalList.push(f(b.onUnload,b.options.storeInterval));b.Adapter.bind(j,"beforeunload",b.onUnload);b.Adapter.bind(j,"unload",b.onUnload)}if(!b.emulated.pushState){if(b.bugs.safariPoll){b.intervalList.push(f(b.safariStatePoll,b.options.safariPollInterval))}if(o.vendor==="Apple Computer, Inc."||(o.appCodeName||"")==="Mozilla"){b.Adapter.bind(j,"hashchange",function(){b.Adapter.trigger(j,"popstate")});if(b.getHash()){b.Adapter.onDomLoad(function(){b.Adapter.trigger(j,"hashchange")})}}}};if(!b.options||!b.options.delayInit){b.init()}})(window)}Object.keys=Object.keys||(function(){var b=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=a.length;return function(g){if(typeof g!=="object"&&typeof g!=="function"||g===null){throw new TypeError("Object.keys called on non-object")}var e=[],h;for(h in g){if(b.call(g,h)){e.push(h)}}if(d){for(var f=0;f<c;++f){if(b.call(g,a[f])){e.push(a[f])}}}return e}})();Array.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};Number.parseInt=Number.parseInt||parseInt;Number.parseFloat=Number.parseFloat||parseFloat;if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")};String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}}if(!String.prototype.endsWith){String.prototype.endsWith=function(c,b){var a=this.toString();if(b===undefined||b>a.length){b=a.length}b-=c.length;var d=a.indexOf(c,b);return d!==-1&&d===b}}if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.indexOf(b,a)===a}}Date.now=Date.now||function(){return new Date().getTime()};Date.prototype.format=Date.prototype.format||(function(){Date.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.longMonths=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.shortDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.longDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var a={d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.longDays[this.getDay()]},N:function(){return(this.getDay()==0?7:this.getDay())},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?"st":(this.getDate()%10==2&&this.getDate()!=12?"nd":(this.getDate()%10==3&&this.getDate()!=13?"rd":"th")))},w:function(){return this.getDay()},z:function(){var b=new Date(this.getFullYear(),0,1);return Math.ceil((this-b)/86400000)},W:function(){var b=new Date(this.valueOf());var c=(this.getDay()+6)%7;b.setDate(b.getDate()-c+3);var d=b.valueOf();b.setMonth(0,1);if(b.getDay()!==4){b.setMonth(0,1+((4-b.getDay())+7)%7)}return 1+Math.ceil((d-b)/604800000)},F:function(){return Date.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var c=this.getFullYear(),b=this.getMonth()+1;if(b===12){c=c++;b=0}return new Date(c,b,0).getDate()},L:function(){var b=this.getFullYear();return(b%400==0||(b%100!=0&&b%4==0))},o:function(){var b=new Date(this.valueOf());b.setDate(b.getDate()-((this.getDay()+6)%7)+3);return b.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor((((this.getUTCHours()+1)%24)+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)*1000/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var b=this.getMilliseconds();return(b<10?"00":(b<100?"0":""))+b},e:function(){return/\((.*)\)/.exec(new Date().toString())[1]},I:function(){var c=null;for(var b=0;b<12;++b){var f=new Date(this.getFullYear(),b,1);var e=f.getTimezoneOffset();if(c===null){c=e}else{if(e<c){c=e;break}else{if(e>c){break}}}}return(this.getTimezoneOffset()==c)|0},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+(Math.abs(this.getTimezoneOffset()/60))+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+(Math.abs(this.getTimezoneOffset()/60))+":00"},T:function(){return this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1")},Z:function(){return -this.getTimezoneOffset()*60},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1000}};return function(c){var b=this;return c.replace(/(\\?)(.)/g,function(e,d,f){return(d===""&&a[f])?a[f].call(b):f})}})();JS={extend:function(a,c,b){if(a&&c){for(var d in c){if(a[d]!==c[d]&&(b||!a.hasOwnProperty(d))){a[d]=c[d]}}}return a},makeClass:function(b){var a=function(){var d=this.initialize;return d?d.apply(this,arguments)||this:this};var c=function(){};c.prototype=(b||Object).prototype;a.prototype=new c();return a}};JS.Method=JS.makeClass();JS.extend(JS.Method.prototype,{initialize:function(c,b,a){this.module=c;this.name=b;this.callable=a;this._hasSuper=typeof a==="function"&&a.toString().indexOf("callSuper")!==-1},call:function(){return this.callable.call.apply(this.callable,arguments)},apply:function(b,a){return this.callable.apply(b,a)},compile:function(c){var e=this,b=e.callable,d=JS.Method.keywordCallSuper,a=e._hasSuper&&d?d:null;return a===null?b:function(){var l,g,k=this.callSuper,f=!k||k.__kwd__;if(f){l=k;g=this.hasOwnProperty("callSuper");var j=this.callSuper=a(e,c,this,arguments);if(j){j.__kwd__=true}}var h=b.apply(this,arguments);if(f){if(g){this.callSuper=l}else{delete this.callSuper}}return h}}});JS.Method.create=function(c,b,a){return(a&&a.__inc__&&a.__fns__)||typeof a!=="function"?a:new this(c,b,a)};JS.Method.compile=function(b,a){return b instanceof this?b.compile(a):b};JS.Module=JS.makeClass();JS.extend(JS.Module.prototype,{initialize:function(c,a,b){this.__inc__=[];this.__dep__=[];this.__fns__={};this.__tgt__=(b||{})._target;this.__anc__=null;this.__mct__={};this.__displayName=c;this.include(a,{_resolve:false})},define:function(c,a,b){this.__fns__[c]=JS.Method.create(this,c,a);if((b||{})._resolve!==false){this.resolve()}},include:function(c,l){if(c){l=l||{};var h=c.extend,a=c.include,f,j,k,g,e,d,b;if(c.__fns__&&c.__inc__){this.__inc__.push(c);c.__dep__.push(this);if(f=l._extended){if(typeof c.extended==="function"){c.extended(f)}}else{if(typeof c.includedBy==="function"){c.includedBy(this)}}}else{b={_resolve:false};if(this._ignore(h)){g=[].concat(h);for(e=0,d=g.length;e<d;){this.extend(g[e++])}}if(this._ignore(a)){g=[].concat(a);for(e=0,d=g.length;e<d;){this.include(g[e++],b)}}for(j in c){if(c.hasOwnProperty(j)){k=c[j];if((j==="extend"||j==="include")&&this._ignore(k)){continue}this.define(j,k,b)}}}if(l._resolve!==false){this.resolve()}}return this},_ignore:function(a){return typeof a!=="function"||(a.__fns__&&a.__inc__)},resolve:function(d){d=d||this;var g=d.__tgt__,f=this.__inc__,c=this.__fns__,b,h,a,e;if(d===this){this.__anc__=null;this.__mct__={};b=this.__dep__.length;while(b){this.__dep__[--b].resolve()}}if(g){for(b=0,h=f.length;b<h;){f[b++].resolve(d)}for(a in c){e=JS.Method.compile(c[a],d);if(g[a]!==e){g[a]=e}}}},ancestors:function(c){var b=!c,d=this.__inc__;c=c||[];if(b&&this.__anc__){return this.__anc__.slice()}for(var a=0,e=d.length;a<e;){d[a++].ancestors(c)}if(c.indexOf(this)<0){c.push(this)}if(b){this.__anc__=c.slice()}return c},lookup:function(b){var f=this.__mct__[b];if(f){return f.slice()}var e=this.ancestors(),g=e.length,a=[],d,c=0;for(;c<g;){d=e[c++].__fns__;if(d.hasOwnProperty(b)){a.push(d[b])}}this.__mct__[b]=a.slice();return a},includes:function(b){if(b===this){return true}var c=this.__inc__,d=c.length,a=0;for(;a<d;){if(c[a++].includes(b)){return true}}return false},instanceMethod:function(a){return this.lookup(a).pop()}});JS.Kernel=new JS.Module("Kernel",{__eigen__:function(){var a=this.__meta__;if(a){return a}a=this.__meta__=new JS.Module("",null,{_target:this});return a.include(this.klass,{_resolve:false})},equals:function(a){return this===a},extend:function(b,a){if(b){this.__eigen__().include(b,{_extended:this,_resolve:(a||{})._resolve})}return this},isA:function(a){return(typeof a==="function"&&this instanceof a)||this.__eigen__().includes(a)},method:function(b){var a=this.__mct__||(this.__mct__={}),d=a[b],e=this[b];if(typeof e!=="function"){return e}if(d&&e===d._value){return d._bound}var c=e.bind(this);a[b]={_value:e,_bound:c};return c}});JS.Class=JS.makeClass(JS.Module);JS.extend(JS.Class.prototype,{initialize:function(d,e,b,c){if(typeof e!=="function"){c=b;b=e;e=Object}JS.Module.prototype.initialize.call(this,d);var g=(c||{})._resolve,f={_resolve:false},a=JS.makeClass(e);JS.extend(a,this);a.prototype.constructor=a.prototype.klass=a;a.__eigen__().include(e.__meta__,{_resolve:g});a.__tgt__=a.prototype;var h=e===Object?{}:(e.__fns__?e:new JS.Module(e.prototype,f));a.include(JS.Kernel,f).include(h,f).include(b,f);if(g!==false){a.resolve()}if(typeof e.inheritedBy==="function"){e.inheritedBy(a)}return a}});(function(){var e=JS.Method,d=JS.Kernel,f=JS.Class,a=JS.Module,c=function(g,j){g.__inc__=[];g.__dep__=[];var k=g.prototype,h={},l;for(l in k){if(k.hasOwnProperty(l)){h[l]=e.create(g,l,k[l])}}g.__fns__=h;g.__tgt__=k;k.constructor=k.klass=g;JS.extend(g,f.prototype);g.include(j);g.constructor=g.klass=f};c(e,d);c(a,d);c(f,a);var b=d.instanceMethod("__eigen__");b.call(e).resolve();b.call(a).resolve();b.call(f).include(a.__meta__)})();JS.Method.keywordCallSuper=function(h,c,f,b){var a=c.lookup(h.name),e=a.length-1,g=Array.prototype.slice.call(b);if(e===0){return undefined}var d=function(){var j=arguments.length;while(j){g[--j]=arguments[j]}e--;if(e===0){delete f.callSuper}var k=a[e].apply(f,g);f.callSuper=d;e++;return k};return d};JS.Singleton=new JS.Class("Singleton",{initialize:function(b,c,a){return new (new JS.Class(b,c,a))}});myt={version:20170317.1547,IMAGE_ROOT:global.MYT_IMAGE_ROOT||"",__GUID_COUNTER:0,generateGuid:function(){return ++this.__GUID_COUNTER},addEventListener:function(){if(window.addEventListener){return function(c,b,d,a){c.addEventListener(b,d,a||false)}}else{return function(b,a,d){var c=a+d;b["e"+c]=d;b[c]=function(){b["e"+c](window.event)};b.attachEvent("on"+a,b[c])}}}(),removeEventListener:function(){if(window.addEventListener){return function(c,b,d,a){c.removeEventListener(b,d,a||false)}}else{return function(b,a,d){var c=a+d;b.detachEvent("on"+a,b[c]);b[c]=null;b["e"+c]=null}}}(),resolveName:function(d,c){if(!d||d.length===0){return undefined}var c=c||global,e=Array.isArray(d)?d:d.split("."),b=0,a=e.length;for(;b<a;++b){c=c[e[b]];if(c===undefined){console.warn("resolveName failed for:",d,"at part:",b,e[b]);return undefined}}return c},fillTextTemplate:function(){var e=Array.prototype.slice.call(arguments),c=e.shift();if(c==null){return""}var d,b=0,a=e.length;for(;a>b;++b){d=e[b];c=c.split("{"+b+"}").join(d==null?"":d)}return c},generateLink:function(f,e,b,d){var c="";if(b){for(var a in b){c+=" "+a+'="'+b[a]+'"'}}return this.fillTextTemplate('<a href="#" onclick=\'myt.__handleGeneratedLink(this, "{0}", &apos;{3}&apos;); return false;\'{2}>{1}</a>',e,f,c,JSON.stringify(d))},__handleGeneratedLink:function(b,g,d){var a;while(b){a=b.model;if(a){var c;try{if(d){c=JSON.parse(d)}}catch(f){myt.dumpStack(f)}a[g].call(a,c);break}b=b.parentNode}},loadScript:function(e,f,a){var d=this._loadedScripts||(this._loadedScripts={});if(d[e]){console.warn("script already loaded for src",e);return null}else{d[e]=true;var b=document.createElement("script");b.type="text/javascript";b.async=false;if(f){var c=false;b.onload=b.onreadystatechange=function(){if(!c&&(!this.readyState||this.readyState==="complete")){c=true;b.onload=b.onreadystatechange=null;f()}}}b.src=e+(a?"":(e.indexOf("?")!==-1?"&":"?")+"cacheBust="+Date.now());this.getElement("head").appendChild(b);return b}},wrapFunction:function(b,a){return function(){var d=this.callSuper;this.callSuper=b;var c=a.apply(this,arguments);if(d!==undefined){this.callSuper=d}else{delete this.callSuper}return c}},dumpStack:function(b,a){var c;if(typeof b==="string"){c=b;b=null}myt.global.error.notify(a||"error",null,c,b)},filterArray:function(b,e,a){var c=a?[]:null;if(Array.isArray(b)){var d=b.length,f,g=(e==null||typeof e!=="function")?function(j,h){return h===e}:e;while(d){f=b[--d];if(g(d,f)){b.splice(d,1);if(a){c.push(f)}else{return f}}}}return c},filterObject:function(b,h,j){var a=j?[]:null;if(b&&typeof b==="object"){var g=Object.keys(b),c=g.length,f,e,d=(h==null||typeof h!=="function")?function(m,l){return l===h}:h;while(c){f=g[--c];e=b[f];if(d(f,e)){delete b[f];if(j){a.push(e)}else{return e}}}}return a},getRandom:function(b){var a=Math.random();if(b){a=b(a);if(a>=1){a=0.9999999999}else{if(a<0){a=0}}}return a},getRandomArbitrary:function(c,a,d){if(c>a){var b=c;c=a;a=b}return this.getRandom(d)*(a-c)+c},getRandomInt:function(c,a,d){if(c>a){var b=c;c=a;a=b}return Math.floor(this.getRandom(d)*(a-c+1)+c)},areFloatsEqual:function(e,d,g){var c=Math.abs(e),f=Math.abs(d);g=g?Math.abs(g):0.000001;return Math.abs(e-d)<=(c>f?f:c)*g},areArraysEqual:function(d,c){if(d!==c){if(d==null||c==null){return false}var e=d.length;if(e!==c.length){return false}while(e){if(d[--e]!==c[e]){return false}}}return true},getElement:function(b,a){return document.getElementsByTagName(b||"body")[a>0?a:0]},clone:function(c,b){if(b){var a=function(){};a.prototype=c;return new a()}else{return JSON.parse(JSON.stringify(c))}},memoize:function(a){return function(){var c=JSON.stringify(arguments),b=a.__cache||(a.__cache={});return(c in b)?b[c]:b[c]=a.apply(this,arguments)}},extend:function(g,k){var d=g,m=d,j=arguments,e=j.length,b=0,l,a,h,f,c;if(d){if(e>2&&typeof j[e-1]==="function"){a=j[--e]}while(++b<e){d=j[b];if(d){h=-1;f=Object.keys(d);c=f?f.length:0;while(++h<c){l=f[h];if(a){a(l,m,d)}else{m[l]=d[l]}}}}}return m}};myt.Cookie={_pluses:/\+/g,defaults:{raw:false,json:false},_raw:function(a){return a},_decoded:function(a){return decodeURIComponent(a.replace(this._pluses," "))},_converted:function(a,c){if(a.indexOf('"')===0){a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c?JSON.parse(a):a}catch(b){}},read:function(h,k){k=myt.extend({},this.defaults,k);var g=k.raw?this._raw:this._decoded,c=k.json,j=document.cookie.split("; "),l=h?undefined:{},d,a,b,e,f=j.length;for(e=0;e<f;e++){d=j[e].split("=");a=g(d.shift());b=g(d.join("="));if(h&&h===a){l=this._converted(b,c);break}if(!h){l[a]=this._converted(b,c)}}return l},write:function(c,d,a){a=myt.extend({},this.defaults,a);if(typeof a.expires==="number"){var e=a.expires;var b=a.expires=new Date();b.setDate(b.getDate()+e)}d=a.json?JSON.stringify(d):String(d);return(document.cookie=[a.raw?c:encodeURIComponent(c),"=",a.raw?d:encodeURIComponent(d),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join(""))},remove:function(b,a){if(this.read(b,a)!==undefined){this.write(b,"",myt.extend({},a,{expires:-1}));return true}return false}};myt.LocalStorage=(function(){var a=function(c){return c=c||"myt"},b=function(g,e,f){if(e>0){var d=myt.LocalStorage,h="__timerId_"+f,c=d[h];if(c){clearTimeout(c)}d[h]=setTimeout(function(){g();delete d[h]},e)}else{g()}};return{hasDatum:function(d,c){if(d){var f=myt.LocalStorage.getItem(a(c));if(f){try{return JSON.parse(f)[d]!=null}catch(g){console.error(g);return false}}}return false},getDatum:function(d,c){if(d){var f=myt.LocalStorage.getItem(a(c));if(f){try{f=JSON.parse(f);if(typeof f==="object"){return f[d]}}catch(g){console.error(g)}}}},setDatum:function(e,f,c,d){c=a(c);b(function(){var g=myt.LocalStorage,h=g.getData(c);h[e]=f;g.setItem(c,JSON.stringify(h))},d,c+"___"+e)},removeDatum:function(e,c,d){c=a(c);b(function(){var f=myt.LocalStorage,g=f.getData(c);delete g[e];myt.LocalStorage.setItem(c,JSON.stringify(g))},d,c+"___"+e)},hasData:function(c){return myt.LocalStorage.getItem(a(c))!=null},getData:function(c){var d=myt.LocalStorage.getItem(a(c));if(d){try{return JSON.parse(d)}catch(f){console.error(f)}}return{}},setData:function(e,c,d){c=a(c);if(e==null){e={}}if(typeof e==="object"){b(function(){myt.LocalStorage.setItem(c,JSON.stringify(e))},d,c);return true}return false},removeData:function(c,d){c=a(c);b(function(){myt.LocalStorage.removeItem(c)},d,c)},getLength:function(){return global.localStorage.length},getKey:function(c){return global.localStorage.key(c)},getItem:function(c){return global.localStorage.getItem(c)},setItem:function(c,d){global.localStorage.setItem(c,d)},removeItem:function(c){global.localStorage.removeItem(c)},clear:function(){global.localStorage.clear()},get:function(c){return myt.LocalStorage.getItem(c)},set:function(c,d){myt.LocalStorage.setItem(c,d)},remove:function(c){myt.LocalStorage.removeItem(c)},clearAll:function(){myt.LocalStorage.clear()}}})();myt.Observable=new JS.Module("Observable",{attachObserver:function(b,a,c){if(b&&a&&c){this.getObservers(c).push(a,b);return true}return false},detachObserver:function(c,b,f){if(c&&b&&f){var e=this.__obsbt;if(e){var g=e[f];if(g){var a=false,d=g.length;while(d){--d;if(c===g[d--]&&b===g[d]){g.splice(d,2);a=true}}return a}}}return false},detachAllObservers:function(){var e=this.__obsbt;if(e){var f,b,a,c,d;for(d in e){f=e[d];c=f.length;while(c){b=f[--c];a=f[--c];if(b&&a){if(typeof b.detachFrom!=="function"||!b.detachFrom(this,a,d)){f.splice(c,2)}}}}}},getObservers:function(b){var a=this.__obsbt||(this.__obsbt={});return a[b]||(a[b]=[])},hasObservers:function(b){var a=this.__obsbt;if(!a){return false}var c=a[b];return c&&c.length>0},fireEvent:function(b,c){if(b&&b.source===this){var a=b.type;c=c||(this.hasObservers(a)?this.__obsbt[a]:null);if(c){this.__fireEvent(b,c)}}},fireNewEvent:function(a,b,c){c=c||(this.hasObservers(a)?this.__obsbt[a]:null);if(c){this.__fireEvent({source:this,type:a,value:b},c)}},createEvent:function(a,b){return{source:this,type:a,value:b}},__fireEvent:function(f,h){var g=this.__aet||(this.__aet={}),d=f.type;if(g[d]===true){myt.global.error.notifyError("eventLoop","Attempt to refire active event: "+d)}else{g[d]=true;var c=h.length,b,a;while(c){b=h[--c];a=h[--c];if(b&&a){try{if(typeof a==="function"){if(a.call(b,f)){break}}else{if(b[a](f)){break}}}catch(e){myt.dumpStack(e)}}}g[d]=false}}});myt.Observer=new JS.Module("Observer",{attachToAndCallbackIfAttrExists:function(e,a,c,b,d){this.attachToAndCallbackIfAttrNotEqual(e,a,c,undefined,b,d)},attachToAndCallbackIfAttrEqual:function(f,a,c,e,b,d){if(b===undefined){b=c}if(f.get(b)===e){this.syncTo(f,a,c,b,d)}else{this.attachTo(f,a,c,d)}},attachToAndCallbackIfAttrNotEqual:function(f,a,c,e,b,d){if(b===undefined){b=c}if(f.get(b)!==e){this.syncTo(f,a,c,b,d)}else{this.attachTo(f,a,c,d)}},syncTo:function(f,a,c,b,d){if(b===undefined){b=c}try{this[a](f.createEvent(c,f.get(b)))}catch(e){myt.dumpStack(e)}if(d){return}this.attachTo(f,a,c,d)},isAttachedTo:function(e,a,c){if(e&&a&&c){var d=this.__obt;if(d){var f=d[c];if(f){var b=f.length;while(b){--b;if(e===f[b--]&&a===f[b]){return true}}}}}return false},getObservables:function(a){var b=this.__obt||(this.__obt={});return b[a]||(b[a]=[])},hasObservables:function(a){var b=this.__obt;if(!b){return false}var c=b[a];return c&&c.length>0},attachTo:function(f,b,d,e){if(f&&b&&d){var g=this.getObservables(d);if(e){var a=this,c=b;if(this.__methodNameCounter===undefined){this.__methodNameCounter=0}b="__DO_ONCE_"+this.__methodNameCounter++;this[b]=function(h){a.detachFrom(f,b,d);delete a[b];return a[c](h)}}if(f.attachObserver(this,b,d)){g.push(b,f);return true}}return false},detachFrom:function(f,b,d){if(f&&b&&d){var e=this.__obt;if(e){var g=e[d];if(g){var a=false,c=g.length;while(c){--c;if(f===g[c--]&&b===g[c]){if(f.detachObserver(this,b,d)){g.splice(c,2);a=true}}}return a}}}return false},detachFromAllObservables:function(){var c=this.__obt;if(c){var d,b;for(var a in c){d=c[a];b=d.length;while(b){d[--b].detachObserver(this,d[--b],a)}d.length=0}}}});myt.Constrainable=new JS.Module("Constrainable",{include:[myt.Observer],applyConstraint:function(j,e){if(j&&e){var g=e.length;if(g%2!==0){console.log("Observables was not even.",this);return}var d=this.__cbmn||(this.__cbmn={});var b=d[j]||(d[j]=[]);if(b.length>0){console.log("Constraint already exists for "+j+" on "+this);return}var a,h,f=0;for(;g!==f;){a=e[f++];h=e[f++];if(a&&h){this.attachTo(a,j,h);b.push(a,h)}}try{this[j]()}catch(c){myt.dumpStack(c)}}},releaseConstraint:function(a){if(a){var f=this.__cbmn;if(f){var e=f[a];if(e){var b=e.length,c,d;while(b){c=e[--b];d=e[--b];this.detachFrom(d,a,c)}e.length=0}}}},releaseAllConstraints:function(){var b=this.__cbmn;if(b){for(var a in b){this.releaseConstraint(a)}}}});myt.global=new JS.Singleton("Global",{include:[myt.Observable],register:function(b,a){if(this.hasOwnProperty(b)){console.log("Warning: myt.global key in use: ",b);this.unregister(b)}this[b]=a;this.fireNewEvent("register"+b,a)},unregister:function(b){if(this.hasOwnProperty(b)){var a=this[b];delete this[b];this.fireNewEvent("unregister"+b,a)}else{console.log("Warning: myt.global key not in use: ",b)}}});new JS.Singleton("GlobalError",{include:[myt.Observable],initialize:function(){this.setStackTraceLimit(50);this.setConsoleLogging(true);myt.global.register("error",this)},setConsoleLogging:function(a){this.consoleLogging=a},setStackTraceLimit:function(a){Error.stackTraceLimit=this.stackTraceLimit=a},notifyError:function(a,c,b){this.notify("error",a,c,b)},notifyWarn:function(a,c,b){this.notify("warn",a,c,b)},notifyMsg:function(a,c,b){this.notify("log",a,c,b)},notifyDebug:function(a,c,b){this.notify("debug",a,c,b)},notify:function(c,a,e,d){if(!d){d=new Error(e||a)}var b=d.stack||d.stacktrace;this.fireNewEvent(a||"error",{msg:e,stacktrace:b});if(this.consoleLogging&&c){console[c](b)}}});myt.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createDomElement:function(d,c,b){var e=document.createElement(d),a;if(b){for(a in b){e[a]=b[a]}}if(c){for(a in c){e.style[a]=c[a]}}return e},getComputedStyle:function(b){var a=global;return a.getComputedStyle?a.getComputedStyle(b,""):b.currentStyle},isDomElementVisible:function(b){if(b.nodeName==="INPUT"&&b.type==="hidden"){return false}var a;while(b){if(b===document){return true}a=this.getComputedStyle(b);if(a.display==="none"||a.visibility==="hidden"){break}b=b.parentNode}return false},getZIndexRelativeToAncestor:function(g,d){if(g&&d){var f=this.getAncestorArray(g,d),c=f.length-1,e,b,a;while(c){e=this.getComputedStyle(f[--c]);b=e.zIndex;a=b==="auto";if(c!==0&&a&&parseInt(e.opacity,10)===1){continue}else{return a?0:parseInt(b,10)}}}return 0},getAncestorArray:function(c,a){var b=[];while(c){b.push(c);if(c===a){break}c=c.parentNode}return b},getHighestZIndex:function(f){var e=this.getComputedStyle(f),d=e.zIndex,a=d==="auto";if(a&&parseInt(e.opacity,10)===1){d=0;var c=f.childNodes,b=c.length,g;while(b){g=c[--b];if(g.nodeType===1){d=Math.max(d,this.getHighestZIndex(g))}}}else{d=a?0:parseInt(d,10)}return d},getPagePosition:function(d,b){if(!d){return null}var a=0,f=0,c,e=BrowserDetect.browser==="Firefox"?2:1;while(d&&d.nodeName!=="BODY"&&d!==b){a+=d.offsetLeft;f+=d.offsetTop;d=d.offsetParent;if(d&&d.nodeName!=="BODY"){c=this.getComputedStyle(d);a+=e*parseInt(c.borderLeftWidth,10)-d.scrollLeft;f+=e*parseInt(c.borderTopWidth,10)-d.scrollTop}}return{x:a,y:f}},getTruePagePosition:function(a){if(!a){return null}var b=$(a).offset();return{x:b.left,y:b.top}},simulateDomEvent:function(f,g,j){if(f){var a={pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true};if(j){for(var c in j){a[c]=j[c]}}var e,d={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};for(var b in d){if(d[b].test(g)){e=b;break}}if(!e){throw new SyntaxError("Only HTMLEvent and MouseEvent interfaces supported")}var h;if(document.createEvent){h=document.createEvent(e);if(e==="HTMLEvents"){h.initEvent(g,a.bubbles,a.cancelable)}else{h.initMouseEvent(g,a.bubbles,a.cancelable,document.defaultView,a.button,a.pointerX,a.pointerY,a.pointerX,a.pointerY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null)}f.dispatchEvent(h)}else{a.clientX=a.pointerX;a.clientY=a.pointerY;h=document.createEventObject();for(var k in a){h[k]=a[k]}f.fireEvent("on"+g,h)}}}},setDomElement:function(a){this.domElement=a;this.deStyle=a.style;a.model=this},removeDomElement:function(){var a=this.domElement;a.parentNode.removeChild(a)},disposeOfDomElement:function(){delete this.domElement.model;delete this.deStyle;delete this.domElement},setDomClass:function(a){this.domElement.className=this.domClass=a},addDomClass:function(a){var b=this.domElement.className;this.setDomClass((b?b+" ":"")+a)},removeDomClass:function(a){var c=this.domElement.className;if(c){var d=c.split(" "),b=d.length;while(b){if(d[--b]===a){d.splice(b,1)}}this.setDomClass(d.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(a){this.domElement.id=this.domId=a},setZIndex:function(a){this.deStyle.zIndex=a},setStyleProperty:function(b,a){this.deStyle[b]=a},getPagePosition:function(){return myt.DomElementProxy.getPagePosition(this.domElement)},getTruePagePosition:function(){return myt.DomElementProxy.getTruePagePosition(this.domElement)},simulateDomEvent:function(a,b){myt.DomElementProxy.simulateDomEvent(this.domElement,a,b)},getHighestZIndex:function(){return myt.DomElementProxy.getHighestZIndex(this.domElement)},getHighestChildZIndex:function(e){var d=myt.DomElementProxy,c=this.domElement.childNodes,b=c.length,f,a=0;while(b){f=c[--b];if(f.nodeType===1&&f!==e){a=Math.max(a,d.getHighestZIndex(f))}}return a},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.domElement)+1)}});myt.DomObservable=new JS.Module("DomObservable",{attachDomObserver:function(g,b,c,a){if(g&&b&&c){a=!!a;var e=this.createDomMethodRef(g,b,c);if(e){var d=this.__dobsbt||(this.__dobsbt={});var f=d[c];if(!f){d[c]=[g,b,e,a]}else{f.push(g,b,e,a)}myt.addEventListener(this.domElement,c,e,a);return true}}return false},createDomMethodRef:function(c,a,b){return null},createStandardDomMethodRef:function(g,b,e,d,c){if(d.EVENT_TYPES[e]){var a=this,f=d.EVENT;return function(j){if(!j){var j=window.event}f.source=a;f.type=j.type;f.value=j;var h=g[b](f);if(!h){j.cancelBubble=true;if(j.stopPropagation){j.stopPropagation()}if(c){j.preventDefault()}}f.source=undefined}}},detachDomObserver:function(f,e,d,h){if(f&&e&&d){h=!!h;var j=this.__dobsbt;if(j){var g=j[d];if(g){var a=false,c=this.domElement,b=g.length;while(b){b-=4;if(f===g[b]&&e===g[b+1]&&h===g[b+3]){if(c){myt.removeEventListener(c,d,g[b+2],h)}g.splice(b,4);a=true}}return a}}}return false},detachAllDomObservers:function(){var f=this.domElement;if(f){var d=this.__dobsbt;if(d){var g,e,a,b,c;for(c in d){g=d[c];b=g.length;while(b){a=g[--b];e=g[--b];b-=2;myt.removeEventListener(f,c,e,a)}g.length=0}}}}});myt.DomObserver=new JS.Module("DomObserver",{attachToDom:function(e,b,c,a){if(e&&b&&c){a=!!a;var d=this.__dobt||(this.__dobt={});var f=d[c]||(d[c]=[]);if(e.attachDomObserver(this,b,c,a)){f.push(a,b,e)}}},detachFromDom:function(g,c,e,b){if(g&&c&&e){b=!!b;var f=this.__dobt;if(f){var h=f[e];if(h){var a=false,d=h.length;while(d){d-=3;if(g===h[d+2]&&c===h[d+1]&&b===h[d]){if(g.detachDomObserver(this,c,e,b)){h.splice(d,3);a=true}}}return a}}}return false},detachFromAllDomSources:function(){var c=this.__dobt;if(c){var d,a,b;for(b in c){d=c[b];a=d.length;while(a){d[--a].detachDomObserver(this,d[--a],b,d[--a])}d.length=0}}}});myt.KeyObservable=new JS.Module("KeyObservable",{extend:{EVENT_TYPES:{keypress:true,keydown:true,keyup:true},EVENT:{source:null,type:null,value:null},getKeyCodeFromEvent:function(b){var a=b.value,c=a.keyCode;return c||a.charCode}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.KeyObservable)||this.callSuper(c,a,b)}});new JS.Singleton("GlobalFocus",{include:[myt.Observable],initialize:function(){this.lastTraversalWasForward=true;myt.global.register("focus",this)},setFocusedView:function(a){if(this.focusedView!==a){this.prevFocusedView=this.focusedView;this.focusedView=a;if(a){this.focusedDom=null}this.fireNewEvent("focused",a)}},notifyFocus:function(a){if(this.focusedView!==a){this.setFocusedView(a)}},notifyBlur:function(a){if(this.focusedView===a){this.setFocusedView(null)}},clear:function(){if(this.focusedView){this.focusedView.blur()}else{if(this.focusedDom){this.focusedDom.blur();this.focusedDom=null}}},next:function(b){var a=this._traverse(true,b);if(a){a.focus()}},prev:function(b){var a=this._traverse(false,b);if(a){a.focus()}},_traverse:function(k,f){this.lastTraversalWasForward=k;var g=document.activeElement,c=document.body,b=c,d=b,e,a,j=k?"getNextFocus":"getPrevFocus";if(g){d=b=g;e=b.model;if(!e){e=this.findModelForDomElement(b)}if(e){var l=e.getFocusTrap(f);if(l){c=l.domElement}}}while(d){if(d.model&&d.model[j]&&(a=d.model[j]())){d=a.domElement}else{if(k){if(d.firstChild){d=d.firstChild}else{if(d===c){return b.model}else{if(d.nextSibling){d=d.nextSibling}else{while(d){d=d.parentNode;if(d===c){break}else{if(d.nextSibling){d=d.nextSibling;break}}}}}}}else{if(d===c){d=this.__getDeepestDescendant(c)}else{if(d.previousSibling){d=this.__getDeepestDescendant(d.previousSibling)}else{d=d.parentNode}}}}if(d===b){return b.model}if(d.nodeType===1){e=d.model;if(e&&e instanceof myt.View){if(e.isFocusable()){return e}}else{var h=d.nodeName;if(h==="A"||h==="AREA"||h==="INPUT"||h==="TEXTAREA"||h==="SELECT"||h==="BUTTON"){if(!d.disabled&&!isNaN(d.tabIndex)&&myt.DomElementProxy.isDomElementVisible(d)){e=this.findModelForDomElement(d);if(e&&e.searchAncestorsOrSelf(function(m){return m.maskFocus===true})){}else{d.focus();this.focusedDom=d;return null}}}}}}return null},findModelForDomElement:function(b){var a;while(b){a=b.model;if(a&&a instanceof myt.View){return a}b=b.parentNode}return null},__getDeepestDescendant:function(a){while(a.lastChild){a=a.lastChild}return a}});new JS.Singleton("GlobalKeys",{include:[myt.DomElementProxy,myt.DomObservable,myt.DomObserver,myt.KeyObservable,myt.Observable,myt.Observer],initialize:function(){this.KEYCODE_TAB=9;this.KEYCODE_SHIFT=16;this.KEYCODE_CONTROL=17;this.KEYCODE_ALT=18;this.KEYCODE_Z=90;var a=BrowserDetect.browser==="Firefox";this.KEYCODE_COMMAND=a?224:91;this.KEYCODE_RIGHT_COMMAND=a?224:93;this.setDomElement(document);this.attachTo(myt.global.focus,"__handleFocused","focused");this.__keysDown={};this.__listenToDocument();myt.global.register("keys",this)},isKeyDown:function(a){return !!this.__keysDown[a]},isShiftKeyDown:function(){return this.isKeyDown(this.KEYCODE_SHIFT)},isControlKeyDown:function(){return this.isKeyDown(this.KEYCODE_CONTROL)},isAltKeyDown:function(){return this.isKeyDown(this.KEYCODE_ALT)},isCommandKeyDown:function(){return this.isKeyDown(this.KEYCODE_COMMAND)||this.isKeyDown(this.KEYCODE_RIGHT_COMMAND)},isAcceleratorKeyDown:function(){return BrowserDetect.os==="Mac"?this.isCommandKeyDown():this.isControlKeyDown()},__handleFocused:function(a){var c=a.value;if(c){this.__unlistenToDocument();this.attachToDom(c,"__handleKeyDown","keydown");this.attachToDom(c,"__handleKeyPress","keypress");this.attachToDom(c,"__handleKeyUp","keyup")}else{var b=myt.global.focus.prevFocusedView;if(b){this.detachFromDom(b,"__handleKeyDown","keydown");this.detachFromDom(b,"__handleKeyPress","keypress");this.detachFromDom(b,"__handleKeyUp","keyup")}this.__listenToDocument()}},__listenToDocument:function(){this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyPress","keypress");this.attachToDom(this,"__handleKeyUp","keyup")},__unlistenToDocument:function(){this.detachFromDom(this,"__handleKeyDown","keydown");this.detachFromDom(this,"__handleKeyPress","keypress");this.detachFromDom(this,"__handleKeyUp","keyup")},__handleKeyDown:function(c){var e=myt.KeyObservable.getKeyCodeFromEvent(c),b=c.value;if(this.__shouldPreventDefault(e,b.target)){b.preventDefault()}if(this.isCommandKeyDown()&&e!==this.KEYCODE_SHIFT&&e!==this.KEYCODE_CONTROL&&e!==this.KEYCODE_ALT){this.fireNewEvent("keydown",e);this.fireNewEvent("keyup",e)}else{this.__keysDown[e]=true;if(e===this.KEYCODE_TAB){var d=this.ignoreFocusTrap(),a=myt.global.focus;if(this.isShiftKeyDown()){a.prev(d)}else{a.next(d)}}this.fireNewEvent("keydown",e)}},ignoreFocusTrap:function(){return this.isAltKeyDown()},__handleKeyPress:function(a){var b=myt.KeyObservable.getKeyCodeFromEvent(a);this.fireNewEvent("keypress",b)},__handleKeyUp:function(b){var c=myt.KeyObservable.getKeyCodeFromEvent(b),a=b.value;if(this.__shouldPreventDefault(c,a.target)){a.preventDefault()}this.__keysDown[c]=false;this.fireNewEvent("keyup",c)},__shouldPreventDefault:function(b,a){switch(b){case 8:var c=a.nodeName;if(c==="TEXTAREA"||(c==="INPUT"&&(a.type==="text"||a.type==="password"))||(c==="DIV"&&a.contentEditable==="true"&&a.firstChild)){return false}return true;case 9:return true}return false}});myt.TouchObservable=new JS.Module("TouchObservable",{extend:{EVENT_TYPES:{touchstart:true,touchend:true,touchmove:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.TouchObservable,false)||this.callSuper(c,a,b)}});new JS.Singleton("GlobalTouch",{include:[myt.DomElementProxy,myt.DomObservable,myt.TouchObservable],initialize:function(){this.setDomElement(document);myt.global.register("touch",this)}});new JS.Singleton("GlobalHistory",{include:[myt.Observable],initialize:function(){myt.global.register("history",this)},updateState:function(b,c,a){if(this._notFirstTime){History.pushState(b,c,a)}else{History.replaceState(b,c,a);this._notFirstTime=true}},startMonitoringState:function(a){a.attachTo(this,"handleStateChange","statechange");var b=History.getState();a.handleStateChange({value:b});History.setTitle(b)},enableHistoryNavigation:function(b){var a=global.location;if(b){a.hash=""}else{a.hash="no-back-button";a.hash="Again-no-back-button"}global.onhashchange=b?null:function(){a.hash="no-back-button"}}});if(!global.mytNoHistoryShim){History.Adapter.bind(window,"statechange",function(a){myt.global.history.fireNewEvent("statechange",History.getState())});History.Adapter.bind(window,"anchorchange",function(a){myt.global.history.fireNewEvent("anchorchange",History.getState())})}myt.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:function(a){return this.SETTER_NAMES[a]||(this.SETTER_NAMES[a]=this.generateName(a,"set"))},generateGetterName:function(a){return this.GETTER_NAMES[a]||(this.GETTER_NAMES[a]=this.generateName(a,"get"))},generateName:function(a,b){return b+a.substring(0,1).toUpperCase()+a.substring(1)},createSetterFunction:function(c,b){var a=this.generateSetterName(b);if(c[a]){console.log("Overwriting setter",a)}c[a]=function(d){if(c[b]!==d){c[b]=d;if(c.inited){c.fireNewEvent(b,d)}}}},createGetterFunction:function(c,a){var b=this.generateGetterName(a);if(c[b]){console.log("Overwriting getter",b)}c[b]=function(){return c[a]}},GETTER_NAMES:{},SETTER_NAMES:{}},appendToEarlyAttrs:function(){Array.prototype.push.apply(this.earlyAttrs||(this.earlyAttrs=[]),arguments)},prependToEarlyAttrs:function(){Array.prototype.unshift.apply(this.earlyAttrs||(this.earlyAttrs=[]),arguments)},appendToLateAttrs:function(){Array.prototype.push.apply(this.lateAttrs||(this.lateAttrs=[]),arguments)},prependToLateAttrs:function(){Array.prototype.unshift.apply(this.lateAttrs||(this.lateAttrs=[]),arguments)},callSetters:function(d){var c=this.earlyAttrs,h=this.lateAttrs,f,g,e,b;if(c||h){var a={};for(f in d){a[f]=d[f]}d=a;if(c){e=0;b=c.length;while(b>e){f=c[e++];if(f in d){this.set(f,d[f]);delete d[f]}}}if(h){g=[];e=0;b=h.length;while(b>e){f=h[e++];if(f in d){g.push(f,d[f]);delete d[f]}}}}for(var f in d){this.set(f,d[f])}if(g){e=0;b=g.length;while(b>e){this.set(g[e++],g[e++])}}},get:function(a){var b=myt.AccessorSupport.generateGetterName(a);return this[b]?this[b]():this[a]},set:function(c,b,d){if(!d){var a=myt.AccessorSupport.generateSetterName(c);if(this[a]){return this[a](b)}}if(this[c]!==b){this[c]=b;if(this.inited!==false&&this.fireNewEvent){this.fireNewEvent(c,b)}}},has:function(a){return this.get(a)!=null},is:function(a){return this.get(a)===true},isNot:function(a){return this.get(a)!==true}});myt.Destructible=new JS.Module("Destructible",{destroy:function(){var b,a;var c=this.__meta__;if(c){b=Object.keys(c);a=b.length;while(a){delete c[b[--a]]}}b=Object.keys(this);a=b.length;while(a){delete this[b[--a]]}this.destroyed=true}});myt.Reusable=new JS.Module("Reusable",{clean:function(){}});myt.AbstractPool=new JS.Class("AbstractPool",{include:[myt.Destructible],initialize:function(){},destroy:function(){var a=this.__objPool;if(a){a.length=0}this.callSuper()},getInstance:function(){var a=this.__objPool;if(!a){a=this.__objPool=[]}return a.length?a.pop():this.createInstance.apply(this,arguments)},createInstance:function(){return null},putInstance:function(b){var a=this.__objPool;if(!a){a=this.__objPool=[]}a.push(this.cleanInstance(b))},cleanInstance:function(a){if(typeof a.clean==="function"){a.clean()}return a},destroyPooledInstances:function(){var c=this.__objPool;if(c){var a=c.length,b;while(a){b=c[--a];if(typeof b.destroy==="function"){b.destroy()}}}}});myt.SimplePool=new JS.Class("SimplePool",myt.AbstractPool,{initialize:function(b,a){this.callSuper();this.instanceClass=b||Object;this.instanceParent=a},createInstance:function(){var a=this.instanceParent,b=this.instanceClass;return a?new b(a,arguments[0]):new b()}});myt.TrackActivesPool=new JS.Class("TrackActivesPool",myt.SimplePool,{destroy:function(){var a=this.__actives;if(a){a.length=0}this.callSuper()},getInstance:function(){var a=this.callSuper();(this.__actives||(this.__actives=[])).push(a);return a},putInstance:function(c){var b=this.__actives;if(b){var a=b.length;while(a){if(b[--a]===c){b.splice(a,1);this.callSuper(c);return}}console.warn("Attempt to putInstance for a non-active instance.",c,this)}else{console.warn("Attempt to putInstance when no actives exist.",c,this)}},getActives:function(e){var d=this.__actives;if(d){if(e){var b=[],a=d.length,c=0,f;for(;a>c;){f=d[c++];if(e.call(this,f)){b.push(f)}}return b}return d.concat()}return[]},putActives:function(){var b=this.__actives;if(b){var a=b.length;while(a){this.putInstance(b[--a])}}}});myt.Node=new JS.Class("Node",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Constrainable],extend:{getMatchingAncestorOrSelf:function(b,a){if(b&&a){while(b){if(a(b)){return b}b=b.parent}}return null},getMatchingAncestor:function(b,a){return this.getMatchingAncestorOrSelf(b?b.parent:null,a)},doOnceLater:function(){var d=Array.prototype.slice.call(arguments),c=d.shift(),a=d.shift(),b=d.shift();if(c){var e=c[a];if(e){d.unshift(c);return setTimeout(e.bind.apply(e,d),b>=0?b:0)}}}},initialize:function(f,d,b){if(b){var e=0,a=b.length,c;for(;a>e;){c=b[e++];if(c){this.extend(c)}else{console.warn("Undefined mixin in initialization of: "+this.klass.__displayName)}}}this.inited=false;this.initNode(f,d||{})},initNode:function(b,a){this.callSetters(a);this.doBeforeAdoption();this.setParent(b);this.doAfterAdoption();this.inited=true},doBeforeAdoption:function(){},doAfterAdoption:function(){},destroy:function(){this.isBeingDestroyed=true;var b=this.subnodes;if(b){var a=b.length;while(a){b[--a].destroy()}}if(this.__animPool){this.stopActiveAnimators();this.__animPool.destroy()}this.destroyBeforeOrphaning();if(this.parent){this.setParent(null)}this.destroyAfterOrphaning();this.callSuper()},destroyBeforeOrphaning:function(){},destroyAfterOrphaning:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers()},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(d){if(d&&!this.ignorePlacement){var c=this.placement||d.defaultPlacement;if(c){d=d.determinePlacement(c,this)}}if(this.parent!==d){if(d&&d.destroyed){return}var b=this.parent;if(b){var a=b.getSubnodeIndex(this);if(a!==-1){if(this.name){b.__removeNameRef(this)}b.subnodes.splice(a,1);b.subnodeRemoved(this)}}this.parent=d;if(d){d.getSubnodes().push(this);if(this.name){d.__addNameRef(this)}d.subnodeAdded(this)}if(this.inited){this.fireNewEvent("parent",d)}}},setName:function(a){if(this.name!==a){var b=this.parent;if(b&&this.name){b.__removeNameRef(this)}this.name=a;if(b&&a){b.__addNameRef(this)}}},getSubnodes:function(){return this.subnodes||(this.subnodes=[])},determinePlacement:function(c,b){var a=c.indexOf("."),d,e;if(a!==-1){d=c.substring(a+1);c=c.substring(0,a)}if(c==="*"){c=this.defaultPlacement;if(c){a=c.indexOf(".");if(a!==-1){d=c.substring(a+1)+(d?"."+d:"");c=c.substring(0,a)}}}e=this[c];return e?(d?e.determinePlacement(d,b):e):this},__addNameRef:function(b){var a=b.name;if(this[a]===undefined){this[a]=b}else{console.log("Name in use:"+a)}},__removeNameRef:function(b){var a=b.name;if(this[a]===b){delete this[a]}else{console.log("Name not in use:"+a)}},getRoot:function(){return this.parent?this.parent.getRoot():this},isRoot:function(){return this.parent==null},isDescendantOf:function(a){if(a){if(a===this){return true}if(this.parent){if(this.domElement&&a.domElement){return a.domElement.contains(this.domElement)}return this.parent.isDescendantOf(a)}}return false},isAncestorOf:function(a){return a?a.isDescendantOf(this):false},getLeastCommonAncestor:function(a){while(a){if(this.isDescendantOf(a)){return a}a=a.parent}return null},searchAncestorsForClass:function(a){return a?this.searchAncestors(function(b){return b instanceof a}):null},searchAncestors:function(a){return myt.Node.getMatchingAncestor(this,a)},searchAncestorsOrSelf:function(a){return myt.Node.getMatchingAncestorOrSelf(this,a)},getAncestors:function(){var a=[],b=this;while(b){a.push(b);b=b.parent}return a},hasSubnode:function(a){return this.getSubnodeIndex(a)!==-1},getSubnodeIndex:function(a){return this.getSubnodes().indexOf(a)},addSubnode:function(a){a.setParent(this)},removeSubnode:function(a){if(a.parent!==this){return null}a.setParent(null);return a},subnodeAdded:function(a){},subnodeRemoved:function(a){},animateOnce:function(a,e,d,c,b){return this.animate(a,e,d,false,null,c,false,1,b)},animate:function(c,g,h,a,k,e,f,b,l){var j=this.__getAnimPool();var d=j.getInstance({ignorePlacement:true});if(typeof c==="object"){k=c.callback;delete c.callback;d.callSetters(c)}else{d.attribute=c;d.setTo(g);d.setFrom(h);if(e!=null){d.duration=e}if(a!=null){d.relative=a}if(b!=null){d.repeat=b}if(f!=null){d.setReverse(f)}if(l!=null){d.setEasingFunction(l)}}d.next(function(m){j.putInstance(d)});if(k){d.next(k)}d.setRunning(true);return d},getActiveAnimators:function(b){if(typeof b==="string"){var a=b;b=function(c){return c.attribute===a}}return this.__getAnimPool().getActives(b)},stopActiveAnimators:function(d){var e=this.getActiveAnimators(d),b=e.length,c;if(b>0){var a=this.__getAnimPool();while(b){c=e[--b];c.reset(false);a.putInstance(c)}}},__getAnimPool:function(){return this.__animPool||(this.__animPool=new myt.TrackActivesPool(myt.Animator,this))},doOnceOnIdle:function(a){this.attachTo(myt.global.idle,a,"idle",true)},doOnceLater:function(){var a=Array.prototype.slice.call(arguments);a.unshift(this);return myt.Node.doOnceLater.apply(this,arguments)}});myt.ThresholdCounter=new JS.Class("ThresholdCounter",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable],extend:{createThresholdCounter:function(k,b,c,d){var h=myt.AccessorSupport.generateName;c=c||h("counter",b);d=d||h("threshold",b);var g=h(c,"increment"),f=h(c,"decrement"),j=myt.AccessorSupport.generateSetterName(d),a=typeof k==="function"||k instanceof JS.Module;if((a?k.instanceMethod(g):k[g])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter increment function.",g,k);return false}if((a?k.instanceMethod(f):k[f])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter decrement function.",f,k);return false}if((a?k.instanceMethod(j):k[j])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter threshold setter function.",j,k);return false}var e={};e[g]=function(l){if(l==null){l=1}var n=this[c],m=n+l;if(0>m){console.warn("Attempt to decrement a counter below 0.",this,c,l);m=0}if(n!==m){this[c]=m;this.fireNewEvent(c,m);this.set(b,m>=this[d])}};e[f]=function(l){if(l==null){l=1}this[g](-l)};e[j]=function(l){if(this[d]===l){return}this[d]=l;this.fireNewEvent(d,l);this.set(b,this[c]>=l)};if(a){k.include(e)}else{k.extend(e)}return true},initializeThresholdCounter:function(d,a,b,e,g,c){var f=myt.AccessorSupport.generateName;g=g||f("counter",e);c=c||f("threshold",e);d[g]=a;d[c]=b;d.set(e,a>=b)},createFixedThresholdCounter:function(j,c,b,d){var h=myt.AccessorSupport.generateName;d=d||h("counter",b);var g=h(d,"increment"),f=h(d,"decrement"),a=typeof j==="function"||j instanceof JS.Module;if((a?j.instanceMethod(g):j[g])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter increment function.",g,j);return false}if((a?j.instanceMethod(f):j[f])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter decrement function.",f,j);return false}var e={};e[g]=function(){var k=this[d]+1;this[d]=k;this.fireNewEvent(d,k);if(k===c){this.set(b,true)}};e[f]=function(){var l=this[d];if(l===0){return}var k=l-1;this[d]=k;this.fireNewEvent(d,k);if(l===c){this.set(b,false)}};if(a){j.include(e)}else{j.extend(e)}return true},initializeFixedThresholdCounter:function(c,a,b,d,e){e=e||myt.AccessorSupport.generateName("counter",d);c[e]=a;c.set(d,a>=b)}},initialize:function(a,b){myt.ThresholdCounter.initializeThresholdCounter(this,a,b,"exceeded","counter","threshold")},destroy:function(){this.detachAllObservers();this.callSuper()}});myt.ThresholdCounter.createThresholdCounter(myt.ThresholdCounter,"exceeded","counter","threshold");myt.Layout=new JS.Class("Layout",myt.Node,{extend:{deferredLayouts:[],incrementGlobalLock:function(){var a=myt.Layout;if(a._lockCount===undefined){a._lockCount=0}a._lockCount++;if(a._lockCount===1){a.__setLocked(true)}},decrementGlobalLock:function(){var a=myt.Layout;if(a._lockCount===undefined){a._lockCount=0}if(a._lockCount!==0){a._lockCount--;if(a._lockCount===0){a.__setLocked(false)}}},deferLayoutUpdate:function(a){if(!a.__deferredLayout){myt.Layout.deferredLayouts.push(a);a.__deferredLayout=true}},__setLocked:function(b){var a=myt.Layout;if(a.locked===b){return}a.locked=b;if(!b){var e=a.deferredLayouts,c=e.length,d;while(c){d=e[--c];d.__deferredLayout=false;d.update()}e.length=0}}},initNode:function(c,b){this.subviews=[];this.locked=true;this.lockedCounter=1;var a=b.locked===true;delete b.locked;this.callSuper(c,b);if(!a){this.decrementLockedCounter()}this.update()},destroyAfterOrphaning:function(){this.callSuper();this.subviews.length=0},setParent:function(d){if(this.parent!==d){var e=!this.locked;if(e){this.locked=true}var b,c,a;if(this.parent){b=this.subviews;c=b.length;while(c){this.removeSubview(b[--c])}this.detachFrom(this.parent,"__handleParentSubviewAddedEvent","subviewAdded");this.detachFrom(this.parent,"__handleParentSubviewRemovedEvent","subviewRemoved")}this.callSuper(d);if(this.parent){b=this.parent.getSubviews();for(c=0,a=b.length;a>c;++c){this.addSubview(b[c])}this.attachTo(this.parent,"__handleParentSubviewAddedEvent","subviewAdded");this.attachTo(this.parent,"__handleParentSubviewRemovedEvent","subviewRemoved")}if(e){this.locked=false;if(this.inited&&this.parent){this.update()}}}},canUpdate:function(){if(myt.Layout.locked){myt.Layout.deferLayoutUpdate(this);return false}return !this.locked},update:function(){},hasSubview:function(a){return this.getSubviewIndex(a)!==-1},getSubviewIndex:function(a){return this.subviews.indexOf(a)},addSubview:function(a){if(this.ignore(a)){return}this.subviews.push(a);this.startMonitoringSubview(a);if(!this.locked){this.update()}},startMonitoringSubview:function(a){},startMonitoringAllSubviews:function(){var a=this.subviews,b=a.length;while(b){this.startMonitoringSubview(a[--b])}},removeSubview:function(b){if(this.ignore(b)){return -1}var a=this.getSubviewIndex(b);if(a!==-1){this.stopMonitoringSubview(b);this.subviews.splice(a,1);if(!this.locked){this.update()}}return a},stopMonitoringSubview:function(a){},stopMonitoringAllSubviews:function(){var a=this.subviews,b=a.length;while(b){this.stopMonitoringSubview(a[--b])}},ignore:function(a){return a.ignoreLayout},__handleParentSubviewAddedEvent:function(b){var a=b.value;if(a.parent===this.parent){this.addSubview(a)}},__handleParentSubviewRemovedEvent:function(b){var a=b.value;if(a.parent===this.parent){this.removeSubview(a)}},sortSubviews:function(a){this.subviews.sort(a)},moveSubviewBefore:function(a,b){this.__moveSubview(a,b,false)},moveSubviewAfter:function(a,b){this.__moveSubview(a,b,true)},__moveSubview:function(b,e,f){var c=this.getSubviewIndex(b);if(c>=0){var a=this.subviews,d=this.getSubviewIndex(e);a.splice(c,1);if(d>=0){if(c<d){--d}a.splice(d+f?1:0,0,b)}else{if(f){a.push(b)}else{a.unshift(b)}}}}});myt.ThresholdCounter.createFixedThresholdCounter(myt.Layout,1,"locked");myt.MouseObservable=new JS.Module("MouseObservable",{extend:{EVENT_TYPES:{mouseover:true,mouseout:true,mousedown:true,mouseup:true,click:true,dblclick:true,mousemove:true,contextmenu:true,wheel:true},EVENT:{source:null,type:null,value:null},getMouseFromEvent:function(b){var a=b.value;return{x:a.pageX,y:a.pageY}},getMouseFromEventRelativeToView:function(c,a){var b=a.getPagePosition(),d=this.getMouseFromEvent(c);d.x-=b.x;d.y-=b.y;return d}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.MouseObservable,true)||this.callSuper(c,a,b)}});myt.FocusObservable=new JS.Module("FocusObservable",{extend:{EVENT_TYPES:{focus:true,blur:true},EVENT:{source:null,type:null,value:null}},initNode:function(b,a){this.focusable=false;this.focusEmbellishment=true;this.callSuper(b,a)},destroyBeforeOrphaning:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(a){if(this.focused!==a){this.focused=a;if(this.inited){this.fireNewEvent("focused",a);var b=myt.global.focus;if(a){b.notifyFocus(this)}else{b.notifyBlur(this)}}}},setFocusable:function(a){if(this.focusable!==a){var b=this.focusable;this.focusable=a;if(a){this.domElement.tabIndex=0;this.attachToDom(this,"__doFocus","focus");this.attachToDom(this,"__doBlur","blur")}else{if(b){this.domElement.removeAttribute("tabIndex");this.detachFromDom(this,"__doFocus","focus");this.detachFromDom(this,"__doBlur","blur")}}if(this.inited){this.fireNewEvent("focusable",a)}}},setFocusEmbellishment:function(a){if(this.focusEmbellishment!==a){this.focusEmbellishment=a;if(this.focused){if(a){this.showFocusEmbellishment()}else{this.hideFocusEmbellishment()}}}},giveAwayFocus:function(){if(this.focused){myt.global.focus.next();if(this.focused){this.blur()}}},isFocusable:function(){return this.focusable&&!this.disabled&&this.isVisible()&&this.searchAncestorsOrSelf(function(a){return a.maskFocus===true})===null},focus:function(g){if(this.isFocusable()){var h=this.domElement;if(g){var f=myt.DomElementProxy.getAncestorArray(h),a=f.length,e=a,d,c=[],b;while(e){d=f[--e];c.unshift({scrollTop:d.scrollTop,scrollLeft:d.scrollLeft})}h.focus();e=a;while(e){d=f[--e];b=c[e];d.scrollTop=b.scrollTop;d.scrollLeft=b.scrollLeft}}else{h.focus()}}},blur:function(){this.domElement.blur()},__doFocus:function(a){if(!this.focused){this.setFocused(true);this.doFocus()}},__doBlur:function(a){if(this.focused){this.doBlur();this.setFocused(false)}},doFocus:function(){if(this.focusEmbellishment){this.showFocusEmbellishment()}else{this.hideFocusEmbellishment()}},doBlur:function(){if(this.focusEmbellishment){this.hideFocusEmbellishment()}},showFocusEmbellishment:function(){this.domElement.hideFocus=false;var a=this.deStyle;a.outlineWidth="thin";a.outlineColor="#88bbff";a.outlineStyle="solid";a.outlineOffset="0px"},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideDefaultFocusEmbellishment:function(){this.domElement.hideFocus=true;this.deStyle.outlineStyle="none"},createDomMethodRef:function(d,b,c){if(myt.FocusObservable.EVENT_TYPES[c]){var a=this;return function(f){if(!f){var f=window.event}if(a._ignoreFocus){f.cancelBubble=true;if(f.stopPropagation){f.stopPropagation()}f.preventDefault();return}var g=myt.FocusObservable.EVENT;g.source=a;g.type=f.type;g.value=f;var e=d[b](g);if(!e){f.cancelBubble=true;if(f.stopPropagation){f.stopPropagation()}}g.source=undefined}}return this.callSuper(d,b,c)}});myt.ScrollObservable=new JS.Module("ScrollObservable",{extend:{EVENT_TYPES:{scroll:true},EVENT:{source:null,type:null,value:null},getScrollFromEvent:function(b){var a=b.value,c=a.target||a.srcElement;return{x:c.scrollLeft,y:c.scrollTop}}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.ScrollObservable)||this.callSuper(c,a,b)}});myt.Geometry={getClosestPointOnALineToAPoint:function(e,d,g,f,n,k){var b=n-e,a=k-d,m=g-e,j=f-d,c=m*m+j*j,h=m*b+j*a,l=h/c;return{x:e+m*l,y:d+j*l}},getClosestPointOnASegmentToAPoint:function(e,d,g,f,n,k){var b=n-e,a=k-d,m=g-e,j=f-d,c=m*m+j*j,h=m*b+j*a,l=h/c;if(l<0){return{x:e,y:d}}else{if(l>1){return{x:g,y:f}}}return{x:e+m*l,y:d+j*l}},isPointInPath:function(k,h,d,l){if(typeof k==="object"){l=d;d=h;h=k.y;k=k.x}if(this.rectContainsPoint(k,h,d)){var e=l.length;if(e>=6){var f=false,b=l[0],j=l[1],a,g;while(e){g=l[--e];a=l[--e];if(((g>h)!==(j>h))&&(k<(b-a)*(h-g)/(j-g)+a)){f=!f}b=a;j=g}return f}}return false},rectContainsPoint:function(c,b,e,d,f,a){if(typeof c==="object"){a=f;f=d;d=e;e=b;b=c.y;c=c.x}if(typeof e==="object"){a=e.height;f=e.width;d=e.y;e=e.x}return c>=e&&b>=d&&c<=e+f&&b<=d+a},circleContainsPoint:function(b,a,e,d,c){return this.measureDistance(b,a,e,d,true)<=c*c},measureDistance:function(d,f,b,e,h){var c=b-d,a=e-f,g=c*c+a*a;return h?g:Math.sqrt(g)},degreesToRadians:function(a){return a*Math.PI/180},radiansToDegrees:function(a){return a*180/Math.PI},circleContainsLatLng:function(e,c,b,f,d,a){return this.measureLatLngDistance(e,c,b,f,a)<=d},measureLatLngDistance:function(e,d,c,b,a){if(a===undefined){a=6371}e=this.degreesToRadians(e);d=this.degreesToRadians(d);c=this.degreesToRadians(c);b=this.degreesToRadians(b);return a*Math.acos(Math.sin(e)*Math.sin(c)+Math.cos(e)*Math.cos(c)*Math.cos(b-d))},polarToCartesian:function(c,e,b,g){if(b==null){b=0}if(g==null){g=0}e=e%360;var a,f;if(e===0){a=c;f=0}else{if(e===90){a=0;f=c}else{if(e===180){a=-c;f=0}else{if(e===270){a=0;f=-c}else{var d=this.degreesToRadians(e);a=c*Math.cos(d);f=c*Math.sin(d)}}}}return[b+a,g+f]},cartesianToPolar:function(j,f,c,a,e){if(c==null){c=0}if(a==null){a=0}var h=j-c,g=f-a,d=Math.sqrt(h*h+g*g),b=Math.atan2(g,h);if(b<0){b+=2*Math.PI}return[d,e?b:this.radiansToDegrees(b)]}};myt.View=new JS.Class("View",myt.Node,{include:[myt.DomElementProxy,myt.DomObservable,myt.DomObserver,myt.ScrollObservable,myt.FocusObservable,myt.KeyObservable,myt.MouseObservable],extend:{retainFocusDuringDomUpdate:function(d,b){var f=myt.global.focus.focusedView,e=d.domElement,a,c;if(f===d||(f&&f.isDescendantOf(d))){f._ignoreFocus=true}a=e.scrollTop;c=e.scrollLeft;b.call();if(f){f._ignoreFocus=false;f.focus(true)}e.scrollTop=a;e.scrollLeft=c}},initNode:function(b,a){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=true;this.setDomElement(this.createOurDomElement(b));this.deStyle.left=this.deStyle.top="0px";this.callSuper(b,a);if(this.bgColor===undefined){this.bgColor="transparent"}},createOurDomElement:function(b){var c=document.createElement("div");c.style.position="absolute";var a=this.klass;c.className=a.__cssClassName||(a.__cssClassName="myt-"+a.__displayName.split(".").join("-"));return c},doAfterAdoption:function(){this.__updateBounds(this.width,this.height)},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(a){if(this.parent!==a){if(this.inited){this.__teardownAlignConstraint();this.__teardownValignConstraint()}this.callSuper(a);this.__setupAlignConstraint();this.__setupValignConstraint()}},getSubviews:function(){return this.subviews||(this.subviews=[])},getSiblingViews:function(){if(!this.parent){return null}var a=this.parent.getSubviews().concat();myt.filterArray(a,this);return a},setFocusTrap:function(a){this.focusTrap=a},setFocusCage:function(a){this.focusCage=a},setMaskFocus:function(a){this.maskFocus=a},setLayoutHint:function(a){this.layoutHint=a},getLayouts:function(){return this.layouts||(this.layouts=[])},setIgnoreLayout:function(a){if(this.ignoreLayout!==a){var c=this.inited&&this.parent,d,b;if(a){if(c){d=this.parent.getLayouts();b=d.length;while(b){d[--b].removeSubview(this)}}this.ignoreLayout=a}else{this.ignoreLayout=a;if(c){d=this.parent.getLayouts();b=d.length;while(b){d[--b].addSubview(this)}}}}},setDomClass:function(a){if(this.domClass!==a){this.callSuper(a);if(this.inited){this.fireNewEvent("domClass",a)}}},setDomId:function(a){if(this.domId!==a){this.callSuper(a);if(this.inited){this.fireNewEvent("domId",a)}}},setAlignOffset:function(a){if(this.alignOffset!==a){this.alignOffset=a;if(this.inited){this.fireNewEvent("alignOffset",a)}if(this.parent&&this.align==="left"){this.setX(a)}}},setAlign:function(a){if(this.align!==a){if(this.inited){this.__teardownAlignConstraint()}this.align=a;if(this.inited){this.fireNewEvent("align",a);this.__setupAlignConstraint()}}},__teardownAlignConstraint:function(){switch(this.align){case"center":this.releaseConstraint("__doAlignCenter");break;case"right":this.releaseConstraint("__doAlignRight");break;case"left":default:}},__setupAlignConstraint:function(){var a=this.parent;if(a){switch(this.align){case"center":this.applyConstraint("__doAlignCenter",[this,"width",this,"alignOffset",a,"width"]);break;case"right":this.applyConstraint("__doAlignRight",[this,"width",this,"alignOffset",a,"width"]);break;case"left":this.setX(this.alignOffset||0);break;default:}}},__doAlignCenter:function(a){this.setX(Math.round((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(a){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(a){if(this.valignOffset!==a){this.valignOffset=a;if(this.inited){this.fireNewEvent("valignOffset",a)}if(this.parent&&this.valign==="top"){this.setY(a)}}},setValign:function(a){if(this.valign!==a){if(this.inited){this.__teardownValignConstraint()}this.valign=a;if(this.inited){this.fireNewEvent("valign",a);this.__setupValignConstraint()}}},__teardownValignConstraint:function(){switch(this.valign){case"middle":this.releaseConstraint("__doValignMiddle");break;case"bottom":this.releaseConstraint("__doValignBottom");break;case"top":default:}},__setupValignConstraint:function(){var a=this.parent;if(a){switch(this.valign){case"middle":this.applyConstraint("__doValignMiddle",[this,"height",this,"valignOffset",a,"height"]);break;case"bottom":this.applyConstraint("__doValignBottom",[this,"height",this,"valignOffset",a,"height"]);break;case"top":this.setY(this.valignOffset||0);break;default:}}},__doValignMiddle:function(a){this.setY(Math.round((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(a){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(a){if(this.x!==a){this.x=a;if(this.visible){this.deStyle.left=a+"px"}if(this.inited){this.fireNewEvent("x",a)}}},setY:function(a){if(this.y!==a){this.y=a;if(this.visible){this.deStyle.top=a+"px"}if(this.inited){this.fireNewEvent("y",a)}}},setWidth:function(a,b){if(0>a){a=0}if(this.width!==a){this.width=a;this.deStyle.width=a+"px";if(this.inited){this.__updateBounds(a,this.height);if(!b){this.fireNewEvent("width",a)}}}},setHeight:function(a,b){if(0>a){a=0}if(this.height!==a){this.height=a;this.deStyle.height=a+"px";if(this.inited){this.__updateBounds(this.width,a);if(!b){this.fireNewEvent("height",a)}}}},setTextColor:function(a){if(this.textColor!==a){this.textColor=a;this.deStyle.color=a||"inherit";if(this.inited){this.fireNewEvent("textColor",a)}}},setBgColor:function(a){if(this.bgColor!==a){this.deStyle.backgroundColor=this.bgColor=a;if(this.inited){this.fireNewEvent("bgColor",a)}}},setOpacity:function(a){if(this.opacity!==a){this.deStyle.opacity=this.opacity=a;if(this.inited){this.fireNewEvent("opacity",a)}}},setOverflow:function(a){var c=this.overflow;if(c!==a){this.overflow=a;var b=this.deStyle;if(a==="autox"){b.overflowX="auto";b.overflowY="hidden"}else{if(a==="autoy"){b.overflowY="auto";b.overflowX="hidden"}else{if(c==="autox"||c==="autoy"){b.overflowX=b.overflowY=null}b.overflow=a||"visible"}}if(this.inited){this.fireNewEvent("overflow",a)}}},setVisible:function(a){if(this.visible!==a){this.visible=a;var b=this.deStyle;b.visibility=a?"inherit":"hidden";b.left=a?this.x+"px":"-100000px";b.top=a?this.y+"px":"-100000px";if(this.inited){this.fireNewEvent("visible",a)}}},setPointerEvents:function(a){if(this.pointerEvents!==a){this.pointerEvents=a;this.deStyle.pointerEvents=a||"auto";if(this.inited){this.fireNewEvent("pointerEvents",a)}}},setCursor:function(a){if(this.cursor!==a){this.cursor=a;this.deStyle.cursor=a||"auto";if(this.inited){this.fireNewEvent("cursor",a)}}},__updateBounds:function(a,b){if(this.boundsWidth!==a){this.boundsWidth=a;this.fireNewEvent("boundsWidth",a)}if(this.boundsHeight!==b){this.boundsHeight=b;this.fireNewEvent("boundsHeight",b)}},setOutline:function(a){a=a||[];this.setOutlineWidth(a[0]);this.setOutlineStyle(a[1]);this.setOutlineColor(a[2])},setOutlineWidth:function(a){this.outlineWidth=a||0;this.deStyle.outlineWidth=this.outlineWidth+"px"},setOutlineStyle:function(a){this.deStyle.outlineStyle=this.outlineStyle=a||"none"},setOutlineColor:function(a){this.deStyle.outlineColor=this.outlineColor=a||"#000000"},setBorder:function(a){a=a||[];this.setBorderWidth(a[0]);this.setBorderStyle(a[1]);this.setBorderColor(a[2])},setBorderWidth:function(a){this.borderWidth=a||0;this.deStyle.borderWidth=this.borderWidth+"px"},setBorderStyle:function(a){this.deStyle.borderStyle=this.borderStyle=a||"none"},setBorderColor:function(a){this.deStyle.borderColor=this.borderColor=a||"#000000"},setRoundedCorners:function(a){this.deStyle.borderRadius=a+"px"},setRoundedTopLeftCorner:function(a){this.setRoundedCorner(a,"TopLeft")},setRoundedTopRightCorner:function(a){this.setRoundedCorner(a,"TopRight")},setRoundedBottomLeftCorner:function(a){this.setRoundedCorner(a,"BottomLeft")},setRoundedBottomRightCorner:function(a){this.setRoundedCorner(a,"BottomRight")},setRoundedCorner:function(a,b){this.deStyle["border"+b+"Radius"]=a+"px"},setBoxShadow:function(c){if(c){var d=c[0]||0,a=c[1]||0,e=c[2]||7,b=c[3]||"#000000";c=d+"px "+a+"px "+e+"px "+b}else{c="none"}this.deStyle.boxShadow=c},setGradient:function(b){var d=this.deStyle;if(b){var c=b[0];if(c==="linear"||c==="radial"){b.shift()}else{c="linear"}var e=b[0];if(c==="radial"){if(e!==undefined){if(e==="cover"||e==="farthest-corner"){e="farthest-corner"}else{e="closest-side"}b.shift()}else{e="closest-side"}e="circle "+e}else{if(typeof e==="number"){e=e+"deg";b.shift()}else{if(e){e="to "+e;b.shift()}else{e="0deg"}}}function a(f){b.push(f&&f!=="inherit"?f:"transparent")}if(b.length<2){a(this.textColor)}if(b.length<2){a(this.bgColor)}d.background=c+"-gradient("+e+","+b.join(",")+")"}else{d.background="none"}this.bgColor=undefined},isVisible:function(){return this.searchAncestorsOrSelf(function(a){return !a.visible})===null},getFocusTrap:function(a){return this.searchAncestorsOrSelf(function(b){return b.focusCage||(b.focusTrap&&!a)})},subnodeAdded:function(a){if(a instanceof myt.View){this.domElement.appendChild(a.domElement);this.getSubviews().push(a);this.fireNewEvent("subviewAdded",a);this.subviewAdded(a)}else{if(a instanceof myt.Layout){this.getLayouts().push(a);this.fireNewEvent("layoutAdded",a);this.layoutAdded(a)}}},subnodeRemoved:function(b){var a;if(b instanceof myt.View){a=this.getSubviewIndex(b);if(a!==-1){this.fireNewEvent("subviewRemoved",b);b.removeDomElement();this.subviews.splice(a,1);this.subviewRemoved(b)}}else{if(b instanceof myt.Layout){a=this.getLayoutIndex(b);if(a!==-1){this.fireNewEvent("layoutRemoved",b);this.layouts.splice(a,1);this.layoutRemoved(b)}}}},hasSubview:function(a){return this.getSubviewIndex(a)!==-1},getSubviewIndex:function(a){return this.getSubviews().indexOf(a)},subviewAdded:function(a){},subviewRemoved:function(a){},getNextSibling:function(){if(this.parent){var a=this.domElement.nextElementSibling;if(a){return a.model}}return null},getPrevSibling:function(){if(this.parent){var a=this.domElement.previousElementSibling;if(a){return a.model}}return null},hasLayout:function(a){return this.getLayoutIndex(a)!==-1},getLayoutIndex:function(a){return this.getLayouts().indexOf(a)},layoutAdded:function(a){},layoutRemoved:function(a){},isBehind:function(a,b){return this.__comparePosition(a,false,b)},isInFrontOf:function(a,b){return this.__comparePosition(a,true,b)},__comparePosition:function(f,c,e){if(f&&typeof f==="object"){if(e){var g=this.getLeastCommonAncestor(f);if(g){var h=g.domElement,d=myt.DomElementProxy,a=d.getZIndexRelativeToAncestor(this.domElement,h),b=d.getZIndexRelativeToAncestor(f.domElement,h);if(c){a*=-1;b*=-1}if(a<b){return true}else{if(b<a){return false}}}}var j=this.domElement.compareDocumentPosition(f.domElement);return c?j===2||j===10:j===4||j===20}else{return false}},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(a){this.parent.sendSubviewBehind(this,a)},sendInFrontOf:function(a){this.parent.sendSubviewInFrontOf(this,a)},bringSubviewToFront:function(a){if(a&&a.parent===this){var b=this.domElement;if(a.domElement!==b.lastChild){myt.View.retainFocusDuringDomUpdate(a,function(){b.appendChild(a.domElement)})}}},sendSubviewToBack:function(a){if(a&&a.parent===this){var b=this.domElement;if(a.domElement!==b.firstChild){myt.View.retainFocusDuringDomUpdate(a,function(){b.insertBefore(a.domElement,b.firstChild)})}}},sendSubviewBehind:function(a,b){if(a&&b&&a.parent===this&&b.parent===this){var c=this.domElement;myt.View.retainFocusDuringDomUpdate(a,function(){c.insertBefore(a.domElement,b.domElement)})}},sendSubviewInFrontOf:function(a,b){if(a&&b&&a.parent===this&&b.parent===this){this.sendSubviewBehind(a,b);this.sendSubviewBehind(b,a)}},sortSubviews:function(c){var a=this.getSubviews(),b=this;a.sort(c);myt.View.retainFocusDuringDomUpdate(this,function(){var e=a.length,g=0,j=b.domElement,h=j.nextSibling,d=j.parentNode;if(d){d.removeChild(j)}var f=document.createDocumentFragment();for(;e>g;){f.appendChild(a[g++].domElement)}j.appendChild(f);if(d){d.insertBefore(j,h)}})},containsPoint:function(c,a,b){var e=this.domElement;if(!e){return false}var d=myt.DomElementProxy.getPagePosition(e,b);return myt.Geometry.rectContainsPoint(c,a,d.x,d.y,this.width,this.height)},isPointVisible:function(b,a){var c=this.getTruePagePosition();this.calculateEffectiveScale();return this.__isPointVisible(b-c.x,a-c.y)},__isPointVisible:function(b,f){var a=this.__effectiveScale;if(myt.Geometry.rectContainsPoint(b,f,0,0,this.width*a,this.height*a)){var d=this.parent;if(d){var e=d.domElement,c=d.__effectiveScale;return d.__isPointVisible(b+(this.x-e.scrollLeft)*c,f+(this.y-e.scrollTop)*c)}return true}return false},calculateEffectiveScale:function(){var d=this.getAncestors(),c=d.length,b,a=1;while(c){b=d[--c];a*=b.scaleX||1;b.__effectiveScale=a}},getEffectiveScale:function(){this.calculateEffectiveScale();return this.__effectiveScale},isColorAttr:function(a){return a==="bgColor"||a==="textColor"}});myt.TransformSupport=new JS.Module("TransformSupport",{extend:{setTransformOrigin:function(b,a){b[this._styleOriginKey]=a||"50% 50% 0"},addTransform:function(c,b,a){var d=this.removeTransform(c,b);c[this._styleKey]=d+(d.length===0?"":" ")+b+"("+a+")"},removeTransform:function(d,c){var b=this._styleKey,e=d[b];if(!e||e.length===0){return""}var f=e.split(" "),a=f.length;while(a){if(f[--a].indexOf(c)===0){f.splice(a,1);break}}return d[b]=f.join(" ")},getEffectiveScale:function(c){var b=1,a=1;while(c){if(c.scaleX!=null){b*=c.scaleX}if(c.scaleY!=null){a*=c.scaleY}c=c.parent}return{scaleX:b,scaleY:a}}},setTransformOrigin:function(a){if(this.transformOrigin!==a){this.transformOrigin=a;myt.TransformSupport.setTransformOrigin(this.deStyle,a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("transformOrigin",a)}}},setRotation:function(a){if(this.rotation!==a){this.rotation=a;myt.TransformSupport.addTransform(this.deStyle,"rotate",(a||0)+"deg");if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("rotation",a)}}},setScale:function(b){var a=this.scaleX!==b;if(a){this.__applyScale("scaleX",this.scaleX=b)}var c=this.scaleY!==b;if(c){this.__applyScale("scaleY",this.scaleY=b)}if(this.inited){if(a||c){this.__updateBounds(this.width,this.height)}if(a){this.fireNewEvent("scaleX",b)}if(c){this.fireNewEvent("scaleY",b)}}},setScaleX:function(a){if(this.scaleX!==a){this.__applyScale("scaleX",this.scaleX=a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("scaleX",a)}}},setScaleY:function(a){if(this.scaleY!==a){this.__applyScale("scaleY",this.scaleY=a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("scaleY",a)}}},__applyScale:function(b,a){if(a==null){myt.TransformSupport.removeTransform(this.deStyle,b)}else{myt.TransformSupport.addTransform(this.deStyle,b,a||1)}},setSkewX:function(a){if(this.skewX!==a){this.skewX=a;myt.TransformSupport.addTransform(this.deStyle,"skewX",a||0);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("skewX",a)}}},setSkewY:function(a){if(this.skewY!==a){this.skewY=a;myt.TransformSupport.addTransform(this.deStyle,"skewY",a||0);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("skewY",a)}}},__updateBounds:function(c,e){var f=this.rotation,j=this.scaleX,g=this.scaleY,d=false;if((j===undefined||j===1)&&(g===undefined||g===1)){d=true}if(d&&(f===undefined||f===0||f===180)){}else{if(d&&(f===90||f===270)){c=this.height;e=this.width}else{var a=this.domElement.getBoundingClientRect();c=a.width;e=a.height}}this.callSuper(c,e)}});(function(){var a=BrowserDetect;this._styleKey=a.browser==="Firefox"?"transform":a.prefix.lowercase+"Transform";this._styleOriginKey=this._styleKey+"Origin"}).call(myt.TransformSupport);myt.SizeToDom=new JS.Module("SizeToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setWidth:function(a,b){if(a==="auto"){this.__hasSetWidth=false;this.deStyle.width="auto";this.sizeViewToDom()}else{this.__hasSetWidth=true;this.callSuper(a,b)}},setHeight:function(a,b){if(a==="auto"){this.__hasSetHeight=false;this.deStyle.height="auto";this.sizeViewToDom()}else{this.__hasSetHeight=true;this.callSuper(a,b)}},sizeViewToDom:function(){var d,c;if(!this.__hasSetWidth){d=this.domElement.getBoundingClientRect();var a=d.width;c=myt.TransformSupport.getEffectiveScale(this);a/=c.scaleX;if(this.width!==a){this.width=a;if(this.inited){this.__updateBounds(a,this.height)}this.fireNewEvent("width",a)}}if(!this.__hasSetHeight){if(!d){d=this.domElement.getBoundingClientRect()}var b=d.height;if(!c){c=myt.TransformSupport.getEffectiveScale(this)}b/=c.scaleY;if(this.height!==b){this.height=b;if(this.inited){this.__updateBounds(this.width,b)}this.fireNewEvent("height",b)}}}});myt.TextSupport=new JS.Module("TextSupport",{setWidth:function(b,c){this.callSuper(b,c);if(b!=="auto"){var a=this.whiteSpace;if(a==="normal"||a==="pre-line"||a==="pre-wrap"){this.sizeViewToDom()}}},setText:function(a){if(!a){a=""}if(typeof a==="object"){a=a.value}if(this.text!==a){this.domElement.innerHTML=this.text=a;if(this.inited){this.fireNewEvent("text",a);this.sizeViewToDom()}}},setTextOverflow:function(a){if(this.textOverflow!==a){this.textOverflow=a;this.deStyle.textOverflow=a||"inherit";if(this.inited){this.fireNewEvent("textOverflow",a)}}},setTextAlign:function(a){if(this.textAlign!==a){this.textAlign=a;this.deStyle.textAlign=a||"inherit";if(this.inited){this.fireNewEvent("textAlign",a)}}},setWhiteSpace:function(a){this.__s(a,"whiteSpace")},setWordWrap:function(a){this.__s(a,"wordWrap","normal")},setTextIndent:function(a){this.__s(a,"textIndent")},setTextTransform:function(a){this.__s(a,"textTransform")},setTextDecoration:function(a){this.__s(a,"textDecoration")},setLineHeight:function(a){this.__s(a,"lineHeight")},setLetterSpacing:function(a){this.__s(a,"letterSpacing")},setWordSpacing:function(a){this.__s(a,"wordSpacing")},setFontFamily:function(a){this.__s(a,"fontFamily")},setFontStyle:function(a){this.__s(a,"fontStyle")},setFontVariant:function(a){this.__s(a,"fontVariant")},setFontWeight:function(a){this.__s(a,"fontWeight")},setFontSize:function(a){this.__s(a,"fontSize")},__s:function(b,c,a){if(this[c]!==b){this[c]=b;this.deStyle[c]=b||a||"inherit";if(this.inited){this.fireNewEvent(c,b);this.sizeViewToDom()}}},setUserUnselectable:function(a){if(this.userUnselectable!==a){this.userUnselectable=a;this[a?"addDomClass":"removeDomClass"]("mytUnselectable");this.setCursor(a?"default":"text");if(this.inited){this.fireNewEvent("userUnselectable",a)}}},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(a,g,e,b,c){var f=(a||0)+"px "+(g||0)+"px "+(e!=null?e:2)+"px "+(b||"#000000");if(c>0){var d=[f];while(c--){d.push(f)}f=d.join(",")}this.deStyle.textShadow=f},hideTextShadow:function(){this.deStyle.textShadow="none"}});myt.Text=new JS.Class("Text",myt.View,{include:[myt.SizeToDom,myt.TextSupport],initNode:function(b,a){if(a.whiteSpace===undefined){a.whiteSpace="nowrap"}if(a.userUnselectable===undefined){a.userUnselectable=true}this.callSuper(b,a)},measureNoWrapWidth:function(){if(this.whiteSpace==="nowrap"){return this.width}var c=this.deStyle,b=c.whiteSpace;c.whiteSpace="nowrap";var a=this.domElement.getBoundingClientRect().width;c.whiteSpace=b;return a}});myt.Markup=new JS.Class("Markup",myt.View,{include:[myt.SizeToDom],setHtml:function(a){if(this.html!==a){this.domElement.innerHTML=this.html=a;if(this.inited){this.fireNewEvent("html",a);this.sizeViewToDom()}}}});myt.Frame=new JS.Class("Frame",myt.View,{initNode:function(b,a){this.callSuper(b,a);var c=myt.global.mouse;this.attachToDom(c,"__doMouseDown","mousedown",true);this.attachToDom(c,"__doMouseUp","mouseup",true)},createOurDomElement:function(b){var c=document.createElement("iframe"),a=c.style;a.position="absolute";a.border="0px";return c},setSrc:function(a){if(this.src!==a){this.src=this.domElement.src=a;if(this.inited){this.fireNewEvent("src",a)}}},__doMouseDown:function(a){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return true},__doMouseUp:function(a){this.setPointerEvents(this.__restorePointerEvents);return true}});myt.SizeWidthToDom=new JS.Module("SizeWidthToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setWidth:function(a,b){if(a==="auto"){this.__hasSetWidth=false;this.deStyle.width="auto";this.sizeViewToDom()}else{this.__hasSetWidth=true;this.callSuper(a,b)}},sizeViewToDom:function(){if(!this.__hasSetWidth){var b=myt.TransformSupport.getEffectiveScale(this);var a=this.domElement.getBoundingClientRect().width/b.scaleX;if(this.width!==a){this.width=a;if(this.inited){this.__updateBounds(a,this.height)}this.fireNewEvent("width",a)}}}});myt.SizeHeightToDom=new JS.Module("SizeHeightToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setHeight:function(a,b){if(a==="auto"){this.__hasSetHeight=false;this.deStyle.height="auto";this.sizeViewToDom()}else{this.__hasSetHeight=true;this.callSuper(a,b)}},sizeViewToDom:function(){if(!this.__hasSetHeight){var b=myt.TransformSupport.getEffectiveScale(this);var a=this.domElement.getBoundingClientRect().height/b.scaleY;if(this.height!==a){this.height=a;if(this.inited){this.__updateBounds(this.width,a)}this.fireNewEvent("height",a)}}}});myt.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){if(this.parent!==a){if(this.inited){this.__teardownPercentOfParentWidthConstraint();this.__teardownPercentOfParentHeightConstraint()}this.callSuper(a);this.__setupPercentOfParentWidthConstraint();this.__setupPercentOfParentHeightConstraint()}},setPercentOfParentWidthOffset:function(a){if(this.percentOfParentWidthOffset!==a){this.percentOfParentWidthOffset=a;if(this.inited){this.fireNewEvent("percentOfParentWidthOffset",a);this.__doPercentOfParentWidth()}}},setPercentOfParentWidth:function(a){if(this.percentOfParentWidth!==a){if(this.inited){this.__teardownPercentOfParentWidthConstraint()}this.percentOfParentWidth=a;if(this.inited){this.fireNewEvent("percentOfParentWidth",a)}this.__setupPercentOfParentWidthConstraint()}},setPercentOfParentHeightOffset:function(a){if(this.percentOfParentHeightOffset!==a){this.percentOfParentHeightOffset=a;if(this.inited){this.fireNewEvent("percentOfParentHeightOffset",a);this.__doPercentOfParentHeight()}}},setPercentOfParentHeight:function(a){if(this.percentOfParentHeight!==a){if(this.inited){this.__teardownPercentOfParentHeightConstraint()}this.percentOfParentHeight=a;if(this.inited){this.fireNewEvent("percentOfParentHeight",a)}this.__setupPercentOfParentHeightConstraint()}},__teardownPercentOfParentWidthConstraint:function(){if(this.percentOfParentWidth>=0){this.detachFrom(this.parent,"__doPercentOfParentWidth","width")}},__setupPercentOfParentWidthConstraint:function(){var a=this.parent;if(a&&this.percentOfParentWidth>=0){this.syncTo(a,"__doPercentOfParentWidth","width")}},__doPercentOfParentWidth:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+Math.round(this.parent.width*(this.percentOfParentWidth/100)));if(!this.inited){this.fireNewEvent("width",this.width)}},__teardownPercentOfParentHeightConstraint:function(){if(this.percentOfParentHeight>=0){this.detachFrom(this.parent,"__doPercentOfParentHeight","height")}},__setupPercentOfParentHeightConstraint:function(){var a=this.parent;if(a&&this.percentOfParentHeight>=0){this.syncTo(a,"__doPercentOfParentHeight","height")}},__doPercentOfParentHeight:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+Math.round(this.parent.height*(this.percentOfParentHeight/100)));if(!this.inited){this.fireNewEvent("height",this.height)}}});new JS.Singleton("GlobalRootViewRegistry",{include:[myt.Observable],initialize:function(){this.__roots=[];myt.global.register("roots",this)},getRoots:function(){return this.__roots},addRoot:function(a){this.__roots.push(a);this.fireNewEvent("rootAdded",a)},removeRoot:function(d){var b=this.__roots,c=b.length,a;while(c){a=b[--c];if(a===d){b.splice(c,1);this.fireNewEvent("rootRemoved",a);break}}}});myt.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:function(a){var b=a.__captureDrop=function(d){d.preventDefault()},c=a.domElement;myt.addEventListener(c,"drop",b);myt.addEventListener(c,"dragover",b)},teardownCaptureDrop:function(a){var c=a.domElement,b=a.__captureDrop;myt.removeEventListener(c,"drop",b);myt.removeEventListener(c,"dragover",b)}},initNode:function(b,a){this.callSuper(b,a);this.setZIndex(0);this.addDomClass("myt");myt.global.roots.addRoot(this);myt.RootView.setupCaptureDrop(this)},createOurDomElement:function(a){if(!a){a=this.callSuper(a);myt.getElement().appendChild(a)}return a},destroyAfterOrphaning:function(){myt.RootView.teardownCaptureDrop(this);myt.global.roots.removeRoot(this);if(!this.keepDomElementWhenDestroyed){this.removeDomElement()}this.callSuper()},setKeepDomElementWhenDestroyed:function(a){this.keepDomElementWhenDestroyed=a},setParent:function(a){this.callSuper(undefined)},bringToFront:function(){var c=this.domElement,a=c.parentNode;if(c!==a.lastChild){var b=a.removeChild(c);if(b){a.appendChild(b)}}},sendToBack:function(){var c=this.domElement,a=c.parentNode;if(c!==a.firstChild){var b=a.removeChild(c);if(b){a.insertBefore(b,a.firstChild)}}},sendBehind:function(c){var e=this.domElement,b=c.domElement,a=e.parentNode;if(b.parentNode===a){var d=a.removeChild(e);if(d){a.insertBefore(d,b)}}},sendInFrontOf:function(a){if(a.domElement.parentNode===this.domElement.parentNode){this.sendBehind(a);a.sendBehind(this)}}});new JS.Singleton("GlobalWindowResize",{include:[myt.Observable],initialize:function(){this.EVENT={source:this,type:"resize",value:{w:this.getWidth(),h:this.getHeight()}};var a=this;myt.addEventListener(window,"resize",function(b){a.__handleEvent(b)});myt.global.register("windowResize",this)},getWidth:function(){return this.__windowInnerWidth||(this.__windowInnerWidth=window.innerWidth)},getHeight:function(){return this.__windowInnerHeight||(this.__windowInnerHeight=window.innerHeight)},__handleEvent:function(d){if(!d){d=window.event}var e=this.EVENT,f=e.value,b=false,g=d.target,a=g.innerWidth,c=g.innerHeight;if(a!==f.w){f.w=this.__windowInnerWidth=a;b=true}if(c!==f.h){f.h=this.__windowInnerHeight=c;b=true}if(b){this.fireEvent(e)}}});myt.SizeToWindow=new JS.Module("SizeToWindow",{include:[myt.RootView],initNode:function(b,a){this.minWidth=this.minHeight=0;if(a.resizeDimension===undefined){a.resizeDimension="both"}this.attachTo(myt.global.windowResize,"__handleResize","resize");this.callSuper(b,a)},setResizeDimension:function(a){if(this.resizeDimension!==a){this.resizeDimension=a;this.__handleResize()}},setMinWidth:function(a){if(this.minWidth!==a){this.minWidth=a;this.__handleResize()}},setMinHeight:function(a){if(this.minHeight!==a){this.minHeight=a;this.__handleResize()}},__handleResize:function(b){var a=myt.global.windowResize.EVENT.value,c=this.resizeDimension;if(c==="width"||c==="both"){this.setWidth(Math.max(this.minWidth,a.w))}if(c==="height"||c==="both"){this.setHeight(Math.max(this.minHeight,a.h))}}});myt.SizeToWindowWidth=new JS.Module("SizeToWindowWidth",{include:[myt.SizeToWindow],initNode:function(b,a){if(a.resizeDimension===undefined){a.resizeDimension="width"}this.callSuper(b,a)}});myt.SizeToWindowHeight=new JS.Module("SizeToWindowHeight",{include:[myt.SizeToWindow],initNode:function(b,a){if(a.resizeDimension===undefined){a.resizeDimension="height"}this.callSuper(b,a)}});new JS.Singleton("GlobalIdle",{include:[myt.Observable],initialize:function(){this.running=false;var f,e=["webkit","moz","ms","o"],d=window;for(var b=0;b<e.length&&!d.requestAnimationFrame;++b){f=e[b];d.requestAnimationFrame=d[f+"RequestAnimationFrame"];d.cancelAnimationFrame=d[f+"CancelAnimationFrame"]||d[f+"CancelRequestAnimationFrame"]}var a=this;this.__event={};this.__doIdle=function c(j){a.__timerId=d.requestAnimationFrame(c);var h=a.lastTime;if(h!==-1){j=Math.round(j);var g=a.__event;g.delta=j-h;g.time=j;a.fireNewEvent("idle",g)}a.lastTime=j};myt.global.register("idle",this)},attachObserver:function(c,b,d){var a=this.callSuper(c,b,d);if(!this.running&&this.hasObservers("idle")){this.running=true;this.lastTime=-1;this.__timerId=window.requestAnimationFrame(this.__doIdle)}return a},detachObserver:function(c,b,d){var a=this.callSuper(c,b,d);if(this.running&&!this.hasObservers("idle")){window.cancelAnimationFrame(this.__timerId);this.running=false}return a}});myt.Animator=new JS.Class("Animator",myt.Node,{include:[myt.Reusable],extend:{easingFunctions:{linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return -a*(a-2)},easeInOutQuad:function(a){return(a/=0.5)<1?0.5*a*a:-0.5*((--a)*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return((a=a-1)*a*a+1)},easeInOutCubic:function(a){return(a/=0.5)<1?0.5*a*a*a:1/2*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return -((a=a-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=0.5)<1?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return((a=a-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=0.5)<1?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return -Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return -0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return(a==0)?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return(a==1)?1:(-Math.pow(2,-10*a)+1)},easeInCirc:function(a){return -(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-(a=a-1)*a)},easeInOutCirc:function(a){return(a/=0.5)<1?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInOutExpo:function(a){if(a==0){return 0}if(a==1){return 1}if((a/=0.5)<1){return 0.5*Math.pow(2,10*(a-1))}return 0.5*(-Math.pow(2,-10*--a)+2)},easeInElastic:function(c){var d=1.70158,e=0,b=1;if(c==0){return 0}if(c==1){return 1}if(!e){e=0.3}if(b<1){b=1;var d=e/4}else{var d=e/(2*Math.PI)*Math.asin(1/b)}return -(b*Math.pow(2,10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e))},easeOutElastic:function(c){var d=1.70158,e=0,b=1;if(c==0){return 0}if(c==1){return 1}if(!e){e=1*0.3}if(b<1){b=1;var d=e/4}else{var d=e/(2*Math.PI)*Math.asin(1/b)}return b*Math.pow(2,-10*c)*Math.sin((c*1-d)*(2*Math.PI)/e)+1},easeInOutElastic:function(c){var d=1.70158,e=0,b=1;if(c==0){return 0}if((c/=0.5)==2){return 1}if(!e){e=(0.3*1.5)}if(b<1){b=1;var d=e/4}else{var d=e/(2*Math.PI)*Math.asin(1/b)}if(c<1){return -0.5*(b*Math.pow(2,10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e))}return b*Math.pow(2,-10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e)*0.5+1},easeInBack:function(a,b){if(b==undefined){b=1.70158}return(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a,b){if(b==undefined){b=1.70158}return((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a,b){if(b==undefined){b=1.70158}if((a/=0.5)<1){return 0.5*(a*a*(((b*=(1.525))+1)*a-b))}return 0.5*((a-=2)*a*(((b*=(1.525))+1)*a+b)+2)},easeInBounce:function(a){return 1-myt.Animator.easingFunctions.easeOutBounce(1-a)},easeOutBounce:function(a){if(a<(1/2.75)){return(7.5625*a*a)}else{if(a<(2/2.75)){return(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return(7.5625*(a-=(2.25/2.75))*a+0.9375)}}}return(7.5625*(a-=(2.625/2.75))*a+0.984375)},easeInOutBounce:function(a){if(a<0.5){return myt.Animator.easingFunctions.easeInBounce(a*2)*0.5}return myt.Animator.easingFunctions.easeOutBounce(a*2-1)*0.5+0.5}}},initNode:function(b,a){this.duration=1000;this.relative=this.reverse=this.running=this.paused=false;this.repeat=1;this.easingFunction=myt.Animator.DEFAULT_EASING_FUNCTION;this.callSuper(b,a);this.__reset()},setRunning:function(a){if(this.running!==a){this.running=a;if(this.inited){this.fireNewEvent("running",a)}if(!this.paused){if(a){this.__isColorAttr()}else{if(this.__temporaryFrom){this.from=undefined}this.__reset()}this[a?"attachTo":"detachFrom"](myt.global.idle,"__update","idle")}}},setPaused:function(a){if(this.paused!==a){this.paused=a;if(this.inited){this.fireNewEvent("paused",a)}if(this.running){this[a?"detachFrom":"attachTo"](myt.global.idle,"__update","idle")}}},setReverse:function(a){if(this.reverse!==a){this.reverse=a;if(this.inited){this.fireNewEvent("reverse",a)}if(!this.running){this.__reset()}}},setEasingFunction:function(a){if(typeof a==="string"){a=myt.Animator.easingFunctions[a]}if(!a){a=myt.Animator.DEFAULT_EASING_FUNCTION}if(this.easingFunction!==a){this.easingFunction=a;if(this.inited){this.fireNewEvent("easingFunction",a)}}},setFrom:function(a){if(this.from!==a){this.from=a;if(this.inited){this.fireNewEvent("from",a)}}},setTo:function(a){if(this.to!==a){this.to=a;if(this.inited){this.fireNewEvent("to",a)}}},setCallback:function(a){this.callback=a},__isColorAttr:function(){var a=this.__getTarget();this.__isColorAnim=(a&&typeof a.isColorAttr==="function")?a.isColorAttr(this.attribute):undefined},__getTarget:function(){return this.target||this.parent},next:function(d,b){var a=this.callback;if(a&&!b){var c=this;this.setCallback(function(e){a.call(c,e);d.call(c,e)})}else{this.setCallback(d)}},reset:function(a){this.__reset();this.setRunning(false);this.setPaused(false);if(a&&this.callback){this.callback.call(this,false)}},clean:function(){this.to=this.from=this.attribute=this.callback=undefined;this.duration=1000;this.relative=this.reverse=false;this.repeat=1;this.easingFunction=myt.Animator.DEFAULT_EASING_FUNCTION;this.reset(false)},__reset:function(){this.__temporaryFrom=false;this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0},__update:function(a){this.__advance(a.value.delta)},__advance:function(g){if(this.running&&!this.paused){var a=this.reverse,e=this.duration,b=this.repeat;if(a){g=g*-1}var d=this.__progress;this.__progress+=g;var f=0;if(this.__progress>e){f=this.__progress-e;this.__progress=e;if(++this.__loopCount===b){f=0}}else{if(0>this.__progress){f=-this.__progress;this.__progress=0;if(0>--this.__loopCount&&b>0){f=0}}}var c=this.__getTarget();if(c){this.__updateTarget(c,this.__progress,d);if((!a&&this.__loopCount===b)||(a&&0>this.__loopCount&&b>0)){this.setRunning(false);if(this.callback){this.callback.call(this,true)}}else{if(f>0){this.fireNewEvent("repeat",this.__loopCount);this.__progress=a?e:0;this.__advance(f)}}}else{console.log("No target found for animator.",this);this.setRunning(false);if(this.callback){this.callback.call(this,false)}}}},__updateTarget:function(f,a,d){var b=this.relative,e=this.duration,g=this.attribute,h=Math.max(0,a/e),c=Math.max(0,d/e);if(this.from==null){this.__temporaryFrom=true;this.from=b?(this.__isColorAnim?"#000000":0):f.get(g)}var l=this.easingFunction(h)-(b?this.easingFunction(c):0),k=b?f.get(g):this.from,j=this.to;f.set(g,this.__isColorAnim?this.__getColorValue(this.from,j,l,b,k):k+((j-this.from)*l))},__getColorValue:function(f,g,j,b,h){var a=myt.Color,d=a.makeColorFromHexString(f),c=a.makeColorFromHexString(g),e=b?a.makeColorFromHexString(h):d;e.setRed(e.red+((c.red-d.red)*j));e.setGreen(e.green+((c.green-d.green)*j));e.setBlue(e.blue+((c.blue-d.blue)*j));return e.getHtmlHexString()}});myt.Animator.DEFAULT_EASING_FUNCTION=myt.Animator.easingFunctions.easeInOutQuad;myt.Callback=new JS.Class("Callback",{initialize:function(b,c,a){this.setContext(c);this.setMethodName(b);this.setExtraArgs(a)},setContext:function(a){this.context=a},setMethodName:function(a){this.methodName=a},setExtraArgs:function(a){this.extraArgs=a},execute:function(){var b=Array.prototype.slice.call(arguments),a=this.context,c=this.extraArgs;if(c&&c.length>0){b=b.concat(c)}a[this.methodName].apply(a,b)}});myt.Timer=new JS.Class("Timer",{initialize:function(b,a){this.reset(b,a)},setCallback:function(a){this.callback=a},setTimerId:function(a){this.timerId=a},clear:function(){if(this.isRunning()){clearTimeout(this.timerId);this.setTimerId()}this.setCallback()},reset:function(b,a){this.clear();this.setCallback(b);this.run(a)},run:function(b){if(this.callback&&b>=0){var a=this;var c=function(){a.setTimerId();if(a.callback.execute){a.callback.execute()}else{a.callback.call(this)}};this.setTimerId(BrowserDetect.browser==="Firefox"?this.__setTimeout(c,b):setTimeout(c,b))}},isRunning:function(){return this.timerId!==undefined},__setTimeout:function(d,c){var b=this,a=Date.now()+c;return setTimeout(function(){var e=Date.now();if(e<a){b.setTimerId(b.__setTimeout(d,a-e))}else{d()}},c)}});myt.RepeatableTimer=new JS.Class("RepeatableTimer",myt.Timer,{initialize:function(d,a,b,c){this.reset(d,a,b,c)},setValue:function(a){this.value=a},setRepeatDelayInMillis:function(a){this.repeatDelayInMillis=a},clear:function(){this.callSuper();this.setValue();this.setRepeatDelayInMillis()},reset:function(d,a,b,c){this.clear();this.setCallback(d);this.setValue(b);this.setRepeatDelayInMillis(c);this.run(a)},run:function(b){if(this.callback&&b>=0){var a=this;this.setTimerId(setTimeout(function(){var d=a.repeatDelayInMillis,c=d!==undefined&&d>=0;if(!c){a.setTimerId()}if(a.value===undefined){a.callback.execute()}else{a.callback.execute(a.value)}if(c){a.run(d)}},b))}}});myt.StateMachine=new JS.Class("StateMachine",myt.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5,SYNC:"sync",ASYNC:"async",WILDCARD:"*"},initNode:function(b,a){this.map={};this.map[myt.StateMachine.WILDCARD]={};this.current=this.initial=this.terminal="";this.__resetTransitionProgress();this.callSuper(b,a)},setInitialState:function(a){if(this.current===""){var b;if(Array.isArray(a)){b=a;a=b.shift()}else{b=[]}this.current=this.initial=a;this.doEnterState("","",a,b);var c={name:"",from:"",to:a,args:b};this.fireNewEvent("enter"+a,c);this.fireNewEvent("enter",c);if(this.isFinished()){this.fireNewEvent("finished",c)}}},setTerminalState:function(a){this.terminal=a},setTransitions:function(a){var b=a.length,c;while(b){c=a[--b];this.addTransition(c.name,c.from,c.to)}},addTransition:function(c,f,e){var d=this.map;if(f){f=Array.isArray(f)?f:[f]}else{f=[myt.StateMachine.WILDCARD]}var b=f.length,a;while(b){a=d[f[--b]];if(!a){a=d[f[b]]={}}a[c]=e}},doTransition:function(){var a=Array.prototype.slice.call(arguments);a.unshift(myt.StateMachine.SYNC);return this.__doTransition.apply(this,a)},doAsyncTransition:function(){var a=Array.prototype.slice.call(arguments);a.unshift(myt.StateMachine.ASYNC);return this.__doTransition.apply(this,a)},__doTransition:function(){var c=Array.prototype.slice.call(arguments);if(this.__transitionInProgress){var b=this.__deferredTransitions;if(!b){b=this.__deferredTransitions=[]}b.unshift(c);return}else{this.__transitionInProgress=true}var d=c.shift(),e=c.shift();var a=myt.StateMachine;if(this.__pendingTransition){return a.PENDING}if(this.isFinished()){this.__transitionInProgress=false;return a.NO_TRANSITION}var f=this.map[this.current][e];if(!f){f=this.map[a.WILDCARD][e]}if(f){this.__pendingTransition=e;this.__transitionDestinationState=f;this.__additionalArgs=c;return this.resumeTransition(d)}else{this.__transitionInProgress=false;return a.NO_TRANSITION}},resumeTransition:function(d){var e=this.__pendingTransition;var b=myt.StateMachine;if(!e){return b.INVALID}var f=this.current,h=this.__transitionDestinationState,c=this.__additionalArgs,g={name:e,from:f,to:h,args:c};switch(this.__transitionStage){case"leaveState":var a=this.doLeaveState(e,f,h,c);if(a===false){this.__resetTransitionProgress();this.__doDeferredTransitions();return b.CANCELLED}else{if(a===b.ASYNC||d===b.ASYNC){this.__transitionStage="enterState";this.fireNewEvent("start"+e,g);this.fireNewEvent("start",g);this.fireNewEvent("leave"+f,g);this.fireNewEvent("leave",g);this.__doDeferredTransitions();return b.PENDING}else{this.fireNewEvent("start"+e,g);this.fireNewEvent("start",g);this.fireNewEvent("leave"+f,g);this.fireNewEvent("leave",g)}}case"enterState":this.current=h;this.__resetTransitionProgress();this.doEnterState(e,f,h,c);this.fireNewEvent("enter"+h,g);this.fireNewEvent("enter",g);this.fireNewEvent("end"+e,g);this.fireNewEvent("end",g);if(this.isFinished()){this.fireNewEvent("finished",g)}}this.__doDeferredTransitions();return b.SUCCEEDED},__doDeferredTransitions:function(){this.__transitionInProgress=false;var a=this.__deferredTransitions;if(a){while(a.length>0){this.__doTransition.apply(this,a.pop())}}},doLeaveState:function(b,d,c,a){},doEnterState:function(b,d,c,a){},__resetTransitionProgress:function(){this.__additionalArgs=[];this.__pendingTransition="";this.__transitionDestinationState="";this.__transitionStage="leaveState"},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(a){if(Array.isArray(a)){return a.indexOf(this.current)>=0}else{return this.current===a}},can:function(a){if(this.map[this.current][a]!==undefined){return true}else{return this.map[myt.StateMachine.WILDCARD][a]!==undefined}}});myt.Replicable=new JS.Module("Replicable",{include:[myt.Reusable],replicate:function(b,a){this.replicationData=b;this.replicationIndex=a},notify:function(a,b){},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(b,a){return a===this.replicationIndex&&b===this.replicationData}});myt.Replicator=new JS.Class("Replicator",myt.Node,{extend:{SORT_FUNCTION:function(d,c){return d.replicationIndex-c.replicationIndex}},initNode:function(b,a){this.callSuper(b,a);this.__setupPool();this.doReplication()},destroyAfterOrphaning:function(){this.__destroyOldPool();this.callSuper()},setTemplate:function(a){this.template=a.includes(myt.Replicable)?a:null;if(!this.template){myt.dumpStack("Template not an myt.Replicable")}if(this.inited){this.__setupPool();this.doReplication()}},setData:function(a){this.data=a;if(this.inited){this.doReplication()}},__setupPool:function(){this.__destroyOldPool();var a=this.template;if(a){this.__pool=new myt.TrackActivesPool(a,this.parent)}},__destroyOldPool:function(){var a=this.__pool;if(a){var b=this.parent.getLayouts();this.__lockLayouts(b);a.putActives();a.destroyPooledInstances();this.__unlockLayouts(b,false);a.destroy()}},doReplication:function(){var h=this.__pool;if(h){var k=this.parent.getLayouts();this.__lockLayouts(k);var f=this.data,c=f?f.length:0,b=h.getActives(),j=b.length,g=j,e,a,d=[],l=myt.Replicator.SORT_FUNCTION;b.sort(l);while(g){e=b[--g];a=e.replicationIndex;if(a>=c||!e.alreadyHasReplicationData(f[a],a)){d[a]=e}}g=d.length;while(g){e=d[--g];if(e){h.putInstance(e)}}for(g=0;c>g;++g){if(g>=j||d[g]!=null){h.getInstance().replicate(f[g],g)}}g=k.length;while(g){k[--g].sortSubviews(l)}this.__unlockLayouts(k,true)}},notify:function(c,e){var b=this.__pool;if(b){var d=b.getActives(),a=d.length;while(a){d[--a].notify(c,e)}}},__lockLayouts:function(b){var a=b.length;while(a){b[--a].incrementLockedCounter()}},__unlockLayouts:function(c,d){var a=c.length,b;while(a){b=c[--a];b.decrementLockedCounter();if(d){b.update()}}}});myt.ConstantLayout=new JS.Class("ConstantLayout",myt.Layout,{setTargetAttrName:function(a){if(this.targetAttrName!==a){this.targetAttrName=a;this.setterName=myt.AccessorSupport.generateSetterName(a);if(this.inited){this.fireNewEvent("targetAttrName",a);this.update()}}},setTargetValue:function(a){if(this.targetValue!==a){this.targetValue=a;if(this.inited){this.fireNewEvent("targetValue",a);this.update()}}},update:function(){if(this.canUpdate()){var d=this.setterName,f=this.targetValue,c=this.subviews,a=c.length,b,g,e=0;for(;a>e;){b=c[e++];g=b[d];if(g){g.call(b,f)}}}}});myt.VariableLayout=new JS.Class("VariableLayout",myt.ConstantLayout,{initNode:function(b,a){this.collapseParent=this.reverse=false;this.callSuper(b,a)},setCollapseParent:function(a){if(this.collapseParent!==a){this.collapseParent=a;if(this.inited){this.fireNewEvent("collapseParent",a);this.update()}}},setReverse:function(a){if(this.reverse!==a){this.reverse=a;if(this.inited){this.fireNewEvent("reverse",a);this.update()}}},update:function(){if(this.canUpdate()){this.incrementLockedCounter();this.doBeforeUpdate();var d=this.setterName,g=this.targetValue,c=this.subviews,a=c.length,e,b,f=0;if(this.reverse){e=a;while(e){b=c[--e];if(this.skipSubview(b)){continue}g=this.updateSubview(++f,b,d,g)}}else{e=0;while(a>e){b=c[e++];if(this.skipSubview(b)){continue}g=this.updateSubview(++f,b,d,g)}}this.doAfterUpdate();if(this.collapseParent&&!this.parent.isBeingDestroyed){this.updateParent(d,g)}this.decrementLockedCounter()}},doBeforeUpdate:function(){},doAfterUpdate:function(){},startMonitoringSubview:function(a){this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update","visible")},updateSubview:function(c,a,b,d){a[b](d);return d},skipSubview:function(a){return !a.visible},updateParent:function(a,b){}});myt.WrappingLayout=new JS.Class("WrappingLayout",myt.VariableLayout,{initNode:function(b,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(b,a)},setTargetAttrName:function(b){if(this.targetAttrName!==b){var d=b==="y",a=this.inited;if(a){this.stopMonitoringAllSubviews()}this.measureAttrName=d?"boundsHeight":"boundsWidth";var e=this.measureAttrBaseName=d?"height":"width";this.otherMeasureAttrName=d?"boundsWidth":"boundsHeight";var c=this.otherMeasureAttrBaseName=d?"width":"height";this.parentSetterName=d?"setWidth":"setHeight";this.otherSetterName=d?"setX":"setY";if(a){this.startMonitoringAllSubviews();this.stopMonitoringParent(c);this.startMonitoringParent(e)}this.callSuper(b)}},setParent:function(a){if(this.parent!==parent){var b=this.targetAttrName==="y";if(this.parent){this.stopMonitoringParent(b?"height":"width")}this.callSuper(a);if(this.parent){this.startMonitoringParent(b?"height":"width")}}},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.inited){this.fireNewEvent("spacing",a);this.update()}}},setOutset:function(a){if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a);this.update()}}},setLineSpacing:function(a){if(this.lineSpacing!==a){this.lineSpacing=a;if(this.inited){this.fireNewEvent("lineSpacing",a);this.update()}}},setLineInset:function(a){if(this.lineInset!==a){this.lineInset=a;if(this.inited){this.fireNewEvent("lineInset",a);this.update()}}},setLineOutset:function(a){if(this.lineOutset!==a){this.lineOutset=a;if(this.inited){this.fireNewEvent("lineOutset",a);this.update()}}},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update",this.otherMeasureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update",this.otherMeasureAttrName);this.callSuper(a)},doBeforeUpdate:function(){this.lineCount=1;this.maxSize=0;this.lineSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(e,a,c,f){var d=a[this.measureAttrName],b=a[this.otherMeasureAttrName];if(f+d>this.parentSizeLessOutset||a.layoutHint==="break"){f=this.targetValue;this.linePos+=this.lineSize+this.lineSpacing;this.lineSize=b;++this.lineCount}else{if(b>this.lineSize){this.lineSize=b}}a[this.otherSetterName](this.linePos+(b-a[this.otherMeasureAttrBaseName])/2);a[c](f+(d-a[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,f+d+this.outset);return f+d+this.spacing},updateParent:function(a,b){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});myt.SpacedLayout=new JS.Class("SpacedLayout",myt.VariableLayout,{initNode:function(b,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(b,a)},setTargetAttrName:function(b){if(this.targetAttrName!==b){var c=b==="y",a=this.inited;if(a){this.stopMonitoringAllSubviews()}this.measureAttrName=c?"boundsHeight":"boundsWidth";this.measureAttrBaseName=c?"height":"width";this.parentSetterName=c?"setHeight":"setWidth";if(a){this.startMonitoringAllSubviews()}this.callSuper(b)}},setNoAddSubviewOptimization:function(a){this.noAddSubviewOptimization=a},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.inited){this.fireNewEvent("spacing",a);this.update()}}},setOutset:function(a){if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a);this.update()}}},addSubview:function(a){var b=this.locked;if(!this.noAddSubviewOptimization){this.locked=true}this.callSuper(a);this.locked=b},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},updateSubview:function(d,a,b,e){var c=a[this.measureAttrName];a[b](e+(c-a[this.measureAttrBaseName])/2);return e+c+this.spacing},updateParent:function(a,b){this.parent[this.parentSetterName](b+this.outset-this.spacing)}});myt.ResizeLayout=new JS.Class("SpacedLayout",myt.SpacedLayout,{setCollapseParent:function(a){},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(this.inited){var b=a==="x";this.stopMonitoringParent(b?"height":"width");this.startMonitoringParent(b?"width":"height")}this.callSuper(a)}},setParent:function(a){if(this.parent!==a){var b=this.targetAttrName==="x"?"width":"height";if(this.parent){this.stopMonitoringParent(b)}this.callSuper(a);if(this.parent){this.startMonitoringParent(b)}}},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},doBeforeUpdate:function(){var e=this.measureAttrName,d=this.measureAttrBaseName,h=this.parent[d];h-=this.targetValue+this.outset;var b=this.subviews,c=b.length,a,f=0,g=0;while(c){a=b[--c];if(this.skipSubview(a)){continue}++f;if(a.layoutHint>0){g+=a.layoutHint}else{h-=a[e]}}if(f!==0){h-=(f-1)*this.spacing;this.remainder=h;this.resizeSum=g;this.scalingFactor=h/g;this.resizeSumUsed=this.remainderUsed=0;this.measureSetter=e==="boundsWidth"?"setWidth":"setHeight"}},updateSubview:function(d,a,b,e){var f=a.layoutHint;if(f>0){this.resizeSumUsed+=f;var c=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(f*this.scalingFactor);this.remainderUsed+=c;a[this.measureSetter](c)}return this.callSuper(d,a,b,e)},startMonitoringSubview:function(a){if(!(a.layoutHint>0)){this.attachTo(a,"update",this.measureAttrName)}this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){if(!(a.layoutHint>0)){this.detachFrom(a,"update",this.measureAttrName)}this.detachFrom(a,"update","visible")},updateParent:function(a,b){}});myt.AlignedLayout=new JS.Class("AlignedLayout",myt.VariableLayout,{initNode:function(b,a){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(b,a)},setTargetAttrName:function(b){if(this.targetAttrName!==b){var c=b==="y",a=this.inited;if(a){this.stopMonitoringAllSubviews()}this.measureAttrName=c?"boundsHeight":"boundsWidth";this.measureAttrBaseName=c?"height":"width";this.parentSetterName=c?"setHeight":"setWidth";if(a){this.startMonitoringAllSubviews()}this.callSuper(b)}},setAlign:function(a){if(this.align!==a){this.align=a;var b=this.locked;this.locked=true;this.setTargetAttrName((a==="middle"||a==="bottom"||a==="top")?"y":"x");this.locked=b;if(this.inited){this.fireNewEvent("align",a);this.update()}}},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},doBeforeUpdate:function(){var d=this.measureAttrName,e=0,b=this.subviews,a,c=b.length;while(c){a=b[--c];if(this.skipSubview(a)){continue}e=e>a[d]?e:a[d]}this.setTargetValue(e)},updateSubview:function(c,a,b,d){switch(this.align){case"center":case"middle":a[b]((d-a[this.measureAttrName])/2);break;case"right":case"bottom":a[b](d-a[this.measureAttrName]);break;default:a[b](0)}return d},updateParent:function(a,b){this.parent[this.parentSetterName](b)}});myt.ImageSupport=new JS.Module("ImageSupport",{extend:{SIZE_CACHE:{},OPEN_SIZE_QUERIES:{}},initNode:function(b,a){if(a.imageRepeat===undefined){a.imageRepeat="no-repeat"}if(a.imageAttachment===undefined){a.imageAttachment="scroll"}this.callSuper(b,a)},setImageUrl:function(a){if(this.imageUrl!==a){this.imageUrl=a;this.deStyle.backgroundImage=a?'url("'+a+'")':"none";if(this.inited){this.fireNewEvent("imageUrl",a);this.setNaturalWidth(undefined);this.setNaturalHeight(undefined);if(!a&&this.useNaturalSize){this.setWidth(0);this.setHeight(0)}}this.__calculateNaturalSize()}},setImageLoadingError:function(a){this.set("imageLoadingError",a,true)},setImageSize:function(a){if(this.imageSize!==a){this.imageSize=a;this.deStyle.backgroundSize=a||"auto";if(this.inited){this.fireNewEvent("imageSize",a)}}},setImageRepeat:function(a){if(this.imageRepeat!==a){this.deStyle.backgroundRepeat=this.imageRepeat=a;if(this.inited){this.fireNewEvent("imageRepeat",a)}}},setImagePosition:function(a){if(this.imagePosition!==a){this.deStyle.backgroundPosition=this.imagePosition=a;if(this.inited){this.fireNewEvent("imagePosition",a)}}},setImageAttachment:function(a){if(this.imageAttachment!==a){this.deStyle.backgroundAttachment=this.imageAttachment=a;if(this.inited){this.fireNewEvent("imageAttachment",a)}}},setCalculateNaturalSize:function(a){if(this.calculateNaturalSize!==a){this.calculateNaturalSize=a;if(this.inited){this.fireNewEvent("calculateNaturalSize",a)}this.__calculateNaturalSize()}},setNaturalWidth:function(a){if(this.naturalWidth!==a){this.naturalWidth=a;if(this.inited){this.fireNewEvent("naturalWidth",a)}if(this.useNaturalSize&&a){this.setWidth(a)}}},setNaturalHeight:function(a){if(this.naturalHeight!==a){this.naturalHeight=a;if(this.inited){this.fireNewEvent("naturalHeight",a)}if(this.useNaturalSize&&a){this.setHeight(a)}}},setUseNaturalSize:function(a){if(this.useNaturalSize!==a){this.useNaturalSize=a;if(this.inited){this.fireNewEvent("useNaturalSize",a)}if(a){if(this.naturalWidth){this.setWidth(this.naturalWidth)}if(this.naturalHeight){this.setHeight(this.naturalHeight)}}if(a&&!this.calculateNaturalSize){this.setCalculateNaturalSize(true)}}},__calculateNaturalSize:function(){var f=this.imageUrl;if(this.calculateNaturalSize&&f){var d=myt.ImageSupport.SIZE_CACHE,c=d[f];if(c){this.setNaturalWidth(c.width);this.setNaturalHeight(c.height)}else{var b=myt.ImageSupport.OPEN_SIZE_QUERIES,e=b[f];if(!e){b[f]=e=[];var a=new Image();a.onerror=function(h){var j=b[f];if(j){var g=j.length;while(g){j[--g].setImageLoadingError(true)}j.length=0;delete b[f]}};a.onload=function(){var j=this.width,l=this.height;var m=b[f];if(m){var k=m.length,g;while(k){g=m[--k];g.setNaturalWidth(j);g.setNaturalHeight(l)}m.length=0;delete b[f]}d[f]={width:j,height:l}};a.src=f}e.push(this)}}}});myt.Image=new JS.Class("Image",myt.View,{include:[myt.ImageSupport],initNode:function(b,a){if(a.useNaturalSize===undefined){a.useNaturalSize=true}this.callSuper(b,a)}});myt.SizeToChildren=new JS.Class("SizeToChildren",myt.Layout,{initNode:function(b,a){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(b,a)},setAxis:function(a){if(this.axis!==a){if(this.inited){this.stopMonitoringAllSubviews();this.axis=a;this.startMonitoringAllSubviews();this.fireNewEvent("axis",a);this.update()}else{this.axis=a}}},setPaddingX:function(a){if(this.paddingX!==a){this.paddingX=a;if(this.inited){this.fireNewEvent("paddingX",a);this.update()}}},setPaddingY:function(a){if(this.paddingY!==a){this.paddingY=a;if(this.inited){this.fireNewEvent("paddingY",a);this.update()}}},update:function(){if(this.canUpdate()){this.incrementLockedCounter();var b=this.parent;if(!b.isBeingDestroyed){var j=this.subviews,f=j.length,e,h,g,d,c=this.axis,a=Math.max;if(c!=="y"){e=f;g=0;while(e){h=j[--e];if(h.visible){d=h.boundsWidth;d=d>0?d:0;g=a(g,h.x+d)}}b.setWidth(g+this.paddingX)}if(c!=="x"){e=f;g=0;while(e){h=j[--e];if(h.visible){d=h.boundsHeight;d=d>0?d:0;g=a(g,h.y+d)}}b.setHeight(g+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(a){this.__updateMonitoringSubview(a,this.attachTo)},stopMonitoringSubview:function(a){this.__updateMonitoringSubview(a,this.detachFrom)},__updateMonitoringSubview:function(a,c){var b=this.axis;c=c.bind(this);if(b!=="y"){c(a,"update","x");c(a,"update","boundsWidth")}if(b!=="x"){c(a,"update","y");c(a,"update","boundsHeight")}c(a,"update","visible")}});myt.ThreePanel=new JS.Module("ThreePanel",{extend:{IGNORE_FUNCTION_MIXIN:{ignore:function(a){switch(a.name){case"first":case"second":case"third":return false;default:return true}}}},initNode:function(b,a){this.axis="x";this.repeat=false;this.callSuper(b,a)},doBeforeAdoption:function(){this.callSuper();var a=myt;new a.Image(this,{name:"first",imageUrl:this.firstImageUrl,ignoreLayout:true});var c=new a.Image(this,{name:"second",layoutHint:1,imageUrl:this.secondImageUrl,ignoreLayout:true,useNaturalSize:false,calculateNaturalSize:true});this.attachTo(c,"__updateSize","naturalWidth");this.attachTo(c,"__updateSize","naturalHeight");this.attachTo(c,"__updateImageSize","width");this.attachTo(c,"__updateImageSize","height");new a.Image(this,{name:"third",imageUrl:this.thirdImageUrl,ignoreLayout:true});var d=this.axis,b=d==="x"?"y":"x",e=[a.ThreePanel.IGNORE_FUNCTION_MIXIN];new a.ResizeLayout(this,{name:"resizeLayout",axis:d},e);new a.SizeToChildren(this,{name:"sizeToChildren",axis:b},e);this.__updateRepeat();this.__updateSize();this.__updateImageSize()},setFirstImageUrl:function(a){if(this.firstImageUrl!==a){this.firstImageUrl=a;if(this.inited){this.first.setImageUrl(a)}}},setSecondImageUrl:function(a){if(this.secondImageUrl!==a){this.secondImageUrl=a;if(this.inited){this.second.setImageUrl(a)}}},setThirdImageUrl:function(a){if(this.thirdImageUrl!==a){this.thirdImageUrl=a;if(this.inited){this.third.setImageUrl(a)}}},setRepeat:function(a){if(this.repeat!==a){this.repeat=a;if(this.inited){this.fireNewEvent("repeat",a);this.__updateRepeat()}}},setAxis:function(a){if(this.axis!==a){this.axis=a;if(this.inited){this.__updateRepeat();if(a==="x"){this.first.setY(0);this.second.setY(0);this.third.setY(0)}else{this.first.setX(0);this.second.setX(0);this.third.setX(0)}this.__updateSize();this.resizeLayout.setAxis(a);this.sizeToChildren.setAxis(a==="x"?"y":"x");this.fireNewEvent("axis",a)}}},__updateSize:function(b){var a=this.second;if(this.axis==="x"){a.setHeight(a.naturalHeight)}else{a.setWidth(a.naturalWidth)}},__updateImageSize:function(b){var a=this.second;a.setImageSize(this.repeat?undefined:a.width+"px "+a.height+"px")},__updateRepeat:function(a){this.second.setImageRepeat(this.repeat?(this.axis==="x"?"repeat-x":"repeat-y"):"no-repeat")}});myt.Canvas=new JS.Class("Canvas",myt.View,{createOurDomElement:function(b){var c=this.callSuper(b);var a=this.__canvas=document.createElement("canvas");a.className="mytUnselectable";c.appendChild(a);a.style.position="absolute";this.__ctx=a.getContext("2d");return c},setWidth:function(a,b){if(0>a){a=0}this.__canvas.setAttribute("width",a);this.callSuper(a,b)},setHeight:function(a,b){if(0>a){a=0}this.__canvas.setAttribute("height",a);this.callSuper(a,b)},setFillStyle:function(a){this.__ctx.fillStyle=a},getFillStyle:function(){return this.__ctx.fillStyle},setStrokeStyle:function(a){this.__ctx.strokeStyle=a},getStrokeStyle:function(){return this.__ctx.strokeStyle},setShadowColor:function(a){this.__ctx.shadowColor=a},getShadowColor:function(){return this.__ctx.shadowColor},setShadowBlur:function(a){this.__ctx.shadowBlur=a},getShadowBlur:function(){return this.__ctx.shadowBlur},setShadowOffsetX:function(a){this.__ctx.shadowOffsetX=a},getShadowOffsetX:function(){return this.__ctx.shadowOffsetX},setShadowOffsetY:function(a){this.__ctx.shadowOffsetY=a},getShadowOffsetY:function(){return this.__ctx.shadowOffsetY},setLineWidth:function(a){this.__ctx.lineWidth=a},getLineWidth:function(){return this.__ctx.lineWidth},setLineCap:function(a){this.__ctx.lineCap=a},getLineCap:function(){return this.__ctx.lineCap},setLineJoin:function(a){this.__ctx.lineJoin=a},getLineJoin:function(){return this.__ctx.lineJoin},setMiterLimit:function(a){this.__ctx.miterLimit=a},getMiterLimit:function(){return this.__ctx.miterLimit},setFont:function(a){this.__ctx.font=a},getFont:function(){return this.__ctx.font},setTextAlign:function(a){this.__ctx.textAlign=a},getTextAlign:function(){return this.__ctx.textAlign},setTextBaseline:function(a){this.__ctx.textBaseline=a},getTextBaseline:function(){return this.__ctx.textBaseline},setGlobalAlpha:function(a){this.__ctx.globalAlpha=a},getGlobalAlpha:function(){return this.__ctx.globalAlpha},setGlobalCompositeOperation:function(a){this.__ctx.globalCompositeOperation=a},getGlobalCompositeOperation:function(){return this.__ctx.globalCompositeOperation},sendSubviewToBack:function(a){if(a.parent===this){var d=this.domElement,c=d.childNodes[1];if(a.domElement!==c){var b=d.removeChild(a.domElement);if(b){d.insertBefore(b,c)}}}},clear:function(){var a=this.__ctx;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.width,this.height);a.restore()},dataURItoBlob:function(a,e){var d=atob(a.split(",")[1]),c=[];for(var b=0;b<d.length;b++){c.push(d.charCodeAt(b))}return new Blob([new Uint8Array(c)],{type:e})},getDataURL:function(b,a){return this.__canvas.toDataURL(b,a)},getImageFile:function(d,b,c){var f;switch(d){case"png":case"PNG":f="png";break;case"jpg":case"JPG":case"jpeg":case"JPEG":f="jpeg";if(c==null){c=0.5}break;default:console.warn("Unexpected image type: ",d);f=d.toLowerCase()}var e="image/"+f,a=this.dataURItoBlob(this.getDataURL(e,c),e);if(b){a.name=b+"."+f}return a},circle:function(b,c,a){this.__ctx.arc(b,c,a,0,2*Math.PI)},save:function(){var a=this.__ctx;a.save.apply(a,arguments)},restore:function(){var a=this.__ctx;a.restore.apply(a,arguments)},scale:function(){var a=this.__ctx;a.scale.apply(a,arguments)},rotate:function(){var a=this.__ctx;a.rotate.apply(a,arguments)},translate:function(){var a=this.__ctx;a.translate.apply(a,arguments)},transform:function(){var a=this.__ctx;a.transform.apply(a,arguments)},setTransform:function(){var a=this.__ctx;a.setTransform.apply(a,arguments)},createLinearGradient:function(){var a=this.__ctx;return a.createLinearGradient.apply(a,arguments)},createRadialGradient:function(){var a=this.__ctx;return a.createRadialGradient.apply(a,arguments)},createPattern:function(){var a=this.__ctx;return a.createPattern.apply(a,arguments)},clearRect:function(){var a=this.__ctx;a.clearRect.apply(a,arguments)},fillRect:function(){var a=this.__ctx;a.fillRect.apply(a,arguments)},strokeRect:function(){var a=this.__ctx;a.strokeRect.apply(a,arguments)},beginPath:function(){var a=this.__ctx;a.beginPath.apply(a,arguments)},closePath:function(){var a=this.__ctx;a.closePath.apply(a,arguments)},moveTo:function(){var a=this.__ctx;a.moveTo.apply(a,arguments)},lineTo:function(){var a=this.__ctx;a.lineTo.apply(a,arguments)},quadraticCurveTo:function(){var a=this.__ctx;a.quadraticCurveTo.apply(a,arguments)},bezierCurveTo:function(){var a=this.__ctx;a.bezierCurveTo.apply(a,arguments)},arcTo:function(){var a=this.__ctx;a.arcTo.apply(a,arguments)},rect:function(){var a=this.__ctx;a.rect.apply(a,arguments)},arc:function(){var a=this.__ctx;a.arc.apply(a,arguments)},fill:function(){var a=this.__ctx;a.fill.apply(a,arguments)},stroke:function(){var a=this.__ctx;a.stroke.apply(a,arguments)},clip:function(){var a=this.__ctx;a.clip.apply(a,arguments)},isPointInPath:function(){var a=this.__ctx;a.isPointInPath.apply(a,arguments)},fillText:function(){var a=this.__ctx;a.fillText.apply(a,arguments)},strokeText:function(){var a=this.__ctx;a.strokeText.apply(a,arguments)},measureText:function(){var a=this.__ctx;a.measureText.apply(a,arguments)},drawImage:function(){var a=this.__ctx;a.drawImage.apply(a,arguments)},createImageData:function(){var a=this.__ctx;a.createImageData.apply(a,arguments)},getImageData:function(){var a=this.__ctx;return a.getImageData.apply(a,arguments)},putImageData:function(){var a=this.__ctx;a.putImageData.apply(a,arguments)}});myt.UpdateableUI=new JS.Module("UpdateableUI",{initNode:function(b,a){this.callSuper(b,a);this.updateUI()},updateUI:function(){}});myt.Disableable=new JS.Module("Disableable",{initNode:function(b,a){if(a.disabled===undefined){a.disabled=false}this.callSuper(b,a)},setDisabled:function(a){if(this.disabled!==a){this.disabled=a;if(this.inited){this.fireNewEvent("disabled",a)}this.doDisabled()}},doDisabled:function(){if(this.inited){if(this.disabled&&this.giveAwayFocus){this.giveAwayFocus()}if(this.updateUI){this.updateUI()}}}});new JS.Singleton("GlobalMouse",{include:[myt.DomElementProxy,myt.DomObservable,myt.MouseObservable],initialize:function(){this.setDomElement(document);myt.global.register("mouse",this)}});myt.MouseOver=new JS.Module("MouseOver",{initNode:function(b,a){if(a.mouseOver===undefined){a.mouseOver=false}this.callSuper(b,a);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){if(this.mouseOver!==a){this.mouseOver=a;if(this.inited&&!this.__attachedToOverIdle){this.__attachedToOverIdle=true;this.attachTo(myt.global.idle,"__doMouseOverOnIdle","idle")}}},setDisabled:function(a){if(a&&this.mouseOver){this.setMouseOver(false)}this.callSuper(a)},__doMouseOverOnIdle:function(){this.detachFrom(myt.global.idle,"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=false;var a=this.mouseOver;if(this.__lastOverIdleValue!==a){this.__lastOverIdleValue=a;this.doSmoothMouseOver(a)}},doSmoothMouseOver:function(a){if(this.inited&&this.updateUI){this.updateUI()}},doMouseOver:function(a){if(!this.disabled){this.setMouseOver(true)}},doMouseOut:function(a){if(!this.disabled){this.setMouseOver(false)}}});myt.MouseDown=new JS.Module("MouseDown",{initNode:function(b,a){if(a.mouseDown===undefined){a.mouseDown=false}this.callSuper(b,a);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){if(this.mouseDown!==a){this.mouseDown=a;if(this.inited){if(a&&this.isFocusable()){this.focus(true)}if(this.updateUI){this.updateUI()}}}},setDisabled:function(a){if(a&&this.mouseDown){this.setMouseDown(false)}this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);if(this.mouseDown){this.detachFromDom(myt.global.mouse,"doMouseUp","mouseup",true)}},doMouseOut:function(a){this.callSuper(a);if(!this.disabled&&this.mouseDown){this.attachToDom(myt.global.mouse,"doMouseUp","mouseup",true)}},doMouseDown:function(a){if(!this.disabled){this.setMouseDown(true)}},doMouseUp:function(a){if(!this.mouseOver){this.detachFromDom(myt.global.mouse,"doMouseUp","mouseup",true)}if(!this.disabled&&this.mouseDown){this.setMouseDown(false);if(this.mouseOver){this.doMouseUpInside(a)}}},doMouseUpInside:function(a){if(this.doActivated){this.doActivated()}}});myt.MouseOverAndDown=new JS.Module("MouseOverAndDown",{include:[myt.MouseOver,myt.MouseDown]});myt.Activateable=new JS.Module("Activateable",{doActivated:function(){}});myt.KeyActivation=new JS.Module("KeyActivation",{extend:{DEFAULT_ACTIVATION_KEYS:[13,32]},initNode:function(b,a){this.activateKeyDown=-1;if(a.activationKeys===undefined){a.activationKeys=myt.KeyActivation.DEFAULT_ACTIVATION_KEYS}this.callSuper(b,a);this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyPress","keypress");this.attachToDom(this,"__handleKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=a},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__handleKeyDown:function(c){if(!this.disabled){if(this.activateKeyDown===-1||this.repeatKeyDown){var d=myt.KeyObservable.getKeyCodeFromEvent(c),b=this.activationKeys,a=b.length;while(a){if(d===b[--a]){if(this.activateKeyDown===d){this.doActivationKeyDown(d,true)}else{this.activateKeyDown=d;this.doActivationKeyDown(d,false)}c.value.preventDefault();return}}}}},__handleKeyPress:function(c){if(!this.disabled){var d=myt.KeyObservable.getKeyCodeFromEvent(c);if(this.activateKeyDown===d){var b=this.activationKeys,a=b.length;while(a){if(d===b[--a]){c.value.preventDefault();return}}}}},__handleKeyUp:function(c){if(!this.disabled){var d=myt.KeyObservable.getKeyCodeFromEvent(c);if(this.activateKeyDown===d){var b=this.activationKeys,a=b.length;while(a){if(d===b[--a]){this.activateKeyDown=-1;this.doActivationKeyUp(d);c.value.preventDefault();return}}}}},__doDomBlur:function(a){if(!this.disabled){var b=this.activateKeyDown;if(b!==-1){this.activateKeyDown=-1;this.doActivationKeyAborted(b)}}},doActivationKeyDown:function(b,a){},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:function(a){}});myt.Button=new JS.Module("Button",{include:[myt.Activateable,myt.UpdateableUI,myt.Disableable,myt.MouseOverAndDown,myt.KeyActivation],extend:{DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE:[0,0,7,"#666666"],DEFAULT_DISABLED_OPACITY:0.5},initNode:function(b,a){if(a.focusable===undefined){a.focusable=true}if(a.cursor===undefined){a.cursor="pointer"}this.callSuper(b,a)},setFocused:function(a){var b=this.focused;this.callSuper(a);if(this.inited&&this.focused!==b){this.updateUI()}},doActivationKeyDown:function(b,a){if(!a){this.updateUI()}},doActivationKeyUp:function(a){this.callSuper(a);this.updateUI()},doActivationKeyAborted:function(a){this.callSuper(a);this.updateUI()},updateUI:function(){if(this.disabled){if(this.__restoreCursor==null){this.__restoreCursor=this.cursor}this.setCursor("not-allowed");this.drawDisabledState()}else{var a=this.__restoreCursor;if(a){this.setCursor(a);this.__restoreCursor=null}if(this.activateKeyDown!==-1||this.mouseDown){this.drawActiveState()}else{if(this.focused){this.drawFocusedState()}else{if(this.mouseOver){this.drawHoverState()}else{this.drawReadyState()}}}}},drawDisabledState:function(){},drawFocusedState:function(){this.drawHoverState()},drawHoverState:function(){},drawActiveState:function(){},drawReadyState:function(){},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()}});myt.Color=new JS.Class("Color",{extend:{toHex:function(a){a=Math.round(Number(a)).toString(16);return a.length===1?"0"+a:a},rgbToHex:function(e,d,a,c){var b=this.toHex;return[c?"#":"",b(e),b(d),b(a)].join("")},cleanChannelValue:function(a){a=Math.round(a);if(a>255){return 255}if(a<0){return 0}return a},getRedChannel:function(a){return(16711680&a)>>16},getGreenChannel:function(a){return(65280&a)>>8},getBlueChannel:function(a){return(255&a)},makeColorFromNumber:function(a){return new myt.Color(this.getRedChannel(a),this.getGreenChannel(a),this.getBlueChannel(a))},makeColorFromHexString:function(a){if(a&&a.indexOf("#")===0){return this.makeColorFromNumber(parseInt(a.substring(1),16))}else{return null}},getLighterColor:function(e,d){var c=this.makeColorFromNumber(e),f=this.makeColorFromNumber(d);return c.isLighterThan(f)?e:d},makeColorNumberFromChannels:function(c,b,a){c=this.cleanChannelValue(c);b=this.cleanChannelValue(b);a=this.cleanChannelValue(a);return(c<<16)+(b<<8)+a},makeBlendedColor:function(a,c,b){return new myt.Color(a.red+(b*(c.red-a.red)),a.green+(b*(c.green-a.green)),a.blue+(b*(c.blue-a.blue)))}},initialize:function(c,b,a){this.setRed(c);this.setGreen(b);this.setBlue(a)},setRed:function(a){this.red=myt.Color.cleanChannelValue(a)},setGreen:function(a){this.green=myt.Color.cleanChannelValue(a)},setBlue:function(a){this.blue=myt.Color.cleanChannelValue(a)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return myt.Color.rgbToHex(this.red,this.green,this.blue,true)},isLighterThan:function(b){var a=this.getDiffFrom(b);return 0>(a.red+a.green+a.blue)},getDiffFrom:function(a){return{red:a.red-this.red,green:a.green-this.green,blue:a.blue-this.blue}},applyDiff:function(a){this.setRed(this.red+a.red);this.setGreen(this.green+a.green);this.setBlue(this.blue+a.blue);return this},add:function(a){this.setRed(this.red+a.red);this.setGreen(this.green+a.green);this.setBlue(this.blue+a.blue);return this},subtract:function(a){this.setRed(this.red-a.red);this.setGreen(this.green-a.green);this.setBlue(this.blue-a.blue);return this},multiply:function(a){this.setRed(this.red*a);this.setGreen(this.green*a);this.setBlue(this.blue*a);return this},divide:function(a){this.setRed(this.red/a);this.setGreen(this.green/a);this.setBlue(this.blue/a);return this},clone:function(){return new myt.Color(this.red,this.green,this.blue)},equals:function(a){if(a===this){return true}if(a&&a.isA&&a.isA(myt.Color)&&a.red===this.red&&a.green===this.green&&a.blue===this.blue){return true}return false}});myt.Path=new JS.Class("Path",{initialize:function(a){this.setVectors(a||[])},setVectors:function(a){this._boundingBox=null;this.vectors=a},copyFrom:function(a){this.vectors=a.vectors.slice();this._boundingBox=null},drawInto:function(b){b.beginPath();var d=this.vectors,a=d.length,c=0;b.moveTo(d[c++],d[c++]);for(;a>c;){b.lineTo(d[c++],d[c++])}b.closePath()},translate:function(b,a){var d=this.vectors,c=d.length;while(c){d[--c]+=a;d[--c]+=b}this._boundingBox=null},rotate:function(d){var j=Math.cos(d),g=Math.sin(d),h=this.vectors,b=h.length,f,c,e=0;for(;b>e;){f=h[e]*j-h[e+1]*g;c=h[e]*g+h[e+1]*j;h[e++]=f;h[e++]=c}this._boundingBox=null},rotateAroundOrigin:function(c,b,a){this.translate(-b,-a);this.rotate(c);this.translate(b,a)},getBoundingBox:function(){if(this._boundingBox){return this._boundingBox}var d=this.vectors,c=d.length,b,h,a,f,g,e;if(c>=2){g=e=d[--c];a=f=d[--c];while(c){h=d[--c];b=d[--c];g=Math.min(h,g);e=Math.max(h,e);a=Math.min(b,a);f=Math.max(b,f)}return this._boundingBox={x:a,y:g,width:f-a,height:e-g}}return this._boundingBox=null},getCenter:function(){var a=this.getBoundingBox();return a?{x:a.x+(a.width-a.x)/2,y:a.y+(a.height-a.y)/2}:null},isPointInPath:function(a,b){if(typeof a==="object"){b=a.y;a=a.x}return myt.Geometry.isPointInPath(a,b,this.getBoundingBox(),this.vectors)}});myt.DrawingUtil={drawRoundedRect:function(e,a,m,f,l,n,j){var b=l+j,o=f+n;e.beginPath();e.moveTo(f,l+a);e.lineTo(f,b-a);e.quadraticCurveTo(f,b,f+a,b);e.lineTo(o-a,b);e.quadraticCurveTo(o,b,o,b-a);e.lineTo(o,l+a);e.quadraticCurveTo(o,l,o-a,l);e.lineTo(f+a,l);e.quadraticCurveTo(f,l,f,l+a);if(m>0){var k=a-m,d=f+m,c=o-m,g=l+m,p=b-m;e.lineTo(d,g+k);e.quadraticCurveTo(d,g,d+k,g);e.lineTo(c-k,g);e.quadraticCurveTo(c,g,c,g+k);e.lineTo(c,p-k);e.quadraticCurveTo(c,p,c-k,p);e.lineTo(d+k,p);e.quadraticCurveTo(d,p,d,p-k);e.lineTo(d,g+k)}e.closePath()},drawRectOutline:function(d,k,e,j,l,g){var a=j+g,m=e+l,c=e+k,b=m-k,f=j+k,n=a-k;d.beginPath();d.moveTo(e,j);d.lineTo(e,a);d.lineTo(m,a);d.lineTo(m,j);d.lineTo(e,j);d.lineTo(c,f);d.lineTo(b,f);d.lineTo(b,n);d.lineTo(c,n);d.lineTo(c,f);d.closePath()},drawPartiallyRoundedRect:function(b,c,m,g,e,d,j,k,f){var a=j+f,l=d+k;b.beginPath();b.moveTo(d,j+c);b.lineTo(d,a-g);if(g>0){b.quadraticCurveTo(d,a,d+g,a)}b.lineTo(l-e,a);if(e>0){b.quadraticCurveTo(l,a,l,a-e)}b.lineTo(l,j+m);if(m>0){b.quadraticCurveTo(l,j,l-m,j)}b.lineTo(d+c,j);if(c>0){b.quadraticCurveTo(d,j,d,j+c)}b.closePath()},drawGradientArc:function(e,l,k,q,h,v,t,n,u){if(u==null){u=60}var p=Math.PI/u,m=Math.PI/360,z=n.length,x=0,w,a,o;for(;z>x+1;x++){w=n[x+1].angle-n[x].angle;a=Math.round(w/p);o=n[x].color.getDiffFrom(n[x+1].color);n[x].colorDelta={red:o.red/a,green:o.green/a,blue:o.blue/a}}var s=new myt.Path([l+q,k,l+h,k]),E,G,g,A,d,C=v;s.rotateAroundOrigin(C,l,k);var j=s.vectors,y=j[0],b=j[1],D=j[2],f=j[3],H=0;x=0;while(t>C){A=y;d=b;G=D;g=f;E=C;C+=p;if(C>t){p+=t-C;m=0;C=t}s.rotateAroundOrigin(p+m,l,k);y=j[0];b=j[1];D=j[2];f=j[3];e.beginPath();e.moveTo(A,d);e.lineTo(G,g);e.lineTo(D,f);e.lineTo(y,b);e.closePath();var F=n[x].color;var B=n[x].colorDelta;e.fillStyle=myt.Color.makeColorNumberFromChannels(F.red+(H*B.red),F.green+(H*B.green),F.blue+(H*B.blue));e.fill();if(m>0){s.rotateAroundOrigin(-m,l,k);y=j[0];b=j[1];D=j[2];f=j[3]}H++;if(C>=n[x+1].angle){H=0;x++}}}};myt.DrawingMethod=new JS.Class("DrawingMethod",{extend:{_drawingMethods:{},get:function(b){var a=this._drawingMethods,d=a[b];if(!d){var c=myt.resolveName(b);if(c){a[b]=d=new c()}}return d},draw:function(c,b,a){var d=this.get(c);if(d){d.draw(b,a)}else{console.log("Unknown DrawingMethod",c)}}},draw:function(b,a){}});myt.DrawButton=new JS.Class("DrawButton",myt.Canvas,{include:[myt.Button],initNode:function(b,a){this.drawBounds={x:0,y:0,w:0,h:0};this.callSuper(b,a)},setDrawingMethodClassname:function(a){if(this.drawingMethodClassname!==a){this.drawingMethodClassname=a;this.setDrawingMethod(myt.DrawingMethod.get(a))}},setDrawingMethod:function(a){if(this.drawingMethod!==a){this.drawingMethod=a;if(this.inited){this.updateUI()}}},getDrawBounds:function(){var a=this.drawBounds;a.w=this.width;a.h=this.height;return a},getDrawConfig:function(a){return{state:a,focused:this.focused,bounds:this.getDrawBounds()}},setWidth:function(a,b){this.callSuper(a,b);if(this.inited){this.redraw()}},setHeight:function(a,b){this.callSuper(a,b);if(this.inited){this.redraw()}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.redraw("disabled")},drawHoverState:function(){this.setOpacity(1);this.redraw("hover")},drawActiveState:function(){this.setOpacity(1);this.redraw("active")},drawReadyState:function(){this.setOpacity(1);this.redraw("ready")},redraw:function(b){if(b===undefined){b=this.__lastState}this.__lastState=b;var a=this.drawingMethod||this;a.draw(this,this.getDrawConfig(b))},draw:function(b,a){myt.dumpStack("No drawing method found")}});myt.SimpleButton=new JS.Class("SimpleButton",myt.View,{include:[myt.Button],initNode:function(b,a){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(b,a)},setActiveColor:function(a){if(this.activeColor!==a){this.activeColor=a;if(this.inited){this.updateUI()}}},setHoverColor:function(a){if(this.hoverColor!==a){this.hoverColor=a;if(this.inited){this.updateUI()}}},setReadyColor:function(a){if(this.readyColor!==a){this.readyColor=a;if(this.inited){this.updateUI()}}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.setBgColor(this.readyColor)},drawHoverState:function(){this.setOpacity(1);this.setBgColor(this.hoverColor)},drawActiveState:function(){this.setOpacity(1);this.setBgColor(this.activeColor)},drawReadyState:function(){this.setOpacity(1);this.setBgColor(this.readyColor)}});myt.IconTextButtonContent=new JS.Module("IconTextButtonContent",{initNode:function(c,a){this.textY=this.iconY="middle";this.iconSpacing=2;this.inset=this.outset=0;if(a.shrinkToFit===undefined){a.shrinkToFit=false}if(a.contentAlign===undefined){a.contentAlign="center"}this.callSuper(c,a);var d=this.iconView,b=this.textView;this.applyConstraint("__updateContentPosition",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",this,"iconSpacing",this,"contentAlign",d,"width",d,"visible",b,"visible",b,"width"])},doAfterAdoption:function(){var b,c=this.iconY,a=this.textY;b={name:"iconView",imageUrl:this.iconUrl};if(typeof c==="string"){b.valign=c}else{b.y=c}new myt.Image(this,b);b={name:"textView",whiteSpace:"nowrap",text:this.text,domClass:"myt-Text mytButtonText"};if(typeof a==="string"){b.valign=a}else{b.y=a}new myt.Text(this,b);this.callSuper()},setInset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a)}}},setOutset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a)}}},setText:function(a){if(this.text!==a){this.text=a;if(this.inited){this.textView.setText(a);this.fireNewEvent("text",a)}}},setShrinkToFit:function(a){if(this.shrinkToFit!==a){this.shrinkToFit=a;if(this.inited){this.fireNewEvent("shrinkToFit",a)}}},setContentAlign:function(a){if(this.contentAlign!==a){this.contentAlign=a;if(this.inited){this.fireNewEvent("contentAlign",a)}}},setIconUrl:function(a){if(this.iconUrl!==a){this.iconUrl=a;if(this.inited){this.fireNewEvent("iconUrl",a);this.iconView.setImageUrl(a)}}},setIconY:function(a){if(this.iconY!==a){this.iconY=a;if(this.inited){this.fireNewEvent("iconY",a);if(typeof a==="string"){this.iconView.setValign(a)}else{this.iconView.setY(a)}}}},setIconSpacing:function(a){if(this.iconSpacing!==a){this.iconSpacing=a;if(this.inited){this.fireNewEvent("iconSpacing",a)}}},setTextY:function(a){if(this.textY!==a){this.textY=a;if(this.inited){this.fireNewEvent("textY",a);if(typeof a==="string"){this.textView.setValign(a)}else{this.textView.setValign("");this.textView.setY(a)}}}},__updateContentPosition:function(k){if(this.__updateContentPositionLoopBlock||this.destroyed){return}var m=this.inset,d=this.outset,c=this.iconView,h=this.textView,l=h.visible&&this.text,f=c.visible?c.width:0,j=f+(l&&f>0?this.iconSpacing:0),g=l?h.width:0;if(this.shrinkToFit){var e=m;c.setX(e);e+=j;h.setX(e);e+=g+d;this.__updateContentPositionLoopBlock=true;this.setWidth(e);this.__updateContentPositionLoopBlock=false}else{var b;if(this.contentAlign==="left"){b=m}else{if(this.contentAlign==="center"){var a=this.width-m-j-g-d;b=m+(a/2)}else{b=this.width-j-g-d}}c.setX(b);h.setX(b+j)}}});myt.BaseTooltip=new JS.Class("BaseTooltip",myt.View,{include:[myt.RootView],extend:{DEFAULT_TIP_DELAY:500,DEFAULT_TIP_HIDE_DELAY:100},initNode:function(b,a){var c=myt.BaseTooltip;this.tipDelay=this.nextTipDelay=c.DEFAULT_TIP_DELAY;this.tipHideDelay=c.DEFAULT_TIP_HIDE_DELAY;if(a.visible===undefined){a.visible=false}this.callSuper(b,a);this.__checkTipCallback=new myt.Callback("__checkTip",this);this.__checkTipTimer=new myt.Timer()},setTooltip:function(a){if(this.inited){this.tooltip=a;if(a){this.attachToDom(myt.global.mouse,"__checkMouseMovement","mousemove",true);var b=a.parent;this.attachToDom(b,"hideTip","mousedown",true);this.attachToDom(b,"hideTip","mouseup",true)}}},__checkMouseMovement:function(a){this._lastPos=myt.MouseObservable.getMouseFromEvent(a);if(this.__checkIn()){this.__checkTipTimer.reset(this.__checkTipCallback,this.nextTipDelay)}},__checkTip:function(){if(this.__checkIn()){this.showTip()}},__checkIn:function(){var a=this.tooltip;if(a){var b=this._lastPos;if(a.parent.containsPoint(b.x,b.y)){return true}}this.hideTip();return false},hideTip:function(a){this.__checkTipTimer.clear();var b=this.tooltip.parent;this.detachFromDom(b,"hideTip","mousedown",true);this.detachFromDom(b,"hideTip","mouseup",true);this.detachFromDom(myt.global.mouse,"__checkMouseMovement","mousemove",true);this.nextTipDelay=this.tipDelay;this.setVisible(false);return true},showTip:function(){if(!myt.global.dragManager.dragView){this.nextTipDelay=this.tipHideDelay;this.bringToFront();this.setVisible(true)}}});myt.Tooltip=new JS.Class("Tooltip",myt.BaseTooltip,{extend:{DEFAULT_POINTER_WIDTH:7,DEFAULT_POINTER_HEIGHT:4,DEFAULT_EDGE_WIDTH:1,DEFAULT_POINTER_INSET:2,DEFAULT_HORIZONTAL_INSET:4,DEFAULT_TOP_INSET:2,DEFAULT_BOTTOM_INSET:3,DEFAULT_SHADOW_WIDTH:2,DEFAULT_MAX_TEXT_WIDTH:280,DEFAULT_TIP_BG_COLOR:"#dddddd",DEFAULT_EDGE_COLOR:"#666666",DEFAULT_SHADOW_COLOR:"#000000"},initNode:function(c,b){var a=myt.Tooltip;if(b.pointerWidth===undefined){b.pointerWidth=a.DEFAULT_POINTER_WIDTH}if(b.pointerHeight===undefined){b.pointerHeight=a.DEFAULT_POINTER_HEIGHT}if(b.edgeWidth===undefined){b.edgeWidth=a.DEFAULT_EDGE_WIDTH}if(b.pointerInset===undefined){b.pointerInset=a.DEFAULT_POINTER_INSET}if(b.insetH===undefined){b.insetH=a.DEFAULT_HORIZONTAL_INSET}if(b.insetTop===undefined){b.insetTop=a.DEFAULT_TOP_INSET}if(b.insetBottom===undefined){b.insetBottom=a.DEFAULT_BOTTOM_INSET}if(b.shadowWidth===undefined){b.shadowWidth=a.DEFAULT_SHADOW_WIDTH}if(b.maxTextWidth===undefined){b.maxTextWidth=a.DEFAULT_MAX_TEXT_WIDTH}if(b.tipBgColor===undefined){b.tipBgColor=a.DEFAULT_TIP_BG_COLOR}if(b.edgeColor===undefined){b.edgeColor=a.DEFAULT_EDGE_COLOR}if(b.shadowColor===undefined){b.shadowColor=a.DEFAULT_SHADOW_COLOR}this.__tipWidth=0;this.callSuper(c,b);new myt.Canvas(this,{name:"_bg",percentOfParentWidth:100,percentOfParentHeight:100},[myt.SizeToParent]);new myt.Text(this,{name:"_tipText",fontSize:"12px",x:this.edgeWidth+this.insetH,whiteSpace:"inherit"})},setPointerWidth:function(a){this.pointerWidth=a},setPointerHeight:function(a){this.pointerHeight=a},setEdgeWidth:function(a){this.edgeWidth=a},setPointerInset:function(a){this.pointerInset=a},setInsetH:function(a){this.insetH=a},setInsetTop:function(a){this.insetTop=a},setInsetBottom:function(a){this.insetBottom=a},setShadowWidth:function(a){this.shadowWidth=a},setMaxTextWidth:function(a){this.maxTextWidth=a},setTipBgColor:function(a){this.tipBgColor=a},setEdgeColor:function(a){this.edgeColor=a},setShadowColor:function(a){this.shadowColor=a},showTip:function(){var a=this.tooltip,m=a.text,f=a.parent,e=this._tipText,u=this.insetTop,l=this.shadowWidth;if(e.text!==m){e.setText(m)}var c=myt.global.windowResize,g={x:0,y:0,width:c.getWidth(),height:c.getHeight()},j=0,t=0;var b=f.getPagePosition(),p=b.x,h=b.y;e.setWidth("auto");var q=Math.min(e.measureNoWrapWidth(),this.maxTextWidth),d=e.x;this.__tipWidth=2*d+q;e.setWidth(q);e.sizeViewToDom();if(a.tipalign==="right"){p+=f.width-this.__tipWidth;d+=e.width-this.pointerInset-this.pointerWidth}else{d+=this.pointerInset}var k;if(j>p){k=j-p;p+=k;d-=k}if(p+this.__tipWidth>j+g.width){k=(p+this.__tipWidth)-(j+g.width);p-=k;d+=k}var n=2*this.edgeWidth+u+this.insetBottom+e.height+this.pointerHeight,r=f.height,s,o;switch(a.tipvalign){case"below":o=h+r;s=true;if(o+n>t+g.height){o=h-n;s=false}break;case"above":default:o=h-n;s=false;if(t>o){o=h+r;s=true}break}this.setX(Math.round(p));this.setY(Math.round(o));e.setY(u+this.edgeWidth+(s?this.pointerHeight:0));this.setWidth(this.__tipWidth+l);this.setHeight(n+l);this.__redraw(d,s);this.callSuper()},__redraw:function(a,c){var d=this._bg,n=this.__tipWidth,l=c?this.pointerHeight:0,b=2*this.edgeWidth+this.insetTop+this.insetBottom+this._tipText.height+l,m=this.pointerWidth,f=a+m/2,j=a+m,h=this.pointerHeight,g=this.shadowWidth,k=this.edgeWidth,e=d.lineTo.bind(d);d.clear();d.beginPath();d.moveTo(g,l+g);e(n+g,l+g);e(n+g,b+g);e(g,b+g);d.closePath();d.setGlobalAlpha(0.3);d.setFillStyle(this.shadowColor);d.fill();d.setGlobalAlpha(1);d.beginPath();d.moveTo(0,l);if(c){e(a,l);e(f,l-h);e(j,l)}e(n,l);e(n,b);if(!c){e(j,b);e(f,b+h);e(a,b)}e(0,b);d.closePath();d.setFillStyle(this.edgeColor);d.fill();n-=k;l+=k;b-=k;d.beginPath();d.moveTo(k,l);if(c){e(a,l);e(f,l-h);e(j,l)}e(n,l);e(n,b);if(!c){e(j,b);e(f,b+h);e(a,b)}e(k,b);d.closePath();d.setFillStyle(this.tipBgColor);d.fill()}});myt.TooltipMixin=new JS.Module("TooltipMixin",{extend:{DEFAULT_TIP_CLASS:myt.Tooltip},setTooltip:function(a){if(this.tooltip!==a){this.tooltip=a;if(this.inited){this.fireNewEvent("tooltip",a)}}},setTipAlign:function(a){if(this.tipAlign!==a){this.tipAlign=a;if(this.inited){this.fireNewEvent("tipAlign",a)}}},setTipValign:function(a){if(this.tipValign!==a){this.tipValign=a;if(this.inited){this.fireNewEvent("tipValign",a)}}},setTipClass:function(a){if(this.tipClass!==a){this.tipClass=a;if(this.inited){this.fireNewEvent("tipClass",a)}}},doSmoothMouseOver:function(e){this.callSuper(e);if(e&&this.tooltip){var b=this.tipClass||myt.TooltipMixin.DEFAULT_TIP_CLASS,d=myt.global,a=d.tooltipView;if(a&&!(a instanceof b)){d.unregister("tooltipView");a.destroy();a=null}if(!a){var c=document.getElementById("tooltipDiv");if(!c){c=myt.DomElementProxy.createDomElement("div",{position:"absolute"});myt.getElement().appendChild(c)}a=new b(c,{domId:"tooltipDiv"});d.register("tooltipView",a)}a.setTooltip({parent:this,text:this.tooltip,tipalign:this.tipAlign||"left",tipvalign:this.tipValign||"above"})}}});myt.SimpleIconTextButton=new JS.Class("SimpleIconTextButton",myt.SimpleButton,{include:[myt.IconTextButtonContent,myt.TooltipMixin]});myt.BaseMouseablePanel=new JS.Module("BaseMouseablePanel",{include:[myt.Button],initNode:function(b,a){this.extension="png";if(a.repeat===undefined){a.repeat=false}this.callSuper(b,a)},setImageRoot:function(a){if(this.imageRoot!==a){this.imageRoot=a;if(this.inited){updateUI()}}},setExtension:function(a){if(this.extension!==a){this.extension=a;if(this.inited){updateUI()}}},setFirstPrefix:function(a){if(this.firstPrefix!==a){this.firstPrefix=a;if(this.inited){updateUI()}}},setSecondPrefix:function(a){if(this.secondPrefix!==a){this.secondPrefix=a;if(this.inited){updateUI()}}},setThirdPrefix:function(a){if(this.thirdPrefix!==a){this.thirdPrefix=a;if(this.inited){updateUI()}}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.__updateImageUrls("up")},drawHoverState:function(){this.setOpacity(1);this.__updateImageUrls("mo")},drawActiveState:function(){this.setOpacity(1);this.__updateImageUrls("dn")},drawReadyState:function(){this.setOpacity(1);this.__updateImageUrls("up")},__updateImageUrls:function(c){var b="_"+c+"."+this.extension,a=this.imageRoot;this.first.setImageUrl(a+this.firstPrefix+b);this.second.setImageUrl(a+this.secondPrefix+b);this.third.setImageUrl(a+this.thirdPrefix+b)}});myt.HorizontalThreePanel=new JS.Module("HorizontalThreePanel",{initNode:function(b,a){this.repeat=true;this.callSuper(b,a)},doBeforeAdoption:function(){this.callSuper();var a=myt;new a.Image(this,{name:"first",imageUrl:this.firstImageUrl,ignoreLayout:true});var b=new a.Image(this,{name:"second",layoutHint:1,imageUrl:this.secondImageUrl,ignoreLayout:true,useNaturalSize:false,calculateNaturalSize:true});this.attachTo(b,"__updateSize","naturalHeight");this.attachTo(b,"__updateImageSize","width");new a.Image(this,{name:"third",imageUrl:this.thirdImageUrl,ignoreLayout:true});var c=[a.ThreePanel.IGNORE_FUNCTION_MIXIN];new a.ResizeLayout(this,{name:"resizeLayout"},c);new a.SizeToChildren(this,{axis:"y"},c);this.__updateRepeat();this.__updateSize()},setFirstImageUrl:function(a){if(this.firstImageUrl!==a){this.firstImageUrl=a;if(this.inited){this.first.setImageUrl(a)}}},setSecondImageUrl:function(a){if(this.secondImageUrl!==a){this.secondImageUrl=a;if(this.inited){this.second.setImageUrl(a)}}},setThirdImageUrl:function(a){if(this.thirdImageUrl!==a){this.thirdImageUrl=a;if(this.inited){this.third.setImageUrl(a)}}},setRepeat:function(a){if(this.repeat!==a){this.repeat=a;if(this.inited){this.fireNewEvent("repeat",a);this.__updateRepeat()}}},__updateSize:function(b){var a=this.second;a.setHeight(a.naturalHeight);this.__updateImageSize()},__updateImageSize:function(b){var a=this.second;a.setImageSize(this.repeat?undefined:a.width+"px "+a.height+"px")},__updateRepeat:function(){this.second.setImageRepeat(this.repeat?"repeat-x":"no-repeat")}});myt.MouseableH3Panel=new JS.Module("MouseableH3Panel",{include:[myt.BaseMouseablePanel,myt.HorizontalThreePanel],initNode:function(b,a){this.firstPrefix="lft";this.secondPrefix="ctr";this.thirdPrefix="rt";this.callSuper(b,a)}});myt.PanelButton=new JS.Class("PanelButton",myt.View,{include:[myt.MouseableH3Panel],initNode:function(b,a){this.imageRoot=myt.IMAGE_ROOT+"component/panelbutton/rsrc/";this.callSuper(b,a)}});myt.IconTextPanelButton=new JS.Class("IconTextPanelButton",myt.PanelButton,{include:[myt.IconTextButtonContent,myt.TooltipMixin],doAfterAdoption:function(){this.syncTo(this.first,"setInset","width");this.syncTo(this.third,"setOutset","width");this.callSuper()}});myt.DelayedMethodCall=new JS.Class("DelayedMethodCall",{extend:{createDelayedMethodCall:function(j,c,g){var h=myt.AccessorSupport.generateName,a=h("delayed",g),b=h("timer",g),f=h("callback",g),d=typeof j==="function"||j instanceof JS.Module;if((d?j.instanceMethod(a):j[a])!==undefined){console.warn("Can't clobber existing property during setup of delayed method function.",a,j);return false}if((d?j.instanceMethod(b):j[b])!==undefined){console.warn("Can't clobber existing property during setup of delayed method timer reference.",b,j);return false}if((d?j.instanceMethod(f):j[f])!==undefined){console.warn("Can't clobber existing property during setup of delayed method callback reference.",f,j);return false}var e={};e[a]=function(){var l=this[f];if(!l){l=this[f]=new myt.Callback(g,this)}var k=this[b];if(k){k.reset(l,c)}else{this[b]=new myt.Timer(l,c)}};if(d){j.include(e)}else{j.extend(e)}return true}}});myt.DelayedMethodCall.createDelayedMethodCall(myt.DelayedMethodCall,0,"execute");myt.FloatingPanel=new JS.Class("FloatingPanel",myt.View,{include:[myt.RootView],initNode:function(b,a){var c=document.createElement("div");c.style.position="absolute";myt.getElement().appendChild(c);this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=true;a.visible=a.focusEmbellishment=false;a.focusable=a.focusCage=true;this.callSuper(c,a)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=a},__doMouseDown:function(d){var a=d.value,c=a.pageX,b=a.pageY;if(!this.containsPoint(c,b)&&(this.ignoreOwnerForHideOnMouseDown?!this.owner.containsPoint(c,b):true)){this.doMouseDownOutside()}return true},doMouseDownOutside:function(){if(this.hideOnMouseDown){this.hide()}},focus:function(c){var a=myt.global.focus;if(this.owner&&this.isAncestorOf(a.focusedView)){this.owner[a.lastTraversalWasForward?"getNextFocusAfterPanel":"getPrevFocusAfterPanel"](this.panelId).focus(c)}else{var b=this.getFirstFocusableDescendant();if(b===this){this.callSuper(c)}else{b.focus(c)}}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){var a=b.value;if(a&&!this.isAncestorOf(a)){this.doLostFocus()}},doLostFocus:function(){if(this.hideOnBlur){if(this.ignoreOwnerForHideOnBlur&&myt.global.focus.focusedView===this.owner){return}this.hide(true)}},isShown:function(){return this.visible},show:function(b){if(!this.isShown()){this.bringToFront();this.updateLocation(b);this.setVisible(true);this.owner.notifyPanelShown(this);var a=myt.global;this.attachToDom(a.mouse,"__doMouseDown","mousedown",true);this.attachTo(a.focus,"__doFocusChange","focused")}},hide:function(b){if(this.isShown()){var a=myt.global;this.detachFromDom(a.mouse,"__doMouseDown","mousedown",true);this.detachFrom(a.focus,"__doFocusChange","focused");this.setVisible(false);this.owner.notifyPanelHidden(this);if(!b){this.restoreFocus()}this.setOwner()}},restoreFocus:function(){if(this.owner){this.owner.focus()}},updateLocation:function(f){this.setOwner(f);var d=this.panelId,h=f.getFloatingAlignForPanelId(d),c=f.getFloatingValignForPanelId(d),b=f.getPagePosition(),a=0,g=0,e=typeof h;if(e==="string"){a=b.x+f.getFloatingAlignOffsetForPanelId(d);switch(h){case"outsideRight":a+=f.width;break;case"insideRight":a+=f.width-this.width;break;case"outsideLeft":a-=this.width;break;case"insideLeft":break;default:console.warn("Unexpected align value",e,h)}}else{if(e==="number"){a=h}else{console.warn("Unexpected align type",e,h)}}this.setX(a);e=typeof c;if(e==="string"){g=b.y+f.getFloatingValignOffsetForPanelId(d);switch(c){case"outsideBottom":g+=f.height;break;case"insideBottom":g+=f.height-this.height;break;case"outsideTop":g-=this.height;break;case"insideTop":break;default:console.warn("Unexpected valign value",e,c)}}else{if(e==="number"){g=c}else{console.warn("Unexpected valign type",e,c)}}this.setY(g)}});myt.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{classesByPanelId:{},panelsByPanelId:{}},initNode:function(b,a){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(b,a)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=a},setFloatingAlign:function(a){this.set("floatingAlign",a,true)},setFloatingValign:function(a){this.set("floatingValign",a,true)},setFloatingAlignOffset:function(a){this.set("floatingAlignOffset",a,true)},setFloatingValignOffset:function(a){this.set("floatingValignOffset",a,true)},createFloatingPanel:function(c,a,d){c=c||this.floatingPanelId;var b=myt.FloatingPanelAnchor;a=a||b.classesByPanelId[c];if(!a){console.log("No panel class found for panelId:",c);return null}d=d||{};d.panelId=c;return b.panelsByPanelId[c]=new a(null,d)},getFloatingPanel:function(a){return myt.FloatingPanelAnchor.panelsByPanelId[a||this.floatingPanelId]},toggleFloatingPanel:function(b){var a=this.getFloatingPanel(b=b||this.floatingPanelId);if(a&&a.isShown()){this.hideFloatingPanel(b)}else{this.showFloatingPanel(b)}},showFloatingPanel:function(b){var a=this.getFloatingPanel(b||this.floatingPanelId);if(a){a.show(this);this.setLastFloatingPanelShown(a)}},hideFloatingPanel:function(b){var a=this.getFloatingPanel(b||this.floatingPanelId);if(a){a.hide();this.setLastFloatingPanelShown()}},notifyPanelShown:function(a){},notifyPanelHidden:function(a){},getFloatingAlignForPanelId:function(a){return this.floatingAlign},getFloatingValignForPanelId:function(a){return this.floatingValign},getFloatingAlignOffsetForPanelId:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanelId:function(a){return this.floatingValignOffset},getNextFocus:function(){var a=this.lastFloatingPanelShown;if(a&&a.isShown()){return a}return this.callSuper?this.callSuper():null},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});myt.ListViewItemMixin=new JS.Module("ListViewItemMixin",{setListView:function(a){this.listView=a},getMinimumWidth:function(){return 0},syncToDom:function(){}});myt.ListViewItem=new JS.Class("ListViewItem",myt.SimpleIconTextButton,{include:[myt.ListViewItemMixin],initNode:function(b,a){if(a.height===undefined){a.height=24}if(a.activeColor===undefined){a.activeColor="#bbbbbb"}if(a.hoverColor===undefined){a.hoverColor="#ffffff"}if(a.readyColor===undefined){a.readyColor="#eeeeee"}if(a.contentAlign===undefined){a.contentAlign="left"}if(a.inset===undefined){a.inset=8}if(a.outset===undefined){a.outset=8}if(a.activationKeys===undefined){a.activationKeys=[13,27,32,37,38,39,40]}this.callSuper(b,a)},syncToDom:function(){this.textView.sizeViewToDom()},getMinimumWidth:function(){var d=this.iconView,b=this.textView,c=b.visible&&this.text,f=d.visible?d.width:0,a=f+(c&&f>0?this.iconSpacing:0),e=c?Math.ceil(b.width):0;return this.inset+a+e+this.outset},doActivated:function(){this.listView.doItemActivated(this)},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},doActivationKeyDown:function(b,a){switch(b){case 27:this.listView.owner.hideFloatingPanel();return;case 37:case 38:myt.global.focus.prev();break;case 39:case 40:myt.global.focus.next();break}this.callSuper(b,a)}});myt.ListViewSeparator=new JS.Class("ListViewSeparator",myt.View,{include:[myt.ListViewItemMixin],initNode:function(b,a){if(a.height===undefined){a.height=1}if(a.bgColor===undefined){a.bgColor="#666666"}this.callSuper(b,a)},getMinimumWidth:function(){return 0}});myt.ListView=new JS.Class("ListView",myt.FloatingPanel,{initNode:function(b,a){this.items=[];this.maxHeight=-1;this.minWidth=0;if(a.defaultItemClass===undefined){a.defaultItemClass=myt.ListViewItem}if(a.overflow===undefined){a.overflow="autoy"}if(a.bgColor===undefined){a.bgColor="#cccccc"}if(a.boxShadow===undefined){a.boxShadow=myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE}this.callSuper(b,a);this.__updateItems();new myt.SpacedLayout(this.getContentView(),{axis:"y",spacing:1,collapseParent:true})},setMinWidth:function(a){this.minWidth=a},setDefaultItemClass:function(a){this.defaultItemClass=a},setItemConfig:function(a){this.itemConfig=a;if(this.inited){this.__updateItems()}},getContentView:function(a){return this},setMaxHeight:function(a){if(this.maxHeight!==a){this.maxHeight=a;if(this.inited){this.fireNewEvent("maxHeight",a);this.setHeight(this.height)}}},setHeight:function(a,b){if(this.maxHeight>=0){a=Math.min(this.maxHeight,a)}this.callSuper(a,b)},doItemActivated:function(b){var a=this.owner;if(a){a.doItemActivated(b)}},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()||this.callSuper()},getFirstFocusableItem:function(){var b=this.items,d,a=b.length,c=0;for(;a>c;++c){d=b[c];if(d.isFocusable()){return d}}return null},getLastFocusableItem:function(){var a=this.items,c,b=a.length;while(b){c=a[--b];if(c.isFocusable()){return c}}return null},__updateItems:function(){var d=this.itemConfig||[],e=d.length,b,m,t,h=this.items,l=h.length,q,n=this.defaultItemClass,a=this.getContentView(),p=a.getLayouts(),r,c=p.length,k,j,g=this.minWidth;k=c;while(k){p[--k].incrementLockedCounter()}var s=a.domElement,o=s.nextSibling,f=s.parentNode;f.removeChild(s);for(k=0;e>k;++k){b=d[k];m=b.klass||n;t=b.attrs||{};q=h[k];if(q&&!q.isA(m)){q.destroy();q=null}if(!q){q=h[k]=new m(a,{listView:this})}if(q){q.callSetters(t);q.__LAYOUT_IDX=k}}f.insertBefore(s,o);for(k=0;e>k;++k){q=h[k];q.syncToDom();j=q.getMinimumWidth();if(j>g){g=j}}for(;l>k;++k){h[k].destroy()}h.length=e;for(k=0;e>k;++k){h[k].setWidth(g)}a.setWidth(g);k=c;while(k){r=p[--k];r.sortSubviews(function(v,u){return v.__LAYOUT_IDX-u.__LAYOUT_IDX});r.decrementLockedCounter();r.update()}}});myt.ListViewAnchor=new JS.Module("ListViewAnchor",{include:[myt.FloatingPanelAnchor],initNode:function(b,a){if(a.listViewClass===undefined){a.listViewClass=myt.ListView}if(a.listViewAttrs===undefined){a.listViewAttrs={}}if(a.itemConfig===undefined){a.itemConfig=[]}if(a.activationKeys===undefined){a.activationKeys=[13,27,32,37,38,39,40]}this.callSuper(b,a)},setListViewClass:function(a){this.listViewClass=a},setListViewAttrs:function(a){this.listViewAttrs=a},setItemConfig:function(a){this.itemConfig=a},doItemActivated:function(a){this.hideFloatingPanel()},getFloatingPanel:function(a){return this.callSuper(a)||this.createFloatingPanel(a,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(b){var a=this.getFloatingPanel(b);if(a){a.setItemConfig(this.itemConfig);this.callSuper(b)}},doActivationKeyDown:function(b,a){if(b===27){this.hideFloatingPanel();return}switch(b){case 37:case 38:this.selectLastItem();break;case 39:case 40:this.selectFirstItem();break}this.callSuper(b,a)},doActivationKeyUp:function(a){if(a===27){return}this.callSuper(a);switch(a){case 37:case 38:this.selectLastItem();break;case 39:case 40:this.selectFirstItem();break}},selectLastItem:function(){var a=this.getFloatingPanel();if(a&&a.isShown()){var b=a.getLastFocusableItem();if(b){b.focus()}}},selectFirstItem:function(){var a=this.getFloatingPanel();if(a&&a.isShown()){var b=a.getFirstFocusableItem();if(b){b.focus()}}}});myt.CheckboxStyleMixin=new JS.Module("CheckboxStyleMixin",{extend:{DEFAULT_PAD_X:3,DEFAULT_PAD_Y:4,DEFAULT_WIDTH:14,DEFAULT_HEIGHT:14,DEFAULT_FILL_COLOR_CHECKED:"#666666",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#cccccc",DEFAULT_FILL_COLOR_READY:"#ffffff",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5},initNode:function(b,a){if(a.width===undefined){a.width=this.getIconExtentX()}if(a.height===undefined){a.height=this.getIconExtentY()}if(a.focusEmbellishment===undefined){a.focusEmbellishment=false}var c=myt.CheckboxStyleMixin;if(a.fillColorChecked===undefined){a.fillColorChecked=c.DEFAULT_FILL_COLOR_CHECKED}if(a.fillColorHover===undefined){a.fillColorHover=c.DEFAULT_FILL_COLOR_HOVER}if(a.fillColorActive===undefined){a.fillColorActive=c.DEFAULT_FILL_COLOR_ACTIVE}if(a.fillColorReady===undefined){a.fillColorReady=c.DEFAULT_FILL_COLOR_READY}if(a.edgeColor===undefined){a.edgeColor=c.DEFAULT_EDGE_COLOR}if(a.edgeSize===undefined){a.edgeSize=c.DEFAULT_EDGE_SIZE}this.callSuper(b,a)},setFillColorChecked:function(a){this.fillColorChecked=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},getDrawBounds:function(){var a=this.drawBounds,b=myt.CheckboxStyleMixin;a.x=b.DEFAULT_PAD_X;a.y=b.DEFAULT_PAD_Y;a.w=b.DEFAULT_WIDTH;a.h=b.DEFAULT_HEIGHT;return a},getDrawConfig:function(b){var a=this.callSuper(b);a.checkedColor=this.fillColorChecked;a.edgeColor=this.edgeColor;a.edgeSize=this.edgeSize;switch(b){case"hover":a.fillColor=this.fillColorHover;break;case"active":a.fillColor=this.fillColorActive;break;case"disabled":case"ready":a.fillColor=this.fillColorReady;break;default:}return a},getIconExtentX:function(){var a=myt.CheckboxStyleMixin;return a.DEFAULT_WIDTH+2*a.DEFAULT_PAD_X},getIconExtentY:function(){var a=myt.CheckboxStyleMixin;return a.DEFAULT_HEIGHT+2*a.DEFAULT_PAD_Y}});myt.ValueComponent=new JS.Module("ValueComponent",{initNode:function(b,a){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(b,a)},setValueFilter:function(a){this.valueFilter=a;if(this.inited&&a){this.setValue(this.value)}},setValue:function(a){if(this.valueFilter){a=this.valueFilter(a)}if(this.value!==a){this.value=a;if(this.inited){this.fireNewEvent("value",this.getValue())}}},getValue:function(){return this.value},chainValueFilter:function(d,c){var a=this.valueFilter,b=d;if(a){if(c==="last"){b=function(e){return d(a(e))}}else{if(c==="first"||c===undefined){b=function(e){return a(d(e))}}}}this.setValueFilter(b)}});myt.CheckboxDrawingMethod=new JS.Class("CheckboxDrawingMethod",myt.DrawingMethod,{initialize:function(){this.__getTemplate=myt.memoize(this.__getTemplate)},draw:function(b,a){b.clear();b.drawImage(this.__getTemplate(a),0,0)},__getTemplate:function(G){var z=myt,F=G.bounds,n=F.x,j=F.y,o=F.w,D=F.h,p=G.shadowBlur==null?2:G.shadowBlur,v=G.shadowOffsetX==null?0:G.shadowOffsetX,t=G.shadowOffsetY==null?1:G.shadowOffsetY,d=G.radius==null?4:G.radius,r=G.shadowColor==null?"rgba(0, 0, 0, 0.3)":G.shadowColor,C=G.focusedShadowColor==null?"rgba(0, 0, 0, 0.5)":G.focusedShadowColor,e=G.fillColor,k=G.focused,A=G.edgeSize,E=n+A,a=j+A,l=o-2*A,g=D-2*A,B=(z.Color.makeColorFromHexString(e)).multiply(5/6),f=z.DrawingUtil;var c=new z.Canvas(z.global.roots.getRoots()[0],{width:n+o+v+p,height:j+D+t+p,visible:false,ignoreLayout:true,ignorePlacement:true});var u=c.createLinearGradient(E,a,E,a+g);c.save();c.setShadowOffsetX(v);c.setShadowOffsetY(t);c.setShadowBlur(p*(k?2:1));c.setShadowColor(k?C:r);f.drawRoundedRect(c,d,0,n,j,o,D);c.setFillStyle(G.edgeColor);c.fill();c.restore();f.drawRoundedRect(c,d-A,0,E,a,l,g);u.addColorStop(0,e);u.addColorStop(1,B.getHtmlHexString());c.setFillStyle(u);c.fill();if(G.checked){var s=new z.Path([E+2,a+1/2*g,E+1/2*l,a+g-2,n+o+3,j,E+1/2*l,a+g-6,E+5,a+1/2*g-2]);s.drawInto(c);c.setFillStyle(G.checkedColor);c.fill()}var q=c.__canvas;c.destroy();return q}});myt.CheckboxMixin=new JS.Module("CheckboxMixin",{include:[myt.ValueComponent,myt.CheckboxStyleMixin],initNode:function(b,a){if(a.value===undefined){a.value=false}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.CheckboxDrawingMethod"}this.callSuper(b,a)},setValue:function(a){if(this.value!==a){this.callSuper(a);if(this.inited){this.redraw()}}},getDrawConfig:function(b){var a=this.callSuper(b);a.checked=this.value;return a},doActivated:function(){this.setValue(!this.value)}});myt.Checkbox=new JS.Class("Checkbox",myt.DrawButton,{include:[myt.CheckboxMixin]});myt.TextButtonContent=new JS.Module("TextButtonContent",{initNode:function(c,a){this.inset=this.outset=0;if(a.shrinkToFit===undefined){a.shrinkToFit=false}this.textY=a.shrinkToFit?"middle":0;this.callSuper(c,a);var b=this.textView;this.applyConstraint("__updateContentPosition",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",b,"visible",b,"width",b,"height",b,"y"])},doAfterAdoption:function(){var a=this.textY,b={name:"textView",whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};if(typeof a==="string"){b.valign=a}else{b.y=a}new myt.Text(this,b);this.__origHeight=this.height;this.callSuper()},setInset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a)}}},setOutset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a)}}},setText:function(a){if(this.text!==a){this.text=a;if(this.inited){this.textView.setText(a);this.fireNewEvent("text",a)}}},setShrinkToFit:function(a){if(this.shrinkToFit!==a){this.shrinkToFit=a;if(this.inited){if(this.textView){this.textView.setWhiteSpace(a?"nowrap":"normal")}this.fireNewEvent("shrinkToFit",a)}}},setTextY:function(a){if(this.textY!==a){this.textY=a;if(this.inited){this.fireNewEvent("textY",a);if(typeof a==="string"){this.textView.setValign(a)}else{this.textView.setValign("");this.textView.setY(a)}}}},__updateContentPosition:function(c){if(this.__updateContentPositionLoopBlock||this.destroyed){return}var b=this.inset,a=this.outset,d=this.textView,e=d.visible&&this.text;this.__updateContentPositionLoopBlock=true;if(this.shrinkToFit){d.setX(b);this.setWidth(b+(e?d.width:0)+a);this.setHeight(this.__origHeight)}else{d.setHeight("auto");d.setWidth(this.width-b-a);d.setX(b);this.setHeight(e?d.y+d.height:this.__origHeight)}this.__updateContentPositionLoopBlock=false}});myt.TextCheckbox=new JS.Class("TextCheckbox",myt.Checkbox,{include:[myt.TextButtonContent,myt.TooltipMixin],extend:{DEFAULT_PAD_X:2,DEFAULT_MULTILINE_PAD_Y:4},doAfterAdoption:function(){var a=myt.TextCheckbox,b=a.DEFAULT_PAD_X;this.setInset(this.getIconExtentX()+b);this.setOutset(b);if(!this.shrinkToFit){this.setTextY(a.DEFAULT_MULTILINE_PAD_Y)}this.callSuper()}});myt.RadioDrawingMethod=new JS.Class("RadioDrawingMethod",myt.DrawingMethod,{initialize:function(){this.__getTemplate=myt.memoize(this.__getTemplate)},draw:function(b,a){b.clear();b.drawImage(this.__getTemplate(a),0,0)},__getTemplate:function(E){var v=myt,D=E.bounds,n=D.x,k=D.y,o=D.w,C=D.h,p=E.shadowBlur==null?2:E.shadowBlur,u=E.shadowOffsetX==null?0:E.shadowOffsetX,s=E.shadowOffsetY==null?1:E.shadowOffsetY,r=E.shadowColor==null?"rgba(0, 0, 0, 0.3)":E.shadowColor,B=E.focusedShadowColor==null?"rgba(0, 0, 0, 0.5)":E.focusedShadowColor,f=E.fillColor,l=E.focused,z=E.edgeSize,e=o/2,a=e-z,d=(a/2)-1,j=n+e,g=k+e,A=(v.Color.makeColorFromHexString(f)).multiply(5/6);var c=new v.Canvas(v.global.roots.getRoots()[0],{width:n+o+u+p,height:k+C+s+p,visible:false,ignoreLayout:true,ignorePlacement:true});var t=c.createLinearGradient(n,k,n,k+o);c.save();c.setShadowOffsetX(u);c.setShadowOffsetY(s);c.setShadowBlur(p*(l?2:1));c.setShadowColor(l?B:r);c.beginPath();c.circle(j,g,e);c.closePath();c.setFillStyle(E.edgeColor);c.fill();c.restore();c.beginPath();c.circle(j,g,a);c.closePath();t.addColorStop(0,f);t.addColorStop(1,A.getHtmlHexString());c.setFillStyle(t);c.fill();if(E.checked){c.beginPath();c.circle(j,g,d);c.closePath();c.setFillStyle(E.checkedColor);c.fill()}var q=c.__canvas;c.destroy();return q}});myt.BAGMembership=new JS.Module("BAGMembership",{initNode:function(b,a){this.__bags=[];this.callSuper(b,a)},destroyAfterOrphaning:function(){this.callSuper();var a=this.__bags,b=a.length,c;while(b){c=a[--b];this.removeFromBAG(c.attrName,c.groupId)}},isRegisteredWithBAG:function(c){var a=this.__bags,b=a.length;while(b){if(a[--b]===c){return true}}return false},getBAG:function(b,a){return myt.BAG.getGroup(b,a)},addToBAG:function(b,a){var c=this.getBAG(b,a);if(!this.isRegisteredWithBAG(c)){this.__bags.push(c);c.register(this);if(!this.isAttachedTo(this,"__updateForBAG",b)){this.attachTo(this,"__updateForBAG",b)}}},removeFromBAG:function(d,c){var h=this.getBAG(d,c);if(this.isRegisteredWithBAG(h)){var a=this.__bags,b=a.length,e,f=true;while(b){e=a[--b];if(e===h){a.splice(b,1);h.unregister(this)}else{if(e.attrName===d){f=false}}}if(f){this.detachFrom(this,"__updateForBAG",d)}}},__updateForBAG:function(d){var c=d.type,e=d.value,a=this.__bags,b=a.length,f;while(b){f=a[--b];if(f.attrName===c){if(e){f.setTrue(this)}else{f.setFalse(this)}}}}});myt.BAG=new JS.Class("BAG",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable],extend:{__groups:{},generateUniqueGroupId:function(){return myt.generateGuid()},createGroup:function(a){return new BAG(a,this.generateUniqueGroupId())},getGroup:function(c,b){if(c&&b){var a=this.__groups,d=a[c]||(a[c]={});return d[b]||(d[b]=new myt.BAG(c,b))}return null},removeGroup:function(c,b){if(c&&b){var a=this.__groups;if(a){var e=a[c];if(e){var d=e[b];if(d){delete e[b]}return d}}}return null}},initialize:function(b,a){this.__nodes=[];this.trueNode=null;this.attrName=b;this.groupId=a},destroy:function(){if(this.trueNode){this.setTrueNode(null)}if(this.__nodes.length===0){myt.BAG.removeGroup(this.attrName,this.groupId)}this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(a){this.set("groupId",a,true)},setAttrName:function(a){this.set("attrName",a,true)},setTrueNode:function(a){this.set("trueNode",a,true)},getNodes:function(){return this.__nodes},register:function(a){if(a&&!this.isRegistered(a)){this.__nodes.push(a);if(a[this.attrName]){this.setTrue(a)}}},unregister:function(c){if(c){var a=this.__nodes,b=a.length;while(b){if(c===a[--b]){a.splice(b,1);break}}if(this.trueNode===c){this.setTrueNode(null)}if(a.length===0){this.destroy()}}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){var d=this.attrName,b=myt.AccessorSupport.generateSetterName(d),a=this.__nodes,c=a.length,f;this.setTrueNode(e);while(c){f=a[--c];if(e===f){if(!f[d]){f[b](true)}}else{if(f[d]){f[b](false)}}}}},setFalse:function(b){if(b&&this.trueNode===b){var a=myt.AccessorSupport.generateSetterName(this.attrName);b[a](false);this.setTrueNode(null)}},isRegistered:function(c){var a=this.__nodes,b=a.length;while(b){if(c===a[--b]){return true}}return false}});myt.RadioMixin=new JS.Module("RadioMixin",{include:[myt.BAGMembership,myt.CheckboxStyleMixin],initNode:function(b,a){if(a.selected===undefined){a.selected=false}if(a.groupId===undefined){a.groupId=myt.generateGuid()}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.RadioDrawingMethod"}this.callSuper(b,a);if(this.__initValue!==undefined){this.__updateGroupValue(this.__initValue);delete this.__initValue}if(this.selected){var c=this.__getBAG();if(c){c.setTrue(this)}}},setOptionValue:function(a){this.set("optionValue",a,true)},setValue:function(a){if(this.inited){this.__updateGroupValue(a)}else{this.__initValue=a}},getValue:function(){var b=this.__getBAG(),a=b?b.trueNode:null;return a?a.optionValue:null},setSelected:function(a){if(this.selected!==a){this.selected=a;if(this.inited){this.fireNewEvent("selected",a);this.redraw()}}},setGroupId:function(a){if(this.groupId!==a){var b=this.groupId;this.groupId=a;if(b){this.removeFromBAG("selected",b)}if(a){this.addToBAG("selected",a)}if(this.inited){this.fireNewEvent("groupId",a)}}},getDrawConfig:function(b){var a=this.callSuper(b);a.checked=this.selected;return a},doActivated:function(){if(!this.selected){this.setValue(this.optionValue)}},__getBAG:function(){return this.getBAG("selected",this.groupId)},__updateGroupValue:function(b){var e=this.__getBAG();if(e){var a=e.getNodes(),c=a.length,d;while(c){d=a[--c];if(d.optionValue===b){e.setTrue(d);break}}}}});myt.Radio=new JS.Class("Radio",myt.DrawButton,{include:[myt.RadioMixin]});myt.TextRadio=new JS.Class("TextRadio",myt.Radio,{include:[myt.TextButtonContent,myt.TooltipMixin],doAfterAdoption:function(){var a=myt.TextCheckbox,b=a.DEFAULT_PAD_X;this.setInset(this.getIconExtentX()+b);this.setOutset(b);if(!this.shrinkToFit){this.setTextY(a.DEFAULT_MULTILINE_PAD_Y)}this.callSuper()}});myt.TabSliderDrawingMethod=new JS.Class("TabSliderDrawingMethod",myt.DrawingMethod,{draw:function(a,c){var g=c.bounds,j=g.x,f=g.y,k=g.w,d=g.h;a.clear();if(k==0||d==0){return}var l=c.edgeSize,e=2*l;if(l>0){a.beginPath();a.rect(j,f,k,d);a.closePath();a.setFillStyle(c.edgeColor);a.fill()}a.beginPath();a.rect(j+l,f+l,k-e,d-e);a.closePath();a.setFillStyle(c.fillColor);a.fill()}});myt.Selectable=new JS.Module("Selectable",{setSelected:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.selected!==a){this.selected=a;if(this.inited&&this.fireNewEvent){this.fireNewEvent("selected",a)}}},isSelected:function(){return this.selected?true:false},canSelect:function(a){return true},canDeselect:function(a){return true}});myt.SelectionManager=new JS.Module("SelectionManager",{extend:{isAddMode:function(){return myt.global.keys.isShiftKeyDown()},isToggleMode:function(){return myt.global.keys.isAcceleratorKeyDown()}},initNode:function(b,a){this.__selected={};this.__lastSelectedItem=null;a.selectedCount=0;if(a.itemSelectionId===undefined){a.itemSelectionId="id"}if(a.maxSelected===undefined){a.maxSelected=-1}this.callSuper(b,a)},setItemSelectionId:function(a){this.itemSelectionId=a},setMaxSelected:function(a){this.maxSelected=a},setSelectedCount:function(a){if(this.selectedCount!==a){this.selectedCount=a;if(this.inited){this.fireNewEvent("selectedCount",a)}}},isAddMode:function(){return myt.SelectionManager.isAddMode()},isToggleMode:function(){return myt.SelectionManager.isToggleMode()},getSelected:function(){var a=[],b=this.__selected,c;for(c in b){a.push(b[c])}return a},select:function(a){if(a&&!this.isSelected(a)&&this.canSelect(a)){a.setSelected(true);this.__selected[a[this.itemSelectionId]]=a;this.setSelectedCount(this.selectedCount+1);this.__lastSelectedItem=a;this.doSelected(a);this.fireNewEvent("itemSelected",a)}},doSelected:function(a){},selectById:function(a){this.select(this.getSelectableItem(a))},canSelect:function(b){var a=this.maxSelected,c=this.selectedCount;if(a===0){return false}else{if(a===1){if(c>0){this.deselectAll();if(this.selectedCount>0){return false}}}else{if(a>1){if(c>=a){return false}}}}return b.canSelect(this)},selectAll:function(){var a=this.getSelectableItems(),b=a.length;while(b){this.select(a[--b])}},deselect:function(a){if(this.isSelected(a)&&this.canDeselect(a)){a.setSelected(false);delete this.__selected[a[this.itemSelectionId]];this.setSelectedCount(this.selectedCount-1);if(this.__lastSelectedItem===a){this.__lastSelectedItem=null}this.doDeselected(a);this.fireNewEvent("itemDeselected",a)}},doDeselected:function(a){},deselectById:function(a){this.deselect(this.getSelectableItem(a))},canDeselect:function(a){return a.canDeselect(this)},deselectAll:function(){var a=this.__selected,b;for(b in a){this.deselect(a[b])}},isSelected:function(a){return a?a.isSelected():false},areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){var c=[],b=this.getSubviews(),d=b.length,a;while(d){a=b[--d];if(a.isA(myt.Selectable)){c.push(a)}}return c},getSelectableItems:function(){var a=this.getManagedItems(),b=a.length;while(b){if(!a[--b].canSelect(this)){a.splice(b,1)}}return a},getSelectableItem:function(b){var c=this.getSelectableItems(),d=c.length,e,a=this.itemSelectionId;while(d){e=c[--d];if(e[a]===b){return e}}return null}});myt.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[myt.SelectionManager],extend:{DEFAULT_SPACING:1},initNode:function(b,a){this._tabSliders=[];a.defaultPlacement="container";if(a.spacing===undefined){a.spacing=myt.TabSliderContainer.DEFAULT_SPACING}if(a.overflow===undefined){a.overflow="autoy"}if(a.itemSelectionId===undefined){a.itemSelectionId="tabId"}if(a.maxSelected===undefined){a.maxSelected=1}myt.DelayedMethodCall.createDelayedMethodCall(this,0,"__updateLayout");this.callSuper(b,a)},doAfterAdoption:function(){var b=this,d=myt,c=d.TabSlider;var a=new d.View(this,{name:"container",ignorePlacement:true,percentOfParentWidth:100},[d.SizeToParent,{subnodeAdded:function(e){this.callSuper(e);if(e instanceof c){b._tabSliders.push(e);b.attachTo(e,"updateLayout","selected")}},subnodeRemoved:function(g){if(g instanceof c){var f=b._tabSliders,e=f.length;while(e){if(f[--e]===g){b.detachFrom(g,"updateLayout","selected");f.splice(e,1);break}}}this.callSuper(g)}}]);new d.SpacedLayout(a,{name:"layout",axis:"y",spacing:this.spacing,collapseParent:true});this.attachTo(this,"updateLayout","height");this.callSuper()},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.layout){this.layout.setSpacing(a)}}},updateLayout:function(a){this.__updateLayoutDelayed()},__updateLayout:function(){var f=this._tabSliders,j=f.length,c,g=0,q=0,e=0,k;while(j){c=f[--j];if(c.visible){++e;if(c.selected){g+=c.getMinimumExpandedHeight();q+=c.getPreferredExpandedHeight()}else{k=c.getCollapsedHeight();g+=k;q+=k}}}var m=this.container.layout,p=m.inset+m.outset+m.spacing*(e-1);g+=p;q+=p;var l=this.height,b=g>l,d=q>l,o=q-l,n,r,a;j=f.length;while(j){c=f[--j];if(c.visible){if(c.selected){if(b){a=c.getMinimumExpandedHeight()}else{if(d){n=c.getPreferredExpandedHeight();r=c.getMinimumExpandedHeight();a=n-o;if(r>a){o-=n-r;a=r}else{o=0}}else{a=c.getPreferredExpandedHeight()}}c.expand(a)}else{c.collapse()}}}}});myt.TabSlider=new JS.Class("TabSlider",myt.View,{include:[myt.Selectable,myt.Disableable,myt.SizeToParent],extend:{DEFAULT_BUTTON_HEIGHT:30,DEFAULT_MINIMUM_CONTAINER_HEIGHT:100,DEFAULT_FILL_COLOR_SELECTED:"#666666",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#cccccc",DEFAULT_FILL_COLOR_READY:"#ffffff",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5,DEFAULT_ANIMATION_MILLIS:500},initNode:function(b,a){a.defaultPlacement="wrapper.container";a.percentOfParentWidth=100;a.expansionState="collapsed";if(a.tabId===undefined){a.tabId=myt.generateGuid()}if(a.tabContainer===undefined){a.tabContainer=b}if(a.selected===undefined){a.selected=false}if(a.buttonClass===undefined){a.buttonClass=myt.DrawButton}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.TabSliderDrawingMethod"}if(a.zIndex===undefined){a.zIndex=0}var d=myt.TabSlider;if(a.edgeColor===undefined){a.edgeColor=d.DEFAULT_EDGE_COLOR}if(a.edgeSize===undefined){a.edgeSize=d.DEFAULT_EDGE_SIZE}if(a.buttonHeight===undefined){a.buttonHeight=d.DEFAULT_BUTTON_HEIGHT}if(a.fillColorSelected===undefined){a.fillColorSelected=d.DEFAULT_FILL_COLOR_SELECTED}if(a.fillColorHover===undefined){a.fillColorHover=d.DEFAULT_FILL_COLOR_HOVER}if(a.fillColorActive===undefined){a.fillColorActive=d.DEFAULT_FILL_COLOR_ACTIVE}if(a.fillColorReady===undefined){a.fillColorReady=d.DEFAULT_FILL_COLOR_READY}if(a.minContainerHeight===undefined){a.minContainerHeight=d.DEFAULT_MINIMUM_CONTAINER_HEIGHT}if(a.selected){var c=true;delete a.selected}this.callSuper(b,a);if(c){this.tabContainer.select(this)}if(a.disabled===true){this.setDisabled(true)}this.setHeight(this.getCollapsedHeight())},doAfterAdoption:function(){var b=this,e=myt,c=this.buttonClass;new c(this,{name:"button",ignorePlacement:true,zIndex:1,height:this.buttonHeight,focusEmbellishment:true,drawingMethodClassname:this.drawingMethodClassname,groupId:this.parent.parent.groupId,percentOfParentWidth:100,fillColorChecked:this.fillColorChecked,fillColorHover:this.fillColorHover,fillColorActive:this.fillColorActive,fillColorReady:this.fillColorReady,fillBorderColor:this.fillBorderColor,edgeSize:this.edgeSize},[e.SizeToParent,{setFocused:function(f){this.callSuper(f);if(this.inited){this.redraw()}},doActivated:function(){var f=b.tabContainer;if(b.isSelected()&&f.maxSelected!==1){f.deselect(b)}else{f.select(b)}},getDrawConfig:function(g){var f=this.callSuper(g);f.selected=b.selected;f.edgeColor=b.edgeColor;f.edgeSize=b.edgeSize;if(b.selected&&b.tabContainer.maxSelected!==-1){f.fillColor=b.fillColorSelected}else{switch(g){case"hover":f.fillColor=b.fillColorHover;break;case"active":f.fillColor=b.fillColorActive;break;case"disabled":case"ready":f.fillColor=this.focused?b.fillColorHover:b.fillColorReady;break;default:}}return f},getDrawBounds:function(){var f=this.drawBounds;f.w=this.width;f.h=this.height;return f},redraw:function(f){this.callSuper(f);b.notifyButtonRedraw(f)}}]);var d=new e.View(this,{name:"wrapper",ignorePlacement:true,y:this.buttonHeight,height:0,visible:false,maskFocus:true,overflow:"hidden",percentOfParentWidth:100},[e.SizeToParent,{setHeight:function(f,g){this.callSuper(Math.round(f),g)},setWidth:function(f,g){this.callSuper(f,g);if(this.inited){this.container.setWidth(f)}}}]);var a=new e.View(d,{name:"container"});new e.SizeToChildren(a,{axis:"y"});this.applyConstraint("__updateHeight",[d,"y",d,"height"]);this.callSuper()},setSelected:function(a){this.callSuper(a);if(this.button){this.button.redraw()}},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setDrawingMethodClassname:function(a){this.drawingMethodClassname=a},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){if(this.buttonHeight!==a){this.buttonHeight=a;if(this.button){this.button.setHeight(a);this.wrapper.setY(a)}}},setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;if(this.inited){this.fireNewEvent("expansionState",a)}var b=this.wrapper;if(b){if(a==="expanded"){b.setMaskFocus(false);b.setOverflow("auto")}else{if(a==="expanding"){b.setVisible(true)}else{if(a==="collapsed"){b.setVisible(false)}else{if(a==="collapsing"){b.setMaskFocus(true);b.setOverflow("hidden")}}}}}}},doDisabled:function(){var a=this.button;if(a){a.setDisabled(this.disabled)}},notifyButtonRedraw:function(a){},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(a){this.setExpansionState("expanding");var d=this.wrapper,c=a-this.getCollapsedHeight();d.stopActiveAnimators();if(d.height!==c){var b=this;d.animate({attribute:"height",to:c,duration:myt.TabSlider.DEFAULT_ANIMATION_MILLIS}).next(function(e){b.setExpansionState("expanded")})}else{this.setExpansionState("expanded")}},collapse:function(){this.setExpansionState("collapsing");var b=this.wrapper;b.stopActiveAnimators();if(b.height!==0){var a=this;b.animate({attribute:"height",to:0,duration:myt.TabSlider.DEFAULT_ANIMATION_MILLIS}).next(function(c){a.setExpansionState("collapsed")})}else{this.setExpansionState("collapsed")}},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});myt.TextTabSlider=new JS.Class("TextTabSlider",myt.TabSlider,{extend:{DEFAULT_LABEL_TEXT_COLOR_CHECKED:"#ffffff",DEFAULT_LABEL_TEXT_COLOR:"#333333"},initNode:function(c,b){var a=myt.TextTabSlider;if(b.labelTextColorChecked===undefined){b.labelTextColorChecked=a.DEFAULT_LABEL_TEXT_COLOR_CHECKED}if(b.labelTextColor===undefined){b.labelTextColor=a.DEFAULT_LABEL_TEXT_COLOR}this.callSuper(c,b);new myt.Text(this.button,{name:"label",domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:true,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){if(this.text!==a){this.text=a;var b=this.button;if(b&&b.label){b.label.setText(a)}}},notifyButtonRedraw:function(b){var a=this.button.label;if(a){a.setTextColor(this.__getTextColor())}},__getTextColor:function(){return(this.selected&&this.tabContainer.maxSelected!==-1)?this.labelTextColorChecked:this.labelTextColor}});myt.TabDrawingMethod=new JS.Class("TabDrawingMethod",myt.DrawingMethod,{extend:{DEFAULT_RADIUS:6},draw:function(d,E){var C=E.bounds,l=C.x,j=C.y,m=C.w,z=C.h;d.clear();if(m==0||z==0){return}var u=E.edgeSize,n=2*u,a=0,B=0,D=0,A=0,t=0,o=0,p=0,g=0,q=E.cornerRadius===undefined?myt.TabDrawingMethod.DEFAULT_RADIUS:E.cornerRadius,e=q-u,v=l+u,c=j+u,k=m-n,f=z-n,s=E.selected;switch(E.location){case"top":a=B=q;t=o=q;if(s){f+=u}break;case"right":A=B=q;g=o=q;if(s){v-=u;k+=u}break;case"bottom":D=A=q;p=g=q;if(s){c-=u;f+=u}break;case"left":a=D=q;t=p=q;if(s){k+=u}break}if(u>0){d.beginPath();myt.DrawingUtil.drawPartiallyRoundedRect(d,a,B,D,A,l,j,m,z);d.closePath();d.setFillStyle(E.edgeColor);d.fill()}d.beginPath();myt.DrawingUtil.drawPartiallyRoundedRect(d,t,o,p,g,v,c,k,f);d.closePath();d.setFillStyle(E.fillColor);d.fill()}});myt.TabContainer=new JS.Module("TabContainer",{include:[myt.SelectionManager],extend:{DEFAULT_SPACING:1,DEFAULT_INSET:0},initNode:function(d,b){this.__tabs=[];var a=myt.TabContainer;if(b.spacing===undefined){b.spacing=a.DEFAULT_SPACING}if(b.inset===undefined){b.inset=a.DEFAULT_INSET}if(b.location===undefined){b.location="top"}if(b.itemSelectionId===undefined){b.itemSelectionId="tabId"}if(b.maxSelected===undefined){b.maxSelected=1}this.callSuper(d,b);var c;switch(this.location){case"top":case"bottom":c="x";break;case"left":case"right":c="y";break}new myt.SpacedLayout(this,{name:"layout",axis:c,spacing:this.spacing,inset:this.inset,collapseParent:true})},setLocation:function(a){this.location=a},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.layout){this.layout.setSpacing(a)}}},setInset:function(a){if(this.inset!==a){this.inset=a;if(this.layout){this.layout.setInset(a)}}},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(a){this.callSuper(a);if(a.isA(myt.TabMixin)){this.__tabs.push(a);switch(this.location){case"top":a.setValign("bottom");break;case"bottom":a.setValign("top");break;case"left":a.setAlign("right");break;case"right":a.setAlign("left");break}}},subnodeRemoved:function(c){if(c.isA(myt.TabMixin)){var b=this.__tabs,a=b.length;while(a){if(b[--a]===c){b.splice(a,1);break}}}this.callSuper(c)}});myt.TabMixin=new JS.Module("TabMixin",{include:[myt.Selectable],initNode:function(b,a){if(a.tabId===undefined){a.tabId=myt.generateGuid()}if(a.tabContainer===undefined){a.tabContainer=b}var c;if(a.selected){c=true;delete a.selected}this.callSuper(b,a);if(c){this.tabContainer.select(this)}},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},doActivated:function(){if(!this.selected){this.tabContainer.select(this)}}});myt.Tab=new JS.Class("Tab",myt.DrawButton,{include:[myt.TabMixin,myt.IconTextButtonContent],extend:{DEFAULT_HEIGHT:24,DEFAULT_INSET:8,DEFAULT_OUTSET:8,DEFAULT_FILL_COLOR_SELECTED:"#ffffff",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#aaaaaa",DEFAULT_FILL_COLOR_READY:"#cccccc",DEFAULT_LABEL_TEXT_COLOR_SELECTED:"#333333",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5},initNode:function(c,b){var a=myt.Tab;if(b.drawingMethodClassname===undefined){b.drawingMethodClassname="myt.TabDrawingMethod"}if(b.inset===undefined){b.inset=a.DEFAULT_INSET}if(b.outset===undefined){b.outset=a.DEFAULT_OUTSET}if(b.edgeColor===undefined){b.edgeColor=a.DEFAULT_EDGE_COLOR}if(b.edgeSize===undefined){b.edgeSize=a.DEFAULT_EDGE_SIZE}if(b.fillColorSelected===undefined){b.fillColorSelected=a.DEFAULT_FILL_COLOR_SELECTED}if(b.fillColorHover===undefined){b.fillColorHover=a.DEFAULT_FILL_COLOR_HOVER}if(b.fillColorActive===undefined){b.fillColorActive=a.DEFAULT_FILL_COLOR_ACTIVE}if(b.fillColorReady===undefined){b.fillColorReady=a.DEFAULT_FILL_COLOR_READY}if(b.labelTextColorSelected===undefined){b.labelTextColorSelected=a.DEFAULT_LABEL_TEXT_COLOR_SELECTED}if(b.height===undefined){b.height=a.DEFAULT_HEIGHT}if(b.focusEmbellishment===undefined){b.focusEmbellishment=false}this.callSuper(c,b)},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setLabelTextColor:function(a){this.labelTextColor=a},setLabelTextColorSelected:function(a){this.labelTextColorSelected=a},setCornerRadius:function(a){this.cornerRadius=a},setSelected:function(a){this.callSuper(a);if(this.inited){this.redraw()}},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},getDrawBounds:function(){var a=this.drawBounds;a.w=this.width;a.h=this.height;return a},getDrawConfig:function(b){var a=this.callSuper(b);a.selected=this.selected;a.location=this.tabContainer.location;a.cornerRadius=this.cornerRadius;a.edgeColor=this.edgeColor;a.edgeSize=this.edgeSize;if(this.selected){a.fillColor=this.fillColorSelected}else{switch(b){case"hover":a.fillColor=this.fillColorHover;break;case"active":a.fillColor=this.fillColorActive;break;case"disabled":case"ready":a.fillColor=this.focused?this.fillColorHover:this.fillColorReady;break;default:}}return a},redraw:function(a){this.callSuper(a);this.textView.setTextColor(this.selected?this.labelTextColorSelected:this.labelTextColor)}});myt.SimpleTab=new JS.Class("SimpleTab",myt.SimpleIconTextButton,{include:[myt.TabMixin],initNode:function(c,b){var a=myt.Tab;if(b.inset===undefined){b.inset=a.DEFAULT_INSET}if(b.outset===undefined){b.outset=a.DEFAULT_OUTSET}if(b.selectedColor===undefined){b.selectedColor=a.DEFAULT_FILL_COLOR_SELECTED}if(b.hoverColor===undefined){b.hoverColor=a.DEFAULT_FILL_COLOR_HOVER}if(b.activeColor===undefined){b.activeColor=a.DEFAULT_FILL_COLOR_ACTIVE}if(b.readyColor===undefined){b.readyColor=a.DEFAULT_FILL_COLOR_READY}if(b.labelTextSelectedColor===undefined){b.labelTextSelectedColor=a.DEFAULT_LABEL_TEXT_COLOR_SELECTED}if(b.height===undefined){b.height=a.DEFAULT_HEIGHT}if(b.focusEmbellishment===undefined){b.focusEmbellishment=false}this.callSuper(c,b);this.__updateCornerRadius();this.__updateTextColor()},setSelectedColor:function(a){this.selectedColor=a},setCornerRadius:function(a){this.cornerRadius=a;if(this.inited){this.__updateCornerRadius()}},setLabelTextColor:function(a){this.labelTextColor=a},setLabelTextSelectedColor:function(a){this.labelTextSelectedColor=a;if(this.inited&&this.selected){this.textView.setTextColor(a)}},setSelected:function(a){this.callSuper(a);if(this.inited){this.updateUI();this.__updateTextColor()}},__updateTextColor:function(){this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor)},__updateCornerRadius:function(){var a=this.cornerRadius!=null?this.cornerRadius:myt.TabDrawingMethod.DEFAULT_RADIUS;switch(this.tabContainer.location){case"top":this.setRoundedTopLeftCorner(a);this.setRoundedTopRightCorner(a);break;case"bottom":this.setRoundedBottomLeftCorner(a);this.setRoundedBottomRightCorner(a);break;case"left":this.setRoundedTopLeftCorner(a);this.setRoundedBottomLeftCorner(a);break;case"right":this.setRoundedTopRightCorner(a);this.setRoundedBottomRightCorner(a);break}},drawDisabledState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawHoverState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawActiveState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawReadyState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}}});myt.InputObservable=new JS.Module("InputObservable",{extend:{EVENT_TYPES:{input:true,select:true,change:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.InputObservable)||this.callSuper(c,a,b)}});myt.NativeInputWrapper=new JS.Class("NativeInputWrapper",myt.View,{include:[myt.Disableable,myt.InputObservable],initNode:function(b,a){if(a.focusable===undefined){a.focusable=true}this.callSuper(b,a);this.addDomClass("mytNativeInput")},createOurDomElement:function(a){var b=document.createElement("input");b.style.position="absolute";b.type=this.inputType;return b},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a)}},setValue:function(a){if(this.value!==a){this.value=a;this.setDomValue(a);if(this.inited){this.fireNewEvent("value",a)}}},getDomValue:function(){return this.domElement.value},setDomValue:function(a){var b=this.domElement;if(b.value!==a){b.value=a}}});myt.DragDropObservable=new JS.Module("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:true,dragenter:true,dragover:true,drop:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(c,a,b){return this.createStandardDomMethodRef(c,a,b,myt.DragDropObservable,true)||this.callSuper(c,a,b)}});myt.DragDropSupport=new JS.Module("DragDropSupport",{include:[myt.DragDropObservable],initNode:function(b,a){this.callSuper(b,a);if(!this.disabled){this.setupDragListeners()}},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a);if(this.inited){if(a){this.teardownDragListeners()}else{this.setupDragListeners()}}}},setupDragListeners:function(){this.attachToDom(this,"doDragOver","dragover",false);this.attachToDom(this,"doDragEnter","dragenter",false);this.attachToDom(this,"doDragLeave","dragleave",false);this.attachToDom(this,"doDrop","drop",false)},teardownDragListeners:function(){this.detachFromDom(this,"doDragOver","dragover",false);this.detachFromDom(this,"doDragEnter","dragenter",false);this.detachFromDom(this,"doDragLeave","dragleave",false);this.detachFromDom(this,"doDrop","drop",false)},doDragOver:function(a){},doDragEnter:function(a){},doDragLeave:function(a){},doDrop:function(a){this.handleFiles(a.value.dataTransfer.files,a)},handleFiles:function(d,c){if(d!==undefined){var b=d.length,a;while(b){a=d[--b];if(this.filterFiles(a)){this.handleDroppedFile(a,c)}}}else{myt.dumpStack("Browser doesn't support the File API")}},filterFiles:function(a){return true},handleDroppedFile:function(a,b){}});myt.Ajax=new JS.Class("Ajax",myt.Node,{extend:{doRequest:function(b,a,c){return $.ajax(b).done(a).fail(c)}},initNode:function(b,a){this.opts={};this.callSuper()},setUrl:function(a){this.__s("url",a)},setRequestMethod:function(a){this.__s("type",a)},setRequestData:function(a){this.__s("data",a)},setResponseType:function(a){this.__s("datatype",a)},__s:function(a,b){if(b){this.opts[a]=b}else{delete this.opts[a]}},doRequest:function(b,a,d){var c=myt.extend({context:this,beforeSend:function(f,e){f.callbackData=b.callbackData;f.requestData=b.requestData;f.requestURL=e.url}},b,function(f,h,g){var e=f;switch(f){case"requestData":e="data";break;case"requestMethod":e="type";break;case"responseType":e="datatype";break}h[e]=g[f]});return myt.Ajax.doRequest(myt.extend({},this.opts,c),a||this.handleSuccess,d||this.handleFailure)},handleSuccess:function(b,a,c){this.fireNewEvent("success",{data:b,status:a,xhr:c})},handleFailure:function(c,a,b){this.fireNewEvent("failure",{exception:b,status:a,xhr:c})}});myt.Form=new JS.Module("Form",{initNode:function(b,a){this.isChanged=this._lockCascade=false;this.isValid=true;this.__sf={};this.__v=[];this.__acc={};this.callSuper(b,a);if(this.form){this.form.addSubForm(this)}},destroy:function(){if(this.form){this.form.removeSubForm(this.id)}this.callSuper()},setErrorMessages:function(a){this.errorMessages=a},setId:function(a){if(this.id!==a){var c=this.id;this.id=a;var b=this.form;if(b&&this.inited){b.removeSubForm(c);b.addSubForm(this)}}},setForm:function(a){if(this.form!==a){var b=this.form;this.form=a;if(b){b.removeSubForm(this.id)}if(a&&this.inited){a.addSubForm(this)}}},setIsValid:function(a){this.isValid=a;if(this.inited){this.fireNewEvent("isValid",a)}var b=this.form;if(b&&!this._lockCascade){if(a){b.verifyValidState(this)}else{b.notifySubFormInvalid()}}},setIsChanged:function(a){if(this.isChanged!==a){this.isChanged=a;if(this.inited){this.fireNewEvent("isChanged",a)}var b=this.form;if(b&&!this._lockCascade){if(a){b.notifySubFormChanged()}else{b.verifyChangedState(this)}}}},setValidators:function(a){var c=a.length,b;while(c){b=a[--c];if(typeof b==="string"){a[c]=b=myt.global.validators.getValidator(b);if(!b){a.splice(c,1)}}}this.__v=a},getValue:function(){if(this.callSuper){return this.callSuper()}if(this.isA(myt.FormElement)){return this.value}var a={},b=this.__sf,c;for(c in b){a[c]=b[c].getValue()}return a},setValue:function(b){if(this.callSuper){this.callSuper(b)}if(typeof b==="object"&&!this.isA(myt.FormElement)){var a,c;for(c in b){a=this.getSubForm(c);if(a){b[c]=a.setValue(b[c])}else{console.warn("ID in setValue for non-existant subform",c)}}}if(this.form){this.form.notifyValueChanged(this)}return b},getDefaultValue:function(){var a={},b=this.__sf,c;for(c in b){a[c]=b[c].getDefaultValue()}return a},setDefaultValue:function(b){if(typeof b==="object"){var a,c;for(c in b){a=this.getSubForm(c);if(a){b[c]=a.setDefaultValue(b[c])}else{console.warn("ID in setDefaultValue for non-existant subform",c)}}}return b},getRollbackValue:function(){var a={},b=this.__sf,c;for(c in b){a[c]=b[c].getRollbackValue()}return a},setRollbackValue:function(b){if(typeof b==="object"){var a,c;for(c in b){a=this.getSubForm(c);if(a){b[c]=a.setRollbackValue(b[c])}else{console.warn("ID in setRollbackValue for non-existant subform",c)}}}return b},addAccelerator:function(b,a){this.__acc[b]=a},removeAccelerator:function(a){delete this.__acc[a]},invokeAccelerator:function(c,b){var a=this.__acc[c];if(a){a.call(this,b===undefined?null:b)}},addValidator:function(a){if(a){this.__v.push(a)}},removeValidator:function(d){if(d){var a=this.__v,c=a.length,b;while(c){b=a[--c];if(b.id===d){a.splice(c,1);return b}}}return null},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(a){var b=a.id;if(this.getSubForm(b)!=null){console.warn("ID in use for subform, add aborted.",b,a);return}a.setForm(this);this.__sf[b]=a;if(a.isChanged){this.notifySubFormChanged()}if(!a.isValid){this.notifySubFormInvalid()}},removeSubForm:function(b){var a=this.getSubForm(b);if(a){a.setForm(null);delete this.__sf[b];this.verifyChangedState();this.verifyValidState()}return a},getSubForm:function(a){return this.__sf[a]},getAllErrorMessages:function(){var b=this.errorMessages.concat(),a=this.__sf,c;for(c in a){b=b.concat(a[c].getAllErrorMessages())}return b},notifySubFormInvalid:function(){this.setIsValid(false)},verifyValidState:function(a){var d=true,c=this.__sf,b,e;for(e in c){b=c[e];if(b!==a){d=b.isValid&&d}}return this.__applyValidation(d)},doValidation:function(){var b=true,a=this.__sf,c;for(c in a){b=a[c].doValidation()&&b}this._lockCascade=true;b=this.__applyValidation(b);this._lockCascade=false;return b},__applyValidation:function(d){var b=this.__v,a=b.length,e=[],c=0;for(;a>c;){d=b[c++].isFormValid(this,null,e)&&d}this.setErrorMessages(e);this.setIsValid(d);return d},notifyValueChanged:function(a){if(this.form){this.form.notifyValueChanged(a)}},notifySubFormChanged:function(){this.setIsChanged(true)},verifyChangedState:function(a){var d=false,c=this.__sf,b,e;for(e in c){b=c[e];if(b!==a){d=b.isChanged||d}}this.setIsChanged(d);return d},setup:function(a,d,c){this._lockCascade=true;this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false;if(a==null){a={}}if(d==null){d={}}if(c==null){c={}}var b=this.__sf,e;for(e in b){b[e].setup(a[e],d[e],c[e])}},resetForm:function(){this._lockCascade=true;var a=this.__sf,b;for(b in a){a[b].resetForm()}this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},rollbackForm:function(){this._lockCascade=true;var a=this.__sf,b;for(b in a){a[b].rollbackForm()}this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},getChangedValue:function(){var a={},c=this.__sf,b,d;for(d in c){b=c[d];if(b.isChanged){a[d]=b.getChangedValue()}}return a}});myt.RootForm=new JS.Module("RootForm",{include:[myt.Form],initNode:function(b,a){this.callSuper(b,a);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){if(this.isChanged){if(this.doValidation()){this.doValidSubmit(this.getValue())}else{this.doInvalidSubmit()}}},doValidSubmit:function(a){},doInvalidSubmit:function(){},doCancel:function(){this.rollbackForm();this.doValidation()}});myt.FormElement=new JS.Module("FormElement",{include:[myt.Form],initNode:function(b,a){this.__vp=[];this.callSuper(b,a)},getValue:function(){return this.__processValue(this.callSuper?this.callSuper():this.value,myt.ValueProcessor.CURRENT_ATTR)},setValue:function(a){if(a===undefined){a=this.getRollbackValue()}if(this.value!==a){this.callSuper(a);this.verifyChangedState()}return a},getDefaultValue:function(){return this.__processValue(this.defaultValue,myt.ValueProcessor.DEFAULT_ATTR)},setDefaultValue:function(a){if(this.defaultValue!==a){this.defaultValue=a;if(this.inited){this.fireNewEvent("defaultValue",a)}this.verifyChangedState()}return a},getRollbackValue:function(){return this.__processValue(this.rollbackValue,myt.ValueProcessor.ROLLBACK_ATTR)},setRollbackValue:function(a){if(a===undefined){a=this.getDefaultValue()}if(this.rollbackValue!==a){this.rollbackValue=a;if(this.inited){this.fireNewEvent("rollbackValue",a)}this.verifyChangedState()}return a},setValueProcessors:function(a){var b=a.length,c;while(b){c=a[--b];if(typeof c==="string"){a[b]=c=myt.global.valueProcessors.getValueProcessor(c);if(!c){a.splice(b,1)}}}this.__vp=a},addValueProcessor:function(a){this.__vp.push(a)},removeValueProcessor:function(d){if(d){var a=this.__vp,b=a.length,c;while(b){c=a[--b];if(c.id===d){a.splice(b,1);return c}}}return null},__processValue:function(f,e){var b=this.__vp,a=b.length,d,c=0;for(;a>c;){d=b[c++];if(d[e]){f=d.process(f)}}return f},addSubForm:function(a){myt.dumpStack("addSubForm not supported on form elements.")},getSubForm:function(a){myt.dumpStack("getSubForm not supported on form elements.");return null},removeSubForm:function(a){myt.dumpStack("removeSubForm not supported on form elements.");return null},verifyChangedState:function(a){var b=this.getValue()!==this.getRollbackValue();this.setIsChanged(b);return b},setup:function(a,c,b){this._lockCascade=true;this.defaultValue=undefined;this.rollbackValue=undefined;this.value=undefined;this.setDefaultValue(a);this.setRollbackValue(c);this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false;this.setValue(b)},resetForm:function(){this._lockCascade=true;var a=this.getDefaultValue();this.setRollbackValue(a);this.setValue(a);this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},rollbackForm:function(){this._lockCascade=true;this.setValue(this.getRollbackValue());this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},getChangedValue:function(){return this.isChanged?this.getValue():undefined}});myt.Uploader=new JS.Class("Uploader",myt.View,{include:[myt.DragDropSupport,myt.Disableable,myt.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",MIME_TYPES_BY_EXTENSION:{gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},readFile:function(a,b){if(FileReader!==undefined){reader=new FileReader();reader.onload=b;reader.readAsDataURL(a)}},isSameFile:function(a,b){if(a==null||b==null){return false}return a.name===b.name&&a.type===b.type&&a.size===b.size},createFile:function(d){var c=new myt.URI(d),a=c.file,b=a.split(".")[1];return{name:a,serverPath:d,size:-1,type:this.MIME_TYPES_BY_EXTENSION[b]}}},initNode:function(c,b){this.files=[];if(b.requestFileParam===undefined){b.requestFileParam="file"}if(b.maxFiles===undefined){b.maxFiles=-1}this.callSuper(c,b);var a=this;new myt.NativeInputWrapper(this,{name:"fileInput",percentOfParentWidth:100,percentOfParentHeight:100,opacity:0.01,disabled:this.disabled,overflow:"hidden"},[myt.SizeToParent,{initNode:function(e,d){this.inputType="file";this.callSuper(e,d);this.attachToDom(this,"_handleInput","change");this.domElement.multiple=a.maxFiles>1},_handleInput:function(d){a.handleFiles(this.domElement.files,d)}}])},setValue:function(b){this.clearFiles();if(b){if(!Array.isArray(b)){b=[b]}var a=b.length,c=0;for(;a>c;++c){this.addFile(myt.Uploader.createFile(b[c]))}}return this.callSuper?this.callSuper(b):b},getValue:function(){return this.value},setDisabled:function(a){this.callSuper(a);if(this.fileInput){this.fileInput.setDisabled(a)}},setMaxFiles:function(a){if(this.maxFiles!==a){this.maxFiles=a;if(this.inited){this.fireNewEvent("maxFiles",a)}if(this.fileInput){this.fileInput.domElement.multiple=a>1}}},setUploadUrl:function(a){this.set("uploadUrl",a,true)},setRequestFileParam:function(a){this.set("requestFileParam",a,true)},bringSubviewToFront:function(a){if(a===this.fileInput){this.callSuper(a)}else{this.sendSubviewBehind(a,this.fileInput)}},subviewAdded:function(a){this.callSuper(a);if(this.fileInput){this.bringSubviewToFront(this.fileInput)}},handleDroppedFile:function(a,b){this.addFile(a)},filterFiles:function(a){var b=this.maxFiles;if(b>=0&&this.files.length>=b){return false}return true},uploadFiles:function(b,a){b=b||this.uploadUrl;var d=this.files,c=d.length;while(c){this.uploadFile(d[--c],b,a)}},uploadFile:function(d,c,b){c=c||this.uploadUrl;b=b||this.requestFileParam;var a=this;var e=new myt.Ajax(this,{url:c,requestMethod:"post",responseType:"json"},[{handleSuccess:function(h,g,j){this.callSuper(h,g,j);a.handleUploadSuccess(d,h,g,j)},handleFailure:function(j,g,h){this.callSuper(j,g,h);a.handleUploadFailure(d,j,g,h)}}]);var f=new FormData();f.append(b,d,d.name);e.setRequestData(f);e.doRequest({contentType:false,cache:false,processData:false})},handleUploadSuccess:function(b,c,a,d){b[myt.Uploader.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(c);this.updateValueFromFiles()},handleUploadFailure:function(c,d,a,b){myt.dumpStack("XHR failure: "+a+" : "+b)},parseServerPathFromResponse:function(a){return null},addFile:function(a){this.files.push(a);this.updateValueFromFiles();this.fireNewEvent("addFile",a)},removeFile:function(b){var c=this.files,a=c.length;while(a){if(myt.Uploader.isSameFile(c[--a],b)){c.splice(a,1);this.updateValueFromFiles();this.fireNewEvent("removeFile",b);break}}},updateValueFromFiles:function(){var e=[],d=this.files,c=d.length,b;while(c){b=d[--c][myt.Uploader.FILE_ATTR_SERVER_PATH];if(b){e.push(b)}}var a=e.length;this.value=a===1?e[0]:(a===0?undefined:e);this.verifyChangedState();if(this.form){this.form.notifyValueChanged(this)}this.fireNewEvent("value",this.value)},clearFiles:function(){var b=this.files,a=b.length;while(a){this.removeFile(b[--a])}}});myt.ImageUploader=new JS.Class("ImageUploader",myt.Uploader,{extend:{isImageFile:function(a){return(/image/i).test(a.type)}},initNode:function(b,a){a.maxFiles=1;this.callSuper(b,a)},setWidth:function(a,b){this.callSuper(a,b);if(this.inited){this.updateImageSize()}},setHeight:function(a,b){this.callSuper(a,b);if(this.inited){this.updateImageSize()}},filterFiles:function(a){if(!myt.ImageUploader.isImageFile(a)){return false}while(this.files.length>0){this.removeFile(this.files[0])}retval=this.callSuper(a);if(!retval){return false}return true},addFile:function(a){this.callSuper(a);var b=this.image=this.getImageToReadInto();if(b){b.file=a;this.readImageInto(a,b)}},getImageToReadInto:function(){return new myt.Image(this,{useNaturalSize:false,align:"center",valign:"middle"})},scaleToFit:function(f,b,d,a){var e=f/b;var c=d/a;if(c>e){return[f,a*f/d]}else{return[d*b/a,b]}},removeFile:function(c){this.callSuper(c);var a=this.getSubviews(),b=a.length,d;while(b){d=a[--b];if(myt.Uploader.isSameFile(d.file,c)){d.destroy();break}}},handleDroppedFile:function(a,b){this.callSuper(a,b);this.uploadFile(a,this.uploadUrl)},readImageInto:function(c,d){var b=this;if(c.size===-1){var a=new Image();a.onload=function(){c.width=this.width;c.height=this.height;if(!d||d.destroyed){return}b.updateImage(c,d,this.src)};a.src=c.serverPath}else{if(FileReader!==undefined&&myt.ImageUploader.isImageFile(c)){myt.Uploader.readFile(c,function(f){var e=new Image();e.onload=function(){c.width=this.width;c.height=this.height;if(!d||d.destroyed){return}b.updateImage(c,d,this.src)};e.src=f.target.result})}}},updateImage:function(a,b,c){this.nativeWidth=a.width;this.nativeHeight=a.height;this.updateImageSize();b.setImageUrl(c)},updateImageSize:function(){var d=this.image;if(d&&!d.destroyed){var b=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight),a=Math.round(b[0]),c=Math.round(b[1]);d.setImageSize(a+"px "+c+"px");d.setWidth(a);d.setHeight(c)}}});(function(e,b,a){var j={color:false,allowEmpty:true,showSelectionPalette:true,localStorageKey:false,selectionWrapSize:8,maxSelectionSize:56,clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",palette:[],selectionPalette:[]},c=[],d=BrowserDetect.browser==="Explorer",k=(function(){var m="";if(d){for(var n=1;n<=6;n++){m+="<div class='sp-"+n+"'></div>"}}return["<div class='sp-container'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",m,"</div>","</div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'/>","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","</div>","</div>"].join("")})();function f(o,r,m){var t=[];for(var s=0;s<o.length;s++){var u=o[s];if(u){var n=tinycolor(u);var v=n.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";v+=tinycolor.equals(r,u)?" sp-thumb-active":"";var q="background-color:"+n.toHexString();t.push('<span title="'+n.toHexString()+'" data-color="'+n.toHexString()+'" class="'+v+'"><span class="sp-thumb-inner" style="'+q+';" /></span>')}else{var w="sp-clear-display";t.push(b("<div />").append(b('<span data-color="" style="background-color:transparent;" class="'+w+'"></span>').attr("title",m.noColorSelectedText)).html())}}return"<div class='sp-cf'>"+t.join("")+"</div>"}function g(F,ai){var T=myt.extend({},j,ai),D=T.showSelectionPalette,aj=T.localStorageKey,aa=0,ad=0,U=0,ar=0,C=0,t=0,Z=0,M=0,B=0,am=[],V=[],J={},K=T.selectionPalette.slice(0),X=T.selectionWrapSize,n=T.maxSelectionSize,ag="sp-dragging",N=null;var u=F.ownerDocument,Q=u.body,P=b(F),Y=b(k,u),aq=Y.find(".sp-picker-container"),ae=Y.find(".sp-color"),ao=Y.find(".sp-dragger"),v=Y.find(".sp-hue"),y=Y.find(".sp-slider"),G=Y.find(".sp-input"),ab=Y.find(".sp-palette"),m=Y.find(".sp-initial"),O=Y.find(".sp-clear"),I=T.color,R=false,L=!I,p=T.allowEmpty,ak=T.dialog;function H(){if(T.palette){am=T.palette.slice(0);V=Array.isArray(am[0])?am:[am];J={};for(var au=0;au<V.length;au++){for(var at=0;at<V[au].length;at++){var o=tinycolor(V[au][at]).toHexString();J[o]=true}}}Y.toggleClass("sp-clear-enabled",p);q()}function s(){if(d){Y.find("*:not(input)").attr("unselectable","on")}H();if(!p){O.hide()}P.after(Y).hide();r();G.change(w);G.bind("paste",function(){setTimeout(w,1)});G.keydown(function(au){if(au.keyCode==13){w()}});O.attr("title",T.clearText);O.bind("click.spectrum",function(au){au.stopPropagation();au.preventDefault();L=true;an()});l(v,function(av,au){Z=parseFloat(au/ar);L=false;an()},x,A);l(ae,function(aB,az,ay){if(!ay.shiftKey){N=null}else{if(!N){var aw=M*aa;var au=ad-(B*ad);var av=Math.abs(aB-aw)>Math.abs(az-au);N=av?"x":"y"}}var ax=!N||N==="x";var aA=!N||N==="y";if(ax){M=parseFloat(aB/aa)}if(aA){B=parseFloat((ad-az)/ad)}L=false;an()},x,A);if(!!I){S(I);W(I)}q();R=al();an();function at(au){S(b(au.target).closest(".sp-thumb-el").data("color"));an();return false}var o=d?"mousedown.spectrum":"click.spectrum";ab.delegate(".sp-thumb-el",o,at);m.delegate(".sp-thumb-el:nth-child(1)",o,at)}function r(){if(aj&&e.localStorage){try{K=e.localStorage[aj].split(";")}catch(o){}}}function W(o){if(D){var at=tinycolor(o).toHexString();if(!J[at]&&b.inArray(at,K)===-1){K.push(at);while(K.length>n){K.shift()}}if(aj&&e.localStorage){try{e.localStorage[aj]=K.join(";")}catch(au){}}}}function z(){var au=[];for(var at=0;at<K.length;at++){var o=tinycolor(K[at]).toHexString();if(!J[o]){au.push(K[at])}}return au.reverse().slice(0,T.maxSelectionSize)}function af(){var at=al();var aw=b.map(V,function(ax,ay){return f(ax,at,T)});r();if(K){var au=z();for(var av=0,o=au.length;o>av;av+=X){aw.push(f(au.slice(av,av+X),at,T))}}ab.html(aw.join(""))}function x(){if(ad<=0||aa<=0||ar<=0){q()}Y.addClass(ag);N=null;P.trigger("dragstart.spectrum",[al()])}function A(){Y.removeClass(ag);P.trigger("dragstop.spectrum",[al()])}function w(){var at=G.val();if((at===null||at==="")&&p){S(null)}else{var o=tinycolor(at);if(o.isValid()){S(o)}else{G.addClass("sp-validation-error")}}}function S(o){if(!tinycolor.equals(o,al())){var at,au;if(!o&&p){L=true}else{L=false;at=tinycolor(o);au=at.toHsv();Z=(au.h%360)/360;M=au.s;B=au.v}}an()}function al(){if(p&&L){return null}return tinycolor.fromRatio({h:Z,s:M,v:B})}function an(){G.removeClass("sp-validation-error");ap();var at=tinycolor.fromRatio({h:Z,s:1,v:1});ae.css("background-color",at.toHexString());var au=al(),aw=(au||!p)?au.toHexString():"";G.val(aw);af();var o=R;var av=al();m.html(f([o,av],av,T))}function ap(){if(p&&L){y.hide();ao.hide()}else{y.show();ao.show();var au=M*aa,o=ad-(B*ad);au=Math.max(-U,Math.min(aa-U,au-U));o=Math.max(-U,Math.min(ad-U,o-U));ao.css({top:o+"px",left:au+"px"});var at=Z*ar;y.css({top:(at-t)+"px"})}}function q(){aa=ae.width();ad=ae.height();U=ao.height();C=v.width();ar=v.height();t=y.height();ap();af();P.trigger("reflow.spectrum")}function ah(){P.show();Y.remove();c[E.id]=null}function ac(o,at){if(o===a){return myt.extend({},T)}if(at===a){return T[o]}T[o]=at;H()}s();var E={reflow:q,option:ac,set:S,addColorToSelectionPalette:W,get:al,destroy:ah,container:Y};E.id=c.push(E)-1;ak._spectrumCallback(E);return E}function l(r,v,n,o){v=v||function(){};n=n||function(){};o=o||function(){};var w=r.ownerDocument||document;var y=false;var q={};var z=0;var x=0;var s={};s.selectstart=u;s.dragstart=u;s.mousemove=p;s.mouseup=t;function u(A){if(A.stopPropagation){A.stopPropagation()}if(A.preventDefault){A.preventDefault()}A.returnValue=false}function p(B){if(y){if(d&&document.documentMode<9&&!B.button){return t()}var C=Math.max(0,Math.min(B.pageX-q.left,x));var A=Math.max(0,Math.min(B.pageY-q.top,z));v.apply(r,[C,A,B])}}function m(B){var A=(B.which)?(B.which==3):(B.button==2);if(!A&&!y){if(n.apply(r,arguments)!==false){y=true;z=b(r).height();x=b(r).width();q=b(r).offset();b(w).bind(s);b(w.body).addClass("sp-dragging");p(B);u(B)}}}function t(){if(y){b(w).unbind(s);b(w.body).removeClass("sp-dragging");o.apply(r,arguments)}y=false}b(r).bind("mousedown",m)}var h="spectrum.id";b.fn.spectrum=function(p,m){if(typeof p=="string"){var o=this;var n=Array.prototype.slice.call(arguments,1);this.each(function(){var q=c[b(this).data(h)];if(q){var r=q[p];if(!r){throw new Error("Spectrum: no such method: '"+p+"'")}if(p=="get"){o=q.get()}else{if(p=="container"){o=q.container}else{if(p=="option"){o=q.option.apply(q,n)}else{if(p=="destroy"){q.destroy();b(this).removeData(h)}else{r.apply(q,n)}}}}}});return o}return this.spectrum("destroy").each(function(){var q=myt.extend({},p,b(this).data());var r=g(this,q);b(this).data(h,r.id)})};b.fn.spectrum.load=true;b.fn.spectrum.draggable=l;b.fn.spectrum.defaults=j;b.spectrum={};(function(){var v=/^[#]+/,x=Math,q=x.round,n=x.min,u=x.max;var t=function t(A){A=A?A:"";if(A instanceof t){return A}if(!(this instanceof t)){return new t(A)}var B={r:0,g:0,b:0},C=false;if(typeof A=="string"){A=y(A)}if(typeof A=="object"){if(A.hasOwnProperty("r")&&A.hasOwnProperty("g")&&A.hasOwnProperty("b")){B=z(A.r,A.g,A.b);C=true}else{if(A.hasOwnProperty("h")&&A.hasOwnProperty("s")&&A.hasOwnProperty("v")){A.s=m(A.s);A.v=m(A.v);B=s(A.h,A.s,A.v);C=true}}}this._r=n(255,u(B.r,0));this._g=n(255,u(B.g,0));this._b=n(255,u(B.b,0));this._ok=C;if(this._r<1){this._r=q(this._r)}if(this._g<1){this._g=q(this._g)}if(this._b<1){this._b=q(this._b)}};t.prototype={isValid:function(){return this._ok},toHsv:function(){var A=w(this._r,this._g,this._b);return{h:A.h*360,s:A.s,v:A.v}},toHsl:function(){var A=o(this._r,this._g,this._b);return{h:A.h*360,s:A.s,l:A.l}},toHexString:function(){return myt.Color.rgbToHex(this._r,this._g,this._b,true)}};t.fromRatio=function(A){if(typeof A=="object"){var B={};for(var C in A){if(A.hasOwnProperty(C)){B[C]=m(A[C])}}A=B}return t(A)};t.equals=function(B,A){if(!B||!A){return false}return t(B).toHexString()==t(A).toHexString()};function z(C,B,A){return{r:r(C,255)*255,g:r(B,255)*255,b:r(A,255)*255}}function o(A,E,G){A=r(A,255);E=r(E,255);G=r(G,255);var H=u(A,E,G),C=n(A,E,G);var D,I,B=(H+C)/2;if(H==C){D=I=0}else{var F=H-C;I=B>0.5?F/(2-H-C):F/(H+C);switch(H){case A:D=(E-G)/F+(E<G?6:0);break;case E:D=(G-A)/F+2;break;case G:D=(A-E)/F+4;break}D/=6}return{h:D,s:I,l:B}}function w(A,D,F){A=r(A,255);D=r(D,255);F=r(F,255);var G=u(A,D,F),B=n(A,D,F);var C,I,H=G;var E=G-B;I=G===0?0:E/G;if(G==B){C=0}else{switch(G){case A:C=(D-F)/E+(D<F?6:0);break;case D:C=(F-A)/E+2;break;case F:C=(A-D)/E+4;break}C/=6}return{h:C,s:I,v:H}}function s(E,L,J){E=r(E,360)*6;L=r(L,100);J=r(J,100);var D=x.floor(E),G=E-D,C=J*(1-L),B=J*(1-G*L),K=J*(1-(1-G)*L),I=D%6,A=[J,B,C,C,K,J][I],F=[K,J,J,B,C,C][I],H=[C,C,K,J,J,B][I];return{r:A*255,g:F*255,b:H*255}}function r(D,B){var A=typeof D=="string";if(A&&D.indexOf(".")!=-1&&parseFloat(D)===1){D="100%"}var C=A&&D.indexOf("%")!=-1;D=n(B,u(0,parseFloat(D)));if(C){D=parseInt(D*B,10)/100}if(x.abs(D-B)<0.000001){return 1}return(D%B)/parseFloat(B)}function m(A){return A<=1?(A*100)+"%":A}var p=(function(){var A="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)";return{rgb:new RegExp("rgb[\\s|\\(]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")\\s*\\)?"),hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function y(A){A=A.trim().toLowerCase().replace(v,"");var B;if(B=p.rgb.exec(A)){return{r:B[1],g:B[2],b:B[3]}}if(B=p.hex6.exec(A)){return{r:parseInt(B[1],16),g:parseInt(B[2],16),b:parseInt(B[3],16)}}return false}e.tinycolor=t})()})(window,jQuery);(function(k,h,e){var c={en:{days:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"},ro:{days:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],months:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],sep:".",prevMonth:"Luna precedentă",nextMonth:"Luna următoare",today:"Azi"},ja:{days:["日","月","火","水","木","金","土"],months:["01","02","03","04","05","06","07","08","09","10","11","12"],sep:"/"},ru:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]},br:{days:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},pt:{days:["dom","seg","ter","qua","qui","sex","sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},cn:{days:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},de:{days:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Jan","Feb","März","Apr","Mai","Juni","Juli","Aug","Sept","Okt","Nov","Dez"]},sv:{days:["Sö","Må","Ti","On","To","Fr","Lö"],months:["Jan","Feb","Mar","Apr","Maj","Juni","Juli","Aug","Sept","Okt","Nov","Dec"]},id:{days:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],months:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"]},it:{days:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},tr:{days:["Pz","Pzt","Sal","Çar","Per","Cu","Cts"],months:["Ock","Şub","Mar","Nis","May","Haz","Tem","Agu","Eyl","Ekm","Kas","Arlk"]},es:{days:["dom","lun","mar","miér","jue","vié","sáb"],months:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},ko:{days:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},nl:{days:["zo","ma","di","wo","do","vr","za"],months:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},cz:{days:["Ne","Po","Út","St","Čt","Pá","So"],months:["Led","Úno","Bře","Dub","Kvě","Čer","Čvc","Srp","Zář","Říj","Lis","Pro"]},fr:{days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]},pl:{days:["N","Pn","Wt","Śr","Cz","Pt","So"],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],prevMonth:"Poprzedni miesiąc",nextMonth:"Następny miesiąc",today:"Dzisiaj"},gr:{days:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],months:["Ιαν","Φεβ","Μαρ","Απρ","Μαϊ","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],prevMonth:"Προηγ. μήνας",nextMonth:"Επόμ. μήνας",today:"Σήμερα"}};var a=function(o){return h(o).closest(".datepicker")};var f=function(u){var r=a(u);if(r.data("stateAllowBeforeMonth")===false){return}var p=b(r);var s=new Date(p.getFullYear(),p.getMonth(),0).getDate();if(s<p.getDate()){p.setDate(s)}l(r,p.getFullYear(),p.getMonth()-1,p.getDate(),p.getHours(),p.getMinutes());var o=new Date();var t=o.getFullYear()==p.getFullYear();var q=t&&o.getMonth()==p.getMonth();if(!q||!r.data("futureOnly")){if(s<p.getDate()){p.setDate(s)}l(r,p.getFullYear(),p.getMonth()-1,p.getDate(),p.getHours(),p.getMinutes())}};var j=function(s){var q=a(s);var p=b(q);var r=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();if(r<p.getDate()){p.setDate(r)}var o=(new Date(p.getFullYear(),p.getMonth()+2,0)).getDate();if(o<p.getDate()){p.setDate(o)}l(q,p.getFullYear(),p.getMonth()+1,p.getDate(),p.getHours(),p.getMinutes())};var g=function(q){var p=a(q);var o=b(p);o.setDate(o.getDate()-1);l(p,o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes())};var m=function(q){var p=a(q);var o=b(p);o.setDate(o.getDate()+1);l(p,o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes())};var b=function(o){return a(o).data("pickedDate")};var n=function(o){return("0"+o).slice(-2)};var d=function(o,p){if(typeof c[o][p]!=="undefined"){return c[o][p]}return c.en[p]};var l=function(E,y,o,S,R,at){var ap;if(R!=null){ap=new Date(y,o,S,R,at,0)}else{if(y!=null){ap=new Date(y,o,S)}else{ap=new Date()}}var aa=E.data("todayButton");var ar=E.data("futureOnly");var z=E.data("minDate");var F=E.data("maxDate");var B=E.data("minuteInterval");var M=E.data("firstDayOfWeek");var Z=E.data("allowWdays");if(Z==null||Array.isArray(Z)===false||Z.length<=0){Z=null}var p=E.data("minTime");var C=E.data("maxTime");var t=new Date();if(ar){if(ap.getTime()<t.getTime()){ap.setTime(t.getTime())}}if(Z!=null&&Z.length<=6){while(true){if(h.inArray(ap.getDay(),Z)==-1){ap.setDate(ap.getDate()+1)}else{break}}}var Q=E.data("locale");if(!c.hasOwnProperty(Q)){Q="en"}var ai=new Date(ap.getFullYear(),ap.getMonth(),1).getDay()-M;var ac=new Date(ap.getFullYear(),ap.getMonth()+1,0).getDate();var K=new Date(ap.getFullYear(),ap.getMonth(),0).getDate();var aj=new Date(ap.getFullYear(),ap.getMonth(),0);var w=new Date(ap.getFullYear(),ap.getMonth()+2,0);var am=t.getFullYear()==ap.getFullYear();var T=am&&t.getMonth()==ap.getMonth();var Y=T&&t.getDate()==ap.getDate();var L=false;if(ap.getFullYear()<t.getFullYear()||(am&&ap.getMonth()<t.getMonth())){L=true}var D=E.children(".datepicker_header");var u=E.children(".datepicker_inner_container");var A=E.children(".datepicker_inner_container").children(".datepicker_calendar");var au=A.children(".datepicker_table");var ag=E.children(".datepicker_inner_container").children(".datepicker_timelist");var V="";var P=b(E);if(P!=null){if(P.getMonth()!=ap.getMonth()||P.getDate()!=ap.getDate()){V="calendar"}else{if(P.getHours()!=ap.getHours()||P.getMinutes()!=ap.getMinutes()){if(ap.getMinutes()===0||ap.getMinutes()%B===0){V="timelist"}}}}h(E).data("pickedDate",ap);h.fn.dtpicker.dialog._dtpickerCallback(ap);var G=ag.scrollTop();var ae=-1;if(E.data("timeOnly")===true){A.css("border-right","0px");ag.css("width","130px")}else{D.children().remove();var ad=new Date(ap.getTime());ad.setMinutes(59);ad.setHours(23);ad.setSeconds(59);ad.setDate(0);var I=null;if((!ar||!T)&&((z==null)||(z<ad.getTime()))){I=h("<a>");I.text("<");I.prop("alt",d(Q,"prevMonth"));I.prop("title",d(Q,"prevMonth"));I.click(function(){f(E)});E.data("stateAllowBeforeMonth",true)}else{E.data("stateAllowBeforeMonth",false)}ad.setMinutes(0);ad.setHours(0);ad.setSeconds(0);ad.setDate(1);ad.setMonth(ap.getMonth()+1);var O=h("<span>");O.text(ap.getFullYear()+" "+d(Q,"sep")+" "+d(Q,"months")[ap.getMonth()]);var x=null;if((F==null)||(F>ad.getTime())){x=h("<a>");x.text(">");x.prop("alt",d(Q,"nextMonth"));x.prop("title",d(Q,"nextMonth"));x.click(function(){j(E)})}if(aa){var v=h("<a/>");v.html(decodeURIComponent("%3c%3fxml%20version%3d%221%2e0%22%20encoding%3d%22UTF%2d8%22%20standalone%3d%22no%22%3f%3e%3csvg%20%20xmlns%3adc%3d%22http%3a%2f%2fpurl%2eorg%2fdc%2felements%2f1%2e1%2f%22%20%20xmlns%3acc%3d%22http%3a%2f%2fcreativecommons%2eorg%2fns%23%22%20xmlns%3ardf%3d%22http%3a%2f%2fwww%2ew3%2eorg%2f1999%2f02%2f22%2drdf%2dsyntax%2dns%23%22%20%20xmlns%3asvg%3d%22http%3a%2f%2fwww%2ew3%2eorg%2f2000%2fsvg%22%20xmlns%3d%22http%3a%2f%2fwww%2ew3%2eorg%2f2000%2fsvg%22%20%20version%3d%221%2e1%22%20%20width%3d%22100%25%22%20%20height%3d%22100%25%22%20viewBox%3d%220%200%2010%2010%22%3e%3cg%20transform%3d%22translate%28%2d5%2e5772299%2c%2d26%2e54581%29%22%3e%3cpath%20d%3d%22m%2014%2e149807%2c31%2e130932%20c%200%2c%2d0%2e01241%200%2c%2d0%2e02481%20%2d0%2e0062%2c%2d0%2e03721%20L%2010%2e57723%2c28%2e153784%207%2e0108528%2c31%2e093719%20c%200%2c0%2e01241%20%2d0%2e0062%2c0%2e02481%20%2d0%2e0062%2c0%2e03721%20l%200%2c2%2e97715%20c%200%2c0%2e217084%200%2e1798696%2c0%2e396953%200%2e3969534%2c0%2e396953%20l%202%2e3817196%2c0%200%2c%2d2%2e38172%201%2e5878132%2c0%200%2c2%2e38172%202%2e381719%2c0%20c%200%2e217084%2c0%200%2e396953%2c%2d0%2e179869%200%2e396953%2c%2d0%2e396953%20l%200%2c%2d2%2e97715%20m%201%2e383134%2c%2d0%2e427964%20c%200%2e06823%2c%2d0%2e08063%200%2e05582%2c%2d0%2e210882%20%2d0%2e02481%2c%2d0%2e279108%20l%20%2d1%2e358324%2c%2d1%2e128837%200%2c%2d2%2e530576%20c%200%2c%2d0%2e111643%20%2d0%2e08683%2c%2d0%2e198477%20%2d0%2e198477%2c%2d0%2e198477%20l%20%2d1%2e190859%2c0%20c%20%2d0%2e111643%2c0%20%2d0%2e198477%2c0%2e08683%20%2d0%2e198477%2c0%2e198477%20l%200%2c1%2e209467%20%2d1%2e513384%2c%2d1%2e265289%20c%20%2d0%2e2605%2c%2d0%2e217083%20%2d0%2e682264%2c%2d0%2e217083%20%2d0%2e942764%2c0%20L%205%2e6463253%2c30%2e42386%20c%20%2d0%2e080631%2c0%2e06823%20%2d0%2e093036%2c0%2e198476%20%2d0%2e024809%2c0%2e279108%20l%200%2e3845485%2c0%2e458976%20c%200%2e031012%2c0%2e03721%200%2e080631%2c0%2e06203%200%2e1302503%2c0%2e06823%200%2e055821%2c0%2e0062%200%2e1054407%2c%2d0%2e01241%200%2e1488574%2c%2d0%2e04342%20l%204%2e2920565%2c%2d3%2e578782%204%2e292058%2c3%2e578782%20c%200%2e03721%2c0%2e03101%200%2e08063%2c0%2e04342%200%2e13025%2c0%2e04342%200%2e0062%2c0%200%2e01241%2c0%200%2e01861%2c0%200%2e04962%2c%2d0%2e0062%200%2e09924%2c%2d0%2e03101%200%2e130251%2c%2d0%2e06823%20l%200%2e384549%2c%2d0%2e458976%22%20%2f%3e%3c%2fg%3e%3c%2fsvg%3e"));v.addClass("icon-home");v.prop("alt",d(Q,"today"));v.prop("title",d(Q,"today"));v.click(function(){var av=new Date();l(a(E),av.getFullYear(),av.getMonth(),av.getDate(),av.getHours(),av.getMinutes())});D.append(v)}if(I!=null){D.append(I)}D.append(O);if(x!=null){D.append(x)}au.children().remove();var ah=h("<tr>");au.append(ah);var q=7+M;var ab=d(Q,"days");var aq;for(var an=0;an<7;an++){aq=h("<th>");aq.text(ab[((an+q)%7)]);ah.append(aq)}var al=Math.ceil((ai+ac)/7)*7;an=0;if(ai<0){an=-7}var U=new Date(ap.getTime());U.setHours(0);U.setMinutes(0);U.setSeconds(0);for(var ao=0;an<al;an++){var N=an+1-ai;var W=L||(T&&N<t.getDate());if(an%7===0){ah=h("<tr>");au.append(ah)}aq=h("<td>");aq.data("day",N);ah.append(aq);if(ai>an){aq.text(K+N);aq.addClass("day_another_month");aq.data("dateStr",aj.getFullYear()+"/"+(aj.getMonth()+1)+"/"+(K+N));U.setDate(K+N);U.setMonth(aj.getMonth());U.setYear(aj.getFullYear())}else{if(an<ai+ac){aq.text(N);aq.data("dateStr",(ap.getFullYear())+"/"+(ap.getMonth()+1)+"/"+N);U.setDate(N);U.setMonth(ap.getMonth());U.setYear(ap.getFullYear())}else{aq.text(N-ac);aq.addClass("day_another_month");aq.data("dateStr",w.getFullYear()+"/"+(w.getMonth()+1)+"/"+(N-ac));U.setDate(N-ac);U.setMonth(w.getMonth());U.setYear(w.getFullYear())}}var H=((an+q)%7);if(Z!=null){if(h.inArray(H,Z)==-1){aq.addClass("day_in_unallowed");continue}}else{if(H===0){aq.addClass("wday_sun")}else{if(H==6){aq.addClass("wday_sat")}}}if(N==ap.getDate()){aq.addClass("active")}if(T&&N==t.getDate()){aq.addClass("today")}var s=new Date(U.getTime());s.setHours(23);s.setMinutes(59);s.setSeconds(59);if(((z!=null)&&(z>s.getTime()))||((F!=null)&&(F<U.getTime()))){aq.addClass("out_of_range")}else{if(ar&&W){aq.addClass("day_in_past")}else{aq.click(function(){if(h(this).hasClass("hover")){h(this).removeClass("hover")}h(this).addClass("active");var ax=a(h(this));var aw=new Date(h(this).data("dateStr"));var av=b(ax);l(ax,aw.getFullYear(),aw.getMonth(),aw.getDate(),av.getHours(),av.getMinutes())});aq.hover(function(){if(!h(this).hasClass("active")){h(this).addClass("hover")}},function(){if(h(this).hasClass("hover")){h(this).removeClass("hover")}})}}}}if(E.data("dateOnly")===true){ag.css("display","none");A.css("border-right","0px")}else{ag.children().remove();U=new Date(ap.getTime());ag.css("height","175px");var J=p[0];var af=p[1];while(J*100+af<C[0]*100+C[1]){var r=h("<div>");var ak=J<t.getHours()||(J==t.getHours()&&af<t.getMinutes());var X=Y&&ak;r.addClass("timelist_item");r.text(n(J)+":"+n(af));r.data("hour",J);r.data("min",af);ag.append(r);U.setHours(J);U.setMinutes(af);if(((z!=null)&&(z>U.getTime()))||((F!=null)&&(F<U.getTime()))){r.addClass("out_of_range")}else{if(ar&&X){r.addClass("time_in_past")}else{r.click(function(){if(h(this).hasClass("hover")){h(this).removeClass("hover")}h(this).addClass("active");var ay=a(h(this));var aw=b(ay);var av=h(this).data("hour");var ax=h(this).data("min");l(ay,aw.getFullYear(),aw.getMonth(),aw.getDate(),av,ax)});r.hover(function(){if(!h(this).hasClass("active")){h(this).addClass("hover")}},function(){if(h(this).hasClass("hover")){h(this).removeClass("hover")}})}}if(J==ap.getHours()&&af==ap.getMinutes()){r.addClass("active");ae=r.offset().top}af+=B;if(af>=60){af-=60;J++}}ag.scrollTop(G)}};h.fn.dtpicker=function(t){var w=t.dialog;var s=h.extend({current:null,locale:"en",minuteInterval:30,firstDayOfWeek:0,todayButton:true,dateOnly:false,timeOnly:false,futureOnly:false,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowWdays:null},t);var r=h("<div>");r.addClass("datepicker");h(this).append(r);if(!s.current){s.current=new Date()}r.data("dateOnly",s.dateOnly);r.data("timeOnly",s.timeOnly);r.data("locale",s.locale);r.data("firstDayOfWeek",s.firstDayOfWeek);r.data("todayButton",s.todayButton);r.data("futureOnly",s.futureOnly);r.data("allowWdays",s.allowWdays);var v=Date.parse(s.minDate);r.data("minDate",isNaN(v)?null:v);var q=Date.parse(s.maxDate);r.data("maxDate",isNaN(q)?null:q);r.data("state",0);if(5<=s.minuteInterval&&s.minuteInterval<=30){r.data("minuteInterval",s.minuteInterval)}else{r.data("minuteInterval",30)}s.minTime=s.minTime.split(":");s.maxTime=s.maxTime.split(":");if(!((s.minTime[0]>=0)&&(s.minTime[0]<24))){s.minTime[0]="00"}if(!((s.maxTime[0]>=0)&&(s.maxTime[0]<24))){s.maxTime[0]="23"}if(!((s.minTime[1]>=0)&&(s.minTime[1]<60))){s.minTime[1]="00"}if(!((s.maxTime[1]>=0)&&(s.maxTime[1]<24))){s.maxTime[1]="59"}s.minTime[0]=parseInt(s.minTime[0]);s.minTime[1]=parseInt(s.minTime[1]);s.maxTime[0]=parseInt(s.maxTime[0]);s.maxTime[1]=parseInt(s.maxTime[1]);r.data("minTime",s.minTime);r.data("maxTime",s.maxTime);var o=h("<div>");o.addClass("datepicker_header");r.append(o);var z=h("<div>");z.addClass("datepicker_inner_container");r.append(z);var p=h("<div>");p.addClass("datepicker_calendar");p.css("height","175px");var y=h("<table>");y.addClass("datepicker_table");p.append(y);z.append(p);var x=h("<div>");x.addClass("datepicker_timelist");z.append(x);if(k.sidebar){p.bind("DOMMouseScroll",function(B){var A=a(h(this));var C=B.originalEvent.detail;if(C>0){m(A)}else{g(A)}return false})}else{p.bind("mousewheel",function(D){var B=a(h(this));var A=75,C=h.fn.dtpicker;if(C._delta==null){C._delta=0}var E=C._delta+=D.originalEvent.wheelDeltaY;if(E>A){C._delta-=A;g(B)}else{if(E<-A){C._delta+=A;m(B)}}return false})}h.fn.dtpicker.dialog=w;var u=s.current;l(r,u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes())}})(window,jQuery);myt.Dimmer=new JS.Class("Dimmer",myt.View,{include:[myt.SizeToParent],extend:{DEFAULT_OPACITY:0.35,DEFAULT_COLOR:"#000000"},initNode:function(b,a){this.restoreFocus=true;a.focusable=a.focusCage=true;if(a.percentOfParentWidth===undefined){a.percentOfParentWidth=100}if(a.percentOfParentHeight===undefined){a.percentOfParentHeight=100}if(a.visible===undefined){a.visible=false}if(a.ignoreLayout===undefined){a.ignoreLayout=true}this.callSuper(b,a);this.attachDomObserver(this,"eatMouseEvent","mouseover");this.attachDomObserver(this,"eatMouseEvent","mouseout");this.attachDomObserver(this,"eatMouseEvent","mousedown");this.attachDomObserver(this,"eatMouseEvent","mouseup");this.attachDomObserver(this,"eatMouseEvent","click");this.attachDomObserver(this,"eatMouseEvent","dblclick");this.attachDomObserver(this,"eatMouseEvent","mousemove");myt.RootView.setupCaptureDrop(this)},doBeforeAdoption:function(){this.callSuper();var a=myt.Dimmer;new myt.View(this,{name:"overlay",ignorePlacement:true,opacity:a.DEFAULT_OPACITY,bgColor:a.DEFAULT_COLOR,percentOfParentWidth:100,percentOfParentHeight:100},[myt.SizeToParent])},destroyAfterOrphaning:function(){myt.RootView.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(a){this.restoreFocus=a},eatMouseEvent:function(a){return true},show:function(){var a=myt.global.focus;this.prevFocus=a.focusedView||a.focusedDom;this.makeHighestZIndex();if(this.focusable){this.focus()}this.setVisible(true)},hide:function(a){this.setVisible(false);if(!a&&this.restoreFocus&&this.prevFocus){this.prevFocus.focus()}}});myt.ModalPanel=new JS.Class("ModalPanel",myt.Dimmer,{extend:{DEFAULT_PADDING_X:20,DEFAULT_PADDING_Y:15,DEFAULT_MARGIN_TOP:40,DEFAULT_MARGIN_LEFT:40,DEFAULT_MARGIN_BOTTOM:40,DEFAULT_MARGIN_RIGHT:40},initNode:function(b,a){this.defaultPlacement="content";if(a.sizingStrategy==null){a.sizingStrategy="children"}var c=myt.ModalPanel;if(a.marginTop==null){a.marginTop=c.DEFAULT_MARGIN_TOP}if(a.marginLeft==null){a.marginLeft=c.DEFAULT_MARGIN_LEFT}if(a.marginBottom==null){a.marginBottom=c.DEFAULT_MARGIN_BOTTOM}if(a.marginRight==null){a.marginRight=c.DEFAULT_MARGIN_RIGHT}if(a.paddingX==null){a.paddingX=c.DEFAULT_PADDING_X}if(a.paddingY==null){a.paddingY=c.DEFAULT_PADDING_Y}this.callSuper(b,a)},doBeforeAdoption:function(){this.callSuper();var d=myt,a=d.View,b={name:"content",ignorePlacement:true},c=d.extend(b,{align:"center",valign:"middle"});switch(this.sizingStrategy){case"children":new d.SizeToChildren(new a(this,c),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case"parent":new a(this,d.extend(b,{x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100}),[d.SizeToParent]);break;case"basic":new a(this,c);break;case"none":default:new a(this,b)}},setSizingStrategy:function(a){this.sizingStrategy=a},setMarginTop:function(a){this.marginTop=a},setMarginLeft:function(a){this.marginLeft=a},setMarginBottom:function(a){this.marginBottom=a},setMarginRight:function(a){this.marginRight=a},setPaddingX:function(a){this.paddingX=a},setPaddingY:function(a){this.paddingY=a}});myt.Spinner=new JS.Class("Spinner",myt.View,{initNode:function(b,a){this.lines=12;this.length=7;this.lineWidth=5;this.radius=10;this.corners=1;this.lineColor="#000000";this.direction=this.speed=1;this.trail=100;this.lineOpacity=0.25;if(a.visible===undefined){a.visible=false}this.callSuper(b,a);if(this.visible){this.__show()}},destroyBeforeOrphaning:function(){this.__hide();this.callSuper()},setLines:function(a){this.lines=a},setLength:function(a){this.length=a},setLineWidth:function(a){this.lineWidth=a},setRadius:function(a){this.radius=a},setCorners:function(a){this.corners=a},setLineColor:function(a){this.lineColor=a},setDirection:function(a){this.direction=a},setSpeed:function(a){this.speed=a},setTrail:function(a){this.trail=a},setLineOpacity:function(a){this.lineOpacity=a},setVisible:function(a){this.callSuper(a);if(this.inited){if(this.visible){this.__show()}else{this.__hide()}}},getSize:function(){return 2*(this.radius+this.length+this.lineWidth)},__show:function(){var b=this.__spinner||(this.__spinner=new myt.Spinner.FACTORY({lines:this.lines,length:this.length,width:this.lineWidth,radius:this.radius,corners:this.corners,color:this.lineColor,direction:this.direction,speed:this.speed,trail:this.trail,opacity:this.lineOpacity}));var a=this.getSize();this.setWidth(a);this.setHeight(a);b.spin(this.domElement)},__hide:function(){var a=this.__spinner;if(a){a.stop()}}});myt.Spinner.FACTORY=function(){var d=["webkit","Moz","ms","O"],l={},k;function f(m,q){var o=document.createElement(m||"div"),p;for(p in q){o[p]=q[p]}return o}function g(o){for(var m=1,p=arguments.length;m<p;m++){o.appendChild(arguments[m])}return o}var h=(function(){var m=f("style",{type:"text/css"});g(myt.getElement("head"),m);return m.sheet||m.styleSheet}());function c(q,m,r,u){var n=["opacity",m,~~(q*100),r,u].join("-"),o=0.01+r/u*100,t=Math.max(1-(1-q)/m*(100-o),q),s=k.substring(0,k.indexOf("Animation")).toLowerCase(),p=s&&"-"+s+"-"||"";if(!l[n]){h.insertRule("@"+p+"keyframes "+n+"{0%{opacity:"+t+"}"+o+"%{opacity:"+q+"}"+(o+0.01)+"%{opacity:1}"+(o+m)%100+"%{opacity:"+q+"}100%{opacity:"+t+"}}",h.cssRules.length);l[n]=1}return n}function j(p,q){var o=p.style,m,n;if(o[q]!==undefined){return q}q=q.charAt(0).toUpperCase()+q.slice(1);for(n=0;n<d.length;n++){m=d[n]+q;if(o[m]!==undefined){return m}}}function e(m,p){for(var o in p){m.style[j(m,o)||o]=p[o]}return m}function b(m){this.opts=m}b.prototype.spin=function(n){this.stop();var m=this.el=e(f(),{position:"relative",left:(n.offsetWidth>>1)+"px",top:(n.offsetHeight>>1)+"px"});n.insertBefore(m,null);this.lines(m,this.opts);return this};b.prototype.stop=function(){var m=this.el;if(m){if(m.parentNode){m.parentNode.removeChild(m)}this.el=undefined}return this};b.prototype.lines=function(p,r){var n=0,s=(r.lines-1)*(1-r.direction)/2,m;function q(o){return e(f(),{position:"absolute",width:(r.length+r.width)+"px",height:r.width+"px",background:o,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*n)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(;n<r.lines;n++){m=e(f(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:k&&c(r.opacity,r.trail,s+n*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"});g(p,g(m,q(r.color)))}return p};var a=e(f("group"));k=j(a,"animation");return b}();myt.Dialog=new JS.Class("Dialog",myt.ModalPanel,{extend:{DEFAULT_RADIUS:12,DEFAULT_SHADOW:[0,4,20,"#666666"],DEFAULT_BORDER:[1,"solid","#ffffff"],DEFAULT_BGCOLOR:"#ffffff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300},PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000"},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000000"},setupDialog:function(a){var b=a.content;b.setRoundedCorners(this.DEFAULT_RADIUS);b.setBgColor(this.DEFAULT_BGCOLOR);b.setBoxShadow(this.DEFAULT_SHADOW);b.setBorder(this.DEFAULT_BORDER);b.setFocusCage(true);this.createCloseButton(b,a)},createCloseButton:function(b,a,c,f,e,d){c=c||"#666666";f=f||"#000000";e=e||"#333333";d=d||"#ffffff";return new myt.DrawButton(b,{name:"closeBtn",width:16,height:16,y:4,roundedCorners:8,tooltip:"Close Dialog.",ignoreLayout:true,align:"right",alignOffset:4},[myt.TooltipMixin,{doActivated:function(){a.doCallback(this)},draw:function(j,h){j.clear();var g=h.bounds;if(g.w==0||g.h==0){return}var k;switch(h.state){case"hover":k=c;break;case"active":k=f;break;case"ready":case"disabled":default:k=e;break}j.beginPath();j.circle(8,8,8);j.closePath();j.setFillStyle(k);j.fill();j.beginPath();j.moveTo(8,6);j.lineTo(11,3);j.lineTo(13,5);j.lineTo(10,8);j.lineTo(13,11);j.lineTo(11,13);j.lineTo(8,10);j.lineTo(5,13);j.lineTo(3,11);j.lineTo(6,8);j.lineTo(3,5);j.lineTo(5,3);j.closePath();j.setFillStyle(d);j.fill()}}])}},doAfterAdoption:function(){myt.Dialog.setupDialog(this);this.callSuper()},setDisplayMode:function(a){this.displayMode=a},setCallbackFunction:function(a){this.callbackFunction=a},hide:function(a){this.__hideSpinner();this.callSuper(a)},__hideSpinner:function(){if(this.spinner){this.spinner.setVisible(false);this.spinner=undefined}},eatMouseEvent:function(a){if(this.displayMode==="message"){this.content.closeBtn.focus()}return this.callSuper(a)},__destroyContent:function(){this.__hideSpinner();var e=this.content,f=myt.ModalPanel,g=myt.Dialog,c=e.sizeToChildren,b=e.getSubviews(),d=b.length,a;while(d){a=b[--d];if(a.name!=="closeBtn"){a.destroy()}}e.setVisible(true);this.overlay.setBgColor(myt.Dimmer.DEFAULT_COLOR);this.setCallbackFunction();c.setPaddingY(f.DEFAULT_PADDING_Y);c.setPaddingX(f.DEFAULT_PADDING_X);e.setRoundedCorners(g.DEFAULT_RADIUS);e.setBgColor(g.DEFAULT_BGCOLOR);e.setBoxShadow(g.DEFAULT_SHADOW);e.setBorder(g.DEFAULT_BORDER)},doCallback:function(a){var b=this.callbackFunction;if(!b||!b.call(this,a.name)){this.hide()}},showBlank:function(a){this.__destroyContent();this.content.setVisible(false);if(a&&a.bgColor){this.overlay.setBgColor(a.bgColor)}this.show();this.setDisplayMode("blank")},showMessage:function(f,a,c){c=myt.extend({},myt.Dialog.WRAP_TEXT_DEFAULTS,c);var b=this.content,e=myt.ModalPanel;this.__destroyContent();this.setCallbackFunction(a);new myt.Text(b,{name:"msg",text:f,whiteSpace:c.whiteSpace,wordWrap:c.wordWrap,fontWeight:c.fontWeight,x:e.DEFAULT_PADDING_X,y:e.DEFAULT_PADDING_Y,width:c.width});this.show();var d=b.closeBtn;d.setVisible(true);d.focus();this.setDisplayMode("message")},showSimple:function(b,a,f){var e=this.content,g=e.closeBtn,f=f||{},d=f.maxContainerHeight;this.__destroyContent();if(f.bgColor){e.setBgColor(f.bgColor)}if(f.roundedCorners){e.setRoundedCorners(f.roundedCorners)}if(f.boxShadow){e.setBoxShadow(f.boxShadow)}if(f.border){e.setBorder(f.border)}e.sizeToChildren.setPaddingX(1);this.setCallbackFunction(a);var c=new myt.View(e,{name:"contentContainer",x:1,y:25,overflow:"auto"},[{setHeight:function(h){if(h>d){h=d}this.callSuper(h)}}]);b.call(this,c);new myt.SizeToChildren(c,{axis:"both"});this.show();g.setVisible(true);g.focus();this.setDisplayMode("content");if(c.initialFocus){c.initialFocus.focus()}},showSpinner:function(e,b){b=myt.extend({},myt.Dialog.NO_WRAP_TEXT_DEFAULTS,b);var a=this.content,c=myt.ModalPanel;this.__destroyContent();var d=this.spinner=new myt.Spinner(a,{align:"center",visible:true,radius:10,lines:12,length:14,lineWidth:3,y:c.DEFAULT_PADDING_Y});if(e){new myt.Text(a,{text:e,whiteSpace:b.whiteSpace,wordWrap:b.wordWrap,fontWeight:b.fontWeight,x:c.DEFAULT_PADDING_X,y:d.y+d.getSize()+c.DEFAULT_PADDING_Y,width:b.width})}this.show();a.closeBtn.setVisible(false);this.focus();this.setDisplayMode("spinner")},showColorPicker:function(g,b){var j=myt.ModalPanel,f=this.content;b=myt.extend({},myt.Dialog.PICKER_DEFAULTS,b);this.__destroyContent();var h=function(m){switch(m){case"closeBtn":case"cancelBtn":g.call(this,m);break;case"confirmBtn":var l=this._spectrum.get();this._spectrum.addColorToSelectionPalette(l);g.call(this,m,l?l.toHexString():"transparent");break}this._spectrum.destroy()};this.setCallbackFunction(h);var e=new myt.View(f,{name:"picker",x:j.DEFAULT_PADDING_X,y:j.DEFAULT_PADDING_Y+24,width:337,height:177});var c=new myt.View(e,{});$(c.domElement).spectrum({color:b.color,palette:[["#000000","#111111","#222222","#333333","#444444","#555555","#666666","#777777"],["#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff"]],localStorageKey:"myt.default",dialog:this});this.show();var k=f.closeBtn;k.setVisible(true);k.focus();this.__setupConfirmButtons(e,b);var a=myt.Dialog.DEFAULT_RADIUS;var d=new myt.View(f,{ignoreLayout:true,x:0,y:0,width:f.width,height:24,bgColor:"#eeeeee",roundedTopLeftCorner:a,roundedTopRightCorner:a});d.sendToBack();new myt.Text(f,{name:"title",x:a,y:4,text:b.titleText,fontWeight:"bold"});this.setDisplayMode("color_picker")},_spectrumCallback:function(a){this._spectrum=a},showDatePicker:function(g,b){var j=myt,l=j.ModalPanel,c=j.View,f=this.content;b=j.extend({},j.Dialog.DATE_PICKER_DEFAULTS,b);this.__destroyContent();f.sizeToChildren.setPaddingX(0);var h=function(n){switch(n){case"closeBtn":case"cancelBtn":g.call(this,n);break;case"confirmBtn":g.call(this,n,this._pickedDateTime);break}};this.setCallbackFunction(h);var e=new c(f,{name:"picker",x:l.DEFAULT_PADDING_X,y:l.DEFAULT_PADDING_Y+24,width:b.dateOnly?180:(b.timeOnly?150:225),height:185});var m=new c(e,{});$(m.domElement).dtpicker({current:new Date(b.initialDate||Date.now()),dateOnly:b.dateOnly||false,timeOnly:b.timeOnly||false,dialog:this});this.show();var k=f.closeBtn;k.setVisible(true);k.focus();this.__setupConfirmButtons(e,b);var a=j.Dialog.DEFAULT_RADIUS;var d=new c(f,{ignoreLayout:true,x:0,y:0,width:f.width,height:24,bgColor:"#eeeeee",roundedTopLeftCorner:a,roundedTopRightCorner:a});d.sendToBack();new j.Text(f,{name:"title",x:a,y:4,text:b.timeOnly?b.timeOnlyTitleText:b.titleText,fontWeight:"bold"});this.setDisplayMode("date_picker")},_dtpickerCallback:function(a){this._pickedDateTime=a},showConfirm:function(c,a,b){b=myt.extend({},myt.Dialog.CONFIRM_DEFAULTS,b);this.showMessage(c,a,b);this.__setupConfirmButtons(this.content.msg,b);this.setDisplayMode("confirm")},showContentConfirm:function(d,g,a){var e=this.content;a=myt.extend({},myt.Dialog.CONFIRM_DEFAULTS,a);this.__destroyContent();e.sizeToChildren.setPaddingX(1);this.setCallbackFunction(g);var j=a.maxContainerHeight;var f=new myt.View(e,{name:"contentContainer",x:1,y:25,overflow:"auto"},[{setHeight:function(k){if(k>j){k=j}this.callSuper(k)}}]);d.call(this,f);new myt.SizeToChildren(f,{axis:"both"});this.show();var h=e.closeBtn;h.setVisible(true);h.focus();this.__setupConfirmButtons(f,a);var b=myt.Dialog.DEFAULT_RADIUS;var c=new myt.View(e,{ignoreLayout:true,x:0,y:0,width:e.width,height:24,bgColor:"#eeeeee",roundedTopLeftCorner:b,roundedTopRightCorner:b});c.sendToBack();new myt.Text(e,{name:"title",x:b,y:4,text:a.titleText,fontWeight:"bold"});this.setDisplayMode("content");if(f.initialFocus){f.initialFocus.focus()}},__setupConfirmButtons:function(h,b){var m=this,g=this.content,c=myt.ModalPanel.DEFAULT_PADDING_Y;var l=new myt.View(g,{y:h.y+h.height+c,align:"center"});var k={name:"cancelBtn",text:b.cancelTxt,shrinkToFit:true,height:20,inset:10,outset:10,roundedCorners:5,activeColor:"#bbbbbb",hoverColor:"#dddddd",readyColor:"#cccccc"};if(b.activeColor!==undefined){k.activeColor=b.activeColor}if(b.hoverColor!==undefined){k.hoverColor=b.hoverColor}if(b.readyColor!==undefined){k.readyColor=b.readyColor}if(b.textColor!==undefined){k.textColor=b.textColor}new myt.SimpleIconTextButton(l,k,[{doActivated:function(){m.doCallback(this)}}]);k.name="confirmBtn";k.text=b.confirmTxt;if(b.activeColorConfirm!==undefined){k.activeColor=b.activeColorConfirm}if(b.hoverColorConfirm!==undefined){k.hoverColor=b.hoverColorConfirm}if(b.readyColorConfirm!==undefined){k.readyColor=b.readyColorConfirm}if(b.textColorConfirm!==undefined){k.textColor=b.textColorConfirm}new myt.SimpleIconTextButton(l,k,[{doActivated:function(){m.doCallback(this)}}]);var j=b.buttons;if(j){for(var e=0,f=j.length;f>e;e++){k=j[e];if(k.name==null){k.name="btn_"+e}if(k.shrinkToFit==null){k.shrinkToFit=true}if(k.height==null){k.height=20}if(k.inset==null){k.inset=10}if(k.outset==null){k.outset=10}if(k.roundedCorners==null){k.roundedCorners=5}if(k.activeColor==null){k.activeColor="#bbbbbb"}if(k.hoverColor==null){k.hoverColor="#dddddd"}if(k.readyColor==null){k.readyColor="#cccccc"}if(k.textColor==null){k.textColor="#000000"}new myt.SimpleIconTextButton(l,k,[{doActivated:function(){m.doCallback(this)}}])}}new myt.SizeToChildren(l,{axis:"y"});new myt.SpacedLayout(l,{spacing:4,axis:"x",collapseParent:true});g.sizeToChildren.setPaddingY(c/2);var a=myt.Dialog.DEFAULT_RADIUS;var d=new myt.View(g,{ignoreLayout:true,x:0,y:l.y-(c/2),width:g.width,bgColor:"#eeeeee",roundedBottomLeftCorner:a,roundedBottomRightCorner:a});d.setHeight(g.height-d.y);d.sendToBack()}});myt.Validator=new JS.Class("Validator",{initialize:function(a){this.id=a},isValid:function(b,a,c){return true},isFormValid:function(b,a,c){if(!a){a={}}a.form=b;return this.isValid(b.getValue(),a,c)}});myt.CompoundValidator=new JS.Class("CompoundValidator",myt.Validator,{initialize:function(d){this.callSuper(d);var a=Array.prototype.slice.call(arguments);a.shift();var c=a.length,b;while(c){b=a[--c];if(typeof b==="string"){a[c]=b=myt.global.validators.getValidator(b);if(!b){a.splice(c,1)}}}this.__v=a},addValidator:function(a){if(typeof a==="string"){a=myt.global.validators.getValidator(a)}if(a){this.__v.push(a)}},isValid:function(e,c,g){var f=true,b=this.__v,a=b.length,d=0;for(;a>d;){f=b[d++].isValid(e,c,g)&&f}return f}});myt.EqualsIgnoreCaseValidator=new JS.Class("EqualsIgnoreCaseValidator",myt.Validator,{isValid:function(c,a,d){var b=a.form.getRollbackValue();if(c&&b&&c.toLowerCase()===b.toLowerCase()){if(d){d.push("Value must differ by more than just case.")}return false}return true}});myt.RequiredFieldValidator=new JS.Class("RequiredFieldValidator",myt.Validator,{isValid:function(b,a,c){if(b==null||b===""){if(c){c.push("This value is required.")}return false}return true}});myt.URI=new JS.Class("URI",{initialize:function(a,b){if(a){this.parse(a,b)}},setSource:function(a){this.source=a},setProtocol:function(a){this.protocol=a},setAuthority:function(a){this.authority=a},setUserInfo:function(a){this.userInfo=a},setUser:function(a){this.user=a},setPassword:function(a){this.password=a},setHost:function(a){this.host=a},setPort:function(a){this.port=a},setRelative:function(a){this.relative=a},setPath:function(a){this.path=a},setDirectory:function(a){this.directory=a},setFile:function(a){this.file=a},setQuery:function(a){this.query=a},setAnchor:function(a){this.anchor=a},parse:function(c,d){var a=myt.URI[d?"_looseParser":"_strictParser"].exec(c);this.setSource(a[0]||"");this.setProtocol(a[1]||"");this.setAuthority(a[2]||"");this.setUserInfo(a[3]||"");this.setUser(a[4]||"");this.setPassword(a[5]||"");this.setHost(a[6]||"");this.setPort(a[7]||"");this.setRelative(a[8]||"");this.setPath(a[9]||"");this.setDirectory(a[10]||"");this.setFile(a[11]||"");this.setQuery(a[12]||"");this.setAnchor(a[13]||"");this.queryPairs={};var b=this;this.query.replace(myt.URI._queryParser,function(f,e,g){if(e){b.queryPairs[e]=g}})},decodeQueryParam:function(a){a=decodeURIComponent(a);return a.replace("+"," ")},getQuery:function(){var c=this.queryPairs,d=[],a,b;for(a in c){d.push(a+"="+encodeURIComponent(c[a]))}b=d.join("&");return b.length>0?"?"+b:b},getQueryParam:function(b){var a=this.queryPairs[b];return a==null?undefined:this.decodeQueryParam(a)},getPathParts:function(a){var c=this.path.split("/");if(!a){var b=c.length;while(b){if(c[--b].length===0){c.splice(b,1)}}}return c},toString:function(){var h=this.protocol,e=this.host,a=this.userInfo,b=this.port,g=this.path,f=this.getQuery(),c=this.anchor,d="";if(h){d+=h+"://"}if(a&&e){d+=a+"@"}if(e){d+=e;if(b){d+=":"+b}}if(g){d+=g}else{if(e&&(f||c)){d+="/"}}if(f){d+=f}if(c){d+="#"+c}return d}});myt.URI._queryParser=/(?:^|&)([^&=]*)=?([^&]*)/g;myt.URI._strictParser=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/;myt.URI._looseParser=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;myt.URLValidator=new JS.Class("URLValidator",myt.Validator,{isValid:function(c,a,d){var b=new myt.URI(c);if(b.toString()!==c){if(d){d.push("Not a valid URL.")}return false}return true}});myt.JSONValidator=new JS.Class("JSONValidator",myt.Validator,{isValid:function(b,a,d){try{JSON.parse(b);return true}catch(c){if(d){d.push(c)}return false}}});new JS.Singleton("GlobalValidatorRegistry",{include:[myt.Observable],initialize:function(){this.__c={};myt.global.register("validators",this);this.register(new myt.RequiredFieldValidator("required"));this.register(new myt.EqualsIgnoreCaseValidator("equalsIgnoreCase"));this.register(new myt.URLValidator("url"));this.register(new myt.JSONValidator("json"))},getValidator:function(a){return this.__c[a]},register:function(a){if(a){var b=a.id;if(b){this.__c[b]=a;this.fireNewEvent("validatorAdded",a)}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No validator")}},unregister:function(a){if(a){var b=a.id;if(b){a=this.getValidator(b);if(a){delete this.__c[b];this.fireNewEvent("validatorRemoved",a);return true}}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No validator")}return false}});myt.EqualFieldsValidator=new JS.Class("EqualFieldsValidator",myt.Validator,{initialize:function(c,b,a){this.callSuper(c);this.fieldA=b;this.fieldB=a},isValid:function(b,a,c){if(b&&fieldA.getValue()===fieldB.getValue()){return true}if(c){c.push('Field "'+this.fieldA.key+'" must be equal to field "'+this.fieldB.key+'".')}return false}});myt.LengthValidator=new JS.Class("LengthValidator",myt.Validator,{initialize:function(c,b,a){this.callSuper(c);this.min=b;this.max=a},isValid:function(e,c,f){var b=e?e.length:0,d=this.min,a=this.max;if(d!==undefined&&d>b){if(f){f.push("Value must not be less than "+d+".")}return false}if(a!==undefined&&a<b){if(f){f.push("Value must not be greater than "+a+".")}return false}return true}});myt.NumericRangeValidator=new JS.Class("NumericRangeValidator",myt.Validator,{initialize:function(c,b,a){this.callSuper(c);this.min=b;this.max=a},isValid:function(d,b,f){if(d===""){return true}var e=Number(d),c=this.min,a=this.max;if(isNaN(e)){if(f){f.push("Value is not a number.")}return false}if(c!==undefined&&c>e){if(f){f.push("Value must not be less than "+c+".")}return false}if(a!==undefined&&a<e){if(f){f.push("Value must not be greater than "+a+".")}return false}return true}});myt.ValueProcessor=new JS.Class("ValueProcessor",{extend:{DEFAULT_ATTR:"runForDefault",ROLLBACK_ATTR:"runForRollback",CURRENT_ATTR:"runForCurrent"},initialize:function(e,b,c,d){this.id=e;var a=myt.ValueProcessor;this[a.DEFAULT_ATTR]=b?true:false;this[a.ROLLBACK_ATTR]=c?true:false;this[a.CURRENT_ATTR]=d?true:false},process:function(a){return a}});myt.ToNumberValueProcessor=new JS.Class("ToNumberValueProcessor",myt.ValueProcessor,{process:function(a){if(a==null||a===""||a==="-"){return a}var b=Number(a);return isNaN(b)?a:b}});myt.TrimValueProcessor=new JS.Class("TrimValueProcessor",myt.ValueProcessor,{initialize:function(e,b,c,d,a){this.callSuper(e,b,c,d);this.trim=a},process:function(a){a+="";if(this.trim==="left"){return a.trimLeft()}else{if(this.trim==="right"){return a.trimRight()}}return a.trim()}});myt.UndefinedValueProcessor=new JS.Class("UndefinedValueProcessor",myt.ValueProcessor,{initialize:function(e,b,c,d,a){this.callSuper(e,b,c,d);this.defaultValue=a},process:function(a){return a===undefined?this.defaultValue:a}});new JS.Singleton("GlobalValueProcessorRegistry",{include:[myt.Observable],initialize:function(){this.__c={};var a=myt;a.global.register("valueProcessors",this);this.register(new a.UndefinedValueProcessor("undefToEmpty",true,true,true,""));this.register(new a.ToNumberValueProcessor("toNumber",true,true,true));this.register(new a.TrimValueProcessor("trimLeft",true,true,true,"left"));this.register(new a.TrimValueProcessor("trimRight",true,true,true,"right"));this.register(new a.TrimValueProcessor("trimBoth",true,true,true,"both"))},getValueProcessor:function(a){return this.__c[a]},register:function(a){if(a){var b=a.id;if(b){this.__c[b]=a;this.fireNewEvent("processorAdded",a)}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No processor")}},unregister:function(a){if(a){var b=a.id;if(b){a=this.getValueProcessor(b);if(a){delete this.__c[b];this.fireNewEvent("processorRemoved",a);return true}}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No processor")}return false}});myt.UseOtherFieldIfEmptyValueProcessor=new JS.Class("UseOtherFieldIfEmptyValueProcessor",myt.ValueProcessor,{initialize:function(e,a,c,d,b){this.callSuper(e,a,c,d);this.otherField=b},process:function(a){return(a==null||a==="")?this.otherField.getValue():a}});myt.InputSelect=new JS.Class("InputSelect",myt.NativeInputWrapper,{include:[myt.SizeToDom],initNode:function(b,a){if(a.multiple===undefined){a.multiple=false}if(a.size===undefined){a.size=a.multiple?4:1}this.callSuper(b,a);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},createOurDomElement:function(a){var b=document.createElement("select");b.style.position="absolute";return b},setMultiple:function(a){if(this.multiple!==a){this.multiple=this.domElement.multiple=a;if(this.inited){this.fireNewEvent("multiple",a)}}},setSize:function(a){if(this.size!==a){this.size=this.domElement.size=a;if(this.inited){this.fireNewEvent("size",a)}}},setOptions:function(b){this.destroyAllOptions();if(Array.isArray(b)){for(var c=0,a=b.length;a>c;++c){this.addOption(b[c])}}},getOptions:function(){return this.getSubviews().concat()},setValue:function(a){if(Array.isArray(a)&&myt.areArraysEqual(a,this.value)){return}if(this.value!==a){this.value=a;if(this.inited){this.fireNewEvent("value",a)}}},subviewAdded:function(a){if(!(a instanceof myt.InputSelectOption)){myt.dumpStack("Subview not supported. Destroying it.");a.destroy()}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()},getSelectedOptions:function(){var b=this.getOptions(),c=b.length,d,a=[];while(c){d=b[--c];if(d.isSelected()){a.push(d)}}return a},getSelectedOptionValues:function(){var b=this.getOptions(),c=b.length,d,a=[];while(c){d=b[--c];if(d.isSelected()){a.push(d.value)}}return a},getOptionForValue:function(d){var a=this.getOptions(),b=a.length,c;while(b){c=a[--b];if(c.value===d){return c}}return null},addOption:function(a){new myt.InputSelectOption(this,a)},destroyAllOptions:function(){var a=this.getOptions(),b=a.length;while(b){a[--b].destroy()}},destroyOptionWithValue:function(b){var a=this.getOptionForValue(b);if(a){a.destroy();if(a.destroyed){return true}}return false},deselectAll:function(){var a=this.getOptions(),b=a.length,c,d=false;while(b){c=a[--b];if(c.isSelected()){c.setSelected(false);d=true}}if(d){this.__doChanged()}},selectValues:function(a){a=Array.isArray(a)?a:[a];var b=a.length;while(b){this.selectValue(a[--b])}},selectValue:function(a){this.select(this.getOptionForValue(a))},select:function(a){if(a&&a.canSelect(this)){a.setSelected(true);this.__syncToDom()}},deselectValue:function(a){this.deselect(this.getOptionForValue(a))},deselect:function(a){if(a&&a.canDeselect(this)){a.setSelected(false);this.__syncToDom()}},__doChanged:function(a){this.__syncToDom();this.doChanged()},doChanged:function(){},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}});myt.InputSelectOption=new JS.Class("InputSelectOption",myt.View,{include:[myt.Disableable,myt.Selectable],createOurDomElement:function(a){return document.createElement("option")},setSelected:function(a){if(a!==null&&typeof a==="object"){a=a.value}var b=this.domElement;if(b.selected!==a){b.selected=a}},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a)}},setValue:function(a){if(this.value!==a){this.value=a;if(this.domElement.value!==a){this.domElement.value=a}if(this.inited){this.fireNewEvent("value",a)}}},setLabel:function(a){if(this.label!==a){this.domElement.textContent=this.label=a;if(this.inited){this.fireNewEvent("label",a)}}},isSelected:function(){return this.domElement.selected},canSelect:function(a){return !this.disabled&&!this.domElement.selected&&this.parent===a},canDeselect:function(a){return !this.disabled&&this.domElement.selected&&this.parent===a}});myt.FormInputSelect=new JS.Class("FormInputSelect",myt.InputSelect,{include:[myt.FormElement],setValue:function(b){if(this.__abortSetValue){return}var a=this.callSuper(b);this.__abortSetValue=true;this.deselectAll();this.selectValues(a);this.__abortSetValue=false;return a}});myt.FormRadioGroup=new JS.Class("FormRadioGroup",myt.Node,{include:[myt.ValueComponent,myt.FormElement],initNode:function(b,a){if(a.groupId===undefined){a.groupId=myt.generateGuid()}this.callSuper(b,a);if(this.value!==undefined){this.__updateGroupValue()}this.__startMonitoring()},setValue:function(b){var a=this.callSuper(b);if(this.inited){this.__updateGroupValue()}return a},setGroupId:function(a){if(this.groupId!==a){this.__stopMonitoring();this.groupId=a;if(this.inited){this.__startMonitoring()}}},__startMonitoring:function(){if(this.groupId){var a=this.__getBAG();if(a){this.syncTo(a,"__syncValue","trueNode")}}},__stopMonitoring:function(){if(this.groupId){var a=this.__getBAG();if(a){this.detachFrom(a,"__syncValue","trueNode")}}},__syncValue:function(a){this.setValue(a.value?a.value.optionValue:null)},__updateGroupValue:function(){var e=this.__getBAG();if(e){var b=e.getNodes(),c=b.length,d,a=this.value;while(c){d=b[--c];if(d.optionValue===a){e.setTrue(d);break}}}},__getBAG:function(){return myt.BAG.getGroup("selected",this.groupId)}});myt.FormCheckbox=new JS.Class("FormCheckbox",myt.Checkbox,{include:[myt.FormElement],initNode:function(b,a){this.rollbackValue=this.defaultValue=false;this.callSuper(b,a)}});myt.FormTextCheckbox=new JS.Class("FormTextCheckbox",myt.TextCheckbox,{include:[myt.FormElement],initNode:function(b,a){this.rollbackValue=this.defaultValue=false;this.callSuper(b,a)}});myt.FormInputTextMixin=new JS.Module("FormInputTextMixin",{include:[myt.FormElement,myt.UpdateableUI],initNode:function(b,a){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#ff9999";this.actionRequiredColor="#996666";this.normalColor="#999999";if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.borderWidth===undefined){a.borderWidth=1}if(a.borderStyle===undefined){a.borderStyle="solid"}if(a.focusEmbellishment===undefined){a.focusEmbellishment=true}this.callSuper(b,a);this.addValueProcessor(myt.global.valueProcessors.getValueProcessor("undefToEmpty"));this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(a){this.validateWhen=a},setAcceleratorScope:function(a){this.acceleratorScope=a},setErrorColor:function(a){this.errorColor=a},setActionRequiredColor:function(a){this.actionRequiredColor=a},setNormalColor:function(a){this.normalColor=a},setIsChanged:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setIsValid:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setValue:function(c){var b=this.callSuper(c);var a=this.validateWhen;if(a==="key"||a==="blurWithKeyFix"){this.verifyValidState()}return b},doAccept:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("submit");break;case"element":myt.global.focus.next(false);break;case"none":default:}}},doReject:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("cancel");break;case"element":this.rollbackForm();this.getRootForm().doValidation();if(this.form){this.form.verifyChangedState(this)}break;case"none":default:}}},__handleKeyDown:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===13){this.invokeAccelerator("accept")}},__handleKeyUp:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===27){this.invokeAccelerator("reject")}},doBlur:function(){this.callSuper();var a=this.validateWhen;if(a==="blur"||a==="blurWithKeyFix"){this.verifyValidState()}},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:(this.isChanged?this.errorColor:this.actionRequiredColor))}});myt.BaseInputText=new JS.Class("BaseInputText",myt.NativeInputWrapper,{include:[myt.TextSupport],initNode:function(b,a){if(a.bgColor===undefined){a.bgColor="transparent"}if(a.spellcheck===undefined){a.spellcheck=false}this.callSuper(b,a);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(a){this.callSuper(a);this.setValue(a)},setSpellcheck:function(a){if(this.spellcheck!==a){this.spellcheck=this.domElement.spellcheck=a;if(this.inited){this.fireNewEvent("spellcheck",a)}}},setMaxLength:function(a){if(a==null||0>a){a=undefined}if(this.maxLength!==a){this.maxLength=this.domElement.maxLength=a;if(this.inited){this.fireNewEvent("maxLength",a)}}},setAllowedChars:function(a){this.allowedChars=a},setPlaceholder:function(a){if(this.placeholder!==a){this.domElement.placeholder=this.placeholder=a;if(this.inited){this.fireNewEvent("placeholder",a)}}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()},__filterInput:function(a){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(d){var c=d.value,b=c.which;switch(b){case 8:case 0:return}var a=this.allowedChars;if(a&&a.indexOf(String.fromCharCode(b))===-1){c.preventDefault()}this.filterInputPress(c)},filterInput:function(a){return a},filterInputPress:function(a){},__syncToDom:function(a){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){var a=document.selection.createRange();a.moveStart("character",-this.getDomValue().length);return a.text.length}return this.domElement.selectionStart||0},setCaretPosition:function(d,a){if(a===undefined||d===a){if(this.getCaretPosition()===d){return}a=d}var c=this.domElement;if(c.setSelectionRange){c.setSelectionRange(d,a)}else{if(c.createTextRange){var b=c.createTextRange();b.collapse(true);b.moveEnd("character",a);b.moveStart("character",d);b.select()}}},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.domElement.select()},getSelection:function(){var a=this.domElement;return{start:a.selectionStart,startElem:a,end:a.selectionEnd,endElem:a}},setSelection:function(a){if(a){this.setCaretPosition(a.start,a.end)}},saveSelection:function(a){this._selRange=a||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}});myt.InputText=new JS.Class("InputText",myt.BaseInputText,{include:[myt.SizeHeightToDom],initNode:function(b,a){this.inputType="text";this.callSuper(b,a);this.setCaretToEnd()}});myt.FormInputText=new JS.Class("FormInputText",myt.InputText,{include:[myt.FormInputTextMixin]});myt.ComboBox=new JS.Class("ComboBox",myt.InputText,{include:[myt.Activateable,myt.KeyActivation,myt.ListViewAnchor],initNode:function(b,a){this.filterItems=true;if(a.activationKeys===undefined){a.activationKeys=[13,27,38,40]}if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.borderWidth===undefined){a.borderWidth=1}if(a.borderStyle===undefined){a.borderStyle="solid"}if(a.floatingAlignOffset===undefined){a.floatingAlignOffset=a.borderWidth}if(a.listViewAttrs===undefined){a.listViewAttrs={maxHeight:99}}if(a.fullItemConfig===undefined){a.fullItemConfig=[]}this.callSuper(b,a)},setFullItemConfig:function(a){this.fullItemConfig=a},setFilterItems:function(a){this.filterItems=a},__syncToDom:function(b){var a=this.value;this.callSuper(b);if(a!==this.value){this.showFloatingPanel()}},showFloatingPanel:function(b){var g=this.getFloatingPanel(b);if(g){var f;if(this.filterItems){f=[];var c=this.value,l=c==null?"":(""+c).toLowerCase(),a=this.fullItemConfig,e=a.length,d=0,k,j,h;for(;e>d;){k=a[d++];j=k.attrs.text.toLowerCase();h=j.indexOf(l);if(h===0){if(j!==l){f.push(k)}}else{if(h>0){f.push(k)}}}}else{f=this.fullItemConfig}if(f.length>0){g.setMinWidth(this.width-2*this.borderWidth);this.setItemConfig(f);this.callSuper(b)}else{this.hideFloatingPanel(b)}}},doItemActivated:function(a){this.setValue(a.text);this.callSuper(a)},doActivated:function(){this.toggleFloatingPanel()}});myt.FormComboBox=new JS.Class("FormComboBox",myt.ComboBox,{include:[myt.FormElement,myt.UpdateableUI],initNode:function(b,a){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#ff9999";this.actionRequiredColor="#996666";this.normalColor="#999999";this.callSuper(b,a);this.addValueProcessor(myt.global.valueProcessors.getValueProcessor("undefToEmpty"));this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(a){this.validateWhen=a},setAcceleratorScope:function(a){this.acceleratorScope=a},setErrorColor:function(a){this.errorColor=a},setActionRequiredColor:function(a){this.actionRequiredColor=a},setNormalColor:function(a){this.normalColor=a},setIsChanged:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setIsValid:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setValue:function(c){var b=this.callSuper(c);var a=this.validateWhen;if(a==="key"||a==="blurWithKeyFix"){this.verifyValidState()}return b},doAccept:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("submit");break;case"element":myt.global.focus.next(false);break;case"none":default:}}},doReject:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("cancel");break;case"element":this.rollbackForm();this.getRootForm().doValidation();if(this.form){this.form.verifyChangedState(this)}break;case"none":default:}}},notifyPanelShown:function(a){this._isShown=true},notifyPanelHidden:function(a){this._isShown=false},doActivationKeyDown:function(b,a){if(b===27&&!this._isShown){this.invokeAccelerator("reject")}else{this.callSuper(b,a)}},doActivationKeyUp:function(a){if(a===13&&!this._isShown){this.invokeAccelerator("accept")}else{this.callSuper(a)}},doBlur:function(){this.callSuper();var a=this.validateWhen;if(a==="blur"||a==="blurWithKeyFix"){this.verifyValidState()}},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:(this.isChanged?this.errorColor:this.actionRequiredColor))}});myt.InputTextArea=new JS.Class("InputTextArea",myt.BaseInputText,{initNode:function(b,a){if(a.resize===undefined){a.resize="none"}if(a.wrap===undefined){a.wrap="soft"}this.callSuper(b,a)},createOurDomElement:function(a){var b=document.createElement("textarea");b.style.position="absolute";return b},setResize:function(a){if(this.resize!==a){this.resize=this.deStyle.resize=a||"none";if(this.inited){this.fireNewEvent("resize",a)}}},setWrap:function(a){if(this.wrap!==a){this.wrap=this.domElement.wrap=a;if(this.inited){this.fireNewEvent("wrap",a)}}}});myt.FormInputTextArea=new JS.Class("FormInputTextArea",myt.InputTextArea,{include:[myt.FormInputTextMixin],__handleKeyDown:function(a){}});myt.EditableText=new JS.Class("EditableText",myt.BaseInputText,{include:[myt.SizeToDom],initNode:function(b,a){if(a.whiteSpace===undefined){a.whiteSpace="pre"}if(a.contentEditable===undefined){a.contentEditable=true}this.callSuper(b,a);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},createOurDomElement:function(a){var b=document.createElement("div");b.style.position="absolute";return b},setMinWidth:function(a){this.__setProp(a,"minWidth")},setMinHeight:function(a){if(BrowserDetect.browser==="Firefox"){a+=2}this.__setProp(a,"minHeight")},setPadding:function(a){this.setPaddingTop(a);this.setPaddingRight(a);this.setPaddingBottom(a);this.setPaddingLeft(a)},setPaddingTop:function(a){this.__setProp(a,"paddingTop")},setPaddingRight:function(a){this.__setProp(a,"paddingRight")},setPaddingBottom:function(a){this.__setProp(a,"paddingBottom")},setPaddingLeft:function(a){this.__setProp(a,"paddingLeft")},__setProp:function(a,b){if(this[b]!==a){this[b]=a;this.deStyle[b]=a+"px";if(this.inited){this.fireNewEvent(b,a);this.sizeViewToDom()}}},setContentEditable:function(a){if(this.contentEditable!==a){this.contentEditable=this.domElement.contentEditable=a;if(this.inited){this.fireNewEvent("contentEditable",a)}}},filterInputPress:function(b){var a=this.maxLength;if(a>=0&&this.getCharacterCount()===a){b.preventDefault()}this.callSuper(b)},getDomValue:function(){return this.domElement.innerHTML},setDomValue:function(a){var b=this.domElement;if(b.innerHTML!==a){b.innerHTML=a;this.sizeViewToDom();this.restoreSelection()}},__cleanInput:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===13){a.value.preventDefault();if(this.whitespace!=="nowrap"){document.execCommand("insertHTML",false,this.isCaretAtEnd()?"\n\n":"\n")}}},__syncToDom:function(a){this.callSuper(a);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){var a=this.domElement.firstChild;return a?a.length:0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){var a=this.getSelection();return a?a.end:0},setCaretPosition:function(b,a){if(a===undefined||b===a){if(this.getCaretPosition()===b){return}a=b}this.saveSelection({start:b,startElem:this.domElement.firstChild,end:a,endElem:this.domElement.firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(a){this.saveSelection();return true},getSelection:function(){var a;if(window.getSelection){var b=window.getSelection();if(b.rangeCount>0){if(b.extentNode===this.domElement){return null}a=b.getRangeAt(0)}}else{if(document.selection){a=document.selection.createRange()}}return{start:a?a.startOffset:0,startElem:a?a.startContainer:this.domElement.firstChild,end:a?a.endOffset:0,endElem:a?a.endContainer:this.domElement.firstChild}},setSelection:function(d){if(d){var c=d.startElem,a=d.endElem;if(c&&c.parentNode&&a&&a.parentNode){var b=document.createRange();b.setStart(c,Math.min(d.start,c.length));b.setEnd(a,Math.min(d.end,a.length));if(window.getSelection){var e=window.getSelection();if(e.rangeCount>0){e.removeAllRanges()}e.addRange(b)}else{if(document.selection){b.select()}}}}}});myt.FormEditableText=new JS.Class("FormEditableText",myt.EditableText,{include:[myt.FormInputTextMixin],__handleKeyDown:function(a){if(this.whitespace==="nowrap"){this.callSuper(a)}}});myt.ScatterGraphPoint=new JS.Class("ScatterGraphPoint",{include:[myt.Selectable],initialize:function(d,a,c,b){this.setId(d);this.setX(a);this.setY(c);this.setConfig(b)},setId:function(a){this.id=a},setX:function(a){this.x=a},setY:function(a){this.y=a},setPx:function(a){this.px=a},setPy:function(a){this.py=a},setAx:function(a){this.ax=a},setAy:function(a){this.ay=a},setConfig:function(a){this.config=a},getTemplate:function(a){return a.getPointTemplate(this.selected?this.config.selectedTemplateKey:this.config.templateKey)},setData:function(a,c){var b=this._data;if(!b){this._data=b={}}b[a]=c},getData:function(a){return this._data?this._data[a]:undefined},prepareForAnimation:function(b,a){this.ax=b;this.ay=a;this._origX=this.x;this._origY=this.y;this._xAttrDiff=b-this.x;this._yAttrDiff=a-this.y;this._progress=0},updateForAnimation:function(c){if(Math.abs(this.x-this.ax)+Math.abs(this.y-this.ay)<1e-8){this.x=this.ax;this.y=this.ay;return false}this._progress+=c;if(this._progress>1000){this._progress=1000}var a=this.config.easingFunction||myt.Animator.DEFAULT_EASING_FUNCTION,b=this._progress/1000;this.x=this._origX+this._xAttrDiff*a(b);this.y=this._origY+this._yAttrDiff*a(b);return true}});myt.KDTreeNode=new JS.Class("KDTreeNode",{initialize:function(c,b,a){this.obj=c;this.left=null;this.right=null;this.parent=a;this.dimension=b}});myt.BinaryHeap=new JS.Class("BinaryHeap",{initialize:function(a){this.content=[];this.scoreFunction=a},push:function(a){this.content.push(a);this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0];var b=this.content.pop();if(this.content.length>0){this.content[0]=b;this.sinkDown(0)}return a},peek:function(){return this.content[0]},remove:function(d){var a=this.content.length;for(var c=0;c<a;c++){if(this.content[c]==d){var b=this.content.pop();if(c!=a-1){this.content[c]=b;if(this.scoreFunction(b)<this.scoreFunction(d)){this.bubbleUp(c)}else{this.sinkDown(c)}}return}}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(d){var a=this.content[d];while(d>0){var c=Math.floor((d+1)/2)-1,b=this.content[c];if(this.scoreFunction(a)<this.scoreFunction(b)){this.content[c]=a;this.content[d]=b;d=c}else{break}}},sinkDown:function(b){var a=this.content.length,f=this.content[b],h=this.scoreFunction(f);while(true){var e=(b+1)*2,k=e-1;var c=null;if(k<a){var j=this.content[k],l=this.scoreFunction(j);if(l<h){c=k}}if(e<a){var g=this.content[e],d=this.scoreFunction(g);if(d<(c==null?h:l)){c=e}}if(c!=null){this.content[b]=this.content[c];this.content[c]=f;b=c}else{break}}}});myt.KDTree=new JS.Class("KDTree",{extend:{EUCLIDEAN_METRIC:function(d,c){return Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)}},initialize:function(b,a,c){this.metric=a;this.dimensions=c;this.rebuildTree(b)},rebuildTree:function(a){this.root=this.buildTree(a,0,null)},buildTree:function(c,g,b){var e=this.dimensions,f=g%e.length,a,d;if(c.length===0){return null}if(c.length===1){return new myt.KDTreeNode(c[0],f,b)}c.sort(function(j,h){return j[e[f]]-h[e[f]]});a=Math.floor(c.length/2);d=new myt.KDTreeNode(c[a],f,b);d.left=this.buildTree(c.slice(0,a),g+1,d);d.right=this.buildTree(c.slice(a+1),g+1,d);return d},insert:function(a){var d=this.dimensions;function b(j,h,g){if(j===null){return h}var k=d[j.dimension];if(g[k]<j.obj[k]){return b(j.left,j,g)}else{return b(j.right,j,g)}}var e=b(this.root,null,a),c,f;if(e===null){this.root=new myt.KDTreeNode(a,0,null);return}c=new myt.KDTreeNode(a,(e.dimension+1)%d.length,e);f=d[e.dimension];if(a[f]<e.obj[f]){e.left=c}else{e.right=c}},nearest:function(g,f,b){var d,j,c,a=this.dimensions,h=this;c=new myt.BinaryHeap(function(k){return -k[1]});function e(o){var n,p=a[o.dimension],k=h.metric(g,o.obj),r={},m,s,q;function l(t,u){c.push([t,u]);if(c.size()>f){c.pop()}}for(q=0;q<a.length;q+=1){if(q===o.dimension){r[a[q]]=g[a[q]]}else{r[a[q]]=o.obj[a[q]]}}m=h.metric(r,o.obj);if(o.right===null&&o.left===null){if(c.size()<f||k<c.peek()[1]){l(o,k)}return}if(o.right===null){n=o.left}else{if(o.left===null){n=o.right}else{if(g[p]<o.obj[p]){n=o.left}else{n=o.right}}}e(n);if(c.size()<f||k<c.peek()[1]){l(o,k)}if(c.size()<f||Math.abs(m)<c.peek()[1]){if(n===o.left){s=o.right}else{s=o.left}if(s!==null){e(s)}}}if(b){for(d=0;d<f;d+=1){c.push([null,b])}}if(h.root){e(h.root)}j=[];for(d=0;d<f;d+=1){if(c.content[d][0]){j.push([c.content[d][0].obj,c.content[d][1]])}}return j},balanceFactor:function(){var b=this;function a(d){if(d===null){return 0}return Math.max(a(d.left),a(d.right))+1}function c(d){if(d===null){return 0}return c(d.left)+c(d.right)+1}return a(b.root)/(Math.log(c(b.root))/Math.log(2))},dump:function(){this._dump(this.root,"  ","root")},_dump:function(b,c,a){console.log(c+a+" "+b.dimension+": "+b.obj.id+" x:"+b.obj.x+" y:"+b.obj.y);if(b.left){this._dump(b.left,c+"  ","L")}if(b.right){this._dump(b.right,c+"  ","R")}}});myt.ScatterGraph=new JS.Class("ScatterGraph",myt.Canvas,{include:[myt.SelectionManager],extend:{createCircleTemplate:function(f,d,e,h,j,g){var h=h==null?0:h,a=f+h+1,c=new myt.Canvas(myt.global.roots.getRoots()[0],{width:2*a,height:2*a,visible:false});c.beginPath();c.circle(a,a,f);c.closePath();c.setFillStyle(d);c.setGlobalAlpha(e==null?1:e);c.fill();if(h>0){c.setGlobalAlpha(g==null?1:g);c.setStrokeStyle(j==null?d:j);c.setLineWidth(h);c.stroke()}var b=c.__canvas;b.centerX=b.centerY=a;c.destroy();return b},convertXPixelToValue:function(a,b){return(a-b.originX)/b.scaleDataX},convertYPixelToValue:function(a,b){return(a-b.originY)/b.scaleDataY},convertXValueToPixel:function(a,b){return Math.round((a*b.scaleDataX)+b.originX)},convertYValueToPixel:function(b,a){return Math.round((b*a.scaleDataY)+a.originY)},BASE_FILTER:function(b,a){return b.px<0||b.px>a.width||b.py<0||b.py>a.height}},initNode:function(e,c){this._pointTemplates={};this._animating=[];this._maxTemplateSizeSquared=0;this.drawnCount=this.drawnAnimatingCount=this.drawnCountTotal=0;if(c.data===undefined){c.data=[]}if(c.scaleDataX===undefined){c.scaleDataX=1}if(c.scaleDataY===undefined){c.scaleDataY=1}if(c.originX===undefined){c.originX=0}if(c.originY===undefined){c.originY=0}var f=myt.ScatterGraph;if(c.xConversionFuncPxToV===undefined){c.xConversionFuncPxToV=f.convertXPixelToValue}if(c.yConversionFuncPxToV===undefined){c.yConversionFuncPxToV=f.convertYPixelToValue}if(c.xConversionFuncVToPx===undefined){c.xConversionFuncVToPx=f.convertXValueToPixel}if(c.yConversionFuncVToPx===undefined){c.yConversionFuncVToPx=f.convertYValueToPixel}if(c.highlightColor===undefined){c.highlightColor="#000000"}if(c.highlightSelectedColor===undefined){c.highlightSelectedColor="#000000"}if(c.highlightWidth===undefined){c.highlightWidth=1}if(c.highlightOffset===undefined){c.highlightOffset=2}if(c.allowSelection===undefined){c.allowSelection=true}this.callSuper(e,c);var b=this.width,d=this.height,g=this.animationLayer,a=this.highlightLayer;g.setWidth(b);a.setWidth(b);g.setHeight(d);a.setHeight(d);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed();this.attachToDom(this,"_doMouseMove","mousemove")},doBeforeAdoption:function(){this.callSuper();new myt.Canvas(this,{name:"animationLayer"});new myt.Canvas(this,{name:"highlightLayer"})},setWidth:function(a){this.callSuper(a);if(this.inited){this.animationLayer.setWidth(a);this.highlightLayer.setWidth(a)}},setHeight:function(a){this.callSuper(a);if(this.inited){this.animationLayer.setHeight(a);this.highlightLayer.setHeight(a)}},setAllowSelection:function(a){if(this.allowSelection===a){return}this.allowSelection=a;if(this.inited){this.fireNewEvent("allowSelection",a)}if(a){this.attachToDom(this,"_doClick","click")}else{if(this.inited){this.detachFromDom(this,"_doClick","click")}}},setXConversionFuncPxToV:function(a){this.xConversionFuncPxToV=a},setYConversionFuncPxToV:function(a){this.yConversionFuncPxToV=a},setXConversionFuncVToPx:function(a){this.xConversionFuncVToPx=a},setYConversionFuncVToPx:function(a){this.yConversionFuncVToPx=a},setScaleDataX:function(a){if(this.scaleDataX===a){return}this.scaleDataX=a;if(this.inited){this.fireNewEvent("scaleDataX",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setScaleDataY:function(a){if(this.scaleDataY===a){return}this.scaleDataY=a;if(this.inited){this.fireNewEvent("scaleDataY",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setOriginX:function(a){if(this.originX===a){return}this.originX=a;if(this.inited){this.fireNewEvent("originX",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setOriginY:function(a){if(this.originY===a){return}this.originY=a;if(this.inited){this.fireNewEvent("originY",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setScaleAndOrigin:function(d,c,b,a){var e=false;if(this.scaleDataX!==d){this.scaleDataX=d;e=true}if(this.scaleDataY!==c){this.scaleDataY=c;e=true}if(this.originX!==b){this.originX=b;e=true}if(this.originY!==a){this.originY=a;e=true}if(e){this.redrawPoints();this.redrawAnimatingPoints()}},setData:function(a){this.data=a;this._kdtree=a?new myt.KDTree(a,myt.KDTree.EUCLIDEAN_METRIC,["x","y"]):null;if(this.inited){this.redrawPointsDelayed()}},setAnimating:function(a){if(this.animating===a){return}this.animating=a;if(this.inited){if(a){this.attachTo(myt.global.idle,"__animate","idle")}else{this.detachFrom(myt.global.idle,"__animate","idle")}}},setHighlightedPoint:function(a){if(this.highlightedPoint===a){return}this.highlightedPoint=a;if(this.inited){this.fireNewEvent("highlightedPoint",a);this.drawHighlightedPoint()}},setHighlightColor:function(a){this.highlightColor=a},setHighlightSelectedColor:function(a){this.highlightSelectedColor=a},setHighlightWidth:function(a){this.highlightWidth=a},setHighlightOffset:function(a){this.highlightOffset=a},setFilter:function(a){this.filter=a;if(this.inited){this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setDrawnCount:function(a){this.drawnCount=a;this.setDrawnCountTotal(a+this.drawnAnimatingCount)},setDrawnAnimatingCount:function(a){this.drawnAnimatingCount=a;this.setDrawnCountTotal(a+this.drawnCount)},setDrawnCountTotal:function(a){this.set("drawnCountTotal",a,true)},getManagedItems:function(){return this.data.concat(this.animating)},getMinX:function(){return this.convertXPixelToValue(0)},getMinY:function(){return this.convertYPixelToValue(0)},getMaxX:function(){return this.convertXPixelToValue(this.width)},getMaxY:function(){return this.convertYPixelToValue(this.height)},_doClick:function(b){var c=this.highlightedPoint,d=this.isToggleMode(),a=this.isAddMode();if(c){if(d){c.selected?this.deselect(c):this.select(c)}else{if(a){this.select(c)}else{this.deselectAll();this.select(c)}}this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}else{if(this.selectedCount>0&&!d&&!a){this.deselectAll();this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}}return true},_doMouseMove:function(b){var h=myt.MouseObservable.getMouseFromEventRelativeToView(b,this);h.x=this.convertXPixelToValue(h.x);h.y=this.convertYPixelToValue(h.y);var j=this._maxTemplateSizeSquared/this.scaleDataX;var c=this.nearest(h,1000,j);var f=c.length,d=f,n,k,a,m,l,e=myt.ScatterGraph.BASE_FILTER,o=0;while(d){n=c[--d];k=n[0];a=n[1];m=k.getTemplate(this);l=Math.max(m.centerX,m.centerY)/this.scaleDataX;if(a>(l*l)||e(k,this)||(this.filter&&this.filter(k,this))){c.splice(d,1)}else{o=o===0?l:Math.min(o,l)}}d=c.length;while(d){n=c[--d];k=n[0];m=k.getTemplate(this);l=Math.max(m.centerX,m.centerY)/this.scaleDataX;if(l!==o){c.splice(d,1)}}var g;if(c.length>0){c.sort(function(q,p){return q[1]-p[1]});g=c[0][0]}this.setHighlightedPoint(g);return true},nearest:function(a,b,c){if(this._kdtree){return this._kdtree.nearest(a,b,c)}else{return null}},drawHighlightedPoint:function(){var a=this.highlightLayer,c=this.highlightedPoint;a.clear();if(c){if(myt.ScatterGraph.BASE_FILTER(c,this)||(this.filter&&this.filter(c,this))){return}var b=c.getTemplate(this);a.beginPath();a.circle(c.px,c.py,b.centerX+this.highlightOffset);a.closePath();a.setLineWidth(this.highlightWidth);a.setStrokeStyle(c.selected?this.highlightSelectedColor:this.highlightColor);a.stroke()}},addDataPoint:function(a){this.data.push(a);this._kdtree.insert(a);this.drawPoint(a)},addDataPoints:function(a){this.data=this.data.concat(a);this.drawPoints(a);if(!this._lockRebuild){this._kdtree.rebuildTree(this.data)}},getDataPoint:function(b,a){return this._getDataPoint(this.data,b,a)},getAnimatingDataPoint:function(b,a){return this._getDataPoint(this._animating,b,a)},getAllDataPoints:function(f,e){var b=[];if(f){var d=this.data,c=d.length,a;while(c){a=d[--c];if(f.call(this,a,c)===!e){b.push(a)}}d=this._animating;c=d.length;while(c){a=d[--c];if(f.call(this,a,c)===!e){b.push(a)}}}else{b=this.data.concat(this._animating)}return b},_getDataPoint:function(e,f,a){var d=e.length,c,b=[];while(d){c=e[--d];if(f.call(this,c,d)){if(!a){return c}b.push(c)}}if(b.length===0){return null}return b},getDataPointById:function(b,a){return this._getDataPointsBy(function(d,c){return d.id===b},a)},_getDataPointsBy:function(c,b,a){if(b==="animating"){return this.getDataPoint(c,a)}else{if(b==="still"){return this.getAnimatingDataPoint(c,a)}else{if(a){return this._getDataPoint(this.getAllDataPoints(),c,true)}else{return this.getDataPoint(c,a)||this.getAnimatingDataPoint(c,a)}}}},getDataPointsInsideCircle:function(f,e,a,b,c){var d=myt.Geometry[b?"circleContainsLatLng":"circleContainsPoint"];d=d.bind(myt.Geometry);if(!c){c=this.getAllDataPoints()}return this._getDataPoint(c,function(h,g){return d(h.y,h.x,e,f,a)},true)},getDataPointsInsidePolygon:function(c,a){var b=c.getBoundingBox(),d=c.vectors;if(!a){a=this.getAllDataPoints()}return this._getDataPoint(a,function(f,e){return myt.Geometry.isPointInPath(f.x,f.y,b,d)},true)},removeAllDataPoints:function(){var a=this.data;a.length=0;this._animating.length=0;this._kdtree.rebuildTree(a);this.setHighlightedPoint(null);this.deselectAll();this.redrawPoints(true);this.redrawAnimatingPoints(true)},removeDataPoint:function(c,a){var b=this._removeDataPoint(this.data,c,a);if(b){this.redrawPoints(true)}return b},removeAnimatingDataPoint:function(c,a){var b=this._removeDataPoint(this._animating,c,a);if(b){this.redrawAnimatingPoints(true)}return b},_removeDataPoint:function(e,f,a){var d=e.length,c,b=[];while(d){c=e[--d];if(f.call(this,c,d)){e.splice(d,1);if(!this._lockRebuild&&this.data===e){this._kdtree.rebuildTree(this.data)}if(this.highlightedPoint===c){this.setHighlightedPoint(null)}if(!a){return c}b.push(c)}}return b.length===0?null:b},removeDataPointById:function(b,a){return this._removeDataPointBy(function(d,c){return d.id===b},a)},removeDataPointsById:function(e){var c=e.length,f,d,a=false,b=false;this._lockDraw=this._lockRebuild=true;while(c){f=e[--c];d=function(h,g){return h.id===f};if(this.removeDataPoint(d)){a=true}else{if(this.removeAnimatingDataPoint(d)){b=true}}}this._lockDraw=this._lockRebuild=false;if(a){this.redrawPoints(true);this._kdtree.rebuildTree(this.data)}if(b){this.redrawAnimatingPoints(true)}},removeDataPointByIndex:function(a,b){return this._removeDataPointBy(function(d,c){return c===a},b)},removeDataPointByEquality:function(a,b){return this._removeDataPointBy(function(d,c){return d===a},b)},_removeDataPointBy:function(b,a){if(a==="animating"){return this.removeDataPoint(b)}else{if(a==="still"){return this.removeAnimatingDataPoint(b)}else{return this.removeDataPoint(b)||this.removeAnimatingDataPoint(b)}}},removeDataPointInsideBounds:function(a,e,b,c,d){return this.removeDataPoint(function(g,f){if(d){return(g.x>=a)&&(g.x<=a+b)&&(g.y>=e)&&(g.y<=e+c)}else{return(g.x>a)&&(g.x<a+b)&&(g.y>e)&&(g.y<e+c)}},true)},removeDataPointOutsideBounds:function(a,e,b,c,d){return this.removeDataPoint(function(g,f){if(d){return(g.x<=a)||(g.x>=a+b)||(g.y<=e)||(g.y>=e+c)}else{return(g.x<a)||(g.x>a+b)||(g.y<e)||(g.y>e+c)}},true)},addPointTemplate:function(a,b){this._pointTemplates[a]=b;this._recalcMaxTemplateSizeSquared()},getPointTemplate:function(a){return this._pointTemplates[a]},removePointTemplate:function(b){var a=this._pointTemplates[b];delete this._pointTemplates[b];this._recalcMaxTemplateSizeSquared();return a},_recalcMaxTemplateSizeSquared:function(){var a=0,c,b=this._pointTemplates,d;for(c in b){d=b[c];a=Math.max(a,Math.max(d.centerX,d.centerY))}this._maxTemplateSizeSquared=a*a},convertXPixelToValue:function(a){return this.xConversionFuncPxToV(a,this)},convertYPixelToValue:function(a){return this.yConversionFuncPxToV(a,this)},convertXValueToPixel:function(a){return this.xConversionFuncVToPx(a,this)},convertYValueToPixel:function(a){return this.yConversionFuncVToPx(a,this)},convertPointToPixels:function(a){a.setPx(this.convertXValueToPixel(a.x));a.setPy(this.convertYValueToPixel(a.y))},convertPointsToPixels:function(b){var a=b.length;while(a){this.convertPointToPixels(b[--a])}},drawPoint:function(d,b,a){if(!this._lockDraw){if(!b){b=this.__ctx}if(!a){this.convertPointToPixels(d)}if(myt.ScatterGraph.BASE_FILTER(d,this)||(this.filter&&this.filter(d,this))){return}var c=d.getTemplate(this);b.drawImage(c,d.px-c.centerX,d.py-c.centerY)}},drawPoints:function(d,b,c){var j=0;if(!this._lockDraw){var e=d.length,a,l=this._pointTemplates,m,k=this.width,f=this.height,g=myt.ScatterGraph.BASE_FILTER;if(!b){b=this.__ctx}if(!c){this.convertPointsToPixels(d)}while(e){a=d[--e];if(g(a,this)||(this.filter&&this.filter(a,this))){continue}m=a.getTemplate(this);b.drawImage(m,a.px-m.centerX,a.py-m.centerY);++j}}return j},redrawPoints:function(a){this.clear();var b=this.drawPoints(this.data,this.__ctx,a);this.drawHighlightedPoint();this.setDrawnCount(b)},redrawAnimatingPoints:function(a){this.animationLayer.clear();var b=this.drawPoints(this._animating,this.animationLayer.__ctx,a);this.drawHighlightedPoint();this.setDrawnAnimatingCount(b)},animatePoints:function(c){this._lockDraw=this._lockRebuild=true;var d=this._animating.length,a=c.length,b=0;if(a%3===0){while(a>b){this.animatePoint(c[b++],c[b++],c[b++])}}this._lockDraw=this._lockRebuild=false;this.redrawAnimatingPoints(true);if(this._animating.length!==d){this.redrawPoints(true)}if(this._kdtree){this._kdtree.rebuildTree(this.data)}},animatePoint:function(b,a,c){if(b){b.prepareForAnimation(a,c);this.removeDataPointByEquality(b);this._animating.push(b);this.setAnimating(true)}},__animate:function(d){var c=this._animating,b=c.length,a,e=d.value.delta;while(b){a=c[--b];if(!a.updateForAnimation(e)){c.splice(b,1);this.addDataPoint(a)}}this.redrawAnimatingPoints();if(c.length===0){this.setAnimating(false)}},countDataPoints:function(a){if(a){return this.getAllDataPoints(a).length}else{return this._animating.length+this.data.length}}});myt.DelayedMethodCall.createDelayedMethodCall(myt.ScatterGraph,0,"redrawPoints");myt.DelayedMethodCall.createDelayedMethodCall(myt.ScatterGraph,0,"redrawAnimatingPoints");myt.BoundedValueComponent=new JS.Module("BoundedValueComponent",{include:[myt.ValueComponent],initNode:function(c,b){this.appendToEarlyAttrs("snapToInt","minValue","maxValue");if(b.snapToInt===undefined){b.snapToInt=true}if(!b.valueFilter){var a=this;b.valueFilter=function(e){var d=a.maxValue;if(d!=null&&e>d){return d}var f=a.minValue;if(f!=null&&e<f){return f}return e}}this.callSuper(c,b)},setSnapToInt:function(a){if(this.snapToInt!==a){this.snapToInt=a;if(this.inited){this.fireNewEvent("snapToInt",a);if(a){this.setMinValue(this.minValue);this.setMaxValue(this.maxValue);this.setValue(this.value)}}}},setMinValue:function(b){if(this.snapToInt&&b!=null){b=Math.round(b)}if(this.minValue!==b){var a=this.maxValue;if(a!=null&&b>a){b=a}if(this.minValue!==b){this.minValue=b;if(this.inited){this.fireNewEvent("minValue",b);this.setValue(this.value)}}}},setMaxValue:function(a){if(this.snapToInt&&a!=null){a=Math.round(a)}if(this.maxValue!==a){var b=this.minValue;if(b!=null&&a<b){a=b}if(this.maxValue!==a){this.maxValue=a;if(this.inited){this.fireNewEvent("maxValue",a);this.setValue(this.value)}}}},setValue:function(a){this.callSuper(this.snapToInt&&a!=null&&!isNaN(a)?Math.round(a):a)}});new JS.Singleton("GlobalDragManager",{include:[myt.Observable],initialize:function(){this.dropTargets=[];this.autoScrollers=[];myt.global.register("dragManager",this)},setDragView:function(d){var h=this.dragView;if(h!==d){this.dragView=d;var b=!!d,a,f,e,g,c;if(b){e=d;g="notifyDragStart";c="startDrag"}else{e=h;g="notifyDragStop";c="stopDrag"}a=this.__filterList(e,this.dropTargets);f=a.length;while(f){a[--f][g](e)}a=this.__filterList(e,this.autoScrollers);f=a.length;while(f){a[--f][g](e)}this.fireNewEvent(c,d)}},setOverView:function(a){var c=this.overView;if(c!==a){var b=this.dragView;if(c){c.notifyDragLeave(b);b.notifyDragLeave(c);this.fireNewEvent("dragLeave",c)}this.overView=a;if(a){a.notifyDragEnter(b);b.notifyDragEnter(a);this.fireNewEvent("dragEnter",c)}}},registerAutoScroller:function(a){this.autoScrollers.push(a)},unregisterAutoScroller:function(c){var a=this.autoScrollers,b=a.length;while(b){if(a[--b]===c){a.splice(b,1);break}}},registerDropTarget:function(a){this.dropTargets.push(a)},unregisterDropTarget:function(c){var b=this.dropTargets,a=b.length;while(a){if(b[--a]===c){b.splice(a,1);break}}},startDrag:function(a){this.setDragView(a)},stopDrag:function(d,b,a){var c=this.overView;b.notifyDrop(c,a);if(c&&!a){c.notifyDrop(b)}this.setOverView();this.setDragView();if(c&&!a){this.fireNewEvent("drop",[b,c])}},updateDrag:function(e,c){var h,f=this.__filterList(c,this.dropTargets);i=f.length;if(i>0){var a=e.value,d=a.pageX,b=a.pageY,g;while(i){g=f[--i];if(g.willAcceptDrop(c)&&c.willPermitDrop(g)&&g.isPointVisible(d,b)&&(!h||g.isInFrontOf(h))){h=g}}}this.setOverView(h)},__filterList:function(c,g){var b;if(c.acceptAnyDragGroup()){b=g}else{b=[];var e=c.getDragGroups(),d=g.length,f,a,h;while(d){f=g[--d];if(f.acceptAnyDragGroup()){b.push(f)}else{a=f.getDragGroups();for(h in e){if(a[h]){b.push(f);break}}}}}return b}});myt.Draggable=new JS.Module("Draggable",{initNode:function(c,a){this.isDraggable=this.isDragging=false;this.draggableAllowBubble=true;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;var b=true;if(a.isDraggable!==undefined){b=a.isDraggable;delete a.isDraggable}this.callSuper(c,a);this.setIsDraggable(b)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;var e;if(a){e=this.attachToDom}else{if(this.inited){e=this.detachFromDom}}if(e){var d=this.getDragViews(),c,b=d.length;while(b){c=d[--b];e.call(this,c,"__doMouseDown","mousedown");e.call(this,c,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){if(this.isDragging!==a){this.isDragging=a;if(this.inited){this.fireNewEvent("isDragging",a)}}},setDragOffsetX:function(a,b){if(this.dragOffsetX!==a){this.dragOffsetX=a;if(this.inited&&this.isDragging&&!b){this.__requestDragPosition()}}},setDragOffsetY:function(a,b){if(this.dragOffsetY!==a){this.dragOffsetY=a;if(this.inited&&this.isDragging&&!b){this.__requestDragPosition()}}},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},getDragViews:function(){return[this]},__doContextMenu:function(a){},__doMouseDown:function(a){var c=myt.MouseObservable.getMouseFromEvent(a);this.dragInitX=c.x-this.x;this.dragInitY=c.y-this.y;var b=myt.global.mouse;this.attachToDom(b,"__doMouseUp","mouseup",true);if(this.distanceBeforeDrag>0){this.attachToDom(b,"__doDragCheck","mousemove",true)}else{this.startDrag(a)}a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){if(this.isDragging){this.stopDrag(a,false)}else{var b=myt.global.mouse;this.detachFromDom(b,"__doMouseUp","mouseup",true);this.detachFromDom(b,"__doDragCheck","mousemove",true)}return this.draggableAllowBubble},__watchForAbort:function(a){if(a.value===27){this.stopDrag(a,true)}},__doDragCheck:function(a){var c=myt.MouseObservable.getMouseFromEvent(a),b=myt.Geometry.measureDistance(c.x,c.y,this.dragInitX+this.x,this.dragInitY+this.y);if(b>=this.distanceBeforeDrag){this.detachFromDom(myt.global.mouse,"__doDragCheck","mousemove",true);this.startDrag(a)}},startDrag:function(b){if(this.centerOnMouse){this.syncTo(this,"__updateDragInitX","width");this.syncTo(this,"__updateDragInitY","height")}var a=myt.global;if(this.allowAbort){this.attachTo(a.keys,"__watchForAbort","keyup")}this.setIsDragging(true);this.attachToDom(a.mouse,"updateDrag","mousemove",true);this.updateDrag(b)},updateDrag:function(a){this.__lastMousePosition=myt.MouseObservable.getMouseFromEvent(a);this.__requestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},__requestDragPosition:function(){var a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+this.dragOffsetY)},stopDrag:function(c,a){var b=myt.global,d=b.mouse;this.detachFromDom(d,"__doMouseUp","mouseup",true);this.detachFromDom(d,"updateDrag","mousemove",true);if(this.centerOnMouse){this.detachFrom(this,"__updateDragInitX","width");this.detachFrom(this,"__updateDragInitY","height")}if(this.allowAbort){this.detachFrom(b.keys,"__watchForAbort","keyup")}this.setIsDragging(false)},requestDragPosition:function(a,b){if(!this.disabled){this.setX(a);this.setY(b)}}});myt.SliderThumbMixin=new JS.Module("SliderThumbMixin",{include:[myt.Draggable],initNode:function(b,a){if(a.width===undefined){a.width=b.thumbWidth}if(a.height===undefined){a.height=b.thumbHeight}if(a.repeatKeyDown===undefined){a.repeatKeyDown=true}if(a.activationKeys===undefined){a.activationKeys=[37,38,39,40]}this.callSuper(b,a);if(b.axis==="x"){this.setY(b.thumbOffset)}else{this.setX(b.thumbOffset)}this.syncTo(b,"setDisabled","disabled");b._syncThumbToValue(this,b.getValue())},setDisabled:function(a){if(a!==null&&typeof a==="object"){a=a.value}this.callSuper(a)},setFocused:function(a){this.callSuper(a);if(a){this.makeHighestZIndex()}},setX:function(a){if(this.x!==a){this.callSuper(a);var b=this.parent;if(b.axis==="x"){b._syncValueToThumb(this)}}},setY:function(a){if(this.y!==a){this.callSuper(a);var b=this.parent;if(b.axis==="y"){b._syncValueToThumb(this)}}},requestDragPosition:function(a,h){if(!this.disabled){var d=this.parent,c=d.getMinPixelValueForThumb(this),g=d.getMaxPixelValueForThumb(this),b,f,e;if(d.axis==="x"){b=this.width/2;f=a;e=this.setX}else{b=this.height/2;f=h;e=this.setY}e.call(this,Math.min(Math.max(f,c-b),g-b))}},doActivationKeyDown:function(b,a){var c=this.parent;switch(b){case 37:c.nudgeValueLeft(this);break;case 38:c.nudgeValueUp(this);break;case 39:c.nudgeValueRight(this);break;case 40:c.nudgeValueDown(this);break}this.callSuper(b,a)}});myt.SimpleSliderThumb=new JS.Class("SimpleSliderThumb",myt.SimpleButton,{include:[myt.SliderThumbMixin],initNode:function(b,a){if(a.activeColor===undefined){a.activeColor="#bbbbbb"}if(a.readyColor===undefined){a.readyColor="#cccccc"}if(a.hoverColor===undefined){a.hoverColor="#dddddd"}if(a.boxShadow===undefined){a.boxShadow=[0,0,4,"#666666"]}this.callSuper(b,a);if(a.roundedCorners===undefined){this.setRoundedCorners(Math.min(this.height,this.width)/2)}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow([0,0,9,"#666666"])},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow([0,0,4,"#666666"])}});myt.BaseSlider=new JS.Class("BaseSlider",myt.View,{include:[myt.Disableable],initNode:function(b,a){if(a.axis===undefined){a.axis="x"}if(a.axis==="x"){if(a.width===undefined){a.width=100}if(a.height===undefined){a.height=18}}else{if(a.width===undefined){a.width=18}if(a.height===undefined){a.height=100}}if(a.bgColor===undefined){a.bgColor="#999999"}if(a.roundedCorners===undefined){a.roundedCorners=9}if(a.trackInset===undefined){a.trackInset=9}if(a.trackOutset===undefined){a.trackOutset=9}if(a.thumbWidth===undefined){a.thumbWidth=16}if(a.thumbHeight===undefined){a.thumbHeight=16}if(a.thumbOffset===undefined){a.thumbOffset=1}if(a.nudgeAmount===undefined){a.nudgeAmount=1}if(a.thumbClass===undefined){a.thumbClass=myt.SimpleSliderThumb}this.callSuper(b,a)},setAxis:function(a){this.axis=a},setTrackInset:function(a){this.trackInset=a},setTrackOutset:function(a){this.trackOutset=a},setThumbWidth:function(a){this.thumbWidth=a},setThumbHeight:function(a){this.thumbHeight=a},setThumbOffset:function(a){this.thumbOffset=a},setThumbClass:function(a){this.thumbClass=a},setNudgeAmount:function(a){this.nudgeAmount=a},convertValueToPixels:function(b){var a=this.minValue,c=this.trackInset,e=(this.axis==="x"?this.width:this.height)-c-this.trackOutset,d=this.maxValue-a;return c+((b-a)*(e/d))},convertPixelsToValue:function(b){var a=this.minValue,c=this.trackInset,e=(this.axis==="x"?this.width:this.height)-c-this.trackOutset,d=this.maxValue-a;return((b-c)*(d/e))+a},nudgeValueLeft:function(a){this._nudge(a,false)},nudgeValueUp:function(a){this._nudge(a,false)},nudgeValueRight:function(a){this._nudge(a,true)},nudgeValueDown:function(a){this._nudge(a,true)},_nudge:function(b,a){},_syncThumbToValue:function(a,b){b=this.convertValueToPixels(b);if(this.axis==="x"){a.setX(b-a.width/2)}else{a.setY(b-a.height/2)}}});myt.Slider=new JS.Class("Slider",myt.BaseSlider,{include:[myt.BoundedValueComponent],doAfterAdoption:function(){new this.thumbClass(this,{name:"thumb"});this.callSuper()},setValue:function(a){this.callSuper(a);if(this.inited&&!this.__lockSync){this._syncThumbToValue(this.thumb,this.getValue())}},setWidth:function(a,c){var b=this.width;this.callSuper(a,c);if(this.inited&&this.axis==="x"&&this.width!==b){this._syncThumbToValue(this.thumb,this.getValue())}},setHeight:function(a,c){var b=this.height;this.callSuper(a,c);if(this.inited&&this.axis==="y"&&this.height!==b){this._syncThumbToValue(this.thumb,this.getValue())}},_syncValueToThumb:function(a){if(this.inited&&!this.__lockSync){this.__lockSync=true;this.setValue(this.convertPixelsToValue(this.axis==="x"?a.x+a.width/2:a.y+a.height/2));this._syncThumbToValue(a,this.getValue());this.__lockSync=false}},_nudge:function(b,a){this.setValue(this.getValue()+this.nudgeAmount*(a?1:-1))},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(this.maxValue)}});myt.RangeComponent=new JS.Module("RangeComponent",{include:[myt.ValueComponent],setLowerValue:function(a){this.setValue({lower:a,upper:(this.value&&this.value.upper!==undefined)?this.value.upper:a})},getLowerValue:function(){return this.value?this.value.lower:undefined},setUpperValue:function(a){this.setValue({lower:(this.value&&this.value.lower!==undefined)?this.value.lower:a,upper:a})},getUpperValue:function(){return this.value?this.value.upper:undefined},setValue:function(c){if(c){var e=this.value,a=e?e.lower:undefined,d=e?e.upper:undefined;if(this.valueFilter){c=this.valueFilter(c)}if(c.lower===a&&c.upper===d){return}if(c.lower===undefined){c.lower=c.upper}if(c.upper===undefined){c.upper=c.lower}if(c.lower!==undefined&&c.upper!==undefined&&c.lower>c.upper){var b=c.lower;c.lower=c.upper;c.upper=b}this.value=c;if(this.inited){this.fireNewEvent("value",this.getValue());if(c.lower!==a){this.fireNewEvent("lowerValue",c.lower)}if(c.upper!==d){this.fireNewEvent("upperValue",c.upper)}}}else{this.callSuper(c)}},getValueCopy:function(){var a=this.value;return{lower:a.lower,upper:a.upper}}});myt.BoundedRangeComponent=new JS.Module("BoundedRangeComponent",{include:[myt.BoundedValueComponent,myt.RangeComponent],initNode:function(c,b){if(!b.valueFilter){var a=this;b.valueFilter=function(e){if(e){var d=a.maxValue,f=a.minValue;if(d!=null&&e.upper>d){e.upper=d}if(f!=null&&e.lower<f){e.lower=f}}return e}}this.callSuper(c,b)},setValue:function(a){if(this.snapToInt&&a!=null){if(a.lower!=null&&!isNaN(a.lower)){a.lower=Math.round(a.lower)}if(a.upper!=null&&!isNaN(a.upper)){a.upper=Math.round(a.upper)}}this.callSuper(a)}});myt.SimpleSliderRangeFill=new JS.Class("SimpleSliderRangeFill",myt.View,{initNode:function(b,a){if(a.bgColor===undefined){a.bgColor="#666666"}this.callSuper(b,a);if(b.axis==="x"){this.setY(b.thumbOffset);this.setHeight(b.thumbHeight);this.setRoundedCorners(b.thumbHeight/2)}else{this.setX(b.thumbOffset);this.setWidth(b.thumbWidth);this.setRoundedCorners(b.thumbWidth/2)}b._syncRangeFillToValue()}});myt.RangeSlider=new JS.Class("RangeSlider",myt.BaseSlider,{include:[myt.BoundedRangeComponent],initNode:function(b,a){if(a.rangeFillClass===undefined){a.rangeFillClass=myt.SimpleSliderRangeFill}this.callSuper(b,a)},doAfterAdoption:function(){new this.rangeFillClass(this,{name:"rangeFill"});new this.thumbClass(this,{name:"thumbLower"});new this.thumbClass(this,{name:"thumbUpper"});this.callSuper()},setRangeFillClass:function(a){this.rangeFillClass=a},setValue:function(a){this.callSuper(a);if(this.inited){if(!this.__lockSync){a=this.getValue();this._syncThumbToValue(this.thumbLower,a);this._syncThumbToValue(this.thumbUpper,a)}this._syncRangeFillToValue()}},setWidth:function(a,c){var b=this.width;this.callSuper(a,c);if(this.inited&&this.axis==="x"&&this.width!==b){var d=this.getValue();this._syncThumbToValue(this.thumbLower,d);this._syncThumbToValue(this.thumbUpper,d)}},setHeight:function(a,c){var b=this.height;this.callSuper(a,c);if(this.inited&&this.axis==="y"&&this.height!==b){var d=this.getValue();this._syncThumbToValue(this.thumbLower,d);this._syncThumbToValue(this.thumbUpper,d)}},_syncRangeFillToValue:function(){var a=this.rangeFill,d=this.getValue(),b=this.convertValueToPixels(d.lower),c=this.convertValueToPixels(d.upper)-b;if(this.axis==="x"){a.setX(b);a.setWidth(c)}else{a.setY(b);a.setHeight(c)}},_syncThumbToValue:function(a,b){this.callSuper(a,a.name==="thumbLower"?b.lower:b.upper)},_syncValueToThumb:function(a){if(this.inited&&!this.__lockSync){this.__lockSync=true;var c=this.convertPixelsToValue(this.axis==="x"?a.x+a.width/2:a.y+a.height/2);var b=this.getValueCopy();if(a.name==="thumbLower"){b.lower=c}else{b.upper=c}this.setValue(b);b=this.getValue();if(this.thumbLower){this._syncThumbToValue(this.thumbLower,b)}if(this.thumbUpper){this._syncThumbToValue(this.thumbUpper,b)}this.__lockSync=false}},_nudge:function(c,a){var d=this.getValueCopy(),b=this.nudgeAmount*(a?1:-1);if(c.name==="thumbLower"){d.lower+=b;if(d.lower>d.upper){d.lower=d.upper}}else{d.upper+=b;if(d.lower>d.upper){d.upper=d.lower}}this.setValue(d)},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(a.name==="thumbLower"?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(a.name==="thumbLower"?this.getValue().upper:this.maxValue)}});myt.DividerDrawingMethod=new JS.Class("DividerDrawingMethod",myt.DrawingMethod,{draw:function(d,e){var l=e.bounds,m=l.x,k=l.y,n=l.w,j=l.h,p=e.inset,c,a,f,o,g;d.clear();if(n==0||j==0){return}switch(e.state){case"hover":c=e.hoverFillColor||"#d8d8d8";a=e.hoverBumpColor||"#e8e8e8";break;case"active":c=e.activeFillColor||"#b8b8b8";a=e.activeBumpColor||"#c8c8c8";break;case"ready":c=e.focused?(e.focusedFillColor||"#d8d8d8"):(e.readyFillColor||"#cccccc");a=e.focused?(e.focusedBumpColor||"#e8e8e8"):(e.readyBumpColor||"#dddddd");break;case"disabled":c=e.readyFillColor||"#cccccc";a=e.readyBumpColor||"#dddddd";break}if(e.axis==="y"){k+=p;j-=2*p;f=d.createLinearGradient(m,k,m+n,k)}else{m+=p;n-=2*p;o=n/2;f=d.createLinearGradient(m,k,m,k+j)}d.beginPath();d.rect(m,k,n,j);d.closePath();f.addColorStop(0,e.readyFillColor||"#cccccc");f.addColorStop(0.5,c);f.addColorStop(1,e.readyFillColor||"#cccccc");d.setFillStyle(f);d.fill();d.setFillStyle(a);if(e.axis==="y"){o=j/2;g=Math.max(3*o,e.bumpMaxLength||14);m=m+(n-g)/2;k=k+o/2;myt.DrawingUtil.drawRoundedRect(d,o/2,0,m,k,g,o)}else{o=n/2;g=Math.max(3*o,e.bumpMaxLength||14);k=k+(j-g)/2;m=m+o/2;myt.DrawingUtil.drawRoundedRect(d,o/2,0,m,k,o,g)}d.fill()}});myt.BaseDivider=new JS.Class("BaseDivider",myt.DrawButton,{include:[myt.BoundedValueComponent,myt.Draggable],initNode:function(b,a){if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.DividerDrawingMethod"}if(a.axis===undefined){a.axis="x"}if(a.inset===undefined){a.inset=2}if(a.minValue===undefined){a.minValue=-a.inset}if(a.value===undefined){a.value=a.minValue}if(a.focusEmbellishment===undefined){a.focusEmbellishment=false}if(a.repeatKeyDown===undefined){a.repeatKeyDown=true}if(a.expansionState===undefined){a.expansionState=2}if(a.activationKeys===undefined){a.activationKeys=[37,38,39,40,13,32]}if(a.axis==="y"){if(a.height===undefined){a.height=8}if(a.cursor===undefined){a.cursor="row-resize"}}else{if(a.width===undefined){a.width=8}if(a.cursor===undefined){a.cursor="col-resize"}}this.__nudgeAcc=1;this.callSuper(b,a);if(a.restoreValue===undefined){this.setRestoreValue(this.value)}if(this.limitToParent!==undefined){this.__updateLimitToParentConstraint()}this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(a){this.expansionState=a},setRestoreValue:function(a){this.restoreValue=a},setLimitToParent:function(a){if(this.limitToParent!==a){this.limitToParent=a;if(this.inited){this.fireNewEvent("limitToParent",a);if(a===undefined){this.releaseConstraint("__limitToParent")}else{this.__updateLimitToParentConstraint()}}}},setInset:function(a){if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a);this.updateUI()}}},setAxis:function(a){if(this.inited){myt.dumpStack("Axis may not be updated after instantiation.");return}this.axis=a},setValue:function(a,b){this.callSuper(a);a=this.value;if(this.axis==="y"){this.setY(a)}else{this.setX(a)}if(b){this.setRestoreValue(a)}},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},__updateLimitToParentConstraint:function(){var a=this.axis==="y"?"height":"width";this.applyConstraint("__limitToParent",[this,"limitToParent",this,"inset",this,a,this.parent,a])},__limitToParent:function(a){var b=this.axis==="y"?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b]+this.inset)},doActivationKeyDown:function(c,b){this.callSuper(c,b);var a=0;switch(c){case 37:case 38:a=-1;break;case 39:case 40:a=1;break;case 13:case 32:default:this.doPrimaryAction();return}this.__nudgeAcc=b?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+a*this.__nudgeAcc,true);this.setExpansionState(2)},doPrimaryAction:function(){var a,d=this.restoreValue,c=this.maxValue,b=this.minValue;switch(this.expansionState){case 0:if(d!=null){this.setExpansionState(1);if(d===b){if(d!==c){this.doPrimaryAction()}}else{a=d}}break;case 1:if(c!=null){this.setExpansionState(3);if(this.value===c){this.doPrimaryAction()}else{a=c}}break;case 2:if(b!=null){this.setExpansionState(0);if(this.value===b){this.doPrimaryAction()}else{a=b}}break;case 3:if(d!=null){this.setExpansionState(2);if(d===c){this.doPrimaryAction()}else{a=d}}break}if(a!=null){this.stopActiveAnimators("value");this.animateOnce("value",a,null,250)}},requestDragPosition:function(a,b){if(!this.disabled){this.setValue(this.axis==="y"?b:a,true);this.setExpansionState(2)}},getDrawConfig:function(b){var a=this.callSuper(b);a.axis=this.axis;a.inset=this.inset;return a}});myt.HorizontalDivider=new JS.Class("HorizontalDivider",myt.BaseDivider,{initNode:function(b,a){a.axis="x";this.callSuper(b,a)}});myt.VerticalDivider=new JS.Class("VerticalDivider",myt.BaseDivider,{initNode:function(b,a){a.axis="y";this.callSuper(b,a)}});myt.GridColumnHeader=new JS.Module("GridColumnHeader",{include:[myt.BoundedValueComponent],extend:{DEFAULT_MIN_VALUE:16,DEFAULT_MAX_VALUE:9999},initNode:function(b,a){var e=myt,d=e.GridColumnHeader;if(a.minValue===undefined){a.minValue=d.DEFAULT_MIN_VALUE}if(a.maxValue===undefined){a.maxValue=d.DEFAULT_MAX_VALUE}if(a.resizable===undefined){a.resizable=true}if(a.flex===undefined){a.flex=0}if(a.cellXAdj===undefined){a.cellXAdj=0}if(a.cellWidthAdj===undefined){a.cellWidthAdj=0}if(a.sortable===undefined){a.sortable=true}if(a.sortState===undefined){a.sortState="none"}if(a.placement===undefined){a.placement="*"}this.callSuper(b,a);new e.View(this,{name:"resizer",cursor:"col-resize",width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:false},[e.SizeToParent,e.Draggable,{requestDragPosition:function(q,n){var g=this.parent,t=g.gridController,r=q-this.x;if(t.fitToWidth){if(r>0){var l=g.maxValue-g.value;var m=g._getGiveLeft();var k=g._getTakeRight();r=Math.min(r,Math.min(-k,l+m))}else{if(r<0){var v=g.minValue-g.value;var j=g._getTakeLeft();var h=g._getGiveRight();r=Math.max(r,Math.max(-h,v+j))}}if(r===0){return}}var f=g.value+r;if(g.resizable){g.setValue(f)}var s=f-g.value;var u=s-r;var o=0;if(s<0){o=g._stealPrevWidth(s)}else{if(s>0){o=g._givePrevWidth(s)}}this.dragInitX+=o;u-=o;if(t.fitToWidth){if(u<0){g._stealNextWidth(u)}else{if(u>0){g._giveNextWidth(u)}}}}}]);var c=this.gridController;if(c){c.notifyAddColumnHeader(this);c.notifyColumnHeaderXChange(this)}this.setWidth(this.value);this._updateLast()},destroy:function(a){this.setGridController();this.callSuper(a)},setSortable:function(a){this.set("sortable",a,true)},setSortState:function(a){this.set("sortState",a,true)},setCellWidthAdj:function(a){this.cellWidthAdj=a},setCellXAdj:function(a){this.cellXAdj=a},setFlex:function(a){this.flex=a},setColumnId:function(a){this.columnId=a},setLast:function(a){this.last=a;if(this.inited){this._updateLast()}},setResizable:function(a){this.set("resizable",a,true)},setGridController:function(a){var b=this.gridController;if(b!==a){if(b){b.notifyRemoveColumnHeader(this)}this.gridController=a;if(this.inited&&a){a.notifyAddColumnHeader(this);a.notifyColumnHeaderXChange(this);a.notifyColumnHeaderWidthChange(this)}}},setValue:function(a){this.callSuper(a);if(this.inited){this.setWidth(this.value)}},setMinValue:function(a){var b=this.minValue||0,c=this.gridController;this.callSuper(a);a=this.minValue;if(this.inited&&c&&b!==a){c.setMinWidth(c.minWidth+a-b)}},setMaxValue:function(a){var b=this.maxValue||0,c=this.gridController;if(a==null){a=myt.GridColumnHeader.DEFAULT_MAX_VALUE}this.callSuper(a);a=this.maxValue;if(this.inited&&c&&b!==a){c.setMaxWidth(c.maxWidth+a-b)}},setWidth:function(a,b){var d=this.width;this.callSuper(a,b);if(this.inited&&d!==this.width){var c=this.gridController;if(c){c.notifyColumnHeaderWidthChange(this)}}},setX:function(a){var c=this.x;this.callSuper(a);if(this.inited&&c!==this.x){var b=this.gridController;if(b){b.notifyColumnHeaderXChange(this)}}},_updateLast:function(){this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},_stealPrevWidth:function(d){var e=this.gridController.getPrevColumnHeader(this),b=0;if(e){var c=e.value+d;if(e.resizable){e.setValue(c)}var a=c-e.value;b=d-a;if(a<0){b+=e._stealPrevWidth(a)}}return b},_givePrevWidth:function(d){var e=this.gridController.getPrevColumnHeader(this),b=0;if(e){var c=e.value+d;if(e.resizable){e.setValue(c)}var a=c-e.value;b=d-a;if(a>0){b+=e._givePrevWidth(a)}}return b},_stealNextWidth:function(c){var d=this.gridController.getNextColumnHeader(this);if(d){var b=d.value+c;if(d.resizable){d.setValue(b)}var a=b-d.value;if(a<0){d._stealNextWidth(a)}}},_giveNextWidth:function(c){var d=this.gridController.getNextColumnHeader(this);if(d){var b=d.value+c;if(d.resizable){d.setValue(b)}var a=b-d.value;if(a>0){d._giveNextWidth(a)}}},_getGiveLeft:function(){var b=this.gridController.getPrevColumnHeader(this),a=0;if(b){a=b.maxValue-b.value+b._getGiveLeft()}return a},_getGiveRight:function(){var b=this.gridController.getNextColumnHeader(this),a=0;if(b){a=b.maxValue-b.value+b._getGiveRight()}return a},_getTakeLeft:function(){var b=this.gridController.getPrevColumnHeader(this),a=0;if(b){a=b.minValue-b.value+b._getTakeLeft()}return a},_getTakeRight:function(){var b=this.gridController.getNextColumnHeader(this),a=0;if(b){a=b.minValue-b.value+b._getTakeRight()}return a}});myt.GridRow=new JS.Module("GridRow",{initNode:function(b,a){if(a.placement===undefined){a.placement="*"}this.callSuper(b,a);var c=this.gridController;if(c){c.notifyAddRow(this)}},destroy:function(a){this.setGridController();this.callSuper(a)},setGridController:function(a){var b=this.gridController;if(b!==a){if(b){b.notifyRemoveRow(this)}this.gridController=a;if(this.inited&&a){a.notifyAddRow(this)}}},notifyColumnHeaderXChange:function(b){var a=this[b.columnId+"View"];if(a){a.setX(b.x+b.cellXAdj)}},notifyColumnHeaderWidthChange:function(b){var a=this[b.columnId+"View"];if(a){a.setWidth(b.width+b.cellWidthAdj)}}});myt.GridController=new JS.Module("GridController",{initNode:function(b,a){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=true;this.callSuper(b,a);this._fitToWidth();this._notifyHeadersOfSortState();if(!this.locked){this.doSort()}},setSort:function(a){if(!myt.areArraysEqual(a,this.sort)){this.sort=a;if(this.inited){this.fireNewEvent("sort",a);this._notifyHeadersOfSortState();if(!this.locked){this.doSort()}}}},setLastColumn:function(a){var b=this.lastColumn;if(b!==a){if(b){b.setLast(false)}this.lastColumn=a;if(a){a.setLast(true)}}},setFitToWidth:function(a){this.fitToWidth=a},setLocked:function(a){this.locked=a;if(this.inited&&!a){this.__tempLock=true;this._fitToWidth();this.__tempLock=false;var c=this.columnHeaders,b=c.length,d;while(b){d=c[--b];this.notifyColumnHeaderXChange(d);this.notifyColumnHeaderWidthChange(d)}this.doSort()}},setMaxWidth:function(a){this.set("maxWidth",a,true)},setMinWidth:function(a){this.set("minWidth",a,true)},setGridWidth:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.gridWidth!==a){this.gridWidth=a;if(this.inited){this._fitToWidth()}}},_fitToWidth:function(){if(this.locked||!this.fitToWidth){return}var o=this.columnHeaders,h=o.length,g=h,l;var m=0,p;while(g){l=o[--g];p=l.x+l.width;if(p>m){m=p}}var e=this.gridWidth-m;if(e===0){return}var j=e>0;var n=[],f;g=h;while(g){l=o[--g];if(l.resizable&&l.flex>0){f=(j?l.maxValue:l.minValue)-l.value;n.push({hdr:l,limit:f,amt:0})}}var a=n.length;if(a<=0){return}var k=0,d=0,b,c;while(e!==0){c=n[k];l=c.hdr;if(!c.full){if(j){b=Math.min(l.flex,e);if(c.amt+b>c.limit){b=c.limit-c.amt;c.full=true}}else{b=Math.max(-l.flex,e);if(c.amt+b<c.limit){b=c.limit-c.amt;c.full=true}}c.amt+=b;e-=b}else{++d}if(d===a){break}++k;if(k===a){k=0;d=0}}g=a;while(g){c=n[--g];l=c.hdr;l.setValue(l.value+c.amt)}if(e!==0){n=[];g=h;while(g){l=o[--g];if(l.resizable&&l.flex===0){f=(j?l.maxValue:l.minValue)-l.value;n.push({hdr:l,limit:f,amt:0})}}a=n.length;if(a<=0){return}k=0;d=0;while(e!==0){c=n[k];l=c.hdr;if(!c.full){if(j){b=Math.min(1,e);if(c.amt+b>c.limit){b=c.limit-c.amt;c.full=true}}else{b=Math.max(-1,e);if(c.amt+b<c.limit){b=c.limit-c.amt;c.full=true}}c.amt+=b;e-=b}else{++d}if(d===a){break}++k;if(k===a){k=0;d=0}}g=a;while(g){c=n[--g];l=c.hdr;l.setValue(l.value+c.amt)}}},_notifyHeadersOfSortState:function(){var d=this.columnHeaders,b=d.length,f,a=this.sort,e=a?a[0]:"",c=a?a[1]:"";while(b){f=d[--b];if(f.columnId===e){if(f.sortable){f.setSortState(c)}}else{f.setSortState("none")}}},doSort:function(){},getPrevColumnHeader:function(b){var a=this.getColumnHeaderIndex(b)-1;return a>=0?this.columnHeaders[a]:null},getNextColumnHeader:function(c){var a=this.getColumnHeaderIndex(c)+1;var b=this.columnHeaders;return a>0&&a<b.length?b[a]:null},hasColumnHeader:function(a){return this.getColumnHeaderIndex(a)!==-1},getColumnHeaderIndex:function(a){return this.columnHeaders.indexOf(a)},notifyAddColumnHeader:function(a){if(!this.hasColumnHeader(a)){this.columnHeaders.push(a);this.setLastColumn(a);this.setMaxWidth(this.maxWidth+a.maxValue);this.setMinWidth(this.minWidth+a.minValue);this._fitToWidth()}},notifyRemoveColumnHeader:function(c){var a=this.getColumnHeaderIndex(c);if(a>=0){var b=this.columnHeaders;b.splice(a,1);if(c.last){this.setLastColumn(b[b.length-1])}this.setMaxWidth(this.maxWidth-c.maxValue);this.setMinWidth(this.minWidth-c.minValue);this._fitToWidth()}},notifyColumnHeaderXChange:function(c){if(this.locked||this.__tempLock){return}var b=this.rows,a=b.length;while(a){b[--a].notifyColumnHeaderXChange(c)}},notifyColumnHeaderWidthChange:function(c){if(this.locked||this.__tempLock){return}var b=this.rows,a=b.length;while(a){b[--a].notifyColumnHeaderWidthChange(c)}},hasRow:function(a){return this.getRowIndex(a)!==-1},getRowIndex:function(a){return this.rows.indexOf(a)},notifyAddRow:function(c){if(!this.hasRow(c)){this.rows.push(c);if(!this.locked){var b=this.columnHeaders,a=b.length,d;while(a){d=b[--a];c.notifyColumnHeaderXChange(d);c.notifyColumnHeaderWidthChange(d)}this.doSort()}}},notifyRemoveRow:function(b){var a=this.getRowIndex(b);if(a>=0){this.rows.splice(a,1)}}});myt.Grid=new JS.Class("Grid",myt.View,{include:[myt.GridController],initNode:function(b,a){if(a.overflow===undefined){a.overflow="autox"}if(a.bgColor===undefined){a.bgColor="#cccccc"}if(a.rowSpacing===undefined){a.rowSpacing=1}if(a.columnSpacing===undefined){a.columnSpacing=1}this.callSuper(b,a)},doAfterAdoption:function(){var b=this.sizeHeightToRows,a=myt;var d=new a.View(this,{name:"header",overflow:"hidden"});new a.SpacedLayout(d,{name:"xLayout",locked:true,axis:"x",collapseParent:true,spacing:this.columnSpacing});new a.SizeToChildren(d,{name:"yLayout",locked:true,axis:"y"});var c=new a.View(this,{name:"content",overflow:b?"hidden":"autoy"});new a.SpacedLayout(c,{name:"yLayout",locked:true,axis:"y",spacing:this.rowSpacing,collapseParent:b});this.syncTo(this,"setGridWidth","width");this.syncTo(d,"_updateContentWidth","width");this.applyConstraint("_updateContentHeight",[b?c:this,"height",d,"height",d,"y"]);this.callSuper()},setSizeHeightToRows:function(a){this.sizeHeightToRows=a},setRowSpacing:function(a){if(this.rowSpacing!==a){this.rowSpacing=a;if(this.inited){this.content.yLayout.setSpacing(a)}}},setColumnSpacing:function(a){if(this.columnSpacing!==a){this.columnSpacing=a;if(this.inited){this.header.xLayout.setSpacing(a)}}},setLocked:function(c){if(this.inited){var e=this.header,a=e.xLayout,b=e.yLayout,d=this.content.yLayout;if(c){a.incrementLockedCounter();b.incrementLockedCounter();d.incrementLockedCounter()}else{a.decrementLockedCounter();a.update();b.decrementLockedCounter();b.update();d.decrementLockedCounter();d.update()}}this.callSuper(c)},_updateContentWidth:function(a){this.content.setWidth(a.value)},_updateContentHeight:function(b){var d=this.header,a=this.content,c=d.y+d.height;a.setY(c);if(this.sizeHeightToRows){this.setHeight(c+a.height)}else{a.setHeight(this.height-c)}},determinePlacement:function(b,a){if(b==="*"){var c;if(a.isA(myt.GridRow)){c=this.content}else{if(a.isA(myt.GridColumnHeader)){c=this.header}}if(c){if(a.gridController!==this){a.setGridController(this)}return c}}return this.callSuper(b,a)},doSort:function(){var a=this.sort||["",""],d=this.getSortFunction(a[0],a[1]);if(d){var c=this.content,b=c.yLayout;c.sortSubviews(d);b.sortSubviews(d);b.update()}},getSortFunction:function(d,c){if(d){var b=c==="ascending"?1:-1,a=d+"View";return function(f,e){var h=f[a].text,g=e[a].text;if(h>g){return b}else{if(g>h){return -b}}return 0}}}});myt.FontAwesome=new JS.Class("FontAwesome",myt.Markup,{extend:{FA_SIZE_CLASSES:["","fa-lg","fa-2x","fa-3x","fa-4x","fa-5x"],makeTag:function(c){if(Array.isArray(c)){var a=c.length;if(a>0){c.unshift("fa");++a;if(c[1].indexOf("fa-")!==0){c[1]="fa-"+c[1]}if(a>=3){c[2]=this.FA_SIZE_CLASSES[c[2]]||""}if(a>3){var d,b=3;for(;a>b;++b){d=c[b];if(d.indexOf("fa-")!==0){c[b]="fa-"+d}}}return'<i class="'+c.join(" ")+'"></i>'}}myt.dumpStack("Error making tag");console.error(c);return""},targets:[],active:false,registerForNotification:function(a){if(!this.active){this.targets.push(a)}},notifyActive:function(b){this.active=b;if(b){var a=this.targets;while(a.length){a.pop().sizeViewToDom()}}}},initNode:function(b,a){this.size=0;this.icon="";this.callSuper(b,a);this.__update();myt.FontAwesome.registerForNotification(this)},setIcon:function(a){var b=this.icon;this.set("icon",a,true);if(this.inited&&b!==a){this.__update()}},setSize:function(a){var b=this.size;this.set("size",a,true);if(this.inited&&b!==a){this.__update()}},setProperties:function(a){this.properties=a;this.fireNewEvent("properties",a);if(this.inited){this.__update()}},__update:function(){var a=this.properties;if(a){if(typeof a==="string"){a=a.split(" ")}else{a=a.concat()}a.unshift(this.size);a.unshift(this.icon)}else{a=[this.icon,this.size]}this.setHtml(myt.FontAwesome.makeTag(a))}});myt.loadScript("//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",function(){WebFont.load({custom:{families:["FontAwesome"],urls:["//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"],testStrings:{FontAwesome:"\uf00c\uf000"}},fontactive:function(b,a){myt.FontAwesome.notifyActive(true)}})},true);myt.SimpleGridColumnHeader=new JS.Class("SimpleGridColumnHeader",myt.SimpleIconTextButton,{include:[myt.GridColumnHeader],initNode:function(b,a){if(a.activeColor===undefined){a.activeColor="#999999"}if(a.hoverColor===undefined){a.hoverColor="#bbbbbb"}if(a.readyColor===undefined){a.readyColor="#aaaaaa"}if(a.inset===undefined){a.inset=2}if(a.outset===undefined){a.outset=2}if(a.height===undefined){a.height=18}if(a.contentAlign===undefined){a.contentAlign="left"}if(a.sortIconColor===undefined){a.sortIconColor="#666666"}this.callSuper(b,a);this.setDisabled(!this.sortable);this._updateTextWidth();this._updateSortIcon()},doAfterAdoption:function(){new myt.FontAwesome(this,{name:"sortIcon",align:"right",alignOffset:3,valign:"middle",textColor:this.sortIconColor},[{initNode:function(b,a){this.callSuper(b,a);this.deStyle.fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();var a=this.parent;a.setOutset(this.width+2);a._updateTextWidth()}}]);this.callSuper();this.textView.enableEllipsis()},setSortIconColor:function(a){this.sortIconColor=a;if(this.sortIcon){this.sortIcon.setTextColor(a)}},setSortable:function(a){this.callSuper(a);if(this.inited){if(a){this.setOutset(14)}this.setDisabled(!a);this._updateSortIcon()}},setSortState:function(a){this.callSuper(a);if(this.inited){this._updateSortIcon()}},setWidth:function(a,b){this.callSuper(a,b);if(this.inited){this._updateTextWidth()}},_updateSortIcon:function(){var a="";if(this.sortable){switch(this.sortState){case"ascending":a="chevron-up";break;case"descending":a="chevron-down";break}}this.sortIcon.setIcon(a)},_updateTextWidth:function(){if(this.contentAlign==="left"){var a=this.textView;if(a){a.setWidth(this.width-this.outset-a.x)}}},doActivated:function(){if(!this.disabled){switch(this.sortState){case"ascending":this.setSortState("descending");break;case"descending":this.setSortState("ascending");break;case"none":this.setSortState("ascending");break}this.gridController.setSort([this.columnId,this.sortState])}},drawDisabledState:function(){this.setBgColor(this.readyColor)},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()}});myt.StackablePanel=new JS.Module("StackablePanel",{include:[myt.Selectable],initNode:function(b,a){a.visible=a.selected=false;if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.panelId===undefined){a.panelId=a.name}this.callSuper(b,a);if(this.selected){this.doStackTransition()}},setPanelStack:function(a){this.panelStack=a},getPanelStack:function(){return this.panelStack||this.parent},setPanelId:function(a){this.panelId=a},setSelected:function(a){if(this.selected!==a){this.callSuper(a);if(this.inited){this.doStackTransition()}}},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});myt.PanelStackTransition=new JS.Class("PanelStackTransition",myt.Node,{to:function(a){var b=this._makePromise(a);b.keep();return b},from:function(a){var b=this._makePromise(a);b.keep();return b},_makePromise:function(a){var b={next:function(c){if(b.kept){c(a)}else{b._nextFunc=c}},keep:function(){b.kept=true;if(b._nextFunc){b._nextFunc(a)}}};return b}});myt.PanelStackFadeTransition=new JS.Class("PanelStackFadeTransition",myt.PanelStackTransition,{initNode:function(b,a){if(a.duration==null){a.duration=1000}this.callSuper(b,a)},setDuration:function(a){this.duration=a},to:function(a){var b=this._makePromise(a);a.stopActiveAnimators("opacity");a.setVisible(true);a.animate({attribute:"opacity",to:1,duration:this.duration}).next(function(c){a.makeHighestZIndex();b.keep()});return b},from:function(a){var b=this._makePromise(a);a.stopActiveAnimators("opacity");a.animate({attribute:"opacity",to:0,duration:this.duration}).next(function(c){a.setVisible(false);b.keep()});return b}});myt.PanelStackSlideTransition=new JS.Class("PanelStackSlideTransition",myt.PanelStackTransition,{initNode:function(b,a){if(a.duration==null){a.duration=1000}if(a.direction==null){a.direction="right"}this.callSuper(b,a)},setDuration:function(a){this.duration=a},setDirection:function(a){this.direction=a},to:function(c){var f=this._makePromise(c);var d=c.getPanelStack(),b,e;switch(this.direction){case"left":e="x";b=d.width;break;case"right":e="x";b=-d.width;break;case"up":e="y";b=d.height;break;case"down":e="y";b=-d.height;break}c.stopActiveAnimators(e);c.set(e,b);c.setVisible(true);var a=function(g){c.makeHighestZIndex();f.keep()};if(this.duration>0){c.animate({attribute:e,to:0,duration:this.duration}).next(a)}else{c.set(e,0);a()}return f},from:function(c){var f=this._makePromise(c);var d=c.getPanelStack(),b,e;switch(this.direction){case"left":e="x";b=-d.width;break;case"right":e="x";b=d.width;break;case"up":e="y";b=-d.height;break;case"down":e="y";b=d.height;break}c.stopActiveAnimators(e);var a=function(g){c.setVisible(false);f.keep()};if(this.duration>0){c.animate({attribute:e,to:b,duration:this.duration}).next(a)}else{c.set(e,b);a()}return f}});myt.PanelStack=new JS.Class("PanelStack",myt.View,{include:[myt.SelectionManager],initNode:function(b,a){a.overflow="hidden";if(a.itemSelectionId===undefined){a.itemSelectionId="panelId"}if(a.maxSelected===undefined){a.maxSelected=1}this.callSuper(b,a);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(a){this.set("transition",a,true)},__updateWidth:function(b){var a=this.getActivePanel();if(a){a.setWidth(b.value)}},__updateHeight:function(b){var a=this.getActivePanel();if(a){a.setHeight(b.value)}},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(a){return this.getSelectableItem(a)},selectPanel:function(a){this.selectById(a)},doSelected:function(a){a.setWidth(this.width);a.setHeight(this.height)},doStackTransition:function(a){this["doStackTransition"+(a.selected?"To":"From")](a)},doStackTransitionTo:function(a){this.doBeforeTransitionTo(a);var c=this.transition;if(c){var b=this;c.to(a).next(function(){b.doAfterTransitionTo(a)})}else{a.makeHighestZIndex();a.setVisible(true);this.doAfterTransitionTo(a)}},doBeforeTransitionTo:function(a){},doAfterTransitionTo:function(a){},doStackTransitionFrom:function(a){this.doBeforeTransitionFrom(a);var c=this.transition;if(c){var b=this;c.from(a).next(function(){b.doAfterTransitionFrom(a)})}else{a.setVisible(false);this.doAfterTransitionFrom(a)}},doBeforeTransitionFrom:function(a){},doAfterTransitionFrom:function(a){}});myt.DragGroupSupport=new JS.Module("DragGroupSupport",{initNode:function(b,a){this.__dragGroups={"*":true};this.__acceptAny=true;this.callSuper(b,a)},setDragGroups:function(b){var a={};for(var c in b){a[c]=true}this.__dragGroups=a;this.__acceptAny=a.hasOwnProperty("*")},getDragGroups:function(){return this.__dragGroups},addDragGroup:function(a){if(a){this.__dragGroups[a]=true;if(a==="*"){this.__acceptAny=true}}},removeDragGroup:function(a){if(a){delete this.__dragGroups[a];if(a==="*"){this.__acceptAny=false}}},acceptAnyDragGroup:function(){return this.__acceptAny}});myt.Dropable=new JS.Module("Dropable",{include:[myt.Draggable,myt.DragGroupSupport],setDropTarget:function(a){this.dropTarget=a},setDropped:function(a){this.dropped=a},setDropFailed:function(a){this.dropFailed=a},willPermitDrop:function(a){return true},startDrag:function(a){this.setDropped(false);this.setDropFailed(false);myt.global.dragManager.startDrag(this);this.callSuper(a)},updateDrag:function(a){myt.global.dragManager.updateDrag(a,this);this.callSuper(a)},stopDrag:function(b,a){myt.global.dragManager.stopDrag(b,this,a);this.callSuper(b,a);if(a){this.notifyDropAborted()}else{if(this.dropFailed){this.notifyDropFailed()}}},notifyDragEnter:function(a){this.setDropTarget(a)},notifyDragLeave:function(a){this.setDropTarget()},notifyDrop:function(b,a){this.setDropped(true);if(!this.dropTarget){this.setDropFailed(true)}},notifyDropFailed:function(){},notifyDropAborted:function(){}});myt.DropTarget=new JS.Module("DropTarget",{include:[myt.DragGroupSupport],initNode:function(b,a){this.callSuper(b,a);myt.global.dragManager.registerDropTarget(this)},destroyAfterOrphaning:function(){myt.global.dragManager.unregisterDropTarget(this);this.callSuper()},willAcceptDrop:function(a){if(this.disabled||!this.isVisible()){return false}return true},notifyDragStart:function(a){},notifyDragStop:function(a){},notifyDragEnter:function(a){},notifyDragLeave:function(a){},notifyDrop:function(a){}});myt.DropSource=new JS.Module("DropSource",{include:[myt.Draggable],initNode:function(b,a){if(a.distanceBeforeDrag===undefined){a.distanceBeforeDrag=2}if(a.dropParent===undefined){a.dropParent=b.getRoot()}this.callSuper(b,a)},setDropClass:function(a){this.dropClass=a},setDropClassAttrs:function(a){this.dropClassAttrs=a},setDropParent:function(a){this.dropParent=a},startDrag:function(c){var a=this.dropable=this.makeDropable();if(a){var b=a.distanceBeforeDrag;a.distanceBeforeDrag=0;a.doMouseDown(c);a.__doMouseDown(c);a.distanceBeforeDrag=b}},doMouseUp:function(b){this.callSuper(b);var a=this.dropable;if(a){a.__doMouseUp(b);a.doMouseUp(b);this.dropable=null}},makeDropable:function(){var b=this.dropClass,c=this.dropParent;if(b&&c){var d=myt.DomElementProxy.getPagePosition(this.domElement,c.domElement),a=this.dropClassAttrs||{};a.x=d.x||0;a.y=d.y||0;return new b(c,a)}}});myt.AutoScroller=new JS.Module("AutoScroller",{include:[myt.DragGroupSupport],initNode:function(b,a){this.scrollBorder=40;this.scrollFrequency=50;this.scrollAmount=2;this.scrollAcceleration=7;if(a.overflow===undefined){a.overflow="auto"}this.callSuper(b,a);myt.global.dragManager.registerAutoScroller(this)},destroyAfterOrphaning:function(){myt.global.dragManager.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(a){this.scrollBorder=a},setScrollFrequency:function(a){this.scrollFrequency=a},setScrollAmount:function(a){this.scrollAmount=a},setScrollAcceleration:function(a){this.scrollAcceleration=a},notifyDragStart:function(a){var b=this.domElement;if(b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth){this.attachToDom(myt.global.mouse,"__handleMouseMove","mousemove",true)}},notifyDragStop:function(a){this.detachFromDom(myt.global.mouse,"__handleMouseMove","mousemove",true);this.__resetVScroll();this.__resetHScroll()},__handleMouseMove:function(d){var a=d.value,c=a.pageX,b=a.pageY;if(this.containsPoint(c,b)){var f=this.getPagePosition(),e=this.scrollBorder;c-=f.x;b-=f.y;if(b<e){this.__isAutoscrollUp=true;this.__amountscrollUp=this.__calculateAmount((e-b)/e);if(!this.__timerIdAutoscrollUp){this.__doAutoScrollAdj("scrollUp",-1)}}else{if(this.height-b<e){this.__isAutoscrollDown=true;this.__amountscrollDown=this.__calculateAmount((e-(this.height-b))/e);if(!this.__timerIdAutoscrollDown){this.__doAutoScrollAdj("scrollDown",1)}}else{this.__resetVScroll()}}if(c<e){this.__isAutoscrollLeft=true;this.__amountscrollLeft=this.__calculateAmount((e-c)/e);if(!this.__timerIdAutoscrollLeft){this.__doAutoScrollAdj("scrollLeft",-1)}}else{if(this.width-c<e){this.__isAutoscrollRight=true;this.__amountscrollRight=this.__calculateAmount((e-(this.width-c))/e);if(!this.__timerIdAutoscrollRight){this.__doAutoScrollAdj("scrollRight",1)}}else{this.__resetHScroll()}}}else{this.__resetVScroll();this.__resetHScroll()}},__calculateAmount:function(a){return Math.round(this.scrollAmount*(1+this.scrollAcceleration*a))},__resetVScroll:function(){this.__isAutoscrollUp=false;this.__timerIdAutoscrollUp=null;this.__isAutoscrollDown=false;this.__timerIdAutoscrollDown=null},__resetHScroll:function(){this.__isAutoscrollLeft=false;this.__timerIdAutoscrollLeft=null;this.__isAutoscrollRight=false;this.__timerIdAutoscrollRight=null},__doAutoScrollAdj:function(b,c){if(this["__isAuto"+b]){this.domElement[b==="scrollUp"||b==="scrollDown"?"scrollTop":"scrollLeft"]+=c*this["__amount"+b];var a=this;this["__timerIdAuto"+b]=setTimeout(function(){a.__doAutoScrollAdj(b,c)},this.scrollFrequency)}}});myt.Eventable=new JS.Class("Eventable",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Constrainable],initialize:function(c,b){if(b){for(var d=0,a=b.length;a>d;){this.extend(b[d++])}}this.inited=false;this.init(c||{})},init:function(a){this.callSetters(a);this.inited=true},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});myt.Annulus=new JS.Class("Annulus",myt.View,{extend:{draw:function(h,m,j,a,q,r,l,f,u){if(m>j){var s=m;m=j;j=s}var n=q+a,k=Math.PI,p=j-m,g=p+0.0001>=2*k;if(g){m=0;j=k}var d=Math.cos,b=Math.sin,o=[[r+n*d(m),r+n*b(m)],[r+n*d(j),r+n*b(j)],[r+q*d(j),r+q*b(j)],[r+q*d(m),r+q*b(m)]],e=[];e.push("M"+o[0].join());if(g){e.push("A"+[n,n,0,1,1,o[1]].join());e.push("A"+[n,n,0,1,1,o[0]].join());e.push("L"+o[2].join());e.push("A"+[q,q,0,1,0,o[3]].join());e.push("A"+[q,q,0,1,0,o[2]].join())}else{var t=(p%(2*k))>k?1:0;e.push("A"+[n,n,0,t,1,o[1]].join());if(u){e.push("A"+[a/2,a/2,0,0,1,o[2]].join())}else{e.push("L"+o[2].join())}e.push("A"+[q,q,0,t,0,o[3]].join());if(f){e.push("A"+[a/2,a/2,0,0,1,o[0]].join())}}e.push("z");h.setAttribute("d",e.join(" "));h.setAttribute("fill",l)},makeSVG:function(b,a){var c=document.createElementNS("http://www.w3.org/2000/svg",b);if(a){a.appendChild(c)}return c}},initNode:function(b,a){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=false;this.callSuper(b,a);this._updateSize()},createOurDomElement:function(b){var c=this.callSuper(b),d=myt.Annulus.makeSVG,a=this.__svg=d("svg",c);this.__path=d("path",a);a.style.pointerEvents="none";return c},setRadius:function(a){if(this.radius!==a){this.radius=a=Math.max(0,a);if(this.inited){this._updateSize();this.fireNewEvent("radius",a)}}},setThickness:function(a){if(this.thickness!==a){this.thickness=a=Math.max(0,a);if(this.inited){this._updateSize();this.fireNewEvent("thickness",a)}}},setStartAngle:function(a){if(this.startAngle!==a){this.startAngle=a;if(this.inited){this._redraw();this.fireNewEvent("startAngle",a)}}},setEndAngle:function(a){if(this.endAngle!==a){this.endAngle=a;if(this.inited){this._redraw();this.fireNewEvent("endAngle",a)}}},setStartCapRounding:function(a){if(this.startCapRounding!==a){this.startCapRounding=a;if(this.inited){this._redraw();this.fireNewEvent("startCapRounding",a)}}},setEndCapRounding:function(a){if(this.endCapRounding!==a){this.endCapRounding=a;if(this.inited){this._redraw();this.fireNewEvent("endCapRounding",a)}}},setColor:function(a){if(this.color!==a){this.color=a;if(this.inited){this._redraw();this.fireNewEvent("color",a)}}},sendSubviewToBack:function(a){if(a.parent===this){var d=this.domElement,c=d.childNodes[1];if(a.domElement!==c){var b=d.removeChild(a.domElement);if(b){d.insertBefore(b,c)}}}},isColorAttr:function(a){return a==="color"||this.callSuper(a)},_updateSize:function(){var b=2*(this.radius+this.thickness);this.setWidth(b);this.setHeight(b);var a=this.__svg;a.setAttribute("viewBox","0 0 "+b+" "+b);a.setAttribute("width",b);a.setAttribute("height",b);this._redraw()},_redraw:function(){var a=myt.Geometry.degreesToRadians;myt.Annulus.draw(this.__path,a(this.startAngle),a(this.endAngle),this.thickness,this.radius,this.width/2,this.color,this.startCapRounding,this.endCapRounding)}});myt.WebSocket=new JS.Class("WebSocket",myt.Node,{initNode:function(b,a){this.status="closed";this.useJSON=true;this.callSuper()},destroy:function(){this.close(1000,"destroyed");this.callSuper()},setUseJSON:function(a){if(this.useJSON!==a){this.useJSON=a;if(this.inited){this.fireNewEvent("useJSON",a)}}},setStatus:function(a){if(this.status!==a){this.status=a;if(this.inited){this.fireNewEvent("status",a)}}},setUrl:function(a){if(typeof a==="object"&&typeof a.isA==="function"&&a.isA(myt.URI)){a=a.toString()}this.url=a},setProtocols:function(a){this.protocols=a},connect:function(d){if(!this._ws&&this.url){try{var a=this._ws=new WebSocket(this.url,this.protocols);var b=this.onOpen.bind(this);if(d){a.onopen=function(e){b(e);d(e);a.onopen=b}}else{a.onopen=b}a.onerror=this.onError.bind(this);a.onmessage=this.onMessage.bind(this);a.onclose=this.onClose.bind(this)}catch(c){this.onError(c)}}},send:function(e,d){var a=this._ws;if(a&&this.status==="open"){if(this.useJSON){try{e=JSON.stringify(e)}catch(c){this.onError(c)}}a.send(e);return true}else{if(!d){var b=this;this.connect(function(f){b.send(e,true)})}else{return false}}},close:function(a,b){if(this._ws){this._ws.close(a||1000,b||"close")}},onOpen:function(a){this.setStatus("open")},onError:function(b){console.error(b);var a=this._ws;if(a&&a.readyState!==1){this.close()}},onMessage:function(b){var c=b.data;if(this.useJSON){try{c=JSON.parse(c)}catch(a){this.onError(a)}}return c},onClose:function(a){if(this._ws){delete this._ws}this.setStatus("closed")}});myt.MessageTypeWebSocket=new JS.Class("MessageTypeWebSocket",myt.WebSocket,{extend:{MATCH_ANYTHING:function(a){return true},matcherFunctionsByKey:{}},initNode:function(b,a){this._listeners=[];if(a.protocols===undefined){a.protocols="typedMessage"}this.callSuper()},registerListener:function(h,e){if(h){var g=this._makeMatcherFunction(e);if(g){var d=this._listeners,c=d.length,a;while(c){a=d[--c];if(a.func===h){var f=a.patternMatchers,b=f.length;while(b){if(f[--b]===g){return}}f.push(g);return}}d.push({func:h,patternMatchers:[g]})}}},unregisterListener:function(h,e){if(h){var g=this._makeMatcherFunction(e);if(g){var d=this._listeners,c=d.length,a;while(c){a=d[--c];if(a.func===h){var f=a.patternMatchers,b=f.length;while(b){if(f[--b]===g){f.splice(b,1);break}}if(f.length===0){d.splice(c,1)}break}}}}},_makeMatcherFunction:function(b){var c;if(typeof b==="string"){var a=myt.MessageTypeWebSocket.matcherFunctionsByKey;c=a[b]||(a[b]=function(d){return d===b})}else{if(typeof b==="function"){c=b}else{if(b===undefined){c=myt.MessageTypeWebSocket.MATCH_ANYTHING}else{}}}return c},_getListenersForType:function(f){var b=[],e=this._listeners,d=e.length,a,g,c;while(d){a=e[--d];g=a.patternMatchers;c=g.length;while(c){if(g[--c](f)){b.push(a.func)}}}return b},sendTypedMessage:function(a,c,b){c=this.createMessage(a,c);if(c){return this.send(c,b)}},createMessage:function(c,d){var a;try{a=JSON.stringify(d)}catch(b){console.error(b);return}return{type:c||"",msg:a,date:Date.now()}},onMessage:function(d){var e=this.callSuper(d);try{e.msg=JSON.parse(e.msg)}catch(b){this.onError(e);return}var c=this._getListenersForType(e.type),a=c.length;while(a){c[--a](e)}return e}});myt.all=true;
