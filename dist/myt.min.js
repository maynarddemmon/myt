(q=>{let w;var u=a=>{let e=a.length;for(;e;){const c=a[--e];w=c.ver??c.id;if(c.str?.includes(c.sub)||c.prop)return c.id}};var n=a=>{const e=a.indexOf(w);if(0<=e)return parseFloat(a.slice(e+w.length+1))};const k=navigator.userAgent,b=navigator.platform;n=q.BrowserDetect={browser:u([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:k,sub:"Firefox",id:"Firefox"},{str:k,sub:"Chrome",id:"Chrome"},{str:k,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:n(k)||n(navigator.appVersion)||"UNKNOWN",os:u([{str:k,sub:"iPhone",id:"iPhone/iPod"},{str:b,sub:"Linux",id:"Linux"},{str:b,sub:"Mac",id:"Mac"},{str:b,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(n.browser){case "Chrome":case "Safari":q="WebKit";break;case "Explorer":q="MS";break;case "Firefox":q="Moz";break;case "Opera":q="O";break;default:q="UNKNOWN"}u=q.toLowerCase();n.prefix={dom:q,lowercase:u,css:"-"+u+"-",js:u[0].toUpperCase()+u.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const q=Math,w=q.abs,u=q.floor,n=q.ceil,k="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),b="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c=h=>(10>h?"0":"")+h,g=(h,d)=>{h=h.getTimezoneOffset();return(0<h?"-":"+")+c(u(w(h/60)))+(d?":":"")+(0==w(h%60)?"00":c(w(h%60)))},l=
{d:h=>c(h.getDate()),D:h=>a[h.getDay()],j:h=>h.getDate(),l:h=>e[h.getDay()],N:h=>0==h.getDay()?7:h.getDay(),S:h=>{h=h.getDate();return 1==h%10&&11!=h?"st":2==h%10&&12!=h?"nd":3==h%10&&13!=h?"rd":"th"},w:h=>h.getDay(),z:h=>{const d=new Date(h.getFullYear(),0,1);return n((h-d)/864E5)},W:h=>{const d=new Date(h.valueOf());h=(h.getDay()+6)%7;d.setDate(d.getDate()-h+3);h=d.valueOf();d.setMonth(0,1);4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7);return c(1+n((h-d)/6048E5))},F:h=>b[h.getMonth()],m:h=>
c(h.getMonth()+1),M:h=>k[h.getMonth()],n:h=>h.getMonth()+1,t:h=>{let d=h.getFullYear();h=h.getMonth()+1;12===h&&(d=d++,h=0);return(new Date(d,h,0)).getDate()},L:h=>{h=h.getFullYear();return 0==h%400||0!=h%100&&0==h%4},o:h=>{const d=new Date(h.valueOf());d.setDate(d.getDate()-(h.getDay()+6)%7+3);return d.getFullYear()},Y:h=>h.getFullYear(),y:h=>(""+h.getFullYear()).substr(2),a:h=>12>h.getHours()?"am":"pm",A:h=>12>h.getHours()?"AM":"PM",B:h=>u(1E3*((h.getUTCHours()+1)%24+h.getUTCMinutes()/60+h.getUTCSeconds()/
3600)/24),g:h=>h.getHours()%12||12,G:h=>h.getHours(),h:h=>c(h.getHours()%12||12),H:h=>c(h.getHours()),i:h=>c(h.getMinutes()),s:h=>c(h.getSeconds()),e:h=>/\((.*)\)/.exec((new Date).toString())[1],I:h=>{let d=null,f=0;for(;12>f;){const r=(new Date(h.getFullYear(),f++,1)).getTimezoneOffset();if(null===d)d=r;else if(r<d){d=r;break}else if(r>d)break}return h.getTimezoneOffset()==d|0},O:h=>g(h,!1),P:h=>g(h,!0),T:h=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:h=>60*-h.getTimezoneOffset(),c:h=>h.format("Y-m-d\\TH:i:sP"),
r:h=>h.toString(),U:h=>h.getTime()/1E3};return function(h){return h.replace(/(\\?)(.)/g,(d,f,r)=>""===f&&l[r]?l[r](this):r)}})();
(q=>{const w=(f,r)=>{var v=f.__mct__.get(r);if(v)return v.slice();const m=[];if(v=f.__anc__){const y=v.length;for(let C=0;C<y;C++){const F=v[C].__fns__;F.has(r)&&m.push(F.get(r))}}else{const y=f.__anc__=[],C=F=>{const H=F.__inc__,A=H.length;for(let t=0;t<A;t++)C(H[t]);y.includes(F)||(y.push(F),F=F.__fns__,F.has(r)&&m.push(F.get(r)))};C(f)}f.__mct__.set(r,m.slice());return m},u=(f,r)=>{const v=f.callable;return f.__hs?function(...m){const y=this.callSuper,C=w(r,f.name);let F=C.length-1;if(0===F)y&&
delete this.callSuper;else{const A=m.length,t=this.callSuper=(...p)=>{for(let x=p.length;x<A;x++)p[x]=m[x];0===--F&&delete this.callSuper;p=C[F].callable.call(this,...p);this.callSuper=t;F++;return p}}const H=v.call(this,...m);y?this.callSuper=y:delete this.callSuper;return H}:v},n=(f,r)=>{r=r??f;if(r===f){f.__anc__=null;f.__mct__=new Map;for(var v=f.__dep__,m=v.length;m--;)n(v[m])}v=r.__tgt__;m=f.__inc__;const y=m.length;for(let C=0;C<y;C++)n(m[C],r);for(const [C,F]of f.__fns__)f=F instanceof e?
u(F,r):F,v[C]!==f&&(v[C]=f)},k=f=>f.__meta__??(f.__meta__=new c(null,null,f)).include(f.klass,!0),b=f=>{const r=function(...v){return this.initialize(...v)??this};r.prototype=Object.create(f.prototype);return r},a=(f,r,v)=>v&&v.__fns__||"function"!==typeof v?v:new e(f,r,v),e=b(Object),c=q.Module=b(Object);e.prototype.initialize=function(f,r,v){this.module=f;this.name=r;this.callable=v;this.__hs=v.toString().includes("callSuper")};var g=c.prototype;g.initialize=function(f,r,v){this.__inc__=[];this.__dep__=
[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=v;f&&(this.__displayName=f);this.include(r,!0)};g.include=function(f,r){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var v=f.extend,m=f.include;v&&(v.__fns__||"function"!==typeof v)&&this.extend(v);if(m&&(m.__fns__||"function"!==typeof m)){v=m.length;for(let y=0;y<v;y++)this.include(m[y],!0)}for(const y of Object.keys(f))m=f[y],("extend"!==y&&"include"!==y||!m.__fns__&&"function"===typeof m)&&this.__fns__.set(y,a(this,
y,m))}!0!==r&&n(this)}return this};g.includes=function(f){if(f===this)return!0;const r=this.__inc__,v=r.length;for(let m=0;m<v;m++)if(r[m].includes(f))return!0;return!1};g.instanceMethod=function(f){return w(this,f).pop()};const l=new c("Kernel",{extend:function(f){k(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||k(this).includes(f)}}),h=q.Class=b(c),d=h.prototype;d.initialize=function(f,r,v){"function"!==typeof r&&(v=r,r=Object);c.prototype.initialize.call(this,
f);f=b(r);for(const m in this)f[m]===this[m]||f.hasOwnProperty(m)||(f[m]=this[m]);f.prototype.constructor=f.prototype.klass=f;k(f).include(r.__meta__);f.__tgt__=f.prototype;r=r===Object?{}:r.__fns__?r:new c(r.prototype,!0);f.include(l,!0).include(r,!0).include(v,!0);n(f);return f};g=(f,r)=>{f.__inc__=[];f.__dep__=[];const v=f.__tgt__=f.prototype,m=f.__fns__=new Map;for(const y of Object.keys(v))m.set(y,a(f,y,v[y]));v.constructor=v.klass=f;for(const y in d)f[y]===d[y]||f.hasOwnProperty(y)||(f[y]=d[y]);
f.include(r);f.constructor=f.klass=h};g(e,l);g(c,l);g(h,c);n(k(e));n(k(c));k(h).include(c.__meta__);q.Singleton=new h("Singleton",{initialize:(f,r,v)=>new (new h(f,r,v))})})(global.JS={});
(q=>{class w extends Error{constructor(A,t,...p){super(...p);this.name="FetchError";this.status=A;this.url=t}}let u=0,n;const k=Math,b=k.abs,a=k.min,e=k.max,c=k.pow,g=document,l=g.head,h=g.createElement.bind(g),d={},f={"":!0},r=g.fonts,v=A=>{const t=A.family.split('"').join("");[t,t+" "+A.weight].forEach(p=>{if(!f[p]){f[p]=!0;const x=d[p]??[];for(;x.length;)(p=x.pop())&&!p.destroyed&&p.sizeViewToDom()}})},m={},y=A=>{const t={};return(...p)=>{const x=JSON.stringify(p);return x in t?t[x]:t[x]=A(...p)}},
C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,F=/\$(\d+)/g,H=q.myt={version:2.02306021558E7,generateGuid:()=>++u,hash:A=>A.split("").reduce((t,p)=>{t=(t<<5)-t+p.charCodeAt(0);return t&t},0),addEventListener:(A,t,p,x,z)=>{A.addEventListener(t,p,{capture:x||!1,passive:z||!1})},removeEventListener:(A,t,p,x)=>{A.removeEventListener(t,p,x||!1)},resolveName:(A,t)=>{if(A&&0!==A.length){t=t??global;var p=Array.isArray(A)?A:A.split("."),x=p.length;for(let z=0;z<x;z++)if(t=t[p[z]],null==t){console.warn("resolveName failed for",
A,"at part",z,p[z]);return}return t}},resolveClassname:A=>{"string"===typeof A&&(A=H.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,t,p){const x=this._loadedScripts??(this._loadedScripts={});if(x[A])return console.warn("script already loaded for src",A),null;x[A]=!0;const z=h("script");z.type="text/javascript";z.async=!1;if(t){let D=!1;z.onload=z.onreadystatechange=()=>{D||z.readyState&&
"complete"!==z.readyState||(D=!0,z.onload=z.onreadystatechange=null,t())}}z.src=A+(p?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());l.appendChild(z);return z},dumpStack:(A,t)=>{let p;"string"===typeof A&&(p=A,A=null);H.global.error.notify(t||"error",null,p,A)},getRandom:A=>{const t=k.random();return A?e(0,a(A(t),.9999999999)):t},getRandomArbitrary:(A,t,p)=>{const x=a(A,t);return H.getRandom(p)*(e(A,t)-x)+x},getRandomInt:(A,t,p)=>{const x=a(A,t);return k.floor(H.getRandom(p)*(e(A,t)-x+1)+x)},
areFloatsEqual:(A,t,p)=>{const x=b(A),z=b(t);return b(A-t)<=(x>z?z:x)*(null==p?1E-6:b(p))},areArraysEqual:(A,t)=>{if(A!==t){if(null==A||null==t)return!1;let p=A.length;if(p!==t.length)return!1;for(;p;)if(A[--p]!==t[p])return!1}return!0},areObjectsEqual:(A,t)=>{if(A!==t){if(null==A||null==t)return!1;for(const p in A)if(A[p]!==t[p])return!1;for(const p in t)if(A[p]!==t[p])return!1}return!0},getElement:(A,t)=>g.getElementsByTagName(A||"body")[0<t?t:0],loadFontFaces:(A,t)=>{const p=[];A.forEach(x=>{x=
new FontFace(x.family,"url("+x.url+")",x.options);p.push(x.load())});Promise.all(p).then(x=>{x.forEach(z=>{r.add(z);v(z)});t?.(x)})},loadFontFace:(A,t,p={},x)=>{A=new FontFace(A,"url("+t+")",p);A.loaded.then(z=>{r.add(z);v(z);x?.(z)});A.load()},registerForFontNotification:(A,t)=>{f[t]?A&&!A.destroyed&&A.sizeViewToDom():(d[t]??(d[t]=[])).push(A)},createBaseFontCSSRule:A=>{H.addCSSRule(H.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{A?.forEach(H.createStylesheetLink)},createStylesheetLink:A=>
{const t=h("link");t.rel="stylesheet";A&&(t.href=A);l.appendChild(t);return t},createStylesheet:()=>{const A=h("style");l.appendChild(A);return A.sheet},addCSSRule:(A,t,p,x)=>{"insertRule"in A?A.insertRule(t+"{"+p+"}",x):"addRule"in A&&A.addRule(t,p,x)},removeCSSRules:A=>{let t=A.cssRules.length;for(;t;)t--,"deleteRule"in A?A.deleteRule(t):"removeRule"in A&&A.removeRule(t)},createInputPlaceholderCSSRule:(A,t,p,x=1)=>{var z=A.getODE();z=z.id||(z.id="id"+H.generateGuid());let D=A.__sheet;D?H.removeCSSRules(D):
D=A.__sheet=H.createStylesheet();A=[];t&&A.push("color:"+t);p&&A.push("font-family:"+p);x&&A.push("opacity:"+x);H.addCSSRule(D,"#"+z+"::placeholder",A.join("; "),0)},chainSortFunc:(A,t)=>(p,x)=>{const z=A(p,x);return 0===z?t(p,x):z},getAlphaObjSortFunc:y((A,t,p,x)=>{const z=t?1:-1;return(D,I)=>{D=D[A];I=I[A];x?("string"!==typeof D&&(D=""+D),"string"!==typeof I&&(I=""+I)):(D=D||"",I=I||"");p&&(D=D.toLowerCase(),I=I.toLowerCase());return D.localeCompare(I)*z}}),getNumericObjSortFunc:y((A,t)=>{const p=
t?1:-1;return(x,z)=>{x=x[A]||0;z=z[A]||0;return(x-z)*p}}),dataURIToBlob:A=>{var t=A.indexOf(",");const p=A.slice(0,t).split(":")[1].split(";")[0];A=A.slice(t+1);if(p.startsWith("text/"))A=decodeURIComponent(A);else{A=atob(A);t=A.length;const x=new Uint8Array(t);for(;t;)x[--t]=A.charCodeAt(t);A=x}return new Blob([A],{type:p})},formatAsPercentage:(A,t=2)=>{if("number"===typeof A)return t=a(16,e(0,t)),A=k.round(e(0,a(1,A))*c(10,2+t))/c(10,t),(0===A%1?A:A.toFixed(t))+"%";"string"!==typeof A&&console.warn("formatAsPercentage: expects a number");
return A},memoize:y,debounce:function(A,t,p){const x="__DBTO_"+this.generateGuid();return function(){const z=this,D=z[x],I=arguments,K=p&&!D;clearTimeout(D);z[x]=setTimeout(function(){z[x]=null;p||A.apply(z,I)},t);K&&A.apply(z,I)}},createFixedThresholdCounter:(A,t,p,x)=>{var z=H.AccessorSupport.generateName;const D="function"===typeof A||A instanceof JS.Module,I={};x=x||z("counter",p);const K=z(x,"increment");z=z(x,"decrement");if(void 0!==(D?A.instanceMethod(K):A[K]))return console.warn("Increment: Abort clobber",
K,A),!1;if(void 0!==(D?A.instanceMethod(z):A[z]))return console.warn("Decrement: Abort clobber",z,A),!1;I[K]=function(){const J=this[x]+1;this[x]=J;this.fireEvent(x,J);J===t&&this.set(p,!0)};I[z]=function(){const J=this[x];if(0!==J){var N=J-1;this[x]=N;this.fireEvent(x,N);J===t&&this.set(p,!1)}};A[D?"include":"extend"](I);return!0},makeURLSearchParams:(A={})=>{const t=new URLSearchParams;for(const p in A){const x=A[p];void 0!==x&&t.set(p,x)}return t},doFetch:(A,t,p,x,z,D)=>fetch(A,t).then(I=>{if(!I.ok)throw new w(I.status,
A,I.statusText);return I}).then(I=>p?I.text():I.json()).then(I=>{if(x)try{if(p)x(I);else{if(!1===I.success)throw new w(200,A,I.message);x(I.data)}}catch(K){throw I=new w(200,A,K.message),I.stack=K.stack,I;}}).catch(I=>{if(z){if("FetchError"!==I.name){const K=new w(0,A,I.message);K.stack=I.stack;I=K}z(I)}}).finally(()=>{D?.()}),I18N:{setLocale:A=>{n=A},getLocale:()=>n,addDictionary:(A,t)=>{m[t]=Object.assign(m[t]??{},A)},setDictionary:(A,t)=>{m[t]=A??{}},get:(A,...t)=>{var p=n??=(navigator.language??
"en").split("-")[0].toLowerCase();p=(m[p]??m.en??{})[A];return null!=p?0<t.length?p.replaceAll(C,(x,z,D,I)=>D&&I?1==t[parseInt(z)]?D:I:"").replaceAll(F,(x,z)=>t[z]):p:A}}};r.onloadingdone=A=>{A.fontfaces.forEach(t=>{v(t)})}})(global);
(q=>{const w=(n,k)=>{n.startsWith('"')&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return k?JSON.parse(n):n}catch(b){}},u=q.Cookie={defaults:{raw:!1,json:!1},read:(n,k)=>{k={...u.defaults,...k};const b=k.raw?l=>l:l=>decodeURIComponent(l.split("+").join(" "));k=k.json;const a=document.cookie.split("; "),e=a.length,c=n?void 0:{};for(let l=0;l<e;){var g=a[l++].split("=");const h=b(g.shift());g=b(g.join("="));if(n){if(n===h)return w(g,k)}else c[h]=w(g,k)}return c},write:(n,k,b)=>
{b={...u.defaults,...b};if("number"===typeof b.expires){const a=b.expires,e=b.expires=new Date;e.setDate(e.getDate()+a)}k=b.json?JSON.stringify(k):String(k);return document.cookie=[b.raw?n:encodeURIComponent(n),"=",b.raw?k:encodeURIComponent(k),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.samesite?"; samesite="+b.samesite:"",b.secure?"; secure":""].join("")},remove:(n,k)=>void 0!==u.read(n,k)?(u.write(n,"",{...k,expires:-1}),!0):!1}})(myt);
(q=>{const w=global.localStorage,u=(k,b,a)=>{if(0<b){const e="__timerId_"+a;(a=n[e])&&clearTimeout(a);n[e]=setTimeout(()=>{k();delete n[e]},b)}else k()},n=q.LocalStorage={hasDatum:(k,b)=>{if(k&&(b=n.getItem(b??"myt")))try{return null!=JSON.parse(b)[k]}catch(a){console.error(a)}return!1},getDatum:(k,b)=>{if(k&&(b=n.getItem(b??"myt")))try{const a=JSON.parse(b);if("object"===typeof a)return a[k]}catch(a){console.error(a)}},setDatum:(k,b,a,e)=>{a=a??"myt";u(()=>{const c=n.getData(a);c[k]=b;n.setItem(a,
JSON.stringify(c))},e,a+"___"+k)},removeDatum:(k,b,a)=>{b=b??"myt";u(()=>{const e=n.getData(b);delete e[k];n.setItem(b,JSON.stringify(e))},a,b+"___"+k)},hasData:k=>null!=n.getItem(k??"myt"),getData:k=>{if(k=n.getItem(k??"myt"))try{return JSON.parse(k)}catch(b){console.error(b)}return{}},setData:(k,b,a)=>{b=b??"myt";k??={};return"object"===typeof k?(u(()=>{n.setItem(b,JSON.stringify(k))},a,b),!0):!1},removeData:(k,b)=>{k=k??"myt";u(()=>{n.removeItem(k)},b,k)},getLength:()=>w.length,getKey:k=>w.key(k),
getItem:k=>w.getItem(k),setItem:(k,b)=>{w.setItem(k,b)},removeItem:k=>{w.removeItem(k)},clear:()=>{w.clear()},get:k=>n.getItem(k),set:(k,b)=>{n.setItem(k,b)},remove:k=>{n.removeItem(k)},clearAll:()=>{n.clear()}}})(myt);
(q=>{const w=/(?:^|&)([^&=]*)=?([^&]*)/g,u=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;q.URI=new JS.Class("URI",{initialize:function(k,b){k&&this.parse(k,b)},setSource:function(k){this.source=k},setProtocol:function(k){this.protocol=
k},setAuthority:function(k){this.authority=k},setUserInfo:function(k){this.userInfo=k},setUser:function(k){this.user=k},setPassword:function(k){this.password=k},setHost:function(k){this.host=k},setPort:function(k){this.port=k},setRelative:function(k){this.relative=k},setPath:function(k){this.path=k},setDirectory:function(k){this.directory=k},setFile:function(k){this.file=k},setQuery:function(k){this.query=k},setAnchor:function(k){this.anchor=k},parse:function(k,b){const a=this,[e,c,g,l,h,d,f,r,v,
m,y,C,F,H]=(b?n:u).exec(k)??[];a.setSource(e??"");a.setProtocol(c??"");a.setAuthority(g??"");a.setUserInfo(l??"");a.setUser(h??"");a.setPassword(d??"");a.setHost(f??"");a.setPort(r??"");a.setRelative(v??"");a.setPath(m??"");a.setDirectory(y??"");a.setFile(C??"");a.setQuery(F??"");a.setAnchor(H??"");a.queryPairs={};a.query.replace(w,(A,t,p)=>{t&&(a.queryPairs[t]=p)})},decodeQueryParam:k=>decodeURIComponent(k).split("+").join(" "),getQuery:function(){var k=this.queryPairs;const b=[];for(const a in k)b.push(a+
"="+encodeURIComponent(this.getQueryParam(a)));k=b.join("&");return 0<k.length?"?"+k:k},getQueryParam:function(k){k=this.queryPairs[k];return null==k?void 0:this.decodeQueryParam(k)},setQueryParam:function(k,b){this.queryPairs[encodeURIComponent(k)]=encodeURIComponent(b)},removeQueryParam:function(k){delete this.queryPairs[k]},getPathParts:function(k){const b=this.path.split("/");if(!k)for(k=b.length;k;)0===b[--k].length&&b.splice(k,1);return b},toString:function(k){const b=this.path;k=k?this.query?
"?"+this.query:"":this.getQuery();const a=this.anchor;let e=this.toStringThroughPort();b?e+=b:this.host&&(k||a)&&(e+="/");k&&(e+=k);a&&(e+="#"+a);return e},toStringThroughPort:function(){const k=this.protocol,b=this.host,a=this.userInfo,e=this.port;let c="";k&&(c+=k+"://");a&&b&&(c+=a+"@");b&&(c+=b,e&&(c+=":"+e));return c}})})(myt);
(q=>{const w=Math,u=w.PI,n=w.cos,k=w.sin,b=w.sqrt,a=q.Geometry={getClosestPointOnALineToAPoint:(e,c,g,l,h,d,f)=>{g-=e;l-=c;h=(g*(h-e)+l*(d-c))/(g*g+l*l);f&&(h=w.min(1,w.max(0,h)));return{x:e+g*h,y:c+l*h}},isPointInPath:(e,c,g,l)=>{"object"===typeof e&&(l=g,g=c,c=e.y,e=e.x);if(a.rectContainsPoint(e,c,g)&&(g=l.length,6<=g)){let h=!1,d=l[0],f=l[1],r,v;for(;g;)v=l[--g],r=l[--g],v>c!==f>c&&e<(d-r)*(c-v)/(f-v)+r&&(h=!h),d=r,f=v;return h}return!1},rectContainsPoint:(e,c,g,l,h,d)=>{"object"===typeof e&&(d=
h,h=l,l=g,g=c,c=e.y,e=e.x);"object"===typeof g&&(d=g.height,h=g.width,l=g.y,g=g.x);return e>=g&&c>=l&&e<=g+h&&c<=l+d},circleContainsPoint:(e,c,g,l,h)=>a.measureDistance(e,c,g,l,!0)<=h*h,measureDistance:(e,c,g,l,h)=>{e=g-e;c=l-c;c=e*e+c*c;return h?c:b(c)},degreesToRadians:e=>e*u/180,radiansToDegrees:e=>180*e/u,circleContainsLatLng:(e,c,g,l,h,d)=>a.measureLatLngDistance(e,c,g,l,d)<=h,measureLatLngDistance:(e,c,g,l,h)=>{void 0===h&&(h=6371);e=a.degreesToRadians(e);c=a.degreesToRadians(c);g=a.degreesToRadians(g);
l=a.degreesToRadians(l);return h*w.acos(k(e)*k(g)+n(e)*n(g)*n(l-c))},polarToCartesian:(e,c,g,l)=>{g??=0;l??=0;c%=360;if(0===c)c=e,e=0;else if(90===c)c=0;else if(180===c)c=-e,e=0;else if(270===c)c=0,e=-e;else{const h=a.degreesToRadians(c);c=e*n(h);e*=k(h)}return[g+c,l+e]},cartesianToPolar:(e,c,g,l,h)=>{g??=0;l??=0;e-=g;l=c-l;c=b(e*e+l*l);l=w.atan2(l,e);0>l&&(l+=2*u);return[c,h?l:a.radiansToDegrees(l)]}}})(myt);
(q=>{const w=JS.Module;q.Observable=new w("Observable",{attachObserver:function(u,n,k){return u&&n&&k?(this.getObservers(k).push(n,u),!0):!1},detachObserver:function(u,n,k){if(u&&n&&k){var b=this.__obsbt;if(b&&(k=b[k])){b=!1;for(let a=k.length-2;0<=a;a-=2){const [e,c]=k.slice(a);u===c&&n===e&&(k.splice(a,2),b=!0)}return b}}return!1},detachAllObservers:function(){const u=this.__obsbt;if(u)for(const n in u){const k=u[n];for(let b=k.length-2;0<=b;b-=2){const [a,e]=k.slice(b);e&&a&&("function"===typeof e.detachFrom&&
e.detachFrom(this,a,n)||k.splice(b,2))}}},getObservers:function(u){let n;return(n=this.__obsbt??(this.__obsbt={}))[u]??(n[u]=[])},hasObservers:function(u){const n=this.__obsbt;return n?0<n[u]?.length:!1},createEvent:function(u,n){return{source:this,type:u,value:n}},fireEvent:function(u,n,k){if(k=k??(this.hasObservers(u)?this.__obsbt[u]:null)){const b={source:this,type:u,value:n},a=this.__aet??(this.__aet={});if(a[u])q.global.error.notify("warn","eventLoop","Abort refiring event:"+u,null,{observable:this,
type:u,value:n});else{a[u]=!0;for(n=k.length-2;0<=n;n-=2){const [e,c]=k.slice(n);if(c&&e)try{if("function"===typeof e){if(e.call(c,b))break}else if(c[e](b))break}catch(g){q.dumpStack(g),console.log("Additional context",e,c)}}a[u]=!1}}}});q.Observer=new w("Observer",{valueFromEvent:u=>u&&"object"===typeof u&&u.type?u.value:u,syncTo:function(u,n,k,b,a){b??=k;try{this[n](u.createEvent(k,u.get(b)))}catch(e){q.dumpStack(e)}a||this.attachTo(u,n,k,a)},isAttachedTo:function(u,n,k){if(u&&n&&k){var b=this.__obt;
if(b&&(k=b[k]))for(b=k.length-2;0<=b;b-=2){const [a,e]=k.slice(b);if(u===e&&n===a)return!0}}return!1},getObservables:function(u){let n;return(n=this.__obt??(this.__obt={}))[u]??(n[u]=[])},hasObservables:function(u){const n=this.__obt;return n?0<n[u]?.length:!1},attachTo:function(u,n,k,b){if(u&&n&&k){const a=this.getObservables(k);if(b){const e=this,c=n;this.__methodNameCounter??(this.__methodNameCounter=0);n="__DO_ONCE_"+this.__methodNameCounter++;this[n]=g=>{e.detachFrom(u,n,k);delete e[n];return e[c](g)}}if(u.attachObserver(this,
n,k))return a.push(n,u),!0}return!1},detachFrom:function(u,n,k){if(u&&n&&k){var b=this.__obt;if(b&&(b=b[k])){let a=!1;for(let e=b.length-2;0<=e;e-=2){const [c,g]=b.slice(e);u===g&&n===c&&u.detachObserver(this,n,k)&&(b.splice(e,2),a=!0)}return a}}return!1},detachFromAllObservables:function(){var u=this.__obt;if(u)for(const [n,k]of Object.entries(u)){for(u=k.length-2;0<=u;u-=2){const [b,a]=k.slice(u);a.detachObserver(this,b,n)}k.length=0}},constrain:function(u,n){if(u&&n){const b=n.length;if(0!==b%
2)console.log("Observables uneven",this);else{var k;const a=(k=this.__cbmn??(this.__cbmn={}))[u]??(k[u]=[]);if(0<a.length)console.log("Constraint exists for "+u+" on "+this);else{for(k=0;k<b;k+=2){const [e,c]=n.slice(k);e&&c&&(this.attachTo(e,u,c),a.push(e,c))}try{this[u]()}catch(e){q.dumpStack(e)}}}}},releaseConstraint:function(u){if(u){var n=this.__cbmn;if(n&&(n=n[u])){for(let k=n.length;0<=k;k-=2){const [b,a]=n.slice(k);this.detachFrom(b,u,a)}n.length=0}}},releaseAllConstraints:function(){const u=
this.__cbmn;if(u)for(const n in u)this.releaseConstraint(n)}})})(myt);myt.global=new JS.Singleton("Global",{include:[myt.Observable],initialize:()=>{},register:function(q,w){this.hasOwnProperty(q)&&(console.warn("Global key in use",q),this.unregister(q));this[q]=w;this.fireEvent("register"+q,w)},unregister:function(q){if(this.hasOwnProperty(q)){const w=this[q];delete this[q];this.fireEvent("unregister"+q,w)}else console.warn("Global key not in use",q)}});
new JS.Singleton("GlobalError",{include:[myt.Observable],initialize:function(){this.setStackTraceLimit(50);this.setConsoleLogging(!0);myt.global.register("error",this)},setConsoleLogging:function(q){this.consoleLogging=q},setStackTraceLimit:function(q){Error.stackTraceLimit=this.stackTraceLimit=q},notify:function(q,w,u,n,k){n??=Error(u??w);n=n.stack??n.stacktrace;u={msg:u,stacktrace:n};k&&Object.assign(u,k);this.fireEvent(w??"error",u);if(this.consoleLogging&&q)console[q](n)}});
(q=>{const w=global,u=w.getComputedStyle,n=document,k=Math.max,b=c=>{const {zIndex:g,opacity:l}=u(c);if("auto"===g){if(1===parseInt(l,10)){let h=0;c=c.childNodes;let d=c.length;for(;d;){const f=c[--d];1===f.nodeType&&(h=k(h,b(f)))}return h}return 0}return parseInt(g,10)},a=(c,g)=>{const l=[];for(;c;){l.push(c);if(c===g)break;c=c.parentNode}return l},e=q.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(c,g,l)=>{c=n.createElement(c);for(const h in l)c[h]=l[h];for(const h in g)c.style[h]=
g[h];return c},isDomElementVisible:c=>{if("INPUT"!==c.nodeName||"hidden"!==c.type)for(;c;){if(c===n)return!0;const {display:g,visibility:l}=u(c);if("none"===g||"hidden"===l)break;c=c.parentNode}return!1},getZIndexRelativeToAncestor:(c,g)=>{if(c&&g)for(c=a(c,g),g=c.length-1;g;){const l=u(c[--g]),h=l.zIndex,d="auto"===h;if(0===g||!d||1!==parseInt(l.opacity,10))return d?0:parseInt(h,10)}return 0},getAncestorArray:a,getHighestZIndex:b,getRelativePosition:(c,g)=>{if(c){let l=0,h=0;for(;c&&"BODY"!==c.nodeName&&
c!==g;)if(l+=c.offsetLeft,h+=c.offsetTop,(c=c.offsetParent)&&"BODY"!==c.nodeName){const {borderLeftWidth:d,borderTopWidth:f}=u(c);l+=parseInt(d,10)-c.scrollLeft;h+=parseInt(f,10)-c.scrollTop}return{x:l,y:h}}},getTruePosition:c=>{if(c)return c=c.getBoundingClientRect(),c.left+=w.scrollX,c.top+=w.scrollY,c},simulateDomEvent:(c,g,l)=>{if(c){const h={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},d={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(l)for(const r in l)h[r]=l[r];let f;for(const r in d)if(d[r].test(g)){f=r;break}if(!f)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(n.createEvent)l=n.createEvent(f),"HTMLEvents"===f?l.initEvent(g,h.bubbles,h.cancelable):l.initMouseEvent(g,h.bubbles,h.cancelable,n.defaultView,h.button,h.pointerX,h.pointerY,h.pointerX,h.pointerY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,null),c.dispatchEvent(l);
else{h.clientX=h.pointerX;h.clientY=h.pointerY;l=n.createEventObject();for(const r in h)l[r]=h[r];c.fireEvent("on"+g,l)}}},getScrollbarSize:q.memoize(()=>{const c=n.body,g=e.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});c.appendChild(g);const l=g.offsetWidth-g.clientWidth;c.removeChild(g);return l})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(c){if(Array.isArray(c)){const [g,
l]=c;this.__oE=g;this.__iE=l;this.__iS=l.style;this.__oS=g.style;l.model=g.model=this}else this.__oE=this.__iE=c,this.__iS=this.__oS=c.style,c.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(c){this.__iE.className=this.domClass=c},addDomClass:function(c){const g=this.__iE.className;this.setDomClass((g?
g+" ":"")+c)},removeDomClass:function(c){var g=this.__iE.className;if(g){g=g.split(" ");let l=g.length;for(;l;)g[--l]===c&&g.splice(l,1);this.setDomClass(g.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(c){this.__iE.id=this.domId=c},setZIndex:function(c){this.__oS.zIndex=c},setStyleProperty:function(c,g){this.__iS[c]=g},getPagePosition:function(c){return e["get"+(c?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){e.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return b(this.__iE)},getHighestChildZIndex:function(c){const g=this.__iE.childNodes;let l=g.length,h=0;for(;l;){const d=g[--l];1===d.nodeType&&d!==c&&(h=k(h,b(d)))}return h},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(c,g){(g?this.__iE:this.__oE).scrollTop=c||0}})})(myt);
(q=>{let w;const u=k=>{for(;k.lastChild;)k=k.lastChild;return k},n=(k,b)=>{w.lastTraversalWasForward=k;let a=document.body,e=a;var c=document.activeElement;let g=e,l;const h=k?"getNextFocus":"getPrevFocus";c&&(g=e=c,(c=e.model)??(c=w.findModelForDomElement(e)),c&&(b=c.getFocusTrap(b))&&(a=b.getIDE()));for(;g;){if(g.model&&g.model[h]&&(l=g.model[h]()))g=l.getIDE();else if(k)if(g.firstChild)g=g.firstChild;else{if(g===a)return e.model;if(g.nextSibling)g=g.nextSibling;else for(;g&&(g=g.parentNode,g!==
a);)if(g.nextSibling){g=g.nextSibling;break}}else g=g===a?u(a):g.previousSibling?u(g.previousSibling):g.parentNode;if(g===e)return e.model;if(1===g.nodeType)if((c=g.model)&&c instanceof q.View){if(c.isFocusable())return c}else if(b=g.nodeName,!("A"!==b&&"AREA"!==b&&"INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b&&"BUTTON"!==b||g.disabled||isNaN(g.tabIndex))&&q.DomElementProxy.isDomElementVisible(g)&&(c=w.findModelForDomElement(g),!c?.searchAncestorsOrSelf(d=>!0===d.maskFocus))){g.focus();w.focusedDom=g;
break}}};new JS.Singleton("GlobalFocus",{include:[q.Observable],initialize:function(){this.lastTraversalWasForward=!0;q.global.register("focus",w=this)},setFocusedView:k=>{if(w.focusedView!==k){w.prevFocusedView=w.focusedView;if(w.focusedView=k)w.focusedDom=null;w.fireEvent("focused",k)}},notifyFocus:k=>{w.focusedView!==k&&w.setFocusedView(k)},notifyBlur:k=>{w.focusedView===k&&w.setFocusedView(null)},clear:()=>{w.focusedView?w.focusedView.blur():w.focusedDom&&(w.focusedDom.blur(),w.focusedDom=null)},
next:k=>{n(!0,k)?.focus()},prev:k=>{n(!1,k)?.focus()},findModelForDomElement:k=>{for(;k;){let b=k.model;if(b&&b instanceof q.View)return b;k=k.parentNode}}})})(myt);
(q=>{const w=JS.Module,u=q.global,n=u.focus,k=()=>({source:null,type:null,value:null}),b=f=>{f=f.value??f;return(f.target??f.srcElement).model},a=q.KeyObservable=new w("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:k(),getKeyFromEvent:f=>f.value.key,getCodeFromEvent:f=>f.value.code,isEnterKeyEvent:f=>f.value.code===u.keys.CODE_ENTER,isEscKeyEvent:f=>f.value.code===u.keys.CODE_ESC,isShiftKeyEvent:f=>u.keys.isShiftCode(f.value.code)},createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,
r,v,a)??this.callSuper(f,r,v)}}),e=q.MouseObservable=new w("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:k(),getMouseFromEvent:f=>({x:f.value.pageX,y:f.value.pageY}),getMouseFromEventRelativeToView:(f,r)=>{r=r.getPagePosition();f=e.getMouseFromEvent(f);f.x-=r.x;f.y-=r.y;return f}},createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,r,v,e,!0)??this.callSuper(f,r,v)}}),c=q.ScrollObservable=
new w("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:k(),getScrollFromEvent:f=>{const {scrollLeft:r,scrollTop:v}=b(f);return{x:r,y:v}}},createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,r,v,c)??this.callSuper(f,r,v)}}),g=q.TouchObservable=new w("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:k()},createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,r,v,g,!1)??this.callSuper(f,r,v)}}),l=q.FocusObservable=
new w("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:k()},initNode:function(f,r){this.focusable=!1;this.focusIndicator=!0;this.callSuper(f,r)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(f){this.focused!==f&&(this.focused=f,this.inited&&(this.fireEvent("focused",f),f?n.notifyFocus(this):n.notifyBlur(this)))},setFocusable:function(f){if(this.focusable!==f){const r=this.focusable;(this.focusable=f)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):r&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",f)}},setFocusIndicator:function(f){this.focusIndicator!==f&&(this.focusIndicator=f,this.focused&&(f?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(n.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(f=>!0===f.maskFocus)},focus:function(f){this.isFocusable()&&this.getIDE().focus({preventScroll:f})},blur:function(){this.getIDE().blur()},__doFocus:function(f){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(f){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const f=this.getIDS();f.outlineWidth="thin";f.outlineColor="#8bf";f.outlineStyle="solid";f.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(f,r,v){if(l.EVENT_TYPES[v]){const m=this;return y=>{y??=window.event;if(m._ignoreFocus)y.cancelBubble=!0,y.stopPropagation?.(),y.preventDefault();
else{var C=l.EVENT;C.source=m;C.type=y.type;C.value=y;f[r](C)||(y.cancelBubble=!0,y.stopPropagation?.());C.source=void 0}}}return this.callSuper(f,r,v)}}),h=q.InputObservable=new w("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:k()},createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,r,v,h)??this.callSuper(f,r,v)}}),d=q.DragDropObservable=new w("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:k()},
createDomHandler:function(f,r,v){return this.createStandardDomHandler(f,r,v,d,!0)??this.callSuper(f,r,v)}});q.DomObservable=new w("DomObservable",{attachDomObserver:function(f,r,v,m,y){if(f&&r&&v){m=!!m;const C=this.createDomHandler(f,r,v);if(C){const F=this.__dobsbt??(this.__dobsbt={}),H=F[v];H?H.push(f,r,C,m):F[v]=[f,r,C,m];q.addEventListener(this.getDomElementForDomObservable(v),v,C,m,y);return!0}}return!1},getDomElementForDomObservable:function(f){return this.getIDE()},createDomHandler:(f,r,v)=>
null,createStandardDomHandler:function(f,r,v,m,y){if(m.EVENT_TYPES[v]){const C=this,F=m.EVENT;return H=>{H??=window.event;F.source=C;F.type=H.type;F.value=H;f[r](F)||(H.cancelBubble=!0,H.stopPropagation?.(),y&&H.preventDefault());F.source=void 0}}},detachDomObserver:function(f,r,v,m){if(f&&r&&v){m=!!m;var y=this.__dobsbt;if(y&&(y=y[v])){const C=this.getDomElementForDomObservable(v);let F=!1;for(let H=y.length-4;0<=H;H-=4){const [A,t,p,x]=y.slice(H,H+4);f===A&&r===t&&m===x&&(C&&q.removeEventListener(C,
v,p,m),y.splice(H,4),F=!0)}return F}}return!1},detachAllDomObservers:function(){var f=this.__dobsbt;if(f)for(const [r,v]of Object.entries(f)){for(f=v.length-2;0<=f;f-=4){const [m,y]=v.slice(f);q.removeEventListener(this.getDomElementForDomObservable(r),r,m,y)}v.length=0}}});q.DomObserver=new w("DomObserver",{extend:{getSourceViewFromEvent:b},attachToDom:function(f,r,v,m,y){if(f&&r&&v){m=!!m;let C;const F=(C=this.__dobt??(this.__dobt={}))[v]??(C[v]=[]);f.attachDomObserver(this,r,v,m,y)&&F.push(m,r,
f)}},detachFromDom:function(f,r,v,m){if(f&&r&&v){m=!!m;var y=this.__dobt;if(y&&(y=y[v])){let C=!1;for(let F=y.length-3;0<=F;F-=3){const [H,A,t]=y.slice(F);f===t&&r===A&&m===H&&f.detachDomObserver(this,r,v,m)&&(y.splice(F,3),C=!0)}return C}}return!1},detachFromAllDomSources:function(){var f=this.__dobt;if(f)for(const [r,v]of Object.entries(f)){for(f=v.length-3;0<=f;f-=3){const [m,y,C]=v.slice(f);C.detachDomObserver(this,y,r,m)}v.length=0}}})})(myt);
(q=>{let w,u=new Set;const n=q.global,k=n.focus,b="Firefox"===BrowserDetect.browser,a=b?"OSLeft":"MetaLeft",e=b?"OSRight":"MetaRight",c=q.KeyObservable.getCodeFromEvent,g=()=>u.has("ShiftLeft")||u.has("ShiftRight"),l=()=>u.has("ControlLeft")||u.has("ControlRight"),h=()=>u.has("AltLeft")||u.has("AltRight"),d=()=>u.has(a)||u.has(e),f=(v,m)=>{switch(v){case "Backspace":return v=m.nodeName,!("TEXTAREA"===v||"INPUT"===v&&("text"===m.type||"number"===m.type||"password"===m.type)||"DIV"===v&&"true"===m.contentEditable&&
m.firstChild);case "Tab":return!0}return!1},r=(v,m)=>{["keydown","keypress","keyup"].forEach(y=>{w[m](v,"__hndl_"+y,y)})};new JS.Singleton("GlobalKeys",{include:[q.DomElementProxy,q.DomObservable,q.DomObserver,q.KeyObservable,q.Observable,q.Observer],initialize:function(){n.register("keys",w=this);w.CODE_ENTER="Enter";w.CODE_ESC="Escape";w.CODE_SPACE="Space";w.CODE_ARROW_LEFT="ArrowLeft";w.CODE_ARROW_UP="ArrowUp";w.CODE_ARROW_RIGHT="ArrowRight";w.CODE_ARROW_DOWN="ArrowDown";w.CODE_DELETE="Delete";
w.CODE_BACKSPACE="Backspace";"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(v=>{w["CODE_"+v]="Key"+v});"1234567890".split("").forEach(v=>{w["CODE_"+v]="Digit"+v});w.ARROW_KEYS=[w.CODE_ARROW_LEFT,w.CODE_ARROW_UP,w.CODE_ARROW_RIGHT,w.CODE_ARROW_DOWN];w.LIST_KEYS=[w.CODE_ENTER,w.CODE_SPACE,w.CODE_ESC,...w.ARROW_KEYS];w.setDomElement(document);w.attachTo(k,"__hndl_focused","focused");r(w,"attachToDom");global.onblur=()=>{u.clear()}},isShiftKeyDown:g,isControlKeyDown:l,isAltKeyDown:h,isMetaKeyDown:d,isShiftCode:v=>
"ShiftLeft"===v||"ShiftRight"===v,isControlCode:v=>"ControlLeft"===v||"ControlRight"===v,isAltCode:v=>"AltLeft"===v||"AltRight"===v,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?d():l(),ignoreFocusTrap:()=>h(),__hndl_focused:v=>{(v=v.value)?(r(w,"detachFromDom"),r(v,"attachToDom")):((v=k.prevFocusedView)&&r(v,"detachFromDom"),r(w,"attachToDom"))},__hndl_keydown:v=>{const m=c(v);v=v.value;f(m,v.target)&&v.preventDefault();d()&&"ShiftLeft"!==m&&"ShiftRight"!==m&&"ControlLeft"!==m&&"ControlRight"!==
m&&"AltLeft"!==m&&"AltRight"!==m?(w.fireEvent("keydown",m),w.fireEvent("keyup",m)):(u.add(m),"Tab"===m&&(v=h(),g()?k.prev(v):k.next(v)),w.fireEvent("keydown",m))},__hndl_keypress:v=>{w.fireEvent("keypress",c(v))},__hndl_keyup:v=>{const m=c(v);v=v.value;f(m,v.target)&&v.preventDefault();u.delete(m);w.fireEvent("keyup",m)}})})(myt);
new JS.Singleton("GlobalTouch",{include:[myt.DomElementProxy,myt.DomObservable,myt.TouchObservable],initialize:function(){this.setDomElement(document);myt.global.register("touch",this)}});
(q=>{const w=JS.Module,u=Math.max,n=(l,h,d,f,r=0)=>{const v=l.length;for(let m=d;r<v;r++)c(l[r],h,m),f&&(m+=d)},k=(l,h,d,f=0)=>{const r=l.length;for(let v=h;f<r;)l[f++].crossPos+=v,d&&(v+=h)},b=(l,h)=>h?l.getFlexBasisWidth():l.getFlexBasisHeight(),a=(l,h,d,f)=>{l[h?"setWidthViaFlex":"setHeightViaFlex"]((f?b(l,h):0)+d)},e=(l,h,d)=>{l[h?"setXViaFlex":"setYViaFlex"](d,!1)},c=(l,h,d)=>{l[h?"setXViaFlex":"setYViaFlex"](d,!0)},g=(l,h,d)=>{l[h]!==d&&(l[h]=d,l.inited&&l.fireEvent(h,d),l.updateFlexboxLayout())};
q.FlexboxSupport=new w("FlexboxSupport",{initNode:function(l,h){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(l,h);this.updateFlexboxLayout()},setWidth:function(l){const h=this.width;this.callSuper(l);h!==this.width&&this.updateFlexboxLayout()},setHeight:function(l){const h=this.height;this.callSuper(l);h!==this.height&&this.updateFlexboxLayout()},
setDirection:function(l){g(this,"direction",l)},setWrap:function(l){g(this,"wrap",l)},setJustifyContent:function(l){g(this,"justifyContent",l)},setAlignItems:function(l){g(this,"alignItems",l)},setAlignContent:function(l){g(this,"alignContent",l)},setRowGap:function(l){g(this,"rowGap",u(0,l))},setColumnGap:function(l){g(this,"columnGap",u(0,l))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(l){this.set("totalBasisWidth",
l,!0)},setTotalBasisHeight:function(l){this.set("totalBasisHeight",l,!0)},ignoreSubviewForFlex:function(l){return l&&"function"===typeof l.ignoreFlex?l.ignoreFlex():!0},setFlexboxPaused:function(l,h){this.__flexboxPaused!==l&&((this.__flexboxPaused=l)||h||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(l){this.callSuper(l);l&&!this.ignoreSubviewForFlex(l)&&this.updateFlexboxLayout()},subviewRemoved:function(l){this.callSuper(l);!l||this.ignoreSubviewForFlex(l)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(l){this.callSuper(l);l&&this.ignoreSubviewForFlex(l)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(l){return l?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(l){return l?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(l){this._updateAgain=l},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const l=this;if(l.isOKToUpdateLayout()){var h=l.getSubviewsInLexicalOrder().filter(m=>!0!==l.ignoreSubviewForFlex(m)&&!0===m.visible),d=h.length;if(0<d){l.__isUpdatingFlexboxLayout=!0;var f=l.direction;const m=f.startsWith("row"),y=!m;var r=l.getWidthForFlexboxLayout(),v=l.getHeightForFlexboxLayout();const C=m?l.columnGap:l.rowGap,F=m?r:v,H=m?l.rowGap:l.columnGap;
v=m?v:r;const A=l.isWrapNotAllowed(),t=l.justifyContent,p=l.alignItems;r=A?"stretch":l.alignContent;f.endsWith("Reverse")&&h.reverse();let x=0,z=0,D=0,I=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:D,crossSize:0};f=[K];for(let J=0;J<d;){const N=h[J++],Q=b(N,m),ca=N.getShrink(),Z=N.getGrow();!A&&0<K.items.length&&x+(0===I?0:C)+Q>F&&(K.extraSize=F-x,D+=K.crossSize+H,z=u(z,x),I=x=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:D,crossSize:0},f.push(K));
0!==I&&(x+=C);0<ca&&0<Q&&(K.shrinkCount+=ca,K.shrinkBasis+=Q*ca);0<Z&&(K.growCount+=Z);K.crossSize=u(K.crossSize,b(N,y));e(N,m,x);a(N,m,Q);x+=Q;K.items.push(N);I++}K.extraSize=F-x;D+=K.crossSize;z=u(z,x);if(l.isCompactOnMainAxis(m)){let J=f.reduce((N,Q)=>null==N?Q.extraSize:Math.min(N,Q.extraSize),null);0!==J&&f.forEach(N=>{N.extraSize-=J})}l[m?"setTotalBasisWidth":"setTotalBasisHeight"](z);l[m?"setTotalBasisHeight":"setTotalBasisWidth"](D);h=f.length;1<h&&"wrapReverse"===l.wrap&&(f.forEach(J=>{J.crossPos=
D-(J.crossPos+J.crossSize)}),f.reverse());if(!l.isCompactOnCrossAxis(m))switch(d=v-D,r){default:case "start":break;case "end":k(f,d,!1);break;case "center":k(f,d/2,!1);break;case "spaceBetween":1<h&&k(f,d/(h-1),!0,1);break;case "spaceAround":d<=H?k(f,d/2,!1):(k(f,H/2,!1),d-=H,k(f,d/(2*h),!0),k(f,d/(2*h),!0,1));break;case "spaceEvenly":d<=2*H?k(f,d/2,!1):(k(f,H,!1),k(f,(d-2*H)/(h+1),!0));break;case "stretch":const J=d/h;let N=0;f.forEach(Q=>{Q.crossSize+=J;Q.crossPos+=N;N+=J})}f.forEach(J=>{const N=
J.items;let Q=J.extraSize;if(0<Q)if(0<J.growCount){const P=Q/J.growCount;let R=0;N.forEach(da=>{0<R&&c(da,m,R);const U=da.getGrow()*P;0<U&&(a(da,m,U,!0),R+=U)})}else{const P=N.length;switch(t){default:case "start":break;case "end":n(N,m,Q,!1);break;case "center":n(N,m,Q/2,!1);break;case "spaceBetween":1<P&&n(N,m,Q/(P-1),!0,1);break;case "spaceAround":Q<=C?n(N,m,Q/2,!1):(n(N,m,C/2,!1),Q-=C,n(N,m,Q/(2*P),!0),n(N,m,Q/(2*P),!0,1));break;case "spaceEvenly":Q<=2*C?n(N,m,Q/2,!1):(n(N,m,C,!1),Q-=2*C,n(N,
m,Q/(P+1),!0))}}else if(0>Q&&0<J.shrinkCount){const P=J.shrinkBasis;let R=0;N.forEach(da=>{0>R&&c(da,m,R);const U=da.getShrink()*b(da,m)/P*u(Q,-P);0>U&&(a(da,m,U,!0),R+=U)})}let ca=!1;const Z=J.crossSize,V=J.crossPos;N.forEach(P=>{switch(P.getAlignSelf()||p){case "start":e(P,y,V);a(P,y,b(P,y),!1);break;case "end":e(P,y,V+Z-b(P,y));a(P,y,b(P,y),!1);break;case "center":e(P,y,V+(Z-b(P,y))/2);a(P,y,b(P,y),!1);break;case "baseline":ca=!0;e(P,y,V+(Z-b(P,y))/2+P.getFlexBaselineOffset(m));a(P,y,b(P,y),!1);
break;default:e(P,y,V),a(P,y,Z,!1)}});ca&&l.updateFlexboxLayoutBaselineAdjustment(N,m,V)});l.__isUpdatingFlexboxLayout=!1;l.isUpdateAgain()&&!l.__UPDATE_AGAIN_LOOP_PROTECTION&&(l.setUpdateAgain(!1),l.__UPDATE_AGAIN_LOOP_PROTECTION=!0,l.updateFlexboxLayout(),l.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else l.setTotalBasisWidth(0),l.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(l,h,d)=>{}});q.FlexboxChildSupport=new w("FlexboxChildSupport",{setVisible:function(l){this.visible!==l&&(this.callSuper(l),
this.updateFlexboxLayoutFromChild())},setXViaFlex(l,h){h&&(l+=this.x);this.x!==l&&(this.__isFlexUpdate=!0,this.setX(l),this.__isFlexUpdate=!1)},setYViaFlex(l,h){h&&(l+=this.y);this.y!==l&&(this.__isFlexUpdate=!0,this.setY(l),this.__isFlexUpdate=!1)},setWidth:function(l){const h=this.width!==l;h&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(l);h&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(l){this.width!==l&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=
!0,this.setWidth(l),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(l){const h=this.height!==l;h&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(l);h&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(l){this.height!==l&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(l),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:l=>
0,setIgnoreFlex:function(l){this.__ignoreFlex!==l&&(this.__ignoreFlex=l,this.inited&&(this.fireEvent("ignoreFlex",l),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(l){l=u(0,l);this.grow!==l&&(this.grow=l,this.inited&&(this.fireEvent("grow",l),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(l){l=u(0,l);this.shrink!==l&&(this.shrink=l,this.inited&&(this.fireEvent("shrink",l),
this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(l){this.alignSelf!==l&&(this.alignSelf=l,this.inited&&(this.fireEvent("alignSelf",l),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const l=this.alignSelf;return"auto"===l||""===l?null:l},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&
!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(q=>{const w=new Map,u=new Map,n=(e,c)=>c+e.charAt(0).toUpperCase()+e.slice(1),k=e=>u.get(e)??(u.set(e,n(e,"set")),u.get(e)),b=e=>w.get(e)??(w.set(e,n(e,"get")),w.get(e)),a=(e,c)=>{let g;for(const l in c){const h=c[l],d=k(l);if(d in e)e[d](h);else e[l]!==h&&(e[l]=h,(g??=!1!==e.inited&&e.fireEvent)&&e.fireEvent(l,h))}};q.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:k,generateGetterName:b,generateName:n,createSetterFunction:(e,c)=>{const g=k(c);e[g]&&console.log("Overwriting setter",
g);e[g]=function(l){this[c]!==l&&(this[c]=l,this.inited&&this.fireEvent(c,l))}},createGetterFunction:(e,c)=>{const g=b(c);e[g]&&console.log("Overwriting getter",g);e[g]=function(){return this[c]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(e,c){e?.forEach(g=>{this[g]=c[g];delete c[g]})},callSetters:function(e){var c=this.earlyAttrs,g=this.lateAttrs;if(c||g){e={...e};if(c){var l=c.length;for(var h=0;h<l;){const f=c[h++];f in e&&(this.set(f,e[f]),delete e[f])}}let d;if(g)for(d=[],c=g.length,l=0;l<c;)h=g[l++],h in e&&(d.push(h,e[h]),delete e[h]);a(this,e);if(d)for(g=d.length,e=0;e<g;)this.set(d[e++],d[e++])}else a(this,e)},get:function(e){const c=b(e);return c in self?this[c]():
this[e]},set:function(e,c,g){if(!g&&(g=k(e),g in this))return this[g](c);this[e]!==c&&(this[e]=c,!1!==this.inited&&this?.fireEvent(e,c))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var q=this.__meta__;if(q){var w=Object.keys(q);for(let u=w.length;0<u;)delete q[w[--u]]}q=Object.keys(this);for(w=q.length;0<w;)delete this[q[--w]];this.destroyed=!0}}});
(q=>{const w=JS.Class,u=JS.Module;let n;const k=(h,d)=>d?(n=h).__op??(n.__op=[]):h.__op;let b;const a=(h,d)=>d?(b=h).__actives??(b.__actives=[]):h.__actives,e=new w("AbstractPool",{include:[q.Destructible],initialize:()=>{},destroy:function(){const h=k(this);h&&(h.length=0);this.callSuper()},getInstance:function(){const h=k(this,!0);return h.length?h.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(h){k(this,!0).push(this.cleanInstance(h))},cleanInstance:h=>
{"function"===typeof h.clean&&h.clean();return h},destroyPooledInstances:function(){var h=k(this);if(h){let d=h.length;for(;d;){const f=h[--d];"function"===typeof f.destroy&&f.destroy()}}}}),c=q.SimplePool=new w("SimplePool",e,{initialize:function(h,d){this.callSuper();this.instanceClass=h??Object;this.instanceParent=d},createInstance:function(h){var d=this.instanceParent,f=this.instanceClass;return d?new f(d,h):new f}}),g=new u("TrackActives",{destroy:function(){const h=a(this);h&&(h.length=0);this.callSuper()},
getInstance:function(){const h=this.callSuper();a(this,!0).push(h);return h},putInstance:function(h){var d=a(this);if(d){const f=d.indexOf(h);if(-1<f){d.splice(f,1);this.callSuper(h);return}d="inactive"}else d="missing";console.warn("Tried to put a "+d+" instance",h,this)},getActives:function(h){const d=a(this);if(d){if(h){const f=[],r=d.length;for(let v=0;r>v;){const m=d[v++];h.call(this,m)&&f.push(m)}return f}return d.slice()}return[]},putActives:function(){const h=a(this);if(h){let d=h.length;
for(;d;)this.putInstance(h[--d])}}}),l=q.TrackActivesPool=new w("TrackActivesPool",c,{include:[g]});q.TrackActivesMultiPool=new w("TrackActivesMultiPool",e,{initialize:function(h,d){this.callSuper();this.instanceClassesByKey=h;const f=this._poolsByClassName={},r=this.__pbk={};for(const v in h){const m=h[v];r[v]=f[m.__displayName]=new l(m,d)}},destroy:function(){const h=this.__pbk;for(const d in h)h[d].destroy();this.callSuper()},getInstance:function(){const h=arguments[0],d=this.__pbk[h];if(d)return d.getInstance(arguments);
console.warn("No pool for key",h)},putInstance:function(h){const d=this._poolsByClassName[h.klass.__displayName];d?d.putInstance(h):console.warn("No pool for obj",h)},destroyPooledInstances:function(){const h=this.__pbk;for(const d in h)h[d].destroyPooledInstances()},getActives:function(h){let d=[];const f=this.__pbk;for(const r in f)d.push(...f[r].getActives(h));return d},putActives:function(){const h=this.__pbk;for(const d in h)h[d].putActives()}});q.Reusable=new u("Reusable",{clean:()=>{}})})(myt);
(q=>{const w=(a,e)=>{if(e)for(;a;){if(e(a))return a;a=a.parent}},u=(a,e)=>{const c=e.name;void 0===a[c]?a[c]=e:console.warn("Name in use",c)},n=(a,e)=>{const c=e.name;a[c]===e?delete a[c]:console.warn("Name not in use",c)};let k;const b=a=>(k=a).__animPool??(k.__animPool=new q.TrackActivesPool(q.Animator,a));q.Node=new JS.Class("Node",{include:[q.AccessorSupport,q.Destructible,q.Observable,q.Observer],extend:{getMatchingAncestorOrSelf:w,getMatchingAncestor:(a,e)=>w(a?a.parent:null,e),DEFAULT_PLACEMENT:"*"},
initialize:function(a,e,c){if(c){const g=c.length;for(let l=0,h;g>l;)(h=c[l++])?this.extend(h):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.initNode(a,e??{})},initNode:function(a,e){this.callSetters(e);this.setParent(a);this.inited=!0},destroy:function(){const a=this.subnodes;this.isBeingDestroyed=!0;if(a)for(let e=a.length;0<e;)a[--e].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();
this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(a){if(a&&!this.ignorePlacement){var e=this.placement??a.defaultPlacement;e&&(a=a.determinePlacement(e,this))}if(this.parent!==a&&!a?.destroyed){if(e=this.parent){const c=e.getSubnodes().indexOf(this);
-1<c&&(this.name&&n(e,this),e.subnodes.splice(c,1),e.subnodeRemoved(this))}if(this.parent=a)a.getSubnodes().push(this),this.name&&u(a,this),a.subnodeAdded(this);this.inited&&this.fireEvent("parent",a)}},setName:function(a){if(this.name!==a){const e=this.parent;e&&this.name&&n(e,this);this.name=a;e&&a&&u(e,this)}},determinePlacement:function(a,e){let c=a.indexOf("."),g;0<=c&&(g=a.slice(c+1),a=a.slice(0,c));"*"===a&&(a=this.defaultPlacement)&&(c=a.indexOf("."),0<=c&&(g=a.slice(c+1)+(g?"."+g:""),a=a.slice(0,
c)));return(a=this[a])?g?a.determinePlacement(g,e):a:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(a){if(a){if(a===this)return!0;if(this.parent)return this.getIDE&&a.getIDE?a.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(a)}return!1},isAncestorOf:function(a){return a?a.isDescendantOf(this):!1},getLeastCommonAncestor:function(a){for(;a;){if(this.isDescendantOf(a))return a;a=a.parent}},searchAncestorsForClass:function(a){if(a)return this.searchAncestors(e=>
e instanceof a)},searchAncestorsForModule:function(a){if(a)return this.searchAncestors(e=>e.isA(a))},searchAncestors:function(a){return w(this?this.parent:null,a)},searchAncestorsOrSelf:function(a){return w(this,a)},getAncestors:function(){const a=[];let e=this;for(;e;)a.push(e),e=e.parent;return a},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:a=>{},subnodeRemoved:a=>{},animate:function(a){if(a){const e=b(this),c=e.getInstance({ignorePlacement:!0}),g=a.callback;delete a.callback;
c.callSetters(a);c.next(l=>{e.putInstance(c)});g&&c.next(g);c.setRunning(!0);return c}},getActiveAnimators:function(a){if("string"===typeof a){const e=a;a=c=>c.attribute===e}return b(this).getActives(a)},stopActiveAnimators:function(a,e=!1){a=this.getActiveAnimators(a);let c=a.length;if(0<c){const g=b(this);for(;c;){const l=a[--c];l.reset(e);e||g.putInstance(l)}}},doOnceOnIdle:function(a){this.attachTo(q.global.idle,a,"idle",!0)}})})(myt);
(q=>{let w=0,u=!1;const n=JS.Class,k=[],b=h=>{if(u!==h&&(u=h,!h)){for(h=k.length;h;){const d=k[--h];d.__deferredLayout=!1;d.update()}k.length=0}},a=(h,d,f,r)=>{const v=h.getSubviewIndex(d),m=h.subviews;-1<v&&(h=h.getSubviewIndex(f),m.splice(v,1),-1<h?(v<h&&--h,m.splice(h+(r?1:0),0,d)):r?m.push(d):m.unshift(d))},e=(h,d,f)=>{h[d]!==f&&(h[d]=f,h.inited&&(h.fireEvent(d,f),h.update()))},c=q.Layout=new n("Layout",q.Node,{extend:{incrementGlobalLock:()=>{1===++w&&b(!0)},decrementGlobalLock:()=>{0<w&&0===
--w&&b(!1)}},initNode:function(h,d){this.subviews=[];this.locked=!0;this.lockedCounter=1;const f=!0===d.locked;delete d.locked;this.callSuper(h,d);f||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(h){var d=this.parent;if(d!==h){const f=!this.locked;f&&(this.locked=!0);let r,v;if(d){r=this.subviews;for(v=r.length;v;)this.removeSubview(r[--v]);this.detachFrom(d,"__hndlPSA","subviewAdded");this.detachFrom(d,"__hndlPSR","subviewRemoved")}this.callSuper(h);
if(h=this.parent){r=h.getSubviews();v=0;for(d=r.length;d>v;)this.addSubview(r[v++]);this.attachTo(h,"__hndlPSA","subviewAdded");this.attachTo(h,"__hndlPSR","subviewRemoved")}f&&(this.locked=!1,this.inited&&h&&this.update())}},canUpdate:function(){return u?(this.__deferredLayout||(k.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(h){return this.subviews.includes(h)},getSubviewIndex:function(h){return this.subviews.indexOf(h)},addSubview:function(h){this.ignore(h)||
(this.subviews.push(h),this.startMonitoringSubview(h),this.locked||this.update())},startMonitoringSubview:h=>{},startMonitoringAllSubviews:function(){const h=this.subviews;let d=h.length;for(;d;)this.startMonitoringSubview(h[--d])},removeSubview:function(h){if(this.ignore(h))return-1;const d=this.getSubviewIndex(h);-1<d&&(this.stopMonitoringSubview(h),this.subviews.splice(d,1),this.locked||this.update());return d},stopMonitoringSubview:h=>{},stopMonitoringAllSubviews:function(){const h=this.subviews;
let d=h.length;for(;d;)this.stopMonitoringSubview(h[--d])},ignore:h=>h.ignoreLayout,__hndlPSA:function(h){h=h.value;h.parent===this.parent&&this.addSubview(h)},__hndlPSR:function(h){h=h.value;h.parent===this.parent&&this.removeSubview(h)},sortSubviews:function(h){this.subviews.sort(h)},moveSubviewBefore:function(h,d){a(this,h,d,!1)},moveSubviewAfter:function(h,d){a(this,h,d,!0)}});var g=q.ConstantLayout=new n("ConstantLayout",c,{setTargetAttrName:function(h){this.setterName=q.AccessorSupport.generateSetterName(h);
e(this,"targetAttrName",h)},setTargetValue:function(h){e(this,"targetValue",h)},update:function(){if(this.canUpdate()){const h=this.setterName,d=this.targetValue,f=this.subviews,r=f.length;if(h)for(let v=0;r>v;)f[v++][h](d)}}});g=q.VariableLayout=new n("VariableLayout",g,{initNode:function(h,d){this.collapseParent=this.reverse=!1;this.callSuper(h,d)},setCollapseParent:function(h){e(this,"collapseParent",h)},setReverse:function(h){e(this,"reverse",h)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const d=this.setterName,f=this.subviews;var h=f.length;let r=this.targetValue,v,m=0;if(this.reverse)for(v=h;v;)h=f[--v],this.skipSubview(h)||(r=this.updateSubview(++m,h,d,r));else for(v=0;h>v;){const y=f[v++];this.skipSubview(y)||(r=this.updateSubview(++m,y,d,r))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(d,r);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(h){this.attachTo(h,
"update","visible")},stopMonitoringSubview:function(h){this.detachFrom(h,"update","visible")},updateSubview:(h,d,f,r)=>{d[f](r);return r},skipSubview:h=>!h.visible,updateParent:(h,d)=>{}});const l=q.SpacedLayout=new n("SpacedLayout",g,{initNode:function(h,d){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(h,d)},setTargetAttrName:function(h){if(this.targetAttrName!==
h){const d="y"===h,f=this.inited;f&&this.stopMonitoringAllSubviews();this.measureAttrName=d?"boundsHeight":"boundsWidth";this.measureAttrBaseName=d?"height":"width";this.parentSetterName=d?"setHeight":"setWidth";f&&this.startMonitoringAllSubviews();this.callSuper(h)}},setNoAddSubviewOptimization:function(h){this.noAddSubviewOptimization=h},setAxis:function(h){this.setTargetAttrName(this.axis=h)},setInset:function(h){this.setTargetValue(this.inset=h)},setSpacing:function(h){e(this,"spacing",h)},setOutset:function(h){e(this,
"outset",h)},addSubview:function(h){const d=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(h);this.locked=d},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.callSuper(h)},stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.callSuper(h)},updateSubview:function(h,d,f,r){h=d[this.measureAttrName];d[f](r+(h-d[this.measureAttrBaseName])/2);return r+h+this.spacing},updateParent:function(h,d){this.parent[this.parentSetterName](d+
this.outset-this.spacing)}});q.ResizeLayout=new n("ResizeLayout",l,{setCollapseParent:h=>{},setTargetAttrName:function(h){if(this.targetAttrName!==h){if(this.inited){const d="x"===h;this.stopMonitoringParent(d?"height":"width");this.startMonitoringParent(d?"width":"height")}this.callSuper(h)}},setParent:function(h){if(this.parent!==h){const d="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(d);this.callSuper(h);this.parent&&this.startMonitoringParent(d)}},startMonitoringParent:function(h){this.attachTo(this.parent,
"update",h)},stopMonitoringParent:function(h){this.detachFrom(this.parent,"update",h)},doBeforeUpdate:function(){const h=this.measureAttrName,d=this.subviews;let f=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,r=d.length,v=0,m=0;for(;r;){const y=d[--r];this.skipSubview(y)||(++v,0<y.layoutHint?m+=y.layoutHint:f-=y[h])}0!==v&&(this.remainder=f-=(v-1)*this.spacing,this.resizeSum=m,this.scalingFactor=f/m,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===h?
"setWidth":"setHeight")},updateSubview:function(h,d,f,r){var v=d.layoutHint;0<v&&(this.resizeSumUsed+=v,v=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(v*this.scalingFactor),this.remainderUsed+=v,d[this.measureSetter](v));return this.callSuper(h,d,f,r)},startMonitoringSubview:function(h){0<h.layoutHint||this.attachTo(h,"update",this.measureAttrName);this.attachTo(h,"update","visible")},stopMonitoringSubview:function(h){0<h.layoutHint||this.detachFrom(h,"update",
this.measureAttrName);this.detachFrom(h,"update","visible")},updateParent:(h,d)=>{}});q.AlignedLayout=new n("AlignedLayout",g,{initNode:function(h,d){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(h,d)},setTargetAttrName:function(h){if(this.targetAttrName!==h){const d="y"===h,f=this.inited;f&&this.stopMonitoringAllSubviews();this.measureAttrName=
d?"boundsHeight":"boundsWidth";this.measureAttrBaseName=d?"height":"width";this.parentSetterName=d?"setHeight":"setWidth";f&&this.startMonitoringAllSubviews();this.callSuper(h)}},setAlign:function(h){if(this.align!==h){this.align=h;const d=this.locked;this.locked=!0;this.setTargetAttrName("middle"===h||"bottom"===h||"top"===h?"y":"x");this.locked=d;this.inited&&(this.fireEvent("align",h),this.update())}},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.callSuper(h)},
stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.callSuper(h)},doBeforeUpdate:function(){const h=this.measureAttrName,d=this.subviews;let f=0,r=d.length;for(;r;){const v=d[--r];this.skipSubview(v)||(f=f>v[h]?f:v[h])}this.setTargetValue(f)},updateSubview:function(h,d,f,r){switch(this.align){case "center":case "middle":d[f]((r-d[this.measureAttrName])/2);break;case "right":case "bottom":d[f](r-d[this.measureAttrName]);break;default:d[f](0)}return r},updateParent:function(h,
d){this.parent[this.parentSetterName](d)}});q.WrappingLayout=new n("WrappingLayout",g,{initNode:function(h,d){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(h,d)},
setTargetAttrName:function(h){if(this.targetAttrName!==h){const d="y"===h,f=this.inited;f&&this.stopMonitoringAllSubviews();this.measureAttrName=d?"boundsHeight":"boundsWidth";const r=this.measureAttrBaseName=d?"height":"width";this.otherMeasureAttrName=d?"boundsWidth":"boundsHeight";const v=this.otherMeasureAttrBaseName=d?"width":"height";this.parentSetterName=d?"setWidth":"setHeight";this.otherSetterName=d?"setX":"setY";f&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(v),this.startMonitoringParent(r));
this.callSuper(h)}},setParent:function(h){if(this.parent!==h){const d="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(d?"height":"width");this.callSuper(h);this.parent&&this.startMonitoringParent(d?"height":"width")}},setAxis:function(h){this.setTargetAttrName(this.axis=h)},setInset:function(h){this.setTargetValue(this.inset=h)},setSpacing:function(h){e(this,"spacing",h)},setOutset:function(h){e(this,"outset",h)},setLineSpacing:function(h){e(this,"lineSpacing",h)},setLineInset:function(h){e(this,
"lineInset",h)},setLineOutset:function(h){e(this,"lineOutset",h)},startMonitoringParent:function(h){this.attachTo(this.parent,"update",h)},stopMonitoringParent:function(h){this.detachFrom(this.parent,"update",h)},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.attachTo(h,"update",this.otherMeasureAttrName);this.callSuper(h)},stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.detachFrom(h,"update",this.otherMeasureAttrName);
this.callSuper(h)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(h,d,f,r){h=d[this.measureAttrName];const v=d[this.otherMeasureAttrName];r+h>this.parentSizeLessOutset||"break"===d.layoutHint?(r=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=v,++this.lineCount):v>this.lineSize&&(this.lineSize=v);d[this.otherSetterName](this.linePos+
(v-d[this.otherMeasureAttrBaseName])/2);d[f](r+(h-d[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,r+h+this.outset);return r+h+this.spacing},updateParent:function(h,d){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});q.createFixedThresholdCounter(c,1,"locked")})(myt);
(q=>{const w=Math.round,u=q.DomElementProxy,n=q.Geometry.rectContainsPoint,k=(d,f)=>{const r=q.global.focus.focusedView,v=d.getIDE();if(r===d||r&&r.isDescendantOf(d))r._ignoreFocus=!0;d=v.scrollTop;const m=v.scrollLeft;f.call();r&&(r._ignoreFocus=!1,r.focus(!0));v.scrollTop=d;v.scrollLeft=m},b=(d,f,r,v)=>{if(f&&"object"===typeof f){if(v&&(v=d.getLeastCommonAncestor(f))){var m=v.getIDE();v=u.getZIndexRelativeToAncestor(d.getODE(),m);m=u.getZIndexRelativeToAncestor(f.getODE(),m);r&&(v*=-1,m*=-1);if(v<
m)return!0;if(m<v)return!1}d=d.getODE().compareDocumentPosition(f.getODE());return r?2===d||10===d:4===d||20===d}return!1},a=d=>{d=d.getAncestors();let f=d.length,r=1,v=1;for(;f;){const m=d[--f];r*=m.scaleX||1;v*=m.scaleY||1;m.__effectiveScaleX=r;m.__effectiveScaleY=v}return{scaleX:r,scaleY:v}},e=(d,f,r)=>{const v=d.getODE();if(n(f,r,0,0,v.offsetWidth*d.__effectiveScaleX,v.offsetHeight*d.__effectiveScaleY)){if(d=d.parent){const m=d.getIDE();return e(d,f+(v.offsetLeft-m.scrollLeft)*d.__effectiveScaleX,
r+(v.offsetTop-m.scrollTop)*d.__effectiveScaleY)}return!0}return!1},c=d=>{switch(d.align){case "center":d.releaseConstraint("__doAlignCenter");break;case "right":d.releaseConstraint("__doAlignRight")}},g=d=>{const f=d.parent;if(f)switch(d.align){case "center":d.constrain("__doAlignCenter",[d,"width",d,"alignOffset",f,"width"]);break;case "right":d.constrain("__doAlignRight",[d,"width",d,"alignOffset",f,"width"]);break;case "left":d.setX(d.alignOffset||0)}},l=d=>{switch(d.valign){case "middle":d.releaseConstraint("__doValignMiddle");
break;case "bottom":d.releaseConstraint("__doValignBottom")}},h=d=>{const f=d.parent;if(f)switch(d.valign){case "middle":d.constrain("__doValignMiddle",[d,"height",d,"valignOffset",f,"height"]);break;case "bottom":d.constrain("__doValignBottom",[d,"height",d,"valignOffset",f,"height"]);break;case "top":d.setY(d.valignOffset||0)}};q.View=new JS.Class("View",q.Node,{include:[u,q.DomObservable,q.DomObserver,q.ScrollObservable,q.FocusObservable,q.KeyObservable,q.MouseObservable],extend:{retainFocusDuringDomUpdate:k},
initNode:function(d,f){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;f.tagName&&(this.tagName=f.tagName,delete f.tagName);this.setDomElement(this.createOurDomElement(d));const r=this.getODS();r.left=r.top="0px";this.callSuper(d,f);this.__updateBounds(this.width,this.height)},createOurDomElement:function(d){d=document.createElement(this.tagName??"div");d.style.position="absolute";let f;d.className=(f=this.klass).__cssClassName??(f.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));
return d},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(d){this.parent!==d&&(this.inited&&(c(this),l(this)),this.callSuper(d),this.align&&g(this),this.valign&&h(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},getSubviewsInLexicalOrder:function(){const d=[],f=this.getIDE().children,r=f.length;for(let v=0;v<r;){const m=f[v++].model;m?.parent===this&&d.push(m)}return d},
getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(d=>d!==this)},setFocusTrap:function(d){this.focusTrap=d},setFocusCage:function(d){this.focusCage=d},setMaskFocus:function(d){this.maskFocus=d},setLayoutHint:function(d){this.layoutHint=d},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(d){if(this.ignoreLayout!==d){var f=this.inited&&this.parent;let r;if(d){if(f)for(f=this.parent.getLayouts(),r=f.length;r;)f[--r].removeSubview(this);
this.ignoreLayout=d}else if(this.ignoreLayout=d,f)for(f=this.parent.getLayouts(),r=f.length;r;)f[--r].addSubview(this)}},setDomClass:function(d){this.domClass!==d&&(this.callSuper(d),this.inited&&this.fireEvent("domClass",d))},setDomId:function(d){this.domId!==d&&(this.callSuper(d),this.inited&&this.fireEvent("domId",d))},setAlignOffset:function(d){this.alignOffset!==d&&(this.alignOffset=d,this.inited&&this.fireEvent("alignOffset",d),this.parent&&"left"===this.align&&this.setX(d))},setAlign:function(d){this.align!==
d&&(this.inited&&c(this),this.align=d,this.inited&&(this.fireEvent("align",d),g(this)))},__doAlignCenter:function(d){this.setX(w((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(d){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(d){this.valignOffset!==d&&(this.valignOffset=d,this.inited&&this.fireEvent("valignOffset",d),this.parent&&"top"===this.valign&&this.setY(d))},setValign:function(d){this.valign!==d&&(this.inited&&l(this),
this.valign=d,this.inited&&(this.fireEvent("valign",d),h(this)))},__doValignMiddle:function(d){this.setY(w((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(d){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(d){this.x!==d&&(this.x=d,this.visible&&(this.getODS().left=d+"px"),this.inited&&this.fireEvent("x",d))},setY:function(d){this.y!==d&&(this.y=d,this.visible&&(this.getODS().top=d+"px"),this.inited&&this.fireEvent("y",d))},setWidth:function(d){0>
d&&(d=0);this.width!==d&&(this.width=d,this.getODS().width=d+"px",this.inited&&(this.__updateBounds(d,this.height),this.fireEvent("width",d)))},setHeight:function(d){0>d&&(d=0);this.height!==d&&(this.height=d,this.getODS().height=d+"px",this.inited&&(this.__updateBounds(this.width,d),this.fireEvent("height",d)))},setDomMinWidth:function(d,f){(f?this.getIDS():this.getODS()).minWidth=null!=d?d+"px":null},getDomMinWidth:function(d){d=(d?this.getIDS():this.getODS()).minWidth;return null!=d?Number.parseInt(d):
null},setDomMinHeight:function(d,f){(f?this.getIDS():this.getODS()).minHeight=null!=d?d+"px":null},getDomMinHeight:function(d){d=(d?this.getIDS():this.getODS()).minHeight;return null!=d?Number.parseInt(d):null},setTextColor:function(d){this.textColor!==d&&(this.textColor=d,this.getODS().color=d||"inherit",this.inited&&this.fireEvent("textColor",d))},setBgColor:function(d){this.bgColor!==d&&(this.getODS().backgroundColor=this.bgColor=d,this.inited&&this.fireEvent("bgColor",d))},isColorAttr:d=>"bgColor"===
d||"textColor"===d,setOpacity:function(d){this.opacity!==d&&(this.getODS().opacity=this.opacity=d,this.inited&&this.fireEvent("opacity",d))},setOverflow:function(d){const f=this.overflow;if(f!==d){this.overflow=d;const r=this.getIDS();if("autox"===d)r.overflowX="auto",r.overflowY="hidden";else if("autoy"===d)r.overflowY="auto",r.overflowX="hidden";else{if("autox"===f||"autoy"===f)r.overflowX=r.overflowY=null;r.overflow=d||"visible"}this.inited&&this.fireEvent("overflow",d)}},setVisible:function(d){if(this.visible!==
d){this.visible=d;const f=this.getODS();f.visibility=d?"inherit":"hidden";f.left=d?this.x+"px":"-100000px";f.top=d?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",d)}},setPointerEvents:function(d){this.pointerEvents!==d&&(this.pointerEvents=d,this.getODS().pointerEvents=d||"auto",this.inited&&this.fireEvent("pointerEvents",d))},setCursor:function(d){this.cursor!==d&&(this.cursor=d,this.getODS().cursor=d||"auto",this.inited&&this.fireEvent("cursor",d))},__updateBounds:function(d,f){this.boundsWidth!==
d&&this.fireEvent("boundsWidth",this.boundsWidth=d);this.boundsHeight!==f&&this.fireEvent("boundsHeight",this.boundsHeight=f)},setOutline:function(d){const [f,r,v]=d??[];this.setOutlineWidth(f);this.setOutlineStyle(r);this.setOutlineColor(v)},setOutlineWidth:function(d){this.getODS().outlineWidth=(this.outlineWidth=d||0)+"px"},setOutlineStyle:function(d){this.getODS().outlineStyle=this.outlineStyle=d||"none"},setOutlineColor:function(d){this.getODS().outlineColor=this.outlineColor=d||"#000"},setBorder:function(d){const [f,
r,v]=d??[];this.setBorderWidth(f);this.setBorderStyle(r);this.setBorderColor(v)},setBorderWidth:function(d){this.getODS().borderWidth=(this.borderWidth=d||0)+"px"},setBorderStyle:function(d){this.getODS().borderStyle=this.borderStyle=d||"none"},setBorderColor:function(d){this.getODS().borderColor=this.borderColor=d||"#000"},setRoundedCorners:function(d){this.getODS().borderRadius=d+"px"},setRoundedTopLeftCorner:function(d){this.getODS().borderTopLeftRadius=d+"px"},setRoundedTopRightCorner:function(d){this.getODS().borderTopRightRadius=
d+"px"},setRoundedBottomLeftCorner:function(d){this.getODS().borderBottomLeftRadius=d+"px"},setRoundedBottomRightCorner:function(d){this.getODS().borderBottomRightRadius=d+"px"},setBoxShadow:function(d){const [f,r,v,m]=d??[];this.getODS().boxShadow=d?(f||0)+"px "+(r||0)+"px "+(v||7)+"px "+(m||"#000"):"none"},setGradient:function(d){const f=this.getODS();if(d){let v=d[0];"linear"===v||"radial"===v?d.shift():v="linear";let m=d[0];if("radial"===v){void 0===m?m="closest-side":d.shift();var r=d[0];if(void 0===
r)r="circle";else{switch(r){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",r),r="circle"}d.shift()}let y=d[0];void 0===y?y="center":(y=y.replaceAll("middle","center"),d.shift());m=r+" "+m+" at "+y}else"number"===typeof m?(m+="deg",d.shift()):m?(m="to "+m,d.shift()):m="0deg";r=y=>{d.push(y&&"inherit"!==y?y:"transparent")};2>d.length&&r(this.textColor);2>d.length&&r(this.bgColor);f.background=v+"-gradient("+m+","+d.join(",")+")"}else f.background="none";this.bgColor=
void 0},setTooltip:function(d){this.tooltip!==d&&(this.tooltip=this.getODE().title=d,this.inited&&this.fireEvent("tooltip",d))},isVisible:function(){return null==this.searchAncestorsOrSelf(d=>!d.visible)},getFocusTrap:function(d){return this.searchAncestorsOrSelf(f=>f.focusCage||f.focusTrap&&!d)},subnodeAdded:function(d){d instanceof q.View?(this.getIDE().appendChild(d.getODE()),this.getSubviews().push(d),this.fireEvent("subviewAdded",d),this.subviewAdded(d)):d instanceof q.Layout&&(this.getLayouts().push(d),
this.fireEvent("layoutAdded",d),this.layoutAdded(d))},subnodeRemoved:function(d){let f;d instanceof q.View?(f=this.getSubviewIndex(d),-1<f&&(this.fireEvent("subviewRemoved",d),d.removeDomElement(),this.subviews.splice(f,1),this.subviewRemoved(d))):d instanceof q.Layout&&(f=this.getLayoutIndex(d),-1<f&&(this.fireEvent("layoutRemoved",d),this.layouts.splice(f,1),this.layoutRemoved(d)))},hasSubview:function(d){return this.getSubviews().includes(d)},getSubviewIndex:function(d){return this.getSubviews().indexOf(d)},
subviewAdded:d=>{},subviewRemoved:d=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(d){return this.getLayouts().includes(d)},getLayoutIndex:function(d){return this.getLayouts().indexOf(d)},layoutAdded:d=>{},layoutRemoved:d=>{},isBehind:function(d,f){return b(this,d,!1,f)},isInFrontOf:function(d,f){return b(this,d,!0,f)},bringToFront:function(){this.parent.bringSubviewToFront(this)},
sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(d){this.parent.sendSubviewBehind(this,d)},sendInFrontOf:function(d){this.parent.sendSubviewInFrontOf(this,d)},doSubviewsReorderedInDom:d=>{},bringSubviewToFront:function(d){const f=this;if(d?.parent===f){const r=f.getIDE();d.getODE()!==r.lastChild&&k(d,()=>{r.appendChild(d.getODE());f.doSubviewsReorderedInDom(d)})}},sendSubviewToBack:function(d){const f=this;if(d?.parent===f){const r=f.getIDE();d.getODE()!==r.firstChild&&
k(d,()=>{r.insertBefore(d.getODE(),r.firstChild);f.doSubviewsReorderedInDom(d)})}},sendSubviewBehind:function(d,f){const r=this;if(d?.parent===r&&f?.parent===r){const v=r.getIDE();k(d,()=>{v.insertBefore(d.getODE(),f.getODE());r.doSubviewsReorderedInDom(d)})}},sendSubviewInFrontOf:function(d,f){const r=this;if(d?.parent===r&&f?.parent===r){const v=r.getIDE();k(d,()=>{v.insertBefore(d.getODE(),f.getODE().nextSibling);r.doSubviewsReorderedInDom(d)})}},sortSubviews:function(d){const f=this,r=f.getSubviews().sort(d);
k(f,()=>{const v=f.getODE(),m=v.parentNode;let y;m&&(y=v.nextSibling,m.removeChild(v));const C=document.createDocumentFragment(),F=r.length;for(let H=0;F>H;)C.appendChild(r[H++].getODE());f.getIDE().appendChild(C);m?.insertBefore(v,y);f.doSubviewsReorderedInDom(null)})},containsPoint:function(d,f,r){const v=this.getODE();if(!v)return!1;const {x:m,y}=u.getRelativePosition(v,r);return n(d,f,m,y,this.width,this.height)},isPointVisible:function(d,f){const {x:r,y:v}=this.getPagePosition(!0);a(this);return e(this,
d-r,f-v)},getEffectiveScale:function(){return a(this)},getEffectiveScaleX:function(){return a(this).scaleX},getEffectiveScaleY:function(){return a(this).scaleY}})})(myt);
(q=>{const w=(n,k,b)=>{const a=u(n,k);n.getODS().transform=a+(0===a.length?"":" ")+k+"("+b+")"},u=(n,k)=>{n=n.getODS();var b=n.transform;if(!b||0===b.length)return"";b=b.split(" ");let a=b.length;for(;a;)if(b[--a].startsWith(k)){b.splice(a,1);break}return n.transform=b.join(" ")};q.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(n){this.transformOrigin!==n&&(this.transformOrigin=n,this.getODS().transformOrigin=n||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",n)))},setRotation:function(n){this.rotation!==n&&(this.rotation=n,w(this,"rotate",(n||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",n)))},setScale:function(n){const k=this.scaleX!==n,b=this.scaleY!==n;if(k){var a=this.scaleX=n;null==a?u(this,"scaleX"):w(this,"scaleX",a||1)}b&&(a=this.scaleY=n,null==a?u(this,"scaleY"):w(this,"scaleY",a||1));this.inited&&((k||b)&&this.__updateBounds(this.width,this.height),
k&&this.fireEvent("scaleX",n),b&&this.fireEvent("scaleY",n))},setScaleX:function(n){if(this.scaleX!==n){var k=this.scaleX=n;null==k?u(this,"scaleX"):w(this,"scaleX",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",n))}},setScaleY:function(n){if(this.scaleY!==n){var k=this.scaleY=n;null==k?u(this,"scaleY"):w(this,"scaleY",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",n))}},setSkewX:function(n){this.skewX!==n&&(this.skewX=
n,w(this,"skewX",n||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",n)))},setSkewY:function(n){this.skewY!==n&&(this.skewY=n,w(this,"skewY",n||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",n)))},__updateBounds:function(n,k){const {rotation:b,scaleX:a,scaleY:e}=this,c=(null==a||1===a)&&(null==e||1===e);if(!c||null!=b&&0!==b&&180!==b)!c||90!==b&&270!==b?{width:n,height:k}=this.getODE().getBoundingClientRect():{width:k,height:n}=
this;this.callSuper(n,k)}})})(myt);
(q=>{const w=JS.Module,u=(a,e)=>{if("auto"===e)a.__hasSetWidth=!1,a.getODS().width="auto",a.sizeViewToDom();else return a.__hasSetWidth=!0},n=(a,e)=>{if("auto"===e)a.__hasSetHeight=!1,a.getODS().height="auto",a.sizeViewToDom();else return a.__hasSetHeight=!0},k=a=>{if(!a.__hasSetWidth){const e=a.getODE().offsetWidth/a.getEffectiveScaleX();a.width!==e&&(a.width=e,a.inited&&a.__updateBounds(e,a.height),a.fireEvent("width",e))}},b=a=>{if(!a.__hasSetHeight){const e=a.getODE().offsetHeight/a.getEffectiveScaleY();
a.height!==e&&(a.height=e,a.inited&&a.__updateBounds(a.width,e),a.fireEvent("height",e))}};q.SizeToDom=new w("SizeToDom",{extend:{sizeWidth:k,sizeHeight:b},initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a){u(this,a)&&this.callSuper(a)},setHeight:function(a){n(this,a)&&this.callSuper(a)},sizeViewToDom:function(){k(this);b(this)}});q.SizeWidthToDom=new w("SizeWidthToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a,e){u(this,
a)&&this.callSuper(a,e)},sizeViewToDom:function(){k(this)}});q.SizeHeightToDom=new w("SizeHeightToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setHeight:function(a,e){n(this,a)&&this.callSuper(a,e)},sizeViewToDom:function(){b(this)}})})(myt);
(q=>{const w=(b,a,e,c)=>{b[e]!==a&&(b[e]=a,b.getIDS()[e]=a||c||"inherit",b.inited&&(b.fireEvent(e,a),b.sizeViewToDom()))};q.TextSupport=new JS.Module("TextSupport",{setWidth:function(b){this.callSuper(b);"auto"!==b&&(b=this.whiteSpace,"normal"!==b&&"pre-line"!==b&&"pre-wrap"!==b&&"break-spaces"!==b||this.sizeViewToDom())},setText:function(b){b||="";b=this.valueFromEvent(b);this.text!==b&&(this.getIDE().innerHTML=this.text=b,this.inited&&(this.fireEvent("text",b),this.sizeViewToDom()))},setTextOverflow:function(b){this.textOverflow!==
b&&(this.textOverflow=b,this.getIDS().textOverflow=b||"inherit",this.inited&&this.fireEvent("textOverflow",b))},setTextAlign:function(b){this.textAlign!==b&&(this.textAlign=b,this.getIDS().textAlign=b||"inherit",this.inited&&this.fireEvent("textAlign",b))},setWhiteSpace:function(b){w(this,b,"whiteSpace")},setWordWrap:function(b){w(this,b,"wordWrap","normal")},setTextIndent:function(b){w(this,b,"textIndent")},setTextTransform:function(b){w(this,b,"textTransform")},setTextDecoration:function(b){w(this,
b,"textDecoration")},setLineHeight:function(b){w(this,b,"lineHeight")},setLetterSpacing:function(b){w(this,b,"letterSpacing")},setWordSpacing:function(b){w(this,b,"wordSpacing")},setFontFamily:function(b){w(this,b,"fontFamily")},setFontStyle:function(b){w(this,b,"fontStyle")},setFontVariant:function(b){w(this,b,"fontVariant")},setFontWeight:function(b){w(this,b,"fontWeight")},setFontSize:function(b){w(this,b,"fontSize")},setUserUnselectable:function(b){this.userUnselectable!==b&&(this.userUnselectable=
b,this[b?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(b?"default":"text"),this.inited&&this.fireEvent("userUnselectable",b))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(b,a,e,c){this.getIDS().textShadow=(b||0)+"px "+(a||0)+"px "+(null!=e?e:2)+"px "+(c||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const u=(b,a,e)=>{const c="padding"+e;a=Math.max(a,0);b[c]!==a&&(b[c]=a,b.getIDS()[c]=a+"px",b.fireEvent(c,a),"Left"===e||"Right"===e?n(b):k(b))},n=b=>{b.__hasSetWidth&&(b.getODS().width=b.width-(b.paddingLeft||0)-(b.paddingRight||0)+"px",b.inited&&b.sizeViewToDom())},k=b=>{b.__hasSetHeight&&(b.getODS().height=b.height-(b.paddingTop||0)-(b.paddingBottom||0)+"px",b.inited&&b.sizeViewToDom())};q.PaddedTextSupport=new JS.Module("PaddedTextSupport",{setWidth:function(b){this.callSuper(b);n(this)},
setHeight:function(b){this.callSuper(b);k(this)},setPadding:function(b){let a,e,c;b||=0;"object"===typeof b?(a=b.top||0,e=b.right||0,c=b.bottom||0,b=b.left||0):a=e=c=b;this.setPaddingTop(a);this.setPaddingRight(e);this.setPaddingBottom(c);this.setPaddingLeft(b)},setPaddingTop:function(b){u(this,b,"Top")},setPaddingRight:function(b){u(this,b,"Right")},setPaddingBottom:function(b){u(this,b,"Bottom")},setPaddingLeft:function(b){u(this,b,"Left")}})})(myt);
(q=>{const w={},u={},n=k=>{const b=k.imageUrl;if(k.calculateNaturalSize&&b){var a=w[b];if(a)k.setNaturalWidth(a.width),k.setNaturalHeight(a.height);else{a=u[b];if(!a){u[b]=a=[];const e=new Image;e.onerror=c=>{if(c=u[b]){let g=c.length;for(;g;)c[--g].setImageLoadingError(!0);c.length=0;delete u[b]}};e.onload=()=>{const c=e.width,g=e.height,l=u[b];if(l){let h=l.length;for(;h;){const d=l[--h];d.imageUrl===b&&(d.setNaturalWidth(c),d.setNaturalHeight(g))}l.length=0;delete u[b]}w[b]={width:c,height:g}};
e.src=b}a.push(k)}}};q.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:k=>w[k]},initNode:function(k,b){b.imageRepeat??(b.imageRepeat="no-repeat");b.imageAttachment??(b.imageAttachment="scroll");this.callSuper(k,b)},setImageUrl:function(k){this.imageUrl!==k&&(this.imageUrl=k,this.getIDS().backgroundImage=k?'url("'+k+'")':"none",this.inited&&(this.fireEvent("imageUrl",k),this.setNaturalWidth(),this.setNaturalHeight(),!k&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
n(this))},setImageLoadingError:function(k){this.set("imageLoadingError",k,!0)},setImageSize:function(k){this.imageSize!==k&&(this.imageSize=k,this.getIDS().backgroundSize=k||"auto",this.inited&&this.fireEvent("imageSize",k))},setImageRepeat:function(k){this.imageRepeat!==k&&(this.getIDS().backgroundRepeat=this.imageRepeat=k,this.inited&&this.fireEvent("imageRepeat",k))},setImagePosition:function(k){this.imagePosition!==k&&(this.getIDS().backgroundPosition=this.imagePosition=k,this.inited&&this.fireEvent("imagePosition",
k))},setImageAttachment:function(k){this.imageAttachment!==k&&(this.getIDS().backgroundAttachment=this.imageAttachment=k,this.inited&&this.fireEvent("imageAttachment",k))},setCalculateNaturalSize:function(k){this.calculateNaturalSize!==k&&(this.calculateNaturalSize=k,this.inited&&this.fireEvent("calculateNaturalSize",k),n(this))},setNaturalWidth:function(k){this.naturalWidth!==k&&(this.naturalWidth=k,this.inited&&this.fireEvent("naturalWidth",k),this.useNaturalSize&&k&&this.setWidth(k))},setNaturalHeight:function(k){this.naturalHeight!==
k&&(this.naturalHeight=k,this.inited&&this.fireEvent("naturalHeight",k),this.useNaturalSize&&k&&this.setHeight(k))},setUseNaturalSize:function(k){this.useNaturalSize!==k&&(this.useNaturalSize=k,this.inited&&this.fireEvent("useNaturalSize",k),k&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),k&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(q=>{const w=JS.Class,u=q.View,n=q.SizeToDom;q.Flexbox=new w("Flexbox",u,{include:[q.FlexboxSupport]});q.Frame=new w("Frame",u,{initNode:function(k,b){b.tagName??(b.tagName="iframe");this.callSuper(k,b);k=q.global.mouse;this.attachToDom(k,"__doMouseDown","mousedown",!0);this.attachToDom(k,"__doMouseUp","mouseup",!0)},createOurDomElement:function(k){k=this.callSuper(k);(Array.isArray(k)?k[1]:k).style.border="0px";return k},setSrc:function(k){this.src!==k&&(this.src=this.getIDE().src=k,this.inited&&
this.fireEvent("src",k))},__doMouseDown:function(k){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(k){this.setPointerEvents(this.__restorePointerEvents);return!0}});q.Markup=new w("Markup",u,{include:[n],setHtml:function(k){this.html!==k&&(this.getIDE().innerHTML=this.html=k,this.inited&&(this.fireEvent("html",k),this.sizeViewToDom()))}});q.Text=new w("Text",u,{include:[n,q.TextSupport],initNode:function(k,b){b.whiteSpace??(b.whiteSpace=
"nowrap");b.userUnselectable??(b.userUnselectable=!0);this.callSuper(k,b)},measureNoWrapWidth:function(){const k=this.__hasSetWidth,b=this.width;if(!k&&"nowrap"===this.whiteSpace)return b;const a=this.getIDS(),e=a.whiteSpace;k&&(a.width="auto");a.whiteSpace="nowrap";const c=this.getODE().getBoundingClientRect().width;a.whiteSpace=e;k&&(a.width=b);return c}});q.PaddedText=new w("PaddedText",q.Text,{include:[q.PaddedTextSupport]});q.Image=new w("Image",u,{include:[q.ImageSupport],initNode:function(k,
b){b.useNaturalSize??(b.useNaturalSize=!0);this.callSuper(k,b)}});q.BackView=new w("BackView",u,{sendSubviewToBack:function(k){if(k.parent===this){const b=this.getIDE(),a=b.childNodes[1];k=k.getODE();k!==a&&(k=b.removeChild(k))&&b.insertBefore(k,a)}}})})(myt);
(q=>{const w=Math.round,u=a=>{a.parent&&0<=a.percentOfParentWidth&&a.syncTo(a.parent,"__doPOPW","width")},n=a=>{0<=a.percentOfParentWidth&&a.detachFrom(a.parent,"__doPOPW","width")},k=a=>{a.parent&&0<=a.percentOfParentHeight&&a.syncTo(a.parent,"__doPOPH","height")},b=a=>{0<=a.percentOfParentHeight&&a.detachFrom(a.parent,"__doPOPH","height")};q.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){this.parent!==a&&(this.inited&&(n(this),b(this)),this.callSuper(a),u(this),k(this))},setPercentOfParentWidthOffset:function(a){this.percentOfParentWidthOffset!==
a&&(this.percentOfParentWidthOffset=a,this.inited&&(this.fireEvent("percentOfParentWidthOffset",a),this.__doPOPW()))},setPercentOfParentWidth:function(a){this.percentOfParentWidth!==a&&(this.inited&&n(this),this.percentOfParentWidth=a,this.inited&&this.fireEvent("percentOfParentWidth",a),u(this))},setPercentOfParentHeightOffset:function(a){this.percentOfParentHeightOffset!==a&&(this.percentOfParentHeightOffset=a,this.inited&&(this.fireEvent("percentOfParentHeightOffset",a),this.__doPOPH()))},setPercentOfParentHeight:function(a){this.percentOfParentHeight!==
a&&(this.inited&&b(this),this.percentOfParentHeight=a,this.inited&&this.fireEvent("percentOfParentHeight",a),k(this))},__doPOPW:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+w(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+w(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(q=>{let w;const u=[];new JS.Singleton("GlobalRootViewRegistry",{include:[q.Observable],initialize:function(){q.global.register("roots",w=this)},getRoots:()=>u,addRoot:n=>{u.push(n);w.fireEvent("rootAdded",n)},removeRoot:n=>{const k=u.indexOf(n);-1<k&&(u.splice(k,1),w.fireEvent("rootRemoved",n))}})})(myt);
(q=>{const w=q.global.roots,u=q.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:n=>{const k=n.__captureDrop=b=>{b.preventDefault()};n=n.getIDE();q.addEventListener(n,"drop",k);q.addEventListener(n,"dragover",k)},teardownCaptureDrop:n=>{const k=n.getIDE();n=n.__captureDrop;q.removeEventListener(k,"drop",n);q.removeEventListener(k,"dragover",n)}},initNode:function(n,k){this.callSuper(n,k);this.setZIndex(0);this.addDomClass("myt");w.addRoot(this);u.setupCaptureDrop(this)},createOurDomElement:function(n){n||
(n=this.callSuper(n),q.getElement().appendChild(n));return n},destroy:function(){u.teardownCaptureDrop(this);w.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(n){this.keepDomElementWhenDestroyed=n},setParent:n=>{},bringToFront:function(){var n=this.getIDE();const k=n.parentNode;n!==k.lastChild&&(n=k.removeChild(n))&&k.appendChild(n)},sendToBack:function(){var n=this.getIDE();const k=n.parentNode;n!==k.firstChild&&
(n=k.removeChild(n))&&k.insertBefore(n,k.firstChild)},sendBehind:function(n){var k=this.getIDE();n=n.getIDE();const b=k.parentNode;n.parentNode===b&&(k=b.removeChild(k))&&b.insertBefore(k,n)},sendInFrontOf:function(n){n.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(n),n.sendBehind(this))}})})(myt);
(q=>{let w,u,n,k=!1;const b=window,a={};new JS.Singleton("GlobalIdle",{include:[q.Observable],initialize:function(){const e=this,c=["webkit","moz","ms","o"];for(let g=0;g<c.length&&!b.requestAnimationFrame;){const l=c[g++];b.requestAnimationFrame=b[l+"RequestAnimationFrame"];b.cancelAnimationFrame=b[l+"CancelAnimationFrame"]??b[l+"CancelRequestAnimationFrame"]}u=g=>{w=b.requestAnimationFrame(u);-1!==n&&(g=Math.round(g),a.delta=g-n,a.time=g,e.fireEvent("idle",a));n=g};q.global.register("idle",e)},
attachObserver:function(e,c,g){e=this.callSuper(e,c,g);!k&&this.hasObservers("idle")&&(k=!0,n=-1,w=b.requestAnimationFrame(u));return e},detachObserver:function(e,c,g){e=this.callSuper(e,c,g);k&&!this.hasObservers("idle")&&(b.cancelAnimationFrame(w),k=!1);return e}})})(myt);
(q=>{let w,u;const n=q.global,k=n.idle,b=window.document;new JS.Singleton("GlobalWindowResize",{include:[q.Observable,q.Observer],initialize:function(){this.attachTo(k,"__setup","idle");n.register("windowResize",this)},__setup:function(a){const e=this,c=b.body;c&&(e.detachFrom(k,"__setup","idle"),(new ResizeObserver(()=>{e.fireEvent("resize",{w:w=c.clientWidth,h:u=c.clientHeight})})).observe(c))},getWidth:()=>w??=b.body.clientWidth,getHeight:()=>u??=b.body.clientHeight})})(myt);
(q=>{const w=JS.Module,u=q.global.windowResize,n=Math.max,k=a=>{const e=a.resizeDimension;"both"!==e&&"width"!==e||a.setWidth(n(a.minWidth,u.getWidth()));"both"!==e&&"height"!==e||a.setHeight(n(a.minHeight,u.getHeight()))},b=q.SizeToWindow=new w("SizeToWindow",{include:[q.RootView],initNode:function(a,e){this.minWidth=this.minHeight=0;e.resizeDimension??(e.resizeDimension="both");this.attachTo(u,"__hndlResize","resize");this.callSuper(a,e)},setResizeDimension:function(a){this.resizeDimension!==a&&
(this.resizeDimension=a,k(this))},setMinWidth:function(a){this.minWidth!==a&&(this.minWidth=a,k(this))},setMinHeight:function(a){this.minHeight!==a&&(this.minHeight=a,k(this))},__hndlResize:function(a){k(this)}});q.SizeToWindowWidth=new w("SizeToWindowWidth",{include:[b],initNode:function(a,e){e.resizeDimension??(e.resizeDimension="width");this.callSuper(a,e)}});q.SizeToWindowHeight=new w("SizeToWindowHeight",{include:[b],initNode:function(a,e){e.resizeDimension??(e.resizeDimension="height");this.callSuper(a,
e)}})})(myt);
(q=>{const w=Math,u=w.max,n=w.min,k=d=>n(255,u(0,w.round(d))),b=d=>k(d).toString(16).padStart(2,"0"),a=(d,f,r,v)=>(v?"#":"")+b(d)+b(f)+b(r),e=d=>new h((16711680&d)>>16,(65280&d)>>8,255&d),c=(d,f)=>{if("string"===typeof d)if(d.endsWith("%"))d=parseFloat(d.slice(0,-1))*f/100;else return 0;d=n(f,u(0,d))/f;return 1E-6>w.abs(1-d)?1:d},g=(d,f,r)=>{d=c(d,255);f=c(f,255);r=c(r,255);const v=u(d,f,r),m=v-n(d,f,r);if(0===m)return{h:0,s:0,v};let y;switch(v){case d:y=(f-r)/m+(f<r?6:0);break;case f:y=(r-d)/m+2;
break;case r:y=(d-f)/m+4}return{h:60*y,s:0===v?0:m/v,v}},l=(d,f,r)=>{d=6*c(d,360);f=c(f,100);r=c(r,100);var v=w.floor(d);const m=d-v;d=r*(1-f);const y=r*(1-m*f);f=r*(1-(1-m)*f);v%=6;return{red:255*[r,y,d,d,f,r][v],green:255*[f,r,r,y,d,d][v],blue:255*[d,d,f,r,r,y][v]}},h=q.Color=new JS.Class("Color",{extend:{toUnitRange:c,rgbToHsv:g,hsvToRgb:l,toHex:b,rgbToHex:a,cleanChannelValue:k,getRedChannel:d=>(16711680&d)>>16,getGreenChannel:d=>(65280&d)>>8,getBlueChannel:d=>255&d,makeColorFromNumber:e,makeColorFromHexString:d=>
{if(d)switch(d.startsWith("#")&&(d=d.slice(1)),d.length){case 0:d+="0";case 1:d+="0";case 2:d+="0";case 3:case 4:case 5:const [f,r,v]=d;return new h(parseInt(f+f,16),parseInt(r+r,16),parseInt(v+v,16));case 6:return e(parseInt(d,16));default:return e(parseInt(d.slice(0,6),16))}},makeColorFromHSV:(d,f,r)=>{const {red:v,green:m,blue:y}=l(d,f,r);return new h(v,m,y)},getLighterColor:(d,f)=>e(d).isLighterThan(e(f))?d:f,makeColorNumberFromChannels:(d,f,r)=>(k(d)<<16)+(k(f)<<8)+k(r),makeBlendedColor:(d,f,
r)=>new h(d.red+r*(f.red-d.red),d.green+r*(f.green-d.green),d.blue+r*(f.blue-d.blue))},initialize:function(d,f,r){this.setRed(d);this.setGreen(f);this.setBlue(r)},setRed:function(d){this.red=k(d)},setGreen:function(d){this.green=k(d)},setBlue:function(d){this.blue=k(d)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return a(this.red,this.green,this.blue,!0)},getHSV:function(){return g(this.red,this.green,this.blue)},isLighterThan:function(d){d=
this.getDiffFrom(d);return 0>d.red+d.green+d.blue},getDiffFrom:function(d){return{red:d.red-this.red,green:d.green-this.green,blue:d.blue-this.blue}},applyDiff:function(d){return this.add(d)},add:function(d){this.setRed(this.red+d.red);this.setGreen(this.green+d.green);this.setBlue(this.blue+d.blue);return this},subtract:function(d){this.setRed(this.red-d.red);this.setGreen(this.green-d.green);this.setBlue(this.blue-d.blue);return this},multiply:function(d){this.setRed(this.red*d);this.setGreen(this.green*
d);this.setBlue(this.blue*d);return this},divide:function(d){this.setRed(this.red/d);this.setGreen(this.green/d);this.setBlue(this.blue/d);return this},clone:function(){return new h(this.red,this.green,this.blue)},equals:function(d){return d===this||d?.isA?.(h)&&d.red===this.red&&d.green===this.green&&d.blue===this.blue}})})(myt);
(q=>{const w=Math,u=w.max,n=w.sin,k=w.cos,b=w.pow,a=w.sqrt,e=w.PI,c=2*e,g=e/2,l=q.global.idle,h=q.Color.makeColorFromHexString,d={linear:m=>m,inQuad:m=>m*m,outQuad:m=>-m*(m-2),inOutQuad:m=>1>(m*=2)?m*m/2:-(--m*(m-2)-1)/2,inCubic:m=>m*m*m,outCubic:m=>--m*m*m+1,inOutCubic:m=>1>(m*=2)?m*m*m/2:((m-=2)*m*m+2)/2,inQuart:m=>m*m*m*m,outQuart:m=>-(--m*m*m*m-1),inOutQuart:m=>1>(m*=2)?m*m*m*m/2:-((m-=2)*m*m*m-2)/2,inQuint:m=>m*m*m*m*m,outQuint:m=>--m*m*m*m*m+1,inOutQuint:m=>1>(m*=2)?m*m*m*m*m/2:((m-=2)*m*m*
m*m+2)/2,inSine:m=>-k(m*g)+1,outSine:m=>n(m*g),inOutSine:m=>-(k(m*e)-1)/2,inCirc:m=>-(a(1-m*m)-1),outCirc:m=>a(1- --m*m),inOutCirc:m=>1>(m*=2)?-(a(1-m*m)-1)/2:(a(1-(m-=2)*m)+1)/2,inExpo:m=>0===m?0:b(2,10*(m-1)),outExpo:m=>1===m?1:-b(2,-10*m)+1,inOutExpo:m=>0===m||1===m?m:1>(m*=2)?b(2,10*(m-1))/2:(-b(2,-10*--m)+2)/2,inElastic:m=>0===m||1===m?m:-(b(2,10*--m)*n((1*m-.075)*c/.3)),outElastic:m=>0===m||1===m?m:b(2,-10*m)*n((1*m-.075)*c/.3)+1,inOutElastic:m=>0===m||1===m?m:1>(m*=2)?-(b(2,10*--m)*n((1*m-
.1125)*c/.45))/2:b(2,-10*--m)*n((1*m-.1125)*c/.45)/2+1,inBack:(m,y=1.70158)=>(m/=1)*m*((y+1)*m-y),outBack:(m,y=1.70158)=>(m=m/1-1)*m*((y+1)*m+y)+1,inOutBack:(m,y=1.70158)=>1>(m*=2)?m*m*(((y*=1.525)+1)*m-y)/2:((m-=2)*m*(((y*=1.525)+1)*m+y)+2)/2,inBounce:m=>1-d.outBounce(1-m),outBounce:m=>m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375,inOutBounce:m=>1>(m*=2)?d.inBounce(m)/2:(d.outBounce(m-1)+1)/2},f=d.inOutQuad,r=m=>
{m.__tmpFrom=!1;m.__loopCnt=m.reverse?m.repeat-1:0;m.__prog=m.reverse?m.duration:0},v=(m,y)=>{if(m.running&&!m.paused){const z=m.reverse,D=m.duration,I=m.repeat;z&&(y*=-1);var C=m.__prog;y=C+y;let K=0;y>D?(K=y-D,y=D,++m.__loopCnt===I&&(K=0)):0>y&&(K=-y,y=0,0>--m.__loopCnt&&0<I&&(K=0));var F=m.target??m.parent;if(F){var H=m.relative;const J=m.attribute;var A=u(0,y/D);C=u(0,C/D);null==m.from&&(m.__tmpFrom=!0,m.from=H?m.__isColorAnim?"#000":0:F.get(J));A=m.easingFunction(A)-(H?m.easingFunction(C):0);
var t=H?F.get(J):m.from,p=m.to;C=F.set;if(m.__isColorAnim){var x=t;t=h(m.from);p=h(p);H=H?h(x):t;H.setRed(H.red+(p.red-t.red)*A);H.setGreen(H.green+(p.green-t.green)*A);H.setBlue(H.blue+(p.blue-t.blue)*A);H=H.getHtmlHexString()}else H=t+(p-m.from)*A;C.call(F,J,H);!z&&m.__loopCnt===I||z&&0>m.__loopCnt&&0<I?(m.setRunning(!1),m.callback?.call(m,!0)):0<K?(m.fireEvent("repeat",m.__loopCnt),m.__prog=z?D:0,v(m,K)):m.__prog=y}else console.log("No target for animator",m),m.setRunning(!1),m.callback?.call(m,
!1)}};q.Animator=new JS.Class("Animator",q.Node,{include:[q.Reusable],extend:{easings:d},initNode:function(m,y){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=f;this.callSuper(m,y);r(this)},setRunning:function(m){if(this.running!==m&&(this.running=m,this.inited&&this.fireEvent("running",m),!this.paused)){if(m){const y=this.target??this.parent;this.__isColorAnim=y&&"function"===typeof y.isColorAttr?y.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&
(this.from=void 0),r(this);this[m?"attachTo":"detachFrom"](l,"__updateAnim","idle")}},setPaused:function(m){if(this.paused!==m&&(this.paused=m,this.inited&&this.fireEvent("paused",m),this.running))this[m?"detachFrom":"attachTo"](l,"__updateAnim","idle")},setReverse:function(m){this.set("reverse",m,!0);this.inited&&!this.running&&r(this)},setRepeat:function(m){this.set("repeat",m,!0);this.inited&&!this.running&&r(this)},setDuration:function(m){this.set("duration",m,!0);this.inited&&!this.running&&
r(this)},setEasingFunction:function(m){"string"===typeof m&&(m=d[m]);this.set("easingFunction",m??f,!0)},setFrom:function(m){this.set("from",m,!0)},setTo:function(m){this.set("to",m,!0)},setCallback:function(m){this.callback=m},next:function(m,y){const C=this,F=C.callback;F&&!y?C.setCallback(H=>{F.call(C,H);m.call(C,H)}):C.setCallback(m)},reset:function(m){r(this);this.setRunning(!1);this.setPaused(!1);m&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=
void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},__updateAnim:function(m){v(this,m.value.delta)}})})(myt);
(q=>{const w=Array.isArray,u=b=>{b.__additionalArgs=[];b.__pendingTransition="";b.__transDestinationState="";b.__transStage="leaveState"},n=(b,a)=>{if(b.__transInProgress){var e=b.__deferredTransitions;e??=b.__deferredTransitions=[];e.unshift(a)}else{b.__transInProgress=!0;e=a.shift();const c=a.shift();if(b.__pendingTransition)return 3;if(b.isFinished())return b.__transInProgress=!1,5;let g=b.map[b.current][c];g??=b.map["*"][c];if(g)return b.__pendingTransition=c,b.__transDestinationState=g,b.__additionalArgs=
a,b.resumeTransition(e);b.__transInProgress=!1;return 5}},k=b=>{b.__transInProgress=!1;const a=b.__deferredTransitions;if(a)for(;0<a.length;)n(b,a.pop())};q.StateMachine=new JS.Class("StateMachine",q.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(b,a){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";u(this);this.callSuper(b,a)},setInitialState:function(b){if(""===this.current){if(w(b)){var a=b;b=a.shift()}else a=[];this.current=
this.initial=b;this.doEnterState("","",b,a);a={name:"",from:"",to:b,args:a};this.fireEvent("enter"+b,a);this.fireEvent("enter",a);this.isFinished()&&this.fireEvent("finished",a)}},setTerminalState:function(b){this.terminal=b},addTransitions:function(b){b.forEach(a=>this.addTransition(...a))},addTransition:function(b,a,e){a=a?w(a)?a:[a]:["*"];const c=this.map;let g=a.length;for(;g;){let l,h;((l=c)[h=a[--g]]??(l[h]={}))[b]=e}},doTransition:function(...b){b.unshift("sync");return n(this,b)},doAsyncTransition:function(...b){b.unshift("async");
return n(this,b)},resumeTransition:function(b){const a=this.__pendingTransition;if(!a)return 4;const e=this.current,c=this.__transDestinationState,g=this.__additionalArgs,l={name:a,from:e,to:c,args:g},h=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const d=this.doLeaveState(a,e,c,g);if(!1===d)return u(this),k(this),2;if("async"===d||"async"===b)return this.__transStage="enterState",h("start"+a,l),h("start",l),h("leave"+e,l),h("leave",l),k(this),3;h("start"+a,l);h("start",l);
h("leave"+e,l);h("leave",l);case "enterState":this.current=c,u(this),this.doEnterState(a,e,c,g),h("enter"+c,l),h("enter",l),h("end"+a,l),h("end",l),this.isFinished()&&h("finished",l)}k(this);return 1},doLeaveState:(b,a,e,c)=>{},doEnterState:(b,a,e,c)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(b){return w(b)?b.includes(this.current):this.current===b},can:function(b){return void 0!==this.map[this.current][b]?!0:void 0!==this.map["*"][b]}})})(myt);
(q=>{const w=(b,a)=>b.replicationIndex-a.replicationIndex,u=(b,a)=>{let e=b.length,c;for(;e;)c=b[--e],c.decrementLockedCounter(),a&&c.update()},n=b=>{k(b);const a=b.template;a&&(b.__pool=new q.TrackActivesPool(a,b.parent))},k=b=>{const a=b.__pool;if(a){const e=b.parent.getLayouts();b=e;let c=b.length;for(;c;)b[--c].incrementLockedCounter();a.putActives();a.destroyPooledInstances();u(e,!1);a.destroy()}};q.Replicable=new JS.Module("Replicable",{include:[q.Reusable],replicate:function(b,a){this.replicationData=
b;this.replicationIndex=a},notify:(b,a)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(b,a){return a===this.replicationIndex&&b===this.replicationData}});q.Replicator=new JS.Class("Replicator",q.Node,{initNode:function(b,a){this.callSuper(b,a);n(this);this.doReplication()},destroy:function(){k(this);this.callSuper()},setTemplate:function(b){(this.template=b.includes(q.Replicable)?b:null)||q.dumpStack("Template not replicable");this.inited&&
(n(this),this.doReplication())},setData:function(b){this.data=b;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const b=this.__pool;let a;if(b){a=this.parent.getLayouts();for(var e=a.length;e;)a[--e].incrementLockedCounter();const c=(e=this.data)?e.length:0,g=b.getActives(),l=g.length,h=[];let d=l,f,r;for(g.sort(w);d;)if(f=g[--d],r=f.replicationIndex,r>=c||!f.alreadyHasReplicationData(e[r],r))h[r]=f;for(d=h.length;d;)(f=h[--d])&&
b.putInstance(f);for(d=0;c>d;++d)(d>=l||null!=h[d])&&b.getInstance().replicate(e[d],d);for(d=a.length;d;)a[--d].sortSubviews(w);u(a,!0)}},notify:function(b,a){var e=this.__pool;if(e){e=e.getActives();let c=e.length;for(;c;)e[--c].notify(b,a)}}})})(myt);new JS.Singleton("GlobalMouse",{include:[myt.DomElementProxy,myt.DomObservable,myt.MouseObservable],initialize:function(){this.setDomElement(document);myt.global.register("mouse",this)}});
(q=>{let w,u,n;const k=[],b=[],a=g=>{const l=n;l!==g&&(l&&(l.notifyDragLeave(u),u.destroyed||u.notifyDragLeaving(l),w("dragLeave",l)),n=g)&&(g.notifyDragEnter(u),u.destroyed||u.notifyDragEntering(g),w("dragEnter",l))},e=g=>{let l=u;l!==g&&((u=g)?(l=g,c(l,b).forEach(h=>{h.notifyDragStart(l)}),c(l,k).forEach(h=>{h.notifyAutoScrollerDragStart(l)}),w("startDrag",g)):(c(l,b).forEach(h=>{h.notifyDragStop(l)}),c(l,k).forEach(h=>{h.notifyAutoScrollerDragStop(l)}),w("stopDrag",g)))},c=(g,l)=>{if(g.destroyed)return[];
if(g.isAnyDragGroup())return l;const h=[];g=g.getDragGroups();let d=l.length;for(;d;){const f=l[--d];if(f.isAnyDropGroup())h.push(f);else{const r=f.getDropGroups();for(const v in g)if(r[v]){h.push(f);break}}}return h};new JS.Singleton("GlobalDragManager",{include:[q.Observable],initialize:function(){q.global.register("dragManager",this);w=this.fireEvent.bind(this)},getDragView:()=>u,registerAutoScroller:g=>{k.push(g)},unregisterAutoScroller:g=>{g=k.indexOf(g);-1<g&&k.splice(g,1)},registerDropTarget:g=>
{b.push(g)},unregisterDropTarget:g=>{g=b.indexOf(g);-1<g&&b.splice(g,1)},startDrag:g=>{e(g)},stopDrag:(g,l,h)=>{l.notifyDropped(n,h);h||n?.notifyDrop(l);a();e();n&&!h&&w("drop",[l,n])},updateDrag:(g,l)=>{const h=c(l,b);let d=h.length,f;if(0<d){var r=g.value;g=r.pageX;for(r=r.pageY;d;){let v=h[--d];v.willAcceptDrop(l)&&l.willPermitDrop(v)&&v.isPointVisible(g,r)&&(!f||v.isInFrontOf(f))&&(f=v)}}a(f)}})})(myt);
(q=>{const w=JS.Module,u=q.global,n=u.mouse,k=u.keys,b=u.idle;q.Activateable=new w("Activateable",{doActivated:()=>{}});q.UpdateableUI=new w("UpdateableUI",{initNode:function(a,e){this.callSuper(a,e);this.updateUI()},updateUI:()=>{}});q.Disableable=new w("Disableable",{initNode:function(a,e){e.disabled??(e.disabled=!1);this.callSuper(a,e)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});q.KeyActivation=new w("KeyActivation",{extend:{ACTIVATION_KEYS:[k.CODE_ENTER,k.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,e){this.activateKeyDown="";e.activationKeys??(e.activationKeys=q.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,e);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=
a??[]},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const e=q.KeyObservable.getCodeFromEvent(a);this.activationKeys.includes(e)&&(this.activateKeyDown===e?this.doActivationKeyDown(e,!0):(this.activateKeyDown=e,this.doActivationKeyDown(e,!1)),a.value.preventDefault())}},__hndlKeyPress:function(a){if(!this.disabled){const e=q.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===e&&this.activationKeys.includes(e)&&
a.value.preventDefault()}},__hndlKeyUp:function(a){if(!this.disabled){const e=q.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===e&&this.activationKeys.includes(e)&&(this.activateKeyDown="",this.doActivationKeyUp(e),a.value.preventDefault())}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,e)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});q.ArrowKeyActivation=
new w("KeyActivation",{doActivationKeyDown:function(a,e){switch(a){case k.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,e))return;break;case k.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,e))return;break;case k.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,e))return;break;case k.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,e))return}this.callSuper(a,e)},doKeyArrowLeftOrUp:(a,e)=>{},doKeyArrowRightOrDown:(a,e)=>{}});q.MouseOver=new w("MouseOver",{initNode:function(a,e){e.mouseOver??(e.mouseOver=
!1);this.callSuper(a,e);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(b,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(b,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI?.()},doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});q.MouseDown=new w("MouseDown",{initNode:function(a,e){e.mouseDown??(e.mouseDown=!1);this.callSuper(a,
e);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(n,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(n,
"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(n,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated?.()}});q.MouseOverAndDown=new w("MouseOverAndDown",{include:[q.MouseOver,q.MouseDown]});q.Draggable=new w("Draggable",{initNode:function(a,e){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let c=!0;null!=e.isDraggable&&(c=e.isDraggable,delete e.isDraggable);this.callSuper(a,e);this.setIsDraggable(c)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;let e;a?e=this.attachToDom:this.inited&&(e=this.detachFromDom);if(e){a=this.getDragViews();let c=a.length;for(;c;){const g=a[--c];e.call(this,g,"__doMouseDown","mousedown");e.call(this,g,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",
a,!0)},setDragOffsetX:function(a,e){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDragOffsetY:function(a,e){this.dragOffsetY!==a&&(this.dragOffsetY=a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},
getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const e=q.MouseObservable.getMouseFromEvent(a),c=this.getODE();this.dragInitX=e.x-c.offsetLeft;this.dragInitY=e.y-c.offsetTop;this.attachToDom(n,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(n,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(n,"__doMouseUp",
"mouseup",!0),this.detachFromDom(n,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===k.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const e=q.MouseObservable.getMouseFromEvent(a);q.Geometry.measureDistance(e.x,e.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(q.global.mouse,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(k,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(n,"updateDrag","mousemove",!0);this.updateDrag(a)},updateDrag:function(a){this.__lastMousePosition=q.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,e){this.detachFromDom(n,
"__doMouseUp","mouseup",!0);this.detachFromDom(n,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(k,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,e){this.disabled||(this.setX(a),this.setY(e))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(q=>{const w=JS.Class;var u=JS.Module,n=q.View;const k=q.KeyActivation,b=q.Button=new u("Button",{include:[q.Activateable,q.UpdateableUI,q.Disableable,q.MouseOverAndDown,k],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(a,e){e.focusable??(e.focusable=!0);e.cursor??(e.cursor="pointer");this.callSuper(a,e)},setFocused:function(a){const e=this.focused;this.callSuper(a);this.inited&&this.focused!==e&&this.updateUI()},doActivationKeyDown:function(a,e){e||this.updateUI()},doActivationKeyUp:function(a){this.callSuper(a);
this.updateUI()},doActivationKeyAborted:function(a){this.callSuper(a);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const a=this.__restoreCursor;a&&(this.setCursor(a),this.__restoreCursor=null);this.activateKeyDown!==k.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});u=q.SimpleButtonStyle=new u("SimpleButtonStyle",{include:[b],setActiveColor:function(a){this.activeColor!==a&&(this.activeColor=a,this.inited&&this.updateUI())},setHoverColor:function(a){this.hoverColor!==a&&(this.hoverColor=a,this.inited&&this.updateUI())},setReadyColor:function(a){this.readyColor!==
a&&(this.readyColor=a,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(a,e=1){this.setOpacity(e);this.setBgColor(a)}});n=q.SimpleButton=new w("SimpleButton",n,{include:[u],initNode:function(a,e){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(a,e)}});
q.SimpleTextButton=new w("SimpleTextButton",n,{initNode:function(a,e){this.inset=this.outset=0;e.shrinkToFit??(e.shrinkToFit=!1);e.height??(e.height=24);e.textY??(e.textY="middle");this.callSuper(a,e);a=this.textY;e={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof a?e.valign=a:e.y=a;a=this.textView=new q.Text(this,e);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",a,"visible",a,"width",a,
"height",a,"y"])},setInset:function(a){this.set("inset",this.valueFromEvent(a),!0)},setOutset:function(a){this.set("outset",this.valueFromEvent(a),!0)},setText:function(a){this.text!==a&&(this.text=a,this.inited&&(this.textView.setText(a),this.fireEvent("text",a)))},setShrinkToFit:function(a){this.shrinkToFit!==a&&(this.shrinkToFit=a,this.inited&&(this.textView?.setWhiteSpace(a?"nowrap":"normal"),this.fireEvent("shrinkToFit",a)))},setTextY:function(a){const e=this.textView;this.textY!==a&&(this.textY=
a,this.inited&&(this.fireEvent("textY",a),"string"===typeof a?e.setValign(a):(e.setValign(""),e.setY(a))))},__updateContent:function(a){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:e,outset:c,textView:g}=this;this.__updateContentLoopBlock=!0;g.setX(e);this.shrinkToFit?this.setWidth(e+(g.visible&&this.text?g.width:0)+c):g.setWidth(this.width-e-c);this.__updateContentLoopBlock=!1}}});q.TextButton=new w("TextButton",q.PaddedText,{include:[u],initNode:function(a,e){e.focusIndicator??
(e.focusIndicator=!1);e.roundedCorners??(e.roundedCorners=3);e.textAlign??(e.textAlign="center");e.paddingTop??(e.paddingTop=1);e.height??(e.height=23-(e.paddingTop??0));e.activeColor??(e.activeColor="#ddd");e.hoverColor??(e.hoverColor="#eee");e.readyColor??(e.readyColor="#fff");this.callSuper(a,e)}})})(myt);
(q=>{const w=q.global,u=w.focus,n=w.mouse,k={};q.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:b=>k[b]},initNode:function(b,a){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(b,a)},setLastFloatingPanelShown:function(b){this.lastFloatingPanelShown=b},setLastFloatingPanelId:function(b){this.floatingPanelId=b},setFloatingAlign:function(b){this.set("floatingAlign",b,!0)},setFloatingValign:function(b){this.set("floatingValign",
b,!0)},setFloatingAlignOffset:function(b){this.set("floatingAlignOffset",b,!0)},setFloatingValignOffset:function(b){this.set("floatingValignOffset",b,!0)},createFloatingPanel:function(b,a,e){b=b??this.floatingPanelId;e=e??{};e.panelId=b;return k[b]=new a(null,e)},getFloatingPanel:function(b){return k[b??this.floatingPanelId]},toggleFloatingPanel:function(b){this.getFloatingPanel(b??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(b):this.showFloatingPanel(b)},showFloatingPanel:function(b){if(b=
this.getFloatingPanel(b??this.floatingPanelId))b.show(this),this.setLastFloatingPanelShown(b)},hideFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(b){this.callSuper?.()},notifyPanelHidden:function(b){this.callSuper?.()},getFloatingAlignForPanel:function(b){return this.floatingAlign},getFloatingValignForPanel:function(b){return this.floatingValign},getFloatingAlignOffsetForPanel:function(b){return this.floatingAlignOffset},
getFloatingValignOffsetForPanel:function(b){return this.floatingValignOffset},getNextFocus:function(){const b=this.lastFloatingPanelShown;return b?.isShown()?b:this.callSuper?.()},getNextFocusAfterPanel:function(b){return this},getPrevFocusAfterPanel:function(b){return this}});q.FloatingPanel=new JS.Class("FloatingPanel",q.View,{include:[q.RootView],initNode:function(b,a){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;a.visible=a.focusIndicator=
!1;a.focusable=a.focusCage=!0;this.callSuper(b,a)},setOwner:function(b){this.owner=b},setPanelId:function(b){this.panelId=b},setIgnoreOwnerForHideOnMouseDown:function(b){this.ignoreOwnerForHideOnMouseDown=b},setHideOnBlur:function(b){this.hideOnBlur=b},setHideOnMouseDown:function(b){this.hideOnMouseDown=b},__doMouseDown:function(b){var a=b.value;b=a.pageX;a=a.pageY;this.containsPoint(b,a)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(b,a)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(b){this.hideOnMouseDown&&
this.hide(b)},focus:function(b){if(this.owner&&this.isAncestorOf(u.focusedView))this.owner[(u.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(b);else{const a=this.getFirstFocusableDescendant();a===this?this.callSuper(b):a.focus(b)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){(b=b.value)&&!this.isAncestorOf(b)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&u.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(b){this.isShown()||(this.bringToFront(),this.updateLocation(b),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(n,"__doMouseDown","mousedown",!0),this.attachTo(u,"__doFocusChange","focused"))},hide:function(b){this.isShown()&&(this.detachFromDom(n,"__doMouseDown","mousedown",!0),this.detachFrom(u,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),b||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(b){this.setOwner(b);this.updateLocationX(b);this.updateLocationY(b)},updateLocationX:function(b){const a=b.getFloatingAlignForPanel(this),e=typeof a;let c;if("string"===e)switch(c=b.getPagePosition().x+b.getFloatingAlignOffsetForPanel(this),a){case "outsideRight":c+=b.width;break;case "insideRight":c+=b.width-this.width;break;case "outsideLeft":c-=this.width;break;case "insideLeft":break;default:console.warn("Invalid align value",
e,a)}else"number"===e?c=a:console.warn("Invalid align type",e,a);this.setX(c)},updateLocationY:function(b){const a=b.getFloatingValignForPanel(this),e=typeof a;let c;if("string"===e)switch(c=b.getPagePosition().y+b.getFloatingValignOffsetForPanel(this),a){case "outsideBottom":c+=b.height;break;case "insideBottom":c+=b.height-this.height;break;case "outsideTop":c-=this.height;break;case "insideTop":break;default:console.warn("Invalid valign value",e,a)}else"number"===e?c=a:console.warn("Invalid valign type",
e,a);this.setY(c)}})})(myt);
(q=>{const w=JS.Class,u=JS.Module,n=q.global,k=n.focus,b=n.keys,a=b.LIST_KEYS,e=g=>{var l=g.itemConfig??[];const h=l.length,d=g.items,f=d.length;var r=g.defaultItemClass;const v=g.getContentView(),m=v.getLayouts(),y=g.fixedWidth,C=0<y;m.forEach(z=>{z.incrementLockedCounter()});const F=v.getODE(),H=F.nextSibling,A=F.parentNode;A.removeChild(F);let t=0;const p={listView:g};C&&(p.width=y,p.enableEllipsis=!0);for(;h>t;++t){var x=l[t];const z=x.klass??r;x=x.attrs??{};let D=d[t];D&&!D.isA(z)&&(D.destroy(),
D=null);D??=d[t]=new z(v,{...p});D&&(D.callSetters(x),D.__LAYOUT_IDX=t)}A.insertBefore(F,H);if(C)l=y;else for(l=g.minWidth,t=0;h>t;)r=d[t++],r.syncToDom(),l=Math.max(l,r.getMinimumWidth());for(;f>t;)d[t++].destroy();d.length=h;if(!C)for(t=0;h>t;)g.updateItemWidth(d[t++],l);g.updateContentWidth(v,l);m.forEach(z=>{z.sortSubviews((D,I)=>D.__LAYOUT_IDX-I.__LAYOUT_IDX);z.decrementLockedCounter();z.update()})},c=q.ListViewItemMixin=new u("ListViewItemMixin",{setListView:function(g){this.listView=g},getMinimumWidth:()=>
0,syncToDom:()=>{}});q.ListView=new w("ListView",q.FloatingPanel,{initNode:function(g,l){this.items=[];this.maxHeight=-1;this.minWidth=0;l.defaultItemClass??(l.defaultItemClass=q.ListViewItem);l.overflow??(l.overflow="autoy");l.bgColor??(l.bgColor="#ccc");l.boxShadow??(l.boxShadow=q.Button.FOCUS_SHADOW);this.callSuper(g,l);e(this);this.buildLayout(this.getContentView())},buildLayout:g=>{new q.SpacedLayout(g,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(g){this.minWidth=g},setDefaultItemClass:function(g){this.defaultItemClass=
g},setItemConfig:function(g){this.itemConfig=g;this.inited&&e(this)},getContentView:function(){return this},setMaxHeight:function(g){this.maxHeight!==g&&(this.maxHeight=g,this.inited&&(this.fireEvent("maxHeight",g),this.setHeight(this.height)))},setHeight:function(g){this.callSuper(0<=this.maxHeight?Math.min(this.maxHeight,g):g);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(g){this?.owner.doItemActivated(g)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(g=>g.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(g=>g.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(g,l)=>{g.setWidth(l)},updateContentWidth:(g,l)=>{g.setWidth(l)}});q.ListViewAnchor=new u("ListViewAnchor",{include:[q.FloatingPanelAnchor,q.ArrowKeyActivation],initNode:function(g,
l){l.listViewClass??(l.listViewClass=q.ListView);l.listViewAttrs??(l.listViewAttrs={});l.itemConfig??(l.itemConfig=[]);l.activationKeys??(l.activationKeys=a);this.callSuper(g,l)},setListViewClass:function(g){this.listViewClass=g},setListViewAttrs:function(g){this.listViewAttrs=g},setItemConfig:function(g){this.itemConfig=g},getFloatingValignForPanel:function(g){var l=g.height,h=this.getPagePosition().y,d=n.windowResize.getHeight()-this.getPagePosition().y-this.height;g=h-l;l=d-l;h=h>d;d=this.floatingValign;
switch(d){case "outsideBottom":0>l&&h&&(d="outsideTop");break;case "insideBottom":0>l&&h&&(d="insideTop");break;case "outsideTop":0>g&&!h&&(d="outsideBottom");break;case "insideTop":0>g&&!h&&(d="insideBottom")}return d},doItemActivated:function(g){this.hideFloatingPanel()},getFloatingPanel:function(g){return this.callSuper(g)??this.createFloatingPanel(g,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(g){const l=this.getFloatingPanel(g);l&&(l.setItemConfig(this.itemConfig),this.callSuper(g))},
doActivationKeyDown:function(g,l){g===b.CODE_ESC?this.hideFloatingPanel():this.callSuper(g,l)},doKeyArrowLeftOrUp:function(g,l){this.focusToLastItem()},doKeyArrowRightOrDown:function(g,l){this.focusToFirstItem()},doActivationKeyUp:function(g){if(g!==b.CODE_ESC)switch(this.callSuper(g),g){case b.CODE_ARROW_LEFT:case b.CODE_ARROW_UP:this.focusToLastItem();break;case b.CODE_ARROW_RIGHT:case b.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const g=this.getFloatingPanel();g?.isShown()&&
g.focusToLastItem()},focusToFirstItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToFirstItem()},updateEntryAttr:function(g,l,h){(g=this.getEntryByValue(g))&&(g.attrs[l]=h);return g},getEntryByValue:function(g){return this.itemConfig.find(l=>l?.attrs&&l.attrs.value===g)}});q.ListViewItem=new w("ListViewItem",q.TextButton,{include:[c,q.ArrowKeyActivation],initNode:function(g,l){l.activeColor??(l.activeColor="#bbb");l.hoverColor??(l.hoverColor="#fff");l.readyColor??(l.readyColor=
"#eee");l.paddingLeft??(l.paddingLeft=8);l.paddingRight??(l.paddingRight=8);l.textAlign??(l.textAlign="left");l.roundedCorners??(l.roundedCorners=0);l.activationKeys??(l.activationKeys=a);l.focusIndicator??(l.focusIndicator=!0);const h=this.__enableEllipsis=l.enableEllipsis;delete l.enableEllipsis;this.callSuper(g,l);this.addDomClass("mytButtonText");h&&this.enableEllipsis()},setText:function(g){this.callSuper(g);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width=
"auto";this.sizeViewToDom()},getMinimumWidth:function(){return Math.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(g,l){g===b.CODE_ESC?this.listView.owner.hideFloatingPanel():this.callSuper(g,l)},doKeyArrowLeftOrUp:function(g,l){k.prev()},doKeyArrowRightOrDown:function(g,l){k.next()}});q.ListViewSeparator=new w("ListViewSeparator",q.View,{include:[c],initNode:function(g,l){l.height??(l.height=1);l.bgColor??(l.bgColor="#666");
this.callSuper(g,l)}})})(myt);
(q=>{const w=q.AccessorSupport,u={},n=q.BAG=new JS.Class("BAG",{include:[w,q.Destructible,q.Observable],extend:{getGroup:(k,b)=>{if(k&&b){let a;return(a=u[k]??(u[k]={}))[b]??(a[b]=new n(k,b))}},removeGroup:(k,b)=>{if(k&&b&&(k=u[k])){const a=k[b];a&&delete k[b];return a}}},initialize:function(k,b){this.__nodes=[];this.trueNode=null;this.attrName=k;this.groupId=b},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&n.removeGroup(this.attrName,this.groupId);this.__nodes.length=
0;this.detachAllObservers();this.callSuper()},setGroupId:function(k){this.set("groupId",k,!0)},setAttrName:function(k){this.set("attrName",k,!0)},setTrueNode:function(k){this.set("trueNode",k,!0)},getNodes:function(){return this.__nodes},register:function(k){k&&!this.isRegistered(k)&&(this.__nodes.push(k),k[this.attrName]&&this.setTrue(k))},unregister:function(k){if(k){const b=this.__nodes,a=b.indexOf(k);-1<a&&b.splice(a,1);this.trueNode===k&&this.setTrueNode(null);0===b.length&&this.destroy()}},
setTrue:function(k){if(k&&this.trueNode!==k&&this.isRegistered(k)){const b=this.attrName,a=w.generateSetterName(b),e=this.__nodes;let c=e.length;for(this.setTrueNode(k);c;){const g=e[--c];if(k===g){if(!g[b])g[a](!0)}else if(g[b])g[a](!1)}}},setFalse:function(k){k&&this.trueNode===k&&(k[w.generateSetterName(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(k){return this.__nodes.includes(k)}});q.BAGMembership=new JS.Module("BAGMembership",{initNode:function(k,b){this.__bags=[];this.callSuper(k,
b)},destroy:function(){const k=this.__bags;let b=k.length;for(;b;){const a=k[--b];this.removeFromBAG(a.attrName,a.groupId)}this.callSuper()},isRegisteredWithBAG:function(k){return this.__bags.includes(k)},getBAG:(k,b)=>n.getGroup(k,b),addToBAG:function(k,b){b=this.getBAG(k,b);this.isRegisteredWithBAG(b)||(this.__bags.push(b),b.register(this),this.isAttachedTo(this,"__updateForBAG",k)||this.attachTo(this,"__updateForBAG",k))},removeFromBAG:function(k,b){b=this.getBAG(k,b);if(this.isRegisteredWithBAG(b)){const a=
this.__bags;let e=a.length,c=!0;for(;e;){const g=a[--e];g===b?(a.splice(e,1),b.unregister(this)):g.attrName===k&&(c=!1)}c&&this.detachFrom(this,"__updateForBAG",k)}},__updateForBAG:function(k){this.__bags.forEach(b=>{if(b.attrName===k.type)b[k.value?"setTrue":"setFalse"](this)})}})})(myt);
(q=>{const w=u=>{const n=u.label||"";u.setText('<i class="far fa-'+(!0===u.selected?"dot-":"")+'circle"></i>'+(0<n.length?" ":"")+n)};q.Radio=new JS.Class("Radio",q.Text,{include:[q.SimpleButtonStyle,q.BAGMembership],initNode:function(u,n){n.selected??(n.selected=!1);n.groupId??(n.groupId=q.generateGuid());n.focusIndicator??(n.focusIndicator=!1);n.activeColor??(n.activeColor="inherit");n.hoverColor??(n.hoverColor="inherit");n.readyColor??(n.readyColor="inherit");const k=n.value;delete n.value;this.callSuper(u,
n);this.setValue(k);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);q.FontAwesome.registerForNotification(this);w(this)},setOptionValue:function(u){this.set("optionValue",u,!0)},setValue:function(u){if(this.inited){const n=this.getBAG("selected",this.groupId);if(n){const k=n.getNodes();let b=k.length;for(;b;){const a=k[--b];if(a.optionValue===u){n.setTrue(a);break}}}}},getValue:function(){var u=this.getBAG("selected",this.groupId);return(u=u?u.trueNode:null)?u.optionValue:null},
setSelected:function(u){this.selected!==u&&(this.selected=u,this.inited&&(this.fireEvent("selected",u),w(this)))},setGroupId:function(u){if(this.groupId!==u){const n=this.groupId;this.groupId=u;n&&this.removeFromBAG("selected",n);u&&this.addToBAG("selected",u);this.inited&&this.fireEvent("groupId",u)}},setLabel:function(u){this.label!==u&&(this.set("label",u,!0),this.inited&&w(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(u,n=1){this.setOpacity(n);this.setTextColor(u)}})})(myt);
(q=>{const w=JS.Module,u=q.global.keys,n=q.Selectable=new w("Selectable",{setSelected:function(b){b=this.valueFromEvent(b);this.selected!==b&&(this.selected=b,this.inited&&this.fireEvent?.("selected",b))},isSelected:function(){return!!this.selected},canSelect:b=>!0,canDeselect:b=>!0}),k=q.SelectionManager=new w("SelectionManager",{extend:{isAddMode:()=>u.isShiftKeyDown(),isToggleMode:()=>u.isAcceleratorKeyDown()},initNode:function(b,a){this.__selected={};this.__lastSelectedItem=null;a.selectedCount=
0;a.itemSelectionId??(a.itemSelectionId="id");a.maxSelected??(a.maxSelected=-1);this.callSuper(b,a)},setItemSelectionId:function(b){this.itemSelectionId=b},setMaxSelected:function(b){this.maxSelected=b},setSelectedCount:function(b){this.selectedCount!==b&&(this.selectedCount=b,this.inited&&this.fireEvent("selectedCount",b))},isAddMode:()=>k.isAddMode(),isToggleMode:()=>k.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(b){b&&!this.isSelectedItem(b)&&this.canSelectItem(b)&&
(b.setSelected(!0),this.__selected[b[this.itemSelectionId]]=b,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=b,this.doSelected(b),this.fireEvent("itemSelected",b))},doSelected:b=>{},selectById:function(b){this.select(this.getSelectableItem(b))},canSelectItem:function(b){const a=this.maxSelected,e=this.selectedCount;if(0===a)return!1;if(1===a){if(0<e&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<a&&e>=a)return!1;return b.canSelect(this)},selectAll:function(){const b=
this.getSelectableItems();let a=b.length;for(;a;)this.select(b[--a])},deselect:function(b){this.isSelectedItem(b)&&this.canDeselectItem(b)&&(b.setSelected(!1),delete this.__selected[b[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===b&&(this.__lastSelectedItem=null),this.doDeselected(b),this.fireEvent("itemDeselected",b))},doDeselected:b=>{},deselectById:function(b){this.deselect(this.getSelectableItem(b))},canDeselectItem:function(b){return b.canDeselect(this)},
deselectAll:function(){const b=this.__selected;for(const a in b)this.deselect(b[a])},isSelectedItem:b=>b?b.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const b=[],a=this.getSubviews();let e=a.length;for(;e;){const c=a[--e];c.isA(n)&&b.push(c)}return b},getSelectableItems:function(){const b=this.getManagedItems();let a=b.length;for(;a;)b[--a].canSelect(this)||b.splice(a,1);return b},getSelectableItem:function(b){const a=
this.getSelectableItems(),e=this.itemSelectionId;let c=a.length;for(;c;){const g=a[--c];if(g[e]===b)return g}}})})(myt);
(q=>{const w=JS.Class,u=q.View,n=q.SizeToParent,k=q.TabSlider=new w("TabSlider",u,{include:[q.Selectable,q.Disableable,n],initNode:function(a,e){const c=this;let g;e.defaultPlacement="wrapper.container";e.percentOfParentWidth=100;e.expansionState="collapsed";e.tabId??(e.tabId=q.generateGuid());e.tabContainer??(e.tabContainer=a);e.selected??(e.selected=!1);e.buttonClass??(e.buttonClass=q.SimpleButton);e.zIndex??(e.zIndex=0);e.buttonHeight??(e.buttonHeight=30);e.fillColorSelected??(e.fillColorSelected=
"#666");e.fillColorHover??(e.fillColorHover="#eee");e.fillColorActive??(e.fillColorActive="#ccc");e.fillColorReady??(e.fillColorReady="#fff");e.minContainerHeight??(e.minContainerHeight=100);e.selected&&(g=!0,delete e.selected);c.callSuper(a,e);c.button=new c.buttonClass(c,{ignorePlacement:!0,zIndex:1,height:c.buttonHeight,focusIndicator:!0,groupId:c.parent.parent.groupId,percentOfParentWidth:100,hoverColor:c.fillColorHover,activeColor:c.fillColorActive,readyColor:c.fillColorReady},[n,{doActivated:()=>
{const l=c.tabContainer;c.isSelected()&&1!==l.maxSelected?l.deselect(c):l.select(c)},updateUI:function(){this.callSuper();c.selected&&-1!==c.tabContainer.maxSelected&&this.setBgColor(c.fillColorSelected);c.notifyButtonRedraw()}}]);a=c.wrapper=new u(c,{ignorePlacement:!0,y:c.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[n,{setHeight:function(l){this.callSuper(Math.round(l))},setWidth:function(l){this.callSuper(l);this.inited&&this.container.setWidth(l)}}]);new q.SizeToChildren(a.container=
new u(a),{axis:"y"});c.constrain("__updateHeight",[a,"y",a,"height"]);g&&c.tabContainer.select(c);!0===e.disabled&&c.setDisabled(!0);c.setHeight(c.getCollapsedHeight())},setSelected:function(a){this.callSuper(a);this.button?.updateUI()},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=
a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){this.buttonHeight!==a&&(this.buttonHeight=a,this.button&&(this.button.setHeight(a),this.wrapper.setY(a)))},setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;this.inited&&this.fireEvent("expansionState",a);const e=this.wrapper;e&&("expanded"===a?(e.setMaskFocus(!1),e.setOverflow("auto")):"expanding"===a?e.setVisible(!0):"collapsed"===
a?e.setVisible(!1):"collapsing"===a&&(e.setMaskFocus(!0),e.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(a){const e=this,c=e.wrapper;a-=e.getCollapsedHeight();e.setExpansionState("expanding");c.stopActiveAnimators();if(c.height!==a){const g=e.tabContainer.duration;1===g?(c.setHeight(a),e.setExpansionState("expanded")):c.animate({attribute:"height",
to:a,duration:g}).next(l=>{e.setExpansionState("expanded")})}else e.setExpansionState("expanded")},collapse:function(){const a=this,e=a.wrapper;a.setExpansionState("collapsing");e.stopActiveAnimators();if(0!==e.height){const c=a.tabContainer.duration;1===c?(e.setHeight(0),a.setExpansionState("collapsed")):e.animate({attribute:"height",to:0,duration:c}).next(g=>{a.setExpansionState("collapsed")})}else a.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});q.TextTabSlider=new w("TextTabSlider",k,{initNode:function(a,e){e.labelTextColorChecked??(e.labelTextColorChecked="#fff");e.labelTextColor??(e.labelTextColor="#333");this.callSuper(a,e);this.button.label=new q.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){this.text!==a&&(this.text=a,this.button?.label?.setText(a))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const b=q.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[q.SelectionManager],
extend:{SPACING:1},initNode:function(a,e){const c=this;c._tabSliders=[];e.defaultPlacement="container";e.spacing??(e.spacing=b.SPACING);e.overflow??(e.overflow="autoy");e.itemSelectionId??(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);e.duration??(e.duration=500);c.updateLayout=q.debounce(c.updateLayout);c.callSuper(a,e);a=c.container=new u(c,{ignorePlacement:!0,percentOfParentWidth:100},[n,{subnodeAdded:function(g){this.callSuper(g);g instanceof k&&(c._tabSliders.push(g),c.attachTo(g,
"updateLayout","selected"))},subnodeRemoved:function(g){if(g instanceof k){const l=c._tabSliders,h=l.indexOf(g);-1<h&&(c.detachFrom(g,"updateLayout","selected"),l.splice(h,1))}this.callSuper(g)}}]);a.layout=new q.SpacedLayout(a,{axis:"y",spacing:c.spacing,collapseParent:!0});c.attachTo(c,"updateLayout","height")},setSpacing:function(a){this.spacing!==a&&(this.spacing=a,this.layout?.setSpacing(a))},setDuration:function(a){this.duration=a},updateLayout:function(a,e){a=this._tabSliders;for(var c=a.length,
g=c,l=0,h=0,d=0;g;){var f=a[--g];f.visible&&(++d,f.selected?(l+=f.getMinimumExpandedHeight(),h+=f.getPreferredExpandedHeight()):(f=f.getCollapsedHeight(),l+=f,h+=f))}g=this.container.layout;d=g.inset+g.outset+g.spacing*(d-1);h+=d;g=this.height;l=l+d>g;d=h>g;f=this.duration;h-=g;0<e&&this.setDuration(e);for(g=c;g;)if(c=a[--g],c.visible)if(c.selected){let r;if(l)r=c.getMinimumExpandedHeight();else if(d){const v=c.getPreferredExpandedHeight(),m=c.getMinimumExpandedHeight();r=v-h;m>r?(h-=v-m,r=m):h=0}else r=
c.getPreferredExpandedHeight();c.expand(r)}else c.collapse();0<e&&this.setDuration(f)}})})(myt);
(q=>{const w=k=>{const b=[];switch(k.tabContainer.location){case "top":b.push("TopLeft","TopRight");break;case "bottom":b.push("BottomLeft","BottomRight");break;case "left":b.push("TopLeft","BottomLeft");break;case "right":b.push("TopRight","BottomRight")}b.forEach(a=>{k["setRounded"+a+"Corner"](k.cornerRadius||0)})},u=q.Tab=new JS.Class("Tab",q.SimpleTextButton,{include:[q.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(k,b){b.tabId??(b.tabId=q.generateGuid());b.tabContainer??(b.tabContainer=
k);let a;b.selected&&(a=!0,delete b.selected);b.inset??(b.inset=u.INSET);b.outset??(b.outset=u.OUTSET);b.selectedColor??(b.selectedColor="#fff");b.hoverColor??(b.hoverColor="#eee");b.activeColor??(b.activeColor="#aaa");b.readyColor??(b.readyColor="#ccc");b.labelTextSelectedColor??(b.labelTextSelectedColor="#333");b.height??(b.height=24);b.focusIndicator??(b.focusIndicator=!1);b.cornerRadius??(b.cornerRadius=6);this.callSuper(k,b);a&&this.tabContainer.select(this);w(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(k){this.tabId=k},setTabContainer:function(k){this.tabContainer=k},setSelectedColor:function(k){this.selectedColor=k},setLabelTextColor:function(k){this.labelTextColor=k},setCornerRadius:function(k){this.cornerRadius=k;this.inited&&w(this)},setLabelTextSelectedColor:function(k){this.labelTextSelectedColor=k;this.inited&&this.selected&&this.textView.setTextColor(k)},setSelected:function(k){this.callSuper(k);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),n=q.TabContainer=new JS.Module("TabContainer",{include:[q.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(k,b){this.__tabs=[];b.spacing??(b.spacing=n.SPACING);b.inset??(b.inset=n.INSET);b.location??(b.location="top");b.itemSelectionId??
(b.itemSelectionId="tabId");b.maxSelected??(b.maxSelected=1);this.callSuper(k,b);this.layout=new q.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(k){this.location=k},setSpacing:function(k){this.spacing!==k&&(this.spacing=k,this.layout?.setSpacing(k))},setInset:function(k){this.inset!==k&&(this.inset=k,this.layout?.setInset(k))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(k){this.callSuper(k);if(k.isA(u))switch(this.__tabs.push(k),this.location){case "top":k.setValign("bottom");break;case "bottom":k.setValign("top");break;case "left":k.setAlign("right");break;case "right":k.setAlign("left")}},subnodeRemoved:function(k){if(k.isA(u)){const b=this.__tabs,a=b.indexOf(k);-1<a&&b.splice(a,1)}this.callSuper(k)}})})(myt);
(q=>{const w=JS.Class,u=Math.min,n=Array.isArray,k=q.global.keys,b=q.SizeToDom;var a=q.View,e=q.Disableable;const c=q.Button.FOCUS_SHADOW,g=(f,r,v)=>{f[v]!==r&&(f[v]=r,f.getIDS()[v]=r+"px",f.inited&&(f.fireEvent(v,r),f.sizeViewToDom()))},l=(f,r,v)=>{f[r]!==v&&(f.getIDE()[r]=f[r]=v,f.inited&&f.fireEvent(r,v))},h=q.NativeInputWrapper=new w("NativeInputWrapper",a,{include:[e,q.InputObservable],initNode:function(f,r){r.tagName??(r.tagName="input");r.focusable??(r.focusable=!0);this.callSuper(f,r);this.addDomClass("mytNativeInput")},
createOurDomElement:function(f){f=this.callSuper(f);this.inputType&&((n(f)?f[1]:f).type=this.inputType);return f},setDisabled:function(f){this.disabled!==f&&(this.getIDE().disabled=f,this.callSuper(f))},setValue:function(f){this.value!==f&&(this.value=f,this.setDomValue(f),this.inited&&this.fireEvent("value",f))},getDomValue:function(){return this.getIDE().value},setDomValue:function(f){const r=this.getIDE();r.value!==f&&(r.value=f)}}),d=q.InputSelectOption=new w("InputSelectOption",a,{include:[e,
q.Selectable],createOurDomElement:f=>document.createElement("option"),setSelected:function(f){f=this.valueFromEvent(f);const r=this.getIDE();r.selected!==f&&(r.selected=f)},setDisabled:function(f){this.disabled!==f&&(this.getIDE().disabled=f,this.callSuper(f))},setValue:function(f){l(this,"value",f)},setLabel:function(f){this.label!==f&&(this.getIDE().textContent=this.label=f,this.inited&&this.fireEvent("label",f))},isSelected:function(){return this.getIDE().selected},canSelect:function(f){return!this.disabled&&
!this.getIDE().selected&&this.parent===f},canDeselect:function(f){return!this.disabled&&this.getIDE().selected&&this.parent===f}});a=q.BaseInputText=new w("BaseInputText",h,{include:[q.TextSupport],initNode:function(f,r){r.bgColor??(r.bgColor="transparent");r.spellcheck??(r.spellcheck=!1);this.callSuper(f,r);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(f){this.callSuper(f);this.setValue(f)},
setSpellcheck:function(f){l(this,"spellcheck",f)},setMaxLength:function(f){l(this,"maxLength",null==f||0>f?void 0:f)},setAllowedChars:function(f){this.allowedChars=f},setPlaceholder:function(f){l(this,"placeholder",f)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(c)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(f){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(f){const r=
f.value,v=this.allowedChars;v&&!v.includes(q.KeyObservable.getKeyFromEvent(f))&&r.preventDefault();this.filterInputPress(r)},filterInput:f=>f,filterInputPress:f=>{},__syncToDom:function(f){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const f=document.selection.createRange();f.moveStart("character",-this.getDomValue().length);return f.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(f,r){if(null==r||f===r){if(this.getCaretPosition()===
f)return;r=f}var v=this.getIDE();v.setSelectionRange?v.setSelectionRange(f,r):v.createTextRange&&(v=v.createTextRange(),v.collapse(!0),v.moveEnd("character",r),v.moveStart("character",f),v.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const f=this.getIDE();return{start:f.selectionStart,startElem:f,end:f.selectionEnd,endElem:f}},setSelection:function(f){f&&
this.setCaretPosition(f.start,f.end)},saveSelection:function(f){this._selRange=f||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}});e=q.InputText=new w("InputText",a,{include:[q.SizeHeightToDom],initNode:function(f,r){this.inputType=!0===r.password?"password":"text";this.callSuper(f,r);this.setCaretToEnd()},setPassword:function(f){this.set("password",f,!0);this.inited&&(this.getIDE().type=f?"password":"text")}});q.EditableText=new w("EditableText",
a,{include:[b],initNode:function(f,r){r.tagName??(r.tagName="div");r.inputType=null;r.whiteSpace??(r.whiteSpace="pre");r.contentEditable??(r.contentEditable=!0);this.callSuper(f,r);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(f){g(this,f,"minWidth")},setMinHeight:function(f){g(this,f,"minHeight")},setPadding:function(f){this.setPaddingTop(f);this.setPaddingRight(f);
this.setPaddingBottom(f);this.setPaddingLeft(f)},setPaddingTop:function(f){g(this,f,"paddingTop")},setPaddingRight:function(f){g(this,f,"paddingRight")},setPaddingBottom:function(f){g(this,f,"paddingBottom")},setPaddingLeft:function(f){g(this,f,"paddingLeft")},setContentEditable:function(f){l(this,"contentEditable",f)},filterInputPress:function(f){const r=this.maxLength;0<=r&&this.getCharacterCount()===r&&f.preventDefault();this.callSuper(f)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(f){const r=this.getIDE();r.innerHTML!==f&&(r.innerHTML=f,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(f){q.KeyObservable.isEnterKeyEvent(f)&&(f.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(f){this.callSuper(f);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(f,r){if(null==r||f===r){if(this.getCaretPosition()===f)return;r=f}this.saveSelection({start:f,startElem:this.getIDE().firstChild,end:r,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(f){this.saveSelection();return!0},getSelection:function(){let f;if(window.getSelection){const r=window.getSelection();if(0<r.rangeCount){if(r.extentNode===
this.getIDE())return;f=r.getRangeAt(0)}}else document.selection&&(f=document.selection.createRange());return{start:f?f.startOffset:0,startElem:f?f.startContainer:this.getIDE().firstChild,end:f?f.endOffset:0,endElem:f?f.endContainer:this.getIDE().firstChild}},setSelection:function(f){if(f){const r=f.startElem,v=f.endElem;if(r&&r.parentNode&&v&&v.parentNode){const m=document.createRange();m.setStart(r,u(f.start,r.length));m.setEnd(v,u(f.end,v.length));window.getSelection?(f=window.getSelection(),0<
f.rangeCount&&f.removeAllRanges(),f.addRange(m)):document.selection&&m.select()}}}});q.InputTextArea=new w("InputTextArea",a,{initNode:function(f,r){r.tagName??(r.tagName="textarea");r.inputType=null;r.resize??(r.resize="none");r.wrap??(r.wrap="soft");this.callSuper(f,r)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(f){const r=this;r.resize!==f&&(f=r.resize=r.getIDS().resize=f||"none",r.inited&&r.fireEvent("resize",f),"none"!==f&&(r.__resizeObserver??
(r.__resizeObserver=new ResizeObserver(()=>{r.doResize()}))).observe(r.getIDE()))},setWrap:function(f){l(this,"wrap",f)},doResize:function(){const f=this.resize;"both"!==f&&"horizontal"!==f||b.sizeWidth(this);"both"!==f&&"vertical"!==f||b.sizeHeight(this)}});q.ComboBox=new w("ComboBox",e,{include:[q.Activateable,q.KeyActivation,q.ListViewAnchor],initNode:function(f,r){this.filterItems=!0;r.activationKeys??(r.activationKeys=[k.CODE_ENTER,k.CODE_ESC,k.CODE_ARROW_UP,k.CODE_ARROW_DOWN]);r.bgColor??(r.bgColor=
"#fff");r.borderWidth??(r.borderWidth=1);r.borderStyle??(r.borderStyle="solid");r.floatingAlignOffset??(r.floatingAlignOffset=r.borderWidth);r.fullItemConfig??(r.fullItemConfig=[]);r.listViewAttrs={...r.listViewAttrs,maxHeight:r.listViewAttrs?.maxHeight??99};this.callSuper(f,r)},setFullItemConfig:function(f){this.fullItemConfig=f},setFilterItems:function(f){this.filterItems=f},__syncToDom:function(f){const r=this.value;this.callSuper(f);r!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(f){const r=
this.getFloatingPanel(f);if(r){let m;if(this.filterItems){m=[];var v=this.value;v=null==v?"":(""+v).toLowerCase();const y=this.fullItemConfig,C=y.length;for(let F=0;C>F;){const H=y[F++],A=H.attrs.text.toLowerCase(),t=A.indexOf(v);0===t?A!==v&&m.push(H):0<t&&m.push(H)}}else m=this.fullItemConfig;0<m.length?(r.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(m),this.callSuper(f)):this.hideFloatingPanel(f)}},doItemActivated:function(f){this.setValue(null==f.value?f.text:f.value);this.callSuper(f)},
doActivated:function(){this.toggleFloatingPanel()}});q.InputSelect=new w("InputSelect",h,{include:[b],initNode:function(f,r){r.tagName??(r.tagName="select");r.inputType=null;r.multiple??(r.multiple=!1);r.size??(r.size=r.multiple?4:1);this.callSuper(f,r);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(f){l(this,"multiple",f)},setSize:function(f){l(this,"size",f)},setOptions:function(f){this.destroyAllOptions();n(f)&&f.forEach(r=>{this.addOption(r)})},getOptions:function(){return this.getSubviews().slice()},
setValue:function(f){n(f)&&q.areArraysEqual(f,this.value)||this.value===f||(this.value=f,this.inited&&this.fireEvent("value",f))},subviewAdded:function(f){f instanceof d||(q.dumpStack("Subview unsupported. Destroying it"),f.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(c)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(f=>f.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(f=>
f.value)},getOptionForValue:function(f){return this.getOptions().find(r=>r.value===f)},addOption:function(f){return new d(this,f)},destroyAllOptions:function(){this.getOptions().forEach(f=>{f.destroy()})},destroyOptionWithValue:function(f){if(f=this.getOptionForValue(f))if(f.destroy(),f.destroyed)return!0;return!1},deselectAll:function(){let f=!1;this.getOptions().forEach(r=>{r.isSelected()&&(r.setSelected(!1),f=!0)});f&&this.__doChanged()},selectValues:function(f){(n(f)?f:[f]).forEach(r=>{this.selectValue(r)})},
selectValue:function(f){this.select(this.getOptionForValue(f))},select:function(f){f&&f.canSelect(this)&&(f.setSelected(!0),this.__syncToDom())},deselectValue:function(f){this.deselect(this.getOptionForValue(f))},deselect:function(f){f&&f.canDeselect(this)&&(f.setSelected(!1),this.__syncToDom())},__doChanged:function(f){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(q=>{const w=JS.Module,u=Math.round;var n=q.ValueComponent=new w("ValueComponent",{initNode:function(b,a){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(b,a)},setValueFilter:function(b){this.valueFilter=b;this.inited&&b&&this.setValue(this.value)},setValue:function(b){this.valueFilter&&(b=this.valueFilter(b));this.value!==b&&(this.value=b,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(b,a){const e=this.valueFilter;
this.setValueFilter(e?"last"===a?c=>b(e(c)):c=>e(b(c)):b)}});const k=q.RangeComponent=new w("RangeComponent",{include:[n],setLowerValue:function(b){this.setValue({lower:b,upper:this.value&&void 0!==this.value.upper?this.value.upper:b})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(b){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:b,upper:b})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(b){if(b){var a=
this.value;const g=a?a.lower:void 0;a=a?a.upper:void 0;this.valueFilter&&(b=this.valueFilter(b));if(b.lower!==g||b.upper!==a){var e;(e=b).lower??(e.lower=b.upper);var c;(c=b).upper??(c.upper=b.lower);void 0!==b.lower&&void 0!==b.upper&&b.lower>b.upper&&(e=b.lower,b.lower=b.upper,b.upper=e);this.value=b;this.inited&&(this.fireEvent("value",this.getValue()),b.lower!==g&&this.fireEvent("lowerValue",b.lower),b.upper!==a&&this.fireEvent("upperValue",b.upper))}}else this.callSuper(b)},getValueCopy:function(){const b=
this.value;return{lower:b.lower,upper:b.upper}}});n=q.BoundedValueComponent=new w("BoundedValueComponent",{include:[n],initNode:function(b,a){const e=this;e.appendToEarlyAttrs("snapToInt","minValue","maxValue");a.snapToInt??(a.snapToInt=!0);a.valueFilter||(a.valueFilter=c=>{var g=e.maxValue;if(null!=g&&c>g)return g;g=e.minValue;return null!=g&&c<g?g:c});e.callSuper(b,a)},setSnapToInt:function(b){this.snapToInt!==b&&(this.snapToInt=b,this.inited&&(this.fireEvent("snapToInt",b),b&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(b){this.snapToInt&&null!=b&&(b=u(b));if(this.minValue!==b){const a=this.maxValue;null!=a&&b>a&&(b=a);this.minValue!==b&&(this.minValue=b,this.inited&&(this.fireEvent("minValue",b),this.setValue(this.value)))}},setMaxValue:function(b){this.snapToInt&&null!=b&&(b=u(b));if(this.maxValue!==b){const a=this.minValue;null!=a&&b<a&&(b=a);this.maxValue!==b&&(this.maxValue=b,this.inited&&(this.fireEvent("maxValue",b),this.setValue(this.value)))}},
setValue:function(b){this.callSuper(this.snapToInt&&null!=b&&!isNaN(b)?u(b):b)}});q.BoundedRangeComponent=new w("BoundedRangeComponent",{include:[n,k],initNode:function(b,a){const e=this;a.valueFilter||(a.valueFilter=c=>{if(c){const g=e.maxValue,l=e.minValue;null!=g&&c.upper>g&&(c.upper=g);null!=l&&c.lower<l&&(c.lower=l)}return c});e.callSuper(b,a)},setValue:function(b){this.snapToInt&&null!=b&&(null==b.lower||isNaN(b.lower)||(b.lower=u(b.lower)),null==b.upper||isNaN(b.upper)||(b.upper=u(b.upper)));
this.callSuper(b)}})})(myt);
(q=>{const w=u=>{const n=u.label??"";u.setText('<i class="'+("solid"===(u.checkboxStyle??"outline")?"fas":"far")+" fa-"+(u.isChecked()?"check-":"")+'square"></i>'+(0<n.length?" ":"")+n)};q.Checkbox=new JS.Class("Checkbox",q.Text,{include:[q.SimpleButtonStyle,q.ValueComponent],initNode:function(u,n){this.appendToEarlyAttrs("userUnselectable");n.value??(n.value=!1);n.focusIndicator??(n.focusIndicator=!1);n.checkboxStyle??(n.checkboxStyle="outline");n.activeColor??(n.activeColor="inherit");n.hoverColor??
(n.hoverColor="inherit");n.readyColor??(n.readyColor="inherit");this.callSuper(u,n);q.FontAwesome.registerForNotification(this);w(this)},setValue:function(u){this.value!==u&&(this.callSuper(u),this.inited&&w(this))},setLabel:function(u){this.label!==u&&(this.set("label",u,!0),this.inited&&w(this))},setCheckboxStyle:function(u){this.checkboxStyle!==u&&(this.set("checkboxStyle",u,!0),this.inited&&w(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(u,n=1){this.setOpacity(n);this.setTextColor(u)}})})(myt);
(q=>{let w;const u=JS.Class,n=JS.Module,k=q.global,b=k.focus,a=k.keys,e=q.KeyObservable,c={},g=(t,p)=>{if(t){const x=t.id;t.id?p(x):q.dumpStack("No ID")}else q.dumpStack("No processor")},l=t=>{g(t,p=>{c[p]=t})},h=t=>{const p=q.BAG.getGroup("selected",t.groupId);if(p){const x=p.getNodes();t=t.value;let z=x.length;for(;z;){const D=x[--z];if(D.optionValue===t){p.setTrue(D);break}}}},d=t=>{if(t.groupId){const p=q.BAG.getGroup("selected",t.groupId);p&&t.syncTo(p,"__syncValue","trueNode")}},f=(t,p)=>{const x=
[];t.__v?.forEach(z=>{p=z.isFormValid(t,null,x)&&p});t.setErrorMessages(x);t.setIsValid(p);return p},r=(t,p,x)=>{t.__vp?.forEach(z=>{z[x]&&(p=z.process(p))});return p},v=q.ValueProcessor=new u("ValueProcessor",{initialize:function(t,p,x,z){this.id=t;this.runForDefault=!!p;this.runForRollback=!!x;this.runForCurrent=!!z},process:t=>t}),m=q.ToNumberValueProcessor=new u("ToNumberValueProcessor",v,{process:t=>{if(null==t||""===t||"-"===t)return t;const p=Number(t);return isNaN(p)?t:p}}),y=q.TrimValueProcessor=
new u("TrimValueProcessor",v,{initialize:function(t,p,x,z,D){this.callSuper(t,p,x,z);this.trim=D},process:function(t){t+="";switch(this.trim){case "start":case "left":return t.trimStart();case "end":case "right":return t.trimEnd();default:return t.trim()}}}),C=q.UndefinedValueProcessor=new u("UndefinedValueProcessor",v,{initialize:function(t,p,x,z,D){this.callSuper(t,p,x,z);this.defaultValue=D},process:function(t){return void 0===t?this.defaultValue:t}}),F=q.Form=new n("Form",{initNode:function(t,
p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(t,p);this.form?.isA(F)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(F)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(t){this.set("errorMessages",t,!0)},getFullId:function(){const t=[this.id];let p=this.form;for(;p&&p.id;)t.unshift(p.id),p=p.form;return t.join(".")},setId:function(t){if(this.id!==t){const p=this.id;this.id=t;(t=this.form)&&this.inited&&
(t.removeSubForm(p),t.addSubForm(this))}},setForm:function(t){if(this.form!==t){const p=this.form;this.form=t;p?.removeSubForm(this.id);this.inited&&t?.addSubForm(this)}},setIsValid:function(t){this.isValid=t;this.inited&&this.fireEvent("isValid",t);const p=this.form;p&&!this._lockCascade&&(t?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(t){if(this.isChanged!==t){this.isChanged=t;this.inited&&this.fireEvent("isChanged",t);const p=this.form;p&&!this._lockCascade&&(t?p.notifySubFormChanged():
p.verifyChangedState(this))}},setValidators:function(t){let p=t.length;for(;p;){const x=t[--p];"string"===typeof x&&(t[p]=k.validators.getValidator(x),t[p]||t.splice(p,1))}this.__v=t},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(H))return this.value;const t={},p=this.__sf;for(const x in p)t[x]=p[x].getValue();return t},setValue:function(t){this.callSuper?.(t);if("object"===typeof t&&!this.isA(H))for(const p in t){const x=this.getSubForm(p);x?t[p]=x.setValue(t[p]):console.warn("ID in setValue for missing subform",
p)}this.form?.notifyValueChanged(this);return t},getDefaultValue:function(){const t={};let p=this.__sf;for(const x in p)t[x]=p[x].getDefaultValue();return t},setDefaultValue:function(t){if("object"===typeof t)for(const p in t){const x=this.getSubForm(p);x?t[p]=x.setDefaultValue(t[p]):console.warn("ID in setDefaultValue for missing subform",p)}return t},getRollbackValue:function(){const t={},p=this.__sf;for(const x in p)t[x]=p[x].getRollbackValue();return t},setRollbackValue:function(t){if("object"===
typeof t)for(const p in t){const x=this.getSubForm(p);x?t[p]=x.setRollbackValue(t[p]):console.warn("ID in setRollbackValue for missing subform",p)}return t},addAccelerator:function(t,p){this.__acc[t]=p},removeAccelerator:function(t){delete this.__acc[t]},invokeAccelerator:function(t,p){this.__acc[t]?.call(this,p??null)},addValidator:function(t){t&&this.__v.push(t)},removeValidator:function(t){if(t){const p=this.__v;let x=p.length;for(;x;){const z=p[--x];if(z.id===t)return p.splice(x,1),z}}},getRootForm:function(){return this.form?
this.form.getRootForm():this},addSubForm:function(t){const p=t.id;null!=this.getSubForm(p)?console.warn("ID in use for subform, add aborted",p,t):(t.setForm(this),this.__sf[p]=t,t.isChanged&&this.notifySubFormChanged(),t.isValid||this.notifySubFormInvalid())},removeSubForm:function(t){const p=this.getSubForm(t);p&&(p.setForm(null),delete this.__sf[t],this.verifyChangedState(),this.verifyValidState());return p},getSubForm:function(t){return this.__sf[t]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(t){t&&
this.doValidation();const p=[];(function D(z){if(z.isA(H))z.isValid||p.push(z.getFullId());else{z=z.getSubForms();for(const I in z)D(z[I])}})(this);return p},getAllErrorMessages:function(){const t=this.__sf;let p=(this.errorMessages??[]).slice();for(const x in t)p.push(...t[x].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(t){const p=this.__sf;let x=!0;for(const z in p){const D=p[z];D!==t&&(x=D.isValid&&x)}return f(this,x)},doValidation:function(){const t=
this.__sf;let p=!0;for(const x in t)p=t[x].doValidation()&&p;this._lockCascade=!0;p=f(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(t){this.form?.notifyValueChanged(t)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(t){const p=this.__sf;let x=!1;for(const z in p){const D=p[z];D!==t&&(x=D.isChanged||x)}this.setIsChanged(x);return x},setup:function(t,p,x){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);
this._lockCascade=!1;t??={};p??={};x??={};const z=this.__sf;for(const D in z)z[D].setup(t[D],p[D],x[D])},resetForm:function(){this._lockCascade=!0;const t=this.__sf;for(const p in t)t[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const t=this.__sf;for(const p in t)t[p].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const t=
{},p=this.__sf;for(const x in p){const z=p[x];z.isChanged&&(t[x]=z.getChangedValue())}return t}}),H=q.FormElement=new n("FormElement",{include:[F],initNode:function(t,p){this.__vp=[];this.callSuper(t,p)},getValue:function(){return r(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(t){void 0===t&&(t=this.getRollbackValue());this.value!==t&&(this.callSuper(t),this.verifyChangedState());return t},getDefaultValue:function(){return r(this,this.defaultValue,"runForDefault")},
setDefaultValue:function(t){this.defaultValue!==t&&(this.defaultValue=t,this.inited&&this.fireEvent("defaultValue",t),this.verifyChangedState());return t},getRollbackValue:function(){return r(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(t){void 0===t&&(t=this.getDefaultValue());this.rollbackValue!==t&&(this.rollbackValue=t,this.inited&&this.fireEvent("rollbackValue",t),this.verifyChangedState());return t},setValueProcessors:function(t){let p=t.length;for(;p;){const x=t[--p];
"string"===typeof x&&(t[p]=c[x],t[p]||t.splice(p,1))}this.__vp=t},addValueProcessor:function(t){this.__vp.push(t)},removeValueProcessor:function(t){if(t){const p=this.__vp;let x=p.length;for(;x;){const z=p[--x];if(z.id===t)return p.splice(x,1),z}}},addSubForm:t=>{q.dumpStack("addSubForm unsupported on FormElement")},getSubForm:t=>{q.dumpStack("getSubForm unsupported on FormElement")},removeSubForm:t=>{q.dumpStack("removeSubForm unsupported on FormElement")},verifyChangedState:function(t){t=this.getValue()!==
this.getRollbackValue();this.setIsChanged(t);return t},setup:function(t,p,x){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(t);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(x)},resetForm:function(){this._lockCascade=!0;const t=this.getDefaultValue();this.setRollbackValue(t);this.setValue(t);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=
!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),A=q.FormInputTextMixin=new n("FormInputTextMixin",{include:[H,q.UpdateableUI],initNode:function(t,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";p.bgColor??(p.bgColor=
"#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(t,p);this.addValueProcessor(w);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(t){this.validateWhen=t},setAcceleratorScope:function(t){this.acceleratorScope=t},setErrorColor:function(t){this.errorColor=t},setActionRequiredColor:function(t){this.actionRequiredColor=
t},setNormalColor:function(t){this.normalColor=t},setIsChanged:function(t){this.callSuper(t);this.inited&&this.updateUI()},setIsValid:function(t){this.callSuper(t);this.inited&&this.updateUI()},setValue:function(t){t=this.callSuper(t);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return t},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(t){e.isEnterKeyEvent(t)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(t){e.isEscKeyEvent(t)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const t=this.validateWhen;"blur"!==t&&"blurWithKeyFix"!==t||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
q.RootForm=new n("RootForm",{include:[F],initNode:function(t,p){this.callSuper(t,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:t=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});q.FormCheckbox=new u("FormCheckbox",q.Checkbox,{include:[H],initNode:function(t,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(t,p)}});q.FormComboBox=new u("FormComboBox",q.ComboBox,{include:[H,q.UpdateableUI],initNode:function(t,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(t,p);this.addValueProcessor(w);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(t){this.validateWhen=t},setAcceleratorScope:function(t){this.acceleratorScope=t},setErrorColor:function(t){this.errorColor=
t},setActionRequiredColor:function(t){this.actionRequiredColor=t},setNormalColor:function(t){this.normalColor=t},setIsChanged:function(t){this.callSuper(t);this.inited&&this.updateUI()},setIsValid:function(t){this.callSuper(t);this.inited&&this.updateUI()},setValue:function(t){t=this.callSuper(t);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return t},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(t){this._isShown=!0},notifyPanelHidden:function(t){this._isShown=!1},doActivationKeyDown:function(t,p){t!==a.CODE_ESC||this._isShown?this.callSuper(t,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(t){t!==
a.CODE_ENTER||this._isShown?this.callSuper(t):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const t=this.validateWhen;"blur"!==t&&"blurWithKeyFix"!==t||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});q.FormEditableText=new u("FormEditableText",q.EditableText,{include:[A],__hndlKeyDown:function(t){"nowrap"===this.whitespace&&this.callSuper(t)}});q.FormInputText=new u("FormInputText",
q.InputText,{include:[A]});q.FormInputTextArea=new u("FormInputTextArea",q.InputTextArea,{include:[A],__hndlKeyDown:t=>{}});q.FormInputSelect=new u("FormInputSelect",q.InputSelect,{include:[H],setValue:function(t){if(!this.__abortSetValue)return t=this.callSuper(t),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(t),this.__abortSetValue=!1,this.verifyValidState(),t}});q.FormRadioGroup=new u("FormRadioGroup",q.Node,{include:[q.ValueComponent,H],initNode:function(t,p){p.groupId??(p.groupId=
q.generateGuid());this.callSuper(t,p);void 0!==this.value&&h(this);d(this)},setValue:function(t){t=this.callSuper(t);this.inited&&h(this);return t},setGroupId:function(t){if(this.groupId!==t){if(this.groupId){const p=q.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=t;this.inited&&d(this)}},__syncValue:function(t){t=t.value;this.setValue(t?t.optionValue:null)}});q.UseOtherFieldIfEmptyValueProcessor=new u("UseOtherFieldIfEmptyValueProcessor",v,{initialize:function(t,
p,x,z,D){this.callSuper(t,p,x,z);this.otherField=D},process:function(t){return null==t||""===t?this.otherField.getValue():t}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){l(w=new C("undefToEmpty",!0,!0,!0,""));l(new m("toNumber",!0,!0,!0));l(new y("trimLeft",!0,!0,!0,"left"));l(new y("trimRight",!0,!0,!0,"right"));l(new y("trimBoth",!0,!0,!0,"both"));k.register("valueProcessors",this)},getValueProcessor:t=>c[t],register:l,unregister:t=>{g(t,p=>{c[p]&&delete c[p]})}})})(myt);
(q=>{const w=JS.Class,u=Math.round,n={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},k=(c,g)=>{c[g](c,"doDragOver","dragover",!1);c[g](c,"doDragEnter","dragenter",!1);c[g](c,"doDragLeave","dragleave",!1);c[g](c,"doDrop","drop",!1)},b=q.DragDropSupport=new JS.Module("DragDropSupport",{include:[q.DragDropObservable],initNode:function(c,g){this.callSuper(c,g);this.disabled||this.setupDragListeners()},setDisabled:function(c){this.disabled!==c&&
(this.getIDE().disabled=c,this.callSuper(c),this.inited&&(c?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){k(this,"attachToDom")},teardownDragListeners:function(){k(this,"detachFromDom")},doDragOver:c=>{},doDragEnter:c=>{},doDragLeave:c=>{},doDrop:function(c){this.handleFiles(c.value.dataTransfer.files,c)},handleFiles:function(c,g){if(void 0!==c){let l=c.length;for(;l;){const h=this.filterFiles(c[--l]);h&&this.handleDroppedFile(h,g)}}else q.dumpStack("No File API")},
filterFiles:c=>c,handleDroppedFile:(c,g)=>{}}),a=q.Uploader=new w("Uploader",q.View,{include:[b,q.Disableable,q.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(c,g)=>{if(void 0!==FileReader){const l=new FileReader;l.onload=g;l.readAsDataURL(c)}},isSameFile:(c,g)=>null!=c&&null!=g&&c.name===g.name&&c.type===g.type&&c.size===g.size,createFile:c=>{const g=(new q.URI(c)).file;return{name:g,serverPath:c,size:-1,type:n[q.getExtension(g)]}}},initNode:function(c,g){const l=this;l.files=
[];g.requestFileParam??(g.requestFileParam="file");g.maxFiles??(g.maxFiles=-1);l.callSuper(c,g);l.fileInput=new q.NativeInputWrapper(l,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:l.disabled,overflow:"hidden"},[q.SizeToParent,{initNode:function(h,d){this.inputType="file";this.callSuper(h,d);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<l.maxFiles},_hndlInput:function(h){l.handleFiles(this.getIDE().files,h)}}])},setValue:function(c){this.clearFiles();
c&&(Array.isArray(c)||(c=[c]),c.forEach(g=>{this.addFile(a.createFile(g))}));return this.callSuper?this.callSuper(c):c},getValue:function(){return this.value},setDisabled:function(c){this.callSuper(c);this.fileInput?.setDisabled(c)},setMaxFiles:function(c){this.maxFiles!==c&&(this.maxFiles=c,this.inited&&this.fireEvent("maxFiles",c),this.fileInput&&(this.fileInput.getIDE().multiple=1<c))},setUploadUrl:function(c){this.set("uploadUrl",c,!0)},setRequestFileParam:function(c){this.set("requestFileParam",
c,!0)},bringSubviewToFront:function(c){c===this.fileInput?this.callSuper(c):this.sendSubviewBehind(c,this.fileInput)},subviewAdded:function(c){this.callSuper(c);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(c,g){this.addFile(c)},filterFiles:function(c){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:c},uploadFiles:function(c,g){c??=this.uploadUrl;const l=this.files;let h=l.length;for(;h;)this.uploadFile(l[--h],c,g)},makeFetchOptionsForUpload:c=>
({method:"POST",body:c}),uploadFile:function(c,g,l){const h=this,d=new FormData;d.append(l??h.requestFileParam,c,c.name);q.doFetch(g??h.uploadUrl,h.makeFetchOptionsForUpload(d),!1,f=>{h.handleUploadSuccess(c,f)},f=>{h.handleUploadFailure(c,f)})},handleUploadSuccess:function(c,g){c[a.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(c,g);this.updateValueFromFiles()},handleUploadFailure:(c,g)=>{q.dumpStack("Upload failure:"+g.status+":"+g.message)},parseServerPathFromResponse:(c,g)=>null,addFile:function(c){this.files.push(c);
this.updateValueFromFiles();this.fireEvent("addFile",c)},removeFile:function(c){const g=this.files;let l=g.length;for(;l;)if(a.isSameFile(g[--l],c)){g.splice(l,1);this.updateValueFromFiles();this.fireEvent("removeFile",c);break}},updateValueFromFiles:function(){const c=[];var g=this.files;let l=g.length;for(;l;){const h=g[--l][a.FILE_ATTR_SERVER_PATH];h&&c.push(h)}g=c.length;this.value=1===g?c[0]:0===g?void 0:c;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const c=this.files;let g=c.length;for(;g;)this.removeFile(c[--g])}}),e=q.ImageUploader=new w("ImageUploader",a,{extend:{isImageFile:c=>/image/i.test(c.type)},initNode:function(c,g){g.maxFiles=1;this.callSuper(c,g)},setWidth:function(c){this.callSuper(c);this.inited&&this.updateImageSize()},setHeight:function(c){this.callSuper(c);this.inited&&this.updateImageSize()},filterFiles:function(c){if(e.isImageFile(c)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(c)}},addFile:function(c){const g=this,l=e.isImageFile(c);g.callSuper(c);const h=g.image=new q.Image(g,{useNaturalSize:!1,align:"center",valign:"middle"});h.file=c;const d=f=>{const r=new Image;r.onload=()=>{c.width=r.width;c.height=r.height;h&&!h.destroyed&&g.updateImage(c,h,r.src)};r.src=f};l?-1===c.size?d(c.serverPath):void 0!==FileReader&&e.isImageFile(c)&&a.readFile(c,f=>{d(f.target.result)}):-1===c.size?g.updateImage(c,h,c.serverPath):void 0!==FileReader&&a.readFile(c,f=>
{g.updateImage(c,h,f.target.result)})},scaleToFit:(c,g,l,h)=>l/h>c/g?[c,h*c/l]:[l*g/h,g],removeFile:function(c){this.callSuper(c);const g=this.getSubviews();let l=g.length;for(;l;){const h=g[--l];if(a.isSameFile(h.file,c)){h.destroy();break}}},handleDroppedFile:function(c,g){this.callSuper(c,g);this.uploadFile(c,this.uploadUrl)},updateImage:function(c,g,l){this.nativeWidth=c.width;this.nativeHeight=c.height;this.updateImageSize();g.setImageUrl(l)},updateImageSize:function(){const c=this.image;if(c&&
!c.destroyed){var g=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const l=u(g[0]);g=u(g[1]);c.setImageSize(l+"px "+g+"px");c.setWidth(l);c.setHeight(g)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(q=>{const w=(u,n,k,b)=>{k=k.bind(u);"y"!==u.axis&&(k(n,b,"x"),k(n,b,"boundsWidth"));"x"!==u.axis&&(k(n,b,"y"),k(n,b,"boundsHeight"));k(n,b,"visible")};q.SizeToChildren=new JS.Class("SizeToChildren",q.Layout,{initNode:function(u,n){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(u,n)},setAxis:function(u){this.axis!==u&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=u,this.startMonitoringAllSubviews(),this.fireEvent("axis",u),this.update()):this.axis=u)},setPaddingX:function(u){this.paddingX!==
u&&(this.paddingX=u,this.inited&&(this.fireEvent("paddingX",u),this.update()))},setPaddingY:function(u){this.paddingY!==u&&(this.paddingY=u,this.inited&&(this.fireEvent("paddingY",u),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const n=this.parent;if(!n.isBeingDestroyed){const k=this.subviews;var u=k.length;const b=this.axis,a=Math.max;let e,c;if("y"!==b){e=u;for(c=0;e;){const g=k[--e];g.visible&&(c=a(c,g.x+(0<g.boundsWidth?g.boundsWidth:0)))}n.setWidth(c+
this.paddingX)}if("x"!==b){e=u;for(c=0;e;)u=k[--e],u.visible&&(c=a(c,u.y+(0<u.boundsHeight?u.boundsHeight:0)));n.setHeight(c+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(u){w(this,u,this.attachTo,"update")},stopMonitoringSubview:function(u){w(this,u,this.detachFrom,"update")}})})(myt);
(q=>{let w=0;const u=JS.Class,n=q.SizeToParent,k=q.View,b=q.RootView,a=q.Dimmer=new u("Dimmer",k,{include:[n],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(c,g){const l=this;l.restoreFocus=!0;g.focusable=g.focusCage=!0;g.percentOfParentWidth??(g.percentOfParentWidth=100);g.percentOfParentHeight??(g.percentOfParentHeight=100);g.visible??(g.visible=!1);g.ignoreLayout??(g.ignoreLayout=!0);l.callSuper(c,g);l.overlay=new k(l,{ignorePlacement:!0,opacity:a.OPACITY,bgColor:a.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[n]);"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" ").forEach(h=>{l.attachDomObserver(l,"eatMouseEvent",h)});b.setupCaptureDrop(l)},destroy:function(){b.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(c){this.restoreFocus=c},eatMouseEvent:c=>!0,show:function(){const c=q.global.focus;this.prevFocus=c.focusedView??c.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(c){this.visible&&
(this.setVisible(!1),!c&&this.restoreFocus&&this.prevFocus?.focus())}}),e=q.ModalPanel=new u("ModalPanel",a,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>w,hasOpenModalPanels:()=>0<w},initNode:function(c,g){const l={name:"content",ignorePlacement:!0},h={...l,align:"center",valign:"middle"};this.defaultPlacement="content";g.sizingStrategy??(g.sizingStrategy="children");g.marginTop??(g.marginTop=e.MARGIN_TOP);g.marginLeft??
(g.marginLeft=e.MARGIN_LEFT);g.marginBottom??(g.marginBottom=e.MARGIN_BOTTOM);g.marginRight??(g.marginRight=e.MARGIN_RIGHT);g.paddingX??(g.paddingX=e.PADDING_X);g.paddingY??(g.paddingY=e.PADDING_Y);this.callSuper(c,g);switch(this.sizingStrategy){case "children":new q.SizeToChildren(new k(this,h),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new k(this,{...l,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[n]);break;case "basic":new k(this,h);break;default:new k(this,l)}},setSizingStrategy:function(c){this.sizingStrategy=c},setMarginTop:function(c){this.marginTop=c},setMarginLeft:function(c){this.marginLeft=c},setMarginBottom:function(c){this.marginBottom=c},setMarginRight:function(c){this.marginRight=c},setPaddingX:function(c){this.paddingX=c},setPaddingY:function(c){this.paddingY=c},
show:function(){this.callSuper();w++},hide:function(c){this.callSuper(c);w=Math.max(0,w-1)}})})(myt);
(q=>{const w=n=>{n[n.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},u=n=>{const k=n.size,b=n.getIDS();n.setWidth(k);n.setHeight(k);b.width=b.height=k-2*n.borderWidth+"px"};q.Spinner=new JS.Class("Spinner",q.View,{initNode:function(n,k){this.lateAttrs=["spinColor"];k.visible??(k.visible=!1);k.borderWidth??(k.borderWidth=5);k.borderColor??(k.borderColor="#fff");k.borderStyle??(k.borderStyle="solid");k.spinColor??(k.spinColor="#000");this.callSuper(n,k);this.getIDS().borderRadius="50%";u(this);
w(this)},setSize:function(n){this.size!==n&&(this.size=n,this.inited&&u(this))},setSpinColor:function(n){this.spinColor!==n&&(this.getIDS().borderTopColor=this.spinColor=n,this.inited&&this.fireEvent("spinColor",n))},setBorderWidth:function(n){this.borderWidth!==n&&(this.callSuper(n),this.inited&&u(this))},setVisible:function(n){this.visible!==n&&(this.callSuper(n),this.inited&&w(this))}})})(myt);
(q=>{const w=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),u=b=>{if(Array.isArray(b)){let a=b.length;if(0<a){b.unshift("fa");a++;b[1].startsWith("fa-")||(b[1]="fa-"+b[1]);3<=a&&(b[2]=w[b[2]]??"");if(3<a)for(let e=3;a>e;e++)b[e].startsWith("fa-")||(b[e]="fa-"+b[e]);return'<i class="'+b.join(" ")+'"></i>'}}q.dumpStack("Error making tag");console.error(b);return""},n=b=>{let a=b.properties;a=a?"string"===typeof a?a.split(" "):a.slice():[];a.unshift(b.icon,b.size);b.setHtml(u(a))},k=b=>{["Free 400","Free 900",
"Brands 400"].forEach(a=>{q.registerForFontNotification(b,"Font Awesome 5 "+a)})};q.FontAwesome=new JS.Class("FontAwesome",q.Markup,{extend:{makeTag:u,registerForNotification:k},initNode:function(b,a){this.size=0;this.icon="";this.callSuper(b,a);n(this);k(this)},setIcon:function(b){const a=this.icon;this.set("icon",b,!0);this.inited&&a!==b&&n(this)},setSize:function(b){const a=this.size;this.set("size",b,!0);this.inited&&a!==b&&n(this)},setProperties:function(b){this.properties=b;this.fireEvent("properties",
b);this.inited&&n(this)}});q.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(q=>{let w,u,n,k,b=0,a=0,e=0,c=255,g=[],l,h,d,f,r,v,m,y,C,F,H,A,t,p,x,z,D,I,K,J,N,Q,ca,Z,V;const P=JS.Class,R=q.View,da=q.Text,U=q.ModalPanel,ua=q.SizeToChildren,za=q.SpacedLayout,Aa=q.SelectionManager,qa=q.Color,Ba=q.LocalStorage,va=q.Button,na=q.TextButton,Ca=q.Draggable,oa=q.FontAwesome.makeTag,ha=Math.min,ia=Math.max,la=[1,"solid","#333"],Da=[1,"solid","#999"],wa=[1,"solid","#fff"],Ia=new P("DialogButton",na,{initNode:function(B,E){E.height??(E.height=17);E.paddingTop??(E.paddingTop=3);E.paddingLeft??
(E.paddingLeft=10);E.paddingRight??(E.paddingRight=10);E.activeColor??(E.activeColor="#bbb");E.hoverColor??(E.hoverColor="#ddd");E.readyColor??(E.readyColor="#ccc");E.domClass="mytButtonText";this.callSuper(B,E)}}),Ja=oa(["check"]),Fa=B=>{B.forEach(E=>{7===E?.length&&(E+="ff");Ea[E]=!0})},Ea={},Ka=new P("Swatch",R,{include:[va],initNode:function(B,E){const G=E.width=E.height=16;E.border=Da;E.domClass="mytCheckerboardPattern";const L=E.bgColor;this.callSuper(B,E);this.colorView=new R(this,{width:G,
height:G,bgColor:L});L===k&&(B=qa.makeColorFromHexString(k),new q.Text(this,{x:2,y:2,text:Ja,fontSize:"12px",textColor:382.5>B.red+B.green+B.blue?"#fff":"#000"}))},setBgColor:function(B){this.colorView?.setBgColor(B);this.setTooltip(B)},doActivated:function(){w.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(la)},drawReadyState:function(){this.setBorder(Da)}}),La=q.ColorPicker=new P("ColorPicker",R,{initNode:function(B,E){w=this;w._isReady=!1;let G=E.color??"transparent";
delete E.color;n=E.alphaChannel??!1;delete E.alphaChannel;l=E.palette??[];Fa(l);delete E.palette;u="transparent"===G;w.callSuper(B,E);h=new R(w,{width:160,height:170});new q.WrappingLayout(h,{spacing:4,lineSpacing:4});d=new R(w,{x:170,width:139,height:139,border:la},[Ca,{requestDragPosition:function(L,M){d.callSuper(d.x,d.y);const O=this.getPagePosition();a=parseFloat(ia(0,ha(1,(L+this.dragInitX-O.x)/this.width)));e=parseFloat(1-ia(0,ha(1,(M+this.dragInitY-O.y)/this.height)));u=!1;w.updateUI()}}]);
B=new R(d,{width:139,height:139});E=new R(B,{width:139,height:139});B.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";E.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";f=new R(E,{width:6,height:6,bgColor:"#000",border:wa,roundedCorners:4});r=new R(w,{x:315,y:30,width:24,height:109,border:la},[Ca,{requestDragPosition:function(L,M){this.callSuper(r.x,r.y);b=parseFloat(ia(0,ha(1,(M+this.dragInitY-this.getPagePosition().y)/this.height)));
u=!1;w.updateUI()}}]);r.getIDS().background="linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";v=new R(r,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new R(w,{x:315,width:24,height:24,border:la,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[va,{doActivated:()=>{w.setColor("transparent")}}]);B=146;n&&(C=new q.LabelSlider(w,{x:170,y:B,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(L,
M){M=L.value;if(null==M||isNaN(M))M=0;L.value=q.formatAsPercentage(M/255,0);this.callSuper(L,!0);c=M;w._isReady&&(u=!1,w.updateUI())}}]),B+=23);m=new q.InputText(w,{x:236,y:B,width:105,height:25,roundedCorners:3,textColor:"#333",border:la,maxLength:11,fontFamily:"monospace"});w.attachToDom(m,"_submitInput","blur");w.attachToDom(m,"_handleKeyDown","keydown");m.getIDS().paddingLeft="6px";B=new R(w,{x:170,y:B,width:60,height:23,border:la,domClass:"mytCheckerboardPattern"});new R(B,{width:30,height:23,
focusIndicator:!1,bgColor:G},[va,{doActivated:()=>{w.setColor(G)}}]);y=new R(B,{x:30,width:30,height:23});if(B=Ba.getItem("myt.default"))g=B.split(";"),Fa(g);w.setColor(G);w._isReady=!0},_handleKeyDown:B=>{q.KeyObservable.isEnterKeyEvent(B)&&w._submitInput()},_submitInput:()=>{w.setColor(m.value)},addToPalette:B=>{B&&"transparent"!==B&&!Ea[B]&&(g.unshift(B),g.length=ha(g.length,56),Ba.setItem("myt.default",g.join(";")))},setColor:B=>{const E=B&&"transparent"!==B;if(n){let G="ff";E&&7<B.length&&(G=
B.slice(7,9),B=B.slice(0,7));C.setValue(parseInt(G,16))}else E&&7<B.length&&(B=B.slice(0,7));E?(B=qa.makeColorFromHexString(B).getHSV(),b=B.h/360,a=B.s,e=B.v,u=!1):u=!0;w.updateUI()},getColor:()=>{if(u)return"transparent";let B="";n&&(B=c.toString(16),2>B.length&&(B="0"+B));return qa.makeColorFromHSV(360*b,100*a,100*e).getHtmlHexString()+B},updateUI:()=>{const B=!u;v.setVisible(B);f.setVisible(B);B&&(f.setX(ia(0,ha(1,a)*(d.width+2))-5),f.setY(ia(0,ha(1,1-e)*(d.height+2))-5),v.setY(b*(r.height-2)-
1));d.setBgColor(qa.makeColorFromHSV(360*b,100,100).getHtmlHexString());k=w.getColor();m.setValue(k);y.setBgColor(k);w.redrawPalette()},redrawPalette:q.debounce(()=>{const B=h.getSubviews();let E=B.length;for(;E;)B[--E].destroy();const G=new Set;l.push(...g);l.forEach(L=>{if(n||7===L.length)7===L.length&&(L+="ff"),G.has(L)||(new Ka(h,{bgColor:L}),G.add(L))})},50)}),xa=B=>{B=B.split(":");return[ia(0,ha(23,parseInt(B[0]))),ia(0,ha(60,parseInt(B[1])))]},Ga=B=>{B.deselectAll();B=B.getSubviews();let E=
B.length;for(;E;)B[--E].destroy()},Ha=new P("SelectableBtn",na,{include:[q.Selectable],setSelected:function(B){this.callSuper(B);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Ma=new P("TimeBtn",Ha,{initNode:function(B,E){E.width=A?175:49;this.callSuper(B,E)},doActivated:function(){this.callSuper();const B=this.text,E=xa(B);V.selectById(B);J.setHours(E[0]);J.setMinutes(E[1])}}),Na=new P("DayBtn",Ha,
{initNode:function(B,E){E.width=23;E.border=wa;this.callSuper(B,E)},setData:function(B){this.data=B},setIsAnotherMonth:function(B){this.isAnotherMonth=B},setIsToday:function(B){this.isToday=B},setIsSunday:function(B){this.isSunday=B},setIsSaturday:function(B){this.isSaturday=B},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();
const B=new Date(this.data);B.setHours(J.getHours());B.setMinutes(J.getMinutes());pa(B)}}),pa=B=>{B.setSeconds(0);B.setMilliseconds(0);var E=6>=p.length,G;if(E)for(G=7;G--&&!p.includes(B.getDay());)B.setDate(B.getDate()+1);J=B;const L=V.getODE().scrollTop;var M=new Date,O=M.getFullYear();G=M.getMonth();var T=M.getDate();M.getHours();M.getMinutes();const S=B.getFullYear(),aa=B.getMonth(),ra=B.getDate();var ea=B.getTime();M=B.getHours();B=B.getMinutes();const ka=(new Date(S,aa,1)).getDay()-t,ba=(new Date(S,
aa+1,0)).getDate(),ma=(new Date(S,aa,0)).getDate(),sa=new Date(S,aa,0),ta=new Date(S,aa+2,0),Oa=O==S&&G==aa;if(!A){Ga(Z);G=new Date(ea);const ja=7+t;O=F.days;Q.setText(S+" "+F.sep+" "+F.months[aa]);G.setMinutes(59);G.setHours(23);G.setSeconds(59);G.setDate(0);N.setVisible(null==x||x<G.getTime());G.setMinutes(0);G.setHours(0);G.setSeconds(0);G.setDate(1);G.setMonth(aa+1);ca.setVisible(null==z||z>G.getTime());for(G=0;7>G;G++)new da(Z,{width:23,height:20,textAlign:"center",text:O[(G+ja)%7],textColor:"#999"});
G=0;let fa=42;0>ka&&(G=-7,fa=35);O=new Date(ea);O.setHours(0);O.setMinutes(0);for(O.setSeconds(0);G<fa;G++){var X=G+1-ka;const ya=(G+ja)%7,Y=new Na(Z);ka>G?(Y.setText(ma+X),Y.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(ma+X)),Y.setIsAnotherMonth(!0),O.setDate(ma+X),O.setMonth(sa.getMonth()),O.setYear(sa.getFullYear())):G<ka+ba?(Y.setText(X),Y.setData(S+"/"+(aa+1)+"/"+X),O.setDate(X),O.setMonth(aa),O.setYear(S)):(Y.setText(X-ba),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(X-ba)),
Y.setIsAnotherMonth(!0),O.setDate(X-ba),O.setMonth(ta.getMonth()),O.setYear(ta.getFullYear()));E&&!p.includes(ya)?Y.setDisabled(!0):(0===ya?Y.setIsSunday(!0):6===ya&&Y.setIsSaturday(!0),X===ra&&(Z.select(Y),Y.focus()),Oa&&X===T&&Y.setIsToday(!0),X=new Date(O.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=x&&x>X.getTime()||null!=z&&z<O.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!H){E=60*I[0]+I[1];Ga(V);let [ja,fa]=D;for(O=new Date(ea);60*ja+fa<E;)T=new Ma(V,{text:("0"+ja).slice(-2)+
":"+("0"+fa).slice(-2)}),ja===M&&fa===B&&V.select(T),O.setHours(ja),O.setMinutes(fa),ea=O.getTime(),(null!=x&&x>ea||null!=z&&z<ea)&&T.setDisabled(!0),fa+=K,60<=fa&&(fa-=60,ja++);V.scrollYTo(L)}},Pa=q.DatePicker=new P("DatePicker",R,{initNode:function(B,E){const G={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...E.opt};delete E.opt;this.callSuper(B,E);F=G.locales[G.locale??
"en"];H=G.dateOnly;A=G.timeOnly;t=G.firstDayOfWeek;K=ia(5,ha(30,G.minuteInterval));p=G.allowedDays;Array.isArray(p)&&0!==p.length||(p=[0,1,2,3,4,5,6]);x=Date.parse(G.minDate);x=isNaN(x)?null:x;z=Date.parse(G.maxDate);z=isNaN(z)?null:z;D=xa(G.minTime);I=xa(G.maxTime);B=new R(this,{visible:!A});G.showTodayButton&&new na(B,{width:24,text:oa(["home"]),tooltip:F.today},[{doActivated:()=>{pa(new Date)}}]);N=new na(B,{width:24,x:28,text:oa(["chevron-left"]),tooltip:F.prevMonth},[{doActivated:()=>{const L=
(new Date(J.getFullYear(),J.getMonth(),0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()-1);pa(J);N.focus()}}]);Q=new da(B,{width:100,x:52,textAlign:"center"});ca=new na(B,{width:24,x:152,text:oa(["chevron-right"]),tooltip:F.nextMonth},[{doActivated:()=>{var L=(new Date(J.getFullYear(),J.getMonth()+1,0)).getDate();L<J.getDate()&&J.setDate(L);L=(new Date(J.getFullYear(),J.getMonth()+2,0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()+1);pa(J);ca.focus()}}]);Z=new R(this,
{y:25,width:175,height:175,visible:!A,maxSelected:1,itemSelectionId:"data"},[Aa]);new q.WrappingLayout(Z,{spacing:2,lineInset:2,lineSpacing:3});V=new R(this,{x:A?0:195,y:A?0:25,width:(A?175:49)+q.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!H,maxSelected:1,itemSelectionId:"text"},[Aa]);new za(V,{axis:"y",inset:1,spacing:3});this.setWidth(V.visible?V.x+V.width:Z.width);pa(G.current??new Date)},getPickedDate:()=>J}),W=q.Dialog=new P("Dialog",U,{extend:{RADIUS:12,BUTTON_CLASS:Ia,
SHADOW:[0,4,20,"#666"],BORDER:wa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",
titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(B,E){E.buttonClass??(E.buttonClass=W.BUTTON_CLASS);this.callSuper(B,E);B=this.content;B.setRoundedCorners(W.RADIUS);B.setBgColor(W.BGCOLOR);B.setBoxShadow(W.SHADOW);B.setBorder(W.BORDER);B.setFocusCage(!0);
this.makeCloseButton(B)},setButtonClass:function(B){this.buttonClass=B},setCallbackFunction:function(B){this.callbackFunction=B},makeButton:function(B,E){const G=this;return new G.buttonClass(B,E,[{doActivated:function(){G.doCallback(this)}}])},makeCloseButton:function(B){return B.closeBtn=this.makeButton(B,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),
tooltip:"Close Dialog."})},hide:function(B){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(B)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const B=this.content,E=B.sizeToChildren,G=B.getSubviews();let L=G.length;for(;L;){const M=G[--L];"closeBtn"!==M.name&&M.destroy()}B.setVisible(!0);this.overlay.setBgColor(q.Dimmer.COLOR);this.setCallbackFunction();E.setPaddingY(U.PADDING_Y);E.setPaddingX(U.PADDING_X);B.setRoundedCorners(W.RADIUS);
B.setBgColor(W.BGCOLOR);B.setBoxShadow(W.SHADOW);B.setBorder(W.BORDER)},doCallback:function(B){const E=this.callbackFunction;E&&E.call(this,B.name)||this.hide()},showBlank:function(B){this.destroyContent();this.content.setVisible(!1);B?.bgColor&&this.overlay.setBgColor(B.bgColor);this.show()},showMessage:function(B,E,G){const L=this.content,M=L.closeBtn;G={...W.WRAP_TEXT_DEFAULTS,...G};this.destroyContent();this.setCallbackFunction(E);B=L.msg=new da(L,{text:B,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,
fontWeight:G.fontWeight,x:null==G.msgX?U.PADDING_X:G.msgX,y:null==G.msgY?U.PADDING_Y:G.msgY,width:G.width});G.titleText&&(this.setupTitle(L,G.titleText),B.setY(B.y+24));this.show();!1===G.showClose?M.setVisible(!1):(M.setVisible(!0),M.focus())},showSimple:function(B,E,G,L){G=G??{};const M=this.content,O=M.closeBtn,T=G.maxContainerHeight;this.destroyContent();G.bgColor&&M.setBgColor(G.bgColor);G.roundedCorners&&M.setRoundedCorners(G.roundedCorners);G.boxShadow&&M.setBoxShadow(G.boxShadow);G.border&&
M.setBorder(G.border);M.sizeToChildren.setPaddingX(1);this.setCallbackFunction(E);E=M.contentContainer=new R(M,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){S>T&&(S=T);this.callSuper(S)}}]);B.call(this,E);new ua(E,{axis:"both"});this.show();O.setVisible(!0);O.focus();G.titleText&&(this.setupTitle(M,G.titleText),E.setY(this.header.height+1));E.initialFocus?.focus();L?.(this)},showConfirm:function(B,E,G){G={...W.CONFIRM_DEFAULTS,...G};this.showMessage(B,E,G);this.setupFooterButtons(this.content.msg,
G)},showContentConfirm:function(B,E,G,L){G={...W.CONFIRM_DEFAULTS,...G};const M=this.content,O=M.closeBtn,T=G.maxContainerHeight;this.destroyContent();M.sizeToChildren.setPaddingX(1);this.setCallbackFunction(E);E=M.contentContainer=new R(M,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){this.callSuper(S>T?T:S)}}]);B.call(this,E);new ua(E,{axis:"both"});this.show();O.setVisible(!0);O.focus();this.setupTitle(M,G.titleText);E.setY(this.header.height+1);this.setupFooterButtons(E,G);E.initialFocus?.focus();
L?.(this)},showSpinner:function(B,E){const G=this.content;E={...W.NO_WRAP_TEXT_DEFAULTS,...E};this.destroyContent();const L=this.spinner=new q.Spinner(G,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==E.msgY?U.PADDING_Y:E.msgY});B&&new da(G,{text:B,whiteSpace:E.whiteSpace,wordWrap:E.wordWrap,fontWeight:E.fontWeight,x:null==E.msgX?U.PADDING_X:E.msgX,y:L.y+L.size+U.PADDING_Y,width:E.width});this.show();G.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(B,E){const G=this,
L=G.content,M=L.closeBtn;E={...W.COLOR_PICKER_DEFAULTS,...E};G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":B.call(G,T);break;case "confirmBtn":const S=O.getColor();O.addToPalette(S);B.call(G,T,S)}O.destroy()});const O=new La(L,{x:U.PADDING_X,y:U.PADDING_Y+24,width:337,height:177+(E.alphaChannel?23:0),color:E.color,alphaChannel:E.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});
G.show();M.setVisible(!0);M.focus();G.setupFooterButtons(O,E);G.setupTitle(L,E.titleText)},showDatePicker:function(B,E){const G=this,L=G.content,M=L.closeBtn;E={...W.DATE_PICKER_DEFAULTS,...E};G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":B.call(G,T);break;case "confirmBtn":B.call(G,T,O.getPickedDate())}O.destroy()});const O=new Pa(L,{x:U.PADDING_X,y:U.PADDING_Y+24,height:195,opt:{current:new Date(E.initialDate??Date.now()),dateOnly:E.dateOnly||!1,timeOnly:E.timeOnly||
!1,locales:E.locales,locale:E.locale}});G.show();M.setVisible(!0);M.focus();G.setupFooterButtons(O,E);G.setupTitle(L,E.timeOnly?E.timeOnlyTitleText:E.titleText)},setupTitle:function(B,E){const G=W.RADIUS;(this.header=new R(B,{ignoreLayout:!0,width:B.width,height:24,bgColor:"#eee",roundedTopLeftCorner:G,roundedTopRightCorner:G})).sendToBack();B.title=new da(B,{x:G,y:4,text:E,fontWeight:"bold"})},setupFooterButtons:function(B,E){const G=this,L=G.content,M=U.PADDING_Y;var O=M/2;const T=L.btnContainer=
new R(L,{y:B.y+B.height+M,align:"center"});B=["active","hover","ready","text"];let S=E.cancelAttrs??{};var aa;(aa=S).name??(aa.name="cancelBtn");let ra;(ra=S).text??(ra.text=E.cancelTxt);B.forEach(ba=>{ba+="Color";null!=E[ba]&&(S[ba]=E[ba])});aa=G.makeButton(T,S);S=E.confirmAttrs??{};var ea;(ea=S).name??(ea.name="confirmBtn");let ka;(ka=S).text??(ka.text=E.confirmTxt);B.forEach(ba=>{ba+="Color";const ma=ba+"Confirm";null!=E[ma]&&(S[ba]=E[ma])});G.makeButton(T,S);E.buttons?.forEach(ba=>{G.makeButton(T,
ba)});new ua(T,{axis:"y"});new za(T,{spacing:4,collapseParent:!0});L.sizeToChildren.setPaddingY(O);ea=W.RADIUS;O=T.y-O;(new R(L,{ignoreLayout:!0,y:O,width:L.width,height:L.height-O,bgColor:"#eee",roundedBottomLeftCorner:ea,roundedBottomRightCorner:ea})).sendToBack();!1===E.showClose&&aa.focus()}})})(myt);
(q=>{const w=JS.Class,u={},n=(l,h)=>{if(l){const d=l.id;l.id?h(d):q.dumpStack("No ID")}else q.dumpStack("No validator")},k=l=>{n(l,h=>{u[h]=l})},b=q.Validator=new w("Validator",{initialize:function(l){this.id=l},isValid:(l,h,d)=>!0,isFormValid:function(l,h,d){h??={};h.form=l;return this.isValid(l.getValue(),h,d)}}),a=q.RequiredFieldValidator=new w("RequiredFieldValidator",b,{isValid:function(l,h,d){return null==l||""===l||"string"===typeof l&&""===l.trim()?(d?.push("This value is required."),!1):
!0}}),e=q.EqualsIgnoreCaseValidator=new w("EqualsIgnoreCaseValidator",b,{isValid:function(l,h,d){h=h.form.getRollbackValue();return l&&h&&l.toLowerCase()===h.toLowerCase()?(d?.push("Value must differ by more than just case."),!1):!0}}),c=q.URLValidator=new w("URLValidator",b,{initialize:function(l,h){this.callSuper(l);this.originalRawQuery=h},isValid:function(l,h,d){return(new q.URI(l)).toString(this.originalRawQuery)!==l?(d?.push("Invalid URL."),!1):!0}}),g=q.JSONValidator=new w("JSONValidator",
b,{isValid:function(l,h,d){try{return JSON.parse(l),!0}catch(f){return d?.push(f),!1}}});q.EqualFieldsValidator=new w("EqualFieldsValidator",b,{initialize:function(l,h,d){this.callSuper(l);this.fieldA=h;this.fieldB=d},isValid:function(l,h,d){if(l&&this.fieldA.getValue()===this.fieldB.getValue())return!0;d?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});q.LengthValidator=new w("LengthValidator",b,{initialize:function(l,h,d){this.callSuper(l);this.min=
h;this.max=d},isValid:function(l,h,d){l=l?l.length:0;h=this.min;const f=this.max;return void 0!==h&&h>l?(d?.push("The value must not be less than "+h+" characters long."),!1):void 0!==f&&f<l?(d?.push("The value must not be greater than "+f+" characters long."),!1):!0}});q.NumericRangeValidator=new w("NumericRangeValidator",b,{initialize:function(l,h,d){this.callSuper(l);this.min=h;this.max=d},isValid:function(l,h,d){if(""===l)return!0;l=Number(l);h=this.min;const f=this.max;return isNaN(l)?(d?.push("Value is not a number."),
!1):void 0!==h&&h>l?(d?.push("Value must not be less than "+h+"."),!1):void 0!==f&&f<l?(d?.push("Value must not be greater than "+f+"."),!1):!0}});q.CompoundValidator=new w("CompoundValidator",b,{initialize:function(l,...h){this.callSuper(l);for(l=h.length;l;){let d=h[--l];"string"===typeof d&&((h[l]=d=u[d])||h.splice(l,1))}this.__v=h},addValidator:function(l){"string"===typeof l&&(l=u[l]);l&&this.__v.push(l)},isValid:function(l,h,d){const f=this.__v,r=f.length;let v=!0,m=0;for(;r>m;)v=f[m++].isValid(l,
h,d)&&v;return v}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){k(new a("required"));k(new e("equalsIgnoreCase"));k(new c("url"));k(new g("json"));q.global.register("validators",this)},getValidator:l=>u[l],register:k,unregister:l=>{n(l,h=>{u[h]&&delete u[h]})}})})(myt);
(q=>{const w=JS.Class,u=Math,n=u.min,k=u.max,b=q.View,a=new w("SliderThumb",q.SimpleButton,{include:[q.Draggable,q.ArrowKeyActivation],initNode:function(c,g){const l=g.width=c.thumbWidth,h=g.height=c.thumbHeight;g.roundedCorners=n(h,l)/2;g.repeatKeyDown=!0;g.activationKeys=q.global.keys.ARROW_KEYS;g.activeColor="#bbb";g.readyColor="#ccc";g.hoverColor="#ddd";g.boxShadow=[0,0,4,"#666"];this.callSuper(c,g);this["x"===c.axis?"setY":"setX"](c.thumbOffset);this.syncTo(c,"setDisabled","disabled");c._syncThumbToValue(this,
c.getValue())},setDisabled:function(c){this.callSuper(this.valueFromEvent(c))},setFocused:function(c){this.callSuper(c);c&&this.makeHighestZIndex()},setX:function(c){this.x!==c&&(this.callSuper(c),c=this.parent,"x"===c.axis&&c.syncValueToThumb(this))},setY:function(c){this.y!==c&&(this.callSuper(c),c=this.parent,"y"===c.axis&&c.syncValueToThumb(this))},requestDragPosition:function(c,g){if(!this.disabled){var l=this.parent;const h=l.getMinPixelValueForThumb(this),d=l.getMaxPixelValueForThumb(this);
"x"===l.axis?(l=this.width/2,g="setX"):(l=this.height/2,c=g,g="setY");this[g](n(k(c,h-l),d-l))}},doKeyArrowLeftOrUp:function(c,g){c?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(c,g){c?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),e=q.BaseSlider=new w("BaseSlider",b,{include:[q.Disableable],initNode:function(c,g){g.axis??(g.axis="x");"x"===g.axis?(g.width??(g.width=100),g.height??(g.height=18)):(g.width??(g.width=
18),g.height??(g.height=100));g.bgColor??(g.bgColor="#999");g.roundedCorners??(g.roundedCorners=9);g.trackInset??(g.trackInset=9);g.trackOutset??(g.trackOutset=9);g.thumbWidth??(g.thumbWidth=16);g.thumbHeight??(g.thumbHeight=16);g.thumbOffset??(g.thumbOffset=1);g.nudgeAmount??(g.nudgeAmount=1);this.callSuper(c,g)},setAxis:function(c){this.axis=c},setTrackInset:function(c){this.trackInset=c},setTrackOutset:function(c){this.trackOutset=c},setThumbWidth:function(c){this.thumbWidth=c},setThumbHeight:function(c){this.thumbHeight=
c},setThumbOffset:function(c){this.thumbOffset=c},setNudgeAmount:function(c){this.nudgeAmount=c},convertValueToPixels:function(c){const g=this.minValue,l=this.trackInset;return l+(("x"===this.axis?this.width:this.height)-l-this.trackOutset)/(this.maxValue-g)*(c-g)},convertPixelsToValue:function(c){const g=this.minValue,l=this.trackInset;return(this.maxValue-g)/(("x"===this.axis?this.width:this.height)-l-this.trackOutset)*(c-l)+g},nudgeValueLeft:function(c){this._nudge(c,!1)},nudgeValueUp:function(c){this._nudge(c,
!1)},nudgeValueRight:function(c){this._nudge(c,!0)},nudgeValueDown:function(c){this._nudge(c,!0)},_nudge:(c,g)=>{},_syncThumbToValue:function(c,g){g=this.convertValueToPixels(g);"x"===this.axis?c.setX(g-c.width/2):c.setY(g-c.height/2)},syncValueToThumb:function(c){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(c,this.convertPixelsToValue("x"===this.axis?c.x+c.width/2:c.y+c.height/2)),this.__lockSync=!1)},_syncValueToThumb:(c,g)=>{},getMinPixelValueForThumb:function(c){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(c){return this.convertValueToPixels(this.maxValue)}});q.RangeSlider=new w("RangeSlider",e,{include:[q.BoundedRangeComponent],initNode:function(c,g){this.callSuper(c,g);c=this.rangeFill=new b(this,{bgColor:"#666"});"x"===this.axis?(c.setY(this.thumbOffset),c.setHeight(this.thumbHeight),c.setRoundedCorners(this.thumbHeight/2)):(c.setX(this.thumbOffset),c.setWidth(this.thumbWidth),c.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new a(this);this.thumbUpper=new a(this);
this._syncRangeFillToValue()},setValue:function(c){this.callSuper(c);this.inited&&(this.__lockSync||(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c)),this._syncRangeFillToValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},setHeight:function(c){const g=this.height;this.callSuper(c);
this.inited&&"y"===this.axis&&this.height!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},_syncRangeFillToValue:function(){const c=this.rangeFill;var g=this.getValue();const l=this.convertValueToPixels(g.lower);g=this.convertValueToPixels(g.upper)-l;"x"===this.axis?(c.setX(l),c.setWidth(g)):(c.setY(l),c.setHeight(g))},_syncThumbToValue:function(c,g){this.callSuper(c,"thumbLower"===c.name?g.lower:g.upper)},_syncValueToThumb:function(c,g){let l=
this.getValueCopy();l["thumbLower"===c.name?"lower":"upper"]=g;this.setValue(l);l=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,l);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,l)},_nudge:function(c,g){const l=this.getValueCopy();g=this.nudgeAmount*(g?1:-1);"thumbLower"===c.name?l.lower=n(l.lower+g,l.upper):l.upper=k(l.upper+g,l.lower);this.setValue(l)},getMinPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.getValue().upper:this.maxValue)}});q.Slider=new w("Slider",e,{include:[q.BoundedValueComponent],initNode:function(c,g){this.callSuper(c,g);this.thumb=new a(this)},setValue:function(c){this.callSuper(c);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(c){const g=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(c,g){this.setValue(g);this._syncThumbToValue(c,this.getValue())},_nudge:function(c,g){this.setValue(this.getValue()+this.nudgeAmount*(g?1:-1))}});q.LabelSlider=new w("LabelSlider",q.Slider,{initNode:function(c,g){const l=this;g.labelX??(g.labelX=8);g.labelY??(g.labelY=2);g.labelFontSize??(g.labelFontSize=
"12px");g.labelColor??(g.labelColor="#000");g.flipThreshold??(g.flipThreshold=u.round((g.maxValue-g.minValue)/2)||0);l.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],g);l.callSuper(c,g);const h=l.labelX;l.labelTxt=new q.Text(l,{x:h,y:l.labelY,textColor:l.labelColor,fontSize:l.labelFontSize},[{initNode:function(d,f){this.targetX=h;this.callSuper(d,f)},updateX:function(d){const f=l.getValue()>=l.flipThreshold?h:l.width-this.width-h;this.targetX!==f&&(this.targetX=f,this.stopActiveAnimators("x"),
d?this.setX(f):this.animate({attribute:"x",to:f,duration:250}))}}]);l.syncTo(l,"setText","value")},setWidth:function(c){this.callSuper(c);this.labelTxt?.updateX(!0)},setText:function(c,g){const l=this.labelTxt;l&&(l.setText(c.value),l.updateX(g))}})})(myt);
(q=>{const w=JS.Class,u=q.global.keys,n=b=>{const a="y"===b.axis?"height":"width";b.constrain("__limitToParent",[b,"limitToParent",b,a,b.parent,a])},k=new w("BaseDivider",q.SimpleButton,{include:[q.BoundedValueComponent,q.Draggable,q.ArrowKeyActivation],initNode:function(b,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor="#ddd");a.readyColor??(a.readyColor="#ccc");a.axis??(a.axis="x");a.minValue??(a.minValue=0);a.value??(a.value=a.minValue);a.expansionState??(a.expansionState=
2);a.focusIndicator??(a.focusIndicator=!1);a.repeatKeyDown??(a.repeatKeyDown=!0);a.activationKeys??(a.activationKeys=[u.CODE_ENTER,u.CODE_SPACE,...u.ARROW_KEYS]);"y"===a.axis?(a.height??(a.height=6),a.cursor??(a.cursor="row-resize")):(a.width??(a.width=6),a.cursor??(a.cursor="col-resize"));this.quickSet(["axis"],a);this.__nudgeAcc=1;this.callSuper(b,a);null==a.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&n(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},
setExpansionState:function(b){this.expansionState=b},setRestoreValue:function(b){this.restoreValue=b},setLimitToParent:function(b){this.limitToParent!==b&&(this.limitToParent=b,this.inited&&(this.fireEvent("limitToParent",b),null==b?this.releaseConstraint("__limitToParent"):n(this)))},setAxis:function(b){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=b},setValue:function(b,a){this.callSuper(b);b=this.value;"y"===this.axis?this.setY(b):this.setX(b);a&&this.setRestoreValue(b)},
__limitToParent:function(b){b="y"===this.axis?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b])},doActivationKeyDown:function(b,a){this.callSuper(b,a);switch(b){case u.CODE_ENTER:case u.CODE_SPACE:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(b,a){return this.nudge(!1,a)},doKeyArrowRightOrDown:function(b,a){return this.nudge(!0,a)},nudge:function(b,a){this.__nudgeAcc=a?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+(b?1:-1)*this.__nudgeAcc,!0);this.setExpansionState(2);
return!0},doPrimaryAction:function(){const b=this.restoreValue,a=this.maxValue,e=this.minValue;let c;switch(this.expansionState){case 0:null!=b&&(this.setExpansionState(1),b===e?b!==a&&this.doPrimaryAction():c=b);break;case 1:null!=a&&(this.setExpansionState(3),this.value===a?this.doPrimaryAction():c=a);break;case 2:null!=e&&(this.setExpansionState(0),this.value===e?this.doPrimaryAction():c=e);break;case 3:null!=b&&(this.setExpansionState(2),b===a?this.doPrimaryAction():c=b)}this.animateToValue(c)},
animateToValue:function(b,a=250){null!=b&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:b,duration:a}))},requestDragPosition:function(b,a){this.disabled||(b="y"===this.axis?a:b,a=this.value,b!==a&&(this.setValue(b,!0),this.setExpansionState(a>b?2:1)))}});q.HorizontalDivider=new w("HorizontalDivider",k,{initNode:function(b,a){a.axis="x";this.callSuper(b,a)}});q.VerticalDivider=new w("VerticalDivider",k,{initNode:function(b,a){a.axis="y";this.callSuper(b,a)}})})(myt);
(q=>{let w=0;const u=JS.Class,n=JS.Module,k=Math.min,b=Math.max,a=q.View,e=q.Node.DEFAULT_PLACEMENT,c=p=>{const x=p.columnHeaders,[z,D]=p.sort??["",""];let I=x.length;for(;I;){const K=x[--I];K.columnId===z?K.sortable&&K.setSortState(D):K.setSortState("none")}p.locked||p.doSort()},g=(p,x,z,D)=>{if(0!==x){const N=0<x,Q=[];for(var I=p.length;I;){var K=p[--I];K.resizable&&(z?0<K.flex:0===K.flex)&&Q.push({hdr:K,limit:(N?K.maxValue:K.minValue)-K.value,amt:0})}p=Q.length;if(0<p){for(I=0;0!==x;){w>=p&&(I=
w=0);K=Q[w];var J=K.hdr;K.full?++I:(N?(J=k(z?J.flex:1,x),K.amt+J>K.limit&&(J=K.limit-K.amt,K.full=!0)):(J=b(z?-J.flex:-1,x),K.amt+J<K.limit&&(J=K.limit-K.amt,K.full=!0)),K.amt+=J,x-=J);if(I===p)break;++w}Q.forEach(ca=>{ca.hdr.setValue(ca.hdr.value+ca.amt)});D?.(x)}}},l=p=>(p=p.gridController?p.gridController.getPrevHdr(p):null)?p.maxValue-p.value+l(p):0,h=p=>(p=p.gridController?p.gridController.getNextHdr(p):null)?p.maxValue-p.value+h(p):0,d=p=>(p=p.gridController?p.gridController.getPrevHdr(p):null)?
p.minValue-p.value+d(p):0,f=p=>(p=p.gridController?p.gridController.getNextHdr(p):null)?p.minValue-p.value+f(p):0,r=(p,x)=>{p=p.gridController?p.gridController.getPrevHdr(p):null;var z=0;if(p){z=p.value+x;p.resizable&&p.setValue(z);const D=z-p.value;z=x-D;0>D&&(z+=r(p,D))}return z},v=(p,x)=>{p=p.gridController?p.gridController.getPrevHdr(p):null;var z=0;if(p){z=p.value+x;p.resizable&&p.setValue(z);const D=z-p.value;z=x-D;0<D&&(z+=v(p,D))}return z},m=(p,x)=>{if(p=p.gridController?p.gridController.getNextHdr(p):
null)x=p.value+x,p.resizable&&p.setValue(x),x-=p.value,0>x&&m(p,x)},y=(p,x)=>{if(p=p.gridController?p.gridController.getNextHdr(p):null)x=p.value+x,p.resizable&&p.setValue(x),x-=p.value,0<x&&y(p,x)},C=p=>{let x="";if(p.sortable)switch(p.sortState){case "ascending":x="chevron-up";break;case "descending":x="chevron-down"}p.sortIcon.setIcon(x)},F=p=>{const x=p.textView;x?.setWidth(p.width-p.outset-x.x)},H=q.GridController=new n("GridController",{initNode:function(p,x){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(p,x);this.fitHeadersToWidth();c(this)},setMaxWidth:function(p){this.set("maxWidth",p,!0)},setMinWidth:function(p){this.set("minWidth",p,!0)},setFitToWidth:function(p){this.fitToWidth=p},setSort:function(p){q.areArraysEqual(p,this.sort)||(this.sort=p,this.inited&&(this.fireEvent("sort",p),c(this)))},setLastColumn:function(p){const x=this.lastColumn;x!==p&&(x?.setLast(!1),this.lastColumn=p,p?.setLast(!0))},
setLocked:function(p){this.locked=p;this.inited&&!p&&(this.__tempLock=!0,this.fitHeadersToWidth(),this.__tempLock=!1,this.setMaxWidth(0),this.setMinWidth(0),this.__skipInvisibleHeaders=!0,this.columnHeaders.forEach(x=>{this.notifyHdrXChange(x);this.notifyHdrWidthChange(x);this.notifyHdrVisibilityChange(x)}),this.__skipInvisibleHeaders=!1,this.doSort())},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(p){p=this.valueFromEvent(p);this.gridWidth!==p&&(this.gridWidth=p,
this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(p){const x=this.columnHeaders;p=this.getHdrIndex(p);if(0<p)for(;p;){const z=x[--p];if(z.visible)return z}},getNextHdr:function(p){const x=this.columnHeaders,z=x.length;p=this.getHdrIndex(p)+1;if(0<p&&p<z)for(;z>p;){const D=x[p++];if(D.visible)return D}},hasHdr:function(p){return this.columnHeaders.includes(p)},getHdrIndex:function(p){return this.columnHeaders.indexOf(p)},getHdrById:function(p){const x=this.columnHeaders;let z=
x.length;for(;z;){const D=x[--z];if(D.columnId===p)return D}},getVisibleHdrs:function(){return this.columnHeaders.filter(p=>p.visible)},notifyAddHdr:function(p){this.hasHdr(p)||(this.columnHeaders.push(p),p.visible&&this.setLastColumn(p),this.fixupResizerCursors())},notifyRemoveHdr:function(p){const x=this.getHdrIndex(p);-1<x&&(this.columnHeaders.splice(x,1),p.visible&&p.last&&this.setLastColumn(this.getPrevHdr(p)),this.fixupResizerCursors())},notifyHdrXChange:function(p){this.isLocked()||this.rows.forEach(x=>
{x.notifyHdrXChange(p)})},notifyHdrWidthChange:function(p){this.isLocked()||this.rows.forEach(x=>{x.notifyHdrWidthChange(p)})},notifyHdrVisibilityChange:function(p){if((!this.__skipInvisibleHeaders||p.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(p);var x=this.setLastColumn;a:{var z=this.columnHeaders;let D=z.length;for(;D;){const I=z[--D];if(I.visible){z=I;break a}}z=void 0}x.call(this,z);x=p.visible?1:-1;this.setMaxWidth(this.maxWidth+p.maxValue*x);this.setMinWidth(this.minWidth+
p.minValue*x);this.fitHeadersToWidth();this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(p){this.rows.forEach(x=>{x.notifyHdrVisibilityChange(p)})},hasRow:function(p){return this.rows.includes(p)},getRowIndex:function(p){return this.rows.indexOf(p)},getRowById:function(p,x=z=>z.model.id===p){return this.rows.find(x)},getPrevRow:function(p){p=this.getRowIndex(p)-1;return this.rows[0>p?this.rows.length-1:p]},getNextRow:function(p){p=this.getRowIndex(p)+1;return this.rows[p<this.rows.length?
p:0]},notifyAddRow:function(p,x){if(!this.hasRow(p)&&(this.rows.push(p),!this.locked)){const z=this.width;this.columnHeaders.forEach(D=>{p.setWidth(z);p.notifyHdrXChange(D);p.notifyHdrWidthChange(D);p.notifyHdrVisibilityChange(D)});x||this.doSort()}},notifyRemoveRow:function(p){p=this.getRowIndex(p);-1<p&&this.rows.splice(p,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const p=this.getVisibleHdrs();let x=0;p.forEach(z=>{x=b(x,z.x+z.width)});g(p,this.gridWidth-x,!0,z=>{g(p,z,!1,
null)})}},fixupResizerCursors:function(){const p=this.getVisibleHdrs();let x=!0,z=0;p.forEach((J,N)=>{x&&J.isFixed()?J.setResizerCursor("",!0):(x&&(z=N),x=!1,J.restoreResizerCursor())});let D=!0,I=p.length,K=I-1;for(;I>z;){const J=p[--I];D?J.setResizerCursor("",!0):J.restoreResizerCursor();J.isFixed()||(D&&(K=I),D=!1)}z===K&&p[z].setResizerCursor("",!0)}}),A=q.GridColHdr=new n("GridColHdr",{include:[q.BoundedValueComponent],initNode:function(p,x){const z=this,D=x.resizerCursor??"col-resize";delete x.resizerCursor;
x.minValue??(x.minValue=16);x.maxValue??(x.maxValue=1E3);x.value??(x.value=x.minValue);x.resizable??(x.resizable=!0);x.flex??(x.flex=0);x.cellXAdj??(x.cellXAdj=0);x.cellWidthAdj??(x.cellWidthAdj=0);x.sortable??(x.sortable=!0);x.sortState??(x.sortState="none");x.placement??(x.placement=e);z.callSuper(p,x);const I=z.gridController;z.resizer=new a(z,{cursor:D,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[q.SizeToParent,q.Draggable,{requestDragPosition:function(K,
J){J=K-this.x;if(I.fitToWidth&&(0<J?J=k(J,k(-f(z),z.maxValue-z.value+l(z))):0>J&&(J=b(J,b(-h(z),z.minValue-z.value+d(z)))),0===J))return;K=z.value+J;z.resizable&&z.setValue(K);K-=z.value;J=K-J;let N=0;0>K?N=r(z,K):0<K&&(N=v(z,K));this.dragInitX+=N;J-=N;I.fitToWidth&&(0>J?m(z,J):0<J&&y(z,J))}}]);I&&(I.notifyAddHdr(z),I.notifyHdrXChange(z),I.notifyHdrVisibilityChange(z));z.setWidth(z.value);z.resizer.setVisible(!(z.last&&z.gridController.fitToWidth))},destroy:function(p){this.setGridController();this.callSuper(p)},
setSortable:function(p){this.set("sortable",p,!0)},setSortState:function(p){this.set("sortState",p,!0)},setResizable:function(p){this.set("resizable",p,!0)},setCellWidthAdj:function(p){this.cellWidthAdj=p},setCellXAdj:function(p){this.cellXAdj=p},setFlex:function(p){this.flex=p},setColumnId:function(p){this.columnId=p},setResizerCursor:function(p,x){const z=this.resizer,D=z.cursor;p!==D&&(x&&(this.__rrc=D),z.setCursor(p))},restoreResizerCursor:function(){const p=this.__rrc;p&&(this.setResizerCursor(p),
this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(p){this.last=p;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(p){const x=this.gridController;x!==p&&(x?.notifyRemoveHdr(this),this.gridController=p,this.inited&&p&&(p.notifyAddHdr(this),p.notifyHdrXChange(this),p.notifyHdrWidthChange(this),p.notifyHdrVisibilityChange(this)))},setValue:function(p){this.callSuper(p);this.inited&&this.setWidth(this.value)},
setMinValue:function(p){const x=this.minValue??0,z=this.gridController;this.callSuper(p);this.inited&&x!==this.minValue&&z?.setMinWidth(z.minWidth+this.minValue-x)},setMaxValue:function(p){const x=this.maxValue??0,z=this.gridController;p??=1E3;this.callSuper(p);this.inited&&x!==this.maxValue&&z?.setMaxWidth(z.maxWidth+this.maxValue-x)},setWidth:function(p){const x=this.width;this.callSuper(p);this.inited&&x!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(p){const x=this.x;
this.callSuper(p);this.inited&&x!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(p){const x=this.visible;this.callSuper(p);this.inited&&x!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),t=q.GridRow=new n("GridRow",{initNode:function(p,x){x.placement??(x.placement=e);this.callSuper(p,x);this.gridController?.notifyAddRow(this)},destroy:function(p){this.setGridController();this.callSuper(p)},setGridController:function(p){const x=this.gridController;
x!==p&&(x?.notifyRemoveRow(this),this.gridController=p,this.inited&&p?.notifyAddRow(this))},notifyHdrXChange:function(p){this[p.columnId+"View"]?.setX(p.x+p.cellXAdj)},notifyHdrWidthChange:function(p){this[p.columnId+"View"]?.setWidth(p.width+p.cellWidthAdj)},notifyHdrVisibilityChange:function(p){this[p.columnId+"View"]?.setVisible(p.visible)}});q.Grid=new u("Grid",a,{include:[H],initNode:function(p,x){const z=q.SpacedLayout;x.overflow??(x.overflow="autox");x.bgColor??(x.bgColor="#ccc");x.rowSpacing??
(x.rowSpacing=1);x.columnSpacing??(x.columnSpacing=1);var D=x.isAutoScrolling;delete x.isAutoScrolling;this.callSuper(p,x);p=this.header=new a(this,{overflow:"hidden"});p.xLayout=new z(p,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});p.yLayout=new q.SizeToChildren(p,{locked:!0,axis:"y"});x=this.sizeHeightToRows;D=this.content=new a(this,{overflow:x?"hidden":"autoy"},D?[q.AutoScroller]:[]);D.yLayout=new z(D,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:x});this.syncTo(this,
"setGridWidth","width");this.syncTo(p,"_updateContentWidth","width");this.constrain("_updateContentHeight",[x?D:this,"height",p,"height",p,"y"])},setSizeHeightToRows:function(p){this.sizeHeightToRows=p},setRowSpacing:function(p){this.rowSpacing!==p&&(this.rowSpacing=p,this.inited&&this.content.yLayout.setSpacing(p))},setColumnSpacing:function(p){this.columnSpacing!==p&&(this.columnSpacing=p,this.inited&&this.header.xLayout.setSpacing(p))},setLocked:function(p){this.inited&&[this.header.xLayout,this.header.yLayout,
this.content.yLayout].forEach(x=>{p?x.incrementLockedCounter():(x.decrementLockedCounter(),x.update())});this.callSuper(p)},_updateContentWidth:function(p){const x=this.content,z=p.value;x.setWidth(z);x.getSubviews().forEach(D=>{D.setWidth(z)})},_updateContentHeight:function(p){var x=this.header;p=this.content;x=x.y+x.height;p.setY(x);this.sizeHeightToRows?this.setHeight(x+p.height):p.setHeight(this.height-x)},determinePlacement:function(p,x){if(p===e){let z;x.isA(t)?z=this.content:x.isA(A)&&(z=this.header);
if(z)return x.gridController!==this&&x.setGridController(this),z}return this.callSuper(p,x)},doSort:function(){const [p,x]=this.sort??["",""],z=this.getSortFunction(p,x);if(z){const D=this.content,I=D.yLayout;this.rows.sort(z);D.sortSubviews(z);I.sortSubviews(z);I.update()}},getSortFunction:(p,x)=>{if(p){const z="ascending"===x?1:-1,D=p+"View";return(I,K)=>{I=I[D].text;K=K[D].text;return I>K?z:K>I?-z:0}}}});q.SimpleGridColHdr=new u("SimpleGridColHdr",q.SimpleTextButton,{include:[A],initNode:function(p,
x){const z=this;x.activeColor??(x.activeColor="#999");x.hoverColor??(x.hoverColor="#bbb");x.readyColor??(x.readyColor="#aaa");x.inset??(x.inset=2);x.sortIconColor??(x.sortIconColor="#666");const D=x.outset??2;delete x.outset;z.callSuper(p,x);z.sortIcon=new q.FontAwesome(z,{align:"right",alignOffset:3,valign:"middle",textColor:z.sortIconColor},[{initNode:function(I,K){this.callSuper(I,K);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();z.setOutset(this.width+D);F(z)}}]);z.textView.enableEllipsis();
z.setDisabled(!z.sortable);F(z);C(z)},setSortIconColor:function(p){this.sortIconColor=p;this.sortIcon?.setTextColor(p)},setSortable:function(p){this.callSuper(p);this.inited&&(p&&this.setOutset(14),this.setDisabled(!p),C(this))},setSortState:function(p){this.callSuper(p);this.inited&&C(this)},setWidth:function(p){this.callSuper(p);this.inited&&F(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,
this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(q=>{const w=JS.Class,u=JS.Module,n=Math,k=n.max,b=q.View;var a=q.global;const e=a.focus,c=a.keys,g=m=>{const y=m.selectedRow;y&&(y.setSelected(!1),m.set("selectedRow",null,!0))};a=q.InfiniteListRow=new u("InfiniteListRow",{include:[q.Reusable],setInfiniteOwner:function(m){this.infiniteOwner=m},setModel:function(m){this.model=m},setClassKey:function(m){this.classKey=m},notifyRefreshed:()=>{}});const l=q.SelectableInfiniteListRow=new u("SelectableInfiniteListRow",{include:[a,q.Selectable]}),h=q.InfiniteList=
new w("InfiniteList",b,{initNode:function(m,y){let C=y.rowClasses;delete y.rowClasses;if("function"===typeof C){const F={};F["default"]=C;C=F}y.modelIDName??(y.modelIDName="id");y.numericSort??(y.numericSort=!0);y.ascendingSort??(y.ascendingSort=!0);y.overflow??(y.overflow="autoy");y.bgColor??(y.bgColor="#ccc");y.rowSpacing??(y.rowSpacing=1);y.rowInset??(y.rowInset=0);y.rowOutset??(y.rowOutset=0);y.rowHeight??(y.rowHeight=30);y.overscrollBehavior??(y.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(m,y);m=this._listView=new b(this);this._scrollAnchorView=new b(m,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(C,m);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(m,y)=>new q.TrackActivesMultiPool(m,y),setOverscrollBehavior:function(m){this.overscrollBehavior=m;this.getIDS().overscrollBehavior=m},setCollectionModel:function(m){this.collectionModel=
m},setModelIDName:function(m){this.modelIDName=m},setRowSpacing:function(m){this.rowSpacing=m;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(m){this.rowHeight=m;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(m){if(0<m&&(this.callSuper(m),this.inited)){m=this._listView;const y=this.width;m.setWidth(y);m.getSubviews().forEach(C=>{C.setWidth(y)})}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(m){const y=this.getVisibleRows();let C=y.length;for(;C;){const F=y[--C];if(F.model===m)return F}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const m=this.modelIDName,y=this.ascendingSort;return this.numericSort?q.getNumericObjSortFunc(m,y):q.getAlphaObjSortFunc(m,y,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(m,
y){var C=this.getIndexOfModelInData(m);let F=!1;if(0<=C){var H=this._rowExtent;const A=this.getIDE().scrollTop,t=A+this.height;C=this.rowInset+C*H;H=C+H;C<=A?(this.scrollYTo(C,!0),F=!0):H>=t&&(this.scrollYTo(H-this.height,!0),F=!0);y&&((y=this.getVisibleRowForModel(m))?y.focus():this._focusToModel=m)}return F},isModelInData:function(m){return 0<=this.getIndexOfModelInData(m)},getNextModel:function(m,y=!0,C=!0){const F=this.getListData(),H=F.length;m=this.getIndexOfModelInData(m);if(0<=m)return m+=
1,m>=H?y?F[0]:F[H-1]:F[m];if(C&&0<H)return F[H-1]},getPrevModel:function(m,y=!0,C=!0){const F=this.getListData(),H=F.length;m=this.getIndexOfModelInData(m);if(0<=m)return--m,0>m?y?F[H-1]:F[0]:F[m];if(C&&0<H)return F[0]},getIndexOfModelInData:function(m){if(m){const y=this.getListData();let C=y.length;for(;C;)if(this.areModelsEqual(y[--C],m))return C}return-1},areModelsEqual:function(m,y){const C=this.modelIDName;return m[C]===y[C]},getActiveRowForModel:function(m){if(m){const y=this._itemPool.getActives();
let C=y.length;for(;C;){const F=y[--C];if(this.areModelsEqual(F.model,m))return F}}},refreshListData:function(m,y){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(m,y)},resetListUI:function(m,y){const C=this.getListData().length,F=this._listView,H=this._scrollAnchorView;F.setHeight(C*this._rowExtent-(0<C?this.rowSpacing:0)+this.rowInset+this.rowOutset);H.setY(F.height-H.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=
y;m||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(m){if(e.focusedView?.isDescendantOf(m)){const y=this.getFocusTrap();y?y.focus():e.clear()}m.setVisible(!1);this._itemPool.putInstance(m)},refreshListUI:function(m){m=this._rowExtent;const y=this.rowInset,C=this.forceFullResetOnNextRefresh;var F=this.getIDE().scrollTop;const H=this.getListData()??[];var A=k(0,n.floor((F-y)/m));F=n.min(H.length,n.ceil((F-y+this.height)/m));this.forceFullResetOnNextRefresh&&
(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==A||this._endIdx!==F||C){const p=this.width,x=this.rowHeight,z=this._visibleRowsByIdx,D=this._focusToModel;this._startIdx=A;this._endIdx=F;for(var t in z)if(t<A||t>=F)this.putRowBackInPool(z[t]),delete z[t];for(t=A;t<F;t++){A=z[t];const I=H[t],K=this.getClassKey(I);let J=!1;A&&A.classKey===K||(A&&this.putRowBackInPool(A),z[t]=A=this._itemPool.getInstance(K),A.setInfiniteOwner(this),A.setClassKey(K),A.setWidth(p),A.setHeight(x),A.setY(y+t*m),
A.setVisible(!0),J=!0);!C&&A.model&&this.areModelsEqual(A.model,I)?J&&this.updateRow(A):(A.setModel(I),this.updateRow(A));A.notifyRefreshed();A.bringToFront();D&&this.areModelsEqual(D,I)&&(A.focus(),this._focusToModel=null)}}},getClassKey:m=>"default",updateRow:m=>{}}),d=q.SimpleSelectableInfiniteListRow=new w("SimpleSelectableInfiniteListRow",q.SimpleButton,{include:[l,q.ArrowKeyActivation],initNode:function(m,y){y.selectedColor??(y.selectedColor="#ccf");y.activeColor??(y.activeColor="#f8f8f8");
y.hoverColor??(y.hoverColor="#eee");y.readyColor??(y.readyColor="#fff");y.focusIndicator??(y.focusIndicator=!1);y.activationKeys??(y.activationKeys=c.LIST_KEYS);this.callSuper(m,y)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(m){this.callSuper(m);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},
doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(m,y){m===c.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(m,y)},doKeyArrowLeftOrUp:function(m,y){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(m,y){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(m){switch(m){case c.CODE_ENTER:case c.CODE_SPACE:this.doActivated()}}}),f=q.SelectableInfiniteList=
new w("SelectableInfiniteList",h,{setSelectedRow:function(m){const y=this.selectedRow;m!==y&&(y?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",m,!0),m&&(this.setSelectedRowModel(m.model),m.setSelected(!0)))},setSelectedRowModel:function(m){this.set("selectedRowModel",m,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(m,y,C){m&&(g(this),this.setSelectedRowModel(m),
this.refreshListUI(),y&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(m,y=!0){this.selectRowForModel(this.getNextModel(m),y,!0)},selectPrevRowForModel:function(m,y=!0){this.selectRowForModel(this.getPrevModel(m),y,!1)},resetListUI:function(m,y){this.isModelInData(this.selectedRowModel)?g(this):this.setSelectedRow();this.callSuper(m,y)},putRowBackInPool:function(m){m.selected&&g(this);this.callSuper(m)},refreshListUI:function(m){m=e.focusedView;this.callSuper();const y=this.getActiveSelectedRow();
y&&(this.set("selectedRow",y,!0),y.setSelected(!0),m&&m!==y||y.focus(!0))}}),r=new u("InfiniteGridRowMixin",{notifyXChange:function(m){this[m.columnId+"View"]?.setX(m.x+m.cellXAdj)},notifyWidthChange:function(m){this[m.columnId+"View"]?.setWidth(m.width+m.cellWidthAdj)},notifyVisibilityChange:function(m){this[m.columnId+"View"]?.setVisible(m.visible)}}),v=new u("InfiniteGridMixin",{setGridHeader:function(m){(this.gridHeader=m)?.setGrid(this)},makeReady:function(m,y){const C=this.gridHeader;C?(this.forceFullResetOnNextRefresh=
y,C.setSort(m),C.setLocked(!1)):this.refreshListData(!1,y)},getSortFunction:function(){const [m,y]=this.gridHeader.sort??["",""];return m?q.getAlphaObjSortFunc(m,"ascending"===y,!1):this.callSuper()},updateRow:function(m){this.gridHeader?.columnHeaders.forEach(y=>{m.notifyXChange(y);m.notifyWidthChange(y);m.notifyVisibilityChange(y)})},notifyXChange:function(m){this.getVisibleRows().forEach(y=>{y.notifyXChange(m)})},notifyWidthChange:function(m){this.getVisibleRows().forEach(y=>{y.notifyWidthChange(m)})},
notifyVisibilityChange:function(m){this.getVisibleRows().forEach(y=>{y.notifyVisibilityChange(m)})}});q.InfiniteGridRow=new u("InfiniteGridRow",{include:[a,r]});q.SelectableInfiniteGridRow=new u("SelectableInfiniteGridRow",{include:[l,r]});q.SimpleSelectableInfiniteGridRow=new w("SimpleSelectableInfiniteGridRow",d,{include:[r]});q.InfiniteGrid=new w("InfiniteGrid",h,{include:[v]});q.SelectableInfiniteGrid=new w("InfiniteGrid",f,{include:[v]});q.InfiniteGridHeader=new w("InfiniteGridHeader",b,{include:[q.GridController],
initNode:function(m,y){y.columnSpacing??(y.columnSpacing=1);y.overflow="hidden";this.callSuper(m,y);new q.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(m){this.grid=m},setColumnSpacing:function(m){this.columnSpacing=m},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:k(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(m){this.callSuper(m);this.inited&&(m=this.height,this.columnHeaders.forEach(y=>{y.setHeight(m)}))},setWidth:function(m){this.callSuper(k(this.minWidth,
m));this.inited&&(m=this.width,this.setGridWidth(m),this.grid.setWidth(m))},subviewAdded:function(m){this.callSuper(m);m.isA(q.GridColHdr)&&(m.setGridController(this),m.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(m){this.isLocked()||this.grid.notifyXChange(m)},notifyHdrWidthChange:function(m){this.isLocked()||this.grid.notifyWidthChange(m)},updateRowsForVisibilityChange:function(m){this.grid.notifyVisibilityChange(m)}})})(myt);
(q=>{const w=JS.Class,u=q.PanelStackTransition=new w("PanelStackTransition",q.Node,{to:n=>Promise.resolve(n),from:n=>Promise.resolve(n)});q.PanelStack=new w("PanelStack",q.View,{include:[q.SelectionManager],initNode:function(n,k){k.overflow="hidden";k.itemSelectionId??(k.itemSelectionId="panelId");k.maxSelected??(k.maxSelected=1);this.callSuper(n,k);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(n){this.set("transition",n,!0)},__updateWidth:function(n){this.getActivePanel()?.setWidth(n.value)},
__updateHeight:function(n){this.getActivePanel()?.setHeight(n.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(n){return this.getSelectableItem(n)},selectPanel:function(n){this.selectById(n)},doSelected:function(n){n.setWidth(this.width);n.setHeight(this.height)},doStackTransition:function(n){this["doStackTransition"+(n.selected?"To":"From")](n)},doStackTransitionTo:function(n){const k=this;k.doBeforeTransitionTo(n);const b=k.transition;b?b.to(n).then(a=>{k.doAfterTransitionTo(a)}):
(n.makeHighestZIndex(),n.setVisible(!0),k.doAfterTransitionTo(n))},doBeforeTransitionTo:n=>{},doAfterTransitionTo:n=>{},doStackTransitionFrom:function(n){const k=this;k.doBeforeTransitionFrom(n);const b=k.transition;b?b.from(n).then(a=>{k.doAfterTransitionFrom(a)}):(n.setVisible(!1),k.doAfterTransitionFrom(n))},doBeforeTransitionFrom:n=>{},doAfterTransitionFrom:n=>{}});q.StackablePanel=new JS.Module("StackablePanel",{include:[q.Selectable],initNode:function(n,k){k.visible=k.selected=!1;k.bgColor??
(k.bgColor="#fff");k.panelId??(k.panelId=k.name);this.callSuper(n,k);this.selected&&this.doStackTransition()},setPanelStack:function(n){this.panelStack=n},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(n){this.panelId=n},setSelected:function(n){this.selected!==n&&(this.callSuper(n),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});q.PanelStackFadeTransition=new w("PanelStackFadeTransition",u,{initNode:function(n,
k){k.duration??(k.duration=1E3);this.callSuper(n,k)},setDuration:function(n){this.duration=n},to:function(n){return new Promise((k,b)=>{n.stopActiveAnimators("opacity");n.setVisible(!0);n.animate({attribute:"opacity",to:1,duration:this.duration}).next(a=>{n.makeHighestZIndex();k(n)})})},from:function(n){return new Promise((k,b)=>{n.stopActiveAnimators("opacity");n.animate({attribute:"opacity",to:0,duration:this.duration}).next(a=>{n.setVisible(!1);k(n)})})}});q.PanelStackSlideTransition=new w("PanelStackSlideTransition",
u,{initNode:function(n,k){k.duration??(k.duration=1E3);k.direction??(k.direction="right");this.callSuper(n,k)},setDuration:function(n){this.duration=n},setDirection:function(n){this.direction=n},to:function(n){const k=n.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=k.width;break;case "right":e="x";a=-k.width;break;case "up":e="y";a=k.height;break;case "down":e="y",a=-k.height}n.stopActiveAnimators(e);n.set(e,a);n.setVisible(!0);return new Promise((c,g)=>{g=l=>
{n.makeHighestZIndex();c(n)};0<b?n.animate({attribute:e,to:0,duration:b}).next(g):(n.set(e,0),n.makeHighestZIndex(),c(n))})},from:function(n){const k=n.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=-k.width;break;case "right":e="x";a=k.width;break;case "up":e="y";a=-k.height;break;case "down":e="y",a=k.height}n.stopActiveAnimators(e);return new Promise((c,g)=>{g=l=>{n.setVisible(!1);c(n)};0<b?n.animate({attribute:e,to:a,duration:b}).next(g):(n.set(e,a),n.setVisible(!1),
c(n))})}})})(myt);
(q=>{const w=JS.Module;var u=q.global;const n=u.dragManager,k=u.mouse;u=q.Draggable;const b=(e,c,g)=>{[c,g].forEach(l=>{e["__is"+l]=!1;e["__tmrId"+l]=null})},a=q.DragGroupSupport=new w("DragGroupSupport",{initNode:function(e,c){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(e,c)},setDragGroups:function(e){const c=this.__dgs={};for(const g in e)c[g]=!0;this.__anyDG=c.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(e){const c=this.__drpgs=
{};for(const g in e)c[g]=!0;this.__anyDRPG=c.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(e){e&&(this.__dgs[e]=!0,"*"===e&&(this.__anyDG=!0))},removeDragGroup:function(e){e&&(delete this.__dgs[e],"*"===e&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(e){e&&(this.__drpgs[e]=!0,"*"===e&&(this.__anyDRPG=!0))},removeDropGroup:function(e){e&&(delete this.__drpgs[e],"*"===e&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
q.DropSource=new w("DropSource",{include:[u],initNode:function(e,c){c.distanceBeforeDrag??(c.distanceBeforeDrag=2);c.dropParent??(c.dropParent=e.getRoot());this.callSuper(e,c)},setDropClass:function(e){this.dropClass=q.resolveClassname(e)},setDropClassAttrs:function(e){this.dropClassAttrs=e},setDropParent:function(e){this.dropParent=e},startDrag:function(e){const c=this.dropable=this.makeDropable();if(c){const g=c.distanceBeforeDrag;c.distanceBeforeDrag=0;c.doMouseDown(e);c.__doMouseDown(e);c.distanceBeforeDrag=
g}},doMouseUp:function(e){this.callSuper(e);const c=this.dropable;c&&(c.__doMouseUp(e),c.doMouseUp(e),this.dropable=null)},makeDropable:function(){const e=this.dropClass,c=this.dropParent;if(e&&c){const g=q.DomElementProxy.getRelativePosition(this.getIDE(),c.getIDE());return new e(c,{...this.dropClassAttrs,x:g.x??0,y:g.y??0})}}});q.DropTarget=new w("DropTarget",{include:[a],initNode:function(e,c){this.callSuper(e,c);n.registerDropTarget(this)},destroy:function(){n.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(e){return!this.disabled&&this.isVisible()},notifyDragStart:e=>{},notifyDragStop:e=>{},notifyDragEnter:e=>{},notifyDragLeave:e=>{},notifyDrop:e=>{}});q.Dropable=new w("Dropable",{include:[u,a],setDropTarget:function(e){this.dropTarget=e},setDropped:function(e){this.dropped=e},setDropFailed:function(e){this.dropFailed=e},willPermitDrop:e=>!0,startDrag:function(e){this.setDropped(!1);this.setDropFailed(!1);n.startDrag(this);this.callSuper(e)},updateDrag:function(e){n.updateDrag(e,
this);this.callSuper(e)},stopDrag:function(e,c){n.stopDrag(e,this,c);this.callSuper(e,c);c?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(e){this.setDropTarget(e)},notifyDragLeaving:function(e){this.setDropTarget()},notifyDropped:function(e,c){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});q.AutoScroller=new w("AutoScroller",{include:[a],initNode:function(e,c){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;c.overflow??(c.overflow="auto");this.callSuper(e,c);n.registerAutoScroller(this)},destroy:function(){n.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(e){this.scrollBorder=Math.max(1,e)},setScrollFrequency:function(e){this.scrollFrequency=e},setScrollAmount:function(e){this.scrollAmount=e},setScrollAcceleration:function(e){this.scrollAcceleration=e},notifyAutoScrollerDragStart:function(e){e=this.getIDE();(e.scrollHeight>e.clientHeight||
e.scrollWidth>e.clientWidth)&&this.attachToDom(k,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(e){this.detachFromDom(k,"__hndlMove","mousemove",!0);b(this,"Up","Down");b(this,"Left","Right")},__hndlMove:function(e){const c=this;var g=e.value;e=g.pageX;g=g.pageY;if(c.containsPoint(e,g)){const l=c.getPagePosition(),h=c.scrollBorder,d=(f,r)=>{c["__is"+f]&&(c.getIDE()["scroll"+("Up"===f||"Down"===f?"Top":"Left")]+=r*c["__amt"+f],c["__tmrId"+f]=setTimeout(()=>{d(f,r)},c.scrollFrequency))};
e-=l.x;g-=l.y;g<h?(c.__isUp=!0,c.__amtUp=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-g/h))),c.__tmrIdUp||d("Up",-1)):c.height-g<h?(c.__isDown=!0,c.__amtDown=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-(c.height-g)/h))),c.__tmrIdDown||d("Down",1)):b(c,"Up","Down");e<h?(c.__isLeft=!0,c.__amtLeft=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-e/h))),c.__tmrIdLeft||d("Left",-1)):c.width-e<h?(c.__isRight=!0,c.__amtRight=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-(c.width-
e)/h))),c.__tmrIdRight||d("Right",1)):b(c,"Left","Right")}else b(c,"Up","Down"),b(c,"Left","Right")}})})(myt);
myt.Eventable=new JS.Class("Eventable",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Observer],initialize:function(q,w){if(w){const u=w.length;for(let n=0,k;u>n;)(k=w[n++])?this.extend(k):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.init(q??{})},init:function(q){this.callSetters(q);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});
(q=>{const w=Math,u=q.Geometry.degreesToRadians,n=c=>{var g=u(c.startAngle),l=u(c.endAngle);if(g>l){var h=g;g=l;l=h}h=c.__path;var d=c.width/2,f=c.thickness;const r=c.radius,v=r+f;var m=w.PI;const y=l-g,C=y+1E-4>=2*m;C&&(g=0,l=m);const F=w.cos,H=w.sin,A=[d+v*F(g),d+v*H(g)],t=[d+v*F(l),d+v*H(l)];l=[d+r*F(l),d+r*H(l)];g=[d+r*F(g),d+r*H(g)];d=["M"+A.join()];C?d.push("A"+[v,v,0,1,1,t].join(),"A"+[v,v,0,1,1,A].join(),"L"+l.join(),"A"+[r,r,0,1,0,g].join(),"A"+[r,r,0,1,0,l].join()):(m=y%(2*m)>m?1:0,f/=2,
d.push("A"+[v,v,0,m,1,t].join(),c.endCapRounding?"A"+[f,f,0,0,1,l].join():"L"+l.join(),"A"+[r,r,0,m,0,g].join(),c.startCapRounding?"A"+[f,f,0,0,1,A].join():""));d.push("z");h.setAttribute("d",d.join(" "));h.setAttribute("fill",c.color)},k=c=>{const g=2*(c.radius+c.thickness),l=c.__svg;c.setWidth(g);c.setHeight(g);l.setAttribute("viewBox","0 0 "+g+" "+g);l.setAttribute("width",g);l.setAttribute("height",g);n(c)},b=(c,g,l)=>{c[g]!==l&&(c[g]=l,c.inited&&(n(c),c.fireEvent(g,l)))},a=(c,g,l)=>{c[g]!==l&&
(c[g]=l=w.max(0,l),c.inited&&(k(c),c.fireEvent(g,l)))},e=(c,g)=>{c=document.createElementNS("http://www.w3.org/2000/svg",c);g?.appendChild(c);return c};q.Annulus=new JS.Class("Annulus",q.BackView,{initNode:function(c,g){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(c,g);k(this)},createOurDomElement:function(c){c=this.callSuper(c);var g=Array.isArray(c)?c[1]:c;g=this.__svg=e("svg",g);this.__path=e("path",g);g.style.pointerEvents=
"none";return c},setRadius:function(c){a(this,"radius",c)},setThickness:function(c){a(this,"thickness",c)},setStartAngle:function(c){b(this,"startAngle",c)},setEndAngle:function(c){b(this,"endAngle",c)},setStartCapRounding:function(c){b(this,"startCapRounding",c)},setEndCapRounding:function(c){b(this,"endCapRounding",c)},setColor:function(c){b(this,"color",c)},isColorAttr:function(c){return"color"===c||this.callSuper(c)}})})(myt);
(q=>{let w;const u=JS.Class,n=q.global,k=n.mouse,b=n.windowResize,a=Math,e=a.min,c=a.max,g=a.round,l=v=>{v.__checkTID&&(clearTimeout(v.__checkTID),delete v.__checkTID)},h=v=>{if(v.tooltip){const m=v._lastPos;if(v.tooltip.parent.containsPoint(m.x,m.y))return!0}v.hideTip();return!1},d=q.BaseTooltip=new u("BaseTooltip",q.View,{include:[q.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(v,m){this.tipDelay=this.nextTipDelay=d.TIP_DELAY;this.tipHideDelay=d.TIP_HIDE_DELAY;m.visible??
(m.visible=!1);this.callSuper(v,m)},setTooltip:function(v){this.inited&&(this.tooltip=v)&&(this.attachToDom(k,"__hndl_mousemove","mousemove",!0),this.attachToDom(v.parent,"hideTip","mousedown",!0),this.attachToDom(v.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(v){const m=this;m._lastPos=q.MouseObservable.getMouseFromEvent(v);h(m)&&(l(m),m.__checkTID=setTimeout(()=>{delete m.__checkTID;h(m)&&m.showTip()},m.nextTipDelay))},hideTip:function(v){l(this);if(v=this.tooltip?.parent)this.detachFromDom(v,
"hideTip","mousedown",!0),this.detachFromDom(v,"hideTip","mouseup",!0),this.detachFromDom(k,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){n.dragManager.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),f=q.Tooltip=new u("Tooltip",d,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},
initNode:function(v,m){m.edgeSize??(m.edgeSize=f.EDGE_SIZE);m.edgeColor??(m.edgeColor=f.EDGE_COLOR);m.shadowSize??(m.shadowSize=f.SHADOW_SIZE);m.shadowColor??(m.shadowColor=f.SHADOW_COLOR);m.insetH??(m.insetH=f.HORIZONTAL_INSET);m.insetV??(m.insetV=f.VERTICAL_INSET);m.tipBgColor??(m.tipBgColor=f.TIP_BG_COLOR);m.tipTextColor??(m.tipTextColor=f.TIP_TEXT_COLOR);this.callSuper(v,m);this._tipText=new q.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},
setEdgeSize:function(v){this.edgeSize=v},setEdgeColor:function(v){this.edgeColor=v},setShadowSize:function(v){this.shadowSize=v},setShadowColor:function(v){this.shadowColor=v},setInsetH:function(v){this.insetH=v},setInsetV:function(v){this.insetV=v},setTipBgColor:function(v){this.tipBgColor=v},setTipTextColor:function(v){this.tipTextColor=v},showTip:function(){const v=this.tooltip;var m=v.text;const y=v.parent;var C=this._tipText;const F=this.edgeSize,H=this.shadowSize;C.text!==m&&C.setText(m);C.setWidth("auto");
var A=e(C.measureNoWrapWidth(),v.maxTextWidth);m=A+2*C.x;const t=m+2*F;C.setWidth(A);C.sizeViewToDom();A=y.getPagePosition();C=C.height+2*C.y;const p=C+2*F,x=A.y-p+("below"===v.tipvalign?y.height+p:0);A=A.x;switch(v.tipalign){case "right":A-=t;case "farright":A+=y.width;break;case "farleft":A-=t}this.setX(g(e(c(A,0),b.getWidth()-t)));this.setY(g(e(c(x,0),b.getHeight()-p)));this.setWidth(m);this.setHeight(C);this.setBgColor(this.tipBgColor);this.setBorder([F,"solid",this.edgeColor]);this.setBoxShadow([H,
H,H,this.shadowColor]);this.callSuper()}}),r=q.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:f,MAX_TEXT_WIDTH:280},setTooltip:function(v){this.callSuper("");this.set("tooltip",v,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(v){this.set("tipAlign",v,!0)},setTipValign:function(v){this.set("tipValign",v,!0)},setMaxTextWidth:function(v){this.set("maxTextWidth",v,!0)},setTipClass:function(v){this.set("tipClass",v,!0)},doSmoothMouseOver:function(v){const m=this.getTooltip();
this.callSuper(v);if(v&&m){v=this.tipClass??r.TIP_CLASS;!w||w instanceof v||(w.destroy(),w=null);if(!w){let y=document.getElementById("tooltipDiv");y||(y=q.DomElementProxy.createElement("div",{position:"absolute"}),q.getElement().appendChild(y));w=new v(y,{domId:"tooltipDiv"})}w.setTooltip({parent:this,text:m,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||r.MAX_TEXT_WIDTH})}}})})(myt);
(q=>{const w=Math;q.Path=new JS.Class("Path",{initialize:function(u){this.setVectors(u??[])},setVectors:function(u){this._boundingBox=null;this.vectors=u},copyFrom:function(u){this.vectors=u.vectors.slice();this._boundingBox=null},drawInto:function(u){u.beginPath();const n=this.vectors;let k=n.length,b=0;for(u.moveTo(n[b++],n[b++]);k>b;)u.lineTo(n[b++],n[b++]);u.closePath()},translate:function(u,n){const k=this.vectors;let b=k.length;for(;b;)k[--b]+=n,k[--b]+=u;this._boundingBox=null},rotate:function(u){const n=
w.cos(u);u=w.sin(u);const k=this.vectors,b=k.length;for(let a=0;b>a;){const e=k[a]*n-k[a+1]*u,c=k[a]*u+k[a+1]*n;k[a++]=e;k[a++]=c}this._boundingBox=null},rotateAroundOrigin:function(u,n,k){this.translate(-n,-k);this.rotate(u);this.translate(n,k)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const u=this.vectors;let n=u.length,k,b,a,e;if(2<=n){a=e=u[--n];for(k=b=u[--n];n;){const c=u[--n],g=u[--n];a=w.min(c,a);e=w.max(c,e);k=w.min(g,k);b=w.max(g,b)}return this._boundingBox=
{x:k,y:a,width:b-k,height:e-a}}return this._boundingBox=null},getCenter:function(){const u=this.getBoundingBox();return u?{x:u.x+u.width/2,y:u.y+u.height/2}:null},isPointInPath:function(u,n){"object"===typeof u&&(n=u.y,u=u.x);return q.Geometry.isPointInPath(u,n,this.getBoundingBox(),this.vectors)}})})(myt);
(q=>{const w=Math.PI,u=w/2,n=3*w/2,k=q.AccessorSupport,b={};"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" ").forEach(a=>{b[a]=function(...e){this.__ctx[a](...e)}});["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"].forEach(a=>{b[a]=function(...e){return this.__ctx[a](...e)}});
"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" ").forEach(a=>{b[k.generateSetterName(a)]=function(e){this.__ctx[a]=e};b[k.generateGetterName(a)]=function(){return this.__ctx[a]}});q.Canvas=new JS.Class("Canvas",q.BackView,{include:[b],createOurDomElement:function(a){a=this.callSuper(a);const e=Array.isArray(a)?a[1]:a,c=this.__cvs=document.createElement("canvas");
c.className="mytUnselectable";e.appendChild(c);c.style.position="absolute";this.__ctx=c.getContext("2d");return a},setWidth:function(a){0>a&&(a=0);this.__cvs.setAttribute("width",a);this.callSuper(a)},setHeight:function(a){0>a&&(a=0);this.__cvs.setAttribute("height",a);this.callSuper(a)},clear:function(){const a=this.__ctx;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.width,this.height);a.restore()},dataURItoBlob:function(a,e){a=atob(a.split(",")[1]);const c=a.length,g=[];for(let l=0;l<
c;)g.push(a.charCodeAt(l++));return new Blob([new Uint8Array(g)],{type:e})},getDataURL:function(a,e){return this.__cvs.toDataURL(a,e)},getImageFile:function(a,e,c){switch(a){case "png":case "PNG":a="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":a="jpeg";c??=.5;break;default:console.warn("Unexpected image type",a),a=a.toLowerCase()}const g="image/"+a;c=this.dataURItoBlob(this.getDataURL(g,c),g);e&&(c.name=e+"."+a);return c},circle:function(a,e,c){this.__ctx.arc(a,e,c,0,2*w)},drawRoundedRect:function(a,
e,c,g,l,h){const d=this.lineTo.bind(this),f=this.arc.bind(this);h=g+h;l=c+l;this.beginPath();this.moveTo(c,g+a);d(c,h-a);f(c+a,h-a,a,w,u,!0);d(l-a,h);f(l-a,h-a,a,u,0,!0);d(l,g+a);f(l-a,g+a,a,0,n,!0);d(c+a,g);f(c+a,g+a,a,n,w,!0);this.closePath();0<e&&(a-=e,c+=e,l-=e,g+=e,h-=e,this.moveTo(c,g+a),f(c+a,g+a,a,w,n),d(l-a,g),f(l-a,g+a,a,n,0),d(l,h-a),f(l-a,h-a,a,0,u),d(c+a,h),f(c+a,h-a,a,u,w),this.closePath());return this},drawRectOutline:function(a,e,c,g,l){l=c+l;g=e+g;const h=e+a,d=g-a,f=c+a;a=l-a;const r=
this.lineTo.bind(this);this.beginPath();this.moveTo(e,c);r(e,l);r(g,l);r(g,c);r(e,c);r(h,f);r(d,f);r(d,a);r(h,a);r(h,f);this.closePath();return this},drawPartiallyRoundedRect:function(a,e,c,g,l,h,d,f){f=h+f;d=l+d;const r=this.lineTo.bind(this),v=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(l,h+a);r(l,f-c);0<c&&v(l,f,l+c,f);r(d-g,f);0<g&&v(d,f,d,f-g);r(d,h+e);0<e&&v(d,h,d-e,h);r(l+a,h);0<a&&v(l,h,l,h+a);this.closePath();return this},drawAnnulus:function(a,e,c,g,l,h,d,f=60){const r=
q.Color;d.forEach(D=>{"string"===typeof D.color&&(D.color=r.makeColorFromHexString(D.color))});1>f&&(console.warn("Invalid segements",f),f=60);f=w/f;let v=0;for(var m=d.length-1;v<m;){var y=d[v++];const {angle:D,color:I}=y,{angle:K,color:J}=d[v];var C=Math.round((K-D)/f),F=I.getDiffFrom(J);y.colorDelta={red:F.red/C,green:F.green/C,blue:F.blue/C}}c=new q.Path([a+c,e,a+g,e]);c.rotateAroundOrigin(l,a,e);g=c.vectors;let [H,A,t,p]=g,x=0,z=w/360;for(v=0;h>l;){C=H;F=A;m=t;y=p;l+=f;l>h&&(f+=h-l,z=0,l=h);
c.rotateAroundOrigin(f+z,a,e);[H,A,t,p]=g;this.beginPath();this.moveTo(C,F);this.lineTo(m,y);this.lineTo(t,p);this.lineTo(H,A);this.closePath();const {color:D,colorDelta:I}=d[v];this.setFillStyle(r.rgbToHex(D.red+x*I.red,D.green+x*I.green,D.blue+x*I.blue,!0));this.fill();0<z&&(c.rotateAroundOrigin(-z,a,e),[H,A,t,p]=g);x++;l>=d[v+1].angle&&(x=0,v++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
