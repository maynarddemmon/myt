(r=>{let x;var v=d=>{let f=d.length;for(;f;){const e=d[--f];x=e.ver??e.id;if(e.str?.includes(e.sub)||e.prop)return e.id}};var p=d=>{const f=d.indexOf(x);if(0<=f)return parseFloat(d.slice(f+x.length+1))};const k=navigator.userAgent,a=navigator.platform;p=r.BrowserDetect={browser:v([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:k,sub:"Firefox",id:"Firefox"},{str:k,sub:"Chrome",id:"Chrome"},{str:k,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:p(k)||p(navigator.appVersion)||"UNKNOWN",os:v([{str:k,sub:"iPhone",id:"iPhone/iPod"},{str:a,sub:"Linux",id:"Linux"},{str:a,sub:"Mac",id:"Mac"},{str:a,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(p.browser){case "Chrome":case "Safari":r="WebKit";break;case "Explorer":r="MS";break;case "Firefox":r="Moz";break;case "Opera":r="O";break;default:r="UNKNOWN"}v=r.toLowerCase();p.prefix={dom:r,lowercase:v,css:"-"+v+"-",js:v[0].toUpperCase()+v.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:r,floor:x,ceil:v}=Math,p="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),k="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f=c=>(10>c?"0":"")+c,e=(c,h)=>{c=c.getTimezoneOffset();return(0<c?"-":"+")+f(x(r(c/60)))+(h?":":"")+(0==r(c%60)?"00":f(r(c%60)))},g={d:c=>
f(c.getDate()),D:c=>a[c.getDay()],j:c=>c.getDate(),l:c=>d[c.getDay()],N:c=>0==c.getDay()?7:c.getDay(),S:c=>{c=c.getDate();return 1==c%10&&11!=c?"st":2==c%10&&12!=c?"nd":3==c%10&&13!=c?"rd":"th"},w:c=>c.getDay(),z:c=>{const h=new Date(c.getFullYear(),0,1);return v((c-h)/864E5)},W:c=>{const h=new Date(c.valueOf());c=(c.getDay()+6)%7;h.setDate(h.getDate()-c+3);c=h.valueOf();h.setMonth(0,1);4!==h.getDay()&&h.setMonth(0,1+(4-h.getDay()+7)%7);return f(1+v((c-h)/6048E5))},F:c=>k[c.getMonth()],m:c=>f(c.getMonth()+
1),M:c=>p[c.getMonth()],n:c=>c.getMonth()+1,t:c=>{let h=c.getFullYear();c=c.getMonth()+1;12===c&&(h=h++,c=0);return(new Date(h,c,0)).getDate()},L:c=>{c=c.getFullYear();return 0==c%400||0!=c%100&&0==c%4},o:c=>{const h=new Date(c.valueOf());h.setDate(h.getDate()-(c.getDay()+6)%7+3);return h.getFullYear()},Y:c=>c.getFullYear(),y:c=>(""+c.getFullYear()).substr(2),a:c=>12>c.getHours()?"am":"pm",A:c=>12>c.getHours()?"AM":"PM",B:c=>x(1E3*((c.getUTCHours()+1)%24+c.getUTCMinutes()/60+c.getUTCSeconds()/3600)/
24),g:c=>c.getHours()%12||12,G:c=>c.getHours(),h:c=>f(c.getHours()%12||12),H:c=>f(c.getHours()),i:c=>f(c.getMinutes()),s:c=>f(c.getSeconds()),e:c=>/\((.*)\)/.exec((new Date).toString())[1],I:c=>{let h=null,b=0;for(;12>b;){const m=(new Date(c.getFullYear(),b++,1)).getTimezoneOffset();if(null===h)h=m;else if(m<h){h=m;break}else if(m>h)break}return c.getTimezoneOffset()==h|0},O:c=>e(c,!1),P:c=>e(c,!0),T:c=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:c=>60*-c.getTimezoneOffset(),c:c=>c.format("Y-m-d\\TH:i:sP"),
r:c=>c.toString(),U:c=>c.getTime()/1E3};return function(c){return c.replace(/(\\?)(.)/g,(h,b,m)=>""===b&&g[m]?g[m](this):m)}})();
(r=>{const x=(b,m)=>{var t=b.__mct__.get(m);if(t)return t.slice();const n=[];if(t=b.__anc__){const l=t.length;for(let w=0;w<l;){const B=t[w++].__fns__;B.has(m)&&n.push(B.get(m))}}else{const l=b.__anc__=[],w=B=>{const G=B.__inc__,J=G.length;for(let L=0;L<J;)w(G[L++]);l.includes(B)||(l.push(B),B=B.__fns__,B.has(m)&&n.push(B.get(m)))};w(b)}b.__mct__.set(m,n.slice());return n},v=(b,m)=>{const t=b.callable;return b.__hs?function(...n){const l=this.callSuper,w=x(m,b.name);let B=w.length-1;if(0===B)l&&delete this.callSuper;
else{const J=n.length,L=this.callSuper=(...A)=>{for(let u=A.length;u<J;)A[u]=n[u++];0===--B&&delete this.callSuper;A=w[B].callable.call(this,...A);this.callSuper=L;B++;return A}}const G=t.call(this,...n);l?this.callSuper=l:delete this.callSuper;return G}:t},p=(b,m)=>{m=m??b;if(m===b){b.__anc__=null;b.__mct__=new Map;var t=b.__dep__;for(var n=t.length;0<n;)p(t[--n])}t=m.__tgt__;n=b.__inc__;const l=n.length;for(let w=0;w<l;)p(n[w++],m);for(const [w,B]of b.__fns__)b=B instanceof d?v(B,m):B,t[w]!==b&&
(t[w]=b)},k=b=>b.__meta__??(b.__meta__=new f(null,null,b)).include(b.klass,!0),a=b=>{const m=function(...t){return this.initialize(...t)??this};m.prototype=Object.create(b.prototype);return m},d=a(Object),f=r.Module=a(Object);d.prototype.initialize=function(b,m,t){this.module=b;this.name=m;this.callable=t;this.__hs=t.toString().includes("callSuper")};var e=f.prototype;e.initialize=function(b,m,t){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=t;b&&(this.__displayName=
b);this.include(m,!0)};e.include=function(b,m){if(b){if(b.__fns__)this.__inc__.push(b),b.__dep__.push(this);else{var t=b.extend,n=b.include;t&&(t.__fns__||"function"!==typeof t)&&this.extend(t);if(n&&(n.__fns__||"function"!==typeof n)){t=n.length;for(let l=0;l<t;)this.include(n[l++],!0)}for(const l of Object.keys(b))n=b[l],("extend"!==l&&"include"!==l||!n.__fns__&&"function"===typeof n)&&this.__fns__.set(l,n?.__fns__||"function"!==typeof n?n:new d(this,l,n))}!0!==m&&p(this)}return this};e.includes=
function(b){if(b===this)return!0;const m=this.__inc__,t=m.length;for(let n=0;n<t;)if(m[n++].includes(b))return!0;return!1};e.instanceMethod=function(b){return x(this,b).pop()};const g=new f("Kernel",{extend:function(b){k(this).include(b)},isA:function(b){return"function"===typeof b&&this instanceof b||k(this).includes(b)}}),c=r.Class=a(f),h=c.prototype;h.initialize=function(b,m,t){"function"!==typeof m&&(t=m,m=Object);f.prototype.initialize.call(this,b);b=a(m);for(const n in this)b[n]===this[n]||
b.hasOwnProperty(n)||(b[n]=this[n]);b.prototype.constructor=b.prototype.klass=b;k(b).include(m.__meta__);b.__tgt__=b.prototype;m=m===Object?{}:m.__fns__?m:new f(m.prototype,!0);b.include(g,!0).include(m,!0).include(t,!0);p(b);return b};e=(b,m)=>{b.__inc__=[];b.__dep__=[];const t=b.__tgt__=b.prototype,n=b.__fns__=new Map;for(const G of Object.keys(t)){var l=n,w=l.set;var B=t[G];B=B?.__fns__||"function"!==typeof B?B:new d(b,G,B);w.call(l,G,B)}t.constructor=t.klass=b;for(const G in h)b[G]===h[G]||b.hasOwnProperty(G)||
(b[G]=h[G]);b.include(m);b.constructor=b.klass=c};e(d,g);e(f,g);e(c,f);p(k(d));p(k(f));k(c).include(f.__meta__);r.Singleton=new c("Singleton",{initialize:(b,m,t)=>new (new c(b,m,t))})})(global.JS={});
(r=>{class x extends Error{constructor(A,u,...z){super(...z);this.name="FetchError";this.status=A;this.url=u}}let v=0,p;const k=console.warn,a=Math,{abs:d,min:f,max:e,pow:g}=a,c=document,h=c.head,b=c.createElement.bind(c),m={},t={"":!0},n=c.fonts,l=A=>{const u=A.family.split('"').join("");[u,u+" "+A.weight].forEach(z=>{if(!t[z]){t[z]=!0;const q=m[z]??[];for(;q.length;)(z=q.pop())&&!z.destroyed&&z.sizeViewToDom()}})},w={},B=A=>{const u={};return(...z)=>{const q=JSON.stringify(z);return q in u?u[q]:
u[q]=A(...z)}},G=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,J=/\$(\d+)/g,L=r.myt={version:2.02306021558E7,generateGuid:()=>++v,hash:A=>A.split("").reduce((u,z)=>{u=(u<<5)-u+z.charCodeAt(0);return u&u},0),addEventListener:(A,u,z,q,y)=>{A.addEventListener(u,z,{capture:q||!1,passive:y||!1})},removeEventListener:(A,u,z,q)=>{A.removeEventListener(u,z,q||!1)},resolveName:(A,u)=>{if(A&&0!==A.length){u=u??global;var z=Array.isArray(A)?A:A.split("."),q=z.length;for(let y=0;y<q;y++)if(u=u[z[y]],null==u){k("resolveName failed for",
A,"at part",y,z[y]);return}return u}},resolveClassname:A=>{"string"===typeof A&&(A=L.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,u,z){const q=this._loadedScripts??(this._loadedScripts={});if(q[A])return k("script already loaded for src",A),null;q[A]=!0;const y=b("script");y.type="text/javascript";y.async=!1;if(u){let D=!1;y.onload=y.onreadystatechange=()=>{D||y.readyState&&"complete"!==
y.readyState||(D=!0,y.onload=y.onreadystatechange=null,u())}}y.src=A+(z?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());h.appendChild(y);return y},dumpStack:(A,u)=>{let z;"string"===typeof A&&(z=A,A=null);L.global.error.notify(u||"error",null,z,A)},getRandom:A=>{const u=a.random();return A?e(0,f(A(u),.9999999999)):u},getRandomArbitrary:(A,u,z)=>{const q=f(A,u);return L.getRandom(z)*(e(A,u)-q)+q},getRandomInt:(A,u,z)=>{const q=f(A,u);return a.floor(L.getRandom(z)*(e(A,u)-q+1)+q)},areFloatsEqual:(A,
u,z)=>{const q=d(A),y=d(u);return d(A-u)<=(q>y?y:q)*(null==z?1E-6:d(z))},areArraysEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;let z=A.length;if(z!==u.length)return!1;for(;z;)if(A[--z]!==u[z])return!1}return!0},areObjectsEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;for(const z in A)if(A[z]!==u[z])return!1;for(const z in u)if(A[z]!==u[z])return!1}return!0},getElement:(A,u)=>c.getElementsByTagName(A||"body")[0<u?u:0],loadFontFaces:(A,u)=>{const z=[];A.forEach(q=>{q=new FontFace(q.family,
"url("+q.url+")",q.options);z.push(q.load())});Promise.all(z).then(q=>{q.forEach(y=>{n.add(y);l(y)});u?.(q)})},loadFontFace:(A,u,z={},q)=>{A=new FontFace(A,"url("+u+")",z);A.loaded.then(y=>{n.add(y);l(y);q?.(y)});A.load()},registerForFontNotification:(A,u)=>{t[u]?A&&!A.destroyed&&A.sizeViewToDom():(m[u]??(m[u]=[])).push(A)},createBaseFontCSSRule:A=>{L.addCSSRule(L.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{A?.forEach(L.createStylesheetLink)},createStylesheetLink:A=>{const u=
b("link");u.rel="stylesheet";A&&(u.href=A);h.appendChild(u);return u},createStylesheet:()=>{const A=b("style");h.appendChild(A);return A.sheet},addCSSRule:(A,u,z,q)=>{A.insertRule(u+"{"+z+"}",q)},removeCSSRules:A=>{let u=A.cssRules.length;for(;u;)A.deleteRule(--u)},createInputPlaceholderCSSRule:(A,u,z,q=1)=>{let y=A.__sheet;y?L.removeCSSRules(y):y=A.__sheet=L.createStylesheet();A=A.getODE();A=A.id||(A.id="id"+ ++v);const D=[];u&&D.push("color:"+u);z&&D.push("font-family:"+z);q&&D.push("opacity:"+
q);L.addCSSRule(y,"#"+A+"::placeholder",D.join("; "),0)},chainSortFunc:(A,u)=>(z,q)=>{const y=A(z,q);return 0===y?u(z,q):y},getAlphaObjSortFunc:B((A,u,z,q)=>{const y=u?1:-1;return(D,E)=>{D=D[A];E=E[A];q?("string"!==typeof D&&(D=""+D),"string"!==typeof E&&(E=""+E)):(D=D||"",E=E||"");z&&(D=D.toLowerCase(),E=E.toLowerCase());return D.localeCompare(E)*y}}),getNumericObjSortFunc:B((A,u)=>{const z=u?1:-1;return(q,y)=>{q=q[A]||0;y=y[A]||0;return(q-y)*z}}),dataURIToBlob:A=>{var u=A.indexOf(",");const z=A.slice(0,
u).split(":")[1].split(";")[0];A=A.slice(u+1);if(z.startsWith("text/"))A=decodeURIComponent(A);else{A=atob(A);u=A.length;const q=new Uint8Array(u);for(;u;)q[--u]=A.charCodeAt(u);A=q}return new Blob([A],{type:z})},formatAsPercentage:(A,u=2)=>{switch(typeof A){case "number":return u=f(16,e(0,u)),A=a.round(e(0,f(1,A))*g(10,2+u))/g(10,u),(0===A%1?A:A.toFixed(u))+"%";case "string":return A;default:return k("formatAsPercentage: expects a number"),A}},memoize:B,debounce:(A,u,z)=>{const q="__DBTO_"+ ++v;
return function(){const y=this,D=y[q],E=arguments,I=z&&!D;clearTimeout(D);y[q]=setTimeout(function(){y[q]=null;z||A.apply(y,E)},u);I&&A.apply(y,E)}},createFixedThresholdCounter:(A,u,z,q)=>{var y=L.AccessorSupport.generateName;const D="function"===typeof A||A instanceof JS.Module,E={};q=q||y("counter",z);const I=y(q,"increment");y=y(q,"decrement");if(void 0!==(D?A.instanceMethod(I):A[I]))return k("Increment: Abort clobber",I,A),!1;if(void 0!==(D?A.instanceMethod(y):A[y]))return k("Decrement: Abort clobber",
y,A),!1;E[I]=function(){const K=this[q]+1;this[q]=K;this.fireEvent(q,K);K===u&&this.set(z,!0)};E[y]=function(){const K=this[q];if(0!==K){var N=K-1;this[q]=N;this.fireEvent(q,N);K===u&&this.set(z,!1)}};A[D?"include":"extend"](E);return!0},makeURLSearchParams:(A={})=>{const u=new URLSearchParams;for(const z in A){const q=A[z];void 0!==q&&u.set(z,q)}return u},doFetch:(A,u,z,q,y,D)=>fetch(A,u).then(E=>{if(!E.ok)throw new x(E.status,A,E.statusText);return E}).then(E=>z?E.text():E.json()).then(E=>{if(q)try{if(z)q(E);
else{if(!1===E.success)throw new x(200,A,E.message);q(E.data)}}catch(I){throw E=new x(200,A,I.message),E.stack=I.stack,E;}}).catch(E=>{if(y){if("FetchError"!==E.name){const I=new x(0,A,E.message);I.stack=E.stack;E=I}y(E)}}).finally(()=>{D?.()}),I18N:{setLocale:A=>{p=A},getLocale:()=>p,addDictionary:(A,u)=>{w[u]=Object.assign(w[u]??{},A)},setDictionary:(A,u)=>{w[u]=A??{}},get:(A,...u)=>{var z=p??=(navigator.language??"en").split("-")[0].toLowerCase();z=(w[z]??w.en??{})[A];return null!=z?0<u.length?
z.replaceAll(G,(q,y,D,E)=>D&&E?1==u[parseInt(y)]?D:E:"").replaceAll(J,(q,y)=>u[y]):z:A}}};n.onloadingdone=A=>{A.fontfaces.forEach(u=>{l(u)})}})(global);
(r=>{const x=(p,k)=>{p.startsWith('"')&&(p=p.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return k?JSON.parse(p):p}catch(a){}},v=r.Cookie={defaults:{raw:!1,json:!1},read:(p,k)=>{k={...v.defaults,...k};const a=k.raw?c=>c:c=>decodeURIComponent(c.split("+").join(" "));k=k.json;const d=document.cookie.split("; "),f=d.length,e=p?void 0:{};for(let c=0;c<f;){var g=d[c++].split("=");const h=a(g.shift());g=a(g.join("="));if(p){if(p===h)return x(g,k)}else e[h]=x(g,k)}return e},write:(p,k,a)=>
{a={...v.defaults,...a};if("number"===typeof a.expires){const d=a.expires,f=a.expires=new Date;f.setDate(f.getDate()+d)}k=a.json?JSON.stringify(k):String(k);return document.cookie=[a.raw?p:encodeURIComponent(p),"=",a.raw?k:encodeURIComponent(k),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.samesite?"; samesite="+a.samesite:"",a.secure?"; secure":""].join("")},remove:(p,k)=>void 0!==v.read(p,k)?(v.write(p,"",{...k,expires:-1}),!0):!1}})(myt);
(r=>{const x=console.error,v=global.localStorage,p=(a,d,f)=>{if(0<d){const e="__timerId_"+f;(f=k[e])&&clearTimeout(f);k[e]=setTimeout(()=>{a();delete k[e]},d)}else a()},k=r.LocalStorage={hasDatum:(a,d)=>{if(a&&(d=k.getItem(d??"myt")))try{return null!=JSON.parse(d)[a]}catch(f){x(f)}return!1},getDatum:(a,d)=>{if(a&&(d=k.getItem(d??"myt")))try{const f=JSON.parse(d);if("object"===typeof f)return f[a]}catch(f){x(f)}},setDatum:(a,d,f,e)=>{f=f??"myt";p(()=>{const g=k.getData(f);g[a]=d;k.setItem(f,JSON.stringify(g))},
e,f+"___"+a)},removeDatum:(a,d,f)=>{d=d??"myt";p(()=>{const e=k.getData(d);delete e[a];k.setItem(d,JSON.stringify(e))},f,d+"___"+a)},hasData:a=>null!=k.getItem(a??"myt"),getData:a=>{if(a=k.getItem(a??"myt"))try{return JSON.parse(a)}catch(d){x(d)}return{}},setData:(a,d,f)=>{d=d??"myt";a??={};return"object"===typeof a?(p(()=>{k.setItem(d,JSON.stringify(a))},f,d),!0):!1},removeData:(a,d)=>{a=a??"myt";p(()=>{k.removeItem(a)},d,a)},getLength:()=>v.length,getKey:a=>v.key(a),getItem:a=>v.getItem(a),setItem:(a,
d)=>{v.setItem(a,d)},removeItem:a=>{v.removeItem(a)},clear:()=>{v.clear()},get:a=>k.getItem(a),set:(a,d)=>{k.setItem(a,d)},remove:a=>{k.removeItem(a)},clearAll:()=>{k.clear()}}})(myt);
(r=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,v=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,p=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;r.URI=new JS.Class("URI",{initialize:function(k,a){k&&this.parse(k,a)},setSource:function(k){this.source=k},setProtocol:function(k){this.protocol=
k},setAuthority:function(k){this.authority=k},setUserInfo:function(k){this.userInfo=k},setUser:function(k){this.user=k},setPassword:function(k){this.password=k},setHost:function(k){this.host=k},setPort:function(k){this.port=k},setRelative:function(k){this.relative=k},setPath:function(k){this.path=k},setDirectory:function(k){this.directory=k},setFile:function(k){this.file=k},setQuery:function(k){this.query=k},setAnchor:function(k){this.anchor=k},parse:function(k,a){const d=this,[f,e,g,c,h,b,m,t,n,
l,w,B,G,J]=(a?p:v).exec(k)??[];d.setSource(f??"");d.setProtocol(e??"");d.setAuthority(g??"");d.setUserInfo(c??"");d.setUser(h??"");d.setPassword(b??"");d.setHost(m??"");d.setPort(t??"");d.setRelative(n??"");d.setPath(l??"");d.setDirectory(w??"");d.setFile(B??"");d.setQuery(G??"");d.setAnchor(J??"");d.queryPairs={};d.query.replace(x,(L,A,u)=>{A&&(d.queryPairs[A]=u)})},decodeQueryParam:k=>decodeURIComponent(k).split("+").join(" "),getQuery:function(){var k=this.queryPairs;const a=[];for(const d in k)a.push(d+
"="+encodeURIComponent(this.getQueryParam(d)));k=a.join("&");return 0<k.length?"?"+k:k},getQueryParam:function(k){k=this.queryPairs[k];return null==k?void 0:this.decodeQueryParam(k)},setQueryParam:function(k,a){this.queryPairs[encodeURIComponent(k)]=encodeURIComponent(a)},removeQueryParam:function(k){delete this.queryPairs[k]},getPathParts:function(k){const a=this.path.split("/");if(!k)for(k=a.length;k;)0===a[--k].length&&a.splice(k,1);return a},toString:function(k){const a=this.path;k=k?this.query?
"?"+this.query:"":this.getQuery();const d=this.anchor;let f=this.toStringThroughPort();a?f+=a:this.host&&(k||d)&&(f+="/");k&&(f+=k);d&&(f+="#"+d);return f},toStringThroughPort:function(){const k=this.protocol,a=this.host,d=this.userInfo,f=this.port;let e="";k&&(e+=k+"://");d&&a&&(e+=d+"@");a&&(e+=a,f&&(e+=":"+f));return e}})})(myt);
(r=>{const x=Math,v=x.PI,p=x.cos,k=x.sin,a=x.sqrt,d=r.Geometry={getClosestPointOnALineToAPoint:(f,e,g,c,h,b,m)=>{g-=f;c-=e;h=(g*(h-f)+c*(b-e))/(g*g+c*c);m&&(h=x.min(1,x.max(0,h)));return{x:f+g*h,y:e+c*h}},isPointInPath:(f,e,g,c)=>{"object"===typeof f&&(c=g,g=e,e=f.y,f=f.x);if(d.rectContainsPoint(f,e,g)&&(g=c.length,6<=g)){let h=!1,b=c[0],m=c[1],t,n;for(;g;)n=c[--g],t=c[--g],n>e!==m>e&&f<(b-t)*(e-n)/(m-n)+t&&(h=!h),b=t,m=n;return h}return!1},rectContainsPoint:(f,e,g,c,h,b)=>{"object"===typeof f&&(b=
h,h=c,c=g,g=e,e=f.y,f=f.x);"object"===typeof g&&(b=g.height,h=g.width,c=g.y,g=g.x);return f>=g&&e>=c&&f<=g+h&&e<=c+b},circleContainsPoint:(f,e,g,c,h)=>d.measureDistance(f,e,g,c,!0)<=h*h,measureDistance:(f,e,g,c,h)=>{f=g-f;e=c-e;e=f*f+e*e;return h?e:a(e)},degreesToRadians:f=>f*v/180,radiansToDegrees:f=>180*f/v,circleContainsLatLng:(f,e,g,c,h,b)=>d.measureLatLngDistance(f,e,g,c,b)<=h,measureLatLngDistance:(f,e,g,c,h)=>{void 0===h&&(h=6371);f=d.degreesToRadians(f);e=d.degreesToRadians(e);g=d.degreesToRadians(g);
c=d.degreesToRadians(c);return h*x.acos(k(f)*k(g)+p(f)*p(g)*p(c-e))},polarToCartesian:(f,e,g,c)=>{g??=0;c??=0;e%=360;if(0===e)e=f,f=0;else if(90===e)e=0;else if(180===e)e=-f,f=0;else if(270===e)e=0,f=-f;else{const h=d.degreesToRadians(e);e=f*p(h);f*=k(h)}return[g+e,c+f]},cartesianToPolar:(f,e,g,c,h)=>{g??=0;c??=0;f-=g;c=e-c;e=a(f*f+c*c);c=x.atan2(c,f);0>c&&(c+=2*v);return[e,h?c:d.radiansToDegrees(c)]}}})(myt);
(r=>{const x=JS.Module,v=console.log,p=r.dumpStack;r.Observable=new x("Observable",{attachObserver:function(k,a,d){return k&&a&&d?(this.getObservers(d).push(a,k),!0):!1},detachObserver:function(k,a,d){if(k&&a&&d){var f=this.__obsbt;if(f&&(d=f[d])){f=!1;for(let e=d.length-2;0<=e;e-=2){const [g,c]=d.slice(e);k===c&&a===g&&(d.splice(e,2),f=!0)}return f}}return!1},detachAllObservers:function(){const k=this.__obsbt;if(k)for(const a in k){const d=k[a];for(let f=d.length-2;0<=f;f-=2){const [e,g]=d.slice(f);
g&&e&&("function"===typeof g.detachFrom&&g.detachFrom(this,e,a)||d.splice(f,2))}}},getObservers:function(k){let a;return(a=this.__obsbt??(this.__obsbt={}))[k]??(a[k]=[])},hasObservers:function(k){const a=this.__obsbt;return a?0<a[k]?.length:!1},createEvent:function(k,a){return{source:this,type:k,value:a}},fireEvent:function(k,a,d){if(d=d??(this.hasObservers(k)?this.__obsbt[k]:null)){const f={source:this,type:k,value:a},e=this.__aet??(this.__aet={});if(e[k])r.global.error.notify("warn","eventLoop",
"Abort refiring event:"+k,null,{observable:this,type:k,value:a});else{e[k]=!0;for(a=d.length-2;0<=a;a-=2){const [g,c]=d.slice(a);if(c&&g)try{if("function"===typeof g){if(g.call(c,f))break}else if(c[g](f))break}catch(h){p(h),v("Additional context",g,c)}}e[k]=!1}}}});r.Observer=new x("Observer",{valueFromEvent:k=>k&&"object"===typeof k&&k.type?k.value:k,syncTo:function(k,a,d,f,e){f??=d;try{this[a](k.createEvent(d,k.get(f)))}catch(g){p(g)}e||this.attachTo(k,a,d,e)},isAttachedTo:function(k,a,d){if(k&&
a&&d){var f=this.__obt;if(f&&(d=f[d]))for(f=d.length-2;0<=f;f-=2){const [e,g]=d.slice(f);if(k===g&&a===e)return!0}}return!1},getObservables:function(k){let a;return(a=this.__obt??(this.__obt={}))[k]??(a[k]=[])},hasObservables:function(k){const a=this.__obt;return a?0<a[k]?.length:!1},attachTo:function(k,a,d,f){if(k&&a&&d){const e=this.getObservables(d);if(f){const g=this,c=a;this.__methodNameCounter??(this.__methodNameCounter=0);a="__DO_ONCE_"+this.__methodNameCounter++;this[a]=h=>{g.detachFrom(k,
a,d);delete g[a];return g[c](h)}}if(k.attachObserver(this,a,d))return e.push(a,k),!0}return!1},detachFrom:function(k,a,d){if(k&&a&&d){var f=this.__obt;if(f&&(f=f[d])){let e=!1;for(let g=f.length-2;0<=g;g-=2){const [c,h]=f.slice(g);k===h&&a===c&&k.detachObserver(this,a,d)&&(f.splice(g,2),e=!0)}return e}}return!1},detachFromAllObservables:function(){var k=this.__obt;if(k)for(const [a,d]of Object.entries(k)){for(k=d.length-2;0<=k;k-=2){const [f,e]=d.slice(k);e.detachObserver(this,f,a)}d.length=0}},constrain:function(k,
a){if(k&&a){const f=a.length;if(0!==f%2)v("Observables uneven",this);else{var d;const e=(d=this.__cbmn??(this.__cbmn={}))[k]??(d[k]=[]);if(0<e.length)v("Constraint exists for "+k+" on "+this);else{for(d=0;d<f;d+=2){const [g,c]=a.slice(d);g&&c&&(this.attachTo(g,k,c),e.push(g,c))}try{this[k]()}catch(g){p(g)}}}}},releaseConstraint:function(k){if(k){var a=this.__cbmn;if(a&&(a=a[k])){for(let d=a.length;0<=d;d-=2){const [f,e]=a.slice(d);this.detachFrom(f,k,e)}a.length=0}}},releaseAllConstraints:function(){const k=
this.__cbmn;if(k)for(const a in k)this.releaseConstraint(a)}})})(myt);(r=>{const x=console.warn,v=r.global=new JS.Singleton("Global",{include:[r.Observable],initialize:()=>{},register:(p,k)=>{v.hasOwnProperty(p)&&(x("Global key in use",p),v.unregister(p));v[p]=k;v.fireEvent("register"+p,k)},unregister:p=>{if(v.hasOwnProperty(p)){const k=v[p];delete v[p];v.fireEvent("unregister"+p,k)}else x("Global key not in use",p)}})})(myt);
(r=>{let x;new JS.Singleton("GlobalError",{include:[r.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);r.global.register("error",x)},setConsoleLogging:v=>{x.consoleLogging=v},setStackTraceLimit:v=>{Error.stackTraceLimit=x.stackTraceLimit=v},notify:(v,p,k,a,d)=>{a??=Error(k??p);a=a.stack??a.stacktrace;x.fireEvent(p??"error",{msg:k,stacktrace:a,...d});if(x.consoleLogging&&v)console[v](a)}})})(myt);
(r=>{const x=global,v=x.getComputedStyle,p=document,k=Math.max,a=e=>{const {zIndex:g,opacity:c}=v(e);if("auto"===g){if(1===parseInt(c,10)){let h=0;e=e.childNodes;let b=e.length;for(;b;){const m=e[--b];1===m.nodeType&&(h=k(h,a(m)))}return h}return 0}return parseInt(g,10)},d=(e,g)=>{const c=[];for(;e;){c.push(e);if(e===g)break;e=e.parentNode}return c},f=r.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(e,g,c)=>{e=p.createElement(e);for(const h in c)e[h]=c[h];for(const h in g)e.style[h]=
g[h];return e},isDomElementVisible:e=>{if("INPUT"!==e.nodeName||"hidden"!==e.type)for(;e;){if(e===p)return!0;const {display:g,visibility:c}=v(e);if("none"===g||"hidden"===c)break;e=e.parentNode}return!1},getZIndexRelativeToAncestor:(e,g)=>{if(e&&g)for(e=d(e,g),g=e.length-1;g;){const c=v(e[--g]),h=c.zIndex,b="auto"===h;if(0===g||!b||1!==parseInt(c.opacity,10))return b?0:parseInt(h,10)}return 0},getAncestorArray:d,getHighestZIndex:a,getRelativePosition:(e,g)=>{if(e){let c=0,h=0;for(;e&&"BODY"!==e.nodeName&&
e!==g;)if(c+=e.offsetLeft,h+=e.offsetTop,(e=e.offsetParent)&&"BODY"!==e.nodeName){const {borderLeftWidth:b,borderTopWidth:m}=v(e);c+=parseInt(b,10)-e.scrollLeft;h+=parseInt(m,10)-e.scrollTop}return{x:c,y:h}}},getTruePosition:e=>{if(e)return e=e.getBoundingClientRect(),e.left+=x.scrollX,e.top+=x.scrollY,e},simulateDomEvent:(e,g,c)=>{if(e){const h={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},b={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(c)for(const t in c)h[t]=c[t];let m;for(const t in b)if(b[t].test(g)){m=t;break}if(!m)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(p.createEvent)c=p.createEvent(m),"HTMLEvents"===m?c.initEvent(g,h.bubbles,h.cancelable):c.initMouseEvent(g,h.bubbles,h.cancelable,p.defaultView,h.button,h.pointerX,h.pointerY,h.pointerX,h.pointerY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,null),e.dispatchEvent(c);
else{h.clientX=h.pointerX;h.clientY=h.pointerY;c=p.createEventObject();for(const t in h)c[t]=h[t];e.fireEvent("on"+g,c)}}},getScrollbarSize:r.memoize(()=>{const e=p.body,g=f.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});e.appendChild(g);const c=g.offsetWidth-g.clientWidth;e.removeChild(g);return c})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(e){if(Array.isArray(e)){const [g,
c]=e;this.__oE=g;this.__iE=c;this.__iS=c.style;this.__oS=g.style;c.model=g.model=this}else this.__oE=this.__iE=e,this.__iS=this.__oS=e.style,e.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(e){this.__iE.className=this.domClass=e},addDomClass:function(e){const g=this.__iE.className;this.setDomClass((g?
g+" ":"")+e)},removeDomClass:function(e){var g=this.__iE.className;if(g){g=g.split(" ");let c=g.length;for(;c;)g[--c]===e&&g.splice(c,1);this.setDomClass(g.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(e){this.__iE.id=this.domId=e},setZIndex:function(e){this.__oS.zIndex=e},setStyleProperty:function(e,g){this.__iS[e]=g},getPagePosition:function(e){return f["get"+(e?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){f.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return a(this.__iE)},getHighestChildZIndex:function(e){const g=this.__iE.childNodes;let c=g.length,h=0;for(;c;){const b=g[--c];1===b.nodeType&&b!==e&&(h=k(h,a(b)))}return h},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(e,g){(g?this.__iE:this.__oE).scrollTop=e||0}})})(myt);
(r=>{let x;const v=k=>{for(;k.lastChild;)k=k.lastChild;return k},p=(k,a)=>{x.lastTraversalWasForward=k;let d=document.body,f=d;var e=document.activeElement;let g=f,c;const h=k?"getNextFocus":"getPrevFocus";e&&(g=f=e,(e=f.model)??(e=x.findModelForDomElement(f)),e&&(a=e.getFocusTrap(a))&&(d=a.getIDE()));for(;g;){if(g.model&&g.model[h]&&(c=g.model[h]()))g=c.getIDE();else if(k)if(g.firstChild)g=g.firstChild;else{if(g===d)return f.model;if(g.nextSibling)g=g.nextSibling;else for(;g&&(g=g.parentNode,g!==
d);)if(g.nextSibling){g=g.nextSibling;break}}else g=g===d?v(d):g.previousSibling?v(g.previousSibling):g.parentNode;if(g===f)return f.model;if(1===g.nodeType)if((e=g.model)&&e instanceof r.View){if(e.isFocusable())return e}else if(a=g.nodeName,!("A"!==a&&"AREA"!==a&&"INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a&&"BUTTON"!==a||g.disabled||isNaN(g.tabIndex))&&r.DomElementProxy.isDomElementVisible(g)&&(e=x.findModelForDomElement(g),!e?.searchAncestorsOrSelf(b=>!0===b.maskFocus))){g.focus();x.focusedDom=g;
break}}};new JS.Singleton("GlobalFocus",{include:[r.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;r.global.register("focus",x)},setFocusedView:k=>{if(x.focusedView!==k){x.prevFocusedView=x.focusedView;if(x.focusedView=k)x.focusedDom=null;x.fireEvent("focused",k)}},notifyFocus:k=>{x.focusedView!==k&&x.setFocusedView(k)},notifyBlur:k=>{x.focusedView===k&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:k=>{p(!0,k)?.focus()},prev:k=>{p(!1,k)?.focus()},findModelForDomElement:k=>{for(;k;){let a=k.model;if(a&&a instanceof r.View)return a;k=k.parentNode}}})})(myt);
(r=>{const x=JS.Module,v=r.global,p=v.focus,k=()=>({source:null,type:null,value:null}),a=m=>{m=m.value??m;return(m.target??m.srcElement).model},d=r.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:k(),getKeyFromEvent:m=>m.value.key,getCodeFromEvent:m=>m.value.code,isEnterKeyEvent:m=>m.value.code===v.keys.CODE_ENTER,isEscKeyEvent:m=>m.value.code===v.keys.CODE_ESC,isShiftKeyEvent:m=>v.keys.isShiftCode(m.value.code)},createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,
t,n,d)??this.callSuper(m,t,n)}}),f=r.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:k(),getMouseFromEvent:m=>({x:m.value.pageX,y:m.value.pageY}),getMouseFromEventRelativeToView:(m,t)=>{t=t.getPagePosition();m=f.getMouseFromEvent(m);m.x-=t.x;m.y-=t.y;return m}},createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,t,n,f,!0)??this.callSuper(m,t,n)}}),e=r.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:k(),getScrollFromEvent:m=>{const {scrollLeft:t,scrollTop:n}=a(m);return{x:t,y:n}}},createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,t,n,e)??this.callSuper(m,t,n)}}),g=r.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:k()},createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,t,n,g,!1)??this.callSuper(m,t,n)}}),c=r.FocusObservable=
new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:k()},initNode:function(m,t){this.focusable=!1;this.focusIndicator=!0;this.callSuper(m,t)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(m){this.focused!==m&&(this.focused=m,this.inited&&(this.fireEvent("focused",m),m?p.notifyFocus(this):p.notifyBlur(this)))},setFocusable:function(m){if(this.focusable!==m){const t=this.focusable;(this.focusable=m)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):t&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",m)}},setFocusIndicator:function(m){this.focusIndicator!==m&&(this.focusIndicator=m,this.focused&&(m?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(p.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(m=>!0===m.maskFocus)},focus:function(m){this.isFocusable()&&this.getIDE().focus({preventScroll:m})},blur:function(){this.getIDE().blur()},__doFocus:function(m){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(m){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const m=this.getIDS();m.outlineWidth="thin";m.outlineColor="#8bf";m.outlineStyle="solid";m.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(m,t,n){if(c.EVENT_TYPES[n]){const l=this;return w=>{w??=window.event;if(l._ignoreFocus)w.cancelBubble=!0,w.stopPropagation?.(),w.preventDefault();
else{var B=c.EVENT;B.source=l;B.type=w.type;B.value=w;m[t](B)||(w.cancelBubble=!0,w.stopPropagation?.());B.source=void 0}}}return this.callSuper(m,t,n)}}),h=r.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:k()},createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,t,n,h)??this.callSuper(m,t,n)}}),b=r.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:k()},
createDomHandler:function(m,t,n){return this.createStandardDomHandler(m,t,n,b,!0)??this.callSuper(m,t,n)}});r.DomObservable=new x("DomObservable",{attachDomObserver:function(m,t,n,l,w){if(m&&t&&n){l=!!l;const B=this.createDomHandler(m,t,n);if(B){const G=this.__dobsbt??(this.__dobsbt={}),J=G[n];J?J.push(m,t,B,l):G[n]=[m,t,B,l];r.addEventListener(this.getDomElementForDomObservable(n),n,B,l,w);return!0}}return!1},getDomElementForDomObservable:function(m){return this.getIDE()},createDomHandler:(m,t,n)=>
null,createStandardDomHandler:function(m,t,n,l,w){if(l.EVENT_TYPES[n]){const B=this,G=l.EVENT;return J=>{J??=window.event;G.source=B;G.type=J.type;G.value=J;m[t](G)||(J.cancelBubble=!0,J.stopPropagation?.(),w&&J.preventDefault());G.source=void 0}}},detachDomObserver:function(m,t,n,l){if(m&&t&&n){l=!!l;var w=this.__dobsbt;if(w&&(w=w[n])){const B=this.getDomElementForDomObservable(n);let G=!1;for(let J=w.length-4;0<=J;J-=4){const [L,A,u,z]=w.slice(J,J+4);m===L&&t===A&&l===z&&(B&&r.removeEventListener(B,
n,u,l),w.splice(J,4),G=!0)}return G}}return!1},detachAllDomObservers:function(){var m=this.__dobsbt;if(m)for(const [t,n]of Object.entries(m)){for(m=n.length-2;0<=m;m-=4){const [l,w]=n.slice(m);r.removeEventListener(this.getDomElementForDomObservable(t),t,l,w)}n.length=0}}});r.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:a},attachToDom:function(m,t,n,l,w){if(m&&t&&n){l=!!l;let B;const G=(B=this.__dobt??(this.__dobt={}))[n]??(B[n]=[]);m.attachDomObserver(this,t,n,l,w)&&G.push(l,t,
m)}},detachFromDom:function(m,t,n,l){if(m&&t&&n){l=!!l;var w=this.__dobt;if(w&&(w=w[n])){let B=!1;for(let G=w.length-3;0<=G;G-=3){const [J,L,A]=w.slice(G);m===A&&t===L&&l===J&&m.detachDomObserver(this,t,n,l)&&(w.splice(G,3),B=!0)}return B}}return!1},detachFromAllDomSources:function(){var m=this.__dobt;if(m)for(const [t,n]of Object.entries(m)){for(m=n.length-3;0<=m;m-=3){const [l,w,B]=n.slice(m);B.detachDomObserver(this,w,t,l)}n.length=0}}})})(myt);
(r=>{let x;const v=r.global,p=v.focus,k=new Set,a="Firefox"===BrowserDetect.browser,d=a?"OSLeft":"MetaLeft",f=a?"OSRight":"MetaRight",e=r.KeyObservable.getCodeFromEvent,g=()=>k.has("ShiftLeft")||k.has("ShiftRight"),c=()=>k.has("ControlLeft")||k.has("ControlRight"),h=()=>k.has("AltLeft")||k.has("AltRight"),b=()=>k.has(d)||k.has(f),m=(n,l)=>{switch(n){case "Backspace":return n=l.nodeName,!("TEXTAREA"===n||"INPUT"===n&&("text"===l.type||"number"===l.type||"password"===l.type)||"DIV"===n&&"true"===l.contentEditable&&
l.firstChild);case "Tab":return!0}return!1},t=(n,l)=>{["keydown","keypress","keyup"].forEach(w=>{x[l](n,"__hndl_"+w,w)})};new JS.Singleton("GlobalKeys",{include:[r.DomElementProxy,r.DomObservable,r.DomObserver,r.KeyObservable,r.Observable,r.Observer],initialize:function(){v.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(n=>{x["CODE_"+n]="Key"+n});"1234567890".split("").forEach(n=>{x["CODE_"+n]="Digit"+n});x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(p,"__hndl_focused","focused");t(x,"attachToDom");global.onblur=()=>{k.clear()}},isShiftKeyDown:g,isControlKeyDown:c,isAltKeyDown:h,isMetaKeyDown:b,isShiftCode:n=>
"ShiftLeft"===n||"ShiftRight"===n,isControlCode:n=>"ControlLeft"===n||"ControlRight"===n,isAltCode:n=>"AltLeft"===n||"AltRight"===n,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?b():c(),ignoreFocusTrap:()=>h(),__hndl_focused:n=>{(n=n.value)?(t(x,"detachFromDom"),t(n,"attachToDom")):((n=p.prevFocusedView)&&t(n,"detachFromDom"),t(x,"attachToDom"))},__hndl_keydown:n=>{const l=e(n);n=n.value;m(l,n.target)&&n.preventDefault();b()&&"ShiftLeft"!==l&&"ShiftRight"!==l&&"ControlLeft"!==l&&"ControlRight"!==
l&&"AltLeft"!==l&&"AltRight"!==l?(x.fireEvent("keydown",l),x.fireEvent("keyup",l)):(k.add(l),"Tab"===l&&(n=h(),g()?p.prev(n):p.next(n)),x.fireEvent("keydown",l))},__hndl_keypress:n=>{x.fireEvent("keypress",e(n))},__hndl_keyup:n=>{const l=e(n);n=n.value;m(l,n.target)&&n.preventDefault();k.delete(l);x.fireEvent("keyup",l)}})})(myt);
(r=>{const x=JS.Module,v=Math.max,p=(c,h,b,m,t=0)=>{const n=c.length;for(let l=b;t<n;t++)e(c[t],h,l),m&&(l+=b)},k=(c,h,b,m=0)=>{const t=c.length;for(let n=h;m<t;)c[m++].crossPos+=n,b&&(n+=h)},a=(c,h)=>h?c.getFlexBasisWidth():c.getFlexBasisHeight(),d=(c,h,b,m)=>{c[h?"setWidthViaFlex":"setHeightViaFlex"]((m?a(c,h):0)+b)},f=(c,h,b)=>{c[h?"setXViaFlex":"setYViaFlex"](b,!1)},e=(c,h,b)=>{c[h?"setXViaFlex":"setYViaFlex"](b,!0)},g=(c,h,b)=>{c[h]!==b&&(c[h]=b,c.inited&&c.fireEvent(h,b),c.updateFlexboxLayout())};
r.FlexboxSupport=new x("FlexboxSupport",{initNode:function(c,h){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(c,h);this.updateFlexboxLayout()},setWidth:function(c){const h=this.width;this.callSuper(c);h!==this.width&&this.updateFlexboxLayout()},setHeight:function(c){const h=this.height;this.callSuper(c);h!==this.height&&this.updateFlexboxLayout()},
setDirection:function(c){g(this,"direction",c)},setWrap:function(c){g(this,"wrap",c)},setJustifyContent:function(c){g(this,"justifyContent",c)},setAlignItems:function(c){g(this,"alignItems",c)},setAlignContent:function(c){g(this,"alignContent",c)},setRowGap:function(c){g(this,"rowGap",v(0,c))},setColumnGap:function(c){g(this,"columnGap",v(0,c))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(c){this.set("totalBasisWidth",
c,!0)},setTotalBasisHeight:function(c){this.set("totalBasisHeight",c,!0)},ignoreSubviewForFlex:function(c){return c&&"function"===typeof c.ignoreFlex?c.ignoreFlex():!0},setFlexboxPaused:function(c,h){this.__flexboxPaused!==c&&((this.__flexboxPaused=c)||h||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(c){this.callSuper(c);c&&!this.ignoreSubviewForFlex(c)&&this.updateFlexboxLayout()},subviewRemoved:function(c){this.callSuper(c);!c||this.ignoreSubviewForFlex(c)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(c){this.callSuper(c);c&&this.ignoreSubviewForFlex(c)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(c){return c?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(c){return c?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(c){this._updateAgain=c},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const c=this;if(c.isOKToUpdateLayout()){var h=c.getSubviewsInLexicalOrder().filter(l=>!0!==c.ignoreSubviewForFlex(l)&&!0===l.visible),b=h.length;if(0<b){c.__isUpdatingFlexboxLayout=!0;var m=c.direction;const l=m.startsWith("row"),w=!l;var t=c.getWidthForFlexboxLayout(),n=c.getHeightForFlexboxLayout();const B=l?c.columnGap:c.rowGap,G=l?t:n,J=l?c.rowGap:c.columnGap;
n=l?n:t;const L=c.isWrapNotAllowed(),A=c.justifyContent,u=c.alignItems;t=L?"stretch":c.alignContent;m.endsWith("Reverse")&&h.reverse();let z=0,q=0,y=0,D=0,E={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:y,crossSize:0};m=[E];for(let I=0;I<b;){const K=h[I++],N=a(K,l),T=K.getShrink(),X=K.getGrow();!L&&0<E.items.length&&z+(0===D?0:B)+N>G&&(E.extraSize=G-z,y+=E.crossSize+J,q=v(q,z),D=z=0,E={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:y,crossSize:0},m.push(E));
0!==D&&(z+=B);0<T&&0<N&&(E.shrinkCount+=T,E.shrinkBasis+=N*T);0<X&&(E.growCount+=X);E.crossSize=v(E.crossSize,a(K,w));f(K,l,z);d(K,l,N);z+=N;E.items.push(K);D++}E.extraSize=G-z;y+=E.crossSize;q=v(q,z);if(c.isCompactOnMainAxis(l)){let I=m.reduce((K,N)=>null==K?N.extraSize:Math.min(K,N.extraSize),null);0!==I&&m.forEach(K=>{K.extraSize-=I})}c[l?"setTotalBasisWidth":"setTotalBasisHeight"](q);c[l?"setTotalBasisHeight":"setTotalBasisWidth"](y);h=m.length;1<h&&"wrapReverse"===c.wrap&&(m.forEach(I=>{I.crossPos=
y-(I.crossPos+I.crossSize)}),m.reverse());if(!c.isCompactOnCrossAxis(l))switch(b=n-y,t){default:case "start":break;case "end":k(m,b,!1);break;case "center":k(m,b/2,!1);break;case "spaceBetween":1<h&&k(m,b/(h-1),!0,1);break;case "spaceAround":b<=J?k(m,b/2,!1):(k(m,J/2,!1),b-=J,k(m,b/(2*h),!0),k(m,b/(2*h),!0,1));break;case "spaceEvenly":b<=2*J?k(m,b/2,!1):(k(m,J,!1),k(m,(b-2*J)/(h+1),!0));break;case "stretch":const I=b/h;let K=0;m.forEach(N=>{N.crossSize+=I;N.crossPos+=K;K+=I})}m.forEach(I=>{const K=
I.items;let N=I.extraSize;if(0<N)if(0<I.growCount){const P=N/I.growCount;let U=0;K.forEach(R=>{0<U&&e(R,l,U);const da=R.getGrow()*P;0<da&&(d(R,l,da,!0),U+=da)})}else{const P=K.length;switch(A){default:case "start":break;case "end":p(K,l,N,!1);break;case "center":p(K,l,N/2,!1);break;case "spaceBetween":1<P&&p(K,l,N/(P-1),!0,1);break;case "spaceAround":N<=B?p(K,l,N/2,!1):(p(K,l,B/2,!1),N-=B,p(K,l,N/(2*P),!0),p(K,l,N/(2*P),!0,1));break;case "spaceEvenly":N<=2*B?p(K,l,N/2,!1):(p(K,l,B,!1),N-=2*B,p(K,
l,N/(P+1),!0))}}else if(0>N&&0<I.shrinkCount){const P=I.shrinkBasis;let U=0;K.forEach(R=>{0>U&&e(R,l,U);const da=R.getShrink()*a(R,l)/P*v(N,-P);0>da&&(d(R,l,da,!0),U+=da)})}let T=!1;const X=I.crossSize,W=I.crossPos;K.forEach(P=>{switch(P.getAlignSelf()||u){case "start":f(P,w,W);d(P,w,a(P,w),!1);break;case "end":f(P,w,W+X-a(P,w));d(P,w,a(P,w),!1);break;case "center":f(P,w,W+(X-a(P,w))/2);d(P,w,a(P,w),!1);break;case "baseline":T=!0;f(P,w,W+(X-a(P,w))/2+P.getFlexBaselineOffset(l));d(P,w,a(P,w),!1);break;
default:f(P,w,W),d(P,w,X,!1)}});T&&c.updateFlexboxLayoutBaselineAdjustment(K,l,W)});c.__isUpdatingFlexboxLayout=!1;c.isUpdateAgain()&&!c.__UPDATE_AGAIN_LOOP_PROTECTION&&(c.setUpdateAgain(!1),c.__UPDATE_AGAIN_LOOP_PROTECTION=!0,c.updateFlexboxLayout(),c.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else c.setTotalBasisWidth(0),c.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(c,h,b)=>{}});r.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(c){this.visible!==c&&(this.callSuper(c),
this.updateFlexboxLayoutFromChild())},setXViaFlex(c,h){h&&(c+=this.x);this.x!==c&&(this.__isFlexUpdate=!0,this.setX(c),this.__isFlexUpdate=!1)},setYViaFlex(c,h){h&&(c+=this.y);this.y!==c&&(this.__isFlexUpdate=!0,this.setY(c),this.__isFlexUpdate=!1)},setWidth:function(c){const h=this.width!==c;h&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(c);h&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(c){this.width!==c&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=
!0,this.setWidth(c),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(c){const h=this.height!==c;h&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(c);h&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(c){this.height!==c&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(c),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:c=>
0,setIgnoreFlex:function(c){this.__ignoreFlex!==c&&(this.__ignoreFlex=c,this.inited&&(this.fireEvent("ignoreFlex",c),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(c){c=v(0,c);this.grow!==c&&(this.grow=c,this.inited&&(this.fireEvent("grow",c),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(c){c=v(0,c);this.shrink!==c&&(this.shrink=c,this.inited&&(this.fireEvent("shrink",c),
this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(c){this.alignSelf!==c&&(this.alignSelf=c,this.inited&&(this.fireEvent("alignSelf",c),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const c=this.alignSelf;return"auto"===c||""===c?null:c},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&
!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(r=>{const x=console.log,v=new Map,p=new Map,k=(e,g)=>g+e.charAt(0).toUpperCase()+e.slice(1),a=e=>p.get(e)??(p.set(e,k(e,"set")),p.get(e)),d=e=>v.get(e)??(v.set(e,k(e,"get")),v.get(e)),f=(e,g)=>{let c;for(const h in g){const b=g[h],m=a(h);if(m in e)e[m](b);else e[h]!==b&&(e[h]=b,(c??=!1!==e.inited&&e.fireEvent)&&e.fireEvent(h,b))}};r.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:a,generateGetterName:d,generateName:k,createSetterFunction:(e,g)=>{const c=a(g);e[c]&&x("Overwriting setter",
c);e[c]=function(h){this[g]!==h&&(this[g]=h,this.inited&&this.fireEvent(g,h))}},createGetterFunction:(e,g)=>{const c=d(g);e[c]&&x("Overwriting getter",c);e[c]=function(){return this[g]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(e,g){e?.forEach(c=>{this[c]=g[c];delete g[c]})},callSetters:function(e){var g=this.earlyAttrs,c=this.lateAttrs;if(g||c){e={...e};if(g){var h=g.length;for(var b=0;b<h;){const t=g[b++];t in e&&(this.set(t,e[t]),delete e[t])}}let m;if(c)for(m=[],g=c.length,h=0;h<g;)b=c[h++],b in e&&(m.push(b,e[b]),delete e[b]);f(this,e);if(m)for(c=m.length,e=0;e<c;)this.set(m[e++],m[e++])}else f(this,e)},get:function(e){const g=d(e);return g in self?this[g]():
this[e]},set:function(e,g,c){if(!c&&(c=a(e),c in this))return this[c](g);this[e]!==g&&(this[e]=g,!1!==this.inited&&this?.fireEvent(e,g))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var r=this.__meta__;if(r){var x=Object.keys(r);for(let v=x.length;0<v;)delete r[x[--v]]}r=Object.keys(this);for(x=r.length;0<x;)delete this[r[--x]];this.destroyed=!0}}});
(r=>{const x=JS.Class,v=JS.Module,p=console.warn;let k;const a=(b,m)=>m?(k=b).__op??(k.__op=[]):b.__op;let d;const f=(b,m)=>m?(d=b).__actives??(d.__actives=[]):b.__actives,e=new x("AbstractPool",{include:[r.Destructible],initialize:()=>{},destroy:function(){const b=a(this);b&&(b.length=0);this.callSuper()},getInstance:function(){const b=a(this,!0);return b.length?b.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(b){a(this,!0).push(this.cleanInstance(b))},
cleanInstance:b=>{"function"===typeof b.clean&&b.clean();return b},destroyPooledInstances:function(){var b=a(this);if(b){let m=b.length;for(;m;){const t=b[--m];"function"===typeof t.destroy&&t.destroy()}}}}),g=r.SimplePool=new x("SimplePool",e,{initialize:function(b,m){this.callSuper();this.instanceClass=b??Object;this.instanceParent=m},createInstance:function(b){var m=this.instanceParent,t=this.instanceClass;return m?new t(m,b):new t}}),c=new v("TrackActives",{destroy:function(){const b=f(this);
b&&(b.length=0);this.callSuper()},getInstance:function(){const b=this.callSuper();f(this,!0).push(b);return b},putInstance:function(b){var m=f(this);if(m){const t=m.indexOf(b);if(-1<t){m.splice(t,1);this.callSuper(b);return}m="inactive"}else m="missing";p("Tried to put a "+m+" instance",b,this)},getActives:function(b){const m=f(this);if(m){if(b){const t=[],n=m.length;for(let l=0;n>l;){const w=m[l++];b.call(this,w)&&t.push(w)}return t}return m.slice()}return[]},putActives:function(){const b=f(this);
if(b){let m=b.length;for(;m;)this.putInstance(b[--m])}}}),h=r.TrackActivesPool=new x("TrackActivesPool",g,{include:[c]});r.TrackActivesMultiPool=new x("TrackActivesMultiPool",e,{initialize:function(b,m){this.callSuper();this.instanceClassesByKey=b;const t=this._poolsByClassName={},n=this.__pbk={};for(const l in b){const w=b[l];n[l]=t[w.__displayName]=new h(w,m)}},destroy:function(){const b=this.__pbk;for(const m in b)b[m].destroy();this.callSuper()},getInstance:function(){const b=arguments[0],m=this.__pbk[b];
if(m)return m.getInstance(arguments);p("No pool for key",b)},putInstance:function(b){const m=this._poolsByClassName[b.klass.__displayName];m?m.putInstance(b):p("No pool for obj",b)},destroyPooledInstances:function(){const b=this.__pbk;for(const m in b)b[m].destroyPooledInstances()},getActives:function(b){let m=[];const t=this.__pbk;for(const n in t)m.push(...t[n].getActives(b));return m},putActives:function(){const b=this.__pbk;for(const m in b)b[m].putActives()}});r.Reusable=new v("Reusable",{clean:()=>
{}})})(myt);
(r=>{const x=JS.Class,v=console.warn,p=[r.AccessorSupport,r.Destructible,r.Observable,r.Observer],k=(c,h)=>{if(h){const b=h.length;for(let m=0,t;b>m;)(t=h[m++])?c.extend(t):v("Missing mixin in",c.klass.__displayName)}c.inited=!1},a=(c,h)=>{if(h)for(;c;){if(h(c))return c;c=c.parent}},d=(c,h)=>{const b=h.name;void 0===c[b]?c[b]=h:v("Name in use",b)},f=(c,h)=>{const b=h.name;c[b]===h?delete c[b]:v("Name not in use",b)};let e;const g=c=>(e=c).__animPool??(e.__animPool=new r.TrackActivesPool(r.Animator,c));
r.Eventable=new x("Eventable",{include:p,initialize:function(c,h){k(this,h);this.init(c??{})},init:function(c){this.callSetters(c);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});r.Node=new x("Node",{include:p,extend:{getMatchingAncestorOrSelf:a,getMatchingAncestor:(c,h)=>a(c?c.parent:null,h),DEFAULT_PLACEMENT:"*"},initialize:function(c,h,b){k(this,b);this.initNode(c,h??{})},initNode:function(c,h){this.callSetters(h);
this.setParent(c);this.inited=!0},destroy:function(){const c=this.subnodes;this.isBeingDestroyed=!0;if(c)for(let h=c.length;0<h;)c[--h].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(c){this.placement=c},setDefaultPlacement:function(c){this.defaultPlacement=
c},setIgnorePlacement:function(c){this.ignorePlacement=c},setParent:function(c){if(c&&!this.ignorePlacement){var h=this.placement??c.defaultPlacement;h&&(c=c.determinePlacement(h,this))}if(this.parent!==c&&!c?.destroyed){if(h=this.parent){const b=h.getSubnodes().indexOf(this);-1<b&&(this.name&&f(h,this),h.subnodes.splice(b,1),h.subnodeRemoved(this))}if(this.parent=c)c.getSubnodes().push(this),this.name&&d(c,this),c.subnodeAdded(this);this.inited&&this.fireEvent("parent",c)}},setName:function(c){if(this.name!==
c){const h=this.parent;h&&this.name&&f(h,this);this.name=c;h&&c&&d(h,this)}},determinePlacement:function(c,h){let b=c.indexOf("."),m;0<=b&&(m=c.slice(b+1),c=c.slice(0,b));"*"===c&&(c=this.defaultPlacement)&&(b=c.indexOf("."),0<=b&&(m=c.slice(b+1)+(m?"."+m:""),c=c.slice(0,b)));return(c=this[c])?m?c.determinePlacement(m,h):c:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(c){if(c){if(c===this)return!0;if(this.parent)return this.getIDE&&
c.getIDE?c.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(c)}return!1},isAncestorOf:function(c){return c?c.isDescendantOf(this):!1},getLeastCommonAncestor:function(c){for(;c;){if(this.isDescendantOf(c))return c;c=c.parent}},searchAncestorsForClass:function(c){if(c)return this.searchAncestors(h=>h instanceof c)},searchAncestorsForModule:function(c){if(c)return this.searchAncestors(h=>h.isA(c))},searchAncestors:function(c){return a(this?this.parent:null,c)},searchAncestorsOrSelf:function(c){return a(this,
c)},getAncestors:function(){const c=[];let h=this;for(;h;)c.push(h),h=h.parent;return c},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:c=>{},subnodeRemoved:c=>{},animate:function(c){if(c){const h=g(this),b=h.getInstance({ignorePlacement:!0}),m=c.callback;delete c.callback;b.callSetters(c);b.next(t=>{h.putInstance(b)});m&&b.next(m);b.setRunning(!0);return b}},getActiveAnimators:function(c){if("string"===typeof c){const h=c;c=b=>b.attribute===h}return g(this).getActives(c)},
stopActiveAnimators:function(c,h=!1){c=this.getActiveAnimators(c);let b=c.length;if(0<b){const m=g(this);for(;b;){const t=c[--b];t.reset(h);h||m.putInstance(t)}}},doOnceOnIdle:function(c){this.attachTo(r.global.idle,c,"idle",!0)}})})(myt);
(r=>{let x=0,v=!1;const p=JS.Class,k=[],a=h=>{if(v!==h&&(v=h,!h)){for(h=k.length;h;){const b=k[--h];b.__deferredLayout=!1;b.update()}k.length=0}},d=(h,b,m,t)=>{const n=h.getSubviewIndex(b),l=h.subviews;-1<n&&(h=h.getSubviewIndex(m),l.splice(n,1),-1<h?(n<h&&--h,l.splice(h+(t?1:0),0,b)):t?l.push(b):l.unshift(b))},f=(h,b,m)=>{h[b]!==m&&(h[b]=m,h.inited&&(h.fireEvent(b,m),h.update()))},e=r.Layout=new p("Layout",r.Node,{extend:{incrementGlobalLock:()=>{1===++x&&a(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&a(!1)}},initNode:function(h,b){this.subviews=[];this.locked=!0;this.lockedCounter=1;const m=!0===b.locked;delete b.locked;this.callSuper(h,b);m||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(h){var b=this.parent;if(b!==h){const m=!this.locked;m&&(this.locked=!0);let t,n;if(b){t=this.subviews;for(n=t.length;n;)this.removeSubview(t[--n]);this.detachFrom(b,"__hndlPSA","subviewAdded");this.detachFrom(b,"__hndlPSR","subviewRemoved")}this.callSuper(h);
if(h=this.parent){t=h.getSubviews();n=0;for(b=t.length;b>n;)this.addSubview(t[n++]);this.attachTo(h,"__hndlPSA","subviewAdded");this.attachTo(h,"__hndlPSR","subviewRemoved")}m&&(this.locked=!1,this.inited&&h&&this.update())}},canUpdate:function(){return v?(this.__deferredLayout||(k.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(h){return this.subviews.includes(h)},getSubviewIndex:function(h){return this.subviews.indexOf(h)},addSubview:function(h){this.ignore(h)||
(this.subviews.push(h),this.startMonitoringSubview(h),this.locked||this.update())},startMonitoringSubview:h=>{},startMonitoringAllSubviews:function(){const h=this.subviews;let b=h.length;for(;b;)this.startMonitoringSubview(h[--b])},removeSubview:function(h){if(this.ignore(h))return-1;const b=this.getSubviewIndex(h);-1<b&&(this.stopMonitoringSubview(h),this.subviews.splice(b,1),this.locked||this.update());return b},stopMonitoringSubview:h=>{},stopMonitoringAllSubviews:function(){const h=this.subviews;
let b=h.length;for(;b;)this.stopMonitoringSubview(h[--b])},ignore:h=>h.ignoreLayout,__hndlPSA:function(h){h=h.value;h.parent===this.parent&&this.addSubview(h)},__hndlPSR:function(h){h=h.value;h.parent===this.parent&&this.removeSubview(h)},sortSubviews:function(h){this.subviews.sort(h)},moveSubviewBefore:function(h,b){d(this,h,b,!1)},moveSubviewAfter:function(h,b){d(this,h,b,!0)}});var g=r.ConstantLayout=new p("ConstantLayout",e,{setTargetAttrName:function(h){this.setterName=r.AccessorSupport.generateSetterName(h);
f(this,"targetAttrName",h)},setTargetValue:function(h){f(this,"targetValue",h)},update:function(){if(this.canUpdate()){const h=this.setterName,b=this.targetValue,m=this.subviews,t=m.length;if(h)for(let n=0;t>n;)m[n++][h](b)}}});g=r.VariableLayout=new p("VariableLayout",g,{initNode:function(h,b){this.collapseParent=this.reverse=!1;this.callSuper(h,b)},setCollapseParent:function(h){f(this,"collapseParent",h)},setReverse:function(h){f(this,"reverse",h)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const b=this.setterName,m=this.subviews;var h=m.length;let t=this.targetValue,n,l=0;if(this.reverse)for(n=h;n;)h=m[--n],this.skipSubview(h)||(t=this.updateSubview(++l,h,b,t));else for(n=0;h>n;){const w=m[n++];this.skipSubview(w)||(t=this.updateSubview(++l,w,b,t))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(b,t);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(h){this.attachTo(h,
"update","visible")},stopMonitoringSubview:function(h){this.detachFrom(h,"update","visible")},updateSubview:(h,b,m,t)=>{b[m](t);return t},skipSubview:h=>!h.visible,updateParent:(h,b)=>{}});const c=r.SpacedLayout=new p("SpacedLayout",g,{initNode:function(h,b){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(h,b)},setTargetAttrName:function(h){if(this.targetAttrName!==
h){const b="y"===h,m=this.inited;m&&this.stopMonitoringAllSubviews();this.measureAttrName=b?"boundsHeight":"boundsWidth";this.measureAttrBaseName=b?"height":"width";this.parentSetterName=b?"setHeight":"setWidth";m&&this.startMonitoringAllSubviews();this.callSuper(h)}},setNoAddSubviewOptimization:function(h){this.noAddSubviewOptimization=h},setAxis:function(h){this.setTargetAttrName(this.axis=h)},setInset:function(h){this.setTargetValue(this.inset=h)},setSpacing:function(h){f(this,"spacing",h)},setOutset:function(h){f(this,
"outset",h)},addSubview:function(h){const b=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(h);this.locked=b},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.callSuper(h)},stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.callSuper(h)},updateSubview:function(h,b,m,t){h=b[this.measureAttrName];b[m](t+(h-b[this.measureAttrBaseName])/2);return t+h+this.spacing},updateParent:function(h,b){this.parent[this.parentSetterName](b+
this.outset-this.spacing)}});r.ResizeLayout=new p("ResizeLayout",c,{setCollapseParent:h=>{},setTargetAttrName:function(h){if(this.targetAttrName!==h){if(this.inited){const b="x"===h;this.stopMonitoringParent(b?"height":"width");this.startMonitoringParent(b?"width":"height")}this.callSuper(h)}},setParent:function(h){if(this.parent!==h){const b="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(b);this.callSuper(h);this.parent&&this.startMonitoringParent(b)}},startMonitoringParent:function(h){this.attachTo(this.parent,
"update",h)},stopMonitoringParent:function(h){this.detachFrom(this.parent,"update",h)},doBeforeUpdate:function(){const h=this.measureAttrName,b=this.subviews;let m=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,t=b.length,n=0,l=0;for(;t;){const w=b[--t];this.skipSubview(w)||(++n,0<w.layoutHint?l+=w.layoutHint:m-=w[h])}0!==n&&(this.remainder=m-=(n-1)*this.spacing,this.resizeSum=l,this.scalingFactor=m/l,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===h?
"setWidth":"setHeight")},updateSubview:function(h,b,m,t){var n=b.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,b[this.measureSetter](n));return this.callSuper(h,b,m,t)},startMonitoringSubview:function(h){0<h.layoutHint||this.attachTo(h,"update",this.measureAttrName);this.attachTo(h,"update","visible")},stopMonitoringSubview:function(h){0<h.layoutHint||this.detachFrom(h,"update",
this.measureAttrName);this.detachFrom(h,"update","visible")},updateParent:(h,b)=>{}});r.AlignedLayout=new p("AlignedLayout",g,{initNode:function(h,b){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(h,b)},setTargetAttrName:function(h){if(this.targetAttrName!==h){const b="y"===h,m=this.inited;m&&this.stopMonitoringAllSubviews();this.measureAttrName=
b?"boundsHeight":"boundsWidth";this.measureAttrBaseName=b?"height":"width";this.parentSetterName=b?"setHeight":"setWidth";m&&this.startMonitoringAllSubviews();this.callSuper(h)}},setAlign:function(h){if(this.align!==h){this.align=h;const b=this.locked;this.locked=!0;this.setTargetAttrName("middle"===h||"bottom"===h||"top"===h?"y":"x");this.locked=b;this.inited&&(this.fireEvent("align",h),this.update())}},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.callSuper(h)},
stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.callSuper(h)},doBeforeUpdate:function(){const h=this.measureAttrName,b=this.subviews;let m=0,t=b.length;for(;t;){const n=b[--t];this.skipSubview(n)||(m=m>n[h]?m:n[h])}this.setTargetValue(m)},updateSubview:function(h,b,m,t){switch(this.align){case "center":case "middle":b[m]((t-b[this.measureAttrName])/2);break;case "right":case "bottom":b[m](t-b[this.measureAttrName]);break;default:b[m](0)}return t},updateParent:function(h,
b){this.parent[this.parentSetterName](b)}});r.WrappingLayout=new p("WrappingLayout",g,{initNode:function(h,b){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(h,b)},
setTargetAttrName:function(h){if(this.targetAttrName!==h){const b="y"===h,m=this.inited;m&&this.stopMonitoringAllSubviews();this.measureAttrName=b?"boundsHeight":"boundsWidth";const t=this.measureAttrBaseName=b?"height":"width";this.otherMeasureAttrName=b?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=b?"width":"height";this.parentSetterName=b?"setWidth":"setHeight";this.otherSetterName=b?"setX":"setY";m&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(t));
this.callSuper(h)}},setParent:function(h){if(this.parent!==h){const b="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(b?"height":"width");this.callSuper(h);this.parent&&this.startMonitoringParent(b?"height":"width")}},setAxis:function(h){this.setTargetAttrName(this.axis=h)},setInset:function(h){this.setTargetValue(this.inset=h)},setSpacing:function(h){f(this,"spacing",h)},setOutset:function(h){f(this,"outset",h)},setLineSpacing:function(h){f(this,"lineSpacing",h)},setLineInset:function(h){f(this,
"lineInset",h)},setLineOutset:function(h){f(this,"lineOutset",h)},startMonitoringParent:function(h){this.attachTo(this.parent,"update",h)},stopMonitoringParent:function(h){this.detachFrom(this.parent,"update",h)},startMonitoringSubview:function(h){this.attachTo(h,"update",this.measureAttrName);this.attachTo(h,"update",this.otherMeasureAttrName);this.callSuper(h)},stopMonitoringSubview:function(h){this.detachFrom(h,"update",this.measureAttrName);this.detachFrom(h,"update",this.otherMeasureAttrName);
this.callSuper(h)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(h,b,m,t){h=b[this.measureAttrName];const n=b[this.otherMeasureAttrName];t+h>this.parentSizeLessOutset||"break"===b.layoutHint?(t=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);b[this.otherSetterName](this.linePos+
(n-b[this.otherMeasureAttrBaseName])/2);b[m](t+(h-b[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,t+h+this.outset);return t+h+this.spacing},updateParent:function(h,b){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});r.createFixedThresholdCounter(e,1,"locked")})(myt);
(r=>{const x=Math.round,v=r.DomElementProxy,p=r.Geometry.rectContainsPoint,k=(b,m)=>{const t=r.global.focus.focusedView,n=b.getIDE();if(t===b||t&&t.isDescendantOf(b))t._ignoreFocus=!0;b=n.scrollTop;const l=n.scrollLeft;m.call();t&&(t._ignoreFocus=!1,t.focus(!0));n.scrollTop=b;n.scrollLeft=l},a=(b,m,t,n)=>{if(m&&"object"===typeof m){if(n&&(n=b.getLeastCommonAncestor(m))){var l=n.getIDE();n=v.getZIndexRelativeToAncestor(b.getODE(),l);l=v.getZIndexRelativeToAncestor(m.getODE(),l);t&&(n*=-1,l*=-1);if(n<
l)return!0;if(l<n)return!1}b=b.getODE().compareDocumentPosition(m.getODE());return t?2===b||10===b:4===b||20===b}return!1},d=b=>{b=b.getAncestors();let m=b.length,t=1,n=1;for(;m;){const l=b[--m];t*=l.scaleX||1;n*=l.scaleY||1;l.__effectiveScaleX=t;l.__effectiveScaleY=n}return{scaleX:t,scaleY:n}},f=(b,m,t)=>{const n=b.getODE();if(p(m,t,0,0,n.offsetWidth*b.__effectiveScaleX,n.offsetHeight*b.__effectiveScaleY)){if(b=b.parent){const l=b.getIDE();return f(b,m+(n.offsetLeft-l.scrollLeft)*b.__effectiveScaleX,
t+(n.offsetTop-l.scrollTop)*b.__effectiveScaleY)}return!0}return!1},e=b=>{switch(b.align){case "center":b.releaseConstraint("__doAlignCenter");break;case "right":b.releaseConstraint("__doAlignRight")}},g=b=>{const m=b.parent;if(m)switch(b.align){case "center":b.constrain("__doAlignCenter",[b,"width",b,"alignOffset",m,"width"]);break;case "right":b.constrain("__doAlignRight",[b,"width",b,"alignOffset",m,"width"]);break;case "left":b.setX(b.alignOffset||0)}},c=b=>{switch(b.valign){case "middle":b.releaseConstraint("__doValignMiddle");
break;case "bottom":b.releaseConstraint("__doValignBottom")}},h=b=>{const m=b.parent;if(m)switch(b.valign){case "middle":b.constrain("__doValignMiddle",[b,"height",b,"valignOffset",m,"height"]);break;case "bottom":b.constrain("__doValignBottom",[b,"height",b,"valignOffset",m,"height"]);break;case "top":b.setY(b.valignOffset||0)}};r.View=new JS.Class("View",r.Node,{include:[v,r.DomObservable,r.DomObserver,r.ScrollObservable,r.FocusObservable,r.KeyObservable,r.MouseObservable],extend:{retainFocusDuringDomUpdate:k},
initNode:function(b,m){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;m.tagName&&(this.tagName=m.tagName,delete m.tagName);this.setDomElement(this.createOurDomElement(b));const t=this.getODS();t.left=t.top="0px";this.callSuper(b,m);this.__updateBounds(this.width,this.height)},createOurDomElement:function(b){b=document.createElement(this.tagName??"div");b.style.position="absolute";let m;b.className=(m=this.klass).__cssClassName??(m.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));
return b},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(b){this.parent!==b&&(this.inited&&(e(this),c(this)),this.callSuper(b),this.align&&g(this),this.valign&&h(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},getSubviewsInLexicalOrder:function(){const b=[],m=this.getIDE().children,t=m.length;for(let n=0;n<t;){const l=m[n++].model;l?.parent===this&&b.push(l)}return b},
getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(b=>b!==this)},setFocusTrap:function(b){this.focusTrap=b},setFocusCage:function(b){this.focusCage=b},setMaskFocus:function(b){this.maskFocus=b},setLayoutHint:function(b){this.layoutHint=b},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(b){if(this.ignoreLayout!==b){var m=this.inited&&this.parent;let t;if(b){if(m)for(m=this.parent.getLayouts(),t=m.length;t;)m[--t].removeSubview(this);
this.ignoreLayout=b}else if(this.ignoreLayout=b,m)for(m=this.parent.getLayouts(),t=m.length;t;)m[--t].addSubview(this)}},setDomClass:function(b){this.domClass!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domClass",b))},setDomId:function(b){this.domId!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domId",b))},setAlignOffset:function(b){this.alignOffset!==b&&(this.alignOffset=b,this.inited&&this.fireEvent("alignOffset",b),this.parent&&"left"===this.align&&this.setX(b))},setAlign:function(b){this.align!==
b&&(this.inited&&e(this),this.align=b,this.inited&&(this.fireEvent("align",b),g(this)))},__doAlignCenter:function(b){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(b){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(b){this.valignOffset!==b&&(this.valignOffset=b,this.inited&&this.fireEvent("valignOffset",b),this.parent&&"top"===this.valign&&this.setY(b))},setValign:function(b){this.valign!==b&&(this.inited&&c(this),
this.valign=b,this.inited&&(this.fireEvent("valign",b),h(this)))},__doValignMiddle:function(b){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(b){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(b){this.x!==b&&(this.x=b,this.visible&&(this.getODS().left=b+"px"),this.inited&&this.fireEvent("x",b))},setY:function(b){this.y!==b&&(this.y=b,this.visible&&(this.getODS().top=b+"px"),this.inited&&this.fireEvent("y",b))},setWidth:function(b){0>
b&&(b=0);this.width!==b&&(this.width=b,this.getODS().width=b+"px",this.inited&&(this.__updateBounds(b,this.height),this.fireEvent("width",b)))},setHeight:function(b){0>b&&(b=0);this.height!==b&&(this.height=b,this.getODS().height=b+"px",this.inited&&(this.__updateBounds(this.width,b),this.fireEvent("height",b)))},setDomMinWidth:function(b,m){(m?this.getIDS():this.getODS()).minWidth=null!=b?b+"px":null},getDomMinWidth:function(b){b=(b?this.getIDS():this.getODS()).minWidth;return null!=b?Number.parseInt(b):
null},setDomMinHeight:function(b,m){(m?this.getIDS():this.getODS()).minHeight=null!=b?b+"px":null},getDomMinHeight:function(b){b=(b?this.getIDS():this.getODS()).minHeight;return null!=b?Number.parseInt(b):null},setTextColor:function(b){this.textColor!==b&&(this.textColor=b,this.getODS().color=b||"inherit",this.inited&&this.fireEvent("textColor",b))},setBgColor:function(b){this.bgColor!==b&&(this.getODS().backgroundColor=this.bgColor=b,this.inited&&this.fireEvent("bgColor",b))},isColorAttr:b=>"bgColor"===
b||"textColor"===b,setOpacity:function(b){this.opacity!==b&&(this.getODS().opacity=this.opacity=b,this.inited&&this.fireEvent("opacity",b))},setOverflow:function(b){const m=this.overflow;if(m!==b){this.overflow=b;const t=this.getIDS();if("autox"===b)t.overflowX="auto",t.overflowY="hidden";else if("autoy"===b)t.overflowY="auto",t.overflowX="hidden";else{if("autox"===m||"autoy"===m)t.overflowX=t.overflowY=null;t.overflow=b||"visible"}this.inited&&this.fireEvent("overflow",b)}},setVisible:function(b){if(this.visible!==
b){this.visible=b;const m=this.getODS();m.visibility=b?"inherit":"hidden";m.left=b?this.x+"px":"-100000px";m.top=b?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",b)}},setPointerEvents:function(b){this.pointerEvents!==b&&(this.pointerEvents=b,this.getODS().pointerEvents=b||"auto",this.inited&&this.fireEvent("pointerEvents",b))},setCursor:function(b){this.cursor!==b&&(this.cursor=b,this.getODS().cursor=b||"auto",this.inited&&this.fireEvent("cursor",b))},__updateBounds:function(b,m){this.boundsWidth!==
b&&this.fireEvent("boundsWidth",this.boundsWidth=b);this.boundsHeight!==m&&this.fireEvent("boundsHeight",this.boundsHeight=m)},setOutline:function(b){const [m,t,n]=b??[];this.setOutlineWidth(m);this.setOutlineStyle(t);this.setOutlineColor(n)},setOutlineWidth:function(b){this.getODS().outlineWidth=(this.outlineWidth=b||0)+"px"},setOutlineStyle:function(b){this.getODS().outlineStyle=this.outlineStyle=b||"none"},setOutlineColor:function(b){this.getODS().outlineColor=this.outlineColor=b||"#000"},setBorder:function(b){const [m,
t,n]=b??[];this.setBorderWidth(m);this.setBorderStyle(t);this.setBorderColor(n)},setBorderWidth:function(b){this.getODS().borderWidth=(this.borderWidth=b||0)+"px"},setBorderStyle:function(b){this.getODS().borderStyle=this.borderStyle=b||"none"},setBorderColor:function(b){this.getODS().borderColor=this.borderColor=b||"#000"},setRoundedCorners:function(b){this.getODS().borderRadius=b+"px"},setRoundedTopLeftCorner:function(b){this.getODS().borderTopLeftRadius=b+"px"},setRoundedTopRightCorner:function(b){this.getODS().borderTopRightRadius=
b+"px"},setRoundedBottomLeftCorner:function(b){this.getODS().borderBottomLeftRadius=b+"px"},setRoundedBottomRightCorner:function(b){this.getODS().borderBottomRightRadius=b+"px"},setBoxShadow:function(b){const [m,t,n,l]=b??[];this.getODS().boxShadow=b?(m||0)+"px "+(t||0)+"px "+(n||7)+"px "+(l||"#000"):"none"},setGradient:function(b){const m=this.getODS();if(b){let n=b[0];"linear"===n||"radial"===n?b.shift():n="linear";let l=b[0];if("radial"===n){void 0===l?l="closest-side":b.shift();var t=b[0];if(void 0===
t)t="circle";else{switch(t){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",t),t="circle"}b.shift()}let w=b[0];void 0===w?w="center":(w=w.replaceAll("middle","center"),b.shift());l=t+" "+l+" at "+w}else"number"===typeof l?(l+="deg",b.shift()):l?(l="to "+l,b.shift()):l="0deg";t=w=>{b.push(w&&"inherit"!==w?w:"transparent")};2>b.length&&t(this.textColor);2>b.length&&t(this.bgColor);m.background=n+"-gradient("+l+","+b.join(",")+")"}else m.background="none";this.bgColor=
void 0},setTooltip:function(b){this.tooltip!==b&&(this.tooltip=this.getODE().title=b,this.inited&&this.fireEvent("tooltip",b))},isVisible:function(){return null==this.searchAncestorsOrSelf(b=>!b.visible)},getFocusTrap:function(b){return this.searchAncestorsOrSelf(m=>m.focusCage||m.focusTrap&&!b)},subnodeAdded:function(b){b instanceof r.View?(this.getIDE().appendChild(b.getODE()),this.getSubviews().push(b),this.fireEvent("subviewAdded",b),this.subviewAdded(b)):b instanceof r.Layout&&(this.getLayouts().push(b),
this.fireEvent("layoutAdded",b),this.layoutAdded(b))},subnodeRemoved:function(b){let m;b instanceof r.View?(m=this.getSubviewIndex(b),-1<m&&(this.fireEvent("subviewRemoved",b),b.removeDomElement(),this.subviews.splice(m,1),this.subviewRemoved(b))):b instanceof r.Layout&&(m=this.getLayoutIndex(b),-1<m&&(this.fireEvent("layoutRemoved",b),this.layouts.splice(m,1),this.layoutRemoved(b)))},hasSubview:function(b){return this.getSubviews().includes(b)},getSubviewIndex:function(b){return this.getSubviews().indexOf(b)},
subviewAdded:b=>{},subviewRemoved:b=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(b){return this.getLayouts().includes(b)},getLayoutIndex:function(b){return this.getLayouts().indexOf(b)},layoutAdded:b=>{},layoutRemoved:b=>{},isBehind:function(b,m){return a(this,b,!1,m)},isInFrontOf:function(b,m){return a(this,b,!0,m)},bringToFront:function(){this.parent.bringSubviewToFront(this)},
sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(b){this.parent.sendSubviewBehind(this,b)},sendInFrontOf:function(b){this.parent.sendSubviewInFrontOf(this,b)},doSubviewsReorderedInDom:b=>{},bringSubviewToFront:function(b){const m=this;if(b?.parent===m){const t=m.getIDE();b.getODE()!==t.lastChild&&k(b,()=>{t.appendChild(b.getODE());m.doSubviewsReorderedInDom(b)})}},sendSubviewToBack:function(b){const m=this;if(b?.parent===m){const t=m.getIDE();b.getODE()!==t.firstChild&&
k(b,()=>{t.insertBefore(b.getODE(),t.firstChild);m.doSubviewsReorderedInDom(b)})}},sendSubviewBehind:function(b,m){const t=this;if(b?.parent===t&&m?.parent===t){const n=t.getIDE();k(b,()=>{n.insertBefore(b.getODE(),m.getODE());t.doSubviewsReorderedInDom(b)})}},sendSubviewInFrontOf:function(b,m){const t=this;if(b?.parent===t&&m?.parent===t){const n=t.getIDE();k(b,()=>{n.insertBefore(b.getODE(),m.getODE().nextSibling);t.doSubviewsReorderedInDom(b)})}},sortSubviews:function(b){const m=this,t=m.getSubviews().sort(b);
k(m,()=>{const n=m.getODE(),l=n.parentNode;let w;l&&(w=n.nextSibling,l.removeChild(n));const B=document.createDocumentFragment(),G=t.length;for(let J=0;G>J;)B.appendChild(t[J++].getODE());m.getIDE().appendChild(B);l?.insertBefore(n,w);m.doSubviewsReorderedInDom(null)})},containsPoint:function(b,m,t){const n=this.getODE();if(!n)return!1;const {x:l,y:w}=v.getRelativePosition(n,t);return p(b,m,l,w,this.width,this.height)},isPointVisible:function(b,m){const {x:t,y:n}=this.getPagePosition(!0);d(this);
return f(this,b-t,m-n)},intersectsWithSibling:function(b){return b.parent===this.parent&&!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)},getEffectiveScale:function(){return d(this)},getEffectiveScaleX:function(){return d(this).scaleX},getEffectiveScaleY:function(){return d(this).scaleY}})})(myt);
(r=>{const x=(p,k,a)=>{const d=v(p,k);p.getODS().transform=d+(0===d.length?"":" ")+k+"("+a+")"},v=(p,k)=>{p=p.getODS();var a=p.transform;if(!a||0===a.length)return"";a=a.split(" ");let d=a.length;for(;d;)if(a[--d].startsWith(k)){a.splice(d,1);break}return p.transform=a.join(" ")};r.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(p){this.transformOrigin!==p&&(this.transformOrigin=p,this.getODS().transformOrigin=p||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",p)))},setRotation:function(p){this.rotation!==p&&(this.rotation=p,x(this,"rotate",(p||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",p)))},setScale:function(p){const k=this.scaleX!==p,a=this.scaleY!==p;if(k){var d=this.scaleX=p;null==d?v(this,"scaleX"):x(this,"scaleX",d||1)}a&&(d=this.scaleY=p,null==d?v(this,"scaleY"):x(this,"scaleY",d||1));this.inited&&((k||a)&&this.__updateBounds(this.width,this.height),
k&&this.fireEvent("scaleX",p),a&&this.fireEvent("scaleY",p))},setScaleX:function(p){if(this.scaleX!==p){var k=this.scaleX=p;null==k?v(this,"scaleX"):x(this,"scaleX",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",p))}},setScaleY:function(p){if(this.scaleY!==p){var k=this.scaleY=p;null==k?v(this,"scaleY"):x(this,"scaleY",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",p))}},setSkewX:function(p){this.skewX!==p&&(this.skewX=
p,x(this,"skewX",p||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",p)))},setSkewY:function(p){this.skewY!==p&&(this.skewY=p,x(this,"skewY",p||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",p)))},__updateBounds:function(p,k){const {rotation:a,scaleX:d,scaleY:f}=this,e=(null==d||1===d)&&(null==f||1===f);if(!e||null!=a&&0!==a&&180!==a)!e||90!==a&&270!==a?{width:p,height:k}=this.getODE().getBoundingClientRect():{width:k,height:p}=
this;this.callSuper(p,k)}})})(myt);
(r=>{const x=JS.Module,v=(d,f)=>{if("auto"===f)d.__hasSetWidth=!1,d.getODS().width="auto",d.sizeViewToDom();else return d.__hasSetWidth=!0},p=(d,f)=>{if("auto"===f)d.__hasSetHeight=!1,d.getODS().height="auto",d.sizeViewToDom();else return d.__hasSetHeight=!0},k=d=>{if(!d.__hasSetWidth){const f=d.getODE().offsetWidth/d.getEffectiveScaleX();d.width!==f&&(d.width=f,d.inited&&d.__updateBounds(f,d.height),d.fireEvent("width",f))}},a=d=>{if(!d.__hasSetHeight){const f=d.getODE().offsetHeight/d.getEffectiveScaleY();
d.height!==f&&(d.height=f,d.inited&&d.__updateBounds(d.width,f),d.fireEvent("height",f))}};r.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:k,sizeHeight:a},initNode:function(d,f){this.callSuper(d,f);this.sizeViewToDom()},setWidth:function(d){v(this,d)&&this.callSuper(d)},setHeight:function(d){p(this,d)&&this.callSuper(d)},sizeViewToDom:function(){k(this);a(this)}});r.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(d,f){this.callSuper(d,f);this.sizeViewToDom()},setWidth:function(d,f){v(this,
d)&&this.callSuper(d,f)},sizeViewToDom:function(){k(this)}});r.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(d,f){this.callSuper(d,f);this.sizeViewToDom()},setHeight:function(d,f){p(this,d)&&this.callSuper(d,f)},sizeViewToDom:function(){a(this)}})})(myt);
(r=>{const x=(a,d,f,e)=>{a[f]!==d&&(a[f]=d,a.getIDS()[f]=d||e||"inherit",a.inited&&(a.fireEvent(f,d),a.sizeViewToDom()))};r.TextSupport=new JS.Module("TextSupport",{setWidth:function(a){this.callSuper(a);"auto"!==a&&(a=this.whiteSpace,"normal"!==a&&"pre-line"!==a&&"pre-wrap"!==a&&"break-spaces"!==a||this.sizeViewToDom())},setText:function(a){a||="";a=this.valueFromEvent(a);this.text!==a&&(this.getIDE().innerHTML=this.text=a,this.inited&&(this.fireEvent("text",a),this.sizeViewToDom()))},setTextOverflow:function(a){this.textOverflow!==
a&&(this.textOverflow=a,this.getIDS().textOverflow=a||"inherit",this.inited&&this.fireEvent("textOverflow",a))},setTextAlign:function(a){this.textAlign!==a&&(this.textAlign=a,this.getIDS().textAlign=a||"inherit",this.inited&&this.fireEvent("textAlign",a))},setWhiteSpace:function(a){x(this,a,"whiteSpace")},setWordWrap:function(a){x(this,a,"wordWrap","normal")},setTextIndent:function(a){x(this,a,"textIndent")},setTextTransform:function(a){x(this,a,"textTransform")},setTextDecoration:function(a){x(this,
a,"textDecoration")},setLineHeight:function(a){x(this,a,"lineHeight")},setLetterSpacing:function(a){x(this,a,"letterSpacing")},setWordSpacing:function(a){x(this,a,"wordSpacing")},setFontFamily:function(a){x(this,a,"fontFamily")},setFontStyle:function(a){x(this,a,"fontStyle")},setFontVariant:function(a){x(this,a,"fontVariant")},setFontWeight:function(a){x(this,a,"fontWeight")},setFontSize:function(a){x(this,a,"fontSize")},setUserUnselectable:function(a){this.userUnselectable!==a&&(this.userUnselectable=
a,this[a?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(a?"default":"text"),this.inited&&this.fireEvent("userUnselectable",a))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(a,d,f,e){this.getIDS().textShadow=(a||0)+"px "+(d||0)+"px "+(null!=f?f:2)+"px "+(e||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const v=(a,d,f)=>{const e="padding"+f;d=Math.max(d,0);a[e]!==d&&(a[e]=d,a.getIDS()[e]=d+"px",a.fireEvent(e,d),"Left"===f||"Right"===f?p(a):k(a))},p=a=>{a.__hasSetWidth&&(a.getODS().width=a.width-(a.paddingLeft||0)-(a.paddingRight||0)+"px",a.inited&&a.sizeViewToDom())},k=a=>{a.__hasSetHeight&&(a.getODS().height=a.height-(a.paddingTop||0)-(a.paddingBottom||0)+"px",a.inited&&a.sizeViewToDom())};r.PaddedTextSupport=new JS.Module("PaddedTextSupport",{setWidth:function(a){this.callSuper(a);p(this)},
setHeight:function(a){this.callSuper(a);k(this)},setPadding:function(a){let d,f,e;a||=0;"object"===typeof a?(d=a.top||0,f=a.right||0,e=a.bottom||0,a=a.left||0):d=f=e=a;this.setPaddingTop(d);this.setPaddingRight(f);this.setPaddingBottom(e);this.setPaddingLeft(a)},setPaddingTop:function(a){v(this,a,"Top")},setPaddingRight:function(a){v(this,a,"Right")},setPaddingBottom:function(a){v(this,a,"Bottom")},setPaddingLeft:function(a){v(this,a,"Left")}})})(myt);
(r=>{const x={},v={},p=k=>{const a=k.imageUrl;if(k.calculateNaturalSize&&a){var d=x[a];if(d)k.setNaturalWidth(d.width),k.setNaturalHeight(d.height);else{d=v[a];if(!d){v[a]=d=[];const f=new Image;f.onerror=e=>{if(e=v[a]){let g=e.length;for(;g;)e[--g].setImageLoadingError(!0);e.length=0;delete v[a]}};f.onload=()=>{const e=f.width,g=f.height,c=v[a];if(c){let h=c.length;for(;h;){const b=c[--h];b.imageUrl===a&&(b.setNaturalWidth(e),b.setNaturalHeight(g))}c.length=0;delete v[a]}x[a]={width:e,height:g}};
f.src=a}d.push(k)}}};r.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:k=>x[k]},initNode:function(k,a){a.imageRepeat??(a.imageRepeat="no-repeat");a.imageAttachment??(a.imageAttachment="scroll");this.callSuper(k,a)},setImageUrl:function(k){this.imageUrl!==k&&(this.imageUrl=k,this.getIDS().backgroundImage=k?'url("'+k+'")':"none",this.inited&&(this.fireEvent("imageUrl",k),this.setNaturalWidth(),this.setNaturalHeight(),!k&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
p(this))},setImageLoadingError:function(k){this.set("imageLoadingError",k,!0)},setImageSize:function(k){this.imageSize!==k&&(this.imageSize=k,this.getIDS().backgroundSize=k||"auto",this.inited&&this.fireEvent("imageSize",k))},setImageRepeat:function(k){this.imageRepeat!==k&&(this.getIDS().backgroundRepeat=this.imageRepeat=k,this.inited&&this.fireEvent("imageRepeat",k))},setImagePosition:function(k){this.imagePosition!==k&&(this.getIDS().backgroundPosition=this.imagePosition=k,this.inited&&this.fireEvent("imagePosition",
k))},setImageAttachment:function(k){this.imageAttachment!==k&&(this.getIDS().backgroundAttachment=this.imageAttachment=k,this.inited&&this.fireEvent("imageAttachment",k))},setCalculateNaturalSize:function(k){this.calculateNaturalSize!==k&&(this.calculateNaturalSize=k,this.inited&&this.fireEvent("calculateNaturalSize",k),p(this))},setNaturalWidth:function(k){this.naturalWidth!==k&&(this.naturalWidth=k,this.inited&&this.fireEvent("naturalWidth",k),this.useNaturalSize&&k&&this.setWidth(k))},setNaturalHeight:function(k){this.naturalHeight!==
k&&(this.naturalHeight=k,this.inited&&this.fireEvent("naturalHeight",k),this.useNaturalSize&&k&&this.setHeight(k))},setUseNaturalSize:function(k){this.useNaturalSize!==k&&(this.useNaturalSize=k,this.inited&&this.fireEvent("useNaturalSize",k),k&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),k&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(r=>{const x=JS.Class,{View:v,SizeToDom:p}=r;r.Flexbox=new x("Flexbox",v,{include:[r.FlexboxSupport]});r.Frame=new x("Frame",v,{initNode:function(k,a){a.tagName??(a.tagName="iframe");this.callSuper(k,a);k=r.global.mouse;this.attachToDom(k,"__doMouseDown","mousedown",!0);this.attachToDom(k,"__doMouseUp","mouseup",!0)},createOurDomElement:function(k){k=this.callSuper(k);(Array.isArray(k)?k[1]:k).style.border="0px";return k},setSrc:function(k){this.src!==k&&(this.src=this.getIDE().src=k,this.inited&&
this.fireEvent("src",k))},__doMouseDown:function(k){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(k){this.setPointerEvents(this.__restorePointerEvents);return!0}});r.Markup=new x("Markup",v,{include:[p],setHtml:function(k){this.html!==k&&(this.getIDE().innerHTML=this.html=k,this.inited&&(this.fireEvent("html",k),this.sizeViewToDom()))}});r.Text=new x("Text",v,{include:[p,r.TextSupport],initNode:function(k,a){a.whiteSpace??(a.whiteSpace=
"nowrap");a.userUnselectable??(a.userUnselectable=!0);this.callSuper(k,a)},measureNoWrapWidth:function(){const k=this.__hasSetWidth,a=this.width;if(!k&&"nowrap"===this.whiteSpace)return a;const d=this.getIDS(),f=d.whiteSpace;k&&(d.width="auto");d.whiteSpace="nowrap";const e=this.getODE().getBoundingClientRect().width;d.whiteSpace=f;k&&(d.width=a);return e}});r.PaddedText=new x("PaddedText",r.Text,{include:[r.PaddedTextSupport]});r.Image=new x("Image",v,{include:[r.ImageSupport],initNode:function(k,
a){a.useNaturalSize??(a.useNaturalSize=!0);this.callSuper(k,a)}});r.BackView=new x("BackView",v,{sendSubviewToBack:function(k){if(k.parent===this){const a=this.getIDE(),d=a.childNodes[1];k=k.getODE();k!==d&&(k=a.removeChild(k))&&a.insertBefore(k,d)}}})})(myt);
(r=>{const x=Math.round,v=d=>{d.parent&&0<=d.percentOfParentWidth&&d.syncTo(d.parent,"__doPOPW","width")},p=d=>{0<=d.percentOfParentWidth&&d.detachFrom(d.parent,"__doPOPW","width")},k=d=>{d.parent&&0<=d.percentOfParentHeight&&d.syncTo(d.parent,"__doPOPH","height")},a=d=>{0<=d.percentOfParentHeight&&d.detachFrom(d.parent,"__doPOPH","height")};r.SizeToParent=new JS.Module("SizeToParent",{setParent:function(d){this.parent!==d&&(this.inited&&(p(this),a(this)),this.callSuper(d),v(this),k(this))},setPercentOfParentWidthOffset:function(d){this.percentOfParentWidthOffset!==
d&&(this.percentOfParentWidthOffset=d,this.inited&&(this.fireEvent("percentOfParentWidthOffset",d),this.__doPOPW()))},setPercentOfParentWidth:function(d){this.percentOfParentWidth!==d&&(this.inited&&p(this),this.percentOfParentWidth=d,this.inited&&this.fireEvent("percentOfParentWidth",d),v(this))},setPercentOfParentHeightOffset:function(d){this.percentOfParentHeightOffset!==d&&(this.percentOfParentHeightOffset=d,this.inited&&(this.fireEvent("percentOfParentHeightOffset",d),this.__doPOPH()))},setPercentOfParentHeight:function(d){this.percentOfParentHeight!==
d&&(this.inited&&a(this),this.percentOfParentHeight=d,this.inited&&this.fireEvent("percentOfParentHeight",d),k(this))},__doPOPW:function(d){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(d){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(r=>{let x;const v=[];new JS.Singleton("GlobalRootViewRegistry",{include:[r.Observable],initialize:function(){r.global.register("roots",x=this)},getRoots:()=>v,addRoot:p=>{v.push(p);x.fireEvent("rootAdded",p)},removeRoot:p=>{const k=v.indexOf(p);-1<k&&(v.splice(k,1),x.fireEvent("rootRemoved",p))}})})(myt);
(r=>{const x=r.global.roots,v=r.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:p=>{const k=p.__captureDrop=a=>{a.preventDefault()};p=p.getIDE();r.addEventListener(p,"drop",k);r.addEventListener(p,"dragover",k)},teardownCaptureDrop:p=>{const k=p.getIDE();p=p.__captureDrop;r.removeEventListener(k,"drop",p);r.removeEventListener(k,"dragover",p)}},initNode:function(p,k){this.callSuper(p,k);this.setZIndex(0);this.addDomClass("myt");x.addRoot(this);v.setupCaptureDrop(this)},createOurDomElement:function(p){p||
(p=this.callSuper(p),r.getElement().appendChild(p));return p},destroy:function(){v.teardownCaptureDrop(this);x.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(p){this.keepDomElementWhenDestroyed=p},setParent:p=>{},bringToFront:function(){var p=this.getIDE();const k=p.parentNode;p!==k.lastChild&&(p=k.removeChild(p))&&k.appendChild(p)},sendToBack:function(){var p=this.getIDE();const k=p.parentNode;p!==k.firstChild&&
(p=k.removeChild(p))&&k.insertBefore(p,k.firstChild)},sendBehind:function(p){var k=this.getIDE();p=p.getIDE();const a=k.parentNode;p.parentNode===a&&(k=a.removeChild(k))&&a.insertBefore(k,p)},sendInFrontOf:function(p){p.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(p),p.sendBehind(this))}})})(myt);
(r=>{let x,v,p=!1;const {requestAnimationFrame:k,cancelAnimationFrame:a}=window,d={},f=g=>{x=k(f);g=Math.round(g);-1!==v&&(d.delta=g-v,d.time=g,e.fireEvent("idle",d));v=g},e=new JS.Singleton("GlobalIdle",{include:[r.Observable],initialize:function(){r.global.register("idle",this)},attachObserver:(g,c,h)=>{g=e.callSuper(g,c,h);!p&&e.hasObservers("idle")&&(p=!0,v=-1,x=k(f));return g},detachObserver:(g,c,h)=>{g=e.callSuper(g,c,h);p&&!e.hasObservers("idle")&&(a(x),p=!1);return g}})})(myt);
(r=>{let x,v,p;const k=r.global,a=k.idle,d=window.document;new JS.Singleton("GlobalWindowResize",{include:[r.Observable,r.Observer],initialize:function(){x=this;x.attachTo(a,"__setup","idle");k.register("windowResize",x)},__setup:f=>{const e=d.body;e&&(x.detachFrom(a,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:v=e.clientWidth,h:p=e.clientHeight})})).observe(e))},getWidth:()=>v??=d.body.clientWidth,getHeight:()=>p??=d.body.clientHeight})})(myt);
(r=>{const x=JS.Module,v=r.global.windowResize,p=Math.max,k=d=>{const f=d.resizeDimension;"both"!==f&&"width"!==f||d.setWidth(p(d.minWidth,v.getWidth()));"both"!==f&&"height"!==f||d.setHeight(p(d.minHeight,v.getHeight()))},a=r.SizeToWindow=new x("SizeToWindow",{include:[r.RootView],initNode:function(d,f){this.minWidth=this.minHeight=0;f.resizeDimension??(f.resizeDimension="both");this.attachTo(v,"__hndlResize","resize");this.callSuper(d,f)},setResizeDimension:function(d){this.resizeDimension!==d&&
(this.resizeDimension=d,k(this))},setMinWidth:function(d){this.minWidth!==d&&(this.minWidth=d,k(this))},setMinHeight:function(d){this.minHeight!==d&&(this.minHeight=d,k(this))},__hndlResize:function(d){k(this)}});r.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[a],initNode:function(d,f){f.resizeDimension??(f.resizeDimension="width");this.callSuper(d,f)}});r.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[a],initNode:function(d,f){f.resizeDimension??(f.resizeDimension="height");this.callSuper(d,
f)}})})(myt);
(r=>{const x=Math,{min:v,max:p}=x,k=b=>v(255,p(0,x.round(b))),a=b=>k(b).toString(16).padStart(2,"0"),d=(b,m,t,n)=>(n?"#":"")+a(b)+a(m)+a(t),f=b=>new h((16711680&b)>>16,(65280&b)>>8,255&b),e=(b,m)=>{if("string"===typeof b)if(b.endsWith("%"))b=parseFloat(b.slice(0,-1))*m/100;else return 0;b=v(m,p(0,b))/m;return 1E-6>x.abs(1-b)?1:b},g=(b,m,t)=>{b=e(b,255);m=e(m,255);t=e(t,255);const n=p(b,m,t),l=n-v(b,m,t);if(0===l)return{h:0,s:0,v:n};let w;switch(n){case b:w=(m-t)/l+(m<t?6:0);break;case m:w=(t-b)/l+
2;break;case t:w=(b-m)/l+4}return{h:60*w,s:0===n?0:l/n,v:n}},c=(b,m,t)=>{b=6*e(b,360);m=e(m,100);t=e(t,100);var n=x.floor(b);const l=b-n;b=t*(1-m);const w=t*(1-l*m);m=t*(1-(1-l)*m);n%=6;return{red:255*[t,w,b,b,m,t][n],green:255*[m,t,t,w,b,b][n],blue:255*[b,b,m,t,t,w][n]}},h=r.Color=new JS.Class("Color",{extend:{toUnitRange:e,rgbToHsv:g,hsvToRgb:c,toHex:a,rgbToHex:d,cleanChannelValue:k,getRedChannel:b=>(16711680&b)>>16,getGreenChannel:b=>(65280&b)>>8,getBlueChannel:b=>255&b,makeColorFromNumber:f,makeColorFromHexString:b=>
{if(b)switch(b.startsWith("#")&&(b=b.slice(1)),b.length){case 0:b+="0";case 1:b+="0";case 2:b+="0";case 3:case 4:case 5:const [m,t,n]=b;return new h(parseInt(m+m,16),parseInt(t+t,16),parseInt(n+n,16));case 6:return f(parseInt(b,16));default:return f(parseInt(b.slice(0,6),16))}},makeColorFromHSV:(b,m,t)=>{const {red:n,green:l,blue:w}=c(b,m,t);return new h(n,l,w)},getLighterColor:(b,m)=>f(b).isLighterThan(f(m))?b:m,makeColorNumberFromChannels:(b,m,t)=>(k(b)<<16)+(k(m)<<8)+k(t),makeBlendedColor:(b,m,
t)=>new h(b.red+t*(m.red-b.red),b.green+t*(m.green-b.green),b.blue+t*(m.blue-b.blue))},initialize:function(b,m,t){this.setRed(b);this.setGreen(m);this.setBlue(t)},setRed:function(b){this.red=k(b)},setGreen:function(b){this.green=k(b)},setBlue:function(b){this.blue=k(b)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return d(this.red,this.green,this.blue,!0)},getHSV:function(){return g(this.red,this.green,this.blue)},isLighterThan:function(b){b=
this.getDiffFrom(b);return 0>b.red+b.green+b.blue},getDiffFrom:function(b){return{red:b.red-this.red,green:b.green-this.green,blue:b.blue-this.blue}},applyDiff:function(b){return this.add(b)},add:function(b){this.setRed(this.red+b.red);this.setGreen(this.green+b.green);this.setBlue(this.blue+b.blue);return this},subtract:function(b){this.setRed(this.red-b.red);this.setGreen(this.green-b.green);this.setBlue(this.blue-b.blue);return this},multiply:function(b){this.setRed(this.red*b);this.setGreen(this.green*
b);this.setBlue(this.blue*b);return this},divide:function(b){this.setRed(this.red/b);this.setGreen(this.green/b);this.setBlue(this.blue/b);return this},clone:function(){return new h(this.red,this.green,this.blue)},equals:function(b){return b===this||b?.isA?.(h)&&b.red===this.red&&b.green===this.green&&b.blue===this.blue}})})(myt);
(r=>{const {max:x,sin:v,cos:p,pow:k,sqrt:a,PI:d}=Math,f=2*d,e=d/2,g=r.global.idle,c=r.Color.makeColorFromHexString,h={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-p(n*e)+1,outSine:n=>v(n*e),inOutSine:n=>-(p(n*d)-1)/2,inCirc:n=>-(a(1-n*n)-1),outCirc:n=>a(1- --n*n),inOutCirc:n=>1>(n*=2)?-(a(1-n*n)-1)/2:(a(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:k(2,10*(n-1)),outExpo:n=>1===n?1:-k(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?k(2,10*(n-1))/2:(-k(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(k(2,10*--n)*v((1*n-.075)*f/.3)),outElastic:n=>0===n||1===n?n:k(2,-10*n)*v((1*n-.075)*f/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(k(2,10*--n)*v((1*n-.1125)*f/.45))/2:k(2,
-10*--n)*v((1*n-.1125)*f/.45)/2+1,inBack:(n,l=1.70158)=>(n/=1)*n*((l+1)*n-l),outBack:(n,l=1.70158)=>(n=n/1-1)*n*((l+1)*n+l)+1,inOutBack:(n,l=1.70158)=>1>(n*=2)?n*n*(((l*=1.525)+1)*n-l)/2:((n-=2)*n*(((l*=1.525)+1)*n+l)+2)/2,inBounce:n=>1-h.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?h.inBounce(n)/2:(h.outBounce(n-1)+1)/2},b=h.inOutQuad,m=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},t=(n,l)=>{const {running:w,paused:B,reverse:G,duration:J,repeat:L,__prog:A,easingFunction:u,callback:z}=n;if(w&&!B){G&&(l*=-1);l=A+l;let T=0;l>J?(T=l-J,l=J,++n.__loopCnt===L&&(T=0)):0>l&&(T=-l,l=0,0>--n.__loopCnt&&0<L&&(T=0));var q=n.target??n.parent;if(q){const {relative:X,attribute:W,__isColorAnim:P,__loopCnt:U,to:R}=n;var y=x(0,l/J),D=x(0,A/J);null==n.from&&(n.__tmpFrom=!0,n.from=X?P?"#000":0:q.get(W));D=u(y)-(X?u(D):0);var E=n.from,I=X?q.get(W):
E;y=q.set;if(P){var K=R,N=X;E=c(E);K=c(K);N=N?c(I):E;N.setRed(N.red+(K.red-E.red)*D);N.setGreen(N.green+(K.green-E.green)*D);N.setBlue(N.blue+(K.blue-E.blue)*D);D=N.getHtmlHexString()}else D=I+(R-E)*D;y.call(q,W,D);!G&&U===L||G&&0>U&&0<L?(n.setRunning(!1),z?.call(n,!0)):0<T?(n.fireEvent("repeat",U),n.__prog=G?J:0,t(n,T)):n.__prog=l}else console.log("No target for animator",n),n.setRunning(!1),z?.call(n,!1)}};r.Animator=new JS.Class("Animator",r.Node,{include:[r.Reusable],extend:{easings:h},initNode:function(n,
l){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=b;this.callSuper(n,l);m(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const l=this.target??this.parent;this.__isColorAnim=l&&"function"===typeof l.isColorAttr?l.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),m(this);this[n?"attachTo":"detachFrom"](g,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](g,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&m(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&m(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&m(this)},setEasingFunction:function(n){"string"===typeof n&&(n=h[n]);this.set("easingFunction",n??b,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,l){const w=this,B=w.callback;B&&!l?w.setCallback(G=>{B.call(w,G);n.call(w,G)}):w.setCallback(n)},reset:function(n){m(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=b;this.reset(!1)},__updateAnim:function(n){t(this,
n.value.delta)}})})(myt);
(r=>{const x=Array.isArray,v=a=>{a.__additionalArgs=[];a.__pendingTransition="";a.__transDestinationState="";a.__transStage="leaveState"},p=(a,d)=>{if(a.__transInProgress){var f=a.__deferredTransitions;f??=a.__deferredTransitions=[];f.unshift(d)}else{a.__transInProgress=!0;f=d.shift();const e=d.shift();if(a.__pendingTransition)return 3;if(a.isFinished())return a.__transInProgress=!1,5;let g=a.map[a.current][e];g??=a.map["*"][e];if(g)return a.__pendingTransition=e,a.__transDestinationState=g,a.__additionalArgs=
d,a.resumeTransition(f);a.__transInProgress=!1;return 5}},k=a=>{a.__transInProgress=!1;const d=a.__deferredTransitions;if(d)for(;0<d.length;)p(a,d.pop())};r.StateMachine=new JS.Class("StateMachine",r.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(a,d){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";v(this);this.callSuper(a,d)},setInitialState:function(a){if(""===this.current){if(x(a)){var d=a;a=d.shift()}else d=[];this.current=
this.initial=a;this.doEnterState("","",a,d);d={name:"",from:"",to:a,args:d};this.fireEvent("enter"+a,d);this.fireEvent("enter",d);this.isFinished()&&this.fireEvent("finished",d)}},setTerminalState:function(a){this.terminal=a},addTransitions:function(a){a.forEach(d=>this.addTransition(...d))},addTransition:function(a,d,f){d=d?x(d)?d:[d]:["*"];const e=this.map;let g=d.length;for(;g;){let c,h;((c=e)[h=d[--g]]??(c[h]={}))[a]=f}},doTransition:function(...a){a.unshift("sync");return p(this,a)},doAsyncTransition:function(...a){a.unshift("async");
return p(this,a)},resumeTransition:function(a){const d=this.__pendingTransition;if(!d)return 4;const f=this.current,e=this.__transDestinationState,g=this.__additionalArgs,c={name:d,from:f,to:e,args:g},h=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const b=this.doLeaveState(d,f,e,g);if(!1===b)return v(this),k(this),2;if("async"===b||"async"===a)return this.__transStage="enterState",h("start"+d,c),h("start",c),h("leave"+f,c),h("leave",c),k(this),3;h("start"+d,c);h("start",c);
h("leave"+f,c);h("leave",c);case "enterState":this.current=e,v(this),this.doEnterState(d,f,e,g),h("enter"+e,c),h("enter",c),h("end"+d,c),h("end",c),this.isFinished()&&h("finished",c)}k(this);return 1},doLeaveState:(a,d,f,e)=>{},doEnterState:(a,d,f,e)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(a){return x(a)?a.includes(this.current):this.current===a},can:function(a){return void 0!==this.map[this.current][a]?!0:void 0!==this.map["*"][a]}})})(myt);
(r=>{const x=(a,d)=>a.replicationIndex-d.replicationIndex,v=(a,d)=>{let f=a.length;for(;f;){const e=a[--f];e.decrementLockedCounter();d&&e.update()}},p=a=>{k(a);const d=a.template;d&&(a.__pool=new r.TrackActivesPool(d,a.parent))},k=a=>{const d=a.__pool;if(d){const f=a.parent.getLayouts();a=f;let e=a.length;for(;e;)a[--e].incrementLockedCounter();d.putActives();d.destroyPooledInstances();v(f,!1);d.destroy()}};r.Replicable=new JS.Module("Replicable",{include:[r.Reusable],replicate:function(a,d){this.replicationData=
a;this.replicationIndex=d},notify:(a,d)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(a,d){return d===this.replicationIndex&&a===this.replicationData}});r.Replicator=new JS.Class("Replicator",r.Node,{initNode:function(a,d){this.callSuper(a,d);p(this);this.doReplication()},destroy:function(){k(this);this.callSuper()},setTemplate:function(a){(this.template=a.includes(r.Replicable)?a:null)||r.dumpStack("Template not replicable");this.inited&&
(p(this),this.doReplication())},setData:function(a){this.data=a;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const a=this.__pool;let d;if(a){d=this.parent.getLayouts();for(var f=d.length;f;)d[--f].incrementLockedCounter();const e=(f=this.data)?f.length:0,g=a.getActives(),c=g.length,h=[];let b=c,m,t;for(g.sort(x);b;)if(m=g[--b],t=m.replicationIndex,t>=e||!m.alreadyHasReplicationData(f[t],t))h[t]=m;for(b=h.length;b;)(m=h[--b])&&
a.putInstance(m);for(b=0;e>b;++b)(b>=c||null!=h[b])&&a.getInstance().replicate(f[b],b);for(b=d.length;b;)d[--b].sortSubviews(x);v(d,!0)}},notify:function(a,d){var f=this.__pool;if(f){f=f.getActives();let e=f.length;for(;e;)f[--e].notify(a,d)}}})})(myt);
(r=>{const x=JS.Singleton,v=document,p=r.global.register,{DomElementProxy:k,DomObservable:a}=r;new x("GlobalMouse",{include:[k,a,r.MouseObservable],initialize:function(){this.setDomElement(v);p("mouse",this)}});new x("GlobalTouch",{include:[k,a,r.TouchObservable],initialize:function(){this.setDomElement(v);p("touch",this)}})})(myt);
(r=>{let x,v,p;const k=[],a=[],d=g=>{const c=p;c!==g&&(c&&(c.notifyDragLeave(v),v.destroyed||v.notifyDragLeaving(c),x("dragLeave",c)),p=g)&&(g.notifyDragEnter(v),v.destroyed||v.notifyDragEntering(g),x("dragEnter",c))},f=g=>{let c=v;c!==g&&((v=g)?(c=g,e(c,a).forEach(h=>{h.notifyDragStart(c)}),e(c,k).forEach(h=>{h.notifyAutoScrollerDragStart(c)}),x("startDrag",g)):(e(c,a).forEach(h=>{h.notifyDragStop(c)}),e(c,k).forEach(h=>{h.notifyAutoScrollerDragStop(c)}),x("stopDrag",g)))},e=(g,c)=>{if(g.destroyed)return[];
if(g.isAnyDragGroup())return c;const h=[];g=g.getDragGroups();let b=c.length;for(;b;){const m=c[--b];if(m.isAnyDropGroup())h.push(m);else{const t=m.getDropGroups();for(const n in g)if(t[n]){h.push(m);break}}}return h};new JS.Singleton("GlobalDragManager",{include:[r.Observable],initialize:function(){r.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>v,registerAutoScroller:g=>{k.push(g)},unregisterAutoScroller:g=>{g=k.indexOf(g);-1<g&&k.splice(g,1)},registerDropTarget:g=>
{a.push(g)},unregisterDropTarget:g=>{g=a.indexOf(g);-1<g&&a.splice(g,1)},startDrag:g=>{f(g)},stopDrag:(g,c,h)=>{c.notifyDropped(p,h);h||p?.notifyDrop(c);d();f();p&&!h&&x("drop",[c,p])},updateDrag:(g,c)=>{const h=e(c,a);let b=h.length,m;if(0<b){const {pageX:t,pageY:n}=g.value;for(;b;)g=h[--b],g.willAcceptDrop(c)&&c.willPermitDrop(g)&&g.isPointVisible(t,n)&&(!m||g.isInFrontOf(m))&&(m=g)}d(m)}})})(myt);
(r=>{const x=JS.Module,{mouse:v,keys:p,idle:k}=r.global;r.Activateable=new x("Activateable",{doActivated:()=>{}});r.UpdateableUI=new x("UpdateableUI",{initNode:function(a,d){this.callSuper(a,d);this.updateUI()},updateUI:()=>{}});r.Disableable=new x("Disableable",{initNode:function(a,d){d.disabled??(d.disabled=!1);this.callSuper(a,d)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});r.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[p.CODE_ENTER,p.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,d){this.activateKeyDown="";d.activationKeys??(d.activationKeys=r.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,d);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=
a??[]},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const d=r.KeyObservable.getCodeFromEvent(a);this.activationKeys.includes(d)&&(this.activateKeyDown===d?this.doActivationKeyDown(d,!0):(this.activateKeyDown=d,this.doActivationKeyDown(d,!1)),a.value.preventDefault())}},__hndlKeyPress:function(a){if(!this.disabled){const d=r.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===d&&this.activationKeys.includes(d)&&
a.value.preventDefault()}},__hndlKeyUp:function(a){if(!this.disabled){const d=r.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===d&&this.activationKeys.includes(d)&&(this.activateKeyDown="",this.doActivationKeyUp(d),a.value.preventDefault())}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,d)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});r.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(a,d){switch(a){case p.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,d))return;break;case p.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,d))return;break;case p.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,d))return;break;case p.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,d))return}this.callSuper(a,d)},doKeyArrowLeftOrUp:(a,d)=>{},doKeyArrowRightOrDown:(a,d)=>{}});r.MouseOver=new x("MouseOver",{initNode:function(a,d){d.mouseOver??(d.mouseOver=
!1);this.callSuper(a,d);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(k,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(k,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI?.()},doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});r.MouseDown=new x("MouseDown",{initNode:function(a,d){d.mouseDown??(d.mouseDown=!1);this.callSuper(a,
d);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(v,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(v,
"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(v,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated?.()}});r.MouseOverAndDown=new x("MouseOverAndDown",{include:[r.MouseOver,r.MouseDown]});r.Draggable=new x("Draggable",{initNode:function(a,d){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let f=!0;null!=d.isDraggable&&(f=d.isDraggable,delete d.isDraggable);this.callSuper(a,d);this.setIsDraggable(f)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;let d;a?d=this.attachToDom:this.inited&&(d=this.detachFromDom);if(d){a=this.getDragViews();let f=a.length;for(;f;){const e=a[--f];d.call(this,e,"__doMouseDown","mousedown");d.call(this,e,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",
a,!0)},setDragOffsetX:function(a,d){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDragOffsetY:function(a,d){this.dragOffsetY!==a&&(this.dragOffsetY=a,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},
getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const d=r.MouseObservable.getMouseFromEvent(a),f=this.getODE();this.dragInitX=d.x-f.offsetLeft;this.dragInitY=d.y-f.offsetTop;this.attachToDom(v,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(v,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(v,"__doMouseUp",
"mouseup",!0),this.detachFromDom(v,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===p.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const d=r.MouseObservable.getMouseFromEvent(a);r.Geometry.measureDistance(d.x,d.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(v,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(p,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(v,"updateDrag","mousemove",!0);this.updateDrag(a)},updateDrag:function(a){this.__lastMousePosition=r.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,d){this.detachFromDom(v,
"__doMouseUp","mouseup",!0);this.detachFromDom(v,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(p,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,d){this.disabled||(this.setX(a),this.setY(d))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(r=>{const x=JS.Class;var v=JS.Module,p=r.View;const k=r.KeyActivation,a=r.Button=new v("Button",{include:[r.Activateable,r.UpdateableUI,r.Disableable,r.MouseOverAndDown,k],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(d,f){f.focusable??(f.focusable=!0);f.cursor??(f.cursor="pointer");this.callSuper(d,f)},setFocused:function(d){const f=this.focused;this.callSuper(d);this.inited&&this.focused!==f&&this.updateUI()},doActivationKeyDown:function(d,f){f||this.updateUI()},doActivationKeyUp:function(d){this.callSuper(d);
this.updateUI()},doActivationKeyAborted:function(d){this.callSuper(d);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const d=this.__restoreCursor;d&&(this.setCursor(d),this.__restoreCursor=null);this.activateKeyDown!==k.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});v=r.SimpleButtonStyle=new v("SimpleButtonStyle",{include:[a],setActiveColor:function(d){this.activeColor!==d&&(this.activeColor=d,this.inited&&this.updateUI())},setHoverColor:function(d){this.hoverColor!==d&&(this.hoverColor=d,this.inited&&this.updateUI())},setReadyColor:function(d){this.readyColor!==
d&&(this.readyColor=d,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(d,f=1){this.setOpacity(f);this.setBgColor(d)}});p=r.SimpleButton=new x("SimpleButton",p,{include:[v],initNode:function(d,f){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(d,f)}});
r.SimpleTextButton=new x("SimpleTextButton",p,{initNode:function(d,f){this.inset=this.outset=0;f.shrinkToFit??(f.shrinkToFit=!1);f.height??(f.height=24);f.textY??(f.textY="middle");this.callSuper(d,f);d=this.textY;f={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof d?f.valign=d:f.y=d;d=this.textView=new r.Text(this,f);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",d,"visible",d,"width",d,
"height",d,"y"])},setInset:function(d){this.set("inset",this.valueFromEvent(d),!0)},setOutset:function(d){this.set("outset",this.valueFromEvent(d),!0)},setText:function(d){this.text!==d&&(this.text=d,this.inited&&(this.textView.setText(d),this.fireEvent("text",d)))},setShrinkToFit:function(d){this.shrinkToFit!==d&&(this.shrinkToFit=d,this.inited&&(this.textView.setWhiteSpace(d?"nowrap":"normal"),this.fireEvent("shrinkToFit",d)))},setTextY:function(d){if(this.textY!==d&&(this.textY=d,this.inited)){const f=
this.textView;this.fireEvent("textY",d);"string"===typeof d?f.setValign(d):(f.setValign(""),f.setY(d))}},__updateContent:function(d){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:f,outset:e,textView:g}=this;this.__updateContentLoopBlock=!0;g.setX(f);this.shrinkToFit?this.setWidth(f+(g.visible&&this.text?g.width:0)+e):g.setWidth(this.width-f-e);this.__updateContentLoopBlock=!1}}});r.TextButton=new x("TextButton",r.PaddedText,{include:[v],initNode:function(d,f){f.focusIndicator??
(f.focusIndicator=!1);f.roundedCorners??(f.roundedCorners=3);f.textAlign??(f.textAlign="center");f.paddingTop??(f.paddingTop=1);f.height??(f.height=23-(f.paddingTop??0));f.activeColor??(f.activeColor="#ddd");f.hoverColor??(f.hoverColor="#eee");f.readyColor??(f.readyColor="#fff");this.callSuper(d,f)}})})(myt);
(r=>{const x=console.warn,{focus:v,mouse:p}=r.global,k={};r.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:a=>k[a]},initNode:function(a,d){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(a,d)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=a},setFloatingAlign:function(a){this.set("floatingAlign",a,!0)},
setFloatingValign:function(a){this.set("floatingValign",a,!0)},setFloatingAlignOffset:function(a){this.set("floatingAlignOffset",a,!0)},setFloatingValignOffset:function(a){this.set("floatingValignOffset",a,!0)},createFloatingPanel:function(a,d,f){a=a??this.floatingPanelId;f=f??{};f.panelId=a;return k[a]=new d(null,f)},getFloatingPanel:function(a){return k[a??this.floatingPanelId]},toggleFloatingPanel:function(a){this.getFloatingPanel(a??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(a):
this.showFloatingPanel(a)},showFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.show(this),this.setLastFloatingPanelShown(a)},hideFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(a){this.callSuper?.()},notifyPanelHidden:function(a){this.callSuper?.()},getFloatingAlignForPanel:function(a){return this.floatingAlign},getFloatingValignForPanel:function(a){return this.floatingValign},
getFloatingAlignOffsetForPanel:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(a){return this.floatingValignOffset},getNextFocus:function(){const a=this.lastFloatingPanelShown;return a?.isShown()?a:this.callSuper?.()},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});r.FloatingPanel=new JS.Class("FloatingPanel",r.View,{include:[r.RootView],initNode:function(a,d){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=
this.hideOnBlur=this.hideOnMouseDown=!0;d.visible=d.focusIndicator=!1;d.focusable=d.focusCage=!0;this.callSuper(a,d)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=a},__doMouseDown:function(a){var d=a.value;a=d.pageX;d=d.pageY;this.containsPoint(a,d)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(a,
d)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(a){this.hideOnMouseDown&&this.hide(a)},focus:function(a){if(this.owner&&this.isAncestorOf(v.focusedView))this.owner[(v.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(a);else{const d=this.getFirstFocusableDescendant();d===this?this.callSuper(a):d.focus(a)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(a){(a=a.value)&&!this.isAncestorOf(a)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||
this.ignoreOwnerForHideOnBlur&&v.focusedView===this.owner||this.hide(!0)},isShown:function(){return this.visible},show:function(a){this.isShown()||(this.bringToFront(),this.updateLocation(a),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(p,"__doMouseDown","mousedown",!0),this.attachTo(v,"__doFocusChange","focused"))},hide:function(a){this.isShown()&&(this.detachFromDom(p,"__doMouseDown","mousedown",!0),this.detachFrom(v,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),
a||this.restoreFocus(),this.setOwner())},restoreFocus:function(){this.owner?.focus()},updateLocation:function(a){this.setOwner(a);this.updateLocationX(a);this.updateLocationY(a)},updateLocationX:function(a){const d=a.getFloatingAlignForPanel(this),f=typeof d;let e;if("string"===f)switch(e=a.getPagePosition().x+a.getFloatingAlignOffsetForPanel(this),d){case "outsideRight":e+=a.width;break;case "insideRight":e+=a.width-this.width;break;case "outsideLeft":e-=this.width;break;case "insideLeft":break;
default:x("Invalid align value",f,d)}else"number"===f?e=d:x("Invalid align type",f,d);this.setX(e)},updateLocationY:function(a){const d=a.getFloatingValignForPanel(this),f=typeof d;let e;if("string"===f)switch(e=a.getPagePosition().y+a.getFloatingValignOffsetForPanel(this),d){case "outsideBottom":e+=a.height;break;case "insideBottom":e+=a.height-this.height;break;case "outsideTop":e-=this.height;break;case "insideTop":break;default:x("Invalid valign value",f,d)}else"number"===f?e=d:x("Invalid valign type",
f,d);this.setY(e)}})})(myt);
(r=>{const x=JS.Class,v=JS.Module,p=r.global,k=p.focus,a=p.keys,d=a.LIST_KEYS,f=g=>{var c=g.itemConfig??[];const h=c.length,b=g.items,m=b.length;var t=g.defaultItemClass;const n=g.getContentView(),l=n.getLayouts(),w=g.fixedWidth,B=0<w;l.forEach(q=>{q.incrementLockedCounter()});const G=n.getODE(),J=G.nextSibling,L=G.parentNode;L.removeChild(G);let A=0;const u={listView:g};B&&(u.width=w,u.enableEllipsis=!0);for(;h>A;++A){var z=c[A];const q=z.klass??t;z=z.attrs??{};let y=b[A];y&&!y.isA(q)&&(y.destroy(),
y=null);y??=b[A]=new q(n,{...u});y&&(y.callSetters(z),y.__LAYOUT_IDX=A)}L.insertBefore(G,J);if(B)c=w;else for(c=g.minWidth,A=0;h>A;)t=b[A++],t.syncToDom(),c=Math.max(c,t.getMinimumWidth());for(;m>A;)b[A++].destroy();b.length=h;if(!B)for(A=0;h>A;)g.updateItemWidth(b[A++],c);g.updateContentWidth(n,c);l.forEach(q=>{q.sortSubviews((y,D)=>y.__LAYOUT_IDX-D.__LAYOUT_IDX);q.decrementLockedCounter();q.update()})},e=r.ListViewItemMixin=new v("ListViewItemMixin",{setListView:function(g){this.listView=g},getMinimumWidth:()=>
0,syncToDom:()=>{}});r.ListView=new x("ListView",r.FloatingPanel,{initNode:function(g,c){this.items=[];this.maxHeight=-1;this.minWidth=0;c.defaultItemClass??(c.defaultItemClass=r.ListViewItem);c.overflow??(c.overflow="autoy");c.bgColor??(c.bgColor="#ccc");c.boxShadow??(c.boxShadow=r.Button.FOCUS_SHADOW);this.callSuper(g,c);f(this);this.buildLayout(this.getContentView())},buildLayout:g=>{new r.SpacedLayout(g,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(g){this.minWidth=g},setDefaultItemClass:function(g){this.defaultItemClass=
g},setItemConfig:function(g){this.itemConfig=g;this.inited&&f(this)},getContentView:function(){return this},setMaxHeight:function(g){this.maxHeight!==g&&(this.maxHeight=g,this.inited&&(this.fireEvent("maxHeight",g),this.setHeight(this.height)))},setHeight:function(g){this.callSuper(0<=this.maxHeight?Math.min(this.maxHeight,g):g);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(g){this?.owner.doItemActivated(g)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(g=>g.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(g=>g.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(g,c)=>{g.setWidth(c)},updateContentWidth:(g,c)=>{g.setWidth(c)}});r.ListViewAnchor=new v("ListViewAnchor",{include:[r.FloatingPanelAnchor,r.ArrowKeyActivation],initNode:function(g,
c){c.listViewClass??(c.listViewClass=r.ListView);c.listViewAttrs??(c.listViewAttrs={});c.itemConfig??(c.itemConfig=[]);c.activationKeys??(c.activationKeys=d);this.callSuper(g,c)},setListViewClass:function(g){this.listViewClass=g},setListViewAttrs:function(g){this.listViewAttrs=g},setItemConfig:function(g){this.itemConfig=g},getFloatingValignForPanel:function(g){var c=g.height,h=this.getPagePosition().y,b=p.windowResize.getHeight()-this.getPagePosition().y-this.height;g=h-c;c=b-c;h=h>b;b=this.floatingValign;
switch(b){case "outsideBottom":0>c&&h&&(b="outsideTop");break;case "insideBottom":0>c&&h&&(b="insideTop");break;case "outsideTop":0>g&&!h&&(b="outsideBottom");break;case "insideTop":0>g&&!h&&(b="insideBottom")}return b},doItemActivated:function(g){this.hideFloatingPanel()},getFloatingPanel:function(g){return this.callSuper(g)??this.createFloatingPanel(g,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(g){const c=this.getFloatingPanel(g);c&&(c.setItemConfig(this.itemConfig),this.callSuper(g))},
doActivationKeyDown:function(g,c){g===a.CODE_ESC?this.hideFloatingPanel():this.callSuper(g,c)},doKeyArrowLeftOrUp:function(g,c){this.focusToLastItem()},doKeyArrowRightOrDown:function(g,c){this.focusToFirstItem()},doActivationKeyUp:function(g){if(g!==a.CODE_ESC)switch(this.callSuper(g),g){case a.CODE_ARROW_LEFT:case a.CODE_ARROW_UP:this.focusToLastItem();break;case a.CODE_ARROW_RIGHT:case a.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const g=this.getFloatingPanel();g?.isShown()&&
g.focusToLastItem()},focusToFirstItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToFirstItem()},updateEntryAttr:function(g,c,h){(g=this.getEntryByValue(g))&&(g.attrs[c]=h);return g},getEntryByValue:function(g){return this.itemConfig.find(c=>c?.attrs&&c.attrs.value===g)}});r.ListViewItem=new x("ListViewItem",r.TextButton,{include:[e,r.ArrowKeyActivation],initNode:function(g,c){c.activeColor??(c.activeColor="#bbb");c.hoverColor??(c.hoverColor="#fff");c.readyColor??(c.readyColor=
"#eee");c.paddingLeft??(c.paddingLeft=8);c.paddingRight??(c.paddingRight=8);c.textAlign??(c.textAlign="left");c.roundedCorners??(c.roundedCorners=0);c.activationKeys??(c.activationKeys=d);c.focusIndicator??(c.focusIndicator=!0);const h=this.__enableEllipsis=c.enableEllipsis;delete c.enableEllipsis;this.callSuper(g,c);this.addDomClass("mytButtonText");h&&this.enableEllipsis()},setText:function(g){this.callSuper(g);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width=
"auto";this.sizeViewToDom()},getMinimumWidth:function(){return Math.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(g,c){g===a.CODE_ESC?this.listView.owner.hideFloatingPanel():this.callSuper(g,c)},doKeyArrowLeftOrUp:function(g,c){k.prev()},doKeyArrowRightOrDown:function(g,c){k.next()}});r.ListViewSeparator=new x("ListViewSeparator",r.View,{include:[e],initNode:function(g,c){c.height??(c.height=1);c.bgColor??(c.bgColor="#666");
this.callSuper(g,c)}})})(myt);
(r=>{const x=r.AccessorSupport,v=x.generateSetterName,p={},k=r.BAG=new JS.Class("BAG",{include:[x,r.Destructible,r.Observable],extend:{getGroup:(a,d)=>{if(a&&d){let f;return(f=p[a]??(p[a]={}))[d]??(f[d]=new k(a,d))}},removeGroup:(a,d)=>{if(a&&d&&(a=p[a])){const f=a[d];f&&delete a[d];return f}}},initialize:function(a,d){this.__nodes=[];this.trueNode=null;this.attrName=a;this.groupId=d},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&k.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(a){this.set("groupId",a,!0)},setAttrName:function(a){this.set("attrName",a,!0)},setTrueNode:function(a){this.set("trueNode",a,!0)},getNodes:function(){return this.__nodes},register:function(a){a&&!this.isRegistered(a)&&(this.__nodes.push(a),a[this.attrName]&&this.setTrue(a))},unregister:function(a){if(a){const d=this.__nodes,f=d.indexOf(a);-1<f&&d.splice(f,1);this.trueNode===a&&this.setTrueNode(null);0===d.length&&
this.destroy()}},setTrue:function(a){if(a&&this.trueNode!==a&&this.isRegistered(a)){const d=this.attrName,f=v(d),e=this.__nodes;let g=e.length;for(this.setTrueNode(a);g;){const c=e[--g];if(a===c){if(!c[d])c[f](!0)}else if(c[d])c[f](!1)}}},setFalse:function(a){a&&this.trueNode===a&&(a[v(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(a){return this.__nodes.includes(a)}});r.BAGMembership=new JS.Module("BAGMembership",{initNode:function(a,d){this.__bags=[];this.callSuper(a,d)},destroy:function(){const a=
this.__bags;let d=a.length;for(;d;){const f=a[--d];this.removeFromBAG(f.attrName,f.groupId)}this.callSuper()},isRegisteredWithBAG:function(a){return this.__bags.includes(a)},getBAG:(a,d)=>k.getGroup(a,d),addToBAG:function(a,d){d=this.getBAG(a,d);this.isRegisteredWithBAG(d)||(this.__bags.push(d),d.register(this),this.isAttachedTo(this,"__updateForBAG",a)||this.attachTo(this,"__updateForBAG",a))},removeFromBAG:function(a,d){d=this.getBAG(a,d);if(this.isRegisteredWithBAG(d)){const f=this.__bags;let e=
f.length,g=!0;for(;e;){const c=f[--e];c===d?(f.splice(e,1),d.unregister(this)):c.attrName===a&&(g=!1)}g&&this.detachFrom(this,"__updateForBAG",a)}},__updateForBAG:function(a){this.__bags.forEach(d=>{if(d.attrName===a.type)d[a.value?"setTrue":"setFalse"](this)})}})})(myt);
(r=>{const x=v=>{const p=v.label||"";v.setText('<i class="far fa-'+(!0===v.selected?"dot-":"")+'circle"></i>'+(0<p.length?" ":"")+p)};r.Radio=new JS.Class("Radio",r.Text,{include:[r.SimpleButtonStyle,r.BAGMembership],initNode:function(v,p){p.selected??(p.selected=!1);p.groupId??(p.groupId=r.generateGuid());p.focusIndicator??(p.focusIndicator=!1);p.activeColor??(p.activeColor="inherit");p.hoverColor??(p.hoverColor="inherit");p.readyColor??(p.readyColor="inherit");const k=p.value;delete p.value;this.callSuper(v,
p);this.setValue(k);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);r.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(v){this.set("optionValue",v,!0)},setValue:function(v){if(this.inited){const p=this.getBAG("selected",this.groupId);if(p){const k=p.getNodes();let a=k.length;for(;a;){const d=k[--a];if(d.optionValue===v){p.setTrue(d);break}}}}},getValue:function(){var v=this.getBAG("selected",this.groupId);return(v=v?v.trueNode:null)?v.optionValue:null},
setSelected:function(v){this.selected!==v&&(this.selected=v,this.inited&&(this.fireEvent("selected",v),x(this)))},setGroupId:function(v){if(this.groupId!==v){const p=this.groupId;this.groupId=v;p&&this.removeFromBAG("selected",p);v&&this.addToBAG("selected",v);this.inited&&this.fireEvent("groupId",v)}},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(v,p=1){this.setOpacity(p);this.setTextColor(v)}})})(myt);
(r=>{const x=JS.Module,v=r.global.keys,p=r.Selectable=new x("Selectable",{setSelected:function(a){a=this.valueFromEvent(a);this.selected!==a&&(this.selected=a,this.inited&&this.fireEvent?.("selected",a))},isSelected:function(){return!!this.selected},canSelect:a=>!0,canDeselect:a=>!0}),k=r.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>v.isShiftKeyDown(),isToggleMode:()=>v.isAcceleratorKeyDown()},initNode:function(a,d){this.__selected={};this.__lastSelectedItem=null;d.selectedCount=
0;d.itemSelectionId??(d.itemSelectionId="id");d.maxSelected??(d.maxSelected=-1);this.callSuper(a,d)},setItemSelectionId:function(a){this.itemSelectionId=a},setMaxSelected:function(a){this.maxSelected=a},setSelectedCount:function(a){this.selectedCount!==a&&(this.selectedCount=a,this.inited&&this.fireEvent("selectedCount",a))},isAddMode:()=>k.isAddMode(),isToggleMode:()=>k.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(a){a&&!this.isSelectedItem(a)&&this.canSelectItem(a)&&
(a.setSelected(!0),this.__selected[a[this.itemSelectionId]]=a,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=a,this.doSelected(a),this.fireEvent("itemSelected",a))},doSelected:a=>{},selectById:function(a){this.select(this.getSelectableItem(a))},canSelectItem:function(a){const {maxSelected:d,selectedCount:f}=this;if(0===d)return!1;if(1===d){if(0<f&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<d&&f>=d)return!1;return a.canSelect(this)},selectAll:function(){const a=
this.getSelectableItems();let d=a.length;for(;d;)this.select(a[--d])},deselect:function(a){this.isSelectedItem(a)&&this.canDeselectItem(a)&&(a.setSelected(!1),delete this.__selected[a[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===a&&(this.__lastSelectedItem=null),this.doDeselected(a),this.fireEvent("itemDeselected",a))},doDeselected:a=>{},deselectById:function(a){this.deselect(this.getSelectableItem(a))},canDeselectItem:function(a){return a.canDeselect(this)},
deselectAll:function(){const a=this.__selected;for(const d in a)this.deselect(a[d])},isSelectedItem:a=>a?a.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const a=[],d=this.getSubviews();let f=d.length;for(;f;){const e=d[--f];e.isA(p)&&a.push(e)}return a},getSelectableItems:function(){const a=this.getManagedItems();let d=a.length;for(;d;)a[--d].canSelect(this)||a.splice(d,1);return a},getSelectableItem:function(a){const d=
this.getSelectableItems(),f=this.itemSelectionId;let e=d.length;for(;e;){const g=d[--e];if(g[f]===a)return g}}})})(myt);
(r=>{const x=JS.Class,{View:v,SizeToParent:p}=r,k=r.TabSlider=new x("TabSlider",v,{include:[r.Selectable,r.Disableable,p],initNode:function(d,f){const e=this;let g;f.defaultPlacement="wrapper.container";f.percentOfParentWidth=100;f.expansionState="collapsed";f.tabId??(f.tabId=r.generateGuid());f.tabContainer??(f.tabContainer=d);f.selected??(f.selected=!1);f.buttonClass??(f.buttonClass=r.SimpleButton);f.zIndex??(f.zIndex=0);f.buttonHeight??(f.buttonHeight=30);f.fillColorSelected??(f.fillColorSelected=
"#666");f.fillColorHover??(f.fillColorHover="#eee");f.fillColorActive??(f.fillColorActive="#ccc");f.fillColorReady??(f.fillColorReady="#fff");f.minContainerHeight??(f.minContainerHeight=100);f.selected&&(g=!0,delete f.selected);e.callSuper(d,f);e.button=new e.buttonClass(e,{ignorePlacement:!0,zIndex:1,height:e.buttonHeight,focusIndicator:!0,groupId:e.parent.parent.groupId,percentOfParentWidth:100,hoverColor:e.fillColorHover,activeColor:e.fillColorActive,readyColor:e.fillColorReady},[p,{doActivated:()=>
{const c=e.tabContainer;e.isSelected()&&1!==c.maxSelected?c.deselect(e):c.select(e)},updateUI:function(){this.callSuper();e.selected&&-1!==e.tabContainer.maxSelected&&this.setBgColor(e.fillColorSelected);e.notifyButtonRedraw()}}]);d=e.wrapper=new v(e,{ignorePlacement:!0,y:e.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[p,{setHeight:function(c){this.callSuper(Math.round(c))},setWidth:function(c){this.callSuper(c);this.inited&&this.container.setWidth(c)}}]);new r.SizeToChildren(d.container=
new v(d),{axis:"y"});e.constrain("__updateHeight",[d,"y",d,"height"]);g&&e.tabContainer.select(e);!0===f.disabled&&e.setDisabled(!0);e.setHeight(e.getCollapsedHeight())},setSelected:function(d){this.callSuper(d);this.button?.updateUI()},setTabId:function(d){this.tabId=d},setTabContainer:function(d){this.tabContainer=d},setMinContainerHeight:function(d){this.minContainerHeight=d},setButtonClass:function(d){this.buttonClass=d},setFillColorSelected:function(d){this.fillColorSelected=d},setFillColorHover:function(d){this.fillColorHover=
d},setFillColorActive:function(d){this.fillColorActive=d},setFillColorReady:function(d){this.fillColorReady=d},setButtonHeight:function(d){this.buttonHeight!==d&&(this.buttonHeight=d,this.button&&(this.button.setHeight(d),this.wrapper.setY(d)))},setExpansionState:function(d){if(this.expansionState!==d){this.expansionState=d;this.inited&&this.fireEvent("expansionState",d);const f=this.wrapper;f&&("expanded"===d?(f.setMaskFocus(!1),f.setOverflow("auto")):"expanding"===d?f.setVisible(!0):"collapsed"===
d?f.setVisible(!1):"collapsing"===d&&(f.setMaskFocus(!0),f.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(d){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(d){const f=this,e=f.wrapper;d-=f.getCollapsedHeight();f.setExpansionState("expanding");e.stopActiveAnimators();if(e.height!==d){const g=f.tabContainer.duration;1===g?(e.setHeight(d),f.setExpansionState("expanded")):e.animate({attribute:"height",
to:d,duration:g}).next(c=>{f.setExpansionState("expanded")})}else f.setExpansionState("expanded")},collapse:function(){const d=this,f=d.wrapper;d.setExpansionState("collapsing");f.stopActiveAnimators();if(0!==f.height){const e=d.tabContainer.duration;1===e?(f.setHeight(0),d.setExpansionState("collapsed")):f.animate({attribute:"height",to:0,duration:e}).next(g=>{d.setExpansionState("collapsed")})}else d.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});r.TextTabSlider=new x("TextTabSlider",k,{initNode:function(d,f){f.labelTextColorChecked??(f.labelTextColorChecked="#fff");f.labelTextColor??(f.labelTextColor="#333");this.callSuper(d,f);this.button.label=new r.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(d){this.labelTextColorChecked=d},setLabelTextColor:function(d){this.labelTextColor=d},setText:function(d){this.text!==d&&(this.text=d,this.button?.label?.setText(d))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const a=r.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[r.SelectionManager],
extend:{SPACING:1},initNode:function(d,f){const e=this;e._tabSliders=[];f.defaultPlacement="container";f.spacing??(f.spacing=a.SPACING);f.overflow??(f.overflow="autoy");f.itemSelectionId??(f.itemSelectionId="tabId");f.maxSelected??(f.maxSelected=1);f.duration??(f.duration=500);e.updateLayout=r.debounce(e.updateLayout);e.callSuper(d,f);d=e.container=new v(e,{ignorePlacement:!0,percentOfParentWidth:100},[p,{subnodeAdded:function(g){this.callSuper(g);g instanceof k&&(e._tabSliders.push(g),e.attachTo(g,
"updateLayout","selected"))},subnodeRemoved:function(g){if(g instanceof k){const c=e._tabSliders,h=c.indexOf(g);-1<h&&(e.detachFrom(g,"updateLayout","selected"),c.splice(h,1))}this.callSuper(g)}}]);d.layout=new r.SpacedLayout(d,{axis:"y",spacing:e.spacing,collapseParent:!0});e.attachTo(e,"updateLayout","height")},setSpacing:function(d){this.spacing!==d&&(this.spacing=d,this.layout?.setSpacing(d))},setDuration:function(d){this.duration=d},updateLayout:function(d,f){d=this._tabSliders;for(var e=d.length,
g=e,c=0,h=0,b=0;g;){var m=d[--g];m.visible&&(++b,m.selected?(c+=m.getMinimumExpandedHeight(),h+=m.getPreferredExpandedHeight()):(m=m.getCollapsedHeight(),c+=m,h+=m))}g=this.container.layout;b=g.inset+g.outset+g.spacing*(b-1);h+=b;g=this.height;c=c+b>g;b=h>g;m=this.duration;h-=g;0<f&&this.setDuration(f);for(g=e;g;)if(e=d[--g],e.visible)if(e.selected){let t;if(c)t=e.getMinimumExpandedHeight();else if(b){const n=e.getPreferredExpandedHeight(),l=e.getMinimumExpandedHeight();t=n-h;l>t?(h-=n-l,t=l):h=0}else t=
e.getPreferredExpandedHeight();e.expand(t)}else e.collapse();0<f&&this.setDuration(m)}})})(myt);
(r=>{const x=k=>{const a=[];switch(k.tabContainer.location){case "top":a.push("TopLeft","TopRight");break;case "bottom":a.push("BottomLeft","BottomRight");break;case "left":a.push("TopLeft","BottomLeft");break;case "right":a.push("TopRight","BottomRight")}a.forEach(d=>{k["setRounded"+d+"Corner"](k.cornerRadius||0)})},v=r.Tab=new JS.Class("Tab",r.SimpleTextButton,{include:[r.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(k,a){a.tabId??(a.tabId=r.generateGuid());a.tabContainer??(a.tabContainer=
k);let d;a.selected&&(d=!0,delete a.selected);a.inset??(a.inset=v.INSET);a.outset??(a.outset=v.OUTSET);a.selectedColor??(a.selectedColor="#fff");a.hoverColor??(a.hoverColor="#eee");a.activeColor??(a.activeColor="#aaa");a.readyColor??(a.readyColor="#ccc");a.labelTextSelectedColor??(a.labelTextSelectedColor="#333");a.height??(a.height=24);a.focusIndicator??(a.focusIndicator=!1);a.cornerRadius??(a.cornerRadius=6);this.callSuper(k,a);d&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(k){this.tabId=k},setTabContainer:function(k){this.tabContainer=k},setSelectedColor:function(k){this.selectedColor=k},setLabelTextColor:function(k){this.labelTextColor=k},setCornerRadius:function(k){this.cornerRadius=k;this.inited&&x(this)},setLabelTextSelectedColor:function(k){this.labelTextSelectedColor=k;this.inited&&this.selected&&this.textView.setTextColor(k)},setSelected:function(k){this.callSuper(k);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),p=r.TabContainer=new JS.Module("TabContainer",{include:[r.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(k,a){this.__tabs=[];a.spacing??(a.spacing=p.SPACING);a.inset??(a.inset=p.INSET);a.location??(a.location="top");a.itemSelectionId??
(a.itemSelectionId="tabId");a.maxSelected??(a.maxSelected=1);this.callSuper(k,a);this.layout=new r.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(k){this.location=k},setSpacing:function(k){this.spacing!==k&&(this.spacing=k,this.layout?.setSpacing(k))},setInset:function(k){this.inset!==k&&(this.inset=k,this.layout?.setInset(k))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(k){this.callSuper(k);if(k.isA(v))switch(this.__tabs.push(k),this.location){case "top":k.setValign("bottom");break;case "bottom":k.setValign("top");break;case "left":k.setAlign("right");break;case "right":k.setAlign("left")}},subnodeRemoved:function(k){if(k.isA(v)){const a=this.__tabs,d=a.indexOf(k);-1<d&&a.splice(d,1)}this.callSuper(k)}})})(myt);
(r=>{const x=JS.Class,v=Math.min,p=Array.isArray,k=r.global.keys,{SizeToDom:a,View:d,Disableable:f,KeyObservable:e}=r,g=r.Button.FOCUS_SHADOW,c=(l,w,B)=>{l[B]!==w&&(l[B]=w,l.getIDS()[B]=w+"px",l.inited&&(l.fireEvent(B,w),l.sizeViewToDom()))},h=(l,w,B)=>{l[w]!==B&&(l.getIDE()[w]=l[w]=B,l.inited&&l.fireEvent(w,B))},b=r.NativeInputWrapper=new x("NativeInputWrapper",d,{include:[f,r.InputObservable],initNode:function(l,w){w.tagName??(w.tagName="input");w.focusable??(w.focusable=!0);this.callSuper(l,w);
this.addDomClass("mytNativeInput")},createOurDomElement:function(l){l=this.callSuper(l);this.inputType&&((p(l)?l[1]:l).type=this.inputType);return l},setDisabled:function(l){this.disabled!==l&&(this.getIDE().disabled=l,this.callSuper(l))},setValue:function(l){this.value!==l&&(this.value=l,this.setDomValue(l),this.inited&&this.fireEvent("value",l))},getDomValue:function(){return this.getIDE().value},setDomValue:function(l){const w=this.getIDE();w.value!==l&&(w.value=l)}}),m=r.InputSelectOption=new x("InputSelectOption",
d,{include:[f,r.Selectable],createOurDomElement:l=>document.createElement("option"),setSelected:function(l){l=this.valueFromEvent(l);const w=this.getIDE();w.selected!==l&&(w.selected=l)},setDisabled:function(l){this.disabled!==l&&(this.getIDE().disabled=l,this.callSuper(l))},setValue:function(l){h(this,"value",l)},setLabel:function(l){this.label!==l&&(this.getIDE().textContent=this.label=l,this.inited&&this.fireEvent("label",l))},isSelected:function(){return this.getIDE().selected},canSelect:function(l){return!this.disabled&&
!this.getIDE().selected&&this.parent===l},canDeselect:function(l){return!this.disabled&&this.getIDE().selected&&this.parent===l}}),t=r.BaseInputText=new x("BaseInputText",b,{include:[r.TextSupport],initNode:function(l,w){w.bgColor??(w.bgColor="transparent");w.spellcheck??(w.spellcheck=!1);this.callSuper(l,w);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(l){this.callSuper(l);this.setValue(l)},
setSpellcheck:function(l){h(this,"spellcheck",l)},setMaxLength:function(l){h(this,"maxLength",null==l||0>l?void 0:l)},setAllowedChars:function(l){this.allowedChars=l},setPlaceholder:function(l){h(this,"placeholder",l)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(g)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(l){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(l){const w=
l.value,B=this.allowedChars;B&&!B.includes(e.getKeyFromEvent(l))&&w.preventDefault();this.filterInputPress(w)},filterInput:l=>l,filterInputPress:l=>{},__syncToDom:function(l){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const l=document.selection.createRange();l.moveStart("character",-this.getDomValue().length);return l.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(l,w){if(null==w||l===w){if(this.getCaretPosition()===l)return;
w=l}var B=this.getIDE();B.setSelectionRange?B.setSelectionRange(l,w):B.createTextRange&&(B=B.createTextRange(),B.collapse(!0),B.moveEnd("character",w),B.moveStart("character",l),B.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const l=this.getIDE();return{start:l.selectionStart,startElem:l,end:l.selectionEnd,endElem:l}},setSelection:function(l){l&&
this.setCaretPosition(l.start,l.end)},saveSelection:function(l){this._selRange=l||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=r.InputText=new x("InputText",t,{include:[r.SizeHeightToDom],initNode:function(l,w){this.inputType=!0===w.password?"password":"text";this.callSuper(l,w);this.setCaretToEnd()},setPassword:function(l){this.set("password",l,!0);this.inited&&(this.getIDE().type=l?"password":"text")}});r.EditableText=new x("EditableText",
t,{include:[a],initNode:function(l,w){w.tagName??(w.tagName="div");w.inputType=null;w.whiteSpace??(w.whiteSpace="pre");w.contentEditable??(w.contentEditable=!0);this.callSuper(l,w);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(l){c(this,l,"minWidth")},setMinHeight:function(l){c(this,l,"minHeight")},setPadding:function(l){this.setPaddingTop(l);this.setPaddingRight(l);
this.setPaddingBottom(l);this.setPaddingLeft(l)},setPaddingTop:function(l){c(this,l,"paddingTop")},setPaddingRight:function(l){c(this,l,"paddingRight")},setPaddingBottom:function(l){c(this,l,"paddingBottom")},setPaddingLeft:function(l){c(this,l,"paddingLeft")},setContentEditable:function(l){h(this,"contentEditable",l)},filterInputPress:function(l){const w=this.maxLength;0<=w&&this.getCharacterCount()===w&&l.preventDefault();this.callSuper(l)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(l){const w=this.getIDE();w.innerHTML!==l&&(w.innerHTML=l,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(l){e.isEnterKeyEvent(l)&&(l.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(l){this.callSuper(l);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(l,w){if(null==w||l===w){if(this.getCaretPosition()===l)return;w=l}this.saveSelection({start:l,startElem:this.getIDE().firstChild,end:w,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(l){this.saveSelection();return!0},getSelection:function(){let l;if(window.getSelection){const w=window.getSelection();if(0<w.rangeCount){if(w.extentNode===
this.getIDE())return;l=w.getRangeAt(0)}}else document.selection&&(l=document.selection.createRange());return{start:l?l.startOffset:0,startElem:l?l.startContainer:this.getIDE().firstChild,end:l?l.endOffset:0,endElem:l?l.endContainer:this.getIDE().firstChild}},setSelection:function(l){if(l){const {startElem:w,endElem:B}=l;if(w&&w.parentNode&&B&&B.parentNode){const G=document.createRange();G.setStart(w,v(l.start,w.length));G.setEnd(B,v(l.end,B.length));window.getSelection?(l=window.getSelection(),0<
l.rangeCount&&l.removeAllRanges(),l.addRange(G)):document.selection&&G.select()}}}});r.InputTextArea=new x("InputTextArea",t,{initNode:function(l,w){w.tagName??(w.tagName="textarea");w.inputType=null;w.resize??(w.resize="none");w.wrap??(w.wrap="soft");this.callSuper(l,w)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(l){const w=this;w.resize!==l&&(l=w.resize=w.getIDS().resize=l||"none",w.inited&&w.fireEvent("resize",l),"none"!==l&&(w.__resizeObserver??
(w.__resizeObserver=new ResizeObserver(()=>{w.doResize()}))).observe(w.getIDE()))},setWrap:function(l){h(this,"wrap",l)},doResize:function(){const l=this.resize;"both"!==l&&"horizontal"!==l||a.sizeWidth(this);"both"!==l&&"vertical"!==l||a.sizeHeight(this)}});r.ComboBox=new x("ComboBox",n,{include:[r.Activateable,r.KeyActivation,r.ListViewAnchor],initNode:function(l,w){this.filterItems=!0;w.activationKeys??(w.activationKeys=[k.CODE_ENTER,k.CODE_ESC,k.CODE_ARROW_UP,k.CODE_ARROW_DOWN]);w.bgColor??(w.bgColor=
"#fff");w.borderWidth??(w.borderWidth=1);w.borderStyle??(w.borderStyle="solid");w.floatingAlignOffset??(w.floatingAlignOffset=w.borderWidth);w.fullItemConfig??(w.fullItemConfig=[]);w.listViewAttrs={...w.listViewAttrs,maxHeight:w.listViewAttrs?.maxHeight??99};this.callSuper(l,w)},setFullItemConfig:function(l){this.fullItemConfig=l},setFilterItems:function(l){this.filterItems=l},__syncToDom:function(l){const w=this.value;this.callSuper(l);w!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(l){const w=
this.getFloatingPanel(l);if(w){let G;if(this.filterItems){G=[];var B=this.value;B=null==B?"":(""+B).toLowerCase();const J=this.fullItemConfig,L=J.length;for(let A=0;L>A;){const u=J[A++],z=u.attrs.text.toLowerCase(),q=z.indexOf(B);0===q?z!==B&&G.push(u):0<q&&G.push(u)}}else G=this.fullItemConfig;0<G.length?(w.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(G),this.callSuper(l)):this.hideFloatingPanel(l)}},doItemActivated:function(l){this.setValue(null==l.value?l.text:l.value);this.callSuper(l)},
doActivated:function(){this.toggleFloatingPanel()}});r.InputSelect=new x("InputSelect",b,{include:[a],initNode:function(l,w){w.tagName??(w.tagName="select");w.inputType=null;w.multiple??(w.multiple=!1);w.size??(w.size=w.multiple?4:1);this.callSuper(l,w);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(l){h(this,"multiple",l)},setSize:function(l){h(this,"size",l)},setOptions:function(l){this.destroyAllOptions();p(l)&&l.forEach(w=>{this.addOption(w)})},getOptions:function(){return this.getSubviews().slice()},
setValue:function(l){p(l)&&r.areArraysEqual(l,this.value)||this.value===l||(this.value=l,this.inited&&this.fireEvent("value",l))},subviewAdded:function(l){l instanceof m||(r.dumpStack("Subview unsupported. Destroying it"),l.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(g)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(l=>l.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(l=>
l.value)},getOptionForValue:function(l){return this.getOptions().find(w=>w.value===l)},addOption:function(l){return new m(this,l)},destroyAllOptions:function(){this.getOptions().forEach(l=>{l.destroy()})},destroyOptionWithValue:function(l){if(l=this.getOptionForValue(l))if(l.destroy(),l.destroyed)return!0;return!1},deselectAll:function(){let l=!1;this.getOptions().forEach(w=>{w.isSelected()&&(w.setSelected(!1),l=!0)});l&&this.__doChanged()},selectValues:function(l){(p(l)?l:[l]).forEach(w=>{this.selectValue(w)})},
selectValue:function(l){this.select(this.getOptionForValue(l))},select:function(l){l?.canSelect(this)&&(l.setSelected(!0),this.__syncToDom())},deselectValue:function(l){this.deselect(this.getOptionForValue(l))},deselect:function(l){l?.canDeselect(this)&&(l.setSelected(!1),this.__syncToDom())},__doChanged:function(l){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(r=>{const x=JS.Module,v=Math.round;var p=r.ValueComponent=new x("ValueComponent",{initNode:function(a,d){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(a,d)},setValueFilter:function(a){this.valueFilter=a;this.inited&&a&&this.setValue(this.value)},setValue:function(a){this.valueFilter&&(a=this.valueFilter(a));this.value!==a&&(this.value=a,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(a,d){const f=this.valueFilter;
this.setValueFilter(f?"last"===d?e=>a(f(e)):e=>f(a(e)):a)}});const k=r.RangeComponent=new x("RangeComponent",{include:[p],setLowerValue:function(a){this.setValue({lower:a,upper:this.value&&void 0!==this.value.upper?this.value.upper:a})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(a){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:a,upper:a})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(a){if(a){var d=
this.value;const g=d?d.lower:void 0;d=d?d.upper:void 0;this.valueFilter&&(a=this.valueFilter(a));if(a.lower!==g||a.upper!==d){var f;(f=a).lower??(f.lower=a.upper);var e;(e=a).upper??(e.upper=a.lower);void 0!==a.lower&&void 0!==a.upper&&a.lower>a.upper&&(f=a.lower,a.lower=a.upper,a.upper=f);this.value=a;this.inited&&(this.fireEvent("value",this.getValue()),a.lower!==g&&this.fireEvent("lowerValue",a.lower),a.upper!==d&&this.fireEvent("upperValue",a.upper))}}else this.callSuper(a)},getValueCopy:function(){const a=
this.value;return{lower:a.lower,upper:a.upper}}});p=r.BoundedValueComponent=new x("BoundedValueComponent",{include:[p],initNode:function(a,d){const f=this;f.appendToEarlyAttrs("snapToInt","minValue","maxValue");d.snapToInt??(d.snapToInt=!0);d.valueFilter||(d.valueFilter=e=>{var g=f.maxValue;if(null!=g&&e>g)return g;g=f.minValue;return null!=g&&e<g?g:e});f.callSuper(a,d)},setSnapToInt:function(a){this.snapToInt!==a&&(this.snapToInt=a,this.inited&&(this.fireEvent("snapToInt",a),a&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(a){this.snapToInt&&null!=a&&(a=v(a));if(this.minValue!==a){const d=this.maxValue;null!=d&&a>d&&(a=d);this.minValue!==a&&(this.minValue=a,this.inited&&(this.fireEvent("minValue",a),this.setValue(this.value)))}},setMaxValue:function(a){this.snapToInt&&null!=a&&(a=v(a));if(this.maxValue!==a){const d=this.minValue;null!=d&&a<d&&(a=d);this.maxValue!==a&&(this.maxValue=a,this.inited&&(this.fireEvent("maxValue",a),this.setValue(this.value)))}},
setValue:function(a){this.callSuper(this.snapToInt&&null!=a&&!isNaN(a)?v(a):a)}});r.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[p,k],initNode:function(a,d){const f=this;d.valueFilter||(d.valueFilter=e=>{if(e){const g=f.maxValue,c=f.minValue;null!=g&&e.upper>g&&(e.upper=g);null!=c&&e.lower<c&&(e.lower=c)}return e});f.callSuper(a,d)},setValue:function(a){this.snapToInt&&null!=a&&(null==a.lower||isNaN(a.lower)||(a.lower=v(a.lower)),null==a.upper||isNaN(a.upper)||(a.upper=v(a.upper)));
this.callSuper(a)}})})(myt);
(r=>{const x=v=>{const p=v.label??"";v.setText('<i class="'+("solid"===(v.checkboxStyle??"outline")?"fas":"far")+" fa-"+(v.isChecked()?"check-":"")+'square"></i>'+(0<p.length?" ":"")+p)};r.Checkbox=new JS.Class("Checkbox",r.Text,{include:[r.SimpleButtonStyle,r.ValueComponent],initNode:function(v,p){this.appendToEarlyAttrs("userUnselectable");p.value??(p.value=!1);p.focusIndicator??(p.focusIndicator=!1);p.checkboxStyle??(p.checkboxStyle="outline");p.activeColor??(p.activeColor="inherit");p.hoverColor??
(p.hoverColor="inherit");p.readyColor??(p.readyColor="inherit");this.callSuper(v,p);r.FontAwesome.registerForNotification(this);x(this)},setValue:function(v){this.value!==v&&(this.callSuper(v),this.inited&&x(this))},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},setCheckboxStyle:function(v){this.checkboxStyle!==v&&(this.set("checkboxStyle",v,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(v,p=1){this.setOpacity(p);this.setTextColor(v)}})})(myt);
(r=>{let x;const v=JS.Class,p=JS.Module,k=console.warn,{KeyObservable:a,UpdateableUI:d,dumpStack:f,global:e}=r,g=e.focus,c=e.keys,h={},b=(q,y)=>{if(q){const D=q.id;q.id?y(D):f("No ID")}else f("No processor")},m=q=>{b(q,y=>{h[y]=q})},t=q=>{const y=r.BAG.getGroup("selected",q.groupId);if(y){const D=y.getNodes();q=q.value;let E=D.length;for(;E;){const I=D[--E];if(I.optionValue===q){y.setTrue(I);break}}}},n=q=>{if(q.groupId){const y=r.BAG.getGroup("selected",q.groupId);y&&q.syncTo(y,"__syncValue","trueNode")}},
l=(q,y)=>{const D=[];q.__v?.forEach(E=>{y=E.isFormValid(q,null,D)&&y});q.setErrorMessages(D);q.setIsValid(y);return y},w=(q,y,D)=>{q.__vp?.forEach(E=>{E[D]&&(y=E.process(y))});return y},B=r.ValueProcessor=new v("ValueProcessor",{initialize:function(q,y,D,E){this.id=q;this.runForDefault=!!y;this.runForRollback=!!D;this.runForCurrent=!!E},process:q=>q}),G=r.ToNumberValueProcessor=new v("ToNumberValueProcessor",B,{process:q=>{if(null==q||""===q||"-"===q)return q;const y=Number(q);return isNaN(y)?q:y}}),
J=r.TrimValueProcessor=new v("TrimValueProcessor",B,{initialize:function(q,y,D,E,I){this.callSuper(q,y,D,E);this.trim=I},process:function(q){q+="";switch(this.trim){case "start":case "left":return q.trimStart();case "end":case "right":return q.trimEnd();default:return q.trim()}}}),L=r.UndefinedValueProcessor=new v("UndefinedValueProcessor",B,{initialize:function(q,y,D,E,I){this.callSuper(q,y,D,E);this.defaultValue=I},process:function(q){return void 0===q?this.defaultValue:q}}),A=r.Form=new p("Form",
{initNode:function(q,y){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(q,y);this.form?.isA(A)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(A)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(q){this.set("errorMessages",q,!0)},getFullId:function(){const q=[this.id];let y=this.form;for(;y&&y.id;)q.unshift(y.id),y=y.form;return q.join(".")},setId:function(q){if(this.id!==q){const y=this.id;this.id=
q;(q=this.form)&&this.inited&&(q.removeSubForm(y),q.addSubForm(this))}},setForm:function(q){if(this.form!==q){const y=this.form;this.form=q;y?.removeSubForm(this.id);this.inited&&q?.addSubForm(this)}},setIsValid:function(q){this.isValid=q;this.inited&&this.fireEvent("isValid",q);const y=this.form;y&&!this._lockCascade&&(q?y.verifyValidState(this):y.notifySubFormInvalid())},setIsChanged:function(q){if(this.isChanged!==q){this.isChanged=q;this.inited&&this.fireEvent("isChanged",q);const y=this.form;
y&&!this._lockCascade&&(q?y.notifySubFormChanged():y.verifyChangedState(this))}},setValidators:function(q){let y=q.length;for(;y;){const D=q[--y];"string"===typeof D&&(q[y]=e.validators.getValidator(D),q[y]||q.splice(y,1))}this.__v=q},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(u))return this.value;const q={},y=this.__sf;for(const D in y)q[D]=y[D].getValue();return q},setValue:function(q){this.callSuper?.(q);if("object"===typeof q&&!this.isA(u))for(const y in q){const D=
this.getSubForm(y);D?q[y]=D.setValue(q[y]):k("ID in setValue for missing subform",y)}this.form?.notifyValueChanged(this);return q},getDefaultValue:function(){const q={};let y=this.__sf;for(const D in y)q[D]=y[D].getDefaultValue();return q},setDefaultValue:function(q){if("object"===typeof q)for(const y in q){const D=this.getSubForm(y);D?q[y]=D.setDefaultValue(q[y]):k("ID in setDefaultValue for missing subform",y)}return q},getRollbackValue:function(){const q={},y=this.__sf;for(const D in y)q[D]=y[D].getRollbackValue();
return q},setRollbackValue:function(q){if("object"===typeof q)for(const y in q){const D=this.getSubForm(y);D?q[y]=D.setRollbackValue(q[y]):k("ID in setRollbackValue for missing subform",y)}return q},addAccelerator:function(q,y){this.__acc[q]=y},removeAccelerator:function(q){delete this.__acc[q]},invokeAccelerator:function(q,y){this.__acc[q]?.call(this,y??null)},addValidator:function(q){q&&this.__v.push(q)},removeValidator:function(q){if(q){const y=this.__v;let D=y.length;for(;D;){const E=y[--D];if(E.id===
q)return y.splice(D,1),E}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(q){const y=q.id;null!=this.getSubForm(y)?k("ID in use for subform, add aborted",y,q):(q.setForm(this),this.__sf[y]=q,q.isChanged&&this.notifySubFormChanged(),q.isValid||this.notifySubFormInvalid())},removeSubForm:function(q){const y=this.getSubForm(q);y&&(y.setForm(null),delete this.__sf[q],this.verifyChangedState(),this.verifyValidState());return y},getSubForm:function(q){return this.__sf[q]},
getSubForms:function(){return this.__sf},getInvalidSubformIds:function(q){q&&this.doValidation();const y=[];(function I(E){if(E.isA(u))E.isValid||y.push(E.getFullId());else{E=E.getSubForms();for(const K in E)I(E[K])}})(this);return y},getAllErrorMessages:function(){const q=this.__sf;let y=(this.errorMessages??[]).slice();for(const D in q)y.push(...q[D].getAllErrorMessages());return y},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(q){const y=this.__sf;let D=!0;for(const E in y){const I=
y[E];I!==q&&(D=I.isValid&&D)}return l(this,D)},doValidation:function(){const q=this.__sf;let y=!0;for(const D in q)y=q[D].doValidation()&&y;this._lockCascade=!0;y=l(this,y);this._lockCascade=!1;return y},notifyValueChanged:function(q){this.form?.notifyValueChanged(q)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(q){const y=this.__sf;let D=!1;for(const E in y){const I=y[E];I!==q&&(D=I.isChanged||D)}this.setIsChanged(D);return D},setup:function(q,y,D){this._lockCascade=
!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;q??={};y??={};D??={};const E=this.__sf;for(const I in E)E[I].setup(q[I],y[I],D[I])},resetForm:function(){this._lockCascade=!0;const q=this.__sf;for(const y in q)q[y].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const q=this.__sf;for(const y in q)q[y].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const q={},y=this.__sf;for(const D in y){const E=y[D];E.isChanged&&(q[D]=E.getChangedValue())}return q}}),u=r.FormElement=new p("FormElement",{include:[A],initNode:function(q,y){this.__vp=[];this.callSuper(q,y)},getValue:function(){return w(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(q){void 0===q&&(q=this.getRollbackValue());this.value!==q&&(this.callSuper(q),this.verifyChangedState());return q},
getDefaultValue:function(){return w(this,this.defaultValue,"runForDefault")},setDefaultValue:function(q){this.defaultValue!==q&&(this.defaultValue=q,this.inited&&this.fireEvent("defaultValue",q),this.verifyChangedState());return q},getRollbackValue:function(){return w(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(q){void 0===q&&(q=this.getDefaultValue());this.rollbackValue!==q&&(this.rollbackValue=q,this.inited&&this.fireEvent("rollbackValue",q),this.verifyChangedState());return q},
setValueProcessors:function(q){let y=q.length;for(;y;){const D=q[--y];"string"===typeof D&&(q[y]=h[D],q[y]||q.splice(y,1))}this.__vp=q},addValueProcessor:function(q){this.__vp.push(q)},removeValueProcessor:function(q){if(q){const y=this.__vp;let D=y.length;for(;D;){const E=y[--D];if(E.id===q)return y.splice(D,1),E}}},addSubForm:q=>{f("addSubForm unsupported on FormElement")},getSubForm:q=>{f("getSubForm unsupported on FormElement")},removeSubForm:q=>{f("removeSubForm unsupported on FormElement")},
verifyChangedState:function(q){q=this.getValue()!==this.getRollbackValue();this.setIsChanged(q);return q},setup:function(q,y,D){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(q);this.setRollbackValue(y);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(D)},resetForm:function(){this._lockCascade=!0;const q=this.getDefaultValue();this.setRollbackValue(q);this.setValue(q);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),z=r.FormInputTextMixin=new p("FormInputTextMixin",{include:[u,d],initNode:function(q,y){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";y.bgColor??(y.bgColor="#fff");y.borderWidth??(y.borderWidth=1);y.borderStyle??(y.borderStyle="solid");this.callSuper(q,y);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(q){this.validateWhen=q},setAcceleratorScope:function(q){this.acceleratorScope=q},setErrorColor:function(q){this.errorColor=q},setActionRequiredColor:function(q){this.actionRequiredColor=
q},setNormalColor:function(q){this.normalColor=q},setIsChanged:function(q){this.callSuper(q);this.inited&&this.updateUI()},setIsValid:function(q){this.callSuper(q);this.inited&&this.updateUI()},setValue:function(q){q=this.callSuper(q);const y=this.validateWhen;"key"!==y&&"blurWithKeyFix"!==y||this.verifyValidState();return q},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":g.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(q){a.isEnterKeyEvent(q)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(q){a.isEscKeyEvent(q)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const q=this.validateWhen;"blur"!==q&&"blurWithKeyFix"!==q||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
r.RootForm=new p("RootForm",{include:[A],initNode:function(q,y){this.callSuper(q,y);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:q=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});r.FormCheckbox=new v("FormCheckbox",r.Checkbox,{include:[u],initNode:function(q,y){this.rollbackValue=this.defaultValue=
!1;this.callSuper(q,y)}});r.FormComboBox=new v("FormComboBox",r.ComboBox,{include:[u,d],initNode:function(q,y){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(q,y);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(q){this.validateWhen=q},setAcceleratorScope:function(q){this.acceleratorScope=q},setErrorColor:function(q){this.errorColor=
q},setActionRequiredColor:function(q){this.actionRequiredColor=q},setNormalColor:function(q){this.normalColor=q},setIsChanged:function(q){this.callSuper(q);this.inited&&this.updateUI()},setIsValid:function(q){this.callSuper(q);this.inited&&this.updateUI()},setValue:function(q){q=this.callSuper(q);const y=this.validateWhen;"key"!==y&&"blurWithKeyFix"!==y||this.verifyValidState();return q},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":g.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(q){this._isShown=!0},notifyPanelHidden:function(q){this._isShown=!1},doActivationKeyDown:function(q,y){q!==c.CODE_ESC||this._isShown?this.callSuper(q,y):this.invokeAccelerator("reject")},doActivationKeyUp:function(q){q!==
c.CODE_ENTER||this._isShown?this.callSuper(q):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const q=this.validateWhen;"blur"!==q&&"blurWithKeyFix"!==q||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});r.FormEditableText=new v("FormEditableText",r.EditableText,{include:[z],__hndlKeyDown:function(q){"nowrap"===this.whitespace&&this.callSuper(q)}});r.FormInputText=new v("FormInputText",
r.InputText,{include:[z]});r.FormInputTextArea=new v("FormInputTextArea",r.InputTextArea,{include:[z],__hndlKeyDown:q=>{}});r.FormInputSelect=new v("FormInputSelect",r.InputSelect,{include:[u],setValue:function(q){if(!this.__abortSetValue)return q=this.callSuper(q),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(q),this.__abortSetValue=!1,this.verifyValidState(),q}});r.FormRadioGroup=new v("FormRadioGroup",r.Node,{include:[r.ValueComponent,u],initNode:function(q,y){y.groupId??(y.groupId=
r.generateGuid());this.callSuper(q,y);void 0!==this.value&&t(this);n(this)},setValue:function(q){q=this.callSuper(q);this.inited&&t(this);return q},setGroupId:function(q){if(this.groupId!==q){if(this.groupId){const y=r.BAG.getGroup("selected",this.groupId);y&&this.detachFrom(y,"__syncValue","trueNode")}this.groupId=q;this.inited&&n(this)}},__syncValue:function(q){q=q.value;this.setValue(q?q.optionValue:null)}});r.UseOtherFieldIfEmptyValueProcessor=new v("UseOtherFieldIfEmptyValueProcessor",B,{initialize:function(q,
y,D,E,I){this.callSuper(q,y,D,E);this.otherField=I},process:function(q){return null==q||""===q?this.otherField.getValue():q}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){m(x=new L("undefToEmpty",!0,!0,!0,""));m(new G("toNumber",!0,!0,!0));m(new J("trimLeft",!0,!0,!0,"left"));m(new J("trimRight",!0,!0,!0,"right"));m(new J("trimBoth",!0,!0,!0,"both"));e.register("valueProcessors",this)},getValueProcessor:q=>h[q],register:m,unregister:q=>{b(q,y=>{h[y]&&delete h[y]})}})})(myt);
(r=>{const x=JS.Class,v=r.dumpStack,p=Math.round,k={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},a=(g,c)=>{g[c](g,"doDragOver","dragover",!1);g[c](g,"doDragEnter","dragenter",!1);g[c](g,"doDragLeave","dragleave",!1);g[c](g,"doDrop","drop",!1)},d=r.DragDropSupport=new JS.Module("DragDropSupport",{include:[r.DragDropObservable],initNode:function(g,c){this.callSuper(g,c);this.disabled||this.setupDragListeners()},setDisabled:function(g){this.disabled!==
g&&(this.getIDE().disabled=g,this.callSuper(g),this.inited&&(g?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){a(this,"attachToDom")},teardownDragListeners:function(){a(this,"detachFromDom")},doDragOver:g=>{},doDragEnter:g=>{},doDragLeave:g=>{},doDrop:function(g){this.handleFiles(g.value.dataTransfer.files,g)},handleFiles:function(g,c){if(void 0!==g){let h=g.length;for(;h;){const b=this.filterFiles(g[--h]);b&&this.handleDroppedFile(b,c)}}else v("No File API")},
filterFiles:g=>g,handleDroppedFile:(g,c)=>{}}),f=r.Uploader=new x("Uploader",r.View,{include:[d,r.Disableable,r.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(g,c)=>{if(void 0!==FileReader){const h=new FileReader;h.onload=c;h.readAsDataURL(g)}},isSameFile:(g,c)=>null!=g&&null!=c&&g.name===c.name&&g.type===c.type&&g.size===c.size,createFile:g=>{const c=(new r.URI(g)).file;return{name:c,serverPath:g,size:-1,type:k[r.getExtension(c)]}}},initNode:function(g,c){const h=this;h.files=
[];c.requestFileParam??(c.requestFileParam="file");c.maxFiles??(c.maxFiles=-1);h.callSuper(g,c);h.fileInput=new r.NativeInputWrapper(h,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:h.disabled,overflow:"hidden"},[r.SizeToParent,{initNode:function(b,m){this.inputType="file";this.callSuper(b,m);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<h.maxFiles},_hndlInput:function(b){h.handleFiles(this.getIDE().files,b)}}])},setValue:function(g){this.clearFiles();
g&&(Array.isArray(g)||(g=[g]),g.forEach(c=>{this.addFile(f.createFile(c))}));return this.callSuper?this.callSuper(g):g},getValue:function(){return this.value},setDisabled:function(g){this.callSuper(g);this.fileInput?.setDisabled(g)},setMaxFiles:function(g){this.maxFiles!==g&&(this.maxFiles=g,this.inited&&this.fireEvent("maxFiles",g),this.fileInput&&(this.fileInput.getIDE().multiple=1<g))},setUploadUrl:function(g){this.set("uploadUrl",g,!0)},setRequestFileParam:function(g){this.set("requestFileParam",
g,!0)},bringSubviewToFront:function(g){g===this.fileInput?this.callSuper(g):this.sendSubviewBehind(g,this.fileInput)},subviewAdded:function(g){this.callSuper(g);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(g,c){this.addFile(g)},filterFiles:function(g){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:g},uploadFiles:function(g,c){g??=this.uploadUrl;const h=this.files;let b=h.length;for(;b;)this.uploadFile(h[--b],g,c)},makeFetchOptionsForUpload:g=>
({method:"POST",body:g}),uploadFile:function(g,c,h){const b=this,m=new FormData;m.append(h??b.requestFileParam,g,g.name);r.doFetch(c??b.uploadUrl,b.makeFetchOptionsForUpload(m),!1,t=>{b.handleUploadSuccess(g,t)},t=>{b.handleUploadFailure(g,t)})},handleUploadSuccess:function(g,c){g[f.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(g,c);this.updateValueFromFiles()},handleUploadFailure:(g,c)=>{v("Upload failure:"+c.status+":"+c.message)},parseServerPathFromResponse:(g,c)=>null,addFile:function(g){this.files.push(g);
this.updateValueFromFiles();this.fireEvent("addFile",g)},removeFile:function(g){const c=this.files;let h=c.length;for(;h;)if(f.isSameFile(c[--h],g)){c.splice(h,1);this.updateValueFromFiles();this.fireEvent("removeFile",g);break}},updateValueFromFiles:function(){const g=[];var c=this.files;let h=c.length;for(;h;){const b=c[--h][f.FILE_ATTR_SERVER_PATH];b&&g.push(b)}c=g.length;this.value=1===c?g[0]:0===c?void 0:g;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const g=this.files;let c=g.length;for(;c;)this.removeFile(g[--c])}}),e=r.ImageUploader=new x("ImageUploader",f,{extend:{isImageFile:g=>/image/i.test(g.type)},initNode:function(g,c){c.maxFiles=1;this.callSuper(g,c)},setWidth:function(g){this.callSuper(g);this.inited&&this.updateImageSize()},setHeight:function(g){this.callSuper(g);this.inited&&this.updateImageSize()},filterFiles:function(g){if(e.isImageFile(g)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(g)}},addFile:function(g){const c=this,h=e.isImageFile(g);c.callSuper(g);const b=c.image=new r.Image(c,{useNaturalSize:!1,align:"center",valign:"middle"});b.file=g;const m=t=>{const n=new Image;n.onload=()=>{g.width=n.width;g.height=n.height;b&&!b.destroyed&&c.updateImage(g,b,n.src)};n.src=t};h?-1===g.size?m(g.serverPath):void 0!==FileReader&&e.isImageFile(g)&&f.readFile(g,t=>{m(t.target.result)}):-1===g.size?c.updateImage(g,b,g.serverPath):void 0!==FileReader&&f.readFile(g,t=>
{c.updateImage(g,b,t.target.result)})},scaleToFit:(g,c,h,b)=>h/b>g/c?[g,b*g/h]:[h*c/b,c],removeFile:function(g){this.callSuper(g);const c=this.getSubviews();let h=c.length;for(;h;){const b=c[--h];if(f.isSameFile(b.file,g)){b.destroy();break}}},handleDroppedFile:function(g,c){this.callSuper(g,c);this.uploadFile(g,this.uploadUrl)},updateImage:function(g,c,h){this.nativeWidth=g.width;this.nativeHeight=g.height;this.updateImageSize();c.setImageUrl(h)},updateImageSize:function(){const g=this.image;if(g&&
!g.destroyed){var c=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const h=p(c[0]);c=p(c[1]);g.setImageSize(h+"px "+c+"px");g.setWidth(h);g.setHeight(c)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(r=>{const x=(v,p,k,a)=>{k=k.bind(v);"y"!==v.axis&&(k(p,a,"x"),k(p,a,"boundsWidth"));"x"!==v.axis&&(k(p,a,"y"),k(p,a,"boundsHeight"));k(p,a,"visible")};r.SizeToChildren=new JS.Class("SizeToChildren",r.Layout,{initNode:function(v,p){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(v,p)},setAxis:function(v){this.axis!==v&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=v,this.startMonitoringAllSubviews(),this.fireEvent("axis",v),this.update()):this.axis=v)},setPaddingX:function(v){this.paddingX!==
v&&(this.paddingX=v,this.inited&&(this.fireEvent("paddingX",v),this.update()))},setPaddingY:function(v){this.paddingY!==v&&(this.paddingY=v,this.inited&&(this.fireEvent("paddingY",v),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const p=this.parent;if(!p.isBeingDestroyed){const k=this.subviews;var v=k.length;const a=this.axis,d=Math.max;let f,e;if("y"!==a){f=v;for(e=0;f;){const g=k[--f];g.visible&&(e=d(e,g.x+(0<g.boundsWidth?g.boundsWidth:0)))}p.setWidth(e+
this.paddingX)}if("x"!==a){f=v;for(e=0;f;)v=k[--f],v.visible&&(e=d(e,v.y+(0<v.boundsHeight?v.boundsHeight:0)));p.setHeight(e+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(v){x(this,v,this.attachTo,"update")},stopMonitoringSubview:function(v){x(this,v,this.detachFrom,"update")}})})(myt);
(r=>{let x=0;const v=JS.Class,{View:p,SizeToParent:k,RootView:a}=r,d=r.Dimmer=new v("Dimmer",p,{include:[k],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(e,g){const c=this;c.restoreFocus=!0;g.focusable=g.focusCage=!0;g.percentOfParentWidth??(g.percentOfParentWidth=100);g.percentOfParentHeight??(g.percentOfParentHeight=100);g.visible??(g.visible=!1);g.ignoreLayout??(g.ignoreLayout=!0);c.callSuper(e,g);c.overlay=new p(c,{ignorePlacement:!0,opacity:d.OPACITY,bgColor:d.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[k]);"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" ").forEach(h=>{c.attachDomObserver(c,"eatMouseEvent",h)});a.setupCaptureDrop(c)},destroy:function(){a.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(e){this.restoreFocus=e},eatMouseEvent:e=>!0,show:function(){const e=r.global.focus;this.prevFocus=e.focusedView??e.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(e){this.visible&&
(this.setVisible(!1),!e&&this.restoreFocus&&this.prevFocus?.focus())}}),f=r.ModalPanel=new v("ModalPanel",d,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(e,g){const c={name:"content",ignorePlacement:!0},h={...c,align:"center",valign:"middle"};this.defaultPlacement="content";g.sizingStrategy??(g.sizingStrategy="children");g.marginTop??(g.marginTop=f.MARGIN_TOP);g.marginLeft??
(g.marginLeft=f.MARGIN_LEFT);g.marginBottom??(g.marginBottom=f.MARGIN_BOTTOM);g.marginRight??(g.marginRight=f.MARGIN_RIGHT);g.paddingX??(g.paddingX=f.PADDING_X);g.paddingY??(g.paddingY=f.PADDING_Y);this.callSuper(e,g);switch(this.sizingStrategy){case "children":new r.SizeToChildren(new p(this,h),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new p(this,{...c,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[k]);break;case "basic":new p(this,h);break;default:new p(this,c)}},setSizingStrategy:function(e){this.sizingStrategy=e},setMarginTop:function(e){this.marginTop=e},setMarginLeft:function(e){this.marginLeft=e},setMarginBottom:function(e){this.marginBottom=e},setMarginRight:function(e){this.marginRight=e},setPaddingX:function(e){this.paddingX=e},setPaddingY:function(e){this.paddingY=e},
show:function(){this.callSuper();x++},hide:function(e){this.callSuper(e);x=Math.max(0,x-1)}})})(myt);
(r=>{const x=p=>{p[p.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},v=p=>{const k=p.size,a=p.getIDS();p.setWidth(k);p.setHeight(k);a.width=a.height=k-2*p.borderWidth+"px"};r.Spinner=new JS.Class("Spinner",r.View,{initNode:function(p,k){this.lateAttrs=["spinColor"];k.visible??(k.visible=!1);k.borderWidth??(k.borderWidth=5);k.borderColor??(k.borderColor="#fff");k.borderStyle??(k.borderStyle="solid");k.spinColor??(k.spinColor="#000");this.callSuper(p,k);this.getIDS().borderRadius="50%";v(this);
x(this)},setSize:function(p){this.size!==p&&(this.size=p,this.inited&&v(this))},setSpinColor:function(p){this.spinColor!==p&&(this.getIDS().borderTopColor=this.spinColor=p,this.inited&&this.fireEvent("spinColor",p))},setBorderWidth:function(p){this.borderWidth!==p&&(this.callSuper(p),this.inited&&v(this))},setVisible:function(p){this.visible!==p&&(this.callSuper(p),this.inited&&x(this))}})})(myt);
(r=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),v=a=>{if(Array.isArray(a)){let d=a.length;if(0<d){a.unshift("fa");d++;a[1].startsWith("fa-")||(a[1]="fa-"+a[1]);3<=d&&(a[2]=x[a[2]]??"");if(3<d)for(let f=3;d>f;f++)a[f].startsWith("fa-")||(a[f]="fa-"+a[f]);return'<i class="'+a.join(" ")+'"></i>'}}r.dumpStack("Error making tag");console.error(a);return""},p=a=>{let d=a.properties;d=d?"string"===typeof d?d.split(" "):d.slice():[];d.unshift(a.icon,a.size);a.setHtml(v(d))},k=a=>{["Free 400","Free 900",
"Brands 400"].forEach(d=>{r.registerForFontNotification(a,"Font Awesome 5 "+d)})};r.FontAwesome=new JS.Class("FontAwesome",r.Markup,{extend:{makeTag:v,registerForNotification:k},initNode:function(a,d){this.size=0;this.icon="";this.callSuper(a,d);p(this);k(this)},setIcon:function(a){const d=this.icon;this.set("icon",a,!0);this.inited&&d!==a&&p(this)},setSize:function(a){const d=this.size;this.set("size",a,!0);this.inited&&d!==a&&p(this)},setProperties:function(a){this.properties=a;this.fireEvent("properties",
a);this.inited&&p(this)}});r.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(r=>{let x,v,p,k,a=0,d=0,f=0,e=255,g=[],c,h,b,m,t,n,l,w,B,G,J,L,A,u,z,q,y,D,E,I,K,N,T,X,W,P;const U=JS.Class,{View:R,Text:da,ModalPanel:ea,SizeToChildren:va,SpacedLayout:Aa,WrappingLayout:Ba,SelectionManager:Ca,Color:ra,LocalStorage:Da,Button:wa,TextButton:oa,Draggable:Ea,FontAwesome:{makeTag:pa}}=r,{min:ha,max:ja}=Math,ma=[1,"solid","#333"],Fa=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new U("DialogButton",oa,{initNode:function(C,F){F.height??(F.height=17);F.paddingTop??(F.paddingTop=3);F.paddingLeft??
(F.paddingLeft=10);F.paddingRight??(F.paddingRight=10);F.activeColor??(F.activeColor="#bbb");F.hoverColor??(F.hoverColor="#ddd");F.readyColor??(F.readyColor="#ccc");F.domClass="mytButtonText";this.callSuper(C,F)}}),La=pa(["check"]),Ha=C=>{C.forEach(F=>{7===F?.length&&(F+="ff");Ga[F]=!0})},Ga={},Ma=new U("Swatch",R,{include:[wa],initNode:function(C,F){const H=F.width=F.height=16;F.border=Fa;F.domClass="mytCheckerboardPattern";const M=F.bgColor;this.callSuper(C,F);this.colorView=new R(this,{width:H,
height:H,bgColor:M});M===k&&(C=ra.makeColorFromHexString(k),new da(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView?.setBgColor(C);this.setTooltip(C)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Fa)}}),Na=r.ColorPicker=new U("ColorPicker",R,{initNode:function(C,F){x=this;x._isReady=!1;let H=F.color??"transparent";delete F.color;
p=F.alphaChannel??!1;delete F.alphaChannel;c=F.palette??[];Ha(c);delete F.palette;v="transparent"===H;x.callSuper(C,F);h=new R(x,{width:160,height:170});new Ba(h,{spacing:4,lineSpacing:4});b=new R(x,{x:170,width:139,height:139,border:ma},[Ea,{requestDragPosition:function(M,O){b.callSuper(b.x,b.y);const Q=this.getPagePosition();d=parseFloat(ja(0,ha(1,(M+this.dragInitX-Q.x)/this.width)));f=parseFloat(1-ja(0,ha(1,(O+this.dragInitY-Q.y)/this.height)));v=!1;x.updateUI()}}]);C=new R(b,{width:139,height:139});
F=new R(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";F.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";m=new R(F,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});t=new R(x,{x:315,y:30,width:24,height:109,border:ma},[Ea,{requestDragPosition:function(M,O){this.callSuper(t.x,t.y);a=parseFloat(ja(0,ha(1,(O+this.dragInitY-this.getPagePosition().y)/this.height)));v=!1;x.updateUI()}}]);t.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new R(t,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new R(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);C=146;p&&(B=new r.LabelSlider(x,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(M,O){O=M.value;if(null==O||isNaN(O))O=
0;M.value=r.formatAsPercentage(O/255,0);this.callSuper(M,!0);e=O;x._isReady&&(v=!1,x.updateUI())}}]),C+=23);l=new r.InputText(x,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(l,"_submitInput","blur");x.attachToDom(l,"_handleKeyDown","keydown");l.getIDS().paddingLeft="6px";C=new R(x,{x:170,y:C,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new R(C,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{x.setColor(H)}}]);w=new R(C,{x:30,width:30,height:23});if(C=Da.getItem("myt.default"))g=C.split(";"),Ha(g);x.setColor(H);x._isReady=!0},_handleKeyDown:C=>{r.KeyObservable.isEnterKeyEvent(C)&&x._submitInput()},_submitInput:()=>{x.setColor(l.value)},addToPalette:C=>{C&&"transparent"!==C&&!Ga[C]&&(g.unshift(C),g.length=ha(g.length,56),Da.setItem("myt.default",g.join(";")))},setColor:C=>{const F=C&&"transparent"!==C;if(p){let H="ff";F&&7<C.length&&(H=C.slice(7,9),C=C.slice(0,7));B.setValue(parseInt(H,
16))}else F&&7<C.length&&(C=C.slice(0,7));F?(C=ra.makeColorFromHexString(C).getHSV(),a=C.h/360,d=C.s,f=C.v,v=!1):v=!0;x.updateUI()},getColor:()=>{if(v)return"transparent";let C="";p&&(C=e.toString(16),2>C.length&&(C="0"+C));return ra.makeColorFromHSV(360*a,100*d,100*f).getHtmlHexString()+C},updateUI:()=>{const C=!v;n.setVisible(C);m.setVisible(C);C&&(m.setX(ja(0,ha(1,d)*(b.width+2))-5),m.setY(ja(0,ha(1,1-f)*(b.height+2))-5),n.setY(a*(t.height-2)-1));b.setBgColor(ra.makeColorFromHSV(360*a,100,100).getHtmlHexString());
k=x.getColor();l.setValue(k);w.setBgColor(k);x.redrawPalette()},redrawPalette:r.debounce(()=>{const C=h.getSubviews();let F=C.length;for(;F;)C[--F].destroy();const H=new Set;c.push(...g);c.forEach(M=>{if(p||7===M.length)7===M.length&&(M+="ff"),H.has(M)||(new Ma(h,{bgColor:M}),H.add(M))})},50)}),ya=C=>{C=C.split(":");return[ja(0,ha(23,parseInt(C[0]))),ja(0,ha(60,parseInt(C[1])))]},Ia=C=>{C.deselectAll();C=C.getSubviews();let F=C.length;for(;F;)C[--F].destroy()},Ja=new U("SelectableBtn",oa,{include:[r.Selectable],
setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new U("TimeBtn",Ja,{initNode:function(C,F){F.width=A?175:49;this.callSuper(C,F)},doActivated:function(){this.callSuper();const C=this.text,F=ya(C);P.selectById(C);K.setHours(F[0]);K.setMinutes(F[1])}}),Pa=new U("DayBtn",Ja,{initNode:function(C,F){F.width=23;F.border=xa;this.callSuper(C,F)},setData:function(C){this.data=
C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const C=new Date(this.data);C.setHours(K.getHours());C.setMinutes(K.getMinutes());
qa(C)}}),qa=C=>{C.setSeconds(0);C.setMilliseconds(0);var F=6>=z.length,H;if(F)for(H=7;H--&&!z.includes(C.getDay());)C.setDate(C.getDate()+1);K=C;const M=P.getODE().scrollTop;var O=new Date,Q=O.getFullYear();H=O.getMonth();var V=O.getDate();O.getHours();O.getMinutes();const S=C.getFullYear(),ba=C.getMonth(),sa=C.getDate();var ia=C.getTime();O=C.getHours();C=C.getMinutes();const la=(new Date(S,ba,1)).getDay()-u,ca=(new Date(S,ba+1,0)).getDate(),na=(new Date(S,ba,0)).getDate(),ta=new Date(S,ba,0),ua=
new Date(S,ba+2,0),Qa=Q==S&&H==ba;if(!A){Ia(W);H=new Date(ia);const ka=7+u;Q=J.days;T.setText(S+" "+J.sep+" "+J.months[ba]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);N.setVisible(null==q||q<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ba+1);X.setVisible(null==y||y>H.getTime());for(H=0;7>H;H++)new da(W,{width:23,height:20,textAlign:"center",text:Q[(H+ka)%7],textColor:"#999"});H=0;let fa=42;0>la&&(H=-7,fa=35);Q=new Date(ia);Q.setHours(0);Q.setMinutes(0);
for(Q.setSeconds(0);H<fa;H++){var Y=H+1-la;const za=(H+ka)%7,Z=new Pa(W);la>H?(Z.setText(na+Y),Z.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(na+Y)),Z.setIsAnotherMonth(!0),Q.setDate(na+Y),Q.setMonth(ta.getMonth()),Q.setYear(ta.getFullYear())):H<la+ca?(Z.setText(Y),Z.setData(S+"/"+(ba+1)+"/"+Y),Q.setDate(Y),Q.setMonth(ba),Q.setYear(S)):(Z.setText(Y-ca),Z.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(Y-ca)),Z.setIsAnotherMonth(!0),Q.setDate(Y-ca),Q.setMonth(ua.getMonth()),Q.setYear(ua.getFullYear()));
F&&!z.includes(za)?Z.setDisabled(!0):(0===za?Z.setIsSunday(!0):6===za&&Z.setIsSaturday(!0),Y===sa&&(W.select(Z),Z.focus()),Qa&&Y===V&&Z.setIsToday(!0),Y=new Date(Q.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=q&&q>Y.getTime()||null!=y&&y<Q.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!L){F=60*E[0]+E[1];Ia(P);let [ka,fa]=D;for(Q=new Date(ia);60*ka+fa<F;)V=new Oa(P,{text:("0"+ka).slice(-2)+":"+("0"+fa).slice(-2)}),ka===O&&fa===C&&P.select(V),Q.setHours(ka),Q.setMinutes(fa),
ia=Q.getTime(),(null!=q&&q>ia||null!=y&&y<ia)&&V.setDisabled(!0),fa+=I,60<=fa&&(fa-=60,ka++);P.scrollYTo(M)}},Ra=r.DatePicker=new U("DatePicker",R,{initNode:function(C,F){G=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...F.opt};delete F.opt;G.callSuper(C,F);J=H.locales[H.locale??"en"];L=H.dateOnly;A=H.timeOnly;u=H.firstDayOfWeek;I=ja(5,ha(30,
H.minuteInterval));z=H.allowedDays;Array.isArray(z)&&0!==z.length||(z=[0,1,2,3,4,5,6]);q=Date.parse(H.minDate);q=isNaN(q)?null:q;y=Date.parse(H.maxDate);y=isNaN(y)?null:y;D=ya(H.minTime);E=ya(H.maxTime);C=new R(G,{visible:!A});H.showTodayButton&&new oa(C,{width:24,text:pa(["home"]),tooltip:J.today},[{doActivated:()=>{qa(new Date)}}]);N=new oa(C,{width:24,x:28,text:pa(["chevron-left"]),tooltip:J.prevMonth},[{doActivated:()=>{const M=(new Date(K.getFullYear(),K.getMonth(),0)).getDate();M<K.getDate()&&
K.setDate(M);K.setMonth(K.getMonth()-1);qa(K);N.focus()}}]);T=new da(C,{width:100,x:52,textAlign:"center"});X=new oa(C,{width:24,x:152,text:pa(["chevron-right"]),tooltip:J.nextMonth},[{doActivated:()=>{var M=(new Date(K.getFullYear(),K.getMonth()+1,0)).getDate();M<K.getDate()&&K.setDate(M);M=(new Date(K.getFullYear(),K.getMonth()+2,0)).getDate();M<K.getDate()&&K.setDate(M);K.setMonth(K.getMonth()+1);qa(K);X.focus()}}]);W=new R(G,{y:25,width:175,height:175,visible:!A,maxSelected:1,itemSelectionId:"data"},
[Ca]);new Ba(W,{spacing:2,lineInset:2,lineSpacing:3});P=new R(G,{x:A?0:195,y:A?0:25,width:(A?175:49)+r.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!L,maxSelected:1,itemSelectionId:"text"},[Ca]);new Aa(P,{axis:"y",inset:1,spacing:3});G.setWidth(P.visible?P.x+P.width:W.width);qa(H.current??new Date)},getPickedDate:()=>K}),aa=r.Dialog=new U("Dialog",ea,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",
whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),
months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,F){F.buttonClass??(F.buttonClass=aa.BUTTON_CLASS);this.callSuper(C,F);C=this.content;C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER);C.setFocusCage(!0);this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=
C},makeButton:function(C,F){const H=this;return new H.buttonClass(C,F,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(C){return C.closeBtn=this.makeButton(C,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:pa(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},
destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const C=this.content,F=C.sizeToChildren,H=C.getSubviews();let M=H.length;for(;M;){const O=H[--M];"closeBtn"!==O.name&&O.destroy()}C.setVisible(!0);this.overlay.setBgColor(r.Dimmer.COLOR);this.setCallbackFunction();F.setPaddingY(ea.PADDING_Y);F.setPaddingX(ea.PADDING_X);C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER)},doCallback:function(C){const F=this.callbackFunction;
F&&F.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();this.content.setVisible(!1);C?.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,F,H){const M=this.content,O=M.closeBtn;H={...aa.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(F);C=M.msg=new da(M,{text:C,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ea.PADDING_X:H.msgX,y:null==H.msgY?ea.PADDING_Y:H.msgY,width:H.width});H.titleText&&
(this.setupTitle(M,H.titleText),C.setY(C.y+24));this.show();!1===H.showClose?O.setVisible(!1):(O.setVisible(!0),O.focus())},showSimple:function(C,F,H,M){H=H??{};const O=this.content,Q=O.closeBtn,V=H.maxContainerHeight;this.destroyContent();H.bgColor&&O.setBgColor(H.bgColor);H.roundedCorners&&O.setRoundedCorners(H.roundedCorners);H.boxShadow&&O.setBoxShadow(H.boxShadow);H.border&&O.setBorder(H.border);O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=O.contentContainer=new R(O,{x:1,y:25,
overflow:"auto"},[{setHeight:function(S){S>V&&(S=V);this.callSuper(S)}}]);C.call(this,F);new va(F,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();H.titleText&&(this.setupTitle(O,H.titleText),F.setY(this.header.height+1));F.initialFocus?.focus();M?.(this)},showConfirm:function(C,F,H){H={...aa.CONFIRM_DEFAULTS,...H};this.showMessage(C,F,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(C,F,H,M){H={...aa.CONFIRM_DEFAULTS,...H};const O=this.content,Q=O.closeBtn,V=H.maxContainerHeight;
this.destroyContent();O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=O.contentContainer=new R(O,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){this.callSuper(S>V?V:S)}}]);C.call(this,F);new va(F,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();this.setupTitle(O,H.titleText);F.setY(this.header.height+1);this.setupFooterButtons(F,H);F.initialFocus?.focus();M?.(this)},showSpinner:function(C,F){const H=this.content;F={...aa.NO_WRAP_TEXT_DEFAULTS,...F};this.destroyContent();const M=
this.spinner=new r.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==F.msgY?ea.PADDING_Y:F.msgY});C&&new da(H,{text:C,whiteSpace:F.whiteSpace,wordWrap:F.wordWrap,fontWeight:F.fontWeight,x:null==F.msgX?ea.PADDING_X:F.msgX,y:M.y+M.size+ea.PADDING_Y,width:F.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,F){const H=this,M=H.content,O=M.closeBtn;F={...aa.COLOR_PICKER_DEFAULTS,...F};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,
Q);break;case "confirmBtn":const V=x.getColor();x.addToPalette(V);C.call(H,Q,V)}x.destroy()});x=new Na(M,{x:ea.PADDING_X,y:ea.PADDING_Y+24,width:337,height:177+(F.alphaChannel?23:0),color:F.color,alphaChannel:F.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();O.setVisible(!0);O.focus();H.setupFooterButtons(x,F);H.setupTitle(M,F.titleText)},showDatePicker:function(C,F){const H=
this,M=H.content,O=M.closeBtn;F={...aa.DATE_PICKER_DEFAULTS,...F};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,Q);break;case "confirmBtn":C.call(H,Q,G.getPickedDate())}G.destroy()});G=new Ra(M,{x:ea.PADDING_X,y:ea.PADDING_Y+24,height:195,opt:{current:new Date(F.initialDate??Date.now()),dateOnly:F.dateOnly||!1,timeOnly:F.timeOnly||!1,locales:F.locales,locale:F.locale}});H.show();O.setVisible(!0);O.focus();H.setupFooterButtons(G,F);H.setupTitle(M,
F.timeOnly?F.timeOnlyTitleText:F.titleText)},setupTitle:function(C,F){const H=aa.RADIUS;(this.header=new R(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();C.title=new da(C,{x:H,y:4,text:F,fontWeight:"bold"})},setupFooterButtons:function(C,F){const H=this,M=H.content,O=ea.PADDING_Y;var Q=O/2;const V=M.btnContainer=new R(M,{y:C.y+C.height+O,align:"center"});C=["active","hover","ready","text"];let S=F.cancelAttrs??{};var ba;(ba=
S).name??(ba.name="cancelBtn");let sa;(sa=S).text??(sa.text=F.cancelTxt);C.forEach(ca=>{ca+="Color";null!=F[ca]&&(S[ca]=F[ca])});ba=H.makeButton(V,S);S=F.confirmAttrs??{};let ia;(ia=S).name??(ia.name="confirmBtn");let la;(la=S).text??(la.text=F.confirmTxt);C.forEach(ca=>{ca+="Color";const na=ca+"Confirm";null!=F[na]&&(S[ca]=F[na])});H.makeButton(V,S);F.buttons?.forEach(ca=>{H.makeButton(V,ca)});new va(V,{axis:"y"});new Aa(V,{spacing:4,collapseParent:!0});M.sizeToChildren.setPaddingY(Q);Q=V.y-Q;(new R(M,
{ignoreLayout:!0,y:Q,width:M.width,height:M.height-Q,bgColor:"#eee"})).sendToBack();!1===F.showClose&&ba.focus()}})})(myt);
(r=>{const x=JS.Class,v=r.dumpStack,p={},k=(h,b)=>{if(h){const m=h.id;h.id?b(m):v("No ID")}else v("No validator")},a=h=>{k(h,b=>{p[b]=h})},d=r.Validator=new x("Validator",{initialize:function(h){this.id=h},isValid:(h,b,m)=>!0,isFormValid:function(h,b,m){b??={};b.form=h;return this.isValid(h.getValue(),b,m)}}),f=r.RequiredFieldValidator=new x("RequiredFieldValidator",d,{isValid:(h,b,m)=>null==h||""===h||"string"===typeof h&&""===h.trim()?(m?.push("This value is required."),!1):!0}),e=r.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",d,{isValid:(h,b,m)=>{b=b.form.getRollbackValue();return h&&b&&h.toLowerCase()===b.toLowerCase()?(m?.push("Value must differ by more than just case."),!1):!0}}),g=r.URLValidator=new x("URLValidator",d,{initialize:function(h,b){this.callSuper(h);this.originalRawQuery=b},isValid:function(h,b,m){return(new r.URI(h)).toString(this.originalRawQuery)!==h?(m?.push("Invalid URL."),!1):!0}}),c=r.JSONValidator=new x("JSONValidator",d,{isValid:(h,b,m)=>{try{return JSON.parse(h),
!0}catch(t){return m?.push(t),!1}}});r.EqualFieldsValidator=new x("EqualFieldsValidator",d,{initialize:function(h,b,m){this.callSuper(h);this.fieldA=b;this.fieldB=m},isValid:function(h,b,m){if(h&&this.fieldA.getValue()===this.fieldB.getValue())return!0;m?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});r.LengthValidator=new x("LengthValidator",d,{initialize:function(h,b,m){this.callSuper(h);this.min=b;this.max=m},isValid:function(h,b,m){h=h?h.length:
0;b=this.min;const t=this.max;return void 0!==b&&b>h?(m?.push("The value must not be less than "+b+" characters long."),!1):void 0!==t&&t<h?(m?.push("The value must not be greater than "+t+" characters long."),!1):!0}});r.NumericRangeValidator=new x("NumericRangeValidator",d,{initialize:function(h,b,m){this.callSuper(h);this.min=b;this.max=m},isValid:function(h,b,m){if(""===h)return!0;h=Number(h);b=this.min;const t=this.max;return isNaN(h)?(m?.push("Value is not a number."),!1):void 0!==b&&b>h?(m?.push("Value must not be less than "+
b+"."),!1):void 0!==t&&t<h?(m?.push("Value must not be greater than "+t+"."),!1):!0}});r.CompoundValidator=new x("CompoundValidator",d,{initialize:function(h,...b){this.callSuper(h);for(h=b.length;h;){let m=b[--h];"string"===typeof m&&((b[h]=m=p[m])||b.splice(h,1))}this.__v=b},addValidator:function(h){"string"===typeof h&&(h=p[h]);h&&this.__v.push(h)},isValid:function(h,b,m){const t=this.__v,n=t.length;let l=!0,w=0;for(;n>w;)l=t[w++].isValid(h,b,m)&&l;return l}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){a(new f("required"));a(new e("equalsIgnoreCase"));a(new g("url"));a(new c("json"));r.global.register("validators",this)},getValidator:h=>p[h],register:a,unregister:h=>{k(h,b=>{p[b]&&delete p[b]})}})})(myt);
(r=>{const x=JS.Class,v=Math,p=v.min,k=v.max,a=r.View,d=new x("SliderThumb",r.SimpleButton,{include:[r.Draggable,r.ArrowKeyActivation],initNode:function(e,g){const c=g.width=e.thumbWidth,h=g.height=e.thumbHeight;g.roundedCorners=p(h,c)/2;g.repeatKeyDown=!0;g.activationKeys=r.global.keys.ARROW_KEYS;g.activeColor="#bbb";g.readyColor="#ccc";g.hoverColor="#ddd";g.boxShadow=[0,0,4,"#666"];this.callSuper(e,g);this["x"===e.axis?"setY":"setX"](e.thumbOffset);this.syncTo(e,"setDisabled","disabled");e._syncThumbToValue(this,
e.getValue())},setDisabled:function(e){this.callSuper(this.valueFromEvent(e))},setFocused:function(e){this.callSuper(e);e&&this.makeHighestZIndex()},setX:function(e){this.x!==e&&(this.callSuper(e),e=this.parent,"x"===e.axis&&e.syncValueToThumb(this))},setY:function(e){this.y!==e&&(this.callSuper(e),e=this.parent,"y"===e.axis&&e.syncValueToThumb(this))},requestDragPosition:function(e,g){if(!this.disabled){var c=this.parent;const h=c.getMinPixelValueForThumb(this),b=c.getMaxPixelValueForThumb(this);
"x"===c.axis?(c=this.width/2,g="setX"):(c=this.height/2,e=g,g="setY");this[g](p(k(e,h-c),b-c))}},doKeyArrowLeftOrUp:function(e,g){e?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(e,g){e?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),f=r.BaseSlider=new x("BaseSlider",a,{include:[r.Disableable],initNode:function(e,g){g.axis??(g.axis="x");"x"===g.axis?(g.width??(g.width=100),g.height??(g.height=18)):(g.width??(g.width=
18),g.height??(g.height=100));g.bgColor??(g.bgColor="#999");g.roundedCorners??(g.roundedCorners=9);g.trackInset??(g.trackInset=9);g.trackOutset??(g.trackOutset=9);g.thumbWidth??(g.thumbWidth=16);g.thumbHeight??(g.thumbHeight=16);g.thumbOffset??(g.thumbOffset=1);g.nudgeAmount??(g.nudgeAmount=1);this.callSuper(e,g)},setAxis:function(e){this.axis=e},setTrackInset:function(e){this.trackInset=e},setTrackOutset:function(e){this.trackOutset=e},setThumbWidth:function(e){this.thumbWidth=e},setThumbHeight:function(e){this.thumbHeight=
e},setThumbOffset:function(e){this.thumbOffset=e},setNudgeAmount:function(e){this.nudgeAmount=e},convertValueToPixels:function(e){const g=this.minValue,c=this.trackInset;return c+(("x"===this.axis?this.width:this.height)-c-this.trackOutset)/(this.maxValue-g)*(e-g)},convertPixelsToValue:function(e){const g=this.minValue,c=this.trackInset;return(this.maxValue-g)/(("x"===this.axis?this.width:this.height)-c-this.trackOutset)*(e-c)+g},nudgeValueLeft:function(e){this._nudge(e,!1)},nudgeValueUp:function(e){this._nudge(e,
!1)},nudgeValueRight:function(e){this._nudge(e,!0)},nudgeValueDown:function(e){this._nudge(e,!0)},_nudge:(e,g)=>{},_syncThumbToValue:function(e,g){g=this.convertValueToPixels(g);"x"===this.axis?e.setX(g-e.width/2):e.setY(g-e.height/2)},syncValueToThumb:function(e){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(e,this.convertPixelsToValue("x"===this.axis?e.x+e.width/2:e.y+e.height/2)),this.__lockSync=!1)},_syncValueToThumb:(e,g)=>{},getMinPixelValueForThumb:function(e){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(e){return this.convertValueToPixels(this.maxValue)}});r.RangeSlider=new x("RangeSlider",f,{include:[r.BoundedRangeComponent],initNode:function(e,g){this.callSuper(e,g);e=this.rangeFill=new a(this,{bgColor:"#666"});"x"===this.axis?(e.setY(this.thumbOffset),e.setHeight(this.thumbHeight),e.setRoundedCorners(this.thumbHeight/2)):(e.setX(this.thumbOffset),e.setWidth(this.thumbWidth),e.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new d(this);this.thumbUpper=new d(this);
this._syncRangeFillToValue()},setValue:function(e){this.callSuper(e);this.inited&&(this.__lockSync||(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e)),this._syncRangeFillToValue())},setWidth:function(e){const g=this.width;this.callSuper(e);this.inited&&"x"===this.axis&&this.width!==g&&(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e))},setHeight:function(e){const g=this.height;this.callSuper(e);
this.inited&&"y"===this.axis&&this.height!==g&&(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e))},_syncRangeFillToValue:function(){const e=this.rangeFill;var g=this.getValue();const c=this.convertValueToPixels(g.lower);g=this.convertValueToPixels(g.upper)-c;"x"===this.axis?(e.setX(c),e.setWidth(g)):(e.setY(c),e.setHeight(g))},_syncThumbToValue:function(e,g){this.callSuper(e,"thumbLower"===e.name?g.lower:g.upper)},_syncValueToThumb:function(e,g){let c=
this.getValueCopy();c["thumbLower"===e.name?"lower":"upper"]=g;this.setValue(c);c=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,c);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,c)},_nudge:function(e,g){const c=this.getValueCopy();g=this.nudgeAmount*(g?1:-1);"thumbLower"===e.name?c.lower=p(c.lower+g,c.upper):c.upper=k(c.upper+g,c.lower);this.setValue(c)},getMinPixelValueForThumb:function(e){return this.convertValueToPixels("thumbLower"===e.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(e){return this.convertValueToPixels("thumbLower"===e.name?this.getValue().upper:this.maxValue)}});r.Slider=new x("Slider",f,{include:[r.BoundedValueComponent],initNode:function(e,g){this.callSuper(e,g);this.thumb=new d(this)},setValue:function(e){this.callSuper(e);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(e){const g=this.width;this.callSuper(e);this.inited&&"x"===this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(e){const g=this.height;this.callSuper(e);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(e,g){this.setValue(g);this._syncThumbToValue(e,this.getValue())},_nudge:function(e,g){this.setValue(this.getValue()+this.nudgeAmount*(g?1:-1))}});r.LabelSlider=new x("LabelSlider",r.Slider,{initNode:function(e,g){const c=this;g.labelX??(g.labelX=8);g.labelY??(g.labelY=2);g.labelFontSize??(g.labelFontSize=
"12px");g.labelColor??(g.labelColor="#000");g.flipThreshold??(g.flipThreshold=v.round((g.maxValue-g.minValue)/2)||0);c.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],g);c.callSuper(e,g);const h=c.labelX;c.labelTxt=new r.Text(c,{x:h,y:c.labelY,textColor:c.labelColor,fontSize:c.labelFontSize},[{initNode:function(b,m){this.targetX=h;this.callSuper(b,m)},updateX:function(b){const m=c.getValue()>=c.flipThreshold?h:c.width-this.width-h;this.targetX!==m&&(this.targetX=m,this.stopActiveAnimators("x"),
b?this.setX(m):this.animate({attribute:"x",to:m,duration:250}))}}]);c.syncTo(c,"setText","value")},setWidth:function(e){this.callSuper(e);this.labelTxt?.updateX(!0)},setText:function(e,g){const c=this.labelTxt;c&&(c.setText(e.value),c.updateX(g))}})})(myt);
(r=>{const x=JS.Class,{CODE_ENTER:v,CODE_SPACE:p,ARROW_KEYS:k}=r.global.keys,a=f=>{const e="y"===f.axis?"height":"width";f.constrain("__limitToParent",[f,"limitToParent",f,e,f.parent,e])},d=new x("BaseDivider",r.SimpleButton,{include:[r.BoundedValueComponent,r.Draggable,r.ArrowKeyActivation],initNode:function(f,e){e.activeColor??(e.activeColor="#bbb");e.hoverColor??(e.hoverColor="#ddd");e.readyColor??(e.readyColor="#ccc");e.axis??(e.axis="x");e.minValue??(e.minValue=0);e.value??(e.value=e.minValue);
e.expansionState??(e.expansionState=2);e.focusIndicator??(e.focusIndicator=!1);e.repeatKeyDown??(e.repeatKeyDown=!0);e.activationKeys??(e.activationKeys=[v,p,...k]);"y"===e.axis?(e.height??(e.height=6),e.cursor??(e.cursor="row-resize")):(e.width??(e.width=6),e.cursor??(e.cursor="col-resize"));this.quickSet(["axis"],e);this.__nudgeAcc=1;this.callSuper(f,e);null==e.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&a(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},
setExpansionState:function(f){this.expansionState=f},setRestoreValue:function(f){this.restoreValue=f},setLimitToParent:function(f){this.limitToParent!==f&&(this.limitToParent=f,this.inited&&(this.fireEvent("limitToParent",f),null==f?this.releaseConstraint("__limitToParent"):a(this)))},setAxis:function(f){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=f},setValue:function(f,e){this.callSuper(f);f=this.value;"y"===this.axis?this.setY(f):this.setX(f);e&&this.setRestoreValue(f)},
__limitToParent:function(f){f="y"===this.axis?"height":"width";this.setMaxValue(this.parent[f]-this.limitToParent-this[f])},doActivationKeyDown:function(f,e){this.callSuper(f,e);switch(f){case v:case p:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(f,e){return this.nudge(!1,e)},doKeyArrowRightOrDown:function(f,e){return this.nudge(!0,e)},nudge:function(f,e){this.__nudgeAcc=e?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+(f?1:-1)*this.__nudgeAcc,!0);this.setExpansionState(2);return!0},
doPrimaryAction:function(){const {restoreValue:f,maxValue:e,minValue:g}=this;let c;switch(this.expansionState){case 0:null!=f&&(this.setExpansionState(1),f===g?f!==e&&this.doPrimaryAction():c=f);break;case 1:null!=e&&(this.setExpansionState(3),this.value===e?this.doPrimaryAction():c=e);break;case 2:null!=g&&(this.setExpansionState(0),this.value===g?this.doPrimaryAction():c=g);break;case 3:null!=f&&(this.setExpansionState(2),f===e?this.doPrimaryAction():c=f)}this.animateToValue(c)},animateToValue:function(f,
e=250){null!=f&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:f,duration:e}))},requestDragPosition:function(f,e){this.disabled||(f="y"===this.axis?e:f,e=this.value,f!==e&&(this.setValue(f,!0),this.setExpansionState(e>f?2:1)))}});r.HorizontalDivider=new x("HorizontalDivider",d,{initNode:function(f,e){e.axis="x";this.callSuper(f,e)}});r.VerticalDivider=new x("VerticalDivider",d,{initNode:function(f,e){e.axis="y";this.callSuper(f,e)}})})(myt);
(r=>{let x=0;const v=JS.Class,p=JS.Module,k=Math.min,a=Math.max,d=r.View,f=r.Node.DEFAULT_PLACEMENT,e=u=>{const z=u.columnHeaders,[q,y]=u.sort??["",""];let D=z.length;for(;D;){const E=z[--D];E.columnId===q?E.sortable&&E.setSortState(y):E.setSortState("none")}u.locked||u.doSort()},g=(u,z,q,y)=>{if(0!==z){const K=0<z,N=[];for(var D=u.length;D;){var E=u[--D];E.resizable&&(q?0<E.flex:0===E.flex)&&N.push({hdr:E,limit:(K?E.maxValue:E.minValue)-E.value,amt:0})}u=N.length;if(0<u){for(D=0;0!==z;){x>=u&&(D=
x=0);E=N[x];var I=E.hdr;E.full?++D:(K?(I=k(q?I.flex:1,z),E.amt+I>E.limit&&(I=E.limit-E.amt,E.full=!0)):(I=a(q?-I.flex:-1,z),E.amt+I<E.limit&&(I=E.limit-E.amt,E.full=!0)),E.amt+=I,z-=I);if(D===u)break;++x}N.forEach(T=>{T.hdr.setValue(T.hdr.value+T.amt)});y?.(z)}}},c=u=>(u=u.gridController?u.gridController.getPrevHdr(u):null)?u.maxValue-u.value+c(u):0,h=u=>(u=u.gridController?u.gridController.getNextHdr(u):null)?u.maxValue-u.value+h(u):0,b=u=>(u=u.gridController?u.gridController.getPrevHdr(u):null)?
u.minValue-u.value+b(u):0,m=u=>(u=u.gridController?u.gridController.getNextHdr(u):null)?u.minValue-u.value+m(u):0,t=(u,z)=>{u=u.gridController?u.gridController.getPrevHdr(u):null;var q=0;if(u){q=u.value+z;u.resizable&&u.setValue(q);const y=q-u.value;q=z-y;0>y&&(q+=t(u,y))}return q},n=(u,z)=>{u=u.gridController?u.gridController.getPrevHdr(u):null;var q=0;if(u){q=u.value+z;u.resizable&&u.setValue(q);const y=q-u.value;q=z-y;0<y&&(q+=n(u,y))}return q},l=(u,z)=>{if(u=u.gridController?u.gridController.getNextHdr(u):
null)z=u.value+z,u.resizable&&u.setValue(z),z-=u.value,0>z&&l(u,z)},w=(u,z)=>{if(u=u.gridController?u.gridController.getNextHdr(u):null)z=u.value+z,u.resizable&&u.setValue(z),z-=u.value,0<z&&w(u,z)},B=u=>{let z="";if(u.sortable)switch(u.sortState){case "ascending":z="chevron-up";break;case "descending":z="chevron-down"}u.sortIcon.setIcon(z)},G=u=>{const z=u.textView;z?.setWidth(u.width-u.outset-z.x)},J=r.GridController=new p("GridController",{initNode:function(u,z){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(u,z);this.fitHeadersToWidth();e(this)},setMaxWidth:function(u){this.set("maxWidth",u,!0)},setMinWidth:function(u){this.set("minWidth",u,!0)},setFitToWidth:function(u){this.fitToWidth=u},setSort:function(u){r.areArraysEqual(u,this.sort)||(this.sort=u,this.inited&&(this.fireEvent("sort",u),e(this)))},setLastColumn:function(u){const z=this.lastColumn;z!==u&&(z?.setLast(!1),this.lastColumn=u,u?.setLast(!0))},
setLocked:function(u){this.locked=u;this.inited&&!u&&(this.__tempLock=!0,this.fitHeadersToWidth(),this.__tempLock=!1,this.setMaxWidth(0),this.setMinWidth(0),this.__skipInvisibleHeaders=!0,this.columnHeaders.forEach(z=>{this.notifyHdrXChange(z);this.notifyHdrWidthChange(z);this.notifyHdrVisibilityChange(z)}),this.__skipInvisibleHeaders=!1,this.doSort())},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(u){u=this.valueFromEvent(u);this.gridWidth!==u&&(this.gridWidth=u,
this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(u){const z=this.columnHeaders;u=this.getHdrIndex(u);if(0<u)for(;u;){const q=z[--u];if(q.visible)return q}},getNextHdr:function(u){const z=this.columnHeaders,q=z.length;u=this.getHdrIndex(u)+1;if(0<u&&u<q)for(;q>u;){const y=z[u++];if(y.visible)return y}},hasHdr:function(u){return this.columnHeaders.includes(u)},getHdrIndex:function(u){return this.columnHeaders.indexOf(u)},getHdrById:function(u){const z=this.columnHeaders;let q=
z.length;for(;q;){const y=z[--q];if(y.columnId===u)return y}},getVisibleHdrs:function(){return this.columnHeaders.filter(u=>u.visible)},notifyAddHdr:function(u){this.hasHdr(u)||(this.columnHeaders.push(u),u.visible&&this.setLastColumn(u),this.fixupResizerCursors())},notifyRemoveHdr:function(u){const z=this.getHdrIndex(u);-1<z&&(this.columnHeaders.splice(z,1),u.visible&&u.last&&this.setLastColumn(this.getPrevHdr(u)),this.fixupResizerCursors())},notifyHdrXChange:function(u){this.isLocked()||this.rows.forEach(z=>
{z.notifyHdrXChange(u)})},notifyHdrWidthChange:function(u){this.isLocked()||this.rows.forEach(z=>{z.notifyHdrWidthChange(u)})},notifyHdrVisibilityChange:function(u){if((!this.__skipInvisibleHeaders||u.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(u);var z=this.setLastColumn;a:{var q=this.columnHeaders;let y=q.length;for(;y;){const D=q[--y];if(D.visible){q=D;break a}}q=void 0}z.call(this,q);z=u.visible?1:-1;this.setMaxWidth(this.maxWidth+u.maxValue*z);this.setMinWidth(this.minWidth+
u.minValue*z);this.fitHeadersToWidth();this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(u){this.rows.forEach(z=>{z.notifyHdrVisibilityChange(u)})},hasRow:function(u){return this.rows.includes(u)},getRowIndex:function(u){return this.rows.indexOf(u)},getRowById:function(u,z=q=>q.model.id===u){return this.rows.find(z)},getPrevRow:function(u){u=this.getRowIndex(u)-1;return this.rows[0>u?this.rows.length-1:u]},getNextRow:function(u){u=this.getRowIndex(u)+1;return this.rows[u<this.rows.length?
u:0]},notifyAddRow:function(u,z){if(!this.hasRow(u)&&(this.rows.push(u),!this.locked)){const q=this.width;this.columnHeaders.forEach(y=>{u.setWidth(q);u.notifyHdrXChange(y);u.notifyHdrWidthChange(y);u.notifyHdrVisibilityChange(y)});z||this.doSort()}},notifyRemoveRow:function(u){u=this.getRowIndex(u);-1<u&&this.rows.splice(u,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const u=this.getVisibleHdrs();let z=0;u.forEach(q=>{z=a(z,q.x+q.width)});g(u,this.gridWidth-z,!0,q=>{g(u,q,!1,
null)})}},fixupResizerCursors:function(){const u=this.getVisibleHdrs();let z=!0,q=0;u.forEach((I,K)=>{z&&I.isFixed()?I.setResizerCursor("",!0):(z&&(q=K),z=!1,I.restoreResizerCursor())});let y=!0,D=u.length,E=D-1;for(;D>q;){const I=u[--D];y?I.setResizerCursor("",!0):I.restoreResizerCursor();I.isFixed()||(y&&(E=D),y=!1)}q===E&&u[q].setResizerCursor("",!0)}}),L=r.GridColHdr=new p("GridColHdr",{include:[r.BoundedValueComponent],initNode:function(u,z){const q=this,y=z.resizerCursor??"col-resize";delete z.resizerCursor;
z.minValue??(z.minValue=16);z.maxValue??(z.maxValue=1E3);z.value??(z.value=z.minValue);z.resizable??(z.resizable=!0);z.flex??(z.flex=0);z.cellXAdj??(z.cellXAdj=0);z.cellWidthAdj??(z.cellWidthAdj=0);z.sortable??(z.sortable=!0);z.sortState??(z.sortState="none");z.placement??(z.placement=f);q.callSuper(u,z);const D=q.gridController;q.resizer=new d(q,{cursor:y,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[r.SizeToParent,r.Draggable,{requestDragPosition:function(E,
I){I=E-this.x;if(D.fitToWidth&&(0<I?I=k(I,k(-m(q),q.maxValue-q.value+c(q))):0>I&&(I=a(I,a(-h(q),q.minValue-q.value+b(q)))),0===I))return;E=q.value+I;q.resizable&&q.setValue(E);E-=q.value;I=E-I;let K=0;0>E?K=t(q,E):0<E&&(K=n(q,E));this.dragInitX+=K;I-=K;D.fitToWidth&&(0>I?l(q,I):0<I&&w(q,I))}}]);D&&(D.notifyAddHdr(q),D.notifyHdrXChange(q),D.notifyHdrVisibilityChange(q));q.setWidth(q.value);q.resizer.setVisible(!(q.last&&q.gridController.fitToWidth))},destroy:function(u){this.setGridController();this.callSuper(u)},
setSortable:function(u){this.set("sortable",u,!0)},setSortState:function(u){this.set("sortState",u,!0)},setResizable:function(u){this.set("resizable",u,!0)},setCellWidthAdj:function(u){this.cellWidthAdj=u},setCellXAdj:function(u){this.cellXAdj=u},setFlex:function(u){this.flex=u},setColumnId:function(u){this.columnId=u},setResizerCursor:function(u,z){const q=this.resizer,y=q.cursor;u!==y&&(z&&(this.__rrc=y),q.setCursor(u))},restoreResizerCursor:function(){const u=this.__rrc;u&&(this.setResizerCursor(u),
this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(u){this.last=u;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(u){const z=this.gridController;z!==u&&(z?.notifyRemoveHdr(this),this.gridController=u,this.inited&&u&&(u.notifyAddHdr(this),u.notifyHdrXChange(this),u.notifyHdrWidthChange(this),u.notifyHdrVisibilityChange(this)))},setValue:function(u){this.callSuper(u);this.inited&&this.setWidth(this.value)},
setMinValue:function(u){const z=this.minValue??0,q=this.gridController;this.callSuper(u);this.inited&&z!==this.minValue&&q?.setMinWidth(q.minWidth+this.minValue-z)},setMaxValue:function(u){const z=this.maxValue??0,q=this.gridController;u??=1E3;this.callSuper(u);this.inited&&z!==this.maxValue&&q?.setMaxWidth(q.maxWidth+this.maxValue-z)},setWidth:function(u){const z=this.width;this.callSuper(u);this.inited&&z!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(u){const z=this.x;
this.callSuper(u);this.inited&&z!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(u){const z=this.visible;this.callSuper(u);this.inited&&z!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),A=r.GridRow=new p("GridRow",{initNode:function(u,z){z.placement??(z.placement=f);this.callSuper(u,z);this.gridController?.notifyAddRow(this)},destroy:function(u){this.setGridController();this.callSuper(u)},setGridController:function(u){const z=this.gridController;
z!==u&&(z?.notifyRemoveRow(this),this.gridController=u,this.inited&&u?.notifyAddRow(this))},notifyHdrXChange:function(u){this[u.columnId+"View"]?.setX(u.x+u.cellXAdj)},notifyHdrWidthChange:function(u){this[u.columnId+"View"]?.setWidth(u.width+u.cellWidthAdj)},notifyHdrVisibilityChange:function(u){this[u.columnId+"View"]?.setVisible(u.visible)}});r.Grid=new v("Grid",d,{include:[J],initNode:function(u,z){const q=r.SpacedLayout;z.overflow??(z.overflow="autox");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??
(z.rowSpacing=1);z.columnSpacing??(z.columnSpacing=1);var y=z.isAutoScrolling;delete z.isAutoScrolling;this.callSuper(u,z);u=this.header=new d(this,{overflow:"hidden"});u.xLayout=new q(u,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});u.yLayout=new r.SizeToChildren(u,{locked:!0,axis:"y"});z=this.sizeHeightToRows;y=this.content=new d(this,{overflow:z?"hidden":"autoy"},y?[r.AutoScroller]:[]);y.yLayout=new q(y,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:z});this.syncTo(this,
"setGridWidth","width");this.syncTo(u,"_updateContentWidth","width");this.constrain("_updateContentHeight",[z?y:this,"height",u,"height",u,"y"])},setSizeHeightToRows:function(u){this.sizeHeightToRows=u},setRowSpacing:function(u){this.rowSpacing!==u&&(this.rowSpacing=u,this.inited&&this.content.yLayout.setSpacing(u))},setColumnSpacing:function(u){this.columnSpacing!==u&&(this.columnSpacing=u,this.inited&&this.header.xLayout.setSpacing(u))},setLocked:function(u){this.inited&&[this.header.xLayout,this.header.yLayout,
this.content.yLayout].forEach(z=>{u?z.incrementLockedCounter():(z.decrementLockedCounter(),z.update())});this.callSuper(u)},_updateContentWidth:function(u){const z=this.content,q=u.value;z.setWidth(q);z.getSubviews().forEach(y=>{y.setWidth(q)})},_updateContentHeight:function(u){var z=this.header;u=this.content;z=z.y+z.height;u.setY(z);this.sizeHeightToRows?this.setHeight(z+u.height):u.setHeight(this.height-z)},determinePlacement:function(u,z){if(u===f){let q;z.isA(A)?q=this.content:z.isA(L)&&(q=this.header);
if(q)return z.gridController!==this&&z.setGridController(this),q}return this.callSuper(u,z)},doSort:function(){const [u,z]=this.sort??["",""],q=this.getSortFunction(u,z);if(q){const y=this.content,D=y.yLayout;this.rows.sort(q);y.sortSubviews(q);D.sortSubviews(q);D.update()}},getSortFunction:(u,z)=>{if(u){const q="ascending"===z?1:-1,y=u+"View";return(D,E)=>{D=D[y].text;E=E[y].text;return D>E?q:E>D?-q:0}}}});r.SimpleGridColHdr=new v("SimpleGridColHdr",r.SimpleTextButton,{include:[L],initNode:function(u,
z){const q=this;z.activeColor??(z.activeColor="#999");z.hoverColor??(z.hoverColor="#bbb");z.readyColor??(z.readyColor="#aaa");z.inset??(z.inset=2);z.sortIconColor??(z.sortIconColor="#666");const y=z.outset??2;delete z.outset;q.callSuper(u,z);q.sortIcon=new r.FontAwesome(q,{align:"right",alignOffset:3,valign:"middle",textColor:q.sortIconColor},[{initNode:function(D,E){this.callSuper(D,E);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();q.setOutset(this.width+y);G(q)}}]);q.textView.enableEllipsis();
q.setDisabled(!q.sortable);G(q);B(q)},setSortIconColor:function(u){this.sortIconColor=u;this.sortIcon?.setTextColor(u)},setSortable:function(u){this.callSuper(u);this.inited&&(u&&this.setOutset(14),this.setDisabled(!u),B(this))},setSortState:function(u){this.callSuper(u);this.inited&&B(this)},setWidth:function(u){this.callSuper(u);this.inited&&G(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,
this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(r=>{const x=JS.Class,v=JS.Module,p=Math,k=p.max,a=r.View;var d=r.global;const f=d.focus,e=d.keys,g=l=>{const w=l.selectedRow;w&&(w.setSelected(!1),l.set("selectedRow",null,!0))};d=r.InfiniteListRow=new v("InfiniteListRow",{include:[r.Reusable],setInfiniteOwner:function(l){this.infiniteOwner=l},setModel:function(l){this.model=l},setClassKey:function(l){this.classKey=l},notifyRefreshed:()=>{}});const c=r.SelectableInfiniteListRow=new v("SelectableInfiniteListRow",{include:[d,r.Selectable]}),h=r.InfiniteList=
new x("InfiniteList",a,{initNode:function(l,w){let B=w.rowClasses;delete w.rowClasses;if("function"===typeof B){const G={};G["default"]=B;B=G}w.modelIDName??(w.modelIDName="id");w.numericSort??(w.numericSort=!0);w.ascendingSort??(w.ascendingSort=!0);w.overflow??(w.overflow="autoy");w.bgColor??(w.bgColor="#ccc");w.rowSpacing??(w.rowSpacing=1);w.rowInset??(w.rowInset=0);w.rowOutset??(w.rowOutset=0);w.rowHeight??(w.rowHeight=30);w.overscrollBehavior??(w.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(l,w);l=this._listView=new a(this);this._scrollAnchorView=new a(l,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(B,l);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(l,w)=>new r.TrackActivesMultiPool(l,w),setOverscrollBehavior:function(l){this.overscrollBehavior=l;this.getIDS().overscrollBehavior=l},setCollectionModel:function(l){this.collectionModel=
l},setModelIDName:function(l){this.modelIDName=l},setRowSpacing:function(l){this.rowSpacing=l;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(l){this.rowHeight=l;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(l){if(0<l&&(this.callSuper(l),this.inited)){l=this._listView;const w=this.width;l.setWidth(w);l.getSubviews().forEach(B=>{B.setWidth(w)})}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(l){const w=this.getVisibleRows();let B=w.length;for(;B;){const G=w[--B];if(G.model===l)return G}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const l=this.modelIDName,w=this.ascendingSort;return this.numericSort?r.getNumericObjSortFunc(l,w):r.getAlphaObjSortFunc(l,w,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(l,
w){var B=this.getIndexOfModelInData(l);let G=!1;if(0<=B){var J=this._rowExtent;const L=this.getIDE().scrollTop,A=L+this.height;B=this.rowInset+B*J;J=B+J;B<=L?(this.scrollYTo(B,!0),G=!0):J>=A&&(this.scrollYTo(J-this.height,!0),G=!0);w&&((w=this.getVisibleRowForModel(l))?w.focus():this._focusToModel=l)}return G},isModelInData:function(l){return 0<=this.getIndexOfModelInData(l)},getNextModel:function(l,w=!0,B=!0){const G=this.getListData(),J=G.length;l=this.getIndexOfModelInData(l);if(0<=l)return l+=
1,l>=J?w?G[0]:G[J-1]:G[l];if(B&&0<J)return G[J-1]},getPrevModel:function(l,w=!0,B=!0){const G=this.getListData(),J=G.length;l=this.getIndexOfModelInData(l);if(0<=l)return--l,0>l?w?G[J-1]:G[0]:G[l];if(B&&0<J)return G[0]},getIndexOfModelInData:function(l){if(l){const w=this.getListData();let B=w.length;for(;B;)if(this.areModelsEqual(w[--B],l))return B}return-1},areModelsEqual:function(l,w){const B=this.modelIDName;return l[B]===w[B]},getActiveRowForModel:function(l){if(l){const w=this._itemPool.getActives();
let B=w.length;for(;B;){const G=w[--B];if(this.areModelsEqual(G.model,l))return G}}},refreshListData:function(l,w){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(l,w)},resetListUI:function(l,w){const B=this.getListData().length,G=this._listView,J=this._scrollAnchorView;G.setHeight(B*this._rowExtent-(0<B?this.rowSpacing:0)+this.rowInset+this.rowOutset);J.setY(G.height-J.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=
w;l||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(l){if(f.focusedView?.isDescendantOf(l)){const w=this.getFocusTrap();w?w.focus():f.clear()}l.setVisible(!1);this._itemPool.putInstance(l)},refreshListUI:function(l){l=this._rowExtent;const w=this.rowInset,B=this.forceFullResetOnNextRefresh;var G=this.getIDE().scrollTop;const J=this.getListData()??[];var L=k(0,p.floor((G-w)/l));G=p.min(J.length,p.ceil((G-w+this.height)/l));this.forceFullResetOnNextRefresh&&
(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==L||this._endIdx!==G||B){const u=this.width,z=this.rowHeight,q=this._visibleRowsByIdx,y=this._focusToModel;this._startIdx=L;this._endIdx=G;for(var A in q)if(A<L||A>=G)this.putRowBackInPool(q[A]),delete q[A];for(A=L;A<G;A++){L=q[A];const D=J[A],E=this.getClassKey(D);let I=!1;L&&L.classKey===E||(L&&this.putRowBackInPool(L),q[A]=L=this._itemPool.getInstance(E),L.setInfiniteOwner(this),L.setClassKey(E),L.setWidth(u),L.setHeight(z),L.setY(w+A*l),
L.setVisible(!0),I=!0);!B&&L.model&&this.areModelsEqual(L.model,D)?I&&this.updateRow(L):(L.setModel(D),this.updateRow(L));L.notifyRefreshed();L.bringToFront();y&&this.areModelsEqual(y,D)&&(L.focus(),this._focusToModel=null)}}},getClassKey:l=>"default",updateRow:l=>{}}),b=r.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",r.SimpleButton,{include:[c,r.ArrowKeyActivation],initNode:function(l,w){w.selectedColor??(w.selectedColor="#ccf");w.activeColor??(w.activeColor="#f8f8f8");
w.hoverColor??(w.hoverColor="#eee");w.readyColor??(w.readyColor="#fff");w.focusIndicator??(w.focusIndicator=!1);w.activationKeys??(w.activationKeys=e.LIST_KEYS);this.callSuper(l,w)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(l){this.callSuper(l);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},
doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(l,w){l===e.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(l,w)},doKeyArrowLeftOrUp:function(l,w){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(l,w){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(l){switch(l){case e.CODE_ENTER:case e.CODE_SPACE:this.doActivated()}}}),m=r.SelectableInfiniteList=
new x("SelectableInfiniteList",h,{setSelectedRow:function(l){const w=this.selectedRow;l!==w&&(w?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",l,!0),l&&(this.setSelectedRowModel(l.model),l.setSelected(!0)))},setSelectedRowModel:function(l){this.set("selectedRowModel",l,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(l,w,B){l&&(g(this),this.setSelectedRowModel(l),
this.refreshListUI(),w&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(l,w=!0){this.selectRowForModel(this.getNextModel(l),w,!0)},selectPrevRowForModel:function(l,w=!0){this.selectRowForModel(this.getPrevModel(l),w,!1)},resetListUI:function(l,w){this.isModelInData(this.selectedRowModel)?g(this):this.setSelectedRow();this.callSuper(l,w)},putRowBackInPool:function(l){l.selected&&g(this);this.callSuper(l)},refreshListUI:function(l){l=f.focusedView;this.callSuper();const w=this.getActiveSelectedRow();
w&&(this.set("selectedRow",w,!0),w.setSelected(!0),l&&l!==w||w.focus(!0))}}),t=new v("InfiniteGridRowMixin",{notifyXChange:function(l){this[l.columnId+"View"]?.setX(l.x+l.cellXAdj)},notifyWidthChange:function(l){this[l.columnId+"View"]?.setWidth(l.width+l.cellWidthAdj)},notifyVisibilityChange:function(l){this[l.columnId+"View"]?.setVisible(l.visible)}}),n=new v("InfiniteGridMixin",{setGridHeader:function(l){(this.gridHeader=l)?.setGrid(this)},makeReady:function(l,w){const B=this.gridHeader;B?(this.forceFullResetOnNextRefresh=
w,B.setSort(l),B.setLocked(!1)):this.refreshListData(!1,w)},getSortFunction:function(){const [l,w]=this.gridHeader.sort??["",""];return l?r.getAlphaObjSortFunc(l,"ascending"===w,!1):this.callSuper()},updateRow:function(l){this.gridHeader?.columnHeaders.forEach(w=>{l.notifyXChange(w);l.notifyWidthChange(w);l.notifyVisibilityChange(w)})},notifyXChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyXChange(l)})},notifyWidthChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyWidthChange(l)})},
notifyVisibilityChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyVisibilityChange(l)})}});r.InfiniteGridRow=new v("InfiniteGridRow",{include:[d,t]});r.SelectableInfiniteGridRow=new v("SelectableInfiniteGridRow",{include:[c,t]});r.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",b,{include:[t]});r.InfiniteGrid=new x("InfiniteGrid",h,{include:[n]});r.SelectableInfiniteGrid=new x("InfiniteGrid",m,{include:[n]});r.InfiniteGridHeader=new x("InfiniteGridHeader",a,{include:[r.GridController],
initNode:function(l,w){w.columnSpacing??(w.columnSpacing=1);w.overflow="hidden";this.callSuper(l,w);new r.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(l){this.grid=l},setColumnSpacing:function(l){this.columnSpacing=l},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:k(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(l){this.callSuper(l);this.inited&&(l=this.height,this.columnHeaders.forEach(w=>{w.setHeight(l)}))},setWidth:function(l){this.callSuper(k(this.minWidth,
l));this.inited&&(l=this.width,this.setGridWidth(l),this.grid.setWidth(l))},subviewAdded:function(l){this.callSuper(l);l.isA(r.GridColHdr)&&(l.setGridController(this),l.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(l){this.isLocked()||this.grid.notifyXChange(l)},notifyHdrWidthChange:function(l){this.isLocked()||this.grid.notifyWidthChange(l)},updateRowsForVisibilityChange:function(l){this.grid.notifyVisibilityChange(l)}})})(myt);
(r=>{const x=JS.Class,v=r.PanelStackTransition=new x("PanelStackTransition",r.Node,{to:p=>Promise.resolve(p),from:p=>Promise.resolve(p)});r.PanelStack=new x("PanelStack",r.View,{include:[r.SelectionManager],initNode:function(p,k){k.overflow="hidden";k.itemSelectionId??(k.itemSelectionId="panelId");k.maxSelected??(k.maxSelected=1);this.callSuper(p,k);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(p){this.set("transition",p,!0)},__updateWidth:function(p){this.getActivePanel()?.setWidth(p.value)},
__updateHeight:function(p){this.getActivePanel()?.setHeight(p.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(p){return this.getSelectableItem(p)},selectPanel:function(p){this.selectById(p)},doSelected:function(p){p.setWidth(this.width);p.setHeight(this.height)},doStackTransition:function(p){this["doStackTransition"+(p.selected?"To":"From")](p)},doStackTransitionTo:function(p){const k=this;k.doBeforeTransitionTo(p);const a=k.transition;a?a.to(p).then(d=>{k.doAfterTransitionTo(d)}):
(p.makeHighestZIndex(),p.setVisible(!0),k.doAfterTransitionTo(p))},doBeforeTransitionTo:p=>{},doAfterTransitionTo:p=>{},doStackTransitionFrom:function(p){const k=this;k.doBeforeTransitionFrom(p);const a=k.transition;a?a.from(p).then(d=>{k.doAfterTransitionFrom(d)}):(p.setVisible(!1),k.doAfterTransitionFrom(p))},doBeforeTransitionFrom:p=>{},doAfterTransitionFrom:p=>{}});r.StackablePanel=new JS.Module("StackablePanel",{include:[r.Selectable],initNode:function(p,k){k.visible=k.selected=!1;k.bgColor??
(k.bgColor="#fff");k.panelId??(k.panelId=k.name);this.callSuper(p,k);this.selected&&this.doStackTransition()},setPanelStack:function(p){this.panelStack=p},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(p){this.panelId=p},setSelected:function(p){this.selected!==p&&(this.callSuper(p),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});r.PanelStackFadeTransition=new x("PanelStackFadeTransition",v,{initNode:function(p,
k){k.duration??(k.duration=1E3);this.callSuper(p,k)},setDuration:function(p){this.duration=p},to:function(p){return new Promise((k,a)=>{p.stopActiveAnimators("opacity");p.setVisible(!0);p.animate({attribute:"opacity",to:1,duration:this.duration}).next(d=>{p.makeHighestZIndex();k(p)})})},from:function(p){return new Promise((k,a)=>{p.stopActiveAnimators("opacity");p.animate({attribute:"opacity",to:0,duration:this.duration}).next(d=>{p.setVisible(!1);k(p)})})}});r.PanelStackSlideTransition=new x("PanelStackSlideTransition",
v,{initNode:function(p,k){k.duration??(k.duration=1E3);k.direction??(k.direction="right");this.callSuper(p,k)},setDuration:function(p){this.duration=p},setDirection:function(p){this.direction=p},to:function(p){const k=p.getPanelStack(),a=this.duration;let d,f;switch(this.direction){case "left":f="x";d=k.width;break;case "right":f="x";d=-k.width;break;case "up":f="y";d=k.height;break;case "down":f="y",d=-k.height}p.stopActiveAnimators(f);p.set(f,d);p.setVisible(!0);return new Promise((e,g)=>{g=c=>
{p.makeHighestZIndex();e(p)};0<a?p.animate({attribute:f,to:0,duration:a}).next(g):(p.set(f,0),p.makeHighestZIndex(),e(p))})},from:function(p){const k=p.getPanelStack(),a=this.duration;let d,f;switch(this.direction){case "left":f="x";d=-k.width;break;case "right":f="x";d=k.width;break;case "up":f="y";d=-k.height;break;case "down":f="y",d=k.height}p.stopActiveAnimators(f);return new Promise((e,g)=>{g=c=>{p.setVisible(!1);e(p)};0<a?p.animate({attribute:f,to:d,duration:a}).next(g):(p.set(f,d),p.setVisible(!1),
e(p))})}})})(myt);
(r=>{const x=JS.Module,{dragManager:v,mouse:p}=r.global,k=r.Draggable,a=(f,e,g)=>{[e,g].forEach(c=>{f["__is"+c]=!1;f["__tmrId"+c]=null})},d=r.DragGroupSupport=new x("DragGroupSupport",{initNode:function(f,e){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(f,e)},setDragGroups:function(f){const e=this.__dgs={};for(const g in f)e[g]=!0;this.__anyDG=e.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(f){const e=this.__drpgs=
{};for(const g in f)e[g]=!0;this.__anyDRPG=e.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(f){f&&(this.__dgs[f]=!0,"*"===f&&(this.__anyDG=!0))},removeDragGroup:function(f){f&&(delete this.__dgs[f],"*"===f&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(f){f&&(this.__drpgs[f]=!0,"*"===f&&(this.__anyDRPG=!0))},removeDropGroup:function(f){f&&(delete this.__drpgs[f],"*"===f&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
r.DropSource=new x("DropSource",{include:[k],initNode:function(f,e){e.distanceBeforeDrag??(e.distanceBeforeDrag=2);e.dropParent??(e.dropParent=f.getRoot());this.callSuper(f,e)},setDropClass:function(f){this.dropClass=r.resolveClassname(f)},setDropClassAttrs:function(f){this.dropClassAttrs=f},setDropParent:function(f){this.dropParent=f},startDrag:function(f){const e=this.dropable=this.makeDropable();if(e){const g=e.distanceBeforeDrag;e.distanceBeforeDrag=0;e.doMouseDown(f);e.__doMouseDown(f);e.distanceBeforeDrag=
g}},doMouseUp:function(f){this.callSuper(f);const e=this.dropable;e&&(e.__doMouseUp(f),e.doMouseUp(f),this.dropable=null)},makeDropable:function(){const f=this.dropClass,e=this.dropParent;if(f&&e){const g=r.DomElementProxy.getRelativePosition(this.getIDE(),e.getIDE());return new f(e,{...this.dropClassAttrs,x:g.x??0,y:g.y??0})}}});r.DropTarget=new x("DropTarget",{include:[d],initNode:function(f,e){this.callSuper(f,e);v.registerDropTarget(this)},destroy:function(){v.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(f){return!this.disabled&&this.isVisible()},notifyDragStart:f=>{},notifyDragStop:f=>{},notifyDragEnter:f=>{},notifyDragLeave:f=>{},notifyDrop:f=>{}});r.Dropable=new x("Dropable",{include:[k,d],setDropTarget:function(f){this.dropTarget=f},setDropped:function(f){this.dropped=f},setDropFailed:function(f){this.dropFailed=f},willPermitDrop:f=>!0,startDrag:function(f){this.setDropped(!1);this.setDropFailed(!1);v.startDrag(this);this.callSuper(f)},updateDrag:function(f){v.updateDrag(f,
this);this.callSuper(f)},stopDrag:function(f,e){v.stopDrag(f,this,e);this.callSuper(f,e);e?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(f){this.setDropTarget(f)},notifyDragLeaving:function(f){this.setDropTarget()},notifyDropped:function(f,e){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});r.AutoScroller=new x("AutoScroller",{include:[d],initNode:function(f,e){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;e.overflow??(e.overflow="auto");this.callSuper(f,e);v.registerAutoScroller(this)},destroy:function(){v.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(f){this.scrollBorder=Math.max(1,f)},setScrollFrequency:function(f){this.scrollFrequency=f},setScrollAmount:function(f){this.scrollAmount=f},setScrollAcceleration:function(f){this.scrollAcceleration=f},notifyAutoScrollerDragStart:function(f){f=this.getIDE();(f.scrollHeight>f.clientHeight||
f.scrollWidth>f.clientWidth)&&this.attachToDom(p,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(f){this.detachFromDom(p,"__hndlMove","mousemove",!0);a(this,"Up","Down");a(this,"Left","Right")},__hndlMove:function(f){const e=this;let {pageX:g,pageY:c}=f.value;if(e.containsPoint(g,c)){f=e.getPagePosition();const h=e.scrollBorder,b=(m,t)=>{e["__is"+m]&&(e.getIDE()["scroll"+("Up"===m||"Down"===m?"Top":"Left")]+=t*e["__amt"+m],e["__tmrId"+m]=setTimeout(()=>{b(m,t)},e.scrollFrequency))};
g-=f.x;c-=f.y;c<h?(e.__isUp=!0,e.__amtUp=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-c/h))),e.__tmrIdUp||b("Up",-1)):e.height-c<h?(e.__isDown=!0,e.__amtDown=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-(e.height-c)/h))),e.__tmrIdDown||b("Down",1)):a(e,"Up","Down");g<h?(e.__isLeft=!0,e.__amtLeft=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-g/h))),e.__tmrIdLeft||b("Left",-1)):e.width-g<h?(e.__isRight=!0,e.__amtRight=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-(e.width-
g)/h))),e.__tmrIdRight||b("Right",1)):a(e,"Left","Right")}else a(e,"Up","Down"),a(e,"Left","Right")}})})(myt);
(r=>{const {max:x,cos:v,sin:p,PI:k}=Math,a=r.Geometry.degreesToRadians,d=h=>{var b=a(h.startAngle),m=a(h.endAngle);if(b>m){var t=b;b=m;m=t}t=h.__path;var n=h.width/2,l=h.thickness;const w=h.radius,B=w+l;var G=m-b;const J=G+1E-4>=2*k;J&&(b=0,m=k);const L=[n+B*v(b),n+B*p(b)],A=[n+B*v(m),n+B*p(m)];m=[n+w*v(m),n+w*p(m)];b=[n+w*v(b),n+w*p(b)];n=["M"+L.join()];J?n.push("A"+[B,B,0,1,1,A].join(),"A"+[B,B,0,1,1,L].join(),"L"+m.join(),"A"+[w,w,0,1,0,b].join(),"A"+[w,w,0,1,0,m].join()):(G=G%(2*k)>k?1:0,l/=2,
n.push("A"+[B,B,0,G,1,A].join(),h.endCapRounding?"A"+[l,l,0,0,1,m].join():"L"+m.join(),"A"+[w,w,0,G,0,b].join(),h.startCapRounding?"A"+[l,l,0,0,1,L].join():""));n.push("z");t.setAttribute("d",n.join(" "));t.setAttribute("fill",h.color)},f=h=>{const b=2*(h.radius+h.thickness),m=h.__svg;h.setWidth(b);h.setHeight(b);m.setAttribute("viewBox","0 0 "+b+" "+b);m.setAttribute("width",b);m.setAttribute("height",b);d(h)},e=(h,b,m)=>{h[b]!==m&&(h[b]=m,h.inited&&(d(h),h.fireEvent(b,m)))},g=(h,b,m)=>{h[b]!==m&&
(h[b]=m=x(0,m),h.inited&&(f(h),h.fireEvent(b,m)))},c=(h,b)=>{h=document.createElementNS("http://www.w3.org/2000/svg",h);b?.appendChild(h);return h};r.Annulus=new JS.Class("Annulus",r.BackView,{initNode:function(h,b){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(h,b);f(this)},createOurDomElement:function(h){h=this.callSuper(h);var b=Array.isArray(h)?h[1]:h;b=this.__svg=c("svg",b);this.__path=c("path",b);b.style.pointerEvents=
"none";return h},setRadius:function(h){g(this,"radius",h)},setThickness:function(h){g(this,"thickness",h)},setStartAngle:function(h){e(this,"startAngle",h)},setEndAngle:function(h){e(this,"endAngle",h)},setStartCapRounding:function(h){e(this,"startCapRounding",h)},setEndCapRounding:function(h){e(this,"endCapRounding",h)},setColor:function(h){e(this,"color",h)},isColorAttr:function(h){return"color"===h||this.callSuper(h)}})})(myt);
(r=>{let x;const v=JS.Class,{mouse:p,windowResize:k,dragManager:a}=r.global,{min:d,max:f,round:e}=Math,g=t=>{t.__checkTID&&(clearTimeout(t.__checkTID),delete t.__checkTID)},c=t=>{if(t.tooltip){const n=t._lastPos;if(t.tooltip.parent.containsPoint(n.x,n.y))return!0}t.hideTip();return!1},h=r.BaseTooltip=new v("BaseTooltip",r.View,{include:[r.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(t,n){this.tipDelay=this.nextTipDelay=h.TIP_DELAY;this.tipHideDelay=h.TIP_HIDE_DELAY;n.visible??
(n.visible=!1);this.callSuper(t,n)},setTooltip:function(t){this.inited&&(this.tooltip=t)&&(this.attachToDom(p,"__hndl_mousemove","mousemove",!0),this.attachToDom(t.parent,"hideTip","mousedown",!0),this.attachToDom(t.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(t){const n=this;n._lastPos=r.MouseObservable.getMouseFromEvent(t);c(n)&&(g(n),n.__checkTID=setTimeout(()=>{delete n.__checkTID;c(n)&&n.showTip()},n.nextTipDelay))},hideTip:function(t){g(this);if(t=this.tooltip?.parent)this.detachFromDom(t,
"hideTip","mousedown",!0),this.detachFromDom(t,"hideTip","mouseup",!0),this.detachFromDom(p,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){a.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),b=r.Tooltip=new v("Tooltip",h,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},initNode:function(t,
n){n.edgeSize??(n.edgeSize=b.EDGE_SIZE);n.edgeColor??(n.edgeColor=b.EDGE_COLOR);n.shadowSize??(n.shadowSize=b.SHADOW_SIZE);n.shadowColor??(n.shadowColor=b.SHADOW_COLOR);n.insetH??(n.insetH=b.HORIZONTAL_INSET);n.insetV??(n.insetV=b.VERTICAL_INSET);n.tipBgColor??(n.tipBgColor=b.TIP_BG_COLOR);n.tipTextColor??(n.tipTextColor=b.TIP_TEXT_COLOR);this.callSuper(t,n);this._tipText=new r.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},setEdgeSize:function(t){this.edgeSize=
t},setEdgeColor:function(t){this.edgeColor=t},setShadowSize:function(t){this.shadowSize=t},setShadowColor:function(t){this.shadowColor=t},setInsetH:function(t){this.insetH=t},setInsetV:function(t){this.insetV=t},setTipBgColor:function(t){this.tipBgColor=t},setTipTextColor:function(t){this.tipTextColor=t},showTip:function(){const t=this.tooltip;var n=t.text;const l=t.parent;var w=this._tipText;const B=this.edgeSize,G=this.shadowSize;w.text!==n&&w.setText(n);w.setWidth("auto");var J=d(w.measureNoWrapWidth(),
t.maxTextWidth);n=J+2*w.x;const L=n+2*B;w.setWidth(J);w.sizeViewToDom();J=l.getPagePosition();w=w.height+2*w.y;const A=w+2*B,u=J.y-A+("below"===t.tipvalign?l.height+A:0);J=J.x;switch(t.tipalign){case "right":J-=L;case "farright":J+=l.width;break;case "farleft":J-=L}this.setX(e(d(f(J,0),k.getWidth()-L)));this.setY(e(d(f(u,0),k.getHeight()-A)));this.setWidth(n);this.setHeight(w);this.setBgColor(this.tipBgColor);this.setBorder([B,"solid",this.edgeColor]);this.setBoxShadow([G,G,G,this.shadowColor]);this.callSuper()}}),
m=r.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:b,MAX_TEXT_WIDTH:280},setTooltip:function(t){this.callSuper("");this.set("tooltip",t,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(t){this.set("tipAlign",t,!0)},setTipValign:function(t){this.set("tipValign",t,!0)},setMaxTextWidth:function(t){this.set("maxTextWidth",t,!0)},setTipClass:function(t){this.set("tipClass",t,!0)},doSmoothMouseOver:function(t){const n=this.getTooltip();this.callSuper(t);if(t&&n){t=this.tipClass??
m.TIP_CLASS;!x||x instanceof t||(x.destroy(),x=null);if(!x){let l=document.getElementById("tooltipDiv");l||(l=r.DomElementProxy.createElement("div",{position:"absolute"}),r.getElement().appendChild(l));x=new t(l,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:n,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||m.MAX_TEXT_WIDTH})}}})})(myt);
(r=>{const x=Math;r.Path=new JS.Class("Path",{initialize:function(v){this.setVectors(v??[])},setVectors:function(v){this._boundingBox=null;this.vectors=v},copyFrom:function(v){this.vectors=v.vectors.slice();this._boundingBox=null},drawInto:function(v){v.beginPath();const p=this.vectors;let k=p.length,a=0;for(v.moveTo(p[a++],p[a++]);k>a;)v.lineTo(p[a++],p[a++]);v.closePath()},translate:function(v,p){const k=this.vectors;let a=k.length;for(;a;)k[--a]+=p,k[--a]+=v;this._boundingBox=null},rotate:function(v){const p=
x.cos(v);v=x.sin(v);const k=this.vectors,a=k.length;for(let d=0;a>d;){const f=k[d]*p-k[d+1]*v,e=k[d]*v+k[d+1]*p;k[d++]=f;k[d++]=e}this._boundingBox=null},rotateAroundOrigin:function(v,p,k){this.translate(-p,-k);this.rotate(v);this.translate(p,k)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const v=this.vectors;let p=v.length,k,a,d,f;if(2<=p){d=f=v[--p];for(k=a=v[--p];p;){const e=v[--p],g=v[--p];d=x.min(e,d);f=x.max(e,f);k=x.min(g,k);a=x.max(g,a)}return this._boundingBox=
{x:k,y:d,width:a-k,height:f-d}}return this._boundingBox=null},getCenter:function(){const v=this.getBoundingBox();return v?{x:v.x+v.width/2,y:v.y+v.height/2}:null},isPointInPath:function(v,p){"object"===typeof v&&(p=v.y,v=v.x);return r.Geometry.isPointInPath(v,p,this.getBoundingBox(),this.vectors)}})})(myt);
(r=>{const x=console.warn,v=Math.PI,p=v/2,k=3*v/2,a=r.AccessorSupport,d={};"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" ").forEach(f=>{d[f]=function(...e){this.__ctx[f](...e)}});["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"].forEach(f=>
{d[f]=function(...e){return this.__ctx[f](...e)}});"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" ").forEach(f=>{d[a.generateSetterName(f)]=function(e){this.__ctx[f]=e};d[a.generateGetterName(f)]=function(){return this.__ctx[f]}});r.Canvas=new JS.Class("Canvas",r.BackView,{include:[d],createOurDomElement:function(f){f=this.callSuper(f);const e=Array.isArray(f)?
f[1]:f,g=this.__cvs=document.createElement("canvas");g.className="mytUnselectable";e.appendChild(g);g.style.position="absolute";this.__ctx=g.getContext("2d");return f},setWidth:function(f){0>f&&(f=0);this.__cvs.setAttribute("width",f);this.callSuper(f)},setHeight:function(f){0>f&&(f=0);this.__cvs.setAttribute("height",f);this.callSuper(f)},clear:function(){const f=this.__ctx;f.save();f.setTransform(1,0,0,1,0,0);f.clearRect(0,0,this.width,this.height);f.restore()},dataURItoBlob:function(f,e){f=atob(f.split(",")[1]);
const g=f.length,c=[];for(let h=0;h<g;)c.push(f.charCodeAt(h++));return new Blob([new Uint8Array(c)],{type:e})},getDataURL:function(f,e){return this.__cvs.toDataURL(f,e)},getImageFile:function(f,e,g){switch(f){case "png":case "PNG":f="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":f="jpeg";g??=.5;break;default:x("Unexpected image type",f),f=f.toLowerCase()}const c="image/"+f;g=this.dataURItoBlob(this.getDataURL(c,g),c);e&&(g.name=e+"."+f);return g},circle:function(f,e,g){this.__ctx.arc(f,
e,g,0,2*v)},drawRoundedRect:function(f,e,g,c,h,b){const m=this.lineTo.bind(this),t=this.arc.bind(this);b=c+b;h=g+h;this.beginPath();this.moveTo(g,c+f);m(g,b-f);t(g+f,b-f,f,v,p,!0);m(h-f,b);t(h-f,b-f,f,p,0,!0);m(h,c+f);t(h-f,c+f,f,0,k,!0);m(g+f,c);t(g+f,c+f,f,k,v,!0);this.closePath();0<e&&(f-=e,g+=e,h-=e,c+=e,b-=e,this.moveTo(g,c+f),t(g+f,c+f,f,v,k),m(h-f,c),t(h-f,c+f,f,k,0),m(h,b-f),t(h-f,b-f,f,0,p),m(g+f,b),t(g+f,b-f,f,p,v),this.closePath());return this},drawRectOutline:function(f,e,g,c,h){h=g+h;
c=e+c;const b=e+f,m=c-f,t=g+f;f=h-f;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(e,g);n(e,h);n(c,h);n(c,g);n(e,g);n(b,t);n(m,t);n(m,f);n(b,f);n(b,t);this.closePath();return this},drawPartiallyRoundedRect:function(f,e,g,c,h,b,m,t){t=b+t;m=h+m;const n=this.lineTo.bind(this),l=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(h,b+f);n(h,t-g);0<g&&l(h,t,h+g,t);n(m-c,t);0<c&&l(m,t,m,t-c);n(m,b+e);0<e&&l(m,b,m-e,b);n(h+f,b);0<f&&l(h,b,h,b+f);this.closePath();return this},drawAnnulus:function(f,
e,g,c,h,b,m,t=60){const n=r.Color;m.forEach(D=>{"string"===typeof D.color&&(D.color=n.makeColorFromHexString(D.color))});1>t&&(x("Invalid segements",t),t=60);t=v/t;let l=0;for(var w=m.length-1;l<w;){var B=m[l++];const {angle:D,color:E}=B,{angle:I,color:K}=m[l];var G=Math.round((I-D)/t),J=E.getDiffFrom(K);B.colorDelta={red:J.red/G,green:J.green/G,blue:J.blue/G}}g=new r.Path([f+g,e,f+c,e]);g.rotateAroundOrigin(h,f,e);c=g.vectors;let [L,A,u,z]=c,q=0,y=v/360;for(l=0;b>h;){G=L;J=A;w=u;B=z;h+=t;h>b&&(t+=
b-h,y=0,h=b);g.rotateAroundOrigin(t+y,f,e);[L,A,u,z]=c;this.beginPath();this.moveTo(G,J);this.lineTo(w,B);this.lineTo(u,z);this.lineTo(L,A);this.closePath();const {color:D,colorDelta:E}=m[l];this.setFillStyle(n.rgbToHex(D.red+q*E.red,D.green+q*E.green,D.blue+q*E.blue,!0));this.fill();0<y&&(g.rotateAroundOrigin(-y,f,e),[L,A,u,z]=c);q++;h>=m[l+1].angle&&(q=0,l++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
