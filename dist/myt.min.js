(t=>{let x;var v=g=>{let k=g.length;for(;k;){const n=g[--k];x=n.ver??n.id;if(n.str?.includes(n.sub)||n.prop)return n.id}};var u=g=>{const k=g.indexOf(x);if(0<=k)return parseFloat(g.slice(k+x.length+1))};const h=navigator.userAgent,e=navigator.platform;u=t.BrowserDetect={browser:v([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:h,sub:"Firefox",id:"Firefox"},{str:h,sub:"Chrome",id:"Chrome"},{str:h,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:u(h)||u(navigator.appVersion)||"UNKNOWN",os:v([{str:h,sub:"iPhone",id:"iPhone/iPod"},{str:e,sub:"Linux",id:"Linux"},{str:e,sub:"Mac",id:"Mac"},{str:e,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(u.browser){case "Chrome":case "Safari":t="WebKit";break;case "Explorer":t="MS";break;case "Firefox":t="Moz";break;case "Opera":t="O";break;default:t="UNKNOWN"}v=t.toLowerCase();u.prefix={dom:t,lowercase:v,css:"-"+v+"-",js:v[0].toUpperCase()+v.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:t,floor:x,ceil:v}=Math,u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" "),g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),k=d=>(10>d?"0":"")+d,n=(d,a)=>{d=d.getTimezoneOffset();return(0<d?"-":"+")+k(x(t(d/60)))+(a?":":"")+(0==t(d%60)?"00":k(t(d%60)))},b={d:d=>
k(d.getDate()),D:d=>e[d.getDay()],j:d=>d.getDate(),l:d=>g[d.getDay()],N:d=>0==d.getDay()?7:d.getDay(),S:d=>{d=d.getDate();return 1==d%10&&11!=d?"st":2==d%10&&12!=d?"nd":3==d%10&&13!=d?"rd":"th"},w:d=>d.getDay(),z:d=>{const a=new Date(d.getFullYear(),0,1);return v((d-a)/864E5)},W:d=>{const a=new Date(d.valueOf());d=(d.getDay()+6)%7;a.setDate(a.getDate()-d+3);d=a.valueOf();a.setMonth(0,1);4!==a.getDay()&&a.setMonth(0,1+(4-a.getDay()+7)%7);return k(1+v((d-a)/6048E5))},F:d=>h[d.getMonth()],m:d=>k(d.getMonth()+
1),M:d=>u[d.getMonth()],n:d=>d.getMonth()+1,t:d=>{let a=d.getFullYear();d=d.getMonth()+1;12===d&&(a=a++,d=0);return(new Date(a,d,0)).getDate()},L:d=>{d=d.getFullYear();return 0==d%400||0!=d%100&&0==d%4},o:d=>{const a=new Date(d.valueOf());a.setDate(a.getDate()-(d.getDay()+6)%7+3);return a.getFullYear()},Y:d=>d.getFullYear(),y:d=>(""+d.getFullYear()).substr(2),a:d=>12>d.getHours()?"am":"pm",A:d=>12>d.getHours()?"AM":"PM",B:d=>x(1E3*((d.getUTCHours()+1)%24+d.getUTCMinutes()/60+d.getUTCSeconds()/3600)/
24),g:d=>d.getHours()%12||12,G:d=>d.getHours(),h:d=>k(d.getHours()%12||12),H:d=>k(d.getHours()),i:d=>k(d.getMinutes()),s:d=>k(d.getSeconds()),e:d=>/\((.*)\)/.exec((new Date).toString())[1],I:d=>{let a=null,f=0;for(;12>f;){const c=(new Date(d.getFullYear(),f++,1)).getTimezoneOffset();if(null===a)a=c;else if(c<a){a=c;break}else if(c>a)break}return d.getTimezoneOffset()==a|0},O:d=>n(d,!1),P:d=>n(d,!0),T:d=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:d=>60*-d.getTimezoneOffset(),c:d=>d.format("Y-m-d\\TH:i:sP"),
r:d=>d.toString(),U:d=>d.getTime()/1E3,x:d=>d.toLocaleDateString(),X:d=>d.toLocaleTimeString()};return function(d){return d.replace(/(\\?)(.)/g,(a,f,c)=>""===f&&b[c]?b[c](this):c)}})();
(t=>{const x=(f,c)=>{var p=f.__mct__.get(c);if(p)return p.slice();const w=[];if(p=f.__anc__){const r=p.length;for(let m=0;m<r;){const A=p[m++].__fns__;A.has(c)&&w.push(A.get(c))}}else{const r=f.__anc__=[],m=A=>{const H=A.__inc__,z=H.length;for(let C=0;C<z;)m(H[C++]);r.includes(A)||(r.push(A),A=A.__fns__,A.has(c)&&w.push(A.get(c)))};m(f)}f.__mct__.set(c,w.slice());return w},v=(f,c)=>{const p=f.callable;return f.__hs?function(...w){const r=this.callSuper,m=x(c,f.name);let A=m.length-1;if(0===A)r&&delete this.callSuper;
else{const z=w.length,C=this.callSuper=(...J)=>{for(let M=J.length;M<z;)J[M]=w[M++];0===--A&&delete this.callSuper;J=m[A].callable.call(this,...J);this.callSuper=C;A++;return J}}const H=p.call(this,...w);r?this.callSuper=r:delete this.callSuper;return H}:p},u=(f,c)=>{c=c??f;if(c===f){f.__anc__=null;f.__mct__=new Map;var p=f.__dep__;for(var w=p.length;0<w;)u(p[--w])}p=c.__tgt__;w=f.__inc__;const r=w.length;for(let m=0;m<r;)u(w[m++],c);for(const [m,A]of f.__fns__)f=A instanceof g?v(A,c):A,p[m]!==f&&
(p[m]=f)},h=f=>f.__meta__??(f.__meta__=new k(null,null,f)).include(f.klass,!0),e=f=>{const c=function(...p){return this.initialize(...p)??this};c.prototype=Object.create(f.prototype);return c},g=e(Object),k=t.Module=e(Object);g.prototype.initialize=function(f,c,p){this.module=f;this.name=c;this.callable=p;this.__hs=p.toString().includes("callSuper")};var n=k.prototype;n.initialize=function(f,c,p){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=p;f&&(this.__displayName=
f);this.include(c,!0)};n.include=function(f,c){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var p=f.extend,w=f.include;p&&(p.__fns__||"function"!==typeof p)&&this.extend(p);if(w&&(w.__fns__||"function"!==typeof w)){p=w.length;for(let r=0;r<p;)this.include(w[r++],!0)}for(const r of Object.keys(f))if(w=f[r],"extend"!==r&&"include"!==r||!w.__fns__&&"function"===typeof w)this.__fns__.has(r)?(console.warn('JS.Module already has field: "'+r+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new k("Auto_"+r,{[r]:w}),!1)):this.__fns__.set(r,w?.__fns__||"function"!==typeof w?w:new g(this,r,w))}!0!==c&&u(this)}return this};n.includes=function(f){if(f===this)return!0;const c=this.__inc__,p=c.length;for(let w=0;w<p;)if(c[w++].includes(f))return!0;return!1};n.instanceMethod=function(f){return x(this,f).pop()};const b=new k("Kernel",{extend:function(f){h(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||h(this).includes(f)}}),d=t.Class=e(k),a=d.prototype;
a.initialize=function(f,c,p){"function"!==typeof c&&(p=c,c=Object);k.prototype.initialize.call(this,f);f=e(c);for(const w in this)f[w]===this[w]||f.hasOwnProperty(w)||(f[w]=this[w]);f.prototype.constructor=f.prototype.klass=f;h(f).include(c.__meta__);f.__tgt__=f.prototype;c=c===Object?{}:c.__fns__?c:new k(c.prototype,!0);f.include(b,!0).include(c,!0).include(p,!0);u(f);return f};n=(f,c)=>{f.__inc__=[];f.__dep__=[];const p=f.__tgt__=f.prototype,w=f.__fns__=new Map;for(const H of Object.keys(p)){var r=
w,m=r.set;var A=p[H];A=A?.__fns__||"function"!==typeof A?A:new g(f,H,A);m.call(r,H,A)}p.constructor=p.klass=f;for(const H in a)f[H]===a[H]||f.hasOwnProperty(H)||(f[H]=a[H]);f.include(c);f.constructor=f.klass=d};n(g,b);n(k,b);n(d,k);u(h(g));u(h(k));h(d).include(k.__meta__);t.Singleton=new d("Singleton",{initialize:(f,c,p)=>new (new d(f,c,p))})})(global.JS={});
(t=>{class x extends Error{constructor(q,y,...B){super(...B);this.name="FetchError";this.status=q;this.url=y}}let v=0,u,h={};const e=console.warn,g=Math,{abs:k,min:n,max:b,pow:d}=g,a=Array.isArray,f=document,c=f.head,p=f.createElement.bind(f),w={},r={"":!0},m=f.fonts,A=q=>{const y=q.family.split('"').join("");for(const B of[y,y+" "+q.weight])if(!r[B]){r[B]=!0;const E=w[B]??[];for(;E.length;)(q=E.pop())&&!q.destroyed&&q.isVisible()&&(q.sizeViewToDom(),q.notifyFontLoaded?.(y))}},H={},z=q=>{const y=
{};return(...B)=>{const E=JSON.stringify(B);return E in y?y[E]:y[E]=q(...B)}},C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,J=/\$(\d+)/g,M=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,O=/[\\"](.)/g,l=t.myt={version:2.02306021558E7,generateGuid:()=>++v,hash:q=>q.split("").reduce((y,B)=>{y=(y<<5)-y+B.charCodeAt(0);return y&y},0),addEventListener:(q,y,B,E,F)=>{q.addEventListener(y,B,{capture:E||!1,passive:F||!1})},removeEventListener:(q,y,B,E)=>{q.removeEventListener(y,B,E||!1)},resolveName:(q,
y)=>{if(q&&0!==q.length){y=y??global;var B=a(q)?q:q.split("."),E=B.length;for(let F=0;F<E;F++)if(y=y[B[F]],null==y){e("resolveName failed for",q,"at part",F,B[F]);return}return y}},resolveClassname:q=>{"string"===typeof q&&(q=l.resolveName(q));return q&&"function"===typeof q.isA&&q.isA(JS.Class)?q:null},getExtension:q=>q?(q=q.split("."),1<q.length?q.pop():null):null,loadScript:function(q,y,B,E){const F=this._loadedScripts??(this._loadedScripts={});let K=F[q];if(!0===K)y?.(!0);else if(!1===K)y?.(!1);
else if(Array.isArray(K))y&&K.push(y);else{K=F[q]=[];y&&K.push(y);const L=p("script");L.type="text/javascript";L.async=!1;E&&(L.integrity=E,L.crossOrigin="anonymous");const R=N=>{L.onload=L.onreadystatechange=L.onerror=null;for(const T of K)T(N);F[q]=N};L.onerror=()=>{R(!1)};L.onload=L.onreadystatechange=()=>{L.readyState&&"complete"!==L.readyState||R(!0)};L.src=q+(B?"":(q.includes("?")?"&":"?")+"cacheBust="+Date.now());c.appendChild(L)}},dumpStack:(q,y)=>{let B;"string"===typeof q&&(B=q,q=null);
l.global.error.notify(y||"error",null,B,q)},getRandom:q=>{const y=g.random();return q?b(0,n(q(y),.9999999999)):y},getRandomArbitrary:(q,y,B)=>{const E=n(q,y);return l.getRandom(B)*(b(q,y)-E)+E},getRandomInt:(q,y,B)=>{const E=n(q,y);return g.floor(l.getRandom(B)*(b(q,y)-E+1)+E)},areFloatsEqual:(q,y,B)=>{const E=k(q),F=k(y);return k(q-y)<=(E>F?F:E)*(null==B?1E-6:k(B))},areArraysEqual:(q,y)=>{if(q!==y){if(null==q||null==y)return!1;let B=q.length;if(B!==y.length)return!1;for(;B;)if(q[--B]!==y[B])return!1}return!0},
areObjectsEqual:(q,y)=>{if(q!==y){if(null==q||null==y)return!1;for(const B in q)if(q[B]!==y[B])return!1;for(const B in y)if(q[B]!==y[B])return!1}return!0},getElement:(q,y)=>f.getElementsByTagName(q||"body")[0<y?y:0],loadFontFaces:(q,y)=>{const B=[];for(const E of q)q=new FontFace(E.family,"url("+E.url+")",E.options),B.push(q.load());Promise.all(B).then(E=>{for(const F of E)m.add(F),A(F);y?.(E)})},loadFontFace:(q,y,B={},E)=>{q=new FontFace(q,"url("+y+")",B);q.loaded.then(F=>{m.add(F);A(F);E?.(F)});
q.load()},registerForFontNotification:(q,y)=>{r[y]?q&&!q.destroyed&&q.isVisible()&&(q.sizeViewToDom(),q.notifyFontLoaded?.(y)):(w[y]??(w[y]=[])).push(q)},createBaseFontCSSRule:q=>{l.addCSSRule(l.createStylesheet(),"body, input","font-family:"+q,0)},loadCSSFonts:q=>{q?.forEach(l.createStylesheetLink)},createStylesheetLink:q=>{if(q){let y=h[q];y?console.warn("stylesheet already exists",q):(y=h[q]=p("link"),y.rel="stylesheet",y.href=q,c.appendChild(y));return y}},createStylesheet:()=>{const q=p("style");
c.appendChild(q);return q.sheet},addCSSRule:(q,y,B,E)=>{q.insertRule(y+"{"+B+"}",E)},removeCSSRules:q=>{let y=q.cssRules.length;for(;y;)q.deleteRule(--y)},createInputPlaceholderCSSRule:(q,y,B,E=1)=>{let F=q.__sheet;F?l.removeCSSRules(F):F=q.__sheet=l.createStylesheet();q=q.getODE();q=q.id||(q.id="id"+ ++v);const K=[];y&&K.push("color:"+y);B&&K.push("font-family:"+B);E&&K.push("opacity:"+E);l.addCSSRule(F,"#"+q+"::placeholder",K.join("; "),0)},isNotSorted:(q,y)=>{const B=q.length;for(let E=1;E<B;E++)if(0<
y(q[E-1],q[E]))return!0},chainSortFunc:(...q)=>(y,B)=>{for(const E of q){const F=E(y,B);if(0!==F)return F}return 0},getAlphaObjSortFunc:z((q,y,B,E)=>{const F=y?1:-1;return(K,L)=>{K=K[q];L=L[q];E?("string"!==typeof K&&(K=""+K),"string"!==typeof L&&(L=""+L)):(K=K||"",L=L||"");B&&(K=K.toLowerCase(),L=L.toLowerCase());return K.localeCompare(L)*F}}),getNumericObjSortFunc:z((q,y)=>{const B=y?1:-1;return(E,F)=>{E=E[q]||0;F=F[q]||0;return(E-F)*B}}),csvStringToArray:(q,y)=>{if(!q)return[];const B=[[]];let E;
for(;E=M.exec(q);)E[1].length&&","!==E[1]&&B.push([]),B[B.length-1].push(E[2]?E[2].replace(O,"$1"):E[3]);if(y){const F=B.shift();return B.map(K=>{let L=0;return F.reduce((R,N)=>{R[N]=K[L++];return R},{})})}return B},prepareCSVDataURI:(q,y)=>{const B=K=>{if(K&&a(K)){const L=[],R=K.length;for(let N=0,T;R>N;N++)T=K[N],T=null==T?"":T.toString(),T=T.replace(/"/g,'""'),0<=T.search(/("|,|\n)/g)&&(T='"'+T+'"'),L.push(T);return L.join(",")}e("Unexpected row",K);return null},E=[];if(y){var F=B(y);F&&E.push(F)}if(q)if(a(q)){F=
q.length;for(let K=0;F>K;K++){const L=B(q[K]);L&&E.push(L)}}else e("Rows were not an array");return l.encodeCSVDataURI(E.join("\r\n"),y)},encodeCSVDataURI:(q,y)=>"data:text/csv;charset=utf-8"+(null==y?"":";header="+(y?"present":"absent"))+","+encodeURIComponent(q),dataURIToBlob:q=>{var y=q.indexOf(",");const B=q.slice(0,y).split(":")[1].split(";")[0];q=q.slice(y+1);if(B.startsWith("text/"))q=decodeURIComponent(q);else{q=atob(q);y=q.length;const E=new Uint8Array(y);for(;y;)E[--y]=q.charCodeAt(y);q=
E}return new Blob([q],{type:B})},formatAsPercentage:(q,y=2)=>{switch(typeof q){case "number":return y=n(16,b(0,y)),q=g.round(b(0,n(1,q))*d(10,2+y))/d(10,y),(0===q%1?q:q.toFixed(y))+"%";case "string":return q;default:return e("formatAsPercentage: expects a number"),q}},leftPadNumber:(q,y,B="0",E=10)=>{q=q.toString(E);return B.repeat(b(y-q.length,0))+q},memoize:z,debounce:(q,y,B)=>{const E="__DBTO_"+ ++v;return function(){const F=this,K=F[E],L=arguments,R=B&&!K;clearTimeout(K);F[E]=setTimeout(function(){F[E]=
null;B||q.apply(F,L)},y);R&&q.apply(F,L)}},createFixedThresholdCounter:(q,y,B,E)=>{var F=l.AccessorSupport.generateName;const K="function"===typeof q||q instanceof JS.Module,L={};E=E||F("counter",B);const R=F(E,"increment");F=F(E,"decrement");if(void 0!==(K?q.instanceMethod(R):q[R]))return e("Increment: Abort clobber",R,q),!1;if(void 0!==(K?q.instanceMethod(F):q[F]))return e("Decrement: Abort clobber",F,q),!1;L[R]=function(){const N=this[E]+1;this[E]=N;this.fireEvent(E,N);N===y&&this.set(B,!0)};L[F]=
function(){const N=this[E];if(0!==N){var T=N-1;this[E]=T;this.fireEvent(E,T);N===y&&this.set(B,!1)}};q[K?"include":"extend"](L);return!0},makeURLSearchParams:(q={})=>{const y=new URLSearchParams;for(const B in q){const E=q[B];void 0!==E&&y.set(B,E)}return y},doFetch:(q,y,B,E,F,K)=>fetch(q,y).then(L=>{if(!L.ok)throw new x(L.status,q,L.statusText);return L}).then(L=>B?L.text():L.json()).then(L=>{if(E)try{if(B)E(L);else{if(!1===L.success)throw new x(200,q,L.message);E(L.data)}}catch(R){throw L=new x(200,
q,R.message),L.stack=R.stack,L;}}).catch(L=>{if(F){if("FetchError"!==L.name){const R=new x(0,q,L.message);R.stack=L.stack;L=R}F(L)}}).finally(()=>{K?.()}),I18N:{setLocale:q=>{u=q},getLocale:()=>u,addDictionary:(q,y)=>{H[y]=Object.assign(H[y]??{},q)},setDictionary:(q,y)=>{H[y]=q??{}},get:(q,...y)=>{var B=u??=(navigator.language??"en").split("-")[0].toLowerCase();B=(H[B]??H.en??{})[q];return null!=B?0<y.length?B.replaceAll(C,(E,F,K,L)=>K&&L?1==y[parseInt(F)]?K:L:"").replaceAll(J,(E,F)=>y[F]):B:q}}};
m.onloadingdone=q=>{for(const y of q.fontfaces)A(y)}})(global);
(t=>{const x=(u,h)=>{u.startsWith('"')&&(u=u.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return h?JSON.parse(u):u}catch(e){}},v=t.Cookie={defaults:{raw:!1,json:!1},read:(u,h)=>{h={...v.defaults,...h};const e=h.raw?d=>d:d=>decodeURIComponent(d.split("+").join(" "));h=h.json;const g=document.cookie.split("; "),k=g.length,n=u?void 0:{};for(let d=0;d<k;){var b=g[d++].split("=");const a=e(b.shift());b=e(b.join("="));if(u){if(u===a)return x(b,h)}else n[a]=x(b,h)}return n},write:(u,h,e)=>
{e={...v.defaults,...e};if("number"===typeof e.expires){const a=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+a)}h=e.json?JSON.stringify(h):String(h);const {raw:g,expires:k,path:n,domain:b,samesite:d}=e;return document.cookie=[g?u:encodeURIComponent(u),"=",g?h:encodeURIComponent(h),k?"; expires="+k.toUTCString():"",n?"; path="+n:"",b?"; domain="+b:"",d?"; samesite="+d:"",e.secure?"; secure":""].join("")},remove:(u,h)=>void 0!==v.read(u,h)?(v.write(u,"",{...h,expires:-1}),!0):!1}})(myt);
(t=>{const x=console.error,v=JSON.parse,u=global.localStorage,h=u.getItem.bind(u),e=u.setItem.bind(u),g=u.removeItem.bind(u),k=u.clear.bind(u),n=(d,a,f)=>{if(0<a){const c="__timerId_"+f;(f=b[c])&&clearTimeout(f);b[c]=setTimeout(()=>{d();delete b[c]},a)}else d()},b=t.LocalStorage={hasDatum:(d,a)=>{if(d&&(a=h(a??"myt")))try{return null!=v(a)[d]}catch(f){x(f)}return!1},getDatum:(d,a)=>{if(d&&(a=h(a??"myt")))try{const f=v(a);if("object"===typeof f)return f[d]}catch(f){x(f)}},setDatum:(d,a,f,c)=>{f=f??
"myt";n(()=>{const p=b.getData(f);p[d]=a;e(f,JSON.stringify(p))},c,f+"___"+d)},removeDatum:(d,a,f)=>{a=a??"myt";n(()=>{const c=b.getData(a);delete c[d];e(a,JSON.stringify(c))},f,a+"___"+d)},hasData:d=>null!=h(d??"myt"),getData:d=>{if(d=h(d??"myt"))try{return v(d)}catch(a){x(a)}return{}},setData:(d,a,f)=>{a=a??"myt";d??={};return"object"===typeof d?(n(()=>{e(a,JSON.stringify(d))},f,a),!0):!1},removeData:(d,a)=>{d=d??"myt";n(()=>{g(d)},a,d)},getLength:()=>u.length,getKey:u.key.bind(u),getItem:h,setItem:e,
removeItem:g,clear:k,get:h,set:e,remove:g,clearAll:k}})(myt);
(t=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,v=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.URI=new JS.Class("URI",{initialize:function(h,e){h&&this.parse(h,e)},setSource:function(h){this.source=h},setProtocol:function(h){this.protocol=
h},setAuthority:function(h){this.authority=h},setUserInfo:function(h){this.userInfo=h},setUser:function(h){this.user=h},setPassword:function(h){this.password=h},setHost:function(h){this.host=h},setPort:function(h){this.port=h},setRelative:function(h){this.relative=h},setPath:function(h){this.path=h},setDirectory:function(h){this.directory=h},setFile:function(h){this.file=h},setQuery:function(h){this.query=h},setAnchor:function(h){this.anchor=h},parse:function(h,e){const g=this,[k,n,b,d,a,f,c,p,w,
r,m,A,H,z]=(e?u:v).exec(h)??[];g.setSource(k??"");g.setProtocol(n??"");g.setAuthority(b??"");g.setUserInfo(d??"");g.setUser(a??"");g.setPassword(f??"");g.setHost(c??"");g.setPort(p??"");g.setRelative(w??"");g.setPath(r??"");g.setDirectory(m??"");g.setFile(A??"");g.setQuery(H??"");g.setAnchor(z??"");g.queryPairs={};g.query.replace(x,(C,J,M)=>{J&&(g.queryPairs[J]=M)})},decodeQueryParam:h=>decodeURIComponent(h).split("+").join(" "),getQuery:function(){var h=this.queryPairs;const e=[];for(const g in h)e.push(g+
"="+encodeURIComponent(this.getQueryParam(g)));h=e.join("&");return 0<h.length?"?"+h:h},getQueryParam:function(h){h=this.queryPairs[h];return null==h?void 0:this.decodeQueryParam(h)},setQueryParam:function(h,e){this.queryPairs[encodeURIComponent(h)]=encodeURIComponent(e)},removeQueryParam:function(h){delete this.queryPairs[h]},getPathParts:function(h){const e=this.path.split("/");if(!h)for(h=e.length;h;)0===e[--h].length&&e.splice(h,1);return e},toString:function(h){const e=this.path;h=h?this.query?
"?"+this.query:"":this.getQuery();const g=this.anchor;let k=this.toStringThroughPort();e?k+=e:this.host&&(h||g)&&(k+="/");h&&(k+=h);g&&(k+="#"+g);return k},toStringThroughPort:function(){const h=this.protocol,e=this.host,g=this.userInfo,k=this.port;let n="";h&&(n+=h+"://");g&&e&&(n+=g+"@");e&&(n+=e,k&&(n+=":"+k));return n}})})(myt);
(t=>{const x=Math,{PI:v,cos:u,sin:h,sqrt:e}=x,g=(b,d,a,f,c,p)=>{"object"===typeof b&&(p=c,c=f,f=a,a=d,d=b.y,b=b.x);"object"===typeof a&&(p=a.height,c=a.width,f=a.y,a=a.x);return b>=a&&d>=f&&b<=a+c&&d<=f+p},k=(b,d,a,f,c)=>{b=a-b;d=f-d;d=b*b+d*d;return c?d:e(d)},n=(b,d,a,f,c)=>{null==c&&(c=6371);b=b*v/180;a=a*v/180;return c*x.acos(h(b)*h(a)+u(b)*u(a)*u(f*v/180-d*v/180))};t.Geometry={getClosestPointOnALineToAPoint:(b,d,a,f,c,p,w)=>{a-=b;f-=d;c=(a*(c-b)+f*(p-d))/(a*a+f*f);w&&(c=x.min(1,x.max(0,c)));return{x:b+
a*c,y:d+f*c}},isPointInPath:(b,d,a,f)=>{"object"===typeof b&&(f=a,a=d,d=b.y,b=b.x);if(g(b,d,a)&&(a=f.length,6<=a)){let c=!1,p=f[0],w=f[1],r,m;for(;a;)m=f[--a],r=f[--a],m>d!==w>d&&b<(p-r)*(d-m)/(w-m)+r&&(c=!c),p=r,w=m;return c}return!1},measureDistance:k,measureLatLngDistance:n,degreesToRadians:b=>b*v/180,radiansToDegrees:b=>180*b/v,rectContainsPoint:g,circleContainsPoint:(b,d,a,f,c)=>k(b,d,a,f,!0)<=c*c,circleContainsLatLng:(b,d,a,f,c,p)=>n(b,d,a,f,p)<=c,polarToCartesian:(b,d,a,f)=>{a??=0;f??=0;d%=
360;if(0===d)d=b,b=0;else if(90===d)d=0;else if(180===d)d=-b,b=0;else if(270===d)d=0,b=-b;else{const c=d*v/180;d=b*u(c);b*=h(c)}return[a+d,f+b]},cartesianToPolar:(b,d,a,f,c)=>{a??=0;f??=0;b-=a;f=d-f;d=e(b*b+f*f);f=x.atan2(f,b);0>f&&(f+=2*v);return[d,c?f:180*f/v]}}})(myt);
(t=>{const x=JS.Module,v=console.log,u=t.dumpStack;t.Observable=new x("Observable",{attachObserver:function(h,e,g){return h&&e&&g?(this.getObservers(g).push(e,h),!0):!1},detachObserver:function(h,e,g){if(h&&e&&g){var k=this.__obsbt;if(k&&(g=k[g])){k=!1;let n=g.length;for(;2<=n;){const b=g[--n],d=g[--n];h===b&&e===d&&(g.splice(n,2),k=!0)}return k}}return!1},detachAllObservers:function(){const h=this.__obsbt;if(h)for(const e in h){const g=h[e];let k=g.length;for(;2<=k;){const n=g[--k],b=g[--k];n&&b&&
("function"===typeof n.detachFrom&&n.detachFrom(this,b,e)||g.splice(k,2))}}},getObservers:function(h){let e;return(e=this.__obsbt??(this.__obsbt={}))[h]??(e[h]=[])},hasObservers:function(h){const e=this.__obsbt;return e?0<e[h]?.length:!1},createEvent:function(h,e){return{source:this,type:h,value:e}},fireEvent:function(h,e,g){if(null==g){var k=this.__obsbt;k&&(g=k[h])}if(g){k={source:this,type:h,value:e};const n=this.__aet??(this.__aet={});if(n[h])t.global.error.notify("warn","eventLoop","Abort refiring event:"+
h,null,{observable:this,type:h,value:e});else{n[h]=!0;for(e=g.length;2<=e;){const b=g[--e],d=g[--e];if(b&&d)try{if("function"===typeof d){if(d.call(b,k))break}else if(b[d]?.(k))break}catch(a){u(a),v("Additional context",d,b)}}n[h]=!1}}}});t.Observer=new x("Observer",{valueFromEvent:h=>h&&"object"===typeof h&&h.type?h.value:h,syncTo:function(h,e,g,k,n){k??=g;try{this[e](h.createEvent(g,h.get(k)))}catch(b){u(b)}n||this.attachTo(h,e,g,n)},isAttachedTo:function(h,e,g){if(h&&e&&g){var k=this.__obt;if(k&&
(g=k[g]))for(k=g.length;2<=k;){const n=g[--k],b=g[--k];if(h===n&&e===b)return!0}}return!1},getObservables:function(h){let e;return(e=this.__obt??(this.__obt={}))[h]??(e[h]=[])},hasObservables:function(h){const e=this.__obt;return e?0<e[h]?.length:!1},attachTo:function(h,e,g,k){if(h&&e&&g){const n=this.getObservables(g);if(k){const b=this,d=e;this.__methodNameCounter??(this.__methodNameCounter=0);e="__DO_ONCE_"+this.__methodNameCounter++;this[e]=a=>{b.detachFrom(h,e,g);delete b[e];return b[d](a)}}if(h.attachObserver(this,
e,g))return n.push(e,h),!0}return!1},detachFrom:function(h,e,g){if(h&&e&&g){var k=this.__obt;if(k&&(k=k[g])){let n=!1,b=k.length;for(;2<=b;){const d=k[--b],a=k[--b];h===d&&e===a&&h.detachObserver(this,e,g)&&(k.splice(b,2),n=!0)}return n}}return!1},detachFromAllObservables:function(){var h=this.__obt;if(h)for(const [e,g]of Object.entries(h)){for(h=g.length;2<=h;){const k=g[--h],n=g[--h];k.detachObserver(this,n,e)}g.length=0}},constrain:function(h,e){if(h&&e){const k=e.length;if(0!==k%2)v("Observables uneven",
this);else{var g;const n=(g=this.__cbmn??(this.__cbmn={}))[h]??(g[h]=[]);if(0<n.length)v("Constraint exists for "+h+" on",this);else{for(g=0;g<k;){const b=e[g++],d=e[g++];b&&d&&(this.attachTo(b,h,d),n.push(b,d))}try{this[h]()}catch(b){u(b)}}}}},releaseConstraint:function(h){if(h){var e=this.__cbmn;if(e&&(e=e[h])){let g=e.length;for(;2<=g;){const k=e[g--],n=e[g--];this.detachFrom(n,h,k)}e.length=0}}},releaseAllConstraints:function(){const h=this.__cbmn;if(h)for(const e in h)this.releaseConstraint(e)}})})(myt);
(t=>{const x=console.warn,v=t.global=new JS.Singleton("Global",{include:[t.Observable],initialize:()=>{},register:(u,h)=>{v.hasOwnProperty(u)&&(x("Global key in use",u),v.unregister(u));v[u]=h;v.fireEvent("register"+u,h)},unregister:u=>{if(v.hasOwnProperty(u)){const h=v[u];delete v[u];v.fireEvent("unregister"+u,h)}else x("Global key not in use",u)}})})(myt);
(t=>{let x;new JS.Singleton("GlobalError",{include:[t.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);t.global.register("error",x)},setConsoleLogging:v=>{x.consoleLogging=v},setStackTraceLimit:v=>{Error.stackTraceLimit=x.stackTraceLimit=v},notify:(v,u,h,e,g)=>{e??=Error(h??u);e=e.stack??e.stacktrace;x.fireEvent(u??"error",{msg:h,stacktrace:e,...g});if(x.consoleLogging&&v)console[v](e)}})})(myt);
(t=>{const x=global,v=x.getComputedStyle,u=document,h=Math.max,e=n=>{const {zIndex:b,opacity:d}=v(n);if("auto"===b){if(1===parseInt(d,10)){let a=0;n=n.childNodes;let f=n.length;for(;f;){const c=n[--f];1===c.nodeType&&(a=h(a,e(c)))}return a}return 0}return parseInt(b,10)},g=(n,b)=>{const d=[];for(;n;){d.push(n);if(n===b)break;n=n.parentNode}return d},k=t.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(n,b,d)=>{n=u.createElement(n);for(const a in d)n[a]=d[a];for(const a in b)n.style[a]=
b[a];return n},isDomElementVisible:n=>{if("INPUT"!==n.nodeName||"hidden"!==n.type)for(;n;){if(n===u)return!0;const {display:b,visibility:d}=v(n);if("none"===b||"hidden"===d)break;n=n.parentNode}return!1},getZIndexRelativeToAncestor:(n,b)=>{if(n&&b)for(n=g(n,b),b=n.length-1;b;){const d=v(n[--b]),a=d.zIndex,f="auto"===a;if(0===b||!f||1!==parseInt(d.opacity,10))return f?0:parseInt(a,10)}return 0},getAncestorArray:g,getHighestZIndex:e,getRelativePosition:(n,b)=>{if(n){let d=0,a=0;for(;n&&"BODY"!==n.nodeName&&
n!==b;)if(d+=n.offsetLeft,a+=n.offsetTop,(n=n.offsetParent)&&"BODY"!==n.nodeName){const {borderLeftWidth:f,borderTopWidth:c}=v(n);d+=parseInt(f,10)-n.scrollLeft;a+=parseInt(c,10)-n.scrollTop}return{x:d,y:a}}},getTruePosition:n=>{if(n)return n=n.getBoundingClientRect(),n.left+=x.scrollX,n.top+=x.scrollY,n},simulateDomEvent:(n,b,d)=>{if(n){const a={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(d)for(const p in d)a[p]=d[p];let c;for(const p in f)if(f[p].test(b)){c=p;break}if(!c)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(u.createEvent)d=u.createEvent(c),"HTMLEvents"===c?d.initEvent(b,a.bubbles,a.cancelable):d.initMouseEvent(b,a.bubbles,a.cancelable,u.defaultView,a.button,a.pointerX,a.pointerY,a.pointerX,a.pointerY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null),n.dispatchEvent(d);
else{a.clientX=a.pointerX;a.clientY=a.pointerY;d=u.createEventObject();for(const p in a)d[p]=a[p];n.fireEvent("on"+b,d)}}},getScrollbarSize:t.memoize(()=>{const n=u.body,b=k.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});n.appendChild(b);const d=b.offsetWidth-b.clientWidth;n.removeChild(b);return d})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(n){if(Array.isArray(n)){const [b,
d]=n;this.__oE=b;this.__iE=d;this.__iS=d.style;this.__oS=b.style;d.model=b.model=this}else this.__oE=this.__iE=n,this.__iS=this.__oS=n.style,n.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(n){this.__iE.className=this.domClass=n},addDomClass:function(n){const b=this.__iE.className;this.setDomClass((b?
b+" ":"")+n)},removeDomClass:function(n){var b=this.__iE.className;if(b){b=b.split(" ");let d=b.length;for(;d;)b[--d]===n&&b.splice(d,1);this.setDomClass(b.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(n){this.__iE.id=this.domId=n},setZIndex:function(n){this.__oS.zIndex=n},setStyleProperty:function(n,b){this.__iS[n]=b},getPagePosition:function(n){return k["get"+(n?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){k.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return e(this.__iE)},getHighestChildZIndex:function(n){const b=this.__iE.childNodes;let d=b.length,a=0;for(;d;){const f=b[--d];1===f.nodeType&&f!==n&&(a=h(a,e(f)))}return a},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(n,b){(b?this.__iE:this.__oE).scrollTop=n||0}})})(myt);
(t=>{let x;const v=h=>{for(;h.lastChild;)h=h.lastChild;return h},u=(h,e)=>{x.lastTraversalWasForward=h;let g=document.body,k=g;var n=document.activeElement;let b=k,d;const a=h?"getNextFocus":"getPrevFocus";n&&(b=k=n,(n=k.model)??(n=x.findModelForDomElement(k)),n&&(e=n.getFocusTrap(e))&&(g=e.getIDE()));for(;b;){if(b.model&&b.model[a]&&(d=b.model[a]()))b=d.getIDE();else if(h)if(b.firstChild)b=b.firstChild;else{if(b===g)return k.model;if(b.nextSibling)b=b.nextSibling;else for(;b&&(b=b.parentNode,b!==
g);)if(b.nextSibling){b=b.nextSibling;break}}else b=b===g?v(g):b.previousSibling?v(b.previousSibling):b.parentNode;if(b===k)return k.model;if(1===b.nodeType)if((n=b.model)&&n instanceof t.View){if(n.isFocusable())return n}else if(e=b.nodeName,!("A"!==e&&"AREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e&&"BUTTON"!==e||b.disabled||isNaN(b.tabIndex))&&t.DomElementProxy.isDomElementVisible(b)&&(n=x.findModelForDomElement(b),!n?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){b.focus();x.focusedDom=b;
break}}};new JS.Singleton("GlobalFocus",{include:[t.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;t.global.register("focus",x)},setFocusedView:h=>{if(x.focusedView!==h){x.prevFocusedView=x.focusedView;if(x.focusedView=h)x.focusedDom=null;x.fireEvent("focused",h)}},notifyFocus:h=>{x.focusedView!==h&&x.setFocusedView(h)},notifyBlur:h=>{x.focusedView===h&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:h=>{u(!0,h)?.focus()},prev:h=>{u(!1,h)?.focus()},findModelForDomElement:h=>{for(;h;){let e=h.model;if(e&&e instanceof t.View)return e;h=h.parentNode}}})})(myt);
(t=>{const x=JS.Module,v=t.global,u=v.focus,h=()=>({source:null,type:null,value:null}),e=c=>{c=c.value??c;return(c.target??c.srcElement).model},g=t.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:h(),getKeyFromEvent:c=>c.value.key,getCodeFromEvent:c=>c.value.code,isEnterKeyEvent:c=>c.value.code===v.keys.CODE_ENTER,isEscKeyEvent:c=>c.value.code===v.keys.CODE_ESC,isShiftKeyEvent:c=>v.keys.isShiftCode(c.value.code)},createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,
p,w,g)??this.callSuper(c,p,w)}}),k=t.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:h(),getMouseFromEvent:c=>({x:c.value.pageX,y:c.value.pageY}),getMouseFromEventRelativeToView:(c,p)=>{p=p.getPagePosition();c=k.getMouseFromEvent(c);c.x-=p.x;c.y-=p.y;return c}},createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,p,w,k,!0)??this.callSuper(c,p,w)}}),n=t.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:h(),getScrollFromEvent:c=>{const {scrollLeft:p,scrollTop:w}=e(c)?.getIDE();return{x:p,y:w}}},createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,p,w,n)??this.callSuper(c,p,w)}}),b=t.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:h()},createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,p,w,b,!1)??this.callSuper(c,p,w)}}),
d=t.FocusObservable=new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:h()},initNode:function(c,p){this.focusable=!1;this.focusIndicator=!0;this.callSuper(c,p)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(c){this.focused!==c&&(this.focused=c,this.inited&&(this.fireEvent("focused",c),c?u.notifyFocus(this):u.notifyBlur(this)))},setFocusable:function(c){if(this.focusable!==c){const p=this.focusable;(this.focusable=c)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):p&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",c)}},setFocusIndicator:function(c){this.focusIndicator!==c&&(this.focusIndicator=c,this.focused&&(c?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(u.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(c=>!0===c.maskFocus)},focus:function(c){this.isFocusable()&&this.getIDE().focus({preventScroll:c})},blur:function(){this.getIDE().blur()},__doFocus:function(c){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(c){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const c=this.getIDS();c.outlineWidth="thin";c.outlineColor="#8bf";c.outlineStyle="solid";c.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(c,p,w){if(d.EVENT_TYPES[w]){const r=this;return m=>{m??=window.event;if(r._ignoreFocus)m.cancelBubble=!0,m.stopPropagation?.(),m.preventDefault();
else{var A=d.EVENT;A.source=r;A.type=m.type;A.value=m;c[p](A)||(m.cancelBubble=!0,m.stopPropagation?.());A.source=void 0}}}return this.callSuper(c,p,w)}}),a=t.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:h()},createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,p,w,a)??this.callSuper(c,p,w)}}),f=t.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:h()},
createDomHandler:function(c,p,w){return this.createStandardDomHandler(c,p,w,f,!0)??this.callSuper(c,p,w)}});t.DomObservable=new x("DomObservable",{attachDomObserver:function(c,p,w,r,m){if(c&&p&&w){const A=this.createDomHandler(c,p,w);if(A){r=!!r;const H=this.__dobsbt??(this.__dobsbt={}),z=H[w];z?z.push(c,p,A,r):H[w]=[c,p,A,r];t.addEventListener(this.getDomElementForDomObservable(w),w,A,r,m);return!0}}return!1},getDomElementForDomObservable:function(c){return this.getIDE()},createDomHandler:(c,p,w)=>
null,createStandardDomHandler:function(c,p,w,r,m){if(r.EVENT_TYPES[w]){const A=this,H=r.EVENT;return z=>{z??=window.event;H.source=A;H.type=z.type;H.value=z;c[p](H)||(z.cancelBubble=!0,z.stopPropagation?.(),m&&z.preventDefault());H.source=void 0}}},detachDomObserver:function(c,p,w,r){if(c&&p&&w){var m=this.__dobsbt;if(m&&(m=m[w])){r=!!r;const A=this.getDomElementForDomObservable(w);let H=!1,z=m.length;for(;4<=z;){const C=m[--z],J=m[--z],M=m[--z],O=m[--z];c===O&&p===M&&r===C&&(A&&t.removeEventListener(A,
w,J,r),m.splice(z,4),H=!0)}return H}}return!1},detachAllDomObservers:function(){var c=this.__dobsbt;if(c)for(const [p,w]of Object.entries(c)){for(c=w.length+2;4<=c;){const r=w[c-=3],m=w[--c];t.removeEventListener(this.getDomElementForDomObservable(p),p,m,r)}w.length=0}}});t.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:e},attachToDom:function(c,p,w,r,m){if(c&&p&&w){r=!!r;let A;const H=(A=this.__dobt??(this.__dobt={}))[w]??(A[w]=[]);c.attachDomObserver(this,p,w,r,m)&&H.push(r,p,c)}},
detachFromDom:function(c,p,w,r){if(c&&p&&w){var m=this.__dobt;if(m&&(m=m[w])){r=!!r;let A=!1,H=m.length;for(;3<=H;){const z=m[--H],C=m[--H],J=m[--H];c===z&&p===C&&r===J&&c.detachDomObserver(this,p,w,r)&&(m.splice(H,3),A=!0)}return A}}return!1},detachFromAllDomSources:function(){var c=this.__dobt;if(c)for(const [p,w]of Object.entries(c)){for(c=w.length;3<=c;){const r=w[--c],m=w[--c],A=w[--c];r.detachDomObserver(this,m,p,A)}w.length=0}}})})(myt);
(t=>{let x;const {KeyObservable:v,global:u}=t,h=u.focus,e=v.getCodeFromEvent,g=new Set,k="Firefox"===BrowserDetect.browser,n=k?"OSLeft":"MetaLeft",b=k?"OSRight":"MetaRight",d=()=>g.has("ShiftLeft")||g.has("ShiftRight"),a=()=>g.has("ControlLeft")||g.has("ControlRight"),f=()=>g.has("AltLeft")||g.has("AltRight"),c=()=>g.has(n)||g.has(b),p=(r,m)=>{switch(r){case "Backspace":return r=m.nodeName,!("TEXTAREA"===r||"INPUT"===r&&("text"===m.type||"number"===m.type||"password"===m.type)||"DIV"===r&&"true"===
m.contentEditable&&m.firstChild);case "Tab":return!0}return!1},w=(r,m)=>{for(const A of["keydown","keypress","keyup"])x[m](r,"__hndl_"+A,A)};new JS.Singleton("GlobalKeys",{include:[t.DomElementProxy,t.DomObservable,t.DomObserver,v,t.Observable,t.Observer],initialize:function(){u.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const r of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+r]="Key"+r;for(const r of"1234567890".split(""))x["CODE_"+r]="Digit"+r;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(h,"__hndl_focused","focused");w(x,"attachToDom");global.onblur=()=>{g.clear()}},isShiftKeyDown:d,isControlKeyDown:a,isAltKeyDown:f,isMetaKeyDown:c,isShiftCode:r=>
"ShiftLeft"===r||"ShiftRight"===r,isControlCode:r=>"ControlLeft"===r||"ControlRight"===r,isAltCode:r=>"AltLeft"===r||"AltRight"===r,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?c():a(),ignoreFocusTrap:()=>f(),__hndl_focused:r=>{(r=r.value)?(w(x,"detachFromDom"),w(r,"attachToDom")):((r=h.prevFocusedView)&&w(r,"detachFromDom"),w(x,"attachToDom"))},__hndl_keydown:r=>{const m=e(r);r=r.value;p(m,r.target)&&r.preventDefault();c()&&"ShiftLeft"!==m&&"ShiftRight"!==m&&"ControlLeft"!==m&&"ControlRight"!==
m&&"AltLeft"!==m&&"AltRight"!==m?(x.fireEvent("keydown",m),x.fireEvent("keyup",m)):(g.add(m),"Tab"===m&&(r=f(),d()?h.prev(r):h.next(r)),x.fireEvent("keydown",m))},__hndl_keypress:r=>{x.fireEvent("keypress",e(r))},__hndl_keyup:r=>{const m=e(r);r=r.value;p(m,r.target)&&r.preventDefault();g.delete(m);x.fireEvent("keyup",m)}})})(myt);
(t=>{const x=JS.Module,v=Math.max,u=(b,d,a,f,c=0)=>{const p=b.length;for(let w=a;c<p;c++)k(b[c],d,w),f&&(w+=a)},h=(b,d,a,f=0)=>{const c=b.length;for(let p=d;f<c;)b[f++].crossPos+=p,a&&(p+=d)},e=(b,d,a,f)=>{var c=b[d?"setWidthViaFlex":"setHeightViaFlex"];d=f?d?b.getFlexBasisWidth():b.getFlexBasisHeight():0;c.call(b,d+a)},g=(b,d,a)=>{b[d?"setXViaFlex":"setYViaFlex"](a,!1)},k=(b,d,a)=>{b[d?"setXViaFlex":"setYViaFlex"](a,!0)},n=(b,d,a)=>{b[d]!==a&&(b[d]=a,b.inited&&b.fireEvent(d,a),b.updateFlexboxLayout())};
t.FlexboxSupport=new x("FlexboxSupport",{initNode:function(b,d){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(b,d);this.updateFlexboxLayout()},setWidth:function(b){const d=this.width;this.callSuper(b);d!==this.width&&this.updateFlexboxLayout()},setHeight:function(b){const d=this.height;this.callSuper(b);d!==this.height&&this.updateFlexboxLayout()},
setDirection:function(b){n(this,"direction",b)},setWrap:function(b){n(this,"wrap",b)},setJustifyContent:function(b){n(this,"justifyContent",b)},setAlignItems:function(b){n(this,"alignItems",b)},setAlignContent:function(b){n(this,"alignContent",b)},setRowGap:function(b){n(this,"rowGap",v(0,b))},setColumnGap:function(b){n(this,"columnGap",v(0,b))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(b){this.set("totalBasisWidth",
b,!0)},setTotalBasisHeight:function(b){this.set("totalBasisHeight",b,!0)},ignoreSubviewForFlex:function(b){return b&&"function"===typeof b.ignoreFlex?b.ignoreFlex():!0},setFlexboxPaused:function(b,d){this.__flexboxPaused!==b&&((this.__flexboxPaused=b)||d||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(b){this.callSuper(b);b&&!this.ignoreSubviewForFlex(b)&&this.updateFlexboxLayout()},subviewRemoved:function(b){this.callSuper(b);!b||this.ignoreSubviewForFlex(b)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(b){this.callSuper(b);b&&this.ignoreSubviewForFlex(b)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(b){return b?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(b){return b?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(b){this._updateAgain=b},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const b=this;if(b.isOKToUpdateLayout()){var d=b.getSubviewsInLexicalOrder().filter(z=>!0!==b.ignoreSubviewForFlex(z)&&!0===z.visible);const H=d.length;if(0<H){b.__isUpdatingFlexboxLayout=!0;var a=b.direction;const z=a.startsWith("row"),C=!z;var f=b.getWidthForFlexboxLayout(),c=b.getHeightForFlexboxLayout();const J=z?b.columnGap:b.rowGap,M=z?f:c;var p=z?b.rowGap:
b.columnGap;const O=z?c:f,l=b.isWrapNotAllowed();f=b.justifyContent;c=b.alignItems;var w=l?"stretch":b.alignContent;a.endsWith("Reverse")&&d.reverse();let q=0,y=0,B=0,E=0,F={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:B,crossSize:0};a=[F];for(let K=0;K<H;){const L=d[K++],R=z?L.getFlexBasisWidth():L.getFlexBasisHeight(),N=L.getShrink(),T=L.getGrow();!l&&0<F.items.length&&q+(0===E?0:J)+R>M&&(F.extraSize=M-q,B+=F.crossSize+p,y=v(y,q),E=q=0,F={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:B,crossSize:0},a.push(F));0!==E&&(q+=J);0<N&&0<R&&(F.shrinkCount+=N,F.shrinkBasis+=R*N);0<T&&(F.growCount+=T);F.crossSize=v(F.crossSize,C?L.getFlexBasisWidth():L.getFlexBasisHeight());g(L,z,q);e(L,z,R);q+=R;F.items.push(L);E++}F.extraSize=M-q;B+=F.crossSize;y=v(y,q);if(b.isCompactOnMainAxis(z)&&(d=a.reduce((K,L)=>null==K?L.extraSize:Math.min(K,L.extraSize),null),0!==d))for(var r of a)r.extraSize-=d;b[z?"setTotalBasisWidth":"setTotalBasisHeight"](y);b[z?"setTotalBasisHeight":
"setTotalBasisWidth"](B);r=a.length;if(1<r&&"wrapReverse"===b.wrap){for(var m of a)m.crossPos=B-(m.crossPos+m.crossSize);a.reverse()}if(!b.isCompactOnCrossAxis(z))switch(m=O-B,w){default:case "start":break;case "end":h(a,m,!1);break;case "center":h(a,m/2,!1);break;case "spaceBetween":1<r&&h(a,m/(r-1),!0,1);break;case "spaceAround":m<=p?h(a,m/2,!1):(h(a,p/2,!1),m-=p,h(a,m/(2*r),!0),h(a,m/(2*r),!0,1));break;case "spaceEvenly":m<=2*p?h(a,m/2,!1):(h(a,p,!1),h(a,(m-2*p)/(r+1),!0));break;case "stretch":p=
m/r;m=0;for(var A of a)A.crossSize+=p,A.crossPos+=m,m+=p}for(const K of a){A=K.items;p=K.extraSize;if(0<p)if(0<K.growCount){p/=K.growCount;a=0;for(const N of A)0<a&&k(N,z,a),m=N.getGrow()*p,0<m&&(e(N,z,m,!0),a+=m)}else switch(a=A.length,f){default:case "start":break;case "end":u(A,z,p,!1);break;case "center":u(A,z,p/2,!1);break;case "spaceBetween":1<a&&u(A,z,p/(a-1),!0,1);break;case "spaceAround":p<=J?u(A,z,p/2,!1):(u(A,z,J/2,!1),p-=J,u(A,z,p/(2*a),!0),u(A,z,p/(2*a),!0,1));break;case "spaceEvenly":p<=
2*J?u(A,z,p/2,!1):(u(A,z,J,!1),p-=2*J,u(A,z,p/(a+1),!0))}else if(0>p&&0<K.shrinkCount){a=K.shrinkBasis;m=0;for(const N of A)0>m&&k(N,z,m),w=N.getShrink()*(z?N.getFlexBasisWidth():N.getFlexBasisHeight())/a*v(p,-a),0>w&&(e(N,z,w,!0),m+=w)}p=!1;const {crossSize:L,crossPos:R}=K;for(const N of A)switch(N.getAlignSelf()||c){case "start":g(N,C,R);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "end":g(N,C,R+L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()));e(N,C,C?N.getFlexBasisWidth():
N.getFlexBasisHeight(),!1);break;case "center":g(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "baseline":p=!0;g(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2+N.getFlexBaselineOffset(z));e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;default:g(N,C,R),e(N,C,L,!1)}p&&b.updateFlexboxLayoutBaselineAdjustment(A,z,R)}b.__isUpdatingFlexboxLayout=!1;b.isUpdateAgain()&&!b.__UPDATE_AGAIN_LOOP_PROTECTION&&
(b.setUpdateAgain(!1),b.__UPDATE_AGAIN_LOOP_PROTECTION=!0,b.updateFlexboxLayout(),b.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else b.setTotalBasisWidth(0),b.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(b,d,a)=>{}});t.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(b){this.visible!==b&&(this.callSuper(b),this.updateFlexboxLayoutFromChild())},setXViaFlex(b,d){d&&(b+=this.x);this.x!==b&&(this.__isFlexUpdate=!0,this.setX(b),this.__isFlexUpdate=!1)},setYViaFlex(b,d){d&&
(b+=this.y);this.y!==b&&(this.__isFlexUpdate=!0,this.setY(b),this.__isFlexUpdate=!1)},setWidth:function(b){const d=this.width!==b;d&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(b);d&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(b){this.width!==b&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(b),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(b){const d=this.height!==b;
d&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(b);d&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(b){this.height!==b&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(b),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:b=>0,setIgnoreFlex:function(b){this.__ignoreFlex!==b&&(this.__ignoreFlex=b,this.inited&&(this.fireEvent("ignoreFlex",b),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(b){b=v(0,b);this.grow!==b&&(this.grow=b,this.inited&&(this.fireEvent("grow",b),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(b){b=v(0,b);this.shrink!==b&&(this.shrink=b,this.inited&&(this.fireEvent("shrink",b),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(b){this.alignSelf!==b&&(this.alignSelf=
b,this.inited&&(this.fireEvent("alignSelf",b),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const b=this.alignSelf;return"auto"===b||""===b?null:b},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(t=>{const x=console.log,v=new Map,u=new Map,h=(d,a)=>a+d.charAt(0).toUpperCase()+d.slice(1),e=d=>u.get(d)??(u.set(d,h(d,"set")),u.get(d)),g=d=>v.get(d)??(v.set(d,h(d,"get")),v.get(d)),k=(d,a)=>{let f;for(const c in a){const p=a[c],w=e(c);if(w in d)d[w](p);else d[c]!==p&&(d[c]=p,(f??=!1!==d.inited&&d.fireEvent)&&d.fireEvent(c,p))}},n=(d,a)=>{const f=g(a);d[f]&&x("Overwriting getter",f);d[f]=function(){return this[a]}},b=(d,a)=>{const f=e(a);d[f]&&x("Overwriting setter",f);d[f]=function(c){this[a]!==
c&&(this[a]=c,this.inited&&this.fireEvent(a,c))}};t.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:e,generateGetterName:g,generateName:h,createSetterFunction:b,createGetterFunction:n,createSetterMixin:(d,a)=>{const f={};for(const c of d)b(f,c),a&&n(f,c);return f}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(d,a){if(d)for(const f of d)this[f]=a[f],delete a[f]},callSetters:function(d){var a=this.earlyAttrs,f=this.lateAttrs;if(a||f){d={...d};if(a){var c=a.length;for(var p=0;p<c;){const r=a[p++];r in d&&(this.set(r,d[r]),delete d[r])}}let w;if(f)for(w=[],a=f.length,c=0;c<a;)p=f[c++],p in d&&(w.push(p,d[p]),delete d[p]);k(this,d);if(w)for(f=w.length,d=0;d<f;)this.set(w[d++],
w[d++])}else k(this,d)},get:function(d){const a=g(d);return"function"===typeof this[a]?this[a]():this[d]},set:function(d,a,f){if(!f&&(f=e(d),"function"===typeof this[f]))return this[f](a);this[d]!==a&&(this[d]=a,!1!==this.inited&&this?.fireEvent(d,a))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{const t=this.__meta__;if(t)for(const x of Object.keys(t))t[x]=null;for(const x of Object.keys(this))this[x]=null;this.destroyed=!0}}});
(t=>{const {Class:x,Module:v}=JS,u=console.warn;let h;const e=(f,c)=>c?(h=f).__op??(h.__op=[]):f.__op;let g;const k=(f,c)=>c?(g=f).__actives??(g.__actives=[]):f.__actives,n=new x("AbstractPool",{include:[t.Destructible],initialize:()=>{},destroy:function(){const f=e(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=e(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){e(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=e(this);if(f){let c=f.length;for(;c;){const p=f[--c];"function"===typeof p.destroy&&p.destroy()}f.length=0}}}),b=t.SimplePool=new x("SimplePool",n,{initialize:function(f,c){this.callSuper();this.instanceClass=f??Object;this.instanceParent=c},createInstance:function(f){var c=this.instanceParent,p=this.instanceClass;return c?new p(c,f):new p}}),d=new v("TrackActives",{destroy:function(){const f=
k(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();k(this,!0).push(f);return f},putInstance:function(f){var c=k(this);if(c){const p=c.indexOf(f);if(-1<p){c.splice(p,1);this.callSuper(f);return}c="inactive"}else c="missing";u("Tried to put a "+c+" instance",f,this)},getActives:function(f){const c=k(this);if(c){if(f){const p=[],w=c.length;for(let r=0;w>r;){const m=c[r++];f.call(this,m)&&p.push(m)}return p}return c.slice()}return[]},putActives:function(){const f=
k(this);if(f){let c=f.length;for(;c;)this.putInstance(f[--c])}}}),a=t.TrackActivesPool=new x("TrackActivesPool",b,{include:[d]});t.TrackActivesMultiPool=new x("TrackActivesMultiPool",n,{initialize:function(f,c){this.callSuper();this.instanceClassesByKey=f;const p=this._poolsByClassName={},w=this.__pbk={};for(const r in f){const m=f[r];w[r]=p[m.__displayName]=new a(m,c)}},destroy:function(){const f=this.__pbk;for(const c in f)f[c].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],
c=this.__pbk[f];if(c)return c.getInstance(arguments);u("No pool for key",f)},putInstance:function(f){const c=this._poolsByClassName[f.klass.__displayName];c?c.putInstance(f):u("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const c in f)f[c].destroyPooledInstances()},getActives:function(f){let c=[];const p=this.__pbk;for(const w in p)c.push(...p[w].getActives(f));return c},putActives:function(){const f=this.__pbk;for(const c in f)f[c].putActives()}});t.Reusable=new v("Reusable",
{clean:()=>{}})})(myt);
(t=>{const x=JS.Class,v=console.warn,u=[t.AccessorSupport,t.Destructible,t.Observable,t.Observer],h=(a,f)=>{if(f){const c=f.length;for(let p=0,w;c>p;)(w=f[p++])?a.extend(w):v("Missing mixin in",a.klass.__displayName)}a.inited=!1},e=(a,f)=>{if(f)for(;a;){if(f(a))return a;a=a.parent}},g=(a,f)=>{const c=f.name;void 0===a[c]?a[c]=f:v("Name in use",c)},k=(a,f)=>{const c=f.name;a[c]===f?delete a[c]:v("Name not in use",c)};let n;const b=a=>(n=a).__animPool??(n.__animPool=new t.TrackActivesPool(t.Animator,a));
let d;t.Eventable=new x("Eventable",{include:u,initialize:function(a,f){h(this,f);this.init(a??{})},init:function(a){this.callSetters(a);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});t.Node=new x("Node",{include:u,extend:{getMatchingAncestorOrSelf:e,getMatchingAncestor:(a,f)=>e(a?a.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(a,f,c){h(this,c);this.initNode(a,f??{})},initNode:function(a,f){this.callSetters(f);
this.setParent(a);this.inited=!0},destroy:function(){const a=this.subnodes;this.isBeingDestroyed=!0;if(a)for(let f=a.length;0<f;)a[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=
a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(a){if(a&&!this.ignorePlacement){var f=this.placement??a.defaultPlacement;f&&(a=a.determinePlacement(f,this))}if(this.parent!==a&&!a?.destroyed){if(f=this.parent){const c=f.getSubnodes().indexOf(this);-1<c&&(this.name&&k(f,this),f.subnodes.splice(c,1),f.subnodeRemoved(this))}if(this.parent=a)a.getSubnodes().push(this),this.name&&g(a,this),a.subnodeAdded(this);this.inited&&this.fireEvent("parent",a)}},setName:function(a){if(this.name!==
a){const f=this.parent;f&&this.name&&k(f,this);this.name=a;f&&a&&g(f,this)}},determinePlacement:function(a,f){let c=a.indexOf("."),p;0<=c&&(p=a.slice(c+1),a=a.slice(0,c));"*"===a&&(a=this.defaultPlacement)&&(c=a.indexOf("."),0<=c&&(p=a.slice(c+1)+(p?"."+p:""),a=a.slice(0,c)));return(a=this[a])?p?a.determinePlacement(p,f):a:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(a){if(a){if(a===this)return!0;if(this.parent)return this.getIDE&&
a.getIDE?a.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(a)}return!1},isAncestorOf:function(a){return a?a.isDescendantOf(this):!1},getLeastCommonAncestor:function(a){for(;a;){if(this.isDescendantOf(a))return a;a=a.parent}},searchAncestorsForClass:function(a){if(a)return this.searchAncestors(f=>f instanceof a)},searchAncestorsForModule:function(a){if(a)return this.searchAncestors(f=>f.isA(a))},searchAncestors:function(a){return e(this?this.parent:null,a)},searchAncestorsOrSelf:function(a){return e(this,
a)},getAncestors:function(){const a=[];let f=this;for(;f;)a.push(f),f=f.parent;return a},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:a=>{},subnodeRemoved:a=>{},animate:function(a){if(a){const f=b(this),c=f.getInstance({ignorePlacement:!0}),p=a.callback;delete a.callback;c.callSetters(a);c.next(w=>{f.putInstance(c)});p&&c.next(p);c.setRunning(!0);return c}},getActiveAnimators:function(a){if("string"===typeof a){const f=a;a=c=>c.attribute===f}return b(this).getActives(a)},
stopActiveAnimators:function(a,f=!1){a=this.getActiveAnimators(a);let c=a.length;if(0<c){const p=b(this);for(;c;){const w=a[--c];w.reset(f);f||p.putInstance(w)}}},doOnceOnIdle:function(a){this.attachTo(t.global.idle,a,"idle",!0)},addRef:function(a,f){return((d=this).__REFS??(d.__REFS={}))[a]=f},getRef:function(a){return((d=this).__REFS??(d.__REFS={}))[a]},removeRef:function(a){const f=(d=this).__REFS??(d.__REFS={}),c=f[a];delete f[a];return c}})})(myt);
(t=>{let x=0,v=!1;const u=JS.Class,h=[],e=a=>{if(v!==a&&(v=a,!a)){for(a=h.length;a;){const f=h[--a];f.__deferredLayout=!1;f.update()}h.length=0}},g=(a,f,c,p)=>{const w=a.getSubviewIndex(f),r=a.subviews;-1<w&&(a=a.getSubviewIndex(c),r.splice(w,1),-1<a?(w<a&&--a,r.splice(a+(p?1:0),0,f)):p?r.push(f):r.unshift(f))},k=(a,f,c)=>{a[f]!==c&&(a[f]=c,a.inited&&(a.fireEvent(f,c),a.update()))},n=t.Layout=new u("Layout",t.Node,{extend:{incrementGlobalLock:()=>{1===++x&&e(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&e(!1)}},initNode:function(a,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const c=!0===f.locked;delete f.locked;this.callSuper(a,f);c||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(a){var f=this.parent;if(f!==a){const w=!this.locked;w&&(this.locked=!0);if(f){for(var c=this.subviews,p=c.length;p;)this.removeSubview(c[--p]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(a);
if(a=this.parent){f=a.getSubviews();c=f.length;for(p=0;c>p;)this.addSubview(f[p++]);this.attachTo(a,"__hndlPSA","subviewAdded");this.attachTo(a,"__hndlPSR","subviewRemoved")}w&&(this.locked=!1,this.inited&&a&&this.update())}},canUpdate:function(){return v?(this.__deferredLayout||(h.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(a){return this.subviews.includes(a)},getSubviewIndex:function(a){return this.subviews.indexOf(a)},addSubview:function(a){this.ignore(a)||
(this.subviews.push(a),this.startMonitoringSubview(a),this.locked||this.update())},startMonitoringSubview:a=>{},startMonitoringAllSubviews:function(){const a=this.subviews;let f=a.length;for(;f;)this.startMonitoringSubview(a[--f])},removeSubview:function(a){if(this.ignore(a))return-1;const f=this.getSubviewIndex(a);-1<f&&(this.stopMonitoringSubview(a),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:a=>{},stopMonitoringAllSubviews:function(){const a=this.subviews;
let f=a.length;for(;f;)this.stopMonitoringSubview(a[--f])},ignore:a=>a.ignoreLayout,__hndlPSA:function(a){a=a.value;a.parent===this.parent&&this.addSubview(a)},__hndlPSR:function(a){a=a.value;a.parent===this.parent&&this.removeSubview(a)},sortSubviews:function(a){this.subviews.sort(a)},moveSubviewBefore:function(a,f){g(this,a,f,!1)},moveSubviewAfter:function(a,f){g(this,a,f,!0)}});var b=t.ConstantLayout=new u("ConstantLayout",n,{setTargetAttrName:function(a){this.setterName=t.AccessorSupport.generateSetterName(a);
k(this,"targetAttrName",a)},setTargetValue:function(a){k(this,"targetValue",a)},update:function(){if(this.canUpdate()){const a=this.setterName,f=this.targetValue,c=this.subviews,p=c.length;if(a)for(let w=0;p>w;)c[w++][a](f)}}});b=t.VariableLayout=new u("VariableLayout",b,{initNode:function(a,f){this.collapseParent=this.reverse=!1;this.callSuper(a,f)},setCollapseParent:function(a){k(this,"collapseParent",a)},setReverse:function(a){k(this,"reverse",a)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,c=this.subviews;var a=c.length;let p=this.targetValue,w,r=0;if(this.reverse)for(w=a;w;)a=c[--w],this.skipSubview(a)||(p=this.updateSubview(++r,a,f,p));else for(w=0;a>w;){const m=c[w++];this.skipSubview(m)||(p=this.updateSubview(++r,m,f,p))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,p);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(a){this.attachTo(a,
"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update","visible")},updateSubview:(a,f,c,p)=>{f[c](p);return p},skipSubview:a=>!a.visible,updateParent:(a,f)=>{}});const d=t.SpacedLayout=new u("SpacedLayout",b,{initNode:function(a,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(a,f)},setTargetAttrName:function(a){if(this.targetAttrName!==
a){const f="y"===a,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(a)}},setNoAddSubviewOptimization:function(a){this.noAddSubviewOptimization=a},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){k(this,"spacing",a)},setOutset:function(a){k(this,
"outset",a)},addSubview:function(a){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(a);this.locked=f},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},updateSubview:function(a,f,c,p){a=f[this.measureAttrName];f[c](p+(a-f[this.measureAttrBaseName])/2);return p+a+this.spacing},updateParent:function(a,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});t.ResizeLayout=new u("ResizeLayout",d,{setCollapseParent:a=>{},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(this.inited){const f="x"===a;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(a)}},setParent:function(a){if(this.parent!==a){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(a);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(a){this.attachTo(this.parent,
"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},doBeforeUpdate:function(){const a=this.measureAttrName,f=this.subviews;let c=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,p=f.length,w=0,r=0;for(;p;){const m=f[--p];this.skipSubview(m)||(++w,0<m.layoutHint?r+=m.layoutHint:c-=m[a])}0!==w&&(this.remainder=c-=(w-1)*this.spacing,this.resizeSum=r,this.scalingFactor=c/r,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===a?
"setWidth":"setHeight")},updateSubview:function(a,f,c,p){var w=f.layoutHint;0<w&&(this.resizeSumUsed+=w,w=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(w*this.scalingFactor),this.remainderUsed+=w,f[this.measureSetter](w));return this.callSuper(a,f,c,p)},startMonitoringSubview:function(a){0<a.layoutHint||this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){0<a.layoutHint||this.detachFrom(a,"update",
this.measureAttrName);this.detachFrom(a,"update","visible")},updateParent:(a,f)=>{}});t.AlignedLayout=new u("AlignedLayout",b,{initNode:function(a,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(a,f)},setTargetAttrName:function(a){if(this.targetAttrName!==a){const f="y"===a,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(a)}},setAlign:function(a){if(this.align!==a){this.align=a;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===a||"bottom"===a||"top"===a?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",a),this.update())}},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},
stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},doBeforeUpdate:function(){const a=this.measureAttrName,f=this.subviews;let c=0,p=f.length;for(;p;){const w=f[--p];this.skipSubview(w)||(c=c>w[a]?c:w[a])}this.setTargetValue(c)},updateSubview:function(a,f,c,p){switch(this.align){case "center":case "middle":f[c]((p-f[this.measureAttrName])/2);break;case "right":case "bottom":f[c](p-f[this.measureAttrName]);break;default:f[c](0)}return p},updateParent:function(a,
f){this.parent[this.parentSetterName](f)}});t.WrappingLayout=new u("WrappingLayout",b,{initNode:function(a,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(a,f)},
setTargetAttrName:function(a){if(this.targetAttrName!==a){const f="y"===a,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const p=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const w=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";c&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(w),this.startMonitoringParent(p));
this.callSuper(a)}},setParent:function(a){if(this.parent!==a){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(a);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){k(this,"spacing",a)},setOutset:function(a){k(this,"outset",a)},setLineSpacing:function(a){k(this,"lineSpacing",a)},setLineInset:function(a){k(this,
"lineInset",a)},setLineOutset:function(a){k(this,"lineOutset",a)},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update",this.otherMeasureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update",this.otherMeasureAttrName);
this.callSuper(a)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(a,f,c,p){a=f[this.measureAttrName];const w=f[this.otherMeasureAttrName];p+a>this.parentSizeLessOutset||"break"===f.layoutHint?(p=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=w,++this.lineCount):w>this.lineSize&&(this.lineSize=w);f[this.otherSetterName](this.linePos+
(w-f[this.otherMeasureAttrBaseName])/2);f[c](p+(a-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,p+a+this.outset);return p+a+this.spacing},updateParent:function(a,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});t.createFixedThresholdCounter(n,1,"locked")})(myt);
(t=>{const x=Math.round,v=t.DomElementProxy,u=t.Geometry.rectContainsPoint,h=(c,p)=>{const w=t.global.focus.focusedView,r=c.getIDE();if(w===c||w?.isDescendantOf(c))w._ignoreFocus=!0;const {scrollTop:m,scrollLeft:A}=r;p();w&&(w._ignoreFocus=!1,w.focus(!0));r.scrollTop=m;r.scrollLeft=A},e=(c,p,w)=>{const r=c.getODE(),m=r.parentNode;if(m){const A=()=>{const H=r.nextElementSibling;m.removeChild(r);p();m.insertBefore(r,H)};w?h(c,A):A()}else p()},g=(c,p,w,r)=>{if(p&&"object"===typeof p){if(r){var m=c.getLeastCommonAncestor(p)?.getIDE();
if(m){const A=v.getZIndexRelativeToAncestor,H=w?-1:1;r=H*A(c.getODE(),m);m=H*A(p.getODE(),m);if(r<m)return!0;if(m<r)return!1}}c=c.getODE().compareDocumentPosition(p.getODE());return w?2===c||10===c:4===c||20===c}return!1},k=c=>{c=c.getAncestors();let p=c.length,w=1,r=1;for(;p;){const m=c[--p];w*=m.scaleX||1;r*=m.scaleY||1;m.__effectiveScaleX=w;m.__effectiveScaleY=r}return{scaleX:w,scaleY:r}},n=(c,p,w)=>{const r=c.getODE();if(u(p,w,0,0,r.offsetWidth*c.__effectiveScaleX,r.offsetHeight*c.__effectiveScaleY)){if(c=
c.parent){const m=c.getIDE();return n(c,p+(r.offsetLeft-m.scrollLeft)*c.__effectiveScaleX,w+(r.offsetTop-m.scrollTop)*c.__effectiveScaleY)}return!0}return!1},b=c=>{switch(c.align){case "center":c.releaseConstraint("__doAlignCenter");break;case "right":c.releaseConstraint("__doAlignRight")}},d=c=>{const p=c.parent;if(p)switch(c.align){case "center":c.constrain("__doAlignCenter",[c,"width",c,"alignOffset",p,"width"]);break;case "right":c.constrain("__doAlignRight",[c,"width",c,"alignOffset",p,"width"]);
break;case "left":c.setX(c.alignOffset||0)}},a=c=>{switch(c.valign){case "middle":c.releaseConstraint("__doValignMiddle");break;case "bottom":c.releaseConstraint("__doValignBottom")}},f=c=>{const p=c.parent;if(p)switch(c.valign){case "middle":c.constrain("__doValignMiddle",[c,"height",c,"valignOffset",p,"height"]);break;case "bottom":c.constrain("__doValignBottom",[c,"height",c,"valignOffset",p,"height"]);break;case "top":c.setY(c.valignOffset||0)}};t.View=new JS.Class("View",t.Node,{include:[v,t.DomObservable,
t.DomObserver,t.ScrollObservable,t.FocusObservable,t.KeyObservable,t.MouseObservable],extend:{retainFocusDuringDomUpdate:h,doWhileRemovedFromDom:e},initNode:function(c,p){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;p.tagName&&(this.tagName=p.tagName,delete p.tagName);this.setDomElement(this.createOurDomElement(c));const w=this.getODS();w.left=w.top="0px";this.callSuper(c,p);this.__updateBounds(this.width,this.height)},createOurDomElement:function(c){c=document.createElement(this.tagName??
"div");c.style.position="absolute";let p;c.className=(p=this.klass).__cssClassName??(p.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return c},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(c){this.parent!==c&&(this.inited&&(b(this),a(this)),this.callSuper(c),this.align&&d(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const c=[],p=this.getIDE().children,w=p.length;for(let r=0;r<w;){const m=p[r++].model;m?.parent===this&&c.push(m)}return c},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(c=>c!==this)},setFocusTrap:function(c){this.focusTrap=c},setFocusCage:function(c){this.focusCage=c},setMaskFocus:function(c){this.maskFocus=c},setLayoutHint:function(c){this.layoutHint=c},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(c){if(this.ignoreLayout!==c){var p=this.inited&&this.parent;let w;if(c){if(p)for(p=this.parent.getLayouts(),w=p.length;w;)p[--w].removeSubview(this);this.ignoreLayout=c}else if(this.ignoreLayout=c,p)for(p=this.parent.getLayouts(),w=p.length;w;)p[--w].addSubview(this)}},setDomClass:function(c){this.domClass!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domClass",c))},setDomId:function(c){this.domId!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domId",c))},setAlignOffset:function(c){this.alignOffset!==
c&&(this.alignOffset=c,this.inited&&this.fireEvent("alignOffset",c),this.parent&&"left"===this.align&&this.setX(c))},setAlign:function(c){this.align!==c&&(this.inited&&b(this),this.align=c,this.inited&&(this.fireEvent("align",c),d(this)))},__doAlignCenter:function(c){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(c){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(c){this.valignOffset!==c&&(this.valignOffset=c,this.inited&&
this.fireEvent("valignOffset",c),this.parent&&"top"===this.valign&&this.setY(c))},setValign:function(c){this.valign!==c&&(this.inited&&a(this),this.valign=c,this.inited&&(this.fireEvent("valign",c),f(this)))},__doValignMiddle:function(c){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(c){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(c){this.x!==c&&(this.x=c,this.visible&&(this.getODS().left=c+"px"),this.inited&&this.fireEvent("x",
c))},setY:function(c){this.y!==c&&(this.y=c,this.visible&&(this.getODS().top=c+"px"),this.inited&&this.fireEvent("y",c))},setWidth:function(c){0>c&&(c=0);this.width!==c&&(this.width=c,this.getODS().width=c+"px",this.inited&&(this.__updateBounds(c,this.height),this.fireEvent("width",c)))},setHeight:function(c){0>c&&(c=0);this.height!==c&&(this.height=c,this.getODS().height=c+"px",this.inited&&(this.__updateBounds(this.width,c),this.fireEvent("height",c)))},setDomMinWidth:function(c,p){(p?this.getIDS():
this.getODS()).minWidth=null!=c?c+"px":null},getDomMinWidth:function(c){c=(c?this.getIDS():this.getODS()).minWidth;return null!=c?Number.parseInt(c):null},setDomMinHeight:function(c,p){(p?this.getIDS():this.getODS()).minHeight=null!=c?c+"px":null},getDomMinHeight:function(c){c=(c?this.getIDS():this.getODS()).minHeight;return null!=c?Number.parseInt(c):null},setTextColor:function(c){this.textColor!==c&&(this.textColor=c,this.getODS().color=c||"inherit",this.inited&&this.fireEvent("textColor",c))},
setBgColor:function(c){this.bgColor!==c&&(this.getODS().backgroundColor=this.bgColor=c,this.inited&&this.fireEvent("bgColor",c))},isColorAttr:c=>"bgColor"===c||"textColor"===c,setOpacity:function(c){this.opacity!==c&&(this.getODS().opacity=this.opacity=c,this.inited&&this.fireEvent("opacity",c))},setOverflow:function(c){const p=this.overflow;if(p!==c){this.overflow=c;const w=this.getIDS();if("autox"===c)w.overflowX="auto",w.overflowY="hidden";else if("autoy"===c)w.overflowY="auto",w.overflowX="hidden";
else{if("autox"===p||"autoy"===p)w.overflowX=w.overflowY=null;w.overflow=c||"visible"}this.inited&&this.fireEvent("overflow",c)}},setVisible:function(c){if(this.visible!==c){this.visible=c;const p=this.getODS();p.visibility=c?"inherit":"hidden";p.left=c?this.x+"px":"-100000px";p.top=c?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",c)}},setPointerEvents:function(c){this.pointerEvents!==c&&(this.pointerEvents=c,this.getODS().pointerEvents=c||"auto",this.inited&&this.fireEvent("pointerEvents",
c))},setCursor:function(c){this.cursor!==c&&(this.cursor=c,this.getODS().cursor=c||"auto",this.inited&&this.fireEvent("cursor",c))},__updateBounds:function(c,p){this.boundsWidth!==c&&this.fireEvent("boundsWidth",this.boundsWidth=c);this.boundsHeight!==p&&this.fireEvent("boundsHeight",this.boundsHeight=p)},setOutline:function(c){const [p,w,r]=c??[];this.setOutlineWidth(p);this.setOutlineStyle(w);this.setOutlineColor(r)},setOutlineWidth:function(c){this.getODS().outlineWidth=(this.outlineWidth=c||0)+
"px"},setOutlineStyle:function(c){this.getODS().outlineStyle=this.outlineStyle=c||"none"},setOutlineColor:function(c){this.getODS().outlineColor=this.outlineColor=c||"#000"},setBorder:function(c){const [p,w,r]=c??[];this.setBorderWidth(p);this.setBorderStyle(w);this.setBorderColor(r)},setBorderWidth:function(c){this.getODS().borderWidth=(this.borderWidth=c||0)+"px"},setBorderStyle:function(c){this.getODS().borderStyle=this.borderStyle=c||"none"},setBorderColor:function(c){this.getODS().borderColor=
this.borderColor=c||"#000"},setRoundedCorners:function(c){this.getODS().borderRadius=c+"px"},setRoundedTopLeftCorner:function(c){this.getODS().borderTopLeftRadius=c+"px"},setRoundedTopRightCorner:function(c){this.getODS().borderTopRightRadius=c+"px"},setRoundedBottomLeftCorner:function(c){this.getODS().borderBottomLeftRadius=c+"px"},setRoundedBottomRightCorner:function(c){this.getODS().borderBottomRightRadius=c+"px"},setBoxShadow:function(c){const [p,w,r,m]=c??[];this.getODS().boxShadow=c?(p||0)+
"px "+(w||0)+"px "+(r||7)+"px "+(m||"#000"):"none"},setGradient:function(c){const p=this.getODS();if(c){let r=c[0];"linear"===r||"radial"===r?c.shift():r="linear";let m=c[0];if("radial"===r){void 0===m?m="closest-side":c.shift();var w=c[0];if(void 0===w)w="circle";else{switch(w){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",w),w="circle"}c.shift()}let A=c[0];void 0===A?A="center":(A=A.replaceAll("middle","center"),c.shift());m=w+" "+m+" at "+A}else"number"===
typeof m?(m+="deg",c.shift()):m?(m="to "+m,c.shift()):m="0deg";w=A=>{c.push(A&&"inherit"!==A?A:"transparent")};2>c.length&&w(this.textColor);2>c.length&&w(this.bgColor);p.background=r+"-gradient("+m+","+c.join(",")+")"}else p.background="none";this.bgColor=void 0},setTooltip:function(c){this.tooltip!==c&&(this.tooltip=this.getODE().title=c,this.inited&&this.fireEvent("tooltip",c))},isVisible:function(){return null==this.searchAncestorsOrSelf(c=>!c.visible)},getFocusTrap:function(c){return this.searchAncestorsOrSelf(p=>
p.focusCage||p.focusTrap&&!c)},subnodeAdded:function(c){c instanceof t.View?(this.getIDE().appendChild(c.getODE()),this.getSubviews().push(c),this.fireEvent("subviewAdded",c),this.subviewAdded(c)):c instanceof t.Layout&&(this.getLayouts().push(c),this.fireEvent("layoutAdded",c),this.layoutAdded(c))},subnodeRemoved:function(c){let p;c instanceof t.View?(p=this.getSubviewIndex(c),-1<p&&(this.fireEvent("subviewRemoved",c),c.removeDomElement(),this.subviews.splice(p,1),this.subviewRemoved(c))):c instanceof
t.Layout&&(p=this.getLayoutIndex(c),-1<p&&(this.fireEvent("layoutRemoved",c),this.layouts.splice(p,1),this.layoutRemoved(c)))},hasSubview:function(c){return this.getSubviews().includes(c)},getSubviewIndex:function(c){return this.getSubviews().indexOf(c)},subviewAdded:c=>{},subviewRemoved:c=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(c){const p=
this.getSubviews();for(let w=p.length;0<w;){const r=p[--w];c&&!c(r)||r.destroy()}},hasLayout:function(c){return this.getLayouts().includes(c)},getLayoutIndex:function(c){return this.getLayouts().indexOf(c)},layoutAdded:c=>{},layoutRemoved:c=>{},isBehind:function(c,p){return g(this,c,!1,p)},isInFrontOf:function(c,p){return g(this,c,!0,p)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(c,p){this.parent.sendSubviewBehind(this,
c,p)},sendInFrontOf:function(c,p){this.parent.sendSubviewInFrontOf(this,c,p)},doSubviewsReorderedInDom:c=>{},bringSubviewToFront:function(c){const p=this;if(c?.parent===p){const w=p.getIDE(),r=c.getODE();r!==w.lastElementChild&&h(c,()=>{w.appendChild(r);p.doSubviewsReorderedInDom(c)})}},sendSubviewToBack:function(c){const p=this;if(c?.parent===p){const w=p.getIDE(),r=w.firstElementChild,m=c.getODE();m!==r&&h(c,()=>{w.insertBefore(m,r);p.doSubviewsReorderedInDom(c)})}},sendSubviewBehind:function(c,
p,w){w?.moveSubviewBefore(c,p);const r=this;if(c?.parent===r&&p?.parent===r){const m=c.getODE(),A=p.getODE();if(m!==A.previousElementSibling){const H=r.getIDE();h(c,()=>{H.insertBefore(m,A);r.doSubviewsReorderedInDom(c)})}}w?.update()},sendSubviewInFrontOf:function(c,p,w){w?.moveSubviewAfter(c,p);const r=this;if(c?.parent===r&&p?.parent===r){const m=c.getODE(),A=p.getODE().nextElementSibling;if(m!==A){const H=r.getIDE();h(c,()=>{H.insertBefore(m,A);r.doSubviewsReorderedInDom(c)})}}w?.update()},sortSubviews:function(c){const p=
this,w=p.getSubviews();t.isNotSorted(w,c)&&(w.sort(c),e(p,()=>{const r=document.createDocumentFragment(),m=w.length;for(let A=0;m>A;)r.appendChild(w[A++].getODE());p.getIDE().appendChild(r)},!0),p.doSubviewsReorderedInDom(null))},containsPoint:function(c,p,w){const r=this.getODE();if(!r)return!1;const {x:m,y:A}=v.getRelativePosition(r,w);return u(c,p,m,A,this.width,this.height)},isPointVisible:function(c,p){const {x:w,y:r}=this.getPagePosition(!0);k(this);return n(this,c-w,p-r)},intersectsWithSibling:function(c){return c.parent===
this.parent&&!(c.x>this.x+this.width||c.x+c.width<this.x||c.y>this.y+this.height||c.y+c.height<this.y)},getEffectiveScale:function(){return k(this)},getEffectiveScaleX:function(){return k(this).scaleX},getEffectiveScaleY:function(){return k(this).scaleY}})})(myt);
(t=>{const x=(u,h,e)=>{const g=v(u,h);u.getODS().transform=g+(0===g.length?"":" ")+h+"("+e+")"},v=(u,h)=>{u=u.getODS();var e=u.transform;if(!e||0===e.length)return"";e=e.split(" ");let g=e.length;for(;g;)if(e[--g].startsWith(h)){e.splice(g,1);break}return u.transform=e.join(" ")};t.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(u){this.transformOrigin!==u&&(this.transformOrigin=u,this.getODS().transformOrigin=u||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",u)))},setRotation:function(u){this.rotation!==u&&(this.rotation=u,x(this,"rotate",(u||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",u)))},setScale:function(u){const h=this.scaleX!==u,e=this.scaleY!==u;if(h){var g=this.scaleX=u;null==g?v(this,"scaleX"):x(this,"scaleX",g||1)}e&&(g=this.scaleY=u,null==g?v(this,"scaleY"):x(this,"scaleY",g||1));this.inited&&((h||e)&&this.__updateBounds(this.width,this.height),
h&&this.fireEvent("scaleX",u),e&&this.fireEvent("scaleY",u))},setScaleX:function(u){if(this.scaleX!==u){var h=this.scaleX=u;null==h?v(this,"scaleX"):x(this,"scaleX",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",u))}},setScaleY:function(u){if(this.scaleY!==u){var h=this.scaleY=u;null==h?v(this,"scaleY"):x(this,"scaleY",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",u))}},setSkewX:function(u){this.skewX!==u&&(this.skewX=
u,x(this,"skewX",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",u)))},setSkewY:function(u){this.skewY!==u&&(this.skewY=u,x(this,"skewY",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",u)))},__updateBounds:function(u,h){const {rotation:e,scaleX:g,scaleY:k}=this,n=(null==g||1===g)&&(null==k||1===k);if(!n||null!=e&&0!==e&&180!==e)!n||90!==e&&270!==e?{width:u,height:h}=this.getODE().getBoundingClientRect():{width:h,height:u}=
this;this.callSuper(u,h)}})})(myt);
(t=>{const x=JS.Module,v=(g,k)=>{if("auto"===k)g.__hasSetWidth=!1,g.getODS().width="auto",g.sizeViewToDom();else return g.__hasSetWidth=!0},u=(g,k)=>{if("auto"===k)g.__hasSetHeight=!1,g.getODS().height="auto",g.sizeViewToDom();else return g.__hasSetHeight=!0},h=g=>{if(!g.__hasSetWidth){const k=g.getODE().offsetWidth/g.getEffectiveScaleX();g.width!==k&&(g.width=k,g.inited&&g.__updateBounds(k,g.height),g.fireEvent("width",k))}},e=g=>{if(!g.__hasSetHeight){const k=g.getODE().offsetHeight/g.getEffectiveScaleY();
g.height!==k&&(g.height=k,g.inited&&g.__updateBounds(g.width,k),g.fireEvent("height",k))}};t.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:h,sizeHeight:e},initNode:function(g,k){this.callSuper(g,k);this.sizeViewToDom()},setWidth:function(g){v(this,g)&&this.callSuper(g)},setHeight:function(g){u(this,g)&&this.callSuper(g)},sizeViewToDom:function(){h(this);e(this)}});t.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(g,k){this.callSuper(g,k);this.sizeViewToDom()},setWidth:function(g){v(this,
g)&&this.callSuper(g)},sizeViewToDom:function(){h(this)}});t.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(g,k){this.callSuper(g,k);this.sizeViewToDom()},setHeight:function(g){u(this,g)&&this.callSuper(g)},sizeViewToDom:function(){e(this)}})})(myt);
(t=>{const x=JS.Module,v=(g,k,n,b)=>{g[n]!==k&&(g[n]=k,g.getIDS()[n]=k||b||"inherit",g.inited&&(g.fireEvent(n,k),g.sizeViewToDom()))};t.TextSupport=new x("TextSupport",{setWidth:function(g){this.callSuper(g);"auto"!==g&&(g=this.whiteSpace,"normal"!==g&&"pre-line"!==g&&"pre-wrap"!==g&&"break-spaces"!==g||this.sizeViewToDom())},setText:function(g){g||="";g=this.valueFromEvent(g);this.text!==g&&(this.getIDE().innerHTML=this.text=g,this.inited&&(this.fireEvent("text",g),this.sizeViewToDom()))},setTextOverflow:function(g){this.textOverflow!==
g&&(this.textOverflow=g,this.getIDS().textOverflow=g||"inherit",this.inited&&this.fireEvent("textOverflow",g))},setTextAlign:function(g){this.textAlign!==g&&(this.textAlign=g,this.getIDS().textAlign=g||"inherit",this.inited&&this.fireEvent("textAlign",g))},setWhiteSpace:function(g){v(this,g,"whiteSpace")},setWordWrap:function(g){v(this,g,"wordWrap","normal")},setTextIndent:function(g){v(this,g,"textIndent")},setTextTransform:function(g){v(this,g,"textTransform")},setTextDecoration:function(g){v(this,
g,"textDecoration")},setLineHeight:function(g){v(this,g,"lineHeight")},setLetterSpacing:function(g){v(this,g,"letterSpacing")},setWordSpacing:function(g){v(this,g,"wordSpacing")},setFontFamily:function(g){v(this,g,"fontFamily")},setFontStyle:function(g){v(this,g,"fontStyle")},setFontVariant:function(g){v(this,g,"fontVariant")},setFontWeight:function(g){v(this,g,"fontWeight")},setFontSize:function(g){v(this,g,"fontSize")},setUserUnselectable:function(g){this.userUnselectable!==g&&(this.userUnselectable=
g,this[g?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(g?"default":"text"),this.inited&&this.fireEvent("userUnselectable",g))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(g,k,n,b){this.getIDS().textShadow=(g||0)+"px "+(k||0)+"px "+(null!=n?n:2)+"px "+(b||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const u=(g,k,n)=>{const b="padding"+n;k=Math.max(k,0);g[b]!==k&&(g[b]=k,g.getIDS()[b]=k+"px",g.fireEvent(b,k),"Left"===n||"Right"===n?h(g):e(g))},h=g=>{g.__hasSetWidth&&(g.getODS().width=g.width-(g.paddingLeft||0)-(g.paddingRight||0)+"px",g.inited&&g.sizeViewToDom())},e=g=>{g.__hasSetHeight&&(g.getODS().height=g.height-(g.paddingTop||0)-(g.paddingBottom||0)+"px",g.inited&&g.sizeViewToDom())};t.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(g){this.callSuper(g);h(this)},setHeight:function(g){this.callSuper(g);
e(this)},setPadding:function(g){let k,n,b;g||=0;"object"===typeof g?(k=g.top||0,n=g.right||0,b=g.bottom||0,g=g.left||0):k=n=b=g;this.setPaddingTop(k);this.setPaddingRight(n);this.setPaddingBottom(b);this.setPaddingLeft(g)},setPaddingTop:function(g){u(this,g,"Top")},setPaddingRight:function(g){u(this,g,"Right")},setPaddingBottom:function(g){u(this,g,"Bottom")},setPaddingLeft:function(g){u(this,g,"Left")}})})(myt);
(t=>{const x={},v={},u=h=>{const e=h.imageUrl;if(h.calculateNaturalSize&&e){var g=x[e];if(g)h.setNaturalWidth(g.width),h.setNaturalHeight(g.height);else{g=v[e];if(!g){v[e]=g=[];const k=new Image;k.onerror=n=>{if(n=v[e]){let b=n.length;for(;b;)n[--b].setImageLoadingError(!0);n.length=0;delete v[e]}};k.onload=()=>{const n=k.width,b=k.height,d=v[e];if(d){let a=d.length;for(;a;){const f=d[--a];f.imageUrl===e&&(f.setNaturalWidth(n),f.setNaturalHeight(b))}d.length=0;delete v[e]}x[e]={width:n,height:b}};
k.src=e}g.push(h)}}};t.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:h=>x[h]},initNode:function(h,e){e.imageRepeat??(e.imageRepeat="no-repeat");e.imageAttachment??(e.imageAttachment="scroll");this.callSuper(h,e)},setImageUrl:function(h){this.imageUrl!==h&&(this.imageUrl=h,this.getIDS().backgroundImage=h?'url("'+h+'")':"none",this.inited&&(this.fireEvent("imageUrl",h),this.setNaturalWidth(),this.setNaturalHeight(),!h&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
u(this))},setImageLoadingError:function(h){this.set("imageLoadingError",h,!0)},setImageSize:function(h){this.imageSize!==h&&(this.imageSize=h,this.getIDS().backgroundSize=h||"auto",this.inited&&this.fireEvent("imageSize",h))},setImageRepeat:function(h){this.imageRepeat!==h&&(this.getIDS().backgroundRepeat=this.imageRepeat=h,this.inited&&this.fireEvent("imageRepeat",h))},setImagePosition:function(h){this.imagePosition!==h&&(this.getIDS().backgroundPosition=this.imagePosition=h,this.inited&&this.fireEvent("imagePosition",
h))},setImageAttachment:function(h){this.imageAttachment!==h&&(this.getIDS().backgroundAttachment=this.imageAttachment=h,this.inited&&this.fireEvent("imageAttachment",h))},setCalculateNaturalSize:function(h){this.calculateNaturalSize!==h&&(this.calculateNaturalSize=h,this.inited&&this.fireEvent("calculateNaturalSize",h),u(this))},setNaturalWidth:function(h){this.naturalWidth!==h&&(this.naturalWidth=h,this.inited&&this.fireEvent("naturalWidth",h),this.useNaturalSize&&h&&this.setWidth(h))},setNaturalHeight:function(h){this.naturalHeight!==
h&&(this.naturalHeight=h,this.inited&&this.fireEvent("naturalHeight",h),this.useNaturalSize&&h&&this.setHeight(h))},setUseNaturalSize:function(h){this.useNaturalSize!==h&&(this.useNaturalSize=h,this.inited&&this.fireEvent("useNaturalSize",h),h&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),h&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(t=>{const x=JS.Class,{View:v,SizeToDom:u}=t;t.Flexbox=new x("Flexbox",v,{include:[t.FlexboxSupport]});t.Frame=new x("Frame",v,{initNode:function(h,e){e.tagName??(e.tagName="iframe");this.callSuper(h,e);h=t.global.mouse;this.attachToDom(h,"__doMouseDown","mousedown",!0);this.attachToDom(h,"__doMouseUp","mouseup",!0)},createOurDomElement:function(h){h=this.callSuper(h);(Array.isArray(h)?h[1]:h).style.border="0px";return h},setSrc:function(h){this.src!==h&&(this.src=this.getIDE().src=h,this.inited&&
this.fireEvent("src",h))},__doMouseDown:function(h){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(h){this.setPointerEvents(this.__restorePointerEvents);return!0}});t.Markup=new x("Markup",v,{include:[u],setHtml:function(h){this.html!==h&&(this.getIDE().innerHTML=this.html=h,this.inited&&(this.fireEvent("html",h),this.sizeViewToDom()))}});t.Text=new x("Text",v,{include:[u,t.TextSupport],initNode:function(h,e){e.whiteSpace??(e.whiteSpace=
"nowrap");e.userUnselectable??(e.userUnselectable=!0);this.callSuper(h,e)},measureNoWrapWidth:function(){const h=this.__hasSetWidth,e=this.width;if(!h&&"nowrap"===this.whiteSpace)return e;const g=this.getIDS(),k=g.whiteSpace;h&&(g.width="auto");g.whiteSpace="nowrap";const n=this.getODE().getBoundingClientRect().width;g.whiteSpace=k;h&&(g.width=e);return n}});t.PaddedText=new x("PaddedText",t.Text,{include:[t.PaddedTextSupport]});t.Image=new x("Image",v,{include:[t.ImageSupport],initNode:function(h,
e){e.useNaturalSize??(e.useNaturalSize=!0);this.callSuper(h,e)}});t.BackView=new x("BackView",v,{sendSubviewToBack:function(h){if(h.parent===this){const e=this.getIDE(),g=e.childNodes[1];h=h.getODE();h!==g&&(h=e.removeChild(h))&&e.insertBefore(h,g)}}})})(myt);
(t=>{const x=Math.round,v=g=>{g.parent&&0<=g.percentOfParentWidth&&g.syncTo(g.parent,"__doPOPW","width")},u=g=>{0<=g.percentOfParentWidth&&g.detachFrom(g.parent,"__doPOPW","width")},h=g=>{g.parent&&0<=g.percentOfParentHeight&&g.syncTo(g.parent,"__doPOPH","height")},e=g=>{0<=g.percentOfParentHeight&&g.detachFrom(g.parent,"__doPOPH","height")};t.SizeToParent=new JS.Module("SizeToParent",{setParent:function(g){this.parent!==g&&(this.inited&&(u(this),e(this)),this.callSuper(g),v(this),h(this))},setPercentOfParentWidthOffset:function(g){this.percentOfParentWidthOffset!==
g&&(this.percentOfParentWidthOffset=g,this.inited&&(this.fireEvent("percentOfParentWidthOffset",g),this.__doPOPW()))},setPercentOfParentWidth:function(g){this.percentOfParentWidth!==g&&(this.inited&&u(this),this.percentOfParentWidth=g,this.inited&&(this.fireEvent("percentOfParentWidth",g),v(this)))},setPercentOfParentHeightOffset:function(g){this.percentOfParentHeightOffset!==g&&(this.percentOfParentHeightOffset=g,this.inited&&(this.fireEvent("percentOfParentHeightOffset",g),this.__doPOPH()))},setPercentOfParentHeight:function(g){this.percentOfParentHeight!==
g&&(this.inited&&e(this),this.percentOfParentHeight=g,this.inited&&(this.fireEvent("percentOfParentHeight",g),h(this)))},__doPOPW:function(g){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(g){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(t=>{let x;const v=[];new JS.Singleton("GlobalRootViewRegistry",{include:[t.Observable],initialize:function(){t.global.register("roots",x=this)},getRoots:()=>v,addRoot:u=>{v.push(u);x.fireEvent("rootAdded",u)},removeRoot:u=>{const h=v.indexOf(u);-1<h&&(v.splice(h,1),x.fireEvent("rootRemoved",u))}})})(myt);
(t=>{const {addEventListener:x,removeEventListener:v,global:{roots:u}}=t,h=t.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:e=>{const g=e.getIDE();e=e.__captureDrop=k=>{k.preventDefault()};x(g,"drop",e);x(g,"dragover",e)},teardownCaptureDrop:e=>{const g=e.getIDE();e=e.__captureDrop;v(g,"drop",e);v(g,"dragover",e)}},initNode:function(e,g){this.callSuper(e,g);this.setZIndex(0);this.addDomClass("myt");u.addRoot(this);h.setupCaptureDrop(this)},createOurDomElement:function(e){e||(e=this.callSuper(e),
t.getElement().appendChild(e));return e},destroy:function(){h.teardownCaptureDrop(this);u.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(e){this.keepDomElementWhenDestroyed=e},setParent:e=>{},bringToFront:function(){var e=this.getIDE();const g=e.parentNode;e!==g.lastChild&&(e=g.removeChild(e))&&g.appendChild(e)},sendToBack:function(){var e=this.getIDE();const g=e.parentNode;e!==g.firstChild&&(e=g.removeChild(e))&&
g.insertBefore(e,g.firstChild)},sendBehind:function(e,g){g=this.getIDE();e=e.getIDE();const k=g.parentNode;e.parentNode===k&&(g=k.removeChild(g))&&k.insertBefore(g,e)},sendInFrontOf:function(e,g){e.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(e,g),e.sendBehind(this,g))}})})(myt);
(t=>{let x,v,u=!1;const {requestAnimationFrame:h,cancelAnimationFrame:e}=window,g={},k=b=>{x=h(k);b=Math.round(b);-1!==v&&(g.delta=b-v,g.time=b,n.fireEvent("idle",g));v=b},n=new JS.Singleton("GlobalIdle",{include:[t.Observable],initialize:function(){t.global.register("idle",this)},attachObserver:(b,d,a)=>{b=n.callSuper(b,d,a);!u&&n.hasObservers("idle")&&(u=!0,v=-1,x=h(k));return b},detachObserver:(b,d,a)=>{b=n.callSuper(b,d,a);u&&!n.hasObservers("idle")&&(e(x),u=!1);return b}})})(myt);
(t=>{let x,v,u;const h=t.global,e=h.idle,g=window.document;new JS.Singleton("GlobalWindowResize",{include:[t.Observable,t.Observer],initialize:function(){x=this;x.attachTo(e,"__setup","idle");h.register("windowResize",x)},__setup:k=>{const n=g.body;n&&(x.detachFrom(e,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:v=n.clientWidth,h:u=n.clientHeight})})).observe(n))},getWidth:()=>v??=g.body.clientWidth,getHeight:()=>u??=g.body.clientHeight})})(myt);
(t=>{const x=JS.Module,v=t.global.windowResize,u=Math.max,h=g=>{const k=g.resizeDimension;"both"!==k&&"width"!==k||g.setWidth(u(g.minWidth,v.getWidth()));"both"!==k&&"height"!==k||g.setHeight(u(g.minHeight,v.getHeight()))},e=t.SizeToWindow=new x("SizeToWindow",{include:[t.RootView],initNode:function(g,k){this.minWidth=this.minHeight=0;k.resizeDimension??(k.resizeDimension="both");this.attachTo(v,"__hndlResize","resize");this.callSuper(g,k)},setResizeDimension:function(g){this.resizeDimension!==g&&
(this.resizeDimension=g,h(this))},setMinWidth:function(g){this.minWidth!==g&&(this.minWidth=g,h(this))},setMinHeight:function(g){this.minHeight!==g&&(this.minHeight=g,h(this))},__hndlResize:function(g){h(this)}});t.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[e],initNode:function(g,k){k.resizeDimension??(k.resizeDimension="width");this.callSuper(g,k)}});t.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[e],initNode:function(g,k){k.resizeDimension??(k.resizeDimension="height");this.callSuper(g,
k)}})})(myt);
(t=>{const x=Math,{min:v,max:u}=x,h=f=>v(255,u(0,x.round(f))),e=f=>h(f).toString(16).padStart(2,"0"),g=(f,c,p,w)=>(w?"#":"")+e(f)+e(c)+e(p),k=f=>new a((16711680&f)>>16,(65280&f)>>8,255&f),n=(f,c)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*c/100;else return 0;f=v(c,u(0,f))/c;return 1E-6>x.abs(1-f)?1:f},b=(f,c,p)=>{f=n(f,255);c=n(c,255);p=n(p,255);const w=u(f,c,p),r=w-v(f,c,p);if(0===r)return{h:0,s:0,v:w};let m;switch(w){case f:m=(c-p)/r+(c<p?6:0);break;case c:m=(p-f)/r+
2;break;case p:m=(f-c)/r+4}return{h:60*m,s:0===w?0:r/w,v:w}},d=(f,c,p)=>{f=6*n(f,360);c=n(c,100);p=n(p,100);var w=x.floor(f);const r=f-w;f=p*(1-c);const m=p*(1-r*c);c=p*(1-(1-r)*c);w%=6;return{red:255*[p,m,f,f,c,p][w],green:255*[c,p,p,m,f,f][w],blue:255*[f,f,c,p,p,m][w]}},a=t.Color=new JS.Class("Color",{extend:{toUnitRange:n,rgbToHsv:b,hsvToRgb:d,toHex:e,rgbToHex:g,cleanChannelValue:h,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:k,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [c,p,w]=f;return new a(parseInt(c+c,16),parseInt(p+p,16),parseInt(w+w,16));case 6:return k(parseInt(f,16));default:return k(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,c,p)=>{const {red:w,green:r,blue:m}=d(f,c,p);return new a(w,r,m)},getLighterColor:(f,c)=>k(f).isLighterThan(k(c))?f:c,makeColorNumberFromChannels:(f,c,p)=>(h(f)<<16)+(h(c)<<8)+h(p),makeBlendedColor:(f,c,
p)=>new a(f.red+p*(c.red-f.red),f.green+p*(c.green-f.green),f.blue+p*(c.blue-f.blue))},initialize:function(f,c,p){this.setRed(f);this.setGreen(c);this.setBlue(p)},setRed:function(f){this.red=h(f)},setGreen:function(f){this.green=h(f)},setBlue:function(f){this.blue=h(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return g(this.red,this.green,this.blue,!0)},getHSV:function(){return b(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new a(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(a)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(t=>{const {max:x,sin:v,cos:u,pow:h,sqrt:e,PI:g}=Math,k=2*g,n=g/2,b=t.global.idle,d=t.Color.makeColorFromHexString,a=(m,A)=>A*(1>(m*=2)?m*m/2:-(--m*(m-2)-1)/2),f={linear:m=>m,inQuad:m=>m*m,outQuad:m=>-m*(m-2),inOutQuad:m=>1>(m*=2)?m*m/2:-(--m*(m-2)-1)/2,inCubic:m=>m*m*m,outCubic:m=>--m*m*m+1,inOutCubic:m=>1>(m*=2)?m*m*m/2:((m-=2)*m*m+2)/2,inQuart:m=>m*m*m*m,outQuart:m=>-(--m*m*m*m-1),inOutQuart:m=>1>(m*=2)?m*m*m*m/2:-((m-=2)*m*m*m-2)/2,inQuint:m=>m*m*m*m*m,outQuint:m=>--m*m*m*m*m+1,inOutQuint:m=>
1>(m*=2)?m*m*m*m*m/2:((m-=2)*m*m*m*m+2)/2,inSine:m=>-u(m*n)+1,outSine:m=>v(m*n),inOutSine:m=>-(u(m*g)-1)/2,inCirc:m=>-(e(1-m*m)-1),outCirc:m=>e(1- --m*m),inOutCirc:m=>1>(m*=2)?-(e(1-m*m)-1)/2:(e(1-(m-=2)*m)+1)/2,inExpo:m=>0===m?0:h(2,10*(m-1)),outExpo:m=>1===m?1:-h(2,-10*m)+1,inOutExpo:m=>0===m||1===m?m:1>(m*=2)?h(2,10*(m-1))/2:(-h(2,-10*--m)+2)/2,inElastic:m=>0===m||1===m?m:-(h(2,10*--m)*v((1*m-.075)*k/.3)),outElastic:m=>0===m||1===m?m:h(2,-10*m)*v((1*m-.075)*k/.3)+1,inOutElastic:m=>0===m||1===m?
m:1>(m*=2)?-(h(2,10*--m)*v((1*m-.1125)*k/.45))/2:h(2,-10*--m)*v((1*m-.1125)*k/.45)/2+1,inBack:(m,A=1.70158)=>(m/=1)*m*((A+1)*m-A),outBack:(m,A=1.70158)=>(m=m/1-1)*m*((A+1)*m+A)+1,inOutBack:(m,A=1.70158)=>1>(m*=2)?m*m*(((A*=1.525)+1)*m-A)/2:((m-=2)*m*(((A*=1.525)+1)*m+A)+2)/2,inBounce:m=>1-f.outBounce(1-m),outBounce:m=>m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375,inOutBounce:m=>1>(m*=2)?f.inBounce(m)/2:(f.outBounce(m-
1)+1)/2,wiggle:m=>{m*=6;return 1>m?a(m-0,1):2>m?a(2-m,1):3>m?a(m-2,.5):4>m?a(4-m,.5):5>m?a(m-4,.25):a(6-m,.25)}},c=f.inOutQuad,p=m=>{m.__tmpFrom=!1;m.__loopCnt=m.reverse?m.repeat-1:0;m.__prog=m.reverse?m.duration:0},w=(m,A)=>{const {running:H,paused:z,reverse:C,duration:J,repeat:M,__prog:O,easingFunction:l,callback:q}=m;if(H&&!z){C&&(A*=-1);A=O+A;let L=0;A>J?(L=A-J,A=J,++m.__loopCnt===M&&(L=0)):0>A&&(L=-A,A=0,0>--m.__loopCnt&&0<M&&(L=0));var y=m.target??m.parent;if(y){const {relative:R,attribute:N,
__isColorAnim:T,__loopCnt:ea,to:U}=m;var B=x(0,A/J),E=x(0,O/J);null==m.from&&(m.__tmpFrom=!0,m.from=R?T?"#000":0:y.get(N));E=l(B)-(R?l(E):0);var F=m.from,K=R?y.get(N):F;B=y.set;if(T){F=d(F);const fa=d(U);K=R?d(K):F;K.setRed(K.red+(fa.red-F.red)*E);K.setGreen(K.green+(fa.green-F.green)*E);K.setBlue(K.blue+(fa.blue-F.blue)*E);E=K.getHtmlHexString()}else E=K+(U-F)*E;B.call(y,N,E);!C&&ea===M||C&&0>ea&&0<M?(m.setRunning(!1),q?.call(m,!0)):0<L?(m.fireEvent("repeat",ea),m.__prog=C?J:0,w(m,L)):m.__prog=A}else console.log("No target for animator",
m),m.setRunning(!1),q?.call(m,!1)}},r=(m,A,H,z)=>{m.stopActiveAnimators(z,!0);const C=m[z];m.animate({attribute:z,from:C,to:C+A,duration:H,easingFunction:"wiggle"}).next(()=>{m.set(z,C)})};t.Animator=new JS.Class("Animator",t.Node,{include:[t.Reusable],extend:{easings:f,bounceView:(m,A=-6,H=900)=>{r(m,A,H,"y")},shakeView:(m,A=10,H=300)=>{r(m,A,H,"x")},wiggleView:r},initNode:function(m,A){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=c;this.callSuper(m,
A);p(this)},setRunning:function(m){if(this.running!==m&&(this.running=m,this.inited&&this.fireEvent("running",m),!this.paused)){if(m){const A=this.target??this.parent;this.__isColorAnim=A&&"function"===typeof A.isColorAttr?A.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),p(this);this[m?"attachTo":"detachFrom"](b,"__updateAnim","idle")}},setPaused:function(m){if(this.paused!==m&&(this.paused=m,this.inited&&this.fireEvent("paused",m),this.running))this[m?"detachFrom":"attachTo"](b,
"__updateAnim","idle")},setReverse:function(m){this.set("reverse",m,!0);this.inited&&!this.running&&p(this)},setRepeat:function(m){this.set("repeat",m,!0);this.inited&&!this.running&&p(this)},setDuration:function(m){this.set("duration",m,!0);this.inited&&!this.running&&p(this)},setEasingFunction:function(m){"string"===typeof m&&(m=f[m]);this.set("easingFunction",m??c,!0)},setFrom:function(m){this.set("from",m,!0)},setTo:function(m){this.set("to",m,!0)},setCallback:function(m){this.callback=m},next:function(m,
A){const H=this,z=H.callback;z&&!A?H.setCallback(C=>{z.call(H,C);m.call(H,C)}):H.setCallback(m)},reset:function(m){p(this);this.setRunning(!1);this.setPaused(!1);m&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=c;this.reset(!1)},__updateAnim:function(m){w(this,m.value.delta)}})})(myt);
(t=>{const x=Array.isArray,v=e=>{e.__additionalArgs=[];e.__pendingTransition="";e.__transDestinationState="";e.__transStage="leaveState"},u=(e,g)=>{if(e.__transInProgress){var k=e.__deferredTransitions;k??=e.__deferredTransitions=[];k.unshift(g)}else{e.__transInProgress=!0;k=g.shift();const n=g.shift();if(e.__pendingTransition)return 3;if(e.isFinished())return e.__transInProgress=!1,5;let b=e.map[e.current][n];b??=e.map["*"][n];if(b)return e.__pendingTransition=n,e.__transDestinationState=b,e.__additionalArgs=
g,e.resumeTransition(k);e.__transInProgress=!1;return 5}},h=e=>{e.__transInProgress=!1;const g=e.__deferredTransitions;if(g)for(;0<g.length;)u(e,g.pop())};t.StateMachine=new JS.Class("StateMachine",t.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(e,g){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";v(this);this.callSuper(e,g)},setInitialState:function(e){if(""===this.current){if(x(e)){var g=e;e=g.shift()}else g=[];this.current=
this.initial=e;this.doEnterState("","",e,g);g={name:"",from:"",to:e,args:g};this.fireEvent("enter"+e,g);this.fireEvent("enter",g);this.isFinished()&&this.fireEvent("finished",g)}},setTerminalState:function(e){this.terminal=e},addTransitions:function(e){for(const g of e)this.addTransition(...g)},addTransition:function(e,g,k){g=g?x(g)?g:[g]:["*"];const n=this.map;let b=g.length;for(;b;){let d,a;((d=n)[a=g[--b]]??(d[a]={}))[e]=k}},doTransition:function(...e){e.unshift("sync");return u(this,e)},doAsyncTransition:function(...e){e.unshift("async");
return u(this,e)},resumeTransition:function(e){const g=this.__pendingTransition;if(!g)return 4;const k=this.current,n=this.__transDestinationState,b=this.__additionalArgs,d={name:g,from:k,to:n,args:b},a=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(g,k,n,b);if(!1===f)return v(this),h(this),2;if("async"===f||"async"===e)return this.__transStage="enterState",a("start"+g,d),a("start",d),a("leave"+k,d),a("leave",d),h(this),3;a("start"+g,d);a("start",d);
a("leave"+k,d);a("leave",d);case "enterState":this.current=n,v(this),this.doEnterState(g,k,n,b),a("enter"+n,d),a("enter",d),a("end"+g,d),a("end",d),this.isFinished()&&a("finished",d)}h(this);return 1},doLeaveState:(e,g,k,n)=>{},doEnterState:(e,g,k,n)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(e){return x(e)?e.includes(this.current):this.current===e},can:function(e){return void 0!==this.map[this.current][e]?!0:void 0!==this.map["*"][e]}})})(myt);
(t=>{const x=(e,g)=>e.replicationIndex-g.replicationIndex,v=(e,g)=>{let k=e.length;for(;k;){const n=e[--k];n.decrementLockedCounter();g&&n.update()}},u=e=>{h(e);const g=e.template;g&&(e.__pool=new t.TrackActivesPool(g,e.parent))},h=e=>{const g=e.__pool;if(g){e=e.parent.getLayouts();let k=e.length;for(;k;)e[--k].incrementLockedCounter();g.putActives();g.destroyPooledInstances();v(e,!1);g.destroy()}};t.Replicable=new JS.Module("Replicable",{include:[t.Reusable],replicate:function(e,g){this.replicationData=
e;this.replicationIndex=g},notify:(e,g)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(e,g){return g===this.replicationIndex&&e===this.replicationData}});t.Replicator=new JS.Class("Replicator",t.Node,{initNode:function(e,g){this.callSuper(e,g);u(this);this.doReplication()},destroy:function(){h(this);this.callSuper()},setTemplate:function(e){(this.template=e.includes(t.Replicable)?e:null)||t.dumpStack("Template not replicable");this.inited&&
(u(this),this.doReplication())},setData:function(e){this.data=e;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const e=this.__pool;let g;if(e){g=this.parent.getLayouts();for(var k=g.length;k;)g[--k].incrementLockedCounter();const n=(k=this.data)?k.length:0,b=e.getActives(),d=b.length,a=[];let f=d,c,p;for(b.sort(x);f;)if(c=b[--f],p=c.replicationIndex,p>=n||!c.alreadyHasReplicationData(k[p],p))a[p]=c;for(f=a.length;f;)(c=a[--f])&&
e.putInstance(c);for(f=0;n>f;++f)(f>=d||null!=a[f])&&e.getInstance().replicate(k[f],f);for(f=g.length;f;)g[--f].sortSubviews(x);v(g,!0)}},notify:function(e,g){var k=this.__pool;if(k){k=k.getActives();let n=k.length;for(;n;)k[--n].notify(e,g)}}})})(myt);
(t=>{const x=JS.Singleton,v=document,{DomElementProxy:u,DomObservable:h,global:{register:e}}=t;new x("GlobalMouse",{include:[u,h,t.MouseObservable],initialize:function(){this.setDomElement(v);e("mouse",this)}});new x("GlobalTouch",{include:[u,h,t.TouchObservable],initialize:function(){this.setDomElement(v);e("touch",this)}})})(myt);
(t=>{let x,v,u;const h=[],e=[],g=b=>{const d=u;d!==b&&(d&&(d.notifyDragLeave(v),v.destroyed||v.notifyDragLeaving(d),x("dragLeave",d)),u=b)&&(b.notifyDragEnter(v),v.destroyed||v.notifyDragEntering(b),x("dragEnter",d))},k=b=>{let d=v;if(d!==b)if(v=b){d=b;for(const a of n(d,e))a.notifyDragStart(d);for(const a of n(d,h))a.notifyAutoScrollerDragStart(d);x("startDrag",b)}else{for(const a of n(d,e))a.notifyDragStop(d);for(const a of n(d,h))a.notifyAutoScrollerDragStop(d);x("stopDrag",b)}},n=(b,d)=>{if(b.destroyed)return[];
if(b.isAnyDragGroup())return d;const a=[];b=b.getDragGroups();let f=d.length;for(;f;){const c=d[--f];if(c.isAnyDropGroup())a.push(c);else{const p=c.getDropGroups();for(const w in b)if(p[w]){a.push(c);break}}}return a};new JS.Singleton("GlobalDragManager",{include:[t.Observable],initialize:function(){t.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>v,registerAutoScroller:b=>{h.push(b)},unregisterAutoScroller:b=>{b=h.indexOf(b);-1<b&&h.splice(b,1)},registerDropTarget:b=>
{e.push(b)},unregisterDropTarget:b=>{b=e.indexOf(b);-1<b&&e.splice(b,1)},startDrag:b=>{k(b)},stopDrag:(b,d,a)=>{d.notifyDropped(u,a);a||u?.notifyDrop(d);g();k();u&&!a&&x("drop",[d,u])},updateDrag:(b,d)=>{const a=n(d,e);let f=a.length,c;if(0<f){const {pageX:p,pageY:w}=b.value;for(;f;)b=a[--f],b.willAcceptDrop(d)&&d.willPermitDrop(b)&&b.isPointVisible(p,w)&&(!c||b.isInFrontOf(c))&&(c=b)}g(c)}})})(myt);
(t=>{const x=JS.Module,{mouse:v,keys:u,idle:h}=t.global;t.Activateable=new x("Activateable",{doActivated:()=>{}});t.UpdateableUI=new x("UpdateableUI",{initNode:function(e,g){this.callSuper(e,g);this.updateUI()},updateUI:()=>{}});t.Disableable=new x("Disableable",{initNode:function(e,g){g.disabled??(g.disabled=!1);this.callSuper(e,g)},setDisabled:function(e){e=this.valueFromEvent(e);this.disabled!==e&&(this.disabled=e,this.inited&&this.fireEvent("disabled",e),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});t.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[u.CODE_ENTER,u.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(e,g){this.activateKeyDown="";g.activationKeys??(g.activationKeys=t.KeyActivation.ACTIVATION_KEYS);this.callSuper(e,g);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(e){this.activationKeys=
e??[]},setRepeatKeyDown:function(e){this.repeatKeyDown=e},__hndlKeyDown:function(e){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const g=t.KeyObservable.getCodeFromEvent(e);this.activationKeys.includes(g)&&(this.activateKeyDown===g?this.doActivationKeyDown(g,!0):(this.activateKeyDown=g,this.doActivationKeyDown(g,!1)),e.value.preventDefault())}},__hndlKeyPress:function(e){if(!this.disabled){const g=t.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===g&&this.activationKeys.includes(g)&&
e.value.preventDefault()}},__hndlKeyUp:function(e){if(!this.disabled){const g=t.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===g&&this.activationKeys.includes(g)&&(this.activateKeyDown="",this.doActivationKeyUp(g),e.value.preventDefault())}},__doDomBlur:function(e){this.disabled||(e=this.activateKeyDown,""!==e&&(this.activateKeyDown="",this.doActivationKeyAborted(e)))},doActivationKeyDown:(e,g)=>{},doActivationKeyUp:function(e){this.doActivated()},doActivationKeyAborted:e=>{}});t.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(e,g){switch(e){case u.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,g))return;break;case u.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,g))return;break;case u.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,g))return;break;case u.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,g))return}this.callSuper(e,g)},doKeyArrowLeftOrUp:(e,g)=>{},doKeyArrowRightOrDown:(e,g)=>{}});t.MouseOver=new x("MouseOver",{initNode:function(e,g){g.mouseOver??(g.mouseOver=
!1);this.callSuper(e,g);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(e){this.mouseOver!==e&&(this.mouseOver=e,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(h,"__doMouseOverOnIdle","idle")))},setDisabled:function(e){this.callSuper(e);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(h,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const e=this.mouseOver;this.__lastOverIdleValue!==e&&(this.__lastOverIdleValue=e,this.doSmoothMouseOver(e))},doSmoothMouseOver:function(e){this.inited&&this.updateUI?.()},doMouseOver:function(e){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(e){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});t.MouseDown=new x("MouseDown",{initNode:function(e,g){g.mouseDown??(g.mouseDown=!1);this.callSuper(e,
g);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(e){this.mouseDown!==e&&(this.mouseDown=e,this.inited&&(e&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(e){e&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(e)},doMouseOver:function(e){this.callSuper(e);this.mouseDown&&this.detachFromDom(v,"doMouseUp","mouseup",!0)},doMouseOut:function(e){this.callSuper(e);!this.disabled&&this.mouseDown&&this.attachToDom(v,
"doMouseUp","mouseup",!0)},doMouseDown:function(e){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(e){this.mouseOver||this.detachFromDom(v,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(e))},doMouseUpInside:function(e){this.doActivated?.()}});t.MouseOverAndDown=new x("MouseOverAndDown",{include:[t.MouseOver,t.MouseDown]});t.MouseEventsBubbleUp=new x("MouseEventsBubbleUp",
{doMouseOver:function(e){this.callSuper(e);return!0},doMouseOut:function(e){this.callSuper(e);return!0},doMouseDown:function(e){this.callSuper(e);return!0},doMouseUp:function(e){this.callSuper(e);return!0}});t.Draggable=new x("Draggable",{initNode:function(e,g){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let k=!0;null!=g.isDraggable&&(k=g.isDraggable,delete g.isDraggable);this.callSuper(e,g);this.setIsDraggable(k)},setIsDraggable:function(e){if(this.isDraggable!==
e){this.isDraggable=e;let g;e?g=this.attachToDom:this.inited&&(g=this.detachFromDom);if(g){e=this.getDragViews();let k=e.length;for(;k;){const n=e[--k];g.call(this,n,"__doMouseDown","mousedown");g.call(this,n,"__doContextMenu","contextmenu")}}}},setIsDragging:function(e){this.set("isDragging",e,!0)},setDragOffsetX:function(e,g){this.dragOffsetX!==e&&(this.dragOffsetX=e,this.inited&&this.isDragging&&!g&&this.reRequestDragPosition())},setDragOffsetY:function(e,g){this.dragOffsetY!==e&&(this.dragOffsetY=
e,this.inited&&this.isDragging&&!g&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(e){this.distanceBeforeDrag=e},setDraggableAllowBubble:function(e){this.draggableAllowBubble=e},setCenterOnMouse:function(e){this.centerOnMouse=e},setAllowAbort:function(e){this.allowAbort=e},getDragViews:function(){return[this]},__doContextMenu:e=>{},__doMouseDown:function(e){const g=t.MouseObservable.getMouseFromEvent(e),k=this.getODE();this.dragInitX=g.x-k.offsetLeft;this.dragInitY=g.y-k.offsetTop;
this.attachToDom(v,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(v,"__doDragCheck","mousemove",!0):this.startDrag(e);e.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(e){this.isDragging?this.stopDrag(e,!1):(this.detachFromDom(v,"__doMouseUp","mouseup",!0),this.detachFromDom(v,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(e){e.value===u.CODE_ESC&&this.stopDrag(e,!0)},__doDragCheck:function(e){const g=
t.MouseObservable.getMouseFromEvent(e);t.Geometry.measureDistance(g.x,g.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(v,"__doDragCheck","mousemove",!0),this.startDrag(e))},startDrag:function(e){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(u,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(v,"updateDrag","mousemove",!0);this.updateDrag(e)},
updateDrag:function(e){this.__lastMousePosition=t.MouseObservable.getMouseFromEvent(e);this.reRequestDragPosition()},__updateDragInitX:function(e){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(e){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(e,g){this.detachFromDom(v,"__doMouseUp","mouseup",!0);this.detachFromDom(v,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(u,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(e,g){this.disabled||(this.setX(e),this.setY(g))},reRequestDragPosition:function(){const e=this.__lastMousePosition;this.requestDragPosition(e.x-this.dragInitX+this.dragOffsetX,e.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(t=>{const {Class:x,Module:v}=JS,{View:u,KeyActivation:h}=t;var e=t.Button=new v("Button",{include:[t.Activateable,t.UpdateableUI,t.Disableable,t.MouseOverAndDown,h],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(k,n){n.focusable??(n.focusable=!0);n.cursor??(n.cursor="pointer");this.callSuper(k,n)},setFocused:function(k){const n=this.focused;this.callSuper(k);this.inited&&this.focused!==n&&this.updateUI()},doActivationKeyDown:function(k,n){n||this.updateUI()},doActivationKeyUp:function(k){this.callSuper(k);
this.updateUI()},doActivationKeyAborted:function(k){this.callSuper(k);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const k=this.__restoreCursor;k&&(this.setCursor(k),this.__restoreCursor=null);this.activateKeyDown!==h.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=t.SimpleButtonStyle=new v("SimpleButtonStyle",{include:[e],setActiveColor:function(k){this.activeColor!==k&&(this.activeColor=k,this.inited&&this.updateUI())},setHoverColor:function(k){this.hoverColor!==k&&(this.hoverColor=k,this.inited&&this.updateUI())},setReadyColor:function(k){this.readyColor!==
k&&(this.readyColor=k,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(k,n=1){this.setOpacity(n);this.setBgColor(k)}});const g=t.SimpleButton=new x("SimpleButton",u,{include:[e],initNode:function(k,n){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(k,
n)}});t.SimpleTextButton=new x("SimpleTextButton",g,{initNode:function(k,n){this.inset=this.outset=0;n.shrinkToFit??(n.shrinkToFit=!1);n.height??(n.height=24);n.textY??(n.textY="middle");this.callSuper(k,n);k=this.textY;n={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof k?n.valign=k:n.y=k;k=this.textView=new t.Text(this,n);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",k,"visible",k,"width",
k,"height",k,"y"])},setInset:function(k){this.set("inset",this.valueFromEvent(k),!0)},setOutset:function(k){this.set("outset",this.valueFromEvent(k),!0)},setText:function(k){this.text!==k&&(this.text=k,this.inited&&(this.textView.setText(k),this.fireEvent("text",k)))},setShrinkToFit:function(k){this.shrinkToFit!==k&&(this.shrinkToFit=k,this.inited&&(this.textView.setWhiteSpace(k?"nowrap":"normal"),this.fireEvent("shrinkToFit",k)))},setTextY:function(k){if(this.textY!==k&&(this.textY=k,this.inited)){const n=
this.textView;this.fireEvent("textY",k);"string"===typeof k?n.setValign(k):(n.setValign(""),n.setY(k))}},__updateContent:function(k){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:n,outset:b,textView:d}=this;this.__updateContentLoopBlock=!0;d.setX(n);this.shrinkToFit?this.setWidth(n+(d.visible&&this.text?d.width:0)+b):d.setWidth(this.width-n-b);this.__updateContentLoopBlock=!1}}});t.TextButton=new x("TextButton",t.PaddedText,{include:[e],initNode:function(k,n){n.focusIndicator??
(n.focusIndicator=!1);n.roundedCorners??(n.roundedCorners=3);n.textAlign??(n.textAlign="center");n.paddingTop??(n.paddingTop=1);n.height??(n.height=23-(n.paddingTop??0));n.activeColor??(n.activeColor="#ddd");n.hoverColor??(n.hoverColor="#eee");n.readyColor??(n.readyColor="#fff");this.callSuper(k,n)}})})(myt);
(t=>{const x=console.warn,{focus:v,mouse:u,windowResize:h}=t.global,e={};t.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:g=>e[g]},initNode:function(g,k){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(g,k)},setLastFloatingPanelShown:function(g){this.lastFloatingPanelShown=g},setLastFloatingPanelId:function(g){this.floatingPanelId=
g},setFloatingAlign:function(g){this.set("floatingAlign",g,!0)},setFloatingValign:function(g){this.set("floatingValign",g,!0)},setFloatingAlignOffset:function(g){this.set("floatingAlignOffset",g,!0)},setFloatingValignOffset:function(g){this.set("floatingValignOffset",g,!0)},setKeepInWindow:function(g){this.set("keepInWindow",g,!0)},setKeepInWindowBorder:function(g){this.set("keepInWindowBorder",g,!0)},createFloatingPanel:function(g,k,n){g=g??this.floatingPanelId;n=n??{};n.panelId=g;return e[g]=new k(null,
n)},getFloatingPanel:function(g){return e[g??this.floatingPanelId]},toggleFloatingPanel:function(g){this.getFloatingPanel(g??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(g):this.showFloatingPanel(g)},showFloatingPanel:function(g){if(g=this.getFloatingPanel(g??this.floatingPanelId))g.show(this),this.setLastFloatingPanelShown(g)},hideFloatingPanel:function(g){if(g=this.getFloatingPanel(g??this.floatingPanelId))g.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(g){this.callSuper?.()},
notifyPanelHidden:function(g){this.callSuper?.()},getFloatingAlignForPanel:function(g){return this.floatingAlign},getFloatingValignForPanel:function(g){return this.floatingValign},getFloatingAlignOffsetForPanel:function(g){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(g){return this.floatingValignOffset},getNextFocus:function(){const g=this.lastFloatingPanelShown;return g?.isShown()?g:this.callSuper?.()},getNextFocusAfterPanel:function(g){return this},getPrevFocusAfterPanel:function(g){return this}});
t.FloatingPanel=new JS.Class("FloatingPanel",t.View,{include:[t.RootView],initNode:function(g,k){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;k.visible=k.focusIndicator=!1;k.focusable=k.focusCage=!0;this.callSuper(g,k)},setOwner:function(g){this.owner=g},setPanelId:function(g){this.panelId=g},setIgnoreOwnerForHideOnMouseDown:function(g){this.ignoreOwnerForHideOnMouseDown=g},setHideOnBlur:function(g){this.hideOnBlur=g},setHideOnMouseDown:function(g){this.hideOnMouseDown=
g},setWidth:function(g){const k=this.width;this.callSuper(g);this.isShown()&&k!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(g){const k=this.height;this.callSuper(g);this.isShown()&&k!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(g){var k=g.value;g=k.pageX;k=k.pageY;this.containsPoint(g,k)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(g,k)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(g){this.hideOnMouseDown&&
this.hide(g)},focus:function(g){if(this.owner&&this.isAncestorOf(v.focusedView))this.owner[(v.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(g);else{const k=this.getFirstFocusableDescendant();k===this?this.callSuper(g):k.focus(g)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(g){(g=g.value)&&!this.isAncestorOf(g)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&v.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(g){this.isShown()||(this.bringToFront(),this.updateLocation(g),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(u,"__doMouseDown","mousedown",!0),this.attachTo(v,"__doFocusChange","focused"))},hide:function(g){this.isShown()&&(this.detachFromDom(u,"__doMouseDown","mousedown",!0),this.detachFrom(v,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),g||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(g){this.setOwner(g);this.updateLocationX(g);this.updateLocationY(g)},updateLocationX:function(g){const k=g.getFloatingAlignForPanel(this),n=typeof k;let b;if("string"===n){b=g.getPagePosition().x+g.getFloatingAlignOffsetForPanel(this);switch(k){case "outsideRight":b+=g.width;break;case "insideRight":b+=g.width-this.width;break;case "outsideLeft":b-=this.width;break;case "insideLeft":break;default:x("Invalid align value",n,k)}g.keepInWindow&&
(g=b+this.width+(g.keepInWindowBorder||0)-h.getWidth(),0<g&&(b-=g))}else"number"===n?b=k:x("Invalid align type",n,k);this.setX(b)},updateLocationY:function(g){const k=g.getFloatingValignForPanel(this),n=typeof k;let b;if("string"===n){b=g.getPagePosition().y+g.getFloatingValignOffsetForPanel(this);switch(k){case "outsideBottom":b+=g.height;break;case "insideBottom":b+=g.height-this.height;break;case "outsideTop":b-=this.height;break;case "insideTop":break;default:x("Invalid valign value",n,k)}g.keepInWindow&&
(g=b+this.height+(g.keepInWindowBorder||0)-h.getHeight(),0<g&&(b-=g))}else"number"===n?b=k:x("Invalid valign type",n,k);this.setY(b)}})})(myt);
(t=>{const {Class:x,Module:v}=JS,u=Math,{View:h,global:e}=t,g=e.focus,k=e.keys,{LIST_KEYS:n,CODE_ESC:b}=k,d=f=>{const c=f.itemConfig??[],p=c.length,{items:w,defaultItemClass:r,fixedWidth:m}=f,A=w.length,H=0<m,z=f.getContentView(),C=z.getLayouts();let J=0;for(var M of C)M.incrementLockedCounter();h.doWhileRemovedFromDom(z,()=>{const O={listView:f};H&&(O.width=m,O.enableEllipsis=!0);for(;p>J;++J){var l=c[J];const q=l.klass??r;l=l.attrs??{};let y=w[J];y&&!y.isA(q)&&(y.destroy(),y=null);y??=w[J]=new q(z,
{...O});y&&(y.callSetters(l),y.__LAYOUT_IDX=J)}});if(H)M=m;else for(M=f.minWidth,J=0;p>J;){const O=w[J++];O.syncToDom();M=u.max(M,O.getMinimumWidth())}for(;A>J;)w[J++].destroy();w.length=p;if(!H)for(J=0;p>J;)f.updateItemWidth(w[J++],M);f.updateContentWidth(z,M);for(const O of C)O.sortSubviews((l,q)=>l.__LAYOUT_IDX-q.__LAYOUT_IDX),O.decrementLockedCounter(),O.update()},a=t.ListViewItemMixin=new v("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
t.ListView=new x("ListView",t.FloatingPanel,{initNode:function(f,c){this.items=[];this.maxHeight=-1;this.minWidth=0;c.defaultItemClass??(c.defaultItemClass=t.ListViewItem);c.overflow??(c.overflow="autoy");c.bgColor??(c.bgColor="#ccc");c.boxShadow??(c.boxShadow=t.Button.FOCUS_SHADOW);this.callSuper(f,c);d(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new t.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&d(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?u.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,c)=>{f.setWidth(c)},updateContentWidth:(f,c)=>{f.setWidth(c)}});t.ListViewAnchor=new v("ListViewAnchor",{include:[t.FloatingPanelAnchor,t.ArrowKeyActivation],initNode:function(f,
c){c.listViewClass??(c.listViewClass=t.ListView);c.listViewAttrs??(c.listViewAttrs={});c.itemConfig??(c.itemConfig=[]);c.activationKeys??(c.activationKeys=n);this.callSuper(f,c)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var c=f.height,p=this.getPagePosition().y,w=e.windowResize.getHeight()-this.getPagePosition().y-this.height;f=p-c;c=w-c;p=p>w;w=this.floatingValign;
switch(w){case "outsideBottom":0>c&&p&&(w="outsideTop");break;case "insideBottom":0>c&&p&&(w="insideTop");break;case "outsideTop":0>f&&!p&&(w="outsideBottom");break;case "insideTop":0>f&&!p&&(w="insideBottom")}return w},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const c=this.getFloatingPanel(f);c&&(c.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,c){f===b?this.hideFloatingPanel():this.callSuper(f,c)},doKeyArrowLeftOrUp:function(f,c){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,c){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==b)switch(this.callSuper(f),f){case k.CODE_ARROW_LEFT:case k.CODE_ARROW_UP:this.focusToLastItem();break;case k.CODE_ARROW_RIGHT:case k.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,c,p){(f=this.getEntryByValue(f))&&(f.attrs[c]=p);return f},getEntryByValue:function(f){return this.itemConfig.find(c=>c?.attrs&&c.attrs.value===f)}});t.ListViewItem=new x("ListViewItem",t.TextButton,{include:[a,t.ArrowKeyActivation],initNode:function(f,c){c.activeColor??(c.activeColor="#bbb");c.hoverColor??(c.hoverColor="#fff");c.readyColor??(c.readyColor="#eee");c.paddingLeft??
(c.paddingLeft=8);c.paddingRight??(c.paddingRight=8);c.textAlign??(c.textAlign="left");c.roundedCorners??(c.roundedCorners=0);c.activationKeys??(c.activationKeys=n);c.focusIndicator??(c.focusIndicator=!0);const p=this.__enableEllipsis=c.enableEllipsis;delete c.enableEllipsis;this.callSuper(f,c);this.addDomClass("mytButtonText");p&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return u.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,c){f===b?this.listView.owner.hideFloatingPanel():this.callSuper(f,c)},doKeyArrowLeftOrUp:function(f,c){g.prev()},doKeyArrowRightOrDown:function(f,c){g.next()}});t.ListViewSeparator=new x("ListViewSeparator",h,{include:[a],initNode:function(f,c){c.height??(c.height=1);c.bgColor??(c.bgColor="#666");this.callSuper(f,c)}})})(myt);
(t=>{const x=t.AccessorSupport,v=x.generateSetterName,u={},h=t.BAG=new JS.Class("BAG",{include:[x,t.Destructible,t.Observable],extend:{getGroup:(e,g)=>{if(e&&g){let k;return(k=u[e]??(u[e]={}))[g]??(k[g]=new h(e,g))}},removeGroup:(e,g)=>{if(e&&g&&(e=u[e])){const k=e[g];k&&delete e[g];return k}}},initialize:function(e,g){this.__nodes=[];this.trueNode=null;this.attrName=e;this.groupId=g},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&h.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(e){this.set("groupId",e,!0)},setAttrName:function(e){this.set("attrName",e,!0)},setTrueNode:function(e){this.set("trueNode",e,!0)},getNodes:function(){return this.__nodes},register:function(e){e&&!this.isRegistered(e)&&(this.__nodes.push(e),e[this.attrName]&&this.setTrue(e))},unregister:function(e){if(e){const g=this.__nodes,k=g.indexOf(e);-1<k&&g.splice(k,1);this.trueNode===e&&this.setTrueNode(null);0===g.length&&
this.destroy()}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){const g=this.attrName,k=v(g),n=this.__nodes;let b=n.length;for(this.setTrueNode(e);b;){const d=n[--b];if(e===d){if(!d[g])d[k](!0)}else if(d[g])d[k](!1)}}},setFalse:function(e){e&&this.trueNode===e&&(e[v(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(e){return this.__nodes.includes(e)}});t.BAGMembership=new JS.Module("BAGMembership",{initNode:function(e,g){this.__bags=[];this.callSuper(e,g)},destroy:function(){const e=
this.__bags;let g=e.length;for(;g;){const k=e[--g];this.removeFromBAG(k.attrName,k.groupId)}this.callSuper()},isRegisteredWithBAG:function(e){return this.__bags.includes(e)},getBAG:(e,g)=>h.getGroup(e,g),addToBAG:function(e,g){g=this.getBAG(e,g);this.isRegisteredWithBAG(g)||(this.__bags.push(g),g.register(this),this.isAttachedTo(this,"__updateForBAG",e)||this.attachTo(this,"__updateForBAG",e))},removeFromBAG:function(e,g){g=this.getBAG(e,g);if(this.isRegisteredWithBAG(g)){const k=this.__bags;let n=
k.length,b=!0;for(;n;){const d=k[--n];d===g?(k.splice(n,1),g.unregister(this)):d.attrName===e&&(b=!1)}b&&this.detachFrom(this,"__updateForBAG",e)}},__updateForBAG:function(e){for(const g of this.__bags)if(g.attrName===e.type)g[e.value?"setTrue":"setFalse"](this)}})})(myt);
(t=>{const x=v=>{const u=v.label||"";v.setText('<i class="far fa-'+(!0===v.selected?"dot-":"")+'circle"></i>'+(0<u.length?" ":"")+u)};t.Radio=new JS.Class("Radio",t.Text,{include:[t.SimpleButtonStyle,t.BAGMembership],initNode:function(v,u){u.selected??(u.selected=!1);u.groupId??(u.groupId=t.generateGuid());u.focusIndicator??(u.focusIndicator=!1);u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor="inherit");u.readyColor??(u.readyColor="inherit");const h=u.value;delete u.value;this.callSuper(v,
u);this.setValue(h);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);t.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(v){this.set("optionValue",v,!0)},setValue:function(v){if(this.inited){const u=this.getBAG("selected",this.groupId);if(u){const h=u.getNodes();let e=h.length;for(;e;){const g=h[--e];if(g.optionValue===v){u.setTrue(g);break}}}}},getValue:function(){var v=this.getBAG("selected",this.groupId);return(v=v?v.trueNode:null)?v.optionValue:null},
setSelected:function(v){this.selected!==v&&(this.selected=v,this.inited&&(this.fireEvent("selected",v),x(this)))},setGroupId:function(v){if(this.groupId!==v){const u=this.groupId;this.groupId=v;u&&this.removeFromBAG("selected",u);v&&this.addToBAG("selected",v);this.inited&&this.fireEvent("groupId",v)}},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(v,u=1){this.setOpacity(u);this.setTextColor(v)}})})(myt);
(t=>{const x=JS.Module,v=t.global.keys,u=t.Selectable=new x("Selectable",{setSelected:function(e){e=this.valueFromEvent(e);this.selected!==e&&(this.selected=e,this.inited&&this.fireEvent?.("selected",e))},isSelected:function(){return!!this.selected},canSelect:e=>!0,canDeselect:e=>!0}),h=t.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>v.isShiftKeyDown(),isToggleMode:()=>v.isAcceleratorKeyDown()},initNode:function(e,g){this.__selected={};this.__lastSelectedItem=null;g.selectedCount=
0;g.itemSelectionId??(g.itemSelectionId="id");g.maxSelected??(g.maxSelected=-1);this.callSuper(e,g)},setItemSelectionId:function(e){this.itemSelectionId=e},setMaxSelected:function(e){this.maxSelected=e},setSelectedCount:function(e){this.selectedCount!==e&&(this.selectedCount=e,this.inited&&this.fireEvent("selectedCount",e))},isAddMode:()=>h.isAddMode(),isToggleMode:()=>h.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(e){e&&!this.isSelectedItem(e)&&this.canSelectItem(e)&&
(e.setSelected(!0),this.__selected[e[this.itemSelectionId]]=e,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=e,this.doSelected(e),this.fireEvent("itemSelected",e))},doSelected:e=>{},selectById:function(e){this.select(this.getSelectableItem(e))},canSelectItem:function(e){const {maxSelected:g,selectedCount:k}=this;if(0===g)return!1;if(1===g){if(0<k&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<g&&k>=g)return!1;return e.canSelect(this)},selectAll:function(){const e=
this.getSelectableItems();let g=e.length;for(;g;)this.select(e[--g])},deselect:function(e){this.isSelectedItem(e)&&this.canDeselectItem(e)&&(e.setSelected(!1),delete this.__selected[e[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===e&&(this.__lastSelectedItem=null),this.doDeselected(e),this.fireEvent("itemDeselected",e))},doDeselected:e=>{},deselectById:function(e){this.deselect(this.getSelectableItem(e))},canDeselectItem:function(e){return e.canDeselect(this)},
deselectAll:function(){const e=this.__selected;for(const g in e)this.deselect(e[g])},isSelectedItem:e=>e?e.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const e=[],g=this.getSubviews();let k=g.length;for(;k;){const n=g[--k];n.isA(u)&&e.push(n)}return e},getSelectableItems:function(){const e=this.getManagedItems();let g=e.length;for(;g;)e[--g].canSelect(this)||e.splice(g,1);return e},getSelectableItem:function(e){const g=
this.getSelectableItems(),k=this.itemSelectionId;let n=g.length;for(;n;){const b=g[--n];if(b[k]===e)return b}}})})(myt);
(t=>{const x=JS.Class,{View:v,SizeToParent:u,LocalStorage:h,debounce:e}=t,g=t.TabSlider=new x("TabSlider",v,{include:[t.Selectable,t.Disableable,u],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(b,d){const a=this;let f;const c=d.noWrapperContainer;delete d.noWrapperContainer;d.defaultPlacement=c?"wrapper":"wrapper.container";d.percentOfParentWidth=100;d.expansionState="collapsed";d.tabId??(d.tabId=t.generateGuid());
d.tabContainer??(d.tabContainer=b);d.selected??(d.selected=!1);d.buttonClass??(d.buttonClass=t.SimpleButton);d.zIndex??(d.zIndex=0);d.buttonHeight??(d.buttonHeight=30);d.fillColorSelected??(d.fillColorSelected="#666");d.fillColorHover??(d.fillColorHover="#eee");d.fillColorActive??(d.fillColorActive="#ccc");d.fillColorReady??(d.fillColorReady="#fff");d.minContainerHeight??(d.minContainerHeight=100);d.layoutPaddingY??(d.layoutPaddingY=0);d.wrapperExpandedOverflow??(d.wrapperExpandedOverflow="autoy");
d.selected&&(f=!0,delete d.selected);a.callSuper(b,d);a.button=new a.buttonClass(a,{ignorePlacement:!0,zIndex:1,height:a.buttonHeight,focusIndicator:!0,groupId:a.parent.parent.groupId,percentOfParentWidth:100,hoverColor:a.fillColorHover,activeColor:a.fillColorActive,readyColor:a.fillColorReady},[u,{doActivated:()=>{const p=a.tabContainer;a.isSelected()&&1!==p.maxSelected?p.deselect(a):p.select(a)},updateUI:function(){this.callSuper();a.selected&&-1!==a.tabContainer.maxSelected&&this.setBgColor(a.fillColorSelected);
a.notifyButtonRedraw()}}]);b=a.wrapper=new v(a,{ignorePlacement:!0,y:a.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[u,{setHeight:function(p){this.callSuper(Math.round(p))},setWidth:function(p){this.callSuper(p);this.inited&&this.container?.setWidth(p)}}]);c||(a._wrapperLayout=new t.SizeToChildren(b.container=new v(b),{axis:"y",paddingY:a.layoutPaddingY}));a.constrain("__updateHeight",[b,"y",b,"height"]);f&&a.tabContainer.select(a);!0===d.disabled&&a.setDisabled(!0);
a.setHeight(a.getCollapsedHeight())},setSelected:function(b){this.callSuper(b);this.button?.updateUI()},setTabId:function(b){this.tabId=b},setTabContainer:function(b){this.tabContainer=b},setLayoutPaddingY:function(b){this.layoutPaddingY=b;this.inited&&this._wrapperLayout?.setPaddingY(b)},setMinContainerHeight:function(b){this.minContainerHeight=b},setButtonClass:function(b){this.buttonClass=b},setFillColorSelected:function(b){this.fillColorSelected=b},setFillColorHover:function(b){this.fillColorHover=
b},setFillColorActive:function(b){this.fillColorActive=b},setFillColorReady:function(b){this.fillColorReady=b},setWrapperExpandedOverflow:function(b){this.wrapperExpandedOverflow=b},setButtonHeight:function(b){this.buttonHeight!==b&&(this.buttonHeight=b,this.button&&(this.button.setHeight(b),this.wrapper.setY(b)))},setExpansionState:function(b){if(this.expansionState!==b){this.expansionState=b;this.inited&&this.fireEvent("expansionState",b);const d=this.wrapper;d&&("expanded"===b?(d.setMaskFocus(!1),
d.setOverflow(this.wrapperExpandedOverflow),this.tabContainer?.saveState()):"expanding"===b?d.setVisible(!0):"collapsed"===b?(d.setVisible(!1),this.tabContainer?.saveState()):"collapsing"===b&&(d.setMaskFocus(!0),d.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(b){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(b){const d=this,a=d.wrapper;b-=d.getCollapsedHeight();d.setExpansionState("expanding");
a.stopActiveAnimators();if(a.height!==b){const f=d.tabContainer.duration;1===f?(a.setHeight(b),d.setExpansionState("expanded")):a.animate({attribute:"height",to:b,duration:f}).next(c=>{d.setExpansionState("expanded")})}else d.setExpansionState("expanded")},collapse:function(){const b=this,d=b.wrapper;b.setExpansionState("collapsing");d.stopActiveAnimators();if(0!==d.height){const a=b.tabContainer.duration;1===a?(d.setHeight(0),b.setExpansionState("collapsed")):d.animate({attribute:"height",to:0,duration:a}).next(f=>
{b.setExpansionState("collapsed")})}else b.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container?.height}}),k=(b,d,a,f)=>{b[d]!==f&&(b[d]=f,b.button?.label?.set(labelAttrName,f))};t.TextTabSlider=new x("TextTabSlider",g,{initNode:function(b,d){this.labelTextColorChecked=
"#fff";this.labelTextColor="#333";this.labelAlign="center";this.labelValign="middle";this.labelFontSize="16px";this.labelFontWeight="bold";d.labelTextColorChecked??(d.labelTextColorChecked="#fff");d.labelTextColor??(d.labelTextColor="#333");d.labelAlign??(d.labelAlign="center");d.labelValign??(d.labelValign="middle");d.labelFontSize??(d.labelFontSize="16px");d.labelFontWeight??(d.labelFontWeight="bold");this.callSuper(b,d);this.button.label=new t.Text(this.button,{ignorePlacement:!0,fontSize:this.labelFontSize,
fontWeight:this.labelFontWeight,text:this.text,align:this.labelAlign,valign:this.labelValign,textColor:this.__getTextColor()})},setLabelTextColorChecked:function(b){this.labelTextColorChecked!==b&&(this.labelTextColorChecked=b,this.notifyButtonRedraw())},setLabelTextColor:function(b){this.labelTextColor!==b&&(this.labelTextColor=b,this.notifyButtonRedraw())},setLabelAlign:function(b){k(this,"labelAlign","align",b)},setLabelValign:function(b){k(this,"labelValign","valign",b)},setLabelFontSize:function(b){k(this,
"labelFontSize","fontSize",b)},setLabelFontWeight:function(b){k(this,"labelFontWeight","fontWeight",b)},setText:function(b){k(this,"text","text",b)},notifyButtonRedraw:function(){this.button?.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const n=t.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[t.SelectionManager],extend:{SPACING:1},initNode:function(b,
d){const a=this;a._tabSliders=[];d.defaultPlacement="container";d.spacing??(d.spacing=n.SPACING);d.overflow??(d.overflow="autoy");d.itemSelectionId??(d.itemSelectionId="tabId");d.maxSelected??(d.maxSelected=1);d.duration??(d.duration=500);a.updateLayout=e(a.updateLayout);a.callSuper(b,d);b=a.container=new v(a,{ignorePlacement:!0,percentOfParentWidth:100},[u,{subnodeAdded:function(f){this.callSuper(f);f instanceof g&&(a._tabSliders.push(f),a.attachTo(f,"updateLayout","selected"))},subnodeRemoved:function(f){if(f instanceof
g){const c=a._tabSliders,p=c.indexOf(f);-1<p&&(a.detachFrom(f,"updateLayout","selected"),c.splice(p,1))}this.callSuper(f)}}]);b.layout=new t.SpacedLayout(b,{axis:"y",spacing:a.spacing,collapseParent:!0});a.attachTo(a,"updateLayout","height")},setPersistenceId:function(b){this.persistenceId=b},getTabSliders:function(){return this._tabSliders},getTabSliderById:function(b){for(const d of this._tabSliders)if(d.tabId===b)return d},setSpacing:function(b){this.spacing!==b&&(this.spacing=b,this.layout?.setSpacing(b))},
setDuration:function(b){this.duration=b},updateLayout:function(b,d){b=this._tabSliders;for(var a=b.length,f=a,c=0,p=0,w=0;f;){var r=b[--f];r.visible&&(++w,r.selected?(c+=r.getMinimumExpandedHeight(),p+=r.getPreferredExpandedHeight()):(r=r.getCollapsedHeight(),c+=r,p+=r))}f=this.container.layout;w=f.inset+f.outset+f.spacing*(w-1);p+=w;f=this.height;c=c+w>f;w=p>f;r=this.duration;p-=f;0<d&&this.setDuration(d);for(f=a;f;)if(a=b[--f],a.visible)if(a.selected){let m;if(c)m=a.getMinimumExpandedHeight();else if(w){const A=
a.getPreferredExpandedHeight(),H=a.getMinimumExpandedHeight();m=A-p;H>m?(p-=A-H,m=H):p=0}else m=a.getPreferredExpandedHeight();a.expand(m)}else a.collapse();0<d&&this.setDuration(r)},readState:b=>h.getDatum(b),writeState:(b,d)=>{h.setDatum(b,d)},saveState:e(function(){const b=[];for(const d of this.getTabSliders())"expanded"===d.expansionState&&b.push(d.tabId);this.writeState(this.persistenceId,b)},1E3),restoreState:function(b){for(const d of this.readState(this.persistenceId)||b)this.select(this.getTabSliderById(d))}})})(myt);
(t=>{const x=h=>{const e=[];switch(h.tabContainer.location){case "top":e.push("TopLeft","TopRight");break;case "bottom":e.push("BottomLeft","BottomRight");break;case "left":e.push("TopLeft","BottomLeft");break;case "right":e.push("TopRight","BottomRight")}for(const g of e)h["setRounded"+g+"Corner"](h.cornerRadius||0)},v=t.Tab=new JS.Class("Tab",t.SimpleTextButton,{include:[t.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(h,e){e.tabId??(e.tabId=t.generateGuid());e.tabContainer??(e.tabContainer=
h);let g;e.selected&&(g=!0,delete e.selected);e.inset??(e.inset=v.INSET);e.outset??(e.outset=v.OUTSET);e.selectedColor??(e.selectedColor="#fff");e.hoverColor??(e.hoverColor="#eee");e.activeColor??(e.activeColor="#aaa");e.readyColor??(e.readyColor="#ccc");e.labelTextSelectedColor??(e.labelTextSelectedColor="#333");e.height??(e.height=24);e.focusIndicator??(e.focusIndicator=!1);e.cornerRadius??(e.cornerRadius=6);this.callSuper(h,e);g&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(h){this.tabId=h},setTabContainer:function(h){this.tabContainer=h},setSelectedColor:function(h){this.selectedColor=h},setLabelTextColor:function(h){this.labelTextColor=h},setCornerRadius:function(h){this.cornerRadius=h;this.inited&&x(this)},setLabelTextSelectedColor:function(h){this.labelTextSelectedColor=h;this.inited&&this.selected&&this.textView.setTextColor(h)},setSelected:function(h){this.callSuper(h);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),u=t.TabContainer=new JS.Module("TabContainer",{include:[t.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(h,e){this.__tabs=[];e.spacing??(e.spacing=u.SPACING);e.inset??(e.inset=u.INSET);e.location??(e.location="top");e.itemSelectionId??
(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);const g=e.collapse??!0;delete e.collapse;this.callSuper(h,e);this.layout=new t.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:g})},setLocation:function(h){this.location=h},setSpacing:function(h){this.spacing!==h&&(this.spacing=h,this.layout?.setSpacing(h))},setInset:function(h){this.inset!==h&&(this.inset=h,this.layout?.setInset(h))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(h){this.callSuper(h);if(h.isA(v))switch(this.__tabs.push(h),this.location){case "top":h.setValign("bottom");break;case "bottom":h.setValign("top");break;case "left":h.setAlign("right");break;case "right":h.setAlign("left")}},subnodeRemoved:function(h){if(h.isA(v)){const e=this.__tabs,g=e.indexOf(h);-1<g&&e.splice(g,1)}this.callSuper(h)}})})(myt);
(t=>{const x=JS.Class,v=Math.min,u=Array.isArray,{SizeToDom:h,View:e,Disableable:g,KeyObservable:k,Button:{FOCUS_SHADOW:n},global:{keys:b}}=t,d=(r,m,A)=>{r[A]!==m&&(r[A]=m,r.getIDS()[A]=m+"px",r.inited&&(r.fireEvent(A,m),r.sizeViewToDom()))},a=(r,m,A)=>{r[m]!==A&&(r.getIDE()[m]=r[m]=A,r.inited&&r.fireEvent(m,A))},f=t.NativeInputWrapper=new x("NativeInputWrapper",e,{include:[g,t.InputObservable],initNode:function(r,m){m.tagName??(m.tagName="input");m.focusable??(m.focusable=!0);this.callSuper(r,m);
this.addDomClass("mytNativeInput")},createOurDomElement:function(r){r=this.callSuper(r);this.inputType&&((u(r)?r[1]:r).type=this.inputType);return r},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){this.value!==r&&(this.value=r,this.setDomValue(r),this.inited&&this.fireEvent("value",r))},getDomValue:function(){return this.getIDE().value},setDomValue:function(r){const m=this.getIDE();m.value!==r&&(m.value=r)}}),c=t.InputSelectOption=new x("InputSelectOption",
e,{include:[g,t.Selectable],createOurDomElement:r=>document.createElement("option"),setSelected:function(r){r=this.valueFromEvent(r);const m=this.getIDE();m.selected!==r&&(m.selected=r)},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){a(this,"value",r)},setLabel:function(r){this.label!==r&&(this.getIDE().textContent=this.label=r,this.inited&&this.fireEvent("label",r))},isSelected:function(){return this.getIDE().selected},canSelect:function(r){return!this.disabled&&
!this.getIDE().selected&&this.parent===r},canDeselect:function(r){return!this.disabled&&this.getIDE().selected&&this.parent===r}}),p=t.BaseInputText=new x("BaseInputText",f,{include:[t.TextSupport],initNode:function(r,m){m.bgColor??(m.bgColor="transparent");m.spellcheck??(m.spellcheck=!1);this.callSuper(r,m);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(r){this.callSuper(r);this.setValue(r)},
setSpellcheck:function(r){a(this,"spellcheck",r)},setMaxLength:function(r){a(this,"maxLength",null==r||0>r?void 0:r)},setAllowedChars:function(r){this.allowedChars=r},setPlaceholder:function(r){a(this,"placeholder",r)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(n)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(r){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(r){const m=
r.value,A=this.allowedChars;A&&!A.includes(k.getKeyFromEvent(r))&&m.preventDefault();this.filterInputPress(m)},filterInput:r=>r,filterInputPress:r=>{},__syncToDom:function(r){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const r=document.selection.createRange();r.moveStart("character",-this.getDomValue().length);return r.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(r,m){if(null==m||r===m){if(this.getCaretPosition()===r)return;
m=r}var A=this.getIDE();A.setSelectionRange?A.setSelectionRange(r,m):A.createTextRange&&(A=A.createTextRange(),A.collapse(!0),A.moveEnd("character",m),A.moveStart("character",r),A.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const r=this.getIDE();return{start:r.selectionStart,startElem:r,end:r.selectionEnd,endElem:r}},setSelection:function(r){r&&
this.setCaretPosition(r.start,r.end)},saveSelection:function(r){this._selRange=r||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),w=t.InputText=new x("InputText",p,{include:[t.SizeHeightToDom],initNode:function(r,m){this.inputType=!0===m.password?"password":"text";this.callSuper(r,m);this.setCaretToEnd()},setPassword:function(r){this.set("password",r,!0);this.inited&&(this.getIDE().type=r?"password":"text")}});t.InputTextMouseFixMixin=new JS.Module("InputTextMouseFixMixin",
{initNode:function(r,m){this.callSuper(r,m);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},createDomHandler:function(r,m,A){return"mousedown"===A||"mouseup"===A?this.createStandardDomHandler(r,m,A,t.MouseObservable,!1):this.callSuper(r,m,A)},doMouseDown:r=>{},doMouseUp:r=>{}});t.EditableText=new x("EditableText",p,{include:[h],initNode:function(r,m){m.tagName??(m.tagName="div");m.inputType=null;m.whiteSpace??(m.whiteSpace="pre");m.contentEditable??(m.contentEditable=
!0);this.callSuper(r,m);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(r){d(this,r,"minWidth")},setMinHeight:function(r){d(this,r,"minHeight")},setPadding:function(r){this.setPaddingTop(r);this.setPaddingRight(r);this.setPaddingBottom(r);this.setPaddingLeft(r)},setPaddingTop:function(r){d(this,r,"paddingTop")},setPaddingRight:function(r){d(this,r,"paddingRight")},
setPaddingBottom:function(r){d(this,r,"paddingBottom")},setPaddingLeft:function(r){d(this,r,"paddingLeft")},setContentEditable:function(r){a(this,"contentEditable",r)},filterInputPress:function(r){const m=this.maxLength;0<=m&&this.getCharacterCount()===m&&r.preventDefault();this.callSuper(r)},getDomValue:function(){return this.getIDE().innerHTML},setDomValue:function(r){const m=this.getIDE();m.innerHTML!==r&&(m.innerHTML=r,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(r){k.isEnterKeyEvent(r)&&
(r.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(r){this.callSuper(r);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(r,m){if(null==m||r===
m){if(this.getCaretPosition()===r)return;m=r}this.saveSelection({start:r,startElem:this.getIDE().firstChild,end:m,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(r){this.saveSelection();return!0},getSelection:function(){let r;if(window.getSelection){const m=window.getSelection();if(0<m.rangeCount){if(m.extentNode===this.getIDE())return;r=m.getRangeAt(0)}}else document.selection&&(r=document.selection.createRange());return{start:r?
r.startOffset:0,startElem:r?r.startContainer:this.getIDE().firstChild,end:r?r.endOffset:0,endElem:r?r.endContainer:this.getIDE().firstChild}},setSelection:function(r){if(r){const {startElem:m,endElem:A}=r;if(m&&m.parentNode&&A&&A.parentNode){const H=document.createRange();H.setStart(m,v(r.start,m.length));H.setEnd(A,v(r.end,A.length));window.getSelection?(r=window.getSelection(),0<r.rangeCount&&r.removeAllRanges(),r.addRange(H)):document.selection&&H.select()}}}});t.InputTextArea=new x("InputTextArea",
p,{initNode:function(r,m){m.tagName??(m.tagName="textarea");m.inputType=null;m.resize??(m.resize="none");m.wrap??(m.wrap="soft");this.callSuper(r,m)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(r){const m=this;m.resize!==r&&(r=m.resize=m.getIDS().resize=r||"none",m.inited&&m.fireEvent("resize",r),"none"!==r&&(m.__resizeObserver??(m.__resizeObserver=new ResizeObserver(()=>{m.doResize()}))).observe(m.getIDE()))},setWrap:function(r){a(this,
"wrap",r)},doResize:function(){const r=this.resize;"both"!==r&&"horizontal"!==r||h.sizeWidth(this);"both"!==r&&"vertical"!==r||h.sizeHeight(this)}});t.ComboBox=new x("ComboBox",w,{include:[t.Activateable,t.KeyActivation,t.ListViewAnchor],initNode:function(r,m){this.filterItems=!0;m.activationKeys??(m.activationKeys=[b.CODE_ENTER,b.CODE_ESC,b.CODE_ARROW_UP,b.CODE_ARROW_DOWN]);m.bgColor??(m.bgColor="#fff");m.borderWidth??(m.borderWidth=1);m.borderStyle??(m.borderStyle="solid");m.floatingAlignOffset??
(m.floatingAlignOffset=m.borderWidth);m.fullItemConfig??(m.fullItemConfig=[]);m.listViewAttrs={...m.listViewAttrs,maxHeight:m.listViewAttrs?.maxHeight??99};this.callSuper(r,m)},setFullItemConfig:function(r){this.fullItemConfig=r},setFilterItems:function(r){this.filterItems=r},__syncToDom:function(r){const m=this.value;this.callSuper(r);m!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(r){const m=this.getFloatingPanel(r);if(m){let H;if(this.filterItems){H=[];var A=this.value;A=null==
A?"":(""+A).toLowerCase();const z=this.fullItemConfig,C=z.length;for(let J=0;C>J;){const M=z[J++],O=M.attrs.text.toLowerCase(),l=O.indexOf(A);0===l?O!==A&&H.push(M):0<l&&H.push(M)}}else H=this.fullItemConfig;0<H.length?(m.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(H),this.callSuper(r)):this.hideFloatingPanel(r)}},doItemActivated:function(r){this.setValue(null==r.value?r.text:r.value);this.callSuper(r)},doActivated:function(){this.toggleFloatingPanel()}});t.InputSelect=new x("InputSelect",
f,{include:[h],initNode:function(r,m){m.tagName??(m.tagName="select");m.inputType=null;m.multiple??(m.multiple=!1);m.size??(m.size=m.multiple?4:1);this.callSuper(r,m);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(r){a(this,"multiple",r)},setSize:function(r){a(this,"size",r)},setOptions:function(r){this.destroyAllOptions();if(u(r))for(const m of r)this.addOption(m)},getOptions:function(){return this.getSubviews().slice()},setValue:function(r){u(r)&&t.areArraysEqual(r,
this.value)||this.value===r||(this.value=r,this.inited&&this.fireEvent("value",r))},subviewAdded:function(r){r instanceof c||(t.dumpStack("Subview unsupported. Destroying it"),r.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(n)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(r=>r.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(r=>
r.value)},getOptionForValue:function(r){return this.getOptions().find(m=>m.value===r)},addOption:function(r){return new c(this,r)},destroyAllOptions:function(){for(const r of this.getOptions())r.destroy()},destroyOptionWithValue:function(r){if(r=this.getOptionForValue(r))if(r.destroy(),r.destroyed)return!0;return!1},deselectAll:function(){let r=!1;for(const m of this.getOptions())m.isSelected()&&(m.setSelected(!1),r=!0);r&&this.__doChanged()},selectValues:function(r){u(r)||(r=[r]);for(const m of r)this.selectValue(m)},
selectValue:function(r){this.select(this.getOptionForValue(r))},select:function(r){r?.canSelect(this)&&(r.setSelected(!0),this.__syncToDom())},deselectValue:function(r){this.deselect(this.getOptionForValue(r))},deselect:function(r){r?.canDeselect(this)&&(r.setSelected(!1),this.__syncToDom())},__doChanged:function(r){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(t=>{const x=JS.Module,v=Math.round;var u=t.ValueComponent=new x("ValueComponent",{initNode:function(e,g){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(e,g)},setValueFilter:function(e){this.valueFilter=e;this.inited&&e&&this.setValue(this.value)},setValue:function(e){this.valueFilter&&(e=this.valueFilter(e));this.value!==e&&(this.value=e,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(e,g){const k=this.valueFilter;
this.setValueFilter(k?"last"===g?n=>e(k(n)):n=>k(e(n)):e)}});const h=t.RangeComponent=new x("RangeComponent",{include:[u],setLowerValue:function(e){this.setValue({lower:e,upper:this.value&&void 0!==this.value.upper?this.value.upper:e})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(e){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:e,upper:e})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(e){if(e){var g=
this.value;const b=g?g.lower:void 0;g=g?g.upper:void 0;this.valueFilter&&(e=this.valueFilter(e));if(e.lower!==b||e.upper!==g){var k;(k=e).lower??(k.lower=e.upper);var n;(n=e).upper??(n.upper=e.lower);void 0!==e.lower&&void 0!==e.upper&&e.lower>e.upper&&(k=e.lower,e.lower=e.upper,e.upper=k);this.value=e;this.inited&&(this.fireEvent("value",this.getValue()),e.lower!==b&&this.fireEvent("lowerValue",e.lower),e.upper!==g&&this.fireEvent("upperValue",e.upper))}}else this.callSuper(e)},getValueCopy:function(){const e=
this.value;return{lower:e.lower,upper:e.upper}}});u=t.BoundedValueComponent=new x("BoundedValueComponent",{include:[u],initNode:function(e,g){const k=this;k.appendToEarlyAttrs("snapToInt","minValue","maxValue");g.snapToInt??(g.snapToInt=!0);g.valueFilter||(g.valueFilter=n=>{var b=k.maxValue;if(null!=b&&n>b)return b;b=k.minValue;return null!=b&&n<b?b:n});k.callSuper(e,g)},setSnapToInt:function(e){this.snapToInt!==e&&(this.snapToInt=e,this.inited&&(this.fireEvent("snapToInt",e),e&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.minValue!==e){const g=this.maxValue;null!=g&&e>g&&(e=g);this.minValue!==e&&(this.minValue=e,this.inited&&(this.fireEvent("minValue",e),this.setValue(this.value)))}},setMaxValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.maxValue!==e){const g=this.minValue;null!=g&&e<g&&(e=g);this.maxValue!==e&&(this.maxValue=e,this.inited&&(this.fireEvent("maxValue",e),this.setValue(this.value)))}},
setValue:function(e){this.callSuper(this.snapToInt&&null!=e&&!isNaN(e)?v(e):e)}});t.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[u,h],initNode:function(e,g){const k=this;g.valueFilter||(g.valueFilter=n=>{if(n){const b=k.maxValue,d=k.minValue;null!=b&&n.upper>b&&(n.upper=b);null!=d&&n.lower<d&&(n.lower=d)}return n});k.callSuper(e,g)},setValue:function(e){this.snapToInt&&null!=e&&(null==e.lower||isNaN(e.lower)||(e.lower=v(e.lower)),null==e.upper||isNaN(e.upper)||(e.upper=v(e.upper)));
this.callSuper(e)}})})(myt);
(t=>{const x=v=>{const u=v.label??"";v.setText('<i class="'+("solid"===v.checkboxStyle?"fas":"far")+" fa-"+(v.isChecked()?"check-":"")+'square"></i>'+(0<u.length?" "+u:""))};t.Checkbox=new JS.Class("Checkbox",t.Text,{include:[t.SimpleButtonStyle,t.ValueComponent],initNode:function(v,u){this.appendToEarlyAttrs("userUnselectable");u.value??(u.value=!1);u.focusIndicator??(u.focusIndicator=!1);u.checkboxStyle??(u.checkboxStyle="outline");u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor=
"inherit");u.readyColor??(u.readyColor="inherit");this.callSuper(v,u);t.FontAwesome.registerForNotification(this);x(this)},setValue:function(v){this.value!==v&&(this.callSuper(v),this.inited&&x(this))},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},setCheckboxStyle:function(v){this.checkboxStyle!==v&&(this.set("checkboxStyle",v,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(v,
u=1){this.setOpacity(u);this.setTextColor(v)}})})(myt);
(t=>{let x;const {Class:v,Module:u}=JS,h=console.warn,{KeyObservable:e,UpdateableUI:g,dumpStack:k,global:n}=t,b=n.focus,d=n.keys,a={},f=(l,q)=>{if(l){const y=l.id;l.id?q(y):k("No ID")}else k("No processor")},c=l=>{f(l,q=>{a[q]=l})},p=l=>{const q=t.BAG.getGroup("selected",l.groupId);if(q){const y=q.getNodes();l=l.value;let B=y.length;for(;B;){const E=y[--B];if(E.optionValue===l){q.setTrue(E);break}}}},w=l=>{if(l.groupId){const q=t.BAG.getGroup("selected",l.groupId);q&&l.syncTo(q,"__syncValue","trueNode")}},
r=(l,q)=>{const y=[],B=l.__v;if(B)for(const E of B)q=E.isFormValid(l,null,y)&&q;l.setErrorMessages(y);l.setIsValid(q);return q},m=(l,q,y)=>{if(l=l.__vp)for(const B of l)B[y]&&(q=B.process(q));return q},A=t.ValueProcessor=new v("ValueProcessor",{initialize:function(l,q,y,B){this.id=l;this.runForDefault=!!q;this.runForRollback=!!y;this.runForCurrent=!!B},process:l=>l}),H=t.ToNumberValueProcessor=new v("ToNumberValueProcessor",A,{process:l=>{if(null==l||""===l||"-"===l)return l;const q=Number(l);return isNaN(q)?
l:q}}),z=t.TrimValueProcessor=new v("TrimValueProcessor",A,{initialize:function(l,q,y,B,E){this.callSuper(l,q,y,B);this.trim=E},process:function(l){l+="";switch(this.trim){case "start":case "left":return l.trimStart();case "end":case "right":return l.trimEnd();default:return l.trim()}}}),C=t.UndefinedValueProcessor=new v("UndefinedValueProcessor",A,{initialize:function(l,q,y,B,E){this.callSuper(l,q,y,B);this.defaultValue=E},process:function(l){return void 0===l?this.defaultValue:l}}),J=t.Form=new u("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(l,q){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(l,q);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(l){this.set("errorMessages",l,!0)},getFullId:function(){const l=[this.id];let q=this.form;for(;q&&q.id;)l.unshift(q.id),
q=q.form;return l.join(".")},setId:function(l){if(this.id!==l){const q=this.id;this.id=l;(l=this.form)&&this.inited&&(l.removeSubForm(q),l.addSubForm(this))}},setForm:function(l){if(this.form!==l){const q=this.form;this.form=l;q?.removeSubForm(this.id);this.inited&&l?.addSubForm(this)}},setIsValid:function(l){this.isValid=l;this.inited&&this.fireEvent("isValid",l);const q=this.form;q&&!this._lockCascade&&(l?q.verifyValidState(this):q.notifySubFormInvalid())},setIsChanged:function(l){if(this.isChanged!==
l){this.isChanged=l;this.inited&&this.fireEvent("isChanged",l);const q=this.form;q&&!this._lockCascade&&(l?q.notifySubFormChanged():q.verifyChangedState(this))}},setValidators:function(l){let q=l.length;for(;q;){const y=l[--q];"string"===typeof y&&(l[q]=n.validators.getValidator(y),l[q]||l.splice(q,1))}this.__v=l},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const l={},q=this.__sf;for(const y in q)l[y]=q[y].getValue();return l},setValue:function(l){this.callSuper?.(l);
if("object"===typeof l&&!this.isA(M))for(const q in l){const y=this.getSubForm(q);y?l[q]=y.setValue(l[q]):h("ID in setValue for missing subform",q)}this.form?.notifyValueChanged(this);return l},getDefaultValue:function(){const l={};let q=this.__sf;for(const y in q)l[y]=q[y].getDefaultValue();return l},setDefaultValue:function(l){if("object"===typeof l)for(const q in l){const y=this.getSubForm(q);y?l[q]=y.setDefaultValue(l[q]):h("ID in setDefaultValue for missing subform",q)}return l},getRollbackValue:function(){const l=
{},q=this.__sf;for(const y in q)l[y]=q[y].getRollbackValue();return l},setRollbackValue:function(l){if("object"===typeof l)for(const q in l){const y=this.getSubForm(q);y?l[q]=y.setRollbackValue(l[q]):h("ID in setRollbackValue for missing subform",q)}return l},addAccelerator:function(l,q){this.__acc[l]=q},removeAccelerator:function(l){delete this.__acc[l]},invokeAccelerator:function(l,q){this.__acc[l]?.call(this,q??null)},addValidator:function(l){l&&this.__v.push(l)},removeValidator:function(l){if(l){const q=
this.__v;let y=q.length;for(;y;){const B=q[--y];if(B.id===l)return q.splice(y,1),B}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(l){const q=l.id;null!=this.getSubForm(q)?h("ID in use for subform, add aborted",q,l):(l.setForm(this),this.__sf[q]=l,l.isChanged&&this.notifySubFormChanged(),l.isValid||this.notifySubFormInvalid())},removeSubForm:function(l){const q=this.getSubForm(l);q&&(q.setForm(null),delete this.__sf[l],this.verifyChangedState(),this.verifyValidState());
return q},getSubForm:function(l){return this.__sf[l]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(l){l&&this.doValidation();const q=[];(function E(B){if(B.isA(M))B.isValid||q.push(B.getFullId());else{B=B.getSubForms();for(const F in B)E(B[F])}})(this);return q},getAllErrorMessages:function(){const l=this.__sf;let q=(this.errorMessages??[]).slice();for(const y in l)q.push(...l[y].getAllErrorMessages());return q},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(l){const q=
this.__sf;let y=!0;for(const B in q){const E=q[B];E!==l&&(y=E.isValid&&y)}return r(this,y)},doValidation:function(){const l=this.__sf;let q=!0;for(const y in l)q=l[y].doValidation()&&q;this._lockCascade=!0;q=r(this,q);this._lockCascade=!1;return q},notifyValueChanged:function(l){this.form?.notifyValueChanged(l)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(l){const q=this.__sf;let y=!1;for(const B in q){const E=q[B];E!==l&&(y=E.isChanged||y)}this.setIsChanged(y);
return y},setup:function(l,q,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;l??={};q??={};y??={};const B=this.__sf;for(const E in B)B[E].setup(l[E],q[E],y[E])},resetForm:function(){this._lockCascade=!0;const l=this.__sf;for(const q in l)l[q].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const l=this.__sf;for(const q in l)l[q].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const l={},q=this.__sf;for(const y in q){const B=q[y];B.isChanged&&(l[y]=B.getChangedValue())}return l}}),M=t.FormElement=new u("FormElement",{include:[J],initNode:function(l,q){this.__vp=[];this.callSuper(l,q)},getValue:function(){return m(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(l){void 0===l&&(l=this.getRollbackValue());this.value!==l&&
(this.callSuper(l),this.verifyChangedState());return l},getDefaultValue:function(){return m(this,this.defaultValue,"runForDefault")},setDefaultValue:function(l){this.defaultValue!==l&&(this.defaultValue=l,this.inited&&this.fireEvent("defaultValue",l),this.verifyChangedState());return l},getRollbackValue:function(){return m(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(l){void 0===l&&(l=this.getDefaultValue());this.rollbackValue!==l&&(this.rollbackValue=l,this.inited&&this.fireEvent("rollbackValue",
l),this.verifyChangedState());return l},setValueProcessors:function(l){let q=l.length;for(;q;){const y=l[--q];"string"===typeof y&&(l[q]=a[y],l[q]||l.splice(q,1))}this.__vp=l},addValueProcessor:function(l){this.__vp.push(l)},removeValueProcessor:function(l){if(l){const q=this.__vp;let y=q.length;for(;y;){const B=q[--y];if(B.id===l)return q.splice(y,1),B}}},addSubForm:l=>{k("addSubForm unsupported on FormElement")},getSubForm:l=>{k("getSubForm unsupported on FormElement")},removeSubForm:l=>{k("removeSubForm unsupported on FormElement")},
verifyChangedState:function(l){l=this.getValue()!==this.getRollbackValue();this.setIsChanged(l);return l},setup:function(l,q,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(l);this.setRollbackValue(q);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const l=this.getDefaultValue();this.setRollbackValue(l);this.setValue(l);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),O=t.FormInputTextMixin=new u("FormInputTextMixin",{include:[M,g],initNode:function(l,q){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";q.bgColor??(q.bgColor="#fff");q.borderWidth??(q.borderWidth=1);q.borderStyle??(q.borderStyle="solid");this.callSuper(l,q);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=l},setActionRequiredColor:function(l){this.actionRequiredColor=
l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const q=this.validateWhen;"key"!==q&&"blurWithKeyFix"!==q||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(l){e.isEnterKeyEvent(l)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(l){e.isEscKeyEvent(l)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
t.RootForm=new u("RootForm",{include:[J],initNode:function(l,q){this.callSuper(l,q);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:l=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});t.FormCheckbox=new v("FormCheckbox",t.Checkbox,{include:[M],initNode:function(l,q){this.rollbackValue=this.defaultValue=
!1;this.callSuper(l,q)}});t.FormComboBox=new v("FormComboBox",t.ComboBox,{include:[M,g],initNode:function(l,q){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(l,q);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(l){this.validateWhen=l},setAcceleratorScope:function(l){this.acceleratorScope=l},setErrorColor:function(l){this.errorColor=
l},setActionRequiredColor:function(l){this.actionRequiredColor=l},setNormalColor:function(l){this.normalColor=l},setIsChanged:function(l){this.callSuper(l);this.inited&&this.updateUI()},setIsValid:function(l){this.callSuper(l);this.inited&&this.updateUI()},setValue:function(l){l=this.callSuper(l);const q=this.validateWhen;"key"!==q&&"blurWithKeyFix"!==q||this.verifyValidState();return l},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(l){this._isShown=!0},notifyPanelHidden:function(l){this._isShown=!1},doActivationKeyDown:function(l,q){l!==d.CODE_ESC||this._isShown?this.callSuper(l,q):this.invokeAccelerator("reject")},doActivationKeyUp:function(l){l!==
d.CODE_ENTER||this._isShown?this.callSuper(l):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const l=this.validateWhen;"blur"!==l&&"blurWithKeyFix"!==l||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});t.FormEditableText=new v("FormEditableText",t.EditableText,{include:[O],__hndlKeyDown:function(l){"nowrap"===this.whitespace&&this.callSuper(l)}});t.FormInputText=new v("FormInputText",
t.InputText,{include:[O]});t.FormInputTextArea=new v("FormInputTextArea",t.InputTextArea,{include:[O],__hndlKeyDown:l=>{}});t.FormInputSelect=new v("FormInputSelect",t.InputSelect,{include:[M],setValue:function(l){if(!this.__abortSetValue)return l=this.callSuper(l),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(l),this.__abortSetValue=!1,this.verifyValidState(),l}});t.FormRadioGroup=new v("FormRadioGroup",t.Node,{include:[t.ValueComponent,M],initNode:function(l,q){q.groupId??(q.groupId=
t.generateGuid());this.callSuper(l,q);void 0!==this.value&&p(this);w(this)},setValue:function(l){l=this.callSuper(l);this.inited&&p(this);return l},setGroupId:function(l){if(this.groupId!==l){if(this.groupId){const q=t.BAG.getGroup("selected",this.groupId);q&&this.detachFrom(q,"__syncValue","trueNode")}this.groupId=l;this.inited&&w(this)}},__syncValue:function(l){l=l.value;this.setValue(l?l.optionValue:null)}});t.UseOtherFieldIfEmptyValueProcessor=new v("UseOtherFieldIfEmptyValueProcessor",A,{initialize:function(l,
q,y,B,E){this.callSuper(l,q,y,B);this.otherField=E},process:function(l){return null==l||""===l?this.otherField.getValue():l}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){c(x=new C("undefToEmpty",!0,!0,!0,""));c(new H("toNumber",!0,!0,!0));c(new z("trimLeft",!0,!0,!0,"left"));c(new z("trimRight",!0,!0,!0,"right"));c(new z("trimBoth",!0,!0,!0,"both"));n.register("valueProcessors",this)},getValueProcessor:l=>a[l],register:c,unregister:l=>{f(l,q=>{a[q]&&delete a[q]})}})})(myt);
(t=>{const x=JS.Class,v=t.dumpStack,u={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},h=(b,d)=>{b[d](b,"doDragOver","dragover",!1);b[d](b,"doDragEnter","dragenter",!1);b[d](b,"doDragLeave","dragleave",!1);b[d](b,"doDrop","drop",!1)},e=t.DragDropSupport=new JS.Module("DragDropSupport",{include:[t.DragDropObservable],initNode:function(b,d){this.callSuper(b,d);this.disabled||this.setupDragListeners()},setDisabled:function(b){this.disabled!==
b&&(this.getIDE().disabled=b,this.callSuper(b),this.inited&&(b?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){h(this,"attachToDom")},teardownDragListeners:function(){h(this,"detachFromDom")},doDragOver:b=>{},doDragEnter:b=>{},doDragLeave:b=>{},doDrop:function(b){this.handleFiles(b.value.dataTransfer.files,b)},handleFiles:function(b,d){if(void 0!==b){let a=b.length;for(;a;){const f=this.filterFiles(b[--a]);f&&this.handleDroppedFile(f,d)}}else v("No File API")},
filterFiles:b=>b,handleDroppedFile:(b,d)=>{}}),g=t.FileInput=new x("FileInput",t.NativeInputWrapper,{initNode:function(b,d){this.inputType="file";this.callSuper(b,d);this.attachToDom(this,"_onChange","change")},setAccept:function(b){this.set("accept",b,!0);this.getIDE().accept=this.accept},setMaxFiles:function(b){this.maxFiles!==b&&(this.set("maxFiles",b,!0),this.getIDE().multiple=1<this.maxFiles)},clearValue:function(){this.getIDE().value=""},_onChange:b=>{}}),k=t.Uploader=new x("Uploader",t.View,
{include:[e,t.Disableable,t.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(b,d,a)=>{if(void 0!==FileReader){const f=new FileReader;f.onload=c=>{d(c.target.result)};switch(a){case "text":f.readAsText(b);break;case "arrayBuffer":f.readAsArrayBuffer(b);break;default:f.readAsDataURL(b)}}},isSameFile:(b,d)=>null!=b&&null!=d&&b.name===d.name&&b.type===d.type&&b.size===d.size,createFile:b=>{const d=(new t.URI(b)).file;return{name:d,serverPath:b,size:-1,type:u[t.getExtension(d)]}}},initNode:function(b,
d){const a=this;a.files=[];d.requestFileParam??(d.requestFileParam="file");d.maxFiles??(d.maxFiles=-1);d.responseIsRaw??(d.responseIsRaw=!1);const f=d.accept;delete d.accept;a.callSuper(b,d);a.fileInput=new g(a,{maxFiles:a.maxFiles,accept:f,percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:a.disabled,overflow:"hidden"},[t.SizeToParent,{_onChange:function(c){a.handleFiles(this.getIDE().files,c)}}])},setAccept:function(b){this.fileInput?.setAccept(this.accept)},getAccept:function(){return this.fileInput?.accept},
setMaxFiles:function(b){this.fileInput?.setMaxFiles(this.maxFiles)},getMaxFiles:function(){return this.fileInput?.maxFiles},setValue:function(b){this.clearFiles();if(b){Array.isArray(b)||(b=[b]);for(const d of b)this.addFile(k.createFile(d))}return this.callSuper?this.callSuper(b):b},getValue:function(){return this.value},setDisabled:function(b){this.callSuper(b);this.fileInput?.setDisabled(b)},setUploadUrl:function(b){this.set("uploadUrl",b,!0)},setRequestFileParam:function(b){this.set("requestFileParam",
b,!0)},setResponseIsRaw:function(b){this.set("responseIsRaw",b,!0)},bringSubviewToFront:function(b){b===this.fileInput?this.callSuper(b):this.sendSubviewBehind(b,this.fileInput)},subviewAdded:function(b){this.callSuper(b);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(b,d){this.addFile(b)},filterFiles:function(b){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:b},uploadFiles:function(b,d){b??=this.uploadUrl;const a=this.files;let f=a.length;for(;f;)this.uploadFile(a[--f],
b,d)},makeFetchOptionsForUpload:b=>({method:"POST",body:b}),uploadFile:function(b,d,a){const f=this,c=new FormData;c.append(a??f.requestFileParam,b,b.name.replaceAll("%20"," "));t.doFetch(d??f.uploadUrl,f.makeFetchOptionsForUpload(c),f.responseIsRaw,p=>{f.handleUploadSuccess(b,p)},p=>{f.handleUploadFailure(b,p)})},handleUploadSuccess:function(b,d){b[k.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(b,d);this.updateValueFromFiles()},handleUploadFailure:(b,d)=>{v("Upload failure:"+d.status+
":"+d.message)},parseServerPathFromResponse:(b,d)=>null,addFile:function(b){this.files.push(b);this.updateValueFromFiles();this.fireEvent("addFile",b)},removeFile:function(b){const d=this.files;let a=d.length;for(;a;)if(k.isSameFile(d[--a],b)){d.splice(a,1);this.updateValueFromFiles();this.fireEvent("removeFile",b);break}},updateValueFromFiles:function(){const b=[];var d=this.files;let a=d.length;for(;a;){const f=d[--a][k.FILE_ATTR_SERVER_PATH];f&&b.push(f)}d=b.length;(this.value=1===d?b[0]:0===d?
void 0:b)||this.fileInput.clearValue();this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const b=this.files;let d=b.length;for(;d;)this.removeFile(b[--d])}}),n=t.ImageUploader=new x("ImageUploader",k,{extend:{isImageFile:b=>/image/i.test(b.type)},initNode:function(b,d){d.maxFiles=1;this.callSuper(b,d)},filterFiles:function(b){if(n.isImageFile(b)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(b)}},
addFile:function(b){const d=this,a=n.isImageFile(b);d.callSuper(b);const f=d.imageView=new t.Image(d,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[t.SizeToParent]);f.file=b;const c=p=>{const w=new Image;w.onload=()=>{b.width=w.width;b.height=w.height;f&&!f.destroyed&&d.updateImage(b,f,w.src)};w.src=p};a?-1===b.size?c(b.serverPath):n.isImageFile(b)&&k.readFile(b,c):-1===b.size?d.updateImage(b,f,b.serverPath):k.readFile(b,p=>{d.updateImage(b,
f,p)});return f},removeFile:function(b){this.callSuper(b);const d=this.getSubviews();let a=d.length;for(;a;){const f=d[--a];if(k.isSameFile(f.file,b)){f.destroy();break}}},handleDroppedFile:function(b,d){this.callSuper(b,d);this.uploadFile(b,this.uploadUrl)},updateImage:function(b,d,a){this.nativeWidth=b.width;this.nativeHeight=b.height;d.setImageUrl(a)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(t=>{const x=(v,u,h,e)=>{h=h.bind(v);"y"!==v.axis&&(h(u,e,"x"),h(u,e,"boundsWidth"));"x"!==v.axis&&(h(u,e,"y"),h(u,e,"boundsHeight"));h(u,e,"visible")};t.SizeToChildren=new JS.Class("SizeToChildren",t.Layout,{initNode:function(v,u){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(v,u)},setAxis:function(v){this.axis!==v&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=v,this.startMonitoringAllSubviews(),this.fireEvent("axis",v),this.update()):this.axis=v)},setPaddingX:function(v){this.paddingX!==
v&&(this.paddingX=v,this.inited&&(this.fireEvent("paddingX",v),this.update()))},setPaddingY:function(v){this.paddingY!==v&&(this.paddingY=v,this.inited&&(this.fireEvent("paddingY",v),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const u=this.parent;if(!u.isBeingDestroyed){const h=this.subviews;var v=h.length;const e=this.axis,g=Math.max;let k,n;if("y"!==e){k=v;for(n=0;k;){const b=h[--k];b.visible&&(n=g(n,b.x+(0<b.boundsWidth?b.boundsWidth:0)))}u.setWidth(n+
this.paddingX)}if("x"!==e){k=v;for(n=0;k;)v=h[--k],v.visible&&(n=g(n,v.y+(0<v.boundsHeight?v.boundsHeight:0)));u.setHeight(n+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(v){x(this,v,this.attachTo,"update")},stopMonitoringSubview:function(v){x(this,v,this.detachFrom,"update")}})})(myt);
(t=>{let x=0;const v=JS.Class,{View:u,SizeToParent:h,RootView:e}=t,g=t.Dimmer=new v("Dimmer",u,{include:[h],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(n,b){this.restoreFocus=!0;b.focusable=b.focusCage=!0;b.percentOfParentWidth??(b.percentOfParentWidth=100);b.percentOfParentHeight??(b.percentOfParentHeight=100);b.visible??(b.visible=!1);b.ignoreLayout??(b.ignoreLayout=!0);this.callSuper(n,b);this.overlay=new u(this,{ignorePlacement:!0,opacity:g.OPACITY,bgColor:g.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[h]);for(const d of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",d);e.setupCaptureDrop(this)},destroy:function(){e.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(n){this.restoreFocus=n},eatMouseEvent:n=>!0,show:function(){const n=t.global.focus;this.prevFocus=n.focusedView??n.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(n){this.visible&&
(this.setVisible(!1),!n&&this.restoreFocus&&this.prevFocus?.focus())}}),k=t.ModalPanel=new v("ModalPanel",g,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(n,b){const d={name:"content",ignorePlacement:!0},a={...d,align:"center",valign:"middle"};this.defaultPlacement="content";b.sizingStrategy??(b.sizingStrategy="children");b.marginTop??(b.marginTop=k.MARGIN_TOP);b.marginLeft??
(b.marginLeft=k.MARGIN_LEFT);b.marginBottom??(b.marginBottom=k.MARGIN_BOTTOM);b.marginRight??(b.marginRight=k.MARGIN_RIGHT);b.paddingX??(b.paddingX=k.PADDING_X);b.paddingY??(b.paddingY=k.PADDING_Y);this.callSuper(n,b);switch(this.sizingStrategy){case "children":new t.SizeToChildren(new u(this,a),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new u(this,{...d,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[h]);break;case "basic":new u(this,a);break;default:new u(this,d)}},setSizingStrategy:function(n){this.sizingStrategy=n},setMarginTop:function(n){this.marginTop=n},setMarginLeft:function(n){this.marginLeft=n},setMarginBottom:function(n){this.marginBottom=n},setMarginRight:function(n){this.marginRight=n},setPaddingX:function(n){this.paddingX=n},setPaddingY:function(n){this.paddingY=n},
show:function(){this.callSuper();x++},hide:function(n){this.callSuper(n);x=Math.max(0,x-1)}})})(myt);
(t=>{const x=u=>{u[u.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},v=u=>{const h=u.size,e=u.getIDS();u.setWidth(h);u.setHeight(h);e.width=e.height=h-2*u.borderWidth+"px"};t.Spinner=new JS.Class("Spinner",t.View,{initNode:function(u,h){this.lateAttrs=["spinColor"];h.visible??(h.visible=!1);h.borderWidth??(h.borderWidth=5);h.borderColor??(h.borderColor="#fff");h.borderStyle??(h.borderStyle="solid");h.spinColor??(h.spinColor="#000");this.callSuper(u,h);this.getIDS().borderRadius="50%";v(this);
x(this)},setSize:function(u){this.size!==u&&(this.size=u,this.inited&&v(this))},setSpinColor:function(u){this.spinColor!==u&&(this.getIDS().borderTopColor=this.spinColor=u,this.inited&&this.fireEvent("spinColor",u))},setBorderWidth:function(u){this.borderWidth!==u&&(this.callSuper(u),this.inited&&v(this))},setVisible:function(u){this.visible!==u&&(this.callSuper(u),this.inited&&x(this))}})})(myt);
(t=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),v=e=>{if(Array.isArray(e)){let g=e.length;if(0<g){e.unshift("fa");g++;e[1].startsWith("fa-")||(e[1]="fa-"+e[1]);3<=g&&(e[2]=x[e[2]]??"");if(3<g)for(let k=3;g>k;k++)e[k].startsWith("fa-")||(e[k]="fa-"+e[k]);return'<i class="'+e.join(" ")+'"></i>'}}t.dumpStack("Error making tag");console.error(e);return""},u=e=>{let g=e.properties;g=g?"string"===typeof g?g.split(" "):g.slice():[];g.unshift(e.icon,e.size);e.setHtml(v(g))},h=e=>{for(const g of["Free 400",
"Free 900","Brands 400"])t.registerForFontNotification(e,"Font Awesome 5 "+g)};t.FontAwesome=new JS.Class("FontAwesome",t.Markup,{extend:{makeTag:v,registerForNotification:h},initNode:function(e,g){this.size=0;this.icon="";this.callSuper(e,g);u(this);h(this)},setIcon:function(e){const g=this.icon;this.set("icon",e,!0);this.inited&&g!==e&&u(this)},setSize:function(e){const g=this.size;this.set("size",e,!0);this.inited&&g!==e&&u(this)},setProperties:function(e){this.properties=e;this.fireEvent("properties",
e);this.inited&&u(this)}});t.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(t=>{let x,v,u,h,e=0,g=0,k=0,n=255,b=[],d,a,f,c,p,w,r,m,A,H,z,C,J,M,O,l,q,y,B,E,F,K,L,R,N,T;const ea=JS.Class,{View:U,Text:fa,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=t,{min:ia,max:ja}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(D,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??
(G.paddingLeft=10);G.paddingRight??(G.paddingRight=10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(D,G)}}),La=oa(["check"]),Ia=D=>{for(let G of D)7===G?.length&&(G+="ff"),Ha[G]=!0},Ha={},Ma=new ea("Swatch",U,{include:[wa],initNode:function(D,G){const I=G.width=G.height=16;G.border=Ga;G.domClass="mytCheckerboardPattern";const P=G.bgColor;this.callSuper(D,G);this.colorView=new U(this,{width:I,
height:I,bgColor:P});P===h&&(D=qa.makeColorFromHexString(h),new fa(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>D.red+D.green+D.blue?"#fff":"#000"}))},setBgColor:function(D){this.colorView?.setBgColor(D);this.setTooltip(D)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=t.ColorPicker=new ea("ColorPicker",U,{initNode:function(D,G){x=this;x._isReady=!1;let I=G.color??"transparent";delete G.color;
u=G.alphaChannel??!1;delete G.alphaChannel;d=G.palette??[];Ia(d);delete G.palette;v="transparent"===I;x.callSuper(D,G);a=new U(x,{width:160,height:170});new Ca(a,{spacing:4,lineSpacing:4});f=new U(x,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(P,Q){f.callSuper(f.x,f.y);const V=this.getPagePosition();g=parseFloat(ja(0,ia(1,(P+this.dragInitX-V.x)/this.width)));k=parseFloat(1-ja(0,ia(1,(Q+this.dragInitY-V.y)/this.height)));v=!1;x.updateUI()}}]);D=new U(f,{width:139,height:139});
G=new U(D,{width:139,height:139});D.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";c=new U(G,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});p=new U(x,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(P,Q){this.callSuper(p.x,p.y);e=parseFloat(ja(0,ia(1,(Q+this.dragInitY-this.getPagePosition().y)/this.height)));v=!1;x.updateUI()}}]);p.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";w=new U(p,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new U(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);D=146;u&&(A=new t.LabelSlider(x,{x:170,y:D,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(P,Q){Q=P.value;if(null==Q||isNaN(Q))Q=
0;P.value=t.formatAsPercentage(Q/255,0);this.callSuper(P,!0);n=Q;x._isReady&&(v=!1,x.updateUI())}}]),D+=23);r=new t.InputText(x,{x:236,y:D,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(r,"_submitInput","blur");x.attachToDom(r,"_handleKeyDown","keydown");r.getIDS().paddingLeft="6px";D=new U(x,{x:170,y:D,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new U(D,{width:30,height:23,focusIndicator:!1,bgColor:I},[wa,{doActivated:()=>
{x.setColor(I)}}]);m=new U(D,{x:30,width:30,height:23});if(D=Ea.getItem("myt.default"))b=D.split(";"),Ia(b);x.setColor(I);x._isReady=!0},_handleKeyDown:D=>{t.KeyObservable.isEnterKeyEvent(D)&&x._submitInput()},_submitInput:()=>{x.setColor(r.value)},addToPalette:D=>{D&&"transparent"!==D&&!Ha[D]&&(b.unshift(D),b.length=ia(b.length,56),Ea.setItem("myt.default",b.join(";")))},setColor:D=>{const G=D&&"transparent"!==D;if(u){let I="ff";G&&7<D.length&&(I=D.slice(7,9),D=D.slice(0,7));A.setValue(parseInt(I,
16))}else G&&7<D.length&&(D=D.slice(0,7));G?(D=qa.makeColorFromHexString(D).getHSV(),e=D.h/360,g=D.s,k=D.v,v=!1):v=!0;x.updateUI()},getColor:()=>{if(v)return"transparent";let D="";u&&(D=n.toString(16),2>D.length&&(D="0"+D));return qa.makeColorFromHSV(360*e,100*g,100*k).getHtmlHexString()+D},updateUI:()=>{const D=!v;w.setVisible(D);c.setVisible(D);D&&(c.setX(ja(0,ia(1,g)*(f.width+2))-5),c.setY(ja(0,ia(1,1-k)*(f.height+2))-5),w.setY(e*(p.height-2)-1));f.setBgColor(qa.makeColorFromHSV(360*e,100,100).getHtmlHexString());
h=x.getColor();r.setValue(h);m.setBgColor(h);x.redrawPalette()},redrawPalette:t.debounce(()=>{a.destroyAllSubviews();const D=new Set;d.push(...b);for(let G of d)if(u||7===G.length)7===G.length&&(G+="ff"),D.has(G)||(new Ma(a,{bgColor:G}),D.add(G))},50)}),ya=D=>{D=D.split(":");return[ja(0,ia(23,parseInt(D[0]))),ja(0,ia(60,parseInt(D[1])))]},Ja=new ea("SelectableBtn",na,{include:[t.Selectable],setSelected:function(D){this.callSuper(D);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(D,G){G.width=J?175:49;this.callSuper(D,G)},doActivated:function(){this.callSuper();const D=this.text,G=ya(D);T.selectById(D);F.setHours(G[0]);F.setMinutes(G[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(D,G){G.width=23;G.border=xa;this.callSuper(D,G)},setData:function(D){this.data=D},setIsAnotherMonth:function(D){this.isAnotherMonth=D},setIsToday:function(D){this.isToday=D},setIsSunday:function(D){this.isSunday=
D},setIsSaturday:function(D){this.isSaturday=D},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const D=new Date(this.data);D.setHours(F.getHours());D.setMinutes(F.getMinutes());pa(D)}}),pa=D=>{D.setSeconds(0);D.setMilliseconds(0);var G=6>=O.length,I;if(G)for(I=7;I--&&!O.includes(D.getDay());)D.setDate(D.getDate()+
1);F=D;const P=T.getODE().scrollTop;var Q=new Date,V=Q.getFullYear(),S=Q.getMonth(),W=Q.getDate();Q.getHours();Q.getMinutes();const aa=D.getFullYear(),ca=D.getMonth(),la=D.getDate();var da=D.getTime();Q=D.getHours();D=D.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-M,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);V=V==aa&&S==ca;if(!J){S=N;S.deselectAll();S.destroyAllSubviews();I=new Date(da);const ka=7+M;S=z.days;L.setText(aa+" "+
z.sep+" "+z.months[ca]);I.setMinutes(59);I.setHours(23);I.setSeconds(59);I.setDate(0);K.setVisible(null==l||l<I.getTime());I.setMinutes(0);I.setHours(0);I.setSeconds(0);I.setDate(1);I.setMonth(ca+1);R.setVisible(null==q||q>I.getTime());for(I=0;7>I;I++)new fa(N,{width:23,height:20,textAlign:"center",text:S[(I+ka)%7],textColor:"#999"});I=0;let ha=42;0>ra&&(I=-7,ha=35);S=new Date(da);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);I<ha;I++){var X=I+1-ra;const Aa=(I+ka)%7,Y=new Pa(N);ra>I?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),S.setDate(za+X),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear())):I<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),S.setDate(X),S.setMonth(ca),S.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),S.setDate(X-sa),S.setMonth(ua.getMonth()),S.setYear(ua.getFullYear()));G&&!O.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===la&&(N.select(Y),Y.focus()),V&&X===W&&Y.setIsToday(!0),X=new Date(S.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=l&&l>X.getTime()||null!=q&&q<S.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!C){G=60*B[0]+B[1];W=T;W.deselectAll();W.destroyAllSubviews();let [ka,ha]=y;for(S=new Date(da);60*ka+ha<G;)da=new Oa(T,{text:("0"+ka).slice(-2)+":"+("0"+ha).slice(-2)}),ka===Q&&ha===D&&T.select(da),S.setHours(ka),S.setMinutes(ha),W=S.getTime(),(null!=l&&l>W||null!=q&&q<W)&&da.setDisabled(!0),
ha+=E,60<=ha&&(ha-=60,ka++);T.scrollYTo(P)}},Qa=t.DatePicker=new ea("DatePicker",U,{initNode:function(D,G){H=this;const I={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;H.callSuper(D,G);z=I.locales[I.locale??"en"];C=I.dateOnly;J=I.timeOnly;M=I.firstDayOfWeek;E=ja(5,ia(30,I.minuteInterval));O=I.allowedDays;Array.isArray(O)&&0!==O.length||
(O=[0,1,2,3,4,5,6]);l=Date.parse(I.minDate);l=isNaN(l)?null:l;q=Date.parse(I.maxDate);q=isNaN(q)?null:q;y=ya(I.minTime);B=ya(I.maxTime);D=new U(H,{visible:!J});I.showTodayButton&&new na(D,{width:24,text:oa(["home"]),tooltip:z.today},[{doActivated:()=>{pa(new Date)}}]);K=new na(D,{width:24,x:28,text:oa(["chevron-left"]),tooltip:z.prevMonth},[{doActivated:()=>{const P=(new Date(F.getFullYear(),F.getMonth(),0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()-1);pa(F);K.focus()}}]);L=new fa(D,
{width:100,x:52,textAlign:"center"});R=new na(D,{width:24,x:152,text:oa(["chevron-right"]),tooltip:z.nextMonth},[{doActivated:()=>{var P=(new Date(F.getFullYear(),F.getMonth()+1,0)).getDate();P<F.getDate()&&F.setDate(P);P=(new Date(F.getFullYear(),F.getMonth()+2,0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()+1);pa(F);R.focus()}}]);N=new U(H,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(N,{spacing:2,lineInset:2,lineSpacing:3});T=new U(H,
{x:J?0:195,y:J?0:25,width:(J?175:49)+t.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!C,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(T,{axis:"y",inset:1,spacing:3});H.setWidth(T.visible?T.x+T.width:N.width);pa(I.current??new Date)},getPickedDate:()=>F}),Z=t.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(D,G){G.buttonClass??(G.buttonClass=Z.BUTTON_CLASS);this.callSuper(D,G);D=this.content;D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER);D.setFocusCage(!0);this.makeCloseButton(D)},setButtonClass:function(D){this.buttonClass=D},setCallbackFunction:function(D){this.callbackFunction=D},makeButton:function(D,G){const I=this;return new I.buttonClass(D,
G,[{doActivated:function(){I.doCallback(this)}}])},makeCloseButton:function(D){return D.closeBtn=this.makeButton(D,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(D){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(D)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const D=this.content,G=D.sizeToChildren;D.destroyAllSubviews(I=>"closeBtn"!==I.name);D.setVisible(!0);this.overlay.setBgColor(t.Dimmer.COLOR);this.setCallbackFunction();G.setPaddingY(ba.PADDING_Y);G.setPaddingX(ba.PADDING_X);D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER)},doCallback:function(D){const G=this.callbackFunction;G&&G.call(this,D.name)||this.hide()},showBlank:function(D){this.destroyContent();this.content.setVisible(!1);
D?.bgColor&&this.overlay.setBgColor(D.bgColor);this.show()},showMessage:function(D,G,I){const P=this.content,Q=P.closeBtn;I={...Z.WRAP_TEXT_DEFAULTS,...I};this.destroyContent();this.setCallbackFunction(G);D=P.msg=new fa(P,{text:D,whiteSpace:I.whiteSpace,wordWrap:I.wordWrap,fontWeight:I.fontWeight,x:null==I.msgX?ba.PADDING_X:I.msgX,y:null==I.msgY?ba.PADDING_Y:I.msgY,width:I.width});I.titleText&&(this.setupTitle(P,I.titleText),D.setY(D.y+24));this.show();!1===I.showClose?Q.destroyed||Q.setVisible(!1):
(Q.setVisible(!0),Q.focus())},showSimple:function(D,G,I,P){I=I??{};const Q=this.content,V=Q.closeBtn,S=I.maxContainerHeight;this.destroyContent();I.bgColor&&Q.setBgColor(I.bgColor);I.roundedCorners&&Q.setRoundedCorners(I.roundedCorners);I.boxShadow&&Q.setBoxShadow(I.boxShadow);I.border&&Q.setBorder(I.border);Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>S&&(W=S);this.callSuper(W)}}]);D.call(this,G);new va(G,
{axis:"both"});this.show();V.setVisible(!0);V.focus();I.titleText&&(this.setupTitle(Q,I.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();P?.(this)},showConfirm:function(D,G,I){I={...Z.CONFIRM_DEFAULTS,...I};this.showMessage(D,G,I);this.setupFooterButtons(this.content.msg,I)},showContentConfirm:function(D,G,I,P){I={...Z.CONFIRM_DEFAULTS,...I};const Q=this.content,V=Q.closeBtn,S=I.maxContainerHeight;this.destroyContent();Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=
Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>S?S:W)}}]);D.call(this,G);new va(G,{axis:"both"});this.show();!1===I.showClose?V.destroyed||V.setVisible(!1):(V.setVisible(!0),V.focus());this.setupTitle(Q,I.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,I);G.initialFocus?.focus();P?.(this)},showSpinner:function(D,G){const I=this.content;G={...Z.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const P=this.spinner=new t.Spinner(I,{align:"center",
visible:!0,borderColor:"#ccc",size:50,y:null==G.msgY?ba.PADDING_Y:G.msgY});D&&new fa(I,{text:D,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ba.PADDING_X:G.msgX,y:P.y+P.size+ba.PADDING_Y,width:G.width});this.show();I.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(D,G){const I=this,P=I.content,Q=P.closeBtn;G={...Z.COLOR_PICKER_DEFAULTS,...G};I.destroyContent();I.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(I,V);break;
case "confirmBtn":const S=x.getColor();x.addToPalette(S);D.call(I,V,S)}x.destroy()});x=new Na(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});I.show();Q.setVisible(!0);Q.focus();I.setupFooterButtons(x,G);I.setupTitle(P,G.titleText)},showDatePicker:function(D,G){const I=this,P=
I.content,Q=P.closeBtn;G={...Z.DATE_PICKER_DEFAULTS,...G};I.destroyContent();I.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(I,V);break;case "confirmBtn":D.call(I,V,H.getPickedDate())}H.destroy()});H=new Qa(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});I.show();Q.setVisible(!0);Q.focus();I.setupFooterButtons(H,G);I.setupTitle(P,G.timeOnly?
G.timeOnlyTitleText:G.titleText)},setupTitle:function(D,G){const I=Z.RADIUS;(this.header=new U(D,{ignoreLayout:!0,width:D.width,height:24,bgColor:"#eee",roundedTopLeftCorner:I,roundedTopRightCorner:I})).sendToBack();D.title=new fa(D,{x:I,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(D,G){const I=this.content;var P=ba.PADDING_Y,Q=P/2;D=I.btnContainer=new U(I,{y:D.y+D.height+P,align:"center"});const V=["active","hover","ready","text"];P=G.cancelAttrs??{};var S;(S=P).name??(S.name="cancelBtn");
let W;(W=P).text??(W.text=G.cancelTxt);for(let da of V)da+="Color",null!=G[da]&&(P[da]=G[da]);S=this.makeButton(D,P);P=G.confirmAttrs??{};var aa;(aa=P).name??(aa.name="confirmBtn");let ca;(ca=P).text??(ca.text=G.confirmTxt);for(var la of V)la+="Color",aa=la+"Confirm",null!=G[aa]&&(P[la]=G[aa]);this.makeButton(D,P);if(la=G.button)for(const da of la)this.makeButton(D,da);new va(D,{axis:"y"});new Ba(D,{spacing:4,collapseParent:!0});I.sizeToChildren.setPaddingY(Q);Q=D.y-Q;(new U(I,{ignoreLayout:!0,y:Q,
width:I.width,height:I.height-Q,bgColor:"#eee"})).sendToBack();!1===G.showClose&&S.focus()}})})(myt);
(t=>{const x=JS.Class,v=t.dumpStack,u={},h=(a,f)=>{if(a){const c=a.id;a.id?f(c):v("No ID")}else v("No validator")},e=a=>{h(a,f=>{u[f]=a})},g=t.Validator=new x("Validator",{initialize:function(a){this.id=a},isValid:(a,f,c)=>!0,isFormValid:function(a,f,c){f??={};f.form=a;return this.isValid(a.getValue(),f,c)}}),k=t.RequiredFieldValidator=new x("RequiredFieldValidator",g,{isValid:(a,f,c)=>null==a||""===a||"string"===typeof a&&""===a.trim()?(c?.push("This value is required."),!1):!0}),n=t.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",g,{isValid:(a,f,c)=>{f=f.form.getRollbackValue();return a&&f&&a.toLowerCase()===f.toLowerCase()?(c?.push("Value must differ by more than just case."),!1):!0}}),b=t.URLValidator=new x("URLValidator",g,{initialize:function(a,f){this.callSuper(a);this.originalRawQuery=f},isValid:function(a,f,c){return(new t.URI(a)).toString(this.originalRawQuery)!==a?(c?.push("Invalid URL."),!1):!0}}),d=t.JSONValidator=new x("JSONValidator",g,{isValid:(a,f,c)=>{try{return JSON.parse(a),
!0}catch(p){return c?.push(p),!1}}});t.RegexValidator=new x("RegexValidator",g,{initialize:function(a,f,c){this.callSuper(a);this.regex=new RegExp(f);this.errorMsg=c},isValid:function(a,f,c){a=this.regex.test(a);!a&&this.errorMsg&&c?.push(this.errorMsg);return a}});t.EqualFieldsValidator=new x("EqualFieldsValidator",g,{initialize:function(a,f,c){this.callSuper(a);this.fieldA=f;this.fieldB=c},isValid:function(a,f,c){const {fieldA:p,fieldB:w}=this;if(p?.inited&&w?.inited){if(a&&p.getValue()===w.getValue())return!0;
c?.push('The field "'+p.key+'" must be equal to the field "'+w.key+'".')}return!1}});t.LengthValidator=new x("LengthValidator",g,{initialize:function(a,f,c){this.callSuper(a);this.min=f;this.max=c},isValid:function(a,f,c){a=a?a.length:0;f=this.min;const p=this.max;return void 0!==f&&f>a?(c?.push("The value must not be less than "+f+" characters long."),!1):void 0!==p&&p<a?(c?.push("The value must not be greater than "+p+" characters long."),!1):!0}});t.NumericRangeValidator=new x("NumericRangeValidator",
g,{initialize:function(a,f,c){this.callSuper(a);this.min=f;this.max=c},isValid:function(a,f,c){if(""===a)return!0;a=Number(a);f=this.min;const p=this.max;return isNaN(a)?(c?.push("Value is not a number."),!1):void 0!==f&&f>a?(c?.push("Value must not be less than "+f+"."),!1):void 0!==p&&p<a?(c?.push("Value must not be greater than "+p+"."),!1):!0}});t.CompoundValidator=new x("CompoundValidator",g,{initialize:function(a,...f){this.callSuper(a);for(a=f.length;a;){let c=f[--a];"string"===typeof c&&((f[a]=
c=u[c])||f.splice(a,1))}this.__v=f},addValidator:function(a){"string"===typeof a&&(a=u[a]);a&&this.__v.push(a)},isValid:function(a,f,c){const p=this.__v,w=p.length;let r=!0,m=0;for(;w>m;)r=p[m++].isValid(a,f,c)&&r;return r}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){e(new k("required"));e(new n("equalsIgnoreCase"));e(new b("url"));e(new d("json"));t.global.register("validators",this)},getValidator:a=>u[a],register:e,unregister:a=>{h(a,f=>{u[f]&&delete u[f]})}})})(myt);
(t=>{const x=JS.Class,{min:v,max:u,round:h,abs:e}=Math,g=t.View,k=new x("SliderThumb",t.SimpleButton,{include:[t.Draggable,t.ArrowKeyActivation],initNode:function(b,d){const a=d.width=b.thumbWidth,f=d.height=b.thumbHeight;d.roundedCorners=v(f,a)/2;d.repeatKeyDown=!0;d.activationKeys=t.global.keys.ARROW_KEYS;d.activeColor="#bbb";d.readyColor="#ccc";d.hoverColor="#ddd";d.boxShadow=[0,0,4,"#666"];this.callSuper(b,d);this["x"===b.axis?"setY":"setX"](b.thumbOffset);this.syncTo(b,"setDisabled","disabled");
b._syncThumbToValue(this,b.getValue())},setDisabled:function(b){this.callSuper(this.valueFromEvent(b))},setFocused:function(b){this.callSuper(b);b&&this.makeHighestZIndex()},setX:function(b){this.x!==b&&(this.callSuper(b),b=this.parent,"x"===b.axis&&b.syncValueToThumb(this))},setY:function(b){this.y!==b&&(this.callSuper(b),b=this.parent,"y"===b.axis&&b.syncValueToThumb(this))},requestDragPosition:function(b,d){if(!this.disabled){const a=this.parent,f=a.getMinPixelValueForThumb(this),c=a.getMaxPixelValueForThumb(this),
p=a.snapThreshold;let w;"x"===a.axis?(w=this.width/2,d="setX"):(w=this.height/2,b=d,d="setY");if(a.allowSnap(this))for(let r of a.getSnapValuesAsPx())if(r-=w,e(b-r)<=p){b=r;break}this[d](v(u(b,f-w),c-w))}},doKeyArrowLeftOrUp:function(b,d){b?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(b,d){b?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),n=t.BaseSlider=new x("BaseSlider",g,{include:[t.Disableable],initNode:function(b,
d){d.axis??(d.axis="x");"x"===d.axis?(d.width??(d.width=100),d.height??(d.height=18)):(d.width??(d.width=18),d.height??(d.height=100));d.bgColor??(d.bgColor="#999");d.roundedCorners??(d.roundedCorners=9);d.trackInset??(d.trackInset=9);d.trackOutset??(d.trackOutset=9);d.thumbWidth??(d.thumbWidth=16);d.thumbHeight??(d.thumbHeight=16);d.thumbOffset??(d.thumbOffset=1);d.nudgeAmount??(d.nudgeAmount=1);d.snapThreshold??(d.snapThreshold=8);d.snapValues??(d.snapValues=[]);this.callSuper(b,d)},setAxis:function(b){this.axis=
b},setTrackInset:function(b){this.trackInset=b},setTrackOutset:function(b){this.trackOutset=b},setThumbWidth:function(b){this.thumbWidth=b},setThumbHeight:function(b){this.thumbHeight=b},setThumbOffset:function(b){this.thumbOffset=b},setNudgeAmount:function(b){this.nudgeAmount=b},setSnapThreshold:function(b){this.snapThreshold=b},setSnapValues:function(b){this.snapValues=b},getSnapValuesAsPx:function(){const b=[];for(const d of this.snapValues)b.push(this.convertValueToPixels(d));return b},allowSnap:function(b){var d=
b.__lastMousePosition;const a=t.DomElementProxy.getRelativePosition(b.getODE()),f="x"===this.axis;b=f?b.height:b.width;d=f?d.y-a.y:d.x-a.x;return 0<d&&d<b},convertValueToPixels:function(b){const d=this.minValue,a=this.trackInset;return a+(("x"===this.axis?this.width:this.height)-a-this.trackOutset)/(this.maxValue-d)*(b-d)},convertPixelsToValue:function(b){const d=this.minValue,a=this.trackInset;return(this.maxValue-d)/(("x"===this.axis?this.width:this.height)-a-this.trackOutset)*(b-a)+d},nudgeValueLeft:function(b){this._nudge(b,
!1)},nudgeValueUp:function(b){this._nudge(b,!1)},nudgeValueRight:function(b){this._nudge(b,!0)},nudgeValueDown:function(b){this._nudge(b,!0)},_nudge:(b,d)=>{},_syncThumbToValue:function(b,d){d=this.convertValueToPixels(d);"x"===this.axis?b.setX(d-b.width/2):b.setY(d-b.height/2)},syncValueToThumb:function(b){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(b,this.convertPixelsToValue("x"===this.axis?b.x+b.width/2:b.y+b.height/2)),this.__lockSync=!1)},_syncValueToThumb:(b,d)=>
{},getMinPixelValueForThumb:function(b){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(b){return this.convertValueToPixels(this.maxValue)}});t.RangeSlider=new x("RangeSlider",n,{include:[t.BoundedRangeComponent],initNode:function(b,d){this.callSuper(b,d);b=this.rangeFill=new g(this,{bgColor:"#666"});"x"===this.axis?(b.setY(this.thumbOffset),b.setHeight(this.thumbHeight),b.setRoundedCorners(this.thumbHeight/2)):(b.setX(this.thumbOffset),b.setWidth(this.thumbWidth),
b.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new k(this);this.thumbUpper=new k(this);this._syncRangeFillToValue()},setValue:function(b){this.callSuper(b);this.inited&&(this.__lockSync||(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,b)),this._syncRangeFillToValue())},setWidth:function(b){const d=this.width;this.callSuper(b);this.inited&&"x"===this.axis&&this.width!==d&&(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,
b))},setHeight:function(b){const d=this.height;this.callSuper(b);this.inited&&"y"===this.axis&&this.height!==d&&(b=this.getValue(),this._syncThumbToValue(this.thumbLower,b),this._syncThumbToValue(this.thumbUpper,b))},_syncRangeFillToValue:function(){const b=this.rangeFill;var d=this.getValue();const a=this.convertValueToPixels(d.lower);d=this.convertValueToPixels(d.upper)-a;"x"===this.axis?(b.setX(a),b.setWidth(d)):(b.setY(a),b.setHeight(d))},_syncThumbToValue:function(b,d){this.callSuper(b,"thumbLower"===
b.name?d.lower:d.upper)},_syncValueToThumb:function(b,d){let a=this.getValueCopy();a["thumbLower"===b.name?"lower":"upper"]=d;this.setValue(a);a=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,a);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,a)},_nudge:function(b,d){const a=this.getValueCopy();d=this.nudgeAmount*(d?1:-1);"thumbLower"===b.name?a.lower=v(a.lower+d,a.upper):a.upper=u(a.upper+d,a.lower);this.setValue(a)},getMinPixelValueForThumb:function(b){return this.convertValueToPixels("thumbLower"===
b.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(b){return this.convertValueToPixels("thumbLower"===b.name?this.getValue().upper:this.maxValue)}});t.Slider=new x("Slider",n,{include:[t.BoundedValueComponent],initNode:function(b,d){this.callSuper(b,d);this.thumb=new k(this)},setValue:function(b){this.callSuper(b);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(b){const d=this.width;this.callSuper(b);this.inited&&"x"===
this.axis&&this.width!==d&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(b){const d=this.height;this.callSuper(b);this.inited&&"y"===this.axis&&this.height!==d&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(b,d){this.setValue(d);this._syncThumbToValue(b,this.getValue())},_nudge:function(b,d){this.setValue(this.getValue()+this.nudgeAmount*(d?1:-1))}});t.LabelSlider=new x("LabelSlider",t.Slider,{initNode:function(b,d){const a=this;d.labelX??
(d.labelX=8);d.labelY??(d.labelY=2);d.labelFontSize??(d.labelFontSize="12px");d.labelColor??(d.labelColor="#000");d.flipThreshold??(d.flipThreshold=h((d.maxValue-d.minValue)/2)||0);a.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],d);a.callSuper(b,d);const f=a.labelX;a.labelTxt=new t.Text(a,{x:f,y:a.labelY,textColor:a.labelColor,fontSize:a.labelFontSize},[{initNode:function(c,p){this.targetX=f;this.callSuper(c,p)},updateX:function(c){const p=a.getValue()>=a.flipThreshold?
f:a.width-this.width-f;this.targetX!==p&&(this.targetX=p,this.stopActiveAnimators("x"),c?this.setX(p):this.animate({attribute:"x",to:p,duration:250}))}}]);a.syncTo(a,"setText","value")},setWidth:function(b){this.callSuper(b);this.labelTxt?.updateX(!0)},setText:function(b,d){const a=this.labelTxt;a&&(a.setText(b.value),a.updateX(d))}})})(myt);
(t=>{const x=JS.Class,{abs:v,min:u}=Math,{CODE_ENTER:h,CODE_SPACE:e,ARROW_KEYS:g}=t.global.keys,k=b=>{const d="y"===b.axis?"height":"width";b.constrain("__limitToParent",[b,"limitToParent",b,d,b.parent,d])};var n=t.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(b,d){d.nudgeTargetValue??(d.nudgeTargetValue="value");d.nudgeIncrement??(d.nudgeIncrement=1);d.nudgeMin??(d.nudgeMin=1);d.nudgeMax??(d.nudgeMax=64);this.__nudgeAcc=d.nudgeMin;this.callSuper(b,d)},setNudgeIncrement:function(b){this.set("nudgeIncrement",
v(b),!0)},setNudgeMin:function(b){this.set("nudgeMin",v(b),!0)},setNudgeMax:function(b){this.set("nudgeMax",v(b),!0)},setNudgeTargetValue:function(b){this.set("nudgeTargetValue",b,!0)},nudge:function(b,d){const a=this.nudgeTargetValue;d=this.__nudgeAcc=d?u(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(a,(this.get(a)||0)+(b?1:-1)*d);return!0}});n=new x("BaseDivider",t.SimpleButton,{include:[t.BoundedValueComponent,t.Draggable,t.ArrowKeyActivation,n],initNode:function(b,
d){d.activeColor??(d.activeColor="#bbb");d.hoverColor??(d.hoverColor="#ddd");d.readyColor??(d.readyColor="#ccc");d.axis??(d.axis="x");d.minValue??(d.minValue=0);d.value??(d.value=d.minValue);d.expansionState??(d.expansionState=2);d.focusIndicator??(d.focusIndicator=!1);d.repeatKeyDown??(d.repeatKeyDown=!0);d.activationKeys??(d.activationKeys=[h,e,...g]);"y"===d.axis?(d.height??(d.height=6),d.cursor??(d.cursor="row-resize")):(d.width??(d.width=6),d.cursor??(d.cursor="col-resize"));this.quickSet(["axis"],
d);this.callSuper(b,d);null==d.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&k(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(b){this.expansionState=b},setRestoreValue:function(b){this.restoreValue=b},setLimitToParent:function(b){this.limitToParent!==b&&(this.limitToParent=b,this.inited&&(this.fireEvent("limitToParent",b),null==b?this.releaseConstraint("__limitToParent"):k(this)))},setAxis:function(b){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=b},setValue:function(b){this.callSuper(b);b=this.value;"y"===this.axis?this.setY(b):this.setX(b)},__limitToParent:function(b){b="y"===this.axis?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b])},doActivationKeyDown:function(b,d){this.callSuper(b,d);switch(b){case h:case e:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(b,d){return this.nudge(!1,d)},doKeyArrowRightOrDown:function(b,d){return this.nudge(!0,d)},nudge:function(b,d){b=this.callSuper(b,d);this.setExpansionState(2);
this.setRestoreValue(this.value);return b},doPrimaryAction:function(){const {restoreValue:b,maxValue:d,minValue:a}=this;let f;switch(this.expansionState){case 0:null!=b&&(this.setExpansionState(1),b===a?b!==d&&this.doPrimaryAction():f=b);break;case 1:null!=d&&(this.setExpansionState(3),this.value===d?this.doPrimaryAction():f=d);break;case 2:null!=a&&(this.setExpansionState(0),this.value===a?this.doPrimaryAction():f=a);break;case 3:null!=b&&(this.setExpansionState(2),b===d?this.doPrimaryAction():f=
b)}this.animateToValue(f)},animateToValue:function(b,d=250){null!=b&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:b,duration:d}))},requestDragPosition:function(b,d){this.disabled||(b="y"===this.axis?d:b,d=this.value,b!==d&&(this.setValue(b),this.setRestoreValue(b),this.setExpansionState(d>b?2:1)))}});t.HorizontalDivider=new x("HorizontalDivider",n,{initNode:function(b,d){d.axis="x";this.callSuper(b,d)}});t.VerticalDivider=new x("VerticalDivider",n,{initNode:function(b,d){d.axis=
"y";this.callSuper(b,d)}})})(myt);
(t=>{let x=0;const {Class:v,Module:u}=JS,{min:h,max:e}=Math,{View:g,SpacedLayout:k,Node:{DEFAULT_PLACEMENT:n}}=t,b=l=>{const q=l.columnHeaders,[y,B]=l.sort??["",""];let E=q.length;for(;E;){const F=q[--E];F.columnId===y?F.sortable&&F.setSortState(B):F.setSortState("none")}l.locked||l.doSort()},d=(l,q,y,B)=>{if(0!==q){const L=0<q,R=[];for(var E=l.length;E;){var F=l[--E];F.resizable&&(y?0<F.flex:0===F.flex)&&R.push({hdr:F,limit:(L?F.maxValue:F.minValue)-F.value,amt:0})}l=R.length;if(0<l){for(E=0;0!==
q;){x>=l&&(E=x=0);F=R[x];var K=F.hdr;F.full?++E:(L?(K=h(y?K.flex:1,q),F.amt+K>F.limit&&(K=F.limit-F.amt,F.full=!0)):(K=e(y?-K.flex:-1,q),F.amt+K<F.limit&&(K=F.limit-F.amt,F.full=!0)),F.amt+=K,q-=K);if(E===l)break;++x}for(const N of R)N.hdr.setValue(N.hdr.value+N.amt);B?.(q)}}},a=l=>(l=l.gridController?.getPrevHdr(l))?l.maxValue-l.value+a(l):0,f=l=>(l=l.gridController?.getNextHdr(l))?l.maxValue-l.value+f(l):0,c=l=>(l=l.gridController?.getPrevHdr(l))?l.minValue-l.value+c(l):0,p=l=>(l=l.gridController?.getNextHdr(l))?
l.minValue-l.value+p(l):0,w=(l,q)=>{l=l.gridController?.getPrevHdr(l);var y=0;if(l){y=l.value+q;l.resizable&&l.setValue(y);const B=y-l.value;y=q-B;0>B&&(y+=w(l,B))}return y},r=(l,q)=>{l=l.gridController?.getPrevHdr(l);var y=0;if(l){y=l.value+q;l.resizable&&l.setValue(y);const B=y-l.value;y=q-B;0<B&&(y+=r(l,B))}return y},m=(l,q)=>{if(l=l.gridController?.getNextHdr(l))q=l.value+q,l.resizable&&l.setValue(q),q-=l.value,0>q&&m(l,q)},A=(l,q)=>{if(l=l.gridController?.getNextHdr(l))q=l.value+q,l.resizable&&
l.setValue(q),q-=l.value,0<q&&A(l,q)},H=l=>{let q="";if(l.sortable)switch(l.sortState){case O.SORT_ORDER_ASC:q="chevron-up";break;case O.SORT_ORDER_DESC:q="chevron-down"}l.sortIcon.setIcon(q)},z=l=>{const q=l.textView;q?.setWidth(l.width-l.outset-q.x)},C=t.GridController=new u("GridController",{initNode:function(l,q){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(l,q);this.fitHeadersToWidth();b(this)},setMaxWidth:function(l){this.set("maxWidth",
l,!0)},setMinWidth:function(l){this.set("minWidth",l,!0)},setFitToWidth:function(l){this.fitToWidth=l},setSort:function(l){t.areArraysEqual(l,this.sort)||(this.sort=l,this.inited&&(this.fireEvent("sort",l),b(this)))},setLastColumn:function(l){const q=this.lastColumn;q!==l&&(q?.setLast(!1),this.lastColumn=l,l?.setLast(!0))},setLocked:function(l){this.locked=l;if(this.inited&&!l){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const q of this.columnHeaders)this.notifyHdrXChange(q),this.notifyHdrWidthChange(q),this.notifyHdrVisibilityChange(q);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(l){l=this.valueFromEvent(l);this.gridWidth!==l&&(this.gridWidth=l,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(l){this.hdrChangeListener=l},doSort:()=>{},getPrevHdr:function(l){const q=this.columnHeaders;l=this.getHdrIndex(l);
if(0<l)for(;l;){const y=q[--l];if(y.visible)return y}},getNextHdr:function(l){const q=this.columnHeaders,y=q.length;l=this.getHdrIndex(l)+1;if(0<l&&l<y)for(;y>l;){const B=q[l++];if(B.visible)return B}},hasHdr:function(l){return this.columnHeaders.includes(l)},getHdrIndex:function(l){return this.columnHeaders.indexOf(l)},getHdrById:function(l){for(const q of this.columnHeaders)if(q.columnId===l)return q},getVisibleHdrs:function(){return this.columnHeaders.filter(l=>l.visible)},notifyAddHdr:function(l){this.hasHdr(l)||
(this.columnHeaders.push(l),l.visible&&this.setLastColumn(l),this.fixupResizerCursors())},notifyRemoveHdr:function(l){const q=this.getHdrIndex(l);-1<q&&(this.columnHeaders.splice(q,1),l.visible&&l.last&&this.setLastColumn(this.getPrevHdr(l)),this.fixupResizerCursors())},notifyHdrXChange:function(l){if(!this.isLocked()){for(const q of this.rows)q.notifyHdrXChange(l);this._notifyHdrChange("X",l)}},notifyHdrWidthChange:function(l){if(!this.isLocked()){for(const q of this.rows)q.notifyHdrWidthChange(l);
this._notifyHdrChange("Width",l)}},notifyHdrVisibilityChange:function(l){if((!this.__skipInvisibleHeaders||l.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(l);var q=this.setLastColumn;a:{var y=this.columnHeaders;let B=y.length;for(;B;){const E=y[--B];if(E.visible){y=E;break a}}y=void 0}q.call(this,y);q=l.visible?1:-1;this.setMaxWidth(this.maxWidth+l.maxValue*q);this.setMinWidth(this.minWidth+l.minValue*q);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
l)}},_notifyHdrChange:function(l,q){const y=this.hdrChangeListener;if(y)y["notifyHdr"+l+"Change"](q)},updateRowsForVisibilityChange:function(l){for(const q of this.rows)q.notifyHdrVisibilityChange(l)},hasRow:function(l){return this.rows.includes(l)},getRowIndex:function(l){return this.rows.indexOf(l)},getRowById:function(l,q=y=>y.model.id===l){return this.rows.find(q)},getPrevRow:function(l){l=this.getRowIndex(l)-1;return this.rows[0>l?this.rows.length-1:l]},getNextRow:function(l){l=this.getRowIndex(l)+
1;return this.rows[l<this.rows.length?l:0]},notifyAddRow:function(l,q){if(!this.hasRow(l)&&(this.rows.push(l),!this.locked)){const y=this.width;for(const B of this.columnHeaders)l.setWidth(y),l.notifyHdrXChange(B),l.notifyHdrWidthChange(B),l.notifyHdrVisibilityChange(B);q||this.doSort()}},notifyRemoveRow:function(l){l=this.getRowIndex(l);-1<l&&this.rows.splice(l,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const l=this.getVisibleHdrs();let q=0;for(const y of l)q=e(q,y.x+y.width);
d(l,this.gridWidth-q,!0,y=>{d(l,y,!1,null)})}},fixupResizerCursors:function(){const l=this.getVisibleHdrs();let q=!0,y=0;l.forEach((K,L)=>{q&&K.isFixed()?K.setResizerCursor("",!0):(q&&(y=L),q=!1,K.restoreResizerCursor())});let B=!0,E=l.length,F=E-1;for(;E>y;){const K=l[--E];B?K.setResizerCursor("",!0):K.restoreResizerCursor();K.isFixed()||(B&&(F=E),B=!1)}y===F&&l[y].setResizerCursor("",!0)}}),J=t.GridColHdr=new u("GridColHdr",{include:[t.BoundedValueComponent],initNode:function(l,q){const y=this,
B=q.resizerCursor??"col-resize";delete q.resizerCursor;q.minValue??(q.minValue=16);q.maxValue??(q.maxValue=1E3);q.value??(q.value=q.minValue);q.resizable??(q.resizable=!0);q.flex??(q.flex=0);q.cellXAdj??(q.cellXAdj=0);q.cellWidthAdj??(q.cellWidthAdj=0);q.sortable??(q.sortable=!0);q.sortState??(q.sortState="none");q.placement??(q.placement=n);y.callSuper(l,q);const E=y.gridController;y.resizer=new g(y,{cursor:B,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[t.SizeToParent,t.Draggable,{requestDragPosition:function(F,K){K=F-this.x;if(E.fitToWidth&&(0<K?K=h(K,-p(y),y.maxValue-y.value+a(y)):0>K&&(K=e(K,-f(y),y.minValue-y.value+c(y))),0===K))return;F=y.value+K;y.resizable&&y.setValue(F);F-=y.value;K=F-K;let L=0;0>F?L=w(y,F):0<F&&(L=r(y,F));this.dragInitX+=L;K-=L;E.fitToWidth&&(0>K?m(y,K):0<K&&A(y,K))}}]);E&&(E.notifyAddHdr(y),E.notifyHdrXChange(y),E.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(l){this.setGridController();this.callSuper(l)},setSortable:function(l){this.set("sortable",l,!0)},setSortState:function(l){this.set("sortState",l,!0)},setResizable:function(l){this.set("resizable",l,!0)},setCellWidthAdj:function(l){this.cellWidthAdj=l},setCellXAdj:function(l){this.cellXAdj=l},setFlex:function(l){this.flex=l},setColumnId:function(l){this.columnId=l},setResizerCursor:function(l,q){const y=this.resizer,B=y.cursor;l!==B&&(q&&(this.__rrc=B),y.setCursor(l))},restoreResizerCursor:function(){const l=
this.__rrc;l&&(this.setResizerCursor(l),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(l){this.last=l;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(l){const q=this.gridController;q!==l&&(q?.notifyRemoveHdr(this),this.gridController=l,this.inited&&l&&(l.notifyAddHdr(this),l.notifyHdrXChange(this),l.notifyHdrWidthChange(this),l.notifyHdrVisibilityChange(this)))},setValue:function(l){this.callSuper(l);
this.inited&&this.setWidth(this.value)},setMinValue:function(l){const q=this.minValue??0,y=this.gridController;this.callSuper(l);this.inited&&q!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-q)},setMaxValue:function(l){const q=this.maxValue??0,y=this.gridController;l??=1E3;this.callSuper(l);this.inited&&q!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-q)},setWidth:function(l){const q=this.width;this.callSuper(l);this.inited&&q!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(l){const q=this.x;this.callSuper(l);this.inited&&q!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(l){const q=this.visible;this.callSuper(l);this.inited&&q!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=t.GridRow=new u("GridRow",{initNode:function(l,q){q.placement??(q.placement=n);this.callSuper(l,q);this.gridController?.notifyAddRow(this)},destroy:function(l){this.setGridController();this.callSuper(l)},setGridController:function(l){const q=
this.gridController;q!==l&&(q?.notifyRemoveRow(this),this.gridController=l,this.inited&&l?.notifyAddRow(this))},notifyHdrXChange:function(l){this.getRef(l.columnId)?.setX(l.x+l.cellXAdj)},notifyHdrWidthChange:function(l){this.getRef(l.columnId)?.setWidth(l.width+l.cellWidthAdj)},notifyHdrVisibilityChange:function(l){this.getRef(l.columnId)?.setVisible(l.visible)}}),O=t.Grid=new v("Grid",g,{include:[C],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(l,q){q.overflow??
(q.overflow="autox");q.bgColor??(q.bgColor="#ccc");q.rowSpacing??(q.rowSpacing=1);q.columnSpacing??(q.columnSpacing=1);var y=q.isAutoScrolling;delete q.isAutoScrolling;this.callSuper(l,q);l=this.header=new g(this,{overflow:"hidden"});l.xLayout=new k(l,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});l.yLayout=new t.SizeToChildren(l,{locked:!0,axis:"y"});q=this.sizeHeightToRows;y=this.content=new g(this,{overflow:q?"hidden":"autoy"},y?[t.AutoScroller]:[]);y.yLayout=new k(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:q});this.syncTo(this,"setGridWidth","width");this.syncTo(l,"_updateContentWidth","width");this.constrain("_updateContentHeight",[q?y:this,"height",l,"height",l,"y"])},setSizeHeightToRows:function(l){this.sizeHeightToRows=l},setRowSpacing:function(l){this.rowSpacing!==l&&(this.rowSpacing=l,this.inited&&this.content.yLayout.setSpacing(l))},setColumnSpacing:function(l){this.columnSpacing!==l&&(this.columnSpacing=l,this.inited&&this.header.xLayout.setSpacing(l))},
setLocked:function(l){if(this.inited)for(const q of[this.header.xLayout,this.header.yLayout,this.content.yLayout])l?q.incrementLockedCounter():(q.decrementLockedCounter(),q.update());this.callSuper(l)},_updateContentWidth:function(l){const q=this.content;l=l.value;q.setWidth(l);for(const y of q.getSubviews())y.setWidth(l)},_updateContentHeight:function(l){const {header:q,content:y}=this;l=q.y+q.height;y.setY(l);this.sizeHeightToRows?this.setHeight(l+y.height):y.setHeight(this.height-l)},determinePlacement:function(l,
q){if(l===n){let y;q.isA(M)?y=this.content:q.isA(J)&&(y=this.header);if(y)return q.gridController!==this&&q.setGridController(this),y}return this.callSuper(l,q)},doSort:function(){const [l,q]=this.sort??["",""],y=this.getSortFunction(l,q);if(y){const B=this.content,E=B.yLayout;this.rows.sort(y);B.sortSubviews(y);E.sortSubviews(y);E.update()}},getSortFunction:(l,q)=>{if(l){const y=q===O.SORT_ORDER_ASC?1:-1;return(B,E)=>{B=B.getRef(l).text;E=E.getRef(l).text;return B>E?y:E>B?-y:0}}}});t.SimpleGridColHdr=
new v("SimpleGridColHdr",t.SimpleTextButton,{include:[J],initNode:function(l,q){const y=this;q.activeColor??(q.activeColor="#999");q.hoverColor??(q.hoverColor="#bbb");q.readyColor??(q.readyColor="#aaa");q.inset??(q.inset=2);q.sortIconColor??(q.sortIconColor="#666");const B=q.outset??2;delete q.outset;y.callSuper(l,q);y.sortIcon=new t.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(E,F){this.callSuper(E,F);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
y.setOutset(this.width+B);z(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);z(y);H(y)},setSortIconColor:function(l){this.sortIconColor=l;this.sortIcon?.setTextColor(l)},setSortable:function(l){this.callSuper(l);this.inited&&(l&&this.setOutset(14),this.setDisabled(!l),H(this))},setSortState:function(l){this.callSuper(l);this.inited&&H(this)},setWidth:function(l){this.callSuper(l);this.inited&&z(this)},doActivated:function(){this.disabled||(this.setSortState(this.sortState===O.SORT_ORDER_ASC?
O.SORT_ORDER_DESC:O.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(t=>{const {Class:x,Module:v}=JS,u=Math,h=u.max,{View:e,LocalStorage:{setDatum:g,getDatum:k},global:{focus:n,keys:b},getAlphaObjSortFunc:d}=t,a=z=>{const C=z.selectedRow;C&&(C.setSelected(!1),z.set("selectedRow",null,!0))},f=z=>z.__ssk??(z.__ssk="InfiniteGridMixin.sort."+t.hash(z.columnHeaders.map(C=>C.columnId).sort().join(","))),c=t.InfiniteListRow=new v("InfiniteListRow",{include:[t.Reusable],setInfiniteOwner:function(z){this.infiniteOwner=z},setModel:function(z){this.model=z},setClassKey:function(z){this.classKey=
z},notifyRefreshed:()=>{}}),p=t.SelectableInfiniteListRow=new v("SelectableInfiniteListRow",{include:[c,t.Selectable]}),w=t.InfiniteList=new x("InfiniteList",e,{initNode:function(z,C){let J=C.rowClasses;delete C.rowClasses;if("function"===typeof J){const M={};M["default"]=J;J=M}C.modelIDName??(C.modelIDName="id");C.numericSort??(C.numericSort=!0);C.ascendingSort??(C.ascendingSort=!0);C.overflow??(C.overflow="autoy");C.bgColor??(C.bgColor="#ccc");C.rowSpacing??(C.rowSpacing=1);C.rowInset??(C.rowInset=
0);C.rowOutset??(C.rowOutset=0);C.rowHeight??(C.rowHeight=30);C.overscrollBehavior??(C.overscrollBehavior="auto contain");this._rowExtent=this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(z,C);z=this._listView=new e(this);this._scrollAnchorView=new e(z,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(J,z);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(z,C)=>new t.TrackActivesMultiPool(z,
C),setOverscrollBehavior:function(z){this.overscrollBehavior=z;this.getIDS().overscrollBehavior=z},setCollectionModel:function(z){this.collectionModel=z},setModelIDName:function(z){this.modelIDName=z},setRowSpacing:function(z){this.rowSpacing=z;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(z){this.rowHeight=z;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(z){if(0<z&&(this.callSuper(z),this.inited)){z=this._listView;
const C=this.width;z.setWidth(C);for(const J of z.getSubviews())J.setWidth(C)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??{})},getVisibleRowForModel:function(z){const C=this.getVisibleRows();let J=C.length;for(;J;){const M=C[--J];if(M.model===z)return M}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const z=this.modelIDName,C=this.ascendingSort;
return this.numericSort?t.getNumericObjSortFunc(z,C):d(z,C,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(z,C){var J=this.getIndexOfModelInData(z);let M=!1;if(0<=J){var O=this._rowExtent;const l=this.getIDE().scrollTop,q=l+this.height;J=this.rowInset+J*O;O=J+O;J<=l?(this.scrollYTo(J,!0),M=!0):O>=q&&(this.scrollYTo(O-this.height,!0),M=!0);C&&((C=this.getVisibleRowForModel(z))?C.focus():this._focusToModel=z)}return M},isModelInData:function(z){return 0<=this.getIndexOfModelInData(z)},getNextModel:function(z,
C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return z+=1,z>=O?C?M[0]:M[O-1]:M[z];if(J&&0<O)return M[O-1]},getPrevModel:function(z,C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return--z,0>z?C?M[O-1]:M[0]:M[z];if(J&&0<O)return M[0]},getIndexOfModelInData:function(z){if(z){const C=this.getListData();let J=C.length;for(;J;)if(this.areModelsEqual(C[--J],z))return J}return-1},areModelsEqual:function(z,C){const J=this.modelIDName;
return z[J]===C[J]},getActiveRowForModel:function(z){if(z){const C=this._itemPool.getActives();let J=C.length;for(;J;){const M=C[--J];if(this.areModelsEqual(M.model,z))return M}}},refreshListData:function(z,C){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(z,C)},resetListUI:function(z,C){const J=this.getListData().length,M=this._listView,O=this._scrollAnchorView;M.setHeight(J*this._rowExtent-(0<J?this.rowSpacing:0)+this.rowInset+
this.rowOutset);O.setY(M.height-O.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=C;z||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(z){if(n.focusedView?.isDescendantOf(z)){const C=this.getFocusTrap();C?C.focus():n.clear()}z.setVisible(!1);this._itemPool.putInstance(z)},refreshListUI:function(z){z=this._rowExtent;const C=this.rowInset,J=this.forceFullResetOnNextRefresh;var M=this.getIDE().scrollTop;const O=this.getListData()??
[];var l=h(0,u.floor((M-C)/z));M=u.min(O.length,u.ceil((M-C+this.height)/z));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==l||this._endIdx!==M||J){const y=this.width,B=this.rowHeight,E=this._visibleRowsByIdx,F=this._focusToModel;this._startIdx=l;this._endIdx=M;for(var q in E)if(q<l||q>=M)this.putRowBackInPool(E[q]),delete E[q];for(q=l;q<M;q++){l=E[q];const K=O[q],L=this.getClassKey(K);let R=!1;l&&l.classKey===L||(l&&this.putRowBackInPool(l),E[q]=l=this._itemPool.getInstance(L),
l.setInfiniteOwner(this),l.setClassKey(L),l.setWidth(y),l.setHeight(B),l.setY(C+q*z),l.setVisible(!0),R=!0);!J&&l.model&&this.areModelsEqual(l.model,K)?R&&this.updateRow(l):(l.setModel(K),this.updateRow(l));l.notifyRefreshed();l.bringToFront();F&&this.areModelsEqual(F,K)&&(l.focus(),this._focusToModel=null)}}},getClassKey:z=>"default",updateRow:z=>{}}),r=t.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",t.SimpleButton,{include:[p,t.ArrowKeyActivation],initNode:function(z,C){C.selectedColor??
(C.selectedColor="#ccf");C.activeColor??(C.activeColor="#f8f8f8");C.hoverColor??(C.hoverColor="#eee");C.readyColor??(C.readyColor="#fff");C.focusIndicator??(C.focusIndicator=!1);C.activationKeys??(C.activationKeys=b.LIST_KEYS);this.callSuper(z,C)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(z){this.callSuper(z);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},
updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(z,C){z===b.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(z,C)},doKeyArrowLeftOrUp:function(z,C){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(z,C){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(z){switch(z){case b.CODE_ENTER:case b.CODE_SPACE:this.doActivated()}}}),
m=t.SelectableInfiniteList=new x("SelectableInfiniteList",w,{setSelectedRow:function(z){const C=this.selectedRow;z!==C&&(C?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",z,!0),z&&(this.setSelectedRowModel(z.model),z.setSelected(!0)))},setSelectedRowModel:function(z){this.set("selectedRowModel",z,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(z,C,J){z&&(a(this),
this.setSelectedRowModel(z),this.refreshListUI(),C&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(z,C=!0){this.selectRowForModel(this.getNextModel(z),C,!0)},selectPrevRowForModel:function(z,C=!0){this.selectRowForModel(this.getPrevModel(z),C,!1)},resetListUI:function(z,C){this.isModelInData(this.selectedRowModel)?a(this):this.setSelectedRow();this.callSuper(z,C)},putRowBackInPool:function(z){z.selected&&a(this);this.callSuper(z)},refreshListUI:function(z){z=n.focusedView;this.callSuper();
const C=this.getActiveSelectedRow();C&&(this.set("selectedRow",C,!0),C.setSelected(!0),z&&z!==C||C.focus(!0))}}),A=new v("InfiniteGridRowMixin",{notifyXChange:function(z){this.getRef(z.columnId)?.setX(z.x+z.cellXAdj)},notifyWidthChange:function(z){this.getRef(z.columnId)?.setWidth(z.width+z.cellWidthAdj)},notifyVisibilityChange:function(z){this.getRef(z.columnId)?.setVisible(z.visible)}}),H=new v("InfiniteGridMixin",{setGridHeader:function(z){(this.gridHeader=z)?.setGrid(this)},makeReady:function(z,
C){const J=this.gridHeader;J?(this.forceFullResetOnNextRefresh=C,C=J.persistSortOrder?k(f(J)):void 0,J.setSort(C??z),J.setLocked(!1)):this.refreshListData(!1,C)},getSortFunction:function(){const [z,C]=this.gridHeader.sort??["",""];return z?d(z,C===t.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(z){const C=this.gridHeader;if(C)for(const J of C.columnHeaders)z.notifyXChange(J),z.notifyWidthChange(J),z.notifyVisibilityChange(J)},notifyXChange:function(z){for(const C of this.getVisibleRows())C.notifyXChange(z)},
notifyWidthChange:function(z){for(const C of this.getVisibleRows())C.notifyWidthChange(z)},notifyVisibilityChange:function(z){for(const C of this.getVisibleRows())C.notifyVisibilityChange(z)}});t.InfiniteGridRow=new v("InfiniteGridRow",{include:[c,A]});t.SelectableInfiniteGridRow=new v("SelectableInfiniteGridRow",{include:[p,A]});t.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",r,{include:[A]});t.InfiniteGrid=new x("InfiniteGrid",w,{include:[H]});t.SelectableInfiniteGrid=
new x("InfiniteGrid",m,{include:[H]});t.InfiniteGridHeader=new x("InfiniteGridHeader",e,{include:[t.GridController],initNode:function(z,C){C.columnSpacing??(C.columnSpacing=1);C.persistSortOrder??(C.persistSortOrder=!0);C.overflow="hidden";this.callSuper(z,C);new t.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(z){this.grid=z},setColumnSpacing:function(z){this.columnSpacing=z},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:h(0,this.getVisibleHdrs().length-1)*this.columnSpacing},
setPersistSortOrder:function(z){this.persistSortOrder=z},setHeight:function(z){this.callSuper(z);if(this.inited){z=this.height;for(const C of this.columnHeaders)C.setHeight(z)}},setWidth:function(z){this.callSuper(h(this.minWidth,z));this.inited&&(z=this.width,this.setGridWidth(z),this.grid.setWidth(z))},subviewAdded:function(z){this.callSuper(z);z.isA(t.GridColHdr)&&(z.setGridController(this),z.setHeight(this.height))},doSort:function(){this.persistSort();this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},
persistSort:function(){this.persistSortOrder&&g(f(this),this.sort)},notifyHdrXChange:function(z){this.isLocked()||(this.grid.notifyXChange(z),this._notifyHdrChange("X",z))},notifyHdrWidthChange:function(z){this.isLocked()||(this.grid.notifyWidthChange(z),this._notifyHdrChange("Width",z))},updateRowsForVisibilityChange:function(z){this.grid.notifyVisibilityChange(z);this.isLocked()||this._notifyHdrChange("Visibility",z)}})})(myt);
(t=>{const x=JS.Class,v=t.PanelStackTransition=new x("PanelStackTransition",t.Node,{to:u=>Promise.resolve(u),from:u=>Promise.resolve(u)});t.PanelStack=new x("PanelStack",t.View,{include:[t.SelectionManager],initNode:function(u,h){h.overflow="hidden";h.itemSelectionId??(h.itemSelectionId="panelId");h.maxSelected??(h.maxSelected=1);this.callSuper(u,h);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(u){this.set("transition",u,!0)},__updateWidth:function(u){this.getActivePanel()?.setWidth(u.value)},
__updateHeight:function(u){this.getActivePanel()?.setHeight(u.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(u){return this.getSelectableItem(u)},selectPanel:function(u){this.selectById(u)},doSelected:function(u){u.setWidth(this.width);u.setHeight(this.height)},doStackTransition:function(u){this["doStackTransition"+(u.selected?"To":"From")](u)},doStackTransitionTo:function(u){const h=this;h.doBeforeTransitionTo(u);const e=h.transition;e?e.to(u).then(g=>{h.doAfterTransitionTo(g)}):
(u.makeHighestZIndex(),u.setVisible(!0),h.doAfterTransitionTo(u))},doBeforeTransitionTo:u=>{},doAfterTransitionTo:u=>{},doStackTransitionFrom:function(u){const h=this;h.doBeforeTransitionFrom(u);const e=h.transition;e?e.from(u).then(g=>{h.doAfterTransitionFrom(g)}):(u.setVisible(!1),h.doAfterTransitionFrom(u))},doBeforeTransitionFrom:u=>{},doAfterTransitionFrom:u=>{}});t.StackablePanel=new JS.Module("StackablePanel",{include:[t.Selectable],initNode:function(u,h){h.visible=h.selected=!1;h.bgColor??
(h.bgColor="#fff");h.panelId??(h.panelId=h.name);this.callSuper(u,h);this.selected&&this.doStackTransition()},setPanelStack:function(u){this.panelStack=u},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(u){this.panelId=u},setSelected:function(u){this.selected!==u&&(this.callSuper(u),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});t.PanelStackFadeTransition=new x("PanelStackFadeTransition",v,{initNode:function(u,
h){h.duration??(h.duration=1E3);this.callSuper(u,h)},setDuration:function(u){this.duration=u},to:function(u){return new Promise((h,e)=>{u.stopActiveAnimators("opacity");u.setVisible(!0);u.animate({attribute:"opacity",to:1,duration:this.duration}).next(g=>{u.makeHighestZIndex();h(u)})})},from:function(u){return new Promise((h,e)=>{u.stopActiveAnimators("opacity");u.animate({attribute:"opacity",to:0,duration:this.duration}).next(g=>{u.setVisible(!1);h(u)})})}});t.PanelStackSlideTransition=new x("PanelStackSlideTransition",
v,{initNode:function(u,h){h.duration??(h.duration=1E3);h.direction??(h.direction="right");this.callSuper(u,h)},setDuration:function(u){this.duration=u},setDirection:function(u){this.direction=u},to:function(u){const h=u.getPanelStack(),e=this.duration;let g,k;switch(this.direction){case "left":k="x";g=h.width;break;case "right":k="x";g=-h.width;break;case "up":k="y";g=h.height;break;case "down":k="y",g=-h.height}u.stopActiveAnimators(k);u.set(k,g);u.setVisible(!0);return new Promise((n,b)=>{b=d=>
{u.makeHighestZIndex();n(u)};0<e?u.animate({attribute:k,to:0,duration:e}).next(b):(u.set(k,0),u.makeHighestZIndex(),n(u))})},from:function(u){const h=u.getPanelStack(),e=this.duration;let g,k;switch(this.direction){case "left":k="x";g=-h.width;break;case "right":k="x";g=h.width;break;case "up":k="y";g=-h.height;break;case "down":k="y",g=h.height}u.stopActiveAnimators(k);return new Promise((n,b)=>{b=d=>{u.setVisible(!1);n(u)};0<e?u.animate({attribute:k,to:g,duration:e}).next(b):(u.set(k,g),u.setVisible(!1),
n(u))})}})})(myt);
(t=>{const x=JS.Module,{Draggable:v,global:{dragManager:u,mouse:h}}=t,e=(k,n,b)=>{for(const d of[n,b])k["__is"+d]=!1,k["__tmrId"+d]=null},g=t.DragGroupSupport=new x("DragGroupSupport",{initNode:function(k,n){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(k,n)},setDragGroups:function(k){const n=this.__dgs={};for(const b in k)n[b]=!0;this.__anyDG=n.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(k){const n=this.__drpgs=
{};for(const b in k)n[b]=!0;this.__anyDRPG=n.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(k){k&&(this.__dgs[k]=!0,"*"===k&&(this.__anyDG=!0))},removeDragGroup:function(k){k&&(delete this.__dgs[k],"*"===k&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(k){k&&(this.__drpgs[k]=!0,"*"===k&&(this.__anyDRPG=!0))},removeDropGroup:function(k){k&&(delete this.__drpgs[k],"*"===k&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
t.DropSource=new x("DropSource",{include:[v],initNode:function(k,n){n.distanceBeforeDrag??(n.distanceBeforeDrag=2);n.dropParent??(n.dropParent=k.getRoot());this.callSuper(k,n)},setDropClass:function(k){this.dropClass=t.resolveClassname(k)},setDropClassAttrs:function(k){this.dropClassAttrs=k},setDropParent:function(k){this.dropParent=k},startDrag:function(k){const n=this.dropable=this.makeDropable();if(n){const b=n.distanceBeforeDrag;n.distanceBeforeDrag=0;n.doMouseDown(k);n.__doMouseDown(k);n.distanceBeforeDrag=
b}},doMouseUp:function(k){this.callSuper(k);const n=this.dropable;n&&(n.__doMouseUp(k),n.doMouseUp(k),this.dropable=null)},makeDropable:function(){const k=this.dropClass,n=this.dropParent;if(k&&n){const b=t.DomElementProxy.getRelativePosition(this.getIDE(),n.getIDE());return new k(n,{...this.dropClassAttrs,x:b.x??0,y:b.y??0})}}});t.DropTarget=new x("DropTarget",{include:[g],initNode:function(k,n){this.callSuper(k,n);u.registerDropTarget(this)},destroy:function(){u.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(k){return!this.disabled&&this.isVisible()},notifyDragStart:k=>{},notifyDragStop:k=>{},notifyDragEnter:k=>{},notifyDragLeave:k=>{},notifyDrop:k=>{}});t.Dropable=new x("Dropable",{include:[v,g],setDropTarget:function(k){this.dropTarget=k},setDropped:function(k){this.dropped=k},setDropFailed:function(k){this.dropFailed=k},willPermitDrop:k=>!0,startDrag:function(k){this.setDropped(!1);this.setDropFailed(!1);u.startDrag(this);this.callSuper(k)},updateDrag:function(k){u.updateDrag(k,
this);this.callSuper(k)},stopDrag:function(k,n){u.stopDrag(k,this,n);this.callSuper(k,n);n?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(k){this.setDropTarget(k)},notifyDragLeaving:function(k){this.setDropTarget()},notifyDropped:function(k,n){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});t.AutoScroller=new x("AutoScroller",{include:[g],initNode:function(k,n){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;n.overflow??(n.overflow="auto");this.callSuper(k,n);u.registerAutoScroller(this)},destroy:function(){u.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(k){this.scrollBorder=Math.max(1,k)},setScrollFrequency:function(k){this.scrollFrequency=k},setScrollAmount:function(k){this.scrollAmount=k},setScrollAcceleration:function(k){this.scrollAcceleration=k},notifyAutoScrollerDragStart:function(k){k=this.getIDE();(k.scrollHeight>k.clientHeight||
k.scrollWidth>k.clientWidth)&&this.attachToDom(h,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(k){this.detachFromDom(h,"__hndlMove","mousemove",!0);e(this,"Up","Down");e(this,"Left","Right")},__hndlMove:function(k){const n=this;let {pageX:b,pageY:d}=k.value;if(n.containsPoint(b,d)){k=n.getPagePosition();const a=n.scrollBorder,f=(c,p)=>{n["__is"+c]&&(n.getIDE()["scroll"+("Up"===c||"Down"===c?"Top":"Left")]+=p*n["__amt"+c],n["__tmrId"+c]=setTimeout(()=>{f(c,p)},n.scrollFrequency))};
b-=k.x;d-=k.y;d<a?(n.__isUp=!0,n.__amtUp=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-d/a))),n.__tmrIdUp||f("Up",-1)):n.height-d<a?(n.__isDown=!0,n.__amtDown=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-(n.height-d)/a))),n.__tmrIdDown||f("Down",1)):e(n,"Up","Down");b<a?(n.__isLeft=!0,n.__amtLeft=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-b/a))),n.__tmrIdLeft||f("Left",-1)):n.width-b<a?(n.__isRight=!0,n.__amtRight=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-(n.width-
b)/a))),n.__tmrIdRight||f("Right",1)):e(n,"Left","Right")}else e(n,"Up","Down"),e(n,"Left","Right")}})})(myt);
(t=>{const {max:x,cos:v,sin:u,PI:h}=Math,e=t.Geometry.degreesToRadians,g=a=>{var f=e(a.startAngle),c=e(a.endAngle);if(f>c){var p=f;f=c;c=p}p=a.__path;var w=a.width/2,r=a.thickness;const m=a.radius,A=m+r;var H=c-f;const z=H+1E-4>=2*h;z&&(f=0,c=h);const C=[w+A*v(f),w+A*u(f)],J=[w+A*v(c),w+A*u(c)];c=[w+m*v(c),w+m*u(c)];f=[w+m*v(f),w+m*u(f)];w=["M"+C.join()];z?w.push("A"+[A,A,0,1,1,J].join(),"A"+[A,A,0,1,1,C].join(),"L"+c.join(),"A"+[m,m,0,1,0,f].join(),"A"+[m,m,0,1,0,c].join()):(H=H%(2*h)>h?1:0,r/=2,
w.push("A"+[A,A,0,H,1,J].join(),a.endCapRounding?"A"+[r,r,0,0,1,c].join():"L"+c.join(),"A"+[m,m,0,H,0,f].join(),a.startCapRounding?"A"+[r,r,0,0,1,C].join():""));w.push("z");p.setAttribute("d",w.join(" "));p.setAttribute("fill",a.color)},k=a=>{const f=2*(a.radius+a.thickness),c=a.__svg;a.setWidth(f);a.setHeight(f);c.setAttribute("viewBox","0 0 "+f+" "+f);c.setAttribute("width",f);c.setAttribute("height",f);g(a)},n=(a,f,c)=>{a[f]!==c&&(a[f]=c,a.inited&&(g(a),a.fireEvent(f,c)))},b=(a,f,c)=>{a[f]!==c&&
(a[f]=c=x(0,c),a.inited&&(k(a),a.fireEvent(f,c)))},d=(a,f)=>{a=document.createElementNS("http://www.w3.org/2000/svg",a);f?.appendChild(a);return a};t.Annulus=new JS.Class("Annulus",t.BackView,{initNode:function(a,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(a,f);k(this)},createOurDomElement:function(a){a=this.callSuper(a);var f=Array.isArray(a)?a[1]:a;f=this.__svg=d("svg",f);this.__path=d("path",f);f.style.pointerEvents=
"none";return a},setRadius:function(a){b(this,"radius",a)},setThickness:function(a){b(this,"thickness",a)},setStartAngle:function(a){n(this,"startAngle",a)},setEndAngle:function(a){n(this,"endAngle",a)},setStartCapRounding:function(a){n(this,"startCapRounding",a)},setEndCapRounding:function(a){n(this,"endCapRounding",a)},setColor:function(a){n(this,"color",a)},isColorAttr:function(a){return"color"===a||this.callSuper(a)}})})(myt);
(t=>{const x=JS.Class,v=t.RadialGuage=new x("RadialGuage",t.View,{include:[t.BoundedValueComponent],initNode:function(u,h){h.radius??(h.radius=32);h.thickness??(h.thickness=4);h.startAngle??(h.startAngle=270);h.color??(h.color="#666");this.quickSet(["radius","thickness","startAngle","color"],h);const e=this.thickness,g=this.radius;h.width=h.height=2*g;h.minValue??(h.minValue=0);h.maxValue??(h.maxValue=100);h.value??(h.value=0);h.bgColor??(h.bgColor="#fff");h.roundedCorners=g+e;h.borderWidth??(h.borderWidth=
e);h.borderStyle??(h.borderStyle="solid");h.borderColor??(h.borderColor="#ccc");this.callSuper(u,h);this._progressView=new t.Annulus(this,{x:-e,y:-e,radius:g,thickness:e,startAngle:this.startAngle});this._valueView=new t.Text(this,{fontSize:g+"px",align:"center",valign:"middle"});this.redraw()},setMinValue:function(u){this.callSuper(u);this.inited&&this.redraw()},setMaxValue:function(u){this.callSuper(u);this.inited&&this.redraw()},setValue:function(u){this.callSuper(u);this.inited&&this.redraw()},
redraw:function(){const u=this._progressView,h=this._valueView,e=this.value,g=e/(this.maxValue-this.minValue),k=this.getColorByValue(e,g);u.setEndAngle(this.startAngle+360*g);u.setColor(k);h.setText(this.getTextByValue(e));h.setTextColor(k);this.setTooltip(this.getTooltipByValue(e))},getColorByValue:function(u,h){return this.color},getTooltipByValue:function(u){return this.getTextByValue(u)},getTextByValue:function(u){return""+u}});t.ColorThresholdRadialGuage=new x("ColorThresholdRadialGuage",v,{initNode:function(u,
h){h.thresholdType??(h.thresholdType="percent");h.thresholds??(h.thresholds=[]);this.quickSet(["thresholdType","thresholds"],h);this.thresholds.sort((e,g)=>g.value-e.value);this.callSuper(u,h)},getColorByValue:function(u,h){const e="percent"===this.thresholdType?h:u;for(const g of this.thresholds)if(e>=g.value)return g.color;return this.callSuper(u,h)}})})(myt);
(t=>{let x;const v=JS.Class,{mouse:u,windowResize:h,dragManager:e}=t.global,{min:g,max:k,round:n}=Math,b=c=>{if(c.tooltip){const p=c._lastPos;if(c.tooltip.parent.containsPoint(p.x,p.y))return!0}c.hideTip();return!1},d=t.BaseTooltip=new v("BaseTooltip",t.View,{include:[t.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(c,p){this.tipDelay=this.nextTipDelay=d.TIP_DELAY;this.tipHideDelay=d.TIP_HIDE_DELAY;p.visible??(p.visible=!1);this.callSuper(c,p)},setTooltip:function(c){this.inited&&
(this.tooltip=c)&&(this.attachToDom(u,"__hndl_mousemove","mousemove",!0),this.attachToDom(c.parent,"hideTip","mousedown",!0),this.attachToDom(c.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(c){const p=this;p._lastPos=t.MouseObservable.getMouseFromEvent(c);b(p)&&(p.__checkTID&&(clearTimeout(p.__checkTID),delete p.__checkTID),p.__checkTID=setTimeout(()=>{delete p.__checkTID;b(p)&&p.showTip()},p.nextTipDelay))},hideTip:function(c){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(c=this.tooltip?.parent)this.detachFromDom(c,"hideTip","mousedown",!0),this.detachFromDom(c,"hideTip","mouseup",!0),this.detachFromDom(u,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){e.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),a=t.Tooltip=new v("Tooltip",d,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(c,p){p.edgeSize??(p.edgeSize=a.EDGE_SIZE);p.edgeColor??(p.edgeColor=a.EDGE_COLOR);p.shadowSize??(p.shadowSize=a.SHADOW_SIZE);p.shadowColor??(p.shadowColor=a.SHADOW_COLOR);p.insetH??(p.insetH=a.HORIZONTAL_INSET);p.insetV??(p.insetV=a.VERTICAL_INSET);p.tipBgColor??(p.tipBgColor=a.TIP_BG_COLOR);p.tipTextColor??(p.tipTextColor=a.TIP_TEXT_COLOR);this.callSuper(c,p);this._tipText=new t.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(c){this.edgeSize=c},setEdgeColor:function(c){this.edgeColor=c},setShadowSize:function(c){this.shadowSize=c},setShadowColor:function(c){this.shadowColor=c},setInsetH:function(c){this.insetH=c},setInsetV:function(c){this.insetV=c},setTipBgColor:function(c){this.tipBgColor=c},setTipTextColor:function(c){this.tipTextColor=c},showTip:function(){const c=this.tooltip;var p=c.text;const w=c.parent;var r=this._tipText;const m=this.edgeSize,A=this.shadowSize;r.text!==
p&&r.setText(p);r.setWidth("auto");var H=g(r.measureNoWrapWidth(),c.maxTextWidth);p=H+2*r.x;const z=p+2*m;r.setWidth(H);r.sizeViewToDom();H=w.getPagePosition();r=r.height+2*r.y;const C=r+2*m,J=H.y-C+("below"===c.tipvalign?w.height+C:0);H=H.x;switch(c.tipalign){case "right":H-=z;case "farright":H+=w.width;break;case "farleft":H-=z}this.setX(n(g(k(H,0),h.getWidth()-z)));this.setY(n(g(k(J,0),h.getHeight()-C)));this.setWidth(p);this.setHeight(r);this.setBgColor(this.tipBgColor);this.setBorder([m,"solid",
this.edgeColor]);this.setBoxShadow([A,A,A,this.shadowColor]);this.callSuper()}}),f=t.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:a,MAX_TEXT_WIDTH:280},setTooltip:function(c){this.callSuper("");this.set("tooltip",c,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(c){this.set("tipAlign",c,!0)},setTipValign:function(c){this.set("tipValign",c,!0)},setMaxTextWidth:function(c){this.set("maxTextWidth",c,!0)},setTipClass:function(c){this.set("tipClass",c,!0)},doSmoothMouseOver:function(c){const p=
this.getTooltip();this.callSuper(c);if(c&&p){c=this.tipClass??f.TIP_CLASS;!x||x instanceof c||(x.destroy(),x=null);if(!x){let w=document.getElementById("tooltipDiv");w||(w=t.DomElementProxy.createElement("div",{position:"absolute"}),t.getElement().appendChild(w));x=new c(w,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:p,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||f.MAX_TEXT_WIDTH})}}})})(myt);
(t=>{const x=Math,{min:v,max:u}=x;t.Path=new JS.Class("Path",{initialize:function(h){this.setVectors(h??[])},setVectors:function(h){this._boundingBox=null;this.vectors=h},copyFrom:function(h){this.vectors=h.vectors.slice();this._boundingBox=null},drawInto:function(h){h.beginPath();const e=this.vectors;let g=e.length,k=0;for(h.moveTo(e[k++],e[k++]);g>k;)h.lineTo(e[k++],e[k++]);h.closePath()},translate:function(h,e){const g=this.vectors;let k=g.length;for(;k;)g[--k]+=e,g[--k]+=h;this._boundingBox=null},
scale:function(h){const e=this.vectors;let g=e.length;for(;g;)e[--g]*=h,e[--g]*=h;this._boundingBox=null},rotate:function(h){const e=x.cos(h);h=x.sin(h);const g=this.vectors,k=g.length;for(let n=0;k>n;){const b=g[n]*e-g[n+1]*h,d=g[n]*h+g[n+1]*e;g[n++]=b;g[n++]=d}this._boundingBox=null},rotateAroundOrigin:function(h,e,g){this.translate(-e,-g);this.rotate(h);this.translate(e,g)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const h=this.vectors;let e=h.length,g,k,n,b;if(2<=
e){n=b=h[--e];for(g=k=h[--e];e;){const d=h[--e],a=h[--e];n=v(d,n);b=u(d,b);g=v(a,g);k=u(a,k)}return this._boundingBox={x:g,y:n,width:k-g,height:b-n}}return this._boundingBox=null},getCenter:function(){const h=this.getBoundingBox();return h?{x:h.x+h.width/2,y:h.y+h.height/2}:null},isPointInPath:function(h,e){"object"===typeof h&&(e=h.y,h=h.x);return t.Geometry.isPointInPath(h,e,this.getBoundingBox(),this.vectors)}})})(myt);
(t=>{const x=console.warn,v=Math.PI,u=v/2,h=3*v/2,e=t.AccessorSupport,g={};for(const k of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))g[k]=function(...n){this.__ctx[k](...n)};for(const k of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])g[k]=
function(...n){return this.__ctx[k](...n)};for(const k of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))g[e.generateSetterName(k)]=function(n){this.__ctx[k]=n},g[e.generateGetterName(k)]=function(){return this.__ctx[k]};t.Canvas=new JS.Class("Canvas",t.BackView,{include:[g],initNode:function(k,n){this.quickSet(["willReadFrequently"],n);this.callSuper(k,n)},
createOurDomElement:function(k){k=this.callSuper(k);var n=Array.isArray(k)?k[1]:k;const b=this.__cvs=document.createElement("canvas");b.className="mytUnselectable";n.appendChild(b);b.style.position="absolute";n={};this.willReadFrequently&&(n.willReadFrequently=!0);this.__ctx=b.getContext("2d",n);return k},setWidth:function(k){0>k&&(k=0);this.__cvs.setAttribute("width",k);this.callSuper(k)},setHeight:function(k){0>k&&(k=0);this.__cvs.setAttribute("height",k);this.callSuper(k)},clear:function(){const k=
this.__ctx;k.save();k.setTransform(1,0,0,1,0,0);k.clearRect(0,0,this.width,this.height);k.restore()},dataURItoBlob:function(k,n){k=atob(k.split(",")[1]);const b=k.length,d=[];for(let a=0;a<b;)d.push(k.charCodeAt(a++));return new Blob([new Uint8Array(d)],{type:n})},getDataURL:function(k,n){return this.__cvs.toDataURL(k,n)},getImageFile:function(k,n,b){switch(k){case "png":case "PNG":k="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":k="jpeg";b??=.5;break;default:x("Unexpected image type",
k),k=k.toLowerCase()}const d="image/"+k;b=this.dataURItoBlob(this.getDataURL(d,b),d);n&&(b.name=n+"."+k);return b},circle:function(k,n,b){this.__ctx.arc(k,n,b,0,2*v)},drawRoundedRect:function(k,n,b,d,a,f){const c=this.lineTo.bind(this),p=this.arc.bind(this);f=d+f;a=b+a;this.beginPath();this.moveTo(b,d+k);c(b,f-k);p(b+k,f-k,k,v,u,!0);c(a-k,f);p(a-k,f-k,k,u,0,!0);c(a,d+k);p(a-k,d+k,k,0,h,!0);c(b+k,d);p(b+k,d+k,k,h,v,!0);this.closePath();0<n&&(k-=n,b+=n,a-=n,d+=n,f-=n,this.moveTo(b,d+k),p(b+k,d+k,k,
v,h),c(a-k,d),p(a-k,d+k,k,h,0),c(a,f-k),p(a-k,f-k,k,0,u),c(b+k,f),p(b+k,f-k,k,u,v),this.closePath());return this},drawRectOutline:function(k,n,b,d,a){a=b+a;d=n+d;const f=n+k,c=d-k,p=b+k;k=a-k;const w=this.lineTo.bind(this);this.beginPath();this.moveTo(n,b);w(n,a);w(d,a);w(d,b);w(n,b);w(f,p);w(c,p);w(c,k);w(f,k);w(f,p);this.closePath();return this},drawPartiallyRoundedRect:function(k,n,b,d,a,f,c,p){p=f+p;c=a+c;const w=this.lineTo.bind(this),r=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(a,
f+k);w(a,p-b);0<b&&r(a,p,a+b,p);w(c-d,p);0<d&&r(c,p,c,p-d);w(c,f+n);0<n&&r(c,f,c-n,f);w(a+k,f);0<k&&r(a,f,a,f+k);this.closePath();return this},drawAnnulus:function(k,n,b,d,a,f,c,p=60){const w=t.Color;for(var r of c)"string"===typeof r.color&&(r.color=w.makeColorFromHexString(r.color));1>p&&(x("Invalid segements",p),p=60);p=v/p;r=0;for(var m=c.length-1;r<m;){var A=c[r++];const {angle:y,color:B}=A,{angle:E,color:F}=c[r];var H=Math.round((E-y)/p),z=B.getDiffFrom(F);A.colorDelta={red:z.red/H,green:z.green/
H,blue:z.blue/H}}b=new t.Path([k+b,n,k+d,n]);b.rotateAroundOrigin(a,k,n);d=b.vectors;let [C,J,M,O]=d,l=0,q=v/360;for(r=0;f>a;){H=C;z=J;m=M;A=O;a+=p;a>f&&(p+=f-a,q=0,a=f);b.rotateAroundOrigin(p+q,k,n);[C,J,M,O]=d;this.beginPath();this.moveTo(H,z);this.lineTo(m,A);this.lineTo(M,O);this.lineTo(C,J);this.closePath();const {color:y,colorDelta:B}=c[r];this.setFillStyle(w.rgbToHex(y.red+l*B.red,y.green+l*B.green,y.blue+l*B.blue,!0));this.fill();0<q&&(b.rotateAroundOrigin(-q,k,n),[C,J,M,O]=d);l++;a>=c[r+
1].angle&&(l=0,r++)}return this}})})(myt);
(t=>{const {Class:x,Module:v}=JS,{View:u,Text:h,FontAwesome:{makeTag:e}}=t;t.GrowlManager=new x("GrowlManager",u,{include:[t.SizeToWindowHeight],initNode:function(d,a){const f=this;a.overflow??(a.overflow="autoy");a.margin??(a.margin=8);a.spacing??(a.spacing=4);a.reverse??(a.reverse=!0);a.width??(a.width=300);a.visible??(a.visible=!1);a.pointerEvents??(a.pointerEvents="none");a.moveDuration??(a.moveDuration=300);a.dedupe??(a.dedupe=!0);a.simpleGrowlClass??(a.simpleGrowlClass=t.SimpleGrowl);f.quickSet(["moveDuration",
"dedupe"],a);f.callSuper(d,a);f.doAlignment();const c=f.moveDuration;new t.SpacedLayout(f,{axis:"y",reverse:f.reverse,spacing:f.spacing},[{updateParent:function(p,w){0<c?(f.stopActiveAnimators("height"),f.animate({attribute:"height",to:w+this.outset-this.spacing,duration:c})):this.callSuper(p,w)},updateSubview:function(p,w,r,m){return 0<c?(w.stopActiveAnimators("y"),w.animate({attribute:"y",to:m,duration:c}),m+w.height+this.spacing):this.callSuper(p,w,r,m)}}])},setHeight:function(d){this.callSuper(d-
2*this.margin)},setVisible:function(d){this.visible!==d&&(this.visible=d,this.getODS().display=d?"block":"none",this.inited&&this.fireEvent("visible",d))},setMargin:function(d){this.set("margin",d,!0);this.getODS().margin=d+"px"},setSpacing:function(d){this.set("spacing",d,!0)},setReverse:function(d){this.set("reverse",d,!0)},doAlignment:function(){const d=this.getODS();d.left=null;d.right="0px"},notifyChanged:function(){this.setVisible(0<this.getSubviews().length)},subviewAdded:function(d){this.callSuper(d);
this.notifyChanged()},subviewRemoved:function(d){this.callSuper(d);this.notifyChanged()},addGrowl:function(d){if(this.dedupe){const a=d.getHash(),f=this.getSubviews();let c=f.length;for(;c;){const p=f[--c];if(p!==d&&p.getHash?.()===a){this.removeGrowl(p);break}}}d.setVisible(!0)},removeGrowl:function(d){d.destroy()},addSimpleGrowl:function(d,a){this.addGrowl(new this.simpleGrowlClass(this,{text:d,...(a??{})}))}});t.KeepShowingMixin=new v("KeepShowingMixin",{include:[t.MouseOver],initNode:function(d,
a){a.initialKeepDuration??(a.initialKeepDuration=-1);a.keepDuration??(a.keepDuration=-1);this.quickSet(["initialKeepDuration","keepDuration"],a);this.callSuper(d,a);d=this.initialKeepDuration;0<=d&&this.keepShowing(!1,d)},keepShowing:function(d,a){const f=this;a??=f.keepDuration;(f.__keepShowing=d)&&f.__timerIdKS&&clearTimeout(f.__timerIdKS);0<=a&&!d&&(f.__timerIdKS=setTimeout(()=>{("function"===typeof f.isShown?f.isShown():f.visible)&&!f.__keepShowing&&("function"===typeof f.hide?f.hide(!0):f.setVisible(!1))},
a))},doMouseOver:function(d){this.keepShowing(!0);this.callSuper(d)},doMouseOut:function(d){this.keepShowing(!1);this.callSuper(d)}});t.KeepShowingChildMixin=new v("KeepShowingChildMixin",{doMouseOver:function(d){this.callSuper(d);return!0},doMouseOut:function(d){this.callSuper(d);return!0}});t.GrowlMixin=new v("GrowlMixin",{include:[t.SizeToParent,t.KeepShowingMixin],initNode:function(d,a){a.percentOfParentWidth??(a.percentOfParentWidth=100);a.pointerEvents??(a.pointerEvents="auto");a.overflow??
(a.overflow="hidden");a.bgColor??(a.bgColor="#fff");a.roundedCorners??(a.roundedCorners=3);a.boxShadow??(a.boxShadow=[0,0,8,"#00000088"]);a.initialKeepDuration??(a.initialKeepDuration=5E3);a.keepDuration??(a.keepDuration=1E3);a.showDuration??(a.showDuration=300);a.hideDuration??(a.hideDuration=300);this.quickSet(["showDuration","hideDuration"],a);a.opacity=0;a.visible=!1;this.callSuper(d,a)},setVisible:function(d){const a=this;a.inited?(a.stopActiveAnimators("opacity"),d?(a.animate({attribute:"opacity",
to:1,duration:a.showDuration}),a.callSuper(d)):a.animate({attribute:"opacity",to:0,duration:a.hideDuration}).next(f=>{a.parent.removeGrowl(a)})):a.callSuper(d)},getHash:function(){return this.hash??(this.hash=t.hash(this.getHashableString()))},getHashableString:()=>""+t.generateGuid()});const g=e(["times"]),k=e(["clipboard-check"]),n="maxHeight icon iconSize text padding spacing whiteSpace showCloseButton closeIcon closeOnly showCopyButton copyIcon".split(" "),b=new x("LocalTxtBtn",t.TextButton,{include:[t.KeepShowingChildMixin],
initNode:function(d,a){a.width??(a.width=24);a.height??(a.height=24);a.paddingTop??(a.paddingTop=4);a.activeColor??(a.activeColor="#ccc");a.hoverColor??(a.hoverColor="#ddd");a.readyColor??(a.readyColor="#eee");this.callSuper(d,a)}});t.SimpleGrowl=new x("SimpleGrowl",u,{include:[t.GrowlMixin],initNode:function(d,a){const f={};a.maxHeight??(a.maxHeight=100);a.spacing??(a.spacing=6);a.padding??(a.padding=12);a.whiteSpace??(a.whiteSpace="normal");a.iconSize??(a.iconSize="24px");a.showCloseButton??(a.showCloseButton=
!1);a.showCloseButton&&(a.closeIcon??(a.closeIcon=g),a.closeOnly??(a.closeOnly=!1));a.showCopyButton??(a.showCopyButton=!1);a.showCopyButton&&(a.copyIcon??(a.copyIcon=k));for(const r of n)f[r]=a[r],delete a[r];f.closeOnly&&(a.initialKeepDuration=a.keepDuration=-1);this.callSuper(d,a);const {maxHeight:c,padding:p,icon:w}=f;w&&(this.iconTxt=new h(this,{y:p,text:w,fontSize:f.iconSize}));d=this.msgTxt=new h(this,{y:p,text:f.text,whiteSpace:f.whiteSpace,layoutHint:1});0<c&&(d.setOverflow("autoy"),d.getIDS().maxHeight=
c+"px");f.showCopyButton&&(this.copyBtn=this.makeCopyButton(f),d.setUserUnselectable(!1));f.showCloseButton&&(this.closeBtn=this.makeCloseButton(f));new t.ResizeLayout(this,{inset:p,spacing:f.spacing,outset:p});new t.SizeToChildren(this,{axis:"y",paddingY:p})},makeCloseButton:function(d){const a=this;new b(a,{y:d.padding,text:d.closeIcon,tooltip:"Dismiss this notification."},[{doActivated:()=>{a.parent.removeGrowl(a)}}])},makeCopyButton:function(d){const a=this;new b(a,{y:d.padding,text:d.copyIcon,
tooltip:"Copy to system clipboard."},[{doActivated:()=>{global.isSecureContext?navigator.clipboard.writeText(a.msgTxt.text):console.warn("access to clipboard blocked because of insecure context.")}}])},getHashableString:function(){return this.iconTxt?.text+" | "+this.msgTxt.text}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
