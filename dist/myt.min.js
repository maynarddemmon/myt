(t=>{let w;var v=a=>{let g=a.length;for(;g;){const k=a[--g];w=k.ver??k.id;if(k.str?.includes(k.sub)||k.prop)return k.id}};var u=a=>{const g=a.indexOf(w);if(0<=g)return parseFloat(a.slice(g+w.length+1))};const l=navigator.userAgent,e=navigator.platform;u=t.BrowserDetect={browser:v([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:l,sub:"Firefox",id:"Firefox"},{str:l,sub:"Chrome",id:"Chrome"},{str:l,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:u(l)||u(navigator.appVersion)||"UNKNOWN",os:v([{str:l,sub:"iPhone",id:"iPhone/iPod"},{str:e,sub:"Linux",id:"Linux"},{str:e,sub:"Mac",id:"Mac"},{str:e,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(u.browser){case "Chrome":case "Safari":t="WebKit";break;case "Explorer":t="MS";break;case "Firefox":t="Moz";break;case "Opera":t="O";break;default:t="UNKNOWN"}v=t.toLowerCase();u.prefix={dom:t,lowercase:v,css:"-"+v+"-",js:v[0].toUpperCase()+v.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:t,floor:w,ceil:v}=Math,u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" "),a="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g=h=>(10>h?"0":"")+h,k=(h,d)=>{h=h.getTimezoneOffset();return(0<h?"-":"+")+g(w(t(h/60)))+(d?":":"")+(0==t(h%60)?"00":g(t(h%60)))},c={d:h=>
g(h.getDate()),D:h=>e[h.getDay()],j:h=>h.getDate(),l:h=>a[h.getDay()],N:h=>0==h.getDay()?7:h.getDay(),S:h=>{h=h.getDate();return 1==h%10&&11!=h?"st":2==h%10&&12!=h?"nd":3==h%10&&13!=h?"rd":"th"},w:h=>h.getDay(),z:h=>{const d=new Date(h.getFullYear(),0,1);return v((h-d)/864E5)},W:h=>{const d=new Date(h.valueOf());h=(h.getDay()+6)%7;d.setDate(d.getDate()-h+3);h=d.valueOf();d.setMonth(0,1);4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7);return g(1+v((h-d)/6048E5))},F:h=>l[h.getMonth()],m:h=>g(h.getMonth()+
1),M:h=>u[h.getMonth()],n:h=>h.getMonth()+1,t:h=>{let d=h.getFullYear();h=h.getMonth()+1;12===h&&(d=d++,h=0);return(new Date(d,h,0)).getDate()},L:h=>{h=h.getFullYear();return 0==h%400||0!=h%100&&0==h%4},o:h=>{const d=new Date(h.valueOf());d.setDate(d.getDate()-(h.getDay()+6)%7+3);return d.getFullYear()},Y:h=>h.getFullYear(),y:h=>(""+h.getFullYear()).substr(2),a:h=>12>h.getHours()?"am":"pm",A:h=>12>h.getHours()?"AM":"PM",B:h=>w(1E3*((h.getUTCHours()+1)%24+h.getUTCMinutes()/60+h.getUTCSeconds()/3600)/
24),g:h=>h.getHours()%12||12,G:h=>h.getHours(),h:h=>g(h.getHours()%12||12),H:h=>g(h.getHours()),i:h=>g(h.getMinutes()),s:h=>g(h.getSeconds()),e:h=>/\((.*)\)/.exec((new Date).toString())[1],I:h=>{let d=null,f=0;for(;12>f;){const b=(new Date(h.getFullYear(),f++,1)).getTimezoneOffset();if(null===d)d=b;else if(b<d){d=b;break}else if(b>d)break}return h.getTimezoneOffset()==d|0},O:h=>k(h,!1),P:h=>k(h,!0),T:h=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:h=>60*-h.getTimezoneOffset(),c:h=>h.format("Y-m-d\\TH:i:sP"),
r:h=>h.toString(),U:h=>h.getTime()/1E3,x:h=>h.toLocaleDateString(),X:h=>h.toLocaleTimeString()};return function(h){return h.replace(/(\\?)(.)/g,(d,f,b)=>""===f&&c[b]?c[b](this):b)}})();
(t=>{const w=(f,b)=>{var q=f.__mct__.get(b);if(q)return q.slice();const n=[];if(q=f.__anc__){const r=q.length;for(let x=0;x<r;){const B=q[x++].__fns__;B.has(b)&&n.push(B.get(b))}}else{const r=f.__anc__=[],x=B=>{const I=B.__inc__,z=I.length;for(let C=0;C<z;)x(I[C++]);r.includes(B)||(r.push(B),B=B.__fns__,B.has(b)&&n.push(B.get(b)))};x(f)}f.__mct__.set(b,n.slice());return n},v=(f,b)=>{const q=f.callable;return f.__hs?function(...n){const r=this.callSuper,x=w(b,f.name);let B=x.length-1;if(0===B)r&&delete this.callSuper;
else{const z=n.length,C=this.callSuper=(...J)=>{for(let M=J.length;M<z;)J[M]=n[M++];0===--B&&delete this.callSuper;J=x[B].callable.call(this,...J);this.callSuper=C;B++;return J}}const I=q.call(this,...n);r?this.callSuper=r:delete this.callSuper;return I}:q},u=(f,b)=>{b=b??f;if(b===f){f.__anc__=null;f.__mct__=new Map;var q=f.__dep__;for(var n=q.length;0<n;)u(q[--n])}q=b.__tgt__;n=f.__inc__;const r=n.length;for(let x=0;x<r;)u(n[x++],b);for(const [x,B]of f.__fns__)f=B instanceof a?v(B,b):B,q[x]!==f&&
(q[x]=f)},l=f=>f.__meta__??(f.__meta__=new g(null,null,f)).include(f.klass,!0),e=f=>{const b=function(...q){return this.initialize(...q)??this};b.prototype=Object.create(f.prototype);return b},a=e(Object),g=t.Module=e(Object);a.prototype.initialize=function(f,b,q){this.module=f;this.name=b;this.callable=q;this.__hs=q.toString().includes("callSuper")};var k=g.prototype;k.initialize=function(f,b,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;f&&(this.__displayName=
f);this.include(b,!0)};k.include=function(f,b){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var q=f.extend,n=f.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(n&&(n.__fns__||"function"!==typeof n)){q=n.length;for(let r=0;r<q;)this.include(n[r++],!0)}for(const r of Object.keys(f))if(n=f[r],"extend"!==r&&"include"!==r||!n.__fns__&&"function"===typeof n)this.__fns__.has(r)?(console.warn('JS.Module already has field: "'+r+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new g("Auto_"+r,{[r]:n}),!1)):this.__fns__.set(r,n?.__fns__||"function"!==typeof n?n:new a(this,r,n))}!0!==b&&u(this)}return this};k.includes=function(f){if(f===this)return!0;const b=this.__inc__,q=b.length;for(let n=0;n<q;)if(b[n++].includes(f))return!0;return!1};k.instanceMethod=function(f){return w(this,f).pop()};const c=new g("Kernel",{extend:function(f){l(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||l(this).includes(f)}}),h=t.Class=e(g),d=h.prototype;
d.initialize=function(f,b,q){"function"!==typeof b&&(q=b,b=Object);g.prototype.initialize.call(this,f);f=e(b);for(const n in this)f[n]===this[n]||f.hasOwnProperty(n)||(f[n]=this[n]);f.prototype.constructor=f.prototype.klass=f;l(f).include(b.__meta__);f.__tgt__=f.prototype;b=b===Object?{}:b.__fns__?b:new g(b.prototype,!0);f.include(c,!0).include(b,!0).include(q,!0);u(f);return f};k=(f,b)=>{f.__inc__=[];f.__dep__=[];const q=f.__tgt__=f.prototype,n=f.__fns__=new Map;for(const I of Object.keys(q)){var r=
n,x=r.set;var B=q[I];B=B?.__fns__||"function"!==typeof B?B:new a(f,I,B);x.call(r,I,B)}q.constructor=q.klass=f;for(const I in d)f[I]===d[I]||f.hasOwnProperty(I)||(f[I]=d[I]);f.include(b);f.constructor=f.klass=h};k(a,c);k(g,c);k(h,g);u(l(a));u(l(g));l(h).include(g.__meta__);t.Singleton=new h("Singleton",{initialize:(f,b,q)=>new (new h(f,b,q))})})(global.JS={});
(t=>{class w extends Error{constructor(p,y,...A){super(...A);this.name="FetchError";this.status=p;this.url=y}}let v=0,u,l={};const e=console.warn,a=Math,{abs:g,min:k,max:c,pow:h}=a,d=Array.isArray,f=document,b=f.head,q=f.createElement.bind(f),n={},r={"":!0},x=f.fonts,B=p=>{const y=p.family.split('"').join("");for(const A of[y,y+" "+p.weight])if(!r[A]){r[A]=!0;const E=n[A]??[];for(;E.length;)(p=E.pop())&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y))}},I={},z=p=>{const y=
{};return(...A)=>{const E=JSON.stringify(A);return E in y?y[E]:y[E]=p(...A)}},C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,J=/\$(\d+)/g,M=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,O=/[\\"](.)/g,m=t.myt={version:2.02306021558E7,generateGuid:()=>++v,hash:p=>p.split("").reduce((y,A)=>{y=(y<<5)-y+A.charCodeAt(0);return y&y},0),addEventListener:(p,y,A,E,F)=>{p.addEventListener(y,A,{capture:E||!1,passive:F||!1})},removeEventListener:(p,y,A,E)=>{p.removeEventListener(y,A,E||!1)},resolveName:(p,
y)=>{if(p&&0!==p.length){y=y??global;var A=d(p)?p:p.split("."),E=A.length;for(let F=0;F<E;F++)if(y=y[A[F]],null==y){e("resolveName failed for",p,"at part",F,A[F]);return}return y}},resolveClassname:p=>{"string"===typeof p&&(p=m.resolveName(p));return p&&"function"===typeof p.isA&&p.isA(JS.Class)?p:null},getExtension:p=>p?(p=p.split("."),1<p.length?p.pop():null):null,loadScript:function(p,y,A,E){const F=this._loadedScripts??(this._loadedScripts={});let K=F[p];if(!0===K)y?.(!0);else if(!1===K)y?.(!1);
else if(Array.isArray(K))y&&K.push(y);else{K=F[p]=[];y&&K.push(y);const L=q("script");L.type="text/javascript";L.async=!1;E&&(L.integrity=E,L.crossOrigin="anonymous");const R=N=>{L.onload=L.onreadystatechange=L.onerror=null;for(const T of K)T(N);F[p]=N};L.onerror=()=>{R(!1)};L.onload=L.onreadystatechange=()=>{L.readyState&&"complete"!==L.readyState||R(!0)};L.src=p+(A?"":(p.includes("?")?"&":"?")+"cacheBust="+Date.now());b.appendChild(L)}},dumpStack:(p,y)=>{let A;"string"===typeof p&&(A=p,p=null);
m.global.error.notify(y||"error",null,A,p)},getRandom:p=>{const y=a.random();return p?c(0,k(p(y),.9999999999)):y},getRandomArbitrary:(p,y,A)=>{const E=k(p,y);return m.getRandom(A)*(c(p,y)-E)+E},getRandomInt:(p,y,A)=>{const E=k(p,y);return a.floor(m.getRandom(A)*(c(p,y)-E+1)+E)},areFloatsEqual:(p,y,A)=>{const E=g(p),F=g(y);return g(p-y)<=(E>F?F:E)*(null==A?1E-6:g(A))},areArraysEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;let A=p.length;if(A!==y.length)return!1;for(;A;)if(p[--A]!==y[A])return!1}return!0},
areObjectsEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;for(const A in p)if(p[A]!==y[A])return!1;for(const A in y)if(p[A]!==y[A])return!1}return!0},getElement:(p,y)=>f.getElementsByTagName(p||"body")[0<y?y:0],loadFontFaces:(p,y)=>{const A=[];for(const E of p)p=new FontFace(E.family,"url("+E.url+")",E.options),A.push(p.load());Promise.all(A).then(E=>{for(const F of E)x.add(F),B(F);y?.(E)})},loadFontFace:(p,y,A={},E)=>{p=new FontFace(p,"url("+y+")",A);p.loaded.then(F=>{x.add(F);B(F);E?.(F)});
p.load()},registerForFontNotification:(p,y)=>{r[y]?p&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y)):(n[y]??(n[y]=[])).push(p)},createBaseFontCSSRule:p=>{m.addCSSRule(m.createStylesheet(),"body, input","font-family:"+p,0)},loadCSSFonts:p=>{p?.forEach(m.createStylesheetLink)},createStylesheetLink:p=>{if(p){let y=l[p];y?console.warn("stylesheet already exists",p):(y=l[p]=q("link"),y.rel="stylesheet",y.href=p,b.appendChild(y));return y}},createStylesheet:()=>{const p=q("style");
b.appendChild(p);return p.sheet},addCSSRule:(p,y,A,E)=>{p.insertRule(y+"{"+A+"}",E)},removeCSSRules:p=>{let y=p.cssRules.length;for(;y;)p.deleteRule(--y)},createInputPlaceholderCSSRule:(p,y,A,E=1)=>{let F=p.__sheet;F?m.removeCSSRules(F):F=p.__sheet=m.createStylesheet();p=p.getODE();p=p.id||(p.id="id"+ ++v);const K=[];y&&K.push("color:"+y);A&&K.push("font-family:"+A);E&&K.push("opacity:"+E);m.addCSSRule(F,"#"+p+"::placeholder",K.join("; "),0)},isNotSorted:(p,y)=>{const A=p.length;for(let E=1;E<A;E++)if(0<
y(p[E-1],p[E]))return!0},chainSortFunc:(...p)=>(y,A)=>{for(const E of p){const F=E(y,A);if(0!==F)return F}return 0},getAlphaObjSortFunc:z((p,y,A,E)=>{const F=y?1:-1;return(K,L)=>{K=K[p];L=L[p];E?("string"!==typeof K&&(K=""+K),"string"!==typeof L&&(L=""+L)):(K=K||"",L=L||"");A&&(K=K.toLowerCase(),L=L.toLowerCase());return K.localeCompare(L)*F}}),getNumericObjSortFunc:z((p,y)=>{const A=y?1:-1;return(E,F)=>{E=E[p]||0;F=F[p]||0;return(E-F)*A}}),csvStringToArray:(p,y)=>{if(!p)return[];const A=[[]];let E;
for(;E=M.exec(p);)E[1].length&&","!==E[1]&&A.push([]),A[A.length-1].push(E[2]?E[2].replace(O,"$1"):E[3]);if(y){const F=A.shift();return A.map(K=>{let L=0;return F.reduce((R,N)=>{R[N]=K[L++];return R},{})})}return A},prepareCSVDataURI:(p,y)=>{const A=K=>{if(K&&d(K)){const L=[],R=K.length;for(let N=0,T;R>N;N++)T=K[N],T=null==T?"":T.toString(),T=T.replace(/"/g,'""'),0<=T.search(/("|,|\n)/g)&&(T='"'+T+'"'),L.push(T);return L.join(",")}e("Unexpected row",K);return null},E=[];if(y){var F=A(y);F&&E.push(F)}if(p)if(d(p)){F=
p.length;for(let K=0;F>K;K++){const L=A(p[K]);L&&E.push(L)}}else e("Rows were not an array");return m.encodeCSVDataURI(E.join("\r\n"),y)},encodeCSVDataURI:(p,y)=>"data:text/csv;charset=utf-8"+(null==y?"":";header="+(y?"present":"absent"))+","+encodeURIComponent(p),dataURIToBlob:p=>{var y=p.indexOf(",");const A=p.slice(0,y).split(":")[1].split(";")[0];p=p.slice(y+1);if(A.startsWith("text/"))p=decodeURIComponent(p);else{p=atob(p);y=p.length;const E=new Uint8Array(y);for(;y;)E[--y]=p.charCodeAt(y);p=
E}return new Blob([p],{type:A})},formatAsPercentage:(p,y=2)=>{switch(typeof p){case "number":return y=k(16,c(0,y)),p=a.round(c(0,k(1,p))*h(10,2+y))/h(10,y),(0===p%1?p:p.toFixed(y))+"%";case "string":return p;default:return e("formatAsPercentage: expects a number"),p}},memoize:z,debounce:(p,y,A)=>{const E="__DBTO_"+ ++v;return function(){const F=this,K=F[E],L=arguments,R=A&&!K;clearTimeout(K);F[E]=setTimeout(function(){F[E]=null;A||p.apply(F,L)},y);R&&p.apply(F,L)}},createFixedThresholdCounter:(p,
y,A,E)=>{var F=m.AccessorSupport.generateName;const K="function"===typeof p||p instanceof JS.Module,L={};E=E||F("counter",A);const R=F(E,"increment");F=F(E,"decrement");if(void 0!==(K?p.instanceMethod(R):p[R]))return e("Increment: Abort clobber",R,p),!1;if(void 0!==(K?p.instanceMethod(F):p[F]))return e("Decrement: Abort clobber",F,p),!1;L[R]=function(){const N=this[E]+1;this[E]=N;this.fireEvent(E,N);N===y&&this.set(A,!0)};L[F]=function(){const N=this[E];if(0!==N){var T=N-1;this[E]=T;this.fireEvent(E,
T);N===y&&this.set(A,!1)}};p[K?"include":"extend"](L);return!0},makeURLSearchParams:(p={})=>{const y=new URLSearchParams;for(const A in p){const E=p[A];void 0!==E&&y.set(A,E)}return y},doFetch:(p,y,A,E,F,K)=>fetch(p,y).then(L=>{if(!L.ok)throw new w(L.status,p,L.statusText);return L}).then(L=>A?L.text():L.json()).then(L=>{if(E)try{if(A)E(L);else{if(!1===L.success)throw new w(200,p,L.message);E(L.data)}}catch(R){throw L=new w(200,p,R.message),L.stack=R.stack,L;}}).catch(L=>{if(F){if("FetchError"!==
L.name){const R=new w(0,p,L.message);R.stack=L.stack;L=R}F(L)}}).finally(()=>{K?.()}),I18N:{setLocale:p=>{u=p},getLocale:()=>u,addDictionary:(p,y)=>{I[y]=Object.assign(I[y]??{},p)},setDictionary:(p,y)=>{I[y]=p??{}},get:(p,...y)=>{var A=u??=(navigator.language??"en").split("-")[0].toLowerCase();A=(I[A]??I.en??{})[p];return null!=A?0<y.length?A.replaceAll(C,(E,F,K,L)=>K&&L?1==y[parseInt(F)]?K:L:"").replaceAll(J,(E,F)=>y[F]):A:p}}};x.onloadingdone=p=>{for(const y of p.fontfaces)B(y)}})(global);
(t=>{const w=(u,l)=>{u.startsWith('"')&&(u=u.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return l?JSON.parse(u):u}catch(e){}},v=t.Cookie={defaults:{raw:!1,json:!1},read:(u,l)=>{l={...v.defaults,...l};const e=l.raw?h=>h:h=>decodeURIComponent(h.split("+").join(" "));l=l.json;const a=document.cookie.split("; "),g=a.length,k=u?void 0:{};for(let h=0;h<g;){var c=a[h++].split("=");const d=e(c.shift());c=e(c.join("="));if(u){if(u===d)return w(c,l)}else k[d]=w(c,l)}return k},write:(u,l,e)=>
{e={...v.defaults,...e};if("number"===typeof e.expires){const d=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+d)}l=e.json?JSON.stringify(l):String(l);const {raw:a,expires:g,path:k,domain:c,samesite:h}=e;return document.cookie=[a?u:encodeURIComponent(u),"=",a?l:encodeURIComponent(l),g?"; expires="+g.toUTCString():"",k?"; path="+k:"",c?"; domain="+c:"",h?"; samesite="+h:"",e.secure?"; secure":""].join("")},remove:(u,l)=>void 0!==v.read(u,l)?(v.write(u,"",{...l,expires:-1}),!0):!1}})(myt);
(t=>{const w=console.error,v=JSON.parse,u=global.localStorage,l=u.getItem.bind(u),e=u.setItem.bind(u),a=u.removeItem.bind(u),g=u.clear.bind(u),k=(h,d,f)=>{if(0<d){const b="__timerId_"+f;(f=c[b])&&clearTimeout(f);c[b]=setTimeout(()=>{h();delete c[b]},d)}else h()},c=t.LocalStorage={hasDatum:(h,d)=>{if(h&&(d=l(d??"myt")))try{return null!=v(d)[h]}catch(f){w(f)}return!1},getDatum:(h,d)=>{if(h&&(d=l(d??"myt")))try{const f=v(d);if("object"===typeof f)return f[h]}catch(f){w(f)}},setDatum:(h,d,f,b)=>{f=f??
"myt";k(()=>{const q=c.getData(f);q[h]=d;e(f,JSON.stringify(q))},b,f+"___"+h)},removeDatum:(h,d,f)=>{d=d??"myt";k(()=>{const b=c.getData(d);delete b[h];e(d,JSON.stringify(b))},f,d+"___"+h)},hasData:h=>null!=l(h??"myt"),getData:h=>{if(h=l(h??"myt"))try{return v(h)}catch(d){w(d)}return{}},setData:(h,d,f)=>{d=d??"myt";h??={};return"object"===typeof h?(k(()=>{e(d,JSON.stringify(h))},f,d),!0):!1},removeData:(h,d)=>{h=h??"myt";k(()=>{a(h)},d,h)},getLength:()=>u.length,getKey:u.key.bind(u),getItem:l,setItem:e,
removeItem:a,clear:g,get:l,set:e,remove:a,clearAll:g}})(myt);
(t=>{const w=/(?:^|&)([^&=]*)=?([^&]*)/g,v=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.URI=new JS.Class("URI",{initialize:function(l,e){l&&this.parse(l,e)},setSource:function(l){this.source=l},setProtocol:function(l){this.protocol=
l},setAuthority:function(l){this.authority=l},setUserInfo:function(l){this.userInfo=l},setUser:function(l){this.user=l},setPassword:function(l){this.password=l},setHost:function(l){this.host=l},setPort:function(l){this.port=l},setRelative:function(l){this.relative=l},setPath:function(l){this.path=l},setDirectory:function(l){this.directory=l},setFile:function(l){this.file=l},setQuery:function(l){this.query=l},setAnchor:function(l){this.anchor=l},parse:function(l,e){const a=this,[g,k,c,h,d,f,b,q,n,
r,x,B,I,z]=(e?u:v).exec(l)??[];a.setSource(g??"");a.setProtocol(k??"");a.setAuthority(c??"");a.setUserInfo(h??"");a.setUser(d??"");a.setPassword(f??"");a.setHost(b??"");a.setPort(q??"");a.setRelative(n??"");a.setPath(r??"");a.setDirectory(x??"");a.setFile(B??"");a.setQuery(I??"");a.setAnchor(z??"");a.queryPairs={};a.query.replace(w,(C,J,M)=>{J&&(a.queryPairs[J]=M)})},decodeQueryParam:l=>decodeURIComponent(l).split("+").join(" "),getQuery:function(){var l=this.queryPairs;const e=[];for(const a in l)e.push(a+
"="+encodeURIComponent(this.getQueryParam(a)));l=e.join("&");return 0<l.length?"?"+l:l},getQueryParam:function(l){l=this.queryPairs[l];return null==l?void 0:this.decodeQueryParam(l)},setQueryParam:function(l,e){this.queryPairs[encodeURIComponent(l)]=encodeURIComponent(e)},removeQueryParam:function(l){delete this.queryPairs[l]},getPathParts:function(l){const e=this.path.split("/");if(!l)for(l=e.length;l;)0===e[--l].length&&e.splice(l,1);return e},toString:function(l){const e=this.path;l=l?this.query?
"?"+this.query:"":this.getQuery();const a=this.anchor;let g=this.toStringThroughPort();e?g+=e:this.host&&(l||a)&&(g+="/");l&&(g+=l);a&&(g+="#"+a);return g},toStringThroughPort:function(){const l=this.protocol,e=this.host,a=this.userInfo,g=this.port;let k="";l&&(k+=l+"://");a&&e&&(k+=a+"@");e&&(k+=e,g&&(k+=":"+g));return k}})})(myt);
(t=>{const w=Math,{PI:v,cos:u,sin:l,sqrt:e}=w,a=(c,h,d,f,b,q)=>{"object"===typeof c&&(q=b,b=f,f=d,d=h,h=c.y,c=c.x);"object"===typeof d&&(q=d.height,b=d.width,f=d.y,d=d.x);return c>=d&&h>=f&&c<=d+b&&h<=f+q},g=(c,h,d,f,b)=>{c=d-c;h=f-h;h=c*c+h*h;return b?h:e(h)},k=(c,h,d,f,b)=>{null==b&&(b=6371);c=c*v/180;d=d*v/180;return b*w.acos(l(c)*l(d)+u(c)*u(d)*u(f*v/180-h*v/180))};t.Geometry={getClosestPointOnALineToAPoint:(c,h,d,f,b,q,n)=>{d-=c;f-=h;b=(d*(b-c)+f*(q-h))/(d*d+f*f);n&&(b=w.min(1,w.max(0,b)));return{x:c+
d*b,y:h+f*b}},isPointInPath:(c,h,d,f)=>{"object"===typeof c&&(f=d,d=h,h=c.y,c=c.x);if(a(c,h,d)&&(d=f.length,6<=d)){let b=!1,q=f[0],n=f[1],r,x;for(;d;)x=f[--d],r=f[--d],x>h!==n>h&&c<(q-r)*(h-x)/(n-x)+r&&(b=!b),q=r,n=x;return b}return!1},measureDistance:g,measureLatLngDistance:k,degreesToRadians:c=>c*v/180,radiansToDegrees:c=>180*c/v,rectContainsPoint:a,circleContainsPoint:(c,h,d,f,b)=>g(c,h,d,f,!0)<=b*b,circleContainsLatLng:(c,h,d,f,b,q)=>k(c,h,d,f,q)<=b,polarToCartesian:(c,h,d,f)=>{d??=0;f??=0;h%=
360;if(0===h)h=c,c=0;else if(90===h)h=0;else if(180===h)h=-c,c=0;else if(270===h)h=0,c=-c;else{const b=h*v/180;h=c*u(b);c*=l(b)}return[d+h,f+c]},cartesianToPolar:(c,h,d,f,b)=>{d??=0;f??=0;c-=d;f=h-f;h=e(c*c+f*f);f=w.atan2(f,c);0>f&&(f+=2*v);return[h,b?f:180*f/v]}}})(myt);
(t=>{const w=JS.Module,v=console.log,u=t.dumpStack;t.Observable=new w("Observable",{attachObserver:function(l,e,a){return l&&e&&a?(this.getObservers(a).push(e,l),!0):!1},detachObserver:function(l,e,a){if(l&&e&&a){var g=this.__obsbt;if(g&&(a=g[a])){g=!1;let k=a.length;for(;2<=k;){const c=a[--k],h=a[--k];l===c&&e===h&&(a.splice(k,2),g=!0)}return g}}return!1},detachAllObservers:function(){const l=this.__obsbt;if(l)for(const e in l){const a=l[e];let g=a.length;for(;2<=g;){const k=a[--g],c=a[--g];k&&c&&
("function"===typeof k.detachFrom&&k.detachFrom(this,c,e)||a.splice(g,2))}}},getObservers:function(l){let e;return(e=this.__obsbt??(this.__obsbt={}))[l]??(e[l]=[])},hasObservers:function(l){const e=this.__obsbt;return e?0<e[l]?.length:!1},createEvent:function(l,e){return{source:this,type:l,value:e}},fireEvent:function(l,e,a){if(null==a){var g=this.__obsbt;g&&(a=g[l])}if(a){g={source:this,type:l,value:e};const k=this.__aet??(this.__aet={});if(k[l])t.global.error.notify("warn","eventLoop","Abort refiring event:"+
l,null,{observable:this,type:l,value:e});else{k[l]=!0;for(e=a.length;2<=e;){const c=a[--e],h=a[--e];if(c&&h)try{if("function"===typeof h){if(h.call(c,g))break}else if(c[h]?.(g))break}catch(d){u(d),v("Additional context",h,c)}}k[l]=!1}}}});t.Observer=new w("Observer",{valueFromEvent:l=>l&&"object"===typeof l&&l.type?l.value:l,syncTo:function(l,e,a,g,k){g??=a;try{this[e](l.createEvent(a,l.get(g)))}catch(c){u(c)}k||this.attachTo(l,e,a,k)},isAttachedTo:function(l,e,a){if(l&&e&&a){var g=this.__obt;if(g&&
(a=g[a]))for(g=a.length;2<=g;){const k=a[--g],c=a[--g];if(l===k&&e===c)return!0}}return!1},getObservables:function(l){let e;return(e=this.__obt??(this.__obt={}))[l]??(e[l]=[])},hasObservables:function(l){const e=this.__obt;return e?0<e[l]?.length:!1},attachTo:function(l,e,a,g){if(l&&e&&a){const k=this.getObservables(a);if(g){const c=this,h=e;this.__methodNameCounter??(this.__methodNameCounter=0);e="__DO_ONCE_"+this.__methodNameCounter++;this[e]=d=>{c.detachFrom(l,e,a);delete c[e];return c[h](d)}}if(l.attachObserver(this,
e,a))return k.push(e,l),!0}return!1},detachFrom:function(l,e,a){if(l&&e&&a){var g=this.__obt;if(g&&(g=g[a])){let k=!1,c=g.length;for(;2<=c;){const h=g[--c],d=g[--c];l===h&&e===d&&l.detachObserver(this,e,a)&&(g.splice(c,2),k=!0)}return k}}return!1},detachFromAllObservables:function(){var l=this.__obt;if(l)for(const [e,a]of Object.entries(l)){for(l=a.length;2<=l;){const g=a[--l],k=a[--l];g.detachObserver(this,k,e)}a.length=0}},constrain:function(l,e){if(l&&e){const g=e.length;if(0!==g%2)v("Observables uneven",
this);else{var a;const k=(a=this.__cbmn??(this.__cbmn={}))[l]??(a[l]=[]);if(0<k.length)v("Constraint exists for "+l+" on",this);else{for(a=0;a<g;){const c=e[a++],h=e[a++];c&&h&&(this.attachTo(c,l,h),k.push(c,h))}try{this[l]()}catch(c){u(c)}}}}},releaseConstraint:function(l){if(l){var e=this.__cbmn;if(e&&(e=e[l])){let a=e.length;for(;2<=a;){const g=e[a--],k=e[a--];this.detachFrom(k,l,g)}e.length=0}}},releaseAllConstraints:function(){const l=this.__cbmn;if(l)for(const e in l)this.releaseConstraint(e)}})})(myt);
(t=>{const w=console.warn,v=t.global=new JS.Singleton("Global",{include:[t.Observable],initialize:()=>{},register:(u,l)=>{v.hasOwnProperty(u)&&(w("Global key in use",u),v.unregister(u));v[u]=l;v.fireEvent("register"+u,l)},unregister:u=>{if(v.hasOwnProperty(u)){const l=v[u];delete v[u];v.fireEvent("unregister"+u,l)}else w("Global key not in use",u)}})})(myt);
(t=>{let w;new JS.Singleton("GlobalError",{include:[t.Observable],initialize:function(){w=this;w.setStackTraceLimit(50);w.setConsoleLogging(!0);t.global.register("error",w)},setConsoleLogging:v=>{w.consoleLogging=v},setStackTraceLimit:v=>{Error.stackTraceLimit=w.stackTraceLimit=v},notify:(v,u,l,e,a)=>{e??=Error(l??u);e=e.stack??e.stacktrace;w.fireEvent(u??"error",{msg:l,stacktrace:e,...a});if(w.consoleLogging&&v)console[v](e)}})})(myt);
(t=>{const w=global,v=w.getComputedStyle,u=document,l=Math.max,e=k=>{const {zIndex:c,opacity:h}=v(k);if("auto"===c){if(1===parseInt(h,10)){let d=0;k=k.childNodes;let f=k.length;for(;f;){const b=k[--f];1===b.nodeType&&(d=l(d,e(b)))}return d}return 0}return parseInt(c,10)},a=(k,c)=>{const h=[];for(;k;){h.push(k);if(k===c)break;k=k.parentNode}return h},g=t.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(k,c,h)=>{k=u.createElement(k);for(const d in h)k[d]=h[d];for(const d in c)k.style[d]=
c[d];return k},isDomElementVisible:k=>{if("INPUT"!==k.nodeName||"hidden"!==k.type)for(;k;){if(k===u)return!0;const {display:c,visibility:h}=v(k);if("none"===c||"hidden"===h)break;k=k.parentNode}return!1},getZIndexRelativeToAncestor:(k,c)=>{if(k&&c)for(k=a(k,c),c=k.length-1;c;){const h=v(k[--c]),d=h.zIndex,f="auto"===d;if(0===c||!f||1!==parseInt(h.opacity,10))return f?0:parseInt(d,10)}return 0},getAncestorArray:a,getHighestZIndex:e,getRelativePosition:(k,c)=>{if(k){let h=0,d=0;for(;k&&"BODY"!==k.nodeName&&
k!==c;)if(h+=k.offsetLeft,d+=k.offsetTop,(k=k.offsetParent)&&"BODY"!==k.nodeName){const {borderLeftWidth:f,borderTopWidth:b}=v(k);h+=parseInt(f,10)-k.scrollLeft;d+=parseInt(b,10)-k.scrollTop}return{x:h,y:d}}},getTruePosition:k=>{if(k)return k=k.getBoundingClientRect(),k.left+=w.scrollX,k.top+=w.scrollY,k},simulateDomEvent:(k,c,h)=>{if(k){const d={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(h)for(const q in h)d[q]=h[q];let b;for(const q in f)if(f[q].test(c)){b=q;break}if(!b)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(u.createEvent)h=u.createEvent(b),"HTMLEvents"===b?h.initEvent(c,d.bubbles,d.cancelable):h.initMouseEvent(c,d.bubbles,d.cancelable,u.defaultView,d.button,d.pointerX,d.pointerY,d.pointerX,d.pointerY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,null),k.dispatchEvent(h);
else{d.clientX=d.pointerX;d.clientY=d.pointerY;h=u.createEventObject();for(const q in d)h[q]=d[q];k.fireEvent("on"+c,h)}}},getScrollbarSize:t.memoize(()=>{const k=u.body,c=g.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});k.appendChild(c);const h=c.offsetWidth-c.clientWidth;k.removeChild(c);return h})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(k){if(Array.isArray(k)){const [c,
h]=k;this.__oE=c;this.__iE=h;this.__iS=h.style;this.__oS=c.style;h.model=c.model=this}else this.__oE=this.__iE=k,this.__iS=this.__oS=k.style,k.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(k){this.__iE.className=this.domClass=k},addDomClass:function(k){const c=this.__iE.className;this.setDomClass((c?
c+" ":"")+k)},removeDomClass:function(k){var c=this.__iE.className;if(c){c=c.split(" ");let h=c.length;for(;h;)c[--h]===k&&c.splice(h,1);this.setDomClass(c.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(k){this.__iE.id=this.domId=k},setZIndex:function(k){this.__oS.zIndex=k},setStyleProperty:function(k,c){this.__iS[k]=c},getPagePosition:function(k){return g["get"+(k?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){g.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return e(this.__iE)},getHighestChildZIndex:function(k){const c=this.__iE.childNodes;let h=c.length,d=0;for(;h;){const f=c[--h];1===f.nodeType&&f!==k&&(d=l(d,e(f)))}return d},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(k,c){(c?this.__iE:this.__oE).scrollTop=k||0}})})(myt);
(t=>{let w;const v=l=>{for(;l.lastChild;)l=l.lastChild;return l},u=(l,e)=>{w.lastTraversalWasForward=l;let a=document.body,g=a;var k=document.activeElement;let c=g,h;const d=l?"getNextFocus":"getPrevFocus";k&&(c=g=k,(k=g.model)??(k=w.findModelForDomElement(g)),k&&(e=k.getFocusTrap(e))&&(a=e.getIDE()));for(;c;){if(c.model&&c.model[d]&&(h=c.model[d]()))c=h.getIDE();else if(l)if(c.firstChild)c=c.firstChild;else{if(c===a)return g.model;if(c.nextSibling)c=c.nextSibling;else for(;c&&(c=c.parentNode,c!==
a);)if(c.nextSibling){c=c.nextSibling;break}}else c=c===a?v(a):c.previousSibling?v(c.previousSibling):c.parentNode;if(c===g)return g.model;if(1===c.nodeType)if((k=c.model)&&k instanceof t.View){if(k.isFocusable())return k}else if(e=c.nodeName,!("A"!==e&&"AREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e&&"BUTTON"!==e||c.disabled||isNaN(c.tabIndex))&&t.DomElementProxy.isDomElementVisible(c)&&(k=w.findModelForDomElement(c),!k?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){c.focus();w.focusedDom=c;
break}}};new JS.Singleton("GlobalFocus",{include:[t.Observable],initialize:function(){w=this;w.lastTraversalWasForward=!0;t.global.register("focus",w)},setFocusedView:l=>{if(w.focusedView!==l){w.prevFocusedView=w.focusedView;if(w.focusedView=l)w.focusedDom=null;w.fireEvent("focused",l)}},notifyFocus:l=>{w.focusedView!==l&&w.setFocusedView(l)},notifyBlur:l=>{w.focusedView===l&&w.setFocusedView(null)},clear:()=>{w.focusedView?w.focusedView.blur():w.focusedDom&&(w.focusedDom.blur(),w.focusedDom=null)},
next:l=>{u(!0,l)?.focus()},prev:l=>{u(!1,l)?.focus()},findModelForDomElement:l=>{for(;l;){let e=l.model;if(e&&e instanceof t.View)return e;l=l.parentNode}}})})(myt);
(t=>{const w=JS.Module,v=t.global,u=v.focus,l=()=>({source:null,type:null,value:null}),e=b=>{b=b.value??b;return(b.target??b.srcElement).model},a=t.KeyObservable=new w("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:l(),getKeyFromEvent:b=>b.value.key,getCodeFromEvent:b=>b.value.code,isEnterKeyEvent:b=>b.value.code===v.keys.CODE_ENTER,isEscKeyEvent:b=>b.value.code===v.keys.CODE_ESC,isShiftKeyEvent:b=>v.keys.isShiftCode(b.value.code)},createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,
q,n,a)??this.callSuper(b,q,n)}}),g=t.MouseObservable=new w("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:l(),getMouseFromEvent:b=>({x:b.value.pageX,y:b.value.pageY}),getMouseFromEventRelativeToView:(b,q)=>{q=q.getPagePosition();b=g.getMouseFromEvent(b);b.x-=q.x;b.y-=q.y;return b}},createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,q,n,g,!0)??this.callSuper(b,q,n)}}),k=t.ScrollObservable=
new w("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:l(),getScrollFromEvent:b=>{const {scrollLeft:q,scrollTop:n}=e(b)?.getIDE();return{x:q,y:n}}},createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,q,n,k)??this.callSuper(b,q,n)}}),c=t.TouchObservable=new w("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:l()},createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,q,n,c,!1)??this.callSuper(b,q,n)}}),
h=t.FocusObservable=new w("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:l()},initNode:function(b,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(b,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(b){this.focused!==b&&(this.focused=b,this.inited&&(this.fireEvent("focused",b),b?u.notifyFocus(this):u.notifyBlur(this)))},setFocusable:function(b){if(this.focusable!==b){const q=this.focusable;(this.focusable=b)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",b)}},setFocusIndicator:function(b){this.focusIndicator!==b&&(this.focusIndicator=b,this.focused&&(b?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(u.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(b=>!0===b.maskFocus)},focus:function(b){this.isFocusable()&&this.getIDE().focus({preventScroll:b})},blur:function(){this.getIDE().blur()},__doFocus:function(b){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(b){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const b=this.getIDS();b.outlineWidth="thin";b.outlineColor="#8bf";b.outlineStyle="solid";b.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(b,q,n){if(h.EVENT_TYPES[n]){const r=this;return x=>{x??=window.event;if(r._ignoreFocus)x.cancelBubble=!0,x.stopPropagation?.(),x.preventDefault();
else{var B=h.EVENT;B.source=r;B.type=x.type;B.value=x;b[q](B)||(x.cancelBubble=!0,x.stopPropagation?.());B.source=void 0}}}return this.callSuper(b,q,n)}}),d=t.InputObservable=new w("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:l()},createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,q,n,d)??this.callSuper(b,q,n)}}),f=t.DragDropObservable=new w("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:l()},
createDomHandler:function(b,q,n){return this.createStandardDomHandler(b,q,n,f,!0)??this.callSuper(b,q,n)}});t.DomObservable=new w("DomObservable",{attachDomObserver:function(b,q,n,r,x){if(b&&q&&n){const B=this.createDomHandler(b,q,n);if(B){r=!!r;const I=this.__dobsbt??(this.__dobsbt={}),z=I[n];z?z.push(b,q,B,r):I[n]=[b,q,B,r];t.addEventListener(this.getDomElementForDomObservable(n),n,B,r,x);return!0}}return!1},getDomElementForDomObservable:function(b){return this.getIDE()},createDomHandler:(b,q,n)=>
null,createStandardDomHandler:function(b,q,n,r,x){if(r.EVENT_TYPES[n]){const B=this,I=r.EVENT;return z=>{z??=window.event;I.source=B;I.type=z.type;I.value=z;b[q](I)||(z.cancelBubble=!0,z.stopPropagation?.(),x&&z.preventDefault());I.source=void 0}}},detachDomObserver:function(b,q,n,r){if(b&&q&&n){var x=this.__dobsbt;if(x&&(x=x[n])){r=!!r;const B=this.getDomElementForDomObservable(n);let I=!1,z=x.length;for(;4<=z;){const C=x[--z],J=x[--z],M=x[--z],O=x[--z];b===O&&q===M&&r===C&&(B&&t.removeEventListener(B,
n,J,r),x.splice(z,4),I=!0)}return I}}return!1},detachAllDomObservers:function(){var b=this.__dobsbt;if(b)for(const [q,n]of Object.entries(b)){for(b=n.length+2;4<=b;){const r=n[b-=3],x=n[--b];t.removeEventListener(this.getDomElementForDomObservable(q),q,x,r)}n.length=0}}});t.DomObserver=new w("DomObserver",{extend:{getSourceViewFromEvent:e},attachToDom:function(b,q,n,r,x){if(b&&q&&n){r=!!r;let B;const I=(B=this.__dobt??(this.__dobt={}))[n]??(B[n]=[]);b.attachDomObserver(this,q,n,r,x)&&I.push(r,q,b)}},
detachFromDom:function(b,q,n,r){if(b&&q&&n){var x=this.__dobt;if(x&&(x=x[n])){r=!!r;let B=!1,I=x.length;for(;3<=I;){const z=x[--I],C=x[--I],J=x[--I];b===z&&q===C&&r===J&&b.detachDomObserver(this,q,n,r)&&(x.splice(I,3),B=!0)}return B}}return!1},detachFromAllDomSources:function(){var b=this.__dobt;if(b)for(const [q,n]of Object.entries(b)){for(b=n.length;3<=b;){const r=n[--b],x=n[--b],B=n[--b];r.detachDomObserver(this,x,q,B)}n.length=0}}})})(myt);
(t=>{let w;const {KeyObservable:v,global:u}=t,l=u.focus,e=v.getCodeFromEvent,a=new Set,g="Firefox"===BrowserDetect.browser,k=g?"OSLeft":"MetaLeft",c=g?"OSRight":"MetaRight",h=()=>a.has("ShiftLeft")||a.has("ShiftRight"),d=()=>a.has("ControlLeft")||a.has("ControlRight"),f=()=>a.has("AltLeft")||a.has("AltRight"),b=()=>a.has(k)||a.has(c),q=(r,x)=>{switch(r){case "Backspace":return r=x.nodeName,!("TEXTAREA"===r||"INPUT"===r&&("text"===x.type||"number"===x.type||"password"===x.type)||"DIV"===r&&"true"===
x.contentEditable&&x.firstChild);case "Tab":return!0}return!1},n=(r,x)=>{for(const B of["keydown","keypress","keyup"])w[x](r,"__hndl_"+B,B)};new JS.Singleton("GlobalKeys",{include:[t.DomElementProxy,t.DomObservable,t.DomObserver,v,t.Observable,t.Observer],initialize:function(){u.register("keys",w=this);w.CODE_ENTER="Enter";w.CODE_ESC="Escape";w.CODE_SPACE="Space";w.CODE_ARROW_LEFT="ArrowLeft";w.CODE_ARROW_UP="ArrowUp";w.CODE_ARROW_RIGHT="ArrowRight";w.CODE_ARROW_DOWN="ArrowDown";w.CODE_DELETE="Delete";
w.CODE_BACKSPACE="Backspace";for(const r of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))w["CODE_"+r]="Key"+r;for(const r of"1234567890".split(""))w["CODE_"+r]="Digit"+r;w.ARROW_KEYS=[w.CODE_ARROW_LEFT,w.CODE_ARROW_UP,w.CODE_ARROW_RIGHT,w.CODE_ARROW_DOWN];w.LIST_KEYS=[w.CODE_ENTER,w.CODE_SPACE,w.CODE_ESC,...w.ARROW_KEYS];w.setDomElement(document);w.attachTo(l,"__hndl_focused","focused");n(w,"attachToDom");global.onblur=()=>{a.clear()}},isShiftKeyDown:h,isControlKeyDown:d,isAltKeyDown:f,isMetaKeyDown:b,isShiftCode:r=>
"ShiftLeft"===r||"ShiftRight"===r,isControlCode:r=>"ControlLeft"===r||"ControlRight"===r,isAltCode:r=>"AltLeft"===r||"AltRight"===r,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?b():d(),ignoreFocusTrap:()=>f(),__hndl_focused:r=>{(r=r.value)?(n(w,"detachFromDom"),n(r,"attachToDom")):((r=l.prevFocusedView)&&n(r,"detachFromDom"),n(w,"attachToDom"))},__hndl_keydown:r=>{const x=e(r);r=r.value;q(x,r.target)&&r.preventDefault();b()&&"ShiftLeft"!==x&&"ShiftRight"!==x&&"ControlLeft"!==x&&"ControlRight"!==
x&&"AltLeft"!==x&&"AltRight"!==x?(w.fireEvent("keydown",x),w.fireEvent("keyup",x)):(a.add(x),"Tab"===x&&(r=f(),h()?l.prev(r):l.next(r)),w.fireEvent("keydown",x))},__hndl_keypress:r=>{w.fireEvent("keypress",e(r))},__hndl_keyup:r=>{const x=e(r);r=r.value;q(x,r.target)&&r.preventDefault();a.delete(x);w.fireEvent("keyup",x)}})})(myt);
(t=>{const w=JS.Module,v=Math.max,u=(c,h,d,f,b=0)=>{const q=c.length;for(let n=d;b<q;b++)g(c[b],h,n),f&&(n+=d)},l=(c,h,d,f=0)=>{const b=c.length;for(let q=h;f<b;)c[f++].crossPos+=q,d&&(q+=h)},e=(c,h,d,f)=>{var b=c[h?"setWidthViaFlex":"setHeightViaFlex"];h=f?h?c.getFlexBasisWidth():c.getFlexBasisHeight():0;b.call(c,h+d)},a=(c,h,d)=>{c[h?"setXViaFlex":"setYViaFlex"](d,!1)},g=(c,h,d)=>{c[h?"setXViaFlex":"setYViaFlex"](d,!0)},k=(c,h,d)=>{c[h]!==d&&(c[h]=d,c.inited&&c.fireEvent(h,d),c.updateFlexboxLayout())};
t.FlexboxSupport=new w("FlexboxSupport",{initNode:function(c,h){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(c,h);this.updateFlexboxLayout()},setWidth:function(c){const h=this.width;this.callSuper(c);h!==this.width&&this.updateFlexboxLayout()},setHeight:function(c){const h=this.height;this.callSuper(c);h!==this.height&&this.updateFlexboxLayout()},
setDirection:function(c){k(this,"direction",c)},setWrap:function(c){k(this,"wrap",c)},setJustifyContent:function(c){k(this,"justifyContent",c)},setAlignItems:function(c){k(this,"alignItems",c)},setAlignContent:function(c){k(this,"alignContent",c)},setRowGap:function(c){k(this,"rowGap",v(0,c))},setColumnGap:function(c){k(this,"columnGap",v(0,c))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(c){this.set("totalBasisWidth",
c,!0)},setTotalBasisHeight:function(c){this.set("totalBasisHeight",c,!0)},ignoreSubviewForFlex:function(c){return c&&"function"===typeof c.ignoreFlex?c.ignoreFlex():!0},setFlexboxPaused:function(c,h){this.__flexboxPaused!==c&&((this.__flexboxPaused=c)||h||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(c){this.callSuper(c);c&&!this.ignoreSubviewForFlex(c)&&this.updateFlexboxLayout()},subviewRemoved:function(c){this.callSuper(c);!c||this.ignoreSubviewForFlex(c)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(c){this.callSuper(c);c&&this.ignoreSubviewForFlex(c)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(c){return c?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(c){return c?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(c){this._updateAgain=c},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const c=this;if(c.isOKToUpdateLayout()){var h=c.getSubviewsInLexicalOrder().filter(z=>!0!==c.ignoreSubviewForFlex(z)&&!0===z.visible);const I=h.length;if(0<I){c.__isUpdatingFlexboxLayout=!0;var d=c.direction;const z=d.startsWith("row"),C=!z;var f=c.getWidthForFlexboxLayout(),b=c.getHeightForFlexboxLayout();const J=z?c.columnGap:c.rowGap,M=z?f:b;var q=z?c.rowGap:
c.columnGap;const O=z?b:f,m=c.isWrapNotAllowed();f=c.justifyContent;b=c.alignItems;var n=m?"stretch":c.alignContent;d.endsWith("Reverse")&&h.reverse();let p=0,y=0,A=0,E=0,F={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:A,crossSize:0};d=[F];for(let K=0;K<I;){const L=h[K++],R=z?L.getFlexBasisWidth():L.getFlexBasisHeight(),N=L.getShrink(),T=L.getGrow();!m&&0<F.items.length&&p+(0===E?0:J)+R>M&&(F.extraSize=M-p,A+=F.crossSize+q,y=v(y,p),E=p=0,F={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:A,crossSize:0},d.push(F));0!==E&&(p+=J);0<N&&0<R&&(F.shrinkCount+=N,F.shrinkBasis+=R*N);0<T&&(F.growCount+=T);F.crossSize=v(F.crossSize,C?L.getFlexBasisWidth():L.getFlexBasisHeight());a(L,z,p);e(L,z,R);p+=R;F.items.push(L);E++}F.extraSize=M-p;A+=F.crossSize;y=v(y,p);if(c.isCompactOnMainAxis(z)&&(h=d.reduce((K,L)=>null==K?L.extraSize:Math.min(K,L.extraSize),null),0!==h))for(var r of d)r.extraSize-=h;c[z?"setTotalBasisWidth":"setTotalBasisHeight"](y);c[z?"setTotalBasisHeight":
"setTotalBasisWidth"](A);r=d.length;if(1<r&&"wrapReverse"===c.wrap){for(var x of d)x.crossPos=A-(x.crossPos+x.crossSize);d.reverse()}if(!c.isCompactOnCrossAxis(z))switch(x=O-A,n){default:case "start":break;case "end":l(d,x,!1);break;case "center":l(d,x/2,!1);break;case "spaceBetween":1<r&&l(d,x/(r-1),!0,1);break;case "spaceAround":x<=q?l(d,x/2,!1):(l(d,q/2,!1),x-=q,l(d,x/(2*r),!0),l(d,x/(2*r),!0,1));break;case "spaceEvenly":x<=2*q?l(d,x/2,!1):(l(d,q,!1),l(d,(x-2*q)/(r+1),!0));break;case "stretch":q=
x/r;x=0;for(var B of d)B.crossSize+=q,B.crossPos+=x,x+=q}for(const K of d){B=K.items;q=K.extraSize;if(0<q)if(0<K.growCount){q/=K.growCount;d=0;for(const N of B)0<d&&g(N,z,d),x=N.getGrow()*q,0<x&&(e(N,z,x,!0),d+=x)}else switch(d=B.length,f){default:case "start":break;case "end":u(B,z,q,!1);break;case "center":u(B,z,q/2,!1);break;case "spaceBetween":1<d&&u(B,z,q/(d-1),!0,1);break;case "spaceAround":q<=J?u(B,z,q/2,!1):(u(B,z,J/2,!1),q-=J,u(B,z,q/(2*d),!0),u(B,z,q/(2*d),!0,1));break;case "spaceEvenly":q<=
2*J?u(B,z,q/2,!1):(u(B,z,J,!1),q-=2*J,u(B,z,q/(d+1),!0))}else if(0>q&&0<K.shrinkCount){d=K.shrinkBasis;x=0;for(const N of B)0>x&&g(N,z,x),n=N.getShrink()*(z?N.getFlexBasisWidth():N.getFlexBasisHeight())/d*v(q,-d),0>n&&(e(N,z,n,!0),x+=n)}q=!1;const {crossSize:L,crossPos:R}=K;for(const N of B)switch(N.getAlignSelf()||b){case "start":a(N,C,R);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "end":a(N,C,R+L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()));e(N,C,C?N.getFlexBasisWidth():
N.getFlexBasisHeight(),!1);break;case "center":a(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "baseline":q=!0;a(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2+N.getFlexBaselineOffset(z));e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;default:a(N,C,R),e(N,C,L,!1)}q&&c.updateFlexboxLayoutBaselineAdjustment(B,z,R)}c.__isUpdatingFlexboxLayout=!1;c.isUpdateAgain()&&!c.__UPDATE_AGAIN_LOOP_PROTECTION&&
(c.setUpdateAgain(!1),c.__UPDATE_AGAIN_LOOP_PROTECTION=!0,c.updateFlexboxLayout(),c.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else c.setTotalBasisWidth(0),c.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(c,h,d)=>{}});t.FlexboxChildSupport=new w("FlexboxChildSupport",{setVisible:function(c){this.visible!==c&&(this.callSuper(c),this.updateFlexboxLayoutFromChild())},setXViaFlex(c,h){h&&(c+=this.x);this.x!==c&&(this.__isFlexUpdate=!0,this.setX(c),this.__isFlexUpdate=!1)},setYViaFlex(c,h){h&&
(c+=this.y);this.y!==c&&(this.__isFlexUpdate=!0,this.setY(c),this.__isFlexUpdate=!1)},setWidth:function(c){const h=this.width!==c;h&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(c);h&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(c){this.width!==c&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(c),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(c){const h=this.height!==c;
h&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(c);h&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(c){this.height!==c&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(c),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:c=>0,setIgnoreFlex:function(c){this.__ignoreFlex!==c&&(this.__ignoreFlex=c,this.inited&&(this.fireEvent("ignoreFlex",c),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(c){c=v(0,c);this.grow!==c&&(this.grow=c,this.inited&&(this.fireEvent("grow",c),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(c){c=v(0,c);this.shrink!==c&&(this.shrink=c,this.inited&&(this.fireEvent("shrink",c),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(c){this.alignSelf!==c&&(this.alignSelf=
c,this.inited&&(this.fireEvent("alignSelf",c),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const c=this.alignSelf;return"auto"===c||""===c?null:c},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(t=>{const w=console.log,v=new Map,u=new Map,l=(h,d)=>d+h.charAt(0).toUpperCase()+h.slice(1),e=h=>u.get(h)??(u.set(h,l(h,"set")),u.get(h)),a=h=>v.get(h)??(v.set(h,l(h,"get")),v.get(h)),g=(h,d)=>{let f;for(const b in d){const q=d[b],n=e(b);if(n in h)h[n](q);else h[b]!==q&&(h[b]=q,(f??=!1!==h.inited&&h.fireEvent)&&h.fireEvent(b,q))}},k=(h,d)=>{const f=a(d);h[f]&&w("Overwriting getter",f);h[f]=function(){return this[d]}},c=(h,d)=>{const f=e(d);h[f]&&w("Overwriting setter",f);h[f]=function(b){this[d]!==
b&&(this[d]=b,this.inited&&this.fireEvent(d,b))}};t.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:e,generateGetterName:a,generateName:l,createSetterFunction:c,createGetterFunction:k,createSetterMixin:(h,d)=>{const f={};for(const b of h)c(f,b),d&&k(f,b);return f}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(h,d){if(h)for(const f of h)this[f]=d[f],delete d[f]},callSetters:function(h){var d=this.earlyAttrs,f=this.lateAttrs;if(d||f){h={...h};if(d){var b=d.length;for(var q=0;q<b;){const r=d[q++];r in h&&(this.set(r,h[r]),delete h[r])}}let n;if(f)for(n=[],d=f.length,b=0;b<d;)q=f[b++],q in h&&(n.push(q,h[q]),delete h[q]);g(this,h);if(n)for(f=n.length,h=0;h<f;)this.set(n[h++],
n[h++])}else g(this,h)},get:function(h){const d=a(h);return"function"===typeof this[d]?this[d]():this[h]},set:function(h,d,f){if(!f&&(f=e(h),"function"===typeof this[f]))return this[f](d);this[h]!==d&&(this[h]=d,!1!==this.inited&&this?.fireEvent(h,d))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{const t=this.__meta__;if(t)for(const w of Object.keys(t))t[w]=null;for(const w of Object.keys(this))this[w]=null;this.destroyed=!0}}});
(t=>{const {Class:w,Module:v}=JS,u=console.warn;let l;const e=(f,b)=>b?(l=f).__op??(l.__op=[]):f.__op;let a;const g=(f,b)=>b?(a=f).__actives??(a.__actives=[]):f.__actives,k=new w("AbstractPool",{include:[t.Destructible],initialize:()=>{},destroy:function(){const f=e(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=e(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){e(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=e(this);if(f){let b=f.length;for(;b;){const q=f[--b];"function"===typeof q.destroy&&q.destroy()}f.length=0}}}),c=t.SimplePool=new w("SimplePool",k,{initialize:function(f,b){this.callSuper();this.instanceClass=f??Object;this.instanceParent=b},createInstance:function(f){var b=this.instanceParent,q=this.instanceClass;return b?new q(b,f):new q}}),h=new v("TrackActives",{destroy:function(){const f=
g(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();g(this,!0).push(f);return f},putInstance:function(f){var b=g(this);if(b){const q=b.indexOf(f);if(-1<q){b.splice(q,1);this.callSuper(f);return}b="inactive"}else b="missing";u("Tried to put a "+b+" instance",f,this)},getActives:function(f){const b=g(this);if(b){if(f){const q=[],n=b.length;for(let r=0;n>r;){const x=b[r++];f.call(this,x)&&q.push(x)}return q}return b.slice()}return[]},putActives:function(){const f=
g(this);if(f){let b=f.length;for(;b;)this.putInstance(f[--b])}}}),d=t.TrackActivesPool=new w("TrackActivesPool",c,{include:[h]});t.TrackActivesMultiPool=new w("TrackActivesMultiPool",k,{initialize:function(f,b){this.callSuper();this.instanceClassesByKey=f;const q=this._poolsByClassName={},n=this.__pbk={};for(const r in f){const x=f[r];n[r]=q[x.__displayName]=new d(x,b)}},destroy:function(){const f=this.__pbk;for(const b in f)f[b].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],
b=this.__pbk[f];if(b)return b.getInstance(arguments);u("No pool for key",f)},putInstance:function(f){const b=this._poolsByClassName[f.klass.__displayName];b?b.putInstance(f):u("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const b in f)f[b].destroyPooledInstances()},getActives:function(f){let b=[];const q=this.__pbk;for(const n in q)b.push(...q[n].getActives(f));return b},putActives:function(){const f=this.__pbk;for(const b in f)f[b].putActives()}});t.Reusable=new v("Reusable",
{clean:()=>{}})})(myt);
(t=>{const w=JS.Class,v=console.warn,u=[t.AccessorSupport,t.Destructible,t.Observable,t.Observer],l=(d,f)=>{if(f){const b=f.length;for(let q=0,n;b>q;)(n=f[q++])?d.extend(n):v("Missing mixin in",d.klass.__displayName)}d.inited=!1},e=(d,f)=>{if(f)for(;d;){if(f(d))return d;d=d.parent}},a=(d,f)=>{const b=f.name;void 0===d[b]?d[b]=f:v("Name in use",b)},g=(d,f)=>{const b=f.name;d[b]===f?delete d[b]:v("Name not in use",b)};let k;const c=d=>(k=d).__animPool??(k.__animPool=new t.TrackActivesPool(t.Animator,d));
let h;t.Eventable=new w("Eventable",{include:u,initialize:function(d,f){l(this,f);this.init(d??{})},init:function(d){this.callSetters(d);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});t.Node=new w("Node",{include:u,extend:{getMatchingAncestorOrSelf:e,getMatchingAncestor:(d,f)=>e(d?d.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(d,f,b){l(this,b);this.initNode(d,f??{})},initNode:function(d,f){this.callSetters(f);
this.setParent(d);this.inited=!0},destroy:function(){const d=this.subnodes;this.isBeingDestroyed=!0;if(d)for(let f=d.length;0<f;)d[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(d){this.placement=d},setDefaultPlacement:function(d){this.defaultPlacement=
d},setIgnorePlacement:function(d){this.ignorePlacement=d},setParent:function(d){if(d&&!this.ignorePlacement){var f=this.placement??d.defaultPlacement;f&&(d=d.determinePlacement(f,this))}if(this.parent!==d&&!d?.destroyed){if(f=this.parent){const b=f.getSubnodes().indexOf(this);-1<b&&(this.name&&g(f,this),f.subnodes.splice(b,1),f.subnodeRemoved(this))}if(this.parent=d)d.getSubnodes().push(this),this.name&&a(d,this),d.subnodeAdded(this);this.inited&&this.fireEvent("parent",d)}},setName:function(d){if(this.name!==
d){const f=this.parent;f&&this.name&&g(f,this);this.name=d;f&&d&&a(f,this)}},determinePlacement:function(d,f){let b=d.indexOf("."),q;0<=b&&(q=d.slice(b+1),d=d.slice(0,b));"*"===d&&(d=this.defaultPlacement)&&(b=d.indexOf("."),0<=b&&(q=d.slice(b+1)+(q?"."+q:""),d=d.slice(0,b)));return(d=this[d])?q?d.determinePlacement(q,f):d:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(d){if(d){if(d===this)return!0;if(this.parent)return this.getIDE&&
d.getIDE?d.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(d)}return!1},isAncestorOf:function(d){return d?d.isDescendantOf(this):!1},getLeastCommonAncestor:function(d){for(;d;){if(this.isDescendantOf(d))return d;d=d.parent}},searchAncestorsForClass:function(d){if(d)return this.searchAncestors(f=>f instanceof d)},searchAncestorsForModule:function(d){if(d)return this.searchAncestors(f=>f.isA(d))},searchAncestors:function(d){return e(this?this.parent:null,d)},searchAncestorsOrSelf:function(d){return e(this,
d)},getAncestors:function(){const d=[];let f=this;for(;f;)d.push(f),f=f.parent;return d},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:d=>{},subnodeRemoved:d=>{},animate:function(d){if(d){const f=c(this),b=f.getInstance({ignorePlacement:!0}),q=d.callback;delete d.callback;b.callSetters(d);b.next(n=>{f.putInstance(b)});q&&b.next(q);b.setRunning(!0);return b}},getActiveAnimators:function(d){if("string"===typeof d){const f=d;d=b=>b.attribute===f}return c(this).getActives(d)},
stopActiveAnimators:function(d,f=!1){d=this.getActiveAnimators(d);let b=d.length;if(0<b){const q=c(this);for(;b;){const n=d[--b];n.reset(f);f||q.putInstance(n)}}},doOnceOnIdle:function(d){this.attachTo(t.global.idle,d,"idle",!0)},addRef:function(d,f){return((h=this).__REFS??(h.__REFS={}))[d]=f},getRef:function(d){return((h=this).__REFS??(h.__REFS={}))[d]},removeRef:function(d){const f=(h=this).__REFS??(h.__REFS={}),b=f[d];delete f[d];return b}})})(myt);
(t=>{let w=0,v=!1;const u=JS.Class,l=[],e=d=>{if(v!==d&&(v=d,!d)){for(d=l.length;d;){const f=l[--d];f.__deferredLayout=!1;f.update()}l.length=0}},a=(d,f,b,q)=>{const n=d.getSubviewIndex(f),r=d.subviews;-1<n&&(d=d.getSubviewIndex(b),r.splice(n,1),-1<d?(n<d&&--d,r.splice(d+(q?1:0),0,f)):q?r.push(f):r.unshift(f))},g=(d,f,b)=>{d[f]!==b&&(d[f]=b,d.inited&&(d.fireEvent(f,b),d.update()))},k=t.Layout=new u("Layout",t.Node,{extend:{incrementGlobalLock:()=>{1===++w&&e(!0)},decrementGlobalLock:()=>{0<w&&0===
--w&&e(!1)}},initNode:function(d,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const b=!0===f.locked;delete f.locked;this.callSuper(d,f);b||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(d){var f=this.parent;if(f!==d){const n=!this.locked;n&&(this.locked=!0);if(f){for(var b=this.subviews,q=b.length;q;)this.removeSubview(b[--q]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(d);
if(d=this.parent){f=d.getSubviews();b=f.length;for(q=0;b>q;)this.addSubview(f[q++]);this.attachTo(d,"__hndlPSA","subviewAdded");this.attachTo(d,"__hndlPSR","subviewRemoved")}n&&(this.locked=!1,this.inited&&d&&this.update())}},canUpdate:function(){return v?(this.__deferredLayout||(l.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(d){return this.subviews.includes(d)},getSubviewIndex:function(d){return this.subviews.indexOf(d)},addSubview:function(d){this.ignore(d)||
(this.subviews.push(d),this.startMonitoringSubview(d),this.locked||this.update())},startMonitoringSubview:d=>{},startMonitoringAllSubviews:function(){const d=this.subviews;let f=d.length;for(;f;)this.startMonitoringSubview(d[--f])},removeSubview:function(d){if(this.ignore(d))return-1;const f=this.getSubviewIndex(d);-1<f&&(this.stopMonitoringSubview(d),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:d=>{},stopMonitoringAllSubviews:function(){const d=this.subviews;
let f=d.length;for(;f;)this.stopMonitoringSubview(d[--f])},ignore:d=>d.ignoreLayout,__hndlPSA:function(d){d=d.value;d.parent===this.parent&&this.addSubview(d)},__hndlPSR:function(d){d=d.value;d.parent===this.parent&&this.removeSubview(d)},sortSubviews:function(d){this.subviews.sort(d)},moveSubviewBefore:function(d,f){a(this,d,f,!1)},moveSubviewAfter:function(d,f){a(this,d,f,!0)}});var c=t.ConstantLayout=new u("ConstantLayout",k,{setTargetAttrName:function(d){this.setterName=t.AccessorSupport.generateSetterName(d);
g(this,"targetAttrName",d)},setTargetValue:function(d){g(this,"targetValue",d)},update:function(){if(this.canUpdate()){const d=this.setterName,f=this.targetValue,b=this.subviews,q=b.length;if(d)for(let n=0;q>n;)b[n++][d](f)}}});c=t.VariableLayout=new u("VariableLayout",c,{initNode:function(d,f){this.collapseParent=this.reverse=!1;this.callSuper(d,f)},setCollapseParent:function(d){g(this,"collapseParent",d)},setReverse:function(d){g(this,"reverse",d)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,b=this.subviews;var d=b.length;let q=this.targetValue,n,r=0;if(this.reverse)for(n=d;n;)d=b[--n],this.skipSubview(d)||(q=this.updateSubview(++r,d,f,q));else for(n=0;d>n;){const x=b[n++];this.skipSubview(x)||(q=this.updateSubview(++r,x,f,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(d){this.attachTo(d,
"update","visible")},stopMonitoringSubview:function(d){this.detachFrom(d,"update","visible")},updateSubview:(d,f,b,q)=>{f[b](q);return q},skipSubview:d=>!d.visible,updateParent:(d,f)=>{}});const h=t.SpacedLayout=new u("SpacedLayout",c,{initNode:function(d,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(d,f)},setTargetAttrName:function(d){if(this.targetAttrName!==
d){const f="y"===d,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(d)}},setNoAddSubviewOptimization:function(d){this.noAddSubviewOptimization=d},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){g(this,"spacing",d)},setOutset:function(d){g(this,
"outset",d)},addSubview:function(d){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(d);this.locked=f},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},updateSubview:function(d,f,b,q){d=f[this.measureAttrName];f[b](q+(d-f[this.measureAttrBaseName])/2);return q+d+this.spacing},updateParent:function(d,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});t.ResizeLayout=new u("ResizeLayout",h,{setCollapseParent:d=>{},setTargetAttrName:function(d){if(this.targetAttrName!==d){if(this.inited){const f="x"===d;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(d);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(d){this.attachTo(this.parent,
"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},doBeforeUpdate:function(){const d=this.measureAttrName,f=this.subviews;let b=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=f.length,n=0,r=0;for(;q;){const x=f[--q];this.skipSubview(x)||(++n,0<x.layoutHint?r+=x.layoutHint:b-=x[d])}0!==n&&(this.remainder=b-=(n-1)*this.spacing,this.resizeSum=r,this.scalingFactor=b/r,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===d?
"setWidth":"setHeight")},updateSubview:function(d,f,b,q){var n=f.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,f[this.measureSetter](n));return this.callSuper(d,f,b,q)},startMonitoringSubview:function(d){0<d.layoutHint||this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update","visible")},stopMonitoringSubview:function(d){0<d.layoutHint||this.detachFrom(d,"update",
this.measureAttrName);this.detachFrom(d,"update","visible")},updateParent:(d,f)=>{}});t.AlignedLayout=new u("AlignedLayout",c,{initNode:function(d,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(d,f)},setTargetAttrName:function(d){if(this.targetAttrName!==d){const f="y"===d,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(d)}},setAlign:function(d){if(this.align!==d){this.align=d;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===d||"bottom"===d||"top"===d?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",d),this.update())}},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},
stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},doBeforeUpdate:function(){const d=this.measureAttrName,f=this.subviews;let b=0,q=f.length;for(;q;){const n=f[--q];this.skipSubview(n)||(b=b>n[d]?b:n[d])}this.setTargetValue(b)},updateSubview:function(d,f,b,q){switch(this.align){case "center":case "middle":f[b]((q-f[this.measureAttrName])/2);break;case "right":case "bottom":f[b](q-f[this.measureAttrName]);break;default:f[b](0)}return q},updateParent:function(d,
f){this.parent[this.parentSetterName](f)}});t.WrappingLayout=new u("WrappingLayout",c,{initNode:function(d,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(d,f)},
setTargetAttrName:function(d){if(this.targetAttrName!==d){const f="y"===d,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";b&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(q));
this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(d);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){g(this,"spacing",d)},setOutset:function(d){g(this,"outset",d)},setLineSpacing:function(d){g(this,"lineSpacing",d)},setLineInset:function(d){g(this,
"lineInset",d)},setLineOutset:function(d){g(this,"lineOutset",d)},startMonitoringParent:function(d){this.attachTo(this.parent,"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update",this.otherMeasureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.detachFrom(d,"update",this.otherMeasureAttrName);
this.callSuper(d)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(d,f,b,q){d=f[this.measureAttrName];const n=f[this.otherMeasureAttrName];q+d>this.parentSizeLessOutset||"break"===f.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);f[this.otherSetterName](this.linePos+
(n-f[this.otherMeasureAttrBaseName])/2);f[b](q+(d-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+d+this.outset);return q+d+this.spacing},updateParent:function(d,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});t.createFixedThresholdCounter(k,1,"locked")})(myt);
(t=>{const w=Math.round,v=t.DomElementProxy,u=t.Geometry.rectContainsPoint,l=(b,q)=>{const n=t.global.focus.focusedView,r=b.getIDE();if(n===b||n?.isDescendantOf(b))n._ignoreFocus=!0;const {scrollTop:x,scrollLeft:B}=r;q();n&&(n._ignoreFocus=!1,n.focus(!0));r.scrollTop=x;r.scrollLeft=B},e=(b,q,n)=>{const r=b.getODE(),x=r.parentNode;if(x){const B=()=>{const I=r.nextElementSibling;x.removeChild(r);q();x.insertBefore(r,I)};n?l(b,B):B()}else q()},a=(b,q,n,r)=>{if(q&&"object"===typeof q){if(r){var x=b.getLeastCommonAncestor(q)?.getIDE();
if(x){const B=v.getZIndexRelativeToAncestor,I=n?-1:1;r=I*B(b.getODE(),x);x=I*B(q.getODE(),x);if(r<x)return!0;if(x<r)return!1}}b=b.getODE().compareDocumentPosition(q.getODE());return n?2===b||10===b:4===b||20===b}return!1},g=b=>{b=b.getAncestors();let q=b.length,n=1,r=1;for(;q;){const x=b[--q];n*=x.scaleX||1;r*=x.scaleY||1;x.__effectiveScaleX=n;x.__effectiveScaleY=r}return{scaleX:n,scaleY:r}},k=(b,q,n)=>{const r=b.getODE();if(u(q,n,0,0,r.offsetWidth*b.__effectiveScaleX,r.offsetHeight*b.__effectiveScaleY)){if(b=
b.parent){const x=b.getIDE();return k(b,q+(r.offsetLeft-x.scrollLeft)*b.__effectiveScaleX,n+(r.offsetTop-x.scrollTop)*b.__effectiveScaleY)}return!0}return!1},c=b=>{switch(b.align){case "center":b.releaseConstraint("__doAlignCenter");break;case "right":b.releaseConstraint("__doAlignRight")}},h=b=>{const q=b.parent;if(q)switch(b.align){case "center":b.constrain("__doAlignCenter",[b,"width",b,"alignOffset",q,"width"]);break;case "right":b.constrain("__doAlignRight",[b,"width",b,"alignOffset",q,"width"]);
break;case "left":b.setX(b.alignOffset||0)}},d=b=>{switch(b.valign){case "middle":b.releaseConstraint("__doValignMiddle");break;case "bottom":b.releaseConstraint("__doValignBottom")}},f=b=>{const q=b.parent;if(q)switch(b.valign){case "middle":b.constrain("__doValignMiddle",[b,"height",b,"valignOffset",q,"height"]);break;case "bottom":b.constrain("__doValignBottom",[b,"height",b,"valignOffset",q,"height"]);break;case "top":b.setY(b.valignOffset||0)}};t.View=new JS.Class("View",t.Node,{include:[v,t.DomObservable,
t.DomObserver,t.ScrollObservable,t.FocusObservable,t.KeyObservable,t.MouseObservable],extend:{retainFocusDuringDomUpdate:l,doWhileRemovedFromDom:e},initNode:function(b,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(b));const n=this.getODS();n.left=n.top="0px";this.callSuper(b,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(b){b=document.createElement(this.tagName??
"div");b.style.position="absolute";let q;b.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return b},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(b){this.parent!==b&&(this.inited&&(c(this),d(this)),this.callSuper(b),this.align&&h(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const b=[],q=this.getIDE().children,n=q.length;for(let r=0;r<n;){const x=q[r++].model;x?.parent===this&&b.push(x)}return b},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(b=>b!==this)},setFocusTrap:function(b){this.focusTrap=b},setFocusCage:function(b){this.focusCage=b},setMaskFocus:function(b){this.maskFocus=b},setLayoutHint:function(b){this.layoutHint=b},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(b){if(this.ignoreLayout!==b){var q=this.inited&&this.parent;let n;if(b){if(q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].removeSubview(this);this.ignoreLayout=b}else if(this.ignoreLayout=b,q)for(q=this.parent.getLayouts(),n=q.length;n;)q[--n].addSubview(this)}},setDomClass:function(b){this.domClass!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domClass",b))},setDomId:function(b){this.domId!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domId",b))},setAlignOffset:function(b){this.alignOffset!==
b&&(this.alignOffset=b,this.inited&&this.fireEvent("alignOffset",b),this.parent&&"left"===this.align&&this.setX(b))},setAlign:function(b){this.align!==b&&(this.inited&&c(this),this.align=b,this.inited&&(this.fireEvent("align",b),h(this)))},__doAlignCenter:function(b){this.setX(w((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(b){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(b){this.valignOffset!==b&&(this.valignOffset=b,this.inited&&
this.fireEvent("valignOffset",b),this.parent&&"top"===this.valign&&this.setY(b))},setValign:function(b){this.valign!==b&&(this.inited&&d(this),this.valign=b,this.inited&&(this.fireEvent("valign",b),f(this)))},__doValignMiddle:function(b){this.setY(w((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(b){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(b){this.x!==b&&(this.x=b,this.visible&&(this.getODS().left=b+"px"),this.inited&&this.fireEvent("x",
b))},setY:function(b){this.y!==b&&(this.y=b,this.visible&&(this.getODS().top=b+"px"),this.inited&&this.fireEvent("y",b))},setWidth:function(b){0>b&&(b=0);this.width!==b&&(this.width=b,this.getODS().width=b+"px",this.inited&&(this.__updateBounds(b,this.height),this.fireEvent("width",b)))},setHeight:function(b){0>b&&(b=0);this.height!==b&&(this.height=b,this.getODS().height=b+"px",this.inited&&(this.__updateBounds(this.width,b),this.fireEvent("height",b)))},setDomMinWidth:function(b,q){(q?this.getIDS():
this.getODS()).minWidth=null!=b?b+"px":null},getDomMinWidth:function(b){b=(b?this.getIDS():this.getODS()).minWidth;return null!=b?Number.parseInt(b):null},setDomMinHeight:function(b,q){(q?this.getIDS():this.getODS()).minHeight=null!=b?b+"px":null},getDomMinHeight:function(b){b=(b?this.getIDS():this.getODS()).minHeight;return null!=b?Number.parseInt(b):null},setTextColor:function(b){this.textColor!==b&&(this.textColor=b,this.getODS().color=b||"inherit",this.inited&&this.fireEvent("textColor",b))},
setBgColor:function(b){this.bgColor!==b&&(this.getODS().backgroundColor=this.bgColor=b,this.inited&&this.fireEvent("bgColor",b))},isColorAttr:b=>"bgColor"===b||"textColor"===b,setOpacity:function(b){this.opacity!==b&&(this.getODS().opacity=this.opacity=b,this.inited&&this.fireEvent("opacity",b))},setOverflow:function(b){const q=this.overflow;if(q!==b){this.overflow=b;const n=this.getIDS();if("autox"===b)n.overflowX="auto",n.overflowY="hidden";else if("autoy"===b)n.overflowY="auto",n.overflowX="hidden";
else{if("autox"===q||"autoy"===q)n.overflowX=n.overflowY=null;n.overflow=b||"visible"}this.inited&&this.fireEvent("overflow",b)}},setVisible:function(b){if(this.visible!==b){this.visible=b;const q=this.getODS();q.visibility=b?"inherit":"hidden";q.left=b?this.x+"px":"-100000px";q.top=b?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",b)}},setPointerEvents:function(b){this.pointerEvents!==b&&(this.pointerEvents=b,this.getODS().pointerEvents=b||"auto",this.inited&&this.fireEvent("pointerEvents",
b))},setCursor:function(b){this.cursor!==b&&(this.cursor=b,this.getODS().cursor=b||"auto",this.inited&&this.fireEvent("cursor",b))},__updateBounds:function(b,q){this.boundsWidth!==b&&this.fireEvent("boundsWidth",this.boundsWidth=b);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(b){const [q,n,r]=b??[];this.setOutlineWidth(q);this.setOutlineStyle(n);this.setOutlineColor(r)},setOutlineWidth:function(b){this.getODS().outlineWidth=(this.outlineWidth=b||0)+
"px"},setOutlineStyle:function(b){this.getODS().outlineStyle=this.outlineStyle=b||"none"},setOutlineColor:function(b){this.getODS().outlineColor=this.outlineColor=b||"#000"},setBorder:function(b){const [q,n,r]=b??[];this.setBorderWidth(q);this.setBorderStyle(n);this.setBorderColor(r)},setBorderWidth:function(b){this.getODS().borderWidth=(this.borderWidth=b||0)+"px"},setBorderStyle:function(b){this.getODS().borderStyle=this.borderStyle=b||"none"},setBorderColor:function(b){this.getODS().borderColor=
this.borderColor=b||"#000"},setRoundedCorners:function(b){this.getODS().borderRadius=b+"px"},setRoundedTopLeftCorner:function(b){this.getODS().borderTopLeftRadius=b+"px"},setRoundedTopRightCorner:function(b){this.getODS().borderTopRightRadius=b+"px"},setRoundedBottomLeftCorner:function(b){this.getODS().borderBottomLeftRadius=b+"px"},setRoundedBottomRightCorner:function(b){this.getODS().borderBottomRightRadius=b+"px"},setBoxShadow:function(b){const [q,n,r,x]=b??[];this.getODS().boxShadow=b?(q||0)+
"px "+(n||0)+"px "+(r||7)+"px "+(x||"#000"):"none"},setGradient:function(b){const q=this.getODS();if(b){let r=b[0];"linear"===r||"radial"===r?b.shift():r="linear";let x=b[0];if("radial"===r){void 0===x?x="closest-side":b.shift();var n=b[0];if(void 0===n)n="circle";else{switch(n){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",n),n="circle"}b.shift()}let B=b[0];void 0===B?B="center":(B=B.replaceAll("middle","center"),b.shift());x=n+" "+x+" at "+B}else"number"===
typeof x?(x+="deg",b.shift()):x?(x="to "+x,b.shift()):x="0deg";n=B=>{b.push(B&&"inherit"!==B?B:"transparent")};2>b.length&&n(this.textColor);2>b.length&&n(this.bgColor);q.background=r+"-gradient("+x+","+b.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(b){this.tooltip!==b&&(this.tooltip=this.getODE().title=b,this.inited&&this.fireEvent("tooltip",b))},isVisible:function(){return null==this.searchAncestorsOrSelf(b=>!b.visible)},getFocusTrap:function(b){return this.searchAncestorsOrSelf(q=>
q.focusCage||q.focusTrap&&!b)},subnodeAdded:function(b){b instanceof t.View?(this.getIDE().appendChild(b.getODE()),this.getSubviews().push(b),this.fireEvent("subviewAdded",b),this.subviewAdded(b)):b instanceof t.Layout&&(this.getLayouts().push(b),this.fireEvent("layoutAdded",b),this.layoutAdded(b))},subnodeRemoved:function(b){let q;b instanceof t.View?(q=this.getSubviewIndex(b),-1<q&&(this.fireEvent("subviewRemoved",b),b.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(b))):b instanceof
t.Layout&&(q=this.getLayoutIndex(b),-1<q&&(this.fireEvent("layoutRemoved",b),this.layouts.splice(q,1),this.layoutRemoved(b)))},hasSubview:function(b){return this.getSubviews().includes(b)},getSubviewIndex:function(b){return this.getSubviews().indexOf(b)},subviewAdded:b=>{},subviewRemoved:b=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(b){const q=
this.getSubviews();for(let n=q.length;0<n;){const r=q[--n];b&&!b(r)||r.destroy()}},hasLayout:function(b){return this.getLayouts().includes(b)},getLayoutIndex:function(b){return this.getLayouts().indexOf(b)},layoutAdded:b=>{},layoutRemoved:b=>{},isBehind:function(b,q){return a(this,b,!1,q)},isInFrontOf:function(b,q){return a(this,b,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(b,q){this.parent.sendSubviewBehind(this,
b,q)},sendInFrontOf:function(b,q){this.parent.sendSubviewInFrontOf(this,b,q)},doSubviewsReorderedInDom:b=>{},bringSubviewToFront:function(b){const q=this;if(b?.parent===q){const n=q.getIDE(),r=b.getODE();r!==n.lastElementChild&&l(b,()=>{n.appendChild(r);q.doSubviewsReorderedInDom(b)})}},sendSubviewToBack:function(b){const q=this;if(b?.parent===q){const n=q.getIDE(),r=n.firstElementChild,x=b.getODE();x!==r&&l(b,()=>{n.insertBefore(x,r);q.doSubviewsReorderedInDom(b)})}},sendSubviewBehind:function(b,
q,n){n?.moveSubviewBefore(b,q);const r=this;if(b?.parent===r&&q?.parent===r){const x=b.getODE(),B=q.getODE();if(x!==B.previousElementSibling){const I=r.getIDE();l(b,()=>{I.insertBefore(x,B);r.doSubviewsReorderedInDom(b)})}}n?.update()},sendSubviewInFrontOf:function(b,q,n){n?.moveSubviewAfter(b,q);const r=this;if(b?.parent===r&&q?.parent===r){const x=b.getODE(),B=q.getODE().nextElementSibling;if(x!==B){const I=r.getIDE();l(b,()=>{I.insertBefore(x,B);r.doSubviewsReorderedInDom(b)})}}n?.update()},sortSubviews:function(b){const q=
this,n=q.getSubviews();t.isNotSorted(n,b)&&(n.sort(b),e(q,()=>{const r=document.createDocumentFragment(),x=n.length;for(let B=0;x>B;)r.appendChild(n[B++].getODE());q.getIDE().appendChild(r)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(b,q,n){const r=this.getODE();if(!r)return!1;const {x,y:B}=v.getRelativePosition(r,n);return u(b,q,x,B,this.width,this.height)},isPointVisible:function(b,q){const {x:n,y:r}=this.getPagePosition(!0);g(this);return k(this,b-n,q-r)},intersectsWithSibling:function(b){return b.parent===
this.parent&&!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)},getEffectiveScale:function(){return g(this)},getEffectiveScaleX:function(){return g(this).scaleX},getEffectiveScaleY:function(){return g(this).scaleY}})})(myt);
(t=>{const w=(u,l,e)=>{const a=v(u,l);u.getODS().transform=a+(0===a.length?"":" ")+l+"("+e+")"},v=(u,l)=>{u=u.getODS();var e=u.transform;if(!e||0===e.length)return"";e=e.split(" ");let a=e.length;for(;a;)if(e[--a].startsWith(l)){e.splice(a,1);break}return u.transform=e.join(" ")};t.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(u){this.transformOrigin!==u&&(this.transformOrigin=u,this.getODS().transformOrigin=u||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",u)))},setRotation:function(u){this.rotation!==u&&(this.rotation=u,w(this,"rotate",(u||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",u)))},setScale:function(u){const l=this.scaleX!==u,e=this.scaleY!==u;if(l){var a=this.scaleX=u;null==a?v(this,"scaleX"):w(this,"scaleX",a||1)}e&&(a=this.scaleY=u,null==a?v(this,"scaleY"):w(this,"scaleY",a||1));this.inited&&((l||e)&&this.__updateBounds(this.width,this.height),
l&&this.fireEvent("scaleX",u),e&&this.fireEvent("scaleY",u))},setScaleX:function(u){if(this.scaleX!==u){var l=this.scaleX=u;null==l?v(this,"scaleX"):w(this,"scaleX",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",u))}},setScaleY:function(u){if(this.scaleY!==u){var l=this.scaleY=u;null==l?v(this,"scaleY"):w(this,"scaleY",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",u))}},setSkewX:function(u){this.skewX!==u&&(this.skewX=
u,w(this,"skewX",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",u)))},setSkewY:function(u){this.skewY!==u&&(this.skewY=u,w(this,"skewY",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",u)))},__updateBounds:function(u,l){const {rotation:e,scaleX:a,scaleY:g}=this,k=(null==a||1===a)&&(null==g||1===g);if(!k||null!=e&&0!==e&&180!==e)!k||90!==e&&270!==e?{width:u,height:l}=this.getODE().getBoundingClientRect():{width:l,height:u}=
this;this.callSuper(u,l)}})})(myt);
(t=>{const w=JS.Module,v=(a,g)=>{if("auto"===g)a.__hasSetWidth=!1,a.getODS().width="auto",a.sizeViewToDom();else return a.__hasSetWidth=!0},u=(a,g)=>{if("auto"===g)a.__hasSetHeight=!1,a.getODS().height="auto",a.sizeViewToDom();else return a.__hasSetHeight=!0},l=a=>{if(!a.__hasSetWidth){const g=a.getODE().offsetWidth/a.getEffectiveScaleX();a.width!==g&&(a.width=g,a.inited&&a.__updateBounds(g,a.height),a.fireEvent("width",g))}},e=a=>{if(!a.__hasSetHeight){const g=a.getODE().offsetHeight/a.getEffectiveScaleY();
a.height!==g&&(a.height=g,a.inited&&a.__updateBounds(a.width,g),a.fireEvent("height",g))}};t.SizeToDom=new w("SizeToDom",{extend:{sizeWidth:l,sizeHeight:e},initNode:function(a,g){this.callSuper(a,g);this.sizeViewToDom()},setWidth:function(a){v(this,a)&&this.callSuper(a)},setHeight:function(a){u(this,a)&&this.callSuper(a)},sizeViewToDom:function(){l(this);e(this)}});t.SizeWidthToDom=new w("SizeWidthToDom",{initNode:function(a,g){this.callSuper(a,g);this.sizeViewToDom()},setWidth:function(a){v(this,
a)&&this.callSuper(a)},sizeViewToDom:function(){l(this)}});t.SizeHeightToDom=new w("SizeHeightToDom",{initNode:function(a,g){this.callSuper(a,g);this.sizeViewToDom()},setHeight:function(a){u(this,a)&&this.callSuper(a)},sizeViewToDom:function(){e(this)}})})(myt);
(t=>{const w=JS.Module,v=(a,g,k,c)=>{a[k]!==g&&(a[k]=g,a.getIDS()[k]=g||c||"inherit",a.inited&&(a.fireEvent(k,g),a.sizeViewToDom()))};t.TextSupport=new w("TextSupport",{setWidth:function(a){this.callSuper(a);"auto"!==a&&(a=this.whiteSpace,"normal"!==a&&"pre-line"!==a&&"pre-wrap"!==a&&"break-spaces"!==a||this.sizeViewToDom())},setText:function(a){a||="";a=this.valueFromEvent(a);this.text!==a&&(this.getIDE().innerHTML=this.text=a,this.inited&&(this.fireEvent("text",a),this.sizeViewToDom()))},setTextOverflow:function(a){this.textOverflow!==
a&&(this.textOverflow=a,this.getIDS().textOverflow=a||"inherit",this.inited&&this.fireEvent("textOverflow",a))},setTextAlign:function(a){this.textAlign!==a&&(this.textAlign=a,this.getIDS().textAlign=a||"inherit",this.inited&&this.fireEvent("textAlign",a))},setWhiteSpace:function(a){v(this,a,"whiteSpace")},setWordWrap:function(a){v(this,a,"wordWrap","normal")},setTextIndent:function(a){v(this,a,"textIndent")},setTextTransform:function(a){v(this,a,"textTransform")},setTextDecoration:function(a){v(this,
a,"textDecoration")},setLineHeight:function(a){v(this,a,"lineHeight")},setLetterSpacing:function(a){v(this,a,"letterSpacing")},setWordSpacing:function(a){v(this,a,"wordSpacing")},setFontFamily:function(a){v(this,a,"fontFamily")},setFontStyle:function(a){v(this,a,"fontStyle")},setFontVariant:function(a){v(this,a,"fontVariant")},setFontWeight:function(a){v(this,a,"fontWeight")},setFontSize:function(a){v(this,a,"fontSize")},setUserUnselectable:function(a){this.userUnselectable!==a&&(this.userUnselectable=
a,this[a?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(a?"default":"text"),this.inited&&this.fireEvent("userUnselectable",a))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(a,g,k,c){this.getIDS().textShadow=(a||0)+"px "+(g||0)+"px "+(null!=k?k:2)+"px "+(c||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const u=(a,g,k)=>{const c="padding"+k;g=Math.max(g,0);a[c]!==g&&(a[c]=g,a.getIDS()[c]=g+"px",a.fireEvent(c,g),"Left"===k||"Right"===k?l(a):e(a))},l=a=>{a.__hasSetWidth&&(a.getODS().width=a.width-(a.paddingLeft||0)-(a.paddingRight||0)+"px",a.inited&&a.sizeViewToDom())},e=a=>{a.__hasSetHeight&&(a.getODS().height=a.height-(a.paddingTop||0)-(a.paddingBottom||0)+"px",a.inited&&a.sizeViewToDom())};t.PaddedTextSupport=new w("PaddedTextSupport",{setWidth:function(a){this.callSuper(a);l(this)},setHeight:function(a){this.callSuper(a);
e(this)},setPadding:function(a){let g,k,c;a||=0;"object"===typeof a?(g=a.top||0,k=a.right||0,c=a.bottom||0,a=a.left||0):g=k=c=a;this.setPaddingTop(g);this.setPaddingRight(k);this.setPaddingBottom(c);this.setPaddingLeft(a)},setPaddingTop:function(a){u(this,a,"Top")},setPaddingRight:function(a){u(this,a,"Right")},setPaddingBottom:function(a){u(this,a,"Bottom")},setPaddingLeft:function(a){u(this,a,"Left")}})})(myt);
(t=>{const w={},v={},u=l=>{const e=l.imageUrl;if(l.calculateNaturalSize&&e){var a=w[e];if(a)l.setNaturalWidth(a.width),l.setNaturalHeight(a.height);else{a=v[e];if(!a){v[e]=a=[];const g=new Image;g.onerror=k=>{if(k=v[e]){let c=k.length;for(;c;)k[--c].setImageLoadingError(!0);k.length=0;delete v[e]}};g.onload=()=>{const k=g.width,c=g.height,h=v[e];if(h){let d=h.length;for(;d;){const f=h[--d];f.imageUrl===e&&(f.setNaturalWidth(k),f.setNaturalHeight(c))}h.length=0;delete v[e]}w[e]={width:k,height:c}};
g.src=e}a.push(l)}}};t.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:l=>w[l]},initNode:function(l,e){e.imageRepeat??(e.imageRepeat="no-repeat");e.imageAttachment??(e.imageAttachment="scroll");this.callSuper(l,e)},setImageUrl:function(l){this.imageUrl!==l&&(this.imageUrl=l,this.getIDS().backgroundImage=l?'url("'+l+'")':"none",this.inited&&(this.fireEvent("imageUrl",l),this.setNaturalWidth(),this.setNaturalHeight(),!l&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
u(this))},setImageLoadingError:function(l){this.set("imageLoadingError",l,!0)},setImageSize:function(l){this.imageSize!==l&&(this.imageSize=l,this.getIDS().backgroundSize=l||"auto",this.inited&&this.fireEvent("imageSize",l))},setImageRepeat:function(l){this.imageRepeat!==l&&(this.getIDS().backgroundRepeat=this.imageRepeat=l,this.inited&&this.fireEvent("imageRepeat",l))},setImagePosition:function(l){this.imagePosition!==l&&(this.getIDS().backgroundPosition=this.imagePosition=l,this.inited&&this.fireEvent("imagePosition",
l))},setImageAttachment:function(l){this.imageAttachment!==l&&(this.getIDS().backgroundAttachment=this.imageAttachment=l,this.inited&&this.fireEvent("imageAttachment",l))},setCalculateNaturalSize:function(l){this.calculateNaturalSize!==l&&(this.calculateNaturalSize=l,this.inited&&this.fireEvent("calculateNaturalSize",l),u(this))},setNaturalWidth:function(l){this.naturalWidth!==l&&(this.naturalWidth=l,this.inited&&this.fireEvent("naturalWidth",l),this.useNaturalSize&&l&&this.setWidth(l))},setNaturalHeight:function(l){this.naturalHeight!==
l&&(this.naturalHeight=l,this.inited&&this.fireEvent("naturalHeight",l),this.useNaturalSize&&l&&this.setHeight(l))},setUseNaturalSize:function(l){this.useNaturalSize!==l&&(this.useNaturalSize=l,this.inited&&this.fireEvent("useNaturalSize",l),l&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),l&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(t=>{const w=JS.Class,{View:v,SizeToDom:u}=t;t.Flexbox=new w("Flexbox",v,{include:[t.FlexboxSupport]});t.Frame=new w("Frame",v,{initNode:function(l,e){e.tagName??(e.tagName="iframe");this.callSuper(l,e);l=t.global.mouse;this.attachToDom(l,"__doMouseDown","mousedown",!0);this.attachToDom(l,"__doMouseUp","mouseup",!0)},createOurDomElement:function(l){l=this.callSuper(l);(Array.isArray(l)?l[1]:l).style.border="0px";return l},setSrc:function(l){this.src!==l&&(this.src=this.getIDE().src=l,this.inited&&
this.fireEvent("src",l))},__doMouseDown:function(l){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(l){this.setPointerEvents(this.__restorePointerEvents);return!0}});t.Markup=new w("Markup",v,{include:[u],setHtml:function(l){this.html!==l&&(this.getIDE().innerHTML=this.html=l,this.inited&&(this.fireEvent("html",l),this.sizeViewToDom()))}});t.Text=new w("Text",v,{include:[u,t.TextSupport],initNode:function(l,e){e.whiteSpace??(e.whiteSpace=
"nowrap");e.userUnselectable??(e.userUnselectable=!0);this.callSuper(l,e)},measureNoWrapWidth:function(){const l=this.__hasSetWidth,e=this.width;if(!l&&"nowrap"===this.whiteSpace)return e;const a=this.getIDS(),g=a.whiteSpace;l&&(a.width="auto");a.whiteSpace="nowrap";const k=this.getODE().getBoundingClientRect().width;a.whiteSpace=g;l&&(a.width=e);return k}});t.PaddedText=new w("PaddedText",t.Text,{include:[t.PaddedTextSupport]});t.Image=new w("Image",v,{include:[t.ImageSupport],initNode:function(l,
e){e.useNaturalSize??(e.useNaturalSize=!0);this.callSuper(l,e)}});t.BackView=new w("BackView",v,{sendSubviewToBack:function(l){if(l.parent===this){const e=this.getIDE(),a=e.childNodes[1];l=l.getODE();l!==a&&(l=e.removeChild(l))&&e.insertBefore(l,a)}}})})(myt);
(t=>{const w=Math.round,v=a=>{a.parent&&0<=a.percentOfParentWidth&&a.syncTo(a.parent,"__doPOPW","width")},u=a=>{0<=a.percentOfParentWidth&&a.detachFrom(a.parent,"__doPOPW","width")},l=a=>{a.parent&&0<=a.percentOfParentHeight&&a.syncTo(a.parent,"__doPOPH","height")},e=a=>{0<=a.percentOfParentHeight&&a.detachFrom(a.parent,"__doPOPH","height")};t.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){this.parent!==a&&(this.inited&&(u(this),e(this)),this.callSuper(a),v(this),l(this))},setPercentOfParentWidthOffset:function(a){this.percentOfParentWidthOffset!==
a&&(this.percentOfParentWidthOffset=a,this.inited&&(this.fireEvent("percentOfParentWidthOffset",a),this.__doPOPW()))},setPercentOfParentWidth:function(a){this.percentOfParentWidth!==a&&(this.inited&&u(this),this.percentOfParentWidth=a,this.inited&&(this.fireEvent("percentOfParentWidth",a),v(this)))},setPercentOfParentHeightOffset:function(a){this.percentOfParentHeightOffset!==a&&(this.percentOfParentHeightOffset=a,this.inited&&(this.fireEvent("percentOfParentHeightOffset",a),this.__doPOPH()))},setPercentOfParentHeight:function(a){this.percentOfParentHeight!==
a&&(this.inited&&e(this),this.percentOfParentHeight=a,this.inited&&(this.fireEvent("percentOfParentHeight",a),l(this)))},__doPOPW:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+w(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+w(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(t=>{let w;const v=[];new JS.Singleton("GlobalRootViewRegistry",{include:[t.Observable],initialize:function(){t.global.register("roots",w=this)},getRoots:()=>v,addRoot:u=>{v.push(u);w.fireEvent("rootAdded",u)},removeRoot:u=>{const l=v.indexOf(u);-1<l&&(v.splice(l,1),w.fireEvent("rootRemoved",u))}})})(myt);
(t=>{const {addEventListener:w,removeEventListener:v,global:{roots:u}}=t,l=t.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:e=>{const a=e.getIDE();e=e.__captureDrop=g=>{g.preventDefault()};w(a,"drop",e);w(a,"dragover",e)},teardownCaptureDrop:e=>{const a=e.getIDE();e=e.__captureDrop;v(a,"drop",e);v(a,"dragover",e)}},initNode:function(e,a){this.callSuper(e,a);this.setZIndex(0);this.addDomClass("myt");u.addRoot(this);l.setupCaptureDrop(this)},createOurDomElement:function(e){e||(e=this.callSuper(e),
t.getElement().appendChild(e));return e},destroy:function(){l.teardownCaptureDrop(this);u.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(e){this.keepDomElementWhenDestroyed=e},setParent:e=>{},bringToFront:function(){var e=this.getIDE();const a=e.parentNode;e!==a.lastChild&&(e=a.removeChild(e))&&a.appendChild(e)},sendToBack:function(){var e=this.getIDE();const a=e.parentNode;e!==a.firstChild&&(e=a.removeChild(e))&&
a.insertBefore(e,a.firstChild)},sendBehind:function(e,a){a=this.getIDE();e=e.getIDE();const g=a.parentNode;e.parentNode===g&&(a=g.removeChild(a))&&g.insertBefore(a,e)},sendInFrontOf:function(e,a){e.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(e,a),e.sendBehind(this,a))}})})(myt);
(t=>{let w,v,u=!1;const {requestAnimationFrame:l,cancelAnimationFrame:e}=window,a={},g=c=>{w=l(g);c=Math.round(c);-1!==v&&(a.delta=c-v,a.time=c,k.fireEvent("idle",a));v=c},k=new JS.Singleton("GlobalIdle",{include:[t.Observable],initialize:function(){t.global.register("idle",this)},attachObserver:(c,h,d)=>{c=k.callSuper(c,h,d);!u&&k.hasObservers("idle")&&(u=!0,v=-1,w=l(g));return c},detachObserver:(c,h,d)=>{c=k.callSuper(c,h,d);u&&!k.hasObservers("idle")&&(e(w),u=!1);return c}})})(myt);
(t=>{let w,v,u;const l=t.global,e=l.idle,a=window.document;new JS.Singleton("GlobalWindowResize",{include:[t.Observable,t.Observer],initialize:function(){w=this;w.attachTo(e,"__setup","idle");l.register("windowResize",w)},__setup:g=>{const k=a.body;k&&(w.detachFrom(e,"__setup","idle"),(new ResizeObserver(()=>{w.fireEvent("resize",{w:v=k.clientWidth,h:u=k.clientHeight})})).observe(k))},getWidth:()=>v??=a.body.clientWidth,getHeight:()=>u??=a.body.clientHeight})})(myt);
(t=>{const w=JS.Module,v=t.global.windowResize,u=Math.max,l=a=>{const g=a.resizeDimension;"both"!==g&&"width"!==g||a.setWidth(u(a.minWidth,v.getWidth()));"both"!==g&&"height"!==g||a.setHeight(u(a.minHeight,v.getHeight()))},e=t.SizeToWindow=new w("SizeToWindow",{include:[t.RootView],initNode:function(a,g){this.minWidth=this.minHeight=0;g.resizeDimension??(g.resizeDimension="both");this.attachTo(v,"__hndlResize","resize");this.callSuper(a,g)},setResizeDimension:function(a){this.resizeDimension!==a&&
(this.resizeDimension=a,l(this))},setMinWidth:function(a){this.minWidth!==a&&(this.minWidth=a,l(this))},setMinHeight:function(a){this.minHeight!==a&&(this.minHeight=a,l(this))},__hndlResize:function(a){l(this)}});t.SizeToWindowWidth=new w("SizeToWindowWidth",{include:[e],initNode:function(a,g){g.resizeDimension??(g.resizeDimension="width");this.callSuper(a,g)}});t.SizeToWindowHeight=new w("SizeToWindowHeight",{include:[e],initNode:function(a,g){g.resizeDimension??(g.resizeDimension="height");this.callSuper(a,
g)}})})(myt);
(t=>{const w=Math,{min:v,max:u}=w,l=f=>v(255,u(0,w.round(f))),e=f=>l(f).toString(16).padStart(2,"0"),a=(f,b,q,n)=>(n?"#":"")+e(f)+e(b)+e(q),g=f=>new d((16711680&f)>>16,(65280&f)>>8,255&f),k=(f,b)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*b/100;else return 0;f=v(b,u(0,f))/b;return 1E-6>w.abs(1-f)?1:f},c=(f,b,q)=>{f=k(f,255);b=k(b,255);q=k(q,255);const n=u(f,b,q),r=n-v(f,b,q);if(0===r)return{h:0,s:0,v:n};let x;switch(n){case f:x=(b-q)/r+(b<q?6:0);break;case b:x=(q-f)/r+
2;break;case q:x=(f-b)/r+4}return{h:60*x,s:0===n?0:r/n,v:n}},h=(f,b,q)=>{f=6*k(f,360);b=k(b,100);q=k(q,100);var n=w.floor(f);const r=f-n;f=q*(1-b);const x=q*(1-r*b);b=q*(1-(1-r)*b);n%=6;return{red:255*[q,x,f,f,b,q][n],green:255*[b,q,q,x,f,f][n],blue:255*[f,f,b,q,q,x][n]}},d=t.Color=new JS.Class("Color",{extend:{toUnitRange:k,rgbToHsv:c,hsvToRgb:h,toHex:e,rgbToHex:a,cleanChannelValue:l,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:g,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [b,q,n]=f;return new d(parseInt(b+b,16),parseInt(q+q,16),parseInt(n+n,16));case 6:return g(parseInt(f,16));default:return g(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,b,q)=>{const {red:n,green:r,blue:x}=h(f,b,q);return new d(n,r,x)},getLighterColor:(f,b)=>g(f).isLighterThan(g(b))?f:b,makeColorNumberFromChannels:(f,b,q)=>(l(f)<<16)+(l(b)<<8)+l(q),makeBlendedColor:(f,b,
q)=>new d(f.red+q*(b.red-f.red),f.green+q*(b.green-f.green),f.blue+q*(b.blue-f.blue))},initialize:function(f,b,q){this.setRed(f);this.setGreen(b);this.setBlue(q)},setRed:function(f){this.red=l(f)},setGreen:function(f){this.green=l(f)},setBlue:function(f){this.blue=l(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return a(this.red,this.green,this.blue,!0)},getHSV:function(){return c(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new d(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(d)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(t=>{const {max:w,sin:v,cos:u,pow:l,sqrt:e,PI:a}=Math,g=2*a,k=a/2,c=t.global.idle,h=t.Color.makeColorFromHexString,d={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-u(n*k)+1,outSine:n=>v(n*k),inOutSine:n=>-(u(n*a)-1)/2,inCirc:n=>-(e(1-n*n)-1),outCirc:n=>e(1- --n*n),inOutCirc:n=>1>(n*=2)?-(e(1-n*n)-1)/2:(e(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:l(2,10*(n-1)),outExpo:n=>1===n?1:-l(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?l(2,10*(n-1))/2:(-l(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(l(2,10*--n)*v((1*n-.075)*g/.3)),outElastic:n=>0===n||1===n?n:l(2,-10*n)*v((1*n-.075)*g/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(l(2,10*--n)*v((1*n-.1125)*g/.45))/2:l(2,
-10*--n)*v((1*n-.1125)*g/.45)/2+1,inBack:(n,r=1.70158)=>(n/=1)*n*((r+1)*n-r),outBack:(n,r=1.70158)=>(n=n/1-1)*n*((r+1)*n+r)+1,inOutBack:(n,r=1.70158)=>1>(n*=2)?n*n*(((r*=1.525)+1)*n-r)/2:((n-=2)*n*(((r*=1.525)+1)*n+r)+2)/2,inBounce:n=>1-d.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?d.inBounce(n)/2:(d.outBounce(n-1)+1)/2},f=d.inOutQuad,b=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},q=(n,r)=>{const {running:x,paused:B,reverse:I,duration:z,repeat:C,__prog:J,easingFunction:M,callback:O}=n;if(x&&!B){I&&(r*=-1);r=J+r;let F=0;r>z?(F=r-z,r=z,++n.__loopCnt===C&&(F=0)):0>r&&(F=-r,r=0,0>--n.__loopCnt&&0<C&&(F=0));var m=n.target??n.parent;if(m){const {relative:K,attribute:L,__isColorAnim:R,__loopCnt:N,to:T}=n;var p=w(0,r/z),y=w(0,J/z);null==n.from&&(n.__tmpFrom=!0,n.from=K?R?"#000":0:m.get(L));y=M(p)-(K?M(y):0);var A=n.from,E=K?m.get(L):
A;p=m.set;if(R){A=h(A);const ea=h(T);E=K?h(E):A;E.setRed(E.red+(ea.red-A.red)*y);E.setGreen(E.green+(ea.green-A.green)*y);E.setBlue(E.blue+(ea.blue-A.blue)*y);y=E.getHtmlHexString()}else y=E+(T-A)*y;p.call(m,L,y);!I&&N===C||I&&0>N&&0<C?(n.setRunning(!1),O?.call(n,!0)):0<F?(n.fireEvent("repeat",N),n.__prog=I?z:0,q(n,F)):n.__prog=r}else console.log("No target for animator",n),n.setRunning(!1),O?.call(n,!1)}};t.Animator=new JS.Class("Animator",t.Node,{include:[t.Reusable],extend:{easings:d},initNode:function(n,
r){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=f;this.callSuper(n,r);b(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const r=this.target??this.parent;this.__isColorAnim=r&&"function"===typeof r.isColorAttr?r.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),b(this);this[n?"attachTo":"detachFrom"](c,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](c,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&b(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&b(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&b(this)},setEasingFunction:function(n){"string"===typeof n&&(n=d[n]);this.set("easingFunction",n??f,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,r){const x=this,B=x.callback;B&&!r?x.setCallback(I=>{B.call(x,I);n.call(x,I)}):x.setCallback(n)},reset:function(n){b(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},__updateAnim:function(n){q(this,
n.value.delta)}})})(myt);
(t=>{const w=Array.isArray,v=e=>{e.__additionalArgs=[];e.__pendingTransition="";e.__transDestinationState="";e.__transStage="leaveState"},u=(e,a)=>{if(e.__transInProgress){var g=e.__deferredTransitions;g??=e.__deferredTransitions=[];g.unshift(a)}else{e.__transInProgress=!0;g=a.shift();const k=a.shift();if(e.__pendingTransition)return 3;if(e.isFinished())return e.__transInProgress=!1,5;let c=e.map[e.current][k];c??=e.map["*"][k];if(c)return e.__pendingTransition=k,e.__transDestinationState=c,e.__additionalArgs=
a,e.resumeTransition(g);e.__transInProgress=!1;return 5}},l=e=>{e.__transInProgress=!1;const a=e.__deferredTransitions;if(a)for(;0<a.length;)u(e,a.pop())};t.StateMachine=new JS.Class("StateMachine",t.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(e,a){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";v(this);this.callSuper(e,a)},setInitialState:function(e){if(""===this.current){if(w(e)){var a=e;e=a.shift()}else a=[];this.current=
this.initial=e;this.doEnterState("","",e,a);a={name:"",from:"",to:e,args:a};this.fireEvent("enter"+e,a);this.fireEvent("enter",a);this.isFinished()&&this.fireEvent("finished",a)}},setTerminalState:function(e){this.terminal=e},addTransitions:function(e){for(const a of e)this.addTransition(...a)},addTransition:function(e,a,g){a=a?w(a)?a:[a]:["*"];const k=this.map;let c=a.length;for(;c;){let h,d;((h=k)[d=a[--c]]??(h[d]={}))[e]=g}},doTransition:function(...e){e.unshift("sync");return u(this,e)},doAsyncTransition:function(...e){e.unshift("async");
return u(this,e)},resumeTransition:function(e){const a=this.__pendingTransition;if(!a)return 4;const g=this.current,k=this.__transDestinationState,c=this.__additionalArgs,h={name:a,from:g,to:k,args:c},d=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(a,g,k,c);if(!1===f)return v(this),l(this),2;if("async"===f||"async"===e)return this.__transStage="enterState",d("start"+a,h),d("start",h),d("leave"+g,h),d("leave",h),l(this),3;d("start"+a,h);d("start",h);
d("leave"+g,h);d("leave",h);case "enterState":this.current=k,v(this),this.doEnterState(a,g,k,c),d("enter"+k,h),d("enter",h),d("end"+a,h),d("end",h),this.isFinished()&&d("finished",h)}l(this);return 1},doLeaveState:(e,a,g,k)=>{},doEnterState:(e,a,g,k)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(e){return w(e)?e.includes(this.current):this.current===e},can:function(e){return void 0!==this.map[this.current][e]?!0:void 0!==this.map["*"][e]}})})(myt);
(t=>{const w=(e,a)=>e.replicationIndex-a.replicationIndex,v=(e,a)=>{let g=e.length;for(;g;){const k=e[--g];k.decrementLockedCounter();a&&k.update()}},u=e=>{l(e);const a=e.template;a&&(e.__pool=new t.TrackActivesPool(a,e.parent))},l=e=>{const a=e.__pool;if(a){e=e.parent.getLayouts();let g=e.length;for(;g;)e[--g].incrementLockedCounter();a.putActives();a.destroyPooledInstances();v(e,!1);a.destroy()}};t.Replicable=new JS.Module("Replicable",{include:[t.Reusable],replicate:function(e,a){this.replicationData=
e;this.replicationIndex=a},notify:(e,a)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(e,a){return a===this.replicationIndex&&e===this.replicationData}});t.Replicator=new JS.Class("Replicator",t.Node,{initNode:function(e,a){this.callSuper(e,a);u(this);this.doReplication()},destroy:function(){l(this);this.callSuper()},setTemplate:function(e){(this.template=e.includes(t.Replicable)?e:null)||t.dumpStack("Template not replicable");this.inited&&
(u(this),this.doReplication())},setData:function(e){this.data=e;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const e=this.__pool;let a;if(e){a=this.parent.getLayouts();for(var g=a.length;g;)a[--g].incrementLockedCounter();const k=(g=this.data)?g.length:0,c=e.getActives(),h=c.length,d=[];let f=h,b,q;for(c.sort(w);f;)if(b=c[--f],q=b.replicationIndex,q>=k||!b.alreadyHasReplicationData(g[q],q))d[q]=b;for(f=d.length;f;)(b=d[--f])&&
e.putInstance(b);for(f=0;k>f;++f)(f>=h||null!=d[f])&&e.getInstance().replicate(g[f],f);for(f=a.length;f;)a[--f].sortSubviews(w);v(a,!0)}},notify:function(e,a){var g=this.__pool;if(g){g=g.getActives();let k=g.length;for(;k;)g[--k].notify(e,a)}}})})(myt);
(t=>{const w=JS.Singleton,v=document,{DomElementProxy:u,DomObservable:l,global:{register:e}}=t;new w("GlobalMouse",{include:[u,l,t.MouseObservable],initialize:function(){this.setDomElement(v);e("mouse",this)}});new w("GlobalTouch",{include:[u,l,t.TouchObservable],initialize:function(){this.setDomElement(v);e("touch",this)}})})(myt);
(t=>{let w,v,u;const l=[],e=[],a=c=>{const h=u;h!==c&&(h&&(h.notifyDragLeave(v),v.destroyed||v.notifyDragLeaving(h),w("dragLeave",h)),u=c)&&(c.notifyDragEnter(v),v.destroyed||v.notifyDragEntering(c),w("dragEnter",h))},g=c=>{let h=v;if(h!==c)if(v=c){h=c;for(const d of k(h,e))d.notifyDragStart(h);for(const d of k(h,l))d.notifyAutoScrollerDragStart(h);w("startDrag",c)}else{for(const d of k(h,e))d.notifyDragStop(h);for(const d of k(h,l))d.notifyAutoScrollerDragStop(h);w("stopDrag",c)}},k=(c,h)=>{if(c.destroyed)return[];
if(c.isAnyDragGroup())return h;const d=[];c=c.getDragGroups();let f=h.length;for(;f;){const b=h[--f];if(b.isAnyDropGroup())d.push(b);else{const q=b.getDropGroups();for(const n in c)if(q[n]){d.push(b);break}}}return d};new JS.Singleton("GlobalDragManager",{include:[t.Observable],initialize:function(){t.global.register("dragManager",this);w=this.fireEvent.bind(this)},getDragView:()=>v,registerAutoScroller:c=>{l.push(c)},unregisterAutoScroller:c=>{c=l.indexOf(c);-1<c&&l.splice(c,1)},registerDropTarget:c=>
{e.push(c)},unregisterDropTarget:c=>{c=e.indexOf(c);-1<c&&e.splice(c,1)},startDrag:c=>{g(c)},stopDrag:(c,h,d)=>{h.notifyDropped(u,d);d||u?.notifyDrop(h);a();g();u&&!d&&w("drop",[h,u])},updateDrag:(c,h)=>{const d=k(h,e);let f=d.length,b;if(0<f){const {pageX:q,pageY:n}=c.value;for(;f;)c=d[--f],c.willAcceptDrop(h)&&h.willPermitDrop(c)&&c.isPointVisible(q,n)&&(!b||c.isInFrontOf(b))&&(b=c)}a(b)}})})(myt);
(t=>{const w=JS.Module,{mouse:v,keys:u,idle:l}=t.global;t.Activateable=new w("Activateable",{doActivated:()=>{}});t.UpdateableUI=new w("UpdateableUI",{initNode:function(e,a){this.callSuper(e,a);this.updateUI()},updateUI:()=>{}});t.Disableable=new w("Disableable",{initNode:function(e,a){a.disabled??(a.disabled=!1);this.callSuper(e,a)},setDisabled:function(e){e=this.valueFromEvent(e);this.disabled!==e&&(this.disabled=e,this.inited&&this.fireEvent("disabled",e),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});t.KeyActivation=new w("KeyActivation",{extend:{ACTIVATION_KEYS:[u.CODE_ENTER,u.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(e,a){this.activateKeyDown="";a.activationKeys??(a.activationKeys=t.KeyActivation.ACTIVATION_KEYS);this.callSuper(e,a);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(e){this.activationKeys=
e??[]},setRepeatKeyDown:function(e){this.repeatKeyDown=e},__hndlKeyDown:function(e){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const a=t.KeyObservable.getCodeFromEvent(e);this.activationKeys.includes(a)&&(this.activateKeyDown===a?this.doActivationKeyDown(a,!0):(this.activateKeyDown=a,this.doActivationKeyDown(a,!1)),e.value.preventDefault())}},__hndlKeyPress:function(e){if(!this.disabled){const a=t.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===a&&this.activationKeys.includes(a)&&
e.value.preventDefault()}},__hndlKeyUp:function(e){if(!this.disabled){const a=t.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===a&&this.activationKeys.includes(a)&&(this.activateKeyDown="",this.doActivationKeyUp(a),e.value.preventDefault())}},__doDomBlur:function(e){this.disabled||(e=this.activateKeyDown,""!==e&&(this.activateKeyDown="",this.doActivationKeyAborted(e)))},doActivationKeyDown:(e,a)=>{},doActivationKeyUp:function(e){this.doActivated()},doActivationKeyAborted:e=>{}});t.ArrowKeyActivation=
new w("KeyActivation",{doActivationKeyDown:function(e,a){switch(e){case u.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,a))return;break;case u.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,a))return;break;case u.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,a))return;break;case u.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,a))return}this.callSuper(e,a)},doKeyArrowLeftOrUp:(e,a)=>{},doKeyArrowRightOrDown:(e,a)=>{}});t.MouseOver=new w("MouseOver",{initNode:function(e,a){a.mouseOver??(a.mouseOver=
!1);this.callSuper(e,a);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(e){this.mouseOver!==e&&(this.mouseOver=e,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(l,"__doMouseOverOnIdle","idle")))},setDisabled:function(e){this.callSuper(e);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(l,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const e=this.mouseOver;this.__lastOverIdleValue!==e&&(this.__lastOverIdleValue=e,this.doSmoothMouseOver(e))},doSmoothMouseOver:function(e){this.inited&&this.updateUI?.()},doMouseOver:function(e){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(e){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});t.MouseDown=new w("MouseDown",{initNode:function(e,a){a.mouseDown??(a.mouseDown=!1);this.callSuper(e,
a);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(e){this.mouseDown!==e&&(this.mouseDown=e,this.inited&&(e&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(e){e&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(e)},doMouseOver:function(e){this.callSuper(e);this.mouseDown&&this.detachFromDom(v,"doMouseUp","mouseup",!0)},doMouseOut:function(e){this.callSuper(e);!this.disabled&&this.mouseDown&&this.attachToDom(v,
"doMouseUp","mouseup",!0)},doMouseDown:function(e){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(e){this.mouseOver||this.detachFromDom(v,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(e))},doMouseUpInside:function(e){this.doActivated?.()}});t.MouseOverAndDown=new w("MouseOverAndDown",{include:[t.MouseOver,t.MouseDown]});t.MouseEventsBubbleUp=new w("MouseEventsBubbleUp",
{doMouseOver:function(e){this.callSuper(e);return!0},doMouseOut:function(e){this.callSuper(e);return!0},doMouseDown:function(e){this.callSuper(e);return!0},doMouseUp:function(e){this.callSuper(e);return!0}});t.Draggable=new w("Draggable",{initNode:function(e,a){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let g=!0;null!=a.isDraggable&&(g=a.isDraggable,delete a.isDraggable);this.callSuper(e,a);this.setIsDraggable(g)},setIsDraggable:function(e){if(this.isDraggable!==
e){this.isDraggable=e;let a;e?a=this.attachToDom:this.inited&&(a=this.detachFromDom);if(a){e=this.getDragViews();let g=e.length;for(;g;){const k=e[--g];a.call(this,k,"__doMouseDown","mousedown");a.call(this,k,"__doContextMenu","contextmenu")}}}},setIsDragging:function(e){this.set("isDragging",e,!0)},setDragOffsetX:function(e,a){this.dragOffsetX!==e&&(this.dragOffsetX=e,this.inited&&this.isDragging&&!a&&this.reRequestDragPosition())},setDragOffsetY:function(e,a){this.dragOffsetY!==e&&(this.dragOffsetY=
e,this.inited&&this.isDragging&&!a&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(e){this.distanceBeforeDrag=e},setDraggableAllowBubble:function(e){this.draggableAllowBubble=e},setCenterOnMouse:function(e){this.centerOnMouse=e},setAllowAbort:function(e){this.allowAbort=e},getDragViews:function(){return[this]},__doContextMenu:e=>{},__doMouseDown:function(e){const a=t.MouseObservable.getMouseFromEvent(e),g=this.getODE();this.dragInitX=a.x-g.offsetLeft;this.dragInitY=a.y-g.offsetTop;
this.attachToDom(v,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(v,"__doDragCheck","mousemove",!0):this.startDrag(e);e.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(e){this.isDragging?this.stopDrag(e,!1):(this.detachFromDom(v,"__doMouseUp","mouseup",!0),this.detachFromDom(v,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(e){e.value===u.CODE_ESC&&this.stopDrag(e,!0)},__doDragCheck:function(e){const a=
t.MouseObservable.getMouseFromEvent(e);t.Geometry.measureDistance(a.x,a.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(v,"__doDragCheck","mousemove",!0),this.startDrag(e))},startDrag:function(e){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(u,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(v,"updateDrag","mousemove",!0);this.updateDrag(e)},
updateDrag:function(e){this.__lastMousePosition=t.MouseObservable.getMouseFromEvent(e);this.reRequestDragPosition()},__updateDragInitX:function(e){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(e){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(e,a){this.detachFromDom(v,"__doMouseUp","mouseup",!0);this.detachFromDom(v,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(u,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(e,a){this.disabled||(this.setX(e),this.setY(a))},reRequestDragPosition:function(){const e=this.__lastMousePosition;this.requestDragPosition(e.x-this.dragInitX+this.dragOffsetX,e.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(t=>{const {Class:w,Module:v}=JS,{View:u,KeyActivation:l}=t;var e=t.Button=new v("Button",{include:[t.Activateable,t.UpdateableUI,t.Disableable,t.MouseOverAndDown,l],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(g,k){k.focusable??(k.focusable=!0);k.cursor??(k.cursor="pointer");this.callSuper(g,k)},setFocused:function(g){const k=this.focused;this.callSuper(g);this.inited&&this.focused!==k&&this.updateUI()},doActivationKeyDown:function(g,k){k||this.updateUI()},doActivationKeyUp:function(g){this.callSuper(g);
this.updateUI()},doActivationKeyAborted:function(g){this.callSuper(g);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const g=this.__restoreCursor;g&&(this.setCursor(g),this.__restoreCursor=null);this.activateKeyDown!==l.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=t.SimpleButtonStyle=new v("SimpleButtonStyle",{include:[e],setActiveColor:function(g){this.activeColor!==g&&(this.activeColor=g,this.inited&&this.updateUI())},setHoverColor:function(g){this.hoverColor!==g&&(this.hoverColor=g,this.inited&&this.updateUI())},setReadyColor:function(g){this.readyColor!==
g&&(this.readyColor=g,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(g,k=1){this.setOpacity(k);this.setBgColor(g)}});const a=t.SimpleButton=new w("SimpleButton",u,{include:[e],initNode:function(g,k){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(g,
k)}});t.SimpleTextButton=new w("SimpleTextButton",a,{initNode:function(g,k){this.inset=this.outset=0;k.shrinkToFit??(k.shrinkToFit=!1);k.height??(k.height=24);k.textY??(k.textY="middle");this.callSuper(g,k);g=this.textY;k={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof g?k.valign=g:k.y=g;g=this.textView=new t.Text(this,k);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",g,"visible",g,"width",
g,"height",g,"y"])},setInset:function(g){this.set("inset",this.valueFromEvent(g),!0)},setOutset:function(g){this.set("outset",this.valueFromEvent(g),!0)},setText:function(g){this.text!==g&&(this.text=g,this.inited&&(this.textView.setText(g),this.fireEvent("text",g)))},setShrinkToFit:function(g){this.shrinkToFit!==g&&(this.shrinkToFit=g,this.inited&&(this.textView.setWhiteSpace(g?"nowrap":"normal"),this.fireEvent("shrinkToFit",g)))},setTextY:function(g){if(this.textY!==g&&(this.textY=g,this.inited)){const k=
this.textView;this.fireEvent("textY",g);"string"===typeof g?k.setValign(g):(k.setValign(""),k.setY(g))}},__updateContent:function(g){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:k,outset:c,textView:h}=this;this.__updateContentLoopBlock=!0;h.setX(k);this.shrinkToFit?this.setWidth(k+(h.visible&&this.text?h.width:0)+c):h.setWidth(this.width-k-c);this.__updateContentLoopBlock=!1}}});t.TextButton=new w("TextButton",t.PaddedText,{include:[e],initNode:function(g,k){k.focusIndicator??
(k.focusIndicator=!1);k.roundedCorners??(k.roundedCorners=3);k.textAlign??(k.textAlign="center");k.paddingTop??(k.paddingTop=1);k.height??(k.height=23-(k.paddingTop??0));k.activeColor??(k.activeColor="#ddd");k.hoverColor??(k.hoverColor="#eee");k.readyColor??(k.readyColor="#fff");this.callSuper(g,k)}})})(myt);
(t=>{const w=console.warn,{focus:v,mouse:u,windowResize:l}=t.global,e={};t.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:a=>e[a]},initNode:function(a,g){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(a,g)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=
a},setFloatingAlign:function(a){this.set("floatingAlign",a,!0)},setFloatingValign:function(a){this.set("floatingValign",a,!0)},setFloatingAlignOffset:function(a){this.set("floatingAlignOffset",a,!0)},setFloatingValignOffset:function(a){this.set("floatingValignOffset",a,!0)},setKeepInWindow:function(a){this.set("keepInWindow",a,!0)},setKeepInWindowBorder:function(a){this.set("keepInWindowBorder",a,!0)},createFloatingPanel:function(a,g,k){a=a??this.floatingPanelId;k=k??{};k.panelId=a;return e[a]=new g(null,
k)},getFloatingPanel:function(a){return e[a??this.floatingPanelId]},toggleFloatingPanel:function(a){this.getFloatingPanel(a??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(a):this.showFloatingPanel(a)},showFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.show(this),this.setLastFloatingPanelShown(a)},hideFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(a){this.callSuper?.()},
notifyPanelHidden:function(a){this.callSuper?.()},getFloatingAlignForPanel:function(a){return this.floatingAlign},getFloatingValignForPanel:function(a){return this.floatingValign},getFloatingAlignOffsetForPanel:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(a){return this.floatingValignOffset},getNextFocus:function(){const a=this.lastFloatingPanelShown;return a?.isShown()?a:this.callSuper?.()},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});
t.FloatingPanel=new JS.Class("FloatingPanel",t.View,{include:[t.RootView],initNode:function(a,g){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;g.visible=g.focusIndicator=!1;g.focusable=g.focusCage=!0;this.callSuper(a,g)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=
a},setWidth:function(a){const g=this.width;this.callSuper(a);this.isShown()&&g!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(a){const g=this.height;this.callSuper(a);this.isShown()&&g!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(a){var g=a.value;a=g.pageX;g=g.pageY;this.containsPoint(a,g)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(a,g)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(a){this.hideOnMouseDown&&
this.hide(a)},focus:function(a){if(this.owner&&this.isAncestorOf(v.focusedView))this.owner[(v.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(a);else{const g=this.getFirstFocusableDescendant();g===this?this.callSuper(a):g.focus(a)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(a){(a=a.value)&&!this.isAncestorOf(a)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&v.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(a){this.isShown()||(this.bringToFront(),this.updateLocation(a),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(u,"__doMouseDown","mousedown",!0),this.attachTo(v,"__doFocusChange","focused"))},hide:function(a){this.isShown()&&(this.detachFromDom(u,"__doMouseDown","mousedown",!0),this.detachFrom(v,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),a||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(a){this.setOwner(a);this.updateLocationX(a);this.updateLocationY(a)},updateLocationX:function(a){const g=a.getFloatingAlignForPanel(this),k=typeof g;let c;if("string"===k){c=a.getPagePosition().x+a.getFloatingAlignOffsetForPanel(this);switch(g){case "outsideRight":c+=a.width;break;case "insideRight":c+=a.width-this.width;break;case "outsideLeft":c-=this.width;break;case "insideLeft":break;default:w("Invalid align value",k,g)}a.keepInWindow&&
(a=c+this.width+(a.keepInWindowBorder||0)-l.getWidth(),0<a&&(c-=a))}else"number"===k?c=g:w("Invalid align type",k,g);this.setX(c)},updateLocationY:function(a){const g=a.getFloatingValignForPanel(this),k=typeof g;let c;if("string"===k){c=a.getPagePosition().y+a.getFloatingValignOffsetForPanel(this);switch(g){case "outsideBottom":c+=a.height;break;case "insideBottom":c+=a.height-this.height;break;case "outsideTop":c-=this.height;break;case "insideTop":break;default:w("Invalid valign value",k,g)}a.keepInWindow&&
(a=c+this.height+(a.keepInWindowBorder||0)-l.getHeight(),0<a&&(c-=a))}else"number"===k?c=g:w("Invalid valign type",k,g);this.setY(c)}})})(myt);
(t=>{const {Class:w,Module:v}=JS,u=Math,{View:l,global:e}=t,a=e.focus,g=e.keys,{LIST_KEYS:k,CODE_ESC:c}=g,h=f=>{const b=f.itemConfig??[],q=b.length,{items:n,defaultItemClass:r,fixedWidth:x}=f,B=n.length,I=0<x,z=f.getContentView(),C=z.getLayouts();let J=0;for(var M of C)M.incrementLockedCounter();l.doWhileRemovedFromDom(z,()=>{const O={listView:f};I&&(O.width=x,O.enableEllipsis=!0);for(;q>J;++J){var m=b[J];const p=m.klass??r;m=m.attrs??{};let y=n[J];y&&!y.isA(p)&&(y.destroy(),y=null);y??=n[J]=new p(z,
{...O});y&&(y.callSetters(m),y.__LAYOUT_IDX=J)}});if(I)M=x;else for(M=f.minWidth,J=0;q>J;){const O=n[J++];O.syncToDom();M=u.max(M,O.getMinimumWidth())}for(;B>J;)n[J++].destroy();n.length=q;if(!I)for(J=0;q>J;)f.updateItemWidth(n[J++],M);f.updateContentWidth(z,M);for(const O of C)O.sortSubviews((m,p)=>m.__LAYOUT_IDX-p.__LAYOUT_IDX),O.decrementLockedCounter(),O.update()},d=t.ListViewItemMixin=new v("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
t.ListView=new w("ListView",t.FloatingPanel,{initNode:function(f,b){this.items=[];this.maxHeight=-1;this.minWidth=0;b.defaultItemClass??(b.defaultItemClass=t.ListViewItem);b.overflow??(b.overflow="autoy");b.bgColor??(b.bgColor="#ccc");b.boxShadow??(b.boxShadow=t.Button.FOCUS_SHADOW);this.callSuper(f,b);h(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new t.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&h(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?u.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,b)=>{f.setWidth(b)},updateContentWidth:(f,b)=>{f.setWidth(b)}});t.ListViewAnchor=new v("ListViewAnchor",{include:[t.FloatingPanelAnchor,t.ArrowKeyActivation],initNode:function(f,
b){b.listViewClass??(b.listViewClass=t.ListView);b.listViewAttrs??(b.listViewAttrs={});b.itemConfig??(b.itemConfig=[]);b.activationKeys??(b.activationKeys=k);this.callSuper(f,b)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var b=f.height,q=this.getPagePosition().y,n=e.windowResize.getHeight()-this.getPagePosition().y-this.height;f=q-b;b=n-b;q=q>n;n=this.floatingValign;
switch(n){case "outsideBottom":0>b&&q&&(n="outsideTop");break;case "insideBottom":0>b&&q&&(n="insideTop");break;case "outsideTop":0>f&&!q&&(n="outsideBottom");break;case "insideTop":0>f&&!q&&(n="insideBottom")}return n},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const b=this.getFloatingPanel(f);b&&(b.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,b){f===c?this.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,b){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==c)switch(this.callSuper(f),f){case g.CODE_ARROW_LEFT:case g.CODE_ARROW_UP:this.focusToLastItem();break;case g.CODE_ARROW_RIGHT:case g.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,b,q){(f=this.getEntryByValue(f))&&(f.attrs[b]=q);return f},getEntryByValue:function(f){return this.itemConfig.find(b=>b?.attrs&&b.attrs.value===f)}});t.ListViewItem=new w("ListViewItem",t.TextButton,{include:[d,t.ArrowKeyActivation],initNode:function(f,b){b.activeColor??(b.activeColor="#bbb");b.hoverColor??(b.hoverColor="#fff");b.readyColor??(b.readyColor="#eee");b.paddingLeft??
(b.paddingLeft=8);b.paddingRight??(b.paddingRight=8);b.textAlign??(b.textAlign="left");b.roundedCorners??(b.roundedCorners=0);b.activationKeys??(b.activationKeys=k);b.focusIndicator??(b.focusIndicator=!0);const q=this.__enableEllipsis=b.enableEllipsis;delete b.enableEllipsis;this.callSuper(f,b);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return u.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,b){f===c?this.listView.owner.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){a.prev()},doKeyArrowRightOrDown:function(f,b){a.next()}});t.ListViewSeparator=new w("ListViewSeparator",l,{include:[d],initNode:function(f,b){b.height??(b.height=1);b.bgColor??(b.bgColor="#666");this.callSuper(f,b)}})})(myt);
(t=>{const w=t.AccessorSupport,v=w.generateSetterName,u={},l=t.BAG=new JS.Class("BAG",{include:[w,t.Destructible,t.Observable],extend:{getGroup:(e,a)=>{if(e&&a){let g;return(g=u[e]??(u[e]={}))[a]??(g[a]=new l(e,a))}},removeGroup:(e,a)=>{if(e&&a&&(e=u[e])){const g=e[a];g&&delete e[a];return g}}},initialize:function(e,a){this.__nodes=[];this.trueNode=null;this.attrName=e;this.groupId=a},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&l.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(e){this.set("groupId",e,!0)},setAttrName:function(e){this.set("attrName",e,!0)},setTrueNode:function(e){this.set("trueNode",e,!0)},getNodes:function(){return this.__nodes},register:function(e){e&&!this.isRegistered(e)&&(this.__nodes.push(e),e[this.attrName]&&this.setTrue(e))},unregister:function(e){if(e){const a=this.__nodes,g=a.indexOf(e);-1<g&&a.splice(g,1);this.trueNode===e&&this.setTrueNode(null);0===a.length&&
this.destroy()}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){const a=this.attrName,g=v(a),k=this.__nodes;let c=k.length;for(this.setTrueNode(e);c;){const h=k[--c];if(e===h){if(!h[a])h[g](!0)}else if(h[a])h[g](!1)}}},setFalse:function(e){e&&this.trueNode===e&&(e[v(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(e){return this.__nodes.includes(e)}});t.BAGMembership=new JS.Module("BAGMembership",{initNode:function(e,a){this.__bags=[];this.callSuper(e,a)},destroy:function(){const e=
this.__bags;let a=e.length;for(;a;){const g=e[--a];this.removeFromBAG(g.attrName,g.groupId)}this.callSuper()},isRegisteredWithBAG:function(e){return this.__bags.includes(e)},getBAG:(e,a)=>l.getGroup(e,a),addToBAG:function(e,a){a=this.getBAG(e,a);this.isRegisteredWithBAG(a)||(this.__bags.push(a),a.register(this),this.isAttachedTo(this,"__updateForBAG",e)||this.attachTo(this,"__updateForBAG",e))},removeFromBAG:function(e,a){a=this.getBAG(e,a);if(this.isRegisteredWithBAG(a)){const g=this.__bags;let k=
g.length,c=!0;for(;k;){const h=g[--k];h===a?(g.splice(k,1),a.unregister(this)):h.attrName===e&&(c=!1)}c&&this.detachFrom(this,"__updateForBAG",e)}},__updateForBAG:function(e){for(const a of this.__bags)if(a.attrName===e.type)a[e.value?"setTrue":"setFalse"](this)}})})(myt);
(t=>{const w=v=>{const u=v.label||"";v.setText('<i class="far fa-'+(!0===v.selected?"dot-":"")+'circle"></i>'+(0<u.length?" ":"")+u)};t.Radio=new JS.Class("Radio",t.Text,{include:[t.SimpleButtonStyle,t.BAGMembership],initNode:function(v,u){u.selected??(u.selected=!1);u.groupId??(u.groupId=t.generateGuid());u.focusIndicator??(u.focusIndicator=!1);u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor="inherit");u.readyColor??(u.readyColor="inherit");const l=u.value;delete u.value;this.callSuper(v,
u);this.setValue(l);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);t.FontAwesome.registerForNotification(this);w(this)},setOptionValue:function(v){this.set("optionValue",v,!0)},setValue:function(v){if(this.inited){const u=this.getBAG("selected",this.groupId);if(u){const l=u.getNodes();let e=l.length;for(;e;){const a=l[--e];if(a.optionValue===v){u.setTrue(a);break}}}}},getValue:function(){var v=this.getBAG("selected",this.groupId);return(v=v?v.trueNode:null)?v.optionValue:null},
setSelected:function(v){this.selected!==v&&(this.selected=v,this.inited&&(this.fireEvent("selected",v),w(this)))},setGroupId:function(v){if(this.groupId!==v){const u=this.groupId;this.groupId=v;u&&this.removeFromBAG("selected",u);v&&this.addToBAG("selected",v);this.inited&&this.fireEvent("groupId",v)}},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&w(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(v,u=1){this.setOpacity(u);this.setTextColor(v)}})})(myt);
(t=>{const w=JS.Module,v=t.global.keys,u=t.Selectable=new w("Selectable",{setSelected:function(e){e=this.valueFromEvent(e);this.selected!==e&&(this.selected=e,this.inited&&this.fireEvent?.("selected",e))},isSelected:function(){return!!this.selected},canSelect:e=>!0,canDeselect:e=>!0}),l=t.SelectionManager=new w("SelectionManager",{extend:{isAddMode:()=>v.isShiftKeyDown(),isToggleMode:()=>v.isAcceleratorKeyDown()},initNode:function(e,a){this.__selected={};this.__lastSelectedItem=null;a.selectedCount=
0;a.itemSelectionId??(a.itemSelectionId="id");a.maxSelected??(a.maxSelected=-1);this.callSuper(e,a)},setItemSelectionId:function(e){this.itemSelectionId=e},setMaxSelected:function(e){this.maxSelected=e},setSelectedCount:function(e){this.selectedCount!==e&&(this.selectedCount=e,this.inited&&this.fireEvent("selectedCount",e))},isAddMode:()=>l.isAddMode(),isToggleMode:()=>l.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(e){e&&!this.isSelectedItem(e)&&this.canSelectItem(e)&&
(e.setSelected(!0),this.__selected[e[this.itemSelectionId]]=e,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=e,this.doSelected(e),this.fireEvent("itemSelected",e))},doSelected:e=>{},selectById:function(e){this.select(this.getSelectableItem(e))},canSelectItem:function(e){const {maxSelected:a,selectedCount:g}=this;if(0===a)return!1;if(1===a){if(0<g&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<a&&g>=a)return!1;return e.canSelect(this)},selectAll:function(){const e=
this.getSelectableItems();let a=e.length;for(;a;)this.select(e[--a])},deselect:function(e){this.isSelectedItem(e)&&this.canDeselectItem(e)&&(e.setSelected(!1),delete this.__selected[e[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===e&&(this.__lastSelectedItem=null),this.doDeselected(e),this.fireEvent("itemDeselected",e))},doDeselected:e=>{},deselectById:function(e){this.deselect(this.getSelectableItem(e))},canDeselectItem:function(e){return e.canDeselect(this)},
deselectAll:function(){const e=this.__selected;for(const a in e)this.deselect(e[a])},isSelectedItem:e=>e?e.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const e=[],a=this.getSubviews();let g=a.length;for(;g;){const k=a[--g];k.isA(u)&&e.push(k)}return e},getSelectableItems:function(){const e=this.getManagedItems();let a=e.length;for(;a;)e[--a].canSelect(this)||e.splice(a,1);return e},getSelectableItem:function(e){const a=
this.getSelectableItems(),g=this.itemSelectionId;let k=a.length;for(;k;){const c=a[--k];if(c[g]===e)return c}}})})(myt);
(t=>{const w=JS.Class,{View:v,SizeToParent:u}=t,l=t.TabSlider=new w("TabSlider",v,{include:[t.Selectable,t.Disableable,u],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(a,g){const k=this;let c;g.defaultPlacement="wrapper.container";g.percentOfParentWidth=100;g.expansionState="collapsed";g.tabId??(g.tabId=t.generateGuid());g.tabContainer??(g.tabContainer=a);g.selected??(g.selected=!1);g.buttonClass??(g.buttonClass=
t.SimpleButton);g.zIndex??(g.zIndex=0);g.buttonHeight??(g.buttonHeight=30);g.fillColorSelected??(g.fillColorSelected="#666");g.fillColorHover??(g.fillColorHover="#eee");g.fillColorActive??(g.fillColorActive="#ccc");g.fillColorReady??(g.fillColorReady="#fff");g.minContainerHeight??(g.minContainerHeight=100);g.layoutPaddingY??(g.layoutPaddingY=0);g.selected&&(c=!0,delete g.selected);k.callSuper(a,g);k.button=new k.buttonClass(k,{ignorePlacement:!0,zIndex:1,height:k.buttonHeight,focusIndicator:!0,groupId:k.parent.parent.groupId,
percentOfParentWidth:100,hoverColor:k.fillColorHover,activeColor:k.fillColorActive,readyColor:k.fillColorReady},[u,{doActivated:()=>{const h=k.tabContainer;k.isSelected()&&1!==h.maxSelected?h.deselect(k):h.select(k)},updateUI:function(){this.callSuper();k.selected&&-1!==k.tabContainer.maxSelected&&this.setBgColor(k.fillColorSelected);k.notifyButtonRedraw()}}]);a=k.wrapper=new v(k,{ignorePlacement:!0,y:k.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[u,{setHeight:function(h){this.callSuper(Math.round(h))},
setWidth:function(h){this.callSuper(h);this.inited&&this.container.setWidth(h)}}]);k._wrapperLayout=new t.SizeToChildren(a.container=new v(a),{axis:"y",paddingY:k.layoutPaddingY});k.constrain("__updateHeight",[a,"y",a,"height"]);c&&k.tabContainer.select(k);!0===g.disabled&&k.setDisabled(!0);k.setHeight(k.getCollapsedHeight())},setSelected:function(a){this.callSuper(a);this.button?.updateUI()},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setLayoutPaddingY:function(a){this.layoutPaddingY=
a;this.inited&&this._wrapperLayout.setPaddingY(a)},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){this.buttonHeight!==a&&(this.buttonHeight=a,this.button&&(this.button.setHeight(a),this.wrapper.setY(a)))},
setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;this.inited&&this.fireEvent("expansionState",a);const g=this.wrapper;g&&("expanded"===a?(g.setMaskFocus(!1),g.setOverflow("auto")):"expanding"===a?g.setVisible(!0):"collapsed"===a?g.setVisible(!1):"collapsing"===a&&(g.setMaskFocus(!0),g.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},
expand:function(a){const g=this,k=g.wrapper;a-=g.getCollapsedHeight();g.setExpansionState("expanding");k.stopActiveAnimators();if(k.height!==a){const c=g.tabContainer.duration;1===c?(k.setHeight(a),g.setExpansionState("expanded")):k.animate({attribute:"height",to:a,duration:c}).next(h=>{g.setExpansionState("expanded")})}else g.setExpansionState("expanded")},collapse:function(){const a=this,g=a.wrapper;a.setExpansionState("collapsing");g.stopActiveAnimators();if(0!==g.height){const k=a.tabContainer.duration;
1===k?(g.setHeight(0),a.setExpansionState("collapsed")):g.animate({attribute:"height",to:0,duration:k}).next(c=>{a.setExpansionState("collapsed")})}else a.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});t.TextTabSlider=new w("TextTabSlider",
l,{initNode:function(a,g){g.labelTextColorChecked??(g.labelTextColorChecked="#fff");g.labelTextColor??(g.labelTextColor="#333");this.callSuper(a,g);this.button.label=new t.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){this.text!==a&&(this.text=a,this.button?.label?.setText(a))},
notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const e=t.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[t.SelectionManager],extend:{SPACING:1},initNode:function(a,g){const k=this;k._tabSliders=[];g.defaultPlacement="container";g.spacing??(g.spacing=e.SPACING);g.overflow??(g.overflow="autoy");g.itemSelectionId??
(g.itemSelectionId="tabId");g.maxSelected??(g.maxSelected=1);g.duration??(g.duration=500);k.updateLayout=t.debounce(k.updateLayout);k.callSuper(a,g);a=k.container=new v(k,{ignorePlacement:!0,percentOfParentWidth:100},[u,{subnodeAdded:function(c){this.callSuper(c);c instanceof l&&(k._tabSliders.push(c),k.attachTo(c,"updateLayout","selected"))},subnodeRemoved:function(c){if(c instanceof l){const h=k._tabSliders,d=h.indexOf(c);-1<d&&(k.detachFrom(c,"updateLayout","selected"),h.splice(d,1))}this.callSuper(c)}}]);
a.layout=new t.SpacedLayout(a,{axis:"y",spacing:k.spacing,collapseParent:!0});k.attachTo(k,"updateLayout","height")},setSpacing:function(a){this.spacing!==a&&(this.spacing=a,this.layout?.setSpacing(a))},setDuration:function(a){this.duration=a},updateLayout:function(a,g){a=this._tabSliders;for(var k=a.length,c=k,h=0,d=0,f=0;c;){var b=a[--c];b.visible&&(++f,b.selected?(h+=b.getMinimumExpandedHeight(),d+=b.getPreferredExpandedHeight()):(b=b.getCollapsedHeight(),h+=b,d+=b))}c=this.container.layout;f=
c.inset+c.outset+c.spacing*(f-1);d+=f;c=this.height;h=h+f>c;f=d>c;b=this.duration;d-=c;0<g&&this.setDuration(g);for(c=k;c;)if(k=a[--c],k.visible)if(k.selected){let q;if(h)q=k.getMinimumExpandedHeight();else if(f){const n=k.getPreferredExpandedHeight(),r=k.getMinimumExpandedHeight();q=n-d;r>q?(d-=n-r,q=r):d=0}else q=k.getPreferredExpandedHeight();k.expand(q)}else k.collapse();0<g&&this.setDuration(b)}})})(myt);
(t=>{const w=l=>{const e=[];switch(l.tabContainer.location){case "top":e.push("TopLeft","TopRight");break;case "bottom":e.push("BottomLeft","BottomRight");break;case "left":e.push("TopLeft","BottomLeft");break;case "right":e.push("TopRight","BottomRight")}for(const a of e)l["setRounded"+a+"Corner"](l.cornerRadius||0)},v=t.Tab=new JS.Class("Tab",t.SimpleTextButton,{include:[t.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(l,e){e.tabId??(e.tabId=t.generateGuid());e.tabContainer??(e.tabContainer=
l);let a;e.selected&&(a=!0,delete e.selected);e.inset??(e.inset=v.INSET);e.outset??(e.outset=v.OUTSET);e.selectedColor??(e.selectedColor="#fff");e.hoverColor??(e.hoverColor="#eee");e.activeColor??(e.activeColor="#aaa");e.readyColor??(e.readyColor="#ccc");e.labelTextSelectedColor??(e.labelTextSelectedColor="#333");e.height??(e.height=24);e.focusIndicator??(e.focusIndicator=!1);e.cornerRadius??(e.cornerRadius=6);this.callSuper(l,e);a&&this.tabContainer.select(this);w(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(l){this.tabId=l},setTabContainer:function(l){this.tabContainer=l},setSelectedColor:function(l){this.selectedColor=l},setLabelTextColor:function(l){this.labelTextColor=l},setCornerRadius:function(l){this.cornerRadius=l;this.inited&&w(this)},setLabelTextSelectedColor:function(l){this.labelTextSelectedColor=l;this.inited&&this.selected&&this.textView.setTextColor(l)},setSelected:function(l){this.callSuper(l);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),u=t.TabContainer=new JS.Module("TabContainer",{include:[t.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(l,e){this.__tabs=[];e.spacing??(e.spacing=u.SPACING);e.inset??(e.inset=u.INSET);e.location??(e.location="top");e.itemSelectionId??
(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);const a=e.collapse??!0;delete e.collapse;this.callSuper(l,e);this.layout=new t.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:a})},setLocation:function(l){this.location=l},setSpacing:function(l){this.spacing!==l&&(this.spacing=l,this.layout?.setSpacing(l))},setInset:function(l){this.inset!==l&&(this.inset=l,this.layout?.setInset(l))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(l){this.callSuper(l);if(l.isA(v))switch(this.__tabs.push(l),this.location){case "top":l.setValign("bottom");break;case "bottom":l.setValign("top");break;case "left":l.setAlign("right");break;case "right":l.setAlign("left")}},subnodeRemoved:function(l){if(l.isA(v)){const e=this.__tabs,a=e.indexOf(l);-1<a&&e.splice(a,1)}this.callSuper(l)}})})(myt);
(t=>{const w=JS.Class,v=Math.min,u=Array.isArray,{SizeToDom:l,View:e,Disableable:a,KeyObservable:g,Button:{FOCUS_SHADOW:k},global:{keys:c}}=t,h=(r,x,B)=>{r[B]!==x&&(r[B]=x,r.getIDS()[B]=x+"px",r.inited&&(r.fireEvent(B,x),r.sizeViewToDom()))},d=(r,x,B)=>{r[x]!==B&&(r.getIDE()[x]=r[x]=B,r.inited&&r.fireEvent(x,B))},f=t.NativeInputWrapper=new w("NativeInputWrapper",e,{include:[a,t.InputObservable],initNode:function(r,x){x.tagName??(x.tagName="input");x.focusable??(x.focusable=!0);this.callSuper(r,x);
this.addDomClass("mytNativeInput")},createOurDomElement:function(r){r=this.callSuper(r);this.inputType&&((u(r)?r[1]:r).type=this.inputType);return r},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){this.value!==r&&(this.value=r,this.setDomValue(r),this.inited&&this.fireEvent("value",r))},getDomValue:function(){return this.getIDE().value},setDomValue:function(r){const x=this.getIDE();x.value!==r&&(x.value=r)}}),b=t.InputSelectOption=new w("InputSelectOption",
e,{include:[a,t.Selectable],createOurDomElement:r=>document.createElement("option"),setSelected:function(r){r=this.valueFromEvent(r);const x=this.getIDE();x.selected!==r&&(x.selected=r)},setDisabled:function(r){this.disabled!==r&&(this.getIDE().disabled=r,this.callSuper(r))},setValue:function(r){d(this,"value",r)},setLabel:function(r){this.label!==r&&(this.getIDE().textContent=this.label=r,this.inited&&this.fireEvent("label",r))},isSelected:function(){return this.getIDE().selected},canSelect:function(r){return!this.disabled&&
!this.getIDE().selected&&this.parent===r},canDeselect:function(r){return!this.disabled&&this.getIDE().selected&&this.parent===r}}),q=t.BaseInputText=new w("BaseInputText",f,{include:[t.TextSupport],initNode:function(r,x){x.bgColor??(x.bgColor="transparent");x.spellcheck??(x.spellcheck=!1);this.callSuper(r,x);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(r){this.callSuper(r);this.setValue(r)},
setSpellcheck:function(r){d(this,"spellcheck",r)},setMaxLength:function(r){d(this,"maxLength",null==r||0>r?void 0:r)},setAllowedChars:function(r){this.allowedChars=r},setPlaceholder:function(r){d(this,"placeholder",r)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(r){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(r){const x=
r.value,B=this.allowedChars;B&&!B.includes(g.getKeyFromEvent(r))&&x.preventDefault();this.filterInputPress(x)},filterInput:r=>r,filterInputPress:r=>{},__syncToDom:function(r){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const r=document.selection.createRange();r.moveStart("character",-this.getDomValue().length);return r.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(r,x){if(null==x||r===x){if(this.getCaretPosition()===r)return;
x=r}var B=this.getIDE();B.setSelectionRange?B.setSelectionRange(r,x):B.createTextRange&&(B=B.createTextRange(),B.collapse(!0),B.moveEnd("character",x),B.moveStart("character",r),B.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const r=this.getIDE();return{start:r.selectionStart,startElem:r,end:r.selectionEnd,endElem:r}},setSelection:function(r){r&&
this.setCaretPosition(r.start,r.end)},saveSelection:function(r){this._selRange=r||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=t.InputText=new w("InputText",q,{include:[t.SizeHeightToDom],initNode:function(r,x){this.inputType=!0===x.password?"password":"text";this.callSuper(r,x);this.setCaretToEnd()},setPassword:function(r){this.set("password",r,!0);this.inited&&(this.getIDE().type=r?"password":"text")}});t.InputTextMouseFixMixin=new JS.Module("InputTextMouseFixMixin",
{initNode:function(r,x){this.callSuper(r,x);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},createDomHandler:function(r,x,B){return"mousedown"===B||"mouseup"===B?this.createStandardDomHandler(r,x,B,t.MouseObservable,!1):this.callSuper(r,x,B)},doMouseDown:r=>{},doMouseUp:r=>{}});t.EditableText=new w("EditableText",q,{include:[l],initNode:function(r,x){x.tagName??(x.tagName="div");x.inputType=null;x.whiteSpace??(x.whiteSpace="pre");x.contentEditable??(x.contentEditable=
!0);this.callSuper(r,x);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(r){h(this,r,"minWidth")},setMinHeight:function(r){h(this,r,"minHeight")},setPadding:function(r){this.setPaddingTop(r);this.setPaddingRight(r);this.setPaddingBottom(r);this.setPaddingLeft(r)},setPaddingTop:function(r){h(this,r,"paddingTop")},setPaddingRight:function(r){h(this,r,"paddingRight")},
setPaddingBottom:function(r){h(this,r,"paddingBottom")},setPaddingLeft:function(r){h(this,r,"paddingLeft")},setContentEditable:function(r){d(this,"contentEditable",r)},filterInputPress:function(r){const x=this.maxLength;0<=x&&this.getCharacterCount()===x&&r.preventDefault();this.callSuper(r)},getDomValue:function(){return this.getIDE().innerHTML},setDomValue:function(r){const x=this.getIDE();x.innerHTML!==r&&(x.innerHTML=r,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(r){g.isEnterKeyEvent(r)&&
(r.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(r){this.callSuper(r);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(r,x){if(null==x||r===
x){if(this.getCaretPosition()===r)return;x=r}this.saveSelection({start:r,startElem:this.getIDE().firstChild,end:x,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(r){this.saveSelection();return!0},getSelection:function(){let r;if(window.getSelection){const x=window.getSelection();if(0<x.rangeCount){if(x.extentNode===this.getIDE())return;r=x.getRangeAt(0)}}else document.selection&&(r=document.selection.createRange());return{start:r?
r.startOffset:0,startElem:r?r.startContainer:this.getIDE().firstChild,end:r?r.endOffset:0,endElem:r?r.endContainer:this.getIDE().firstChild}},setSelection:function(r){if(r){const {startElem:x,endElem:B}=r;if(x&&x.parentNode&&B&&B.parentNode){const I=document.createRange();I.setStart(x,v(r.start,x.length));I.setEnd(B,v(r.end,B.length));window.getSelection?(r=window.getSelection(),0<r.rangeCount&&r.removeAllRanges(),r.addRange(I)):document.selection&&I.select()}}}});t.InputTextArea=new w("InputTextArea",
q,{initNode:function(r,x){x.tagName??(x.tagName="textarea");x.inputType=null;x.resize??(x.resize="none");x.wrap??(x.wrap="soft");this.callSuper(r,x)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(r){const x=this;x.resize!==r&&(r=x.resize=x.getIDS().resize=r||"none",x.inited&&x.fireEvent("resize",r),"none"!==r&&(x.__resizeObserver??(x.__resizeObserver=new ResizeObserver(()=>{x.doResize()}))).observe(x.getIDE()))},setWrap:function(r){d(this,
"wrap",r)},doResize:function(){const r=this.resize;"both"!==r&&"horizontal"!==r||l.sizeWidth(this);"both"!==r&&"vertical"!==r||l.sizeHeight(this)}});t.ComboBox=new w("ComboBox",n,{include:[t.Activateable,t.KeyActivation,t.ListViewAnchor],initNode:function(r,x){this.filterItems=!0;x.activationKeys??(x.activationKeys=[c.CODE_ENTER,c.CODE_ESC,c.CODE_ARROW_UP,c.CODE_ARROW_DOWN]);x.bgColor??(x.bgColor="#fff");x.borderWidth??(x.borderWidth=1);x.borderStyle??(x.borderStyle="solid");x.floatingAlignOffset??
(x.floatingAlignOffset=x.borderWidth);x.fullItemConfig??(x.fullItemConfig=[]);x.listViewAttrs={...x.listViewAttrs,maxHeight:x.listViewAttrs?.maxHeight??99};this.callSuper(r,x)},setFullItemConfig:function(r){this.fullItemConfig=r},setFilterItems:function(r){this.filterItems=r},__syncToDom:function(r){const x=this.value;this.callSuper(r);x!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(r){const x=this.getFloatingPanel(r);if(x){let I;if(this.filterItems){I=[];var B=this.value;B=null==
B?"":(""+B).toLowerCase();const z=this.fullItemConfig,C=z.length;for(let J=0;C>J;){const M=z[J++],O=M.attrs.text.toLowerCase(),m=O.indexOf(B);0===m?O!==B&&I.push(M):0<m&&I.push(M)}}else I=this.fullItemConfig;0<I.length?(x.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(I),this.callSuper(r)):this.hideFloatingPanel(r)}},doItemActivated:function(r){this.setValue(null==r.value?r.text:r.value);this.callSuper(r)},doActivated:function(){this.toggleFloatingPanel()}});t.InputSelect=new w("InputSelect",
f,{include:[l],initNode:function(r,x){x.tagName??(x.tagName="select");x.inputType=null;x.multiple??(x.multiple=!1);x.size??(x.size=x.multiple?4:1);this.callSuper(r,x);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(r){d(this,"multiple",r)},setSize:function(r){d(this,"size",r)},setOptions:function(r){this.destroyAllOptions();if(u(r))for(const x of r)this.addOption(x)},getOptions:function(){return this.getSubviews().slice()},setValue:function(r){u(r)&&t.areArraysEqual(r,
this.value)||this.value===r||(this.value=r,this.inited&&this.fireEvent("value",r))},subviewAdded:function(r){r instanceof b||(t.dumpStack("Subview unsupported. Destroying it"),r.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(k)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(r=>r.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(r=>
r.value)},getOptionForValue:function(r){return this.getOptions().find(x=>x.value===r)},addOption:function(r){return new b(this,r)},destroyAllOptions:function(){for(const r of this.getOptions())r.destroy()},destroyOptionWithValue:function(r){if(r=this.getOptionForValue(r))if(r.destroy(),r.destroyed)return!0;return!1},deselectAll:function(){let r=!1;for(const x of this.getOptions())x.isSelected()&&(x.setSelected(!1),r=!0);r&&this.__doChanged()},selectValues:function(r){u(r)||(r=[r]);for(const x of r)this.selectValue(x)},
selectValue:function(r){this.select(this.getOptionForValue(r))},select:function(r){r?.canSelect(this)&&(r.setSelected(!0),this.__syncToDom())},deselectValue:function(r){this.deselect(this.getOptionForValue(r))},deselect:function(r){r?.canDeselect(this)&&(r.setSelected(!1),this.__syncToDom())},__doChanged:function(r){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(t=>{const w=JS.Module,v=Math.round;var u=t.ValueComponent=new w("ValueComponent",{initNode:function(e,a){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(e,a)},setValueFilter:function(e){this.valueFilter=e;this.inited&&e&&this.setValue(this.value)},setValue:function(e){this.valueFilter&&(e=this.valueFilter(e));this.value!==e&&(this.value=e,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(e,a){const g=this.valueFilter;
this.setValueFilter(g?"last"===a?k=>e(g(k)):k=>g(e(k)):e)}});const l=t.RangeComponent=new w("RangeComponent",{include:[u],setLowerValue:function(e){this.setValue({lower:e,upper:this.value&&void 0!==this.value.upper?this.value.upper:e})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(e){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:e,upper:e})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(e){if(e){var a=
this.value;const c=a?a.lower:void 0;a=a?a.upper:void 0;this.valueFilter&&(e=this.valueFilter(e));if(e.lower!==c||e.upper!==a){var g;(g=e).lower??(g.lower=e.upper);var k;(k=e).upper??(k.upper=e.lower);void 0!==e.lower&&void 0!==e.upper&&e.lower>e.upper&&(g=e.lower,e.lower=e.upper,e.upper=g);this.value=e;this.inited&&(this.fireEvent("value",this.getValue()),e.lower!==c&&this.fireEvent("lowerValue",e.lower),e.upper!==a&&this.fireEvent("upperValue",e.upper))}}else this.callSuper(e)},getValueCopy:function(){const e=
this.value;return{lower:e.lower,upper:e.upper}}});u=t.BoundedValueComponent=new w("BoundedValueComponent",{include:[u],initNode:function(e,a){const g=this;g.appendToEarlyAttrs("snapToInt","minValue","maxValue");a.snapToInt??(a.snapToInt=!0);a.valueFilter||(a.valueFilter=k=>{var c=g.maxValue;if(null!=c&&k>c)return c;c=g.minValue;return null!=c&&k<c?c:k});g.callSuper(e,a)},setSnapToInt:function(e){this.snapToInt!==e&&(this.snapToInt=e,this.inited&&(this.fireEvent("snapToInt",e),e&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.minValue!==e){const a=this.maxValue;null!=a&&e>a&&(e=a);this.minValue!==e&&(this.minValue=e,this.inited&&(this.fireEvent("minValue",e),this.setValue(this.value)))}},setMaxValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.maxValue!==e){const a=this.minValue;null!=a&&e<a&&(e=a);this.maxValue!==e&&(this.maxValue=e,this.inited&&(this.fireEvent("maxValue",e),this.setValue(this.value)))}},
setValue:function(e){this.callSuper(this.snapToInt&&null!=e&&!isNaN(e)?v(e):e)}});t.BoundedRangeComponent=new w("BoundedRangeComponent",{include:[u,l],initNode:function(e,a){const g=this;a.valueFilter||(a.valueFilter=k=>{if(k){const c=g.maxValue,h=g.minValue;null!=c&&k.upper>c&&(k.upper=c);null!=h&&k.lower<h&&(k.lower=h)}return k});g.callSuper(e,a)},setValue:function(e){this.snapToInt&&null!=e&&(null==e.lower||isNaN(e.lower)||(e.lower=v(e.lower)),null==e.upper||isNaN(e.upper)||(e.upper=v(e.upper)));
this.callSuper(e)}})})(myt);
(t=>{const w=v=>{const u=v.label??"";v.setText('<i class="'+("solid"===v.checkboxStyle?"fas":"far")+" fa-"+(v.isChecked()?"check-":"")+'square"></i>'+(0<u.length?" "+u:""))};t.Checkbox=new JS.Class("Checkbox",t.Text,{include:[t.SimpleButtonStyle,t.ValueComponent],initNode:function(v,u){this.appendToEarlyAttrs("userUnselectable");u.value??(u.value=!1);u.focusIndicator??(u.focusIndicator=!1);u.checkboxStyle??(u.checkboxStyle="outline");u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor=
"inherit");u.readyColor??(u.readyColor="inherit");this.callSuper(v,u);t.FontAwesome.registerForNotification(this);w(this)},setValue:function(v){this.value!==v&&(this.callSuper(v),this.inited&&w(this))},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&w(this))},setCheckboxStyle:function(v){this.checkboxStyle!==v&&(this.set("checkboxStyle",v,!0),this.inited&&w(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(v,
u=1){this.setOpacity(u);this.setTextColor(v)}})})(myt);
(t=>{let w;const {Class:v,Module:u}=JS,l=console.warn,{KeyObservable:e,UpdateableUI:a,dumpStack:g,global:k}=t,c=k.focus,h=k.keys,d={},f=(m,p)=>{if(m){const y=m.id;m.id?p(y):g("No ID")}else g("No processor")},b=m=>{f(m,p=>{d[p]=m})},q=m=>{const p=t.BAG.getGroup("selected",m.groupId);if(p){const y=p.getNodes();m=m.value;let A=y.length;for(;A;){const E=y[--A];if(E.optionValue===m){p.setTrue(E);break}}}},n=m=>{if(m.groupId){const p=t.BAG.getGroup("selected",m.groupId);p&&m.syncTo(p,"__syncValue","trueNode")}},
r=(m,p)=>{const y=[],A=m.__v;if(A)for(const E of A)p=E.isFormValid(m,null,y)&&p;m.setErrorMessages(y);m.setIsValid(p);return p},x=(m,p,y)=>{if(m=m.__vp)for(const A of m)A[y]&&(p=A.process(p));return p},B=t.ValueProcessor=new v("ValueProcessor",{initialize:function(m,p,y,A){this.id=m;this.runForDefault=!!p;this.runForRollback=!!y;this.runForCurrent=!!A},process:m=>m}),I=t.ToNumberValueProcessor=new v("ToNumberValueProcessor",B,{process:m=>{if(null==m||""===m||"-"===m)return m;const p=Number(m);return isNaN(p)?
m:p}}),z=t.TrimValueProcessor=new v("TrimValueProcessor",B,{initialize:function(m,p,y,A,E){this.callSuper(m,p,y,A);this.trim=E},process:function(m){m+="";switch(this.trim){case "start":case "left":return m.trimStart();case "end":case "right":return m.trimEnd();default:return m.trim()}}}),C=t.UndefinedValueProcessor=new v("UndefinedValueProcessor",B,{initialize:function(m,p,y,A,E){this.callSuper(m,p,y,A);this.defaultValue=E},process:function(m){return void 0===m?this.defaultValue:m}}),J=t.Form=new u("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(m,p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(m,p);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(m){this.set("errorMessages",m,!0)},getFullId:function(){const m=[this.id];let p=this.form;for(;p&&p.id;)m.unshift(p.id),
p=p.form;return m.join(".")},setId:function(m){if(this.id!==m){const p=this.id;this.id=m;(m=this.form)&&this.inited&&(m.removeSubForm(p),m.addSubForm(this))}},setForm:function(m){if(this.form!==m){const p=this.form;this.form=m;p?.removeSubForm(this.id);this.inited&&m?.addSubForm(this)}},setIsValid:function(m){this.isValid=m;this.inited&&this.fireEvent("isValid",m);const p=this.form;p&&!this._lockCascade&&(m?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(m){if(this.isChanged!==
m){this.isChanged=m;this.inited&&this.fireEvent("isChanged",m);const p=this.form;p&&!this._lockCascade&&(m?p.notifySubFormChanged():p.verifyChangedState(this))}},setValidators:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=k.validators.getValidator(y),m[p]||m.splice(p,1))}this.__v=m},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const m={},p=this.__sf;for(const y in p)m[y]=p[y].getValue();return m},setValue:function(m){this.callSuper?.(m);
if("object"===typeof m&&!this.isA(M))for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setValue(m[p]):l("ID in setValue for missing subform",p)}this.form?.notifyValueChanged(this);return m},getDefaultValue:function(){const m={};let p=this.__sf;for(const y in p)m[y]=p[y].getDefaultValue();return m},setDefaultValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setDefaultValue(m[p]):l("ID in setDefaultValue for missing subform",p)}return m},getRollbackValue:function(){const m=
{},p=this.__sf;for(const y in p)m[y]=p[y].getRollbackValue();return m},setRollbackValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setRollbackValue(m[p]):l("ID in setRollbackValue for missing subform",p)}return m},addAccelerator:function(m,p){this.__acc[m]=p},removeAccelerator:function(m){delete this.__acc[m]},invokeAccelerator:function(m,p){this.__acc[m]?.call(this,p??null)},addValidator:function(m){m&&this.__v.push(m)},removeValidator:function(m){if(m){const p=
this.__v;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(m){const p=m.id;null!=this.getSubForm(p)?l("ID in use for subform, add aborted",p,m):(m.setForm(this),this.__sf[p]=m,m.isChanged&&this.notifySubFormChanged(),m.isValid||this.notifySubFormInvalid())},removeSubForm:function(m){const p=this.getSubForm(m);p&&(p.setForm(null),delete this.__sf[m],this.verifyChangedState(),this.verifyValidState());
return p},getSubForm:function(m){return this.__sf[m]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(m){m&&this.doValidation();const p=[];(function E(A){if(A.isA(M))A.isValid||p.push(A.getFullId());else{A=A.getSubForms();for(const F in A)E(A[F])}})(this);return p},getAllErrorMessages:function(){const m=this.__sf;let p=(this.errorMessages??[]).slice();for(const y in m)p.push(...m[y].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(m){const p=
this.__sf;let y=!0;for(const A in p){const E=p[A];E!==m&&(y=E.isValid&&y)}return r(this,y)},doValidation:function(){const m=this.__sf;let p=!0;for(const y in m)p=m[y].doValidation()&&p;this._lockCascade=!0;p=r(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(m){this.form?.notifyValueChanged(m)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(m){const p=this.__sf;let y=!1;for(const A in p){const E=p[A];E!==m&&(y=E.isChanged||y)}this.setIsChanged(y);
return y},setup:function(m,p,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;m??={};p??={};y??={};const A=this.__sf;for(const E in A)A[E].setup(m[E],p[E],y[E])},resetForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const m={},p=this.__sf;for(const y in p){const A=p[y];A.isChanged&&(m[y]=A.getChangedValue())}return m}}),M=t.FormElement=new u("FormElement",{include:[J],initNode:function(m,p){this.__vp=[];this.callSuper(m,p)},getValue:function(){return x(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(m){void 0===m&&(m=this.getRollbackValue());this.value!==m&&
(this.callSuper(m),this.verifyChangedState());return m},getDefaultValue:function(){return x(this,this.defaultValue,"runForDefault")},setDefaultValue:function(m){this.defaultValue!==m&&(this.defaultValue=m,this.inited&&this.fireEvent("defaultValue",m),this.verifyChangedState());return m},getRollbackValue:function(){return x(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(m){void 0===m&&(m=this.getDefaultValue());this.rollbackValue!==m&&(this.rollbackValue=m,this.inited&&this.fireEvent("rollbackValue",
m),this.verifyChangedState());return m},setValueProcessors:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=d[y],m[p]||m.splice(p,1))}this.__vp=m},addValueProcessor:function(m){this.__vp.push(m)},removeValueProcessor:function(m){if(m){const p=this.__vp;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},addSubForm:m=>{g("addSubForm unsupported on FormElement")},getSubForm:m=>{g("getSubForm unsupported on FormElement")},removeSubForm:m=>{g("removeSubForm unsupported on FormElement")},
verifyChangedState:function(m){m=this.getValue()!==this.getRollbackValue();this.setIsChanged(m);return m},setup:function(m,p,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(m);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const m=this.getDefaultValue();this.setRollbackValue(m);this.setValue(m);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),O=t.FormInputTextMixin=new u("FormInputTextMixin",{include:[M,a],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";p.bgColor??(p.bgColor="#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(m,p);this.addValueProcessor(w);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=m},setActionRequiredColor:function(m){this.actionRequiredColor=
m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":c.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(m){e.isEnterKeyEvent(m)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(m){e.isEscKeyEvent(m)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
t.RootForm=new u("RootForm",{include:[J],initNode:function(m,p){this.callSuper(m,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:m=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});t.FormCheckbox=new v("FormCheckbox",t.Checkbox,{include:[M],initNode:function(m,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(m,p)}});t.FormComboBox=new v("FormComboBox",t.ComboBox,{include:[M,a],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(m,p);this.addValueProcessor(w);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=
m},setActionRequiredColor:function(m){this.actionRequiredColor=m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":c.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(m){this._isShown=!0},notifyPanelHidden:function(m){this._isShown=!1},doActivationKeyDown:function(m,p){m!==h.CODE_ESC||this._isShown?this.callSuper(m,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(m){m!==
h.CODE_ENTER||this._isShown?this.callSuper(m):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});t.FormEditableText=new v("FormEditableText",t.EditableText,{include:[O],__hndlKeyDown:function(m){"nowrap"===this.whitespace&&this.callSuper(m)}});t.FormInputText=new v("FormInputText",
t.InputText,{include:[O]});t.FormInputTextArea=new v("FormInputTextArea",t.InputTextArea,{include:[O],__hndlKeyDown:m=>{}});t.FormInputSelect=new v("FormInputSelect",t.InputSelect,{include:[M],setValue:function(m){if(!this.__abortSetValue)return m=this.callSuper(m),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(m),this.__abortSetValue=!1,this.verifyValidState(),m}});t.FormRadioGroup=new v("FormRadioGroup",t.Node,{include:[t.ValueComponent,M],initNode:function(m,p){p.groupId??(p.groupId=
t.generateGuid());this.callSuper(m,p);void 0!==this.value&&q(this);n(this)},setValue:function(m){m=this.callSuper(m);this.inited&&q(this);return m},setGroupId:function(m){if(this.groupId!==m){if(this.groupId){const p=t.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=m;this.inited&&n(this)}},__syncValue:function(m){m=m.value;this.setValue(m?m.optionValue:null)}});t.UseOtherFieldIfEmptyValueProcessor=new v("UseOtherFieldIfEmptyValueProcessor",B,{initialize:function(m,
p,y,A,E){this.callSuper(m,p,y,A);this.otherField=E},process:function(m){return null==m||""===m?this.otherField.getValue():m}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){b(w=new C("undefToEmpty",!0,!0,!0,""));b(new I("toNumber",!0,!0,!0));b(new z("trimLeft",!0,!0,!0,"left"));b(new z("trimRight",!0,!0,!0,"right"));b(new z("trimBoth",!0,!0,!0,"both"));k.register("valueProcessors",this)},getValueProcessor:m=>d[m],register:b,unregister:m=>{f(m,p=>{d[p]&&delete d[p]})}})})(myt);
(t=>{const w=JS.Class,v=t.dumpStack,u={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},l=(c,h)=>{c[h](c,"doDragOver","dragover",!1);c[h](c,"doDragEnter","dragenter",!1);c[h](c,"doDragLeave","dragleave",!1);c[h](c,"doDrop","drop",!1)},e=t.DragDropSupport=new JS.Module("DragDropSupport",{include:[t.DragDropObservable],initNode:function(c,h){this.callSuper(c,h);this.disabled||this.setupDragListeners()},setDisabled:function(c){this.disabled!==
c&&(this.getIDE().disabled=c,this.callSuper(c),this.inited&&(c?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){l(this,"attachToDom")},teardownDragListeners:function(){l(this,"detachFromDom")},doDragOver:c=>{},doDragEnter:c=>{},doDragLeave:c=>{},doDrop:function(c){this.handleFiles(c.value.dataTransfer.files,c)},handleFiles:function(c,h){if(void 0!==c){let d=c.length;for(;d;){const f=this.filterFiles(c[--d]);f&&this.handleDroppedFile(f,h)}}else v("No File API")},
filterFiles:c=>c,handleDroppedFile:(c,h)=>{}}),a=t.FileInput=new w("FileInput",t.NativeInputWrapper,{initNode:function(c,h){this.inputType="file";this.callSuper(c,h);this.attachToDom(this,"_onChange","change")},setAccept:function(c){this.set("accept",c,!0);this.getIDE().accept=this.accept},setMaxFiles:function(c){this.maxFiles!==c&&(this.set("maxFiles",c,!0),this.getIDE().multiple=1<this.maxFiles)},clearValue:function(){this.getIDE().value=""},_onChange:c=>{}}),g=t.Uploader=new w("Uploader",t.View,
{include:[e,t.Disableable,t.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(c,h,d)=>{if(void 0!==FileReader){const f=new FileReader;f.onload=b=>{h(b.target.result)};switch(d){case "text":f.readAsText(c);break;case "arrayBuffer":f.readAsArrayBuffer(c);break;default:f.readAsDataURL(c)}}},isSameFile:(c,h)=>null!=c&&null!=h&&c.name===h.name&&c.type===h.type&&c.size===h.size,createFile:c=>{const h=(new t.URI(c)).file;return{name:h,serverPath:c,size:-1,type:u[t.getExtension(h)]}}},initNode:function(c,
h){const d=this;d.files=[];h.requestFileParam??(h.requestFileParam="file");h.maxFiles??(h.maxFiles=-1);h.responseIsRaw??(h.responseIsRaw=!1);const f=h.accept;delete h.accept;d.callSuper(c,h);d.fileInput=new a(d,{maxFiles:d.maxFiles,accept:f,percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:d.disabled,overflow:"hidden"},[t.SizeToParent,{_onChange:function(b){d.handleFiles(this.getIDE().files,b)}}])},setAccept:function(c){this.fileInput?.setAccept(this.accept)},getAccept:function(){return this.fileInput?.accept},
setMaxFiles:function(c){this.fileInput?.setMaxFiles(this.maxFiles)},getMaxFiles:function(){return this.fileInput?.maxFiles},setValue:function(c){this.clearFiles();if(c){Array.isArray(c)||(c=[c]);for(const h of c)this.addFile(g.createFile(h))}return this.callSuper?this.callSuper(c):c},getValue:function(){return this.value},setDisabled:function(c){this.callSuper(c);this.fileInput?.setDisabled(c)},setUploadUrl:function(c){this.set("uploadUrl",c,!0)},setRequestFileParam:function(c){this.set("requestFileParam",
c,!0)},setResponseIsRaw:function(c){this.set("responseIsRaw",c,!0)},bringSubviewToFront:function(c){c===this.fileInput?this.callSuper(c):this.sendSubviewBehind(c,this.fileInput)},subviewAdded:function(c){this.callSuper(c);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(c,h){this.addFile(c)},filterFiles:function(c){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:c},uploadFiles:function(c,h){c??=this.uploadUrl;const d=this.files;let f=d.length;for(;f;)this.uploadFile(d[--f],
c,h)},makeFetchOptionsForUpload:c=>({method:"POST",body:c}),uploadFile:function(c,h,d){const f=this,b=new FormData;b.append(d??f.requestFileParam,c,c.name.replaceAll("%20"," "));t.doFetch(h??f.uploadUrl,f.makeFetchOptionsForUpload(b),f.responseIsRaw,q=>{f.handleUploadSuccess(c,q)},q=>{f.handleUploadFailure(c,q)})},handleUploadSuccess:function(c,h){c[g.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(c,h);this.updateValueFromFiles()},handleUploadFailure:(c,h)=>{v("Upload failure:"+h.status+
":"+h.message)},parseServerPathFromResponse:(c,h)=>null,addFile:function(c){this.files.push(c);this.updateValueFromFiles();this.fireEvent("addFile",c)},removeFile:function(c){const h=this.files;let d=h.length;for(;d;)if(g.isSameFile(h[--d],c)){h.splice(d,1);this.updateValueFromFiles();this.fireEvent("removeFile",c);break}},updateValueFromFiles:function(){const c=[];var h=this.files;let d=h.length;for(;d;){const f=h[--d][g.FILE_ATTR_SERVER_PATH];f&&c.push(f)}h=c.length;(this.value=1===h?c[0]:0===h?
void 0:c)||this.fileInput.clearValue();this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const c=this.files;let h=c.length;for(;h;)this.removeFile(c[--h])}}),k=t.ImageUploader=new w("ImageUploader",g,{extend:{isImageFile:c=>/image/i.test(c.type)},initNode:function(c,h){h.maxFiles=1;this.callSuper(c,h)},filterFiles:function(c){if(k.isImageFile(c)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(c)}},
addFile:function(c){const h=this,d=k.isImageFile(c);h.callSuper(c);const f=h.imageView=new t.Image(h,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[t.SizeToParent]);f.file=c;const b=q=>{const n=new Image;n.onload=()=>{c.width=n.width;c.height=n.height;f&&!f.destroyed&&h.updateImage(c,f,n.src)};n.src=q};d?-1===c.size?b(c.serverPath):k.isImageFile(c)&&g.readFile(c,b):-1===c.size?h.updateImage(c,f,c.serverPath):g.readFile(c,q=>{h.updateImage(c,
f,q)});return f},removeFile:function(c){this.callSuper(c);const h=this.getSubviews();let d=h.length;for(;d;){const f=h[--d];if(g.isSameFile(f.file,c)){f.destroy();break}}},handleDroppedFile:function(c,h){this.callSuper(c,h);this.uploadFile(c,this.uploadUrl)},updateImage:function(c,h,d){this.nativeWidth=c.width;this.nativeHeight=c.height;h.setImageUrl(d)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(t=>{const w=(v,u,l,e)=>{l=l.bind(v);"y"!==v.axis&&(l(u,e,"x"),l(u,e,"boundsWidth"));"x"!==v.axis&&(l(u,e,"y"),l(u,e,"boundsHeight"));l(u,e,"visible")};t.SizeToChildren=new JS.Class("SizeToChildren",t.Layout,{initNode:function(v,u){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(v,u)},setAxis:function(v){this.axis!==v&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=v,this.startMonitoringAllSubviews(),this.fireEvent("axis",v),this.update()):this.axis=v)},setPaddingX:function(v){this.paddingX!==
v&&(this.paddingX=v,this.inited&&(this.fireEvent("paddingX",v),this.update()))},setPaddingY:function(v){this.paddingY!==v&&(this.paddingY=v,this.inited&&(this.fireEvent("paddingY",v),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const u=this.parent;if(!u.isBeingDestroyed){const l=this.subviews;var v=l.length;const e=this.axis,a=Math.max;let g,k;if("y"!==e){g=v;for(k=0;g;){const c=l[--g];c.visible&&(k=a(k,c.x+(0<c.boundsWidth?c.boundsWidth:0)))}u.setWidth(k+
this.paddingX)}if("x"!==e){g=v;for(k=0;g;)v=l[--g],v.visible&&(k=a(k,v.y+(0<v.boundsHeight?v.boundsHeight:0)));u.setHeight(k+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(v){w(this,v,this.attachTo,"update")},stopMonitoringSubview:function(v){w(this,v,this.detachFrom,"update")}})})(myt);
(t=>{let w=0;const v=JS.Class,{View:u,SizeToParent:l,RootView:e}=t,a=t.Dimmer=new v("Dimmer",u,{include:[l],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(k,c){this.restoreFocus=!0;c.focusable=c.focusCage=!0;c.percentOfParentWidth??(c.percentOfParentWidth=100);c.percentOfParentHeight??(c.percentOfParentHeight=100);c.visible??(c.visible=!1);c.ignoreLayout??(c.ignoreLayout=!0);this.callSuper(k,c);this.overlay=new u(this,{ignorePlacement:!0,opacity:a.OPACITY,bgColor:a.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[l]);for(const h of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",h);e.setupCaptureDrop(this)},destroy:function(){e.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(k){this.restoreFocus=k},eatMouseEvent:k=>!0,show:function(){const k=t.global.focus;this.prevFocus=k.focusedView??k.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(k){this.visible&&
(this.setVisible(!1),!k&&this.restoreFocus&&this.prevFocus?.focus())}}),g=t.ModalPanel=new v("ModalPanel",a,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>w,hasOpenModalPanels:()=>0<w},initNode:function(k,c){const h={name:"content",ignorePlacement:!0},d={...h,align:"center",valign:"middle"};this.defaultPlacement="content";c.sizingStrategy??(c.sizingStrategy="children");c.marginTop??(c.marginTop=g.MARGIN_TOP);c.marginLeft??
(c.marginLeft=g.MARGIN_LEFT);c.marginBottom??(c.marginBottom=g.MARGIN_BOTTOM);c.marginRight??(c.marginRight=g.MARGIN_RIGHT);c.paddingX??(c.paddingX=g.PADDING_X);c.paddingY??(c.paddingY=g.PADDING_Y);this.callSuper(k,c);switch(this.sizingStrategy){case "children":new t.SizeToChildren(new u(this,d),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new u(this,{...h,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[l]);break;case "basic":new u(this,d);break;default:new u(this,h)}},setSizingStrategy:function(k){this.sizingStrategy=k},setMarginTop:function(k){this.marginTop=k},setMarginLeft:function(k){this.marginLeft=k},setMarginBottom:function(k){this.marginBottom=k},setMarginRight:function(k){this.marginRight=k},setPaddingX:function(k){this.paddingX=k},setPaddingY:function(k){this.paddingY=k},
show:function(){this.callSuper();w++},hide:function(k){this.callSuper(k);w=Math.max(0,w-1)}})})(myt);
(t=>{const w=u=>{u[u.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},v=u=>{const l=u.size,e=u.getIDS();u.setWidth(l);u.setHeight(l);e.width=e.height=l-2*u.borderWidth+"px"};t.Spinner=new JS.Class("Spinner",t.View,{initNode:function(u,l){this.lateAttrs=["spinColor"];l.visible??(l.visible=!1);l.borderWidth??(l.borderWidth=5);l.borderColor??(l.borderColor="#fff");l.borderStyle??(l.borderStyle="solid");l.spinColor??(l.spinColor="#000");this.callSuper(u,l);this.getIDS().borderRadius="50%";v(this);
w(this)},setSize:function(u){this.size!==u&&(this.size=u,this.inited&&v(this))},setSpinColor:function(u){this.spinColor!==u&&(this.getIDS().borderTopColor=this.spinColor=u,this.inited&&this.fireEvent("spinColor",u))},setBorderWidth:function(u){this.borderWidth!==u&&(this.callSuper(u),this.inited&&v(this))},setVisible:function(u){this.visible!==u&&(this.callSuper(u),this.inited&&w(this))}})})(myt);
(t=>{const w=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),v=e=>{if(Array.isArray(e)){let a=e.length;if(0<a){e.unshift("fa");a++;e[1].startsWith("fa-")||(e[1]="fa-"+e[1]);3<=a&&(e[2]=w[e[2]]??"");if(3<a)for(let g=3;a>g;g++)e[g].startsWith("fa-")||(e[g]="fa-"+e[g]);return'<i class="'+e.join(" ")+'"></i>'}}t.dumpStack("Error making tag");console.error(e);return""},u=e=>{let a=e.properties;a=a?"string"===typeof a?a.split(" "):a.slice():[];a.unshift(e.icon,e.size);e.setHtml(v(a))},l=e=>{for(const a of["Free 400",
"Free 900","Brands 400"])t.registerForFontNotification(e,"Font Awesome 5 "+a)};t.FontAwesome=new JS.Class("FontAwesome",t.Markup,{extend:{makeTag:v,registerForNotification:l},initNode:function(e,a){this.size=0;this.icon="";this.callSuper(e,a);u(this);l(this)},setIcon:function(e){const a=this.icon;this.set("icon",e,!0);this.inited&&a!==e&&u(this)},setSize:function(e){const a=this.size;this.set("size",e,!0);this.inited&&a!==e&&u(this)},setProperties:function(e){this.properties=e;this.fireEvent("properties",
e);this.inited&&u(this)}});t.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(t=>{let w,v,u,l,e=0,a=0,g=0,k=255,c=[],h,d,f,b,q,n,r,x,B,I,z,C,J,M,O,m,p,y,A,E,F,K,L,R,N,T;const ea=JS.Class,{View:U,Text:la,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=t,{min:ha,max:ia}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(D,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??
(G.paddingLeft=10);G.paddingRight??(G.paddingRight=10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(D,G)}}),La=oa(["check"]),Ia=D=>{for(let G of D)7===G?.length&&(G+="ff"),Ha[G]=!0},Ha={},Ma=new ea("Swatch",U,{include:[wa],initNode:function(D,G){const H=G.width=G.height=16;G.border=Ga;G.domClass="mytCheckerboardPattern";const P=G.bgColor;this.callSuper(D,G);this.colorView=new U(this,{width:H,
height:H,bgColor:P});P===l&&(D=qa.makeColorFromHexString(l),new la(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>D.red+D.green+D.blue?"#fff":"#000"}))},setBgColor:function(D){this.colorView?.setBgColor(D);this.setTooltip(D)},doActivated:function(){w.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=t.ColorPicker=new ea("ColorPicker",U,{initNode:function(D,G){w=this;w._isReady=!1;let H=G.color??"transparent";delete G.color;
u=G.alphaChannel??!1;delete G.alphaChannel;h=G.palette??[];Ia(h);delete G.palette;v="transparent"===H;w.callSuper(D,G);d=new U(w,{width:160,height:170});new Ca(d,{spacing:4,lineSpacing:4});f=new U(w,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(P,Q){f.callSuper(f.x,f.y);const V=this.getPagePosition();a=parseFloat(ia(0,ha(1,(P+this.dragInitX-V.x)/this.width)));g=parseFloat(1-ia(0,ha(1,(Q+this.dragInitY-V.y)/this.height)));v=!1;w.updateUI()}}]);D=new U(f,{width:139,height:139});
G=new U(D,{width:139,height:139});D.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";b=new U(G,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});q=new U(w,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(P,Q){this.callSuper(q.x,q.y);e=parseFloat(ia(0,ha(1,(Q+this.dragInitY-this.getPagePosition().y)/this.height)));v=!1;w.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new U(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new U(w,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{w.setColor("transparent")}}]);D=146;u&&(B=new t.LabelSlider(w,{x:170,y:D,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(P,Q){Q=P.value;if(null==Q||isNaN(Q))Q=
0;P.value=t.formatAsPercentage(Q/255,0);this.callSuper(P,!0);k=Q;w._isReady&&(v=!1,w.updateUI())}}]),D+=23);r=new t.InputText(w,{x:236,y:D,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});w.attachToDom(r,"_submitInput","blur");w.attachToDom(r,"_handleKeyDown","keydown");r.getIDS().paddingLeft="6px";D=new U(w,{x:170,y:D,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new U(D,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{w.setColor(H)}}]);x=new U(D,{x:30,width:30,height:23});if(D=Ea.getItem("myt.default"))c=D.split(";"),Ia(c);w.setColor(H);w._isReady=!0},_handleKeyDown:D=>{t.KeyObservable.isEnterKeyEvent(D)&&w._submitInput()},_submitInput:()=>{w.setColor(r.value)},addToPalette:D=>{D&&"transparent"!==D&&!Ha[D]&&(c.unshift(D),c.length=ha(c.length,56),Ea.setItem("myt.default",c.join(";")))},setColor:D=>{const G=D&&"transparent"!==D;if(u){let H="ff";G&&7<D.length&&(H=D.slice(7,9),D=D.slice(0,7));B.setValue(parseInt(H,
16))}else G&&7<D.length&&(D=D.slice(0,7));G?(D=qa.makeColorFromHexString(D).getHSV(),e=D.h/360,a=D.s,g=D.v,v=!1):v=!0;w.updateUI()},getColor:()=>{if(v)return"transparent";let D="";u&&(D=k.toString(16),2>D.length&&(D="0"+D));return qa.makeColorFromHSV(360*e,100*a,100*g).getHtmlHexString()+D},updateUI:()=>{const D=!v;n.setVisible(D);b.setVisible(D);D&&(b.setX(ia(0,ha(1,a)*(f.width+2))-5),b.setY(ia(0,ha(1,1-g)*(f.height+2))-5),n.setY(e*(q.height-2)-1));f.setBgColor(qa.makeColorFromHSV(360*e,100,100).getHtmlHexString());
l=w.getColor();r.setValue(l);x.setBgColor(l);w.redrawPalette()},redrawPalette:t.debounce(()=>{d.destroyAllSubviews();const D=new Set;h.push(...c);for(let G of h)if(u||7===G.length)7===G.length&&(G+="ff"),D.has(G)||(new Ma(d,{bgColor:G}),D.add(G))},50)}),ya=D=>{D=D.split(":");return[ia(0,ha(23,parseInt(D[0]))),ia(0,ha(60,parseInt(D[1])))]},Ja=new ea("SelectableBtn",na,{include:[t.Selectable],setSelected:function(D){this.callSuper(D);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(D,G){G.width=J?175:49;this.callSuper(D,G)},doActivated:function(){this.callSuper();const D=this.text,G=ya(D);T.selectById(D);F.setHours(G[0]);F.setMinutes(G[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(D,G){G.width=23;G.border=xa;this.callSuper(D,G)},setData:function(D){this.data=D},setIsAnotherMonth:function(D){this.isAnotherMonth=D},setIsToday:function(D){this.isToday=D},setIsSunday:function(D){this.isSunday=
D},setIsSaturday:function(D){this.isSaturday=D},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const D=new Date(this.data);D.setHours(F.getHours());D.setMinutes(F.getMinutes());pa(D)}}),pa=D=>{D.setSeconds(0);D.setMilliseconds(0);var G=6>=O.length,H;if(G)for(H=7;H--&&!O.includes(D.getDay());)D.setDate(D.getDate()+
1);F=D;const P=T.getODE().scrollTop;var Q=new Date,V=Q.getFullYear(),S=Q.getMonth(),W=Q.getDate();Q.getHours();Q.getMinutes();const aa=D.getFullYear(),ca=D.getMonth(),ka=D.getDate();var da=D.getTime();Q=D.getHours();D=D.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-M,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);V=V==aa&&S==ca;if(!J){S=N;S.deselectAll();S.destroyAllSubviews();H=new Date(da);const ja=7+M;S=z.days;L.setText(aa+" "+
z.sep+" "+z.months[ca]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);K.setVisible(null==m||m<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ca+1);R.setVisible(null==p||p>H.getTime());for(H=0;7>H;H++)new la(N,{width:23,height:20,textAlign:"center",text:S[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>ra&&(H=-7,fa=35);S=new Date(da);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);H<fa;H++){var X=H+1-ra;const Aa=(H+ja)%7,Y=new Pa(N);ra>H?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),S.setDate(za+X),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear())):H<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),S.setDate(X),S.setMonth(ca),S.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),S.setDate(X-sa),S.setMonth(ua.getMonth()),S.setYear(ua.getFullYear()));G&&!O.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===ka&&(N.select(Y),Y.focus()),V&&X===W&&Y.setIsToday(!0),X=new Date(S.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=m&&m>X.getTime()||null!=p&&p<S.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!C){G=60*A[0]+A[1];W=T;W.deselectAll();W.destroyAllSubviews();let [ja,fa]=y;for(S=new Date(da);60*ja+fa<G;)da=new Oa(T,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===Q&&fa===D&&T.select(da),S.setHours(ja),S.setMinutes(fa),W=S.getTime(),(null!=m&&m>W||null!=p&&p<W)&&da.setDisabled(!0),
fa+=E,60<=fa&&(fa-=60,ja++);T.scrollYTo(P)}},Qa=t.DatePicker=new ea("DatePicker",U,{initNode:function(D,G){I=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;I.callSuper(D,G);z=H.locales[H.locale??"en"];C=H.dateOnly;J=H.timeOnly;M=H.firstDayOfWeek;E=ia(5,ha(30,H.minuteInterval));O=H.allowedDays;Array.isArray(O)&&0!==O.length||
(O=[0,1,2,3,4,5,6]);m=Date.parse(H.minDate);m=isNaN(m)?null:m;p=Date.parse(H.maxDate);p=isNaN(p)?null:p;y=ya(H.minTime);A=ya(H.maxTime);D=new U(I,{visible:!J});H.showTodayButton&&new na(D,{width:24,text:oa(["home"]),tooltip:z.today},[{doActivated:()=>{pa(new Date)}}]);K=new na(D,{width:24,x:28,text:oa(["chevron-left"]),tooltip:z.prevMonth},[{doActivated:()=>{const P=(new Date(F.getFullYear(),F.getMonth(),0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()-1);pa(F);K.focus()}}]);L=new la(D,
{width:100,x:52,textAlign:"center"});R=new na(D,{width:24,x:152,text:oa(["chevron-right"]),tooltip:z.nextMonth},[{doActivated:()=>{var P=(new Date(F.getFullYear(),F.getMonth()+1,0)).getDate();P<F.getDate()&&F.setDate(P);P=(new Date(F.getFullYear(),F.getMonth()+2,0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()+1);pa(F);R.focus()}}]);N=new U(I,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(N,{spacing:2,lineInset:2,lineSpacing:3});T=new U(I,
{x:J?0:195,y:J?0:25,width:(J?175:49)+t.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!C,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(T,{axis:"y",inset:1,spacing:3});I.setWidth(T.visible?T.x+T.width:N.width);pa(H.current??new Date)},getPickedDate:()=>F}),Z=t.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(D,G){G.buttonClass??(G.buttonClass=Z.BUTTON_CLASS);this.callSuper(D,G);D=this.content;D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER);D.setFocusCage(!0);this.makeCloseButton(D)},setButtonClass:function(D){this.buttonClass=D},setCallbackFunction:function(D){this.callbackFunction=D},makeButton:function(D,G){const H=this;return new H.buttonClass(D,
G,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(D){return D.closeBtn=this.makeButton(D,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(D){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(D)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const D=this.content,G=D.sizeToChildren;D.destroyAllSubviews(H=>"closeBtn"!==H.name);D.setVisible(!0);this.overlay.setBgColor(t.Dimmer.COLOR);this.setCallbackFunction();G.setPaddingY(ba.PADDING_Y);G.setPaddingX(ba.PADDING_X);D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER)},doCallback:function(D){const G=this.callbackFunction;G&&G.call(this,D.name)||this.hide()},showBlank:function(D){this.destroyContent();this.content.setVisible(!1);
D?.bgColor&&this.overlay.setBgColor(D.bgColor);this.show()},showMessage:function(D,G,H){const P=this.content,Q=P.closeBtn;H={...Z.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(G);D=P.msg=new la(P,{text:D,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ba.PADDING_X:H.msgX,y:null==H.msgY?ba.PADDING_Y:H.msgY,width:H.width});H.titleText&&(this.setupTitle(P,H.titleText),D.setY(D.y+24));this.show();!1===H.showClose?Q.destroyed||Q.setVisible(!1):
(Q.setVisible(!0),Q.focus())},showSimple:function(D,G,H,P){H=H??{};const Q=this.content,V=Q.closeBtn,S=H.maxContainerHeight;this.destroyContent();H.bgColor&&Q.setBgColor(H.bgColor);H.roundedCorners&&Q.setRoundedCorners(H.roundedCorners);H.boxShadow&&Q.setBoxShadow(H.boxShadow);H.border&&Q.setBorder(H.border);Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>S&&(W=S);this.callSuper(W)}}]);D.call(this,G);new va(G,
{axis:"both"});this.show();V.setVisible(!0);V.focus();H.titleText&&(this.setupTitle(Q,H.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();P?.(this)},showConfirm:function(D,G,H){H={...Z.CONFIRM_DEFAULTS,...H};this.showMessage(D,G,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(D,G,H,P){H={...Z.CONFIRM_DEFAULTS,...H};const Q=this.content,V=Q.closeBtn,S=H.maxContainerHeight;this.destroyContent();Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=
Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>S?S:W)}}]);D.call(this,G);new va(G,{axis:"both"});this.show();V.setVisible(!0);V.focus();this.setupTitle(Q,H.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,H);G.initialFocus?.focus();P?.(this)},showSpinner:function(D,G){const H=this.content;G={...Z.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const P=this.spinner=new t.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,
y:null==G.msgY?ba.PADDING_Y:G.msgY});D&&new la(H,{text:D,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ba.PADDING_X:G.msgX,y:P.y+P.size+ba.PADDING_Y,width:G.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(D,G){const H=this,P=H.content,Q=P.closeBtn;G={...Z.COLOR_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(H,V);break;case "confirmBtn":const S=w.getColor();
w.addToPalette(S);D.call(H,V,S)}w.destroy()});w=new Na(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(w,G);H.setupTitle(P,G.titleText)},showDatePicker:function(D,G){const H=this,P=H.content,Q=P.closeBtn;G={...Z.DATE_PICKER_DEFAULTS,
...G};H.destroyContent();H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(H,V);break;case "confirmBtn":D.call(H,V,I.getPickedDate())}I.destroy()});I=new Qa(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(I,G);H.setupTitle(P,G.timeOnly?G.timeOnlyTitleText:G.titleText)},setupTitle:function(D,
G){const H=Z.RADIUS;(this.header=new U(D,{ignoreLayout:!0,width:D.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();D.title=new la(D,{x:H,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(D,G){const H=this.content;var P=ba.PADDING_Y,Q=P/2;D=H.btnContainer=new U(H,{y:D.y+D.height+P,align:"center"});const V=["active","hover","ready","text"];P=G.cancelAttrs??{};var S;(S=P).name??(S.name="cancelBtn");let W;(W=P).text??(W.text=G.cancelTxt);for(let da of V)da+=
"Color",null!=G[da]&&(P[da]=G[da]);S=this.makeButton(D,P);P=G.confirmAttrs??{};var aa;(aa=P).name??(aa.name="confirmBtn");let ca;(ca=P).text??(ca.text=G.confirmTxt);for(var ka of V)ka+="Color",aa=ka+"Confirm",null!=G[aa]&&(P[ka]=G[aa]);this.makeButton(D,P);if(ka=G.button)for(const da of ka)this.makeButton(D,da);new va(D,{axis:"y"});new Ba(D,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(Q);Q=D.y-Q;(new U(H,{ignoreLayout:!0,y:Q,width:H.width,height:H.height-Q,bgColor:"#eee"})).sendToBack();
!1===G.showClose&&S.focus()}})})(myt);
(t=>{const w=JS.Class,v=t.dumpStack,u={},l=(d,f)=>{if(d){const b=d.id;d.id?f(b):v("No ID")}else v("No validator")},e=d=>{l(d,f=>{u[f]=d})},a=t.Validator=new w("Validator",{initialize:function(d){this.id=d},isValid:(d,f,b)=>!0,isFormValid:function(d,f,b){f??={};f.form=d;return this.isValid(d.getValue(),f,b)}}),g=t.RequiredFieldValidator=new w("RequiredFieldValidator",a,{isValid:(d,f,b)=>null==d||""===d||"string"===typeof d&&""===d.trim()?(b?.push("This value is required."),!1):!0}),k=t.EqualsIgnoreCaseValidator=
new w("EqualsIgnoreCaseValidator",a,{isValid:(d,f,b)=>{f=f.form.getRollbackValue();return d&&f&&d.toLowerCase()===f.toLowerCase()?(b?.push("Value must differ by more than just case."),!1):!0}}),c=t.URLValidator=new w("URLValidator",a,{initialize:function(d,f){this.callSuper(d);this.originalRawQuery=f},isValid:function(d,f,b){return(new t.URI(d)).toString(this.originalRawQuery)!==d?(b?.push("Invalid URL."),!1):!0}}),h=t.JSONValidator=new w("JSONValidator",a,{isValid:(d,f,b)=>{try{return JSON.parse(d),
!0}catch(q){return b?.push(q),!1}}});t.RegexValidator=new w("RegexValidator",a,{initialize:function(d,f,b){this.callSuper(d);this.regex=new RegExp(f);this.errorMsg=b},isValid:function(d,f,b){d=this.regex.test(d);!d&&this.errorMsg&&b?.push(this.errorMsg);return d}});t.EqualFieldsValidator=new w("EqualFieldsValidator",a,{initialize:function(d,f,b){this.callSuper(d);this.fieldA=f;this.fieldB=b},isValid:function(d,f,b){if(d&&this.fieldA.getValue()===this.fieldB.getValue())return!0;b?.push('The field "'+
this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});t.LengthValidator=new w("LengthValidator",a,{initialize:function(d,f,b){this.callSuper(d);this.min=f;this.max=b},isValid:function(d,f,b){d=d?d.length:0;f=this.min;const q=this.max;return void 0!==f&&f>d?(b?.push("The value must not be less than "+f+" characters long."),!1):void 0!==q&&q<d?(b?.push("The value must not be greater than "+q+" characters long."),!1):!0}});t.NumericRangeValidator=new w("NumericRangeValidator",
a,{initialize:function(d,f,b){this.callSuper(d);this.min=f;this.max=b},isValid:function(d,f,b){if(""===d)return!0;d=Number(d);f=this.min;const q=this.max;return isNaN(d)?(b?.push("Value is not a number."),!1):void 0!==f&&f>d?(b?.push("Value must not be less than "+f+"."),!1):void 0!==q&&q<d?(b?.push("Value must not be greater than "+q+"."),!1):!0}});t.CompoundValidator=new w("CompoundValidator",a,{initialize:function(d,...f){this.callSuper(d);for(d=f.length;d;){let b=f[--d];"string"===typeof b&&((f[d]=
b=u[b])||f.splice(d,1))}this.__v=f},addValidator:function(d){"string"===typeof d&&(d=u[d]);d&&this.__v.push(d)},isValid:function(d,f,b){const q=this.__v,n=q.length;let r=!0,x=0;for(;n>x;)r=q[x++].isValid(d,f,b)&&r;return r}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){e(new g("required"));e(new k("equalsIgnoreCase"));e(new c("url"));e(new h("json"));t.global.register("validators",this)},getValidator:d=>u[d],register:e,unregister:d=>{l(d,f=>{u[f]&&delete u[f]})}})})(myt);
(t=>{const w=JS.Class,{min:v,max:u,round:l,abs:e}=Math,a=t.View,g=new w("SliderThumb",t.SimpleButton,{include:[t.Draggable,t.ArrowKeyActivation],initNode:function(c,h){const d=h.width=c.thumbWidth,f=h.height=c.thumbHeight;h.roundedCorners=v(f,d)/2;h.repeatKeyDown=!0;h.activationKeys=t.global.keys.ARROW_KEYS;h.activeColor="#bbb";h.readyColor="#ccc";h.hoverColor="#ddd";h.boxShadow=[0,0,4,"#666"];this.callSuper(c,h);this["x"===c.axis?"setY":"setX"](c.thumbOffset);this.syncTo(c,"setDisabled","disabled");
c._syncThumbToValue(this,c.getValue())},setDisabled:function(c){this.callSuper(this.valueFromEvent(c))},setFocused:function(c){this.callSuper(c);c&&this.makeHighestZIndex()},setX:function(c){this.x!==c&&(this.callSuper(c),c=this.parent,"x"===c.axis&&c.syncValueToThumb(this))},setY:function(c){this.y!==c&&(this.callSuper(c),c=this.parent,"y"===c.axis&&c.syncValueToThumb(this))},requestDragPosition:function(c,h){if(!this.disabled){const d=this.parent,f=d.getMinPixelValueForThumb(this),b=d.getMaxPixelValueForThumb(this),
q=d.snapThreshold;let n;"x"===d.axis?(n=this.width/2,h="setX"):(n=this.height/2,c=h,h="setY");if(d.allowSnap(this))for(let r of d.getSnapValuesAsPx())if(r-=n,e(c-r)<=q){c=r;break}this[h](v(u(c,f-n),b-n))}},doKeyArrowLeftOrUp:function(c,h){c?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(c,h){c?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),k=t.BaseSlider=new w("BaseSlider",a,{include:[t.Disableable],initNode:function(c,
h){h.axis??(h.axis="x");"x"===h.axis?(h.width??(h.width=100),h.height??(h.height=18)):(h.width??(h.width=18),h.height??(h.height=100));h.bgColor??(h.bgColor="#999");h.roundedCorners??(h.roundedCorners=9);h.trackInset??(h.trackInset=9);h.trackOutset??(h.trackOutset=9);h.thumbWidth??(h.thumbWidth=16);h.thumbHeight??(h.thumbHeight=16);h.thumbOffset??(h.thumbOffset=1);h.nudgeAmount??(h.nudgeAmount=1);h.snapThreshold??(h.snapThreshold=8);h.snapValues??(h.snapValues=[]);this.callSuper(c,h)},setAxis:function(c){this.axis=
c},setTrackInset:function(c){this.trackInset=c},setTrackOutset:function(c){this.trackOutset=c},setThumbWidth:function(c){this.thumbWidth=c},setThumbHeight:function(c){this.thumbHeight=c},setThumbOffset:function(c){this.thumbOffset=c},setNudgeAmount:function(c){this.nudgeAmount=c},setSnapThreshold:function(c){this.snapThreshold=c},setSnapValues:function(c){this.snapValues=c},getSnapValuesAsPx:function(){const c=[];for(const h of this.snapValues)c.push(this.convertValueToPixels(h));return c},allowSnap:function(c){var h=
c.__lastMousePosition;const d=t.DomElementProxy.getRelativePosition(c.getODE()),f="x"===this.axis;c=f?c.height:c.width;h=f?h.y-d.y:h.x-d.x;return 0<h&&h<c},convertValueToPixels:function(c){const h=this.minValue,d=this.trackInset;return d+(("x"===this.axis?this.width:this.height)-d-this.trackOutset)/(this.maxValue-h)*(c-h)},convertPixelsToValue:function(c){const h=this.minValue,d=this.trackInset;return(this.maxValue-h)/(("x"===this.axis?this.width:this.height)-d-this.trackOutset)*(c-d)+h},nudgeValueLeft:function(c){this._nudge(c,
!1)},nudgeValueUp:function(c){this._nudge(c,!1)},nudgeValueRight:function(c){this._nudge(c,!0)},nudgeValueDown:function(c){this._nudge(c,!0)},_nudge:(c,h)=>{},_syncThumbToValue:function(c,h){h=this.convertValueToPixels(h);"x"===this.axis?c.setX(h-c.width/2):c.setY(h-c.height/2)},syncValueToThumb:function(c){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(c,this.convertPixelsToValue("x"===this.axis?c.x+c.width/2:c.y+c.height/2)),this.__lockSync=!1)},_syncValueToThumb:(c,h)=>
{},getMinPixelValueForThumb:function(c){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(c){return this.convertValueToPixels(this.maxValue)}});t.RangeSlider=new w("RangeSlider",k,{include:[t.BoundedRangeComponent],initNode:function(c,h){this.callSuper(c,h);c=this.rangeFill=new a(this,{bgColor:"#666"});"x"===this.axis?(c.setY(this.thumbOffset),c.setHeight(this.thumbHeight),c.setRoundedCorners(this.thumbHeight/2)):(c.setX(this.thumbOffset),c.setWidth(this.thumbWidth),
c.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new g(this);this.thumbUpper=new g(this);this._syncRangeFillToValue()},setValue:function(c){this.callSuper(c);this.inited&&(this.__lockSync||(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c)),this._syncRangeFillToValue())},setWidth:function(c){const h=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==h&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,
c))},setHeight:function(c){const h=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==h&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},_syncRangeFillToValue:function(){const c=this.rangeFill;var h=this.getValue();const d=this.convertValueToPixels(h.lower);h=this.convertValueToPixels(h.upper)-d;"x"===this.axis?(c.setX(d),c.setWidth(h)):(c.setY(d),c.setHeight(h))},_syncThumbToValue:function(c,h){this.callSuper(c,"thumbLower"===
c.name?h.lower:h.upper)},_syncValueToThumb:function(c,h){let d=this.getValueCopy();d["thumbLower"===c.name?"lower":"upper"]=h;this.setValue(d);d=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,d);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,d)},_nudge:function(c,h){const d=this.getValueCopy();h=this.nudgeAmount*(h?1:-1);"thumbLower"===c.name?d.lower=v(d.lower+h,d.upper):d.upper=u(d.upper+h,d.lower);this.setValue(d)},getMinPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===
c.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.getValue().upper:this.maxValue)}});t.Slider=new w("Slider",k,{include:[t.BoundedValueComponent],initNode:function(c,h){this.callSuper(c,h);this.thumb=new g(this)},setValue:function(c){this.callSuper(c);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(c){const h=this.width;this.callSuper(c);this.inited&&"x"===
this.axis&&this.width!==h&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(c){const h=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==h&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(c,h){this.setValue(h);this._syncThumbToValue(c,this.getValue())},_nudge:function(c,h){this.setValue(this.getValue()+this.nudgeAmount*(h?1:-1))}});t.LabelSlider=new w("LabelSlider",t.Slider,{initNode:function(c,h){const d=this;h.labelX??
(h.labelX=8);h.labelY??(h.labelY=2);h.labelFontSize??(h.labelFontSize="12px");h.labelColor??(h.labelColor="#000");h.flipThreshold??(h.flipThreshold=l((h.maxValue-h.minValue)/2)||0);d.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],h);d.callSuper(c,h);const f=d.labelX;d.labelTxt=new t.Text(d,{x:f,y:d.labelY,textColor:d.labelColor,fontSize:d.labelFontSize},[{initNode:function(b,q){this.targetX=f;this.callSuper(b,q)},updateX:function(b){const q=d.getValue()>=d.flipThreshold?
f:d.width-this.width-f;this.targetX!==q&&(this.targetX=q,this.stopActiveAnimators("x"),b?this.setX(q):this.animate({attribute:"x",to:q,duration:250}))}}]);d.syncTo(d,"setText","value")},setWidth:function(c){this.callSuper(c);this.labelTxt?.updateX(!0)},setText:function(c,h){const d=this.labelTxt;d&&(d.setText(c.value),d.updateX(h))}})})(myt);
(t=>{const w=JS.Class,{abs:v,min:u}=Math,{CODE_ENTER:l,CODE_SPACE:e,ARROW_KEYS:a}=t.global.keys,g=c=>{const h="y"===c.axis?"height":"width";c.constrain("__limitToParent",[c,"limitToParent",c,h,c.parent,h])};var k=t.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(c,h){h.nudgeTargetValue??(h.nudgeTargetValue="value");h.nudgeIncrement??(h.nudgeIncrement=1);h.nudgeMin??(h.nudgeMin=1);h.nudgeMax??(h.nudgeMax=64);this.__nudgeAcc=h.nudgeMin;this.callSuper(c,h)},setNudgeIncrement:function(c){this.set("nudgeIncrement",
v(c),!0)},setNudgeMin:function(c){this.set("nudgeMin",v(c),!0)},setNudgeMax:function(c){this.set("nudgeMax",v(c),!0)},setNudgeTargetValue:function(c){this.set("nudgeTargetValue",c,!0)},nudge:function(c,h){const d=this.nudgeTargetValue;h=this.__nudgeAcc=h?u(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(d,(this.get(d)||0)+(c?1:-1)*h);return!0}});k=new w("BaseDivider",t.SimpleButton,{include:[t.BoundedValueComponent,t.Draggable,t.ArrowKeyActivation,k],initNode:function(c,
h){h.activeColor??(h.activeColor="#bbb");h.hoverColor??(h.hoverColor="#ddd");h.readyColor??(h.readyColor="#ccc");h.axis??(h.axis="x");h.minValue??(h.minValue=0);h.value??(h.value=h.minValue);h.expansionState??(h.expansionState=2);h.focusIndicator??(h.focusIndicator=!1);h.repeatKeyDown??(h.repeatKeyDown=!0);h.activationKeys??(h.activationKeys=[l,e,...a]);"y"===h.axis?(h.height??(h.height=6),h.cursor??(h.cursor="row-resize")):(h.width??(h.width=6),h.cursor??(h.cursor="col-resize"));this.quickSet(["axis"],
h);this.callSuper(c,h);null==h.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&g(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(c){this.expansionState=c},setRestoreValue:function(c){this.restoreValue=c},setLimitToParent:function(c){this.limitToParent!==c&&(this.limitToParent=c,this.inited&&(this.fireEvent("limitToParent",c),null==c?this.releaseConstraint("__limitToParent"):g(this)))},setAxis:function(c){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=c},setValue:function(c){this.callSuper(c);c=this.value;"y"===this.axis?this.setY(c):this.setX(c)},__limitToParent:function(c){c="y"===this.axis?"height":"width";this.setMaxValue(this.parent[c]-this.limitToParent-this[c])},doActivationKeyDown:function(c,h){this.callSuper(c,h);switch(c){case l:case e:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(c,h){return this.nudge(!1,h)},doKeyArrowRightOrDown:function(c,h){return this.nudge(!0,h)},nudge:function(c,h){c=this.callSuper(c,h);this.setExpansionState(2);
this.setRestoreValue(this.value);return c},doPrimaryAction:function(){const {restoreValue:c,maxValue:h,minValue:d}=this;let f;switch(this.expansionState){case 0:null!=c&&(this.setExpansionState(1),c===d?c!==h&&this.doPrimaryAction():f=c);break;case 1:null!=h&&(this.setExpansionState(3),this.value===h?this.doPrimaryAction():f=h);break;case 2:null!=d&&(this.setExpansionState(0),this.value===d?this.doPrimaryAction():f=d);break;case 3:null!=c&&(this.setExpansionState(2),c===h?this.doPrimaryAction():f=
c)}this.animateToValue(f)},animateToValue:function(c,h=250){null!=c&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:c,duration:h}))},requestDragPosition:function(c,h){this.disabled||(c="y"===this.axis?h:c,h=this.value,c!==h&&(this.setValue(c),this.setRestoreValue(c),this.setExpansionState(h>c?2:1)))}});t.HorizontalDivider=new w("HorizontalDivider",k,{initNode:function(c,h){h.axis="x";this.callSuper(c,h)}});t.VerticalDivider=new w("VerticalDivider",k,{initNode:function(c,h){h.axis=
"y";this.callSuper(c,h)}})})(myt);
(t=>{let w=0;const {Class:v,Module:u}=JS,{min:l,max:e}=Math,{View:a,SpacedLayout:g,Node:{DEFAULT_PLACEMENT:k}}=t,c=m=>{const p=m.columnHeaders,[y,A]=m.sort??["",""];let E=p.length;for(;E;){const F=p[--E];F.columnId===y?F.sortable&&F.setSortState(A):F.setSortState("none")}m.locked||m.doSort()},h=(m,p,y,A)=>{if(0!==p){const L=0<p,R=[];for(var E=m.length;E;){var F=m[--E];F.resizable&&(y?0<F.flex:0===F.flex)&&R.push({hdr:F,limit:(L?F.maxValue:F.minValue)-F.value,amt:0})}m=R.length;if(0<m){for(E=0;0!==
p;){w>=m&&(E=w=0);F=R[w];var K=F.hdr;F.full?++E:(L?(K=l(y?K.flex:1,p),F.amt+K>F.limit&&(K=F.limit-F.amt,F.full=!0)):(K=e(y?-K.flex:-1,p),F.amt+K<F.limit&&(K=F.limit-F.amt,F.full=!0)),F.amt+=K,p-=K);if(E===m)break;++w}for(const N of R)N.hdr.setValue(N.hdr.value+N.amt);A?.(p)}}},d=m=>(m=m.gridController?.getPrevHdr(m))?m.maxValue-m.value+d(m):0,f=m=>(m=m.gridController?.getNextHdr(m))?m.maxValue-m.value+f(m):0,b=m=>(m=m.gridController?.getPrevHdr(m))?m.minValue-m.value+b(m):0,q=m=>(m=m.gridController?.getNextHdr(m))?
m.minValue-m.value+q(m):0,n=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0>A&&(y+=n(m,A))}return y},r=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0<A&&(y+=r(m,A))}return y},x=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&m.setValue(p),p-=m.value,0>p&&x(m,p)},B=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&
m.setValue(p),p-=m.value,0<p&&B(m,p)},I=m=>{let p="";if(m.sortable)switch(m.sortState){case O.SORT_ORDER_ASC:p="chevron-up";break;case O.SORT_ORDER_DESC:p="chevron-down"}m.sortIcon.setIcon(p)},z=m=>{const p=m.textView;p?.setWidth(m.width-m.outset-p.x)},C=t.GridController=new u("GridController",{initNode:function(m,p){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(m,p);this.fitHeadersToWidth();c(this)},setMaxWidth:function(m){this.set("maxWidth",
m,!0)},setMinWidth:function(m){this.set("minWidth",m,!0)},setFitToWidth:function(m){this.fitToWidth=m},setSort:function(m){t.areArraysEqual(m,this.sort)||(this.sort=m,this.inited&&(this.fireEvent("sort",m),c(this)))},setLastColumn:function(m){const p=this.lastColumn;p!==m&&(p?.setLast(!1),this.lastColumn=m,m?.setLast(!0))},setLocked:function(m){this.locked=m;if(this.inited&&!m){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const p of this.columnHeaders)this.notifyHdrXChange(p),this.notifyHdrWidthChange(p),this.notifyHdrVisibilityChange(p);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(m){m=this.valueFromEvent(m);this.gridWidth!==m&&(this.gridWidth=m,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(m){this.hdrChangeListener=m},doSort:()=>{},getPrevHdr:function(m){const p=this.columnHeaders;m=this.getHdrIndex(m);
if(0<m)for(;m;){const y=p[--m];if(y.visible)return y}},getNextHdr:function(m){const p=this.columnHeaders,y=p.length;m=this.getHdrIndex(m)+1;if(0<m&&m<y)for(;y>m;){const A=p[m++];if(A.visible)return A}},hasHdr:function(m){return this.columnHeaders.includes(m)},getHdrIndex:function(m){return this.columnHeaders.indexOf(m)},getHdrById:function(m){for(const p of this.columnHeaders)if(p.columnId===m)return p},getVisibleHdrs:function(){return this.columnHeaders.filter(m=>m.visible)},notifyAddHdr:function(m){this.hasHdr(m)||
(this.columnHeaders.push(m),m.visible&&this.setLastColumn(m),this.fixupResizerCursors())},notifyRemoveHdr:function(m){const p=this.getHdrIndex(m);-1<p&&(this.columnHeaders.splice(p,1),m.visible&&m.last&&this.setLastColumn(this.getPrevHdr(m)),this.fixupResizerCursors())},notifyHdrXChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrXChange(m);this._notifyHdrChange("X",m)}},notifyHdrWidthChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrWidthChange(m);
this._notifyHdrChange("Width",m)}},notifyHdrVisibilityChange:function(m){if((!this.__skipInvisibleHeaders||m.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(m);var p=this.setLastColumn;a:{var y=this.columnHeaders;let A=y.length;for(;A;){const E=y[--A];if(E.visible){y=E;break a}}y=void 0}p.call(this,y);p=m.visible?1:-1;this.setMaxWidth(this.maxWidth+m.maxValue*p);this.setMinWidth(this.minWidth+m.minValue*p);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
m)}},_notifyHdrChange:function(m,p){const y=this.hdrChangeListener;if(y)y["notifyHdr"+m+"Change"](p)},updateRowsForVisibilityChange:function(m){for(const p of this.rows)p.notifyHdrVisibilityChange(m)},hasRow:function(m){return this.rows.includes(m)},getRowIndex:function(m){return this.rows.indexOf(m)},getRowById:function(m,p=y=>y.model.id===m){return this.rows.find(p)},getPrevRow:function(m){m=this.getRowIndex(m)-1;return this.rows[0>m?this.rows.length-1:m]},getNextRow:function(m){m=this.getRowIndex(m)+
1;return this.rows[m<this.rows.length?m:0]},notifyAddRow:function(m,p){if(!this.hasRow(m)&&(this.rows.push(m),!this.locked)){const y=this.width;for(const A of this.columnHeaders)m.setWidth(y),m.notifyHdrXChange(A),m.notifyHdrWidthChange(A),m.notifyHdrVisibilityChange(A);p||this.doSort()}},notifyRemoveRow:function(m){m=this.getRowIndex(m);-1<m&&this.rows.splice(m,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const m=this.getVisibleHdrs();let p=0;for(const y of m)p=e(p,y.x+y.width);
h(m,this.gridWidth-p,!0,y=>{h(m,y,!1,null)})}},fixupResizerCursors:function(){const m=this.getVisibleHdrs();let p=!0,y=0;m.forEach((K,L)=>{p&&K.isFixed()?K.setResizerCursor("",!0):(p&&(y=L),p=!1,K.restoreResizerCursor())});let A=!0,E=m.length,F=E-1;for(;E>y;){const K=m[--E];A?K.setResizerCursor("",!0):K.restoreResizerCursor();K.isFixed()||(A&&(F=E),A=!1)}y===F&&m[y].setResizerCursor("",!0)}}),J=t.GridColHdr=new u("GridColHdr",{include:[t.BoundedValueComponent],initNode:function(m,p){const y=this,
A=p.resizerCursor??"col-resize";delete p.resizerCursor;p.minValue??(p.minValue=16);p.maxValue??(p.maxValue=1E3);p.value??(p.value=p.minValue);p.resizable??(p.resizable=!0);p.flex??(p.flex=0);p.cellXAdj??(p.cellXAdj=0);p.cellWidthAdj??(p.cellWidthAdj=0);p.sortable??(p.sortable=!0);p.sortState??(p.sortState="none");p.placement??(p.placement=k);y.callSuper(m,p);const E=y.gridController;y.resizer=new a(y,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[t.SizeToParent,t.Draggable,{requestDragPosition:function(F,K){K=F-this.x;if(E.fitToWidth&&(0<K?K=l(K,-q(y),y.maxValue-y.value+d(y)):0>K&&(K=e(K,-f(y),y.minValue-y.value+b(y))),0===K))return;F=y.value+K;y.resizable&&y.setValue(F);F-=y.value;K=F-K;let L=0;0>F?L=n(y,F):0<F&&(L=r(y,F));this.dragInitX+=L;K-=L;E.fitToWidth&&(0>K?x(y,K):0<K&&B(y,K))}}]);E&&(E.notifyAddHdr(y),E.notifyHdrXChange(y),E.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(m){this.setGridController();this.callSuper(m)},setSortable:function(m){this.set("sortable",m,!0)},setSortState:function(m){this.set("sortState",m,!0)},setResizable:function(m){this.set("resizable",m,!0)},setCellWidthAdj:function(m){this.cellWidthAdj=m},setCellXAdj:function(m){this.cellXAdj=m},setFlex:function(m){this.flex=m},setColumnId:function(m){this.columnId=m},setResizerCursor:function(m,p){const y=this.resizer,A=y.cursor;m!==A&&(p&&(this.__rrc=A),y.setCursor(m))},restoreResizerCursor:function(){const m=
this.__rrc;m&&(this.setResizerCursor(m),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(m){this.last=m;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(m){const p=this.gridController;p!==m&&(p?.notifyRemoveHdr(this),this.gridController=m,this.inited&&m&&(m.notifyAddHdr(this),m.notifyHdrXChange(this),m.notifyHdrWidthChange(this),m.notifyHdrVisibilityChange(this)))},setValue:function(m){this.callSuper(m);
this.inited&&this.setWidth(this.value)},setMinValue:function(m){const p=this.minValue??0,y=this.gridController;this.callSuper(m);this.inited&&p!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-p)},setMaxValue:function(m){const p=this.maxValue??0,y=this.gridController;m??=1E3;this.callSuper(m);this.inited&&p!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-p)},setWidth:function(m){const p=this.width;this.callSuper(m);this.inited&&p!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(m){const p=this.x;this.callSuper(m);this.inited&&p!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(m){const p=this.visible;this.callSuper(m);this.inited&&p!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=t.GridRow=new u("GridRow",{initNode:function(m,p){p.placement??(p.placement=k);this.callSuper(m,p);this.gridController?.notifyAddRow(this)},destroy:function(m){this.setGridController();this.callSuper(m)},setGridController:function(m){const p=
this.gridController;p!==m&&(p?.notifyRemoveRow(this),this.gridController=m,this.inited&&m?.notifyAddRow(this))},notifyHdrXChange:function(m){this.getRef(m.columnId)?.setX(m.x+m.cellXAdj)},notifyHdrWidthChange:function(m){this.getRef(m.columnId)?.setWidth(m.width+m.cellWidthAdj)},notifyHdrVisibilityChange:function(m){this.getRef(m.columnId)?.setVisible(m.visible)}}),O=t.Grid=new v("Grid",a,{include:[C],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(m,p){p.overflow??
(p.overflow="autox");p.bgColor??(p.bgColor="#ccc");p.rowSpacing??(p.rowSpacing=1);p.columnSpacing??(p.columnSpacing=1);var y=p.isAutoScrolling;delete p.isAutoScrolling;this.callSuper(m,p);m=this.header=new a(this,{overflow:"hidden"});m.xLayout=new g(m,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});m.yLayout=new t.SizeToChildren(m,{locked:!0,axis:"y"});p=this.sizeHeightToRows;y=this.content=new a(this,{overflow:p?"hidden":"autoy"},y?[t.AutoScroller]:[]);y.yLayout=new g(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:p});this.syncTo(this,"setGridWidth","width");this.syncTo(m,"_updateContentWidth","width");this.constrain("_updateContentHeight",[p?y:this,"height",m,"height",m,"y"])},setSizeHeightToRows:function(m){this.sizeHeightToRows=m},setRowSpacing:function(m){this.rowSpacing!==m&&(this.rowSpacing=m,this.inited&&this.content.yLayout.setSpacing(m))},setColumnSpacing:function(m){this.columnSpacing!==m&&(this.columnSpacing=m,this.inited&&this.header.xLayout.setSpacing(m))},
setLocked:function(m){if(this.inited)for(const p of[this.header.xLayout,this.header.yLayout,this.content.yLayout])m?p.incrementLockedCounter():(p.decrementLockedCounter(),p.update());this.callSuper(m)},_updateContentWidth:function(m){const p=this.content;m=m.value;p.setWidth(m);for(const y of p.getSubviews())y.setWidth(m)},_updateContentHeight:function(m){const {header:p,content:y}=this;m=p.y+p.height;y.setY(m);this.sizeHeightToRows?this.setHeight(m+y.height):y.setHeight(this.height-m)},determinePlacement:function(m,
p){if(m===k){let y;p.isA(M)?y=this.content:p.isA(J)&&(y=this.header);if(y)return p.gridController!==this&&p.setGridController(this),y}return this.callSuper(m,p)},doSort:function(){const [m,p]=this.sort??["",""],y=this.getSortFunction(m,p);if(y){const A=this.content,E=A.yLayout;this.rows.sort(y);A.sortSubviews(y);E.sortSubviews(y);E.update()}},getSortFunction:(m,p)=>{if(m){const y=p===O.SORT_ORDER_ASC?1:-1;return(A,E)=>{A=A.getRef(m).text;E=E.getRef(m).text;return A>E?y:E>A?-y:0}}}});t.SimpleGridColHdr=
new v("SimpleGridColHdr",t.SimpleTextButton,{include:[J],initNode:function(m,p){const y=this;p.activeColor??(p.activeColor="#999");p.hoverColor??(p.hoverColor="#bbb");p.readyColor??(p.readyColor="#aaa");p.inset??(p.inset=2);p.sortIconColor??(p.sortIconColor="#666");const A=p.outset??2;delete p.outset;y.callSuper(m,p);y.sortIcon=new t.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(E,F){this.callSuper(E,F);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
y.setOutset(this.width+A);z(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);z(y);I(y)},setSortIconColor:function(m){this.sortIconColor=m;this.sortIcon?.setTextColor(m)},setSortable:function(m){this.callSuper(m);this.inited&&(m&&this.setOutset(14),this.setDisabled(!m),I(this))},setSortState:function(m){this.callSuper(m);this.inited&&I(this)},setWidth:function(m){this.callSuper(m);this.inited&&z(this)},doActivated:function(){this.disabled||(this.setSortState(this.sortState===O.SORT_ORDER_ASC?
O.SORT_ORDER_DESC:O.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(t=>{const {Class:w,Module:v}=JS,u=Math,l=u.max,{View:e,LocalStorage:{setDatum:a,getDatum:g},global:{focus:k,keys:c},getAlphaObjSortFunc:h}=t,d=z=>{const C=z.selectedRow;C&&(C.setSelected(!1),z.set("selectedRow",null,!0))},f=z=>z.__ssk??(z.__ssk="InfiniteGridMixin.sort."+t.hash(z.columnHeaders.map(C=>C.columnId).sort().join(","))),b=t.InfiniteListRow=new v("InfiniteListRow",{include:[t.Reusable],setInfiniteOwner:function(z){this.infiniteOwner=z},setModel:function(z){this.model=z},setClassKey:function(z){this.classKey=
z},notifyRefreshed:()=>{}}),q=t.SelectableInfiniteListRow=new v("SelectableInfiniteListRow",{include:[b,t.Selectable]}),n=t.InfiniteList=new w("InfiniteList",e,{initNode:function(z,C){let J=C.rowClasses;delete C.rowClasses;if("function"===typeof J){const M={};M["default"]=J;J=M}C.modelIDName??(C.modelIDName="id");C.numericSort??(C.numericSort=!0);C.ascendingSort??(C.ascendingSort=!0);C.overflow??(C.overflow="autoy");C.bgColor??(C.bgColor="#ccc");C.rowSpacing??(C.rowSpacing=1);C.rowInset??(C.rowInset=
0);C.rowOutset??(C.rowOutset=0);C.rowHeight??(C.rowHeight=30);C.overscrollBehavior??(C.overscrollBehavior="auto contain");this._rowExtent=this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(z,C);z=this._listView=new e(this);this._scrollAnchorView=new e(z,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(J,z);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(z,C)=>new t.TrackActivesMultiPool(z,
C),setOverscrollBehavior:function(z){this.overscrollBehavior=z;this.getIDS().overscrollBehavior=z},setCollectionModel:function(z){this.collectionModel=z},setModelIDName:function(z){this.modelIDName=z},setRowSpacing:function(z){this.rowSpacing=z;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(z){this.rowHeight=z;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(z){if(0<z&&(this.callSuper(z),this.inited)){z=this._listView;
const C=this.width;z.setWidth(C);for(const J of z.getSubviews())J.setWidth(C)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??{})},getVisibleRowForModel:function(z){const C=this.getVisibleRows();let J=C.length;for(;J;){const M=C[--J];if(M.model===z)return M}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const z=this.modelIDName,C=this.ascendingSort;
return this.numericSort?t.getNumericObjSortFunc(z,C):h(z,C,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(z,C){var J=this.getIndexOfModelInData(z);let M=!1;if(0<=J){var O=this._rowExtent;const m=this.getIDE().scrollTop,p=m+this.height;J=this.rowInset+J*O;O=J+O;J<=m?(this.scrollYTo(J,!0),M=!0):O>=p&&(this.scrollYTo(O-this.height,!0),M=!0);C&&((C=this.getVisibleRowForModel(z))?C.focus():this._focusToModel=z)}return M},isModelInData:function(z){return 0<=this.getIndexOfModelInData(z)},getNextModel:function(z,
C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return z+=1,z>=O?C?M[0]:M[O-1]:M[z];if(J&&0<O)return M[O-1]},getPrevModel:function(z,C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return--z,0>z?C?M[O-1]:M[0]:M[z];if(J&&0<O)return M[0]},getIndexOfModelInData:function(z){if(z){const C=this.getListData();let J=C.length;for(;J;)if(this.areModelsEqual(C[--J],z))return J}return-1},areModelsEqual:function(z,C){const J=this.modelIDName;
return z[J]===C[J]},getActiveRowForModel:function(z){if(z){const C=this._itemPool.getActives();let J=C.length;for(;J;){const M=C[--J];if(this.areModelsEqual(M.model,z))return M}}},refreshListData:function(z,C){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(z,C)},resetListUI:function(z,C){const J=this.getListData().length,M=this._listView,O=this._scrollAnchorView;M.setHeight(J*this._rowExtent-(0<J?this.rowSpacing:0)+this.rowInset+
this.rowOutset);O.setY(M.height-O.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=C;z||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(z){if(k.focusedView?.isDescendantOf(z)){const C=this.getFocusTrap();C?C.focus():k.clear()}z.setVisible(!1);this._itemPool.putInstance(z)},refreshListUI:function(z){z=this._rowExtent;const C=this.rowInset,J=this.forceFullResetOnNextRefresh;var M=this.getIDE().scrollTop;const O=this.getListData()??
[];var m=l(0,u.floor((M-C)/z));M=u.min(O.length,u.ceil((M-C+this.height)/z));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==m||this._endIdx!==M||J){const y=this.width,A=this.rowHeight,E=this._visibleRowsByIdx,F=this._focusToModel;this._startIdx=m;this._endIdx=M;for(var p in E)if(p<m||p>=M)this.putRowBackInPool(E[p]),delete E[p];for(p=m;p<M;p++){m=E[p];const K=O[p],L=this.getClassKey(K);let R=!1;m&&m.classKey===L||(m&&this.putRowBackInPool(m),E[p]=m=this._itemPool.getInstance(L),
m.setInfiniteOwner(this),m.setClassKey(L),m.setWidth(y),m.setHeight(A),m.setY(C+p*z),m.setVisible(!0),R=!0);!J&&m.model&&this.areModelsEqual(m.model,K)?R&&this.updateRow(m):(m.setModel(K),this.updateRow(m));m.notifyRefreshed();m.bringToFront();F&&this.areModelsEqual(F,K)&&(m.focus(),this._focusToModel=null)}}},getClassKey:z=>"default",updateRow:z=>{}}),r=t.SimpleSelectableInfiniteListRow=new w("SimpleSelectableInfiniteListRow",t.SimpleButton,{include:[q,t.ArrowKeyActivation],initNode:function(z,C){C.selectedColor??
(C.selectedColor="#ccf");C.activeColor??(C.activeColor="#f8f8f8");C.hoverColor??(C.hoverColor="#eee");C.readyColor??(C.readyColor="#fff");C.focusIndicator??(C.focusIndicator=!1);C.activationKeys??(C.activationKeys=c.LIST_KEYS);this.callSuper(z,C)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(z){this.callSuper(z);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},
updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(z,C){z===c.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(z,C)},doKeyArrowLeftOrUp:function(z,C){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(z,C){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(z){switch(z){case c.CODE_ENTER:case c.CODE_SPACE:this.doActivated()}}}),
x=t.SelectableInfiniteList=new w("SelectableInfiniteList",n,{setSelectedRow:function(z){const C=this.selectedRow;z!==C&&(C?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",z,!0),z&&(this.setSelectedRowModel(z.model),z.setSelected(!0)))},setSelectedRowModel:function(z){this.set("selectedRowModel",z,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(z,C,J){z&&(d(this),
this.setSelectedRowModel(z),this.refreshListUI(),C&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(z,C=!0){this.selectRowForModel(this.getNextModel(z),C,!0)},selectPrevRowForModel:function(z,C=!0){this.selectRowForModel(this.getPrevModel(z),C,!1)},resetListUI:function(z,C){this.isModelInData(this.selectedRowModel)?d(this):this.setSelectedRow();this.callSuper(z,C)},putRowBackInPool:function(z){z.selected&&d(this);this.callSuper(z)},refreshListUI:function(z){z=k.focusedView;this.callSuper();
const C=this.getActiveSelectedRow();C&&(this.set("selectedRow",C,!0),C.setSelected(!0),z&&z!==C||C.focus(!0))}}),B=new v("InfiniteGridRowMixin",{notifyXChange:function(z){this.getRef(z.columnId)?.setX(z.x+z.cellXAdj)},notifyWidthChange:function(z){this.getRef(z.columnId)?.setWidth(z.width+z.cellWidthAdj)},notifyVisibilityChange:function(z){this.getRef(z.columnId)?.setVisible(z.visible)}}),I=new v("InfiniteGridMixin",{setGridHeader:function(z){(this.gridHeader=z)?.setGrid(this)},makeReady:function(z,
C){const J=this.gridHeader;J?(this.forceFullResetOnNextRefresh=C,C=J.persistSortOrder?g(f(J)):void 0,J.setSort(C??z),J.setLocked(!1)):this.refreshListData(!1,C)},getSortFunction:function(){const [z,C]=this.gridHeader.sort??["",""];return z?h(z,C===t.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(z){const C=this.gridHeader;if(C)for(const J of C.columnHeaders)z.notifyXChange(J),z.notifyWidthChange(J),z.notifyVisibilityChange(J)},notifyXChange:function(z){for(const C of this.getVisibleRows())C.notifyXChange(z)},
notifyWidthChange:function(z){for(const C of this.getVisibleRows())C.notifyWidthChange(z)},notifyVisibilityChange:function(z){for(const C of this.getVisibleRows())C.notifyVisibilityChange(z)}});t.InfiniteGridRow=new v("InfiniteGridRow",{include:[b,B]});t.SelectableInfiniteGridRow=new v("SelectableInfiniteGridRow",{include:[q,B]});t.SimpleSelectableInfiniteGridRow=new w("SimpleSelectableInfiniteGridRow",r,{include:[B]});t.InfiniteGrid=new w("InfiniteGrid",n,{include:[I]});t.SelectableInfiniteGrid=
new w("InfiniteGrid",x,{include:[I]});t.InfiniteGridHeader=new w("InfiniteGridHeader",e,{include:[t.GridController],initNode:function(z,C){C.columnSpacing??(C.columnSpacing=1);C.persistSortOrder??(C.persistSortOrder=!0);C.overflow="hidden";this.callSuper(z,C);new t.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(z){this.grid=z},setColumnSpacing:function(z){this.columnSpacing=z},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:l(0,this.getVisibleHdrs().length-1)*this.columnSpacing},
setPersistSortOrder:function(z){this.persistSortOrder=z},setHeight:function(z){this.callSuper(z);if(this.inited){z=this.height;for(const C of this.columnHeaders)C.setHeight(z)}},setWidth:function(z){this.callSuper(l(this.minWidth,z));this.inited&&(z=this.width,this.setGridWidth(z),this.grid.setWidth(z))},subviewAdded:function(z){this.callSuper(z);z.isA(t.GridColHdr)&&(z.setGridController(this),z.setHeight(this.height))},doSort:function(){this.persistSort();this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},
persistSort:function(){this.persistSortOrder&&a(f(this),this.sort)},notifyHdrXChange:function(z){this.isLocked()||(this.grid.notifyXChange(z),this._notifyHdrChange("X",z))},notifyHdrWidthChange:function(z){this.isLocked()||(this.grid.notifyWidthChange(z),this._notifyHdrChange("Width",z))},updateRowsForVisibilityChange:function(z){this.grid.notifyVisibilityChange(z);this.isLocked()||this._notifyHdrChange("Visibility",z)}})})(myt);
(t=>{const w=JS.Class,v=t.PanelStackTransition=new w("PanelStackTransition",t.Node,{to:u=>Promise.resolve(u),from:u=>Promise.resolve(u)});t.PanelStack=new w("PanelStack",t.View,{include:[t.SelectionManager],initNode:function(u,l){l.overflow="hidden";l.itemSelectionId??(l.itemSelectionId="panelId");l.maxSelected??(l.maxSelected=1);this.callSuper(u,l);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(u){this.set("transition",u,!0)},__updateWidth:function(u){this.getActivePanel()?.setWidth(u.value)},
__updateHeight:function(u){this.getActivePanel()?.setHeight(u.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(u){return this.getSelectableItem(u)},selectPanel:function(u){this.selectById(u)},doSelected:function(u){u.setWidth(this.width);u.setHeight(this.height)},doStackTransition:function(u){this["doStackTransition"+(u.selected?"To":"From")](u)},doStackTransitionTo:function(u){const l=this;l.doBeforeTransitionTo(u);const e=l.transition;e?e.to(u).then(a=>{l.doAfterTransitionTo(a)}):
(u.makeHighestZIndex(),u.setVisible(!0),l.doAfterTransitionTo(u))},doBeforeTransitionTo:u=>{},doAfterTransitionTo:u=>{},doStackTransitionFrom:function(u){const l=this;l.doBeforeTransitionFrom(u);const e=l.transition;e?e.from(u).then(a=>{l.doAfterTransitionFrom(a)}):(u.setVisible(!1),l.doAfterTransitionFrom(u))},doBeforeTransitionFrom:u=>{},doAfterTransitionFrom:u=>{}});t.StackablePanel=new JS.Module("StackablePanel",{include:[t.Selectable],initNode:function(u,l){l.visible=l.selected=!1;l.bgColor??
(l.bgColor="#fff");l.panelId??(l.panelId=l.name);this.callSuper(u,l);this.selected&&this.doStackTransition()},setPanelStack:function(u){this.panelStack=u},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(u){this.panelId=u},setSelected:function(u){this.selected!==u&&(this.callSuper(u),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});t.PanelStackFadeTransition=new w("PanelStackFadeTransition",v,{initNode:function(u,
l){l.duration??(l.duration=1E3);this.callSuper(u,l)},setDuration:function(u){this.duration=u},to:function(u){return new Promise((l,e)=>{u.stopActiveAnimators("opacity");u.setVisible(!0);u.animate({attribute:"opacity",to:1,duration:this.duration}).next(a=>{u.makeHighestZIndex();l(u)})})},from:function(u){return new Promise((l,e)=>{u.stopActiveAnimators("opacity");u.animate({attribute:"opacity",to:0,duration:this.duration}).next(a=>{u.setVisible(!1);l(u)})})}});t.PanelStackSlideTransition=new w("PanelStackSlideTransition",
v,{initNode:function(u,l){l.duration??(l.duration=1E3);l.direction??(l.direction="right");this.callSuper(u,l)},setDuration:function(u){this.duration=u},setDirection:function(u){this.direction=u},to:function(u){const l=u.getPanelStack(),e=this.duration;let a,g;switch(this.direction){case "left":g="x";a=l.width;break;case "right":g="x";a=-l.width;break;case "up":g="y";a=l.height;break;case "down":g="y",a=-l.height}u.stopActiveAnimators(g);u.set(g,a);u.setVisible(!0);return new Promise((k,c)=>{c=h=>
{u.makeHighestZIndex();k(u)};0<e?u.animate({attribute:g,to:0,duration:e}).next(c):(u.set(g,0),u.makeHighestZIndex(),k(u))})},from:function(u){const l=u.getPanelStack(),e=this.duration;let a,g;switch(this.direction){case "left":g="x";a=-l.width;break;case "right":g="x";a=l.width;break;case "up":g="y";a=-l.height;break;case "down":g="y",a=l.height}u.stopActiveAnimators(g);return new Promise((k,c)=>{c=h=>{u.setVisible(!1);k(u)};0<e?u.animate({attribute:g,to:a,duration:e}).next(c):(u.set(g,a),u.setVisible(!1),
k(u))})}})})(myt);
(t=>{const w=JS.Module,{Draggable:v,global:{dragManager:u,mouse:l}}=t,e=(g,k,c)=>{for(const h of[k,c])g["__is"+h]=!1,g["__tmrId"+h]=null},a=t.DragGroupSupport=new w("DragGroupSupport",{initNode:function(g,k){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(g,k)},setDragGroups:function(g){const k=this.__dgs={};for(const c in g)k[c]=!0;this.__anyDG=k.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(g){const k=this.__drpgs=
{};for(const c in g)k[c]=!0;this.__anyDRPG=k.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(g){g&&(this.__dgs[g]=!0,"*"===g&&(this.__anyDG=!0))},removeDragGroup:function(g){g&&(delete this.__dgs[g],"*"===g&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(g){g&&(this.__drpgs[g]=!0,"*"===g&&(this.__anyDRPG=!0))},removeDropGroup:function(g){g&&(delete this.__drpgs[g],"*"===g&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
t.DropSource=new w("DropSource",{include:[v],initNode:function(g,k){k.distanceBeforeDrag??(k.distanceBeforeDrag=2);k.dropParent??(k.dropParent=g.getRoot());this.callSuper(g,k)},setDropClass:function(g){this.dropClass=t.resolveClassname(g)},setDropClassAttrs:function(g){this.dropClassAttrs=g},setDropParent:function(g){this.dropParent=g},startDrag:function(g){const k=this.dropable=this.makeDropable();if(k){const c=k.distanceBeforeDrag;k.distanceBeforeDrag=0;k.doMouseDown(g);k.__doMouseDown(g);k.distanceBeforeDrag=
c}},doMouseUp:function(g){this.callSuper(g);const k=this.dropable;k&&(k.__doMouseUp(g),k.doMouseUp(g),this.dropable=null)},makeDropable:function(){const g=this.dropClass,k=this.dropParent;if(g&&k){const c=t.DomElementProxy.getRelativePosition(this.getIDE(),k.getIDE());return new g(k,{...this.dropClassAttrs,x:c.x??0,y:c.y??0})}}});t.DropTarget=new w("DropTarget",{include:[a],initNode:function(g,k){this.callSuper(g,k);u.registerDropTarget(this)},destroy:function(){u.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(g){return!this.disabled&&this.isVisible()},notifyDragStart:g=>{},notifyDragStop:g=>{},notifyDragEnter:g=>{},notifyDragLeave:g=>{},notifyDrop:g=>{}});t.Dropable=new w("Dropable",{include:[v,a],setDropTarget:function(g){this.dropTarget=g},setDropped:function(g){this.dropped=g},setDropFailed:function(g){this.dropFailed=g},willPermitDrop:g=>!0,startDrag:function(g){this.setDropped(!1);this.setDropFailed(!1);u.startDrag(this);this.callSuper(g)},updateDrag:function(g){u.updateDrag(g,
this);this.callSuper(g)},stopDrag:function(g,k){u.stopDrag(g,this,k);this.callSuper(g,k);k?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(g){this.setDropTarget(g)},notifyDragLeaving:function(g){this.setDropTarget()},notifyDropped:function(g,k){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});t.AutoScroller=new w("AutoScroller",{include:[a],initNode:function(g,k){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;k.overflow??(k.overflow="auto");this.callSuper(g,k);u.registerAutoScroller(this)},destroy:function(){u.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(g){this.scrollBorder=Math.max(1,g)},setScrollFrequency:function(g){this.scrollFrequency=g},setScrollAmount:function(g){this.scrollAmount=g},setScrollAcceleration:function(g){this.scrollAcceleration=g},notifyAutoScrollerDragStart:function(g){g=this.getIDE();(g.scrollHeight>g.clientHeight||
g.scrollWidth>g.clientWidth)&&this.attachToDom(l,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(g){this.detachFromDom(l,"__hndlMove","mousemove",!0);e(this,"Up","Down");e(this,"Left","Right")},__hndlMove:function(g){const k=this;let {pageX:c,pageY:h}=g.value;if(k.containsPoint(c,h)){g=k.getPagePosition();const d=k.scrollBorder,f=(b,q)=>{k["__is"+b]&&(k.getIDE()["scroll"+("Up"===b||"Down"===b?"Top":"Left")]+=q*k["__amt"+b],k["__tmrId"+b]=setTimeout(()=>{f(b,q)},k.scrollFrequency))};
c-=g.x;h-=g.y;h<d?(k.__isUp=!0,k.__amtUp=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-h/d))),k.__tmrIdUp||f("Up",-1)):k.height-h<d?(k.__isDown=!0,k.__amtDown=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.height-h)/d))),k.__tmrIdDown||f("Down",1)):e(k,"Up","Down");c<d?(k.__isLeft=!0,k.__amtLeft=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-c/d))),k.__tmrIdLeft||f("Left",-1)):k.width-c<d?(k.__isRight=!0,k.__amtRight=Math.round(k.scrollAmount*(1+k.scrollAcceleration*(1-(k.width-
c)/d))),k.__tmrIdRight||f("Right",1)):e(k,"Left","Right")}else e(k,"Up","Down"),e(k,"Left","Right")}})})(myt);
(t=>{const {max:w,cos:v,sin:u,PI:l}=Math,e=t.Geometry.degreesToRadians,a=d=>{var f=e(d.startAngle),b=e(d.endAngle);if(f>b){var q=f;f=b;b=q}q=d.__path;var n=d.width/2,r=d.thickness;const x=d.radius,B=x+r;var I=b-f;const z=I+1E-4>=2*l;z&&(f=0,b=l);const C=[n+B*v(f),n+B*u(f)],J=[n+B*v(b),n+B*u(b)];b=[n+x*v(b),n+x*u(b)];f=[n+x*v(f),n+x*u(f)];n=["M"+C.join()];z?n.push("A"+[B,B,0,1,1,J].join(),"A"+[B,B,0,1,1,C].join(),"L"+b.join(),"A"+[x,x,0,1,0,f].join(),"A"+[x,x,0,1,0,b].join()):(I=I%(2*l)>l?1:0,r/=2,
n.push("A"+[B,B,0,I,1,J].join(),d.endCapRounding?"A"+[r,r,0,0,1,b].join():"L"+b.join(),"A"+[x,x,0,I,0,f].join(),d.startCapRounding?"A"+[r,r,0,0,1,C].join():""));n.push("z");q.setAttribute("d",n.join(" "));q.setAttribute("fill",d.color)},g=d=>{const f=2*(d.radius+d.thickness),b=d.__svg;d.setWidth(f);d.setHeight(f);b.setAttribute("viewBox","0 0 "+f+" "+f);b.setAttribute("width",f);b.setAttribute("height",f);a(d)},k=(d,f,b)=>{d[f]!==b&&(d[f]=b,d.inited&&(a(d),d.fireEvent(f,b)))},c=(d,f,b)=>{d[f]!==b&&
(d[f]=b=w(0,b),d.inited&&(g(d),d.fireEvent(f,b)))},h=(d,f)=>{d=document.createElementNS("http://www.w3.org/2000/svg",d);f?.appendChild(d);return d};t.Annulus=new JS.Class("Annulus",t.BackView,{initNode:function(d,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(d,f);g(this)},createOurDomElement:function(d){d=this.callSuper(d);var f=Array.isArray(d)?d[1]:d;f=this.__svg=h("svg",f);this.__path=h("path",f);f.style.pointerEvents=
"none";return d},setRadius:function(d){c(this,"radius",d)},setThickness:function(d){c(this,"thickness",d)},setStartAngle:function(d){k(this,"startAngle",d)},setEndAngle:function(d){k(this,"endAngle",d)},setStartCapRounding:function(d){k(this,"startCapRounding",d)},setEndCapRounding:function(d){k(this,"endCapRounding",d)},setColor:function(d){k(this,"color",d)},isColorAttr:function(d){return"color"===d||this.callSuper(d)}})})(myt);
(t=>{let w;const v=JS.Class,{mouse:u,windowResize:l,dragManager:e}=t.global,{min:a,max:g,round:k}=Math,c=b=>{if(b.tooltip){const q=b._lastPos;if(b.tooltip.parent.containsPoint(q.x,q.y))return!0}b.hideTip();return!1},h=t.BaseTooltip=new v("BaseTooltip",t.View,{include:[t.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(b,q){this.tipDelay=this.nextTipDelay=h.TIP_DELAY;this.tipHideDelay=h.TIP_HIDE_DELAY;q.visible??(q.visible=!1);this.callSuper(b,q)},setTooltip:function(b){this.inited&&
(this.tooltip=b)&&(this.attachToDom(u,"__hndl_mousemove","mousemove",!0),this.attachToDom(b.parent,"hideTip","mousedown",!0),this.attachToDom(b.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(b){const q=this;q._lastPos=t.MouseObservable.getMouseFromEvent(b);c(q)&&(q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID),q.__checkTID=setTimeout(()=>{delete q.__checkTID;c(q)&&q.showTip()},q.nextTipDelay))},hideTip:function(b){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(b=this.tooltip?.parent)this.detachFromDom(b,"hideTip","mousedown",!0),this.detachFromDom(b,"hideTip","mouseup",!0),this.detachFromDom(u,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){e.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),d=t.Tooltip=new v("Tooltip",h,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(b,q){q.edgeSize??(q.edgeSize=d.EDGE_SIZE);q.edgeColor??(q.edgeColor=d.EDGE_COLOR);q.shadowSize??(q.shadowSize=d.SHADOW_SIZE);q.shadowColor??(q.shadowColor=d.SHADOW_COLOR);q.insetH??(q.insetH=d.HORIZONTAL_INSET);q.insetV??(q.insetV=d.VERTICAL_INSET);q.tipBgColor??(q.tipBgColor=d.TIP_BG_COLOR);q.tipTextColor??(q.tipTextColor=d.TIP_TEXT_COLOR);this.callSuper(b,q);this._tipText=new t.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(b){this.edgeSize=b},setEdgeColor:function(b){this.edgeColor=b},setShadowSize:function(b){this.shadowSize=b},setShadowColor:function(b){this.shadowColor=b},setInsetH:function(b){this.insetH=b},setInsetV:function(b){this.insetV=b},setTipBgColor:function(b){this.tipBgColor=b},setTipTextColor:function(b){this.tipTextColor=b},showTip:function(){const b=this.tooltip;var q=b.text;const n=b.parent;var r=this._tipText;const x=this.edgeSize,B=this.shadowSize;r.text!==
q&&r.setText(q);r.setWidth("auto");var I=a(r.measureNoWrapWidth(),b.maxTextWidth);q=I+2*r.x;const z=q+2*x;r.setWidth(I);r.sizeViewToDom();I=n.getPagePosition();r=r.height+2*r.y;const C=r+2*x,J=I.y-C+("below"===b.tipvalign?n.height+C:0);I=I.x;switch(b.tipalign){case "right":I-=z;case "farright":I+=n.width;break;case "farleft":I-=z}this.setX(k(a(g(I,0),l.getWidth()-z)));this.setY(k(a(g(J,0),l.getHeight()-C)));this.setWidth(q);this.setHeight(r);this.setBgColor(this.tipBgColor);this.setBorder([x,"solid",
this.edgeColor]);this.setBoxShadow([B,B,B,this.shadowColor]);this.callSuper()}}),f=t.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:d,MAX_TEXT_WIDTH:280},setTooltip:function(b){this.callSuper("");this.set("tooltip",b,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(b){this.set("tipAlign",b,!0)},setTipValign:function(b){this.set("tipValign",b,!0)},setMaxTextWidth:function(b){this.set("maxTextWidth",b,!0)},setTipClass:function(b){this.set("tipClass",b,!0)},doSmoothMouseOver:function(b){const q=
this.getTooltip();this.callSuper(b);if(b&&q){b=this.tipClass??f.TIP_CLASS;!w||w instanceof b||(w.destroy(),w=null);if(!w){let n=document.getElementById("tooltipDiv");n||(n=t.DomElementProxy.createElement("div",{position:"absolute"}),t.getElement().appendChild(n));w=new b(n,{domId:"tooltipDiv"})}w.setTooltip({parent:this,text:q,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||f.MAX_TEXT_WIDTH})}}})})(myt);
(t=>{const w=Math,{min:v,max:u}=w;t.Path=new JS.Class("Path",{initialize:function(l){this.setVectors(l??[])},setVectors:function(l){this._boundingBox=null;this.vectors=l},copyFrom:function(l){this.vectors=l.vectors.slice();this._boundingBox=null},drawInto:function(l){l.beginPath();const e=this.vectors;let a=e.length,g=0;for(l.moveTo(e[g++],e[g++]);a>g;)l.lineTo(e[g++],e[g++]);l.closePath()},translate:function(l,e){const a=this.vectors;let g=a.length;for(;g;)a[--g]+=e,a[--g]+=l;this._boundingBox=null},
scale:function(l){const e=this.vectors;let a=e.length;for(;a;)e[--a]*=l,e[--a]*=l;this._boundingBox=null},rotate:function(l){const e=w.cos(l);l=w.sin(l);const a=this.vectors,g=a.length;for(let k=0;g>k;){const c=a[k]*e-a[k+1]*l,h=a[k]*l+a[k+1]*e;a[k++]=c;a[k++]=h}this._boundingBox=null},rotateAroundOrigin:function(l,e,a){this.translate(-e,-a);this.rotate(l);this.translate(e,a)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const l=this.vectors;let e=l.length,a,g,k,c;if(2<=
e){k=c=l[--e];for(a=g=l[--e];e;){const h=l[--e],d=l[--e];k=v(h,k);c=u(h,c);a=v(d,a);g=u(d,g)}return this._boundingBox={x:a,y:k,width:g-a,height:c-k}}return this._boundingBox=null},getCenter:function(){const l=this.getBoundingBox();return l?{x:l.x+l.width/2,y:l.y+l.height/2}:null},isPointInPath:function(l,e){"object"===typeof l&&(e=l.y,l=l.x);return t.Geometry.isPointInPath(l,e,this.getBoundingBox(),this.vectors)}})})(myt);
(t=>{const w=console.warn,v=Math.PI,u=v/2,l=3*v/2,e=t.AccessorSupport,a={};for(const g of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))a[g]=function(...k){this.__ctx[g](...k)};for(const g of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])a[g]=
function(...k){return this.__ctx[g](...k)};for(const g of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))a[e.generateSetterName(g)]=function(k){this.__ctx[g]=k},a[e.generateGetterName(g)]=function(){return this.__ctx[g]};t.Canvas=new JS.Class("Canvas",t.BackView,{include:[a],initNode:function(g,k){this.quickSet(["willReadFrequently"],k);this.callSuper(g,k)},
createOurDomElement:function(g){g=this.callSuper(g);var k=Array.isArray(g)?g[1]:g;const c=this.__cvs=document.createElement("canvas");c.className="mytUnselectable";k.appendChild(c);c.style.position="absolute";k={};this.willReadFrequently&&(k.willReadFrequently=!0);this.__ctx=c.getContext("2d",k);return g},setWidth:function(g){0>g&&(g=0);this.__cvs.setAttribute("width",g);this.callSuper(g)},setHeight:function(g){0>g&&(g=0);this.__cvs.setAttribute("height",g);this.callSuper(g)},clear:function(){const g=
this.__ctx;g.save();g.setTransform(1,0,0,1,0,0);g.clearRect(0,0,this.width,this.height);g.restore()},dataURItoBlob:function(g,k){g=atob(g.split(",")[1]);const c=g.length,h=[];for(let d=0;d<c;)h.push(g.charCodeAt(d++));return new Blob([new Uint8Array(h)],{type:k})},getDataURL:function(g,k){return this.__cvs.toDataURL(g,k)},getImageFile:function(g,k,c){switch(g){case "png":case "PNG":g="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":g="jpeg";c??=.5;break;default:w("Unexpected image type",
g),g=g.toLowerCase()}const h="image/"+g;c=this.dataURItoBlob(this.getDataURL(h,c),h);k&&(c.name=k+"."+g);return c},circle:function(g,k,c){this.__ctx.arc(g,k,c,0,2*v)},drawRoundedRect:function(g,k,c,h,d,f){const b=this.lineTo.bind(this),q=this.arc.bind(this);f=h+f;d=c+d;this.beginPath();this.moveTo(c,h+g);b(c,f-g);q(c+g,f-g,g,v,u,!0);b(d-g,f);q(d-g,f-g,g,u,0,!0);b(d,h+g);q(d-g,h+g,g,0,l,!0);b(c+g,h);q(c+g,h+g,g,l,v,!0);this.closePath();0<k&&(g-=k,c+=k,d-=k,h+=k,f-=k,this.moveTo(c,h+g),q(c+g,h+g,g,
v,l),b(d-g,h),q(d-g,h+g,g,l,0),b(d,f-g),q(d-g,f-g,g,0,u),b(c+g,f),q(c+g,f-g,g,u,v),this.closePath());return this},drawRectOutline:function(g,k,c,h,d){d=c+d;h=k+h;const f=k+g,b=h-g,q=c+g;g=d-g;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(k,c);n(k,d);n(h,d);n(h,c);n(k,c);n(f,q);n(b,q);n(b,g);n(f,g);n(f,q);this.closePath();return this},drawPartiallyRoundedRect:function(g,k,c,h,d,f,b,q){q=f+q;b=d+b;const n=this.lineTo.bind(this),r=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(d,
f+g);n(d,q-c);0<c&&r(d,q,d+c,q);n(b-h,q);0<h&&r(b,q,b,q-h);n(b,f+k);0<k&&r(b,f,b-k,f);n(d+g,f);0<g&&r(d,f,d,f+g);this.closePath();return this},drawAnnulus:function(g,k,c,h,d,f,b,q=60){const n=t.Color;for(var r of b)"string"===typeof r.color&&(r.color=n.makeColorFromHexString(r.color));1>q&&(w("Invalid segements",q),q=60);q=v/q;r=0;for(var x=b.length-1;r<x;){var B=b[r++];const {angle:y,color:A}=B,{angle:E,color:F}=b[r];var I=Math.round((E-y)/q),z=A.getDiffFrom(F);B.colorDelta={red:z.red/I,green:z.green/
I,blue:z.blue/I}}c=new t.Path([g+c,k,g+h,k]);c.rotateAroundOrigin(d,g,k);h=c.vectors;let [C,J,M,O]=h,m=0,p=v/360;for(r=0;f>d;){I=C;z=J;x=M;B=O;d+=q;d>f&&(q+=f-d,p=0,d=f);c.rotateAroundOrigin(q+p,g,k);[C,J,M,O]=h;this.beginPath();this.moveTo(I,z);this.lineTo(x,B);this.lineTo(M,O);this.lineTo(C,J);this.closePath();const {color:y,colorDelta:A}=b[r];this.setFillStyle(n.rgbToHex(y.red+m*A.red,y.green+m*A.green,y.blue+m*A.blue,!0));this.fill();0<p&&(c.rotateAroundOrigin(-p,g,k),[C,J,M,O]=h);m++;d>=b[r+
1].angle&&(m=0,r++)}return this}})})(myt);
(t=>{const {Class:w,Module:v}=JS,{View:u,Text:l}=t,e=t.FontAwesome.makeTag(["times"]);t.GrowlManager=new w("GrowlManager",u,{include:[t.RootView],initNode:function(a,g){const k=this;g.margin??(g.margin=8);g.spacing??(g.spacing=4);g.reverse??(g.reverse=!0);g.width??(g.width=300);g.visible??(g.visible=!1);g.pointerEvents??(g.pointerEvents="none");g.moveDuration??(g.moveDuration=300);k.quickSet(["moveDuration"],g);k.callSuper(a,g);k.doAlignment();const c=k.moveDuration;new t.SpacedLayout(k,{axis:"y",
reverse:k.reverse,spacing:k.spacing,collapseParent:!0},[{updateParent:function(h,d){0<c?(k.stopActiveAnimators("height"),k.animate({attribute:"height",to:d+this.outset-this.spacing,duration:c})):this.callSuper(h,d)},updateSubview:function(h,d,f,b){return 0<c?(d.stopActiveAnimators("y"),d.animate({attribute:"y",to:b,duration:c}),b+d.height+this.spacing):this.callSuper(h,d,f,b)}}])},setVisible:function(a){this.visible!==a&&(this.visible=a,this.getODS().display=a?"block":"none",this.inited&&this.fireEvent("visible",
a))},setMargin:function(a){this.set("margin",a,!0);this.getODS().margin=a+"px"},setSpacing:function(a){this.set("spacing",a,!0)},setReverse:function(a){this.set("reverse",a,!0)},doAlignment:function(){const a=this.getODS();a.left=null;a.right="0px"},notifyChanged:function(){this.setVisible(0<this.getSubviews().length)},subviewAdded:function(a){this.callSuper(a);this.notifyChanged()},subviewRemoved:function(a){this.callSuper(a);this.notifyChanged()},addGrowl:function(a){a.setParent(this);a.setVisible(!0)},
removeGrowl:function(a,g){g?a.destroy():a.setParent(null)},addSimpleGrowl:function(a,g){this.addGrowl(new t.SimpleGrowl(this,{text:a,...(g??{})}))}});t.KeepShowingMixin=new v("KeepShowingMixin",{include:[t.MouseOver],initNode:function(a,g){g.initialKeepDuration??(g.initialKeepDuration=-1);g.keepDuration??(g.keepDuration=-1);this.quickSet(["initialKeepDuration","keepDuration"],g);this.callSuper(a,g);a=this.initialKeepDuration;0<=a&&this.keepShowing(!1,a)},keepShowing:function(a,g){const k=this;g??=
k.keepDuration;(k.__keepShowing=a)&&k.__timerIdKS&&clearTimeout(k.__timerIdKS);0<=g&&!a&&(k.__timerIdKS=setTimeout(()=>{("function"===typeof k.isShown?k.isShown():k.visible)&&!k.__keepShowing&&("function"===typeof k.hide?k.hide(!0):k.setVisible(!1))},g))},doMouseOver:function(a){this.keepShowing(!0);this.callSuper(a)},doMouseOut:function(a){this.keepShowing(!1);this.callSuper(a)}});t.KeepShowingChildMixin=new v("KeepShowingChildMixin",{doMouseOver:function(a){this.callSuper(a);return!0},doMouseOut:function(a){this.callSuper(a);
return!0}});t.GrowlMixin=new v("GrowlMixin",{include:[t.SizeToParent,t.KeepShowingMixin],initNode:function(a,g){g.percentOfParentWidth??(g.percentOfParentWidth=100);g.pointerEvents??(g.pointerEvents="auto");g.overflow??(g.overflow="hidden");g.bgColor??(g.bgColor="#fff");g.roundedCorners??(g.roundedCorners=3);g.boxShadow??(g.boxShadow=[0,0,8,"#00000088"]);g.initialKeepDuration??(g.initialKeepDuration=5E3);g.keepDuration??(g.keepDuration=1E3);g.showDuration??(g.showDuration=300);g.hideDuration??(g.hideDuration=
300);this.quickSet(["showDuration","hideDuration"],g);g.opacity=0;g.visible=!1;this.callSuper(a,g)},setVisible:function(a){const g=this;g.inited?(g.stopActiveAnimators("opacity"),a?(g.animate({attribute:"opacity",to:1,duration:g.showDuration}),g.callSuper(a)):g.animate({attribute:"opacity",to:0,duration:g.hideDuration}).next(k=>{g.parent.removeGrowl(g,!0)})):g.callSuper(a)}});t.SimpleGrowl=new w("SimpleGrowl",u,{include:[t.GrowlMixin],initNode:function(a,g){const k={};g.spacing??(g.spacing=6);g.padding??
(g.padding=12);g.whiteSpace??(g.whiteSpace="normal");g.iconSize??(g.iconSize="24px");g.showCloseButton??(g.showCloseButton=!1);g.showCloseButton&&(g.closeIcon??(g.closeIcon=e),g.closeOnly??(g.closeOnly=!1));for(const c of"icon iconSize text padding spacing whiteSpace showCloseButton closeIcon closeOnly".split(" "))k[c]=g[c],delete g[c];k.closeOnly&&(g.initialKeepDuration=g.keepDuration=-1);this.callSuper(a,g);({padding:a}=k);k.icon&&new l(this,{y:a,text:k.icon,fontSize:k.iconSize});new l(this,{y:a,
text:k.text,whiteSpace:k.whiteSpace,layoutHint:1});k.showCloseButton&&this.makeCloseButton(k);new t.ResizeLayout(this,{inset:a,spacing:k.spacing,outset:a});new t.SizeToChildren(this,{axis:"y",paddingY:a})},makeCloseButton:function(a){const g=this;new t.TextButton(g,{y:a.padding,text:a.closeIcon,width:24,height:24,paddingTop:4,activeColor:"#ccc",hoverColor:"#ddd",readyColor:"#eee"},[t.KeepShowingChildMixin,{doActivated:()=>{g.parent.removeGrowl(g,!0)}}])}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
