(r=>{let w;var t=a=>{let e,d=a.length;for(;d;)if(e=a[--d],w=e.ver??e.id,e.str&&e.str.includes(e.sub)||e.prop)return e.id};var m=a=>{const e=a.indexOf(w);if(0<=e)return parseFloat(a.slice(e+w.length+1))};const h=navigator.userAgent,b=navigator.platform;m=r.BrowserDetect={browser:t([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:h,sub:"Firefox",id:"Firefox"},{str:h,sub:"Chrome",id:"Chrome"},{str:h,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:m(h)||m(navigator.appVersion)||"UNKNOWN",os:t([{str:h,sub:"iPhone",id:"iPhone/iPod"},{str:b,sub:"Linux",id:"Linux"},{str:b,sub:"Mac",id:"Mac"},{str:b,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(m.browser){case "Chrome":case "Safari":r="WebKit";break;case "Explorer":r="MS";break;case "Firefox":r="Moz";break;case "Opera":r="O";break;default:r="UNKNOWN"}t=r.toLowerCase();m.prefix={dom:r,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const r=Math,w=r.abs,t=r.floor,m=r.ceil,h="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),b="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d=g=>(10>g?"0":"")+g,f=(g,q)=>{g=g.getTimezoneOffset();return(0<g?"-":"+")+d(t(w(g/60)))+(q?":":"")+(0==w(g%60)?"00":d(w(g%60)))},l=
{d:g=>d(g.getDate()),D:g=>a[g.getDay()],j:g=>g.getDate(),l:g=>e[g.getDay()],N:g=>0==g.getDay()?7:g.getDay(),S:g=>{g=g.getDate();return 1==g%10&&11!=g?"st":2==g%10&&12!=g?"nd":3==g%10&&13!=g?"rd":"th"},w:g=>g.getDay(),z:g=>{const q=new Date(g.getFullYear(),0,1);return m((g-q)/864E5)},W:g=>{const q=new Date(g.valueOf());g=(g.getDay()+6)%7;q.setDate(q.getDate()-g+3);g=q.valueOf();q.setMonth(0,1);4!==q.getDay()&&q.setMonth(0,1+(4-q.getDay()+7)%7);return d(1+m((g-q)/6048E5))},F:g=>b[g.getMonth()],m:g=>
d(g.getMonth()+1),M:g=>h[g.getMonth()],n:g=>g.getMonth()+1,t:g=>{let q=g.getFullYear();g=g.getMonth()+1;12===g&&(q=q++,g=0);return(new Date(q,g,0)).getDate()},L:g=>{g=g.getFullYear();return 0==g%400||0!=g%100&&0==g%4},o:g=>{const q=new Date(g.valueOf());q.setDate(q.getDate()-(g.getDay()+6)%7+3);return q.getFullYear()},Y:g=>g.getFullYear(),y:g=>(""+g.getFullYear()).substr(2),a:g=>12>g.getHours()?"am":"pm",A:g=>12>g.getHours()?"AM":"PM",B:g=>t(1E3*((g.getUTCHours()+1)%24+g.getUTCMinutes()/60+g.getUTCSeconds()/
3600)/24),g:g=>g.getHours()%12||12,G:g=>g.getHours(),h:g=>d(g.getHours()%12||12),H:g=>d(g.getHours()),i:g=>d(g.getMinutes()),s:g=>d(g.getSeconds()),e:g=>/\((.*)\)/.exec((new Date).toString())[1],I:g=>{let q=null,c=0;for(;12>c;){const p=(new Date(g.getFullYear(),c++,1)).getTimezoneOffset();if(null===q)q=p;else if(p<q){q=p;break}else if(p>q)break}return g.getTimezoneOffset()==q|0},O:g=>f(g,!1),P:g=>f(g,!0),T:g=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:g=>60*-g.getTimezoneOffset(),c:g=>g.format("Y-m-d\\TH:i:sP"),
r:g=>g.toString(),U:g=>g.getTime()/1E3};return function(g){return g.replace(/(\\?)(.)/g,(q,c,p)=>""===c&&l[p]?l[p](this):p)}})();
(r=>{const w=(p,v)=>{var k=p.__mct__[v];if(k)return k.slice();let y;if(k=p.__anc__)y=k.slice();else{y=[];const E=H=>{const A=H.__inc__,u=A.length;for(let n=0;n<u;)E(A[n++]);y.includes(H)||y.push(H)};E(p);p.__anc__=y.slice()}k=y.length;const B=[];for(let E=0;E<k;){const H=y[E++].__fns__;H.hasOwnProperty(v)&&B.push(H[v])}p.__mct__[v]=B.slice();return B},t=(p,v)=>{const k=p.callable;return p.__hs?function(){const y=this.callSuper,B=this.hasOwnProperty("callSuper"),E=w(v,p.name);let H=E.length-1;if(0===
H)delete this.callSuper;else{const u=Array.from(arguments),n=this.callSuper=(...x)=>{let z=x.length;for(;z;)u[--z]=x[z];0===--H&&delete this.callSuper;x=E[H].callable.apply(this,u);this.callSuper=n;H++;return x}}const A=k.apply(this,arguments);B?this.callSuper=y:delete this.callSuper;return A}:k},m=(p,v)=>{v=v??p;if(v===p){p.__anc__=null;p.__mct__={};for(var k=p.__dep__.length;k;)m(p.__dep__[--k])}if(k=v.__tgt__){var y=p.__inc__;p=p.__fns__;const B=y.length;for(let E=0;E<B;)m(y[E++],v);for(const E in p)y=
p[E],y=y instanceof d?t(y,v):y,k[E]!==y&&(k[E]=y)}},h=p=>p.__meta__??(p.__meta__=new f("",null,{_target:p})).include(p.klass,{_rslv:!1}),b=p=>"function"!==typeof p||p.__fns__&&p.__inc__,a=p=>{const v=function(...k){return this.initialize(...k)??this};v.prototype=Object.create(p.prototype);return v},e=(p,v,k)=>k&&k.__inc__&&k.__fns__||"function"!==typeof k?k:new d(p,v,k),d=a(Object),f=r.Module=a(Object);d.prototype.initialize=function(p,v,k){this.module=p;this.name=v;this.callable=k;this.__hs=k.toString().includes("callSuper")};
var l=f.prototype;l.initialize=function(p,v,k){this.__inc__=[];this.__dep__=[];this.__fns__={};this.__tgt__=(k??{})._target;this.__mct__={};p&&(this.__displayName=p);this.include(v,{_rslv:!1})};l.include=function(p,v){if(p){if(p.__fns__&&p.__inc__)this.__inc__.push(p),p.__dep__.push(this);else{var k=p.extend,y=p.include;k&&b(k)&&this.extend(k);if(y&&b(y)){k=y.length;const B={_rslv:!1};for(let E=0;E<k;)this.include(y[E++],B)}for(const B of Object.keys(p))if(y=p[B],"extend"!==B&&"include"!==B||!b(y))this.__fns__[B]=
e(this,B,y)}!1!==(v??{})._rslv&&m(this)}return this};l.includes=function(p){if(p===this)return!0;const v=this.__inc__,k=v.length;for(let y=0;y<k;)if(v[y++].includes(p))return!0;return!1};l.instanceMethod=function(p){return w(this,p).pop()};const g=new f("Kernel",{extend:function(p){h(this).include(p)},isA:function(p){return"function"===typeof p&&this instanceof p||h(this).includes(p)}}),q=r.Class=a(f),c=q.prototype;c.initialize=function(p,v,k){"function"!==typeof v&&(k=v,v=Object);f.prototype.initialize.call(this,
p);p=a(v);for(var y in this)p[y]===this[y]||p.hasOwnProperty(y)||(p[y]=this[y]);p.prototype.constructor=p.prototype.klass=p;h(p).include(v.__meta__);p.__tgt__=p.prototype;y={_rslv:!1};v=v===Object?{}:v.__fns__?v:new f(v.prototype,y);p.include(g,y).include(v,y).include(k,y);m(p);return p};l=(p,v)=>{p.__inc__=[];p.__dep__=[];const k=p.__tgt__=p.prototype,y=p.__fns__={};for(const B of Object.keys(k))y[B]=e(p,B,k[B]);k.constructor=k.klass=p;for(const B in c)p[B]===c[B]||p.hasOwnProperty(B)||(p[B]=c[B]);
p.include(v);p.constructor=p.klass=q};l(d,g);l(f,g);l(q,f);m(h(d));m(h(f));h(q).include(f.__meta__);r.Singleton=new q("Singleton",{initialize:(p,v,k)=>new (new q(p,v,k))})})(global.JS={});
(r=>{class w extends Error{constructor(A,u,...n){super(...n);this.name="FetchError";this.status=A;this.url=u}}let t=0,m;const h=Math,b=h.abs,a=h.min,e=h.max,d=h.pow,f=document,l=f.head,g=f.createElement.bind(f),q={},c={"":!0},p=f.fonts,v=A=>{const u=A.family.split('"').join("");[u,u+" "+A.weight].forEach(n=>{if(!c[n]){c[n]=!0;const x=q[n]??[];for(;x.length;)(n=x.pop())&&!n.destroyed&&n.sizeViewToDom()}})},k={},y=A=>{const u={};return(...n)=>{const x=JSON.stringify(n);return x in u?u[x]:u[x]=A(...n)}},
B=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,E=/\$(\d+)/g,H=r.myt={version:2.02305071717E7,generateGuid:()=>++t,hash:A=>A.split("").reduce((u,n)=>{u=(u<<5)-u+n.charCodeAt(0);return u&u},0),addEventListener:(A,u,n,x,z)=>{A.addEventListener(u,n,{capture:x||!1,passive:z||!1})},removeEventListener:(A,u,n,x)=>{A.removeEventListener(u,n,x||!1)},resolveName:(A,u)=>{if(A&&0!==A.length){u=u??global;var n=Array.isArray(A)?A:A.split("."),x=n.length;for(let z=0;z<x;z++)if(u=u[n[z]],null==u){console.warn("resolveName failed for",
A,"at part",z,n[z]);return}return u}},resolveClassname:A=>{"string"===typeof A&&(A=H.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,u,n){const x=this._loadedScripts??(this._loadedScripts={});if(x[A])return console.warn("script already loaded for src",A),null;x[A]=!0;const z=g("script");z.type="text/javascript";z.async=!1;if(u){let F=!1;z.onload=z.onreadystatechange=()=>{F||z.readyState&&
"complete"!==z.readyState||(F=!0,z.onload=z.onreadystatechange=null,u())}}z.src=A+(n?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());l.appendChild(z);return z},dumpStack:(A,u)=>{let n;"string"===typeof A&&(n=A,A=null);H.global.error.notify(u||"error",null,n,A)},getRandom:A=>{const u=h.random();return A?e(0,a(A(u),.9999999999)):u},getRandomArbitrary:(A,u,n)=>{const x=a(A,u);return H.getRandom(n)*(e(A,u)-x)+x},getRandomInt:(A,u,n)=>{const x=a(A,u);return h.floor(H.getRandom(n)*(e(A,u)-x+1)+x)},
areFloatsEqual:(A,u,n)=>{const x=b(A),z=b(u);return b(A-u)<=(x>z?z:x)*(null==n?1E-6:b(n))},areArraysEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;let n=A.length;if(n!==u.length)return!1;for(;n;)if(A[--n]!==u[n])return!1}return!0},areObjectsEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;for(const n in A)if(A[n]!==u[n])return!1;for(const n in u)if(A[n]!==u[n])return!1}return!0},getElement:(A,u)=>f.getElementsByTagName(A||"body")[0<u?u:0],loadFontFaces:(A,u)=>{const n=[];A.forEach(x=>{x=
new FontFace(x.family,"url("+x.url+")",x.options);n.push(x.load())});Promise.all(n).then(x=>{x.forEach(z=>{p.add(z);v(z)});u&&u(x)})},loadFontFace:(A,u,n={},x)=>{A=new FontFace(A,"url("+u+")",n);A.loaded.then(z=>{p.add(z);v(z);x&&x(z)});A.load()},registerForFontNotification:(A,u)=>{c[u]?A&&!A.destroyed&&A.sizeViewToDom():(q[u]??(q[u]=[])).push(A)},createBaseFontCSSRule:A=>{H.addCSSRule(H.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{(A??[]).forEach(H.createStylesheetLink)},
createStylesheetLink:A=>{const u=g("link");u.rel="stylesheet";A&&(u.href=A);l.appendChild(u);return u},createStylesheet:()=>{const A=g("style");l.appendChild(A);return A.sheet},addCSSRule:(A,u,n,x)=>{"insertRule"in A?A.insertRule(u+"{"+n+"}",x):"addRule"in A&&A.addRule(u,n,x)},removeCSSRules:A=>{let u=A.cssRules.length;for(;u;)u--,"deleteRule"in A?A.deleteRule(u):"removeRule"in A&&A.removeRule(u)},createInputPlaceholderCSSRule:(A,u,n,x=1)=>{var z=A.getODE();z=z.id||(z.id="id"+H.generateGuid());let F=
A.__sheet;F?H.removeCSSRules(F):F=A.__sheet=H.createStylesheet();A=[];u&&A.push("color:"+u);n&&A.push("font-family:"+n);x&&A.push("opacity:"+x);H.addCSSRule(F,"#"+z+"::placeholder",A.join("; "),0)},chainSortFunc:(A,u)=>(n,x)=>{const z=A(n,x);return 0===z?u(n,x):z},getAlphaObjSortFunc:y((A,u,n,x)=>{const z=u?1:-1;return(F,I)=>{F=F[A];I=I[A];x?("string"!==typeof F&&(F=""+F),"string"!==typeof I&&(I=""+I)):(F=F||"",I=I||"");n&&(F=F.toLowerCase(),I=I.toLowerCase());return F.localeCompare(I)*z}}),getNumericObjSortFunc:y((A,
u)=>{const n=u?1:-1;return(x,z)=>{x=x[A]||0;z=z[A]||0;return(x-z)*n}}),formatAsPercentage:(A,u=2)=>{if("number"===typeof A)return u=a(16,e(0,u)),A=h.round(e(0,a(1,A))*d(10,2+u))/d(10,u),(0===A%1?A:A.toFixed(u))+"%";"string"!==typeof A&&console.warn("formatAsPercentage: expects a number");return A},memoize:y,debounce:function(A,u,n){const x="__DBTO_"+this.generateGuid();return function(){const z=this,F=z[x],I=arguments,K=n&&!F;clearTimeout(F);z[x]=setTimeout(function(){z[x]=null;n||A.apply(z,I)},u);
K&&A.apply(z,I)}},createFixedThresholdCounter:(A,u,n,x)=>{var z=H.AccessorSupport.generateName;const F="function"===typeof A||A instanceof JS.Module,I={};x=x||z("counter",n);const K=z(x,"increment");z=z(x,"decrement");if(void 0!==(F?A.instanceMethod(K):A[K]))return console.warn("Increment: Abort clobber",K,A),!1;if(void 0!==(F?A.instanceMethod(z):A[z]))return console.warn("Decrement: Abort clobber",z,A),!1;I[K]=function(){const J=this[x]+1;this[x]=J;this.fireEvent(x,J);J===u&&this.set(n,!0)};I[z]=
function(){const J=this[x];if(0!==J){var M=J-1;this[x]=M;this.fireEvent(x,M);J===u&&this.set(n,!1)}};A[F?"include":"extend"](I);return!0},makeURLSearchParams:(A={})=>{const u=new URLSearchParams;for(const n in A){const x=A[n];void 0!==x&&u.set(n,x)}return u},doFetch:(A,u,n,x,z,F)=>fetch(A,u).then(I=>{if(!I.ok)throw new w(I.status,A,I.statusText);return I}).then(I=>n?I.text():I.json()).then(I=>{if(x)try{if(n)x(I);else{if(!1===I.success)throw new w(200,A,I.message);x(I.data)}}catch(K){throw I=new w(200,
A,K.message),I.stack=K.stack,I;}}).catch(I=>{if(z){if("FetchError"!==I.name){const K=new w(0,A,I.message);K.stack=I.stack;I=K}z(I)}}).finally(()=>{F&&F()}),I18N:{setLocale:A=>{m=A},getLocale:()=>m,addDictionary:(A,u)=>{k[u]=Object.assign(k[u]||{},A)},get:(A,...u)=>{var n=m||=(navigator.language||"en").split("-")[0].toLowerCase();n=(k[n]||k.en||{})[A];return null!=n?0<u.length?n.replaceAll(B,(x,z,F,I)=>F&&I?1==u[parseInt(z)]?F:I:"").replaceAll(E,(x,z)=>u[z]):n:A}}};p.onloadingdone=A=>{A.fontfaces.forEach(u=>
{v(u)})}})(global);
(r=>{const w=Object.assign,t=(h,b)=>{'"'===h.charAt(0)&&(h=h.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return b?JSON.parse(h):h}catch(a){}},m=r.Cookie={defaults:{raw:!1,json:!1},read:(h,b)=>{b=w({},m.defaults,b);const a=b.raw?g=>g:g=>decodeURIComponent(g.split("+").join(" "));b=b.json;const e=document.cookie.split("; "),d=e.length,f=h?void 0:{};for(let g=0;g<d;){var l=e[g++].split("=");const q=a(l.shift());l=a(l.join("="));if(h){if(h===q)return t(l,b)}else f[q]=t(l,b)}return f},write:(h,
b,a)=>{a=w({},m.defaults,a);if("number"===typeof a.expires){const e=a.expires,d=a.expires=new Date;d.setDate(d.getDate()+e)}b=a.json?JSON.stringify(b):String(b);return document.cookie=[a.raw?h:encodeURIComponent(h),"=",a.raw?b:encodeURIComponent(b),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.samesite?"; samesite="+a.samesite:"",a.secure?"; secure":""].join("")},remove:(h,b)=>void 0!==m.read(h,b)?(m.write(h,"",w({},b,{expires:-1})),
!0):!1}})(myt);
(r=>{const w=global.localStorage,t=(h,b,a)=>{if(0<b){const e="__timerId_"+a;(a=m[e])&&clearTimeout(a);m[e]=setTimeout(()=>{h();delete m[e]},b)}else h()},m=r.LocalStorage={hasDatum:(h,b)=>{if(h&&(b=m.getItem(b??"myt")))try{return null!=JSON.parse(b)[h]}catch(a){console.error(a)}return!1},getDatum:(h,b)=>{if(h&&(b=m.getItem(b??"myt")))try{const a=JSON.parse(b);if("object"===typeof a)return a[h]}catch(a){console.error(a)}},setDatum:(h,b,a,e)=>{a=a??"myt";t(()=>{const d=m.getData(a);d[h]=b;m.setItem(a,
JSON.stringify(d))},e,a+"___"+h)},removeDatum:(h,b,a)=>{b=b??"myt";t(()=>{const e=m.getData(b);delete e[h];m.setItem(b,JSON.stringify(e))},a,b+"___"+h)},hasData:h=>null!=m.getItem(h??"myt"),getData:h=>{if(h=m.getItem(h??"myt"))try{return JSON.parse(h)}catch(b){console.error(b)}return{}},setData:(h,b,a)=>{b=b??"myt";h??={};return"object"===typeof h?(t(()=>{m.setItem(b,JSON.stringify(h))},a,b),!0):!1},removeData:(h,b)=>{h=h??"myt";t(()=>{m.removeItem(h)},b,h)},getLength:()=>w.length,getKey:h=>w.key(h),
getItem:h=>w.getItem(h),setItem:(h,b)=>{w.setItem(h,b)},removeItem:h=>{w.removeItem(h)},clear:()=>{w.clear()},get:h=>m.getItem(h),set:(h,b)=>{m.setItem(h,b)},remove:h=>{m.removeItem(h)},clearAll:()=>{m.clear()}}})(myt);
(r=>{const w=/(?:^|&)([^&=]*)=?([^&]*)/g,t=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;r.URI=new JS.Class("URI",{initialize:function(h,b){h&&this.parse(h,b)},setSource:function(h){this.source=h},setProtocol:function(h){this.protocol=
h},setAuthority:function(h){this.authority=h},setUserInfo:function(h){this.userInfo=h},setUser:function(h){this.user=h},setPassword:function(h){this.password=h},setHost:function(h){this.host=h},setPort:function(h){this.port=h},setRelative:function(h){this.relative=h},setPath:function(h){this.path=h},setDirectory:function(h){this.directory=h},setFile:function(h){this.file=h},setQuery:function(h){this.query=h},setAnchor:function(h){this.anchor=h},parse:function(h,b){const a=this;h=(b?m:t).exec(h);a.setSource(h[0]??
"");a.setProtocol(h[1]??"");a.setAuthority(h[2]??"");a.setUserInfo(h[3]??"");a.setUser(h[4]??"");a.setPassword(h[5]??"");a.setHost(h[6]??"");a.setPort(h[7]??"");a.setRelative(h[8]??"");a.setPath(h[9]??"");a.setDirectory(h[10]??"");a.setFile(h[11]??"");a.setQuery(h[12]??"");a.setAnchor(h[13]??"");a.queryPairs={};a.query.replace(w,(e,d,f)=>{d&&(a.queryPairs[d]=f)})},decodeQueryParam:h=>decodeURIComponent(h).split("+").join(" "),getQuery:function(){var h=this.queryPairs;const b=[];for(const a in h)b.push(a+
"="+encodeURIComponent(this.getQueryParam(a)));h=b.join("&");return 0<h.length?"?"+h:h},getQueryParam:function(h){h=this.queryPairs[h];return null==h?void 0:this.decodeQueryParam(h)},setQueryParam:function(h,b){this.queryPairs[encodeURIComponent(h)]=encodeURIComponent(b)},removeQueryParam:function(h){delete this.queryPairs[h]},getPathParts:function(h){const b=this.path.split("/");if(!h)for(h=b.length;h;)0===b[--h].length&&b.splice(h,1);return b},toString:function(h){const b=this.path;h=h?this.query?
"?"+this.query:"":this.getQuery();const a=this.anchor;let e=this.toStringThroughPort();b?e+=b:this.host&&(h||a)&&(e+="/");h&&(e+=h);a&&(e+="#"+a);return e},toStringThroughPort:function(){const h=this.protocol,b=this.host,a=this.userInfo,e=this.port;let d="";h&&(d+=h+"://");a&&b&&(d+=a+"@");b&&(d+=b,e&&(d+=":"+e));return d}})})(myt);
(r=>{const w=Math,t=w.PI,m=w.cos,h=w.sin,b=w.sqrt,a=r.Geometry={getClosestPointOnALineToAPoint:(e,d,f,l,g,q,c)=>{f-=e;l-=d;g=(f*(g-e)+l*(q-d))/(f*f+l*l);c&&(g=w.min(1,w.max(0,g)));return{x:e+f*g,y:d+l*g}},isPointInPath:(e,d,f,l)=>{"object"===typeof e&&(l=f,f=d,d=e.y,e=e.x);if(a.rectContainsPoint(e,d,f)&&(f=l.length,6<=f)){let g=!1,q=l[0],c=l[1],p,v;for(;f;)v=l[--f],p=l[--f],v>d!==c>d&&e<(q-p)*(d-v)/(c-v)+p&&(g=!g),q=p,c=v;return g}return!1},rectContainsPoint:(e,d,f,l,g,q)=>{"object"===typeof e&&(q=
g,g=l,l=f,f=d,d=e.y,e=e.x);"object"===typeof f&&(q=f.height,g=f.width,l=f.y,f=f.x);return e>=f&&d>=l&&e<=f+g&&d<=l+q},circleContainsPoint:(e,d,f,l,g)=>a.measureDistance(e,d,f,l,!0)<=g*g,measureDistance:(e,d,f,l,g)=>{e=f-e;d=l-d;d=e*e+d*d;return g?d:b(d)},degreesToRadians:e=>e*t/180,radiansToDegrees:e=>180*e/t,circleContainsLatLng:(e,d,f,l,g,q)=>a.measureLatLngDistance(e,d,f,l,q)<=g,measureLatLngDistance:(e,d,f,l,g)=>{void 0===g&&(g=6371);e=a.degreesToRadians(e);d=a.degreesToRadians(d);f=a.degreesToRadians(f);
l=a.degreesToRadians(l);return g*w.acos(h(e)*h(f)+m(e)*m(f)*m(l-d))},polarToCartesian:(e,d,f,l)=>{f??=0;l??=0;d%=360;if(0===d)d=e,e=0;else if(90===d)d=0;else if(180===d)d=-e,e=0;else if(270===d)d=0,e=-e;else{const g=a.degreesToRadians(d);d=e*m(g);e*=h(g)}return[f+d,l+e]},cartesianToPolar:(e,d,f,l,g)=>{f??=0;l??=0;e-=f;l=d-l;d=b(e*e+l*l);l=w.atan2(l,e);0>l&&(l+=2*t);return[d,g?l:a.radiansToDegrees(l)]}}})(myt);
(r=>{const w=JS.Module;r.Observable=new w("Observable",{attachObserver:function(t,m,h){return t&&m&&h?(this.getObservers(h).push(m,t),!0):!1},detachObserver:function(t,m,h){if(t&&m&&h){var b=this.__obsbt;if(b&&(h=b[h])){b=!1;for(let a=h.length-2;0<=a;a-=2){const [e,d]=h.slice(a);t===d&&m===e&&(h.splice(a,2),b=!0)}return b}}return!1},detachAllObservers:function(){const t=this.__obsbt;if(t)for(const m in t){const h=t[m];for(let b=h.length-2;0<=b;b-=2){const [a,e]=h.slice(b);e&&a&&("function"===typeof e.detachFrom&&
e.detachFrom(this,a,m)||h.splice(b,2))}}},getObservers:function(t){let m;return(m=this.__obsbt??(this.__obsbt={}))[t]??(m[t]=[])},hasObservers:function(t){const m=this.__obsbt;return m?(t=m[t])&&0<t.length:!1},createEvent:function(t,m){return{source:this,type:t,value:m}},fireEvent:function(t,m,h){if(h=h??(this.hasObservers(t)?this.__obsbt[t]:null)){const b={source:this,type:t,value:m},a=this.__aet??(this.__aet=new Set);if(a.has(t))r.global.error.notify("warn","eventLoop","Abort refiring event:"+t,
null,{observable:this,type:t,value:m});else{a.add(t);for(m=h.length-2;0<=m;m-=2){const [e,d]=h.slice(m);if(d&&e)try{if("function"===typeof e){if(e.call(d,b))break}else if(d[e](b))break}catch(f){r.dumpStack(f),console.log("Additional context",e,d)}}a.delete(t)}}}});r.Observer=new w("Observer",{valueFromEvent:t=>t&&"object"===typeof t&&t.type?t.value:t,syncTo:function(t,m,h,b,a){b??=h;try{this[m](t.createEvent(h,t.get(b)))}catch(e){r.dumpStack(e)}a||this.attachTo(t,m,h,a)},isAttachedTo:function(t,m,
h){if(t&&m&&h){var b=this.__obt;if(b&&(h=b[h]))for(b=h.length-2;0<=b;b-=2){const [a,e]=h.slice(b);if(t===e&&m===a)return!0}}return!1},getObservables:function(t){let m;return(m=this.__obt??(this.__obt={}))[t]??(m[t]=[])},hasObservables:function(t){const m=this.__obt;return m?(t=m[t])&&0<t.length:!1},attachTo:function(t,m,h,b){if(t&&m&&h){const a=this.getObservables(h);if(b){const e=this,d=m;this.__methodNameCounter??(this.__methodNameCounter=0);m="__DO_ONCE_"+this.__methodNameCounter++;this[m]=f=>
{e.detachFrom(t,m,h);delete e[m];return e[d](f)}}if(t.attachObserver(this,m,h))return a.push(m,t),!0}return!1},detachFrom:function(t,m,h){if(t&&m&&h){var b=this.__obt;if(b&&(b=b[h])){let a=!1;for(let e=b.length-2;0<=e;e-=2){const [d,f]=b.slice(e);t===f&&m===d&&t.detachObserver(this,m,h)&&(b.splice(e,2),a=!0)}return a}}return!1},detachFromAllObservables:function(){var t=this.__obt;if(t)for(const [m,h]of Object.entries(t)){for(t=h.length-2;0<=t;t-=2){const [b,a]=h.slice(t);a.detachObserver(this,b,m)}h.length=
0}},constrain:function(t,m){if(t&&m){const b=m.length;if(0!==b%2)console.log("Observables uneven",this);else{var h;const a=(h=this.__cbmn??(this.__cbmn={}))[t]??(h[t]=[]);if(0<a.length)console.log("Constraint exists for "+t+" on "+this);else{for(h=0;h<b;h+=2){const [e,d]=m.slice(h);e&&d&&(this.attachTo(e,t,d),a.push(e,d))}try{this[t]()}catch(e){r.dumpStack(e)}}}}},releaseConstraint:function(t){if(t){var m=this.__cbmn;if(m&&(m=m[t])){for(let h=m.length;0<=h;h-=2){const [b,a]=m.slice(h);this.detachFrom(b,
t,a)}m.length=0}}},releaseAllConstraints:function(){const t=this.__cbmn;if(t)for(const m in t)this.releaseConstraint(m)}})})(myt);
myt.global=new JS.Singleton("Global",{include:[myt.Observable],initialize:()=>{},register:function(r,w){this.hasOwnProperty(r)&&(console.warn("Global key in use",r),this.unregister(r));this[r]=w;this.fireEvent("register"+r,w)},unregister:function(r){if(this.hasOwnProperty(r)){const w=this[r];delete this[r];this.fireEvent("unregister"+r,w)}else console.warn("Global key not in use",r)}});
new JS.Singleton("GlobalError",{include:[myt.Observable],initialize:function(){this.setStackTraceLimit(50);this.setConsoleLogging(!0);myt.global.register("error",this)},setConsoleLogging:function(r){this.consoleLogging=r},setStackTraceLimit:function(r){Error.stackTraceLimit=this.stackTraceLimit=r},notify:function(r,w,t,m,h){m||=Error(t??w);m=m.stack??m.stacktrace;t={msg:t,stacktrace:m};h&&Object.assign(t,h);this.fireEvent(w??"error",t);if(this.consoleLogging&&r)console[r](m)}});
(r=>{const w=global,t=w.getComputedStyle,m=document,h=Math.max,b=r.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(a,e,d)=>{a=m.createElement(a);if(d)for(const f in d)a[f]=d[f];if(e)for(const f in e)a.style[f]=e[f];return a},isDomElementVisible:a=>{if("INPUT"===a.nodeName&&"hidden"===a.type)return!1;for(;a;){if(a===m)return!0;const e=t(a);if("none"===e.display||"hidden"===e.visibility)break;a=a.parentNode}return!1},getZIndexRelativeToAncestor:(a,e)=>{if(a&&e)for(a=b.getAncestorArray(a,
e),e=a.length-1;e;){const d=t(a[--e]),f=d.zIndex,l="auto"===f;if(0===e||!l||1!==parseInt(d.opacity,10))return l?0:parseInt(f,10)}return 0},getAncestorArray:(a,e)=>{const d=[];for(;a;){d.push(a);if(a===e)break;a=a.parentNode}return d},getHighestZIndex:a=>{var e=t(a);let d=e.zIndex;var f="auto"===d;if(f&&1===parseInt(e.opacity,10))for(d=0,a=a.childNodes,e=a.length;e;)f=a[--e],1===f.nodeType&&(d=h(d,b.getHighestZIndex(f)));else d=f?0:parseInt(d,10);return d},getRelativePosition:(a,e)=>{if(a){let d=0,
f=0;for(;a&&"BODY"!==a.nodeName&&a!==e;)if(d+=a.offsetLeft,f+=a.offsetTop,(a=a.offsetParent)&&"BODY"!==a.nodeName){const l=t(a);d+=parseInt(l.borderLeftWidth,10)-a.scrollLeft;f+=parseInt(l.borderTopWidth,10)-a.scrollTop}return{x:d,y:f}}},getTruePosition:a=>{if(a)return a=a.getBoundingClientRect(),{x:a.left+w.scrollX,y:a.top+w.scrollY}},simulateDomEvent:(a,e,d)=>{if(a){const f={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},l={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(d)for(const q in d)f[q]=d[q];let g;for(const q in l)if(l[q].test(e)){g=q;break}if(!g)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(m.createEvent)d=m.createEvent(g),"HTMLEvents"===g?d.initEvent(e,f.bubbles,f.cancelable):d.initMouseEvent(e,f.bubbles,f.cancelable,m.defaultView,f.button,f.pointerX,f.pointerY,f.pointerX,f.pointerY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,null),a.dispatchEvent(d);
else{f.clientX=f.pointerX;f.clientY=f.pointerY;d=m.createEventObject();for(const q in f)d[q]=f[q];a.fireEvent("on"+e,d)}}},getScrollbarSize:r.memoize(()=>{const a=m.body,e=b.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});a.appendChild(e);const d=e.offsetWidth-e.clientWidth;a.removeChild(e);return d})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(a){const e=
Array.isArray(a),d=this.__oE=e?a[0]:a;a=this.__iE=e?a[1]:a;this.__iS=a.style;this.__oS=d.style;a.model=d.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(a){this.__iE.className=this.domClass=a},addDomClass:function(a){const e=this.__iE.className;this.setDomClass((e?e+" ":"")+a)},removeDomClass:function(a){var e=
this.__iE.className;if(e){e=e.split(" ");let d=e.length;for(;d;)e[--d]===a&&e.splice(d,1);this.setDomClass(e.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(a){this.__iE.id=this.domId=a},setZIndex:function(a){this.__oS.zIndex=a},setStyleProperty:function(a,e){this.__iS[a]=e},getPagePosition:function(a){return b["get"+(a?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){b.simulateDomEvent(this.__iE,"click")},getHighestZIndex:function(){return b.getHighestZIndex(this.__iE)},
getHighestChildZIndex:function(a){const e=this.__iE.childNodes;let d=e.length,f=0;for(;d;){const l=e[--d];1===l.nodeType&&l!==a&&(f=h(f,b.getHighestZIndex(l)))}return f},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(a,e){(e?this.__iE:this.__oE).scrollTop=a||0}})})(myt);
(r=>{let w;const t=h=>{for(;h.lastChild;)h=h.lastChild;return h},m=(h,b)=>{w.lastTraversalWasForward=h;let a=document.body,e=a;var d=document.activeElement;let f=e,l;const g=h?"getNextFocus":"getPrevFocus";d&&(f=e=d,(d=e.model)||(d=w.findModelForDomElement(e)),d&&(b=d.getFocusTrap(b))&&(a=b.getIDE()));for(;f;){if(f.model&&f.model[g]&&(l=f.model[g]()))f=l.getIDE();else if(h)if(f.firstChild)f=f.firstChild;else{if(f===a)return e.model;if(f.nextSibling)f=f.nextSibling;else for(;f&&(f=f.parentNode,f!==
a);)if(f.nextSibling){f=f.nextSibling;break}}else f=f===a?t(a):f.previousSibling?t(f.previousSibling):f.parentNode;if(f===e)return e.model;if(1===f.nodeType)if((d=f.model)&&d instanceof r.View){if(d.isFocusable())return d}else if(b=f.nodeName,!("A"!==b&&"AREA"!==b&&"INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b&&"BUTTON"!==b||f.disabled||isNaN(f.tabIndex)||!r.DomElementProxy.isDomElementVisible(f)||(d=w.findModelForDomElement(f),d&&d.searchAncestorsOrSelf(q=>!0===q.maskFocus)))){f.focus();w.focusedDom=
f;break}}};new JS.Singleton("GlobalFocus",{include:[r.Observable],initialize:function(){this.lastTraversalWasForward=!0;r.global.register("focus",w=this)},setFocusedView:h=>{if(w.focusedView!==h){w.prevFocusedView=w.focusedView;if(w.focusedView=h)w.focusedDom=null;w.fireEvent("focused",h)}},notifyFocus:h=>{w.focusedView!==h&&w.setFocusedView(h)},notifyBlur:h=>{w.focusedView===h&&w.setFocusedView(null)},clear:()=>{w.focusedView?w.focusedView.blur():w.focusedDom&&(w.focusedDom.blur(),w.focusedDom=null)},
next:h=>{(h=m(!0,h))&&h.focus()},prev:h=>{(h=m(!1,h))&&h.focus()},findModelForDomElement:h=>{for(;h;){let b=h.model;if(b&&b instanceof r.View)return b;h=h.parentNode}}})})(myt);
(r=>{const w=JS.Module,t=r.global,m=t.focus,h=()=>({source:null,type:null,value:null}),b=r.KeyObservable=new w("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:h(),getKeyFromEvent:q=>q.value.key,getCodeFromEvent:q=>q.value.code,isEnterKeyEvent:q=>q.value.code===t.keys.CODE_ENTER,isEscKeyEvent:q=>q.value.code===t.keys.CODE_ESC,isShiftKeyEvent:q=>t.keys.isShiftCode(q.value.code)},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,b)||this.callSuper(q,
c,p)}}),a=r.MouseObservable=new w("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:h(),getMouseFromEvent:q=>({x:q.value.pageX,y:q.value.pageY}),getMouseFromEventRelativeToView:(q,c)=>{c=c.getPagePosition();q=a.getMouseFromEvent(q);q.x-=c.x;q.y-=c.y;return q}},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,a,!0)||this.callSuper(q,c,p)}}),e=r.ScrollObservable=new w("ScrollObservable",
{extend:{EVENT_TYPES:{scroll:!0},EVENT:h(),getScrollFromEvent:q=>{q=q.value;q=q.target??q.srcElement;return{x:q.scrollLeft,y:q.scrollTop}}},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,e)||this.callSuper(q,c,p)}}),d=r.TouchObservable=new w("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:h()},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,d,!1)||this.callSuper(q,c,p)}}),f=r.FocusObservable=
new w("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:h()},initNode:function(q,c){this.focusable=!1;this.focusIndicator=!0;this.callSuper(q,c)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(q){this.focused!==q&&(this.focused=q,this.inited&&(this.fireEvent("focused",q),q?m.notifyFocus(this):m.notifyBlur(this)))},setFocusable:function(q){if(this.focusable!==q){const c=this.focusable;(this.focusable=q)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):c&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",q)}},setFocusIndicator:function(q){this.focusIndicator!==q&&(this.focusIndicator=q,this.focused&&(q?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(m.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(q=>!0===q.maskFocus)},focus:function(q){this.isFocusable()&&this.getIDE().focus({preventScroll:q})},blur:function(){this.getIDE().blur()},__doFocus:function(q){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(q){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const q=this.getIDS();q.outlineWidth="thin";q.outlineColor="#8bf";q.outlineStyle="solid";q.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(q,c,p){if(f.EVENT_TYPES[p]){const v=this;return k=>{k||(k=window.event);if(v._ignoreFocus)k.cancelBubble=!0,k.stopPropagation&&k.stopPropagation(),
k.preventDefault();else{var y=f.EVENT;y.source=v;y.type=k.type;y.value=k;q[c](y)||(k.cancelBubble=!0,k.stopPropagation&&k.stopPropagation());y.source=void 0}}}return this.callSuper(q,c,p)}}),l=r.InputObservable=new w("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:h()},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,l)||this.callSuper(q,c,p)}}),g=r.DragDropObservable=new w("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,
dragover:!0,drop:!0},EVENT:h()},createDomHandler:function(q,c,p){return this.createStandardDomHandler(q,c,p,g,!0)||this.callSuper(q,c,p)}});r.DomObservable=new w("DomObservable",{attachDomObserver:function(q,c,p,v,k){if(q&&c&&p){v=!!v;const y=this.createDomHandler(q,c,p);if(y){const B=this.__dobsbt??(this.__dobsbt={}),E=B[p];E?E.push(q,c,y,v):B[p]=[q,c,y,v];r.addEventListener(this.getDomElementForDomObservable(p),p,y,v,k);return!0}}return!1},getDomElementForDomObservable:function(q){return this.getIDE()},
createDomHandler:(q,c,p)=>null,createStandardDomHandler:function(q,c,p,v,k){if(v.EVENT_TYPES[p]){const y=this,B=v.EVENT;return E=>{E??=window.event;B.source=y;B.type=E.type;B.value=E;q[c](B)||(E.cancelBubble=!0,E.stopPropagation&&E.stopPropagation(),k&&E.preventDefault());B.source=void 0}}},detachDomObserver:function(q,c,p,v){if(q&&c&&p){v=!!v;var k=this.__dobsbt;if(k&&(k=k[p])){const y=this.getDomElementForDomObservable(p);let B=!1;for(let E=k.length-4;0<=E;E-=4){const [H,A,u,n]=k.slice(E,E+4);q===
H&&c===A&&v===n&&(y&&r.removeEventListener(y,p,u,v),k.splice(E,4),B=!0)}return B}}return!1},detachAllDomObservers:function(){var q=this.__dobsbt;if(q)for(const [c,p]of Object.entries(q)){for(q=p.length-2;0<=q;q-=4){const [v,k]=p.slice(q);r.removeEventListener(this.getDomElementForDomObservable(c),c,v,k)}p.length=0}}});r.DomObserver=new w("DomObserver",{attachToDom:function(q,c,p,v,k){if(q&&c&&p){v=!!v;let y;const B=(y=this.__dobt??(this.__dobt={}))[p]??(y[p]=[]);q.attachDomObserver(this,c,p,v,k)&&
B.push(v,c,q)}},detachFromDom:function(q,c,p,v){if(q&&c&&p){v=!!v;var k=this.__dobt;if(k&&(k=k[p])){let y=!1;for(let B=k.length-3;0<=B;B-=3){const [E,H,A]=k.slice(B);q===A&&c===H&&v===E&&q.detachDomObserver(this,c,p,v)&&(k.splice(B,3),y=!0)}return y}}return!1},detachFromAllDomSources:function(){var q=this.__dobt;if(q)for(const [c,p]of Object.entries(q)){for(q=p.length-3;0<=q;q-=3){const [v,k,y]=p.slice(q);y.detachDomObserver(this,k,c,v)}p.length=0}}})})(myt);
(r=>{let w,t={};const m=r.global,h=m.focus,b="Firefox"===BrowserDetect.browser,a=b?"OSLeft":"MetaLeft",e=b?"OSRight":"MetaRight",d=r.KeyObservable.getCodeFromEvent,f=()=>!!t.ShiftLeft||!!t.ShiftRight,l=()=>!!t.ControlLeft||!!t.ControlRight,g=()=>!!t.AltLeft||!!t.AltRight,q=()=>!!t[a]||!!t[e],c=(v,k)=>{switch(v){case "Backspace":return v=k.nodeName,!("TEXTAREA"===v||"INPUT"===v&&("text"===k.type||"number"===k.type||"password"===k.type)||"DIV"===v&&"true"===k.contentEditable&&k.firstChild);case "Tab":return!0}return!1},
p=(v,k)=>{["keydown","keypress","keyup"].forEach(y=>{w[k](v,"__hndl_"+y,y)})};new JS.Singleton("GlobalKeys",{include:[r.DomElementProxy,r.DomObservable,r.DomObserver,r.KeyObservable,r.Observable,r.Observer],initialize:function(){m.register("keys",w=this);w.CODE_ENTER="Enter";w.CODE_ESC="Escape";w.CODE_SPACE="Space";w.CODE_ARROW_LEFT="ArrowLeft";w.CODE_ARROW_UP="ArrowUp";w.CODE_ARROW_RIGHT="ArrowRight";w.CODE_ARROW_DOWN="ArrowDown";w.CODE_DELETE="Delete";w.CODE_BACKSPACE="Backspace";"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(v=>
{w["CODE_"+v]="Key"+v});"1234567890".split("").forEach(v=>{w["CODE_"+v]="Digit"+v});w.ARROW_KEYS=[w.CODE_ARROW_LEFT,w.CODE_ARROW_UP,w.CODE_ARROW_RIGHT,w.CODE_ARROW_DOWN];w.LIST_KEYS=[w.CODE_ENTER,w.CODE_SPACE,w.CODE_ESC].concat(w.ARROW_KEYS);w.setDomElement(document);w.attachTo(h,"__hndl_focused","focused");p(w,"attachToDom");global.onblur=()=>{t={}}},isShiftKeyDown:f,isControlKeyDown:l,isAltKeyDown:g,isMetaKeyDown:q,isShiftCode:v=>"ShiftLeft"===v||"ShiftRight"===v,isControlCode:v=>"ControlLeft"===
v||"ControlRight"===v,isAltCode:v=>"AltLeft"===v||"AltRight"===v,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?q():l(),ignoreFocusTrap:()=>g(),__hndl_focused:v=>{(v=v.value)?(p(w,"detachFromDom"),p(v,"attachToDom")):((v=h.prevFocusedView)&&p(v,"detachFromDom"),p(w,"attachToDom"))},__hndl_keydown:v=>{const k=d(v);v=v.value;c(k,v.target)&&v.preventDefault();q()&&"ShiftLeft"!==k&&"ShiftRight"!==k&&"ControlLeft"!==k&&"ControlRight"!==k&&"AltLeft"!==k&&"AltRight"!==k?(w.fireEvent("keydown",k),w.fireEvent("keyup",
k)):(t[k]=!0,"Tab"===k&&(v=g(),f()?h.prev(v):h.next(v)),w.fireEvent("keydown",k))},__hndl_keypress:v=>{w.fireEvent("keypress",d(v))},__hndl_keyup:v=>{const k=d(v);v=v.value;c(k,v.target)&&v.preventDefault();t[k]=!1;w.fireEvent("keyup",k)}})})(myt);new JS.Singleton("GlobalTouch",{include:[myt.DomElementProxy,myt.DomObservable,myt.TouchObservable],initialize:function(){this.setDomElement(document);myt.global.register("touch",this)}});
(r=>{const w=JS.Module,t=Math.max,m=(l,g,q,c,p=0)=>{const v=l.length;let k=q;for(;p<v;p++)d(l[p],g,k),c&&(k+=q)},h=(l,g,q,c=0)=>{const p=l.length;let v=g;for(;c<p;)l[c++].crossPos+=v,q&&(v+=g)},b=(l,g)=>g?l.getFlexBasisWidth():l.getFlexBasisHeight(),a=(l,g,q,c)=>{l[g?"setWidthViaFlex":"setHeightViaFlex"]((c?b(l,g):0)+q)},e=(l,g,q)=>{l[g?"setXViaFlex":"setYViaFlex"](q,!1)},d=(l,g,q)=>{l[g?"setXViaFlex":"setYViaFlex"](q,!0)},f=(l,g,q)=>{l[g]!==q&&(l[g]=q,l.inited&&l.fireEvent(g,q),l.updateFlexboxLayout())};
r.FlexboxSupport=new w("FlexboxSupport",{initNode:function(l,g){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(l,g);this.updateFlexboxLayout()},setWidth:function(l,g){const q=this.width;this.callSuper(l,g);q!==this.width&&this.updateFlexboxLayout()},setHeight:function(l,g){const q=this.height;this.callSuper(l,g);q!==this.height&&this.updateFlexboxLayout()},
setDirection:function(l){f(this,"direction",l)},setWrap:function(l){f(this,"wrap",l)},setJustifyContent:function(l){f(this,"justifyContent",l)},setAlignItems:function(l){f(this,"alignItems",l)},setAlignContent:function(l){f(this,"alignContent",l)},setRowGap:function(l){f(this,"rowGap",t(0,l))},setColumnGap:function(l){f(this,"columnGap",t(0,l))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(l){this.set("totalBasisWidth",
l,!0)},setTotalBasisHeight:function(l){this.set("totalBasisHeight",l,!0)},ignoreSubviewForFlex:function(l){return l&&"function"===typeof l.ignoreFlex?l.ignoreFlex():!0},setFlexboxPaused:function(l,g){this.__flexboxPaused!==l&&((this.__flexboxPaused=l)||g||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(l){this.callSuper(l);l&&!this.ignoreSubviewForFlex(l)&&this.updateFlexboxLayout()},subviewRemoved:function(l){this.callSuper(l);!l||this.ignoreSubviewForFlex(l)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(l){this.callSuper(l);l&&this.ignoreSubviewForFlex(l)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(l){return l?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(l){return l?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(l){this._updateAgain=l},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const l=this;if(l.isOKToUpdateLayout()){var g=l.getSubviewsInLexicalOrder().filter(k=>!0!==l.ignoreSubviewForFlex(k)&&!0===k.visible),q=g.length;if(0<q){l.__isUpdatingFlexboxLayout=!0;var c=l.direction;const k=c.startsWith("row"),y=!k;var p=l.getWidthForFlexboxLayout(),v=l.getHeightForFlexboxLayout();const B=k?l.columnGap:l.rowGap,E=k?p:v,H=k?l.rowGap:l.columnGap;
v=k?v:p;const A=l.isWrapNotAllowed(),u=l.justifyContent,n=l.alignItems;p=A?"stretch":l.alignContent;c.endsWith("Reverse")&&g.reverse();let x=0,z=0,F=0,I=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:F,crossSize:0};c=[K];for(let J=0;J<q;){const M=g[J++],Q=b(M,k),ca=M.getShrink(),aa=M.getGrow();!A&&0<K.items.length&&x+(0===I?0:B)+Q>E&&(K.extraSize=E-x,F+=K.crossSize+H,z=t(z,x),I=x=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:F,crossSize:0},
c.push(K));0!==I&&(x+=B);0<ca&&0<Q&&(K.shrinkCount+=ca,K.shrinkBasis+=Q*ca);0<aa&&(K.growCount+=aa);K.crossSize=t(K.crossSize,b(M,y));e(M,k,x);a(M,k,Q);x+=Q;K.items.push(M);I++}K.extraSize=E-x;F+=K.crossSize;z=t(z,x);if(l.isCompactOnMainAxis(k)){let J=c.reduce((M,Q)=>null==M?Q.extraSize:Math.min(M,Q.extraSize),null);0!==J&&c.forEach(M=>{M.extraSize-=J})}l[k?"setTotalBasisWidth":"setTotalBasisHeight"](z);l[k?"setTotalBasisHeight":"setTotalBasisWidth"](F);g=c.length;1<g&&"wrapReverse"===l.wrap&&(c.forEach(J=>
{J.crossPos=F-(J.crossPos+J.crossSize)}),c.reverse());if(!l.isCompactOnCrossAxis(k))switch(q=v-F,p){default:case "start":break;case "end":h(c,q,!1);break;case "center":h(c,q/2,!1);break;case "spaceBetween":1<g&&h(c,q/(g-1),!0,1);break;case "spaceAround":q<=H?h(c,q/2,!1):(h(c,H/2,!1),q-=H,h(c,q/(2*g),!0),h(c,q/(2*g),!0,1));break;case "spaceEvenly":q<=2*H?h(c,q/2,!1):(h(c,H,!1),h(c,(q-2*H)/(g+1),!0));break;case "stretch":const J=q/g;let M=0;c.forEach(Q=>{Q.crossSize+=J;Q.crossPos+=M;M+=J})}c.forEach(J=>
{const M=J.items;let Q=J.extraSize;if(0<Q)if(0<J.growCount){const P=Q/J.growCount;let S=0;M.forEach(da=>{0<S&&d(da,k,S);const U=da.getGrow()*P;0<U&&(a(da,k,U,!0),S+=U)})}else{const P=M.length;switch(u){default:case "start":break;case "end":m(M,k,Q,!1);break;case "center":m(M,k,Q/2,!1);break;case "spaceBetween":1<P&&m(M,k,Q/(P-1),!0,1);break;case "spaceAround":Q<=B?m(M,k,Q/2,!1):(m(M,k,B/2,!1),Q-=B,m(M,k,Q/(2*P),!0),m(M,k,Q/(2*P),!0,1));break;case "spaceEvenly":Q<=2*B?m(M,k,Q/2,!1):(m(M,k,B,!1),Q-=
2*B,m(M,k,Q/(P+1),!0))}}else if(0>Q&&0<J.shrinkCount){const P=J.shrinkBasis;let S=0;M.forEach(da=>{0>S&&d(da,k,S);const U=da.getShrink()*b(da,k)/P*t(Q,-P);0>U&&(a(da,k,U,!0),S+=U)})}let ca=!1;const aa=J.crossSize,V=J.crossPos;M.forEach(P=>{switch(P.getAlignSelf()||n){case "start":e(P,y,V);a(P,y,b(P,y),!1);break;case "end":e(P,y,V+aa-b(P,y));a(P,y,b(P,y),!1);break;case "center":e(P,y,V+(aa-b(P,y))/2);a(P,y,b(P,y),!1);break;case "baseline":ca=!0;e(P,y,V+(aa-b(P,y))/2+P.getFlexBaselineOffset(k));a(P,
y,b(P,y),!1);break;default:e(P,y,V),a(P,y,aa,!1)}});ca&&l.updateFlexboxLayoutBaselineAdjustment(M,k,V)});l.__isUpdatingFlexboxLayout=!1;l.isUpdateAgain()&&!l.__UPDATE_AGAIN_LOOP_PROTECTION&&(l.setUpdateAgain(!1),l.__UPDATE_AGAIN_LOOP_PROTECTION=!0,l.updateFlexboxLayout(),l.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else l.setTotalBasisWidth(0),l.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(l,g,q)=>{}});r.FlexboxChildSupport=new w("FlexboxChildSupport",{setVisible:function(l){this.visible!==
l&&(this.callSuper(l),this.updateFlexboxLayoutFromChild())},setXViaFlex(l,g){g&&(l+=this.x);this.x!==l&&(this.__isFlexUpdate=!0,this.setX(l),this.__isFlexUpdate=!1)},setYViaFlex(l,g){g&&(l+=this.y);this.y!==l&&(this.__isFlexUpdate=!0,this.setY(l),this.__isFlexUpdate=!1)},setWidth:function(l,g){const q=this.width!==l;q&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(l,g);q&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(l,g){this.width!==l&&(this.__basisWidth??(this.__basisWidth=
this.width),this.__isFlexUpdate=!0,this.setWidth(l,g),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(l,g){const q=this.height!==l;q&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(l,g);q&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(l,g){this.height!==l&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(l,g),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??
this.height},getFlexBaselineOffset:l=>0,setIgnoreFlex:function(l){this.__ignoreFlex!==l&&(this.__ignoreFlex=l,this.inited&&(this.fireEvent("ignoreFlex",l),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(l){l=t(0,l);this.grow!==l&&(this.grow=l,this.inited&&(this.fireEvent("grow",l),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(l){l=t(0,l);this.shrink!==l&&(this.shrink=l,this.inited&&
(this.fireEvent("shrink",l),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(l){this.alignSelf!==l&&(this.alignSelf=l,this.inited&&(this.fireEvent("alignSelf",l),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const l=this.alignSelf;return"auto"===l||""===l?null:l},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&
!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(r=>{const w=new Map,t=new Map,m=(a,e)=>e+a.charAt(0).toUpperCase()+a.slice(1),h=a=>t.get(a)??(t.set(a,m(a,"set")),t.get(a)),b=a=>w.get(a)??(w.set(a,m(a,"get")),w.get(a));r.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:h,generateGetterName:b,generateName:m,createSetterFunction:(a,e)=>{const d=h(e);a[d]&&console.log("Overwriting setter",d);a[d]=function(f){this[e]!==f&&(this[e]=f,this.inited&&this.fireEvent(e,f))}},createGetterFunction:(a,e)=>{const d=b(e);a[d]&&console.log("Overwriting getter",
d);a[d]=function(){return this[e]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(a,e){(a??[]).forEach(d=>{this[d]=e[d];delete e[d]})},callSetters:function(a){var e=this.earlyAttrs,
d=this.lateAttrs;let f;if(e||d){a=Object.assign({},a);if(e){var l=e.length;for(var g=0;g<l;){const q=e[g++];q in a&&(this.set(q,a[q]),delete a[q])}}if(d)for(f=[],e=d.length,l=0;l<e;)g=d[l++],g in a&&(f.push(g,a[g]),delete a[g])}for(const q in a)this.set(q,a[q]);if(f)for(a=f.length,d=0;d<a;)this.set(f[d++],f[d++])},get:function(a){const e=b(a);return e in self?this[e]():this[a]},set:function(a,e,d){if(!d&&(d=h(a),d in this))return this[d](e);this[a]!==e&&(this[a]=e,!1!==this.inited&&this.fireEvent&&
this.fireEvent(a,e))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var r=this.__meta__;if(r){var w=Object.keys(r);for(let t=w.length;0<t;)delete r[w[--t]]}r=Object.keys(this);for(w=r.length;0<w;)delete this[r[--w]];this.destroyed=!0}}});
(r=>{const w=JS.Class,t=JS.Module;let m;const h=(g,q)=>q?(m=g).__op??(m.__op=[]):g.__op;let b;const a=(g,q)=>q?(b=g).__actives??(b.__actives=[]):g.__actives,e=new w("AbstractPool",{include:[r.Destructible],initialize:()=>{},destroy:function(){const g=h(this);g&&(g.length=0);this.callSuper()},getInstance:function(){const g=h(this,!0);return g.length?g.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(g){h(this,!0).push(this.cleanInstance(g))},cleanInstance:g=>
{"function"===typeof g.clean&&g.clean();return g},destroyPooledInstances:function(){var g=h(this);if(g){let q=g.length;for(;q;){const c=g[--q];"function"===typeof c.destroy&&c.destroy()}}}}),d=r.SimplePool=new w("SimplePool",e,{initialize:function(g,q){this.callSuper();this.instanceClass=g??Object;this.instanceParent=q},createInstance:function(g){var q=this.instanceParent,c=this.instanceClass;return q?new c(q,g):new c}}),f=new t("TrackActives",{destroy:function(){const g=a(this);g&&(g.length=0);this.callSuper()},
getInstance:function(){const g=this.callSuper();a(this,!0).push(g);return g},putInstance:function(g){var q=a(this);if(q){const c=q.indexOf(g);if(-1<c){q.splice(c,1);this.callSuper(g);return}q="inactive"}else q="missing";console.warn("Tried to put a "+q+" instance",g,this)},getActives:function(g){const q=a(this);if(q){if(g){const c=[],p=q.length;for(let v=0;p>v;){const k=q[v++];g.call(this,k)&&c.push(k)}return c}return q.slice()}return[]},putActives:function(){const g=a(this);if(g){let q=g.length;
for(;q;)this.putInstance(g[--q])}}}),l=r.TrackActivesPool=new w("TrackActivesPool",d,{include:[f]});r.TrackActivesMultiPool=new w("TrackActivesMultiPool",e,{initialize:function(g,q){this.callSuper();this.instanceClassesByKey=g;const c=this._poolsByClassName={},p=this.__pbk={};for(const v in g){const k=g[v];p[v]=c[k.__displayName]=new l(k,q)}},destroy:function(){const g=this.__pbk;for(const q in g)g[q].destroy();this.callSuper()},getInstance:function(){const g=arguments[0],q=this.__pbk[g];if(q)return q.getInstance(arguments);
console.warn("No pool for key",g)},putInstance:function(g){const q=this._poolsByClassName[g.klass.__displayName];q?q.putInstance(g):console.warn("No pool for obj",g)},destroyPooledInstances:function(){const g=this.__pbk;for(const q in g)g[q].destroyPooledInstances()},getActives:function(g){let q=[];const c=this.__pbk;for(const p in c)q=q.concat(c[p].getActives(g));return q},putActives:function(){const g=this.__pbk;for(const q in g)g[q].putActives()}});r.Reusable=new t("Reusable",{clean:()=>{}})})(myt);
(r=>{const w=(a,e)=>{if(e)for(;a;){if(e(a))return a;a=a.parent}},t=(a,e)=>{const d=e.name;void 0===a[d]?a[d]=e:console.warn("Name in use",d)},m=(a,e)=>{const d=e.name;a[d]===e?delete a[d]:console.warn("Name not in use",d)};let h;const b=a=>(h=a).__animPool??(h.__animPool=new r.TrackActivesPool(r.Animator,a));r.Node=new JS.Class("Node",{include:[r.AccessorSupport,r.Destructible,r.Observable,r.Observer],extend:{getMatchingAncestorOrSelf:w,getMatchingAncestor:(a,e)=>w(a?a.parent:null,e),DEFAULT_PLACEMENT:"*"},
initialize:function(a,e,d){if(d){const f=d.length;for(let l=0,g;f>l;)(g=d[l++])?this.extend(g):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.initNode(a,e??{})},initNode:function(a,e){this.callSetters(e);this.setParent(a);this.inited=!0},destroy:function(){const a=this.subnodes;this.isBeingDestroyed=!0;if(a)for(let e=a.length;0<e;)a[--e].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();
this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(a){if(a&&!this.ignorePlacement){var e=this.placement??a.defaultPlacement;e&&(a=a.determinePlacement(e,this))}if(!(this.parent===a||a&&a.destroyed)){if(e=this.parent){const d=e.getSubnodes().indexOf(this);
-1<d&&(this.name&&m(e,this),e.subnodes.splice(d,1),e.subnodeRemoved(this))}if(this.parent=a)a.getSubnodes().push(this),this.name&&t(a,this),a.subnodeAdded(this);this.inited&&this.fireEvent("parent",a)}},setName:function(a){if(this.name!==a){const e=this.parent;e&&this.name&&m(e,this);this.name=a;e&&a&&t(e,this)}},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},determinePlacement:function(a,e){let d=a.indexOf("."),f;0<=d&&(f=a.slice(d+1),a=a.slice(0,d));"*"===a&&(a=this.defaultPlacement)&&
(d=a.indexOf("."),0<=d&&(f=a.slice(d+1)+(f?"."+f:""),a=a.slice(0,d)));return(a=this[a])?f?a.determinePlacement(f,e):a:this},getRoot:function(){return this.parent?this.parent.getRoot():this},isRoot:function(){return null==this.parent},isDescendantOf:function(a){if(a){if(a===this)return!0;if(this.parent)return this.getIDE&&a.getIDE?a.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(a)}return!1},isAncestorOf:function(a){return a?a.isDescendantOf(this):!1},getLeastCommonAncestor:function(a){for(;a;){if(this.isDescendantOf(a))return a;
a=a.parent}},searchAncestorsForClass:function(a){if(a)return this.searchAncestors(e=>e instanceof a)},searchAncestorsForModule:function(a){if(a)return this.searchAncestors(e=>e.isA(a))},searchAncestors:function(a){return w(this?this.parent:null,a)},searchAncestorsOrSelf:function(a){return w(this,a)},getAncestors:function(){const a=[];let e=this;for(;e;)a.push(e),e=e.parent;return a},subnodeAdded:a=>{},subnodeRemoved:a=>{},animateOnce:function(a,e,d,f,l){return"object"===typeof a?this.animate(a):this.animate({attribute:a,
to:e,from:d,duration:f,easingFunction:l})},animate:function(a){if(a){const e=b(this),d=e.getInstance({ignorePlacement:!0}),f=a.callback;delete a.callback;d.callSetters(a);d.next(l=>{e.putInstance(d)});f&&d.next(f);d.setRunning(!0);return d}},getActiveAnimators:function(a){if("string"===typeof a){const e=a;a=d=>d.attribute===e}return b(this).getActives(a)},stopActiveAnimators:function(a,e=!1){a=this.getActiveAnimators(a);let d=a.length;if(0<d){const f=b(this);for(;d;){const l=a[--d];l.reset(e);e||
f.putInstance(l)}}},doOnceOnIdle:function(a){this.attachTo(r.global.idle,a,"idle",!0)}})})(myt);
(r=>{let w=0,t=!1;const m=JS.Class,h=[],b=g=>{if(t!==g&&(t=g,!g)){for(g=h.length;g;){const q=h[--g];q.__deferredLayout=!1;q.update()}h.length=0}},a=(g,q,c,p)=>{const v=g.getSubviewIndex(q),k=g.subviews;-1<v&&(g=g.getSubviewIndex(c),k.splice(v,1),-1<g?(v<g&&--g,k.splice(g+(p?1:0),0,q)):p?k.push(q):k.unshift(q))},e=(g,q,c)=>{g[q]!==c&&(g[q]=c,g.inited&&(g.fireEvent(q,c),g.update()))},d=r.Layout=new m("Layout",r.Node,{extend:{incrementGlobalLock:()=>{1===++w&&b(!0)},decrementGlobalLock:()=>{0<w&&0===
--w&&b(!1)}},initNode:function(g,q){this.subviews=[];this.locked=!0;this.lockedCounter=1;const c=!0===q.locked;delete q.locked;this.callSuper(g,q);c||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(g){var q=this.parent;if(q!==g){const c=!this.locked;c&&(this.locked=!0);let p,v;if(q){p=this.subviews;for(v=p.length;v;)this.removeSubview(p[--v]);this.detachFrom(q,"__hndlPSA","subviewAdded");this.detachFrom(q,"__hndlPSR","subviewRemoved")}this.callSuper(g);
if(g=this.parent){p=g.getSubviews();v=0;for(q=p.length;q>v;)this.addSubview(p[v++]);this.attachTo(g,"__hndlPSA","subviewAdded");this.attachTo(g,"__hndlPSR","subviewRemoved")}c&&(this.locked=!1,this.inited&&g&&this.update())}},canUpdate:function(){return t?(this.__deferredLayout||(h.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(g){return this.subviews.includes(g)},getSubviewIndex:function(g){return this.subviews.indexOf(g)},addSubview:function(g){this.ignore(g)||
(this.subviews.push(g),this.startMonitoringSubview(g),this.locked||this.update())},startMonitoringSubview:g=>{},startMonitoringAllSubviews:function(){const g=this.subviews;let q=g.length;for(;q;)this.startMonitoringSubview(g[--q])},removeSubview:function(g){if(this.ignore(g))return-1;const q=this.getSubviewIndex(g);-1<q&&(this.stopMonitoringSubview(g),this.subviews.splice(q,1),this.locked||this.update());return q},stopMonitoringSubview:g=>{},stopMonitoringAllSubviews:function(){const g=this.subviews;
let q=g.length;for(;q;)this.stopMonitoringSubview(g[--q])},ignore:g=>g.ignoreLayout,__hndlPSA:function(g){g=g.value;g.parent===this.parent&&this.addSubview(g)},__hndlPSR:function(g){g=g.value;g.parent===this.parent&&this.removeSubview(g)},sortSubviews:function(g){this.subviews.sort(g)},moveSubviewBefore:function(g,q){a(this,g,q,!1)},moveSubviewAfter:function(g,q){a(this,g,q,!0)}});var f=r.ConstantLayout=new m("ConstantLayout",d,{setTargetAttrName:function(g){this.setterName=r.AccessorSupport.generateSetterName(g);
e(this,"targetAttrName",g)},setTargetValue:function(g){e(this,"targetValue",g)},update:function(){if(this.canUpdate()){const g=this.setterName,q=this.targetValue,c=this.subviews,p=c.length;if(g)for(let v=0;p>v;)c[v++][g](q)}}});f=r.VariableLayout=new m("VariableLayout",f,{initNode:function(g,q){this.collapseParent=this.reverse=!1;this.callSuper(g,q)},setCollapseParent:function(g){e(this,"collapseParent",g)},setReverse:function(g){e(this,"reverse",g)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const q=this.setterName,c=this.subviews;var g=c.length;let p=this.targetValue,v,k=0;if(this.reverse)for(v=g;v;)g=c[--v],this.skipSubview(g)||(p=this.updateSubview(++k,g,q,p));else for(v=0;g>v;){const y=c[v++];this.skipSubview(y)||(p=this.updateSubview(++k,y,q,p))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(q,p);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(g){this.attachTo(g,
"update","visible")},stopMonitoringSubview:function(g){this.detachFrom(g,"update","visible")},updateSubview:(g,q,c,p)=>{q[c](p);return p},skipSubview:g=>!g.visible,updateParent:(g,q)=>{}});const l=r.SpacedLayout=new m("SpacedLayout",f,{initNode:function(g,q){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(g,q)},setTargetAttrName:function(g){if(this.targetAttrName!==
g){const q="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=q?"boundsHeight":"boundsWidth";this.measureAttrBaseName=q?"height":"width";this.parentSetterName=q?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(g)}},setNoAddSubviewOptimization:function(g){this.noAddSubviewOptimization=g},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){e(this,"spacing",g)},setOutset:function(g){e(this,
"outset",g)},addSubview:function(g){const q=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(g);this.locked=q},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},updateSubview:function(g,q,c,p){g=q[this.measureAttrName];q[c](p+(g-q[this.measureAttrBaseName])/2);return p+g+this.spacing},updateParent:function(g,q){this.parent[this.parentSetterName](q+
this.outset-this.spacing)}});r.ResizeLayout=new m("ResizeLayout",l,{setCollapseParent:g=>{},setTargetAttrName:function(g){if(this.targetAttrName!==g){if(this.inited){const q="x"===g;this.stopMonitoringParent(q?"height":"width");this.startMonitoringParent(q?"width":"height")}this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const q="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(q);this.callSuper(g);this.parent&&this.startMonitoringParent(q)}},startMonitoringParent:function(g){this.attachTo(this.parent,
"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},doBeforeUpdate:function(){const g=this.measureAttrName,q=this.subviews;let c=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,p=q.length,v=0,k=0;for(;p;){const y=q[--p];this.skipSubview(y)||(++v,0<y.layoutHint?k+=y.layoutHint:c-=y[g])}0!==v&&(this.remainder=c-=(v-1)*this.spacing,this.resizeSum=k,this.scalingFactor=c/k,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===g?
"setWidth":"setHeight")},updateSubview:function(g,q,c,p){var v=q.layoutHint;0<v&&(this.resizeSumUsed+=v,v=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(v*this.scalingFactor),this.remainderUsed+=v,q[this.measureSetter](v));return this.callSuper(g,q,c,p)},startMonitoringSubview:function(g){0<g.layoutHint||this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update","visible")},stopMonitoringSubview:function(g){0<g.layoutHint||this.detachFrom(g,"update",
this.measureAttrName);this.detachFrom(g,"update","visible")},updateParent:(g,q)=>{}});r.AlignedLayout=new m("AlignedLayout",f,{initNode:function(g,q){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(g,q)},setTargetAttrName:function(g){if(this.targetAttrName!==g){const q="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=
q?"boundsHeight":"boundsWidth";this.measureAttrBaseName=q?"height":"width";this.parentSetterName=q?"setHeight":"setWidth";c&&this.startMonitoringAllSubviews();this.callSuper(g)}},setAlign:function(g){if(this.align!==g){this.align=g;const q=this.locked;this.locked=!0;this.setTargetAttrName("middle"===g||"bottom"===g||"top"===g?"y":"x");this.locked=q;this.inited&&(this.fireEvent("align",g),this.update())}},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},
stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},doBeforeUpdate:function(){const g=this.measureAttrName,q=this.subviews;let c=0,p,v=q.length;for(;v;)p=q[--v],this.skipSubview(p)||(c=c>p[g]?c:p[g]);this.setTargetValue(c)},updateSubview:function(g,q,c,p){switch(this.align){case "center":case "middle":q[c]((p-q[this.measureAttrName])/2);break;case "right":case "bottom":q[c](p-q[this.measureAttrName]);break;default:q[c](0)}return p},updateParent:function(g,
q){this.parent[this.parentSetterName](q)}});r.WrappingLayout=new m("WrappingLayout",f,{initNode:function(g,q){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(g,q)},
setTargetAttrName:function(g){if(this.targetAttrName!==g){const q="y"===g,c=this.inited;c&&this.stopMonitoringAllSubviews();this.measureAttrName=q?"boundsHeight":"boundsWidth";const p=this.measureAttrBaseName=q?"height":"width";this.otherMeasureAttrName=q?"boundsWidth":"boundsHeight";const v=this.otherMeasureAttrBaseName=q?"width":"height";this.parentSetterName=q?"setWidth":"setHeight";this.otherSetterName=q?"setX":"setY";c&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(v),this.startMonitoringParent(p));
this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const q="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(q?"height":"width");this.callSuper(g);this.parent&&this.startMonitoringParent(q?"height":"width")}},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){e(this,"spacing",g)},setOutset:function(g){e(this,"outset",g)},setLineSpacing:function(g){e(this,"lineSpacing",g)},setLineInset:function(g){e(this,
"lineInset",g)},setLineOutset:function(g){e(this,"lineOutset",g)},startMonitoringParent:function(g){this.attachTo(this.parent,"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update",this.otherMeasureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.detachFrom(g,"update",this.otherMeasureAttrName);
this.callSuper(g)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(g,q,c,p){g=q[this.measureAttrName];const v=q[this.otherMeasureAttrName];p+g>this.parentSizeLessOutset||"break"===q.layoutHint?(p=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=v,++this.lineCount):v>this.lineSize&&(this.lineSize=v);q[this.otherSetterName](this.linePos+
(v-q[this.otherMeasureAttrBaseName])/2);q[c](p+(g-q[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,p+g+this.outset);return p+g+this.spacing},updateParent:function(g,q){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});r.createFixedThresholdCounter(d,1,"locked")})(myt);
(r=>{const w=Math.round,t=r.DomElementProxy,m=r.Geometry.rectContainsPoint,h=(c,p)=>{const v=r.global.focus.focusedView,k=c.getIDE();if(v===c||v&&v.isDescendantOf(c))v._ignoreFocus=!0;c=k.scrollTop;const y=k.scrollLeft;p.call();v&&(v._ignoreFocus=!1,v.focus(!0));k.scrollTop=c;k.scrollLeft=y},b=(c,p,v,k)=>{if(p&&"object"===typeof p){if(k&&(k=c.getLeastCommonAncestor(p))){var y=k.getIDE();k=t.getZIndexRelativeToAncestor(c.getODE(),y);y=t.getZIndexRelativeToAncestor(p.getODE(),y);v&&(k*=-1,y*=-1);if(k<
y)return!0;if(y<k)return!1}c=c.getODE().compareDocumentPosition(p.getODE());return v?2===c||10===c:4===c||20===c}return!1},a=c=>{c=c.getAncestors();let p=c.length,v=1,k=1;for(;p;){const y=c[--p];v*=y.scaleX||1;k*=y.scaleY||1;y.__effectiveScaleX=v;y.__effectiveScaleY=k}return{scaleX:v,scaleY:k}},e=(c,p,v)=>{const k=c.getODE();if(m(p,v,0,0,k.offsetWidth*c.__effectiveScaleX,k.offsetHeight*c.__effectiveScaleY)){if(c=c.parent){const y=c.getIDE();return e(c,p+(k.offsetLeft-y.scrollLeft)*c.__effectiveScaleX,
v+(k.offsetTop-y.scrollTop)*c.__effectiveScaleY)}return!0}return!1},d=c=>{switch(c.align){case "center":c.releaseConstraint("__doAlignCenter");break;case "right":c.releaseConstraint("__doAlignRight")}},f=c=>{const p=c.parent;if(p)switch(c.align){case "center":c.constrain("__doAlignCenter",[c,"width",c,"alignOffset",p,"width"]);break;case "right":c.constrain("__doAlignRight",[c,"width",c,"alignOffset",p,"width"]);break;case "left":c.setX(c.alignOffset||0)}},l=c=>{switch(c.valign){case "middle":c.releaseConstraint("__doValignMiddle");
break;case "bottom":c.releaseConstraint("__doValignBottom")}},g=c=>{const p=c.parent;if(p)switch(c.valign){case "middle":c.constrain("__doValignMiddle",[c,"height",c,"valignOffset",p,"height"]);break;case "bottom":c.constrain("__doValignBottom",[c,"height",c,"valignOffset",p,"height"]);break;case "top":c.setY(c.valignOffset||0)}},q=(c,p,v)=>{c.getODS()["border"+v+"Radius"]=p+"px"};r.View=new JS.Class("View",r.Node,{include:[t,r.DomObservable,r.DomObserver,r.ScrollObservable,r.FocusObservable,r.KeyObservable,
r.MouseObservable],extend:{retainFocusDuringDomUpdate:h},initNode:function(c,p){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;this.tagName=p.tagName;delete p.tagName;this.setDomElement(this.createOurDomElement(c));const v=this.getODS();v.left=v.top="0px";this.callSuper(c,p);this.__updateBounds(this.width,this.height);void 0===this.bgColor&&(this.bgColor="transparent")},createOurDomElement:function(c){c=document.createElement(this.tagName??"div");c.style.position="absolute";
const p=this.klass;c.className=p.__cssClassName??(p.__cssClassName="myt-"+p.__displayName.split(".").join("-"));return c},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(c){this.parent!==c&&(this.inited&&(d(this),l(this)),this.callSuper(c),this.align&&f(this),this.valign&&g(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},getSubviewsInLexicalOrder:function(){const c=
[],p=this.getIDE().children,v=p.length;for(let k=0;k<v;){const y=p[k++].model;y&&y.parent===this&&c.push(y)}return c},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(c=>c!==this)},setFocusTrap:function(c){this.focusTrap=c},setFocusCage:function(c){this.focusCage=c},setMaskFocus:function(c){this.maskFocus=c},setLayoutHint:function(c){this.layoutHint=c},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(c){if(this.ignoreLayout!==
c){var p=this.inited&&this.parent;let v;if(c){if(p)for(p=this.parent.getLayouts(),v=p.length;v;)p[--v].removeSubview(this);this.ignoreLayout=c}else if(this.ignoreLayout=c,p)for(p=this.parent.getLayouts(),v=p.length;v;)p[--v].addSubview(this)}},setDomClass:function(c){this.domClass!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domClass",c))},setDomId:function(c){this.domId!==c&&(this.callSuper(c),this.inited&&this.fireEvent("domId",c))},setAlignOffset:function(c){this.alignOffset!==c&&(this.alignOffset=
c,this.inited&&this.fireEvent("alignOffset",c),this.parent&&"left"===this.align&&this.setX(c))},setAlign:function(c){this.align!==c&&(this.inited&&d(this),this.align=c,this.inited&&(this.fireEvent("align",c),f(this)))},__doAlignCenter:function(c){this.setX(w((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(c){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(c){this.valignOffset!==c&&(this.valignOffset=c,this.inited&&this.fireEvent("valignOffset",
c),this.parent&&"top"===this.valign&&this.setY(c))},setValign:function(c){this.valign!==c&&(this.inited&&l(this),this.valign=c,this.inited&&(this.fireEvent("valign",c),g(this)))},__doValignMiddle:function(c){this.setY(w((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(c){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(c){this.x!==c&&(this.x=c,this.visible&&(this.getODS().left=c+"px"),this.inited&&this.fireEvent("x",c))},setY:function(c){this.y!==
c&&(this.y=c,this.visible&&(this.getODS().top=c+"px"),this.inited&&this.fireEvent("y",c))},setWidth:function(c,p){0>c&&(c=0);this.width!==c&&(this.width=c,this.getODS().width=c+"px",this.inited&&(this.__updateBounds(c,this.height),p||this.fireEvent("width",c)))},setHeight:function(c,p){0>c&&(c=0);this.height!==c&&(this.height=c,this.getODS().height=c+"px",this.inited&&(this.__updateBounds(this.width,c),p||this.fireEvent("height",c)))},setDomMinWidth:function(c,p){(p?this.getIDS():this.getODS()).minWidth=
null!=c?c+"px":null},getDomMinWidth:function(c){c=(c?this.getIDS():this.getODS()).minWidth;return null!=c?Number.parseInt(c):null},setDomMinHeight:function(c,p){(p?this.getIDS():this.getODS()).minHeight=null!=c?c+"px":null},getDomMinHeight:function(c){c=(c?this.getIDS():this.getODS()).minHeight;return null!=c?Number.parseInt(c):null},setTextColor:function(c){this.textColor!==c&&(this.textColor=c,this.getODS().color=c||"inherit",this.inited&&this.fireEvent("textColor",c))},setBgColor:function(c){this.bgColor!==
c&&(this.getODS().backgroundColor=this.bgColor=c,this.inited&&this.fireEvent("bgColor",c))},isColorAttr:c=>"bgColor"===c||"textColor"===c,setOpacity:function(c){this.opacity!==c&&(this.getODS().opacity=this.opacity=c,this.inited&&this.fireEvent("opacity",c))},setOverflow:function(c){const p=this.overflow;if(p!==c){this.overflow=c;const v=this.getIDS();if("autox"===c)v.overflowX="auto",v.overflowY="hidden";else if("autoy"===c)v.overflowY="auto",v.overflowX="hidden";else{if("autox"===p||"autoy"===p)v.overflowX=
v.overflowY=null;v.overflow=c||"visible"}this.inited&&this.fireEvent("overflow",c)}},setVisible:function(c){if(this.visible!==c){this.visible=c;const p=this.getODS();p.visibility=c?"inherit":"hidden";p.left=c?this.x+"px":"-100000px";p.top=c?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",c)}},setPointerEvents:function(c){this.pointerEvents!==c&&(this.pointerEvents=c,this.getODS().pointerEvents=c||"auto",this.inited&&this.fireEvent("pointerEvents",c))},setCursor:function(c){this.cursor!==
c&&(this.cursor=c,this.getODS().cursor=c||"auto",this.inited&&this.fireEvent("cursor",c))},__updateBounds:function(c,p){this.boundsWidth!==c&&this.fireEvent("boundsWidth",this.boundsWidth=c);this.boundsHeight!==p&&this.fireEvent("boundsHeight",this.boundsHeight=p)},setOutline:function(c){c=c||[];this.setOutlineWidth(c[0]);this.setOutlineStyle(c[1]);this.setOutlineColor(c[2])},setOutlineWidth:function(c){this.outlineWidth=c||0;this.getODS().outlineWidth=this.outlineWidth+"px"},setOutlineStyle:function(c){this.getODS().outlineStyle=
this.outlineStyle=c||"none"},setOutlineColor:function(c){this.getODS().outlineColor=this.outlineColor=c||"#000"},setBorder:function(c){c=c||[];this.setBorderWidth(c[0]);this.setBorderStyle(c[1]);this.setBorderColor(c[2])},setBorderWidth:function(c){this.borderWidth=c||0;this.getODS().borderWidth=this.borderWidth+"px"},setBorderStyle:function(c){this.getODS().borderStyle=this.borderStyle=c||"none"},setBorderColor:function(c){this.getODS().borderColor=this.borderColor=c||"#000"},setRoundedCorners:function(c){this.getODS().borderRadius=
c+"px"},setRoundedTopLeftCorner:function(c){q(this,c,"TopLeft")},setRoundedTopRightCorner:function(c){q(this,c,"TopRight")},setRoundedBottomLeftCorner:function(c){q(this,c,"BottomLeft")},setRoundedBottomRightCorner:function(c){q(this,c,"BottomRight")},setBoxShadow:function(c){this.getODS().boxShadow=c?(c[0]||0)+"px "+(c[1]||0)+"px "+(c[2]||7)+"px "+(c[3]||"#000"):"none"},setGradient:function(c){const p=this.getODS();if(c){let k=c[0];"linear"===k||"radial"===k?c.shift():k="linear";let y=c[0];if("radial"===
k){void 0===y?y="closest-side":c.shift();var v=c[0];if(void 0===v)v="circle";else{switch(v){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",v),v="circle"}c.shift()}let B=c[0];void 0===B?B="center":(B=B.replaceAll("middle","center"),c.shift());y=v+" "+y+" at "+B}else"number"===typeof y?(y+="deg",c.shift()):y?(y="to "+y,c.shift()):y="0deg";v=B=>{c.push(B&&"inherit"!==B?B:"transparent")};2>c.length&&v(this.textColor);2>c.length&&v(this.bgColor);p.background=
k+"-gradient("+y+","+c.join(",")+")"}else p.background="none";this.bgColor=void 0},setTooltip:function(c){this.tooltip!==c&&(this.tooltip=this.getODE().title=c,this.inited&&this.fireEvent("tooltip",c))},isVisible:function(){return null==this.searchAncestorsOrSelf(c=>!c.visible)},getFocusTrap:function(c){return this.searchAncestorsOrSelf(p=>p.focusCage||p.focusTrap&&!c)},subnodeAdded:function(c){c instanceof r.View?(this.getIDE().appendChild(c.getODE()),this.getSubviews().push(c),this.fireEvent("subviewAdded",
c),this.subviewAdded(c)):c instanceof r.Layout&&(this.getLayouts().push(c),this.fireEvent("layoutAdded",c),this.layoutAdded(c))},subnodeRemoved:function(c){let p;c instanceof r.View?(p=this.getSubviewIndex(c),-1<p&&(this.fireEvent("subviewRemoved",c),c.removeDomElement(),this.subviews.splice(p,1),this.subviewRemoved(c))):c instanceof r.Layout&&(p=this.getLayoutIndex(c),-1<p&&(this.fireEvent("layoutRemoved",c),this.layouts.splice(p,1),this.layoutRemoved(c)))},hasSubview:function(c){return this.getSubviews().includes(c)},
getSubviewIndex:function(c){return this.getSubviews().indexOf(c)},subviewAdded:c=>{},subviewRemoved:c=>{},getNextSibling:function(){if(this.parent){const c=this.getODE().nextElementSibling;if(c)return c.model}},getPrevSibling:function(){if(this.parent){const c=this.getODE().previousElementSibling;if(c)return c.model}},hasLayout:function(c){return this.getLayouts().includes(c)},getLayoutIndex:function(c){return this.getLayouts().indexOf(c)},layoutAdded:c=>{},layoutRemoved:c=>{},isBehind:function(c,
p){return b(this,c,!1,p)},isInFrontOf:function(c,p){return b(this,c,!0,p)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(c){this.parent.sendSubviewBehind(this,c)},sendInFrontOf:function(c){this.parent.sendSubviewInFrontOf(this,c)},doSubviewsReorderedInDom:c=>{},bringSubviewToFront:function(c){const p=this;if(c&&c.parent===p){const v=p.getIDE();c.getODE()!==v.lastChild&&h(c,()=>{v.appendChild(c.getODE());
p.doSubviewsReorderedInDom(c)})}},sendSubviewToBack:function(c){const p=this;if(c&&c.parent===p){const v=p.getIDE();c.getODE()!==v.firstChild&&h(c,()=>{v.insertBefore(c.getODE(),v.firstChild);p.doSubviewsReorderedInDom(c)})}},sendSubviewBehind:function(c,p){const v=this;if(c&&p&&c.parent===v&&p.parent===v){const k=v.getIDE();h(c,()=>{k.insertBefore(c.getODE(),p.getODE());v.doSubviewsReorderedInDom(c)})}},sendSubviewInFrontOf:function(c,p){const v=this;if(c&&p&&c.parent===v&&p.parent===v){const k=
v.getIDE();h(c,()=>{k.insertBefore(c.getODE(),p.getODE().nextSibling);v.doSubviewsReorderedInDom(c)})}},sortSubviews:function(c){const p=this,v=p.getSubviews().sort(c);h(p,()=>{const k=p.getODE(),y=k.parentNode;let B;y&&(B=k.nextSibling,y.removeChild(k));const E=document.createDocumentFragment(),H=v.length;for(let A=0;H>A;)E.appendChild(v[A++].getODE());p.getIDE().appendChild(E);y&&y.insertBefore(k,B);p.doSubviewsReorderedInDom(null)})},containsPoint:function(c,p,v){const k=this.getODE();if(!k)return!1;
v=t.getRelativePosition(k,v);return m(c,p,v.x,v.y,this.width,this.height)},isPointVisible:function(c,p){const v=this.getPagePosition(!0);a(this);return e(this,c-v.x,p-v.y)},getEffectiveScale:function(){return a(this)},getEffectiveScaleX:function(){return a(this).scaleX},getEffectiveScaleY:function(){return a(this).scaleY}})})(myt);
(r=>{const w=(m,h,b)=>{const a=t(m,h);m.getODS().transform=a+(0===a.length?"":" ")+h+"("+b+")"},t=(m,h)=>{m=m.getODS();var b=m.transform;if(!b||0===b.length)return"";b=b.split(" ");let a=b.length;for(;a;)if(b[--a].startsWith(h)){b.splice(a,1);break}return m.transform=b.join(" ")};r.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(m){this.transformOrigin!==m&&(this.transformOrigin=m,this.getODS().transformOrigin=m||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",m)))},setRotation:function(m){this.rotation!==m&&(this.rotation=m,w(this,"rotate",(m||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",m)))},setScale:function(m){const h=this.scaleX!==m,b=this.scaleY!==m;if(h){var a=this.scaleX=m;null==a?t(this,"scaleX"):w(this,"scaleX",a||1)}b&&(a=this.scaleY=m,null==a?t(this,"scaleY"):w(this,"scaleY",a||1));this.inited&&((h||b)&&this.__updateBounds(this.width,this.height),
h&&this.fireEvent("scaleX",m),b&&this.fireEvent("scaleY",m))},setScaleX:function(m){if(this.scaleX!==m){var h=this.scaleX=m;null==h?t(this,"scaleX"):w(this,"scaleX",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",m))}},setScaleY:function(m){if(this.scaleY!==m){var h=this.scaleY=m;null==h?t(this,"scaleY"):w(this,"scaleY",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",m))}},setSkewX:function(m){this.skewX!==m&&(this.skewX=
m,w(this,"skewX",m||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",m)))},setSkewY:function(m){this.skewY!==m&&(this.skewY=m,w(this,"skewY",m||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",m)))},__updateBounds:function(m,h){const b=this.rotation;var a=this.scaleX;const e=this.scaleY;a=(null==a||1===a)&&(null==e||1===e);if(!a||null!=b&&0!==b&&180!==b)!a||90!==b&&270!==b?(h=this.getODE().getBoundingClientRect(),m=h.width,h=h.height):
(m=this.height,h=this.width);this.callSuper(m,h)}})})(myt);
(r=>{const w=JS.Module,t=(a,e)=>{if("auto"===e)a.__hasSetWidth=!1,a.getODS().width="auto",a.sizeViewToDom();else return a.__hasSetWidth=!0},m=(a,e)=>{if("auto"===e)a.__hasSetHeight=!1,a.getODS().height="auto",a.sizeViewToDom();else return a.__hasSetHeight=!0},h=a=>{if(!a.__hasSetWidth){const e=a.getODE().offsetWidth/a.getEffectiveScaleX();a.width!==e&&(a.width=e,a.inited&&a.__updateBounds(e,a.height),a.fireEvent("width",e))}},b=a=>{if(!a.__hasSetHeight){const e=a.getODE().offsetHeight/a.getEffectiveScaleY();
a.height!==e&&(a.height=e,a.inited&&a.__updateBounds(a.width,e),a.fireEvent("height",e))}};r.SizeToDom=new w("SizeToDom",{extend:{sizeWidth:h,sizeHeight:b},initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a,e){t(this,a)&&this.callSuper(a,e)},setHeight:function(a,e){m(this,a)&&this.callSuper(a,e)},sizeViewToDom:function(){h(this);b(this)}});r.SizeWidthToDom=new w("SizeWidthToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a,
e){t(this,a)&&this.callSuper(a,e)},sizeViewToDom:function(){h(this)}});r.SizeHeightToDom=new w("SizeHeightToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setHeight:function(a,e){m(this,a)&&this.callSuper(a,e)},sizeViewToDom:function(){b(this)}})})(myt);
(r=>{const w=(b,a,e,d)=>{b[e]!==a&&(b[e]=a,b.getIDS()[e]=a||d||"inherit",b.inited&&(b.fireEvent(e,a),b.sizeViewToDom()))};r.TextSupport=new JS.Module("TextSupport",{setWidth:function(b,a){this.callSuper(b,a);"auto"!==b&&(b=this.whiteSpace,"normal"!==b&&"pre-line"!==b&&"pre-wrap"!==b&&"break-spaces"!==b||this.sizeViewToDom())},setText:function(b){b||="";b=this.valueFromEvent(b);this.text!==b&&(this.getIDE().innerHTML=this.text=b,this.inited&&(this.fireEvent("text",b),this.sizeViewToDom()))},setTextOverflow:function(b){this.textOverflow!==
b&&(this.textOverflow=b,this.getIDS().textOverflow=b||"inherit",this.inited&&this.fireEvent("textOverflow",b))},setTextAlign:function(b){this.textAlign!==b&&(this.textAlign=b,this.getIDS().textAlign=b||"inherit",this.inited&&this.fireEvent("textAlign",b))},setWhiteSpace:function(b){w(this,b,"whiteSpace")},setWordWrap:function(b){w(this,b,"wordWrap","normal")},setTextIndent:function(b){w(this,b,"textIndent")},setTextTransform:function(b){w(this,b,"textTransform")},setTextDecoration:function(b){w(this,
b,"textDecoration")},setLineHeight:function(b){w(this,b,"lineHeight")},setLetterSpacing:function(b){w(this,b,"letterSpacing")},setWordSpacing:function(b){w(this,b,"wordSpacing")},setFontFamily:function(b){w(this,b,"fontFamily")},setFontStyle:function(b){w(this,b,"fontStyle")},setFontVariant:function(b){w(this,b,"fontVariant")},setFontWeight:function(b){w(this,b,"fontWeight")},setFontSize:function(b){w(this,b,"fontSize")},setUserUnselectable:function(b){this.userUnselectable!==b&&(this.userUnselectable=
b,this[b?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(b?"default":"text"),this.inited&&this.fireEvent("userUnselectable",b))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(b,a,e,d){this.getIDS().textShadow=(b||0)+"px "+(a||0)+"px "+(null!=e?e:2)+"px "+(d||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const t=(b,a,e)=>{const d="padding"+e;a=Math.max(a,0);b[d]!==a&&(b[d]=a,b.getIDS()[d]=a+"px",b.fireEvent(d,a),"Left"===e||"Right"===e?m(b):h(b))},m=b=>{b.__hasSetWidth&&(b.getODS().width=b.width-(b.paddingLeft||0)-(b.paddingRight||0)+"px",b.inited&&b.sizeViewToDom())},h=b=>{b.__hasSetHeight&&(b.getODS().height=b.height-(b.paddingTop||0)-(b.paddingBottom||0)+"px",b.inited&&b.sizeViewToDom())};r.PaddedTextSupport=new JS.Module("PaddedTextSupport",{setWidth:function(b,a){this.callSuper(b,a);
m(this)},setHeight:function(b,a){this.callSuper(b,a);h(this)},setPadding:function(b){let a,e,d;b||=0;"object"===typeof b?(a=b.top||0,e=b.right||0,d=b.bottom||0,b=b.left||0):a=e=d=b;this.setPaddingTop(a);this.setPaddingRight(e);this.setPaddingBottom(d);this.setPaddingLeft(b)},setPaddingTop:function(b){t(this,b,"Top")},setPaddingRight:function(b){t(this,b,"Right")},setPaddingBottom:function(b){t(this,b,"Bottom")},setPaddingLeft:function(b){t(this,b,"Left")}})})(myt);
(r=>{const w={},t={},m=h=>{const b=h.imageUrl;if(h.calculateNaturalSize&&b){var a=w[b];if(a)h.setNaturalWidth(a.width),h.setNaturalHeight(a.height);else{a=t[b];if(!a){t[b]=a=[];const e=new Image;e.onerror=d=>{if(d=t[b]){let f=d.length;for(;f;)d[--f].setImageLoadingError(!0);d.length=0;delete t[b]}};e.onload=()=>{const d=e.width,f=e.height,l=t[b];if(l){let g=l.length;for(;g;){const q=l[--g];q.imageUrl===b&&(q.setNaturalWidth(d),q.setNaturalHeight(f))}l.length=0;delete t[b]}w[b]={width:d,height:f}};
e.src=b}a.push(h)}}};r.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:h=>w[h]},initNode:function(h,b){b.imageRepeat??(b.imageRepeat="no-repeat");b.imageAttachment??(b.imageAttachment="scroll");this.callSuper(h,b)},setImageUrl:function(h){this.imageUrl!==h&&(this.imageUrl=h,this.getIDS().backgroundImage=h?'url("'+h+'")':"none",this.inited&&(this.fireEvent("imageUrl",h),this.setNaturalWidth(),this.setNaturalHeight(),!h&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
m(this))},setImageLoadingError:function(h){this.set("imageLoadingError",h,!0)},setImageSize:function(h){this.imageSize!==h&&(this.imageSize=h,this.getIDS().backgroundSize=h||"auto",this.inited&&this.fireEvent("imageSize",h))},setImageRepeat:function(h){this.imageRepeat!==h&&(this.getIDS().backgroundRepeat=this.imageRepeat=h,this.inited&&this.fireEvent("imageRepeat",h))},setImagePosition:function(h){this.imagePosition!==h&&(this.getIDS().backgroundPosition=this.imagePosition=h,this.inited&&this.fireEvent("imagePosition",
h))},setImageAttachment:function(h){this.imageAttachment!==h&&(this.getIDS().backgroundAttachment=this.imageAttachment=h,this.inited&&this.fireEvent("imageAttachment",h))},setCalculateNaturalSize:function(h){this.calculateNaturalSize!==h&&(this.calculateNaturalSize=h,this.inited&&this.fireEvent("calculateNaturalSize",h),m(this))},setNaturalWidth:function(h){this.naturalWidth!==h&&(this.naturalWidth=h,this.inited&&this.fireEvent("naturalWidth",h),this.useNaturalSize&&h&&this.setWidth(h))},setNaturalHeight:function(h){this.naturalHeight!==
h&&(this.naturalHeight=h,this.inited&&this.fireEvent("naturalHeight",h),this.useNaturalSize&&h&&this.setHeight(h))},setUseNaturalSize:function(h){this.useNaturalSize!==h&&(this.useNaturalSize=h,this.inited&&this.fireEvent("useNaturalSize",h),h&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),h&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(r=>{const w=JS.Class,t=r.View,m=r.SizeToDom;r.Flexbox=new w("Flexbox",t,{include:[r.FlexboxSupport]});r.Frame=new w("Frame",t,{initNode:function(h,b){b.tagName??(b.tagName="iframe");this.callSuper(h,b);h=r.global.mouse;this.attachToDom(h,"__doMouseDown","mousedown",!0);this.attachToDom(h,"__doMouseUp","mouseup",!0)},createOurDomElement:function(h){h=this.callSuper(h);(Array.isArray(h)?h[1]:h).style.border="0px";return h},setSrc:function(h){this.src!==h&&(this.src=this.getIDE().src=h,this.inited&&
this.fireEvent("src",h))},__doMouseDown:function(h){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(h){this.setPointerEvents(this.__restorePointerEvents);return!0}});r.Markup=new w("Markup",t,{include:[m],setHtml:function(h){this.html!==h&&(this.getIDE().innerHTML=this.html=h,this.inited&&(this.fireEvent("html",h),this.sizeViewToDom()))}});r.Text=new w("Text",t,{include:[m,r.TextSupport],initNode:function(h,b){b.whiteSpace??(b.whiteSpace=
"nowrap");b.userUnselectable??(b.userUnselectable=!0);this.callSuper(h,b)},measureNoWrapWidth:function(){const h=this.__hasSetWidth,b=this.width;if(!h&&"nowrap"===this.whiteSpace)return b;const a=this.getIDS(),e=a.whiteSpace;h&&(a.width="auto");a.whiteSpace="nowrap";const d=this.getODE().getBoundingClientRect().width;a.whiteSpace=e;h&&(a.width=b);return d}});r.PaddedText=new w("PaddedText",r.Text,{include:[r.PaddedTextSupport]});r.Image=new w("Image",t,{include:[r.ImageSupport],initNode:function(h,
b){b.useNaturalSize??(b.useNaturalSize=!0);this.callSuper(h,b)}});r.BackView=new w("BackView",t,{sendSubviewToBack:function(h){if(h.parent===this){const b=this.getIDE(),a=b.childNodes[1];h=h.getODE();h!==a&&(h=b.removeChild(h))&&b.insertBefore(h,a)}}})})(myt);
(r=>{const w=Math.round,t=a=>{const e=a.parent;e&&0<=a.percentOfParentWidth&&a.syncTo(e,"__doPOPW","width")},m=a=>{0<=a.percentOfParentWidth&&a.detachFrom(a.parent,"__doPOPW","width")},h=a=>{const e=a.parent;e&&0<=a.percentOfParentHeight&&a.syncTo(e,"__doPOPH","height")},b=a=>{0<=a.percentOfParentHeight&&a.detachFrom(a.parent,"__doPOPH","height")};r.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){this.parent!==a&&(this.inited&&(m(this),b(this)),this.callSuper(a),t(this),h(this))},
setPercentOfParentWidthOffset:function(a){this.percentOfParentWidthOffset!==a&&(this.percentOfParentWidthOffset=a,this.inited&&(this.fireEvent("percentOfParentWidthOffset",a),this.__doPOPW()))},setPercentOfParentWidth:function(a){this.percentOfParentWidth!==a&&(this.inited&&m(this),this.percentOfParentWidth=a,this.inited&&this.fireEvent("percentOfParentWidth",a),t(this))},setPercentOfParentHeightOffset:function(a){this.percentOfParentHeightOffset!==a&&(this.percentOfParentHeightOffset=a,this.inited&&
(this.fireEvent("percentOfParentHeightOffset",a),this.__doPOPH()))},setPercentOfParentHeight:function(a){this.percentOfParentHeight!==a&&(this.inited&&b(this),this.percentOfParentHeight=a,this.inited&&this.fireEvent("percentOfParentHeight",a),h(this))},__doPOPW:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+w(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+w(this.percentOfParentHeight/
100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);(r=>{let w;const t=[];new JS.Singleton("GlobalRootViewRegistry",{include:[r.Observable],initialize:function(){r.global.register("roots",w=this)},getRoots:()=>t,addRoot:m=>{t.push(m);w.fireEvent("rootAdded",m)},removeRoot:m=>{const h=t.indexOf(m);-1<h&&(t.splice(h,1),w.fireEvent("rootRemoved",m))}})})(myt);
(r=>{const w=r.global.roots,t=r.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:m=>{const h=m.__captureDrop=b=>{b.preventDefault()};m=m.getIDE();r.addEventListener(m,"drop",h);r.addEventListener(m,"dragover",h)},teardownCaptureDrop:m=>{const h=m.getIDE();m=m.__captureDrop;r.removeEventListener(h,"drop",m);r.removeEventListener(h,"dragover",m)}},initNode:function(m,h){this.callSuper(m,h);this.setZIndex(0);this.addDomClass("myt");w.addRoot(this);t.setupCaptureDrop(this)},createOurDomElement:function(m){m||
(m=this.callSuper(m),r.getElement().appendChild(m));return m},destroy:function(){t.teardownCaptureDrop(this);w.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(m){this.keepDomElementWhenDestroyed=m},setParent:m=>{},bringToFront:function(){var m=this.getIDE();const h=m.parentNode;m!==h.lastChild&&(m=h.removeChild(m))&&h.appendChild(m)},sendToBack:function(){var m=this.getIDE();const h=m.parentNode;m!==h.firstChild&&
(m=h.removeChild(m))&&h.insertBefore(m,h.firstChild)},sendBehind:function(m){var h=this.getIDE();m=m.getIDE();const b=h.parentNode;m.parentNode===b&&(h=b.removeChild(h))&&b.insertBefore(h,m)},sendInFrontOf:function(m){m.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(m),m.sendBehind(this))}})})(myt);
(r=>{let w,t,m,h=!1;const b=window,a={};new JS.Singleton("GlobalIdle",{include:[r.Observable],initialize:function(){const e=this,d=["webkit","moz","ms","o"];for(let f=0;f<d.length&&!b.requestAnimationFrame;){const l=d[f++];b.requestAnimationFrame=b[l+"RequestAnimationFrame"];b.cancelAnimationFrame=b[l+"CancelAnimationFrame"]??b[l+"CancelRequestAnimationFrame"]}t=f=>{w=b.requestAnimationFrame(t);-1!==m&&(f=Math.round(f),a.delta=f-m,a.time=f,e.fireEvent("idle",a));m=f};r.global.register("idle",e)},
attachObserver:function(e,d,f){e=this.callSuper(e,d,f);!h&&this.hasObservers("idle")&&(h=!0,m=-1,w=b.requestAnimationFrame(t));return e},detachObserver:function(e,d,f){e=this.callSuper(e,d,f);h&&!this.hasObservers("idle")&&(b.cancelAnimationFrame(w),h=!1);return e}})})(myt);
(r=>{let w,t;const m=r.global,h=m.idle,b=window.document;new JS.Singleton("GlobalWindowResize",{include:[r.Observable,r.Observer],initialize:function(){this.attachTo(h,"__setup","idle");m.register("windowResize",this)},__setup:function(a){const e=this,d=b.body;d&&(e.detachFrom(h,"__setup","idle"),(new ResizeObserver(()=>{e.fireEvent("resize",{w:w=d.clientWidth,h:t=d.clientHeight})})).observe(d))},getWidth:()=>w??=b.body.clientWidth,getHeight:()=>t??=b.body.clientHeight})})(myt);
(r=>{const w=JS.Module,t=r.global.windowResize,m=b=>{const a=b.resizeDimension;"both"!==a&&"width"!==a||b.setWidth(Math.max(b.minWidth,t.getWidth()));"both"!==a&&"height"!==a||b.setHeight(Math.max(b.minHeight,t.getHeight()))},h=r.SizeToWindow=new w("SizeToWindow",{include:[r.RootView],initNode:function(b,a){this.minWidth=this.minHeight=0;a.resizeDimension??(a.resizeDimension="both");this.attachTo(t,"__hndlResize","resize");this.callSuper(b,a)},setResizeDimension:function(b){this.resizeDimension!==
b&&(this.resizeDimension=b,m(this))},setMinWidth:function(b){this.minWidth!==b&&(this.minWidth=b,m(this))},setMinHeight:function(b){this.minHeight!==b&&(this.minHeight=b,m(this))},__hndlResize:function(b){m(this)}});r.SizeToWindowWidth=new w("SizeToWindowWidth",{include:[h],initNode:function(b,a){a.resizeDimension??(a.resizeDimension="width");this.callSuper(b,a)}});r.SizeToWindowHeight=new w("SizeToWindowHeight",{include:[h],initNode:function(b,a){a.resizeDimension??(a.resizeDimension="height");this.callSuper(b,
a)}})})(myt);
(r=>{const w=Math,t=w.max,m=w.min,h=c=>m(255,t(0,w.round(c))),b=c=>{c=h(c).toString(16);return 1===c.length?"0"+c:c},a=(c,p,v,k)=>(k?"#":"")+b(c)+b(p)+b(v),e=c=>new q((16711680&c)>>16,(65280&c)>>8,255&c),d=(c,p,v)=>(h(c)<<16)+(h(p)<<8)+h(v),f=(c,p)=>{if("string"===typeof c)if(c.endsWith("%"))c=parseFloat(c.slice(0,-1))*p/100;else return 0;c=m(p,t(0,c))/p;return 1E-6>w.abs(1-c)?1:c},l=(c,p,v)=>{c=f(c,255);p=f(p,255);v=f(v,255);const k=t(c,p,v),y=k-m(c,p,v);if(0===y)return{h:0,s:0,v:k};let B;switch(k){case c:B=
(p-v)/y+(p<v?6:0);break;case p:B=(v-c)/y+2;break;case v:B=(c-p)/y+4}return{h:60*B,s:0===k?0:y/k,v:k}},g=(c,p,v)=>{c=6*f(c,360);p=f(p,100);v=f(v,100);var k=w.floor(c);const y=c-k;c=v*(1-p);const B=v*(1-y*p);p=v*(1-(1-y)*p);k%=6;return{red:255*[v,B,c,c,p,v][k],green:255*[p,v,v,B,c,c][k],blue:255*[c,c,p,v,v,B][k]}},q=r.Color=new JS.Class("Color",{extend:{toUnitRange:f,rgbToHsv:l,hsvToRgb:g,toHex:b,rgbToHex:a,cleanChannelValue:h,getRedChannel:c=>(16711680&c)>>16,getGreenChannel:c=>(65280&c)>>8,getBlueChannel:c=>
255&c,makeColorFromNumber:e,makeColorFromHexString:c=>{if(c)switch("#"===c.charAt(0)&&(c=c.slice(1)),c.length){case 0:c+="0";case 1:c+="0";case 2:c+="0";case 3:case 4:case 5:return new q(parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16));case 6:return e(parseInt(c,16));default:return e(parseInt(c.slice(0,6),16))}},makeColorFromHSV:(c,p,v)=>{c=g(c,p,v);return e(d(c.red,c.green,c.blue))},getLighterColor:(c,p)=>e(c).isLighterThan(e(p))?c:p,makeColorNumberFromChannels:d,makeBlendedColor:(c,
p,v)=>new q(c.red+v*(p.red-c.red),c.green+v*(p.green-c.green),c.blue+v*(p.blue-c.blue))},initialize:function(c,p,v){this.setRed(c);this.setGreen(p);this.setBlue(v)},setRed:function(c){this.red=h(c)},setGreen:function(c){this.green=h(c)},setBlue:function(c){this.blue=h(c)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return a(this.red,this.green,this.blue,!0)},getHSV:function(){return l(this.red,this.green,this.blue)},isLighterThan:function(c){c=
this.getDiffFrom(c);return 0>c.red+c.green+c.blue},getDiffFrom:function(c){return{red:c.red-this.red,green:c.green-this.green,blue:c.blue-this.blue}},applyDiff:function(c){return this.add(c)},add:function(c){this.setRed(this.red+c.red);this.setGreen(this.green+c.green);this.setBlue(this.blue+c.blue);return this},subtract:function(c){this.setRed(this.red-c.red);this.setGreen(this.green-c.green);this.setBlue(this.blue-c.blue);return this},multiply:function(c){this.setRed(this.red*c);this.setGreen(this.green*
c);this.setBlue(this.blue*c);return this},divide:function(c){this.setRed(this.red/c);this.setGreen(this.green/c);this.setBlue(this.blue/c);return this},clone:function(){return new q(this.red,this.green,this.blue)},equals:function(c){return c===this||c&&c.isA&&c.isA(q)&&c.red===this.red&&c.green===this.green&&c.blue===this.blue}})})(myt);
(r=>{const w=Math,t=w.max,m=w.sin,h=w.cos,b=w.pow,a=w.sqrt,e=w.PI,d=2*e,f=e/2,l={linear:k=>k,inQuad:k=>k*k,outQuad:k=>-k*(k-2),inOutQuad:k=>1>(k*=2)?k*k/2:-(--k*(k-2)-1)/2,inCubic:k=>k*k*k,outCubic:k=>--k*k*k+1,inOutCubic:k=>1>(k*=2)?k*k*k/2:((k-=2)*k*k+2)/2,inQuart:k=>k*k*k*k,outQuart:k=>-(--k*k*k*k-1),inOutQuart:k=>1>(k*=2)?k*k*k*k/2:-((k-=2)*k*k*k-2)/2,inQuint:k=>k*k*k*k*k,outQuint:k=>--k*k*k*k*k+1,inOutQuint:k=>1>(k*=2)?k*k*k*k*k/2:((k-=2)*k*k*k*k+2)/2,inSine:k=>-h(k*f)+1,outSine:k=>m(k*f),inOutSine:k=>
-(h(k*e)-1)/2,inCirc:k=>-(a(1-k*k)-1),outCirc:k=>a(1- --k*k),inOutCirc:k=>1>(k*=2)?-(a(1-k*k)-1)/2:(a(1-(k-=2)*k)+1)/2,inExpo:k=>0===k?0:b(2,10*(k-1)),outExpo:k=>1===k?1:-b(2,-10*k)+1,inOutExpo:k=>0===k||1===k?k:1>(k*=2)?b(2,10*(k-1))/2:(-b(2,-10*--k)+2)/2,inElastic:k=>0===k||1===k?k:-(b(2,10*--k)*m((1*k-.075)*d/.3)),outElastic:k=>0===k||1===k?k:b(2,-10*k)*m((1*k-.075)*d/.3)+1,inOutElastic:k=>0===k||1===k?k:1>(k*=2)?-(b(2,10*--k)*m((1*k-.1125)*d/.45))/2:b(2,-10*--k)*m((1*k-.1125)*d/.45)/2+1,inBack:(k,
y=1.70158)=>(k/=1)*k*((y+1)*k-y),outBack:(k,y=1.70158)=>(k=k/1-1)*k*((y+1)*k+y)+1,inOutBack:(k,y=1.70158)=>1>(k*=2)?k*k*(((y*=1.525)+1)*k-y)/2:((k-=2)*k*(((y*=1.525)+1)*k+y)+2)/2,inBounce:k=>1-l.outBounce(1-k),outBounce:k=>k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375,inOutBounce:k=>1>(k*=2)?l.inBounce(k)/2:(l.outBounce(k-1)+1)/2},g=r.global.idle,q=r.Color.makeColorFromHexString,c=k=>{k.__tmpFrom=!1;k.__loopCnt=k.reverse?
k.repeat-1:0;k.__prog=k.reverse?k.duration:0},p=(k,y)=>{if(k.running&&!k.paused){const F=k.reverse,I=k.duration,K=k.repeat;F&&(y*=-1);var B=k.__prog;k.__prog+=y;y=0;k.__prog>I?(y=k.__prog-I,k.__prog=I,++k.__loopCnt===K&&(y=0)):0>k.__prog&&(y=-k.__prog,k.__prog=0,0>--k.__loopCnt&&0<K&&(y=0));var E=k.target??k.parent;if(E){var H=B,A=k.relative,u=k.duration;B=k.attribute;var n=t(0,k.__prog/u);H=t(0,H/u);null==k.from&&(k.__tmpFrom=!0,k.from=A?k.__isColorAnim?"#000":0:E.get(B));H=k.easingFunction(n)-(A?
k.easingFunction(H):0);var x=A?E.get(B):k.from;u=k.to;n=E.set;if(k.__isColorAnim){var z=x;x=q(k.from);u=q(u);A=A?q(z):x;A.setRed(A.red+(u.red-x.red)*H);A.setGreen(A.green+(u.green-x.green)*H);A.setBlue(A.blue+(u.blue-x.blue)*H);A=A.getHtmlHexString()}else A=x+(u-k.from)*H;n.call(E,B,A);!F&&k.__loopCnt===K||F&&0>k.__loopCnt&&0<K?(k.setRunning(!1),k.callback&&k.callback.call(k,!0)):0<y&&(k.fireEvent("repeat",k.__loopCnt),k.__prog=F?I:0,p(k,y))}else console.log("No target for animator",k),k.setRunning(!1),
k.callback&&k.callback.call(k,!1)}},v=r.Animator=new JS.Class("Animator",r.Node,{include:[r.Reusable],extend:{easings:l,EASING:l.inOutQuad},initNode:function(k,y){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=v.EASING;this.callSuper(k,y);c(this)},setRunning:function(k){if(this.running!==k&&(this.running=k,this.inited&&this.fireEvent("running",k),!this.paused)){if(k){const y=this.target??this.parent;this.__isColorAnim=y&&"function"===typeof y.isColorAttr?
y.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),c(this);this[k?"attachTo":"detachFrom"](g,"__updateAnim","idle")}},setPaused:function(k){if(this.paused!==k&&(this.paused=k,this.inited&&this.fireEvent("paused",k),this.running))this[k?"detachFrom":"attachTo"](g,"__updateAnim","idle")},setReverse:function(k){this.reverse!==k&&(this.reverse=k,this.inited&&this.fireEvent("reverse",k),this.running||c(this))},setEasingFunction:function(k){"string"===typeof k&&(k=l[k]);k||(k=
v.EASING);this.set("easingFunction",k,!0)},setFrom:function(k){this.set("from",k,!0)},setTo:function(k){this.set("to",k,!0)},setCallback:function(k){this.callback=k},next:function(k,y){const B=this,E=B.callback;E&&!y?B.setCallback(H=>{E.call(B,H);k.call(B,H)}):B.setCallback(k)},reset:function(k){c(this);this.setRunning(!1);this.setPaused(!1);k&&this.callback&&this.callback.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=
!1;this.repeat=1;this.easingFunction=v.EASING;this.reset(!1)},__updateAnim:function(k){p(this,k.value.delta)}})})(myt);
(r=>{const w=Array.isArray,t=b=>{b.__additionalArgs=[];b.__pendingTransition="";b.__transDestinationState="";b.__transStage="leaveState"},m=(b,a)=>{if(b.__transInProgress){var e=b.__deferredTransitions;e||(e=b.__deferredTransitions=[]);e.unshift(a)}else{b.__transInProgress=!0;e=a.shift();const d=a.shift();if(b.__pendingTransition)return 3;if(b.isFinished())return b.__transInProgress=!1,5;let f=b.map[b.current][d];f||=b.map["*"][d];if(f)return b.__pendingTransition=d,b.__transDestinationState=f,b.__additionalArgs=
a,b.resumeTransition(e);b.__transInProgress=!1;return 5}},h=b=>{b.__transInProgress=!1;const a=b.__deferredTransitions;if(a)for(;0<a.length;)m(b,a.pop())};r.StateMachine=new JS.Class("StateMachine",r.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(b,a){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";t(this);this.callSuper(b,a)},setInitialState:function(b){if(""===this.current){if(w(b)){var a=b;b=a.shift()}else a=[];this.current=
this.initial=b;this.doEnterState("","",b,a);a={name:"",from:"",to:b,args:a};this.fireEvent("enter"+b,a);this.fireEvent("enter",a);this.isFinished()&&this.fireEvent("finished",a)}},setTerminalState:function(b){this.terminal=b},addTransitions:function(b){b.forEach(a=>this.addTransition(...a))},addTransition:function(b,a,e){a=a?w(a)?a:[a]:["*"];const d=this.map;let f=a.length;for(;f;){let l,g;((l=d)[g=a[--f]]??(l[g]={}))[b]=e}},doTransition:function(...b){b.unshift("sync");return m(this,b)},doAsyncTransition:function(...b){b.unshift("async");
return m(this,b)},resumeTransition:function(b){const a=this.__pendingTransition;if(!a)return 4;const e=this.current,d=this.__transDestinationState,f=this.__additionalArgs,l={name:a,from:e,to:d,args:f},g=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const q=this.doLeaveState(a,e,d,f);if(!1===q)return t(this),h(this),2;if("async"===q||"async"===b)return this.__transStage="enterState",g("start"+a,l),g("start",l),g("leave"+e,l),g("leave",l),h(this),3;g("start"+a,l);g("start",l);
g("leave"+e,l);g("leave",l);case "enterState":this.current=d,t(this),this.doEnterState(a,e,d,f),g("enter"+d,l),g("enter",l),g("end"+a,l),g("end",l),this.isFinished()&&g("finished",l)}h(this);return 1},doLeaveState:(b,a,e,d)=>{},doEnterState:(b,a,e,d)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(b){return w(b)?b.includes(this.current):this.current===b},can:function(b){return void 0!==this.map[this.current][b]?!0:void 0!==this.map["*"][b]}})})(myt);
(r=>{const w=(b,a)=>b.replicationIndex-a.replicationIndex,t=(b,a)=>{let e=b.length,d;for(;e;)d=b[--e],d.decrementLockedCounter(),a&&d.update()},m=b=>{h(b);const a=b.template;a&&(b.__pool=new r.TrackActivesPool(a,b.parent))},h=b=>{const a=b.__pool;if(a){const e=b.parent.getLayouts();b=e;let d=b.length;for(;d;)b[--d].incrementLockedCounter();a.putActives();a.destroyPooledInstances();t(e,!1);a.destroy()}};r.Replicable=new JS.Module("Replicable",{include:[r.Reusable],replicate:function(b,a){this.replicationData=
b;this.replicationIndex=a},notify:(b,a)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(b,a){return a===this.replicationIndex&&b===this.replicationData}});r.Replicator=new JS.Class("Replicator",r.Node,{initNode:function(b,a){this.callSuper(b,a);m(this);this.doReplication()},destroy:function(){h(this);this.callSuper()},setTemplate:function(b){(this.template=b.includes(r.Replicable)?b:null)||r.dumpStack("Template not replicable");this.inited&&
(m(this),this.doReplication())},setData:function(b){this.data=b;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const b=this.__pool;let a;if(b){a=this.parent.getLayouts();for(var e=a.length;e;)a[--e].incrementLockedCounter();const d=(e=this.data)?e.length:0,f=b.getActives(),l=f.length,g=[];let q=l,c,p;for(f.sort(w);q;)if(c=f[--q],p=c.replicationIndex,p>=d||!c.alreadyHasReplicationData(e[p],p))g[p]=c;for(q=g.length;q;)(c=g[--q])&&
b.putInstance(c);for(q=0;d>q;++q)(q>=l||null!=g[q])&&b.getInstance().replicate(e[q],q);for(q=a.length;q;)a[--q].sortSubviews(w);t(a,!0)}},notify:function(b,a){var e=this.__pool;if(e){e=e.getActives();let d=e.length;for(;d;)e[--d].notify(b,a)}}})})(myt);new JS.Singleton("GlobalMouse",{include:[myt.DomElementProxy,myt.DomObservable,myt.MouseObservable],initialize:function(){this.setDomElement(document);myt.global.register("mouse",this)}});
(r=>{let w,t,m;const h=[],b=[],a=f=>{const l=m;l!==f&&(l&&(l.notifyDragLeave(t),t.destroyed||t.notifyDragLeaving(l),w("dragLeave",l)),m=f)&&(f.notifyDragEnter(t),t.destroyed||t.notifyDragEntering(f),w("dragEnter",l))},e=f=>{let l=t;l!==f&&((t=f)?(l=f,d(l,b).forEach(g=>{g.notifyDragStart(l)}),d(l,h).forEach(g=>{g.notifyAutoScrollerDragStart(l)}),w("startDrag",f)):(d(l,b).forEach(g=>{g.notifyDragStop(l)}),d(l,h).forEach(g=>{g.notifyAutoScrollerDragStop(l)}),w("stopDrag",f)))},d=(f,l)=>{if(f.destroyed)return[];
if(f.isAnyDragGroup())return l;const g=[];f=f.getDragGroups();let q=l.length;for(;q;){const c=l[--q];if(c.isAnyDropGroup())g.push(c);else{const p=c.getDropGroups();for(const v in f)if(p[v]){g.push(c);break}}}return g};new JS.Singleton("GlobalDragManager",{include:[r.Observable],initialize:function(){r.global.register("dragManager",this);w=this.fireEvent.bind(this)},getDragView:()=>t,registerAutoScroller:f=>{h.push(f)},unregisterAutoScroller:f=>{f=h.indexOf(f);-1<f&&h.splice(f,1)},registerDropTarget:f=>
{b.push(f)},unregisterDropTarget:f=>{f=b.indexOf(f);-1<f&&b.splice(f,1)},startDrag:f=>{e(f)},stopDrag:(f,l,g)=>{l.notifyDropped(m,g);m&&!g&&m.notifyDrop(l);a();e();m&&!g&&w("drop",[l,m])},updateDrag:(f,l)=>{const g=d(l,b);let q=g.length,c;if(0<q){var p=f.value;f=p.pageX;for(p=p.pageY;q;){let v=g[--q];v.willAcceptDrop(l)&&l.willPermitDrop(v)&&v.isPointVisible(f,p)&&(!c||v.isInFrontOf(c))&&(c=v)}}a(c)}})})(myt);
(r=>{const w=JS.Module,t=r.global,m=t.mouse,h=t.keys,b=t.idle;r.Activateable=new w("Activateable",{doActivated:()=>{}});r.UpdateableUI=new w("UpdateableUI",{initNode:function(a,e){this.callSuper(a,e);this.updateUI()},updateUI:()=>{}});r.Disableable=new w("Disableable",{initNode:function(a,e){e.disabled??(e.disabled=!1);this.callSuper(a,e)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus&&this.giveAwayFocus(),this.updateUI&&this.updateUI())}});r.KeyActivation=new w("KeyActivation",{extend:{ACTIVATION_KEYS:[h.CODE_ENTER,h.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,e){this.activateKeyDown="";e.activationKeys??(e.activationKeys=r.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,e);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,
"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=a},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const e=r.KeyObservable.getCodeFromEvent(a),d=this.activationKeys;let f=d.length;for(;f;)if(e===d[--f]){this.activateKeyDown===e?this.doActivationKeyDown(e,!0):(this.activateKeyDown=e,this.doActivationKeyDown(e,!1));a.value.preventDefault();break}}},__hndlKeyPress:function(a){if(!this.disabled){const e=
r.KeyObservable.getCodeFromEvent(a);if(this.activateKeyDown===e){const d=this.activationKeys;let f=d.length;for(;f;)if(e===d[--f]){a.value.preventDefault();break}}}},__hndlKeyUp:function(a){if(!this.disabled){const e=r.KeyObservable.getCodeFromEvent(a);if(this.activateKeyDown===e){const d=this.activationKeys;let f=d.length;for(;f;)if(e===d[--f]){this.activateKeyDown="";this.doActivationKeyUp(e);a.value.preventDefault();break}}}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==
a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,e)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});r.MouseOver=new w("MouseOver",{initNode:function(a,e){e.mouseOver??(e.mouseOver=!1);this.callSuper(a,e);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=
!0,this.attachTo(b,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(b,"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI&&this.updateUI()},
doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});r.MouseDown=new w("MouseDown",{initNode:function(a,e){e.mouseDown??(e.mouseDown=!1);this.callSuper(a,e);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI&&this.updateUI()))},
setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(m,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(m,"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(m,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),
this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated&&this.doActivated()}});r.MouseOverAndDown=new w("MouseOverAndDown",{include:[r.MouseOver,r.MouseDown]});r.Draggable=new w("Draggable",{initNode:function(a,e){let d=!0;this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;null!=e.isDraggable&&(d=e.isDraggable,delete e.isDraggable);this.callSuper(a,e);this.setIsDraggable(d)},setIsDraggable:function(a){if(this.isDraggable!==
a){this.isDraggable=a;let e;a?e=this.attachToDom:this.inited&&(e=this.detachFromDom);if(e){a=this.getDragViews();let d=a.length;for(;d;){const f=a[--d];e.call(this,f,"__doMouseDown","mousedown");e.call(this,f,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",a,!0)},setDragOffsetX:function(a,e){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDragOffsetY:function(a,e){this.dragOffsetY!==a&&(this.dragOffsetY=
a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const e=r.MouseObservable.getMouseFromEvent(a),d=this.getODE();this.dragInitX=e.x-d.offsetLeft;this.dragInitY=e.y-d.offsetTop;
this.attachToDom(m,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(m,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(m,"__doMouseUp","mouseup",!0),this.detachFromDom(m,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===h.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const e=
r.MouseObservable.getMouseFromEvent(a);r.Geometry.measureDistance(e.x,e.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(r.global.mouse,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(h,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(m,"updateDrag","mousemove",!0);this.updateDrag(a)},
updateDrag:function(a){this.__lastMousePosition=r.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,e){this.detachFromDom(m,"__doMouseUp","mouseup",!0);this.detachFromDom(m,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(h,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,e){this.disabled||(this.setX(a),this.setY(e))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(r=>{const w=JS.Class;var t=JS.Module,m=r.View;const h=r.KeyActivation,b=r.Button=new t("Button",{include:[r.Activateable,r.UpdateableUI,r.Disableable,r.MouseOverAndDown,h],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(a,e){e.focusable??(e.focusable=!0);e.cursor??(e.cursor="pointer");this.callSuper(a,e)},setFocused:function(a){const e=this.focused;this.callSuper(a);this.inited&&this.focused!==e&&this.updateUI()},doActivationKeyDown:function(a,e){e||this.updateUI()},doActivationKeyUp:function(a){this.callSuper(a);
this.updateUI()},doActivationKeyAborted:function(a){this.callSuper(a);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const a=this.__restoreCursor;a&&(this.setCursor(a),this.__restoreCursor=null);this.activateKeyDown!==h.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});t=r.SimpleButtonStyle=new t("SimpleButtonStyle",{include:[b],setActiveColor:function(a){this.activeColor!==a&&(this.activeColor=a,this.inited&&this.updateUI())},setHoverColor:function(a){this.hoverColor!==a&&(this.hoverColor=a,this.inited&&this.updateUI())},setReadyColor:function(a){this.readyColor!==
a&&(this.readyColor=a,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(a,e=1){this.setOpacity(e);this.setBgColor(a)}});m=r.SimpleButton=new w("SimpleButton",m,{include:[t],initNode:function(a,e){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(a,e)}});
r.SimpleTextButton=new w("SimpleTextButton",m,{initNode:function(a,e){this.inset=this.outset=0;e.shrinkToFit??(e.shrinkToFit=!1);e.height??(e.height=24);e.textY??(e.textY="middle");this.callSuper(a,e);a=this.textY;e={name:"textView",whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof a?e.valign=a:e.y=a;a=new r.Text(this,e);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",a,"visible",a,"width",
a,"height",a,"y"])},setInset:function(a){this.set("inset",this.valueFromEvent(a),!0)},setOutset:function(a){this.set("outset",this.valueFromEvent(a),!0)},setText:function(a){this.text!==a&&(this.text=a,this.inited&&(this.textView.setText(a),this.fireEvent("text",a)))},setShrinkToFit:function(a){const e=this.textView;this.shrinkToFit!==a&&(this.shrinkToFit=a,this.inited&&(e&&e.setWhiteSpace(a?"nowrap":"normal"),this.fireEvent("shrinkToFit",a)))},setTextY:function(a){const e=this.textView;this.textY!==
a&&(this.textY=a,this.inited&&(this.fireEvent("textY",a),"string"===typeof a?e.setValign(a):(e.setValign(""),e.setY(a))))},__updateContent:function(a){if(!this.__updateContentLoopBlock&&!this.destroyed){a=this.inset;const e=this.outset,d=this.textView;this.__updateContentLoopBlock=!0;d.setX(a);this.shrinkToFit?this.setWidth(a+(d.visible&&this.text?d.width:0)+e):d.setWidth(this.width-a-e);this.__updateContentLoopBlock=!1}}});r.TextButton=new w("TextButton",r.PaddedText,{include:[t],initNode:function(a,
e){e.focusIndicator??(e.focusIndicator=!1);e.roundedCorners??(e.roundedCorners=3);e.textAlign??(e.textAlign="center");e.paddingTop??(e.paddingTop=1);e.height??(e.height=23-(e.paddingTop??0));e.activeColor??(e.activeColor="#ddd");e.hoverColor??(e.hoverColor="#eee");e.readyColor??(e.readyColor="#fff");this.callSuper(a,e)}})})(myt);
(r=>{const w=r.global,t=w.focus,m=w.mouse,h={};r.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:b=>h[b]},initNode:function(b,a){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(b,a)},setLastFloatingPanelShown:function(b){this.lastFloatingPanelShown=b},setLastFloatingPanelId:function(b){this.floatingPanelId=b},setFloatingAlign:function(b){this.set("floatingAlign",b,!0)},setFloatingValign:function(b){this.set("floatingValign",
b,!0)},setFloatingAlignOffset:function(b){this.set("floatingAlignOffset",b,!0)},setFloatingValignOffset:function(b){this.set("floatingValignOffset",b,!0)},createFloatingPanel:function(b,a,e){b=b??this.floatingPanelId;e=e??{};e.panelId=b;return h[b]=new a(null,e)},getFloatingPanel:function(b){return h[b??this.floatingPanelId]},toggleFloatingPanel:function(b){const a=this.getFloatingPanel(b??=this.floatingPanelId);a&&a.isShown()?this.hideFloatingPanel(b):this.showFloatingPanel(b)},showFloatingPanel:function(b){if(b=
this.getFloatingPanel(b??this.floatingPanelId))b.show(this),this.setLastFloatingPanelShown(b)},hideFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(b){this.callSuper&&this.callSuper()},notifyPanelHidden:function(b){this.callSuper&&this.callSuper()},getFloatingAlignForPanelId:function(b){return this.floatingAlign},getFloatingValignForPanelId:function(b){return this.floatingValign},getFloatingAlignOffsetForPanelId:function(b){return this.floatingAlignOffset},
getFloatingValignOffsetForPanelId:function(b){return this.floatingValignOffset},getNextFocus:function(){const b=this.lastFloatingPanelShown;if(b&&b.isShown())return b;if(this.callSuper)return this.callSuper()},getNextFocusAfterPanel:function(b){return this},getPrevFocusAfterPanel:function(b){return this}});r.FloatingPanel=new JS.Class("FloatingPanel",r.View,{include:[r.RootView],initNode:function(b,a){b=document.createElement("div");b.style.position="absolute";r.getElement().appendChild(b);this.ignoreOwnerForHideOnMouseDown=
this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;a.visible=a.focusIndicator=!1;a.focusable=a.focusCage=!0;this.callSuper(b,a)},setOwner:function(b){this.owner=b},setPanelId:function(b){this.panelId=b},setIgnoreOwnerForHideOnMouseDown:function(b){this.ignoreOwnerForHideOnMouseDown=b},setHideOnBlur:function(b){this.hideOnBlur=b},setHideOnMouseDown:function(b){this.hideOnMouseDown=b},__doMouseDown:function(b){var a=b.value;b=a.pageX;a=a.pageY;this.containsPoint(b,a)||this.ignoreOwnerForHideOnMouseDown&&
this.owner.containsPoint(b,a)||this.doMouseDownOutside();return!0},doMouseDownOutside:function(){this.hideOnMouseDown&&this.hide()},focus:function(b){if(this.owner&&this.isAncestorOf(t.focusedView))this.owner[(t.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(b);else{const a=this.getFirstFocusableDescendant();a===this?this.callSuper(b):a.focus(b)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){(b=b.value)&&!this.isAncestorOf(b)&&
this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&t.focusedView===this.owner||this.hide(!0)},isShown:function(){return this.visible},show:function(b){this.isShown()||(this.bringToFront(),this.updateLocation(b),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(m,"__doMouseDown","mousedown",!0),this.attachTo(t,"__doFocusChange","focused"))},hide:function(b){this.isShown()&&(this.detachFromDom(m,"__doMouseDown","mousedown",!0),this.detachFrom(t,
"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),b||this.restoreFocus(),this.setOwner())},restoreFocus:function(){this.owner&&this.owner.focus()},updateLocation:function(b){this.setOwner(b);const a=this.panelId,e=b.getFloatingAlignForPanelId(a),d=b.getFloatingValignForPanelId(a),f=b.getPagePosition();let l=0,g=0,q=typeof e;if("string"===q)switch(l=f.x+b.getFloatingAlignOffsetForPanelId(a),e){case "outsideRight":l+=b.width;break;case "insideRight":l+=b.width-this.width;
break;case "outsideLeft":l-=this.width;break;case "insideLeft":break;default:console.warn("Invalid align value",q,e)}else"number"===q?l=e:console.warn("Invalid align type",q,e);this.setX(l);q=typeof d;if("string"===q)switch(g=f.y+b.getFloatingValignOffsetForPanelId(a),d){case "outsideBottom":g+=b.height;break;case "insideBottom":g+=b.height-this.height;break;case "outsideTop":g-=this.height;break;case "insideTop":break;default:console.warn("Invalid valign value",q,d)}else"number"===q?g=d:console.warn("Invalid valign type",
q,d);this.setY(g)}})})(myt);
(r=>{const w=JS.Class,t=JS.Module;var m=r.global;const h=m.focus,b=m.keys,a=b.LIST_KEYS,e=d=>{var f=d.itemConfig??[];const l=f.length,g=d.items,q=g.length;var c=d.defaultItemClass;const p=d.getContentView(),v=p.getLayouts(),k=d.fixedWidth,y=0<k;v.forEach(x=>{x.incrementLockedCounter()});const B=p.getODE(),E=B.nextSibling,H=B.parentNode;H.removeChild(B);let A=0;const u={listView:d};y&&(u.width=k,u.enableEllipsis=!0);for(;l>A;++A){var n=f[A];const x=n.klass??c;n=n.attrs??{};let z=g[A];z&&!z.isA(x)&&
(z.destroy(),z=null);z||=g[A]=new x(p,Object.assign({},u));z&&(z.callSetters(n),z.__LAYOUT_IDX=A)}H.insertBefore(B,E);if(y)f=k;else for(f=d.minWidth,A=0;l>A;)c=g[A++],c.syncToDom(),f=Math.max(f,c.getMinimumWidth());for(;q>A;)g[A++].destroy();g.length=l;if(!y)for(A=0;l>A;)d.updateItemWidth(g[A++],f);d.updateContentWidth(p,f);v.forEach(x=>{x.sortSubviews((z,F)=>z.__LAYOUT_IDX-F.__LAYOUT_IDX);x.decrementLockedCounter();x.update()})};m=r.ListViewItemMixin=new t("ListViewItemMixin",{setListView:function(d){this.listView=
d},getMinimumWidth:()=>0,syncToDom:()=>{}});r.ListView=new w("ListView",r.FloatingPanel,{initNode:function(d,f){this.items=[];this.maxHeight=-1;this.minWidth=0;f.defaultItemClass??(f.defaultItemClass=r.ListViewItem);f.overflow??(f.overflow="autoy");f.bgColor??(f.bgColor="#ccc");f.boxShadow??(f.boxShadow=r.Button.FOCUS_SHADOW);this.callSuper(d,f);e(this);this.buildLayout(this.getContentView())},buildLayout:d=>{new r.SpacedLayout(d,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(d){this.minWidth=
d},setDefaultItemClass:function(d){this.defaultItemClass=d},setItemConfig:function(d){this.itemConfig=d;this.inited&&e(this)},getContentView:function(){return this},setMaxHeight:function(d){this.maxHeight!==d&&(this.maxHeight=d,this.inited&&(this.fireEvent("maxHeight",d),this.setHeight(this.height)))},setHeight:function(d,f){this.callSuper(0<=this.maxHeight?Math.min(this.maxHeight,d):d,f)},doItemActivated:function(d){this.owner&&this.owner.doItemActivated(d)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){const d=this.items,f=d.length;for(let l=0;f>l;){const g=d[l++];if(g.isFocusable())return g}},getLastFocusableItem:function(){const d=this.items;let f=d.length;for(;f;){const l=d[--f];if(l.isFocusable())return l}},focusToLastItem:function(){const d=this.getLastFocusableItem();d&&d.focus()},focusToFirstItem:function(){const d=this.getFirstFocusableItem();d&&d.focus()},updateItemWidth:(d,f)=>{d.setWidth(f)},updateContentWidth:(d,f)=>{d.setWidth(f)}});
r.ListViewAnchor=new t("ListViewAnchor",{include:[r.FloatingPanelAnchor],initNode:function(d,f){f.listViewClass??(f.listViewClass=r.ListView);f.listViewAttrs??(f.listViewAttrs={});f.itemConfig??(f.itemConfig=[]);f.activationKeys??(f.activationKeys=a);this.callSuper(d,f)},setListViewClass:function(d){this.listViewClass=d},setListViewAttrs:function(d){this.listViewAttrs=d},setItemConfig:function(d){this.itemConfig=d},doItemActivated:function(d){this.hideFloatingPanel()},getFloatingPanel:function(d){return this.callSuper(d)??
this.createFloatingPanel(d,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(d){const f=this.getFloatingPanel(d);f&&(f.setItemConfig(this.itemConfig),this.callSuper(d))},doActivationKeyDown:function(d,f){if(d===b.CODE_ESC)this.hideFloatingPanel();else{switch(d){case b.CODE_ARROW_LEFT:case b.CODE_ARROW_UP:this.focusToLastItem();break;case b.CODE_ARROW_RIGHT:case b.CODE_ARROW_DOWN:this.focusToFirstItem()}this.callSuper(d,f)}},doActivationKeyUp:function(d){if(d!==b.CODE_ESC)switch(this.callSuper(d),
d){case b.CODE_ARROW_LEFT:case b.CODE_ARROW_UP:this.focusToLastItem();break;case b.CODE_ARROW_RIGHT:case b.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const d=this.getFloatingPanel();d&&d.isShown()&&d.focusToLastItem()},focusToFirstItem:function(){const d=this.getFloatingPanel();d&&d.isShown()&&d.focusToFirstItem()}});r.ListViewItem=new w("ListViewItem",r.TextButton,{include:[m],initNode:function(d,f){f.activeColor??(f.activeColor="#bbb");f.hoverColor??(f.hoverColor="#fff");
f.readyColor??(f.readyColor="#eee");f.paddingLeft??(f.paddingLeft=8);f.paddingRight??(f.paddingRight=8);f.textAlign??(f.textAlign="left");f.roundedCorners??(f.roundedCorners=0);f.activationKeys??(f.activationKeys=a);f.focusIndicator??(f.focusIndicator=!0);const l=this.__enableEllipsis=f.enableEllipsis;delete f.enableEllipsis;this.callSuper(d,f);this.addDomClass("mytButtonText");l&&this.enableEllipsis()},setText:function(d){this.callSuper(d);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width=
"auto";this.sizeViewToDom()},getMinimumWidth:function(){return Math.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(d,f){switch(d){case b.CODE_ESC:this.listView.owner.hideFloatingPanel();return;case b.CODE_ARROW_LEFT:case b.CODE_ARROW_UP:h.prev();break;case b.CODE_ARROW_RIGHT:case b.CODE_ARROW_DOWN:h.next()}this.callSuper(d,f)}});r.ListViewSeparator=new w("ListViewSeparator",r.View,{include:[m],initNode:function(d,f){f.height??
(f.height=1);f.bgColor??(f.bgColor="#666");this.callSuper(d,f)}})})(myt);
(r=>{const w=r.AccessorSupport,t={},m=r.BAG=new JS.Class("BAG",{include:[w,r.Destructible,r.Observable],extend:{getGroup:(h,b)=>{if(h&&b){let a;return(a=t[h]??(t[h]={}))[b]??(a[b]=new m(h,b))}},removeGroup:(h,b)=>{if(h&&b&&(h=t[h])){const a=h[b];a&&delete h[b];return a}}},initialize:function(h,b){this.__nodes=[];this.trueNode=null;this.attrName=h;this.groupId=b},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&m.removeGroup(this.attrName,this.groupId);this.__nodes.length=
0;this.detachAllObservers();this.callSuper()},setGroupId:function(h){this.set("groupId",h,!0)},setAttrName:function(h){this.set("attrName",h,!0)},setTrueNode:function(h){this.set("trueNode",h,!0)},getNodes:function(){return this.__nodes},register:function(h){h&&!this.isRegistered(h)&&(this.__nodes.push(h),h[this.attrName]&&this.setTrue(h))},unregister:function(h){if(h){const b=this.__nodes,a=b.indexOf(h);-1<a&&b.splice(a,1);this.trueNode===h&&this.setTrueNode(null);0===b.length&&this.destroy()}},
setTrue:function(h){if(h&&this.trueNode!==h&&this.isRegistered(h)){const b=this.attrName,a=w.generateSetterName(b),e=this.__nodes;let d=e.length;for(this.setTrueNode(h);d;){const f=e[--d];if(h===f){if(!f[b])f[a](!0)}else if(f[b])f[a](!1)}}},setFalse:function(h){h&&this.trueNode===h&&(h[w.generateSetterName(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(h){return this.__nodes.includes(h)}});r.BAGMembership=new JS.Module("BAGMembership",{initNode:function(h,b){this.__bags=[];this.callSuper(h,
b)},destroy:function(){const h=this.__bags;let b=h.length;for(;b;){const a=h[--b];this.removeFromBAG(a.attrName,a.groupId)}this.callSuper()},isRegisteredWithBAG:function(h){return this.__bags.includes(h)},getBAG:(h,b)=>m.getGroup(h,b),addToBAG:function(h,b){b=this.getBAG(h,b);this.isRegisteredWithBAG(b)||(this.__bags.push(b),b.register(this),this.isAttachedTo(this,"__updateForBAG",h)||this.attachTo(this,"__updateForBAG",h))},removeFromBAG:function(h,b){b=this.getBAG(h,b);if(this.isRegisteredWithBAG(b)){const a=
this.__bags;let e=a.length,d=!0;for(;e;){const f=a[--e];f===b?(a.splice(e,1),b.unregister(this)):f.attrName===h&&(d=!1)}d&&this.detachFrom(this,"__updateForBAG",h)}},__updateForBAG:function(h){this.__bags.forEach(b=>{if(b.attrName===h.type)b[h.value?"setTrue":"setFalse"](this)})}})})(myt);
(r=>{const w=t=>{const m=t.label||"";t.setText('<i class="far fa-'+(!0===t.selected?"dot-":"")+'circle"></i>'+(0<m.length?" ":"")+m)};r.Radio=new JS.Class("Radio",r.Text,{include:[r.SimpleButtonStyle,r.BAGMembership],initNode:function(t,m){m.selected??(m.selected=!1);m.groupId??(m.groupId=r.generateGuid());m.focusIndicator??(m.focusIndicator=!1);m.activeColor??(m.activeColor="inherit");m.hoverColor??(m.hoverColor="inherit");m.readyColor??(m.readyColor="inherit");const h=m.value;delete m.value;this.callSuper(t,
m);this.setValue(h);this.selected&&(t=this.getBAG("selected",this.groupId))&&t.setTrue(this);r.FontAwesome.registerForNotification(this);w(this)},setOptionValue:function(t){this.set("optionValue",t,!0)},setValue:function(t){if(this.inited){const m=this.getBAG("selected",this.groupId);if(m){const h=m.getNodes();let b=h.length;for(;b;){const a=h[--b];if(a.optionValue===t){m.setTrue(a);break}}}}},getValue:function(){var t=this.getBAG("selected",this.groupId);return(t=t?t.trueNode:null)?t.optionValue:
null},setSelected:function(t){this.selected!==t&&(this.selected=t,this.inited&&(this.fireEvent("selected",t),w(this)))},setGroupId:function(t){if(this.groupId!==t){const m=this.groupId;this.groupId=t;m&&this.removeFromBAG("selected",m);t&&this.addToBAG("selected",t);this.inited&&this.fireEvent("groupId",t)}},setLabel:function(t){this.label!==t&&(this.set("label",t,!0),this.inited&&w(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(t,m=1){this.setOpacity(m);
this.setTextColor(t)}})})(myt);
(r=>{const w=JS.Module,t=r.global.keys,m=r.Selectable=new w("Selectable",{setSelected:function(b){b=this.valueFromEvent(b);this.selected!==b&&(this.selected=b,this.inited&&this.fireEvent&&this.fireEvent("selected",b))},isSelected:function(){return!!this.selected},canSelect:b=>!0,canDeselect:b=>!0}),h=r.SelectionManager=new w("SelectionManager",{extend:{isAddMode:()=>t.isShiftKeyDown(),isToggleMode:()=>t.isAcceleratorKeyDown()},initNode:function(b,a){this.__selected={};this.__lastSelectedItem=null;
a.selectedCount=0;a.itemSelectionId??(a.itemSelectionId="id");a.maxSelected??(a.maxSelected=-1);this.callSuper(b,a)},setItemSelectionId:function(b){this.itemSelectionId=b},setMaxSelected:function(b){this.maxSelected=b},setSelectedCount:function(b){this.selectedCount!==b&&(this.selectedCount=b,this.inited&&this.fireEvent("selectedCount",b))},isAddMode:()=>h.isAddMode(),isToggleMode:()=>h.isToggleMode(),getSelected:function(){const b=[],a=this.__selected;for(const e in a)b.push(a[e]);return b},select:function(b){b&&
!this.isSelectedItem(b)&&this.canSelectItem(b)&&(b.setSelected(!0),this.__selected[b[this.itemSelectionId]]=b,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=b,this.doSelected(b),this.fireEvent("itemSelected",b))},doSelected:b=>{},selectById:function(b){this.select(this.getSelectableItem(b))},canSelectItem:function(b){const a=this.maxSelected,e=this.selectedCount;if(0===a)return!1;if(1===a){if(0<e&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<a&&e>=a)return!1;return b.canSelect(this)},
selectAll:function(){const b=this.getSelectableItems();let a=b.length;for(;a;)this.select(b[--a])},deselect:function(b){this.isSelectedItem(b)&&this.canDeselectItem(b)&&(b.setSelected(!1),delete this.__selected[b[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===b&&(this.__lastSelectedItem=null),this.doDeselected(b),this.fireEvent("itemDeselected",b))},doDeselected:b=>{},deselectById:function(b){this.deselect(this.getSelectableItem(b))},canDeselectItem:function(b){return b.canDeselect(this)},
deselectAll:function(){const b=this.__selected;for(const a in b)this.deselect(b[a])},isSelectedItem:b=>b?b.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const b=[],a=this.getSubviews();let e=a.length;for(;e;){const d=a[--e];d.isA(m)&&b.push(d)}return b},getSelectableItems:function(){const b=this.getManagedItems();let a=b.length;for(;a;)b[--a].canSelect(this)||b.splice(a,1);return b},getSelectableItem:function(b){const a=
this.getSelectableItems(),e=this.itemSelectionId;let d=a.length;for(;d;){const f=a[--d];if(f[e]===b)return f}}})})(myt);
(r=>{const w=JS.Class,t=r.View,m=r.SizeToParent,h=r.TabSlider=new w("TabSlider",t,{include:[r.Selectable,r.Disableable,m],initNode:function(a,e){const d=this;let f;e.defaultPlacement="wrapper.container";e.percentOfParentWidth=100;e.expansionState="collapsed";e.tabId??(e.tabId=r.generateGuid());e.tabContainer??(e.tabContainer=a);e.selected??(e.selected=!1);e.buttonClass??(e.buttonClass=r.SimpleButton);e.zIndex??(e.zIndex=0);e.buttonHeight??(e.buttonHeight=30);e.fillColorSelected??(e.fillColorSelected=
"#666");e.fillColorHover??(e.fillColorHover="#eee");e.fillColorActive??(e.fillColorActive="#ccc");e.fillColorReady??(e.fillColorReady="#fff");e.minContainerHeight??(e.minContainerHeight=100);e.selected&&(f=!0,delete e.selected);d.callSuper(a,e);new d.buttonClass(d,{name:"button",ignorePlacement:!0,zIndex:1,height:d.buttonHeight,focusIndicator:!0,groupId:d.parent.parent.groupId,percentOfParentWidth:100,hoverColor:d.fillColorHover,activeColor:d.fillColorActive,readyColor:d.fillColorReady},[m,{doActivated:()=>
{const l=d.tabContainer;d.isSelected()&&1!==l.maxSelected?l.deselect(d):l.select(d)},updateUI:function(){this.callSuper();d.selected&&-1!==d.tabContainer.maxSelected&&this.setBgColor(d.fillColorSelected);d.notifyButtonRedraw()}}]);a=new t(d,{name:"wrapper",ignorePlacement:!0,y:d.buttonHeight,height:0,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[m,{setHeight:function(l,g){this.callSuper(Math.round(l),g)},setWidth:function(l,g){this.callSuper(l,g);this.inited&&this.container.setWidth(l)}}]);
new r.SizeToChildren(new t(a,{name:"container"}),{axis:"y"});d.constrain("__updateHeight",[a,"y",a,"height"]);f&&d.tabContainer.select(d);!0===e.disabled&&d.setDisabled(!0);d.setHeight(d.getCollapsedHeight())},setSelected:function(a){this.callSuper(a);this.button&&this.button.updateUI()},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setFillColorSelected:function(a){this.fillColorSelected=
a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){this.buttonHeight!==a&&(this.buttonHeight=a,this.button&&(this.button.setHeight(a),this.wrapper.setY(a)))},setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;this.inited&&this.fireEvent("expansionState",a);const e=this.wrapper;e&&("expanded"===a?(e.setMaskFocus(!1),e.setOverflow("auto")):
"expanding"===a?e.setVisible(!0):"collapsed"===a?e.setVisible(!1):"collapsing"===a&&(e.setMaskFocus(!0),e.setOverflow("hidden")))}},doDisabled:function(){const a=this.button;a&&a.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(a){const e=this,d=e.wrapper;a-=e.getCollapsedHeight();e.setExpansionState("expanding");d.stopActiveAnimators();if(d.height!==a){const f=e.tabContainer.duration;1===f?(d.setHeight(a),
e.setExpansionState("expanded")):d.animate({attribute:"height",to:a,duration:f}).next(l=>{e.setExpansionState("expanded")})}else e.setExpansionState("expanded")},collapse:function(){const a=this,e=a.wrapper;a.setExpansionState("collapsing");e.stopActiveAnimators();if(0!==e.height){const d=a.tabContainer.duration;1===d?(e.setHeight(0),a.setExpansionState("collapsed")):e.animate({attribute:"height",to:0,duration:d}).next(f=>{a.setExpansionState("collapsed")})}else a.setExpansionState("collapsed")},
getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});r.TextTabSlider=new w("TextTabSlider",h,{initNode:function(a,e){e.labelTextColorChecked??(e.labelTextColorChecked="#fff");e.labelTextColor??(e.labelTextColor="#333");this.callSuper(a,e);new r.Text(this.button,{name:"label",
domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){if(this.text!==a){this.text=a;const e=this.button;e&&e.label&&e.label.setText(a)}},notifyButtonRedraw:function(){const a=this.button.label;a&&a.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&
-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const b=r.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[r.SelectionManager],extend:{SPACING:1},initNode:function(a,e){const d=this;d._tabSliders=[];e.defaultPlacement="container";e.spacing??(e.spacing=b.SPACING);e.overflow??(e.overflow="autoy");e.itemSelectionId??(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);e.duration??(e.duration=500);d.updateLayout=r.debounce(d.updateLayout);d.callSuper(a,
e);a=new t(d,{name:"container",ignorePlacement:!0,percentOfParentWidth:100},[m,{subnodeAdded:function(f){this.callSuper(f);f instanceof h&&(d._tabSliders.push(f),d.attachTo(f,"updateLayout","selected"))},subnodeRemoved:function(f){if(f instanceof h){const l=d._tabSliders,g=l.indexOf(f);-1<g&&(d.detachFrom(f,"updateLayout","selected"),l.splice(g,1))}this.callSuper(f)}}]);new r.SpacedLayout(a,{name:"layout",axis:"y",spacing:d.spacing,collapseParent:!0});d.attachTo(d,"updateLayout","height")},setSpacing:function(a){this.spacing!==
a&&(this.spacing=a,this.layout&&this.layout.setSpacing(a))},setDuration:function(a){this.duration=a},updateLayout:function(a,e){a=this._tabSliders;for(var d=a.length,f=d,l=0,g=0,q=0;f;){var c=a[--f];c.visible&&(++q,c.selected?(l+=c.getMinimumExpandedHeight(),g+=c.getPreferredExpandedHeight()):(c=c.getCollapsedHeight(),l+=c,g+=c))}f=this.container.layout;q=f.inset+f.outset+f.spacing*(q-1);g+=q;f=this.height;l=l+q>f;q=g>f;c=this.duration;g-=f;0<e&&this.setDuration(e);for(f=d;f;)if(d=a[--f],d.visible)if(d.selected){let p;
if(l)p=d.getMinimumExpandedHeight();else if(q){const v=d.getPreferredExpandedHeight(),k=d.getMinimumExpandedHeight();p=v-g;k>p?(g-=v-k,p=k):g=0}else p=d.getPreferredExpandedHeight();d.expand(p)}else d.collapse();0<e&&this.setDuration(c)}})})(myt);
(r=>{const w=h=>{const b=[];switch(h.tabContainer.location){case "top":b.push("TopLeft","TopRight");break;case "bottom":b.push("BottomLeft","BottomRight");break;case "left":b.push("TopLeft","BottomLeft");break;case "right":b.push("TopRight","BottomRight")}b.forEach(a=>{h["setRounded"+a+"Corner"](h.cornerRadius||0)})},t=r.Tab=new JS.Class("Tab",r.SimpleTextButton,{include:[r.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(h,b){b.tabId??(b.tabId=r.generateGuid());b.tabContainer??(b.tabContainer=
h);let a;b.selected&&(a=!0,delete b.selected);b.inset??(b.inset=t.INSET);b.outset??(b.outset=t.OUTSET);b.selectedColor??(b.selectedColor="#fff");b.hoverColor??(b.hoverColor="#eee");b.activeColor??(b.activeColor="#aaa");b.readyColor??(b.readyColor="#ccc");b.labelTextSelectedColor??(b.labelTextSelectedColor="#333");b.height??(b.height=24);b.focusIndicator??(b.focusIndicator=!1);b.cornerRadius??(b.cornerRadius=6);this.callSuper(h,b);a&&this.tabContainer.select(this);w(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(h){this.tabId=h},setTabContainer:function(h){this.tabContainer=h},setSelectedColor:function(h){this.selectedColor=h},setLabelTextColor:function(h){this.labelTextColor=h},setCornerRadius:function(h){this.cornerRadius=h;this.inited&&w(this)},setLabelTextSelectedColor:function(h){this.labelTextSelectedColor=h;this.inited&&this.selected&&this.textView.setTextColor(h)},setSelected:function(h){this.callSuper(h);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),m=r.TabContainer=new JS.Module("TabContainer",{include:[r.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(h,b){this.__tabs=[];b.spacing??(b.spacing=m.SPACING);b.inset??(b.inset=m.INSET);b.location??(b.location="top");b.itemSelectionId??
(b.itemSelectionId="tabId");b.maxSelected??(b.maxSelected=1);this.callSuper(h,b);new r.SpacedLayout(this,{name:"layout",axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(h){this.location=h},setSpacing:function(h){this.spacing!==h&&(this.spacing=h,this.layout&&this.layout.setSpacing(h))},setInset:function(h){this.inset!==h&&(this.inset=h,this.layout&&this.layout.setInset(h))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(h){this.callSuper(h);if(h.isA(t))switch(this.__tabs.push(h),this.location){case "top":h.setValign("bottom");break;case "bottom":h.setValign("top");break;case "left":h.setAlign("right");break;case "right":h.setAlign("left")}},subnodeRemoved:function(h){if(h.isA(t)){const b=this.__tabs,a=b.indexOf(h);-1<a&&b.splice(a,1)}this.callSuper(h)}})})(myt);
(r=>{const w=JS.Class,t=Math.min,m=Array.isArray,h=r.global.keys,b=r.SizeToDom;var a=r.View,e=r.Disableable;const d=r.Button.FOCUS_SHADOW,f=(c,p,v)=>{c[v]!==p&&(c[v]=p,c.getIDS()[v]=p+"px",c.inited&&(c.fireEvent(v,p),c.sizeViewToDom()))},l=(c,p,v)=>{c[p]!==v&&(c.getIDE()[p]=c[p]=v,c.inited&&c.fireEvent(p,v))},g=r.NativeInputWrapper=new w("NativeInputWrapper",a,{include:[e,r.InputObservable],initNode:function(c,p){p.tagName??(p.tagName="input");p.focusable??(p.focusable=!0);this.callSuper(c,p);this.addDomClass("mytNativeInput")},
createOurDomElement:function(c){c=this.callSuper(c);this.inputType&&((m(c)?c[1]:c).type=this.inputType);return c},setDisabled:function(c){this.disabled!==c&&(this.getIDE().disabled=c,this.callSuper(c))},setValue:function(c){this.value!==c&&(this.value=c,this.setDomValue(c),this.inited&&this.fireEvent("value",c))},getDomValue:function(){return this.getIDE().value},setDomValue:function(c){const p=this.getIDE();p.value!==c&&(p.value=c)}}),q=r.InputSelectOption=new w("InputSelectOption",a,{include:[e,
r.Selectable],createOurDomElement:c=>document.createElement("option"),setSelected:function(c){c=this.valueFromEvent(c);const p=this.getIDE();p.selected!==c&&(p.selected=c)},setDisabled:function(c){this.disabled!==c&&(this.getIDE().disabled=c,this.callSuper(c))},setValue:function(c){l(this,"value",c)},setLabel:function(c){this.label!==c&&(this.getIDE().textContent=this.label=c,this.inited&&this.fireEvent("label",c))},isSelected:function(){return this.getIDE().selected},canSelect:function(c){return!this.disabled&&
!this.getIDE().selected&&this.parent===c},canDeselect:function(c){return!this.disabled&&this.getIDE().selected&&this.parent===c}});a=r.BaseInputText=new w("BaseInputText",g,{include:[r.TextSupport],initNode:function(c,p){p.bgColor??(p.bgColor="transparent");p.spellcheck??(p.spellcheck=!1);this.callSuper(c,p);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(c){this.callSuper(c);this.setValue(c)},
setSpellcheck:function(c){l(this,"spellcheck",c)},setMaxLength:function(c){l(this,"maxLength",null==c||0>c?void 0:c)},setAllowedChars:function(c){this.allowedChars=c},setPlaceholder:function(c){l(this,"placeholder",c)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(d)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(c){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(c){const p=
c.value,v=this.allowedChars;v&&!v.includes(r.KeyObservable.getKeyFromEvent(c))&&p.preventDefault();this.filterInputPress(p)},filterInput:c=>c,filterInputPress:c=>{},__syncToDom:function(c){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const c=document.selection.createRange();c.moveStart("character",-this.getDomValue().length);return c.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(c,p){if(null==p||c===p){if(this.getCaretPosition()===
c)return;p=c}var v=this.getIDE();v.setSelectionRange?v.setSelectionRange(c,p):v.createTextRange&&(v=v.createTextRange(),v.collapse(!0),v.moveEnd("character",p),v.moveStart("character",c),v.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const c=this.getIDE();return{start:c.selectionStart,startElem:c,end:c.selectionEnd,endElem:c}},setSelection:function(c){c&&
this.setCaretPosition(c.start,c.end)},saveSelection:function(c){this._selRange=c||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}});e=r.InputText=new w("InputText",a,{include:[r.SizeHeightToDom],initNode:function(c,p){this.inputType=!0===p.password?"password":"text";this.callSuper(c,p);this.setCaretToEnd()},setPassword:function(c){this.set("password",c,!0);this.inited&&(this.getIDE().type=c?"password":"text")}});r.EditableText=new w("EditableText",
a,{include:[b],initNode:function(c,p){p.tagName??(p.tagName="div");p.inputType=null;p.whiteSpace??(p.whiteSpace="pre");p.contentEditable??(p.contentEditable=!0);this.callSuper(c,p);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(c){f(this,c,"minWidth")},setMinHeight:function(c){f(this,c,"minHeight")},setPadding:function(c){this.setPaddingTop(c);this.setPaddingRight(c);
this.setPaddingBottom(c);this.setPaddingLeft(c)},setPaddingTop:function(c){f(this,c,"paddingTop")},setPaddingRight:function(c){f(this,c,"paddingRight")},setPaddingBottom:function(c){f(this,c,"paddingBottom")},setPaddingLeft:function(c){f(this,c,"paddingLeft")},setContentEditable:function(c){l(this,"contentEditable",c)},filterInputPress:function(c){const p=this.maxLength;0<=p&&this.getCharacterCount()===p&&c.preventDefault();this.callSuper(c)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(c){const p=this.getIDE();p.innerHTML!==c&&(p.innerHTML=c,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(c){r.KeyObservable.isEnterKeyEvent(c)&&(c.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(c){this.callSuper(c);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){const c=this.getIDE().firstChild;return c?c.length:
0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){const c=this.getSelection();return c?c.end:0},setCaretPosition:function(c,p){if(null==p||c===p){if(this.getCaretPosition()===c)return;p=c}this.saveSelection({start:c,startElem:this.getIDE().firstChild,end:p,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(c){this.saveSelection();return!0},getSelection:function(){let c;
if(window.getSelection){const p=window.getSelection();if(0<p.rangeCount){if(p.extentNode===this.getIDE())return;c=p.getRangeAt(0)}}else document.selection&&(c=document.selection.createRange());return{start:c?c.startOffset:0,startElem:c?c.startContainer:this.getIDE().firstChild,end:c?c.endOffset:0,endElem:c?c.endContainer:this.getIDE().firstChild}},setSelection:function(c){if(c){const p=c.startElem,v=c.endElem;if(p&&p.parentNode&&v&&v.parentNode){const k=document.createRange();k.setStart(p,t(c.start,
p.length));k.setEnd(v,t(c.end,v.length));window.getSelection?(c=window.getSelection(),0<c.rangeCount&&c.removeAllRanges(),c.addRange(k)):document.selection&&k.select()}}}});r.InputTextArea=new w("InputTextArea",a,{initNode:function(c,p){p.tagName??(p.tagName="textarea");p.inputType=null;p.resize??(p.resize="none");p.wrap??(p.wrap="soft");this.callSuper(c,p)},destroy:function(){this.__resizeObserver&&this.__resizeObserver.unobserve(this.getIDE());this.callSuper()},setResize:function(c){const p=this;
p.resize!==c&&(c=p.resize=p.getIDS().resize=c||"none",p.inited&&p.fireEvent("resize",c),"none"!==c&&(p.__resizeObserver??(p.__resizeObserver=new ResizeObserver(()=>{p.doResize()}))).observe(p.getIDE()))},setWrap:function(c){l(this,"wrap",c)},doResize:function(){const c=this.resize;"both"!==c&&"horizontal"!==c||b.sizeWidth(this);"both"!==c&&"vertical"!==c||b.sizeHeight(this)}});r.ComboBox=new w("ComboBox",e,{include:[r.Activateable,r.KeyActivation,r.ListViewAnchor],initNode:function(c,p){this.filterItems=
!0;p.activationKeys??(p.activationKeys=[h.CODE_ENTER,h.CODE_ESC,h.CODE_ARROW_UP,h.CODE_ARROW_DOWN]);p.bgColor??(p.bgColor="#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");p.floatingAlignOffset??(p.floatingAlignOffset=p.borderWidth);p.fullItemConfig??(p.fullItemConfig=[]);p.listViewAttrs={...p.listViewAttrs,maxHeight:p.listViewAttrs?.maxHeight??99};this.callSuper(c,p)},setFullItemConfig:function(c){this.fullItemConfig=c},setFilterItems:function(c){this.filterItems=c},
__syncToDom:function(c){const p=this.value;this.callSuper(c);p!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(c){const p=this.getFloatingPanel(c);if(p){let k;if(this.filterItems){k=[];var v=this.value;v=null==v?"":(""+v).toLowerCase();const y=this.fullItemConfig,B=y.length;for(let E=0;B>E;){const H=y[E++],A=H.attrs.text.toLowerCase(),u=A.indexOf(v);0===u?A!==v&&k.push(H):0<u&&k.push(H)}}else k=this.fullItemConfig;0<k.length?(p.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(k),
this.callSuper(c)):this.hideFloatingPanel(c)}},doItemActivated:function(c){this.setValue(c.text);this.callSuper(c)},doActivated:function(){this.toggleFloatingPanel()}});r.InputSelect=new w("InputSelect",g,{include:[b],initNode:function(c,p){p.tagName??(p.tagName="select");p.inputType=null;p.multiple??(p.multiple=!1);p.size??(p.size=p.multiple?4:1);this.callSuper(c,p);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(c){l(this,"multiple",c)},setSize:function(c){l(this,
"size",c)},setOptions:function(c){this.destroyAllOptions();m(c)&&c.forEach(p=>{this.addOption(p)})},getOptions:function(){return this.getSubviews().slice()},setValue:function(c){m(c)&&r.areArraysEqual(c,this.value)||this.value===c||(this.value=c,this.inited&&this.fireEvent("value",c))},subviewAdded:function(c){c instanceof q||(r.dumpStack("Subview unsupported. Destroying it"),c.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(d)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();
this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(c=>c.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(c=>c.value)},getOptionForValue:function(c){return this.getOptions().find(p=>p.value===c)},addOption:function(c){return new q(this,c)},destroyAllOptions:function(){this.getOptions().forEach(c=>{c.destroy()})},destroyOptionWithValue:function(c){if(c=this.getOptionForValue(c))if(c.destroy(),c.destroyed)return!0;return!1},deselectAll:function(){let c=
!1;this.getOptions().forEach(p=>{p.isSelected()&&(p.setSelected(!1),c=!0)});c&&this.__doChanged()},selectValues:function(c){(m(c)?c:[c]).forEach(p=>{this.selectValue(p)})},selectValue:function(c){this.select(this.getOptionForValue(c))},select:function(c){c&&c.canSelect(this)&&(c.setSelected(!0),this.__syncToDom())},deselectValue:function(c){this.deselect(this.getOptionForValue(c))},deselect:function(c){c&&c.canDeselect(this)&&(c.setSelected(!1),this.__syncToDom())},__doChanged:function(c){this.__syncToDom();
this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(r=>{const w=JS.Module,t=Math.round;var m=r.ValueComponent=new w("ValueComponent",{initNode:function(b,a){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(b,a)},setValueFilter:function(b){this.valueFilter=b;this.inited&&b&&this.setValue(this.value)},setValue:function(b){this.valueFilter&&(b=this.valueFilter(b));this.value!==b&&(this.value=b,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(b,a){const e=this.valueFilter;
this.setValueFilter(e?"last"===a?d=>b(e(d)):d=>e(b(d)):b)}});const h=r.RangeComponent=new w("RangeComponent",{include:[m],setLowerValue:function(b){this.setValue({lower:b,upper:this.value&&void 0!==this.value.upper?this.value.upper:b})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(b){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:b,upper:b})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(b){if(b){var a=
this.value;const f=a?a.lower:void 0;a=a?a.upper:void 0;this.valueFilter&&(b=this.valueFilter(b));if(b.lower!==f||b.upper!==a){var e;(e=b).lower??(e.lower=b.upper);var d;(d=b).upper??(d.upper=b.lower);void 0!==b.lower&&void 0!==b.upper&&b.lower>b.upper&&(e=b.lower,b.lower=b.upper,b.upper=e);this.value=b;this.inited&&(this.fireEvent("value",this.getValue()),b.lower!==f&&this.fireEvent("lowerValue",b.lower),b.upper!==a&&this.fireEvent("upperValue",b.upper))}}else this.callSuper(b)},getValueCopy:function(){const b=
this.value;return{lower:b.lower,upper:b.upper}}});m=r.BoundedValueComponent=new w("BoundedValueComponent",{include:[m],initNode:function(b,a){const e=this;e.appendToEarlyAttrs("snapToInt","minValue","maxValue");a.snapToInt??(a.snapToInt=!0);a.valueFilter||(a.valueFilter=d=>{var f=e.maxValue;if(null!=f&&d>f)return f;f=e.minValue;return null!=f&&d<f?f:d});e.callSuper(b,a)},setSnapToInt:function(b){this.snapToInt!==b&&(this.snapToInt=b,this.inited&&(this.fireEvent("snapToInt",b),b&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(b){this.snapToInt&&null!=b&&(b=t(b));if(this.minValue!==b){const a=this.maxValue;null!=a&&b>a&&(b=a);this.minValue!==b&&(this.minValue=b,this.inited&&(this.fireEvent("minValue",b),this.setValue(this.value)))}},setMaxValue:function(b){this.snapToInt&&null!=b&&(b=t(b));if(this.maxValue!==b){const a=this.minValue;null!=a&&b<a&&(b=a);this.maxValue!==b&&(this.maxValue=b,this.inited&&(this.fireEvent("maxValue",b),this.setValue(this.value)))}},
setValue:function(b){this.callSuper(this.snapToInt&&null!=b&&!isNaN(b)?t(b):b)}});r.BoundedRangeComponent=new w("BoundedRangeComponent",{include:[m,h],initNode:function(b,a){const e=this;a.valueFilter||(a.valueFilter=d=>{if(d){const f=e.maxValue,l=e.minValue;null!=f&&d.upper>f&&(d.upper=f);null!=l&&d.lower<l&&(d.lower=l)}return d});e.callSuper(b,a)},setValue:function(b){this.snapToInt&&null!=b&&(null==b.lower||isNaN(b.lower)||(b.lower=t(b.lower)),null==b.upper||isNaN(b.upper)||(b.upper=t(b.upper)));
this.callSuper(b)}})})(myt);
(r=>{const w=t=>{const m=t.label??"";t.setText('<i class="'+("solid"===(t.checkboxStyle??"outline")?"fas":"far")+" fa-"+(t.isChecked()?"check-":"")+'square"></i>'+(0<m.length?" ":"")+m)};r.Checkbox=new JS.Class("Checkbox",r.Text,{include:[r.SimpleButtonStyle,r.ValueComponent],initNode:function(t,m){this.appendToEarlyAttrs("userUnselectable");m.value??(m.value=!1);m.focusIndicator??(m.focusIndicator=!1);m.checkboxStyle??(m.checkboxStyle="outline");m.activeColor??(m.activeColor="inherit");m.hoverColor??
(m.hoverColor="inherit");m.readyColor??(m.readyColor="inherit");this.callSuper(t,m);r.FontAwesome.registerForNotification(this);w(this)},setValue:function(t){this.value!==t&&(this.callSuper(t),this.inited&&w(this))},setLabel:function(t){this.label!==t&&(this.set("label",t,!0),this.inited&&w(this))},setCheckboxStyle:function(t){this.checkboxStyle!==t&&(this.set("checkboxStyle",t,!0),this.inited&&w(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(t,m=1){this.setOpacity(m);this.setTextColor(t)}})})(myt);
(r=>{let w;const t=JS.Class,m=JS.Module,h=r.global,b=h.focus,a=h.keys,e=r.KeyObservable,d={},f=(u,n)=>{if(u){const x=u.id;u.id?n(x):r.dumpStack("No ID")}else r.dumpStack("No processor")},l=u=>{f(u,n=>{d[n]=u})},g=u=>{const n=r.BAG.getGroup("selected",u.groupId);if(n){const x=n.getNodes();u=u.value;let z=x.length;for(;z;){const F=x[--z];if(F.optionValue===u){n.setTrue(F);break}}}},q=u=>{if(u.groupId){const n=r.BAG.getGroup("selected",u.groupId);n&&u.syncTo(n,"__syncValue","trueNode")}},c=(u,n)=>{const x=
[];(u.__v??[]).forEach(z=>{n=z.isFormValid(u,null,x)&&n});u.setErrorMessages(x);u.setIsValid(n);return n},p=(u,n,x)=>{(u.__vp??[]).forEach(z=>{z[x]&&(n=z.process(n))});return n},v=r.ValueProcessor=new t("ValueProcessor",{initialize:function(u,n,x,z){this.id=u;this.runForDefault=!!n;this.runForRollback=!!x;this.runForCurrent=!!z},process:u=>u}),k=r.ToNumberValueProcessor=new t("ToNumberValueProcessor",v,{process:u=>{if(null==u||""===u||"-"===u)return u;const n=Number(u);return isNaN(n)?u:n}}),y=r.TrimValueProcessor=
new t("TrimValueProcessor",v,{initialize:function(u,n,x,z,F){this.callSuper(u,n,x,z);this.trim=F},process:function(u){u+="";switch(this.trim){case "start":case "left":return u.trimStart();case "end":case "right":return u.trimEnd();default:return u.trim()}}}),B=r.UndefinedValueProcessor=new t("UndefinedValueProcessor",v,{initialize:function(u,n,x,z,F){this.callSuper(u,n,x,z);this.defaultValue=F},process:function(u){return void 0===u?this.defaultValue:u}}),E=r.Form=new m("Form",{initNode:function(u,
n){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(u,n);this.form&&this.form.isA(E)&&this.form.addSubForm(this)},destroy:function(){this.form&&this.form.isA(E)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(u){this.set("errorMessages",u,!0)},getFullId:function(){const u=[this.id];let n=this.form;for(;n&&n.id;)u.unshift(n.id),n=n.form;return u.join(".")},setId:function(u){if(this.id!==u){const n=this.id;this.id=
u;(u=this.form)&&this.inited&&(u.removeSubForm(n),u.addSubForm(this))}},setForm:function(u){if(this.form!==u){const n=this.form;this.form=u;n&&n.removeSubForm(this.id);u&&this.inited&&u.addSubForm(this)}},setIsValid:function(u){this.isValid=u;this.inited&&this.fireEvent("isValid",u);const n=this.form;n&&!this._lockCascade&&(u?n.verifyValidState(this):n.notifySubFormInvalid())},setIsChanged:function(u){if(this.isChanged!==u){this.isChanged=u;this.inited&&this.fireEvent("isChanged",u);const n=this.form;
n&&!this._lockCascade&&(u?n.notifySubFormChanged():n.verifyChangedState(this))}},setValidators:function(u){let n=u.length;for(;n;){const x=u[--n];"string"===typeof x&&(u[n]=h.validators.getValidator(x),u[n]||u.splice(n,1))}this.__v=u},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(H))return this.value;const u={},n=this.__sf;for(const x in n)u[x]=n[x].getValue();return u},setValue:function(u){this.callSuper&&this.callSuper(u);if("object"===typeof u&&!this.isA(H))for(const n in u){const x=
this.getSubForm(n);x?u[n]=x.setValue(u[n]):console.warn("ID in setValue for missing subform",n)}this.form&&this.form.notifyValueChanged(this);return u},getDefaultValue:function(){const u={};let n=this.__sf;for(const x in n)u[x]=n[x].getDefaultValue();return u},setDefaultValue:function(u){if("object"===typeof u)for(const n in u){const x=this.getSubForm(n);x?u[n]=x.setDefaultValue(u[n]):console.warn("ID in setDefaultValue for missing subform",n)}return u},getRollbackValue:function(){const u={},n=this.__sf;
for(const x in n)u[x]=n[x].getRollbackValue();return u},setRollbackValue:function(u){if("object"===typeof u)for(const n in u){const x=this.getSubForm(n);x?u[n]=x.setRollbackValue(u[n]):console.warn("ID in setRollbackValue for missing subform",n)}return u},addAccelerator:function(u,n){this.__acc[u]=n},removeAccelerator:function(u){delete this.__acc[u]},invokeAccelerator:function(u,n){(u=this.__acc[u])&&u.call(this,n??null)},addValidator:function(u){u&&this.__v.push(u)},removeValidator:function(u){if(u){const n=
this.__v;let x=n.length;for(;x;){const z=n[--x];if(z.id===u)return n.splice(x,1),z}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(u){const n=u.id;null!=this.getSubForm(n)?console.warn("ID in use for subform, add aborted",n,u):(u.setForm(this),this.__sf[n]=u,u.isChanged&&this.notifySubFormChanged(),u.isValid||this.notifySubFormInvalid())},removeSubForm:function(u){const n=this.getSubForm(u);n&&(n.setForm(null),delete this.__sf[u],this.verifyChangedState(),
this.verifyValidState());return n},getSubForm:function(u){return this.__sf[u]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(u){u&&this.doValidation();const n=[];(function F(z){if(z.isA(H))z.isValid||n.push(z.getFullId());else{z=z.getSubForms();for(const I in z)F(z[I])}})(this);return n},getAllErrorMessages:function(){const u=this.__sf;let n=(this.errorMessages??[]).slice();for(const x in u)n=n.concat(u[x].getAllErrorMessages());return n},notifySubFormInvalid:function(){this.setIsValid(!1)},
verifyValidState:function(u){const n=this.__sf;let x=!0;for(const z in n){const F=n[z];F!==u&&(x=F.isValid&&x)}return c(this,x)},doValidation:function(){const u=this.__sf;let n=!0;for(const x in u)n=u[x].doValidation()&&n;this._lockCascade=!0;n=c(this,n);this._lockCascade=!1;return n},notifyValueChanged:function(u){this.form&&this.form.notifyValueChanged(u)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(u){const n=this.__sf;let x=!1;for(const z in n){const F=n[z];
F!==u&&(x=F.isChanged||x)}this.setIsChanged(x);return x},setup:function(u,n,x){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;u??={};n??={};x??={};const z=this.__sf;for(const F in z)z[F].setup(u[F],n[F],x[F])},resetForm:function(){this._lockCascade=!0;const u=this.__sf;for(const n in u)u[n].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;
const u=this.__sf;for(const n in u)u[n].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const u={},n=this.__sf;for(const x in n){const z=n[x];z.isChanged&&(u[x]=z.getChangedValue())}return u}}),H=r.FormElement=new m("FormElement",{include:[E],initNode:function(u,n){this.__vp=[];this.callSuper(u,n)},getValue:function(){return p(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(u){void 0===
u&&(u=this.getRollbackValue());this.value!==u&&(this.callSuper(u),this.verifyChangedState());return u},getDefaultValue:function(){return p(this,this.defaultValue,"runForDefault")},setDefaultValue:function(u){this.defaultValue!==u&&(this.defaultValue=u,this.inited&&this.fireEvent("defaultValue",u),this.verifyChangedState());return u},getRollbackValue:function(){return p(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(u){void 0===u&&(u=this.getDefaultValue());this.rollbackValue!==
u&&(this.rollbackValue=u,this.inited&&this.fireEvent("rollbackValue",u),this.verifyChangedState());return u},setValueProcessors:function(u){let n=u.length;for(;n;){const x=u[--n];"string"===typeof x&&(u[n]=d[x],u[n]||u.splice(n,1))}this.__vp=u},addValueProcessor:function(u){this.__vp.push(u)},removeValueProcessor:function(u){if(u){const n=this.__vp;let x=n.length;for(;x;){const z=n[--x];if(z.id===u)return n.splice(x,1),z}}},addSubForm:u=>{r.dumpStack("addSubForm unsupported on FormElement")},getSubForm:u=>
{r.dumpStack("getSubForm unsupported on FormElement")},removeSubForm:u=>{r.dumpStack("removeSubForm unsupported on FormElement")},verifyChangedState:function(u){u=this.getValue()!==this.getRollbackValue();this.setIsChanged(u);return u},setup:function(u,n,x){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(u);this.setRollbackValue(n);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(x)},resetForm:function(){this._lockCascade=
!0;const u=this.getDefaultValue();this.setRollbackValue(u);this.setValue(u);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),A=r.FormInputTextMixin=new m("FormInputTextMixin",{include:[H,r.UpdateableUI],initNode:function(u,
n){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";n.bgColor??(n.bgColor="#fff");n.borderWidth??(n.borderWidth=1);n.borderStyle??(n.borderStyle="solid");this.callSuper(u,n);this.addValueProcessor(w);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(u){this.validateWhen=
u},setAcceleratorScope:function(u){this.acceleratorScope=u},setErrorColor:function(u){this.errorColor=u},setActionRequiredColor:function(u){this.actionRequiredColor=u},setNormalColor:function(u){this.normalColor=u},setIsChanged:function(u){this.callSuper(u);this.inited&&this.updateUI()},setIsValid:function(u){this.callSuper(u);this.inited&&this.updateUI()},setValue:function(u){u=this.callSuper(u);const n=this.validateWhen;"key"!==n&&"blurWithKeyFix"!==n||this.verifyValidState();return u},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form&&this.form.verifyChangedState(this)}},__hndlKeyDown:function(u){e.isEnterKeyEvent(u)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(u){e.isEscKeyEvent(u)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const u=this.validateWhen;
"blur"!==u&&"blurWithKeyFix"!==u||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});r.RootForm=new m("RootForm",{include:[E],initNode:function(u,n){this.callSuper(u,n);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:u=>{},doInvalidSubmit:()=>
{},doCancel:function(){this.rollbackForm();this.doValidation()}});r.FormCheckbox=new t("FormCheckbox",r.Checkbox,{include:[H],initNode:function(u,n){this.rollbackValue=this.defaultValue=!1;this.callSuper(u,n)}});r.FormComboBox=new t("FormComboBox",r.ComboBox,{include:[H,r.UpdateableUI],initNode:function(u,n){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(u,n);this.addValueProcessor(w);this.addAccelerator("accept",
this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(u){this.validateWhen=u},setAcceleratorScope:function(u){this.acceleratorScope=u},setErrorColor:function(u){this.errorColor=u},setActionRequiredColor:function(u){this.actionRequiredColor=u},setNormalColor:function(u){this.normalColor=u},setIsChanged:function(u){this.callSuper(u);this.inited&&this.updateUI()},setIsValid:function(u){this.callSuper(u);this.inited&&this.updateUI()},setValue:function(u){u=this.callSuper(u);
const n=this.validateWhen;"key"!==n&&"blurWithKeyFix"!==n||this.verifyValidState();return u},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form&&this.form.verifyChangedState(this)}},
notifyPanelShown:function(u){this._isShown=!0},notifyPanelHidden:function(u){this._isShown=!1},doActivationKeyDown:function(u,n){u!==a.CODE_ESC||this._isShown?this.callSuper(u,n):this.invokeAccelerator("reject")},doActivationKeyUp:function(u){u!==a.CODE_ENTER||this._isShown?this.callSuper(u):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const u=this.validateWhen;"blur"!==u&&"blurWithKeyFix"!==u||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:
this.isChanged?this.errorColor:this.actionRequiredColor)}});r.FormEditableText=new t("FormEditableText",r.EditableText,{include:[A],__hndlKeyDown:function(u){"nowrap"===this.whitespace&&this.callSuper(u)}});r.FormInputText=new t("FormInputText",r.InputText,{include:[A]});r.FormInputTextArea=new t("FormInputTextArea",r.InputTextArea,{include:[A],__hndlKeyDown:u=>{}});r.FormInputSelect=new t("FormInputSelect",r.InputSelect,{include:[H],setValue:function(u){if(!this.__abortSetValue)return u=this.callSuper(u),
this.__abortSetValue=!0,this.deselectAll(),this.selectValues(u),this.__abortSetValue=!1,this.verifyValidState(),u}});r.FormRadioGroup=new t("FormRadioGroup",r.Node,{include:[r.ValueComponent,H],initNode:function(u,n){n.groupId??(n.groupId=r.generateGuid());this.callSuper(u,n);void 0!==this.value&&g(this);q(this)},setValue:function(u){u=this.callSuper(u);this.inited&&g(this);return u},setGroupId:function(u){if(this.groupId!==u){if(this.groupId){const n=r.BAG.getGroup("selected",this.groupId);n&&this.detachFrom(n,
"__syncValue","trueNode")}this.groupId=u;this.inited&&q(this)}},__syncValue:function(u){u=u.value;this.setValue(u?u.optionValue:null)}});r.UseOtherFieldIfEmptyValueProcessor=new t("UseOtherFieldIfEmptyValueProcessor",v,{initialize:function(u,n,x,z,F){this.callSuper(u,n,x,z);this.otherField=F},process:function(u){return null==u||""===u?this.otherField.getValue():u}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){l(w=new B("undefToEmpty",!0,!0,!0,""));l(new k("toNumber",!0,
!0,!0));l(new y("trimLeft",!0,!0,!0,"left"));l(new y("trimRight",!0,!0,!0,"right"));l(new y("trimBoth",!0,!0,!0,"both"));h.register("valueProcessors",this)},getValueProcessor:u=>d[u],register:l,unregister:u=>{f(u,n=>{d[n]&&delete d[n]})}})})(myt);
(r=>{const w=JS.Class,t=Math.round,m={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},h=(d,f)=>{d[f](d,"doDragOver","dragover",!1);d[f](d,"doDragEnter","dragenter",!1);d[f](d,"doDragLeave","dragleave",!1);d[f](d,"doDrop","drop",!1)},b=r.DragDropSupport=new JS.Module("DragDropSupport",{include:[r.DragDropObservable],initNode:function(d,f){this.callSuper(d,f);this.disabled||this.setupDragListeners()},setDisabled:function(d){this.disabled!==d&&
(this.getIDE().disabled=d,this.callSuper(d),this.inited&&(d?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){h(this,"attachToDom")},teardownDragListeners:function(){h(this,"detachFromDom")},doDragOver:d=>{},doDragEnter:d=>{},doDragLeave:d=>{},doDrop:function(d){this.handleFiles(d.value.dataTransfer.files,d)},handleFiles:function(d,f){if(void 0!==d){let l=d.length;for(;l;){const g=this.filterFiles(d[--l]);g&&this.handleDroppedFile(g,f)}}else r.dumpStack("No File API")},
filterFiles:d=>d,handleDroppedFile:(d,f)=>{}}),a=r.Uploader=new w("Uploader",r.View,{include:[b,r.Disableable,r.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(d,f)=>{if(void 0!==FileReader){const l=new FileReader;l.onload=f;l.readAsDataURL(d)}},isSameFile:(d,f)=>null!=d&&null!=f&&d.name===f.name&&d.type===f.type&&d.size===f.size,createFile:d=>{const f=(new r.URI(d)).file;return{name:f,serverPath:d,size:-1,type:m[r.getExtension(f)]}}},initNode:function(d,f){const l=this;l.files=
[];f.requestFileParam??(f.requestFileParam="file");f.maxFiles??(f.maxFiles=-1);l.callSuper(d,f);new r.NativeInputWrapper(l,{name:"fileInput",percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:l.disabled,overflow:"hidden"},[r.SizeToParent,{initNode:function(g,q){this.inputType="file";this.callSuper(g,q);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<l.maxFiles},_hndlInput:function(g){l.handleFiles(this.getIDE().files,g)}}])},setValue:function(d){this.clearFiles();
d&&(Array.isArray(d)||(d=[d]),d.forEach(f=>{this.addFile(a.createFile(f))}));return this.callSuper?this.callSuper(d):d},getValue:function(){return this.value},setDisabled:function(d){this.callSuper(d);this.fileInput&&this.fileInput.setDisabled(d)},setMaxFiles:function(d){this.maxFiles!==d&&(this.maxFiles=d,this.inited&&this.fireEvent("maxFiles",d),this.fileInput&&(this.fileInput.getIDE().multiple=1<d))},setUploadUrl:function(d){this.set("uploadUrl",d,!0)},setRequestFileParam:function(d){this.set("requestFileParam",
d,!0)},bringSubviewToFront:function(d){d===this.fileInput?this.callSuper(d):this.sendSubviewBehind(d,this.fileInput)},subviewAdded:function(d){this.callSuper(d);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(d,f){this.addFile(d)},filterFiles:function(d){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:d},uploadFiles:function(d,f){d??=this.uploadUrl;const l=this.files;let g=l.length;for(;g;)this.uploadFile(l[--g],d,f)},makeFetchOptionsForUpload:d=>
({method:"POST",body:d}),uploadFile:function(d,f,l){const g=this,q=new FormData;q.append(l??g.requestFileParam,d,d.name);r.doFetch(f??g.uploadUrl,g.makeFetchOptionsForUpload(q),!1,c=>{g.handleUploadSuccess(d,c)},c=>{g.handleUploadFailure(d,c)})},handleUploadSuccess:function(d,f){d[a.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(d,f);this.updateValueFromFiles()},handleUploadFailure:(d,f)=>{r.dumpStack("Upload failure:"+f.status+":"+f.message)},parseServerPathFromResponse:(d,f)=>null,addFile:function(d){this.files.push(d);
this.updateValueFromFiles();this.fireEvent("addFile",d)},removeFile:function(d){const f=this.files;let l=f.length;for(;l;)if(a.isSameFile(f[--l],d)){f.splice(l,1);this.updateValueFromFiles();this.fireEvent("removeFile",d);break}},updateValueFromFiles:function(){const d=[];var f=this.files;let l=f.length;for(;l;){const g=f[--l][a.FILE_ATTR_SERVER_PATH];g&&d.push(g)}f=d.length;this.value=1===f?d[0]:0===f?void 0:d;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form&&this.form.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const d=this.files;let f=d.length;for(;f;)this.removeFile(d[--f])}}),e=r.ImageUploader=new w("ImageUploader",a,{extend:{isImageFile:d=>/image/i.test(d.type)},initNode:function(d,f){f.maxFiles=1;this.callSuper(d,f)},setWidth:function(d,f){this.callSuper(d,f);this.inited&&this.updateImageSize()},setHeight:function(d,f){this.callSuper(d,f);this.inited&&this.updateImageSize()},filterFiles:function(d){if(e.isImageFile(d)||this.allowNonImages){for(;0<
this.files.length;)this.removeFile(this.files[0]);return this.callSuper(d)}},addFile:function(d){const f=this,l=e.isImageFile(d);f.callSuper(d);const g=f.image=new r.Image(f,{useNaturalSize:!1,align:"center",valign:"middle"});g.file=d;const q=c=>{const p=new Image;p.onload=()=>{d.width=p.width;d.height=p.height;g&&!g.destroyed&&f.updateImage(d,g,p.src)};p.src=c};l?-1===d.size?q(d.serverPath):void 0!==FileReader&&e.isImageFile(d)&&a.readFile(d,c=>{q(c.target.result)}):-1===d.size?f.updateImage(d,g,
d.serverPath):void 0!==FileReader&&a.readFile(d,c=>{f.updateImage(d,g,c.target.result)})},scaleToFit:(d,f,l,g)=>l/g>d/f?[d,g*d/l]:[l*f/g,f],removeFile:function(d){this.callSuper(d);const f=this.getSubviews();let l=f.length;for(;l;){const g=f[--l];if(a.isSameFile(g.file,d)){g.destroy();break}}},handleDroppedFile:function(d,f){this.callSuper(d,f);this.uploadFile(d,this.uploadUrl)},updateImage:function(d,f,l){this.nativeWidth=d.width;this.nativeHeight=d.height;this.updateImageSize();f.setImageUrl(l)},
updateImageSize:function(){const d=this.image;if(d&&!d.destroyed){var f=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const l=t(f[0]);f=t(f[1]);d.setImageSize(l+"px "+f+"px");d.setWidth(l);d.setHeight(f)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(r=>{const w=(t,m,h)=>{const b=t.axis;h=h.bind(t);"y"!==b&&(h(m,"update","x"),h(m,"update","boundsWidth"));"x"!==b&&(h(m,"update","y"),h(m,"update","boundsHeight"));h(m,"update","visible")};r.SizeToChildren=new JS.Class("SizeToChildren",r.Layout,{initNode:function(t,m){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(t,m)},setAxis:function(t){this.axis!==t&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=t,this.startMonitoringAllSubviews(),this.fireEvent("axis",t),this.update()):
this.axis=t)},setPaddingX:function(t){this.paddingX!==t&&(this.paddingX=t,this.inited&&(this.fireEvent("paddingX",t),this.update()))},setPaddingY:function(t){this.paddingY!==t&&(this.paddingY=t,this.inited&&(this.fireEvent("paddingY",t),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();if(!this.parent.isBeingDestroyed){const m=this.subviews;var t=m.length;const h=this.axis;let b,a;if("y"!==h){b=t;for(a=0;b;){const e=m[--b];e.visible&&(a=Math.max(a,e.x+(0<e.boundsWidth?
e.boundsWidth:0)))}this.updateSize(a+this.paddingX,!0)}if("x"!==h){b=t;for(a=0;b;)t=m[--b],t.visible&&(a=Math.max(a,t.y+(0<t.boundsHeight?t.boundsHeight:0)));this.updateSize(a+this.paddingY,!1)}}this.decrementLockedCounter()}},updateSize:function(t,m){this.parent[m?"setWidth":"setHeight"](t)},startMonitoringSubview:function(t){w(this,t,this.attachTo)},stopMonitoringSubview:function(t){w(this,t,this.detachFrom)}})})(myt);
(r=>{let w=0;const t=JS.Class,m=r.SizeToParent,h=r.View,b=r.RootView,a=r.Dimmer=new t("Dimmer",h,{include:[m],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(d,f){const l=this;l.restoreFocus=!0;f.focusable=f.focusCage=!0;f.percentOfParentWidth??(f.percentOfParentWidth=100);f.percentOfParentHeight??(f.percentOfParentHeight=100);f.visible??(f.visible=!1);f.ignoreLayout??(f.ignoreLayout=!0);l.callSuper(d,f);new h(l,{name:"overlay",ignorePlacement:!0,opacity:a.OPACITY,bgColor:a.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[m]);"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" ").forEach(g=>{l.attachDomObserver(l,"eatMouseEvent",g)});b.setupCaptureDrop(l)},destroy:function(){b.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(d){this.restoreFocus=d},eatMouseEvent:d=>!0,show:function(){const d=r.global.focus;this.prevFocus=d.focusedView??d.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(d){this.visible&&
(this.setVisible(!1),!d&&this.restoreFocus&&this.prevFocus&&this.prevFocus.focus())}}),e=r.ModalPanel=new t("ModalPanel",a,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>w,hasOpenModalPanels:()=>0<w},initNode:function(d,f){const l={name:"content",ignorePlacement:!0},g=Object.assign({},l,{align:"center",valign:"middle"});this.defaultPlacement="content";f.sizingStrategy??(f.sizingStrategy="children");f.marginTop??(f.marginTop=
e.MARGIN_TOP);f.marginLeft??(f.marginLeft=e.MARGIN_LEFT);f.marginBottom??(f.marginBottom=e.MARGIN_BOTTOM);f.marginRight??(f.marginRight=e.MARGIN_RIGHT);f.paddingX??(f.paddingX=e.PADDING_X);f.paddingY??(f.paddingY=e.PADDING_Y);this.callSuper(d,f);switch(this.sizingStrategy){case "children":new r.SizeToChildren(new h(this,g),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new h(this,Object.assign(l,{x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-
this.marginRight,percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100}),[m]);break;case "basic":new h(this,g);break;default:new h(this,l)}},setSizingStrategy:function(d){this.sizingStrategy=d},setMarginTop:function(d){this.marginTop=d},setMarginLeft:function(d){this.marginLeft=d},setMarginBottom:function(d){this.marginBottom=d},setMarginRight:function(d){this.marginRight=d},setPaddingX:function(d){this.paddingX=d},setPaddingY:function(d){this.paddingY=
d},show:function(){this.callSuper();w++},hide:function(d){this.callSuper(d);w=Math.max(0,w-1)}})})(myt);
(r=>{const w=m=>{m[m.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},t=m=>{const h=m.size,b=m.getIDS();m.setWidth(h);m.setHeight(h);b.width=b.height=h-2*m.borderWidth+"px"};r.Spinner=new JS.Class("Spinner",r.View,{initNode:function(m,h){this.lateAttrs=["spinColor"];h.visible??(h.visible=!1);h.borderWidth??(h.borderWidth=5);h.borderColor??(h.borderColor="#fff");h.borderStyle??(h.borderStyle="solid");h.spinColor??(h.spinColor="#000");this.callSuper(m,h);this.getIDS().borderRadius="50%";t(this);
w(this)},setSize:function(m){this.size!==m&&(this.size=m,this.inited&&t(this))},setSpinColor:function(m){this.spinColor!==m&&(this.getIDS().borderTopColor=this.spinColor=m,this.inited&&this.fireEvent("spinColor",m))},setBorderWidth:function(m){this.borderWidth!==m&&(this.callSuper(m),this.inited&&t(this))},setVisible:function(m){this.visible!==m&&(this.callSuper(m),this.inited&&w(this))}})})(myt);
(r=>{const w=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),t=b=>{if(Array.isArray(b)){let a=b.length;if(0<a){b.unshift("fa");a++;b[1].startsWith("fa-")||(b[1]="fa-"+b[1]);3<=a&&(b[2]=w[b[2]]??"");if(3<a)for(let e=3;a>e;e++)b[e].startsWith("fa-")||(b[e]="fa-"+b[e]);return'<i class="'+b.join(" ")+'"></i>'}}r.dumpStack("Error making tag");console.error(b);return""},m=b=>{let a=b.properties;a=a?"string"===typeof a?a.split(" "):a.slice():[];a.unshift(b.icon,b.size);b.setHtml(t(a))},h=b=>{["Free 400","Free 900",
"Brands 400"].forEach(a=>{r.registerForFontNotification(b,"Font Awesome 5 "+a)})};r.FontAwesome=new JS.Class("FontAwesome",r.Markup,{extend:{makeTag:t,registerForNotification:h},initNode:function(b,a){this.size=0;this.icon="";this.callSuper(b,a);m(this);h(this)},setIcon:function(b){const a=this.icon;this.set("icon",b,!0);this.inited&&a!==b&&m(this)},setSize:function(b){const a=this.size;this.set("size",b,!0);this.inited&&a!==b&&m(this)},setProperties:function(b){this.properties=b;this.fireEvent("properties",
b);this.inited&&m(this)}});r.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(r=>{let w,t,m,h,b=0,a=0,e=0,d=255,f=[],l,g,q,c,p,v,k,y,B,E,H,A,u,n,x,z,F,I,K,J,M,Q,ca,aa,V;const P=JS.Class,S=r.View,da=r.Text,U=r.ModalPanel,ta=r.SizeToChildren,ya=r.SpacedLayout,za=r.SelectionManager,pa=r.Color,Aa=r.LocalStorage,ua=r.Button,ma=r.TextButton,Ba=r.Draggable,na=r.FontAwesome.makeTag,ia=Object.assign,fa=Math.min,ha=Math.max,ka=[1,"solid","#333"],Ca=[1,"solid","#999"],va=[1,"solid","#fff"],Ja=new P("DialogButton",ma,{initNode:function(C,D){D.height??(D.height=17);D.paddingTop??(D.paddingTop=
3);D.paddingLeft??(D.paddingLeft=10);D.paddingRight??(D.paddingRight=10);D.activeColor??(D.activeColor="#bbb");D.hoverColor??(D.hoverColor="#ddd");D.readyColor??(D.readyColor="#ccc");D.domClass="mytButtonText";this.callSuper(C,D)}}),Ka=na(["check"]),Ea=C=>{C.forEach(D=>{D&&7===D.length&&(D+="ff");Da[D]=!0})},Da={},La=new P("Swatch",S,{include:[ua],initNode:function(C,D){const G=D.width=D.height=16;D.border=Ca;D.domClass="mytCheckerboardPattern";const L=D.bgColor;this.callSuper(C,D);this.colorView=
new S(this,{width:G,height:G,bgColor:L});L===h&&(C=pa.makeColorFromHexString(h),new r.Text(this,{x:2,y:2,text:Ka,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView&&this.colorView.setBgColor(C);this.setTooltip(C)},doActivated:function(){w.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ka)},drawReadyState:function(){this.setBorder(Ca)}}),Ma=r.ColorPicker=new P("ColorPicker",S,{initNode:function(C,D){w=this;w._isReady=
!1;let G=D.color??"transparent";delete D.color;m=D.alphaChannel??!1;delete D.alphaChannel;l=D.palette??[];Ea(l);delete D.palette;t="transparent"===G;w.callSuper(C,D);g=new S(w,{width:160,height:170});new r.WrappingLayout(g,{spacing:4,lineSpacing:4});q=new S(w,{x:170,width:139,height:139,border:ka},[Ba,{requestDragPosition:function(L,N){q.callSuper(q.x,q.y);const O=this.getPagePosition();a=parseFloat(ha(0,fa(1,(L+this.dragInitX-O.x)/this.width)));e=parseFloat(1-ha(0,fa(1,(N+this.dragInitY-O.y)/this.height)));
t=!1;w.updateUI()}}]);C=new S(q,{width:139,height:139});D=new S(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";D.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";c=new S(D,{width:6,height:6,bgColor:"#000",border:va,roundedCorners:4});p=new S(w,{x:315,y:30,width:24,height:109,border:ka},[Ba,{requestDragPosition:function(L,N){this.callSuper(p.x,p.y);b=parseFloat(ha(0,fa(1,(N+this.dragInitY-this.getPagePosition().y)/
this.height)));t=!1;w.updateUI()}}]);p.getIDS().background="linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";v=new S(p,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new S(w,{x:315,width:24,height:24,border:ka,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[ua,{doActivated:()=>{w.setColor("transparent")}}]);C=146;m&&(B=new r.LabelSlider(w,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},
[{setText:function(L,N){N=L.value;if(null==N||isNaN(N))N=0;L.value=r.formatAsPercentage(N/255,0);this.callSuper(L,!0);d=N;w._isReady&&(t=!1,w.updateUI())}}]),C+=23);k=new r.InputText(w,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:ka,maxLength:11,fontFamily:"monospace"});w.attachToDom(k,"_submitInput","blur");w.attachToDom(k,"_handleKeyDown","keydown");k.getIDS().paddingLeft="6px";C=new S(w,{x:170,y:C,width:60,height:23,border:ka,domClass:"mytCheckerboardPattern"});new S(C,
{width:30,height:23,focusIndicator:!1,bgColor:G},[ua,{doActivated:()=>{w.setColor(G)}}]);y=new S(C,{x:30,width:30,height:23});if(C=Aa.getItem("myt.default"))f=C.split(";"),Ea(f);w.setColor(G);w._isReady=!0},_handleKeyDown:C=>{r.KeyObservable.isEnterKeyEvent(C)&&w._submitInput()},_submitInput:()=>{w.setColor(k.value)},addToPalette:C=>{C&&"transparent"!==C&&!Da[C]&&(f.unshift(C),f.length=fa(f.length,56),Aa.setItem("myt.default",f.join(";")))},setColor:C=>{const D=C&&"transparent"!==C;if(m){let G="ff";
D&&7<C.length&&(G=C.slice(7,9),C=C.slice(0,7));B.setValue(parseInt(G,16))}else D&&7<C.length&&(C=C.slice(0,7));D?(C=pa.makeColorFromHexString(C).getHSV(),b=C.h/360,a=C.s,e=C.v,t=!1):t=!0;w.updateUI()},getColor:()=>{if(t)return"transparent";let C="";m&&(C=d.toString(16),2>C.length&&(C="0"+C));return pa.makeColorFromHSV(360*b,100*a,100*e).getHtmlHexString()+C},updateUI:()=>{const C=!t;v.setVisible(C);c.setVisible(C);C&&(c.setX(ha(0,fa(1,a)*(q.width+2))-5),c.setY(ha(0,fa(1,1-e)*(q.height+2))-5),v.setY(b*
(p.height-2)-1));q.setBgColor(pa.makeColorFromHSV(360*b,100,100).getHtmlHexString());h=w.getColor();k.setValue(h);y.setBgColor(h);w.redrawPalette()},redrawPalette:r.debounce(()=>{const C=g.getSubviews();let D=C.length;for(;D;)C[--D].destroy();const G={};l.concat(f).forEach(L=>{if(m||7===L.length)7===L.length&&(L+="ff"),G[L]||(new La(g,{bgColor:L}),G[L]=!0)})},50)}),wa=C=>{C=C.split(":");return[ha(0,fa(23,parseInt(C[0]))),ha(0,fa(60,parseInt(C[1])))]},Fa=C=>{C.deselectAll();C=C.getSubviews();let D=
C.length;for(;D;)C[--D].destroy()},Ga=new P("SelectableBtn",ma,{include:[r.Selectable],setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Na=new P("TimeBtn",Ga,{initNode:function(C,D){D.width=A?175:49;this.callSuper(C,D)},doActivated:function(){this.callSuper();const C=this.text,D=wa(C);V.selectById(C);J.setHours(D[0]);J.setMinutes(D[1])}}),Oa=new P("DayBtn",Ga,
{initNode:function(C,D){D.width=23;D.border=va;this.callSuper(C,D)},setData:function(C){this.data=C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();
const C=new Date(this.data);C.setHours(J.getHours());C.setMinutes(J.getMinutes());oa(C)}}),oa=C=>{C.setSeconds(0);C.setMilliseconds(0);var D=6>=n.length,G;if(D)for(G=7;G--&&!n.includes(C.getDay());)C.setDate(C.getDate()+1);J=C;const L=V.getODE().scrollTop;var N=new Date,O=N.getFullYear();G=N.getMonth();var T=N.getDate();N.getHours();N.getMinutes();var R=C.getFullYear(),W=C.getMonth();const qa=C.getDate();var ea=C.getTime();N=C.getHours();C=C.getMinutes();const ja=(new Date(R,W,1)).getDay()-u,ba=(new Date(R,
W+1,0)).getDate(),la=(new Date(R,W,0)).getDate(),ra=new Date(R,W,0),sa=new Date(R,W+2,0),Pa=O==R&&G==W;if(!A){Fa(aa);G=new Date(ea);const Ha=7+u;O=E.days;Q.setText(R+" "+E.sep+" "+E.months[W]);G.setMinutes(59);G.setHours(23);G.setSeconds(59);G.setDate(0);M.setVisible(null==x||x<G.getTime());G.setMinutes(0);G.setHours(0);G.setSeconds(0);G.setDate(1);G.setMonth(W+1);ca.setVisible(null==z||z>G.getTime());for(G=0;7>G;G++)new da(aa,{width:23,height:20,textAlign:"center",text:O[(G+Ha)%7],textColor:"#999"});
G=0;let Ia=42;0>ja&&(G=-7,Ia=35);O=new Date(ea);O.setHours(0);O.setMinutes(0);for(O.setSeconds(0);G<Ia;G++){var Y=G+1-ja;const xa=(G+Ha)%7,Z=new Oa(aa);ja>G?(Z.setText(la+Y),Z.setData(ra.getFullYear()+"/"+(ra.getMonth()+1)+"/"+(la+Y)),Z.setIsAnotherMonth(!0),O.setDate(la+Y),O.setMonth(ra.getMonth()),O.setYear(ra.getFullYear())):G<ja+ba?(Z.setText(Y),Z.setData(R+"/"+(W+1)+"/"+Y),O.setDate(Y),O.setMonth(W),O.setYear(R)):(Z.setText(Y-ba),Z.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(Y-ba)),Z.setIsAnotherMonth(!0),
O.setDate(Y-ba),O.setMonth(sa.getMonth()),O.setYear(sa.getFullYear()));D&&!n.includes(xa)?Z.setDisabled(!0):(0===xa?Z.setIsSunday(!0):6===xa&&Z.setIsSaturday(!0),Y===qa&&(aa.select(Z),Z.focus()),Pa&&Y===T&&Z.setIsToday(!0),Y=new Date(O.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=x&&x>Y.getTime()||null!=z&&z<O.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!H){D=60*I[0]+I[1];Fa(V);T=F[0];R=F[1];for(O=new Date(ea);60*T+R<D;)ea=new Na(V,{text:("0"+T).slice(-2)+":"+("0"+R).slice(-2)}),
T===N&&R===C&&V.select(ea),O.setHours(T),O.setMinutes(R),W=O.getTime(),(null!=x&&x>W||null!=z&&z<W)&&ea.setDisabled(!0),R+=K,60<=R&&(R-=60,T++);V.scrollYTo(L)}},Qa=r.DatePicker=new P("DatePicker",S,{initNode:function(C,D){const G=ia({current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null},D.opt);delete D.opt;this.callSuper(C,D);E=G.locales[G.locale??"en"];H=G.dateOnly;
A=G.timeOnly;u=G.firstDayOfWeek;K=ha(5,fa(30,G.minuteInterval));n=G.allowedDays;Array.isArray(n)&&0!==n.length||(n=[0,1,2,3,4,5,6]);x=Date.parse(G.minDate);x=isNaN(x)?null:x;z=Date.parse(G.maxDate);z=isNaN(z)?null:z;F=wa(G.minTime);I=wa(G.maxTime);C=new S(this,{visible:!A});G.showTodayButton&&new ma(C,{width:24,text:na(["home"]),tooltip:E.today},[{doActivated:()=>{oa(new Date)}}]);M=new ma(C,{width:24,x:28,text:na(["chevron-left"]),tooltip:E.prevMonth},[{doActivated:()=>{const L=(new Date(J.getFullYear(),
J.getMonth(),0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()-1);oa(J);M.focus()}}]);Q=new da(C,{width:100,x:52,textAlign:"center"});ca=new ma(C,{width:24,x:152,text:na(["chevron-right"]),tooltip:E.nextMonth},[{doActivated:()=>{var L=(new Date(J.getFullYear(),J.getMonth()+1,0)).getDate();L<J.getDate()&&J.setDate(L);L=(new Date(J.getFullYear(),J.getMonth()+2,0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()+1);oa(J);ca.focus()}}]);aa=new S(this,{y:25,width:175,height:175,
visible:!A,maxSelected:1,itemSelectionId:"data"},[za]);new r.WrappingLayout(aa,{spacing:2,lineInset:2,lineSpacing:3});V=new S(this,{x:A?0:195,y:A?0:25,width:(A?175:49)+r.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!H,maxSelected:1,itemSelectionId:"text"},[za]);new ya(V,{axis:"y",inset:1,spacing:3});this.setWidth(V.visible?V.x+V.width:aa.width);oa(G.current??new Date)},getPickedDate:()=>J}),X=r.Dialog=new P("Dialog",U,{extend:{RADIUS:12,BUTTON_CLASS:Ja,SHADOW:[0,4,
20,"#666"],BORDER:va,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",
titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,D){D.buttonClass??(D.buttonClass=X.BUTTON_CLASS);this.callSuper(C,D);C=this.content;C.setRoundedCorners(X.RADIUS);C.setBgColor(X.BGCOLOR);C.setBoxShadow(X.SHADOW);C.setBorder(X.BORDER);C.setFocusCage(!0);
this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=C},makeButton:function(C,D){const G=this;return new G.buttonClass(C,D,[{doActivated:function(){G.doCallback(this)}}])},makeCloseButton:function(C){return this.makeButton(C,{name:"closeBtn",ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",
text:na(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const C=this.content,D=C.sizeToChildren,G=C.getSubviews();let L=G.length;for(;L;){const N=G[--L];"closeBtn"!==N.name&&N.destroy()}C.setVisible(!0);this.overlay.setBgColor(r.Dimmer.COLOR);this.setCallbackFunction();D.setPaddingY(U.PADDING_Y);D.setPaddingX(U.PADDING_X);
C.setRoundedCorners(X.RADIUS);C.setBgColor(X.BGCOLOR);C.setBoxShadow(X.SHADOW);C.setBorder(X.BORDER)},doCallback:function(C){const D=this.callbackFunction;D&&D.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();this.content.setVisible(!1);C&&C.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,D,G){const L=this.content,N=L.closeBtn;G=ia({},X.WRAP_TEXT_DEFAULTS,G);this.destroyContent();this.setCallbackFunction(D);C=new da(L,{name:"msg",text:C,whiteSpace:G.whiteSpace,
wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?U.PADDING_X:G.msgX,y:null==G.msgY?U.PADDING_Y:G.msgY,width:G.width});G.titleText&&(this.setupTitle(L,G.titleText),C.setY(C.y+24));this.show();!1===G.showClose?N.setVisible(!1):(N.setVisible(!0),N.focus())},showSimple:function(C,D,G,L){G=G??{};const N=this.content,O=N.closeBtn,T=G.maxContainerHeight;this.destroyContent();G.bgColor&&N.setBgColor(G.bgColor);G.roundedCorners&&N.setRoundedCorners(G.roundedCorners);G.boxShadow&&N.setBoxShadow(G.boxShadow);
G.border&&N.setBorder(G.border);N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(D);D=new S(N,{name:"contentContainer",x:1,y:25,overflow:"auto"},[{setHeight:function(R){R>T&&(R=T);this.callSuper(R)}}]);C.call(this,D);new ta(D,{axis:"both"});this.show();O.setVisible(!0);O.focus();G.titleText&&(this.setupTitle(N,G.titleText),D.setY(this.header.height+1));D.initialFocus&&D.initialFocus.focus();L&&L(this)},showConfirm:function(C,D,G){G=ia({},X.CONFIRM_DEFAULTS,G);this.showMessage(C,D,G);this.setupFooterButtons(this.content.msg,
G)},showContentConfirm:function(C,D,G,L){G=ia({},X.CONFIRM_DEFAULTS,G);const N=this.content,O=N.closeBtn,T=G.maxContainerHeight;this.destroyContent();N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(D);D=new S(N,{name:"contentContainer",x:1,y:25,overflow:"auto"},[{setHeight:function(R){this.callSuper(R>T?T:R)}}]);C.call(this,D);new ta(D,{axis:"both"});this.show();O.setVisible(!0);O.focus();this.setupTitle(N,G.titleText);D.setY(this.header.height+1);this.setupFooterButtons(D,G);D.initialFocus&&
D.initialFocus.focus();L&&L(this)},showSpinner:function(C,D){const G=this.content;D=ia({},X.NO_WRAP_TEXT_DEFAULTS,D);this.destroyContent();const L=this.spinner=new r.Spinner(G,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==D.msgY?U.PADDING_Y:D.msgY});C&&new da(G,{text:C,whiteSpace:D.whiteSpace,wordWrap:D.wordWrap,fontWeight:D.fontWeight,x:null==D.msgX?U.PADDING_X:D.msgX,y:L.y+L.size+U.PADDING_Y,width:D.width});this.show();G.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,
D){const G=this,L=G.content,N=L.closeBtn;D=ia({},X.COLOR_PICKER_DEFAULTS,D);G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":C.call(G,T);break;case "confirmBtn":const R=O.getColor();O.addToPalette(R);C.call(G,T,R)}O.destroy()});const O=new Ma(L,{x:U.PADDING_X,y:U.PADDING_Y+24,width:337,height:177+(D.alphaChannel?23:0),color:D.color,alphaChannel:D.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});
G.show();N.setVisible(!0);N.focus();G.setupFooterButtons(O,D);G.setupTitle(L,D.titleText)},showDatePicker:function(C,D){const G=this,L=G.content,N=L.closeBtn;D=ia({},X.DATE_PICKER_DEFAULTS,D);G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":C.call(G,T);break;case "confirmBtn":C.call(G,T,O.getPickedDate())}O.destroy()});const O=new Qa(L,{x:U.PADDING_X,y:U.PADDING_Y+24,height:195,opt:{current:new Date(D.initialDate??Date.now()),dateOnly:D.dateOnly||!1,timeOnly:D.timeOnly||
!1,locales:D.locales,locale:D.locale}});G.show();N.setVisible(!0);N.focus();G.setupFooterButtons(O,D);G.setupTitle(L,D.timeOnly?D.timeOnlyTitleText:D.titleText)},setupTitle:function(C,D){const G=X.RADIUS;(this.header=new S(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:G,roundedTopRightCorner:G})).sendToBack();new da(C,{name:"title",x:G,y:4,text:D,fontWeight:"bold"})},setupFooterButtons:function(C,D){const G=this,L=G.content,N=U.PADDING_Y;var O=N/2;const T=new S(L,
{name:"btnContainer",y:C.y+C.height+N,align:"center"});C=["active","hover","ready","text"];let R=D.cancelAttrs??{};var W;(W=R).name??(W.name="cancelBtn");let qa;(qa=R).text??(qa.text=D.cancelTxt);C.forEach(ba=>{ba+="Color";null!=D[ba]&&(R[ba]=D[ba])});W=G.makeButton(T,R);R=D.confirmAttrs??{};var ea;(ea=R).name??(ea.name="confirmBtn");let ja;(ja=R).text??(ja.text=D.confirmTxt);C.forEach(ba=>{ba+="Color";const la=ba+"Confirm";null!=D[la]&&(R[ba]=D[la])});G.makeButton(T,R);(D.buttons??[]).forEach(ba=>
{G.makeButton(T,ba)});new ta(T,{axis:"y"});new ya(T,{spacing:4,collapseParent:!0});L.sizeToChildren.setPaddingY(O);ea=X.RADIUS;O=T.y-O;(new S(L,{ignoreLayout:!0,y:O,width:L.width,height:L.height-O,bgColor:"#eee",roundedBottomLeftCorner:ea,roundedBottomRightCorner:ea})).sendToBack();!1===D.showClose&&W.focus()}})})(myt);
(r=>{const w=JS.Class,t={},m=(l,g)=>{if(l){const q=l.id;l.id?g(q):r.dumpStack("No ID")}else r.dumpStack("No validator")},h=l=>{m(l,g=>{t[g]=l})},b=r.Validator=new w("Validator",{initialize:function(l){this.id=l},isValid:(l,g,q)=>!0,isFormValid:function(l,g,q){g||={};g.form=l;return this.isValid(l.getValue(),g,q)}}),a=r.RequiredFieldValidator=new w("RequiredFieldValidator",b,{isValid:function(l,g,q){return null==l||""===l||"string"===typeof l&&""===l.trim()?(q&&q.push("This value is required."),!1):
!0}}),e=r.EqualsIgnoreCaseValidator=new w("EqualsIgnoreCaseValidator",b,{isValid:function(l,g,q){g=g.form.getRollbackValue();return l&&g&&l.toLowerCase()===g.toLowerCase()?(q&&q.push("Value must differ by more than just case."),!1):!0}}),d=r.URLValidator=new w("URLValidator",b,{initialize:function(l,g){this.callSuper(l);this.originalRawQuery=g},isValid:function(l,g,q){return(new r.URI(l)).toString(this.originalRawQuery)!==l?(q&&q.push("Invalid URL."),!1):!0}}),f=r.JSONValidator=new w("JSONValidator",
b,{isValid:function(l,g,q){try{return JSON.parse(l),!0}catch(c){return q&&q.push(c),!1}}});r.EqualFieldsValidator=new w("EqualFieldsValidator",b,{initialize:function(l,g,q){this.callSuper(l);this.fieldA=g;this.fieldB=q},isValid:function(l,g,q){if(l&&this.fieldA.getValue()===this.fieldB.getValue())return!0;q&&q.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});r.LengthValidator=new w("LengthValidator",b,{initialize:function(l,g,q){this.callSuper(l);
this.min=g;this.max=q},isValid:function(l,g,q){l=l?l.length:0;g=this.min;const c=this.max;return void 0!==g&&g>l?(q&&q.push("The value must not be less than "+g+" characters long."),!1):void 0!==c&&c<l?(q&&q.push("The value must not be greater than "+c+" characters long."),!1):!0}});r.NumericRangeValidator=new w("NumericRangeValidator",b,{initialize:function(l,g,q){this.callSuper(l);this.min=g;this.max=q},isValid:function(l,g,q){if(""===l)return!0;l=Number(l);g=this.min;const c=this.max;return isNaN(l)?
(q&&q.push("Value is not a number."),!1):void 0!==g&&g>l?(q&&q.push("Value must not be less than "+g+"."),!1):void 0!==c&&c<l?(q&&q.push("Value must not be greater than "+c+"."),!1):!0}});r.CompoundValidator=new w("CompoundValidator",b,{initialize:function(l,...g){this.callSuper(l);l=g.length;let q;for(;l;)q=g[--l],"string"===typeof q&&((g[l]=q=t[q])||g.splice(l,1));this.__v=g},addValidator:function(l){"string"===typeof l&&(l=t[l]);l&&this.__v.push(l)},isValid:function(l,g,q){const c=this.__v,p=c.length;
let v=!0,k=0;for(;p>k;)v=c[k++].isValid(l,g,q)&&v;return v}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){h(new a("required"));h(new e("equalsIgnoreCase"));h(new d("url"));h(new f("json"));r.global.register("validators",this)},getValidator:l=>t[l],register:h,unregister:l=>{m(l,g=>{t[g]&&delete t[g]})}})})(myt);
(r=>{const w=JS.Class,t=Math,m=t.min,h=t.max,b=r.global.keys,a=r.View,e=new w("SliderThumb",r.SimpleButton,{include:[r.Draggable],initNode:function(f,l){const g=l.width=f.thumbWidth,q=l.height=f.thumbHeight;l.roundedCorners=m(q,g)/2;l.repeatKeyDown=!0;l.activationKeys=b.ARROW_KEYS;l.activeColor="#bbb";l.readyColor="#ccc";l.hoverColor="#ddd";l.boxShadow=[0,0,4,"#666"];this.callSuper(f,l);this["x"===f.axis?"setY":"setX"](f.thumbOffset);this.syncTo(f,"setDisabled","disabled");f._syncThumbToValue(this,
f.getValue())},setDisabled:function(f){this.callSuper(this.valueFromEvent(f))},setFocused:function(f){this.callSuper(f);f&&this.makeHighestZIndex()},setX:function(f){this.x!==f&&(this.callSuper(f),f=this.parent,"x"===f.axis&&f.syncValueToThumb(this))},setY:function(f){this.y!==f&&(this.callSuper(f),f=this.parent,"y"===f.axis&&f.syncValueToThumb(this))},requestDragPosition:function(f,l){if(!this.disabled){var g=this.parent;const q=g.getMinPixelValueForThumb(this),c=g.getMaxPixelValueForThumb(this);
"x"===g.axis?(g=this.width/2,l="setX"):(g=this.height/2,f=l,l="setY");this[l](m(h(f,q-g),c-g))}},doActivationKeyDown:function(f,l){const g=this.parent;switch(f){case b.CODE_ARROW_LEFT:g.nudgeValueLeft(this);break;case b.CODE_ARROW_UP:g.nudgeValueUp(this);break;case b.CODE_ARROW_RIGHT:g.nudgeValueRight(this);break;case b.CODE_ARROW_DOWN:g.nudgeValueDown(this)}this.callSuper(f,l)}}),d=r.BaseSlider=new w("BaseSlider",a,{include:[r.Disableable],initNode:function(f,l){l.axis??(l.axis="x");"x"===l.axis?
(l.width??(l.width=100),l.height??(l.height=18)):(l.width??(l.width=18),l.height??(l.height=100));l.bgColor??(l.bgColor="#999");l.roundedCorners??(l.roundedCorners=9);l.trackInset??(l.trackInset=9);l.trackOutset??(l.trackOutset=9);l.thumbWidth??(l.thumbWidth=16);l.thumbHeight??(l.thumbHeight=16);l.thumbOffset??(l.thumbOffset=1);l.nudgeAmount??(l.nudgeAmount=1);this.callSuper(f,l)},setAxis:function(f){this.axis=f},setTrackInset:function(f){this.trackInset=f},setTrackOutset:function(f){this.trackOutset=
f},setThumbWidth:function(f){this.thumbWidth=f},setThumbHeight:function(f){this.thumbHeight=f},setThumbOffset:function(f){this.thumbOffset=f},setNudgeAmount:function(f){this.nudgeAmount=f},convertValueToPixels:function(f){const l=this.minValue,g=this.trackInset;return g+(("x"===this.axis?this.width:this.height)-g-this.trackOutset)/(this.maxValue-l)*(f-l)},convertPixelsToValue:function(f){const l=this.minValue,g=this.trackInset;return(this.maxValue-l)/(("x"===this.axis?this.width:this.height)-g-this.trackOutset)*
(f-g)+l},nudgeValueLeft:function(f){this._nudge(f,!1)},nudgeValueUp:function(f){this._nudge(f,!1)},nudgeValueRight:function(f){this._nudge(f,!0)},nudgeValueDown:function(f){this._nudge(f,!0)},_nudge:(f,l)=>{},_syncThumbToValue:function(f,l){l=this.convertValueToPixels(l);"x"===this.axis?f.setX(l-f.width/2):f.setY(l-f.height/2)},syncValueToThumb:function(f){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(f,this.convertPixelsToValue("x"===this.axis?f.x+f.width/2:f.y+f.height/
2)),this.__lockSync=!1)},_syncValueToThumb:(f,l)=>{},getMinPixelValueForThumb:function(f){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(f){return this.convertValueToPixels(this.maxValue)}});r.RangeSlider=new w("RangeSlider",d,{include:[r.BoundedRangeComponent],initNode:function(f,l){this.callSuper(f,l);f=new a(this,{name:"rangeFill",bgColor:"#666"});"x"===this.axis?(f.setY(this.thumbOffset),f.setHeight(this.thumbHeight),f.setRoundedCorners(this.thumbHeight/2)):
(f.setX(this.thumbOffset),f.setWidth(this.thumbWidth),f.setRoundedCorners(this.thumbWidth/2));new e(this,{name:"thumbLower"});new e(this,{name:"thumbUpper"});this._syncRangeFillToValue()},setValue:function(f){this.callSuper(f);this.inited&&(this.__lockSync||(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f)),this._syncRangeFillToValue())},setWidth:function(f,l){const g=this.width;this.callSuper(f,l);this.inited&&"x"===this.axis&&this.width!==g&&
(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f))},setHeight:function(f,l){const g=this.height;this.callSuper(f,l);this.inited&&"y"===this.axis&&this.height!==g&&(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f))},_syncRangeFillToValue:function(){const f=this.rangeFill;var l=this.getValue();const g=this.convertValueToPixels(l.lower);l=this.convertValueToPixels(l.upper)-g;"x"===this.axis?(f.setX(g),
f.setWidth(l)):(f.setY(g),f.setHeight(l))},_syncThumbToValue:function(f,l){this.callSuper(f,"thumbLower"===f.name?l.lower:l.upper)},_syncValueToThumb:function(f,l){let g=this.getValueCopy();g["thumbLower"===f.name?"lower":"upper"]=l;this.setValue(g);g=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,g);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,g)},_nudge:function(f,l){const g=this.getValueCopy();l=this.nudgeAmount*(l?1:-1);"thumbLower"===f.name?g.lower=m(g.lower+
l,g.upper):g.upper=h(g.upper+l,g.lower);this.setValue(g)},getMinPixelValueForThumb:function(f){return this.convertValueToPixels("thumbLower"===f.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(f){return this.convertValueToPixels("thumbLower"===f.name?this.getValue().upper:this.maxValue)}});r.Slider=new w("Slider",d,{include:[r.BoundedValueComponent],initNode:function(f,l){this.callSuper(f,l);new e(this,{name:"thumb"})},setValue:function(f){this.callSuper(f);this.inited&&
!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(f,l){const g=this.width;this.callSuper(f,l);this.inited&&"x"===this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(f,l){const g=this.height;this.callSuper(f,l);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(f,l){this.setValue(l);this._syncThumbToValue(f,this.getValue())},_nudge:function(f,
l){this.setValue(this.getValue()+this.nudgeAmount*(l?1:-1))}});r.LabelSlider=new w("LabelSlider",r.Slider,{initNode:function(f,l){const g=this;l.labelX??(l.labelX=8);l.labelY??(l.labelY=2);l.labelFontSize??(l.labelFontSize="12px");l.labelColor??(l.labelColor="#000");l.flipThreshold??(l.flipThreshold=t.round((l.maxValue-l.minValue)/2)||0);g.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],l);g.callSuper(f,l);const q=g.labelX;g.labelTxt=new r.Text(g,{x:q,y:g.labelY,textColor:g.labelColor,
fontSize:g.labelFontSize},[{initNode:function(c,p){this.targetX=q;this.callSuper(c,p)},updateX:function(c){const p=g.getValue()>=g.flipThreshold?q:g.width-this.width-q;this.targetX!==p&&(this.targetX=p,this.stopActiveAnimators("x"),c?this.setX(p):this.animate({attribute:"x",to:p,duration:250}))}}]);g.syncTo(g,"setText","value")},setWidth:function(f,l){this.callSuper(f,l);this.labelTxt&&this.labelTxt.updateX(!0)},setText:function(f,l){const g=this.labelTxt;g&&(g.setText(f.value),g.updateX(l))}})})(myt);
(r=>{const w=JS.Class,t=r.global.keys,m=b=>{const a="y"===b.axis?"height":"width";b.constrain("__limitToParent",[b,"limitToParent",b,a,b.parent,a])},h=new w("BaseDivider",r.SimpleButton,{include:[r.BoundedValueComponent,r.Draggable],initNode:function(b,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor="#ddd");a.readyColor??(a.readyColor="#ccc");a.axis??(a.axis="x");a.minValue??(a.minValue=0);a.value??(a.value=a.minValue);a.expansionState??(a.expansionState=2);a.focusIndicator??
(a.focusIndicator=!1);a.repeatKeyDown??(a.repeatKeyDown=!0);a.activationKeys??(a.activationKeys=[t.CODE_ARROW_LEFT,t.CODE_ARROW_UP,t.CODE_ARROW_RIGHT,t.CODE_ARROW_DOWN,t.CODE_ENTER,t.CODE_SPACE]);"y"===a.axis?(a.height??(a.height=6),a.cursor??(a.cursor="row-resize")):(a.width??(a.width=6),a.cursor??(a.cursor="col-resize"));this.quickSet(["axis"],a);this.__nudgeAcc=1;this.callSuper(b,a);null==a.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&m(this);this.attachDomObserver(this,
"doPrimaryAction","dblclick")},setExpansionState:function(b){this.expansionState=b},setRestoreValue:function(b){this.restoreValue=b},setLimitToParent:function(b){this.limitToParent!==b&&(this.limitToParent=b,this.inited&&(this.fireEvent("limitToParent",b),null==b?this.releaseConstraint("__limitToParent"):m(this)))},setAxis:function(b){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=b},setValue:function(b,a){this.callSuper(b);b=this.value;"y"===this.axis?this.setY(b):this.setX(b);
a&&this.setRestoreValue(b)},__limitToParent:function(b){b="y"===this.axis?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b])},doActivationKeyDown:function(b,a){this.callSuper(b,a);switch(b){case t.CODE_ARROW_UP:case t.CODE_ARROW_LEFT:b=-1;break;case t.CODE_ARROW_DOWN:case t.CODE_ARROW_RIGHT:b=1;break;default:this.doPrimaryAction();return}this.__nudgeAcc=a?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+b*this.__nudgeAcc,!0);this.setExpansionState(2)},doPrimaryAction:function(){const b=
this.restoreValue,a=this.maxValue,e=this.minValue;let d;switch(this.expansionState){case 0:null!=b&&(this.setExpansionState(1),b===e?b!==a&&this.doPrimaryAction():d=b);break;case 1:null!=a&&(this.setExpansionState(3),this.value===a?this.doPrimaryAction():d=a);break;case 2:null!=e&&(this.setExpansionState(0),this.value===e?this.doPrimaryAction():d=e);break;case 3:null!=b&&(this.setExpansionState(2),b===a?this.doPrimaryAction():d=b)}this.animateToValue(d)},animateToValue:function(b,a=250){null!=b&&
(this.stopActiveAnimators("value"),this.animateOnce("value",b,null,a))},requestDragPosition:function(b,a){this.disabled||(b="y"===this.axis?a:b,a=this.value,b!==a&&(this.setValue(b,!0),this.setExpansionState(a>b?2:1)))}});r.HorizontalDivider=new w("HorizontalDivider",h,{initNode:function(b,a){a.axis="x";this.callSuper(b,a)}});r.VerticalDivider=new w("VerticalDivider",h,{initNode:function(b,a){a.axis="y";this.callSuper(b,a)}})})(myt);
(r=>{let w=0;const t=JS.Class,m=JS.Module,h=Math.min,b=Math.max,a=r.View,e=r.Node.DEFAULT_PLACEMENT,d=n=>{const x=n.columnHeaders;var z=n.sort;const F=z?z[0]:"";z=z?z[1]:"";let I=x.length;for(;I;){const K=x[--I];K.columnId===F?K.sortable&&K.setSortState(z):K.setSortState("none")}n.locked||n.doSort()},f=(n,x,z,F)=>{if(0!==x){const M=0<x,Q=[];for(var I=n.length;I;){var K=n[--I];K.resizable&&(z?0<K.flex:0===K.flex)&&Q.push({hdr:K,limit:(M?K.maxValue:K.minValue)-K.value,amt:0})}n=Q.length;if(0<n){for(I=
0;0!==x;){w>=n&&(I=w=0);K=Q[w];var J=K.hdr;K.full?++I:(M?(J=h(z?J.flex:1,x),K.amt+J>K.limit&&(J=K.limit-K.amt,K.full=!0)):(J=b(z?-J.flex:-1,x),K.amt+J<K.limit&&(J=K.limit-K.amt,K.full=!0)),K.amt+=J,x-=J);if(I===n)break;++w}Q.forEach(ca=>{ca.hdr.setValue(ca.hdr.value+ca.amt)});F&&F(x)}}},l=n=>(n=n.gridController?n.gridController.getPrevHdr(n):null)?n.maxValue-n.value+l(n):0,g=n=>(n=n.gridController?n.gridController.getNextHdr(n):null)?n.maxValue-n.value+g(n):0,q=n=>(n=n.gridController?n.gridController.getPrevHdr(n):
null)?n.minValue-n.value+q(n):0,c=n=>(n=n.gridController?n.gridController.getNextHdr(n):null)?n.minValue-n.value+c(n):0,p=(n,x)=>{n=n.gridController?n.gridController.getPrevHdr(n):null;var z=0;if(n){z=n.value+x;n.resizable&&n.setValue(z);const F=z-n.value;z=x-F;0>F&&(z+=p(n,F))}return z},v=(n,x)=>{n=n.gridController?n.gridController.getPrevHdr(n):null;var z=0;if(n){z=n.value+x;n.resizable&&n.setValue(z);const F=z-n.value;z=x-F;0<F&&(z+=v(n,F))}return z},k=(n,x)=>{if(n=n.gridController?n.gridController.getNextHdr(n):
null)x=n.value+x,n.resizable&&n.setValue(x),x-=n.value,0>x&&k(n,x)},y=(n,x)=>{if(n=n.gridController?n.gridController.getNextHdr(n):null)x=n.value+x,n.resizable&&n.setValue(x),x-=n.value,0<x&&y(n,x)},B=n=>{let x="";if(n.sortable)switch(n.sortState){case "ascending":x="chevron-up";break;case "descending":x="chevron-down"}n.sortIcon.setIcon(x)},E=n=>{const x=n.textView;x&&x.setWidth(n.width-n.outset-x.x)},H=r.GridController=new m("GridController",{initNode:function(n,x){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(n,x);this.fitHeadersToWidth();d(this)},setMaxWidth:function(n){this.set("maxWidth",n,!0)},setMinWidth:function(n){this.set("minWidth",n,!0)},setFitToWidth:function(n){this.fitToWidth=n},setSort:function(n){r.areArraysEqual(n,this.sort)||(this.sort=n,this.inited&&(this.fireEvent("sort",n),d(this)))},setLastColumn:function(n){const x=this.lastColumn;x!==n&&(x&&x.setLast(!1),(this.lastColumn=n)&&n.setLast(!0))},
setLocked:function(n){this.locked=n;this.inited&&!n&&(this.__tempLock=!0,this.fitHeadersToWidth(),this.__tempLock=!1,this.setMaxWidth(0),this.setMinWidth(0),this.__skipInvisibleHeaders=!0,this.columnHeaders.forEach(x=>{this.notifyHdrXChange(x);this.notifyHdrWidthChange(x);this.notifyHdrVisibilityChange(x)}),this.__skipInvisibleHeaders=!1,this.doSort())},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(n){n=this.valueFromEvent(n);this.gridWidth!==n&&(this.gridWidth=n,
this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(n){const x=this.columnHeaders;n=this.getHdrIndex(n);if(0<n)for(;n;){const z=x[--n];if(z.visible)return z}},getNextHdr:function(n){const x=this.columnHeaders,z=x.length;n=this.getHdrIndex(n)+1;if(0<n&&n<z)for(;z>n;){const F=x[n++];if(F.visible)return F}},hasHdr:function(n){return this.columnHeaders.includes(n)},getHdrIndex:function(n){return this.columnHeaders.indexOf(n)},getHdrById:function(n){const x=this.columnHeaders;let z=
x.length;for(;z;){const F=x[--z];if(F.columnId===n)return F}},getVisibleHdrs:function(){return this.columnHeaders.filter(n=>n.visible)},notifyAddHdr:function(n){this.hasHdr(n)||(this.columnHeaders.push(n),n.visible&&this.setLastColumn(n),this.fixupResizerCursors())},notifyRemoveHdr:function(n){const x=this.getHdrIndex(n);-1<x&&(this.columnHeaders.splice(x,1),n.visible&&n.last&&this.setLastColumn(this.getPrevHdr(n)),this.fixupResizerCursors())},notifyHdrXChange:function(n){this.isLocked()||this.rows.forEach(x=>
{x.notifyHdrXChange(n)})},notifyHdrWidthChange:function(n){this.isLocked()||this.rows.forEach(x=>{x.notifyHdrWidthChange(n)})},notifyHdrVisibilityChange:function(n){if((!this.__skipInvisibleHeaders||n.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(n);var x=this.setLastColumn;a:{var z=this.columnHeaders;let F=z.length;for(;F;){const I=z[--F];if(I.visible){z=I;break a}}z=void 0}x.call(this,z);x=n.visible?1:-1;this.setMaxWidth(this.maxWidth+n.maxValue*x);this.setMinWidth(this.minWidth+
n.minValue*x);this.fitHeadersToWidth();this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(n){this.rows.forEach(x=>{x.notifyHdrVisibilityChange(n)})},hasRow:function(n){return this.rows.includes(n)},getRowIndex:function(n){return this.rows.indexOf(n)},getRowById:function(n,x=z=>z.model.id===n){return this.rows.find(x)},getPrevRow:function(n){n=this.getRowIndex(n)-1;return this.rows[0>n?this.rows.length-1:n]},getNextRow:function(n){n=this.getRowIndex(n)+1;return this.rows[n<this.rows.length?
n:0]},notifyAddRow:function(n,x){if(!this.hasRow(n)&&(this.rows.push(n),!this.locked)){const z=this.width;this.columnHeaders.forEach(F=>{n.setWidth(z);n.notifyHdrXChange(F);n.notifyHdrWidthChange(F);n.notifyHdrVisibilityChange(F)});x||this.doSort()}},notifyRemoveRow:function(n){n=this.getRowIndex(n);-1<n&&this.rows.splice(n,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const n=this.getVisibleHdrs();let x=0;n.forEach(z=>{x=b(x,z.x+z.width)});f(n,this.gridWidth-x,!0,z=>{f(n,z,!1,
null)})}},fixupResizerCursors:function(){const n=this.getVisibleHdrs();let x=!0,z=0;n.forEach((J,M)=>{x&&J.isFixed()?J.setResizerCursor("",!0):(x&&(z=M),x=!1,J.restoreResizerCursor())});let F=!0,I=n.length,K=I-1;for(;I>z;){const J=n[--I];F?J.setResizerCursor("",!0):J.restoreResizerCursor();J.isFixed()||(F&&(K=I),F=!1)}z===K&&n[z].setResizerCursor("",!0)}}),A=r.GridColHdr=new m("GridColHdr",{include:[r.BoundedValueComponent],initNode:function(n,x){const z=this;x.resizerCursor??(x.resizerCursor="col-resize");
let F=x.resizerCursor;delete x.resizerCursor;x.minValue??(x.minValue=16);x.maxValue??(x.maxValue=9999);x.value??(x.value=x.minValue);x.resizable??(x.resizable=!0);x.flex??(x.flex=0);x.cellXAdj??(x.cellXAdj=0);x.cellWidthAdj??(x.cellWidthAdj=0);x.sortable??(x.sortable=!0);x.sortState??(x.sortState="none");x.placement??(x.placement=e);z.callSuper(n,x);const I=z.gridController;z.resizer=new a(z,{cursor:F,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[r.SizeToParent,r.Draggable,{requestDragPosition:function(K,J){J=K-this.x;if(I.fitToWidth&&(0<J?J=h(J,h(-c(z),z.maxValue-z.value+l(z))):0>J&&(J=b(J,b(-g(z),z.minValue-z.value+q(z)))),0===J))return;K=z.value+J;z.resizable&&z.setValue(K);K-=z.value;J=K-J;let M=0;0>K?M=p(z,K):0<K&&(M=v(z,K));this.dragInitX+=M;J-=M;I.fitToWidth&&(0>J?k(z,J):0<J&&y(z,J))}}]);I&&(I.notifyAddHdr(z),I.notifyHdrXChange(z),I.notifyHdrVisibilityChange(z));z.setWidth(z.value);z.resizer.setVisible(!(z.last&&z.gridController.fitToWidth))},
destroy:function(n){this.setGridController();this.callSuper(n)},setSortable:function(n){this.set("sortable",n,!0)},setSortState:function(n){this.set("sortState",n,!0)},setResizable:function(n){this.set("resizable",n,!0)},setCellWidthAdj:function(n){this.cellWidthAdj=n},setCellXAdj:function(n){this.cellXAdj=n},setFlex:function(n){this.flex=n},setColumnId:function(n){this.columnId=n},setResizerCursor:function(n,x){const z=this.resizer,F=z.cursor;n!==F&&(x&&(this.__rrc=F),z.setCursor(n))},restoreResizerCursor:function(){const n=
this.__rrc;n&&(this.setResizerCursor(n),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(n){this.last=n;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(n){const x=this.gridController;x!==n&&(x&&x.notifyRemoveHdr(this),this.gridController=n,this.inited&&n&&(n.notifyAddHdr(this),n.notifyHdrXChange(this),n.notifyHdrWidthChange(this),n.notifyHdrVisibilityChange(this)))},setValue:function(n){this.callSuper(n);
this.inited&&this.setWidth(this.value)},setMinValue:function(n){const x=this.minValue??0,z=this.gridController;this.callSuper(n);z&&this.inited&&x!==this.minValue&&z.setMinWidth(z.minWidth+this.minValue-x)},setMaxValue:function(n){const x=this.maxValue??0,z=this.gridController;n??=9999;this.callSuper(n);z&&this.inited&&x!==this.maxValue&&z.setMaxWidth(z.maxWidth+this.maxValue-x)},setWidth:function(n,x){const z=this.width,F=this.gridController;this.callSuper(n,x);F&&this.inited&&z!==this.width&&F.notifyHdrWidthChange(this)},
setX:function(n){const x=this.x,z=this.gridController;this.callSuper(n);z&&this.inited&&x!==this.x&&z.notifyHdrXChange(this)},setVisible:function(n){const x=this.visible,z=this.gridController;this.callSuper(n);this.inited&&z&&x!==this.visible&&z.notifyHdrVisibilityChange(this)}}),u=r.GridRow=new m("GridRow",{initNode:function(n,x){x.placement??(x.placement=e);this.callSuper(n,x);(n=this.gridController)&&n.notifyAddRow(this)},destroy:function(n){this.setGridController();this.callSuper(n)},setGridController:function(n){const x=
this.gridController;x!==n&&(x&&x.notifyRemoveRow(this),this.gridController=n,this.inited&&n&&n.notifyAddRow(this))},notifyHdrXChange:function(n){const x=this[n.columnId+"View"];x&&x.setX(n.x+n.cellXAdj)},notifyHdrWidthChange:function(n){const x=this[n.columnId+"View"];x&&x.setWidth(n.width+n.cellWidthAdj)},notifyHdrVisibilityChange:function(n){const x=this[n.columnId+"View"];x&&x.setVisible(n.visible)}});r.Grid=new t("Grid",a,{include:[H],initNode:function(n,x){const z=r.SpacedLayout;x.overflow??
(x.overflow="autox");x.bgColor??(x.bgColor="#ccc");x.rowSpacing??(x.rowSpacing=1);x.columnSpacing??(x.columnSpacing=1);var F=x.isAutoScrolling;delete x.isAutoScrolling;this.callSuper(n,x);n=new a(this,{name:"header",overflow:"hidden"});new z(n,{name:"xLayout",locked:!0,collapseParent:!0,spacing:this.columnSpacing});new r.SizeToChildren(n,{name:"yLayout",locked:!0,axis:"y"});x=this.sizeHeightToRows;F=new a(this,{name:"content",overflow:x?"hidden":"autoy"},F?[r.AutoScroller]:[]);new z(F,{name:"yLayout",
locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:x});this.syncTo(this,"setGridWidth","width");this.syncTo(n,"_updateContentWidth","width");this.constrain("_updateContentHeight",[x?F:this,"height",n,"height",n,"y"])},setSizeHeightToRows:function(n){this.sizeHeightToRows=n},setRowSpacing:function(n){this.rowSpacing!==n&&(this.rowSpacing=n,this.inited&&this.content.yLayout.setSpacing(n))},setColumnSpacing:function(n){this.columnSpacing!==n&&(this.columnSpacing=n,this.inited&&this.header.xLayout.setSpacing(n))},
setLocked:function(n){this.inited&&[this.header.xLayout,this.header.yLayout,this.content.yLayout].forEach(x=>{n?x.incrementLockedCounter():(x.decrementLockedCounter(),x.update())});this.callSuper(n)},_updateContentWidth:function(n){const x=this.content,z=n.value;x.setWidth(z);x.getSubviews().forEach(F=>{F.setWidth(z)})},_updateContentHeight:function(n){var x=this.header;n=this.content;x=x.y+x.height;n.setY(x);this.sizeHeightToRows?this.setHeight(x+n.height):n.setHeight(this.height-x)},determinePlacement:function(n,
x){if(n===e){let z;x.isA(u)?z=this.content:x.isA(A)&&(z=this.header);if(z)return x.gridController!==this&&x.setGridController(this),z}return this.callSuper(n,x)},doSort:function(){const [n,x]=this.sort??["",""],z=this.getSortFunction(n,x);if(z){const F=this.content,I=F.yLayout;this.rows.sort(z);F.sortSubviews(z);I.sortSubviews(z);I.update()}},getSortFunction:(n,x)=>{if(n){const z="ascending"===x?1:-1,F=n+"View";return(I,K)=>{I=I[F].text;K=K[F].text;return I>K?z:K>I?-z:0}}}});r.SimpleGridColHdr=new t("SimpleGridColHdr",
r.SimpleTextButton,{include:[A],initNode:function(n,x){const z=this;x.activeColor??(x.activeColor="#999");x.hoverColor??(x.hoverColor="#bbb");x.readyColor??(x.readyColor="#aaa");x.inset??(x.inset=2);x.sortIconColor??(x.sortIconColor="#666");const F=x.outset??2;delete x.outset;z.callSuper(n,x);new r.FontAwesome(z,{name:"sortIcon",align:"right",alignOffset:3,valign:"middle",textColor:z.sortIconColor},[{initNode:function(I,K){this.callSuper(I,K);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
z.setOutset(this.width+F);E(z)}}]);z.textView.enableEllipsis();z.setDisabled(!z.sortable);E(z);B(z)},setSortIconColor:function(n){this.sortIconColor=n;this.sortIcon&&this.sortIcon.setTextColor(n)},setSortable:function(n){this.callSuper(n);this.inited&&(n&&this.setOutset(14),this.setDisabled(!n),B(this))},setSortState:function(n){this.callSuper(n);this.inited&&B(this)},setWidth:function(n,x){this.callSuper(n,x);this.inited&&E(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===
this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(r=>{const w=JS.Class,t=JS.Module,m=Math,h=m.max,b=r.View;var a=r.global;const e=a.focus,d=a.keys,f=k=>{const y=k.selectedRow;y&&(y.setSelected(!1),k.set("selectedRow",null,!0))};a=r.InfiniteListRow=new t("InfiniteListRow",{include:[r.Reusable],setInfiniteOwner:function(k){this.infiniteOwner=k},setModel:function(k){this.model=k},setClassKey:function(k){this.classKey=k},notifyRefreshed:()=>{}});const l=r.SelectableInfiniteListRow=new t("SelectableInfiniteListRow",{include:[a,r.Selectable]}),g=r.InfiniteList=
new w("InfiniteList",b,{initNode:function(k,y){let B=y.rowClasses;delete y.rowClasses;if("function"===typeof B){const E={};E["default"]=B;B=E}y.modelIDName??(y.modelIDName="id");y.numericSort??(y.numericSort=!0);y.ascendingSort??(y.ascendingSort=!0);y.overflow??(y.overflow="autoy");y.bgColor??(y.bgColor="#ccc");y.rowSpacing??(y.rowSpacing=1);y.rowInset??(y.rowInset=0);y.rowOutset??(y.rowOutset=0);y.rowHeight??(y.rowHeight=30);y.overscrollBehavior??(y.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(k,y);k=this._listView=new b(this);this._scrollAnchorView=new b(k,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(B,k);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(k,y)=>new r.TrackActivesMultiPool(k,y),setOverscrollBehavior:function(k){this.overscrollBehavior=k;this.getIDS().overscrollBehavior=k},setCollectionModel:function(k){this.collectionModel=
k},setModelIDName:function(k){this.modelIDName=k},setRowSpacing:function(k){this.rowSpacing=k;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(k){this.rowHeight=k;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(k,y){if(0<k&&(this.callSuper(k,y),this.inited)){k=this._listView;const B=this.width;k.setWidth(B);k.getSubviews().forEach(E=>{E.setWidth(B)})}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(k){const y=this.getVisibleRows();let B=y.length;for(;B;){const E=y[--B];if(E.model===k)return E}},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const k=this.modelIDName,y=this.ascendingSort;return this.numericSort?r.getNumericObjSortFunc(k,y):r.getAlphaObjSortFunc(k,y,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(k,y){var B=this.getIndexOfModelInData(k);let E=!1;if(0<=B){var H=
this._rowExtent;const A=this.getIDE().scrollTop,u=A+this.height;B=this.rowInset+B*H;H=B+H;B<=A?(this.scrollYTo(B,!0),E=!0):H>=u&&(this.scrollYTo(H-this.height,!0),E=!0);y&&((y=this.getVisibleRowForModel(k))?y.focus():this._focusToModel=k)}return E},isModelInData:function(k){return 0<=this.getIndexOfModelInData(k)},getNextModel:function(k,y=!0,B=!0){const E=this.getListData(),H=E.length;k=this.getIndexOfModelInData(k);if(0<=k)return k+=1,k>=H?y?E[0]:E[H-1]:E[k];if(B&&0<H)return E[H-1]},getPrevModel:function(k,
y=!0,B=!0){const E=this.getListData(),H=E.length;k=this.getIndexOfModelInData(k);if(0<=k)return--k,0>k?y?E[H-1]:E[0]:E[k];if(B&&0<H)return E[0]},getIndexOfModelInData:function(k){if(k){const y=this.getListData();let B=y.length;for(;B;)if(this.areModelsEqual(y[--B],k))return B}return-1},areModelsEqual:function(k,y){const B=this.modelIDName;return k[B]===y[B]},getActiveRowForModel:function(k){if(k){const y=this._itemPool.getActives();let B=y.length;for(;B;){const E=y[--B];if(this.areModelsEqual(E.model,
k))return E}}},refreshListData:function(k,y){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(k,y)},resetListUI:function(k,y){const B=this.getListData().length,E=this._listView,H=this._scrollAnchorView;E.setHeight(B*this._rowExtent-(0<B?this.rowSpacing:0)+this.rowInset+this.rowOutset);H.setY(E.height-H.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=y;k||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,
!0)},putRowBackInPool:function(k){var y=e.focusedView;y&&y.isDescendantOf(k)&&((y=this.getFocusTrap())?y.focus():e.clear());k.setVisible(!1);this._itemPool.putInstance(k)},refreshListUI:function(k){k=this._rowExtent;const y=this.rowInset,B=this.forceFullResetOnNextRefresh;var E=this.getIDE().scrollTop;const H=this.getListData()??[];var A=h(0,m.floor((E-y)/k));E=m.min(H.length,m.ceil((E-y+this.height)/k));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==A||
this._endIdx!==E||B){const n=this.width,x=this.rowHeight,z=this._visibleRowsByIdx,F=this._focusToModel;this._startIdx=A;this._endIdx=E;for(var u in z)if(u<A||u>=E)this.putRowBackInPool(z[u]),delete z[u];for(u=A;u<E;u++){A=z[u];const I=H[u],K=this.getClassKey(I);let J=!1;A&&A.classKey===K||(A&&this.putRowBackInPool(A),z[u]=A=this._itemPool.getInstance(K),A.setInfiniteOwner(this),A.setClassKey(K),A.setWidth(n),A.setHeight(x),A.setY(y+u*k),A.setVisible(!0),J=!0);!B&&A.model&&this.areModelsEqual(A.model,
I)?J&&this.updateRow(A):(A.setModel(I),this.updateRow(A));A.notifyRefreshed();A.bringToFront();F&&this.areModelsEqual(F,I)&&(A.focus(),this._focusToModel=null)}}},getClassKey:k=>"default",updateRow:k=>{}}),q=r.SimpleSelectableInfiniteListRow=new w("SimpleSelectableInfiniteListRow",r.SimpleButton,{include:[l],initNode:function(k,y){y.selectedColor??(y.selectedColor="#ccf");y.activeColor??(y.activeColor="#f8f8f8");y.hoverColor??(y.hoverColor="#eee");y.readyColor??(y.readyColor="#fff");y.focusIndicator??
(y.focusIndicator=!1);y.activationKeys??(y.activationKeys=d.LIST_KEYS);this.callSuper(k,y)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(k){this.callSuper(k);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},
doActivationKeyDown:function(k,y){y=this.infiniteOwner;const B=this.model;switch(k){case d.CODE_ESC:this.selected&&y.setSelectedRow();break;case d.CODE_ARROW_LEFT:case d.CODE_ARROW_UP:y.selectPrevRowForModel(B);break;case d.CODE_ARROW_RIGHT:case d.CODE_ARROW_DOWN:y.selectNextRowForModel(B)}},doActivationKeyUp:function(k){switch(k){case d.CODE_ENTER:case d.CODE_SPACE:this.doActivated()}}}),c=r.SelectableInfiniteList=new w("SelectableInfiniteList",g,{setSelectedRow:function(k){const y=this.selectedRow;
k!==y&&(y&&y.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",k,!0),k&&(this.setSelectedRowModel(k.model),k.setSelected(!0)))},setSelectedRowModel:function(k){this.set("selectedRowModel",k,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(k,y,B){k&&(f(this),this.setSelectedRowModel(k),this.refreshListUI(),y&&(k=this.getActiveSelectedRow())&&k.focus())},selectNextRowForModel:function(k,
y=!0){this.selectRowForModel(this.getNextModel(k),y,!0)},selectPrevRowForModel:function(k,y=!0){this.selectRowForModel(this.getPrevModel(k),y,!1)},resetListUI:function(k,y){this.isModelInData(this.selectedRowModel)?f(this):this.setSelectedRow();this.callSuper(k,y)},putRowBackInPool:function(k){k.selected&&f(this);this.callSuper(k)},refreshListUI:function(k){k=e.focusedView;this.callSuper();const y=this.getActiveSelectedRow();y&&(this.set("selectedRow",y,!0),y.setSelected(!0),k&&k!==y||y.focus(!0))}}),
p=new t("InfiniteGridRowMixin",{notifyXChange:function(k){const y=this[k.columnId+"View"];y&&y.setX(k.x+k.cellXAdj)},notifyWidthChange:function(k){const y=this[k.columnId+"View"];y&&y.setWidth(k.width+k.cellWidthAdj)},notifyVisibilityChange:function(k){const y=this[k.columnId+"View"];y&&y.setVisible(k.visible)}}),v=new t("InfiniteGridMixin",{setGridHeader:function(k){(this.gridHeader=k)&&k.setGrid(this)},makeReady:function(k,y){const B=this.gridHeader;B?(this.forceFullResetOnNextRefresh=y,B.setSort(k),
B.setLocked(!1)):this.refreshListData(!1,y)},getSortFunction:function(){const [k,y]=this.gridHeader.sort??["",""];return k?r.getAlphaObjSortFunc(k,"ascending"===y,!1):this.callSuper()},updateRow:function(k){this.gridHeader&&this.gridHeader.columnHeaders.forEach(y=>{k.notifyXChange(y);k.notifyWidthChange(y);k.notifyVisibilityChange(y)})},notifyXChange:function(k){this.getVisibleRows().forEach(y=>{y.notifyXChange(k)})},notifyWidthChange:function(k){this.getVisibleRows().forEach(y=>{y.notifyWidthChange(k)})},
notifyVisibilityChange:function(k){this.getVisibleRows().forEach(y=>{y.notifyVisibilityChange(k)})}});r.InfiniteGridRow=new t("InfiniteGridRow",{include:[a,p]});r.SelectableInfiniteGridRow=new t("SelectableInfiniteGridRow",{include:[l,p]});r.SimpleSelectableInfiniteGridRow=new w("SimpleSelectableInfiniteGridRow",q,{include:[p]});r.InfiniteGrid=new w("InfiniteGrid",g,{include:[v]});r.SelectableInfiniteGrid=new w("InfiniteGrid",c,{include:[v]});r.InfiniteGridHeader=new w("InfiniteGridHeader",b,{include:[r.GridController],
initNode:function(k,y){y.columnSpacing??(y.columnSpacing=1);y.overflow="hidden";this.callSuper(k,y);new r.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(k){this.grid=k},setColumnSpacing:function(k){this.columnSpacing=k},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:h(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(k,y){this.callSuper(k,y);this.inited&&(k=this.height,this.columnHeaders.forEach(B=>{B.setHeight(k)}))},setWidth:function(k,
y){this.callSuper(h(this.minWidth,k),y);this.inited&&(k=this.width,this.setGridWidth(k),this.grid.setWidth(k))},subviewAdded:function(k){this.callSuper(k);k.isA(r.GridColHdr)&&(k.setGridController(this),k.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(k){this.isLocked()||this.grid.notifyXChange(k)},notifyHdrWidthChange:function(k){this.isLocked()||this.grid.notifyWidthChange(k)},updateRowsForVisibilityChange:function(k){this.grid.notifyVisibilityChange(k)}})})(myt);
(r=>{const w=JS.Class,t=r.PanelStackTransition=new w("PanelStackTransition",r.Node,{to:m=>Promise.resolve(m),from:m=>Promise.resolve(m)});r.PanelStack=new w("PanelStack",r.View,{include:[r.SelectionManager],initNode:function(m,h){h.overflow="hidden";h.itemSelectionId??(h.itemSelectionId="panelId");h.maxSelected??(h.maxSelected=1);this.callSuper(m,h);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(m){this.set("transition",m,!0)},__updateWidth:function(m){const h=
this.getActivePanel();h&&h.setWidth(m.value)},__updateHeight:function(m){const h=this.getActivePanel();h&&h.setHeight(m.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(m){return this.getSelectableItem(m)},selectPanel:function(m){this.selectById(m)},doSelected:function(m){m.setWidth(this.width);m.setHeight(this.height)},doStackTransition:function(m){this["doStackTransition"+(m.selected?"To":"From")](m)},doStackTransitionTo:function(m){const h=this;h.doBeforeTransitionTo(m);
const b=h.transition;b?b.to(m).then(a=>{h.doAfterTransitionTo(a)}):(m.makeHighestZIndex(),m.setVisible(!0),h.doAfterTransitionTo(m))},doBeforeTransitionTo:m=>{},doAfterTransitionTo:m=>{},doStackTransitionFrom:function(m){const h=this;h.doBeforeTransitionFrom(m);const b=h.transition;b?b.from(m).then(a=>{h.doAfterTransitionFrom(a)}):(m.setVisible(!1),h.doAfterTransitionFrom(m))},doBeforeTransitionFrom:m=>{},doAfterTransitionFrom:m=>{}});r.StackablePanel=new JS.Module("StackablePanel",{include:[r.Selectable],
initNode:function(m,h){h.visible=h.selected=!1;h.bgColor??(h.bgColor="#fff");h.panelId??(h.panelId=h.name);this.callSuper(m,h);this.selected&&this.doStackTransition()},setPanelStack:function(m){this.panelStack=m},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(m){this.panelId=m},setSelected:function(m){this.selected!==m&&(this.callSuper(m),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});r.PanelStackFadeTransition=
new w("PanelStackFadeTransition",t,{initNode:function(m,h){h.duration??(h.duration=1E3);this.callSuper(m,h)},setDuration:function(m){this.duration=m},to:function(m){return new Promise((h,b)=>{m.stopActiveAnimators("opacity");m.setVisible(!0);m.animate({attribute:"opacity",to:1,duration:this.duration}).next(a=>{m.makeHighestZIndex();h(m)})})},from:function(m){return new Promise((h,b)=>{m.stopActiveAnimators("opacity");m.animate({attribute:"opacity",to:0,duration:this.duration}).next(a=>{m.setVisible(!1);
h(m)})})}});r.PanelStackSlideTransition=new w("PanelStackSlideTransition",t,{initNode:function(m,h){h.duration??(h.duration=1E3);h.direction??(h.direction="right");this.callSuper(m,h)},setDuration:function(m){this.duration=m},setDirection:function(m){this.direction=m},to:function(m){const h=m.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=h.width;break;case "right":e="x";a=-h.width;break;case "up":e="y";a=h.height;break;case "down":e="y",a=-h.height}m.stopActiveAnimators(e);
m.set(e,a);m.setVisible(!0);return new Promise((d,f)=>{f=l=>{m.makeHighestZIndex();d(m)};0<b?m.animate({attribute:e,to:0,duration:b}).next(f):(m.set(e,0),m.makeHighestZIndex(),d(m))})},from:function(m){const h=m.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=-h.width;break;case "right":e="x";a=h.width;break;case "up":e="y";a=-h.height;break;case "down":e="y",a=h.height}m.stopActiveAnimators(e);return new Promise((d,f)=>{f=l=>{m.setVisible(!1);d(m)};0<b?m.animate({attribute:e,
to:a,duration:b}).next(f):(m.set(e,a),m.setVisible(!1),d(m))})}})})(myt);
(r=>{const w=JS.Module;var t=r.global;const m=t.dragManager,h=t.mouse;t=r.Draggable;const b=(e,d,f)=>{[d,f].forEach(l=>{e["__is"+l]=!1;e["__tmrId"+l]=null})},a=r.DragGroupSupport=new w("DragGroupSupport",{initNode:function(e,d){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(e,d)},setDragGroups:function(e){const d=this.__dgs={};for(const f in e)d[f]=!0;this.__anyDG=d.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(e){const d=
this.__drpgs={};for(const f in e)d[f]=!0;this.__anyDRPG=d.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(e){e&&(this.__dgs[e]=!0,"*"===e&&(this.__anyDG=!0))},removeDragGroup:function(e){e&&(delete this.__dgs[e],"*"===e&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(e){e&&(this.__drpgs[e]=!0,"*"===e&&(this.__anyDRPG=!0))},removeDropGroup:function(e){e&&(delete this.__drpgs[e],"*"===e&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
r.DropSource=new w("DropSource",{include:[t],initNode:function(e,d){d.distanceBeforeDrag??(d.distanceBeforeDrag=2);d.dropParent??(d.dropParent=e.getRoot());this.callSuper(e,d)},setDropClass:function(e){this.dropClass=r.resolveClassname(e)},setDropClassAttrs:function(e){this.dropClassAttrs=e},setDropParent:function(e){this.dropParent=e},startDrag:function(e){const d=this.dropable=this.makeDropable();if(d){const f=d.distanceBeforeDrag;d.distanceBeforeDrag=0;d.doMouseDown(e);d.__doMouseDown(e);d.distanceBeforeDrag=
f}},doMouseUp:function(e){this.callSuper(e);const d=this.dropable;d&&(d.__doMouseUp(e),d.doMouseUp(e),this.dropable=null)},makeDropable:function(){const e=this.dropClass,d=this.dropParent;if(e&&d){const f=r.DomElementProxy.getRelativePosition(this.getIDE(),d.getIDE());return new e(d,Object.assign({},this.dropClassAttrs,{x:f.x??0,y:f.y??0}))}}});r.DropTarget=new w("DropTarget",{include:[a],initNode:function(e,d){this.callSuper(e,d);m.registerDropTarget(this)},destroy:function(){m.unregisterDropTarget(this);
this.callSuper()},willAcceptDrop:function(e){return!this.disabled&&this.isVisible()},notifyDragStart:e=>{},notifyDragStop:e=>{},notifyDragEnter:e=>{},notifyDragLeave:e=>{},notifyDrop:e=>{}});r.Dropable=new w("Dropable",{include:[t,a],setDropTarget:function(e){this.dropTarget=e},setDropped:function(e){this.dropped=e},setDropFailed:function(e){this.dropFailed=e},willPermitDrop:e=>!0,startDrag:function(e){this.setDropped(!1);this.setDropFailed(!1);m.startDrag(this);this.callSuper(e)},updateDrag:function(e){m.updateDrag(e,
this);this.callSuper(e)},stopDrag:function(e,d){m.stopDrag(e,this,d);this.callSuper(e,d);d?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(e){this.setDropTarget(e)},notifyDragLeaving:function(e){this.setDropTarget()},notifyDropped:function(e,d){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});r.AutoScroller=new w("AutoScroller",{include:[a],initNode:function(e,d){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;d.overflow??(d.overflow="auto");this.callSuper(e,d);m.registerAutoScroller(this)},destroy:function(){m.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(e){this.scrollBorder=Math.max(1,e)},setScrollFrequency:function(e){this.scrollFrequency=e},setScrollAmount:function(e){this.scrollAmount=e},setScrollAcceleration:function(e){this.scrollAcceleration=e},notifyAutoScrollerDragStart:function(e){e=this.getIDE();(e.scrollHeight>e.clientHeight||
e.scrollWidth>e.clientWidth)&&this.attachToDom(h,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(e){this.detachFromDom(h,"__hndlMove","mousemove",!0);b(this,"Up","Down");b(this,"Left","Right")},__hndlMove:function(e){const d=this;var f=e.value;e=f.pageX;f=f.pageY;if(d.containsPoint(e,f)){const l=d.getPagePosition(),g=d.scrollBorder,q=(c,p)=>{d["__is"+c]&&(d.getIDE()["scroll"+("Up"===c||"Down"===c?"Top":"Left")]+=p*d["__amt"+c],d["__tmrId"+c]=setTimeout(()=>{q(c,p)},d.scrollFrequency))};
e-=l.x;f-=l.y;f<g?(d.__isUp=!0,d.__amtUp=Math.round(d.scrollAmount*(1+d.scrollAcceleration*(1-f/g))),d.__tmrIdUp||q("Up",-1)):d.height-f<g?(d.__isDown=!0,d.__amtDown=Math.round(d.scrollAmount*(1+d.scrollAcceleration*(1-(d.height-f)/g))),d.__tmrIdDown||q("Down",1)):b(d,"Up","Down");e<g?(d.__isLeft=!0,d.__amtLeft=Math.round(d.scrollAmount*(1+d.scrollAcceleration*(1-e/g))),d.__tmrIdLeft||q("Left",-1)):d.width-e<g?(d.__isRight=!0,d.__amtRight=Math.round(d.scrollAmount*(1+d.scrollAcceleration*(1-(d.width-
e)/g))),d.__tmrIdRight||q("Right",1)):b(d,"Left","Right")}else b(d,"Up","Down"),b(d,"Left","Right")}})})(myt);
myt.Eventable=new JS.Class("Eventable",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Observer],initialize:function(r,w){if(w){const t=w.length;for(let m=0,h;t>m;)(h=w[m++])?this.extend(h):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.init(r??{})},init:function(r){this.callSetters(r);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});
(r=>{const w=Math,t=r.Geometry.degreesToRadians,m=d=>{var f=t(d.startAngle),l=t(d.endAngle);if(f>l){var g=f;f=l;l=g}g=d.__path;const q=d.width/2;var c=d.thickness;const p=d.radius,v=p+c;var k=w.PI;const y=l-f,B=y+1E-4>=2*k;B&&(f=0,l=k);const E=w.cos,H=w.sin;f=[[q+v*E(f),q+v*H(f)],[q+v*E(l),q+v*H(l)],[q+p*E(l),q+p*H(l)],[q+p*E(f),q+p*H(f)]];l=["M"+f[0].join()];B?l.push("A"+[v,v,0,1,1,f[1]].join(),"A"+[v,v,0,1,1,f[0]].join(),"L"+f[2].join(),"A"+[p,p,0,1,0,f[3]].join(),"A"+[p,p,0,1,0,f[2]].join()):(k=
y%(2*k)>k?1:0,c/=2,l.push("A"+[v,v,0,k,1,f[1]].join(),d.endCapRounding?"A"+[c,c,0,0,1,f[2]].join():"L"+f[2].join(),"A"+[p,p,0,k,0,f[3]].join(),d.startCapRounding?"A"+[c,c,0,0,1,f[0]].join():""));l.push("z");g.setAttribute("d",l.join(" "));g.setAttribute("fill",d.color)},h=d=>{const f=2*(d.radius+d.thickness),l=d.__svg;d.setWidth(f);d.setHeight(f);l.setAttribute("viewBox","0 0 "+f+" "+f);l.setAttribute("width",f);l.setAttribute("height",f);m(d)},b=(d,f,l)=>{d[f]!==l&&(d[f]=l,d.inited&&(m(d),d.fireEvent(f,
l)))},a=(d,f,l)=>{d[f]!==l&&(d[f]=l=w.max(0,l),d.inited&&(h(d),d.fireEvent(f,l)))},e=(d,f)=>{d=document.createElementNS("http://www.w3.org/2000/svg",d);f&&f.appendChild(d);return d};r.Annulus=new JS.Class("Annulus",r.BackView,{initNode:function(d,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(d,f);h(this)},createOurDomElement:function(d){d=this.callSuper(d);var f=Array.isArray(d)?d[1]:d;f=this.__svg=e("svg",f);this.__path=
e("path",f);f.style.pointerEvents="none";return d},setRadius:function(d){a(this,"radius",d)},setThickness:function(d){a(this,"thickness",d)},setStartAngle:function(d){b(this,"startAngle",d)},setEndAngle:function(d){b(this,"endAngle",d)},setStartCapRounding:function(d){b(this,"startCapRounding",d)},setEndCapRounding:function(d){b(this,"endCapRounding",d)},setColor:function(d){b(this,"color",d)},isColorAttr:function(d){return"color"===d||this.callSuper(d)}})})(myt);
(r=>{let w;const t=JS.Class,m=r.global,h=m.mouse,b=m.windowResize,a=Math,e=a.min,d=a.max,f=a.round,l=v=>{v.__checkTID&&(clearTimeout(v.__checkTID),delete v.__checkTID)},g=v=>{if(v.tooltip){const k=v._lastPos;if(v.tooltip.parent.containsPoint(k.x,k.y))return!0}v.hideTip();return!1},q=r.BaseTooltip=new t("BaseTooltip",r.View,{include:[r.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(v,k){this.tipDelay=this.nextTipDelay=q.TIP_DELAY;this.tipHideDelay=q.TIP_HIDE_DELAY;k.visible??
(k.visible=!1);this.callSuper(v,k)},setTooltip:function(v){this.inited&&(this.tooltip=v)&&(this.attachToDom(h,"__hndl_mousemove","mousemove",!0),this.attachToDom(v.parent,"hideTip","mousedown",!0),this.attachToDom(v.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(v){const k=this;k._lastPos=r.MouseObservable.getMouseFromEvent(v);g(k)&&(l(k),k.__checkTID=setTimeout(()=>{delete k.__checkTID;g(k)&&k.showTip()},k.nextTipDelay))},hideTip:function(v){l(this);v=this.tooltip.parent;this.detachFromDom(v,
"hideTip","mousedown",!0);this.detachFromDom(v,"hideTip","mouseup",!0);this.detachFromDom(h,"__hndl_mousemove","mousemove",!0);this.nextTipDelay=this.tipDelay;this.setVisible(!1);return!0},showTip:function(){m.dragManager.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),c=r.Tooltip=new t("Tooltip",q,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},
initNode:function(v,k){k.edgeSize??(k.edgeSize=c.EDGE_SIZE);k.edgeColor??(k.edgeColor=c.EDGE_COLOR);k.shadowSize??(k.shadowSize=c.SHADOW_SIZE);k.shadowColor??(k.shadowColor=c.SHADOW_COLOR);k.insetH??(k.insetH=c.HORIZONTAL_INSET);k.insetV??(k.insetV=c.VERTICAL_INSET);k.tipBgColor??(k.tipBgColor=c.TIP_BG_COLOR);k.tipTextColor??(k.tipTextColor=c.TIP_TEXT_COLOR);this.callSuper(v,k);new r.Text(this,{name:"_tipText",fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},
setEdgeSize:function(v){this.edgeSize=v},setEdgeColor:function(v){this.edgeColor=v},setShadowSize:function(v){this.shadowSize=v},setShadowColor:function(v){this.shadowColor=v},setInsetH:function(v){this.insetH=v},setInsetV:function(v){this.insetV=v},setTipBgColor:function(v){this.tipBgColor=v},setTipTextColor:function(v){this.tipTextColor=v},showTip:function(){const v=this.tooltip;var k=v.text;const y=v.parent;var B=this._tipText;const E=this.edgeSize,H=this.shadowSize;B.text!==k&&B.setText(k);B.setWidth("auto");
var A=e(B.measureNoWrapWidth(),v.maxTextWidth);k=A+2*B.x;const u=k+2*E;B.setWidth(A);B.sizeViewToDom();A=y.getPagePosition();B=B.height+2*B.y;const n=B+2*E,x=A.y-n+("below"===v.tipvalign?y.height+n:0);A=A.x;switch(v.tipalign){case "right":A-=u;case "farright":A+=y.width;break;case "farleft":A-=u}this.setX(f(e(d(A,0),b.getWidth()-u)));this.setY(f(e(d(x,0),b.getHeight()-n)));this.setWidth(k);this.setHeight(B);this.setBgColor(this.tipBgColor);this.setBorder([E,"solid",this.edgeColor]);this.setBoxShadow([H,
H,H,this.shadowColor]);this.callSuper()}}),p=r.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:c,MAX_TEXT_WIDTH:280},setTooltip:function(v){this.callSuper("");this.set("tooltip",v,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(v){this.set("tipAlign",v,!0)},setTipValign:function(v){this.set("tipValign",v,!0)},setMaxTextWidth:function(v){this.set("maxTextWidth",v,!0)},setTipClass:function(v){this.set("tipClass",v,!0)},doSmoothMouseOver:function(v){const k=this.getTooltip();
this.callSuper(v);if(v&&k){v=this.tipClass??p.TIP_CLASS;!w||w instanceof v||(w.destroy(),w=null);if(!w){let y=document.getElementById("tooltipDiv");y||(y=r.DomElementProxy.createElement("div",{position:"absolute"}),r.getElement().appendChild(y));w=new v(y,{domId:"tooltipDiv"})}w.setTooltip({parent:this,text:k,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||p.MAX_TEXT_WIDTH})}}})})(myt);
(r=>{const w=Math;r.Path=new JS.Class("Path",{initialize:function(t){this.setVectors(t??[])},setVectors:function(t){this._boundingBox=null;this.vectors=t},copyFrom:function(t){this.vectors=t.vectors.slice();this._boundingBox=null},drawInto:function(t){t.beginPath();const m=this.vectors;let h=m.length,b=0;for(t.moveTo(m[b++],m[b++]);h>b;)t.lineTo(m[b++],m[b++]);t.closePath()},translate:function(t,m){const h=this.vectors;let b=h.length;for(;b;)h[--b]+=m,h[--b]+=t;this._boundingBox=null},rotate:function(t){const m=
w.cos(t);t=w.sin(t);const h=this.vectors,b=h.length;for(let a=0;b>a;){const e=h[a]*m-h[a+1]*t,d=h[a]*t+h[a+1]*m;h[a++]=e;h[a++]=d}this._boundingBox=null},rotateAroundOrigin:function(t,m,h){this.translate(-m,-h);this.rotate(t);this.translate(m,h)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const t=this.vectors;let m=t.length,h,b,a,e;if(2<=m){a=e=t[--m];for(h=b=t[--m];m;){const d=t[--m],f=t[--m];a=w.min(d,a);e=w.max(d,e);h=w.min(f,h);b=w.max(f,b)}return this._boundingBox=
{x:h,y:a,width:b-h,height:e-a}}return this._boundingBox=null},getCenter:function(){const t=this.getBoundingBox();return t?{x:t.x+t.width/2,y:t.y+t.height/2}:null},isPointInPath:function(t,m){"object"===typeof t&&(m=t.y,t=t.x);return r.Geometry.isPointInPath(t,m,this.getBoundingBox(),this.vectors)}})})(myt);
(r=>{const w=Math.PI,t=w/2,m=3*w/2,h=r.AccessorSupport,b={};"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" ").forEach(a=>{b[a]=function(){this.__ctx[a].apply(this.__ctx,arguments)}});["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"].forEach(a=>
{b[a]=function(){return this.__ctx[a].apply(this.__ctx,arguments)}});"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" ").forEach(a=>{b[h.generateSetterName(a)]=function(e){this.__ctx[a]=e};b[h.generateGetterName(a)]=function(){return this.__ctx[a]}});r.Canvas=new JS.Class("Canvas",r.BackView,{include:[b],createOurDomElement:function(a){a=this.callSuper(a);const e=
Array.isArray(a)?a[1]:a,d=this.__cvs=document.createElement("canvas");d.className="mytUnselectable";e.appendChild(d);d.style.position="absolute";this.__ctx=d.getContext("2d");return a},setWidth:function(a,e){0>a&&(a=0);this.__cvs.setAttribute("width",a);this.callSuper(a,e)},setHeight:function(a,e){0>a&&(a=0);this.__cvs.setAttribute("height",a);this.callSuper(a,e)},clear:function(){const a=this.__ctx;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.width,this.height);a.restore()},dataURItoBlob:function(a,
e){a=atob(a.split(",")[1]);const d=a.length,f=[];for(let l=0;l<d;)f.push(a.charCodeAt(l++));return new Blob([new Uint8Array(f)],{type:e})},getDataURL:function(a,e){return this.__cvs.toDataURL(a,e)},getImageFile:function(a,e,d){switch(a){case "png":case "PNG":a="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":a="jpeg";d??=.5;break;default:console.warn("Unexpected image type",a),a=a.toLowerCase()}const f="image/"+a;d=this.dataURItoBlob(this.getDataURL(f,d),f);e&&(d.name=e+"."+a);return d},
circle:function(a,e,d){this.__ctx.arc(a,e,d,0,2*w)},drawRoundedRect:function(a,e,d,f,l,g){const q=this.lineTo.bind(this),c=this.arc.bind(this);g=f+g;l=d+l;this.beginPath();this.moveTo(d,f+a);q(d,g-a);c(d+a,g-a,a,w,t,!0);q(l-a,g);c(l-a,g-a,a,t,0,!0);q(l,f+a);c(l-a,f+a,a,0,m,!0);q(d+a,f);c(d+a,f+a,a,m,w,!0);this.closePath();0<e&&(a-=e,d+=e,l-=e,f+=e,g-=e,this.moveTo(d,f+a),c(d+a,f+a,a,w,m),q(l-a,f),c(l-a,f+a,a,m,0),q(l,g-a),c(l-a,g-a,a,0,t),q(d+a,g),c(d+a,g-a,a,t,w),this.closePath());return this},drawRectOutline:function(a,
e,d,f,l){l=d+l;f=e+f;const g=e+a,q=f-a,c=d+a;a=l-a;const p=this.lineTo.bind(this);this.beginPath();this.moveTo(e,d);p(e,l);p(f,l);p(f,d);p(e,d);p(g,c);p(q,c);p(q,a);p(g,a);p(g,c);this.closePath();return this},drawPartiallyRoundedRect:function(a,e,d,f,l,g,q,c){c=g+c;q=l+q;const p=this.lineTo.bind(this),v=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(l,g+a);p(l,c-d);0<d&&v(l,c,l+d,c);p(q-f,c);0<f&&v(q,c,q,c-f);p(q,g+e);0<e&&v(q,g,q-e,g);p(l+a,g);0<a&&v(l,g,l,g+a);this.closePath();return this},
drawAnnulus:function(a,e,d,f,l,g,q,c=60){const p=r.Color;q.forEach(F=>{"string"===typeof F.color&&(F.color=p.makeColorFromHexString(F.color))});c=w/c;let v=0;for(var k=q.length-1;v<k;){var y=q[v++],B=q[v],E=Math.round((B.angle-y.angle)/c);B=y.color.getDiffFrom(B.color);y.colorDelta={red:B.red/E,green:B.green/E,blue:B.blue/E}}d=new r.Path([a+d,e,a+f,e]);d.rotateAroundOrigin(l,a,e);f=d.vectors;let H,A,[u,n,x,z]=f;k=0;y=w/360;for(v=0;g>l;)H=u,A=n,E=x,B=z,l+=c,l>g&&(c+=g-l,y=0,l=g),d.rotateAroundOrigin(c+
y,a,e),[u,n,x,z]=f,this.beginPath(),this.moveTo(H,A),this.lineTo(E,B),this.lineTo(x,z),this.lineTo(u,n),this.closePath(),E=q[v].color,B=q[v].colorDelta,this.setFillStyle(p.rgbToHex(E.red+k*B.red,E.green+k*B.green,E.blue+k*B.blue,!0)),this.fill(),0<y&&(d.rotateAroundOrigin(-y,a,e),[u,n,x,z]=f),k++,l>=q[v+1].angle&&(k=0,v++);return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
