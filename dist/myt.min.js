(q=>{let y;var w=c=>{let g=c.length;for(;g;){const f=c[--g];y=f.ver??f.id;if(f.str?.includes(f.sub)||f.prop)return f.id}};var r=c=>{const g=c.indexOf(y);if(0<=g)return parseFloat(c.slice(g+y.length+1))};const k=navigator.userAgent,b=navigator.platform;r=q.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:k,sub:"Firefox",id:"Firefox"},{str:k,sub:"Chrome",id:"Chrome"},{str:k,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:r(k)||r(navigator.appVersion)||"UNKNOWN",os:w([{str:k,sub:"iPhone",id:"iPhone/iPod"},{str:b,sub:"Linux",id:"Linux"},{str:b,sub:"Mac",id:"Mac"},{str:b,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(r.browser){case "Chrome":case "Safari":q="WebKit";break;case "Explorer":q="MS";break;case "Firefox":q="Moz";break;case "Opera":q="O";break;default:q="UNKNOWN"}w=q.toLowerCase();r.prefix={dom:q,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:q,floor:y,ceil:w}=Math,r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),k="January February March April May June July August September October November December".split(" "),b="Sun Mon Tue Wed Thu Fri Sat".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g=e=>(10>e?"0":"")+e,f=(e,d)=>{e=e.getTimezoneOffset();return(0<e?"-":"+")+g(y(q(e/60)))+(d?":":"")+(0==q(e%60)?"00":g(q(e%60)))},h={d:e=>
g(e.getDate()),D:e=>b[e.getDay()],j:e=>e.getDate(),l:e=>c[e.getDay()],N:e=>0==e.getDay()?7:e.getDay(),S:e=>{e=e.getDate();return 1==e%10&&11!=e?"st":2==e%10&&12!=e?"nd":3==e%10&&13!=e?"rd":"th"},w:e=>e.getDay(),z:e=>{const d=new Date(e.getFullYear(),0,1);return w((e-d)/864E5)},W:e=>{const d=new Date(e.valueOf());e=(e.getDay()+6)%7;d.setDate(d.getDate()-e+3);e=d.valueOf();d.setMonth(0,1);4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7);return g(1+w((e-d)/6048E5))},F:e=>k[e.getMonth()],m:e=>g(e.getMonth()+
1),M:e=>r[e.getMonth()],n:e=>e.getMonth()+1,t:e=>{let d=e.getFullYear();e=e.getMonth()+1;12===e&&(d=d++,e=0);return(new Date(d,e,0)).getDate()},L:e=>{e=e.getFullYear();return 0==e%400||0!=e%100&&0==e%4},o:e=>{const d=new Date(e.valueOf());d.setDate(d.getDate()-(e.getDay()+6)%7+3);return d.getFullYear()},Y:e=>e.getFullYear(),y:e=>(""+e.getFullYear()).substr(2),a:e=>12>e.getHours()?"am":"pm",A:e=>12>e.getHours()?"AM":"PM",B:e=>y(1E3*((e.getUTCHours()+1)%24+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/
24),g:e=>e.getHours()%12||12,G:e=>e.getHours(),h:e=>g(e.getHours()%12||12),H:e=>g(e.getHours()),i:e=>g(e.getMinutes()),s:e=>g(e.getSeconds()),e:e=>/\((.*)\)/.exec((new Date).toString())[1],I:e=>{let d=null,a=0;for(;12>a;){const l=(new Date(e.getFullYear(),a++,1)).getTimezoneOffset();if(null===d)d=l;else if(l<d){d=l;break}else if(l>d)break}return e.getTimezoneOffset()==d|0},O:e=>f(e,!1),P:e=>f(e,!0),T:e=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:e=>60*-e.getTimezoneOffset(),c:e=>e.format("Y-m-d\\TH:i:sP"),
r:e=>e.toString(),U:e=>e.getTime()/1E3};return function(e){return e.replace(/(\\?)(.)/g,(d,a,l)=>""===a&&h[l]?h[l](this):l)}})();
(q=>{const y=(a,l)=>{var u=a.__mct__.get(l);if(u)return u.slice();const n=[];if(u=a.__anc__){const p=u.length;for(let t=0;t<p;){const z=u[t++].__fns__;z.has(l)&&n.push(z.get(l))}}else{const p=a.__anc__=[],t=z=>{const F=z.__inc__,I=F.length;for(let L=0;L<I;)t(F[L++]);p.includes(z)||(p.push(z),z=z.__fns__,z.has(l)&&n.push(z.get(l)))};t(a)}a.__mct__.set(l,n.slice());return n},w=(a,l)=>{const u=a.callable;return a.__hs?function(...n){const p=this.callSuper,t=y(l,a.name);let z=t.length-1;if(0===z)p&&delete this.callSuper;
else{const I=n.length,L=this.callSuper=(...A)=>{for(let D=A.length;D<I;)A[D]=n[D++];0===--z&&delete this.callSuper;A=t[z].callable.call(this,...A);this.callSuper=L;z++;return A}}const F=u.call(this,...n);p?this.callSuper=p:delete this.callSuper;return F}:u},r=(a,l)=>{l=l??a;if(l===a){a.__anc__=null;a.__mct__=new Map;var u=a.__dep__;for(var n=u.length;0<n;)r(u[--n])}u=l.__tgt__;n=a.__inc__;const p=n.length;for(let t=0;t<p;)r(n[t++],l);for(const [t,z]of a.__fns__)a=z instanceof c?w(z,l):z,u[t]!==a&&
(u[t]=a)},k=a=>a.__meta__??(a.__meta__=new g(null,null,a)).include(a.klass,!0),b=a=>{const l=function(...u){return this.initialize(...u)??this};l.prototype=Object.create(a.prototype);return l},c=b(Object),g=q.Module=b(Object);c.prototype.initialize=function(a,l,u){this.module=a;this.name=l;this.callable=u;this.__hs=u.toString().includes("callSuper")};var f=g.prototype;f.initialize=function(a,l,u){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=u;a&&(this.__displayName=
a);this.include(l,!0)};f.include=function(a,l){if(a){if(a.__fns__)this.__inc__.push(a),a.__dep__.push(this);else{var u=a.extend,n=a.include;u&&(u.__fns__||"function"!==typeof u)&&this.extend(u);if(n&&(n.__fns__||"function"!==typeof n)){u=n.length;for(let p=0;p<u;)this.include(n[p++],!0)}for(const p of Object.keys(a))n=a[p],("extend"!==p&&"include"!==p||!n.__fns__&&"function"===typeof n)&&this.__fns__.set(p,n?.__fns__||"function"!==typeof n?n:new c(this,p,n))}!0!==l&&r(this)}return this};f.includes=
function(a){if(a===this)return!0;const l=this.__inc__,u=l.length;for(let n=0;n<u;)if(l[n++].includes(a))return!0;return!1};f.instanceMethod=function(a){return y(this,a).pop()};const h=new g("Kernel",{extend:function(a){k(this).include(a)},isA:function(a){return"function"===typeof a&&this instanceof a||k(this).includes(a)}}),e=q.Class=b(g),d=e.prototype;d.initialize=function(a,l,u){"function"!==typeof l&&(u=l,l=Object);g.prototype.initialize.call(this,a);a=b(l);for(const n in this)a[n]===this[n]||
a.hasOwnProperty(n)||(a[n]=this[n]);a.prototype.constructor=a.prototype.klass=a;k(a).include(l.__meta__);a.__tgt__=a.prototype;l=l===Object?{}:l.__fns__?l:new g(l.prototype,!0);a.include(h,!0).include(l,!0).include(u,!0);r(a);return a};f=(a,l)=>{a.__inc__=[];a.__dep__=[];const u=a.__tgt__=a.prototype,n=a.__fns__=new Map;for(const F of Object.keys(u)){var p=n,t=p.set;var z=u[F];z=z?.__fns__||"function"!==typeof z?z:new c(a,F,z);t.call(p,F,z)}u.constructor=u.klass=a;for(const F in d)a[F]===d[F]||a.hasOwnProperty(F)||
(a[F]=d[F]);a.include(l);a.constructor=a.klass=e};f(c,h);f(g,h);f(e,g);r(k(c));r(k(g));k(e).include(g.__meta__);q.Singleton=new e("Singleton",{initialize:(a,l,u)=>new (new e(a,l,u))})})(global.JS={});
(q=>{class y extends Error{constructor(A,D,...v){super(...v);this.name="FetchError";this.status=A;this.url=D}}let w=0,r;const k=console.warn,b=Math,{abs:c,min:g,max:f,pow:h}=b,e=document,d=e.head,a=e.createElement.bind(e),l={},u={"":!0},n=e.fonts,p=A=>{const D=A.family.split('"').join("");[D,D+" "+A.weight].forEach(v=>{if(!u[v]){u[v]=!0;const m=l[v]??[];for(;m.length;)(v=m.pop())&&!v.destroyed&&v.sizeViewToDom()}})},t={},z=A=>{const D={};return(...v)=>{const m=JSON.stringify(v);return m in D?D[m]:
D[m]=A(...v)}},F=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,I=/\$(\d+)/g,L=q.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:A=>A.split("").reduce((D,v)=>{D=(D<<5)-D+v.charCodeAt(0);return D&D},0),addEventListener:(A,D,v,m,x)=>{A.addEventListener(D,v,{capture:m||!1,passive:x||!1})},removeEventListener:(A,D,v,m)=>{A.removeEventListener(D,v,m||!1)},resolveName:(A,D)=>{if(A&&0!==A.length){D=D??global;var v=Array.isArray(A)?A:A.split("."),m=v.length;for(let x=0;x<m;x++)if(D=D[v[x]],null==D){k("resolveName failed for",
A,"at part",x,v[x]);return}return D}},resolveClassname:A=>{"string"===typeof A&&(A=L.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,D,v){const m=this._loadedScripts??(this._loadedScripts={});if(m[A])return k("script already loaded for src",A),null;m[A]=!0;const x=a("script");x.type="text/javascript";x.async=!1;if(D){let B=!1;x.onload=x.onreadystatechange=()=>{B||x.readyState&&"complete"!==
x.readyState||(B=!0,x.onload=x.onreadystatechange=null,D())}}x.src=A+(v?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());d.appendChild(x);return x},dumpStack:(A,D)=>{let v;"string"===typeof A&&(v=A,A=null);L.global.error.notify(D||"error",null,v,A)},getRandom:A=>{const D=b.random();return A?f(0,g(A(D),.9999999999)):D},getRandomArbitrary:(A,D,v)=>{const m=g(A,D);return L.getRandom(v)*(f(A,D)-m)+m},getRandomInt:(A,D,v)=>{const m=g(A,D);return b.floor(L.getRandom(v)*(f(A,D)-m+1)+m)},areFloatsEqual:(A,
D,v)=>{const m=c(A),x=c(D);return c(A-D)<=(m>x?x:m)*(null==v?1E-6:c(v))},areArraysEqual:(A,D)=>{if(A!==D){if(null==A||null==D)return!1;let v=A.length;if(v!==D.length)return!1;for(;v;)if(A[--v]!==D[v])return!1}return!0},areObjectsEqual:(A,D)=>{if(A!==D){if(null==A||null==D)return!1;for(const v in A)if(A[v]!==D[v])return!1;for(const v in D)if(A[v]!==D[v])return!1}return!0},getElement:(A,D)=>e.getElementsByTagName(A||"body")[0<D?D:0],loadFontFaces:(A,D)=>{const v=[];A.forEach(m=>{m=new FontFace(m.family,
"url("+m.url+")",m.options);v.push(m.load())});Promise.all(v).then(m=>{m.forEach(x=>{n.add(x);p(x)});D?.(m)})},loadFontFace:(A,D,v={},m)=>{A=new FontFace(A,"url("+D+")",v);A.loaded.then(x=>{n.add(x);p(x);m?.(x)});A.load()},registerForFontNotification:(A,D)=>{u[D]?A&&!A.destroyed&&A.sizeViewToDom():(l[D]??(l[D]=[])).push(A)},createBaseFontCSSRule:A=>{L.addCSSRule(L.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{A?.forEach(L.createStylesheetLink)},createStylesheetLink:A=>{const D=
a("link");D.rel="stylesheet";A&&(D.href=A);d.appendChild(D);return D},createStylesheet:()=>{const A=a("style");d.appendChild(A);return A.sheet},addCSSRule:(A,D,v,m)=>{A.insertRule(D+"{"+v+"}",m)},removeCSSRules:A=>{let D=A.cssRules.length;for(;D;)A.deleteRule(--D)},createInputPlaceholderCSSRule:(A,D,v,m=1)=>{let x=A.__sheet;x?L.removeCSSRules(x):x=A.__sheet=L.createStylesheet();A=A.getODE();A=A.id||(A.id="id"+ ++w);const B=[];D&&B.push("color:"+D);v&&B.push("font-family:"+v);m&&B.push("opacity:"+
m);L.addCSSRule(x,"#"+A+"::placeholder",B.join("; "),0)},isNotSorted:(A,D)=>{const v=A.length;for(let m=1;m<v;m++)if(0<D(A[m-1],A[m]))return!0},chainSortFunc:(...A)=>(D,v)=>{for(const m of A){const x=m(D,v);if(0!==x)return x}return 0},getAlphaObjSortFunc:z((A,D,v,m)=>{const x=D?1:-1;return(B,E)=>{B=B[A];E=E[A];m?("string"!==typeof B&&(B=""+B),"string"!==typeof E&&(E=""+E)):(B=B||"",E=E||"");v&&(B=B.toLowerCase(),E=E.toLowerCase());return B.localeCompare(E)*x}}),getNumericObjSortFunc:z((A,D)=>{const v=
D?1:-1;return(m,x)=>{m=m[A]||0;x=x[A]||0;return(m-x)*v}}),dataURIToBlob:A=>{var D=A.indexOf(",");const v=A.slice(0,D).split(":")[1].split(";")[0];A=A.slice(D+1);if(v.startsWith("text/"))A=decodeURIComponent(A);else{A=atob(A);D=A.length;const m=new Uint8Array(D);for(;D;)m[--D]=A.charCodeAt(D);A=m}return new Blob([A],{type:v})},formatAsPercentage:(A,D=2)=>{switch(typeof A){case "number":return D=g(16,f(0,D)),A=b.round(f(0,g(1,A))*h(10,2+D))/h(10,D),(0===A%1?A:A.toFixed(D))+"%";case "string":return A;
default:return k("formatAsPercentage: expects a number"),A}},memoize:z,debounce:(A,D,v)=>{const m="__DBTO_"+ ++w;return function(){const x=this,B=x[m],E=arguments,J=v&&!B;clearTimeout(B);x[m]=setTimeout(function(){x[m]=null;v||A.apply(x,E)},D);J&&A.apply(x,E)}},createFixedThresholdCounter:(A,D,v,m)=>{var x=L.AccessorSupport.generateName;const B="function"===typeof A||A instanceof JS.Module,E={};m=m||x("counter",v);const J=x(m,"increment");x=x(m,"decrement");if(void 0!==(B?A.instanceMethod(J):A[J]))return k("Increment: Abort clobber",
J,A),!1;if(void 0!==(B?A.instanceMethod(x):A[x]))return k("Decrement: Abort clobber",x,A),!1;E[J]=function(){const K=this[m]+1;this[m]=K;this.fireEvent(m,K);K===D&&this.set(v,!0)};E[x]=function(){const K=this[m];if(0!==K){var M=K-1;this[m]=M;this.fireEvent(m,M);K===D&&this.set(v,!1)}};A[B?"include":"extend"](E);return!0},makeURLSearchParams:(A={})=>{const D=new URLSearchParams;for(const v in A){const m=A[v];void 0!==m&&D.set(v,m)}return D},doFetch:(A,D,v,m,x,B)=>fetch(A,D).then(E=>{if(!E.ok)throw new y(E.status,
A,E.statusText);return E}).then(E=>v?E.text():E.json()).then(E=>{if(m)try{if(v)m(E);else{if(!1===E.success)throw new y(200,A,E.message);m(E.data)}}catch(J){throw E=new y(200,A,J.message),E.stack=J.stack,E;}}).catch(E=>{if(x){if("FetchError"!==E.name){const J=new y(0,A,E.message);J.stack=E.stack;E=J}x(E)}}).finally(()=>{B?.()}),I18N:{setLocale:A=>{r=A},getLocale:()=>r,addDictionary:(A,D)=>{t[D]=Object.assign(t[D]??{},A)},setDictionary:(A,D)=>{t[D]=A??{}},get:(A,...D)=>{var v=r??=(navigator.language??
"en").split("-")[0].toLowerCase();v=(t[v]??t.en??{})[A];return null!=v?0<D.length?v.replaceAll(F,(m,x,B,E)=>B&&E?1==D[parseInt(x)]?B:E:"").replaceAll(I,(m,x)=>D[x]):v:A}}};n.onloadingdone=A=>{A.fontfaces.forEach(D=>{p(D)})}})(global);
(q=>{const y=(r,k)=>{r.startsWith('"')&&(r=r.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return k?JSON.parse(r):r}catch(b){}},w=q.Cookie={defaults:{raw:!1,json:!1},read:(r,k)=>{k={...w.defaults,...k};const b=k.raw?e=>e:e=>decodeURIComponent(e.split("+").join(" "));k=k.json;const c=document.cookie.split("; "),g=c.length,f=r?void 0:{};for(let e=0;e<g;){var h=c[e++].split("=");const d=b(h.shift());h=b(h.join("="));if(r){if(r===d)return y(h,k)}else f[d]=y(h,k)}return f},write:(r,k,b)=>
{b={...w.defaults,...b};if("number"===typeof b.expires){const d=b.expires,a=b.expires=new Date;a.setDate(a.getDate()+d)}k=b.json?JSON.stringify(k):String(k);const {raw:c,expires:g,path:f,domain:h,samesite:e}=b;return document.cookie=[c?r:encodeURIComponent(r),"=",c?k:encodeURIComponent(k),g?"; expires="+g.toUTCString():"",f?"; path="+f:"",h?"; domain="+h:"",e?"; samesite="+e:"",b.secure?"; secure":""].join("")},remove:(r,k)=>void 0!==w.read(r,k)?(w.write(r,"",{...k,expires:-1}),!0):!1}})(myt);
(q=>{const y=console.error,w=JSON.parse,r=global.localStorage,k=r.getItem.bind(r),b=r.setItem.bind(r),c=r.removeItem.bind(r),g=r.clear.bind(r),f=(e,d,a)=>{if(0<d){const l="__timerId_"+a;(a=h[l])&&clearTimeout(a);h[l]=setTimeout(()=>{e();delete h[l]},d)}else e()},h=q.LocalStorage={hasDatum:(e,d)=>{if(e&&(d=k(d??"myt")))try{return null!=w(d)[e]}catch(a){y(a)}return!1},getDatum:(e,d)=>{if(e&&(d=k(d??"myt")))try{const a=w(d);if("object"===typeof a)return a[e]}catch(a){y(a)}},setDatum:(e,d,a,l)=>{a=a??
"myt";f(()=>{const u=h.getData(a);u[e]=d;b(a,JSON.stringify(u))},l,a+"___"+e)},removeDatum:(e,d,a)=>{d=d??"myt";f(()=>{const l=h.getData(d);delete l[e];b(d,JSON.stringify(l))},a,d+"___"+e)},hasData:e=>null!=k(e??"myt"),getData:e=>{if(e=k(e??"myt"))try{return w(e)}catch(d){y(d)}return{}},setData:(e,d,a)=>{d=d??"myt";e??={};return"object"===typeof e?(f(()=>{b(d,JSON.stringify(e))},a,d),!0):!1},removeData:(e,d)=>{e=e??"myt";f(()=>{c(e)},d,e)},getLength:()=>r.length,getKey:r.key.bind(r),getItem:k,setItem:b,
removeItem:c,clear:g,get:k,set:b,remove:c,clearAll:g}})(myt);
(q=>{const y=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;q.URI=new JS.Class("URI",{initialize:function(k,b){k&&this.parse(k,b)},setSource:function(k){this.source=k},setProtocol:function(k){this.protocol=
k},setAuthority:function(k){this.authority=k},setUserInfo:function(k){this.userInfo=k},setUser:function(k){this.user=k},setPassword:function(k){this.password=k},setHost:function(k){this.host=k},setPort:function(k){this.port=k},setRelative:function(k){this.relative=k},setPath:function(k){this.path=k},setDirectory:function(k){this.directory=k},setFile:function(k){this.file=k},setQuery:function(k){this.query=k},setAnchor:function(k){this.anchor=k},parse:function(k,b){const c=this,[g,f,h,e,d,a,l,u,n,
p,t,z,F,I]=(b?r:w).exec(k)??[];c.setSource(g??"");c.setProtocol(f??"");c.setAuthority(h??"");c.setUserInfo(e??"");c.setUser(d??"");c.setPassword(a??"");c.setHost(l??"");c.setPort(u??"");c.setRelative(n??"");c.setPath(p??"");c.setDirectory(t??"");c.setFile(z??"");c.setQuery(F??"");c.setAnchor(I??"");c.queryPairs={};c.query.replace(y,(L,A,D)=>{A&&(c.queryPairs[A]=D)})},decodeQueryParam:k=>decodeURIComponent(k).split("+").join(" "),getQuery:function(){var k=this.queryPairs;const b=[];for(const c in k)b.push(c+
"="+encodeURIComponent(this.getQueryParam(c)));k=b.join("&");return 0<k.length?"?"+k:k},getQueryParam:function(k){k=this.queryPairs[k];return null==k?void 0:this.decodeQueryParam(k)},setQueryParam:function(k,b){this.queryPairs[encodeURIComponent(k)]=encodeURIComponent(b)},removeQueryParam:function(k){delete this.queryPairs[k]},getPathParts:function(k){const b=this.path.split("/");if(!k)for(k=b.length;k;)0===b[--k].length&&b.splice(k,1);return b},toString:function(k){const b=this.path;k=k?this.query?
"?"+this.query:"":this.getQuery();const c=this.anchor;let g=this.toStringThroughPort();b?g+=b:this.host&&(k||c)&&(g+="/");k&&(g+=k);c&&(g+="#"+c);return g},toStringThroughPort:function(){const k=this.protocol,b=this.host,c=this.userInfo,g=this.port;let f="";k&&(f+=k+"://");c&&b&&(f+=c+"@");b&&(f+=b,g&&(f+=":"+g));return f}})})(myt);
(q=>{const y=Math,{PI:w,cos:r,sin:k,sqrt:b}=y,c=(h,e,d,a,l,u)=>{"object"===typeof h&&(u=l,l=a,a=d,d=e,e=h.y,h=h.x);"object"===typeof d&&(u=d.height,l=d.width,a=d.y,d=d.x);return h>=d&&e>=a&&h<=d+l&&e<=a+u},g=(h,e,d,a,l)=>{h=d-h;e=a-e;e=h*h+e*e;return l?e:b(e)},f=(h,e,d,a,l)=>{null==l&&(l=6371);h=h*w/180;d=d*w/180;return l*y.acos(k(h)*k(d)+r(h)*r(d)*r(a*w/180-e*w/180))};q.Geometry={getClosestPointOnALineToAPoint:(h,e,d,a,l,u,n)=>{d-=h;a-=e;l=(d*(l-h)+a*(u-e))/(d*d+a*a);n&&(l=y.min(1,y.max(0,l)));return{x:h+
d*l,y:e+a*l}},isPointInPath:(h,e,d,a)=>{"object"===typeof h&&(a=d,d=e,e=h.y,h=h.x);if(c(h,e,d)&&(d=a.length,6<=d)){let l=!1,u=a[0],n=a[1],p,t;for(;d;)t=a[--d],p=a[--d],t>e!==n>e&&h<(u-p)*(e-t)/(n-t)+p&&(l=!l),u=p,n=t;return l}return!1},measureDistance:g,measureLatLngDistance:f,degreesToRadians:h=>h*w/180,radiansToDegrees:h=>180*h/w,rectContainsPoint:c,circleContainsPoint:(h,e,d,a,l)=>g(h,e,d,a,!0)<=l*l,circleContainsLatLng:(h,e,d,a,l,u)=>f(h,e,d,a,u)<=l,polarToCartesian:(h,e,d,a)=>{d??=0;a??=0;e%=
360;if(0===e)e=h,h=0;else if(90===e)e=0;else if(180===e)e=-h,h=0;else if(270===e)e=0,h=-h;else{const l=e*w/180;e=h*r(l);h*=k(l)}return[d+e,a+h]},cartesianToPolar:(h,e,d,a,l)=>{d??=0;a??=0;h-=d;a=e-a;e=b(h*h+a*a);a=y.atan2(a,h);0>a&&(a+=2*w);return[e,l?a:180*a/w]}}})(myt);
(q=>{const y=JS.Module,w=console.log,r=q.dumpStack;q.Observable=new y("Observable",{attachObserver:function(k,b,c){return k&&b&&c?(this.getObservers(c).push(b,k),!0):!1},detachObserver:function(k,b,c){if(k&&b&&c){var g=this.__obsbt;if(g&&(c=g[c])){g=!1;for(let f=c.length-2;0<=f;f-=2){const [h,e]=c.slice(f);k===e&&b===h&&(c.splice(f,2),g=!0)}return g}}return!1},detachAllObservers:function(){const k=this.__obsbt;if(k)for(const b in k){const c=k[b];for(let g=c.length-2;0<=g;g-=2){const [f,h]=c.slice(g);
h&&f&&("function"===typeof h.detachFrom&&h.detachFrom(this,f,b)||c.splice(g,2))}}},getObservers:function(k){let b;return(b=this.__obsbt??(this.__obsbt={}))[k]??(b[k]=[])},hasObservers:function(k){const b=this.__obsbt;return b?0<b[k]?.length:!1},createEvent:function(k,b){return{source:this,type:k,value:b}},fireEvent:function(k,b,c){if(c=c??(this.hasObservers(k)?this.__obsbt[k]:null)){const g={source:this,type:k,value:b},f=this.__aet??(this.__aet={});if(f[k])q.global.error.notify("warn","eventLoop",
"Abort refiring event:"+k,null,{observable:this,type:k,value:b});else{f[k]=!0;for(b=c.length-2;0<=b;b-=2){const [h,e]=c.slice(b);if(e&&h)try{if("function"===typeof h){if(h.call(e,g))break}else if(e[h](g))break}catch(d){r(d),w("Additional context",h,e)}}f[k]=!1}}}});q.Observer=new y("Observer",{valueFromEvent:k=>k&&"object"===typeof k&&k.type?k.value:k,syncTo:function(k,b,c,g,f){g??=c;try{this[b](k.createEvent(c,k.get(g)))}catch(h){r(h)}f||this.attachTo(k,b,c,f)},isAttachedTo:function(k,b,c){if(k&&
b&&c){var g=this.__obt;if(g&&(c=g[c]))for(g=c.length-2;0<=g;g-=2){const [f,h]=c.slice(g);if(k===h&&b===f)return!0}}return!1},getObservables:function(k){let b;return(b=this.__obt??(this.__obt={}))[k]??(b[k]=[])},hasObservables:function(k){const b=this.__obt;return b?0<b[k]?.length:!1},attachTo:function(k,b,c,g){if(k&&b&&c){const f=this.getObservables(c);if(g){const h=this,e=b;this.__methodNameCounter??(this.__methodNameCounter=0);b="__DO_ONCE_"+this.__methodNameCounter++;this[b]=d=>{h.detachFrom(k,
b,c);delete h[b];return h[e](d)}}if(k.attachObserver(this,b,c))return f.push(b,k),!0}return!1},detachFrom:function(k,b,c){if(k&&b&&c){var g=this.__obt;if(g&&(g=g[c])){let f=!1;for(let h=g.length-2;0<=h;h-=2){const [e,d]=g.slice(h);k===d&&b===e&&k.detachObserver(this,b,c)&&(g.splice(h,2),f=!0)}return f}}return!1},detachFromAllObservables:function(){var k=this.__obt;if(k)for(const [b,c]of Object.entries(k)){for(k=c.length-2;0<=k;k-=2){const [g,f]=c.slice(k);f.detachObserver(this,g,b)}c.length=0}},constrain:function(k,
b){if(k&&b){const g=b.length;if(0!==g%2)w("Observables uneven",this);else{var c;const f=(c=this.__cbmn??(this.__cbmn={}))[k]??(c[k]=[]);if(0<f.length)w("Constraint exists for "+k+" on "+this);else{for(c=0;c<g;c+=2){const [h,e]=b.slice(c);h&&e&&(this.attachTo(h,k,e),f.push(h,e))}try{this[k]()}catch(h){r(h)}}}}},releaseConstraint:function(k){if(k){var b=this.__cbmn;if(b&&(b=b[k])){for(let c=b.length;0<=c;c-=2){const [g,f]=b.slice(c);this.detachFrom(g,k,f)}b.length=0}}},releaseAllConstraints:function(){const k=
this.__cbmn;if(k)for(const b in k)this.releaseConstraint(b)}})})(myt);(q=>{const y=console.warn,w=q.global=new JS.Singleton("Global",{include:[q.Observable],initialize:()=>{},register:(r,k)=>{w.hasOwnProperty(r)&&(y("Global key in use",r),w.unregister(r));w[r]=k;w.fireEvent("register"+r,k)},unregister:r=>{if(w.hasOwnProperty(r)){const k=w[r];delete w[r];w.fireEvent("unregister"+r,k)}else y("Global key not in use",r)}})})(myt);
(q=>{let y;new JS.Singleton("GlobalError",{include:[q.Observable],initialize:function(){y=this;y.setStackTraceLimit(50);y.setConsoleLogging(!0);q.global.register("error",y)},setConsoleLogging:w=>{y.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=y.stackTraceLimit=w},notify:(w,r,k,b,c)=>{b??=Error(k??r);b=b.stack??b.stacktrace;y.fireEvent(r??"error",{msg:k,stacktrace:b,...c});if(y.consoleLogging&&w)console[w](b)}})})(myt);
(q=>{const y=global,w=y.getComputedStyle,r=document,k=Math.max,b=f=>{const {zIndex:h,opacity:e}=w(f);if("auto"===h){if(1===parseInt(e,10)){let d=0;f=f.childNodes;let a=f.length;for(;a;){const l=f[--a];1===l.nodeType&&(d=k(d,b(l)))}return d}return 0}return parseInt(h,10)},c=(f,h)=>{const e=[];for(;f;){e.push(f);if(f===h)break;f=f.parentNode}return e},g=q.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(f,h,e)=>{f=r.createElement(f);for(const d in e)f[d]=e[d];for(const d in h)f.style[d]=
h[d];return f},isDomElementVisible:f=>{if("INPUT"!==f.nodeName||"hidden"!==f.type)for(;f;){if(f===r)return!0;const {display:h,visibility:e}=w(f);if("none"===h||"hidden"===e)break;f=f.parentNode}return!1},getZIndexRelativeToAncestor:(f,h)=>{if(f&&h)for(f=c(f,h),h=f.length-1;h;){const e=w(f[--h]),d=e.zIndex,a="auto"===d;if(0===h||!a||1!==parseInt(e.opacity,10))return a?0:parseInt(d,10)}return 0},getAncestorArray:c,getHighestZIndex:b,getRelativePosition:(f,h)=>{if(f){let e=0,d=0;for(;f&&"BODY"!==f.nodeName&&
f!==h;)if(e+=f.offsetLeft,d+=f.offsetTop,(f=f.offsetParent)&&"BODY"!==f.nodeName){const {borderLeftWidth:a,borderTopWidth:l}=w(f);e+=parseInt(a,10)-f.scrollLeft;d+=parseInt(l,10)-f.scrollTop}return{x:e,y:d}}},getTruePosition:f=>{if(f)return f=f.getBoundingClientRect(),f.left+=y.scrollX,f.top+=y.scrollY,f},simulateDomEvent:(f,h,e)=>{if(f){const d={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},a={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(e)for(const u in e)d[u]=e[u];let l;for(const u in a)if(a[u].test(h)){l=u;break}if(!l)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(r.createEvent)e=r.createEvent(l),"HTMLEvents"===l?e.initEvent(h,d.bubbles,d.cancelable):e.initMouseEvent(h,d.bubbles,d.cancelable,r.defaultView,d.button,d.pointerX,d.pointerY,d.pointerX,d.pointerY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,null),f.dispatchEvent(e);
else{d.clientX=d.pointerX;d.clientY=d.pointerY;e=r.createEventObject();for(const u in d)e[u]=d[u];f.fireEvent("on"+h,e)}}},getScrollbarSize:q.memoize(()=>{const f=r.body,h=g.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});f.appendChild(h);const e=h.offsetWidth-h.clientWidth;f.removeChild(h);return e})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(f){if(Array.isArray(f)){const [h,
e]=f;this.__oE=h;this.__iE=e;this.__iS=e.style;this.__oS=h.style;e.model=h.model=this}else this.__oE=this.__iE=f,this.__iS=this.__oS=f.style,f.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(f){this.__iE.className=this.domClass=f},addDomClass:function(f){const h=this.__iE.className;this.setDomClass((h?
h+" ":"")+f)},removeDomClass:function(f){var h=this.__iE.className;if(h){h=h.split(" ");let e=h.length;for(;e;)h[--e]===f&&h.splice(e,1);this.setDomClass(h.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(f){this.__iE.id=this.domId=f},setZIndex:function(f){this.__oS.zIndex=f},setStyleProperty:function(f,h){this.__iS[f]=h},getPagePosition:function(f){return g["get"+(f?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){g.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return b(this.__iE)},getHighestChildZIndex:function(f){const h=this.__iE.childNodes;let e=h.length,d=0;for(;e;){const a=h[--e];1===a.nodeType&&a!==f&&(d=k(d,b(a)))}return d},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(f,h){(h?this.__iE:this.__oE).scrollTop=f||0}})})(myt);
(q=>{let y;const w=k=>{for(;k.lastChild;)k=k.lastChild;return k},r=(k,b)=>{y.lastTraversalWasForward=k;let c=document.body,g=c;var f=document.activeElement;let h=g,e;const d=k?"getNextFocus":"getPrevFocus";f&&(h=g=f,(f=g.model)??(f=y.findModelForDomElement(g)),f&&(b=f.getFocusTrap(b))&&(c=b.getIDE()));for(;h;){if(h.model&&h.model[d]&&(e=h.model[d]()))h=e.getIDE();else if(k)if(h.firstChild)h=h.firstChild;else{if(h===c)return g.model;if(h.nextSibling)h=h.nextSibling;else for(;h&&(h=h.parentNode,h!==
c);)if(h.nextSibling){h=h.nextSibling;break}}else h=h===c?w(c):h.previousSibling?w(h.previousSibling):h.parentNode;if(h===g)return g.model;if(1===h.nodeType)if((f=h.model)&&f instanceof q.View){if(f.isFocusable())return f}else if(b=h.nodeName,!("A"!==b&&"AREA"!==b&&"INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b&&"BUTTON"!==b||h.disabled||isNaN(h.tabIndex))&&q.DomElementProxy.isDomElementVisible(h)&&(f=y.findModelForDomElement(h),!f?.searchAncestorsOrSelf(a=>!0===a.maskFocus))){h.focus();y.focusedDom=h;
break}}};new JS.Singleton("GlobalFocus",{include:[q.Observable],initialize:function(){y=this;y.lastTraversalWasForward=!0;q.global.register("focus",y)},setFocusedView:k=>{if(y.focusedView!==k){y.prevFocusedView=y.focusedView;if(y.focusedView=k)y.focusedDom=null;y.fireEvent("focused",k)}},notifyFocus:k=>{y.focusedView!==k&&y.setFocusedView(k)},notifyBlur:k=>{y.focusedView===k&&y.setFocusedView(null)},clear:()=>{y.focusedView?y.focusedView.blur():y.focusedDom&&(y.focusedDom.blur(),y.focusedDom=null)},
next:k=>{r(!0,k)?.focus()},prev:k=>{r(!1,k)?.focus()},findModelForDomElement:k=>{for(;k;){let b=k.model;if(b&&b instanceof q.View)return b;k=k.parentNode}}})})(myt);
(q=>{const y=JS.Module,w=q.global,r=w.focus,k=()=>({source:null,type:null,value:null}),b=l=>{l=l.value??l;return(l.target??l.srcElement).model},c=q.KeyObservable=new y("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:k(),getKeyFromEvent:l=>l.value.key,getCodeFromEvent:l=>l.value.code,isEnterKeyEvent:l=>l.value.code===w.keys.CODE_ENTER,isEscKeyEvent:l=>l.value.code===w.keys.CODE_ESC,isShiftKeyEvent:l=>w.keys.isShiftCode(l.value.code)},createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,
u,n,c)??this.callSuper(l,u,n)}}),g=q.MouseObservable=new y("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:k(),getMouseFromEvent:l=>({x:l.value.pageX,y:l.value.pageY}),getMouseFromEventRelativeToView:(l,u)=>{u=u.getPagePosition();l=g.getMouseFromEvent(l);l.x-=u.x;l.y-=u.y;return l}},createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,u,n,g,!0)??this.callSuper(l,u,n)}}),f=q.ScrollObservable=
new y("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:k(),getScrollFromEvent:l=>{const {scrollLeft:u,scrollTop:n}=b(l);return{x:u,y:n}}},createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,u,n,f)??this.callSuper(l,u,n)}}),h=q.TouchObservable=new y("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:k()},createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,u,n,h,!1)??this.callSuper(l,u,n)}}),e=q.FocusObservable=
new y("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:k()},initNode:function(l,u){this.focusable=!1;this.focusIndicator=!0;this.callSuper(l,u)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(l){this.focused!==l&&(this.focused=l,this.inited&&(this.fireEvent("focused",l),l?r.notifyFocus(this):r.notifyBlur(this)))},setFocusable:function(l){if(this.focusable!==l){const u=this.focusable;(this.focusable=l)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):u&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",l)}},setFocusIndicator:function(l){this.focusIndicator!==l&&(this.focusIndicator=l,this.focused&&(l?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(r.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(l=>!0===l.maskFocus)},focus:function(l){this.isFocusable()&&this.getIDE().focus({preventScroll:l})},blur:function(){this.getIDE().blur()},__doFocus:function(l){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(l){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const l=this.getIDS();l.outlineWidth="thin";l.outlineColor="#8bf";l.outlineStyle="solid";l.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(l,u,n){if(e.EVENT_TYPES[n]){const p=this;return t=>{t??=window.event;if(p._ignoreFocus)t.cancelBubble=!0,t.stopPropagation?.(),t.preventDefault();
else{var z=e.EVENT;z.source=p;z.type=t.type;z.value=t;l[u](z)||(t.cancelBubble=!0,t.stopPropagation?.());z.source=void 0}}}return this.callSuper(l,u,n)}}),d=q.InputObservable=new y("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:k()},createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,u,n,d)??this.callSuper(l,u,n)}}),a=q.DragDropObservable=new y("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:k()},
createDomHandler:function(l,u,n){return this.createStandardDomHandler(l,u,n,a,!0)??this.callSuper(l,u,n)}});q.DomObservable=new y("DomObservable",{attachDomObserver:function(l,u,n,p,t){if(l&&u&&n){p=!!p;const z=this.createDomHandler(l,u,n);if(z){const F=this.__dobsbt??(this.__dobsbt={}),I=F[n];I?I.push(l,u,z,p):F[n]=[l,u,z,p];q.addEventListener(this.getDomElementForDomObservable(n),n,z,p,t);return!0}}return!1},getDomElementForDomObservable:function(l){return this.getIDE()},createDomHandler:(l,u,n)=>
null,createStandardDomHandler:function(l,u,n,p,t){if(p.EVENT_TYPES[n]){const z=this,F=p.EVENT;return I=>{I??=window.event;F.source=z;F.type=I.type;F.value=I;l[u](F)||(I.cancelBubble=!0,I.stopPropagation?.(),t&&I.preventDefault());F.source=void 0}}},detachDomObserver:function(l,u,n,p){if(l&&u&&n){p=!!p;var t=this.__dobsbt;if(t&&(t=t[n])){const z=this.getDomElementForDomObservable(n);let F=!1;for(let I=t.length-4;0<=I;I-=4){const [L,A,D,v]=t.slice(I,I+4);l===L&&u===A&&p===v&&(z&&q.removeEventListener(z,
n,D,p),t.splice(I,4),F=!0)}return F}}return!1},detachAllDomObservers:function(){var l=this.__dobsbt;if(l)for(const [u,n]of Object.entries(l)){for(l=n.length-2;0<=l;l-=4){const [p,t]=n.slice(l);q.removeEventListener(this.getDomElementForDomObservable(u),u,p,t)}n.length=0}}});q.DomObserver=new y("DomObserver",{extend:{getSourceViewFromEvent:b},attachToDom:function(l,u,n,p,t){if(l&&u&&n){p=!!p;let z;const F=(z=this.__dobt??(this.__dobt={}))[n]??(z[n]=[]);l.attachDomObserver(this,u,n,p,t)&&F.push(p,u,
l)}},detachFromDom:function(l,u,n,p){if(l&&u&&n){p=!!p;var t=this.__dobt;if(t&&(t=t[n])){let z=!1;for(let F=t.length-3;0<=F;F-=3){const [I,L,A]=t.slice(F);l===A&&u===L&&p===I&&l.detachDomObserver(this,u,n,p)&&(t.splice(F,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var l=this.__dobt;if(l)for(const [u,n]of Object.entries(l)){for(l=n.length-3;0<=l;l-=3){const [p,t,z]=n.slice(l);z.detachDomObserver(this,t,u,p)}n.length=0}}})})(myt);
(q=>{let y;const {KeyObservable:w,global:r}=q,k=r.focus,b=w.getCodeFromEvent,c=new Set,g="Firefox"===BrowserDetect.browser,f=g?"OSLeft":"MetaLeft",h=g?"OSRight":"MetaRight",e=()=>c.has("ShiftLeft")||c.has("ShiftRight"),d=()=>c.has("ControlLeft")||c.has("ControlRight"),a=()=>c.has("AltLeft")||c.has("AltRight"),l=()=>c.has(f)||c.has(h),u=(p,t)=>{switch(p){case "Backspace":return p=t.nodeName,!("TEXTAREA"===p||"INPUT"===p&&("text"===t.type||"number"===t.type||"password"===t.type)||"DIV"===p&&"true"===
t.contentEditable&&t.firstChild);case "Tab":return!0}return!1},n=(p,t)=>{["keydown","keypress","keyup"].forEach(z=>{y[t](p,"__hndl_"+z,z)})};new JS.Singleton("GlobalKeys",{include:[q.DomElementProxy,q.DomObservable,q.DomObserver,w,q.Observable,q.Observer],initialize:function(){r.register("keys",y=this);y.CODE_ENTER="Enter";y.CODE_ESC="Escape";y.CODE_SPACE="Space";y.CODE_ARROW_LEFT="ArrowLeft";y.CODE_ARROW_UP="ArrowUp";y.CODE_ARROW_RIGHT="ArrowRight";y.CODE_ARROW_DOWN="ArrowDown";y.CODE_DELETE="Delete";
y.CODE_BACKSPACE="Backspace";"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(p=>{y["CODE_"+p]="Key"+p});"1234567890".split("").forEach(p=>{y["CODE_"+p]="Digit"+p});y.ARROW_KEYS=[y.CODE_ARROW_LEFT,y.CODE_ARROW_UP,y.CODE_ARROW_RIGHT,y.CODE_ARROW_DOWN];y.LIST_KEYS=[y.CODE_ENTER,y.CODE_SPACE,y.CODE_ESC,...y.ARROW_KEYS];y.setDomElement(document);y.attachTo(k,"__hndl_focused","focused");n(y,"attachToDom");global.onblur=()=>{c.clear()}},isShiftKeyDown:e,isControlKeyDown:d,isAltKeyDown:a,isMetaKeyDown:l,isShiftCode:p=>
"ShiftLeft"===p||"ShiftRight"===p,isControlCode:p=>"ControlLeft"===p||"ControlRight"===p,isAltCode:p=>"AltLeft"===p||"AltRight"===p,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?l():d(),ignoreFocusTrap:()=>a(),__hndl_focused:p=>{(p=p.value)?(n(y,"detachFromDom"),n(p,"attachToDom")):((p=k.prevFocusedView)&&n(p,"detachFromDom"),n(y,"attachToDom"))},__hndl_keydown:p=>{const t=b(p);p=p.value;u(t,p.target)&&p.preventDefault();l()&&"ShiftLeft"!==t&&"ShiftRight"!==t&&"ControlLeft"!==t&&"ControlRight"!==
t&&"AltLeft"!==t&&"AltRight"!==t?(y.fireEvent("keydown",t),y.fireEvent("keyup",t)):(c.add(t),"Tab"===t&&(p=a(),e()?k.prev(p):k.next(p)),y.fireEvent("keydown",t))},__hndl_keypress:p=>{y.fireEvent("keypress",b(p))},__hndl_keyup:p=>{const t=b(p);p=p.value;u(t,p.target)&&p.preventDefault();c.delete(t);y.fireEvent("keyup",t)}})})(myt);
(q=>{const y=JS.Module,w=Math.max,r=(e,d,a,l,u=0)=>{const n=e.length;for(let p=a;u<n;u++)f(e[u],d,p),l&&(p+=a)},k=(e,d,a,l=0)=>{const u=e.length;for(let n=d;l<u;)e[l++].crossPos+=n,a&&(n+=d)},b=(e,d)=>d?e.getFlexBasisWidth():e.getFlexBasisHeight(),c=(e,d,a,l)=>{e[d?"setWidthViaFlex":"setHeightViaFlex"]((l?b(e,d):0)+a)},g=(e,d,a)=>{e[d?"setXViaFlex":"setYViaFlex"](a,!1)},f=(e,d,a)=>{e[d?"setXViaFlex":"setYViaFlex"](a,!0)},h=(e,d,a)=>{e[d]!==a&&(e[d]=a,e.inited&&e.fireEvent(d,a),e.updateFlexboxLayout())};
q.FlexboxSupport=new y("FlexboxSupport",{initNode:function(e,d){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(e,d);this.updateFlexboxLayout()},setWidth:function(e){const d=this.width;this.callSuper(e);d!==this.width&&this.updateFlexboxLayout()},setHeight:function(e){const d=this.height;this.callSuper(e);d!==this.height&&this.updateFlexboxLayout()},
setDirection:function(e){h(this,"direction",e)},setWrap:function(e){h(this,"wrap",e)},setJustifyContent:function(e){h(this,"justifyContent",e)},setAlignItems:function(e){h(this,"alignItems",e)},setAlignContent:function(e){h(this,"alignContent",e)},setRowGap:function(e){h(this,"rowGap",w(0,e))},setColumnGap:function(e){h(this,"columnGap",w(0,e))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(e){this.set("totalBasisWidth",
e,!0)},setTotalBasisHeight:function(e){this.set("totalBasisHeight",e,!0)},ignoreSubviewForFlex:function(e){return e&&"function"===typeof e.ignoreFlex?e.ignoreFlex():!0},setFlexboxPaused:function(e,d){this.__flexboxPaused!==e&&((this.__flexboxPaused=e)||d||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(e){this.callSuper(e);e&&!this.ignoreSubviewForFlex(e)&&this.updateFlexboxLayout()},subviewRemoved:function(e){this.callSuper(e);!e||this.ignoreSubviewForFlex(e)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(e){this.callSuper(e);e&&this.ignoreSubviewForFlex(e)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(e){return e?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(e){return e?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(e){this._updateAgain=e},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const e=this;if(e.isOKToUpdateLayout()){var d=e.getSubviewsInLexicalOrder().filter(p=>!0!==e.ignoreSubviewForFlex(p)&&!0===p.visible),a=d.length;if(0<a){e.__isUpdatingFlexboxLayout=!0;var l=e.direction;const p=l.startsWith("row"),t=!p;var u=e.getWidthForFlexboxLayout(),n=e.getHeightForFlexboxLayout();const z=p?e.columnGap:e.rowGap,F=p?u:n,I=p?e.rowGap:e.columnGap;
n=p?n:u;const L=e.isWrapNotAllowed(),A=e.justifyContent,D=e.alignItems;u=L?"stretch":e.alignContent;l.endsWith("Reverse")&&d.reverse();let v=0,m=0,x=0,B=0,E={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:x,crossSize:0};l=[E];for(let J=0;J<a;){const K=d[J++],M=b(K,p),T=K.getShrink(),U=K.getGrow();!L&&0<E.items.length&&v+(0===B?0:z)+M>F&&(E.extraSize=F-v,x+=E.crossSize+I,m=w(m,v),B=v=0,E={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:x,crossSize:0},l.push(E));
0!==B&&(v+=z);0<T&&0<M&&(E.shrinkCount+=T,E.shrinkBasis+=M*T);0<U&&(E.growCount+=U);E.crossSize=w(E.crossSize,b(K,t));g(K,p,v);c(K,p,M);v+=M;E.items.push(K);B++}E.extraSize=F-v;x+=E.crossSize;m=w(m,v);if(e.isCompactOnMainAxis(p)){let J=l.reduce((K,M)=>null==K?M.extraSize:Math.min(K,M.extraSize),null);0!==J&&l.forEach(K=>{K.extraSize-=J})}e[p?"setTotalBasisWidth":"setTotalBasisHeight"](m);e[p?"setTotalBasisHeight":"setTotalBasisWidth"](x);d=l.length;1<d&&"wrapReverse"===e.wrap&&(l.forEach(J=>{J.crossPos=
x-(J.crossPos+J.crossSize)}),l.reverse());if(!e.isCompactOnCrossAxis(p))switch(a=n-x,u){default:case "start":break;case "end":k(l,a,!1);break;case "center":k(l,a/2,!1);break;case "spaceBetween":1<d&&k(l,a/(d-1),!0,1);break;case "spaceAround":a<=I?k(l,a/2,!1):(k(l,I/2,!1),a-=I,k(l,a/(2*d),!0),k(l,a/(2*d),!0,1));break;case "spaceEvenly":a<=2*I?k(l,a/2,!1):(k(l,I,!1),k(l,(a-2*I)/(d+1),!0));break;case "stretch":const J=a/d;let K=0;l.forEach(M=>{M.crossSize+=J;M.crossPos+=K;K+=J})}l.forEach(J=>{const K=
J.items;let M=J.extraSize;if(0<M)if(0<J.growCount){const P=M/J.growCount;let V=0;K.forEach(R=>{0<V&&f(R,p,V);const da=R.getGrow()*P;0<da&&(c(R,p,da,!0),V+=da)})}else{const P=K.length;switch(A){default:case "start":break;case "end":r(K,p,M,!1);break;case "center":r(K,p,M/2,!1);break;case "spaceBetween":1<P&&r(K,p,M/(P-1),!0,1);break;case "spaceAround":M<=z?r(K,p,M/2,!1):(r(K,p,z/2,!1),M-=z,r(K,p,M/(2*P),!0),r(K,p,M/(2*P),!0,1));break;case "spaceEvenly":M<=2*z?r(K,p,M/2,!1):(r(K,p,z,!1),M-=2*z,r(K,
p,M/(P+1),!0))}}else if(0>M&&0<J.shrinkCount){const P=J.shrinkBasis;let V=0;K.forEach(R=>{0>V&&f(R,p,V);const da=R.getShrink()*b(R,p)/P*w(M,-P);0>da&&(c(R,p,da,!0),V+=da)})}let T=!1;const U=J.crossSize,X=J.crossPos;K.forEach(P=>{switch(P.getAlignSelf()||D){case "start":g(P,t,X);c(P,t,b(P,t),!1);break;case "end":g(P,t,X+U-b(P,t));c(P,t,b(P,t),!1);break;case "center":g(P,t,X+(U-b(P,t))/2);c(P,t,b(P,t),!1);break;case "baseline":T=!0;g(P,t,X+(U-b(P,t))/2+P.getFlexBaselineOffset(p));c(P,t,b(P,t),!1);break;
default:g(P,t,X),c(P,t,U,!1)}});T&&e.updateFlexboxLayoutBaselineAdjustment(K,p,X)});e.__isUpdatingFlexboxLayout=!1;e.isUpdateAgain()&&!e.__UPDATE_AGAIN_LOOP_PROTECTION&&(e.setUpdateAgain(!1),e.__UPDATE_AGAIN_LOOP_PROTECTION=!0,e.updateFlexboxLayout(),e.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else e.setTotalBasisWidth(0),e.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(e,d,a)=>{}});q.FlexboxChildSupport=new y("FlexboxChildSupport",{setVisible:function(e){this.visible!==e&&(this.callSuper(e),
this.updateFlexboxLayoutFromChild())},setXViaFlex(e,d){d&&(e+=this.x);this.x!==e&&(this.__isFlexUpdate=!0,this.setX(e),this.__isFlexUpdate=!1)},setYViaFlex(e,d){d&&(e+=this.y);this.y!==e&&(this.__isFlexUpdate=!0,this.setY(e),this.__isFlexUpdate=!1)},setWidth:function(e){const d=this.width!==e;d&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(e);d&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(e){this.width!==e&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=
!0,this.setWidth(e),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(e){const d=this.height!==e;d&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(e);d&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(e){this.height!==e&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(e),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:e=>
0,setIgnoreFlex:function(e){this.__ignoreFlex!==e&&(this.__ignoreFlex=e,this.inited&&(this.fireEvent("ignoreFlex",e),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(e){e=w(0,e);this.grow!==e&&(this.grow=e,this.inited&&(this.fireEvent("grow",e),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(e){e=w(0,e);this.shrink!==e&&(this.shrink=e,this.inited&&(this.fireEvent("shrink",e),
this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(e){this.alignSelf!==e&&(this.alignSelf=e,this.inited&&(this.fireEvent("alignSelf",e),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const e=this.alignSelf;return"auto"===e||""===e?null:e},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&
!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(q=>{const y=console.log,w=new Map,r=new Map,k=(f,h)=>h+f.charAt(0).toUpperCase()+f.slice(1),b=f=>r.get(f)??(r.set(f,k(f,"set")),r.get(f)),c=f=>w.get(f)??(w.set(f,k(f,"get")),w.get(f)),g=(f,h)=>{let e;for(const d in h){const a=h[d],l=b(d);if(l in f)f[l](a);else f[d]!==a&&(f[d]=a,(e??=!1!==f.inited&&f.fireEvent)&&f.fireEvent(d,a))}};q.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:b,generateGetterName:c,generateName:k,createSetterFunction:(f,h)=>{const e=b(h);f[e]&&y("Overwriting setter",
e);f[e]=function(d){this[h]!==d&&(this[h]=d,this.inited&&this.fireEvent(h,d))}},createGetterFunction:(f,h)=>{const e=c(h);f[e]&&y("Overwriting getter",e);f[e]=function(){return this[h]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(f,h){f?.forEach(e=>{this[e]=h[e];delete h[e]})},callSetters:function(f){var h=this.earlyAttrs,e=this.lateAttrs;if(h||e){f={...f};if(h){var d=h.length;for(var a=0;a<d;){const u=h[a++];u in f&&(this.set(u,f[u]),delete f[u])}}let l;if(e)for(l=[],h=e.length,d=0;d<h;)a=e[d++],a in f&&(l.push(a,f[a]),delete f[a]);g(this,f);if(l)for(e=l.length,f=0;f<e;)this.set(l[f++],l[f++])}else g(this,f)},get:function(f){const h=c(f);return h in self?this[h]():
this[f]},set:function(f,h,e){if(!e&&(e=b(f),e in this))return this[e](h);this[f]!==h&&(this[f]=h,!1!==this.inited&&this?.fireEvent(f,h))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var q=this.__meta__;if(q){var y=Object.keys(q);for(let w=y.length;0<w;)delete q[y[--w]]}q=Object.keys(this);for(y=q.length;0<y;)delete this[q[--y]];this.destroyed=!0}}});
(q=>{const {Class:y,Module:w}=JS,r=console.warn;let k;const b=(a,l)=>l?(k=a).__op??(k.__op=[]):a.__op;let c;const g=(a,l)=>l?(c=a).__actives??(c.__actives=[]):a.__actives,f=new y("AbstractPool",{include:[q.Destructible],initialize:()=>{},destroy:function(){const a=b(this);a&&(a.length=0);this.callSuper()},getInstance:function(){const a=b(this,!0);return a.length?a.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(a){b(this,!0).push(this.cleanInstance(a))},
cleanInstance:a=>{"function"===typeof a.clean&&a.clean();return a},destroyPooledInstances:function(){var a=b(this);if(a){let l=a.length;for(;l;){const u=a[--l];"function"===typeof u.destroy&&u.destroy()}}}}),h=q.SimplePool=new y("SimplePool",f,{initialize:function(a,l){this.callSuper();this.instanceClass=a??Object;this.instanceParent=l},createInstance:function(a){var l=this.instanceParent,u=this.instanceClass;return l?new u(l,a):new u}}),e=new w("TrackActives",{destroy:function(){const a=g(this);
a&&(a.length=0);this.callSuper()},getInstance:function(){const a=this.callSuper();g(this,!0).push(a);return a},putInstance:function(a){var l=g(this);if(l){const u=l.indexOf(a);if(-1<u){l.splice(u,1);this.callSuper(a);return}l="inactive"}else l="missing";r("Tried to put a "+l+" instance",a,this)},getActives:function(a){const l=g(this);if(l){if(a){const u=[],n=l.length;for(let p=0;n>p;){const t=l[p++];a.call(this,t)&&u.push(t)}return u}return l.slice()}return[]},putActives:function(){const a=g(this);
if(a){let l=a.length;for(;l;)this.putInstance(a[--l])}}}),d=q.TrackActivesPool=new y("TrackActivesPool",h,{include:[e]});q.TrackActivesMultiPool=new y("TrackActivesMultiPool",f,{initialize:function(a,l){this.callSuper();this.instanceClassesByKey=a;const u=this._poolsByClassName={},n=this.__pbk={};for(const p in a){const t=a[p];n[p]=u[t.__displayName]=new d(t,l)}},destroy:function(){const a=this.__pbk;for(const l in a)a[l].destroy();this.callSuper()},getInstance:function(){const a=arguments[0],l=this.__pbk[a];
if(l)return l.getInstance(arguments);r("No pool for key",a)},putInstance:function(a){const l=this._poolsByClassName[a.klass.__displayName];l?l.putInstance(a):r("No pool for obj",a)},destroyPooledInstances:function(){const a=this.__pbk;for(const l in a)a[l].destroyPooledInstances()},getActives:function(a){let l=[];const u=this.__pbk;for(const n in u)l.push(...u[n].getActives(a));return l},putActives:function(){const a=this.__pbk;for(const l in a)a[l].putActives()}});q.Reusable=new w("Reusable",{clean:()=>
{}})})(myt);
(q=>{const y=JS.Class,w=console.warn,r=[q.AccessorSupport,q.Destructible,q.Observable,q.Observer],k=(e,d)=>{if(d){const a=d.length;for(let l=0,u;a>l;)(u=d[l++])?e.extend(u):w("Missing mixin in",e.klass.__displayName)}e.inited=!1},b=(e,d)=>{if(d)for(;e;){if(d(e))return e;e=e.parent}},c=(e,d)=>{const a=d.name;void 0===e[a]?e[a]=d:w("Name in use",a)},g=(e,d)=>{const a=d.name;e[a]===d?delete e[a]:w("Name not in use",a)};let f;const h=e=>(f=e).__animPool??(f.__animPool=new q.TrackActivesPool(q.Animator,e));
q.Eventable=new y("Eventable",{include:r,initialize:function(e,d){k(this,d);this.init(e??{})},init:function(e){this.callSetters(e);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});q.Node=new y("Node",{include:r,extend:{getMatchingAncestorOrSelf:b,getMatchingAncestor:(e,d)=>b(e?e.parent:null,d),DEFAULT_PLACEMENT:"*"},initialize:function(e,d,a){k(this,a);this.initNode(e,d??{})},initNode:function(e,d){this.callSetters(d);
this.setParent(e);this.inited=!0},destroy:function(){const e=this.subnodes;this.isBeingDestroyed=!0;if(e)for(let d=e.length;0<d;)e[--d].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(e){this.placement=e},setDefaultPlacement:function(e){this.defaultPlacement=
e},setIgnorePlacement:function(e){this.ignorePlacement=e},setParent:function(e){if(e&&!this.ignorePlacement){var d=this.placement??e.defaultPlacement;d&&(e=e.determinePlacement(d,this))}if(this.parent!==e&&!e?.destroyed){if(d=this.parent){const a=d.getSubnodes().indexOf(this);-1<a&&(this.name&&g(d,this),d.subnodes.splice(a,1),d.subnodeRemoved(this))}if(this.parent=e)e.getSubnodes().push(this),this.name&&c(e,this),e.subnodeAdded(this);this.inited&&this.fireEvent("parent",e)}},setName:function(e){if(this.name!==
e){const d=this.parent;d&&this.name&&g(d,this);this.name=e;d&&e&&c(d,this)}},determinePlacement:function(e,d){let a=e.indexOf("."),l;0<=a&&(l=e.slice(a+1),e=e.slice(0,a));"*"===e&&(e=this.defaultPlacement)&&(a=e.indexOf("."),0<=a&&(l=e.slice(a+1)+(l?"."+l:""),e=e.slice(0,a)));return(e=this[e])?l?e.determinePlacement(l,d):e:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(e){if(e){if(e===this)return!0;if(this.parent)return this.getIDE&&
e.getIDE?e.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(e)}return!1},isAncestorOf:function(e){return e?e.isDescendantOf(this):!1},getLeastCommonAncestor:function(e){for(;e;){if(this.isDescendantOf(e))return e;e=e.parent}},searchAncestorsForClass:function(e){if(e)return this.searchAncestors(d=>d instanceof e)},searchAncestorsForModule:function(e){if(e)return this.searchAncestors(d=>d.isA(e))},searchAncestors:function(e){return b(this?this.parent:null,e)},searchAncestorsOrSelf:function(e){return b(this,
e)},getAncestors:function(){const e=[];let d=this;for(;d;)e.push(d),d=d.parent;return e},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:e=>{},subnodeRemoved:e=>{},animate:function(e){if(e){const d=h(this),a=d.getInstance({ignorePlacement:!0}),l=e.callback;delete e.callback;a.callSetters(e);a.next(u=>{d.putInstance(a)});l&&a.next(l);a.setRunning(!0);return a}},getActiveAnimators:function(e){if("string"===typeof e){const d=e;e=a=>a.attribute===d}return h(this).getActives(e)},
stopActiveAnimators:function(e,d=!1){e=this.getActiveAnimators(e);let a=e.length;if(0<a){const l=h(this);for(;a;){const u=e[--a];u.reset(d);d||l.putInstance(u)}}},doOnceOnIdle:function(e){this.attachTo(q.global.idle,e,"idle",!0)}})})(myt);
(q=>{let y=0,w=!1;const r=JS.Class,k=[],b=d=>{if(w!==d&&(w=d,!d)){for(d=k.length;d;){const a=k[--d];a.__deferredLayout=!1;a.update()}k.length=0}},c=(d,a,l,u)=>{const n=d.getSubviewIndex(a),p=d.subviews;-1<n&&(d=d.getSubviewIndex(l),p.splice(n,1),-1<d?(n<d&&--d,p.splice(d+(u?1:0),0,a)):u?p.push(a):p.unshift(a))},g=(d,a,l)=>{d[a]!==l&&(d[a]=l,d.inited&&(d.fireEvent(a,l),d.update()))},f=q.Layout=new r("Layout",q.Node,{extend:{incrementGlobalLock:()=>{1===++y&&b(!0)},decrementGlobalLock:()=>{0<y&&0===
--y&&b(!1)}},initNode:function(d,a){this.subviews=[];this.locked=!0;this.lockedCounter=1;const l=!0===a.locked;delete a.locked;this.callSuper(d,a);l||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(d){var a=this.parent;if(a!==d){const l=!this.locked;l&&(this.locked=!0);let u,n;if(a){u=this.subviews;for(n=u.length;n;)this.removeSubview(u[--n]);this.detachFrom(a,"__hndlPSA","subviewAdded");this.detachFrom(a,"__hndlPSR","subviewRemoved")}this.callSuper(d);
if(d=this.parent){u=d.getSubviews();n=0;for(a=u.length;a>n;)this.addSubview(u[n++]);this.attachTo(d,"__hndlPSA","subviewAdded");this.attachTo(d,"__hndlPSR","subviewRemoved")}l&&(this.locked=!1,this.inited&&d&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(k.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(d){return this.subviews.includes(d)},getSubviewIndex:function(d){return this.subviews.indexOf(d)},addSubview:function(d){this.ignore(d)||
(this.subviews.push(d),this.startMonitoringSubview(d),this.locked||this.update())},startMonitoringSubview:d=>{},startMonitoringAllSubviews:function(){const d=this.subviews;let a=d.length;for(;a;)this.startMonitoringSubview(d[--a])},removeSubview:function(d){if(this.ignore(d))return-1;const a=this.getSubviewIndex(d);-1<a&&(this.stopMonitoringSubview(d),this.subviews.splice(a,1),this.locked||this.update());return a},stopMonitoringSubview:d=>{},stopMonitoringAllSubviews:function(){const d=this.subviews;
let a=d.length;for(;a;)this.stopMonitoringSubview(d[--a])},ignore:d=>d.ignoreLayout,__hndlPSA:function(d){d=d.value;d.parent===this.parent&&this.addSubview(d)},__hndlPSR:function(d){d=d.value;d.parent===this.parent&&this.removeSubview(d)},sortSubviews:function(d){this.subviews.sort(d)},moveSubviewBefore:function(d,a){c(this,d,a,!1)},moveSubviewAfter:function(d,a){c(this,d,a,!0)}});var h=q.ConstantLayout=new r("ConstantLayout",f,{setTargetAttrName:function(d){this.setterName=q.AccessorSupport.generateSetterName(d);
g(this,"targetAttrName",d)},setTargetValue:function(d){g(this,"targetValue",d)},update:function(){if(this.canUpdate()){const d=this.setterName,a=this.targetValue,l=this.subviews,u=l.length;if(d)for(let n=0;u>n;)l[n++][d](a)}}});h=q.VariableLayout=new r("VariableLayout",h,{initNode:function(d,a){this.collapseParent=this.reverse=!1;this.callSuper(d,a)},setCollapseParent:function(d){g(this,"collapseParent",d)},setReverse:function(d){g(this,"reverse",d)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const a=this.setterName,l=this.subviews;var d=l.length;let u=this.targetValue,n,p=0;if(this.reverse)for(n=d;n;)d=l[--n],this.skipSubview(d)||(u=this.updateSubview(++p,d,a,u));else for(n=0;d>n;){const t=l[n++];this.skipSubview(t)||(u=this.updateSubview(++p,t,a,u))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(a,u);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(d){this.attachTo(d,
"update","visible")},stopMonitoringSubview:function(d){this.detachFrom(d,"update","visible")},updateSubview:(d,a,l,u)=>{a[l](u);return u},skipSubview:d=>!d.visible,updateParent:(d,a)=>{}});const e=q.SpacedLayout=new r("SpacedLayout",h,{initNode:function(d,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(d,a)},setTargetAttrName:function(d){if(this.targetAttrName!==
d){const a="y"===d,l=this.inited;l&&this.stopMonitoringAllSubviews();this.measureAttrName=a?"boundsHeight":"boundsWidth";this.measureAttrBaseName=a?"height":"width";this.parentSetterName=a?"setHeight":"setWidth";l&&this.startMonitoringAllSubviews();this.callSuper(d)}},setNoAddSubviewOptimization:function(d){this.noAddSubviewOptimization=d},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){g(this,"spacing",d)},setOutset:function(d){g(this,
"outset",d)},addSubview:function(d){const a=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(d);this.locked=a},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},updateSubview:function(d,a,l,u){d=a[this.measureAttrName];a[l](u+(d-a[this.measureAttrBaseName])/2);return u+d+this.spacing},updateParent:function(d,a){this.parent[this.parentSetterName](a+
this.outset-this.spacing)}});q.ResizeLayout=new r("ResizeLayout",e,{setCollapseParent:d=>{},setTargetAttrName:function(d){if(this.targetAttrName!==d){if(this.inited){const a="x"===d;this.stopMonitoringParent(a?"height":"width");this.startMonitoringParent(a?"width":"height")}this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const a="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(a);this.callSuper(d);this.parent&&this.startMonitoringParent(a)}},startMonitoringParent:function(d){this.attachTo(this.parent,
"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},doBeforeUpdate:function(){const d=this.measureAttrName,a=this.subviews;let l=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,u=a.length,n=0,p=0;for(;u;){const t=a[--u];this.skipSubview(t)||(++n,0<t.layoutHint?p+=t.layoutHint:l-=t[d])}0!==n&&(this.remainder=l-=(n-1)*this.spacing,this.resizeSum=p,this.scalingFactor=l/p,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===d?
"setWidth":"setHeight")},updateSubview:function(d,a,l,u){var n=a.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,a[this.measureSetter](n));return this.callSuper(d,a,l,u)},startMonitoringSubview:function(d){0<d.layoutHint||this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update","visible")},stopMonitoringSubview:function(d){0<d.layoutHint||this.detachFrom(d,"update",
this.measureAttrName);this.detachFrom(d,"update","visible")},updateParent:(d,a)=>{}});q.AlignedLayout=new r("AlignedLayout",h,{initNode:function(d,a){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(d,a)},setTargetAttrName:function(d){if(this.targetAttrName!==d){const a="y"===d,l=this.inited;l&&this.stopMonitoringAllSubviews();this.measureAttrName=
a?"boundsHeight":"boundsWidth";this.measureAttrBaseName=a?"height":"width";this.parentSetterName=a?"setHeight":"setWidth";l&&this.startMonitoringAllSubviews();this.callSuper(d)}},setAlign:function(d){if(this.align!==d){this.align=d;const a=this.locked;this.locked=!0;this.setTargetAttrName("middle"===d||"bottom"===d||"top"===d?"y":"x");this.locked=a;this.inited&&(this.fireEvent("align",d),this.update())}},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.callSuper(d)},
stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.callSuper(d)},doBeforeUpdate:function(){const d=this.measureAttrName,a=this.subviews;let l=0,u=a.length;for(;u;){const n=a[--u];this.skipSubview(n)||(l=l>n[d]?l:n[d])}this.setTargetValue(l)},updateSubview:function(d,a,l,u){switch(this.align){case "center":case "middle":a[l]((u-a[this.measureAttrName])/2);break;case "right":case "bottom":a[l](u-a[this.measureAttrName]);break;default:a[l](0)}return u},updateParent:function(d,
a){this.parent[this.parentSetterName](a)}});q.WrappingLayout=new r("WrappingLayout",h,{initNode:function(d,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(d,a)},
setTargetAttrName:function(d){if(this.targetAttrName!==d){const a="y"===d,l=this.inited;l&&this.stopMonitoringAllSubviews();this.measureAttrName=a?"boundsHeight":"boundsWidth";const u=this.measureAttrBaseName=a?"height":"width";this.otherMeasureAttrName=a?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=a?"width":"height";this.parentSetterName=a?"setWidth":"setHeight";this.otherSetterName=a?"setX":"setY";l&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(u));
this.callSuper(d)}},setParent:function(d){if(this.parent!==d){const a="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(a?"height":"width");this.callSuper(d);this.parent&&this.startMonitoringParent(a?"height":"width")}},setAxis:function(d){this.setTargetAttrName(this.axis=d)},setInset:function(d){this.setTargetValue(this.inset=d)},setSpacing:function(d){g(this,"spacing",d)},setOutset:function(d){g(this,"outset",d)},setLineSpacing:function(d){g(this,"lineSpacing",d)},setLineInset:function(d){g(this,
"lineInset",d)},setLineOutset:function(d){g(this,"lineOutset",d)},startMonitoringParent:function(d){this.attachTo(this.parent,"update",d)},stopMonitoringParent:function(d){this.detachFrom(this.parent,"update",d)},startMonitoringSubview:function(d){this.attachTo(d,"update",this.measureAttrName);this.attachTo(d,"update",this.otherMeasureAttrName);this.callSuper(d)},stopMonitoringSubview:function(d){this.detachFrom(d,"update",this.measureAttrName);this.detachFrom(d,"update",this.otherMeasureAttrName);
this.callSuper(d)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(d,a,l,u){d=a[this.measureAttrName];const n=a[this.otherMeasureAttrName];u+d>this.parentSizeLessOutset||"break"===a.layoutHint?(u=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);a[this.otherSetterName](this.linePos+
(n-a[this.otherMeasureAttrBaseName])/2);a[l](u+(d-a[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,u+d+this.outset);return u+d+this.spacing},updateParent:function(d,a){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});q.createFixedThresholdCounter(f,1,"locked")})(myt);
(q=>{const y=Math.round,w=q.DomElementProxy,r=q.Geometry.rectContainsPoint,k=(a,l)=>{const u=q.global.focus.focusedView,n=a.getIDE();if(u===a||u?.isDescendantOf(a))u._ignoreFocus=!0;const {scrollTop:p,scrollLeft:t}=n;l();u&&(u._ignoreFocus=!1,u.focus(!0));n.scrollTop=p;n.scrollLeft=t},b=(a,l,u,n)=>{if(l&&"object"===typeof l){if(n){var p=a.getLeastCommonAncestor(l)?.getIDE();if(p){const t=w.getZIndexRelativeToAncestor,z=u?-1:1;n=z*t(a.getODE(),p);p=z*t(l.getODE(),p);if(n<p)return!0;if(p<n)return!1}}a=
a.getODE().compareDocumentPosition(l.getODE());return u?2===a||10===a:4===a||20===a}return!1},c=a=>{a=a.getAncestors();let l=a.length,u=1,n=1;for(;l;){const p=a[--l];u*=p.scaleX||1;n*=p.scaleY||1;p.__effectiveScaleX=u;p.__effectiveScaleY=n}return{scaleX:u,scaleY:n}},g=(a,l,u)=>{const n=a.getODE();if(r(l,u,0,0,n.offsetWidth*a.__effectiveScaleX,n.offsetHeight*a.__effectiveScaleY)){if(a=a.parent){const p=a.getIDE();return g(a,l+(n.offsetLeft-p.scrollLeft)*a.__effectiveScaleX,u+(n.offsetTop-p.scrollTop)*
a.__effectiveScaleY)}return!0}return!1},f=a=>{switch(a.align){case "center":a.releaseConstraint("__doAlignCenter");break;case "right":a.releaseConstraint("__doAlignRight")}},h=a=>{const l=a.parent;if(l)switch(a.align){case "center":a.constrain("__doAlignCenter",[a,"width",a,"alignOffset",l,"width"]);break;case "right":a.constrain("__doAlignRight",[a,"width",a,"alignOffset",l,"width"]);break;case "left":a.setX(a.alignOffset||0)}},e=a=>{switch(a.valign){case "middle":a.releaseConstraint("__doValignMiddle");
break;case "bottom":a.releaseConstraint("__doValignBottom")}},d=a=>{const l=a.parent;if(l)switch(a.valign){case "middle":a.constrain("__doValignMiddle",[a,"height",a,"valignOffset",l,"height"]);break;case "bottom":a.constrain("__doValignBottom",[a,"height",a,"valignOffset",l,"height"]);break;case "top":a.setY(a.valignOffset||0)}};q.View=new JS.Class("View",q.Node,{include:[w,q.DomObservable,q.DomObserver,q.ScrollObservable,q.FocusObservable,q.KeyObservable,q.MouseObservable],extend:{retainFocusDuringDomUpdate:k},
initNode:function(a,l){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;l.tagName&&(this.tagName=l.tagName,delete l.tagName);this.setDomElement(this.createOurDomElement(a));const u=this.getODS();u.left=u.top="0px";this.callSuper(a,l);this.__updateBounds(this.width,this.height)},createOurDomElement:function(a){a=document.createElement(this.tagName??"div");a.style.position="absolute";let l;a.className=(l=this.klass).__cssClassName??(l.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));
return a},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(a){this.parent!==a&&(this.inited&&(f(this),e(this)),this.callSuper(a),this.align&&h(this),this.valign&&d(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},getSubviewsInLexicalOrder:function(){const a=[],l=this.getIDE().children,u=l.length;for(let n=0;n<u;){const p=l[n++].model;p?.parent===this&&a.push(p)}return a},
getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(a=>a!==this)},setFocusTrap:function(a){this.focusTrap=a},setFocusCage:function(a){this.focusCage=a},setMaskFocus:function(a){this.maskFocus=a},setLayoutHint:function(a){this.layoutHint=a},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(a){if(this.ignoreLayout!==a){var l=this.inited&&this.parent;let u;if(a){if(l)for(l=this.parent.getLayouts(),u=l.length;u;)l[--u].removeSubview(this);
this.ignoreLayout=a}else if(this.ignoreLayout=a,l)for(l=this.parent.getLayouts(),u=l.length;u;)l[--u].addSubview(this)}},setDomClass:function(a){this.domClass!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domClass",a))},setDomId:function(a){this.domId!==a&&(this.callSuper(a),this.inited&&this.fireEvent("domId",a))},setAlignOffset:function(a){this.alignOffset!==a&&(this.alignOffset=a,this.inited&&this.fireEvent("alignOffset",a),this.parent&&"left"===this.align&&this.setX(a))},setAlign:function(a){this.align!==
a&&(this.inited&&f(this),this.align=a,this.inited&&(this.fireEvent("align",a),h(this)))},__doAlignCenter:function(a){this.setX(y((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(a){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(a){this.valignOffset!==a&&(this.valignOffset=a,this.inited&&this.fireEvent("valignOffset",a),this.parent&&"top"===this.valign&&this.setY(a))},setValign:function(a){this.valign!==a&&(this.inited&&e(this),
this.valign=a,this.inited&&(this.fireEvent("valign",a),d(this)))},__doValignMiddle:function(a){this.setY(y((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(a){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(a){this.x!==a&&(this.x=a,this.visible&&(this.getODS().left=a+"px"),this.inited&&this.fireEvent("x",a))},setY:function(a){this.y!==a&&(this.y=a,this.visible&&(this.getODS().top=a+"px"),this.inited&&this.fireEvent("y",a))},setWidth:function(a){0>
a&&(a=0);this.width!==a&&(this.width=a,this.getODS().width=a+"px",this.inited&&(this.__updateBounds(a,this.height),this.fireEvent("width",a)))},setHeight:function(a){0>a&&(a=0);this.height!==a&&(this.height=a,this.getODS().height=a+"px",this.inited&&(this.__updateBounds(this.width,a),this.fireEvent("height",a)))},setDomMinWidth:function(a,l){(l?this.getIDS():this.getODS()).minWidth=null!=a?a+"px":null},getDomMinWidth:function(a){a=(a?this.getIDS():this.getODS()).minWidth;return null!=a?Number.parseInt(a):
null},setDomMinHeight:function(a,l){(l?this.getIDS():this.getODS()).minHeight=null!=a?a+"px":null},getDomMinHeight:function(a){a=(a?this.getIDS():this.getODS()).minHeight;return null!=a?Number.parseInt(a):null},setTextColor:function(a){this.textColor!==a&&(this.textColor=a,this.getODS().color=a||"inherit",this.inited&&this.fireEvent("textColor",a))},setBgColor:function(a){this.bgColor!==a&&(this.getODS().backgroundColor=this.bgColor=a,this.inited&&this.fireEvent("bgColor",a))},isColorAttr:a=>"bgColor"===
a||"textColor"===a,setOpacity:function(a){this.opacity!==a&&(this.getODS().opacity=this.opacity=a,this.inited&&this.fireEvent("opacity",a))},setOverflow:function(a){const l=this.overflow;if(l!==a){this.overflow=a;const u=this.getIDS();if("autox"===a)u.overflowX="auto",u.overflowY="hidden";else if("autoy"===a)u.overflowY="auto",u.overflowX="hidden";else{if("autox"===l||"autoy"===l)u.overflowX=u.overflowY=null;u.overflow=a||"visible"}this.inited&&this.fireEvent("overflow",a)}},setVisible:function(a){if(this.visible!==
a){this.visible=a;const l=this.getODS();l.visibility=a?"inherit":"hidden";l.left=a?this.x+"px":"-100000px";l.top=a?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",a)}},setPointerEvents:function(a){this.pointerEvents!==a&&(this.pointerEvents=a,this.getODS().pointerEvents=a||"auto",this.inited&&this.fireEvent("pointerEvents",a))},setCursor:function(a){this.cursor!==a&&(this.cursor=a,this.getODS().cursor=a||"auto",this.inited&&this.fireEvent("cursor",a))},__updateBounds:function(a,l){this.boundsWidth!==
a&&this.fireEvent("boundsWidth",this.boundsWidth=a);this.boundsHeight!==l&&this.fireEvent("boundsHeight",this.boundsHeight=l)},setOutline:function(a){const [l,u,n]=a??[];this.setOutlineWidth(l);this.setOutlineStyle(u);this.setOutlineColor(n)},setOutlineWidth:function(a){this.getODS().outlineWidth=(this.outlineWidth=a||0)+"px"},setOutlineStyle:function(a){this.getODS().outlineStyle=this.outlineStyle=a||"none"},setOutlineColor:function(a){this.getODS().outlineColor=this.outlineColor=a||"#000"},setBorder:function(a){const [l,
u,n]=a??[];this.setBorderWidth(l);this.setBorderStyle(u);this.setBorderColor(n)},setBorderWidth:function(a){this.getODS().borderWidth=(this.borderWidth=a||0)+"px"},setBorderStyle:function(a){this.getODS().borderStyle=this.borderStyle=a||"none"},setBorderColor:function(a){this.getODS().borderColor=this.borderColor=a||"#000"},setRoundedCorners:function(a){this.getODS().borderRadius=a+"px"},setRoundedTopLeftCorner:function(a){this.getODS().borderTopLeftRadius=a+"px"},setRoundedTopRightCorner:function(a){this.getODS().borderTopRightRadius=
a+"px"},setRoundedBottomLeftCorner:function(a){this.getODS().borderBottomLeftRadius=a+"px"},setRoundedBottomRightCorner:function(a){this.getODS().borderBottomRightRadius=a+"px"},setBoxShadow:function(a){const [l,u,n,p]=a??[];this.getODS().boxShadow=a?(l||0)+"px "+(u||0)+"px "+(n||7)+"px "+(p||"#000"):"none"},setGradient:function(a){const l=this.getODS();if(a){let n=a[0];"linear"===n||"radial"===n?a.shift():n="linear";let p=a[0];if("radial"===n){void 0===p?p="closest-side":a.shift();var u=a[0];if(void 0===
u)u="circle";else{switch(u){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",u),u="circle"}a.shift()}let t=a[0];void 0===t?t="center":(t=t.replaceAll("middle","center"),a.shift());p=u+" "+p+" at "+t}else"number"===typeof p?(p+="deg",a.shift()):p?(p="to "+p,a.shift()):p="0deg";u=t=>{a.push(t&&"inherit"!==t?t:"transparent")};2>a.length&&u(this.textColor);2>a.length&&u(this.bgColor);l.background=n+"-gradient("+p+","+a.join(",")+")"}else l.background="none";this.bgColor=
void 0},setTooltip:function(a){this.tooltip!==a&&(this.tooltip=this.getODE().title=a,this.inited&&this.fireEvent("tooltip",a))},isVisible:function(){return null==this.searchAncestorsOrSelf(a=>!a.visible)},getFocusTrap:function(a){return this.searchAncestorsOrSelf(l=>l.focusCage||l.focusTrap&&!a)},subnodeAdded:function(a){a instanceof q.View?(this.getIDE().appendChild(a.getODE()),this.getSubviews().push(a),this.fireEvent("subviewAdded",a),this.subviewAdded(a)):a instanceof q.Layout&&(this.getLayouts().push(a),
this.fireEvent("layoutAdded",a),this.layoutAdded(a))},subnodeRemoved:function(a){let l;a instanceof q.View?(l=this.getSubviewIndex(a),-1<l&&(this.fireEvent("subviewRemoved",a),a.removeDomElement(),this.subviews.splice(l,1),this.subviewRemoved(a))):a instanceof q.Layout&&(l=this.getLayoutIndex(a),-1<l&&(this.fireEvent("layoutRemoved",a),this.layouts.splice(l,1),this.layoutRemoved(a)))},hasSubview:function(a){return this.getSubviews().includes(a)},getSubviewIndex:function(a){return this.getSubviews().indexOf(a)},
subviewAdded:a=>{},subviewRemoved:a=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(a){return this.getLayouts().includes(a)},getLayoutIndex:function(a){return this.getLayouts().indexOf(a)},layoutAdded:a=>{},layoutRemoved:a=>{},isBehind:function(a,l){return b(this,a,!1,l)},isInFrontOf:function(a,l){return b(this,a,!0,l)},bringToFront:function(){this.parent.bringSubviewToFront(this)},
sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(a){this.parent.sendSubviewBehind(this,a)},sendInFrontOf:function(a){this.parent.sendSubviewInFrontOf(this,a)},doSubviewsReorderedInDom:a=>{},bringSubviewToFront:function(a){const l=this;if(a?.parent===l){const u=l.getIDE(),n=a.getODE();n!==u.lastElementChild&&k(a,()=>{u.appendChild(n);l.doSubviewsReorderedInDom(a)})}},sendSubviewToBack:function(a){const l=this;if(a?.parent===l){const u=l.getIDE(),n=u.firstElementChild,
p=a.getODE();p!==n&&k(a,()=>{u.insertBefore(p,n);l.doSubviewsReorderedInDom(a)})}},sendSubviewBehind:function(a,l){const u=this;if(a?.parent===u&&l?.parent===u){const n=a.getODE(),p=l.getODE();if(n!==p.previousElementSibling){const t=u.getIDE();k(a,()=>{t.insertBefore(n,p);u.doSubviewsReorderedInDom(a)})}}},sendSubviewInFrontOf:function(a,l){const u=this;if(a?.parent===u&&l?.parent===u){const n=a.getODE(),p=l.getODE().nextElementSibling;if(n!==p){const t=u.getIDE();k(a,()=>{t.insertBefore(n,p);u.doSubviewsReorderedInDom(a)})}}},
sortSubviews:function(a){const l=this,u=l.getSubviews();q.isNotSorted(u,a)&&(u.sort(a),k(l,()=>{const n=l.getODE(),p=n.parentNode;let t;p&&(t=n.nextElementSibling,p.removeChild(n));const z=document.createDocumentFragment(),F=u.length;for(let I=0;F>I;)z.appendChild(u[I++].getODE());l.getIDE().appendChild(z);p?.insertBefore(n,t);l.doSubviewsReorderedInDom(null)}))},containsPoint:function(a,l,u){const n=this.getODE();if(!n)return!1;const {x:p,y:t}=w.getRelativePosition(n,u);return r(a,l,p,t,this.width,
this.height)},isPointVisible:function(a,l){const {x:u,y:n}=this.getPagePosition(!0);c(this);return g(this,a-u,l-n)},intersectsWithSibling:function(a){return a.parent===this.parent&&!(a.x>this.x+this.width||a.x+a.width<this.x||a.y>this.y+this.height||a.y+a.height<this.y)},getEffectiveScale:function(){return c(this)},getEffectiveScaleX:function(){return c(this).scaleX},getEffectiveScaleY:function(){return c(this).scaleY}})})(myt);
(q=>{const y=(r,k,b)=>{const c=w(r,k);r.getODS().transform=c+(0===c.length?"":" ")+k+"("+b+")"},w=(r,k)=>{r=r.getODS();var b=r.transform;if(!b||0===b.length)return"";b=b.split(" ");let c=b.length;for(;c;)if(b[--c].startsWith(k)){b.splice(c,1);break}return r.transform=b.join(" ")};q.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(r){this.transformOrigin!==r&&(this.transformOrigin=r,this.getODS().transformOrigin=r||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",r)))},setRotation:function(r){this.rotation!==r&&(this.rotation=r,y(this,"rotate",(r||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",r)))},setScale:function(r){const k=this.scaleX!==r,b=this.scaleY!==r;if(k){var c=this.scaleX=r;null==c?w(this,"scaleX"):y(this,"scaleX",c||1)}b&&(c=this.scaleY=r,null==c?w(this,"scaleY"):y(this,"scaleY",c||1));this.inited&&((k||b)&&this.__updateBounds(this.width,this.height),
k&&this.fireEvent("scaleX",r),b&&this.fireEvent("scaleY",r))},setScaleX:function(r){if(this.scaleX!==r){var k=this.scaleX=r;null==k?w(this,"scaleX"):y(this,"scaleX",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",r))}},setScaleY:function(r){if(this.scaleY!==r){var k=this.scaleY=r;null==k?w(this,"scaleY"):y(this,"scaleY",k||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",r))}},setSkewX:function(r){this.skewX!==r&&(this.skewX=
r,y(this,"skewX",r||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",r)))},setSkewY:function(r){this.skewY!==r&&(this.skewY=r,y(this,"skewY",r||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",r)))},__updateBounds:function(r,k){const {rotation:b,scaleX:c,scaleY:g}=this,f=(null==c||1===c)&&(null==g||1===g);if(!f||null!=b&&0!==b&&180!==b)!f||90!==b&&270!==b?{width:r,height:k}=this.getODE().getBoundingClientRect():{width:k,height:r}=
this;this.callSuper(r,k)}})})(myt);
(q=>{const y=JS.Module,w=(c,g)=>{if("auto"===g)c.__hasSetWidth=!1,c.getODS().width="auto",c.sizeViewToDom();else return c.__hasSetWidth=!0},r=(c,g)=>{if("auto"===g)c.__hasSetHeight=!1,c.getODS().height="auto",c.sizeViewToDom();else return c.__hasSetHeight=!0},k=c=>{if(!c.__hasSetWidth){const g=c.getODE().offsetWidth/c.getEffectiveScaleX();c.width!==g&&(c.width=g,c.inited&&c.__updateBounds(g,c.height),c.fireEvent("width",g))}},b=c=>{if(!c.__hasSetHeight){const g=c.getODE().offsetHeight/c.getEffectiveScaleY();
c.height!==g&&(c.height=g,c.inited&&c.__updateBounds(c.width,g),c.fireEvent("height",g))}};q.SizeToDom=new y("SizeToDom",{extend:{sizeWidth:k,sizeHeight:b},initNode:function(c,g){this.callSuper(c,g);this.sizeViewToDom()},setWidth:function(c){w(this,c)&&this.callSuper(c)},setHeight:function(c){r(this,c)&&this.callSuper(c)},sizeViewToDom:function(){k(this);b(this)}});q.SizeWidthToDom=new y("SizeWidthToDom",{initNode:function(c,g){this.callSuper(c,g);this.sizeViewToDom()},setWidth:function(c,g){w(this,
c)&&this.callSuper(c,g)},sizeViewToDom:function(){k(this)}});q.SizeHeightToDom=new y("SizeHeightToDom",{initNode:function(c,g){this.callSuper(c,g);this.sizeViewToDom()},setHeight:function(c,g){r(this,c)&&this.callSuper(c,g)},sizeViewToDom:function(){b(this)}})})(myt);
(q=>{const y=JS.Module,w=(c,g,f,h)=>{c[f]!==g&&(c[f]=g,c.getIDS()[f]=g||h||"inherit",c.inited&&(c.fireEvent(f,g),c.sizeViewToDom()))};q.TextSupport=new y("TextSupport",{setWidth:function(c){this.callSuper(c);"auto"!==c&&(c=this.whiteSpace,"normal"!==c&&"pre-line"!==c&&"pre-wrap"!==c&&"break-spaces"!==c||this.sizeViewToDom())},setText:function(c){c||="";c=this.valueFromEvent(c);this.text!==c&&(this.getIDE().innerHTML=this.text=c,this.inited&&(this.fireEvent("text",c),this.sizeViewToDom()))},setTextOverflow:function(c){this.textOverflow!==
c&&(this.textOverflow=c,this.getIDS().textOverflow=c||"inherit",this.inited&&this.fireEvent("textOverflow",c))},setTextAlign:function(c){this.textAlign!==c&&(this.textAlign=c,this.getIDS().textAlign=c||"inherit",this.inited&&this.fireEvent("textAlign",c))},setWhiteSpace:function(c){w(this,c,"whiteSpace")},setWordWrap:function(c){w(this,c,"wordWrap","normal")},setTextIndent:function(c){w(this,c,"textIndent")},setTextTransform:function(c){w(this,c,"textTransform")},setTextDecoration:function(c){w(this,
c,"textDecoration")},setLineHeight:function(c){w(this,c,"lineHeight")},setLetterSpacing:function(c){w(this,c,"letterSpacing")},setWordSpacing:function(c){w(this,c,"wordSpacing")},setFontFamily:function(c){w(this,c,"fontFamily")},setFontStyle:function(c){w(this,c,"fontStyle")},setFontVariant:function(c){w(this,c,"fontVariant")},setFontWeight:function(c){w(this,c,"fontWeight")},setFontSize:function(c){w(this,c,"fontSize")},setUserUnselectable:function(c){this.userUnselectable!==c&&(this.userUnselectable=
c,this[c?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(c?"default":"text"),this.inited&&this.fireEvent("userUnselectable",c))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(c,g,f,h){this.getIDS().textShadow=(c||0)+"px "+(g||0)+"px "+(null!=f?f:2)+"px "+(h||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const r=(c,g,f)=>{const h="padding"+f;g=Math.max(g,0);c[h]!==g&&(c[h]=g,c.getIDS()[h]=g+"px",c.fireEvent(h,g),"Left"===f||"Right"===f?k(c):b(c))},k=c=>{c.__hasSetWidth&&(c.getODS().width=c.width-(c.paddingLeft||0)-(c.paddingRight||0)+"px",c.inited&&c.sizeViewToDom())},b=c=>{c.__hasSetHeight&&(c.getODS().height=c.height-(c.paddingTop||0)-(c.paddingBottom||0)+"px",c.inited&&c.sizeViewToDom())};q.PaddedTextSupport=new y("PaddedTextSupport",{setWidth:function(c){this.callSuper(c);k(this)},setHeight:function(c){this.callSuper(c);
b(this)},setPadding:function(c){let g,f,h;c||=0;"object"===typeof c?(g=c.top||0,f=c.right||0,h=c.bottom||0,c=c.left||0):g=f=h=c;this.setPaddingTop(g);this.setPaddingRight(f);this.setPaddingBottom(h);this.setPaddingLeft(c)},setPaddingTop:function(c){r(this,c,"Top")},setPaddingRight:function(c){r(this,c,"Right")},setPaddingBottom:function(c){r(this,c,"Bottom")},setPaddingLeft:function(c){r(this,c,"Left")}})})(myt);
(q=>{const y={},w={},r=k=>{const b=k.imageUrl;if(k.calculateNaturalSize&&b){var c=y[b];if(c)k.setNaturalWidth(c.width),k.setNaturalHeight(c.height);else{c=w[b];if(!c){w[b]=c=[];const g=new Image;g.onerror=f=>{if(f=w[b]){let h=f.length;for(;h;)f[--h].setImageLoadingError(!0);f.length=0;delete w[b]}};g.onload=()=>{const f=g.width,h=g.height,e=w[b];if(e){let d=e.length;for(;d;){const a=e[--d];a.imageUrl===b&&(a.setNaturalWidth(f),a.setNaturalHeight(h))}e.length=0;delete w[b]}y[b]={width:f,height:h}};
g.src=b}c.push(k)}}};q.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:k=>y[k]},initNode:function(k,b){b.imageRepeat??(b.imageRepeat="no-repeat");b.imageAttachment??(b.imageAttachment="scroll");this.callSuper(k,b)},setImageUrl:function(k){this.imageUrl!==k&&(this.imageUrl=k,this.getIDS().backgroundImage=k?'url("'+k+'")':"none",this.inited&&(this.fireEvent("imageUrl",k),this.setNaturalWidth(),this.setNaturalHeight(),!k&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
r(this))},setImageLoadingError:function(k){this.set("imageLoadingError",k,!0)},setImageSize:function(k){this.imageSize!==k&&(this.imageSize=k,this.getIDS().backgroundSize=k||"auto",this.inited&&this.fireEvent("imageSize",k))},setImageRepeat:function(k){this.imageRepeat!==k&&(this.getIDS().backgroundRepeat=this.imageRepeat=k,this.inited&&this.fireEvent("imageRepeat",k))},setImagePosition:function(k){this.imagePosition!==k&&(this.getIDS().backgroundPosition=this.imagePosition=k,this.inited&&this.fireEvent("imagePosition",
k))},setImageAttachment:function(k){this.imageAttachment!==k&&(this.getIDS().backgroundAttachment=this.imageAttachment=k,this.inited&&this.fireEvent("imageAttachment",k))},setCalculateNaturalSize:function(k){this.calculateNaturalSize!==k&&(this.calculateNaturalSize=k,this.inited&&this.fireEvent("calculateNaturalSize",k),r(this))},setNaturalWidth:function(k){this.naturalWidth!==k&&(this.naturalWidth=k,this.inited&&this.fireEvent("naturalWidth",k),this.useNaturalSize&&k&&this.setWidth(k))},setNaturalHeight:function(k){this.naturalHeight!==
k&&(this.naturalHeight=k,this.inited&&this.fireEvent("naturalHeight",k),this.useNaturalSize&&k&&this.setHeight(k))},setUseNaturalSize:function(k){this.useNaturalSize!==k&&(this.useNaturalSize=k,this.inited&&this.fireEvent("useNaturalSize",k),k&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),k&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(q=>{const y=JS.Class,{View:w,SizeToDom:r}=q;q.Flexbox=new y("Flexbox",w,{include:[q.FlexboxSupport]});q.Frame=new y("Frame",w,{initNode:function(k,b){b.tagName??(b.tagName="iframe");this.callSuper(k,b);k=q.global.mouse;this.attachToDom(k,"__doMouseDown","mousedown",!0);this.attachToDom(k,"__doMouseUp","mouseup",!0)},createOurDomElement:function(k){k=this.callSuper(k);(Array.isArray(k)?k[1]:k).style.border="0px";return k},setSrc:function(k){this.src!==k&&(this.src=this.getIDE().src=k,this.inited&&
this.fireEvent("src",k))},__doMouseDown:function(k){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(k){this.setPointerEvents(this.__restorePointerEvents);return!0}});q.Markup=new y("Markup",w,{include:[r],setHtml:function(k){this.html!==k&&(this.getIDE().innerHTML=this.html=k,this.inited&&(this.fireEvent("html",k),this.sizeViewToDom()))}});q.Text=new y("Text",w,{include:[r,q.TextSupport],initNode:function(k,b){b.whiteSpace??(b.whiteSpace=
"nowrap");b.userUnselectable??(b.userUnselectable=!0);this.callSuper(k,b)},measureNoWrapWidth:function(){const k=this.__hasSetWidth,b=this.width;if(!k&&"nowrap"===this.whiteSpace)return b;const c=this.getIDS(),g=c.whiteSpace;k&&(c.width="auto");c.whiteSpace="nowrap";const f=this.getODE().getBoundingClientRect().width;c.whiteSpace=g;k&&(c.width=b);return f}});q.PaddedText=new y("PaddedText",q.Text,{include:[q.PaddedTextSupport]});q.Image=new y("Image",w,{include:[q.ImageSupport],initNode:function(k,
b){b.useNaturalSize??(b.useNaturalSize=!0);this.callSuper(k,b)}});q.BackView=new y("BackView",w,{sendSubviewToBack:function(k){if(k.parent===this){const b=this.getIDE(),c=b.childNodes[1];k=k.getODE();k!==c&&(k=b.removeChild(k))&&b.insertBefore(k,c)}}})})(myt);
(q=>{const y=Math.round,w=c=>{c.parent&&0<=c.percentOfParentWidth&&c.syncTo(c.parent,"__doPOPW","width")},r=c=>{0<=c.percentOfParentWidth&&c.detachFrom(c.parent,"__doPOPW","width")},k=c=>{c.parent&&0<=c.percentOfParentHeight&&c.syncTo(c.parent,"__doPOPH","height")},b=c=>{0<=c.percentOfParentHeight&&c.detachFrom(c.parent,"__doPOPH","height")};q.SizeToParent=new JS.Module("SizeToParent",{setParent:function(c){this.parent!==c&&(this.inited&&(r(this),b(this)),this.callSuper(c),w(this),k(this))},setPercentOfParentWidthOffset:function(c){this.percentOfParentWidthOffset!==
c&&(this.percentOfParentWidthOffset=c,this.inited&&(this.fireEvent("percentOfParentWidthOffset",c),this.__doPOPW()))},setPercentOfParentWidth:function(c){this.percentOfParentWidth!==c&&(this.inited&&r(this),this.percentOfParentWidth=c,this.inited&&this.fireEvent("percentOfParentWidth",c),w(this))},setPercentOfParentHeightOffset:function(c){this.percentOfParentHeightOffset!==c&&(this.percentOfParentHeightOffset=c,this.inited&&(this.fireEvent("percentOfParentHeightOffset",c),this.__doPOPH()))},setPercentOfParentHeight:function(c){this.percentOfParentHeight!==
c&&(this.inited&&b(this),this.percentOfParentHeight=c,this.inited&&this.fireEvent("percentOfParentHeight",c),k(this))},__doPOPW:function(c){this.setWidth((this.percentOfParentWidthOffset||0)+y(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(c){this.setHeight((this.percentOfParentHeightOffset||0)+y(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(q=>{let y;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[q.Observable],initialize:function(){q.global.register("roots",y=this)},getRoots:()=>w,addRoot:r=>{w.push(r);y.fireEvent("rootAdded",r)},removeRoot:r=>{const k=w.indexOf(r);-1<k&&(w.splice(k,1),y.fireEvent("rootRemoved",r))}})})(myt);
(q=>{const {addEventListener:y,removeEventListener:w,global:{roots:r}}=q,k=q.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:b=>{const c=b.getIDE();b=b.__captureDrop=g=>{g.preventDefault()};y(c,"drop",b);y(c,"dragover",b)},teardownCaptureDrop:b=>{const c=b.getIDE();b=b.__captureDrop;w(c,"drop",b);w(c,"dragover",b)}},initNode:function(b,c){this.callSuper(b,c);this.setZIndex(0);this.addDomClass("myt");r.addRoot(this);k.setupCaptureDrop(this)},createOurDomElement:function(b){b||(b=this.callSuper(b),
q.getElement().appendChild(b));return b},destroy:function(){k.teardownCaptureDrop(this);r.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(b){this.keepDomElementWhenDestroyed=b},setParent:b=>{},bringToFront:function(){var b=this.getIDE();const c=b.parentNode;b!==c.lastChild&&(b=c.removeChild(b))&&c.appendChild(b)},sendToBack:function(){var b=this.getIDE();const c=b.parentNode;b!==c.firstChild&&(b=c.removeChild(b))&&
c.insertBefore(b,c.firstChild)},sendBehind:function(b){var c=this.getIDE();b=b.getIDE();const g=c.parentNode;b.parentNode===g&&(c=g.removeChild(c))&&g.insertBefore(c,b)},sendInFrontOf:function(b){b.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(b),b.sendBehind(this))}})})(myt);
(q=>{let y,w,r=!1;const {requestAnimationFrame:k,cancelAnimationFrame:b}=window,c={},g=h=>{y=k(g);h=Math.round(h);-1!==w&&(c.delta=h-w,c.time=h,f.fireEvent("idle",c));w=h},f=new JS.Singleton("GlobalIdle",{include:[q.Observable],initialize:function(){q.global.register("idle",this)},attachObserver:(h,e,d)=>{h=f.callSuper(h,e,d);!r&&f.hasObservers("idle")&&(r=!0,w=-1,y=k(g));return h},detachObserver:(h,e,d)=>{h=f.callSuper(h,e,d);r&&!f.hasObservers("idle")&&(b(y),r=!1);return h}})})(myt);
(q=>{let y,w,r;const k=q.global,b=k.idle,c=window.document;new JS.Singleton("GlobalWindowResize",{include:[q.Observable,q.Observer],initialize:function(){y=this;y.attachTo(b,"__setup","idle");k.register("windowResize",y)},__setup:g=>{const f=c.body;f&&(y.detachFrom(b,"__setup","idle"),(new ResizeObserver(()=>{y.fireEvent("resize",{w:w=f.clientWidth,h:r=f.clientHeight})})).observe(f))},getWidth:()=>w??=c.body.clientWidth,getHeight:()=>r??=c.body.clientHeight})})(myt);
(q=>{const y=JS.Module,w=q.global.windowResize,r=Math.max,k=c=>{const g=c.resizeDimension;"both"!==g&&"width"!==g||c.setWidth(r(c.minWidth,w.getWidth()));"both"!==g&&"height"!==g||c.setHeight(r(c.minHeight,w.getHeight()))},b=q.SizeToWindow=new y("SizeToWindow",{include:[q.RootView],initNode:function(c,g){this.minWidth=this.minHeight=0;g.resizeDimension??(g.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(c,g)},setResizeDimension:function(c){this.resizeDimension!==c&&
(this.resizeDimension=c,k(this))},setMinWidth:function(c){this.minWidth!==c&&(this.minWidth=c,k(this))},setMinHeight:function(c){this.minHeight!==c&&(this.minHeight=c,k(this))},__hndlResize:function(c){k(this)}});q.SizeToWindowWidth=new y("SizeToWindowWidth",{include:[b],initNode:function(c,g){g.resizeDimension??(g.resizeDimension="width");this.callSuper(c,g)}});q.SizeToWindowHeight=new y("SizeToWindowHeight",{include:[b],initNode:function(c,g){g.resizeDimension??(g.resizeDimension="height");this.callSuper(c,
g)}})})(myt);
(q=>{const y=Math,{min:w,max:r}=y,k=a=>w(255,r(0,y.round(a))),b=a=>k(a).toString(16).padStart(2,"0"),c=(a,l,u,n)=>(n?"#":"")+b(a)+b(l)+b(u),g=a=>new d((16711680&a)>>16,(65280&a)>>8,255&a),f=(a,l)=>{if("string"===typeof a)if(a.endsWith("%"))a=parseFloat(a.slice(0,-1))*l/100;else return 0;a=w(l,r(0,a))/l;return 1E-6>y.abs(1-a)?1:a},h=(a,l,u)=>{a=f(a,255);l=f(l,255);u=f(u,255);const n=r(a,l,u),p=n-w(a,l,u);if(0===p)return{h:0,s:0,v:n};let t;switch(n){case a:t=(l-u)/p+(l<u?6:0);break;case l:t=(u-a)/p+
2;break;case u:t=(a-l)/p+4}return{h:60*t,s:0===n?0:p/n,v:n}},e=(a,l,u)=>{a=6*f(a,360);l=f(l,100);u=f(u,100);var n=y.floor(a);const p=a-n;a=u*(1-l);const t=u*(1-p*l);l=u*(1-(1-p)*l);n%=6;return{red:255*[u,t,a,a,l,u][n],green:255*[l,u,u,t,a,a][n],blue:255*[a,a,l,u,u,t][n]}},d=q.Color=new JS.Class("Color",{extend:{toUnitRange:f,rgbToHsv:h,hsvToRgb:e,toHex:b,rgbToHex:c,cleanChannelValue:k,getRedChannel:a=>(16711680&a)>>16,getGreenChannel:a=>(65280&a)>>8,getBlueChannel:a=>255&a,makeColorFromNumber:g,makeColorFromHexString:a=>
{if(a)switch(a.startsWith("#")&&(a=a.slice(1)),a.length){case 0:a+="0";case 1:a+="0";case 2:a+="0";case 3:case 4:case 5:const [l,u,n]=a;return new d(parseInt(l+l,16),parseInt(u+u,16),parseInt(n+n,16));case 6:return g(parseInt(a,16));default:return g(parseInt(a.slice(0,6),16))}},makeColorFromHSV:(a,l,u)=>{const {red:n,green:p,blue:t}=e(a,l,u);return new d(n,p,t)},getLighterColor:(a,l)=>g(a).isLighterThan(g(l))?a:l,makeColorNumberFromChannels:(a,l,u)=>(k(a)<<16)+(k(l)<<8)+k(u),makeBlendedColor:(a,l,
u)=>new d(a.red+u*(l.red-a.red),a.green+u*(l.green-a.green),a.blue+u*(l.blue-a.blue))},initialize:function(a,l,u){this.setRed(a);this.setGreen(l);this.setBlue(u)},setRed:function(a){this.red=k(a)},setGreen:function(a){this.green=k(a)},setBlue:function(a){this.blue=k(a)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return c(this.red,this.green,this.blue,!0)},getHSV:function(){return h(this.red,this.green,this.blue)},isLighterThan:function(a){a=
this.getDiffFrom(a);return 0>a.red+a.green+a.blue},getDiffFrom:function(a){return{red:a.red-this.red,green:a.green-this.green,blue:a.blue-this.blue}},applyDiff:function(a){return this.add(a)},add:function(a){this.setRed(this.red+a.red);this.setGreen(this.green+a.green);this.setBlue(this.blue+a.blue);return this},subtract:function(a){this.setRed(this.red-a.red);this.setGreen(this.green-a.green);this.setBlue(this.blue-a.blue);return this},multiply:function(a){this.setRed(this.red*a);this.setGreen(this.green*
a);this.setBlue(this.blue*a);return this},divide:function(a){this.setRed(this.red/a);this.setGreen(this.green/a);this.setBlue(this.blue/a);return this},clone:function(){return new d(this.red,this.green,this.blue)},equals:function(a){return a===this||a?.isA?.(d)&&a.red===this.red&&a.green===this.green&&a.blue===this.blue}})})(myt);
(q=>{const {max:y,sin:w,cos:r,pow:k,sqrt:b,PI:c}=Math,g=2*c,f=c/2,h=q.global.idle,e=q.Color.makeColorFromHexString,d={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-r(n*f)+1,outSine:n=>w(n*f),inOutSine:n=>-(r(n*c)-1)/2,inCirc:n=>-(b(1-n*n)-1),outCirc:n=>b(1- --n*n),inOutCirc:n=>1>(n*=2)?-(b(1-n*n)-1)/2:(b(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:k(2,10*(n-1)),outExpo:n=>1===n?1:-k(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?k(2,10*(n-1))/2:(-k(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(k(2,10*--n)*w((1*n-.075)*g/.3)),outElastic:n=>0===n||1===n?n:k(2,-10*n)*w((1*n-.075)*g/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(k(2,10*--n)*w((1*n-.1125)*g/.45))/2:k(2,
-10*--n)*w((1*n-.1125)*g/.45)/2+1,inBack:(n,p=1.70158)=>(n/=1)*n*((p+1)*n-p),outBack:(n,p=1.70158)=>(n=n/1-1)*n*((p+1)*n+p)+1,inOutBack:(n,p=1.70158)=>1>(n*=2)?n*n*(((p*=1.525)+1)*n-p)/2:((n-=2)*n*(((p*=1.525)+1)*n+p)+2)/2,inBounce:n=>1-d.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?d.inBounce(n)/2:(d.outBounce(n-1)+1)/2},a=d.inOutQuad,l=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},u=(n,p)=>{const {running:t,paused:z,reverse:F,duration:I,repeat:L,__prog:A,easingFunction:D,callback:v}=n;if(t&&!z){F&&(p*=-1);p=A+p;let T=0;p>I?(T=p-I,p=I,++n.__loopCnt===L&&(T=0)):0>p&&(T=-p,p=0,0>--n.__loopCnt&&0<L&&(T=0));var m=n.target??n.parent;if(m){const {relative:U,attribute:X,__isColorAnim:P,__loopCnt:V,to:R}=n;var x=y(0,p/I),B=y(0,A/I);null==n.from&&(n.__tmpFrom=!0,n.from=U?P?"#000":0:m.get(X));B=D(x)-(U?D(B):0);var E=n.from,J=U?m.get(X):
E;x=m.set;if(P){var K=R,M=U;E=e(E);K=e(K);M=M?e(J):E;M.setRed(M.red+(K.red-E.red)*B);M.setGreen(M.green+(K.green-E.green)*B);M.setBlue(M.blue+(K.blue-E.blue)*B);B=M.getHtmlHexString()}else B=J+(R-E)*B;x.call(m,X,B);!F&&V===L||F&&0>V&&0<L?(n.setRunning(!1),v?.call(n,!0)):0<T?(n.fireEvent("repeat",V),n.__prog=F?I:0,u(n,T)):n.__prog=p}else console.log("No target for animator",n),n.setRunning(!1),v?.call(n,!1)}};q.Animator=new JS.Class("Animator",q.Node,{include:[q.Reusable],extend:{easings:d},initNode:function(n,
p){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=a;this.callSuper(n,p);l(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const p=this.target??this.parent;this.__isColorAnim=p&&"function"===typeof p.isColorAttr?p.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),l(this);this[n?"attachTo":"detachFrom"](h,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](h,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&l(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&l(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&l(this)},setEasingFunction:function(n){"string"===typeof n&&(n=d[n]);this.set("easingFunction",n??a,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,p){const t=this,z=t.callback;z&&!p?t.setCallback(F=>{z.call(t,F);n.call(t,F)}):t.setCallback(n)},reset:function(n){l(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=a;this.reset(!1)},__updateAnim:function(n){u(this,
n.value.delta)}})})(myt);
(q=>{const y=Array.isArray,w=b=>{b.__additionalArgs=[];b.__pendingTransition="";b.__transDestinationState="";b.__transStage="leaveState"},r=(b,c)=>{if(b.__transInProgress){var g=b.__deferredTransitions;g??=b.__deferredTransitions=[];g.unshift(c)}else{b.__transInProgress=!0;g=c.shift();const f=c.shift();if(b.__pendingTransition)return 3;if(b.isFinished())return b.__transInProgress=!1,5;let h=b.map[b.current][f];h??=b.map["*"][f];if(h)return b.__pendingTransition=f,b.__transDestinationState=h,b.__additionalArgs=
c,b.resumeTransition(g);b.__transInProgress=!1;return 5}},k=b=>{b.__transInProgress=!1;const c=b.__deferredTransitions;if(c)for(;0<c.length;)r(b,c.pop())};q.StateMachine=new JS.Class("StateMachine",q.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(b,c){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(b,c)},setInitialState:function(b){if(""===this.current){if(y(b)){var c=b;b=c.shift()}else c=[];this.current=
this.initial=b;this.doEnterState("","",b,c);c={name:"",from:"",to:b,args:c};this.fireEvent("enter"+b,c);this.fireEvent("enter",c);this.isFinished()&&this.fireEvent("finished",c)}},setTerminalState:function(b){this.terminal=b},addTransitions:function(b){b.forEach(c=>this.addTransition(...c))},addTransition:function(b,c,g){c=c?y(c)?c:[c]:["*"];const f=this.map;let h=c.length;for(;h;){let e,d;((e=f)[d=c[--h]]??(e[d]={}))[b]=g}},doTransition:function(...b){b.unshift("sync");return r(this,b)},doAsyncTransition:function(...b){b.unshift("async");
return r(this,b)},resumeTransition:function(b){const c=this.__pendingTransition;if(!c)return 4;const g=this.current,f=this.__transDestinationState,h=this.__additionalArgs,e={name:c,from:g,to:f,args:h},d=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const a=this.doLeaveState(c,g,f,h);if(!1===a)return w(this),k(this),2;if("async"===a||"async"===b)return this.__transStage="enterState",d("start"+c,e),d("start",e),d("leave"+g,e),d("leave",e),k(this),3;d("start"+c,e);d("start",e);
d("leave"+g,e);d("leave",e);case "enterState":this.current=f,w(this),this.doEnterState(c,g,f,h),d("enter"+f,e),d("enter",e),d("end"+c,e),d("end",e),this.isFinished()&&d("finished",e)}k(this);return 1},doLeaveState:(b,c,g,f)=>{},doEnterState:(b,c,g,f)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(b){return y(b)?b.includes(this.current):this.current===b},can:function(b){return void 0!==this.map[this.current][b]?!0:void 0!==this.map["*"][b]}})})(myt);
(q=>{const y=(b,c)=>b.replicationIndex-c.replicationIndex,w=(b,c)=>{let g=b.length;for(;g;){const f=b[--g];f.decrementLockedCounter();c&&f.update()}},r=b=>{k(b);const c=b.template;c&&(b.__pool=new q.TrackActivesPool(c,b.parent))},k=b=>{const c=b.__pool;if(c){const g=b.parent.getLayouts();b=g;let f=b.length;for(;f;)b[--f].incrementLockedCounter();c.putActives();c.destroyPooledInstances();w(g,!1);c.destroy()}};q.Replicable=new JS.Module("Replicable",{include:[q.Reusable],replicate:function(b,c){this.replicationData=
b;this.replicationIndex=c},notify:(b,c)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(b,c){return c===this.replicationIndex&&b===this.replicationData}});q.Replicator=new JS.Class("Replicator",q.Node,{initNode:function(b,c){this.callSuper(b,c);r(this);this.doReplication()},destroy:function(){k(this);this.callSuper()},setTemplate:function(b){(this.template=b.includes(q.Replicable)?b:null)||q.dumpStack("Template not replicable");this.inited&&
(r(this),this.doReplication())},setData:function(b){this.data=b;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const b=this.__pool;let c;if(b){c=this.parent.getLayouts();for(var g=c.length;g;)c[--g].incrementLockedCounter();const f=(g=this.data)?g.length:0,h=b.getActives(),e=h.length,d=[];let a=e,l,u;for(h.sort(y);a;)if(l=h[--a],u=l.replicationIndex,u>=f||!l.alreadyHasReplicationData(g[u],u))d[u]=l;for(a=d.length;a;)(l=d[--a])&&
b.putInstance(l);for(a=0;f>a;++a)(a>=e||null!=d[a])&&b.getInstance().replicate(g[a],a);for(a=c.length;a;)c[--a].sortSubviews(y);w(c,!0)}},notify:function(b,c){var g=this.__pool;if(g){g=g.getActives();let f=g.length;for(;f;)g[--f].notify(b,c)}}})})(myt);
(q=>{const y=JS.Singleton,w=document,{DomElementProxy:r,DomObservable:k,global:{register:b}}=q;new y("GlobalMouse",{include:[r,k,q.MouseObservable],initialize:function(){this.setDomElement(w);b("mouse",this)}});new y("GlobalTouch",{include:[r,k,q.TouchObservable],initialize:function(){this.setDomElement(w);b("touch",this)}})})(myt);
(q=>{let y,w,r;const k=[],b=[],c=h=>{const e=r;e!==h&&(e&&(e.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(e),y("dragLeave",e)),r=h)&&(h.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(h),y("dragEnter",e))},g=h=>{let e=w;e!==h&&((w=h)?(e=h,f(e,b).forEach(d=>{d.notifyDragStart(e)}),f(e,k).forEach(d=>{d.notifyAutoScrollerDragStart(e)}),y("startDrag",h)):(f(e,b).forEach(d=>{d.notifyDragStop(e)}),f(e,k).forEach(d=>{d.notifyAutoScrollerDragStop(e)}),y("stopDrag",h)))},f=(h,e)=>{if(h.destroyed)return[];
if(h.isAnyDragGroup())return e;const d=[];h=h.getDragGroups();let a=e.length;for(;a;){const l=e[--a];if(l.isAnyDropGroup())d.push(l);else{const u=l.getDropGroups();for(const n in h)if(u[n]){d.push(l);break}}}return d};new JS.Singleton("GlobalDragManager",{include:[q.Observable],initialize:function(){q.global.register("dragManager",this);y=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:h=>{k.push(h)},unregisterAutoScroller:h=>{h=k.indexOf(h);-1<h&&k.splice(h,1)},registerDropTarget:h=>
{b.push(h)},unregisterDropTarget:h=>{h=b.indexOf(h);-1<h&&b.splice(h,1)},startDrag:h=>{g(h)},stopDrag:(h,e,d)=>{e.notifyDropped(r,d);d||r?.notifyDrop(e);c();g();r&&!d&&y("drop",[e,r])},updateDrag:(h,e)=>{const d=f(e,b);let a=d.length,l;if(0<a){const {pageX:u,pageY:n}=h.value;for(;a;)h=d[--a],h.willAcceptDrop(e)&&e.willPermitDrop(h)&&h.isPointVisible(u,n)&&(!l||h.isInFrontOf(l))&&(l=h)}c(l)}})})(myt);
(q=>{const y=JS.Module,{mouse:w,keys:r,idle:k}=q.global;q.Activateable=new y("Activateable",{doActivated:()=>{}});q.UpdateableUI=new y("UpdateableUI",{initNode:function(b,c){this.callSuper(b,c);this.updateUI()},updateUI:()=>{}});q.Disableable=new y("Disableable",{initNode:function(b,c){c.disabled??(c.disabled=!1);this.callSuper(b,c)},setDisabled:function(b){b=this.valueFromEvent(b);this.disabled!==b&&(this.disabled=b,this.inited&&this.fireEvent("disabled",b),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});q.KeyActivation=new y("KeyActivation",{extend:{ACTIVATION_KEYS:[r.CODE_ENTER,r.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(b,c){this.activateKeyDown="";c.activationKeys??(c.activationKeys=q.KeyActivation.ACTIVATION_KEYS);this.callSuper(b,c);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(b){this.activationKeys=
b??[]},setRepeatKeyDown:function(b){this.repeatKeyDown=b},__hndlKeyDown:function(b){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const c=q.KeyObservable.getCodeFromEvent(b);this.activationKeys.includes(c)&&(this.activateKeyDown===c?this.doActivationKeyDown(c,!0):(this.activateKeyDown=c,this.doActivationKeyDown(c,!1)),b.value.preventDefault())}},__hndlKeyPress:function(b){if(!this.disabled){const c=q.KeyObservable.getCodeFromEvent(b);this.activateKeyDown===c&&this.activationKeys.includes(c)&&
b.value.preventDefault()}},__hndlKeyUp:function(b){if(!this.disabled){const c=q.KeyObservable.getCodeFromEvent(b);this.activateKeyDown===c&&this.activationKeys.includes(c)&&(this.activateKeyDown="",this.doActivationKeyUp(c),b.value.preventDefault())}},__doDomBlur:function(b){this.disabled||(b=this.activateKeyDown,""!==b&&(this.activateKeyDown="",this.doActivationKeyAborted(b)))},doActivationKeyDown:(b,c)=>{},doActivationKeyUp:function(b){this.doActivated()},doActivationKeyAborted:b=>{}});q.ArrowKeyActivation=
new y("KeyActivation",{doActivationKeyDown:function(b,c){switch(b){case r.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,c))return;break;case r.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,c))return;break;case r.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,c))return;break;case r.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,c))return}this.callSuper(b,c)},doKeyArrowLeftOrUp:(b,c)=>{},doKeyArrowRightOrDown:(b,c)=>{}});q.MouseOver=new y("MouseOver",{initNode:function(b,c){c.mouseOver??(c.mouseOver=
!1);this.callSuper(b,c);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(b){this.mouseOver!==b&&(this.mouseOver=b,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(k,"__doMouseOverOnIdle","idle")))},setDisabled:function(b){this.callSuper(b);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(k,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const b=this.mouseOver;this.__lastOverIdleValue!==b&&(this.__lastOverIdleValue=b,this.doSmoothMouseOver(b))},doSmoothMouseOver:function(b){this.inited&&this.updateUI?.()},doMouseOver:function(b){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(b){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});q.MouseDown=new y("MouseDown",{initNode:function(b,c){c.mouseDown??(c.mouseDown=!1);this.callSuper(b,
c);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(b){this.mouseDown!==b&&(this.mouseDown=b,this.inited&&(b&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(b){b&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(b)},doMouseOver:function(b){this.callSuper(b);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(b){this.callSuper(b);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(b){this.disabled||this.setMouseDown(!0)},doMouseUp:function(b){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(b))},doMouseUpInside:function(b){this.doActivated?.()}});q.MouseOverAndDown=new y("MouseOverAndDown",{include:[q.MouseOver,q.MouseDown]});q.Draggable=new y("Draggable",{initNode:function(b,c){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let g=!0;null!=c.isDraggable&&(g=c.isDraggable,delete c.isDraggable);this.callSuper(b,c);this.setIsDraggable(g)},setIsDraggable:function(b){if(this.isDraggable!==b){this.isDraggable=b;let c;b?c=this.attachToDom:this.inited&&(c=this.detachFromDom);if(c){b=this.getDragViews();let g=b.length;for(;g;){const f=b[--g];c.call(this,f,"__doMouseDown","mousedown");c.call(this,f,"__doContextMenu","contextmenu")}}}},setIsDragging:function(b){this.set("isDragging",
b,!0)},setDragOffsetX:function(b,c){this.dragOffsetX!==b&&(this.dragOffsetX=b,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDragOffsetY:function(b,c){this.dragOffsetY!==b&&(this.dragOffsetY=b,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(b){this.distanceBeforeDrag=b},setDraggableAllowBubble:function(b){this.draggableAllowBubble=b},setCenterOnMouse:function(b){this.centerOnMouse=b},setAllowAbort:function(b){this.allowAbort=b},
getDragViews:function(){return[this]},__doContextMenu:b=>{},__doMouseDown:function(b){const c=q.MouseObservable.getMouseFromEvent(b),g=this.getODE();this.dragInitX=c.x-g.offsetLeft;this.dragInitY=c.y-g.offsetTop;this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(b);b.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(b){this.isDragging?this.stopDrag(b,!1):(this.detachFromDom(w,"__doMouseUp",
"mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(b){b.value===r.CODE_ESC&&this.stopDrag(b,!0)},__doDragCheck:function(b){const c=q.MouseObservable.getMouseFromEvent(b);q.Geometry.measureDistance(c.x,c.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(b))},startDrag:function(b){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(r,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(b)},updateDrag:function(b){this.__lastMousePosition=q.MouseObservable.getMouseFromEvent(b);this.reRequestDragPosition()},__updateDragInitX:function(b){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(b){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(b,c){this.detachFromDom(w,
"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(r,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(b,c){this.disabled||(this.setX(b),this.setY(c))},reRequestDragPosition:function(){const b=this.__lastMousePosition;this.requestDragPosition(b.x-this.dragInitX+this.dragOffsetX,b.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(q=>{const {Class:y,Module:w}=JS,{View:r,KeyActivation:k}=q;var b=q.Button=new w("Button",{include:[q.Activateable,q.UpdateableUI,q.Disableable,q.MouseOverAndDown,k],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(g,f){f.focusable??(f.focusable=!0);f.cursor??(f.cursor="pointer");this.callSuper(g,f)},setFocused:function(g){const f=this.focused;this.callSuper(g);this.inited&&this.focused!==f&&this.updateUI()},doActivationKeyDown:function(g,f){f||this.updateUI()},doActivationKeyUp:function(g){this.callSuper(g);
this.updateUI()},doActivationKeyAborted:function(g){this.callSuper(g);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const g=this.__restoreCursor;g&&(this.setCursor(g),this.__restoreCursor=null);this.activateKeyDown!==k.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});b=q.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[b],setActiveColor:function(g){this.activeColor!==g&&(this.activeColor=g,this.inited&&this.updateUI())},setHoverColor:function(g){this.hoverColor!==g&&(this.hoverColor=g,this.inited&&this.updateUI())},setReadyColor:function(g){this.readyColor!==
g&&(this.readyColor=g,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(g,f=1){this.setOpacity(f);this.setBgColor(g)}});const c=q.SimpleButton=new y("SimpleButton",r,{include:[b],initNode:function(g,f){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(g,
f)}});q.SimpleTextButton=new y("SimpleTextButton",c,{initNode:function(g,f){this.inset=this.outset=0;f.shrinkToFit??(f.shrinkToFit=!1);f.height??(f.height=24);f.textY??(f.textY="middle");this.callSuper(g,f);g=this.textY;f={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof g?f.valign=g:f.y=g;g=this.textView=new q.Text(this,f);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",g,"visible",g,"width",
g,"height",g,"y"])},setInset:function(g){this.set("inset",this.valueFromEvent(g),!0)},setOutset:function(g){this.set("outset",this.valueFromEvent(g),!0)},setText:function(g){this.text!==g&&(this.text=g,this.inited&&(this.textView.setText(g),this.fireEvent("text",g)))},setShrinkToFit:function(g){this.shrinkToFit!==g&&(this.shrinkToFit=g,this.inited&&(this.textView.setWhiteSpace(g?"nowrap":"normal"),this.fireEvent("shrinkToFit",g)))},setTextY:function(g){if(this.textY!==g&&(this.textY=g,this.inited)){const f=
this.textView;this.fireEvent("textY",g);"string"===typeof g?f.setValign(g):(f.setValign(""),f.setY(g))}},__updateContent:function(g){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:f,outset:h,textView:e}=this;this.__updateContentLoopBlock=!0;e.setX(f);this.shrinkToFit?this.setWidth(f+(e.visible&&this.text?e.width:0)+h):e.setWidth(this.width-f-h);this.__updateContentLoopBlock=!1}}});q.TextButton=new y("TextButton",q.PaddedText,{include:[b],initNode:function(g,f){f.focusIndicator??
(f.focusIndicator=!1);f.roundedCorners??(f.roundedCorners=3);f.textAlign??(f.textAlign="center");f.paddingTop??(f.paddingTop=1);f.height??(f.height=23-(f.paddingTop??0));f.activeColor??(f.activeColor="#ddd");f.hoverColor??(f.hoverColor="#eee");f.readyColor??(f.readyColor="#fff");this.callSuper(g,f)}})})(myt);
(q=>{const y=console.warn,{focus:w,mouse:r}=q.global,k={};q.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:b=>k[b]},initNode:function(b,c){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(b,c)},setLastFloatingPanelShown:function(b){this.lastFloatingPanelShown=b},setLastFloatingPanelId:function(b){this.floatingPanelId=b},setFloatingAlign:function(b){this.set("floatingAlign",b,!0)},
setFloatingValign:function(b){this.set("floatingValign",b,!0)},setFloatingAlignOffset:function(b){this.set("floatingAlignOffset",b,!0)},setFloatingValignOffset:function(b){this.set("floatingValignOffset",b,!0)},createFloatingPanel:function(b,c,g){b=b??this.floatingPanelId;g=g??{};g.panelId=b;return k[b]=new c(null,g)},getFloatingPanel:function(b){return k[b??this.floatingPanelId]},toggleFloatingPanel:function(b){this.getFloatingPanel(b??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(b):
this.showFloatingPanel(b)},showFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.show(this),this.setLastFloatingPanelShown(b)},hideFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(b){this.callSuper?.()},notifyPanelHidden:function(b){this.callSuper?.()},getFloatingAlignForPanel:function(b){return this.floatingAlign},getFloatingValignForPanel:function(b){return this.floatingValign},
getFloatingAlignOffsetForPanel:function(b){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(b){return this.floatingValignOffset},getNextFocus:function(){const b=this.lastFloatingPanelShown;return b?.isShown()?b:this.callSuper?.()},getNextFocusAfterPanel:function(b){return this},getPrevFocusAfterPanel:function(b){return this}});q.FloatingPanel=new JS.Class("FloatingPanel",q.View,{include:[q.RootView],initNode:function(b,c){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=
this.hideOnBlur=this.hideOnMouseDown=!0;c.visible=c.focusIndicator=!1;c.focusable=c.focusCage=!0;this.callSuper(b,c)},setOwner:function(b){this.owner=b},setPanelId:function(b){this.panelId=b},setIgnoreOwnerForHideOnMouseDown:function(b){this.ignoreOwnerForHideOnMouseDown=b},setHideOnBlur:function(b){this.hideOnBlur=b},setHideOnMouseDown:function(b){this.hideOnMouseDown=b},__doMouseDown:function(b){var c=b.value;b=c.pageX;c=c.pageY;this.containsPoint(b,c)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(b,
c)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(b){this.hideOnMouseDown&&this.hide(b)},focus:function(b){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(b);else{const c=this.getFirstFocusableDescendant();c===this?this.callSuper(b):c.focus(b)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){(b=b.value)&&!this.isAncestorOf(b)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||
this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||this.hide(!0)},isShown:function(){return this.visible},show:function(b){this.isShown()||(this.bringToFront(),this.updateLocation(b),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(r,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(b){this.isShown()&&(this.detachFromDom(r,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),
b||this.restoreFocus(),this.setOwner())},restoreFocus:function(){this.owner?.focus()},updateLocation:function(b){this.setOwner(b);this.updateLocationX(b);this.updateLocationY(b)},updateLocationX:function(b){const c=b.getFloatingAlignForPanel(this),g=typeof c;let f;if("string"===g)switch(f=b.getPagePosition().x+b.getFloatingAlignOffsetForPanel(this),c){case "outsideRight":f+=b.width;break;case "insideRight":f+=b.width-this.width;break;case "outsideLeft":f-=this.width;break;case "insideLeft":break;
default:y("Invalid align value",g,c)}else"number"===g?f=c:y("Invalid align type",g,c);this.setX(f)},updateLocationY:function(b){const c=b.getFloatingValignForPanel(this),g=typeof c;let f;if("string"===g)switch(f=b.getPagePosition().y+b.getFloatingValignOffsetForPanel(this),c){case "outsideBottom":f+=b.height;break;case "insideBottom":f+=b.height-this.height;break;case "outsideTop":f-=this.height;break;case "insideTop":break;default:y("Invalid valign value",g,c)}else"number"===g?f=c:y("Invalid valign type",
g,c);this.setY(f)}})})(myt);
(q=>{const {Class:y,Module:w}=JS,r=Math,k=q.global,b=k.focus,c=k.keys,{LIST_KEYS:g,CODE_ESC:f}=c,h=d=>{var a=d.itemConfig??[];const l=a.length,{items:u,defaultItemClass:n,fixedWidth:p}=d,t=u.length,z=0<p,F=d.getContentView(),I=F.getLayouts();I.forEach(B=>{B.incrementLockedCounter()});var L=F.getODE();const {parentNode:A,nextSibling:D}=L;A.removeChild(L);let v=0;const m={listView:d};z&&(m.width=p,m.enableEllipsis=!0);for(;l>v;++v){var x=a[v];const B=x.klass??n;x=x.attrs??{};let E=u[v];E&&!E.isA(B)&&
(E.destroy(),E=null);E??=u[v]=new B(F,{...m});E&&(E.callSetters(x),E.__LAYOUT_IDX=v)}A.insertBefore(L,D);if(z)a=p;else for(a=d.minWidth,v=0;l>v;)L=u[v++],L.syncToDom(),a=r.max(a,L.getMinimumWidth());for(;t>v;)u[v++].destroy();u.length=l;if(!z)for(v=0;l>v;)d.updateItemWidth(u[v++],a);d.updateContentWidth(F,a);I.forEach(B=>{B.sortSubviews((E,J)=>E.__LAYOUT_IDX-J.__LAYOUT_IDX);B.decrementLockedCounter();B.update()})},e=q.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(d){this.listView=
d},getMinimumWidth:()=>0,syncToDom:()=>{}});q.ListView=new y("ListView",q.FloatingPanel,{initNode:function(d,a){this.items=[];this.maxHeight=-1;this.minWidth=0;a.defaultItemClass??(a.defaultItemClass=q.ListViewItem);a.overflow??(a.overflow="autoy");a.bgColor??(a.bgColor="#ccc");a.boxShadow??(a.boxShadow=q.Button.FOCUS_SHADOW);this.callSuper(d,a);h(this);this.buildLayout(this.getContentView())},buildLayout:d=>{new q.SpacedLayout(d,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(d){this.minWidth=
d},setDefaultItemClass:function(d){this.defaultItemClass=d},setItemConfig:function(d){this.itemConfig=d;this.inited&&h(this)},getContentView:function(){return this},setMaxHeight:function(d){this.maxHeight!==d&&(this.maxHeight=d,this.inited&&(this.fireEvent("maxHeight",d),this.setHeight(this.height)))},setHeight:function(d){this.callSuper(0<=this.maxHeight?r.min(this.maxHeight,d):d);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(d){this?.owner.doItemActivated(d)},
getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??this.callSuper()},getFirstFocusableItem:function(){return this.items.find(d=>d.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(d=>d.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(d,a)=>{d.setWidth(a)},updateContentWidth:(d,a)=>{d.setWidth(a)}});q.ListViewAnchor=new w("ListViewAnchor",
{include:[q.FloatingPanelAnchor,q.ArrowKeyActivation],initNode:function(d,a){a.listViewClass??(a.listViewClass=q.ListView);a.listViewAttrs??(a.listViewAttrs={});a.itemConfig??(a.itemConfig=[]);a.activationKeys??(a.activationKeys=g);this.callSuper(d,a)},setListViewClass:function(d){this.listViewClass=d},setListViewAttrs:function(d){this.listViewAttrs=d},setItemConfig:function(d){this.itemConfig=d},getFloatingValignForPanel:function(d){var a=d.height,l=this.getPagePosition().y,u=k.windowResize.getHeight()-
this.getPagePosition().y-this.height;d=l-a;a=u-a;l=l>u;u=this.floatingValign;switch(u){case "outsideBottom":0>a&&l&&(u="outsideTop");break;case "insideBottom":0>a&&l&&(u="insideTop");break;case "outsideTop":0>d&&!l&&(u="outsideBottom");break;case "insideTop":0>d&&!l&&(u="insideBottom")}return u},doItemActivated:function(d){this.hideFloatingPanel()},getFloatingPanel:function(d){return this.callSuper(d)??this.createFloatingPanel(d,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(d){const a=
this.getFloatingPanel(d);a&&(a.setItemConfig(this.itemConfig),this.callSuper(d))},doActivationKeyDown:function(d,a){d===f?this.hideFloatingPanel():this.callSuper(d,a)},doKeyArrowLeftOrUp:function(d,a){this.focusToLastItem()},doKeyArrowRightOrDown:function(d,a){this.focusToFirstItem()},doActivationKeyUp:function(d){if(d!==f)switch(this.callSuper(d),d){case c.CODE_ARROW_LEFT:case c.CODE_ARROW_UP:this.focusToLastItem();break;case c.CODE_ARROW_RIGHT:case c.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const d=
this.getFloatingPanel();d?.isShown()&&d.focusToLastItem()},focusToFirstItem:function(){const d=this.getFloatingPanel();d?.isShown()&&d.focusToFirstItem()},updateEntryAttr:function(d,a,l){(d=this.getEntryByValue(d))&&(d.attrs[a]=l);return d},getEntryByValue:function(d){return this.itemConfig.find(a=>a?.attrs&&a.attrs.value===d)}});q.ListViewItem=new y("ListViewItem",q.TextButton,{include:[e,q.ArrowKeyActivation],initNode:function(d,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor=
"#fff");a.readyColor??(a.readyColor="#eee");a.paddingLeft??(a.paddingLeft=8);a.paddingRight??(a.paddingRight=8);a.textAlign??(a.textAlign="left");a.roundedCorners??(a.roundedCorners=0);a.activationKeys??(a.activationKeys=g);a.focusIndicator??(a.focusIndicator=!0);const l=this.__enableEllipsis=a.enableEllipsis;delete a.enableEllipsis;this.callSuper(d,a);this.addDomClass("mytButtonText");l&&this.enableEllipsis()},setText:function(d){this.callSuper(d);this.__enableEllipsis&&this.setTooltip(this.text)},
syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},getMinimumWidth:function(){return r.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(d,a){d===f?this.listView.owner.hideFloatingPanel():this.callSuper(d,a)},doKeyArrowLeftOrUp:function(d,a){b.prev()},doKeyArrowRightOrDown:function(d,a){b.next()}});q.ListViewSeparator=new y("ListViewSeparator",q.View,{include:[e],initNode:function(d,a){a.height??(a.height=1);
a.bgColor??(a.bgColor="#666");this.callSuper(d,a)}})})(myt);
(q=>{const y=q.AccessorSupport,w=y.generateSetterName,r={},k=q.BAG=new JS.Class("BAG",{include:[y,q.Destructible,q.Observable],extend:{getGroup:(b,c)=>{if(b&&c){let g;return(g=r[b]??(r[b]={}))[c]??(g[c]=new k(b,c))}},removeGroup:(b,c)=>{if(b&&c&&(b=r[b])){const g=b[c];g&&delete b[c];return g}}},initialize:function(b,c){this.__nodes=[];this.trueNode=null;this.attrName=b;this.groupId=c},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&k.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(b){this.set("groupId",b,!0)},setAttrName:function(b){this.set("attrName",b,!0)},setTrueNode:function(b){this.set("trueNode",b,!0)},getNodes:function(){return this.__nodes},register:function(b){b&&!this.isRegistered(b)&&(this.__nodes.push(b),b[this.attrName]&&this.setTrue(b))},unregister:function(b){if(b){const c=this.__nodes,g=c.indexOf(b);-1<g&&c.splice(g,1);this.trueNode===b&&this.setTrueNode(null);0===c.length&&
this.destroy()}},setTrue:function(b){if(b&&this.trueNode!==b&&this.isRegistered(b)){const c=this.attrName,g=w(c),f=this.__nodes;let h=f.length;for(this.setTrueNode(b);h;){const e=f[--h];if(b===e){if(!e[c])e[g](!0)}else if(e[c])e[g](!1)}}},setFalse:function(b){b&&this.trueNode===b&&(b[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(b){return this.__nodes.includes(b)}});q.BAGMembership=new JS.Module("BAGMembership",{initNode:function(b,c){this.__bags=[];this.callSuper(b,c)},destroy:function(){const b=
this.__bags;let c=b.length;for(;c;){const g=b[--c];this.removeFromBAG(g.attrName,g.groupId)}this.callSuper()},isRegisteredWithBAG:function(b){return this.__bags.includes(b)},getBAG:(b,c)=>k.getGroup(b,c),addToBAG:function(b,c){c=this.getBAG(b,c);this.isRegisteredWithBAG(c)||(this.__bags.push(c),c.register(this),this.isAttachedTo(this,"__updateForBAG",b)||this.attachTo(this,"__updateForBAG",b))},removeFromBAG:function(b,c){c=this.getBAG(b,c);if(this.isRegisteredWithBAG(c)){const g=this.__bags;let f=
g.length,h=!0;for(;f;){const e=g[--f];e===c?(g.splice(f,1),c.unregister(this)):e.attrName===b&&(h=!1)}h&&this.detachFrom(this,"__updateForBAG",b)}},__updateForBAG:function(b){this.__bags.forEach(c=>{if(c.attrName===b.type)c[b.value?"setTrue":"setFalse"](this)})}})})(myt);
(q=>{const y=w=>{const r=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<r.length?" ":"")+r)};q.Radio=new JS.Class("Radio",q.Text,{include:[q.SimpleButtonStyle,q.BAGMembership],initNode:function(w,r){r.selected??(r.selected=!1);r.groupId??(r.groupId=q.generateGuid());r.focusIndicator??(r.focusIndicator=!1);r.activeColor??(r.activeColor="inherit");r.hoverColor??(r.hoverColor="inherit");r.readyColor??(r.readyColor="inherit");const k=r.value;delete r.value;this.callSuper(w,
r);this.setValue(k);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);q.FontAwesome.registerForNotification(this);y(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const r=this.getBAG("selected",this.groupId);if(r){const k=r.getNodes();let b=k.length;for(;b;){const c=k[--b];if(c.optionValue===w){r.setTrue(c);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),y(this)))},setGroupId:function(w){if(this.groupId!==w){const r=this.groupId;this.groupId=w;r&&this.removeFromBAG("selected",r);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&y(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,r=1){this.setOpacity(r);this.setTextColor(w)}})})(myt);
(q=>{const y=JS.Module,w=q.global.keys,r=q.Selectable=new y("Selectable",{setSelected:function(b){b=this.valueFromEvent(b);this.selected!==b&&(this.selected=b,this.inited&&this.fireEvent?.("selected",b))},isSelected:function(){return!!this.selected},canSelect:b=>!0,canDeselect:b=>!0}),k=q.SelectionManager=new y("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(b,c){this.__selected={};this.__lastSelectedItem=null;c.selectedCount=
0;c.itemSelectionId??(c.itemSelectionId="id");c.maxSelected??(c.maxSelected=-1);this.callSuper(b,c)},setItemSelectionId:function(b){this.itemSelectionId=b},setMaxSelected:function(b){this.maxSelected=b},setSelectedCount:function(b){this.selectedCount!==b&&(this.selectedCount=b,this.inited&&this.fireEvent("selectedCount",b))},isAddMode:()=>k.isAddMode(),isToggleMode:()=>k.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(b){b&&!this.isSelectedItem(b)&&this.canSelectItem(b)&&
(b.setSelected(!0),this.__selected[b[this.itemSelectionId]]=b,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=b,this.doSelected(b),this.fireEvent("itemSelected",b))},doSelected:b=>{},selectById:function(b){this.select(this.getSelectableItem(b))},canSelectItem:function(b){const {maxSelected:c,selectedCount:g}=this;if(0===c)return!1;if(1===c){if(0<g&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<c&&g>=c)return!1;return b.canSelect(this)},selectAll:function(){const b=
this.getSelectableItems();let c=b.length;for(;c;)this.select(b[--c])},deselect:function(b){this.isSelectedItem(b)&&this.canDeselectItem(b)&&(b.setSelected(!1),delete this.__selected[b[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===b&&(this.__lastSelectedItem=null),this.doDeselected(b),this.fireEvent("itemDeselected",b))},doDeselected:b=>{},deselectById:function(b){this.deselect(this.getSelectableItem(b))},canDeselectItem:function(b){return b.canDeselect(this)},
deselectAll:function(){const b=this.__selected;for(const c in b)this.deselect(b[c])},isSelectedItem:b=>b?b.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const b=[],c=this.getSubviews();let g=c.length;for(;g;){const f=c[--g];f.isA(r)&&b.push(f)}return b},getSelectableItems:function(){const b=this.getManagedItems();let c=b.length;for(;c;)b[--c].canSelect(this)||b.splice(c,1);return b},getSelectableItem:function(b){const c=
this.getSelectableItems(),g=this.itemSelectionId;let f=c.length;for(;f;){const h=c[--f];if(h[g]===b)return h}}})})(myt);
(q=>{const y=JS.Class,{View:w,SizeToParent:r}=q,k=q.TabSlider=new y("TabSlider",w,{include:[q.Selectable,q.Disableable,r],initNode:function(c,g){const f=this;let h;g.defaultPlacement="wrapper.container";g.percentOfParentWidth=100;g.expansionState="collapsed";g.tabId??(g.tabId=q.generateGuid());g.tabContainer??(g.tabContainer=c);g.selected??(g.selected=!1);g.buttonClass??(g.buttonClass=q.SimpleButton);g.zIndex??(g.zIndex=0);g.buttonHeight??(g.buttonHeight=30);g.fillColorSelected??(g.fillColorSelected=
"#666");g.fillColorHover??(g.fillColorHover="#eee");g.fillColorActive??(g.fillColorActive="#ccc");g.fillColorReady??(g.fillColorReady="#fff");g.minContainerHeight??(g.minContainerHeight=100);g.selected&&(h=!0,delete g.selected);f.callSuper(c,g);f.button=new f.buttonClass(f,{ignorePlacement:!0,zIndex:1,height:f.buttonHeight,focusIndicator:!0,groupId:f.parent.parent.groupId,percentOfParentWidth:100,hoverColor:f.fillColorHover,activeColor:f.fillColorActive,readyColor:f.fillColorReady},[r,{doActivated:()=>
{const e=f.tabContainer;f.isSelected()&&1!==e.maxSelected?e.deselect(f):e.select(f)},updateUI:function(){this.callSuper();f.selected&&-1!==f.tabContainer.maxSelected&&this.setBgColor(f.fillColorSelected);f.notifyButtonRedraw()}}]);c=f.wrapper=new w(f,{ignorePlacement:!0,y:f.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[r,{setHeight:function(e){this.callSuper(Math.round(e))},setWidth:function(e){this.callSuper(e);this.inited&&this.container.setWidth(e)}}]);new q.SizeToChildren(c.container=
new w(c),{axis:"y"});f.constrain("__updateHeight",[c,"y",c,"height"]);h&&f.tabContainer.select(f);!0===g.disabled&&f.setDisabled(!0);f.setHeight(f.getCollapsedHeight())},setSelected:function(c){this.callSuper(c);this.button?.updateUI()},setTabId:function(c){this.tabId=c},setTabContainer:function(c){this.tabContainer=c},setMinContainerHeight:function(c){this.minContainerHeight=c},setButtonClass:function(c){this.buttonClass=c},setFillColorSelected:function(c){this.fillColorSelected=c},setFillColorHover:function(c){this.fillColorHover=
c},setFillColorActive:function(c){this.fillColorActive=c},setFillColorReady:function(c){this.fillColorReady=c},setButtonHeight:function(c){this.buttonHeight!==c&&(this.buttonHeight=c,this.button&&(this.button.setHeight(c),this.wrapper.setY(c)))},setExpansionState:function(c){if(this.expansionState!==c){this.expansionState=c;this.inited&&this.fireEvent("expansionState",c);const g=this.wrapper;g&&("expanded"===c?(g.setMaskFocus(!1),g.setOverflow("auto")):"expanding"===c?g.setVisible(!0):"collapsed"===
c?g.setVisible(!1):"collapsing"===c&&(g.setMaskFocus(!0),g.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(c){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(c){const g=this,f=g.wrapper;c-=g.getCollapsedHeight();g.setExpansionState("expanding");f.stopActiveAnimators();if(f.height!==c){const h=g.tabContainer.duration;1===h?(f.setHeight(c),g.setExpansionState("expanded")):f.animate({attribute:"height",
to:c,duration:h}).next(e=>{g.setExpansionState("expanded")})}else g.setExpansionState("expanded")},collapse:function(){const c=this,g=c.wrapper;c.setExpansionState("collapsing");g.stopActiveAnimators();if(0!==g.height){const f=c.tabContainer.duration;1===f?(g.setHeight(0),c.setExpansionState("collapsed")):g.animate({attribute:"height",to:0,duration:f}).next(h=>{c.setExpansionState("collapsed")})}else c.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});q.TextTabSlider=new y("TextTabSlider",k,{initNode:function(c,g){g.labelTextColorChecked??(g.labelTextColorChecked="#fff");g.labelTextColor??(g.labelTextColor="#333");this.callSuper(c,g);this.button.label=new q.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(c){this.labelTextColorChecked=c},setLabelTextColor:function(c){this.labelTextColor=c},setText:function(c){this.text!==c&&(this.text=c,this.button?.label?.setText(c))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const b=q.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[q.SelectionManager],
extend:{SPACING:1},initNode:function(c,g){const f=this;f._tabSliders=[];g.defaultPlacement="container";g.spacing??(g.spacing=b.SPACING);g.overflow??(g.overflow="autoy");g.itemSelectionId??(g.itemSelectionId="tabId");g.maxSelected??(g.maxSelected=1);g.duration??(g.duration=500);f.updateLayout=q.debounce(f.updateLayout);f.callSuper(c,g);c=f.container=new w(f,{ignorePlacement:!0,percentOfParentWidth:100},[r,{subnodeAdded:function(h){this.callSuper(h);h instanceof k&&(f._tabSliders.push(h),f.attachTo(h,
"updateLayout","selected"))},subnodeRemoved:function(h){if(h instanceof k){const e=f._tabSliders,d=e.indexOf(h);-1<d&&(f.detachFrom(h,"updateLayout","selected"),e.splice(d,1))}this.callSuper(h)}}]);c.layout=new q.SpacedLayout(c,{axis:"y",spacing:f.spacing,collapseParent:!0});f.attachTo(f,"updateLayout","height")},setSpacing:function(c){this.spacing!==c&&(this.spacing=c,this.layout?.setSpacing(c))},setDuration:function(c){this.duration=c},updateLayout:function(c,g){c=this._tabSliders;for(var f=c.length,
h=f,e=0,d=0,a=0;h;){var l=c[--h];l.visible&&(++a,l.selected?(e+=l.getMinimumExpandedHeight(),d+=l.getPreferredExpandedHeight()):(l=l.getCollapsedHeight(),e+=l,d+=l))}h=this.container.layout;a=h.inset+h.outset+h.spacing*(a-1);d+=a;h=this.height;e=e+a>h;a=d>h;l=this.duration;d-=h;0<g&&this.setDuration(g);for(h=f;h;)if(f=c[--h],f.visible)if(f.selected){let u;if(e)u=f.getMinimumExpandedHeight();else if(a){const n=f.getPreferredExpandedHeight(),p=f.getMinimumExpandedHeight();u=n-d;p>u?(d-=n-p,u=p):d=0}else u=
f.getPreferredExpandedHeight();f.expand(u)}else f.collapse();0<g&&this.setDuration(l)}})})(myt);
(q=>{const y=k=>{const b=[];switch(k.tabContainer.location){case "top":b.push("TopLeft","TopRight");break;case "bottom":b.push("BottomLeft","BottomRight");break;case "left":b.push("TopLeft","BottomLeft");break;case "right":b.push("TopRight","BottomRight")}b.forEach(c=>{k["setRounded"+c+"Corner"](k.cornerRadius||0)})},w=q.Tab=new JS.Class("Tab",q.SimpleTextButton,{include:[q.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(k,b){b.tabId??(b.tabId=q.generateGuid());b.tabContainer??(b.tabContainer=
k);let c;b.selected&&(c=!0,delete b.selected);b.inset??(b.inset=w.INSET);b.outset??(b.outset=w.OUTSET);b.selectedColor??(b.selectedColor="#fff");b.hoverColor??(b.hoverColor="#eee");b.activeColor??(b.activeColor="#aaa");b.readyColor??(b.readyColor="#ccc");b.labelTextSelectedColor??(b.labelTextSelectedColor="#333");b.height??(b.height=24);b.focusIndicator??(b.focusIndicator=!1);b.cornerRadius??(b.cornerRadius=6);this.callSuper(k,b);c&&this.tabContainer.select(this);y(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(k){this.tabId=k},setTabContainer:function(k){this.tabContainer=k},setSelectedColor:function(k){this.selectedColor=k},setLabelTextColor:function(k){this.labelTextColor=k},setCornerRadius:function(k){this.cornerRadius=k;this.inited&&y(this)},setLabelTextSelectedColor:function(k){this.labelTextSelectedColor=k;this.inited&&this.selected&&this.textView.setTextColor(k)},setSelected:function(k){this.callSuper(k);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),r=q.TabContainer=new JS.Module("TabContainer",{include:[q.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(k,b){this.__tabs=[];b.spacing??(b.spacing=r.SPACING);b.inset??(b.inset=r.INSET);b.location??(b.location="top");b.itemSelectionId??
(b.itemSelectionId="tabId");b.maxSelected??(b.maxSelected=1);this.callSuper(k,b);this.layout=new q.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(k){this.location=k},setSpacing:function(k){this.spacing!==k&&(this.spacing=k,this.layout?.setSpacing(k))},setInset:function(k){this.inset!==k&&(this.inset=k,this.layout?.setInset(k))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(k){this.callSuper(k);if(k.isA(w))switch(this.__tabs.push(k),this.location){case "top":k.setValign("bottom");break;case "bottom":k.setValign("top");break;case "left":k.setAlign("right");break;case "right":k.setAlign("left")}},subnodeRemoved:function(k){if(k.isA(w)){const b=this.__tabs,c=b.indexOf(k);-1<c&&b.splice(c,1)}this.callSuper(k)}})})(myt);
(q=>{const y=JS.Class,w=Math.min,r=Array.isArray,{SizeToDom:k,View:b,Disableable:c,KeyObservable:g,Button:{FOCUS_SHADOW:f},global:{keys:h}}=q,e=(p,t,z)=>{p[z]!==t&&(p[z]=t,p.getIDS()[z]=t+"px",p.inited&&(p.fireEvent(z,t),p.sizeViewToDom()))},d=(p,t,z)=>{p[t]!==z&&(p.getIDE()[t]=p[t]=z,p.inited&&p.fireEvent(t,z))},a=q.NativeInputWrapper=new y("NativeInputWrapper",b,{include:[c,q.InputObservable],initNode:function(p,t){t.tagName??(t.tagName="input");t.focusable??(t.focusable=!0);this.callSuper(p,t);
this.addDomClass("mytNativeInput")},createOurDomElement:function(p){p=this.callSuper(p);this.inputType&&((r(p)?p[1]:p).type=this.inputType);return p},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){this.value!==p&&(this.value=p,this.setDomValue(p),this.inited&&this.fireEvent("value",p))},getDomValue:function(){return this.getIDE().value},setDomValue:function(p){const t=this.getIDE();t.value!==p&&(t.value=p)}}),l=q.InputSelectOption=new y("InputSelectOption",
b,{include:[c,q.Selectable],createOurDomElement:p=>document.createElement("option"),setSelected:function(p){p=this.valueFromEvent(p);const t=this.getIDE();t.selected!==p&&(t.selected=p)},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){d(this,"value",p)},setLabel:function(p){this.label!==p&&(this.getIDE().textContent=this.label=p,this.inited&&this.fireEvent("label",p))},isSelected:function(){return this.getIDE().selected},canSelect:function(p){return!this.disabled&&
!this.getIDE().selected&&this.parent===p},canDeselect:function(p){return!this.disabled&&this.getIDE().selected&&this.parent===p}}),u=q.BaseInputText=new y("BaseInputText",a,{include:[q.TextSupport],initNode:function(p,t){t.bgColor??(t.bgColor="transparent");t.spellcheck??(t.spellcheck=!1);this.callSuper(p,t);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(p){this.callSuper(p);this.setValue(p)},
setSpellcheck:function(p){d(this,"spellcheck",p)},setMaxLength:function(p){d(this,"maxLength",null==p||0>p?void 0:p)},setAllowedChars:function(p){this.allowedChars=p},setPlaceholder:function(p){d(this,"placeholder",p)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(f)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(p){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(p){const t=
p.value,z=this.allowedChars;z&&!z.includes(g.getKeyFromEvent(p))&&t.preventDefault();this.filterInputPress(t)},filterInput:p=>p,filterInputPress:p=>{},__syncToDom:function(p){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const p=document.selection.createRange();p.moveStart("character",-this.getDomValue().length);return p.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(p,t){if(null==t||p===t){if(this.getCaretPosition()===p)return;
t=p}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(p,t):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",t),z.moveStart("character",p),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const p=this.getIDE();return{start:p.selectionStart,startElem:p,end:p.selectionEnd,endElem:p}},setSelection:function(p){p&&
this.setCaretPosition(p.start,p.end)},saveSelection:function(p){this._selRange=p||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=q.InputText=new y("InputText",u,{include:[q.SizeHeightToDom],initNode:function(p,t){this.inputType=!0===t.password?"password":"text";this.callSuper(p,t);this.setCaretToEnd()},setPassword:function(p){this.set("password",p,!0);this.inited&&(this.getIDE().type=p?"password":"text")}});q.EditableText=new y("EditableText",
u,{include:[k],initNode:function(p,t){t.tagName??(t.tagName="div");t.inputType=null;t.whiteSpace??(t.whiteSpace="pre");t.contentEditable??(t.contentEditable=!0);this.callSuper(p,t);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(p){e(this,p,"minWidth")},setMinHeight:function(p){e(this,p,"minHeight")},setPadding:function(p){this.setPaddingTop(p);this.setPaddingRight(p);
this.setPaddingBottom(p);this.setPaddingLeft(p)},setPaddingTop:function(p){e(this,p,"paddingTop")},setPaddingRight:function(p){e(this,p,"paddingRight")},setPaddingBottom:function(p){e(this,p,"paddingBottom")},setPaddingLeft:function(p){e(this,p,"paddingLeft")},setContentEditable:function(p){d(this,"contentEditable",p)},filterInputPress:function(p){const t=this.maxLength;0<=t&&this.getCharacterCount()===t&&p.preventDefault();this.callSuper(p)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(p){const t=this.getIDE();t.innerHTML!==p&&(t.innerHTML=p,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(p){g.isEnterKeyEvent(p)&&(p.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(p){this.callSuper(p);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(p,t){if(null==t||p===t){if(this.getCaretPosition()===p)return;t=p}this.saveSelection({start:p,startElem:this.getIDE().firstChild,end:t,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(p){this.saveSelection();return!0},getSelection:function(){let p;if(window.getSelection){const t=window.getSelection();if(0<t.rangeCount){if(t.extentNode===
this.getIDE())return;p=t.getRangeAt(0)}}else document.selection&&(p=document.selection.createRange());return{start:p?p.startOffset:0,startElem:p?p.startContainer:this.getIDE().firstChild,end:p?p.endOffset:0,endElem:p?p.endContainer:this.getIDE().firstChild}},setSelection:function(p){if(p){const {startElem:t,endElem:z}=p;if(t&&t.parentNode&&z&&z.parentNode){const F=document.createRange();F.setStart(t,w(p.start,t.length));F.setEnd(z,w(p.end,z.length));window.getSelection?(p=window.getSelection(),0<
p.rangeCount&&p.removeAllRanges(),p.addRange(F)):document.selection&&F.select()}}}});q.InputTextArea=new y("InputTextArea",u,{initNode:function(p,t){t.tagName??(t.tagName="textarea");t.inputType=null;t.resize??(t.resize="none");t.wrap??(t.wrap="soft");this.callSuper(p,t)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(p){const t=this;t.resize!==p&&(p=t.resize=t.getIDS().resize=p||"none",t.inited&&t.fireEvent("resize",p),"none"!==p&&(t.__resizeObserver??
(t.__resizeObserver=new ResizeObserver(()=>{t.doResize()}))).observe(t.getIDE()))},setWrap:function(p){d(this,"wrap",p)},doResize:function(){const p=this.resize;"both"!==p&&"horizontal"!==p||k.sizeWidth(this);"both"!==p&&"vertical"!==p||k.sizeHeight(this)}});q.ComboBox=new y("ComboBox",n,{include:[q.Activateable,q.KeyActivation,q.ListViewAnchor],initNode:function(p,t){this.filterItems=!0;t.activationKeys??(t.activationKeys=[h.CODE_ENTER,h.CODE_ESC,h.CODE_ARROW_UP,h.CODE_ARROW_DOWN]);t.bgColor??(t.bgColor=
"#fff");t.borderWidth??(t.borderWidth=1);t.borderStyle??(t.borderStyle="solid");t.floatingAlignOffset??(t.floatingAlignOffset=t.borderWidth);t.fullItemConfig??(t.fullItemConfig=[]);t.listViewAttrs={...t.listViewAttrs,maxHeight:t.listViewAttrs?.maxHeight??99};this.callSuper(p,t)},setFullItemConfig:function(p){this.fullItemConfig=p},setFilterItems:function(p){this.filterItems=p},__syncToDom:function(p){const t=this.value;this.callSuper(p);t!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(p){const t=
this.getFloatingPanel(p);if(t){let F;if(this.filterItems){F=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const I=this.fullItemConfig,L=I.length;for(let A=0;L>A;){const D=I[A++],v=D.attrs.text.toLowerCase(),m=v.indexOf(z);0===m?v!==z&&F.push(D):0<m&&F.push(D)}}else F=this.fullItemConfig;0<F.length?(t.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(F),this.callSuper(p)):this.hideFloatingPanel(p)}},doItemActivated:function(p){this.setValue(null==p.value?p.text:p.value);this.callSuper(p)},
doActivated:function(){this.toggleFloatingPanel()}});q.InputSelect=new y("InputSelect",a,{include:[k],initNode:function(p,t){t.tagName??(t.tagName="select");t.inputType=null;t.multiple??(t.multiple=!1);t.size??(t.size=t.multiple?4:1);this.callSuper(p,t);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(p){d(this,"multiple",p)},setSize:function(p){d(this,"size",p)},setOptions:function(p){this.destroyAllOptions();r(p)&&p.forEach(t=>{this.addOption(t)})},getOptions:function(){return this.getSubviews().slice()},
setValue:function(p){r(p)&&q.areArraysEqual(p,this.value)||this.value===p||(this.value=p,this.inited&&this.fireEvent("value",p))},subviewAdded:function(p){p instanceof l||(q.dumpStack("Subview unsupported. Destroying it"),p.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(f)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(p=>p.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(p=>
p.value)},getOptionForValue:function(p){return this.getOptions().find(t=>t.value===p)},addOption:function(p){return new l(this,p)},destroyAllOptions:function(){this.getOptions().forEach(p=>{p.destroy()})},destroyOptionWithValue:function(p){if(p=this.getOptionForValue(p))if(p.destroy(),p.destroyed)return!0;return!1},deselectAll:function(){let p=!1;this.getOptions().forEach(t=>{t.isSelected()&&(t.setSelected(!1),p=!0)});p&&this.__doChanged()},selectValues:function(p){(r(p)?p:[p]).forEach(t=>{this.selectValue(t)})},
selectValue:function(p){this.select(this.getOptionForValue(p))},select:function(p){p?.canSelect(this)&&(p.setSelected(!0),this.__syncToDom())},deselectValue:function(p){this.deselect(this.getOptionForValue(p))},deselect:function(p){p?.canDeselect(this)&&(p.setSelected(!1),this.__syncToDom())},__doChanged:function(p){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(q=>{const y=JS.Module,w=Math.round;var r=q.ValueComponent=new y("ValueComponent",{initNode:function(b,c){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(b,c)},setValueFilter:function(b){this.valueFilter=b;this.inited&&b&&this.setValue(this.value)},setValue:function(b){this.valueFilter&&(b=this.valueFilter(b));this.value!==b&&(this.value=b,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(b,c){const g=this.valueFilter;
this.setValueFilter(g?"last"===c?f=>b(g(f)):f=>g(b(f)):b)}});const k=q.RangeComponent=new y("RangeComponent",{include:[r],setLowerValue:function(b){this.setValue({lower:b,upper:this.value&&void 0!==this.value.upper?this.value.upper:b})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(b){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:b,upper:b})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(b){if(b){var c=
this.value;const h=c?c.lower:void 0;c=c?c.upper:void 0;this.valueFilter&&(b=this.valueFilter(b));if(b.lower!==h||b.upper!==c){var g;(g=b).lower??(g.lower=b.upper);var f;(f=b).upper??(f.upper=b.lower);void 0!==b.lower&&void 0!==b.upper&&b.lower>b.upper&&(g=b.lower,b.lower=b.upper,b.upper=g);this.value=b;this.inited&&(this.fireEvent("value",this.getValue()),b.lower!==h&&this.fireEvent("lowerValue",b.lower),b.upper!==c&&this.fireEvent("upperValue",b.upper))}}else this.callSuper(b)},getValueCopy:function(){const b=
this.value;return{lower:b.lower,upper:b.upper}}});r=q.BoundedValueComponent=new y("BoundedValueComponent",{include:[r],initNode:function(b,c){const g=this;g.appendToEarlyAttrs("snapToInt","minValue","maxValue");c.snapToInt??(c.snapToInt=!0);c.valueFilter||(c.valueFilter=f=>{var h=g.maxValue;if(null!=h&&f>h)return h;h=g.minValue;return null!=h&&f<h?h:f});g.callSuper(b,c)},setSnapToInt:function(b){this.snapToInt!==b&&(this.snapToInt=b,this.inited&&(this.fireEvent("snapToInt",b),b&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(b){this.snapToInt&&null!=b&&(b=w(b));if(this.minValue!==b){const c=this.maxValue;null!=c&&b>c&&(b=c);this.minValue!==b&&(this.minValue=b,this.inited&&(this.fireEvent("minValue",b),this.setValue(this.value)))}},setMaxValue:function(b){this.snapToInt&&null!=b&&(b=w(b));if(this.maxValue!==b){const c=this.minValue;null!=c&&b<c&&(b=c);this.maxValue!==b&&(this.maxValue=b,this.inited&&(this.fireEvent("maxValue",b),this.setValue(this.value)))}},
setValue:function(b){this.callSuper(this.snapToInt&&null!=b&&!isNaN(b)?w(b):b)}});q.BoundedRangeComponent=new y("BoundedRangeComponent",{include:[r,k],initNode:function(b,c){const g=this;c.valueFilter||(c.valueFilter=f=>{if(f){const h=g.maxValue,e=g.minValue;null!=h&&f.upper>h&&(f.upper=h);null!=e&&f.lower<e&&(f.lower=e)}return f});g.callSuper(b,c)},setValue:function(b){this.snapToInt&&null!=b&&(null==b.lower||isNaN(b.lower)||(b.lower=w(b.lower)),null==b.upper||isNaN(b.upper)||(b.upper=w(b.upper)));
this.callSuper(b)}})})(myt);
(q=>{const y=w=>{const r=w.label??"";w.setText('<i class="'+("solid"===(w.checkboxStyle??"outline")?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<r.length?" ":"")+r)};q.Checkbox=new JS.Class("Checkbox",q.Text,{include:[q.SimpleButtonStyle,q.ValueComponent],initNode:function(w,r){this.appendToEarlyAttrs("userUnselectable");r.value??(r.value=!1);r.focusIndicator??(r.focusIndicator=!1);r.checkboxStyle??(r.checkboxStyle="outline");r.activeColor??(r.activeColor="inherit");r.hoverColor??
(r.hoverColor="inherit");r.readyColor??(r.readyColor="inherit");this.callSuper(w,r);q.FontAwesome.registerForNotification(this);y(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&y(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&y(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&y(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(w,r=1){this.setOpacity(r);this.setTextColor(w)}})})(myt);
(q=>{let y;const {Class:w,Module:r}=JS,k=console.warn,{KeyObservable:b,UpdateableUI:c,dumpStack:g,global:f}=q,h=f.focus,e=f.keys,d={},a=(m,x)=>{if(m){const B=m.id;m.id?x(B):g("No ID")}else g("No processor")},l=m=>{a(m,x=>{d[x]=m})},u=m=>{const x=q.BAG.getGroup("selected",m.groupId);if(x){const B=x.getNodes();m=m.value;let E=B.length;for(;E;){const J=B[--E];if(J.optionValue===m){x.setTrue(J);break}}}},n=m=>{if(m.groupId){const x=q.BAG.getGroup("selected",m.groupId);x&&m.syncTo(x,"__syncValue","trueNode")}},
p=(m,x)=>{const B=[];m.__v?.forEach(E=>{x=E.isFormValid(m,null,B)&&x});m.setErrorMessages(B);m.setIsValid(x);return x},t=(m,x,B)=>{m.__vp?.forEach(E=>{E[B]&&(x=E.process(x))});return x},z=q.ValueProcessor=new w("ValueProcessor",{initialize:function(m,x,B,E){this.id=m;this.runForDefault=!!x;this.runForRollback=!!B;this.runForCurrent=!!E},process:m=>m}),F=q.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:m=>{if(null==m||""===m||"-"===m)return m;const x=Number(m);return isNaN(x)?m:x}}),
I=q.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(m,x,B,E,J){this.callSuper(m,x,B,E);this.trim=J},process:function(m){m+="";switch(this.trim){case "start":case "left":return m.trimStart();case "end":case "right":return m.trimEnd();default:return m.trim()}}}),L=q.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(m,x,B,E,J){this.callSuper(m,x,B,E);this.defaultValue=J},process:function(m){return void 0===m?this.defaultValue:m}}),A=q.Form=new r("Form",
{initNode:function(m,x){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(m,x);this.form?.isA(A)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(A)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(m){this.set("errorMessages",m,!0)},getFullId:function(){const m=[this.id];let x=this.form;for(;x&&x.id;)m.unshift(x.id),x=x.form;return m.join(".")},setId:function(m){if(this.id!==m){const x=this.id;this.id=
m;(m=this.form)&&this.inited&&(m.removeSubForm(x),m.addSubForm(this))}},setForm:function(m){if(this.form!==m){const x=this.form;this.form=m;x?.removeSubForm(this.id);this.inited&&m?.addSubForm(this)}},setIsValid:function(m){this.isValid=m;this.inited&&this.fireEvent("isValid",m);const x=this.form;x&&!this._lockCascade&&(m?x.verifyValidState(this):x.notifySubFormInvalid())},setIsChanged:function(m){if(this.isChanged!==m){this.isChanged=m;this.inited&&this.fireEvent("isChanged",m);const x=this.form;
x&&!this._lockCascade&&(m?x.notifySubFormChanged():x.verifyChangedState(this))}},setValidators:function(m){let x=m.length;for(;x;){const B=m[--x];"string"===typeof B&&(m[x]=f.validators.getValidator(B),m[x]||m.splice(x,1))}this.__v=m},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(D))return this.value;const m={},x=this.__sf;for(const B in x)m[B]=x[B].getValue();return m},setValue:function(m){this.callSuper?.(m);if("object"===typeof m&&!this.isA(D))for(const x in m){const B=
this.getSubForm(x);B?m[x]=B.setValue(m[x]):k("ID in setValue for missing subform",x)}this.form?.notifyValueChanged(this);return m},getDefaultValue:function(){const m={};let x=this.__sf;for(const B in x)m[B]=x[B].getDefaultValue();return m},setDefaultValue:function(m){if("object"===typeof m)for(const x in m){const B=this.getSubForm(x);B?m[x]=B.setDefaultValue(m[x]):k("ID in setDefaultValue for missing subform",x)}return m},getRollbackValue:function(){const m={},x=this.__sf;for(const B in x)m[B]=x[B].getRollbackValue();
return m},setRollbackValue:function(m){if("object"===typeof m)for(const x in m){const B=this.getSubForm(x);B?m[x]=B.setRollbackValue(m[x]):k("ID in setRollbackValue for missing subform",x)}return m},addAccelerator:function(m,x){this.__acc[m]=x},removeAccelerator:function(m){delete this.__acc[m]},invokeAccelerator:function(m,x){this.__acc[m]?.call(this,x??null)},addValidator:function(m){m&&this.__v.push(m)},removeValidator:function(m){if(m){const x=this.__v;let B=x.length;for(;B;){const E=x[--B];if(E.id===
m)return x.splice(B,1),E}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(m){const x=m.id;null!=this.getSubForm(x)?k("ID in use for subform, add aborted",x,m):(m.setForm(this),this.__sf[x]=m,m.isChanged&&this.notifySubFormChanged(),m.isValid||this.notifySubFormInvalid())},removeSubForm:function(m){const x=this.getSubForm(m);x&&(x.setForm(null),delete this.__sf[m],this.verifyChangedState(),this.verifyValidState());return x},getSubForm:function(m){return this.__sf[m]},
getSubForms:function(){return this.__sf},getInvalidSubformIds:function(m){m&&this.doValidation();const x=[];(function J(E){if(E.isA(D))E.isValid||x.push(E.getFullId());else{E=E.getSubForms();for(const K in E)J(E[K])}})(this);return x},getAllErrorMessages:function(){const m=this.__sf;let x=(this.errorMessages??[]).slice();for(const B in m)x.push(...m[B].getAllErrorMessages());return x},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(m){const x=this.__sf;let B=!0;for(const E in x){const J=
x[E];J!==m&&(B=J.isValid&&B)}return p(this,B)},doValidation:function(){const m=this.__sf;let x=!0;for(const B in m)x=m[B].doValidation()&&x;this._lockCascade=!0;x=p(this,x);this._lockCascade=!1;return x},notifyValueChanged:function(m){this.form?.notifyValueChanged(m)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(m){const x=this.__sf;let B=!1;for(const E in x){const J=x[E];J!==m&&(B=J.isChanged||B)}this.setIsChanged(B);return B},setup:function(m,x,B){this._lockCascade=
!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;m??={};x??={};B??={};const E=this.__sf;for(const J in E)E[J].setup(m[J],x[J],B[J])},resetForm:function(){this._lockCascade=!0;const m=this.__sf;for(const x in m)m[x].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const m=this.__sf;for(const x in m)m[x].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const m={},x=this.__sf;for(const B in x){const E=x[B];E.isChanged&&(m[B]=E.getChangedValue())}return m}}),D=q.FormElement=new r("FormElement",{include:[A],initNode:function(m,x){this.__vp=[];this.callSuper(m,x)},getValue:function(){return t(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(m){void 0===m&&(m=this.getRollbackValue());this.value!==m&&(this.callSuper(m),this.verifyChangedState());return m},
getDefaultValue:function(){return t(this,this.defaultValue,"runForDefault")},setDefaultValue:function(m){this.defaultValue!==m&&(this.defaultValue=m,this.inited&&this.fireEvent("defaultValue",m),this.verifyChangedState());return m},getRollbackValue:function(){return t(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(m){void 0===m&&(m=this.getDefaultValue());this.rollbackValue!==m&&(this.rollbackValue=m,this.inited&&this.fireEvent("rollbackValue",m),this.verifyChangedState());return m},
setValueProcessors:function(m){let x=m.length;for(;x;){const B=m[--x];"string"===typeof B&&(m[x]=d[B],m[x]||m.splice(x,1))}this.__vp=m},addValueProcessor:function(m){this.__vp.push(m)},removeValueProcessor:function(m){if(m){const x=this.__vp;let B=x.length;for(;B;){const E=x[--B];if(E.id===m)return x.splice(B,1),E}}},addSubForm:m=>{g("addSubForm unsupported on FormElement")},getSubForm:m=>{g("getSubForm unsupported on FormElement")},removeSubForm:m=>{g("removeSubForm unsupported on FormElement")},
verifyChangedState:function(m){m=this.getValue()!==this.getRollbackValue();this.setIsChanged(m);return m},setup:function(m,x,B){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(m);this.setRollbackValue(x);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(B)},resetForm:function(){this._lockCascade=!0;const m=this.getDefaultValue();this.setRollbackValue(m);this.setValue(m);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),v=q.FormInputTextMixin=new r("FormInputTextMixin",{include:[D,c],initNode:function(m,x){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";x.bgColor??(x.bgColor="#fff");x.borderWidth??(x.borderWidth=1);x.borderStyle??(x.borderStyle="solid");this.callSuper(m,x);this.addValueProcessor(y);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=m},setActionRequiredColor:function(m){this.actionRequiredColor=
m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const x=this.validateWhen;"key"!==x&&"blurWithKeyFix"!==x||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":h.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(m){b.isEnterKeyEvent(m)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(m){b.isEscKeyEvent(m)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
q.RootForm=new r("RootForm",{include:[A],initNode:function(m,x){this.callSuper(m,x);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:m=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});q.FormCheckbox=new w("FormCheckbox",q.Checkbox,{include:[D],initNode:function(m,x){this.rollbackValue=this.defaultValue=
!1;this.callSuper(m,x)}});q.FormComboBox=new w("FormComboBox",q.ComboBox,{include:[D,c],initNode:function(m,x){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(m,x);this.addValueProcessor(y);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=
m},setActionRequiredColor:function(m){this.actionRequiredColor=m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const x=this.validateWhen;"key"!==x&&"blurWithKeyFix"!==x||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":h.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(m){this._isShown=!0},notifyPanelHidden:function(m){this._isShown=!1},doActivationKeyDown:function(m,x){m!==e.CODE_ESC||this._isShown?this.callSuper(m,x):this.invokeAccelerator("reject")},doActivationKeyUp:function(m){m!==
e.CODE_ENTER||this._isShown?this.callSuper(m):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});q.FormEditableText=new w("FormEditableText",q.EditableText,{include:[v],__hndlKeyDown:function(m){"nowrap"===this.whitespace&&this.callSuper(m)}});q.FormInputText=new w("FormInputText",
q.InputText,{include:[v]});q.FormInputTextArea=new w("FormInputTextArea",q.InputTextArea,{include:[v],__hndlKeyDown:m=>{}});q.FormInputSelect=new w("FormInputSelect",q.InputSelect,{include:[D],setValue:function(m){if(!this.__abortSetValue)return m=this.callSuper(m),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(m),this.__abortSetValue=!1,this.verifyValidState(),m}});q.FormRadioGroup=new w("FormRadioGroup",q.Node,{include:[q.ValueComponent,D],initNode:function(m,x){x.groupId??(x.groupId=
q.generateGuid());this.callSuper(m,x);void 0!==this.value&&u(this);n(this)},setValue:function(m){m=this.callSuper(m);this.inited&&u(this);return m},setGroupId:function(m){if(this.groupId!==m){if(this.groupId){const x=q.BAG.getGroup("selected",this.groupId);x&&this.detachFrom(x,"__syncValue","trueNode")}this.groupId=m;this.inited&&n(this)}},__syncValue:function(m){m=m.value;this.setValue(m?m.optionValue:null)}});q.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(m,
x,B,E,J){this.callSuper(m,x,B,E);this.otherField=J},process:function(m){return null==m||""===m?this.otherField.getValue():m}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){l(y=new L("undefToEmpty",!0,!0,!0,""));l(new F("toNumber",!0,!0,!0));l(new I("trimLeft",!0,!0,!0,"left"));l(new I("trimRight",!0,!0,!0,"right"));l(new I("trimBoth",!0,!0,!0,"both"));f.register("valueProcessors",this)},getValueProcessor:m=>d[m],register:l,unregister:m=>{a(m,x=>{d[x]&&delete d[x]})}})})(myt);
(q=>{const y=JS.Class,w=q.dumpStack,r=Math.round,k={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},b=(h,e)=>{h[e](h,"doDragOver","dragover",!1);h[e](h,"doDragEnter","dragenter",!1);h[e](h,"doDragLeave","dragleave",!1);h[e](h,"doDrop","drop",!1)},c=q.DragDropSupport=new JS.Module("DragDropSupport",{include:[q.DragDropObservable],initNode:function(h,e){this.callSuper(h,e);this.disabled||this.setupDragListeners()},setDisabled:function(h){this.disabled!==
h&&(this.getIDE().disabled=h,this.callSuper(h),this.inited&&(h?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){b(this,"attachToDom")},teardownDragListeners:function(){b(this,"detachFromDom")},doDragOver:h=>{},doDragEnter:h=>{},doDragLeave:h=>{},doDrop:function(h){this.handleFiles(h.value.dataTransfer.files,h)},handleFiles:function(h,e){if(void 0!==h){let d=h.length;for(;d;){const a=this.filterFiles(h[--d]);a&&this.handleDroppedFile(a,e)}}else w("No File API")},
filterFiles:h=>h,handleDroppedFile:(h,e)=>{}}),g=q.Uploader=new y("Uploader",q.View,{include:[c,q.Disableable,q.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(h,e)=>{if(void 0!==FileReader){const d=new FileReader;d.onload=e;d.readAsDataURL(h)}},isSameFile:(h,e)=>null!=h&&null!=e&&h.name===e.name&&h.type===e.type&&h.size===e.size,createFile:h=>{const e=(new q.URI(h)).file;return{name:e,serverPath:h,size:-1,type:k[q.getExtension(e)]}}},initNode:function(h,e){const d=this;d.files=
[];e.requestFileParam??(e.requestFileParam="file");e.maxFiles??(e.maxFiles=-1);d.callSuper(h,e);d.fileInput=new q.NativeInputWrapper(d,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:d.disabled,overflow:"hidden"},[q.SizeToParent,{initNode:function(a,l){this.inputType="file";this.callSuper(a,l);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<d.maxFiles},_hndlInput:function(a){d.handleFiles(this.getIDE().files,a)}}])},setValue:function(h){this.clearFiles();
h&&(Array.isArray(h)||(h=[h]),h.forEach(e=>{this.addFile(g.createFile(e))}));return this.callSuper?this.callSuper(h):h},getValue:function(){return this.value},setDisabled:function(h){this.callSuper(h);this.fileInput?.setDisabled(h)},setMaxFiles:function(h){this.maxFiles!==h&&(this.maxFiles=h,this.inited&&this.fireEvent("maxFiles",h),this.fileInput&&(this.fileInput.getIDE().multiple=1<h))},setUploadUrl:function(h){this.set("uploadUrl",h,!0)},setRequestFileParam:function(h){this.set("requestFileParam",
h,!0)},bringSubviewToFront:function(h){h===this.fileInput?this.callSuper(h):this.sendSubviewBehind(h,this.fileInput)},subviewAdded:function(h){this.callSuper(h);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(h,e){this.addFile(h)},filterFiles:function(h){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:h},uploadFiles:function(h,e){h??=this.uploadUrl;const d=this.files;let a=d.length;for(;a;)this.uploadFile(d[--a],h,e)},makeFetchOptionsForUpload:h=>
({method:"POST",body:h}),uploadFile:function(h,e,d){const a=this,l=new FormData;l.append(d??a.requestFileParam,h,h.name);q.doFetch(e??a.uploadUrl,a.makeFetchOptionsForUpload(l),!1,u=>{a.handleUploadSuccess(h,u)},u=>{a.handleUploadFailure(h,u)})},handleUploadSuccess:function(h,e){h[g.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(h,e);this.updateValueFromFiles()},handleUploadFailure:(h,e)=>{w("Upload failure:"+e.status+":"+e.message)},parseServerPathFromResponse:(h,e)=>null,addFile:function(h){this.files.push(h);
this.updateValueFromFiles();this.fireEvent("addFile",h)},removeFile:function(h){const e=this.files;let d=e.length;for(;d;)if(g.isSameFile(e[--d],h)){e.splice(d,1);this.updateValueFromFiles();this.fireEvent("removeFile",h);break}},updateValueFromFiles:function(){const h=[];var e=this.files;let d=e.length;for(;d;){const a=e[--d][g.FILE_ATTR_SERVER_PATH];a&&h.push(a)}e=h.length;this.value=1===e?h[0]:0===e?void 0:h;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const h=this.files;let e=h.length;for(;e;)this.removeFile(h[--e])}}),f=q.ImageUploader=new y("ImageUploader",g,{extend:{isImageFile:h=>/image/i.test(h.type)},initNode:function(h,e){e.maxFiles=1;this.callSuper(h,e)},setWidth:function(h){this.callSuper(h);this.inited&&this.updateImageSize()},setHeight:function(h){this.callSuper(h);this.inited&&this.updateImageSize()},filterFiles:function(h){if(f.isImageFile(h)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(h)}},addFile:function(h){const e=this,d=f.isImageFile(h);e.callSuper(h);const a=e.image=new q.Image(e,{useNaturalSize:!1,align:"center",valign:"middle"});a.file=h;const l=u=>{const n=new Image;n.onload=()=>{h.width=n.width;h.height=n.height;a&&!a.destroyed&&e.updateImage(h,a,n.src)};n.src=u};d?-1===h.size?l(h.serverPath):void 0!==FileReader&&f.isImageFile(h)&&g.readFile(h,u=>{l(u.target.result)}):-1===h.size?e.updateImage(h,a,h.serverPath):void 0!==FileReader&&g.readFile(h,u=>
{e.updateImage(h,a,u.target.result)})},scaleToFit:(h,e,d,a)=>d/a>h/e?[h,a*h/d]:[d*e/a,e],removeFile:function(h){this.callSuper(h);const e=this.getSubviews();let d=e.length;for(;d;){const a=e[--d];if(g.isSameFile(a.file,h)){a.destroy();break}}},handleDroppedFile:function(h,e){this.callSuper(h,e);this.uploadFile(h,this.uploadUrl)},updateImage:function(h,e,d){this.nativeWidth=h.width;this.nativeHeight=h.height;this.updateImageSize();e.setImageUrl(d)},updateImageSize:function(){const h=this.image;if(h&&
!h.destroyed){var e=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const d=r(e[0]);e=r(e[1]);h.setImageSize(d+"px "+e+"px");h.setWidth(d);h.setHeight(e)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(q=>{const y=(w,r,k,b)=>{k=k.bind(w);"y"!==w.axis&&(k(r,b,"x"),k(r,b,"boundsWidth"));"x"!==w.axis&&(k(r,b,"y"),k(r,b,"boundsHeight"));k(r,b,"visible")};q.SizeToChildren=new JS.Class("SizeToChildren",q.Layout,{initNode:function(w,r){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,r)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const r=this.parent;if(!r.isBeingDestroyed){const k=this.subviews;var w=k.length;const b=this.axis,c=Math.max;let g,f;if("y"!==b){g=w;for(f=0;g;){const h=k[--g];h.visible&&(f=c(f,h.x+(0<h.boundsWidth?h.boundsWidth:0)))}r.setWidth(f+
this.paddingX)}if("x"!==b){g=w;for(f=0;g;)w=k[--g],w.visible&&(f=c(f,w.y+(0<w.boundsHeight?w.boundsHeight:0)));r.setHeight(f+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){y(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){y(this,w,this.detachFrom,"update")}})})(myt);
(q=>{let y=0;const w=JS.Class,{View:r,SizeToParent:k,RootView:b}=q,c=q.Dimmer=new w("Dimmer",r,{include:[k],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(f,h){const e=this;e.restoreFocus=!0;h.focusable=h.focusCage=!0;h.percentOfParentWidth??(h.percentOfParentWidth=100);h.percentOfParentHeight??(h.percentOfParentHeight=100);h.visible??(h.visible=!1);h.ignoreLayout??(h.ignoreLayout=!0);e.callSuper(f,h);e.overlay=new r(e,{ignorePlacement:!0,opacity:c.OPACITY,bgColor:c.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[k]);"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" ").forEach(d=>{e.attachDomObserver(e,"eatMouseEvent",d)});b.setupCaptureDrop(e)},destroy:function(){b.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(f){this.restoreFocus=f},eatMouseEvent:f=>!0,show:function(){const f=q.global.focus;this.prevFocus=f.focusedView??f.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(f){this.visible&&
(this.setVisible(!1),!f&&this.restoreFocus&&this.prevFocus?.focus())}}),g=q.ModalPanel=new w("ModalPanel",c,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>y,hasOpenModalPanels:()=>0<y},initNode:function(f,h){const e={name:"content",ignorePlacement:!0},d={...e,align:"center",valign:"middle"};this.defaultPlacement="content";h.sizingStrategy??(h.sizingStrategy="children");h.marginTop??(h.marginTop=g.MARGIN_TOP);h.marginLeft??
(h.marginLeft=g.MARGIN_LEFT);h.marginBottom??(h.marginBottom=g.MARGIN_BOTTOM);h.marginRight??(h.marginRight=g.MARGIN_RIGHT);h.paddingX??(h.paddingX=g.PADDING_X);h.paddingY??(h.paddingY=g.PADDING_Y);this.callSuper(f,h);switch(this.sizingStrategy){case "children":new q.SizeToChildren(new r(this,d),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new r(this,{...e,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[k]);break;case "basic":new r(this,d);break;default:new r(this,e)}},setSizingStrategy:function(f){this.sizingStrategy=f},setMarginTop:function(f){this.marginTop=f},setMarginLeft:function(f){this.marginLeft=f},setMarginBottom:function(f){this.marginBottom=f},setMarginRight:function(f){this.marginRight=f},setPaddingX:function(f){this.paddingX=f},setPaddingY:function(f){this.paddingY=f},
show:function(){this.callSuper();y++},hide:function(f){this.callSuper(f);y=Math.max(0,y-1)}})})(myt);
(q=>{const y=r=>{r[r.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=r=>{const k=r.size,b=r.getIDS();r.setWidth(k);r.setHeight(k);b.width=b.height=k-2*r.borderWidth+"px"};q.Spinner=new JS.Class("Spinner",q.View,{initNode:function(r,k){this.lateAttrs=["spinColor"];k.visible??(k.visible=!1);k.borderWidth??(k.borderWidth=5);k.borderColor??(k.borderColor="#fff");k.borderStyle??(k.borderStyle="solid");k.spinColor??(k.spinColor="#000");this.callSuper(r,k);this.getIDS().borderRadius="50%";w(this);
y(this)},setSize:function(r){this.size!==r&&(this.size=r,this.inited&&w(this))},setSpinColor:function(r){this.spinColor!==r&&(this.getIDS().borderTopColor=this.spinColor=r,this.inited&&this.fireEvent("spinColor",r))},setBorderWidth:function(r){this.borderWidth!==r&&(this.callSuper(r),this.inited&&w(this))},setVisible:function(r){this.visible!==r&&(this.callSuper(r),this.inited&&y(this))}})})(myt);
(q=>{const y=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=b=>{if(Array.isArray(b)){let c=b.length;if(0<c){b.unshift("fa");c++;b[1].startsWith("fa-")||(b[1]="fa-"+b[1]);3<=c&&(b[2]=y[b[2]]??"");if(3<c)for(let g=3;c>g;g++)b[g].startsWith("fa-")||(b[g]="fa-"+b[g]);return'<i class="'+b.join(" ")+'"></i>'}}q.dumpStack("Error making tag");console.error(b);return""},r=b=>{let c=b.properties;c=c?"string"===typeof c?c.split(" "):c.slice():[];c.unshift(b.icon,b.size);b.setHtml(w(c))},k=b=>{["Free 400","Free 900",
"Brands 400"].forEach(c=>{q.registerForFontNotification(b,"Font Awesome 5 "+c)})};q.FontAwesome=new JS.Class("FontAwesome",q.Markup,{extend:{makeTag:w,registerForNotification:k},initNode:function(b,c){this.size=0;this.icon="";this.callSuper(b,c);r(this);k(this)},setIcon:function(b){const c=this.icon;this.set("icon",b,!0);this.inited&&c!==b&&r(this)},setSize:function(b){const c=this.size;this.set("size",b,!0);this.inited&&c!==b&&r(this)},setProperties:function(b){this.properties=b;this.fireEvent("properties",
b);this.inited&&r(this)}});q.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(q=>{let y,w,r,k,b=0,c=0,g=0,f=255,h=[],e,d,a,l,u,n,p,t,z,F,I,L,A,D,v,m,x,B,E,J,K,M,T,U,X,P;const V=JS.Class,{View:R,Text:da,ModalPanel:ea,SizeToChildren:va,SpacedLayout:Aa,WrappingLayout:Ba,SelectionManager:Ca,Color:ra,LocalStorage:Da,Button:wa,TextButton:oa,Draggable:Ea,FontAwesome:{makeTag:pa}}=q,{min:ha,max:ja}=Math,ma=[1,"solid","#333"],Fa=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new V("DialogButton",oa,{initNode:function(C,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??
(G.paddingLeft=10);G.paddingRight??(G.paddingRight=10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(C,G)}}),La=pa(["check"]),Ha=C=>{C.forEach(G=>{7===G?.length&&(G+="ff");Ga[G]=!0})},Ga={},Ma=new V("Swatch",R,{include:[wa],initNode:function(C,G){const H=G.width=G.height=16;G.border=Fa;G.domClass="mytCheckerboardPattern";const N=G.bgColor;this.callSuper(C,G);this.colorView=new R(this,{width:H,
height:H,bgColor:N});N===k&&(C=ra.makeColorFromHexString(k),new da(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView?.setBgColor(C);this.setTooltip(C)},doActivated:function(){y.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Fa)}}),Na=q.ColorPicker=new V("ColorPicker",R,{initNode:function(C,G){y=this;y._isReady=!1;let H=G.color??"transparent";delete G.color;
r=G.alphaChannel??!1;delete G.alphaChannel;e=G.palette??[];Ha(e);delete G.palette;w="transparent"===H;y.callSuper(C,G);d=new R(y,{width:160,height:170});new Ba(d,{spacing:4,lineSpacing:4});a=new R(y,{x:170,width:139,height:139,border:ma},[Ea,{requestDragPosition:function(N,O){a.callSuper(a.x,a.y);const Q=this.getPagePosition();c=parseFloat(ja(0,ha(1,(N+this.dragInitX-Q.x)/this.width)));g=parseFloat(1-ja(0,ha(1,(O+this.dragInitY-Q.y)/this.height)));w=!1;y.updateUI()}}]);C=new R(a,{width:139,height:139});
G=new R(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";l=new R(G,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});u=new R(y,{x:315,y:30,width:24,height:109,border:ma},[Ea,{requestDragPosition:function(N,O){this.callSuper(u.x,u.y);b=parseFloat(ja(0,ha(1,(O+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;y.updateUI()}}]);u.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new R(u,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new R(y,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{y.setColor("transparent")}}]);C=146;r&&(z=new q.LabelSlider(y,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(N,O){O=N.value;if(null==O||isNaN(O))O=
0;N.value=q.formatAsPercentage(O/255,0);this.callSuper(N,!0);f=O;y._isReady&&(w=!1,y.updateUI())}}]),C+=23);p=new q.InputText(y,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});y.attachToDom(p,"_submitInput","blur");y.attachToDom(p,"_handleKeyDown","keydown");p.getIDS().paddingLeft="6px";C=new R(y,{x:170,y:C,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new R(C,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{y.setColor(H)}}]);t=new R(C,{x:30,width:30,height:23});if(C=Da.getItem("myt.default"))h=C.split(";"),Ha(h);y.setColor(H);y._isReady=!0},_handleKeyDown:C=>{q.KeyObservable.isEnterKeyEvent(C)&&y._submitInput()},_submitInput:()=>{y.setColor(p.value)},addToPalette:C=>{C&&"transparent"!==C&&!Ga[C]&&(h.unshift(C),h.length=ha(h.length,56),Da.setItem("myt.default",h.join(";")))},setColor:C=>{const G=C&&"transparent"!==C;if(r){let H="ff";G&&7<C.length&&(H=C.slice(7,9),C=C.slice(0,7));z.setValue(parseInt(H,
16))}else G&&7<C.length&&(C=C.slice(0,7));G?(C=ra.makeColorFromHexString(C).getHSV(),b=C.h/360,c=C.s,g=C.v,w=!1):w=!0;y.updateUI()},getColor:()=>{if(w)return"transparent";let C="";r&&(C=f.toString(16),2>C.length&&(C="0"+C));return ra.makeColorFromHSV(360*b,100*c,100*g).getHtmlHexString()+C},updateUI:()=>{const C=!w;n.setVisible(C);l.setVisible(C);C&&(l.setX(ja(0,ha(1,c)*(a.width+2))-5),l.setY(ja(0,ha(1,1-g)*(a.height+2))-5),n.setY(b*(u.height-2)-1));a.setBgColor(ra.makeColorFromHSV(360*b,100,100).getHtmlHexString());
k=y.getColor();p.setValue(k);t.setBgColor(k);y.redrawPalette()},redrawPalette:q.debounce(()=>{const C=d.getSubviews();let G=C.length;for(;G;)C[--G].destroy();const H=new Set;e.push(...h);e.forEach(N=>{if(r||7===N.length)7===N.length&&(N+="ff"),H.has(N)||(new Ma(d,{bgColor:N}),H.add(N))})},50)}),ya=C=>{C=C.split(":");return[ja(0,ha(23,parseInt(C[0]))),ja(0,ha(60,parseInt(C[1])))]},Ia=C=>{C.deselectAll();C=C.getSubviews();let G=C.length;for(;G;)C[--G].destroy()},Ja=new V("SelectableBtn",oa,{include:[q.Selectable],
setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new V("TimeBtn",Ja,{initNode:function(C,G){G.width=A?175:49;this.callSuper(C,G)},doActivated:function(){this.callSuper();const C=this.text,G=ya(C);P.selectById(C);K.setHours(G[0]);K.setMinutes(G[1])}}),Pa=new V("DayBtn",Ja,{initNode:function(C,G){G.width=23;G.border=xa;this.callSuper(C,G)},setData:function(C){this.data=
C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const C=new Date(this.data);C.setHours(K.getHours());C.setMinutes(K.getMinutes());
qa(C)}}),qa=C=>{C.setSeconds(0);C.setMilliseconds(0);var G=6>=v.length,H;if(G)for(H=7;H--&&!v.includes(C.getDay());)C.setDate(C.getDate()+1);K=C;const N=P.getODE().scrollTop;var O=new Date,Q=O.getFullYear();H=O.getMonth();var W=O.getDate();O.getHours();O.getMinutes();const S=C.getFullYear(),ba=C.getMonth(),sa=C.getDate();var ia=C.getTime();O=C.getHours();C=C.getMinutes();const la=(new Date(S,ba,1)).getDay()-D,ca=(new Date(S,ba+1,0)).getDate(),na=(new Date(S,ba,0)).getDate(),ta=new Date(S,ba,0),ua=
new Date(S,ba+2,0),Qa=Q==S&&H==ba;if(!A){Ia(X);H=new Date(ia);const ka=7+D;Q=I.days;T.setText(S+" "+I.sep+" "+I.months[ba]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);M.setVisible(null==m||m<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ba+1);U.setVisible(null==x||x>H.getTime());for(H=0;7>H;H++)new da(X,{width:23,height:20,textAlign:"center",text:Q[(H+ka)%7],textColor:"#999"});H=0;let fa=42;0>la&&(H=-7,fa=35);Q=new Date(ia);Q.setHours(0);Q.setMinutes(0);
for(Q.setSeconds(0);H<fa;H++){var Y=H+1-la;const za=(H+ka)%7,Z=new Pa(X);la>H?(Z.setText(na+Y),Z.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(na+Y)),Z.setIsAnotherMonth(!0),Q.setDate(na+Y),Q.setMonth(ta.getMonth()),Q.setYear(ta.getFullYear())):H<la+ca?(Z.setText(Y),Z.setData(S+"/"+(ba+1)+"/"+Y),Q.setDate(Y),Q.setMonth(ba),Q.setYear(S)):(Z.setText(Y-ca),Z.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(Y-ca)),Z.setIsAnotherMonth(!0),Q.setDate(Y-ca),Q.setMonth(ua.getMonth()),Q.setYear(ua.getFullYear()));
G&&!v.includes(za)?Z.setDisabled(!0):(0===za?Z.setIsSunday(!0):6===za&&Z.setIsSaturday(!0),Y===sa&&(X.select(Z),Z.focus()),Qa&&Y===W&&Z.setIsToday(!0),Y=new Date(Q.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=m&&m>Y.getTime()||null!=x&&x<Q.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!L){G=60*E[0]+E[1];Ia(P);let [ka,fa]=B;for(Q=new Date(ia);60*ka+fa<G;)W=new Oa(P,{text:("0"+ka).slice(-2)+":"+("0"+fa).slice(-2)}),ka===O&&fa===C&&P.select(W),Q.setHours(ka),Q.setMinutes(fa),
ia=Q.getTime(),(null!=m&&m>ia||null!=x&&x<ia)&&W.setDisabled(!0),fa+=J,60<=fa&&(fa-=60,ka++);P.scrollYTo(N)}},Ra=q.DatePicker=new V("DatePicker",R,{initNode:function(C,G){F=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;F.callSuper(C,G);I=H.locales[H.locale??"en"];L=H.dateOnly;A=H.timeOnly;D=H.firstDayOfWeek;J=ja(5,ha(30,
H.minuteInterval));v=H.allowedDays;Array.isArray(v)&&0!==v.length||(v=[0,1,2,3,4,5,6]);m=Date.parse(H.minDate);m=isNaN(m)?null:m;x=Date.parse(H.maxDate);x=isNaN(x)?null:x;B=ya(H.minTime);E=ya(H.maxTime);C=new R(F,{visible:!A});H.showTodayButton&&new oa(C,{width:24,text:pa(["home"]),tooltip:I.today},[{doActivated:()=>{qa(new Date)}}]);M=new oa(C,{width:24,x:28,text:pa(["chevron-left"]),tooltip:I.prevMonth},[{doActivated:()=>{const N=(new Date(K.getFullYear(),K.getMonth(),0)).getDate();N<K.getDate()&&
K.setDate(N);K.setMonth(K.getMonth()-1);qa(K);M.focus()}}]);T=new da(C,{width:100,x:52,textAlign:"center"});U=new oa(C,{width:24,x:152,text:pa(["chevron-right"]),tooltip:I.nextMonth},[{doActivated:()=>{var N=(new Date(K.getFullYear(),K.getMonth()+1,0)).getDate();N<K.getDate()&&K.setDate(N);N=(new Date(K.getFullYear(),K.getMonth()+2,0)).getDate();N<K.getDate()&&K.setDate(N);K.setMonth(K.getMonth()+1);qa(K);U.focus()}}]);X=new R(F,{y:25,width:175,height:175,visible:!A,maxSelected:1,itemSelectionId:"data"},
[Ca]);new Ba(X,{spacing:2,lineInset:2,lineSpacing:3});P=new R(F,{x:A?0:195,y:A?0:25,width:(A?175:49)+q.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!L,maxSelected:1,itemSelectionId:"text"},[Ca]);new Aa(P,{axis:"y",inset:1,spacing:3});F.setWidth(P.visible?P.x+P.width:X.width);qa(H.current??new Date)},getPickedDate:()=>K}),aa=q.Dialog=new V("Dialog",ea,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",
whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),
months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,G){G.buttonClass??(G.buttonClass=aa.BUTTON_CLASS);this.callSuper(C,G);C=this.content;C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER);C.setFocusCage(!0);this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=
C},makeButton:function(C,G){const H=this;return new H.buttonClass(C,G,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(C){return C.closeBtn=this.makeButton(C,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:pa(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},
destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const C=this.content,G=C.sizeToChildren,H=C.getSubviews();let N=H.length;for(;N;){const O=H[--N];"closeBtn"!==O.name&&O.destroy()}C.setVisible(!0);this.overlay.setBgColor(q.Dimmer.COLOR);this.setCallbackFunction();G.setPaddingY(ea.PADDING_Y);G.setPaddingX(ea.PADDING_X);C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER)},doCallback:function(C){const G=this.callbackFunction;
G&&G.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();this.content.setVisible(!1);C?.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,G,H){const N=this.content,O=N.closeBtn;H={...aa.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(G);C=N.msg=new da(N,{text:C,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ea.PADDING_X:H.msgX,y:null==H.msgY?ea.PADDING_Y:H.msgY,width:H.width});H.titleText&&
(this.setupTitle(N,H.titleText),C.setY(C.y+24));this.show();!1===H.showClose?O.setVisible(!1):(O.setVisible(!0),O.focus())},showSimple:function(C,G,H,N){H=H??{};const O=this.content,Q=O.closeBtn,W=H.maxContainerHeight;this.destroyContent();H.bgColor&&O.setBgColor(H.bgColor);H.roundedCorners&&O.setRoundedCorners(H.roundedCorners);H.boxShadow&&O.setBoxShadow(H.boxShadow);H.border&&O.setBorder(H.border);O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=O.contentContainer=new R(O,{x:1,y:25,
overflow:"auto"},[{setHeight:function(S){S>W&&(S=W);this.callSuper(S)}}]);C.call(this,G);new va(G,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();H.titleText&&(this.setupTitle(O,H.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();N?.(this)},showConfirm:function(C,G,H){H={...aa.CONFIRM_DEFAULTS,...H};this.showMessage(C,G,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(C,G,H,N){H={...aa.CONFIRM_DEFAULTS,...H};const O=this.content,Q=O.closeBtn,W=H.maxContainerHeight;
this.destroyContent();O.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=O.contentContainer=new R(O,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){this.callSuper(S>W?W:S)}}]);C.call(this,G);new va(G,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();this.setupTitle(O,H.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,H);G.initialFocus?.focus();N?.(this)},showSpinner:function(C,G){const H=this.content;G={...aa.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const N=
this.spinner=new q.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==G.msgY?ea.PADDING_Y:G.msgY});C&&new da(H,{text:C,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ea.PADDING_X:G.msgX,y:N.y+N.size+ea.PADDING_Y,width:G.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,G){const H=this,N=H.content,O=N.closeBtn;G={...aa.COLOR_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,
Q);break;case "confirmBtn":const W=y.getColor();y.addToPalette(W);C.call(H,Q,W)}y.destroy()});y=new Na(N,{x:ea.PADDING_X,y:ea.PADDING_Y+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();O.setVisible(!0);O.focus();H.setupFooterButtons(y,G);H.setupTitle(N,G.titleText)},showDatePicker:function(C,G){const H=
this,N=H.content,O=N.closeBtn;G={...aa.DATE_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,Q);break;case "confirmBtn":C.call(H,Q,F.getPickedDate())}F.destroy()});F=new Ra(N,{x:ea.PADDING_X,y:ea.PADDING_Y+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});H.show();O.setVisible(!0);O.focus();H.setupFooterButtons(F,G);H.setupTitle(N,
G.timeOnly?G.timeOnlyTitleText:G.titleText)},setupTitle:function(C,G){const H=aa.RADIUS;(this.header=new R(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();C.title=new da(C,{x:H,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(C,G){const H=this,N=H.content,O=ea.PADDING_Y;var Q=O/2;const W=N.btnContainer=new R(N,{y:C.y+C.height+O,align:"center"});C=["active","hover","ready","text"];let S=G.cancelAttrs??{};var ba;(ba=
S).name??(ba.name="cancelBtn");let sa;(sa=S).text??(sa.text=G.cancelTxt);C.forEach(ca=>{ca+="Color";null!=G[ca]&&(S[ca]=G[ca])});ba=H.makeButton(W,S);S=G.confirmAttrs??{};let ia;(ia=S).name??(ia.name="confirmBtn");let la;(la=S).text??(la.text=G.confirmTxt);C.forEach(ca=>{ca+="Color";const na=ca+"Confirm";null!=G[na]&&(S[ca]=G[na])});H.makeButton(W,S);G.buttons?.forEach(ca=>{H.makeButton(W,ca)});new va(W,{axis:"y"});new Aa(W,{spacing:4,collapseParent:!0});N.sizeToChildren.setPaddingY(Q);Q=W.y-Q;(new R(N,
{ignoreLayout:!0,y:Q,width:N.width,height:N.height-Q,bgColor:"#eee"})).sendToBack();!1===G.showClose&&ba.focus()}})})(myt);
(q=>{const y=JS.Class,w=q.dumpStack,r={},k=(d,a)=>{if(d){const l=d.id;d.id?a(l):w("No ID")}else w("No validator")},b=d=>{k(d,a=>{r[a]=d})},c=q.Validator=new y("Validator",{initialize:function(d){this.id=d},isValid:(d,a,l)=>!0,isFormValid:function(d,a,l){a??={};a.form=d;return this.isValid(d.getValue(),a,l)}}),g=q.RequiredFieldValidator=new y("RequiredFieldValidator",c,{isValid:(d,a,l)=>null==d||""===d||"string"===typeof d&&""===d.trim()?(l?.push("This value is required."),!1):!0}),f=q.EqualsIgnoreCaseValidator=
new y("EqualsIgnoreCaseValidator",c,{isValid:(d,a,l)=>{a=a.form.getRollbackValue();return d&&a&&d.toLowerCase()===a.toLowerCase()?(l?.push("Value must differ by more than just case."),!1):!0}}),h=q.URLValidator=new y("URLValidator",c,{initialize:function(d,a){this.callSuper(d);this.originalRawQuery=a},isValid:function(d,a,l){return(new q.URI(d)).toString(this.originalRawQuery)!==d?(l?.push("Invalid URL."),!1):!0}}),e=q.JSONValidator=new y("JSONValidator",c,{isValid:(d,a,l)=>{try{return JSON.parse(d),
!0}catch(u){return l?.push(u),!1}}});q.EqualFieldsValidator=new y("EqualFieldsValidator",c,{initialize:function(d,a,l){this.callSuper(d);this.fieldA=a;this.fieldB=l},isValid:function(d,a,l){if(d&&this.fieldA.getValue()===this.fieldB.getValue())return!0;l?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});q.LengthValidator=new y("LengthValidator",c,{initialize:function(d,a,l){this.callSuper(d);this.min=a;this.max=l},isValid:function(d,a,l){d=d?d.length:
0;a=this.min;const u=this.max;return void 0!==a&&a>d?(l?.push("The value must not be less than "+a+" characters long."),!1):void 0!==u&&u<d?(l?.push("The value must not be greater than "+u+" characters long."),!1):!0}});q.NumericRangeValidator=new y("NumericRangeValidator",c,{initialize:function(d,a,l){this.callSuper(d);this.min=a;this.max=l},isValid:function(d,a,l){if(""===d)return!0;d=Number(d);a=this.min;const u=this.max;return isNaN(d)?(l?.push("Value is not a number."),!1):void 0!==a&&a>d?(l?.push("Value must not be less than "+
a+"."),!1):void 0!==u&&u<d?(l?.push("Value must not be greater than "+u+"."),!1):!0}});q.CompoundValidator=new y("CompoundValidator",c,{initialize:function(d,...a){this.callSuper(d);for(d=a.length;d;){let l=a[--d];"string"===typeof l&&((a[d]=l=r[l])||a.splice(d,1))}this.__v=a},addValidator:function(d){"string"===typeof d&&(d=r[d]);d&&this.__v.push(d)},isValid:function(d,a,l){const u=this.__v,n=u.length;let p=!0,t=0;for(;n>t;)p=u[t++].isValid(d,a,l)&&p;return p}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){b(new g("required"));b(new f("equalsIgnoreCase"));b(new h("url"));b(new e("json"));q.global.register("validators",this)},getValidator:d=>r[d],register:b,unregister:d=>{k(d,a=>{r[a]&&delete r[a]})}})})(myt);
(q=>{const y=JS.Class,{min:w,max:r,round:k}=Math,b=q.View,c=new y("SliderThumb",q.SimpleButton,{include:[q.Draggable,q.ArrowKeyActivation],initNode:function(f,h){const e=h.width=f.thumbWidth,d=h.height=f.thumbHeight;h.roundedCorners=w(d,e)/2;h.repeatKeyDown=!0;h.activationKeys=q.global.keys.ARROW_KEYS;h.activeColor="#bbb";h.readyColor="#ccc";h.hoverColor="#ddd";h.boxShadow=[0,0,4,"#666"];this.callSuper(f,h);this["x"===f.axis?"setY":"setX"](f.thumbOffset);this.syncTo(f,"setDisabled","disabled");f._syncThumbToValue(this,
f.getValue())},setDisabled:function(f){this.callSuper(this.valueFromEvent(f))},setFocused:function(f){this.callSuper(f);f&&this.makeHighestZIndex()},setX:function(f){this.x!==f&&(this.callSuper(f),f=this.parent,"x"===f.axis&&f.syncValueToThumb(this))},setY:function(f){this.y!==f&&(this.callSuper(f),f=this.parent,"y"===f.axis&&f.syncValueToThumb(this))},requestDragPosition:function(f,h){if(!this.disabled){var e=this.parent;const d=e.getMinPixelValueForThumb(this),a=e.getMaxPixelValueForThumb(this);
"x"===e.axis?(e=this.width/2,h="setX"):(e=this.height/2,f=h,h="setY");this[h](w(r(f,d-e),a-e))}},doKeyArrowLeftOrUp:function(f,h){f?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(f,h){f?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),g=q.BaseSlider=new y("BaseSlider",b,{include:[q.Disableable],initNode:function(f,h){h.axis??(h.axis="x");"x"===h.axis?(h.width??(h.width=100),h.height??(h.height=18)):(h.width??(h.width=
18),h.height??(h.height=100));h.bgColor??(h.bgColor="#999");h.roundedCorners??(h.roundedCorners=9);h.trackInset??(h.trackInset=9);h.trackOutset??(h.trackOutset=9);h.thumbWidth??(h.thumbWidth=16);h.thumbHeight??(h.thumbHeight=16);h.thumbOffset??(h.thumbOffset=1);h.nudgeAmount??(h.nudgeAmount=1);this.callSuper(f,h)},setAxis:function(f){this.axis=f},setTrackInset:function(f){this.trackInset=f},setTrackOutset:function(f){this.trackOutset=f},setThumbWidth:function(f){this.thumbWidth=f},setThumbHeight:function(f){this.thumbHeight=
f},setThumbOffset:function(f){this.thumbOffset=f},setNudgeAmount:function(f){this.nudgeAmount=f},convertValueToPixels:function(f){const h=this.minValue,e=this.trackInset;return e+(("x"===this.axis?this.width:this.height)-e-this.trackOutset)/(this.maxValue-h)*(f-h)},convertPixelsToValue:function(f){const h=this.minValue,e=this.trackInset;return(this.maxValue-h)/(("x"===this.axis?this.width:this.height)-e-this.trackOutset)*(f-e)+h},nudgeValueLeft:function(f){this._nudge(f,!1)},nudgeValueUp:function(f){this._nudge(f,
!1)},nudgeValueRight:function(f){this._nudge(f,!0)},nudgeValueDown:function(f){this._nudge(f,!0)},_nudge:(f,h)=>{},_syncThumbToValue:function(f,h){h=this.convertValueToPixels(h);"x"===this.axis?f.setX(h-f.width/2):f.setY(h-f.height/2)},syncValueToThumb:function(f){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(f,this.convertPixelsToValue("x"===this.axis?f.x+f.width/2:f.y+f.height/2)),this.__lockSync=!1)},_syncValueToThumb:(f,h)=>{},getMinPixelValueForThumb:function(f){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(f){return this.convertValueToPixels(this.maxValue)}});q.RangeSlider=new y("RangeSlider",g,{include:[q.BoundedRangeComponent],initNode:function(f,h){this.callSuper(f,h);f=this.rangeFill=new b(this,{bgColor:"#666"});"x"===this.axis?(f.setY(this.thumbOffset),f.setHeight(this.thumbHeight),f.setRoundedCorners(this.thumbHeight/2)):(f.setX(this.thumbOffset),f.setWidth(this.thumbWidth),f.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new c(this);this.thumbUpper=new c(this);
this._syncRangeFillToValue()},setValue:function(f){this.callSuper(f);this.inited&&(this.__lockSync||(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f)),this._syncRangeFillToValue())},setWidth:function(f){const h=this.width;this.callSuper(f);this.inited&&"x"===this.axis&&this.width!==h&&(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f))},setHeight:function(f){const h=this.height;this.callSuper(f);
this.inited&&"y"===this.axis&&this.height!==h&&(f=this.getValue(),this._syncThumbToValue(this.thumbLower,f),this._syncThumbToValue(this.thumbUpper,f))},_syncRangeFillToValue:function(){const f=this.rangeFill;var h=this.getValue();const e=this.convertValueToPixels(h.lower);h=this.convertValueToPixels(h.upper)-e;"x"===this.axis?(f.setX(e),f.setWidth(h)):(f.setY(e),f.setHeight(h))},_syncThumbToValue:function(f,h){this.callSuper(f,"thumbLower"===f.name?h.lower:h.upper)},_syncValueToThumb:function(f,h){let e=
this.getValueCopy();e["thumbLower"===f.name?"lower":"upper"]=h;this.setValue(e);e=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,e);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,e)},_nudge:function(f,h){const e=this.getValueCopy();h=this.nudgeAmount*(h?1:-1);"thumbLower"===f.name?e.lower=w(e.lower+h,e.upper):e.upper=r(e.upper+h,e.lower);this.setValue(e)},getMinPixelValueForThumb:function(f){return this.convertValueToPixels("thumbLower"===f.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(f){return this.convertValueToPixels("thumbLower"===f.name?this.getValue().upper:this.maxValue)}});q.Slider=new y("Slider",g,{include:[q.BoundedValueComponent],initNode:function(f,h){this.callSuper(f,h);this.thumb=new c(this)},setValue:function(f){this.callSuper(f);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(f){const h=this.width;this.callSuper(f);this.inited&&"x"===this.axis&&this.width!==h&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(f){const h=this.height;this.callSuper(f);this.inited&&"y"===this.axis&&this.height!==h&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(f,h){this.setValue(h);this._syncThumbToValue(f,this.getValue())},_nudge:function(f,h){this.setValue(this.getValue()+this.nudgeAmount*(h?1:-1))}});q.LabelSlider=new y("LabelSlider",q.Slider,{initNode:function(f,h){const e=this;h.labelX??(h.labelX=8);h.labelY??(h.labelY=2);h.labelFontSize??(h.labelFontSize=
"12px");h.labelColor??(h.labelColor="#000");h.flipThreshold??(h.flipThreshold=k((h.maxValue-h.minValue)/2)||0);e.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],h);e.callSuper(f,h);const d=e.labelX;e.labelTxt=new q.Text(e,{x:d,y:e.labelY,textColor:e.labelColor,fontSize:e.labelFontSize},[{initNode:function(a,l){this.targetX=d;this.callSuper(a,l)},updateX:function(a){const l=e.getValue()>=e.flipThreshold?d:e.width-this.width-d;this.targetX!==l&&(this.targetX=l,this.stopActiveAnimators("x"),
a?this.setX(l):this.animate({attribute:"x",to:l,duration:250}))}}]);e.syncTo(e,"setText","value")},setWidth:function(f){this.callSuper(f);this.labelTxt?.updateX(!0)},setText:function(f,h){const e=this.labelTxt;e&&(e.setText(f.value),e.updateX(h))}})})(myt);
(q=>{const y=JS.Class,{CODE_ENTER:w,CODE_SPACE:r,ARROW_KEYS:k}=q.global.keys,b=g=>{const f="y"===g.axis?"height":"width";g.constrain("__limitToParent",[g,"limitToParent",g,f,g.parent,f])},c=new y("BaseDivider",q.SimpleButton,{include:[q.BoundedValueComponent,q.Draggable,q.ArrowKeyActivation],initNode:function(g,f){f.activeColor??(f.activeColor="#bbb");f.hoverColor??(f.hoverColor="#ddd");f.readyColor??(f.readyColor="#ccc");f.axis??(f.axis="x");f.minValue??(f.minValue=0);f.value??(f.value=f.minValue);
f.expansionState??(f.expansionState=2);f.focusIndicator??(f.focusIndicator=!1);f.repeatKeyDown??(f.repeatKeyDown=!0);f.activationKeys??(f.activationKeys=[w,r,...k]);"y"===f.axis?(f.height??(f.height=6),f.cursor??(f.cursor="row-resize")):(f.width??(f.width=6),f.cursor??(f.cursor="col-resize"));this.quickSet(["axis"],f);this.__nudgeAcc=1;this.callSuper(g,f);null==f.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&b(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},
setExpansionState:function(g){this.expansionState=g},setRestoreValue:function(g){this.restoreValue=g},setLimitToParent:function(g){this.limitToParent!==g&&(this.limitToParent=g,this.inited&&(this.fireEvent("limitToParent",g),null==g?this.releaseConstraint("__limitToParent"):b(this)))},setAxis:function(g){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=g},setValue:function(g,f){this.callSuper(g);g=this.value;"y"===this.axis?this.setY(g):this.setX(g);f&&this.setRestoreValue(g)},
__limitToParent:function(g){g="y"===this.axis?"height":"width";this.setMaxValue(this.parent[g]-this.limitToParent-this[g])},doActivationKeyDown:function(g,f){this.callSuper(g,f);switch(g){case w:case r:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(g,f){return this.nudge(!1,f)},doKeyArrowRightOrDown:function(g,f){return this.nudge(!0,f)},nudge:function(g,f){this.__nudgeAcc=f?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+(g?1:-1)*this.__nudgeAcc,!0);this.setExpansionState(2);return!0},
doPrimaryAction:function(){const {restoreValue:g,maxValue:f,minValue:h}=this;let e;switch(this.expansionState){case 0:null!=g&&(this.setExpansionState(1),g===h?g!==f&&this.doPrimaryAction():e=g);break;case 1:null!=f&&(this.setExpansionState(3),this.value===f?this.doPrimaryAction():e=f);break;case 2:null!=h&&(this.setExpansionState(0),this.value===h?this.doPrimaryAction():e=h);break;case 3:null!=g&&(this.setExpansionState(2),g===f?this.doPrimaryAction():e=g)}this.animateToValue(e)},animateToValue:function(g,
f=250){null!=g&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:g,duration:f}))},requestDragPosition:function(g,f){this.disabled||(g="y"===this.axis?f:g,f=this.value,g!==f&&(this.setValue(g,!0),this.setExpansionState(f>g?2:1)))}});q.HorizontalDivider=new y("HorizontalDivider",c,{initNode:function(g,f){f.axis="x";this.callSuper(g,f)}});q.VerticalDivider=new y("VerticalDivider",c,{initNode:function(g,f){f.axis="y";this.callSuper(g,f)}})})(myt);
(q=>{let y=0;const {Class:w,Module:r}=JS,{min:k,max:b}=Math,{View:c,SpacedLayout:g,Node:{DEFAULT_PLACEMENT:f}}=q,h=v=>{const m=v.columnHeaders,[x,B]=v.sort??["",""];let E=m.length;for(;E;){const J=m[--E];J.columnId===x?J.sortable&&J.setSortState(B):J.setSortState("none")}v.locked||v.doSort()},e=(v,m,x,B)=>{if(0!==m){const M=0<m,T=[];for(var E=v.length;E;){var J=v[--E];J.resizable&&(x?0<J.flex:0===J.flex)&&T.push({hdr:J,limit:(M?J.maxValue:J.minValue)-J.value,amt:0})}v=T.length;if(0<v){for(E=0;0!==
m;){y>=v&&(E=y=0);J=T[y];var K=J.hdr;J.full?++E:(M?(K=k(x?K.flex:1,m),J.amt+K>J.limit&&(K=J.limit-J.amt,J.full=!0)):(K=b(x?-K.flex:-1,m),J.amt+K<J.limit&&(K=J.limit-J.amt,J.full=!0)),J.amt+=K,m-=K);if(E===v)break;++y}T.forEach(U=>{U.hdr.setValue(U.hdr.value+U.amt)});B?.(m)}}},d=v=>(v=v.gridController?v.gridController.getPrevHdr(v):null)?v.maxValue-v.value+d(v):0,a=v=>(v=v.gridController?v.gridController.getNextHdr(v):null)?v.maxValue-v.value+a(v):0,l=v=>(v=v.gridController?v.gridController.getPrevHdr(v):
null)?v.minValue-v.value+l(v):0,u=v=>(v=v.gridController?v.gridController.getNextHdr(v):null)?v.minValue-v.value+u(v):0,n=(v,m)=>{v=v.gridController?v.gridController.getPrevHdr(v):null;var x=0;if(v){x=v.value+m;v.resizable&&v.setValue(x);const B=x-v.value;x=m-B;0>B&&(x+=n(v,B))}return x},p=(v,m)=>{v=v.gridController?v.gridController.getPrevHdr(v):null;var x=0;if(v){x=v.value+m;v.resizable&&v.setValue(x);const B=x-v.value;x=m-B;0<B&&(x+=p(v,B))}return x},t=(v,m)=>{if(v=v.gridController?v.gridController.getNextHdr(v):
null)m=v.value+m,v.resizable&&v.setValue(m),m-=v.value,0>m&&t(v,m)},z=(v,m)=>{if(v=v.gridController?v.gridController.getNextHdr(v):null)m=v.value+m,v.resizable&&v.setValue(m),m-=v.value,0<m&&z(v,m)},F=v=>{let m="";if(v.sortable)switch(v.sortState){case "ascending":m="chevron-up";break;case "descending":m="chevron-down"}v.sortIcon.setIcon(m)},I=v=>{const m=v.textView;m?.setWidth(v.width-v.outset-m.x)},L=q.GridController=new r("GridController",{initNode:function(v,m){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(v,m);this.fitHeadersToWidth();h(this)},setMaxWidth:function(v){this.set("maxWidth",v,!0)},setMinWidth:function(v){this.set("minWidth",v,!0)},setFitToWidth:function(v){this.fitToWidth=v},setSort:function(v){q.areArraysEqual(v,this.sort)||(this.sort=v,this.inited&&(this.fireEvent("sort",v),h(this)))},setLastColumn:function(v){const m=this.lastColumn;m!==v&&(m?.setLast(!1),this.lastColumn=v,v?.setLast(!0))},
setLocked:function(v){this.locked=v;this.inited&&!v&&(this.__tempLock=!0,this.fitHeadersToWidth(),this.__tempLock=!1,this.setMaxWidth(0),this.setMinWidth(0),this.__skipInvisibleHeaders=!0,this.columnHeaders.forEach(m=>{this.notifyHdrXChange(m);this.notifyHdrWidthChange(m);this.notifyHdrVisibilityChange(m)}),this.__skipInvisibleHeaders=!1,this.doSort())},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(v){v=this.valueFromEvent(v);this.gridWidth!==v&&(this.gridWidth=v,
this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(v){const m=this.columnHeaders;v=this.getHdrIndex(v);if(0<v)for(;v;){const x=m[--v];if(x.visible)return x}},getNextHdr:function(v){const m=this.columnHeaders,x=m.length;v=this.getHdrIndex(v)+1;if(0<v&&v<x)for(;x>v;){const B=m[v++];if(B.visible)return B}},hasHdr:function(v){return this.columnHeaders.includes(v)},getHdrIndex:function(v){return this.columnHeaders.indexOf(v)},getHdrById:function(v){const m=this.columnHeaders;let x=
m.length;for(;x;){const B=m[--x];if(B.columnId===v)return B}},getVisibleHdrs:function(){return this.columnHeaders.filter(v=>v.visible)},notifyAddHdr:function(v){this.hasHdr(v)||(this.columnHeaders.push(v),v.visible&&this.setLastColumn(v),this.fixupResizerCursors())},notifyRemoveHdr:function(v){const m=this.getHdrIndex(v);-1<m&&(this.columnHeaders.splice(m,1),v.visible&&v.last&&this.setLastColumn(this.getPrevHdr(v)),this.fixupResizerCursors())},notifyHdrXChange:function(v){this.isLocked()||this.rows.forEach(m=>
{m.notifyHdrXChange(v)})},notifyHdrWidthChange:function(v){this.isLocked()||this.rows.forEach(m=>{m.notifyHdrWidthChange(v)})},notifyHdrVisibilityChange:function(v){if((!this.__skipInvisibleHeaders||v.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(v);var m=this.setLastColumn;a:{var x=this.columnHeaders;let B=x.length;for(;B;){const E=x[--B];if(E.visible){x=E;break a}}x=void 0}m.call(this,x);m=v.visible?1:-1;this.setMaxWidth(this.maxWidth+v.maxValue*m);this.setMinWidth(this.minWidth+
v.minValue*m);this.fitHeadersToWidth();this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(v){this.rows.forEach(m=>{m.notifyHdrVisibilityChange(v)})},hasRow:function(v){return this.rows.includes(v)},getRowIndex:function(v){return this.rows.indexOf(v)},getRowById:function(v,m=x=>x.model.id===v){return this.rows.find(m)},getPrevRow:function(v){v=this.getRowIndex(v)-1;return this.rows[0>v?this.rows.length-1:v]},getNextRow:function(v){v=this.getRowIndex(v)+1;return this.rows[v<this.rows.length?
v:0]},notifyAddRow:function(v,m){if(!this.hasRow(v)&&(this.rows.push(v),!this.locked)){const x=this.width;this.columnHeaders.forEach(B=>{v.setWidth(x);v.notifyHdrXChange(B);v.notifyHdrWidthChange(B);v.notifyHdrVisibilityChange(B)});m||this.doSort()}},notifyRemoveRow:function(v){v=this.getRowIndex(v);-1<v&&this.rows.splice(v,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const v=this.getVisibleHdrs();let m=0;v.forEach(x=>{m=b(m,x.x+x.width)});e(v,this.gridWidth-m,!0,x=>{e(v,x,!1,
null)})}},fixupResizerCursors:function(){const v=this.getVisibleHdrs();let m=!0,x=0;v.forEach((K,M)=>{m&&K.isFixed()?K.setResizerCursor("",!0):(m&&(x=M),m=!1,K.restoreResizerCursor())});let B=!0,E=v.length,J=E-1;for(;E>x;){const K=v[--E];B?K.setResizerCursor("",!0):K.restoreResizerCursor();K.isFixed()||(B&&(J=E),B=!1)}x===J&&v[x].setResizerCursor("",!0)}}),A=q.GridColHdr=new r("GridColHdr",{include:[q.BoundedValueComponent],initNode:function(v,m){const x=this,B=m.resizerCursor??"col-resize";delete m.resizerCursor;
m.minValue??(m.minValue=16);m.maxValue??(m.maxValue=1E3);m.value??(m.value=m.minValue);m.resizable??(m.resizable=!0);m.flex??(m.flex=0);m.cellXAdj??(m.cellXAdj=0);m.cellWidthAdj??(m.cellWidthAdj=0);m.sortable??(m.sortable=!0);m.sortState??(m.sortState="none");m.placement??(m.placement=f);x.callSuper(v,m);const E=x.gridController;x.resizer=new c(x,{cursor:B,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[q.SizeToParent,q.Draggable,{requestDragPosition:function(J,
K){K=J-this.x;if(E.fitToWidth&&(0<K?K=k(K,k(-u(x),x.maxValue-x.value+d(x))):0>K&&(K=b(K,b(-a(x),x.minValue-x.value+l(x)))),0===K))return;J=x.value+K;x.resizable&&x.setValue(J);J-=x.value;K=J-K;let M=0;0>J?M=n(x,J):0<J&&(M=p(x,J));this.dragInitX+=M;K-=M;E.fitToWidth&&(0>K?t(x,K):0<K&&z(x,K))}}]);E&&(E.notifyAddHdr(x),E.notifyHdrXChange(x),E.notifyHdrVisibilityChange(x));x.setWidth(x.value);x.resizer.setVisible(!(x.last&&x.gridController.fitToWidth))},destroy:function(v){this.setGridController();this.callSuper(v)},
setSortable:function(v){this.set("sortable",v,!0)},setSortState:function(v){this.set("sortState",v,!0)},setResizable:function(v){this.set("resizable",v,!0)},setCellWidthAdj:function(v){this.cellWidthAdj=v},setCellXAdj:function(v){this.cellXAdj=v},setFlex:function(v){this.flex=v},setColumnId:function(v){this.columnId=v},setResizerCursor:function(v,m){const x=this.resizer,B=x.cursor;v!==B&&(m&&(this.__rrc=B),x.setCursor(v))},restoreResizerCursor:function(){const v=this.__rrc;v&&(this.setResizerCursor(v),
this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(v){this.last=v;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(v){const m=this.gridController;m!==v&&(m?.notifyRemoveHdr(this),this.gridController=v,this.inited&&v&&(v.notifyAddHdr(this),v.notifyHdrXChange(this),v.notifyHdrWidthChange(this),v.notifyHdrVisibilityChange(this)))},setValue:function(v){this.callSuper(v);this.inited&&this.setWidth(this.value)},
setMinValue:function(v){const m=this.minValue??0,x=this.gridController;this.callSuper(v);this.inited&&m!==this.minValue&&x?.setMinWidth(x.minWidth+this.minValue-m)},setMaxValue:function(v){const m=this.maxValue??0,x=this.gridController;v??=1E3;this.callSuper(v);this.inited&&m!==this.maxValue&&x?.setMaxWidth(x.maxWidth+this.maxValue-m)},setWidth:function(v){const m=this.width;this.callSuper(v);this.inited&&m!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(v){const m=this.x;
this.callSuper(v);this.inited&&m!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(v){const m=this.visible;this.callSuper(v);this.inited&&m!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),D=q.GridRow=new r("GridRow",{initNode:function(v,m){m.placement??(m.placement=f);this.callSuper(v,m);this.gridController?.notifyAddRow(this)},destroy:function(v){this.setGridController();this.callSuper(v)},setGridController:function(v){const m=this.gridController;
m!==v&&(m?.notifyRemoveRow(this),this.gridController=v,this.inited&&v?.notifyAddRow(this))},notifyHdrXChange:function(v){this[v.columnId+"View"]?.setX(v.x+v.cellXAdj)},notifyHdrWidthChange:function(v){this[v.columnId+"View"]?.setWidth(v.width+v.cellWidthAdj)},notifyHdrVisibilityChange:function(v){this[v.columnId+"View"]?.setVisible(v.visible)}});q.Grid=new w("Grid",c,{include:[L],initNode:function(v,m){m.overflow??(m.overflow="autox");m.bgColor??(m.bgColor="#ccc");m.rowSpacing??(m.rowSpacing=1);m.columnSpacing??
(m.columnSpacing=1);var x=m.isAutoScrolling;delete m.isAutoScrolling;this.callSuper(v,m);v=this.header=new c(this,{overflow:"hidden"});v.xLayout=new g(v,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});v.yLayout=new q.SizeToChildren(v,{locked:!0,axis:"y"});m=this.sizeHeightToRows;x=this.content=new c(this,{overflow:m?"hidden":"autoy"},x?[q.AutoScroller]:[]);x.yLayout=new g(x,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:m});this.syncTo(this,"setGridWidth","width");this.syncTo(v,
"_updateContentWidth","width");this.constrain("_updateContentHeight",[m?x:this,"height",v,"height",v,"y"])},setSizeHeightToRows:function(v){this.sizeHeightToRows=v},setRowSpacing:function(v){this.rowSpacing!==v&&(this.rowSpacing=v,this.inited&&this.content.yLayout.setSpacing(v))},setColumnSpacing:function(v){this.columnSpacing!==v&&(this.columnSpacing=v,this.inited&&this.header.xLayout.setSpacing(v))},setLocked:function(v){this.inited&&[this.header.xLayout,this.header.yLayout,this.content.yLayout].forEach(m=>
{v?m.incrementLockedCounter():(m.decrementLockedCounter(),m.update())});this.callSuper(v)},_updateContentWidth:function(v){const m=this.content,x=v.value;m.setWidth(x);m.getSubviews().forEach(B=>{B.setWidth(x)})},_updateContentHeight:function(v){var m=this.header;v=this.content;m=m.y+m.height;v.setY(m);this.sizeHeightToRows?this.setHeight(m+v.height):v.setHeight(this.height-m)},determinePlacement:function(v,m){if(v===f){let x;m.isA(D)?x=this.content:m.isA(A)&&(x=this.header);if(x)return m.gridController!==
this&&m.setGridController(this),x}return this.callSuper(v,m)},doSort:function(){const [v,m]=this.sort??["",""],x=this.getSortFunction(v,m);if(x){const B=this.content,E=B.yLayout;this.rows.sort(x);B.sortSubviews(x);E.sortSubviews(x);E.update()}},getSortFunction:(v,m)=>{if(v){const x="ascending"===m?1:-1,B=v+"View";return(E,J)=>{E=E[B].text;J=J[B].text;return E>J?x:J>E?-x:0}}}});q.SimpleGridColHdr=new w("SimpleGridColHdr",q.SimpleTextButton,{include:[A],initNode:function(v,m){const x=this;m.activeColor??
(m.activeColor="#999");m.hoverColor??(m.hoverColor="#bbb");m.readyColor??(m.readyColor="#aaa");m.inset??(m.inset=2);m.sortIconColor??(m.sortIconColor="#666");const B=m.outset??2;delete m.outset;x.callSuper(v,m);x.sortIcon=new q.FontAwesome(x,{align:"right",alignOffset:3,valign:"middle",textColor:x.sortIconColor},[{initNode:function(E,J){this.callSuper(E,J);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();x.setOutset(this.width+B);I(x)}}]);x.textView.enableEllipsis();x.setDisabled(!x.sortable);
I(x);F(x)},setSortIconColor:function(v){this.sortIconColor=v;this.sortIcon?.setTextColor(v)},setSortable:function(v){this.callSuper(v);this.inited&&(v&&this.setOutset(14),this.setDisabled(!v),F(this))},setSortState:function(v){this.callSuper(v);this.inited&&F(this)},setWidth:function(v){this.callSuper(v);this.inited&&I(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,this.sortState]))},
drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(q=>{const {Class:y,Module:w}=JS,r=Math,k=r.max,{View:b,global:{focus:c,keys:g},getAlphaObjSortFunc:f}=q,h=t=>{const z=t.selectedRow;z&&(z.setSelected(!1),t.set("selectedRow",null,!0))},e=q.InfiniteListRow=new w("InfiniteListRow",{include:[q.Reusable],setInfiniteOwner:function(t){this.infiniteOwner=t},setModel:function(t){this.model=t},setClassKey:function(t){this.classKey=t},notifyRefreshed:()=>{}}),d=q.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[e,q.Selectable]}),a=q.InfiniteList=
new y("InfiniteList",b,{initNode:function(t,z){let F=z.rowClasses;delete z.rowClasses;if("function"===typeof F){const I={};I["default"]=F;F=I}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(t,z);t=this._listView=new b(this);this._scrollAnchorView=new b(t,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(F,t);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(t,z)=>new q.TrackActivesMultiPool(t,z),setOverscrollBehavior:function(t){this.overscrollBehavior=t;this.getIDS().overscrollBehavior=t},setCollectionModel:function(t){this.collectionModel=
t},setModelIDName:function(t){this.modelIDName=t},setRowSpacing:function(t){this.rowSpacing=t;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(t){this.rowHeight=t;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(t){if(0<t&&(this.callSuper(t),this.inited)){t=this._listView;const z=this.width;t.setWidth(z);t.getSubviews().forEach(F=>{F.setWidth(z)})}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(t){const z=this.getVisibleRows();let F=z.length;for(;F;){const I=z[--F];if(I.model===t)return I}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const t=this.modelIDName,z=this.ascendingSort;return this.numericSort?q.getNumericObjSortFunc(t,z):f(t,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(t,z){var F=this.getIndexOfModelInData(t);
let I=!1;if(0<=F){var L=this._rowExtent;const A=this.getIDE().scrollTop,D=A+this.height;F=this.rowInset+F*L;L=F+L;F<=A?(this.scrollYTo(F,!0),I=!0):L>=D&&(this.scrollYTo(L-this.height,!0),I=!0);z&&((z=this.getVisibleRowForModel(t))?z.focus():this._focusToModel=t)}return I},isModelInData:function(t){return 0<=this.getIndexOfModelInData(t)},getNextModel:function(t,z=!0,F=!0){const I=this.getListData(),L=I.length;t=this.getIndexOfModelInData(t);if(0<=t)return t+=1,t>=L?z?I[0]:I[L-1]:I[t];if(F&&0<L)return I[L-
1]},getPrevModel:function(t,z=!0,F=!0){const I=this.getListData(),L=I.length;t=this.getIndexOfModelInData(t);if(0<=t)return--t,0>t?z?I[L-1]:I[0]:I[t];if(F&&0<L)return I[0]},getIndexOfModelInData:function(t){if(t){const z=this.getListData();let F=z.length;for(;F;)if(this.areModelsEqual(z[--F],t))return F}return-1},areModelsEqual:function(t,z){const F=this.modelIDName;return t[F]===z[F]},getActiveRowForModel:function(t){if(t){const z=this._itemPool.getActives();let F=z.length;for(;F;){const I=z[--F];
if(this.areModelsEqual(I.model,t))return I}}},refreshListData:function(t,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(t,z)},resetListUI:function(t,z){const F=this.getListData().length,I=this._listView,L=this._scrollAnchorView;I.setHeight(F*this._rowExtent-(0<F?this.rowSpacing:0)+this.rowInset+this.rowOutset);L.setY(I.height-L.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;t||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(t){if(c.focusedView?.isDescendantOf(t)){const z=this.getFocusTrap();z?z.focus():c.clear()}t.setVisible(!1);this._itemPool.putInstance(t)},refreshListUI:function(t){t=this._rowExtent;const z=this.rowInset,F=this.forceFullResetOnNextRefresh;var I=this.getIDE().scrollTop;const L=this.getListData()??[];var A=k(0,r.floor((I-z)/t));I=r.min(L.length,r.ceil((I-z+this.height)/t));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==A||this._endIdx!==I||F){const v=this.width,m=this.rowHeight,x=this._visibleRowsByIdx,B=this._focusToModel;this._startIdx=A;this._endIdx=I;for(var D in x)if(D<A||D>=I)this.putRowBackInPool(x[D]),delete x[D];for(D=A;D<I;D++){A=x[D];const E=L[D],J=this.getClassKey(E);let K=!1;A&&A.classKey===J||(A&&this.putRowBackInPool(A),x[D]=A=this._itemPool.getInstance(J),A.setInfiniteOwner(this),A.setClassKey(J),A.setWidth(v),A.setHeight(m),A.setY(z+D*t),A.setVisible(!0),K=!0);!F&&A.model&&
this.areModelsEqual(A.model,E)?K&&this.updateRow(A):(A.setModel(E),this.updateRow(A));A.notifyRefreshed();A.bringToFront();B&&this.areModelsEqual(B,E)&&(A.focus(),this._focusToModel=null)}}},getClassKey:t=>"default",updateRow:t=>{}}),l=q.SimpleSelectableInfiniteListRow=new y("SimpleSelectableInfiniteListRow",q.SimpleButton,{include:[d,q.ArrowKeyActivation],initNode:function(t,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=g.LIST_KEYS);this.callSuper(t,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(t){this.callSuper(t);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(t,z){t===g.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(t,z)},doKeyArrowLeftOrUp:function(t,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(t,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(t){switch(t){case g.CODE_ENTER:case g.CODE_SPACE:this.doActivated()}}}),u=q.SelectableInfiniteList=new y("SelectableInfiniteList",
a,{setSelectedRow:function(t){const z=this.selectedRow;t!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",t,!0),t&&(this.setSelectedRowModel(t.model),t.setSelected(!0)))},setSelectedRowModel:function(t){this.set("selectedRowModel",t,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(t,z,F){t&&(h(this),this.setSelectedRowModel(t),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(t,z=!0){this.selectRowForModel(this.getNextModel(t),z,!0)},selectPrevRowForModel:function(t,z=!0){this.selectRowForModel(this.getPrevModel(t),z,!1)},resetListUI:function(t,z){this.isModelInData(this.selectedRowModel)?h(this):this.setSelectedRow();this.callSuper(t,z)},putRowBackInPool:function(t){t.selected&&h(this);this.callSuper(t)},refreshListUI:function(t){t=c.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),t&&t!==z||z.focus(!0))}}),n=new w("InfiniteGridRowMixin",{notifyXChange:function(t){this[t.columnId+"View"]?.setX(t.x+t.cellXAdj)},notifyWidthChange:function(t){this[t.columnId+"View"]?.setWidth(t.width+t.cellWidthAdj)},notifyVisibilityChange:function(t){this[t.columnId+"View"]?.setVisible(t.visible)}}),p=new w("InfiniteGridMixin",{setGridHeader:function(t){(this.gridHeader=t)?.setGrid(this)},makeReady:function(t,z){const F=this.gridHeader;F?(this.forceFullResetOnNextRefresh=
z,F.setSort(t),F.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [t,z]=this.gridHeader.sort??["",""];return t?f(t,"ascending"===z,!1):this.callSuper()},updateRow:function(t){this.gridHeader?.columnHeaders.forEach(z=>{t.notifyXChange(z);t.notifyWidthChange(z);t.notifyVisibilityChange(z)})},notifyXChange:function(t){this.getVisibleRows().forEach(z=>{z.notifyXChange(t)})},notifyWidthChange:function(t){this.getVisibleRows().forEach(z=>{z.notifyWidthChange(t)})},notifyVisibilityChange:function(t){this.getVisibleRows().forEach(z=>
{z.notifyVisibilityChange(t)})}});q.InfiniteGridRow=new w("InfiniteGridRow",{include:[e,n]});q.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[d,n]});q.SimpleSelectableInfiniteGridRow=new y("SimpleSelectableInfiniteGridRow",l,{include:[n]});q.InfiniteGrid=new y("InfiniteGrid",a,{include:[p]});q.SelectableInfiniteGrid=new y("InfiniteGrid",u,{include:[p]});q.InfiniteGridHeader=new y("InfiniteGridHeader",b,{include:[q.GridController],initNode:function(t,z){z.columnSpacing??(z.columnSpacing=
1);z.overflow="hidden";this.callSuper(t,z);new q.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(t){this.grid=t},setColumnSpacing:function(t){this.columnSpacing=t},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:k(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(t){this.callSuper(t);this.inited&&(t=this.height,this.columnHeaders.forEach(z=>{z.setHeight(t)}))},setWidth:function(t){this.callSuper(k(this.minWidth,t));this.inited&&(t=this.width,
this.setGridWidth(t),this.grid.setWidth(t))},subviewAdded:function(t){this.callSuper(t);t.isA(q.GridColHdr)&&(t.setGridController(this),t.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(t){this.isLocked()||this.grid.notifyXChange(t)},notifyHdrWidthChange:function(t){this.isLocked()||this.grid.notifyWidthChange(t)},updateRowsForVisibilityChange:function(t){this.grid.notifyVisibilityChange(t)}})})(myt);
(q=>{const y=JS.Class,w=q.PanelStackTransition=new y("PanelStackTransition",q.Node,{to:r=>Promise.resolve(r),from:r=>Promise.resolve(r)});q.PanelStack=new y("PanelStack",q.View,{include:[q.SelectionManager],initNode:function(r,k){k.overflow="hidden";k.itemSelectionId??(k.itemSelectionId="panelId");k.maxSelected??(k.maxSelected=1);this.callSuper(r,k);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(r){this.set("transition",r,!0)},__updateWidth:function(r){this.getActivePanel()?.setWidth(r.value)},
__updateHeight:function(r){this.getActivePanel()?.setHeight(r.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(r){return this.getSelectableItem(r)},selectPanel:function(r){this.selectById(r)},doSelected:function(r){r.setWidth(this.width);r.setHeight(this.height)},doStackTransition:function(r){this["doStackTransition"+(r.selected?"To":"From")](r)},doStackTransitionTo:function(r){const k=this;k.doBeforeTransitionTo(r);const b=k.transition;b?b.to(r).then(c=>{k.doAfterTransitionTo(c)}):
(r.makeHighestZIndex(),r.setVisible(!0),k.doAfterTransitionTo(r))},doBeforeTransitionTo:r=>{},doAfterTransitionTo:r=>{},doStackTransitionFrom:function(r){const k=this;k.doBeforeTransitionFrom(r);const b=k.transition;b?b.from(r).then(c=>{k.doAfterTransitionFrom(c)}):(r.setVisible(!1),k.doAfterTransitionFrom(r))},doBeforeTransitionFrom:r=>{},doAfterTransitionFrom:r=>{}});q.StackablePanel=new JS.Module("StackablePanel",{include:[q.Selectable],initNode:function(r,k){k.visible=k.selected=!1;k.bgColor??
(k.bgColor="#fff");k.panelId??(k.panelId=k.name);this.callSuper(r,k);this.selected&&this.doStackTransition()},setPanelStack:function(r){this.panelStack=r},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(r){this.panelId=r},setSelected:function(r){this.selected!==r&&(this.callSuper(r),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});q.PanelStackFadeTransition=new y("PanelStackFadeTransition",w,{initNode:function(r,
k){k.duration??(k.duration=1E3);this.callSuper(r,k)},setDuration:function(r){this.duration=r},to:function(r){return new Promise((k,b)=>{r.stopActiveAnimators("opacity");r.setVisible(!0);r.animate({attribute:"opacity",to:1,duration:this.duration}).next(c=>{r.makeHighestZIndex();k(r)})})},from:function(r){return new Promise((k,b)=>{r.stopActiveAnimators("opacity");r.animate({attribute:"opacity",to:0,duration:this.duration}).next(c=>{r.setVisible(!1);k(r)})})}});q.PanelStackSlideTransition=new y("PanelStackSlideTransition",
w,{initNode:function(r,k){k.duration??(k.duration=1E3);k.direction??(k.direction="right");this.callSuper(r,k)},setDuration:function(r){this.duration=r},setDirection:function(r){this.direction=r},to:function(r){const k=r.getPanelStack(),b=this.duration;let c,g;switch(this.direction){case "left":g="x";c=k.width;break;case "right":g="x";c=-k.width;break;case "up":g="y";c=k.height;break;case "down":g="y",c=-k.height}r.stopActiveAnimators(g);r.set(g,c);r.setVisible(!0);return new Promise((f,h)=>{h=e=>
{r.makeHighestZIndex();f(r)};0<b?r.animate({attribute:g,to:0,duration:b}).next(h):(r.set(g,0),r.makeHighestZIndex(),f(r))})},from:function(r){const k=r.getPanelStack(),b=this.duration;let c,g;switch(this.direction){case "left":g="x";c=-k.width;break;case "right":g="x";c=k.width;break;case "up":g="y";c=-k.height;break;case "down":g="y",c=k.height}r.stopActiveAnimators(g);return new Promise((f,h)=>{h=e=>{r.setVisible(!1);f(r)};0<b?r.animate({attribute:g,to:c,duration:b}).next(h):(r.set(g,c),r.setVisible(!1),
f(r))})}})})(myt);
(q=>{const y=JS.Module,{Draggable:w,global:{dragManager:r,mouse:k}}=q,b=(g,f,h)=>{[f,h].forEach(e=>{g["__is"+e]=!1;g["__tmrId"+e]=null})},c=q.DragGroupSupport=new y("DragGroupSupport",{initNode:function(g,f){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(g,f)},setDragGroups:function(g){const f=this.__dgs={};for(const h in g)f[h]=!0;this.__anyDG=f.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(g){const f=this.__drpgs=
{};for(const h in g)f[h]=!0;this.__anyDRPG=f.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(g){g&&(this.__dgs[g]=!0,"*"===g&&(this.__anyDG=!0))},removeDragGroup:function(g){g&&(delete this.__dgs[g],"*"===g&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(g){g&&(this.__drpgs[g]=!0,"*"===g&&(this.__anyDRPG=!0))},removeDropGroup:function(g){g&&(delete this.__drpgs[g],"*"===g&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
q.DropSource=new y("DropSource",{include:[w],initNode:function(g,f){f.distanceBeforeDrag??(f.distanceBeforeDrag=2);f.dropParent??(f.dropParent=g.getRoot());this.callSuper(g,f)},setDropClass:function(g){this.dropClass=q.resolveClassname(g)},setDropClassAttrs:function(g){this.dropClassAttrs=g},setDropParent:function(g){this.dropParent=g},startDrag:function(g){const f=this.dropable=this.makeDropable();if(f){const h=f.distanceBeforeDrag;f.distanceBeforeDrag=0;f.doMouseDown(g);f.__doMouseDown(g);f.distanceBeforeDrag=
h}},doMouseUp:function(g){this.callSuper(g);const f=this.dropable;f&&(f.__doMouseUp(g),f.doMouseUp(g),this.dropable=null)},makeDropable:function(){const g=this.dropClass,f=this.dropParent;if(g&&f){const h=q.DomElementProxy.getRelativePosition(this.getIDE(),f.getIDE());return new g(f,{...this.dropClassAttrs,x:h.x??0,y:h.y??0})}}});q.DropTarget=new y("DropTarget",{include:[c],initNode:function(g,f){this.callSuper(g,f);r.registerDropTarget(this)},destroy:function(){r.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(g){return!this.disabled&&this.isVisible()},notifyDragStart:g=>{},notifyDragStop:g=>{},notifyDragEnter:g=>{},notifyDragLeave:g=>{},notifyDrop:g=>{}});q.Dropable=new y("Dropable",{include:[w,c],setDropTarget:function(g){this.dropTarget=g},setDropped:function(g){this.dropped=g},setDropFailed:function(g){this.dropFailed=g},willPermitDrop:g=>!0,startDrag:function(g){this.setDropped(!1);this.setDropFailed(!1);r.startDrag(this);this.callSuper(g)},updateDrag:function(g){r.updateDrag(g,
this);this.callSuper(g)},stopDrag:function(g,f){r.stopDrag(g,this,f);this.callSuper(g,f);f?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(g){this.setDropTarget(g)},notifyDragLeaving:function(g){this.setDropTarget()},notifyDropped:function(g,f){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});q.AutoScroller=new y("AutoScroller",{include:[c],initNode:function(g,f){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;f.overflow??(f.overflow="auto");this.callSuper(g,f);r.registerAutoScroller(this)},destroy:function(){r.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(g){this.scrollBorder=Math.max(1,g)},setScrollFrequency:function(g){this.scrollFrequency=g},setScrollAmount:function(g){this.scrollAmount=g},setScrollAcceleration:function(g){this.scrollAcceleration=g},notifyAutoScrollerDragStart:function(g){g=this.getIDE();(g.scrollHeight>g.clientHeight||
g.scrollWidth>g.clientWidth)&&this.attachToDom(k,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(g){this.detachFromDom(k,"__hndlMove","mousemove",!0);b(this,"Up","Down");b(this,"Left","Right")},__hndlMove:function(g){const f=this;let {pageX:h,pageY:e}=g.value;if(f.containsPoint(h,e)){g=f.getPagePosition();const d=f.scrollBorder,a=(l,u)=>{f["__is"+l]&&(f.getIDE()["scroll"+("Up"===l||"Down"===l?"Top":"Left")]+=u*f["__amt"+l],f["__tmrId"+l]=setTimeout(()=>{a(l,u)},f.scrollFrequency))};
h-=g.x;e-=g.y;e<d?(f.__isUp=!0,f.__amtUp=Math.round(f.scrollAmount*(1+f.scrollAcceleration*(1-e/d))),f.__tmrIdUp||a("Up",-1)):f.height-e<d?(f.__isDown=!0,f.__amtDown=Math.round(f.scrollAmount*(1+f.scrollAcceleration*(1-(f.height-e)/d))),f.__tmrIdDown||a("Down",1)):b(f,"Up","Down");h<d?(f.__isLeft=!0,f.__amtLeft=Math.round(f.scrollAmount*(1+f.scrollAcceleration*(1-h/d))),f.__tmrIdLeft||a("Left",-1)):f.width-h<d?(f.__isRight=!0,f.__amtRight=Math.round(f.scrollAmount*(1+f.scrollAcceleration*(1-(f.width-
h)/d))),f.__tmrIdRight||a("Right",1)):b(f,"Left","Right")}else b(f,"Up","Down"),b(f,"Left","Right")}})})(myt);
(q=>{const {max:y,cos:w,sin:r,PI:k}=Math,b=q.Geometry.degreesToRadians,c=d=>{var a=b(d.startAngle),l=b(d.endAngle);if(a>l){var u=a;a=l;l=u}u=d.__path;var n=d.width/2,p=d.thickness;const t=d.radius,z=t+p;var F=l-a;const I=F+1E-4>=2*k;I&&(a=0,l=k);const L=[n+z*w(a),n+z*r(a)],A=[n+z*w(l),n+z*r(l)];l=[n+t*w(l),n+t*r(l)];a=[n+t*w(a),n+t*r(a)];n=["M"+L.join()];I?n.push("A"+[z,z,0,1,1,A].join(),"A"+[z,z,0,1,1,L].join(),"L"+l.join(),"A"+[t,t,0,1,0,a].join(),"A"+[t,t,0,1,0,l].join()):(F=F%(2*k)>k?1:0,p/=2,
n.push("A"+[z,z,0,F,1,A].join(),d.endCapRounding?"A"+[p,p,0,0,1,l].join():"L"+l.join(),"A"+[t,t,0,F,0,a].join(),d.startCapRounding?"A"+[p,p,0,0,1,L].join():""));n.push("z");u.setAttribute("d",n.join(" "));u.setAttribute("fill",d.color)},g=d=>{const a=2*(d.radius+d.thickness),l=d.__svg;d.setWidth(a);d.setHeight(a);l.setAttribute("viewBox","0 0 "+a+" "+a);l.setAttribute("width",a);l.setAttribute("height",a);c(d)},f=(d,a,l)=>{d[a]!==l&&(d[a]=l,d.inited&&(c(d),d.fireEvent(a,l)))},h=(d,a,l)=>{d[a]!==l&&
(d[a]=l=y(0,l),d.inited&&(g(d),d.fireEvent(a,l)))},e=(d,a)=>{d=document.createElementNS("http://www.w3.org/2000/svg",d);a?.appendChild(d);return d};q.Annulus=new JS.Class("Annulus",q.BackView,{initNode:function(d,a){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(d,a);g(this)},createOurDomElement:function(d){d=this.callSuper(d);var a=Array.isArray(d)?d[1]:d;a=this.__svg=e("svg",a);this.__path=e("path",a);a.style.pointerEvents=
"none";return d},setRadius:function(d){h(this,"radius",d)},setThickness:function(d){h(this,"thickness",d)},setStartAngle:function(d){f(this,"startAngle",d)},setEndAngle:function(d){f(this,"endAngle",d)},setStartCapRounding:function(d){f(this,"startCapRounding",d)},setEndCapRounding:function(d){f(this,"endCapRounding",d)},setColor:function(d){f(this,"color",d)},isColorAttr:function(d){return"color"===d||this.callSuper(d)}})})(myt);
(q=>{let y;const w=JS.Class,{mouse:r,windowResize:k,dragManager:b}=q.global,{min:c,max:g,round:f}=Math,h=u=>{u.__checkTID&&(clearTimeout(u.__checkTID),delete u.__checkTID)},e=u=>{if(u.tooltip){const n=u._lastPos;if(u.tooltip.parent.containsPoint(n.x,n.y))return!0}u.hideTip();return!1},d=q.BaseTooltip=new w("BaseTooltip",q.View,{include:[q.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(u,n){this.tipDelay=this.nextTipDelay=d.TIP_DELAY;this.tipHideDelay=d.TIP_HIDE_DELAY;n.visible??
(n.visible=!1);this.callSuper(u,n)},setTooltip:function(u){this.inited&&(this.tooltip=u)&&(this.attachToDom(r,"__hndl_mousemove","mousemove",!0),this.attachToDom(u.parent,"hideTip","mousedown",!0),this.attachToDom(u.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(u){const n=this;n._lastPos=q.MouseObservable.getMouseFromEvent(u);e(n)&&(h(n),n.__checkTID=setTimeout(()=>{delete n.__checkTID;e(n)&&n.showTip()},n.nextTipDelay))},hideTip:function(u){h(this);if(u=this.tooltip?.parent)this.detachFromDom(u,
"hideTip","mousedown",!0),this.detachFromDom(u,"hideTip","mouseup",!0),this.detachFromDom(r,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){b.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),a=q.Tooltip=new w("Tooltip",d,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},initNode:function(u,
n){n.edgeSize??(n.edgeSize=a.EDGE_SIZE);n.edgeColor??(n.edgeColor=a.EDGE_COLOR);n.shadowSize??(n.shadowSize=a.SHADOW_SIZE);n.shadowColor??(n.shadowColor=a.SHADOW_COLOR);n.insetH??(n.insetH=a.HORIZONTAL_INSET);n.insetV??(n.insetV=a.VERTICAL_INSET);n.tipBgColor??(n.tipBgColor=a.TIP_BG_COLOR);n.tipTextColor??(n.tipTextColor=a.TIP_TEXT_COLOR);this.callSuper(u,n);this._tipText=new q.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},setEdgeSize:function(u){this.edgeSize=
u},setEdgeColor:function(u){this.edgeColor=u},setShadowSize:function(u){this.shadowSize=u},setShadowColor:function(u){this.shadowColor=u},setInsetH:function(u){this.insetH=u},setInsetV:function(u){this.insetV=u},setTipBgColor:function(u){this.tipBgColor=u},setTipTextColor:function(u){this.tipTextColor=u},showTip:function(){const u=this.tooltip;var n=u.text;const p=u.parent;var t=this._tipText;const z=this.edgeSize,F=this.shadowSize;t.text!==n&&t.setText(n);t.setWidth("auto");var I=c(t.measureNoWrapWidth(),
u.maxTextWidth);n=I+2*t.x;const L=n+2*z;t.setWidth(I);t.sizeViewToDom();I=p.getPagePosition();t=t.height+2*t.y;const A=t+2*z,D=I.y-A+("below"===u.tipvalign?p.height+A:0);I=I.x;switch(u.tipalign){case "right":I-=L;case "farright":I+=p.width;break;case "farleft":I-=L}this.setX(f(c(g(I,0),k.getWidth()-L)));this.setY(f(c(g(D,0),k.getHeight()-A)));this.setWidth(n);this.setHeight(t);this.setBgColor(this.tipBgColor);this.setBorder([z,"solid",this.edgeColor]);this.setBoxShadow([F,F,F,this.shadowColor]);this.callSuper()}}),
l=q.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:a,MAX_TEXT_WIDTH:280},setTooltip:function(u){this.callSuper("");this.set("tooltip",u,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(u){this.set("tipAlign",u,!0)},setTipValign:function(u){this.set("tipValign",u,!0)},setMaxTextWidth:function(u){this.set("maxTextWidth",u,!0)},setTipClass:function(u){this.set("tipClass",u,!0)},doSmoothMouseOver:function(u){const n=this.getTooltip();this.callSuper(u);if(u&&n){u=this.tipClass??
l.TIP_CLASS;!y||y instanceof u||(y.destroy(),y=null);if(!y){let p=document.getElementById("tooltipDiv");p||(p=q.DomElementProxy.createElement("div",{position:"absolute"}),q.getElement().appendChild(p));y=new u(p,{domId:"tooltipDiv"})}y.setTooltip({parent:this,text:n,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||l.MAX_TEXT_WIDTH})}}})})(myt);
(q=>{const y=Math,{min:w,max:r}=y;q.Path=new JS.Class("Path",{initialize:function(k){this.setVectors(k??[])},setVectors:function(k){this._boundingBox=null;this.vectors=k},copyFrom:function(k){this.vectors=k.vectors.slice();this._boundingBox=null},drawInto:function(k){k.beginPath();const b=this.vectors;let c=b.length,g=0;for(k.moveTo(b[g++],b[g++]);c>g;)k.lineTo(b[g++],b[g++]);k.closePath()},translate:function(k,b){const c=this.vectors;let g=c.length;for(;g;)c[--g]+=b,c[--g]+=k;this._boundingBox=null},
rotate:function(k){const b=y.cos(k);k=y.sin(k);const c=this.vectors,g=c.length;for(let f=0;g>f;){const h=c[f]*b-c[f+1]*k,e=c[f]*k+c[f+1]*b;c[f++]=h;c[f++]=e}this._boundingBox=null},rotateAroundOrigin:function(k,b,c){this.translate(-b,-c);this.rotate(k);this.translate(b,c)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const k=this.vectors;let b=k.length,c,g,f,h;if(2<=b){f=h=k[--b];for(c=g=k[--b];b;){const e=k[--b],d=k[--b];f=w(e,f);h=r(e,h);c=w(d,c);g=r(d,g)}return this._boundingBox=
{x:c,y:f,width:g-c,height:h-f}}return this._boundingBox=null},getCenter:function(){const k=this.getBoundingBox();return k?{x:k.x+k.width/2,y:k.y+k.height/2}:null},isPointInPath:function(k,b){"object"===typeof k&&(b=k.y,k=k.x);return q.Geometry.isPointInPath(k,b,this.getBoundingBox(),this.vectors)}})})(myt);
(q=>{const y=console.warn,w=Math.PI,r=w/2,k=3*w/2,b=q.AccessorSupport,c={};"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" ").forEach(g=>{c[g]=function(...f){this.__ctx[g](...f)}});["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"].forEach(g=>
{c[g]=function(...f){return this.__ctx[g](...f)}});"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" ").forEach(g=>{c[b.generateSetterName(g)]=function(f){this.__ctx[g]=f};c[b.generateGetterName(g)]=function(){return this.__ctx[g]}});q.Canvas=new JS.Class("Canvas",q.BackView,{include:[c],createOurDomElement:function(g){g=this.callSuper(g);const f=Array.isArray(g)?
g[1]:g,h=this.__cvs=document.createElement("canvas");h.className="mytUnselectable";f.appendChild(h);h.style.position="absolute";this.__ctx=h.getContext("2d");return g},setWidth:function(g){0>g&&(g=0);this.__cvs.setAttribute("width",g);this.callSuper(g)},setHeight:function(g){0>g&&(g=0);this.__cvs.setAttribute("height",g);this.callSuper(g)},clear:function(){const g=this.__ctx;g.save();g.setTransform(1,0,0,1,0,0);g.clearRect(0,0,this.width,this.height);g.restore()},dataURItoBlob:function(g,f){g=atob(g.split(",")[1]);
const h=g.length,e=[];for(let d=0;d<h;)e.push(g.charCodeAt(d++));return new Blob([new Uint8Array(e)],{type:f})},getDataURL:function(g,f){return this.__cvs.toDataURL(g,f)},getImageFile:function(g,f,h){switch(g){case "png":case "PNG":g="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":g="jpeg";h??=.5;break;default:y("Unexpected image type",g),g=g.toLowerCase()}const e="image/"+g;h=this.dataURItoBlob(this.getDataURL(e,h),e);f&&(h.name=f+"."+g);return h},circle:function(g,f,h){this.__ctx.arc(g,
f,h,0,2*w)},drawRoundedRect:function(g,f,h,e,d,a){const l=this.lineTo.bind(this),u=this.arc.bind(this);a=e+a;d=h+d;this.beginPath();this.moveTo(h,e+g);l(h,a-g);u(h+g,a-g,g,w,r,!0);l(d-g,a);u(d-g,a-g,g,r,0,!0);l(d,e+g);u(d-g,e+g,g,0,k,!0);l(h+g,e);u(h+g,e+g,g,k,w,!0);this.closePath();0<f&&(g-=f,h+=f,d-=f,e+=f,a-=f,this.moveTo(h,e+g),u(h+g,e+g,g,w,k),l(d-g,e),u(d-g,e+g,g,k,0),l(d,a-g),u(d-g,a-g,g,0,r),l(h+g,a),u(h+g,a-g,g,r,w),this.closePath());return this},drawRectOutline:function(g,f,h,e,d){d=h+d;
e=f+e;const a=f+g,l=e-g,u=h+g;g=d-g;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(f,h);n(f,d);n(e,d);n(e,h);n(f,h);n(a,u);n(l,u);n(l,g);n(a,g);n(a,u);this.closePath();return this},drawPartiallyRoundedRect:function(g,f,h,e,d,a,l,u){u=a+u;l=d+l;const n=this.lineTo.bind(this),p=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(d,a+g);n(d,u-h);0<h&&p(d,u,d+h,u);n(l-e,u);0<e&&p(l,u,l,u-e);n(l,a+f);0<f&&p(l,a,l-f,a);n(d+g,a);0<g&&p(d,a,d,a+g);this.closePath();return this},drawAnnulus:function(g,
f,h,e,d,a,l,u=60){const n=q.Color;l.forEach(B=>{"string"===typeof B.color&&(B.color=n.makeColorFromHexString(B.color))});1>u&&(y("Invalid segements",u),u=60);u=w/u;let p=0;for(var t=l.length-1;p<t;){var z=l[p++];const {angle:B,color:E}=z,{angle:J,color:K}=l[p];var F=Math.round((J-B)/u),I=E.getDiffFrom(K);z.colorDelta={red:I.red/F,green:I.green/F,blue:I.blue/F}}h=new q.Path([g+h,f,g+e,f]);h.rotateAroundOrigin(d,g,f);e=h.vectors;let [L,A,D,v]=e,m=0,x=w/360;for(p=0;a>d;){F=L;I=A;t=D;z=v;d+=u;d>a&&(u+=
a-d,x=0,d=a);h.rotateAroundOrigin(u+x,g,f);[L,A,D,v]=e;this.beginPath();this.moveTo(F,I);this.lineTo(t,z);this.lineTo(D,v);this.lineTo(L,A);this.closePath();const {color:B,colorDelta:E}=l[p];this.setFillStyle(n.rgbToHex(B.red+m*E.red,B.green+m*E.green,B.blue+m*E.blue,!0));this.fill();0<x&&(h.rotateAroundOrigin(-x,g,f),[L,A,D,v]=e);m++;d>=l[p+1].angle&&(m=0,p++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
