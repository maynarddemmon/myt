/* Myt 1.0.1 | (c) 2012-2014 Maynard Demmon | MIT License */
BrowserDetect=(function(){var d,e=function(k){var h,j=k.length;while(j){h=k[--j];d=h.ver||h.id;if((h.str&&h.str.indexOf(h.sub)>=0)||h.prop){return h.id}}},c=function(j){var h=j.indexOf(d);if(h>=0){return parseFloat(j.substring(h+d.length+1))}},f=navigator.userAgent,a=navigator.platform,g="UNKNOWN";return{browser:e([{str:f,sub:"OmniWeb",id:"OmniWeb",ver:"OmniWeb/"},{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:f,sub:"Firefox",id:"Firefox"},{str:f,sub:"Chrome",id:"Chrome"},{str:f,sub:"MSIE",id:"Explorer",ver:"MSIE"}])||g,version:c(f)||c(navigator.appVersion)||g,os:e([{str:f,sub:"iPhone",id:"iPhone/iPod"},{str:a,sub:"Linux",id:"Linux"},{str:a,sub:"Mac",id:"Mac"},{str:a,sub:"Win",id:"Windows"}])||g,}})();if(typeof console!=="object"){console={log:function(a){},warn:function(a){},error:function(a){}}}if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(!global.mytNoHistoryShim){(function(c,d){var a=c.History=c.History||{};if(typeof a.Adapter!=="undefined"){throw new Error("History.js Adapter has already been loaded...")}a.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=a.Adapter._uid++)},bind:function(g,e,h){var f=a.Adapter.uid(g);a.Adapter.handlers[f]=a.Adapter.handlers[f]||{};a.Adapter.handlers[f][e]=a.Adapter.handlers[f][e]||[];a.Adapter.handlers[f][e].push(h);g["on"+e]=(function(k,j){return function(l){a.Adapter.trigger(k,j,l)}})(g,e)},trigger:function(h,e,j){j=j||{};var g=a.Adapter.uid(h),f,k;a.Adapter.handlers[g]=a.Adapter.handlers[g]||{};a.Adapter.handlers[g][e]=a.Adapter.handlers[g][e]||[];for(f=0,k=a.Adapter.handlers[g][e].length;f<k;++f){a.Adapter.handlers[g][e][f].apply(this,[j])}},extractEventData:function(f,g){var e=(g&&g[f])||d;return e},onDomLoad:function(f){var e=c.setTimeout(function(){f()},2000);c.onload=function(){clearTimeout(e);f()}}};if(typeof a.init!=="undefined"){a.init()}})(window);(function(e,h){var a=e.document,f=e.setTimeout||f,g=e.clearTimeout||g,c=e.setInterval||c,d=e.History=e.History||{};if(typeof d.initHtml4!=="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}d.initHtml4=function(){if(typeof d.initHtml4.initialized!=="undefined"){return false}else{d.initHtml4.initialized=true}d.enabled=true;d.savedHashes=[];d.isLastHash=function(j){var l=d.getHashByIndex(),k;k=j===l;return k};d.isHashEqual=function(j,k){j=encodeURIComponent(j).replace(/%25/g,"%");k=encodeURIComponent(k).replace(/%25/g,"%");return j===k};d.saveHash=function(j){if(d.isLastHash(j)){return false}d.savedHashes.push(j);return true};d.getHashByIndex=function(j){var k=null;if(typeof j==="undefined"){k=d.savedHashes[d.savedHashes.length-1]}else{if(j<0){k=d.savedHashes[d.savedHashes.length+j]}else{k=d.savedHashes[j]}}return k};d.discardedHashes={};d.discardedStates={};d.discardState=function(n,j,m){var k=d.getHashByState(n),l;l={discardedState:n,backState:m,forwardState:j};d.discardedStates[k]=l;return true};d.discardHash=function(k,j,m){var l={discardedHash:k,backState:m,forwardState:j};d.discardedHashes[k]=l;return true};d.discardedState=function(j){var l=d.getHashByState(j),k;k=d.discardedStates[l]||false;return k};d.discardedHash=function(k){var j=d.discardedHashes[k]||false;return j};d.recycleState=function(j){var k=d.getHashByState(j);if(d.discardedState(j)){delete d.discardedStates[k]}return true};if(d.emulated.hashChange){d.hashChangeInit=function(){d.checkerFunction=null;var j="",o,k,m,n,l=Boolean(d.getHash());if(d.isInternetExplorer()){o="historyjs-iframe";k=a.createElement("iframe");k.setAttribute("id",o);k.setAttribute("src","#");k.style.display="none";a.body.appendChild(k);k.contentWindow.document.open();k.contentWindow.document.close();m="";n=false;d.checkerFunction=function(){if(n){return false}n=true;var q=d.getHash(),p=d.getHash(k.contentWindow.document);if(q!==j){j=q;if(p!==q){m=p=q;k.contentWindow.document.open();k.contentWindow.document.close();k.contentWindow.document.location.hash=d.escapeHash(q)}d.Adapter.trigger(e,"hashchange")}else{if(p!==m){m=p;if(l&&p===""){d.back()}else{d.setHash(p,false)}}}n=false;return true}}else{d.checkerFunction=function(){var p=d.getHash()||"";if(p!==j){j=p;d.Adapter.trigger(e,"hashchange")}return true}}d.intervalList.push(c(d.checkerFunction,d.options.hashChangeInterval));return true};d.Adapter.onDomLoad(d.hashChangeInit)}if(d.emulated.pushState){d.onHashChange=function(n){var o=((n&&n.newURL)||d.getLocationHref()),m=d.getHashByUrl(o),l=null,j=null,p=null,k;if(d.isLastHash(m)){d.busy(false);return false}d.doubleCheckComplete();d.saveHash(m);if(m&&d.isTraditionalAnchor(m)){d.Adapter.trigger(e,"anchorchange");d.busy(false);return false}l=d.extractState(d.getFullUrl(m||d.getLocationHref()),true);if(d.isLastSavedState(l)){d.busy(false);return false}j=d.getHashByState(l);k=d.discardedState(l);if(k){if(d.getHashByIndex(-2)===d.getHashByState(k.forwardState)){d.back(false)}else{d.forward(false)}return false}d.pushState(l.data,l.title,encodeURI(l.url),false);return true};d.Adapter.bind(e,"hashchange",d.onHashChange);d.pushState=function(n,s,j,p){j=encodeURI(j).replace(/%25/g,"%");if(d.getHashByUrl(j)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(p!==false&&d.busy()){d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:p});return false}d.busy(true);var m=d.createStateObject(n,s,j),k=d.getHashByState(m),l=d.getState(false),o=d.getHashByState(l),r=d.getHash(),q=d.expectedStateId==m.id;d.storeState(m);d.expectedStateId=m.id;d.recycleState(m);d.setTitle(m);if(k===o){d.busy(false);return false}d.saveState(m);if(!q){d.Adapter.trigger(e,"statechange")}if(!d.isHashEqual(k,r)&&!d.isHashEqual(k,d.getShortUrl(d.getLocationHref()))){d.setHash(k,false)}d.busy(false);return true};d.replaceState=function(n,r,j,p){j=encodeURI(j).replace(/%25/g,"%");if(d.getHashByUrl(j)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(p!==false&&d.busy()){d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:p});return false}d.busy(true);var m=d.createStateObject(n,r,j),k=d.getHashByState(m),l=d.getState(false),o=d.getHashByState(l),q=d.getStateByIndex(-2);d.discardState(l,m,q);if(k===o){d.storeState(m);d.expectedStateId=m.id;d.recycleState(m);d.setTitle(m);d.saveState(m);d.Adapter.trigger(e,"statechange");d.busy(false)}else{d.pushState(m.data,m.title,m.url,false)}return true}}if(d.emulated.pushState){if(d.getHash()&&!d.emulated.hashChange){d.Adapter.onDomLoad(function(){d.Adapter.trigger(e,"hashchange")})}}};if(typeof d.init!=="undefined"){d.init()}})(window);(function(k,a){var f=k.console||a,m=k.document,p=k.navigator,o=false,d=k.setTimeout,n=k.clearTimeout,g=k.setInterval,r=k.clearInterval,q=k.JSON,l=k.alert,c=k.History=k.History||{},j=k.history;try{o=k.sessionStorage;o.setItem("TEST","1");o.removeItem("TEST")}catch(h){o=false}q.stringify=q.stringify||q.encode;q.parse=q.parse||q.decode;if(typeof c.init!=="undefined"){throw new Error("History.js Core has already been loaded...")}c.init=function(e){if(typeof c.Adapter==="undefined"){return false}if(typeof c.initCore!=="undefined"){c.initCore()}if(typeof c.initHtml4!=="undefined"){c.initHtml4()}return true};c.initCore=function(e){if(typeof c.initCore.initialized!=="undefined"){return false}else{c.initCore.initialized=true}c.options=c.options||{};c.options.hashChangeInterval=c.options.hashChangeInterval||100;c.options.safariPollInterval=c.options.safariPollInterval||500;c.options.doubleCheckInterval=c.options.doubleCheckInterval||500;c.options.disableSuid=c.options.disableSuid||false;c.options.storeInterval=c.options.storeInterval||1000;c.options.busyDelay=c.options.busyDelay||250;c.options.debug=c.options.debug||false;c.options.initialTitle=c.options.initialTitle||m.title;c.options.html4Mode=c.options.html4Mode||false;c.options.delayInit=c.options.delayInit||false;c.intervalList=[];c.clearAllIntervals=function(){var v,u=c.intervalList;if(typeof u!=="undefined"&&u!==null){for(v=0;v<u.length;v++){r(u[v])}c.intervalList=null}};c.debug=function(){if((c.options.debug||false)){c.log.apply(c,arguments)}};c.log=function(){var A=!(typeof f==="undefined"||typeof f.log==="undefined"||typeof f.log.apply==="undefined"),v=m.getElementById("log"),z,y,B,w,u;if(A){w=Array.prototype.slice.call(arguments);z=w.shift();if(typeof f.debug!=="undefined"){f.debug.apply(f,[z,w])}else{f.log.apply(f,[z,w])}}else{z=("\n"+arguments[0]+"\n")}for(y=1,B=arguments.length;y<B;++y){u=arguments[y];if(typeof u==="object"&&typeof q!=="undefined"){try{u=q.stringify(u)}catch(x){}}z+="\n"+u+"\n"}if(v){v.value+=z+"\n-----\n";v.scrollTop=v.scrollHeight-v.clientHeight}else{if(!A){l(z)}}return true};c.getInternetExplorerMajorVersion=function(){var u=c.getInternetExplorerMajorVersion.cached=(typeof c.getInternetExplorerMajorVersion.cached!=="undefined")?c.getInternetExplorerMajorVersion.cached:(function(){var w=3,y=m.createElement("div"),x=y.getElementsByTagName("i");while((y.innerHTML="<!--[if gt IE "+(++w)+"]><i></i><![endif]-->")&&x[0]){}return(w>4)?w:false})();return u};c.isInternetExplorer=function(){var u=c.isInternetExplorer.cached=(typeof c.isInternetExplorer.cached!=="undefined")?c.isInternetExplorer.cached:Boolean(c.getInternetExplorerMajorVersion());return u};if(c.options.html4Mode){c.emulated={pushState:true,hashChange:true}}else{c.emulated={pushState:!Boolean(k.history&&k.history.pushState&&k.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(p.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(p.userAgent))),hashChange:Boolean(!(("onhashchange" in k)||("onhashchange" in m))||(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8))}}c.enabled=!c.emulated.pushState;c.bugs={setHash:Boolean(!c.emulated.pushState&&p.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(p.userAgent)),safariPoll:Boolean(!c.emulated.pushState&&p.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(p.userAgent)),ieDoubleCheck:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<7)};c.isEmptyObject=function(v){for(var u in v){if(v.hasOwnProperty(u)){return false}}return true};c.cloneObject=function(w){var v,u;if(w){v=q.stringify(w);u=q.parse(v)}else{u={}}return u};c.getRootUrl=function(){var u=m.location.protocol+"//"+(m.location.hostname||m.location.host);if(m.location.port||false){u+=":"+m.location.port}u+="/";return u};c.getBaseHref=function(){var u=m.getElementsByTagName("base"),w=null,v="";if(u.length===1){w=u[0];v=w.href.replace(/[^\/]+$/,"")}v=v.replace(/\/+$/,"");if(v){v+="/"}return v};c.getBaseUrl=function(){var u=c.getBaseHref()||c.getBasePageUrl()||c.getRootUrl();return u};c.getPageUrl=function(){var u=c.getState(false,false),w=(u||{}).url||c.getLocationHref(),v;v=w.replace(/\/+$/,"").replace(/[^\/]+$/,function(z,y,x){return(/\./).test(z)?z:z+"/"});return v};c.getBasePageUrl=function(){var u=(c.getLocationHref()).replace(/[#\?].*/,"").replace(/[^\/]+$/,function(x,w,v){return(/[^\/]$/).test(x)?"":x}).replace(/\/+$/,"")+"/";return u};c.getFullUrl=function(v,x){var u=v,w=v.substring(0,1);x=(typeof x==="undefined")?true:x;if(/[a-z]+\:\/\//.test(v)){}else{if(w==="/"){u=c.getRootUrl()+v.replace(/^\/+/,"")}else{if(w==="#"){u=c.getPageUrl().replace(/#.*/,"")+v}else{if(w==="?"){u=c.getPageUrl().replace(/[\?#].*/,"")+v}else{if(x){u=c.getBaseUrl()+v.replace(/^(\.\/)+/,"")}else{u=c.getBasePageUrl()+v.replace(/^(\.\/)+/,"")}}}}}return u.replace(/\#$/,"")};c.getShortUrl=function(w){var v=w,x=c.getBaseUrl(),u=c.getRootUrl();if(c.emulated.pushState){v=v.replace(x,"")}v=v.replace(u,"/");if(c.isTraditionalAnchor(v)){v="./"+v}v=v.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return v};c.getLocationHref=function(u){u=u||m;if(u.URL===u.location.href){return u.location.href}if(u.location.href===decodeURIComponent(u.URL)){return u.URL}if(u.location.hash&&decodeURIComponent(u.location.href.replace(/^[^#]+/,""))===u.location.hash){return u.location.href}if(u.URL.indexOf("#")==-1&&u.location.href.indexOf("#")!=-1){return u.location.href}return u.URL||u.location.href};c.store={};c.idToState=c.idToState||{};c.stateToId=c.stateToId||{};c.urlToId=c.urlToId||{};c.storedStates=c.storedStates||[];c.savedStates=c.savedStates||[];c.normalizeStore=function(){c.store.idToState=c.store.idToState||{};c.store.urlToId=c.store.urlToId||{};c.store.stateToId=c.store.stateToId||{}};c.getState=function(w,v){if(typeof w==="undefined"){w=true}if(typeof v==="undefined"){v=true}var u=c.getLastSavedState();if(!u&&v){u=c.createStateObject()}if(w){u=c.cloneObject(u);u.url=u.cleanUrl||u.url}return u};c.getIdByState=function(u){var w=c.extractId(u.url),v;if(!w){v=c.getStateString(u);if(typeof c.stateToId[v]!=="undefined"){w=c.stateToId[v]}else{if(typeof c.store.stateToId[v]!=="undefined"){w=c.store.stateToId[v]}else{while(true){w=(new Date()).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof c.idToState[w]==="undefined"&&typeof c.store.idToState[w]==="undefined"){break}}c.stateToId[v]=w;c.idToState[w]=u}}}return w};c.normalizeState=function(v){var w,u;if(!v||(typeof v!=="object")){v={}}if(typeof v.normalized!=="undefined"){return v}if(!v.data||(typeof v.data!=="object")){v.data={}}w={};w.normalized=true;w.title=v.title||"";w.url=c.getFullUrl(v.url?v.url:(c.getLocationHref()));w.hash=c.getShortUrl(w.url);w.data=c.cloneObject(v.data);w.id=c.getIdByState(w);w.cleanUrl=w.url.replace(/\??\&_suid.*/,"");w.url=w.cleanUrl;u=!c.isEmptyObject(w.data);if((w.title||u)&&c.options.disableSuid!==true){w.hash=c.getShortUrl(w.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(w.hash)){w.hash+="?"}w.hash+="&_suid="+w.id}w.hashedUrl=c.getFullUrl(w.hash);if((c.emulated.pushState||c.bugs.safariPoll)&&c.hasUrlDuplicate(w)){w.url=w.hashedUrl}return w};c.createStateObject=function(w,x,v){var u={data:w,title:x,url:v};u=c.normalizeState(u);return u};c.getStateById=function(v){v=String(v);var u=c.idToState[v]||c.store.idToState[v]||a;return u};c.getStateString=function(v){var u,w,x;u=c.normalizeState(v);w={data:u.data,title:v.title,url:v.url};x=q.stringify(w);return x};c.getStateId=function(v){var u,w;u=c.normalizeState(v);w=u.id;return w};c.getHashByState=function(v){var u,w;u=c.normalizeState(v);w=u.hash;return w};c.extractId=function(x){var y,w,u,v;if(x.indexOf("#")!=-1){v=x.split("#")[0]}else{v=x}w=/(.*)\&_suid=([0-9]+)$/.exec(v);u=w?(w[1]||x):x;y=w?String(w[2]||""):"";return y||false};c.isTraditionalAnchor=function(v){var u=!(/[\/\?\.]/.test(v));return u};c.extractState=function(x,w){var u=null,y,v;w=w||false;y=c.extractId(x);if(y){u=c.getStateById(y)}if(!u){v=c.getFullUrl(x);y=c.getIdByUrl(v)||false;if(y){u=c.getStateById(y)}if(!u&&w&&!c.isTraditionalAnchor(x)){u=c.createStateObject(null,null,v)}}return u};c.getIdByUrl=function(u){var v=c.urlToId[u]||c.store.urlToId[u]||a;return v};c.getLastSavedState=function(){return c.savedStates[c.savedStates.length-1]||a};c.getLastStoredState=function(){return c.storedStates[c.storedStates.length-1]||a};c.hasUrlDuplicate=function(w){var v=false,u;u=c.extractState(w.url);v=u&&u.id!==w.id;return v};c.storeState=function(u){c.urlToId[u.url]=u.id;c.storedStates.push(c.cloneObject(u));return u};c.isLastSavedState=function(x){var w=false,v,u,y;if(c.savedStates.length){v=x.id;u=c.getLastSavedState();y=u.id;w=(v===y)}return w};c.saveState=function(u){if(c.isLastSavedState(u)){return false}c.savedStates.push(c.cloneObject(u));return true};c.getStateByIndex=function(v){var u=null;if(typeof v==="undefined"){u=c.savedStates[c.savedStates.length-1]}else{if(v<0){u=c.savedStates[c.savedStates.length+v]}else{u=c.savedStates[v]}}return u};c.getCurrentIndex=function(){var u=null;if(c.savedStates.length<1){u=0}else{u=c.savedStates.length-1}return u};c.getHash=function(w){var u=c.getLocationHref(w),v;v=c.getHashByUrl(u);return v};c.unescapeHash=function(v){var u=c.normalizeHash(v);u=decodeURIComponent(u);return u};c.normalizeHash=function(v){var u=v.replace(/[^#]*#/,"").replace(/#.*/,"");return u};c.setHash=function(x,u){var v,w;if(u!==false&&c.busy()){c.pushQueue({scope:c,callback:c.setHash,args:arguments,queue:u});return false}c.busy(true);v=c.extractState(x,true);if(v&&!c.emulated.pushState){c.pushState(v.data,v.title,v.url,false)}else{if(c.getHash()!==x){if(c.bugs.setHash){w=c.getPageUrl();c.pushState(null,null,w+"#"+x,false)}else{m.location.hash=x}}}return c};c.escapeHash=function(v){var u=c.normalizeHash(v);u=k.encodeURIComponent(u);if(!c.bugs.hashEscape){u=u.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")}return u};c.getHashByUrl=function(u){var v=String(u).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");v=c.unescapeHash(v);return v};c.setTitle=function(w){var x=w.title,v;if(!x){v=c.getStateByIndex(0);if(v&&v.url===w.url){x=v.title||c.options.initialTitle}}try{m.getElementsByTagName("title")[0].innerHTML=x.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(u){}m.title=x;return c};c.queues=[];c.busy=function(v){if(typeof v!=="undefined"){c.busy.flag=v}else{if(typeof c.busy.flag==="undefined"){c.busy.flag=false}}if(!c.busy.flag){n(c.busy.timeout);var u=function(){var x,w,y;if(c.busy.flag){return}for(x=c.queues.length-1;x>=0;--x){w=c.queues[x];if(w.length===0){continue}y=w.shift();c.fireQueueItem(y);c.busy.timeout=d(u,c.options.busyDelay)}};c.busy.timeout=d(u,c.options.busyDelay)}return c.busy.flag};c.busy.flag=false;c.fireQueueItem=function(u){return u.callback.apply(u.scope||c,u.args||[])};c.pushQueue=function(u){c.queues[u.queue||0]=c.queues[u.queue||0]||[];c.queues[u.queue||0].push(u);return c};c.queue=function(v,u){if(typeof v==="function"){v={callback:v}}if(typeof u!=="undefined"){v.queue=u}if(c.busy()){c.pushQueue(v)}else{c.fireQueueItem(v)}return c};c.clearQueue=function(){c.busy.flag=false;c.queues=[];return c};c.stateChanged=false;c.doubleChecker=false;c.doubleCheckComplete=function(){c.stateChanged=true;c.doubleCheckClear();return c};c.doubleCheckClear=function(){if(c.doubleChecker){n(c.doubleChecker);c.doubleChecker=false}return c};c.doubleCheck=function(u){c.stateChanged=false;c.doubleCheckClear();if(c.bugs.ieDoubleCheck){c.doubleChecker=d(function(){c.doubleCheckClear();if(!c.stateChanged){u()}return true},c.options.doubleCheckInterval)}return c};c.safariStatePoll=function(){var v=c.extractState(c.getLocationHref()),u;if(!c.isLastSavedState(v)){u=v}else{return}if(!u){u=c.createStateObject()}c.Adapter.trigger(k,"popstate");return c};c.back=function(u){if(u!==false&&c.busy()){c.pushQueue({scope:c,callback:c.back,args:arguments,queue:u});return false}c.busy(true);c.doubleCheck(function(){c.back(false)});j.go(-1);return true};c.forward=function(u){if(u!==false&&c.busy()){c.pushQueue({scope:c,callback:c.forward,args:arguments,queue:u});return false}c.busy(true);c.doubleCheck(function(){c.forward(false)});j.go(1);return true};c.go=function(v,u){var w;if(v>0){for(w=1;w<=v;++w){c.forward(u)}}else{if(v<0){for(w=-1;w>=v;--w){c.back(u)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}}return c};if(c.emulated.pushState){var t=function(){};c.pushState=c.pushState||t;c.replaceState=c.replaceState||t}else{c.onPopState=function(x,u){var z=false,y=false,w,v;c.doubleCheckComplete();w=c.getHash();if(w){v=c.extractState(w||c.getLocationHref(),true);if(v){c.replaceState(v.data,v.title,v.url,false)}else{c.Adapter.trigger(k,"anchorchange");c.busy(false)}c.expectedStateId=false;return false}z=c.Adapter.extractEventData("state",x,u)||false;if(z){y=c.getStateById(z)}else{if(c.expectedStateId){y=c.getStateById(c.expectedStateId)}else{y=c.extractState(c.getLocationHref())}}if(!y){y=c.createStateObject(null,null,c.getLocationHref())}c.expectedStateId=false;if(c.isLastSavedState(y)){c.busy(false);return false}c.storeState(y);c.saveState(y);c.setTitle(y);c.Adapter.trigger(k,"statechange");c.busy(false);return true};c.Adapter.bind(k,"popstate",c.onPopState);c.pushState=function(w,y,v,u){if(c.getHashByUrl(v)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(u!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:u});return false}c.busy(true);var x=c.createStateObject(w,y,v);if(c.isLastSavedState(x)){c.busy(false)}else{c.storeState(x);c.expectedStateId=x.id;j.pushState(x.id,x.title,x.url);c.Adapter.trigger(k,"popstate")}return true};c.replaceState=function(w,y,v,u){if(c.getHashByUrl(v)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(u!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:u});return false}c.busy(true);var x=c.createStateObject(w,y,v);if(c.isLastSavedState(x)){c.busy(false)}else{c.storeState(x);c.expectedStateId=x.id;j.replaceState(x.id,x.title,x.url);c.Adapter.trigger(k,"popstate")}return true}}if(o){try{c.store=q.parse(o.getItem("History.store"))||{}}catch(s){c.store={}}c.normalizeStore()}else{c.store={};c.normalizeStore()}c.Adapter.bind(k,"unload",c.clearAllIntervals);c.saveState(c.storeState(c.extractState(c.getLocationHref(),true)));if(o){c.onUnload=function(){var u,w,y;try{u=q.parse(o.getItem("History.store"))||{}}catch(v){u={}}u.idToState=u.idToState||{};u.urlToId=u.urlToId||{};u.stateToId=u.stateToId||{};for(w in c.idToState){if(!c.idToState.hasOwnProperty(w)){continue}u.idToState[w]=c.idToState[w]}for(w in c.urlToId){if(!c.urlToId.hasOwnProperty(w)){continue}u.urlToId[w]=c.urlToId[w]}for(w in c.stateToId){if(!c.stateToId.hasOwnProperty(w)){continue}u.stateToId[w]=c.stateToId[w]}c.store=u;c.normalizeStore();y=q.stringify(u);try{o.setItem("History.store",y)}catch(x){if(x.code===DOMException.QUOTA_EXCEEDED_ERR){if(o.length){o.removeItem("History.store");o.setItem("History.store",y)}else{}}else{throw x}}};c.intervalList.push(g(c.onUnload,c.options.storeInterval));c.Adapter.bind(k,"beforeunload",c.onUnload);c.Adapter.bind(k,"unload",c.onUnload)}if(!c.emulated.pushState){if(c.bugs.safariPoll){c.intervalList.push(g(c.safariStatePoll,c.options.safariPollInterval))}if(p.vendor==="Apple Computer, Inc."||(p.appCodeName||"")==="Mozilla"){c.Adapter.bind(k,"hashchange",function(){c.Adapter.trigger(k,"popstate")});if(c.getHash()){c.Adapter.onDomLoad(function(){c.Adapter.trigger(k,"hashchange")})}}}};if(!c.options||!c.options.delayInit){c.init()}})(window)}Object.keys=Object.keys||(function(){var c=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=a.length;return function(h){if(typeof h!=="object"&&typeof h!=="function"||h===null){throw new TypeError("Object.keys called on non-object")}var f=[],j;for(j in h){if(c.call(h,j)){f.push(j)}}if(e){for(var g=0;g<d;++g){if(c.call(h,a[g])){f.push(a[g])}}}return f}})();Array.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};Date.now=Date.now||function(){return new Date().getTime()};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")};String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}}JS={extend:function(a,d,c){if(a&&d){for(var e in d){if(a[e]!==d[e]){if(c||!a.hasOwnProperty(e)){a[e]=d[e]}}}}return a},makeClass:function(c){c=c||Object;var a=function(){var e=this.initialize;return e?e.apply(this,arguments)||this:this};var d=function(){};d.prototype=c.prototype;a.prototype=new d();return a}};JS.Method=JS.makeClass();JS.extend(JS.Method.prototype,{initialize:function(d,c,a){this.module=d;this.name=c;this.callable=a;this._hasSuper=typeof a==="function"&&a.toString().indexOf("callSuper")!==-1},call:function(){return this.callable.call.apply(this.callable,arguments)},apply:function(c,a){return this.callable.apply(c,a)},compile:function(d){var f=this,c=f.callable,e=JS.Method.keywordCallSuper,a=f._hasSuper&&e?e:null;return a===null?c:function(){var m,h,l=this.callSuper,g=!l||l.__kwd__;if(g){m=l;h=this.hasOwnProperty("callSuper");var k=this.callSuper=a(f,d,this,arguments);if(k){k.__kwd__=true}}var j=c.apply(this,arguments);if(g){if(h){this.callSuper=m}else{delete this.callSuper}}return j}}});JS.Method.create=function(d,c,a){if(a&&a.__inc__&&a.__fns__){return a}return(typeof a!=="function")?a:new this(d,c,a)};JS.Method.compile=function(c,a){return(c instanceof this)?c.compile(a):c};JS.Module=JS.makeClass();JS.extend(JS.Module.prototype,{initialize:function(d,a,c){if(typeof d!=="string"){c=arguments[1];a=arguments[0];d=undefined}c=c||{};this.__inc__=[];this.__dep__=[];this.__fns__={};this.__tgt__=c._target;this.__anc__=null;this.__mct__={};this.include(a,{_resolve:false})},define:function(d,a,c){var e=(c||{})._resolve;this.__fns__[d]=JS.Method.create(this,d,a);if(e!==false){this.resolve()}},include:function(c,m){if(!c){return this}var m=m||{},l=m._resolve!==false,h=c.extend,a=c.include,f,j,k,g,e,d;if(c.__fns__&&c.__inc__){this.__inc__.push(c);if((c.__dep__||{}).push){c.__dep__.push(this)}if(f=m._extended){if(typeof c.extended==="function"){c.extended(f)}}else{if(typeof c.included==="function"){c.included(this)}}}else{if(this.shouldIgnore("extend",h)){g=[].concat(h);for(e=0,d=g.length;e<d;){this.extend(g[e++])}}if(this.shouldIgnore("include",a)){g=[].concat(a);for(e=0,d=g.length;e<d;){this.include(g[e++],{_resolve:false})}}for(j in c){if(c.hasOwnProperty(j)){k=c[j];if(this.shouldIgnore(j,k)){continue}this.define(j,k,{_resolve:false})}}}if(l){this.resolve()}return this},resolve:function(e){var e=e||this,h=e.__tgt__,g=this.__inc__,d=this.__fns__,c,j,a,f;if(e===this){this.__anc__=null;this.__mct__={};c=this.__dep__.length;while(c){this.__dep__[--c].resolve()}}if(h){for(c=0,j=g.length;c<j;){g[c++].resolve(e)}for(a in d){f=JS.Method.compile(d[a],e);if(h[a]!==f){h[a]=f}}}},shouldIgnore:function(c,a){return(c==="extend"||c==="include")&&(typeof a!=="function"||(a.__fns__&&a.__inc__))},ancestors:function(d){var c=!d,d=d||[],e=this.__inc__;if(c&&this.__anc__){return this.__anc__.slice()}for(var a=0,f=e.length;a<f;){e[a++].ancestors(d)}if(d.indexOf(this)<0){d.push(this)}if(c){this.__anc__=d.slice()}return d},lookup:function(c){var g=this.__mct__[c];if(g&&g.slice){return g.slice()}var f=this.ancestors(),a=[],e;for(var d=0,h=f.length;d<h;){e=f[d++].__fns__;if(e.hasOwnProperty(c)){a.push(e[c])}}this.__mct__[c]=a.slice();return a},includes:function(c){if(c===this){return true}var d=this.__inc__;for(var a=0,e=d.length;a<e;){if(d[a++].includes(c)){return true}}return false},instanceMethod:function(a){return this.lookup(a).pop()}});JS.Kernel=new JS.Module("Kernel",{__eigen__:function(){if(this.__meta__){return this.__meta__}this.__meta__=new JS.Module("",null,{_target:this});return this.__meta__.include(this.klass,{_resolve:false})},equals:function(a){return this===a},extend:function(c,a){var d=(a||{})._resolve;this.__eigen__().include(c,{_extended:this,_resolve:d});return this},isA:function(a){return(typeof a==="function"&&this instanceof a)||this.__eigen__().includes(a)},method:function(c){var a=this.__mct__=this.__mct__||{},e=a[c],f=this[c];if(typeof f!=="function"){return f}if(e&&f===e._value){return e._bound}var d=f.bind(this);a[c]={_value:f,_bound:d};return d}});JS.Class=JS.makeClass(JS.Module);JS.extend(JS.Class.prototype,{initialize:function(e,f,c,d){if(typeof e!=="string"){d=arguments[2];c=arguments[1];f=arguments[0];e=undefined}if(typeof f!=="function"){d=c;c=f;f=Object}JS.Module.prototype.initialize.call(this,e);d=d||{};var a=JS.makeClass(f);a.__displayName=e;JS.extend(a,this);a.prototype.constructor=a.prototype.klass=a;a.__eigen__().include(f.__meta__,{_resolve:d._resolve});a.__tgt__=a.prototype;var g=(f===Object)?{}:(f.__fns__?f:new JS.Module(f.prototype,{_resolve:false}));a.include(JS.Kernel,{_resolve:false}).include(g,{_resolve:false}).include(c,{_resolve:false});if(d._resolve!==false){a.resolve()}if(typeof f.inherited==="function"){f.inherited(a)}return a}});(function(){var c=function(d,f){d.__inc__=[];d.__dep__=[];var g=d.prototype,e={},h;for(h in g){if(g.hasOwnProperty(h)){e[h]=JS.Method.create(d,h,g[h])}}d.__fns__=e;d.__tgt__=g;g.constructor=g.klass=d;JS.extend(d,JS.Class.prototype);d.include(f);d.constructor=d.klass=JS.Class};c(JS.Method,JS.Kernel);c(JS.Module,JS.Kernel);c(JS.Class,JS.Module);var a=JS.Kernel.instanceMethod("__eigen__");a.call(JS.Method).resolve();a.call(JS.Module).resolve();a.call(JS.Class).include(JS.Module.__meta__)})();JS.Method.keywordCallSuper=function(j,d,g,c){var a=d.lookup(j.name),f=a.length-1,h=Array.prototype.slice.call(c);if(f===0){return undefined}var e=function(){var k=arguments.length;while(k){h[--k]=arguments[k]}f--;if(f===0){delete g.callSuper}var l=a[f].apply(g,h);g.callSuper=e;f++;return l};return e};JS.Singleton=new JS.Class("Singleton",{initialize:function(c,d,a){return new (new JS.Class(c,d,a))}});myt={IMAGE_ROOT:global.MYT_IMAGE_ROOT||"",__GUID_COUNTER:0,generateGuid:function(){return ++this.__GUID_COUNTER},addEventListener:function(){if(window.addEventListener){return function(d,c,e,a){d.addEventListener(c,e,a||false)}}else{return function(c,a,e){var d=a+e;c["e"+d]=e;c[d]=function(){c["e"+d](window.event)};c.attachEvent("on"+a,c[d])}}}(),removeEventListener:function(){if(window.addEventListener){return function(d,c,e,a){d.removeEventListener(c,e,a||false)}}else{return function(c,a,e){var d=a+e;c.detachEvent("on"+a,c[d]);c[d]=null;c["e"+d]=null}}}(),resolveName:function(e,d){if(!e||e.length===0){return undefined}var d=d||global,f=Array.isArray(e)?e:e.split("."),c=0,a=f.length;for(;c<a;++c){d=d[f[c]];if(!d){console.warn("resolveName failed for:",e,"at part:",c,f[c]);return undefined}}return d},fillTextTemplate:function(){var f=Array.prototype.slice.call(arguments),d=f.shift();if(d==null){return""}var e,c=0,a=f.length;for(;a>c;++c){e=f[c];d=d.split("{"+c+"}").join(e==null?"":e)}return d},generateLink:function(g,f,c,e){var d="";if(c){for(var a in c){d+=" "+a+'="'+c[a]+'"'}}return this.fillTextTemplate('<a href="#" onclick=\'myt.__handleGeneratedLink(this, "{0}", &apos;{3}&apos;); return false;\'{2}>{1}</a>',f,g,d,JSON.stringify(e))},__handleGeneratedLink:function(c,h,f){var a;while(c){a=c.model;if(a){var d;try{if(f){d=JSON.parse(f)}}catch(g){myt.dumpStack(g)}a[h].call(a,d);break}c=c.parentNode}},loadScript:function(d,e){if(!this._loadedScripts){this._loadedScripts={}}if(this._loadedScripts[d]){console.warn("script already loaded for src",d);return}this._loadedScripts[d]=true;var a=document.createElement("script");a.type="text/javascript";a.src=d+"?cacheBust="+Date.now();if(e){var c=false;a.onload=a.onreadystatechange=function(){if(!c&&(!this.readyState||this.readyState=="complete")){c=true;e()}}}this.getElement("head").appendChild(a)},wrapFunction:function(c,a){return function(){var e=this.callSuper;this.callSuper=c;var d=a.apply(this,arguments);if(e!==undefined){this.callSuper=e}else{delete this.callSuper}return d}},dumpStack:function(c,a){if(!c||typeof c==="string"){c=new Error(c)}console[a?a:"error"](c.stack||c.stacktrace)},filterArray:function(c,f,a){var d=a?[]:null;if(Array.isArray(c)){var e=c.length,g,h=(f==null||typeof f!=="function")?function(k,j){return j===f}:f;while(e){g=c[--e];if(h(e,g)){c.splice(e,1);if(a){d.push(g)}else{return g}}}}return d},filterObject:function(c,j,k){var a=k?[]:null;if(c&&typeof c==="object"){var h=Object.keys(c),d=h.length,g,f,e=(j==null||typeof j!=="function")?function(m,l){return l===j}:j;while(d){g=h[--d];f=c[g];if(e(g,f)){delete c[g];if(k){a.push(f)}else{return f}}}}return a},getRandom:function(c){var a=Math.random();if(c){a=c(a);if(a>=1){a=0.9999999999}else{if(a<0){a=0}}}return a},getRandomArbitrary:function(d,a,e){if(d>a){var c=d;d=a;a=c}return this.getRandom(e)*(a-d)+d},getRandomInt:function(d,a,e){if(d>a){var c=d;d=a;a=c}return Math.floor(this.getRandom(e)*(a-d+1)+d)},areFloatsEqual:function(e,d,g){var c=Math.abs(e),f=Math.abs(d);g=g?Math.abs(g):0.000001;return Math.abs(e-d)<=(c>f?f:c)*g},areArraysEqual:function(d,c){if(d!==c){if(d==null||c==null){return false}var e=d.length;if(e!==c.length){return false}while(e){if(d[--e]!==c[e]){return false}}}return true},getElement:function(c,a){return document.getElementsByTagName(c||"body")[a>0?a:0]},clone:function(d,c){if(c){var a=function(){};a.prototype=d;return new a()}else{return JSON.parse(JSON.stringify(d))}},memoize:function(a){return function(){var d=JSON.stringify(arguments),c=a.__cache||(a.__cache={});return(d in c)?c[d]:c[d]=a.apply(this,arguments)}}};myt.Cookie={_pluses:/\+/g,defaults:{raw:false,json:false},_raw:function(a){return a},_decoded:function(a){return decodeURIComponent(a.replace(this._pluses," "))},_converted:function(a,d){if(a.indexOf('"')===0){a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return d?JSON.parse(a):a}catch(c){}},read:function(j,l){l=$.extend({},this.defaults,l);var h=l.raw?this._raw:this._decoded,d=l.json,k=document.cookie.split("; "),m=j?undefined:{},e,a,c,f,g=k.length;for(f=0;f<g;f++){e=k[f].split("=");a=h(e.shift());c=h(e.join("="));if(j&&j===a){m=this._converted(c,d);break}if(!j){m[a]=this._converted(c,d)}}return m},write:function(d,e,a){a=$.extend({},this.defaults,a);if(typeof a.expires==="number"){var f=a.expires;var c=a.expires=new Date();c.setDate(c.getDate()+f)}e=a.json?JSON.stringify(e):String(e);return(document.cookie=[a.raw?d:encodeURIComponent(d),"=",a.raw?e:encodeURIComponent(e),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join(""))},remove:function(c,a){if(this.read(c,a)!==undefined){this.write(c,"",$.extend({},a,{expires:-1}));return true}return false}};myt.Observable=new JS.Module("Observable",{attachObserver:function(c,a,d){if(c&&a&&d){this.getObservers(d).push(a,c);return true}return false},detachObserver:function(d,c,g){if(d&&c&&g){var f=this.__obsbt;if(f){var h=f[g];if(h){var a=false,e=h.length;while(e){--e;if(d===h[e--]&&c===h[e]){h.splice(e,2);a=true}}return a}}}return false},detachAllObservers:function(){var f=this.__obsbt;if(f){var g,c,a,d,e;for(e in f){g=f[e];d=g.length;while(d){c=g[--d];a=g[--d];if(c&&a){if(typeof c.detachFrom!=="function"||!c.detachFrom(this,a,e)){g.splice(d,2)}}}}}},getObservers:function(c){var a=this.__obsbt||(this.__obsbt={});return a[c]||(a[c]=[])},hasObservers:function(c){var a=this.__obsbt;if(!a){return false}var d=a[c];return d&&d.length>0},fireEvent:function(c,d){if(c&&c.source===this){var a=c.type;d=d||(this.hasObservers(a)?this.__obsbt[a]:null);if(d){this.__fireEvent(c,d)}}},fireNewEvent:function(a,c,d){d=d||(this.hasObservers(a)?this.__obsbt[a]:null);if(d){this.__fireEvent({source:this,type:a,value:c},d)}},createEvent:function(a,c){return{source:this,type:a,value:c}},__fireEvent:function(g,j){var h=this.__aet||(this.__aet={}),e=g.type;if(h[e]===true){myt.dumpStack("Attempt to refire active event: "+e)}else{h[e]=true;var d=j.length,c,a;while(d){c=j[--d];a=j[--d];if(c&&a){try{if(typeof a==="function"){if(a.call(c,g)){break}}else{if(c[a](g)){break}}}catch(f){myt.dumpStack(f)}}}h[e]=false}}});myt.Observer=new JS.Module("Observer",{attachToAndCallbackIfAttrExists:function(f,a,d,c,e){this.attachToAndCallbackIfAttrNotEqual(f,a,d,undefined,c,e)},attachToAndCallbackIfAttrEqual:function(g,a,d,f,c,e){if(c===undefined){c=d}if(g.get(c)===f){this.syncTo(g,a,d,c,e)}else{this.attachTo(g,a,d,e)}},attachToAndCallbackIfAttrNotEqual:function(g,a,d,f,c,e){if(c===undefined){c=d}if(g.get(c)!==f){this.syncTo(g,a,d,c,e)}else{this.attachTo(g,a,d,e)}},syncTo:function(g,a,d,c,e){if(c===undefined){c=d}try{this[a](g.createEvent(d,g.get(c)))}catch(f){myt.dumpStack(f)}if(e){return}this.attachTo(g,a,d,e)},isAttachedTo:function(f,a,d){if(f&&a&&d){var e=this.__obt;if(e){var g=e[d];if(g){var c=g.length;while(c){--c;if(f===g[c--]&&a===g[c]){return true}}}}}return false},getObservables:function(a){var c=this.__obt||(this.__obt={});return c[a]||(c[a]=[])},hasObservables:function(a){var c=this.__obt;if(!c){return false}var d=c[a];return d&&d.length>0},attachTo:function(g,c,e,f){if(g&&c&&e){var h=this.getObservables(e);if(f){var a=this,d=c;if(this.__methodNameCounter===undefined){this.__methodNameCounter=0}else{this.__methodNameCounter++}c="__DO_ONCE_"+this.__methodNameCounter;this[c]=function(j){a.detachFrom(g,c,e);delete a[c];return a[d](j)}}if(g.attachObserver(this,c,e)){h.push(c,g);return true}}return false},detachFrom:function(g,c,e){if(g&&c&&e){var f=this.__obt;if(f){var h=f[e];if(h){var a=false,d=h.length;while(d){--d;if(g===h[d--]&&c===h[d]){if(g.detachObserver(this,c,e)){h.splice(d,2);a=true}}}return a}}}return false},detachFromAllObservables:function(){var d=this.__obt;if(d){var e,c;for(var a in d){e=d[a];c=e.length;while(c){e[--c].detachObserver(this,e[--c],a)}e.length=0}}}});myt.Constrainable=new JS.Module("Constrainable",{include:[myt.Observer],applyConstraint:function(k,f){if(k&&f){var h=f.length;if(h%2!==0){console.log("Observables was not even.",this);return}var e=this.__cbmn||(this.__cbmn={});var c=e[k]||(e[k]=[]);if(c.length>0){console.log("Constraint already exists for "+k+" on "+this);return}var a,j,g=0;for(;h!==g;){a=f[g++];j=f[g++];if(a&&j){this.attachTo(a,k,j);c.push(a,j)}}try{this[k]()}catch(d){myt.dumpStack(d)}}},releaseConstraint:function(a){if(a){var g=this.__cbmn;if(g){var f=g[a];if(f){var c=f.length,d,e;while(c){d=f[--c];e=f[--c];this.detachFrom(e,a,d)}f.length=0}}}},releaseAllConstraints:function(){var c=this.__cbmn;if(c){for(var a in c){this.releaseConstraint(a)}}}});myt.global=new JS.Singleton("Global",{include:[myt.Observable],register:function(c,a){if(this.hasOwnProperty(c)){console.log("Warning: myt.global key in use: ",c);this.unregister(c)}this[c]=a;this.fireNewEvent("register"+c,a)},unregister:function(c){if(this.hasOwnProperty(c)){var a=this[c];delete this[c];this.fireNewEvent("unregister"+c,a)}else{console.log("Warning: myt.global key not in use: ",c)}}});myt.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createDomElement:function(e,d,c){var f=document.createElement(e),a;if(c){for(a in c){f[a]=c[a]}}if(d){for(a in d){f.style[a]=d[a]}}return f},getComputedStyle:function(c){var a=global;return a.getComputedStyle?a.getComputedStyle(c,""):c.currentStyle},isDomElementVisible:function(c){if(c.nodeName==="INPUT"&&c.type==="hidden"){return false}var a;while(c){if(c===document){return true}a=this.getComputedStyle(c);if(a.display==="none"||a.visibility==="hidden"){break}c=c.parentNode}return false},getZIndexRelativeToAncestor:function(h,e){if(h&&e){var g=this.getAncestorArray(h,e),d=g.length-1,f,c,a;while(d){f=this.getComputedStyle(g[--d]);c=f.zIndex;a=c==="auto";if(d!==0&&a&&parseInt(f.opacity,10)===1){continue}else{return a?0:parseInt(c,10)}}}return 0},getAncestorArray:function(d,a){var c=[];while(d){c.push(d);if(d===a){break}d=d.parentNode}return c},getHighestZIndex:function(g){var f=this.getComputedStyle(g),e=f.zIndex,a=e==="auto";if(a&&parseInt(f.opacity,10)===1){e=0;var d=g.childNodes,c=d.length,h;while(c){h=d[--c];if(h.nodeType===1){e=Math.max(e,this.getHighestZIndex(h))}}}else{e=a?0:parseInt(e,10)}return e},getPagePosition:function(e,c){if(!e){return null}var a=0,g=0,d,f=BrowserDetect.browser==="Firefox"?2:1;while(e&&e.nodeName!=="BODY"&&e!==c){a+=e.offsetLeft;g+=e.offsetTop;e=e.offsetParent;if(e&&e.nodeName!=="BODY"){d=this.getComputedStyle(e);a+=f*parseInt(d.borderLeftWidth,10)-e.scrollLeft;g+=f*parseInt(d.borderTopWidth,10)-e.scrollTop}}return{x:a,y:g}},getTruePagePosition:function(a){if(!a){return null}var c=$(a).offset();return{x:c.left,y:c.top}},simulateDomEvent:function(g,h,k){if(g){var a={pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true};if(k){for(var d in k){a[d]=k[d]}}var f,e={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};for(var c in e){if(e[c].test(h)){f=c;break}}if(!f){throw new SyntaxError("Only HTMLEvent and MouseEvent interfaces supported")}var j;if(document.createEvent){j=document.createEvent(f);if(f==="HTMLEvents"){j.initEvent(h,a.bubbles,a.cancelable)}else{j.initMouseEvent(h,a.bubbles,a.cancelable,document.defaultView,a.button,a.pointerX,a.pointerY,a.pointerX,a.pointerY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null)}g.dispatchEvent(j)}else{a.clientX=a.pointerX;a.clientY=a.pointerY;j=document.createEventObject();for(var l in a){j[l]=a[l]}g.fireEvent("on"+h,j)}}}},setDomElement:function(a){this.domElement=a;this.deStyle=a.style;a.model=this},removeDomElement:function(){var a=this.domElement;a.parentNode.removeChild(a)},disposeOfDomElement:function(){delete this.domElement.model;delete this.deStyle;delete this.domElement},setDomClass:function(a){this.domElement.className=this.domClass=a},addDomClass:function(a){var c=this.domElement.className;this.setDomClass((c?c+" ":"")+a)},removeDomClass:function(a){var d=this.domElement.className;if(d){var e=d.split(" "),c=e.length;while(c){if(e[--c]===a){e.splice(c,1)}}this.setDomClass(e.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(a){this.domElement.id=this.domId=a},setZIndex:function(a){this.deStyle.zIndex=a},setStyleProperty:function(c,a){this.deStyle[c]=a},getPagePosition:function(){return myt.DomElementProxy.getPagePosition(this.domElement)},getTruePagePosition:function(){return myt.DomElementProxy.getTruePagePosition(this.domElement)},simulateDomEvent:function(a,c){myt.DomElementProxy.simulateDomEvent(this.domElement,a,c)},getHighestZIndex:function(){return myt.DomElementProxy.getHighestZIndex(this.domElement)},getHighestChildZIndex:function(f){var e=myt.DomElementProxy,d=this.domElement.childNodes,c=d.length,g,a=0;while(c){g=d[--c];if(g.nodeType===1&&g!==f){a=Math.max(a,e.getHighestZIndex(g))}}return a},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.domElement)+1)}});myt.DomObservable=new JS.Module("DomObservable",{attachDomObserver:function(h,c,d,a){if(h&&c&&d){a=!!a;var f=this.createDomMethodRef(h,c,d);if(f){var e=this.__dobsbt||(this.__dobsbt={});var g=e[d];if(!g){e[d]=[h,c,f,a]}else{g.push(h,c,f,a)}myt.addEventListener(this.domElement,d,f,a);return true}}return false},createDomMethodRef:function(d,a,c){return null},createStandardDomMethodRef:function(h,c,f,e,d){if(e.EVENT_TYPES[f]){var a=this,g=e.EVENT;return function(k){if(!k){var k=window.event}g.source=a;g.type=k.type;g.value=k;var j=h[c](g);if(!j){k.cancelBubble=true;if(k.stopPropagation){k.stopPropagation()}if(d){k.preventDefault()}}g.source=undefined}}},detachDomObserver:function(g,f,e,j){if(g&&f&&e){j=!!j;var k=this.__dobsbt;if(k){var h=k[e];if(h){var a=false,d=this.domElement,c=h.length;while(c){c-=4;if(g===h[c]&&f===h[c+1]&&j===h[c+3]){if(d){myt.removeEventListener(d,e,h[c+2],j)}h.splice(c,4);a=true}}return a}}}return false},detachAllDomObservers:function(){var g=this.domElement;if(g){var e=this.__dobsbt;if(e){var h,f,a,c,d;for(d in e){h=e[d];c=h.length;while(c){a=h[--c];f=h[--c];c-=2;myt.removeEventListener(g,d,f,a)}h.length=0}}}}});myt.DomObserver=new JS.Module("DomObserver",{attachToDom:function(f,c,d,a){if(f&&c&&d){a=!!a;var e=this.__dobt||(this.__dobt={});var g=e[d]||(e[d]=[]);if(f.attachDomObserver(this,c,d,a)){g.push(a,c,f)}}},detachFromDom:function(h,d,f,c){if(h&&d&&f){c=!!c;var g=this.__dobt;if(g){var j=g[f];if(j){var a=false,e=j.length;while(e){e-=3;if(h===j[e+2]&&d===j[e+1]&&c===j[e]){if(h.detachDomObserver(this,d,f,c)){j.splice(e,3);a=true}}}return a}}}return false},detachFromAllDomSources:function(){var d=this.__dobt;if(d){var e,a,c;for(c in d){e=d[c];a=e.length;while(a){e[--a].detachDomObserver(this,e[--a],c,e[--a])}e.length=0}}}});myt.KeyObservable=new JS.Module("KeyObservable",{extend:{EVENT_TYPES:{keypress:true,keydown:true,keyup:true},EVENT:{source:null,type:null,value:null},getKeyCodeFromEvent:function(c){var a=c.value,d=a.keyCode;return d||a.charCode}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.KeyObservable)||this.callSuper(d,a,c)}});new JS.Singleton("GlobalFocus",{include:[myt.Observable],initialize:function(){this.lastTraversalWasForward=true;myt.global.register("focus",this)},setFocusedView:function(a){if(this.focusedView!==a){this.prevFocusedView=this.focusedView;this.focusedView=a;if(a){this.focusedDom=null}this.fireNewEvent("focused",a)}},notifyFocus:function(a){if(this.focusedView!==a){this.setFocusedView(a)}},notifyBlur:function(a){if(this.focusedView===a){this.setFocusedView(null)}},clear:function(){if(this.focusedView){this.focusedView.blur()}else{if(this.focusedDom){this.focusedDom.blur();this.focusedDom=null}}},next:function(c){var a=this._traverse(true,c);if(a){a.focus()}},prev:function(c){var a=this._traverse(false,c);if(a){a.focus()}},_traverse:function(l,g){this.lastTraversalWasForward=l;var h=document.activeElement,d=document.body,c=d,e=c,f,a,k=l?"getNextFocus":"getPrevFocus";if(h){e=c=h;f=c.model;if(!f){f=this.findModelForDomElement(c)}if(f){var m=f.getFocusTrap(g);if(m){d=m.domElement}}}while(e){if(e.model&&e.model[k]&&(a=e.model[k]())){e=a.domElement}else{if(l){if(e.firstChild){e=e.firstChild}else{if(e===d){return c.model}else{if(e.nextSibling){e=e.nextSibling}else{while(e){e=e.parentNode;if(e===d){break}else{if(e.nextSibling){e=e.nextSibling;break}}}}}}}else{if(e===d){e=this.__getDeepestDescendant(d)}else{if(e.previousSibling){e=this.__getDeepestDescendant(e.previousSibling)}else{e=e.parentNode}}}}if(e===c){return c.model}if(e.nodeType===1){f=e.model;if(f&&f instanceof myt.View){if(f.isFocusable()){return f}}else{var j=e.nodeName;if(j==="A"||j==="AREA"||j==="INPUT"||j==="TEXTAREA"||j==="SELECT"||j==="BUTTON"){if(!e.disabled&&!isNaN(e.tabIndex)&&myt.DomElementProxy.isDomElementVisible(e)){f=this.findModelForDomElement(e);if(f&&f.searchAncestorsOrSelf(function(o){return o.maskFocus===true})){}else{e.focus();this.focusedDom=e;return null}}}}}}return null},findModelForDomElement:function(c){var a;while(c){a=c.model;if(a&&a instanceof myt.View){return a}c=c.parentNode}return null},__getDeepestDescendant:function(a){while(a.lastChild){a=a.lastChild}return a}});new JS.Singleton("GlobalKeys",{include:[myt.DomElementProxy,myt.DomObservable,myt.DomObserver,myt.KeyObservable,myt.Observable,myt.Observer],initialize:function(){this.KEYCODE_SHIFT=16;this.KEYCODE_CONTROL=17;this.KEYCODE_ALT=18;var a=BrowserDetect.browser==="Firefox";this.KEYCODE_COMMAND=a?224:91;this.KEYCODE_RIGHT_COMMAND=a?224:93;this.setDomElement(document);this.attachTo(myt.global.focus,"__handleFocused","focused");this.__keysDown={};this.__listenToDocument();myt.global.register("keys",this)},isKeyDown:function(a){return !!this.__keysDown[a]},isShiftKeyDown:function(){return this.isKeyDown(this.KEYCODE_SHIFT)},isControlKeyDown:function(){return this.isKeyDown(this.KEYCODE_CONTROL)},isAltKeyDown:function(){return this.isKeyDown(this.KEYCODE_ALT)},isCommandKeyDown:function(){return this.isKeyDown(this.KEYCODE_COMMAND)||this.isKeyDown(this.KEYCODE_RIGHT_COMMAND)},__handleFocused:function(a){var d=a.value;if(d){this.__unlistenToDocument();this.attachToDom(d,"__handleKeyDown","keydown");this.attachToDom(d,"__handleKeyPress","keypress");this.attachToDom(d,"__handleKeyUp","keyup")}else{var c=myt.global.focus.prevFocusedView;if(c){this.detachFromDom(c,"__handleKeyDown","keydown");this.detachFromDom(c,"__handleKeyPress","keypress");this.detachFromDom(c,"__handleKeyUp","keyup")}this.__listenToDocument()}},__listenToDocument:function(){this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyPress","keypress");this.attachToDom(this,"__handleKeyUp","keyup")},__unlistenToDocument:function(){this.detachFromDom(this,"__handleKeyDown","keydown");this.detachFromDom(this,"__handleKeyPress","keypress");this.detachFromDom(this,"__handleKeyUp","keyup")},__handleKeyDown:function(d){var f=myt.KeyObservable.getKeyCodeFromEvent(d),c=d.value;if(this.__shouldPreventDefault(f,c.target)){c.preventDefault()}if(this.isCommandKeyDown()&&f!==16&&f!==17&&f!==18){this.fireNewEvent("keydown",f);this.fireNewEvent("keyup",f);if(f!==90){this.fireNewEvent("keyup",this.KEYCODE_COMMAND);this.__keysDown[this.KEYCODE_COMMAND]=false}}else{this.__keysDown[f]=true;if(f===9){var e=this.ignoreFocusTrap(),a=myt.global.focus;if(this.isShiftKeyDown()){a.prev(e)}else{a.next(e)}}this.fireNewEvent("keydown",f)}},ignoreFocusTrap:function(){return this.isAltKeyDown()},__handleKeyPress:function(a){var c=myt.KeyObservable.getKeyCodeFromEvent(a);this.fireNewEvent("keypress",c)},__handleKeyUp:function(c){var d=myt.KeyObservable.getKeyCodeFromEvent(c),a=c.value;if(this.__shouldPreventDefault(d,a.target)){a.preventDefault()}this.__keysDown[d]=false;this.fireNewEvent("keyup",d)},__shouldPreventDefault:function(c,a){switch(c){case 8:var d=a.nodeName;if(d==="TEXTAREA"||(d==="INPUT"&&(a.type==="text"||a.type==="password"))||(d==="DIV"&&a.contentEditable==="true"&&a.firstChild)){return false}return true;case 9:return true}return false}});myt.TouchObservable=new JS.Module("TouchObservable",{extend:{EVENT_TYPES:{touchstart:true,touchend:true,touchmove:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.TouchObservable,false)||this.callSuper(d,a,c)}});new JS.Singleton("GlobalTouch",{include:[myt.DomElementProxy,myt.DomObservable,myt.TouchObservable],initialize:function(){this.setDomElement(document);myt.global.register("touch",this)}});new JS.Singleton("GlobalHistory",{include:[myt.Observable],initialize:function(){myt.global.register("history",this)},updateState:function(c,d,a){if(this._notFirstTime){History.pushState(c,d,a)}else{History.replaceState(c,d,a);this._notFirstTime=true}},startMonitoringState:function(a){a.attachTo(this,"handleStateChange","statechange");var c=History.getState();a.handleStateChange({value:c});History.setTitle(c)},enableHistoryNavigation:function(c){var a=global.location;if(c){a.hash=""}else{a.hash="no-back-button";a.hash="Again-no-back-button"}global.onhashchange=c?null:function(){a.hash="no-back-button"}}});if(!global.mytNoHistoryShim){History.Adapter.bind(window,"statechange",function(a){myt.global.history.fireNewEvent("statechange",History.getState())});History.Adapter.bind(window,"anchorchange",function(a){myt.global.history.fireNewEvent("anchorchange",History.getState())})}myt.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:function(a){return this.SETTER_NAMES[a]||(this.SETTER_NAMES[a]=this.generateName(a,"set"))},generateGetterName:function(a){return this.GETTER_NAMES[a]||(this.GETTER_NAMES[a]=this.generateName(a,"get"))},generateName:function(a,c){return c+a.substring(0,1).toUpperCase()+a.substring(1)},createSetterFunction:function(d,c){var a=this.generateSetterName(c);if(d[a]){console.log("Overwriting setter",a)}d[a]=function(e){if(d[c]!==e){d[c]=e;if(d.inited){d.fireNewEvent(c,e)}}}},createGetterFunction:function(d,a){var c=this.generateGetterName(a);if(d[c]){console.log("Overwriting getter",c)}d[c]=function(){return d[a]}},GETTER_NAMES:{},SETTER_NAMES:{}},callSetters:function(a){for(var c in a){this.set(c,a[c])}},get:function(a){var c=myt.AccessorSupport.generateGetterName(a);return this[c]?this[c]():this[a]},set:function(d,c){var a=myt.AccessorSupport.generateSetterName(d);if(this[a]){this[a](c)}else{if(this[d]!==c){this[d]=c;if(this.inited!==false&&this.fireNewEvent){this.fireNewEvent(d,c)}}}},has:function(a){return this.get(a)!=null},is:function(a){return this.get(a)===true},isNot:function(a){return this.get(a)!==true}});myt.Destructible=new JS.Module("Destructible",{destroy:function(){var c,a;var d=this.__meta__;if(d){c=Object.keys(d);a=c.length;while(a){delete d[c[--a]]}}c=Object.keys(this);a=c.length;while(a){delete this[c[--a]]}this.destroyed=true}});myt.Reusable=new JS.Module("Reusable",{clean:function(){}});myt.AbstractPool=new JS.Class("AbstractPool",{include:[myt.Destructible],initialize:function(){},destroy:function(){var a=this.__objPool;if(a){a.length=0}this.callSuper()},getInstance:function(){var a=this.__objPool;if(!a){a=this.__objPool=[]}return a.length?a.pop():this.createInstance.apply(this,arguments)},createInstance:function(){return null},putInstance:function(c){var a=this.__objPool;if(!a){a=this.__objPool=[]}a.push(this.cleanInstance(c))},cleanInstance:function(a){if(typeof a.clean==="function"){a.clean()}return a},destroyPooledInstances:function(){var d=this.__objPool;if(d){var a=d.length,c;while(a){c=d[--a];if(typeof c.destroy==="function"){c.destroy()}}}}});myt.SimplePool=new JS.Class("SimplePool",myt.AbstractPool,{initialize:function(c,a){this.callSuper();this.instanceClass=c||Object;this.instanceParent=a},createInstance:function(){var a=this.instanceParent,c=this.instanceClass;return a?new c(a,arguments[0]):new c()}});myt.TrackActivesPool=new JS.Class("TrackActivesPool",myt.SimplePool,{destroy:function(){var a=this.__actives;if(a){a.length=0}this.callSuper()},getInstance:function(){var c=this.__actives;if(!c){c=this.__actives=[]}var a=this.callSuper();c.push(a);return a},putInstance:function(e){var d=this.__actives;if(d){var c=false,a=d.length;while(a){if(d[--a]===e){d.splice(a,1);c=true;break}}if(c){this.callSuper(e)}else{console.warn("Attempt to putInstance for a non-active instance.",e,this)}}else{console.warn("Attempt to putInstance when no actives exist.",e,this)}},getActives:function(){return this.__actives?this.__actives.concat():[]},putActives:function(){var c=this.__actives;if(c){var a=c.length;while(a){this.putInstance(c[--a])}}}});myt.Node=new JS.Class("Node",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Constrainable],extend:{getMatchingAncestorOrSelf:function(c,a){if(c&&a){while(c){if(a(c)){return c}c=c.parent}}return null},getMatchingAncestor:function(c,a){return this.getMatchingAncestorOrSelf(c?c.parent:null,a)},doOnceLater:function(){var e=Array.prototype.slice.call(arguments),d=e.shift(),a=e.shift(),c=e.shift();if(d){var f=d[a];if(f){e.unshift(d);return setTimeout(f.bind.apply(f,e),c>=0?c:0)}}}},initialize:function(f,d,c){if(c){for(var e=0,a=c.length;a>e;){this.extend(c[e++])}}this.inited=false;this.initNode(f,d||{})},initNode:function(c,a){this.callSetters(a);this.doBeforeAdoption();this.setParent(c);this.doAfterAdoption();this.inited=true},doBeforeAdoption:function(){},doAfterAdoption:function(){},destroy:function(){this.isBeingDestroyed=true;var c=this.subnodes;if(c){var a=c.length;while(a){c[--a].destroy()}}if(this.__animPool){this.stopActiveAnimators();this.__animPool.destroy()}this.destroyBeforeOrphaning();if(this.parent){this.setParent(null)}this.destroyAfterOrphaning();this.callSuper()},destroyBeforeOrphaning:function(){},destroyAfterOrphaning:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers()},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(e){if(e&&!this.ignorePlacement){var d=this.placement||e.defaultPlacement;if(d){e=e.determinePlacement(d,this)}}if(this.parent!==e){if(e&&e.destroyed){return}var c=this.parent;if(c){var a=c.getSubnodeIndex(this);if(a!==-1){if(this.name){c.__removeNameRef(this)}c.subnodes.splice(a,1);c.subnodeRemoved(this)}}this.parent=e;if(e){e.getSubnodes().push(this);if(this.name){e.__addNameRef(this)}e.subnodeAdded(this)}if(this.inited){this.fireNewEvent("parent",e)}}},setName:function(a){if(this.name!==a){var c=this.parent;if(c&&this.name){c.__removeNameRef(this)}this.name=a;if(c&&a){c.__addNameRef(this)}}},getSubnodes:function(){return this.subnodes||(this.subnodes=[])},determinePlacement:function(d,c){var a=d.indexOf("."),e,f;if(a!==-1){e=d.substring(a+1);d=d.substring(0,a)}if(d==="*"){d=this.defaultPlacement;if(d){a=d.indexOf(".");if(a!==-1){e=d.substring(a+1)+(e?"."+e:"");d=d.substring(0,a)}}}f=this[d];return f?(e?f.determinePlacement(e,c):f):this},__addNameRef:function(c){var a=c.name;if(this[a]===undefined){this[a]=c}else{console.log("Name in use:"+a)}},__removeNameRef:function(c){var a=c.name;if(this[a]===c){delete this[a]}else{console.log("Name not in use:"+a)}},getRoot:function(){return this.parent?this.parent.getRoot():this},isRoot:function(){return this.parent==null},isDescendantOf:function(a){if(a){if(a===this){return true}if(this.parent){if(this.domElement&&a.domElement){return a.domElement.contains(this.domElement)}return this.parent.isDescendantOf(a)}}return false},isAncestorOf:function(a){return a?a.isDescendantOf(this):false},getLeastCommonAncestor:function(a){while(a){if(this.isDescendantOf(a)){return a}a=a.parent}return null},searchAncestorsForClass:function(a){return a?this.searchAncestors(function(c){return c instanceof a}):null},searchAncestors:function(a){return myt.Node.getMatchingAncestor(this,a)},searchAncestorsOrSelf:function(a){return myt.Node.getMatchingAncestorOrSelf(this,a)},getAncestors:function(){var a=[],c=this;while(c){a.push(c);c=c.parent}return a},hasSubnode:function(a){return this.getSubnodeIndex(a)!==-1},getSubnodeIndex:function(a){return this.getSubnodes().indexOf(a)},addSubnode:function(a){a.setParent(this)},removeSubnode:function(a){if(a.parent!==this){return null}a.setParent(null);return a},subnodeAdded:function(a){},subnodeRemoved:function(a){},animate:function(d,h,j,a,l,f,g,c,m){var k=this.__getAnimPool();var e=k.getInstance({ignorePlacement:true});if(typeof d==="object"){l=d.callback;delete d.callback;e.callSetters(d)}else{e.attribute=d;e.setTo(h);e.setFrom(j);if(f!=null){e.duration=f}if(a!=null){e.relative=a}if(c!=null){e.repeat=c}if(g!=null){e.setReverse(g)}if(m!=null){e.setEasingFunction(m)}}e.next(function(n){k.putInstance(e)});if(l){e.next(l)}e.setRunning(true);return e},getActiveAnimators:function(){return this.__getAnimPool().getActives()},stopActiveAnimators:function(e){var f=this.getActiveAnimators(),c=f.length,d;if(c>0){if(e==null){e=function(g){return true}}else{if(typeof e==="string"){var a=e;e=function(g){return g.attribute===a}}}while(c){d=f[--c];if(e.call(this,d)){d.reset(false)}}}},__getAnimPool:function(){return this.__animPool||(this.__animPool=new myt.TrackActivesPool(myt.Animator,this))},doOnceOnIdle:function(a){this.attachTo(myt.global.idle,a,"idle",true)},doOnceLater:function(){var a=Array.prototype.slice.call(arguments);a.unshift(this);return myt.Node.doOnceLater.apply(this,arguments)}});myt.ThresholdCounter=new JS.Class("ThresholdCounter",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable],extend:{createThresholdCounter:function(l,c,d,e){var j=myt.AccessorSupport.generateName;d=d||j("counter",c);e=e||j("threshold",c);var h=j(d,"increment"),g=j(d,"decrement"),k=myt.AccessorSupport.generateSetterName(e),a=typeof l==="function"||l instanceof JS.Module;if((a?l.instanceMethod(h):l[h])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter increment function.",h,l);return false}if((a?l.instanceMethod(g):l[g])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter decrement function.",g,l);return false}if((a?l.instanceMethod(k):l[k])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter threshold setter function.",k,l);return false}var f={};f[h]=function(m){if(m==null){m=1}var o=this[d],n=o+m;if(0>n){console.warn("Attempt to decrement a counter below 0.",this,d,m);n=0}if(o!==n){this[d]=n;this.fireNewEvent(d,n);this.set(c,n>=this[e])}};f[g]=function(m){if(m==null){m=1}this[h](-m)};f[k]=function(m){if(this[e]===m){return}this[e]=m;this.fireNewEvent(e,m);this.set(c,this[d]>=m)};if(a){l.include(f)}else{l.extend(f)}return true},initializeThresholdCounter:function(e,a,c,f,h,d){var g=myt.AccessorSupport.generateName;h=h||g("counter",f);d=d||g("threshold",f);e[h]=a;e[d]=c;e.set(f,a>=c)},createFixedThresholdCounter:function(k,d,c,e){var j=myt.AccessorSupport.generateName;e=e||j("counter",c);var h=j(e,"increment"),g=j(e,"decrement"),a=typeof k==="function"||k instanceof JS.Module;if((a?k.instanceMethod(h):k[h])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter increment function.",h,k);return false}if((a?k.instanceMethod(g):k[g])!==undefined){console.warn("Can't clobber existing property during setup of ThresholdCounter decrement function.",g,k);return false}var f={};f[h]=function(){var l=this[e]+1;this[e]=l;this.fireNewEvent(e,l);if(l===d){this.set(c,true)}};f[g]=function(){var m=this[e];if(m===0){return}var l=m-1;this[e]=l;this.fireNewEvent(e,l);if(m===d){this.set(c,false)}};if(a){k.include(f)}else{k.extend(f)}return true},initializeFixedThresholdCounter:function(d,a,c,e,f){f=f||myt.AccessorSupport.generateName("counter",e);d[f]=a;d.set(e,a>=c)}},initialize:function(a,c){myt.ThresholdCounter.initializeThresholdCounter(this,a,c,"exceeded","counter","threshold")},destroy:function(){this.detachAllObservers();this.callSuper()}});myt.ThresholdCounter.createThresholdCounter(myt.ThresholdCounter,"exceeded","counter","threshold");myt.Layout=new JS.Class("Layout",myt.Node,{extend:{deferredLayouts:[],incrementGlobalLock:function(){var a=myt.Layout;if(a._lockCount===undefined){a._lockCount=0}a._lockCount++;if(a._lockCount===1){a.__setLocked(true)}},decrementGlobalLock:function(){var a=myt.Layout;if(a._lockCount===undefined){a._lockCount=0}if(a._lockCount!==0){a._lockCount--;if(a._lockCount===0){a.__setLocked(false)}}},deferLayoutUpdate:function(a){if(!a.__deferredLayout){myt.Layout.deferredLayouts.push(a);a.__deferredLayout=true}},__setLocked:function(c){var a=myt.Layout;if(a.locked===c){return}a.locked=c;if(!c){var f=a.deferredLayouts,d=f.length,e;while(d){e=f[--d];e.__deferredLayout=false;e.update()}f.length=0}}},initNode:function(d,c){this.subviews=[];this.locked=true;this.lockedCounter=1;var a=c.locked===true;delete c.locked;this.callSuper(d,c);if(!a){this.decrementLockedCounter()}this.update()},destroyAfterOrphaning:function(){this.callSuper();this.subviews.length=0},setParent:function(e){if(this.parent!==e){var f=!this.locked;if(f){this.locked=true}var c,d,a;if(this.parent){c=this.subviews;d=c.length;while(d){this.removeSubview(c[--d])}this.detachFrom(this.parent,"__handleParentSubviewAddedEvent","subviewAdded");this.detachFrom(this.parent,"__handleParentSubviewRemovedEvent","subviewRemoved")}this.callSuper(e);if(this.parent){c=this.parent.getSubviews();for(d=0,a=c.length;a>d;++d){this.addSubview(c[d])}this.attachTo(this.parent,"__handleParentSubviewAddedEvent","subviewAdded");this.attachTo(this.parent,"__handleParentSubviewRemovedEvent","subviewRemoved")}if(f){this.locked=false;if(this.inited&&this.parent){this.update()}}}},canUpdate:function(){if(myt.Layout.locked){myt.Layout.deferLayoutUpdate(this);return false}return !this.locked},update:function(){},hasSubview:function(a){return this.getSubviewIndex(a)!==-1},getSubviewIndex:function(a){return this.subviews.indexOf(a)},addSubview:function(a){if(this.ignore(a)){return}this.subviews.push(a);this.startMonitoringSubview(a);if(!this.locked){this.update()}},startMonitoringSubview:function(a){},startMonitoringAllSubviews:function(){var a=this.subviews,c=a.length;while(c){this.startMonitoringSubview(a[--c])}},removeSubview:function(c){if(this.ignore(c)){return -1}var a=this.getSubviewIndex(c);if(a!==-1){this.stopMonitoringSubview(c);this.subviews.splice(a,1);if(!this.locked){this.update()}}return a},stopMonitoringSubview:function(a){},stopMonitoringAllSubviews:function(){var a=this.subviews,c=a.length;while(c){this.stopMonitoringSubview(a[--c])}},ignore:function(a){return a.ignoreLayout},moveSubviewBefore:function(a,c){this.__moveSubview(a,c,false)},moveSubviewAfter:function(a,c){this.__moveSubview(a,c,true)},__moveSubview:function(c,f,g){var d=this.getSubviewIndex(c);if(d>=0){var a=this.subviews,e=this.getSubviewIndex(f);a.splice(d,1);if(e>=0){if(d<e){--e}a.splice(e+g?1:0,0,c)}else{if(g){a.push(c)}else{a.unshift(c)}}}},sortSubviews:function(a){this.subviews.sort(a)},__handleParentSubviewAddedEvent:function(c){var a=c.value;if(a.parent===this.parent){this.addSubview(a)}},__handleParentSubviewRemovedEvent:function(c){var a=c.value;if(a.parent===this.parent){this.removeSubview(a)}}});myt.ThresholdCounter.createFixedThresholdCounter(myt.Layout,1,"locked");myt.MouseObservable=new JS.Module("MouseObservable",{extend:{EVENT_TYPES:{mouseover:true,mouseout:true,mousedown:true,mouseup:true,click:true,dblclick:true,mousemove:true,contextmenu:true,wheel:true},EVENT:{source:null,type:null,value:null},getMouseFromEvent:function(c){var a=c.value;return{x:a.pageX,y:a.pageY}},getMouseFromEventRelativeToView:function(d,a){var c=a.getPagePosition(),e=this.getMouseFromEvent(d);e.x-=c.x;e.y-=c.y;return e}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.MouseObservable,true)||this.callSuper(d,a,c)}});myt.FocusObservable=new JS.Module("FocusObservable",{extend:{EVENT_TYPES:{focus:true,blur:true},EVENT:{source:null,type:null,value:null}},initNode:function(c,a){this.focusable=false;this.focusEmbellishment=true;this.callSuper(c,a)},destroyBeforeOrphaning:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(a){if(this.focused!==a){this.focused=a;if(this.inited){this.fireNewEvent("focused",a);var c=myt.global.focus;if(a){c.notifyFocus(this)}else{c.notifyBlur(this)}}}},setFocusable:function(a){if(this.focusable!==a){var c=this.focusable;this.focusable=a;if(a){this.domElement.tabIndex=0;this.attachToDom(this,"__doFocus","focus");this.attachToDom(this,"__doBlur","blur")}else{if(c){this.domElement.removeAttribute("tabIndex");this.detachFromDom(this,"__doFocus","focus");this.detachFromDom(this,"__doBlur","blur")}}if(this.inited){this.fireNewEvent("focusable",a)}}},setFocusEmbellishment:function(a){if(this.focusEmbellishment!==a){this.focusEmbellishment=a;if(this.focused){if(a){this.showFocusEmbellishment()}else{this.hideFocusEmbellishment()}}}},giveAwayFocus:function(){if(this.focused){myt.global.focus.next();if(this.focused){this.blur()}}},isFocusable:function(){return this.focusable&&!this.disabled&&this.isVisible()&&this.searchAncestorsOrSelf(function(a){return a.maskFocus===true})===null},focus:function(h){if(this.isFocusable()){var j=this.domElement;if(h){var g=myt.DomElementProxy.getAncestorArray(j),a=g.length,f=a,e,d=[],c;while(f){e=g[--f];d.unshift({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}j.focus();f=a;while(f){e=g[--f];c=d[f];e.scrollTop=c.scrollTop;e.scrollLeft=c.scrollLeft}}else{j.focus()}}},blur:function(){this.domElement.blur()},__doFocus:function(a){if(!this.focused){this.setFocused(true);this.doFocus()}},__doBlur:function(a){if(this.focused){this.doBlur();this.setFocused(false)}},doFocus:function(){if(this.focusEmbellishment){this.showFocusEmbellishment()}else{this.hideFocusEmbellishment()}},doBlur:function(){if(this.focusEmbellishment){this.hideFocusEmbellishment()}},showFocusEmbellishment:function(){this.domElement.hideFocus=false;var a=this.deStyle;a.outlineWidth="thin";a.outlineColor="#88bbff";a.outlineStyle="solid";a.outlineOffset="0px"},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideDefaultFocusEmbellishment:function(){this.domElement.hideFocus=true;this.deStyle.outlineStyle="none"},createDomMethodRef:function(e,c,d){if(myt.FocusObservable.EVENT_TYPES[d]){var a=this;return function(g){if(!g){var g=window.event}if(a._ignoreFocus){g.cancelBubble=true;if(g.stopPropagation){g.stopPropagation()}g.preventDefault();return}var h=myt.FocusObservable.EVENT;h.source=a;h.type=g.type;h.value=g;var f=e[c](h);if(!f){g.cancelBubble=true;if(g.stopPropagation){g.stopPropagation()}}h.source=undefined}}return this.callSuper(e,c,d)}});myt.ScrollObservable=new JS.Module("ScrollObservable",{extend:{EVENT_TYPES:{scroll:true},EVENT:{source:null,type:null,value:null},getScrollFromEvent:function(c){var a=c.value,d=a.target||a.srcElement;return{x:d.scrollLeft,y:d.scrollTop}}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.ScrollObservable)||this.callSuper(d,a,c)}});myt.Geometry={getClosestPointOnALineToAPoint:function(f,e,h,g,o,l){var c=o-f,a=l-e,n=h-f,k=g-e,d=n*n+k*k,j=n*c+k*a,m=j/d;return{x:f+n*m,y:e+k*m}},getClosestPointOnASegmentToAPoint:function(f,e,h,g,o,l){var c=o-f,a=l-e,n=h-f,k=g-e,d=n*n+k*k,j=n*c+k*a,m=j/d;if(m<0){return{x:f,y:e}}else{if(m>1){return{x:h,y:g}}}return{x:f+n*m,y:e+k*m}},isPointInPath:function(l,j,e,m){if(typeof l==="object"){m=e;e=j;j=l.y;l=l.x}if(this.rectContainsPoint(l,j,e)){var f=m.length;if(f>=6){var g=false,d=m[0],k=m[1],a,h;while(f){h=m[--f];a=m[--f];if(((h>j)!==(k>j))&&(l<(d-a)*(j-h)/(k-h)+a)){g=!g}d=a;k=h}return g}}return false},rectContainsPoint:function(d,c,f,e,g,a){if(typeof d==="object"){a=g;g=e;e=f;f=c;c=d.y;d=d.x}if(typeof f==="object"){a=f.height;g=f.width;e=f.y;f=f.x}return d>=f&&c>=e&&d<=f+g&&c<=e+a},circleContainsPoint:function(c,a,f,e,d){return this.measureDistance(c,a,f,e,true)<=d*d},measureDistance:function(e,g,c,f,j){var d=c-e,a=f-g,h=d*d+a*a;return j?h:Math.sqrt(h)},degreesToRadians:function(a){return a*Math.PI/180},radiansToDegrees:function(a){return a*180/Math.PI},circleContainsLatLng:function(f,d,c,g,e,a){return this.measureLatLngDistance(f,d,c,g,a)<=e},measureLatLngDistance:function(f,e,d,c,a){if(a===undefined){a=6371}f=this.degreesToRadians(f);e=this.degreesToRadians(e);d=this.degreesToRadians(d);c=this.degreesToRadians(c);return a*Math.acos(Math.sin(f)*Math.sin(d)+Math.cos(f)*Math.cos(d)*Math.cos(c-e))}};myt.View=new JS.Class("View",myt.Node,{include:[myt.DomElementProxy,myt.DomObservable,myt.DomObserver,myt.ScrollObservable,myt.FocusObservable,myt.KeyObservable,myt.MouseObservable],extend:{retainFocusDuringDomUpdate:function(e,c){var g=myt.global.focus.focusedView,f=e.domElement,a,d;if(g===e||(g&&g.isDescendantOf(e))){g._ignoreFocus=true}a=f.scrollTop;d=f.scrollLeft;c.call();if(g){g._ignoreFocus=false;g.focus(true)}f.scrollTop=a;f.scrollLeft=d}},initNode:function(c,a){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=true;this.setDomElement(this.createOurDomElement(c));this.deStyle.left=this.deStyle.top="0px";this.callSuper(c,a);if(this.bgColor===undefined){this.bgColor="transparent"}},createOurDomElement:function(c){var d=document.createElement("div");d.style.position="absolute";var a=this.klass;d.className=a.__cssClassName||(a.__cssClassName="myt-"+a.__displayName.split(".").join("-"));return d},doAfterAdoption:function(){this.__updateBounds(this.width,this.height)},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(a){if(this.parent!==a){if(this.inited){this.__teardownAlignConstraint();this.__teardownValignConstraint()}this.callSuper(a);this.__setupAlignConstraint();this.__setupValignConstraint()}},getSubviews:function(){return this.subviews||(this.subviews=[])},getSiblingViews:function(){if(!this.parent){return null}var a=this.parent.getSubviews().concat();myt.filterArray(a,this);return a},getLayouts:function(){return this.layouts||(this.layouts=[])},setFocusTrap:function(a){this.focusTrap=a},setFocusCage:function(a){this.focusCage=a},setMaskFocus:function(a){this.maskFocus=a},setIgnoreLayout:function(a){this.ignoreLayout=a},setLayoutHint:function(a){this.layoutHint=a},setDomClass:function(a){if(this.domClass!==a){this.callSuper(a);if(this.inited){this.fireNewEvent("domClass",a)}}},setDomId:function(a){if(this.domId!==a){this.callSuper(a);if(this.inited){this.fireNewEvent("domId",a)}}},setAlignOffset:function(a){if(this.alignOffset!==a){this.alignOffset=a;if(this.inited){this.fireNewEvent("alignOffset",a)}if(this.parent&&this.align==="left"){this.setX(a)}}},setAlign:function(a){if(this.align!==a){if(this.inited){this.__teardownAlignConstraint()}this.align=a;if(this.inited){this.fireNewEvent("align",a);this.__setupAlignConstraint()}}},__teardownAlignConstraint:function(){switch(this.align){case"center":this.releaseConstraint("__doAlignCenter");break;case"right":this.releaseConstraint("__doAlignRight");break;case"left":default:}},__setupAlignConstraint:function(){var a=this.parent;if(a){switch(this.align){case"center":this.applyConstraint("__doAlignCenter",[this,"width",this,"alignOffset",a,"width"]);break;case"right":this.applyConstraint("__doAlignRight",[this,"width",this,"alignOffset",a,"width"]);break;case"left":this.setX(this.alignOffset||0);break;default:}}},__doAlignCenter:function(a){this.setX(Math.round((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(a){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(a){if(this.valignOffset!==a){this.valignOffset=a;if(this.inited){this.fireNewEvent("valignOffset",a)}if(this.parent&&this.valign==="top"){this.setY(a)}}},setValign:function(a){if(this.valign!==a){if(this.inited){this.__teardownValignConstraint()}this.valign=a;if(this.inited){this.fireNewEvent("valign",a);this.__setupValignConstraint()}}},__teardownValignConstraint:function(){switch(this.valign){case"middle":this.releaseConstraint("__doValignMiddle");break;case"bottom":this.releaseConstraint("__doValignBottom");break;case"top":default:}},__setupValignConstraint:function(){var a=this.parent;if(a){switch(this.valign){case"middle":this.applyConstraint("__doValignMiddle",[this,"height",this,"valignOffset",a,"height"]);break;case"bottom":this.applyConstraint("__doValignBottom",[this,"height",this,"valignOffset",a,"height"]);break;case"top":this.setY(this.valignOffset||0);break;default:}}},__doValignMiddle:function(a){this.setY(Math.round((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(a){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(a){if(this.x!==a){this.x=a;if(this.visible){this.deStyle.left=a+"px"}if(this.inited){this.fireNewEvent("x",a)}}},setY:function(a){if(this.y!==a){this.y=a;if(this.visible){this.deStyle.top=a+"px"}if(this.inited){this.fireNewEvent("y",a)}}},setWidth:function(a,c){if(0>a){a=0}if(this.width!==a){this.width=a;this.deStyle.width=a+"px";if(this.inited){this.__updateBounds(a,this.height);if(!c){this.fireNewEvent("width",a)}}}},setHeight:function(a,c){if(0>a){a=0}if(this.height!==a){this.height=a;this.deStyle.height=a+"px";if(this.inited){this.__updateBounds(this.width,a);if(!c){this.fireNewEvent("height",a)}}}},setTextColor:function(a){if(this.textColor!==a){this.textColor=a;this.deStyle.color=a||"inherit";if(this.inited){this.fireNewEvent("textColor",a)}}},setBgColor:function(a){if(this.bgColor!==a){this.deStyle.backgroundColor=this.bgColor=a;if(this.inited){this.fireNewEvent("bgColor",a)}}},setOpacity:function(a){if(this.opacity!==a){this.deStyle.opacity=this.opacity=a;if(this.inited){this.fireNewEvent("opacity",a)}}},setOverflow:function(a){if(this.overflow!==a){this.overflow=a;this.deStyle.overflow=a||"visible";if(this.inited){this.fireNewEvent("overflow",a)}}},setVisible:function(a){if(this.visible!==a){this.visible=a;var c=this.deStyle;c.visibility=a?"inherit":"hidden";c.left=a?this.x+"px":"-100000px";c.top=a?this.y+"px":"-100000px";if(this.inited){this.fireNewEvent("visible",a)}}},setPointerEvents:function(a){if(this.pointerEvents!==a){this.pointerEvents=a;this.deStyle.pointerEvents=a||"auto";if(this.inited){this.fireNewEvent("pointerEvents",a)}}},setCursor:function(a){if(this.cursor!==a){this.cursor=a;this.deStyle.cursor=a||"auto";if(this.inited){this.fireNewEvent("cursor",a)}}},__updateBounds:function(a,c){if(this.boundsWidth!==a){this.boundsWidth=a;this.fireNewEvent("boundsWidth",a)}if(this.boundsHeight!==c){this.boundsHeight=c;this.fireNewEvent("boundsHeight",c)}},setOutline:function(a){a=a||[];this.setOutlineWidth(a[0]);this.setOutlineStyle(a[1]);this.setOutlineColor(a[2])},setOutlineWidth:function(a){this.outlineWidth=a||0;this.deStyle.outlineWidth=this.outlineWidth+"px"},setOutlineStyle:function(a){this.deStyle.outlineStyle=this.outlineStyle=a||"none"},setOutlineColor:function(a){this.deStyle.outlineColor=this.outlineColor=a||"#000000"},setBorder:function(a){a=a||[];this.setBorderWidth(a[0]);this.setBorderStyle(a[1]);this.setBorderColor(a[2])},setBorderWidth:function(a){this.borderWidth=a||0;this.deStyle.borderWidth=this.borderWidth+"px"},setBorderStyle:function(a){this.deStyle.borderStyle=this.borderStyle=a||"none"},setBorderColor:function(a){this.deStyle.borderColor=this.borderColor=a||"#000000"},setRoundedCorners:function(a){this.deStyle.borderRadius=a+"px"},setRoundedTopLeftCorner:function(a){this.setRoundedCorner(a,"TopLeft")},setRoundedTopRightCorner:function(a){this.setRoundedCorner(a,"TopRight")},setRoundedBottomLeftCorner:function(a){this.setRoundedCorner(a,"BottomLeft")},setRoundedBottomRightCorner:function(a){this.setRoundedCorner(a,"BottomRight")},setRoundedCorner:function(a,c){this.deStyle["border"+c+"Radius"]=a+"px"},setBoxShadow:function(d){if(d){var e=d[0]||0,a=d[1]||0,f=d[2]||7,c=d[3]||"#000000";d=e+"px "+a+"px "+f+"px "+c}else{d="none"}this.deStyle.boxShadow=d},isVisible:function(){return this.searchAncestorsOrSelf(function(a){return !a.visible})===null},getFocusTrap:function(a){return this.searchAncestorsOrSelf(function(c){return c.focusCage||(c.focusTrap&&!a)})},subnodeAdded:function(a){if(a instanceof myt.View){this.domElement.appendChild(a.domElement);this.getSubviews().push(a);this.fireNewEvent("subviewAdded",a);this.subviewAdded(a)}else{if(a instanceof myt.Layout){this.getLayouts().push(a);this.fireNewEvent("layoutAdded",a);this.layoutAdded(a)}}},subnodeRemoved:function(c){var a;if(c instanceof myt.View){a=this.getSubviewIndex(c);if(a!==-1){this.fireNewEvent("subviewRemoved",c);c.removeDomElement();this.subviews.splice(a,1);this.subviewRemoved(c)}}else{if(c instanceof myt.Layout){a=this.getLayoutIndex(c);if(a!==-1){this.fireNewEvent("layoutRemoved",c);this.layouts.splice(a,1);this.layoutRemoved(c)}}}},hasSubview:function(a){return this.getSubviewIndex(a)!==-1},getSubviewIndex:function(a){return this.getSubviews().indexOf(a)},subviewAdded:function(a){},subviewRemoved:function(a){},getNextSibling:function(){if(this.parent){var a=this.domElement.nextElementSibling;if(a){return a.model}}return null},getPrevSibling:function(){if(this.parent){var a=this.domElement.previousElementSibling;if(a){return a.model}}return null},hasLayout:function(a){return this.getLayoutIndex(a)!==-1},getLayoutIndex:function(a){return this.getLayouts().indexOf(a)},layoutAdded:function(a){},layoutRemoved:function(a){},isBehind:function(a,c){return this.__comparePosition(a,false,c)},isInFrontOf:function(a,c){return this.__comparePosition(a,true,c)},__comparePosition:function(g,d,f){if(g){if(f){var h=this.getLeastCommonAncestor(g);if(h){var j=h.domElement,e=myt.DomElementProxy,a=e.getZIndexRelativeToAncestor(this.domElement,j),c=e.getZIndexRelativeToAncestor(g.domElement,j);if(d){a*=-1;c*=-1}if(a<c){return true}else{if(c<a){return false}}}}var k=this.domElement.compareDocumentPosition(g.domElement);return d?k===2||k===10:k===4||k===20}else{return false}},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(a){this.parent.sendSubviewBehind(this,a)},sendInFrontOf:function(a){this.parent.sendSubviewInFrontOf(this,a)},bringSubviewToFront:function(a){if(a&&a.parent===this){var c=this.domElement;if(a.domElement!==c.lastChild){myt.View.retainFocusDuringDomUpdate(a,function(){c.appendChild(a.domElement)})}}},sendSubviewToBack:function(a){if(a&&a.parent===this){var c=this.domElement;if(a.domElement!==c.firstChild){myt.View.retainFocusDuringDomUpdate(a,function(){c.insertBefore(a.domElement,c.firstChild)})}}},sendSubviewBehind:function(a,c){if(a&&c&&a.parent===this&&c.parent===this){var d=this.domElement;myt.View.retainFocusDuringDomUpdate(a,function(){d.insertBefore(a.domElement,c.domElement)})}},sendSubviewInFrontOf:function(a,c){if(a&&c&&a.parent===this&&c.parent===this){this.sendSubviewBehind(a,c);this.sendSubviewBehind(c,a)}},sortSubviews:function(d){var a=this.getSubviews(),c=a.length;a.sort(d);while(c){this.sendSubviewToBack(a[--c])}},containsPoint:function(d,a,c){var f=this.domElement;if(!f){return false}var e=myt.DomElementProxy.getPagePosition(f,c);return myt.Geometry.rectContainsPoint(d,a,e.x,e.y,this.width,this.height)},isPointVisible:function(c,a){var d=this.getTruePagePosition();this.calculateEffectiveScale();return this.__isPointVisible(c-d.x,a-d.y)},__isPointVisible:function(c,g){var a=this.__effectiveScale;if(myt.Geometry.rectContainsPoint(c,g,0,0,this.width*a,this.height*a)){var e=this.parent;if(e){var f=e.domElement,d=e.__effectiveScale;return e.__isPointVisible(c+(this.x-f.scrollLeft)*d,g+(this.y-f.scrollTop)*d)}return true}return false},calculateEffectiveScale:function(){var e=this.getAncestors(),d=e.length,c,a=1;while(d){c=e[--d];a*=c.scaleX||1;c.__effectiveScale=a}},getEffectiveScale:function(){this.calculateEffectiveScale();return this.__effectiveScale}});myt.TransformSupport=new JS.Module("TransformSupport",{extend:{setTransformOrigin:function(c,a){c[this._styleOriginKey]=a||"50% 50% 0"},addTransform:function(d,c,a){var e=this.removeTransform(d,c);d[this._styleKey]=e+(e.length===0?"":" ")+c+"("+a+")"},removeTransform:function(e,d){var c=this._styleKey,f=e[c];if(!f||f.length===0){return""}var g=f.split(" "),a=g.length;while(a){if(g[--a].indexOf(d)===0){g.splice(a,1);break}}return e[c]=g.join(" ")},getEffectiveScale:function(d){var c=1,a=1;while(d){if(d.scaleX!=null){c*=d.scaleX}if(d.scaleY!=null){a*=d.scaleY}d=d.parent}return{scaleX:c,scaleY:a}}},setTransformOrigin:function(a){if(this.transformOrigin!==a){this.transformOrigin=a;myt.TransformSupport.setTransformOrigin(this.deStyle,a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("transformOrigin",a)}}},setRotation:function(a){if(this.rotation!==a){this.rotation=a;myt.TransformSupport.addTransform(this.deStyle,"rotate",(a||0)+"deg");if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("rotation",a)}}},setScale:function(c){var a=this.scaleX!==c;if(a){this.__applyScale("scaleX",this.scaleX=c)}var d=this.scaleY!==c;if(d){this.__applyScale("scaleY",this.scaleY=c)}if(this.inited){if(a||d){this.__updateBounds(this.width,this.height)}if(a){this.fireNewEvent("scaleX",c)}if(d){this.fireNewEvent("scaleY",c)}}},setScaleX:function(a){if(this.scaleX!==a){this.__applyScale("scaleX",this.scaleX=a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("scaleX",a)}}},setScaleY:function(a){if(this.scaleY!==a){this.__applyScale("scaleY",this.scaleY=a);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("scaleY",a)}}},__applyScale:function(c,a){if(a==null){myt.TransformSupport.removeTransform(this.deStyle,c)}else{myt.TransformSupport.addTransform(this.deStyle,c,a||1)}},setSkewX:function(a){if(this.skewX!==a){this.skewX=a;myt.TransformSupport.addTransform(this.deStyle,"skewX",a||0);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("skewX",a)}}},setSkewY:function(a){if(this.skewY!==a){this.skewY=a;myt.TransformSupport.addTransform(this.deStyle,"skewY",a||0);if(this.inited){this.__updateBounds(this.width,this.height);this.fireNewEvent("skewY",a)}}},__updateBounds:function(c,e){var f=this.rotation,j=this.scaleX,g=this.scaleY,d=false;if((j===undefined||j===1)&&(g===undefined||g===1)){d=true}if(d&&(f===undefined||f===0||f===180)){}else{if(d&&(f===90||f===270)){c=this.height;e=this.width}else{var a=this.domElement.getBoundingClientRect();c=a.width;e=a.height}}this.callSuper(c,e)}});(function(){var a;switch(BrowserDetect.browser){case"Chrome":case"Safari":case"OmniWeb":a="webkit";break;case"MSIE":a="ms";break;case"Opera":a="o";break;case"Firefox":default:a=""}this._styleKey=a?a+"Transform":"transform";this._styleOriginKey=this._styleKey+"Origin"}).call(myt.TransformSupport);myt.SizeToDom=new JS.Module("SizeToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setWidth:function(a,c){if(a==="auto"){this.__hasSetWidth=false;this.deStyle.width="auto";this.sizeViewToDom()}else{this.__hasSetWidth=true;this.callSuper(a,c)}},setHeight:function(a,c){if(a==="auto"){this.__hasSetHeight=false;this.deStyle.height="auto";this.sizeViewToDom()}else{this.__hasSetHeight=true;this.callSuper(a,c)}},sizeViewToDom:function(){var e,d;if(!this.__hasSetWidth){e=this.domElement.getBoundingClientRect();var a=e.width;d=myt.TransformSupport.getEffectiveScale(this);a/=d.scaleX;if(this.width!==a){this.width=a;if(this.inited){this.__updateBounds(a,this.height)}this.fireNewEvent("width",a)}}if(!this.__hasSetHeight){if(!e){e=this.domElement.getBoundingClientRect()}var c=e.height;if(!d){d=myt.TransformSupport.getEffectiveScale(this)}c/=d.scaleY;if(this.height!==c){this.height=c;if(this.inited){this.__updateBounds(this.width,c)}this.fireNewEvent("height",c)}}}});myt.TextSupport=new JS.Module("TextSupport",{setWidth:function(c,d){this.callSuper(c,d);if(c!=="auto"){var a=this.whiteSpace;if(a==="normal"||a==="pre-line"||a==="pre-wrap"){this.sizeViewToDom()}}},setText:function(a){if(!a){a=""}if(typeof a==="object"){a=a.value}if(this.text!==a){this.domElement.innerHTML=this.text=a;if(this.inited){this.fireNewEvent("text",a);this.sizeViewToDom()}}},setTextOverflow:function(a){if(this.textOverflow!==a){this.textOverflow=a;this.deStyle.textOverflow=a||"inherit";if(this.inited){this.fireNewEvent("textOverflow",a)}}},setTextAlign:function(a){if(this.textAlign!==a){this.textAlign=a;this.deStyle.textAlign=a||"inherit";if(this.inited){this.fireNewEvent("textAlign",a)}}},setWhiteSpace:function(a){this.__s(a,"whiteSpace")},setWordWrap:function(a){this.__s(a,"wordWrap","normal")},setTextIndent:function(a){this.__s(a,"textIndent")},setTextTransform:function(a){this.__s(a,"textTransform")},setTextDecoration:function(a){this.__s(a,"textDecoration")},setLineHeight:function(a){this.__s(a,"lineHeight")},setLetterSpacing:function(a){this.__s(a,"letterSpacing")},setWordSpacing:function(a){this.__s(a,"wordSpacing")},setFontFamily:function(a){this.__s(a,"fontFamily")},setFontStyle:function(a){this.__s(a,"fontStyle")},setFontVariant:function(a){this.__s(a,"fontVariant")},setFontWeight:function(a){this.__s(a,"fontWeight")},setFontSize:function(a){this.__s(a,"fontSize")},__s:function(c,d,a){if(this[d]!==c){this[d]=c;this.deStyle[d]=c||a||"inherit";if(this.inited){this.fireNewEvent(d,c);this.sizeViewToDom()}}},setUserUnselectable:function(a){if(this.userUnselectable!==a){this.userUnselectable=a;this[a?"addDomClass":"removeDomClass"]("mytUnselectable");this.setCursor(a?"default":"text");if(this.inited){this.fireNewEvent("userUnselectable",a)}}},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(a,h,f,c,d){var g=(a||0)+"px "+(h||0)+"px "+(f!=null?f:2)+"px "+(c||"#000000");if(d>0){var e=[g];while(d--){e.push(g)}g=e.join(",")}this.deStyle.textShadow=g},hideTextShadow:function(){this.deStyle.textShadow="none"}});myt.Text=new JS.Class("Text",myt.View,{include:[myt.SizeToDom,myt.TextSupport],initNode:function(c,a){if(a.whiteSpace===undefined){a.whiteSpace="nowrap"}this.callSuper(c,a)},measureNoWrapWidth:function(){if(this.whiteSpace==="nowrap"){return this.width}var d=this.deStyle,c=d.whiteSpace;d.whiteSpace="nowrap";var a=this.domElement.getBoundingClientRect().width;d.whiteSpace=c;return a}});myt.Markup=new JS.Class("Markup",myt.View,{include:[myt.SizeToDom],setHtml:function(a){if(this.html!==a){this.domElement.innerHTML=this.html=a;if(this.inited){this.fireNewEvent("html",a);this.sizeViewToDom()}}}});myt.SizeWidthToDom=new JS.Module("SizeWidthToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setWidth:function(a,c){if(a==="auto"){this.__hasSetWidth=false;this.deStyle.width="auto";this.sizeViewToDom()}else{this.__hasSetWidth=true;this.callSuper(a,c)}},sizeViewToDom:function(){if(!this.__hasSetWidth){var c=myt.TransformSupport.getEffectiveScale(this);var a=this.domElement.getBoundingClientRect().width/c.scaleX;if(this.width!==a){this.width=a;if(this.inited){this.__updateBounds(a,this.height)}this.fireNewEvent("width",a)}}}});myt.SizeHeightToDom=new JS.Module("SizeHeightToDom",{doAfterAdoption:function(){this.sizeViewToDom();this.callSuper()},setHeight:function(a,c){if(a==="auto"){this.__hasSetHeight=false;this.deStyle.height="auto";this.sizeViewToDom()}else{this.__hasSetHeight=true;this.callSuper(a,c)}},sizeViewToDom:function(){if(!this.__hasSetHeight){var c=myt.TransformSupport.getEffectiveScale(this);var a=this.domElement.getBoundingClientRect().height/c.scaleY;if(this.height!==a){this.height=a;if(this.inited){this.__updateBounds(this.width,a)}this.fireNewEvent("height",a)}}}});myt.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){if(this.parent!==a){if(this.inited){this.__teardownPercentOfParentWidthConstraint();this.__teardownPercentOfParentHeightConstraint()}this.callSuper(a);this.__setupPercentOfParentWidthConstraint();this.__setupPercentOfParentHeightConstraint()}},setPercentOfParentWidthOffset:function(a){if(this.percentOfParentWidthOffset!==a){this.percentOfParentWidthOffset=a;if(this.inited){this.fireNewEvent("percentOfParentWidthOffset",a);this.__doPercentOfParentWidth()}}},setPercentOfParentWidth:function(a){if(this.percentOfParentWidth!==a){if(this.inited){this.__teardownPercentOfParentWidthConstraint()}this.percentOfParentWidth=a;if(this.inited){this.fireNewEvent("percentOfParentWidth",a)}this.__setupPercentOfParentWidthConstraint()}},__teardownPercentOfParentWidthConstraint:function(){if(this.percentOfParentWidth>=0){this.detachFrom(this.parent,"__doPercentOfParentWidth","width")}},__setupPercentOfParentWidthConstraint:function(){var a=this.parent;if(a&&this.percentOfParentWidth>=0){this.syncTo(a,"__doPercentOfParentWidth","width")}},__doPercentOfParentWidth:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+Math.round(this.parent.width*(this.percentOfParentWidth/100)));if(!this.inited){this.fireNewEvent("width",this.width)}},setPercentOfParentHeightOffset:function(a){if(this.percentOfParentHeightOffset!==a){this.percentOfParentHeightOffset=a;if(this.inited){this.fireNewEvent("percentOfParentHeightOffset",a);this.__doPercentOfParentHeight()}}},setPercentOfParentHeight:function(a){if(this.percentOfParentHeight!==a){if(this.inited){this.__teardownPercentOfParentHeightConstraint()}this.percentOfParentHeight=a;if(this.inited){this.fireNewEvent("percentOfParentHeight",a)}this.__setupPercentOfParentHeightConstraint()}},__teardownPercentOfParentHeightConstraint:function(){if(this.percentOfParentHeight>=0){this.detachFrom(this.parent,"__doPercentOfParentHeight","height")}},__setupPercentOfParentHeightConstraint:function(){var a=this.parent;if(a&&this.percentOfParentHeight>=0){this.syncTo(a,"__doPercentOfParentHeight","height")}},__doPercentOfParentHeight:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+Math.round(this.parent.height*(this.percentOfParentHeight/100)));if(!this.inited){this.fireNewEvent("height",this.height)}}});new JS.Singleton("GlobalRootViewRegistry",{include:[myt.Observable],initialize:function(){this.__roots=[];myt.global.register("roots",this)},getRoots:function(){return this.__roots},addRoot:function(a){this.__roots.push(a);this.fireNewEvent("rootAdded",a)},removeRoot:function(e){var c=this.__roots,d=c.length,a;while(d){a=c[--d];if(a===e){c.splice(d,1);this.fireNewEvent("rootRemoved",a);break}}}});myt.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:function(a){var c=a.__captureDrop=function(e){e.preventDefault()},d=a.domElement;myt.addEventListener(d,"drop",c);myt.addEventListener(d,"dragover",c)},teardownCaptureDrop:function(a){var d=a.domElement,c=a.__captureDrop;myt.removeEventListener(d,"drop",c);myt.removeEventListener(d,"dragover",c)}},initNode:function(c,a){this.callSuper(c,a);this.setZIndex(0);this.addDomClass("myt");myt.global.roots.addRoot(this);myt.RootView.setupCaptureDrop(this)},createOurDomElement:function(a){if(!a){a=this.callSuper(a);myt.getElement().appendChild(a)}return a},destroyAfterOrphaning:function(){myt.RootView.teardownCaptureDrop(this);myt.global.roots.removeRoot(this);if(!this.keepDomElementWhenDestroyed){this.removeDomElement()}this.callSuper()},setKeepDomElementWhenDestroyed:function(a){this.keepDomElementWhenDestroyed=a},setParent:function(a){this.callSuper(undefined)},bringToFront:function(){var d=this.domElement,a=d.parentNode;if(d!==a.lastChild){var c=a.removeChild(d);if(c){a.appendChild(c)}}},sendToBack:function(){var d=this.domElement,a=d.parentNode;if(d!==a.firstChild){var c=a.removeChild(d);if(c){a.insertBefore(c,a.firstChild)}}},sendBehind:function(d){var f=this.domElement,c=d.domElement,a=f.parentNode;if(c.parentNode===a){var e=a.removeChild(f);if(e){a.insertBefore(e,c)}}},sendInFrontOf:function(a){if(a.domElement.parentNode===this.domElement.parentNode){this.sendBehind(a);a.sendBehind(this)}}});new JS.Singleton("GlobalWindowResize",{include:[myt.Observable],initialize:function(){this.EVENT={source:this,type:"resize",value:{w:this.getWidth(),h:this.getHeight()}};var a=this;myt.addEventListener(window,"resize",function(c){a.__handleEvent(c)});myt.global.register("windowResize",this)},getWidth:function(){return this.__windowInnerWidth||(this.__windowInnerWidth=window.innerWidth)},getHeight:function(){return this.__windowInnerHeight||(this.__windowInnerHeight=window.innerHeight)},__handleEvent:function(e){if(!e){e=window.event}var f=this.EVENT,g=f.value,c=false,j=e.target,a=j.innerWidth,d=j.innerHeight;if(a!==g.w){g.w=this.__windowInnerWidth=a;c=true}if(d!==g.h){g.h=this.__windowInnerHeight=d;c=true}if(c){this.fireEvent(f)}}});myt.SizeToWindow=new JS.Module("SizeToWindow",{include:[myt.RootView],initNode:function(c,a){this.minWidth=this.minHeight=0;if(a.resizeDimension===undefined){a.resizeDimension="both"}this.attachTo(myt.global.windowResize,"__handleResize","resize");this.callSuper(c,a)},setResizeDimension:function(a){if(this.resizeDimension!==a){this.resizeDimension=a;this.__handleResize()}},setMinWidth:function(a){if(this.minWidth!==a){this.minWidth=a;this.__handleResize()}},setMinHeight:function(a){if(this.minHeight!==a){this.minHeight=a;this.__handleResize()}},__handleResize:function(c){var a=myt.global.windowResize.EVENT.value,d=this.resizeDimension;if(d==="width"||d==="both"){this.setWidth(Math.max(this.minWidth,a.w))}if(d==="height"||d==="both"){this.setHeight(Math.max(this.minHeight,a.h))}}});myt.SizeToWindowWidth=new JS.Module("SizeToWindowWidth",{include:[myt.SizeToWindow],initNode:function(c,a){if(a.resizeDimension===undefined){a.resizeDimension="width"}this.callSuper(c,a)}});myt.SizeToWindowHeight=new JS.Module("SizeToWindowHeight",{include:[myt.SizeToWindow],initNode:function(c,a){if(a.resizeDimension===undefined){a.resizeDimension="height"}this.callSuper(c,a)}});new JS.Singleton("GlobalIdle",{include:[myt.Observable],initialize:function(){this.running=false;var g,f=["webkit","moz","ms","o"],e=window;for(var c=0;c<f.length&&!e.requestAnimationFrame;++c){g=f[c];e.requestAnimationFrame=e[g+"RequestAnimationFrame"];e.cancelAnimationFrame=e[g+"CancelAnimationFrame"]||e[g+"CancelRequestAnimationFrame"]}var a=this;this.__event={};this.__doIdle=function d(k){a.__timerId=e.requestAnimationFrame(d);var j=a.lastTime;if(j!==-1){k=Math.round(k);var h=a.__event;h.delta=k-j;h.time=k;a.fireNewEvent("idle",h)}a.lastTime=k};myt.global.register("idle",this)},attachObserver:function(d,c,e){var a=this.callSuper(d,c,e);if(!this.running&&this.hasObservers("idle")){this.running=true;this.lastTime=-1;this.__timerId=window.requestAnimationFrame(this.__doIdle)}return a},detachObserver:function(d,c,e){var a=this.callSuper(d,c,e);if(this.running&&!this.hasObservers("idle")){window.cancelAnimationFrame(this.__timerId);this.running=false}return a}});myt.Animator=new JS.Class("Animator",myt.Node,{include:[myt.Reusable],initNode:function(c,a){this.duration=1000;this.relative=this.reverse=this.running=this.paused=false;this.repeat=1;this.easingFunction=myt.Animator.easingFunctions.linear;this.callSuper(c,a);this.__temporaryFrom=false;this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0},setRunning:function(a){if(this.running!==a){this.running=a;if(this.inited){this.fireNewEvent("running",a)}if(!this.paused){if(a){this.attachTo(myt.global.idle,"__update","idle")}else{this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0;if(this.__temporaryFrom){this.from=undefined}this.__temporaryFrom=false;this.detachFrom(myt.global.idle,"__update","idle")}}}},setPaused:function(a){if(this.paused!==a){this.paused=a;if(this.inited){this.fireNewEvent("paused",a)}if(this.running){if(a){this.detachFrom(myt.global.idle,"__update","idle")}else{this.attachTo(myt.global.idle,"__update","idle")}}}},setReverse:function(a){if(this.reverse!==a){this.reverse=a;if(this.inited){this.fireNewEvent("reverse",a)}if(!this.running){this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0}}},setEasingFunction:function(a){if(typeof a==="string"){var c=myt.Animator.easingFunctions[a];if(!c){console.log("Unknown easingFunction: ",a);c=myt.Animator.easingFunctions.linear}a=c}if(this.easingFunction!==a){this.easingFunction=a;if(this.inited){this.fireNewEvent("easingFunction",a)}}},setFrom:function(a){if(this.from!==a){this.from=a;if(this.inited){this.fireNewEvent("from",a)}}},setTo:function(a){if(this.to!==a){this.to=a;if(this.inited){this.fireNewEvent("to",a)}}},setCallback:function(a){this.callback=a},next:function(e,c){var a=this.callback;if(a&&!c){var d=this;this.setCallback(function(f){a.call(d,f);e.call(d,f)})}else{this.setCallback(e)}},reset:function(a){if(this.paused){this.__temporaryFrom=false;this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0}this.setRunning(false);this.setPaused(false);if(a&&this.callback){this.callback.call(this,false)}},clean:function(){this.to=this.from=this.attribute=this.callback=undefined;this.duration=1000;this.relative=this.reverse=false;this.repeat=1;this.easingFunction=myt.Animator.easingFunctions.linear;if(this.paused){this.__temporaryFrom=false;this.__loopCount=this.reverse?this.repeat-1:0;this.__progress=this.reverse?this.duration:0}this.setRunning(false);this.setPaused(false)},__update:function(a){this.__advance(a.value.delta)},__advance:function(c){if(this.running&&!this.paused){var l=this.reverse,g=this.duration,e=this.repeat,m=this.attribute;if(l){c=c*-1}var h=this.__progress;this.__progress+=c;var o=0;if(this.__progress>g){o=this.__progress-g;this.__progress=g;if(++this.__loopCount===e){o=0}}else{if(0>this.__progress){o=-this.__progress;this.__progress=0;if(0>--this.__loopCount&&e>0){o=0}}}var k=this.target||this.parent;if(k){if(this.from==null){this.__temporaryFrom=true;this.from=this.relative?0:k.get(m)}var n=this.from,j=this.to-n,d=this.easingFunction(this.__progress,j,g);if(this.relative){var a=this.easingFunction(h,j,g),f=k.get(m);k.set(m,f+d-a)}else{k.set(m,n+d)}if((!l&&this.__loopCount===e)||(l&&0>this.__loopCount&&e>0)){this.setRunning(false);if(this.callback){this.callback.call(this,true)}}else{if(o>0){this.fireNewEvent("repeat",this.__loopCount);this.__progress=l?g:0;this.__advance(o)}}}else{console.log("No target found for animator.",this);this.setRunning(false);if(this.callback){this.callback.call(this,false)}}}}});myt.Animator.easingFunctions={linear:function(a,f,e){return f*(a/e)},easeInQuad:function(a,f,e){return f*(a/=e)*a},easeOutQuad:function(a,f,e){return -f*(a/=e)*(a-2)},easeInOutQuad:function(a,f,e){if((a/=e/2)<1){return f/2*a*a}return -f/2*((--a)*(a-2)-1)},easeInCubic:function(a,f,e){return f*(a/=e)*a*a},easeOutCubic:function(a,f,e){return f*((a=a/e-1)*a*a+1)},easeInOutCubic:function(a,f,e){if((a/=e/2)<1){return f/2*a*a*a}return f/2*((a-=2)*a*a+2)},easeInQuart:function(a,f,e){return f*(a/=e)*a*a*a},easeOutQuart:function(a,f,e){return -f*((a=a/e-1)*a*a*a-1)},easeInOutQuart:function(a,f,e){if((a/=e/2)<1){return f/2*a*a*a*a}return -f/2*((a-=2)*a*a*a-2)},easeInQuint:function(a,f,e){return f*(a/=e)*a*a*a*a},easeOutQuint:function(a,f,e){return f*((a=a/e-1)*a*a*a*a+1)},easeInOutQuint:function(a,f,e){if((a/=e/2)<1){return f/2*a*a*a*a*a}return f/2*((a-=2)*a*a*a*a+2)},easeInSine:function(a,f,e){return -f*Math.cos(a/e*(Math.PI/2))+f},easeOutSine:function(a,f,e){return f*Math.sin(a/e*(Math.PI/2))},easeInOutSine:function(a,f,e){return -f/2*(Math.cos(Math.PI*a/e)-1)},easeInExpo:function(a,f,e){return(a===0)?0:f*Math.pow(2,10*(a/e-1))},easeOutExpo:function(a,f,e){return(a===e)?f:f*(-Math.pow(2,-10*a/e)+1)},easeInOutExpo:function(a,f,e){if(a===0){return 0}if(a===e){return f}if((a/=e/2)<1){return f/2*Math.pow(2,10*(a-1))}return f/2*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a,f,e){return -f*(Math.sqrt(1-(a/=e)*a)-1)},easeOutCirc:function(a,f,e){return f*Math.sqrt(1-(a=a/e-1)*a)},easeInOutCirc:function(a,f,e){if((a/=e/2)<1){return -f/2*(Math.sqrt(1-a*a)-1)}return f/2*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(f,k,j){var g=1.70158,h=0,e=k;if(f===0){return 0}if((f/=j)===1){return k}if(!h){h=j*0.3}if(e<Math.abs(k)){g=h/4}else{g=h/(2*Math.PI)*Math.asin(k/e)}return -(e*Math.pow(2,10*(f-=1))*Math.sin((f*j-g)*(2*Math.PI)/h))},easeOutElastic:function(f,k,j){var g=1.70158,h=0,e=k;if(f===0){return 0}if((f/=j)===1){return k}if(!h){h=j*0.3}if(e<Math.abs(k)){g=h/4}else{g=h/(2*Math.PI)*Math.asin(k/e)}return e*Math.pow(2,-10*f)*Math.sin((f*j-g)*(2*Math.PI)/h)+k},easeInOutElastic:function(f,k,j){var g=1.70158,h=0,e=k;if(f===0){return 0}if((f/=j/2)===2){return k}if(!h){h=j*(0.3*1.5)}if(e<Math.abs(k)){g=h/4}else{g=h/(2*Math.PI)*Math.asin(k/e)}if(f<1){return -0.5*(e*Math.pow(2,10*(f-=1))*Math.sin((f*j-g)*(2*Math.PI)/h))}return e*Math.pow(2,-10*(f-=1))*Math.sin((f*j-g)*(2*Math.PI)/h)*0.5+k},easeInBack:function(a,g,f,e){if(e===undefined){e=1.70158}return g*(a/=f)*a*((e+1)*a-e)+b},easeOutBack:function(a,g,f,e){if(e===undefined){e=1.70158}return g*((a=a/f-1)*a*((e+1)*a+e)+1)},easeInOutBack:function(a,g,f,e){if(e===undefined){e=1.70158}if((a/=f/2)<1){return g/2*(a*a*(((e*=(1.525))+1)*a-e))}return g/2*((a-=2)*a*(((e*=(1.525))+1)*a+e)+2)},easeInBounce:function(a,f,e){return f-myt.Animator.easingFunctions.easeOutBounce(e-a,f,e)},easeOutBounce:function(a,f,e){if((a/=e)<(1/2.75)){return f*(7.5625*a*a)}else{if(a<(2/2.75)){return f*(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return f*(7.5625*(a-=(2.25/2.75))*a+0.9375)}else{return f*(7.5625*(a-=(2.625/2.75))*a+0.984375)}}}},easeInOutBounce:function(a,f,e){if(a<e/2){return myt.Animator.easingFunctions.easeInBounce(a*2,f,e)*0.5}return myt.Animator.easingFunctions.easeOutBounce(a*2-e,f,e)*0.5+f*0.5}};myt.Callback=new JS.Class("Callback",{initialize:function(c,d,a){this.setContext(d);this.setMethodName(c);this.setExtraArgs(a)},setContext:function(a){this.context=a},setMethodName:function(a){this.methodName=a},setExtraArgs:function(a){this.extraArgs=a},execute:function(){var c=Array.prototype.slice.call(arguments),a=this.context,d=this.extraArgs;if(d&&d.length>0){c=c.concat(d)}a[this.methodName].apply(a,c)}});myt.Timer=new JS.Class("Timer",{initialize:function(c,a){this.reset(c,a)},setCallback:function(a){this.callback=a},setTimerId:function(a){this.timerId=a},clear:function(){if(this.isRunning()){clearTimeout(this.timerId);this.setTimerId()}this.setCallback()},reset:function(c,a){this.clear();this.setCallback(c);this.run(a)},run:function(c){if(this.callback&&c>=0){var a=this;var d=function(){a.setTimerId();if(a.callback.execute){a.callback.execute()}else{a.callback.call(this)}};this.setTimerId(BrowserDetect.browser==="Firefox"?this.__setTimeout(d,c):setTimeout(d,c))}},isRunning:function(){return this.timerId!==undefined},__setTimeout:function(e,d){var c=this,a=Date.now()+d;return setTimeout(function(){var f=Date.now();if(f<a){c.setTimerId(c.__setTimeout(e,a-f))}else{e()}},d)}});myt.RepeatableTimer=new JS.Class("RepeatableTimer",myt.Timer,{initialize:function(e,a,c,d){this.reset(e,a,c,d)},setValue:function(a){this.value=a},setRepeatDelayInMillis:function(a){this.repeatDelayInMillis=a},clear:function(){this.callSuper();this.setValue();this.setRepeatDelayInMillis()},reset:function(e,a,c,d){this.clear();this.setCallback(e);this.setValue(c);this.setRepeatDelayInMillis(d);this.run(a)},run:function(c){if(this.callback&&c>=0){var a=this;this.setTimerId(setTimeout(function(){var e=a.repeatDelayInMillis,d=e!==undefined&&e>=0;if(!d){a.setTimerId()}if(a.value===undefined){a.callback.execute()}else{a.callback.execute(a.value)}if(d){a.run(e)}},c))}}});myt.StateMachine=new JS.Class("StateMachine",myt.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5,SYNC:"sync",ASYNC:"async",WILDCARD:"*"},initNode:function(c,a){this.map={};this.map[myt.StateMachine.WILDCARD]={};this.current=this.initial=this.terminal="";this.__resetTransitionProgress();this.callSuper(c,a)},setInitialState:function(a){if(this.current===""){var c;if(Array.isArray(a)){c=a;a=c.shift()}else{c=[]}this.current=this.initial=a;this.doEnterState("","",a,c);var d={name:"",from:"",to:a,args:c};this.fireNewEvent("enter"+a,d);this.fireNewEvent("enter",d);if(this.isFinished()){this.fireNewEvent("finished",d)}}},setTerminalState:function(a){this.terminal=a},setTransitions:function(a){var c=a.length,d;while(c){d=a[--c];this.addTransition(d.name,d.from,d.to)}},addTransition:function(e,g,f){var d=this.map;if(!g){g=[myt.StateMachine.WILDCARD]}else{g=Array.isArray(g)?g:[g]}var c=g.length,a;while(c){a=d[g[--c]];if(!a){a=d[g[c]]={}}a[e]=f}},doTransition:function(){var a=Array.prototype.slice.call(arguments);a.unshift(myt.StateMachine.SYNC);return this.__doTransition.apply(this,a)},doAsyncTransition:function(){var a=Array.prototype.slice.call(arguments);a.unshift(myt.StateMachine.ASYNC);return this.__doTransition.apply(this,a)},__doTransition:function(){var d=Array.prototype.slice.call(arguments);if(this.__transitionInProgress){var c=this.__deferredTransitions;if(!c){c=this.__deferredTransitions=[]}c.unshift(d);return}else{this.__transitionInProgress=true}var e=d.shift(),f=d.shift();var a=myt.StateMachine;if(this.__pendingTransition){return a.PENDING}if(this.isFinished()){this.__transitionInProgress=false;return a.NO_TRANSITION}var g=this.map[this.current][f];if(!g){g=this.map[a.WILDCARD][f]}if(g){this.__pendingTransition=f;this.__transitionDestinationState=g;this.__additionalArgs=d;return this.resumeTransition(e)}else{this.__transitionInProgress=false;return a.NO_TRANSITION}},resumeTransition:function(e){var h=this.__pendingTransition;var c=myt.StateMachine;if(!h){return c.INVALID}var f=this.current,j=this.__transitionDestinationState,d=this.__additionalArgs,g={name:h,from:f,to:j,args:d};switch(this.__transitionStage){case"leaveState":var a=this.doLeaveState(h,f,j,d);if(a===false){this.__resetTransitionProgress();this.__doDeferredTransitions();return c.CANCELLED}else{if(a===c.ASYNC||e===c.ASYNC){this.__transitionStage="enterState";this.fireNewEvent("start"+h,g);this.fireNewEvent("start",g);this.fireNewEvent("leave"+f,g);this.fireNewEvent("leave",g);this.__doDeferredTransitions();return c.PENDING}else{this.fireNewEvent("start"+h,g);this.fireNewEvent("start",g);this.fireNewEvent("leave"+f,g);this.fireNewEvent("leave",g)}}case"enterState":this.current=j;this.__resetTransitionProgress();this.doEnterState(h,f,j,d);this.fireNewEvent("enter"+j,g);this.fireNewEvent("enter",g);this.fireNewEvent("end"+h,g);this.fireNewEvent("end",g);if(this.isFinished()){this.fireNewEvent("finished",g)}}this.__doDeferredTransitions();return c.SUCCEEDED},__doDeferredTransitions:function(){this.__transitionInProgress=false;var a=this.__deferredTransitions;if(a){while(a.length>0){this.__doTransition.apply(this,a.pop())}}},doLeaveState:function(c,e,d,a){},doEnterState:function(c,e,d,a){},__resetTransitionProgress:function(){this.__additionalArgs=[];this.__pendingTransition="";this.__transitionDestinationState="";this.__transitionStage="leaveState"},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(a){if(Array.isArray(a)){return a.indexOf(this.current)>=0}else{return this.current===a}},can:function(a){if(this.map[this.current][a]!==undefined){return true}else{return this.map[myt.StateMachine.WILDCARD][a]!==undefined}}});myt.Replicable=new JS.Module("Replicable",{include:[myt.Reusable],replicate:function(c,a){this.replicationData=c;this.replicationIndex=a},notify:function(a,c){},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(c,a){return a===this.replicationIndex&&c===this.replicationData}});myt.Replicator=new JS.Class("Replicator",myt.Node,{extend:{SORT_FUNCTION:function(d,c){return d.replicationIndex-c.replicationIndex}},initNode:function(c,a){this.callSuper(c,a);this.__setupPool();this.doReplication()},destroyAfterOrphaning:function(){this.__destroyOldPool();this.callSuper()},setTemplate:function(a){this.template=a.includes(myt.Replicable)?a:null;if(!this.template){myt.dumpStack("Template not an myt.Replicable")}if(this.inited){this.__setupPool();this.doReplication()}},setData:function(a){this.data=a;if(this.inited){this.doReplication()}},__setupPool:function(){this.__destroyOldPool();var a=this.template;if(a){this.__pool=new myt.TrackActivesPool(a,this.parent)}},__destroyOldPool:function(){var a=this.__pool;if(a){var c=this.parent.getLayouts();this.__lockLayouts(c);a.putActives();a.destroyPooledInstances();this.__unlockLayouts(c,false);a.destroy()}},doReplication:function(){var j=this.__pool;if(j){var l=this.parent.getLayouts();this.__lockLayouts(l);var g=this.data,d=g?g.length:0,c=j.getActives(),k=c.length,h=k,f,a,e=[],m=myt.Replicator.SORT_FUNCTION;c.sort(m);while(h){f=c[--h];a=f.replicationIndex;if(a>=d||!f.alreadyHasReplicationData(g[a],a)){e[a]=f}}h=e.length;while(h){f=e[--h];if(f){j.putInstance(f)}}for(h=0;d>h;++h){if(h>=k||e[h]!=null){j.getInstance().replicate(g[h],h)}}h=l.length;while(h){l[--h].sortSubviews(m)}this.__unlockLayouts(l,true)}},notify:function(d,f){var c=this.__pool;if(c){var e=c.getActives(),a=e.length;while(a){e[--a].notify(d,f)}}},__lockLayouts:function(c){var a=c.length;while(a){c[--a].incrementLockedCounter()}},__unlockLayouts:function(d,e){var a=d.length,c;while(a){c=d[--a];c.decrementLockedCounter();if(e){c.update()}}}});myt.ConstantLayout=new JS.Class("ConstantLayout",myt.Layout,{setTargetAttrName:function(a){if(this.targetAttrName!==a){this.targetAttrName=a;this.setterName=myt.AccessorSupport.generateSetterName(a);if(this.inited){this.fireNewEvent("targetAttrName",a);this.update()}}},setTargetValue:function(a){if(this.targetValue!==a){this.targetValue=a;if(this.inited){this.fireNewEvent("targetValue",a);this.update()}}},update:function(){if(this.canUpdate()){var e=this.setterName,g=this.targetValue,d=this.subviews,c,h;for(var f=0,a=d.length;a>f;++f){c=d[f];h=c[e];if(h){h.call(c,g)}}}}});myt.VariableLayout=new JS.Class("VariableLayout",myt.ConstantLayout,{initNode:function(c,a){this.collapseParent=this.reverse=false;this.callSuper(c,a)},setCollapseParent:function(a){if(this.collapseParent!==a){this.collapseParent=a;if(this.inited){this.fireNewEvent("collapseParent",a);this.update()}}},setReverse:function(a){if(this.reverse!==a){this.reverse=a;if(this.inited){this.fireNewEvent("reverse",a);this.update()}}},update:function(){if(this.canUpdate()){this.incrementLockedCounter();this.doBeforeUpdate();var e=this.setterName,h=this.targetValue,d=this.subviews,a=d.length,f,c,g=0;if(this.reverse){f=a;while(f){c=d[--f];if(this.skipSubview(c)){continue}h=this.updateSubview(++g,c,e,h)}}else{for(f=0;a>f;){c=d[f++];if(this.skipSubview(c)){continue}h=this.updateSubview(++g,c,e,h)}}this.doAfterUpdate();if(this.collapseParent&&!this.parent.isBeingDestroyed){this.updateParent(e,h)}this.decrementLockedCounter()}},doBeforeUpdate:function(){},doAfterUpdate:function(){},startMonitoringSubview:function(a){this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update","visible")},updateSubview:function(d,a,c,e){a[c](e);return e},skipSubview:function(a){return !a.visible},updateParent:function(a,c){}});myt.WrappingLayout=new JS.Class("WrappingLayout",myt.VariableLayout,{initNode:function(c,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(c,a)},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(a==="x"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.otherSetterName="setY";if(this.inited){this.startMonitoringAllSubviews();this.stopMonitoringParent("height");this.startMonitoringParent("width")}this.callSuper(a)}else{if(a==="y"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.otherMeasureAttrName="boundsWidth";this.otherMeasureAttrBaseName="width";this.parentSetterName="setWidth";this.otherSetterName="setX";if(this.inited){this.startMonitoringAllSubviews();this.stopMonitoringParent("width");this.startMonitoringParent("height")}this.callSuper(a)}}}},setParent:function(a){if(this.parent!==parent){if(this.parent){if(this.targetAttrName==="x"){this.stopMonitoringParent("width")}else{if(this.targetAttrName==="y"){this.stopMonitoringParent("height")}}}this.callSuper(a);if(this.parent){if(this.targetAttrName==="x"){this.startMonitoringParent("width")}else{if(this.targetAttrName==="y"){this.startMonitoringParent("height")}}}}},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.inited){this.fireNewEvent("spacing",a);this.update()}}},setOutset:function(a){if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a);this.update()}}},setLineSpacing:function(a){if(this.lineSpacing!==a){this.lineSpacing=a;if(this.inited){this.fireNewEvent("lineSpacing",a);this.update()}}},setLineInset:function(a){if(this.lineInset!==a){this.lineInset=a;if(this.inited){this.fireNewEvent("lineInset",a);this.update()}}},setLineOutset:function(a){if(this.lineOutset!==a){this.lineOutset=a;if(this.inited){this.fireNewEvent("lineOutset",a);this.update()}}},setAxis:function(a){this.setTargetAttrName(a);this.axis=this.targetAttrName},setInset:function(a){this.setTargetValue(a);this.inset=this.targetValue},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update",this.otherMeasureAttrName);this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update",this.otherMeasureAttrName);this.detachFrom(a,"update","visible")},doBeforeUpdate:function(){this.lineCount=1;this.maxSize=0;this.lineSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(f,a,d,g){var e=a[this.measureAttrName],c=a[this.otherMeasureAttrName];if(g+e>this.parentSizeLessOutset||a.layoutHint==="break"){g=this.targetValue;this.linePos+=this.lineSize+this.lineSpacing;this.lineSize=c;++this.lineCount}else{if(c>this.lineSize){this.lineSize=c}}a[this.otherSetterName](this.linePos+(c-a[this.otherMeasureAttrBaseName])/2);a[d](g+(e-a[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,g+e+this.outset);return g+e+this.spacing},updateParent:function(a,c){c=this.linePos+this.lineSize+this.lineOutset;this.parent[this.parentSetterName](c)}});myt.SpacedLayout=new JS.Class("SpacedLayout",myt.VariableLayout,{initNode:function(c,a){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(c,a)},setNoAddSubviewOptimization:function(a){this.noAddSubviewOptimization=a},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(a==="x"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";if(this.inited){this.startMonitoringAllSubviews()}this.callSuper(a)}else{if(a==="y"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";if(this.inited){this.startMonitoringAllSubviews()}this.callSuper(a)}}}},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.inited){this.fireNewEvent("spacing",a);this.update()}}},setOutset:function(a){if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a);this.update()}}},setAxis:function(a){this.setTargetAttrName(a);this.axis=this.targetAttrName},setInset:function(a){this.setTargetValue(a);this.inset=this.targetValue},addSubview:function(a){var c=this.locked;if(!this.noAddSubviewOptimization){this.locked=true}this.callSuper(a);this.locked=c},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update","visible")},updateSubview:function(e,a,c,f){var d=a[this.measureAttrName];a[c](f+(d-a[this.measureAttrBaseName])/2);return f+d+this.spacing},updateParent:function(a,c){var d=this.outset-this.spacing;this.parent[this.parentSetterName](c+d)}});myt.ResizeLayout=new JS.Class("SpacedLayout",myt.SpacedLayout,{setCollapseParent:function(a){},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(this.inited){var c=a==="x";this.stopMonitoringParent(c?"height":"width");this.startMonitoringParent(c?"width":"height")}this.callSuper(a)}},setParent:function(a){if(this.parent!==a){var c=this.targetAttrName==="x"?"width":"height";if(this.parent){this.stopMonitoringParent(c)}this.callSuper(a);if(this.parent){this.startMonitoringParent(c)}}},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},doBeforeUpdate:function(){var f=this.measureAttrName,e=this.measureAttrBaseName,j=this.parent[e];j-=this.targetValue+this.outset;var c=this.subviews,d=c.length,a,g=0,h=0;while(d){a=c[--d];if(this.skipSubview(a)){continue}++g;if(a.layoutHint>0){h+=a.layoutHint}else{j-=a[f]}}if(g!==0){j-=(g-1)*this.spacing;this.remainder=j;this.resizeSum=h;this.scalingFactor=j/h;this.resizeSumUsed=this.remainderUsed=0;this.measureSetter=f==="boundsWidth"?"setWidth":"setHeight"}},updateSubview:function(e,a,c,f){var g=a.layoutHint;if(g>0){this.resizeSumUsed+=g;var d=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(g*this.scalingFactor);this.remainderUsed+=d;a[this.measureSetter](d)}return this.callSuper(e,a,c,f)},startMonitoringSubview:function(a){if(!(a.layoutHint>0)){this.attachTo(a,"update",this.measureAttrName)}this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){if(!(a.layoutHint>0)){this.detachFrom(a,"update",this.measureAttrName)}this.detachFrom(a,"update","visible")},updateParent:function(a,c){}});myt.AlignedLayout=new JS.Class("AlignedLayout",myt.VariableLayout,{initNode:function(c,a){this.targetAttrName=this.axis="x";this.align="middle";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=0;this.callSuper(c,a)},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(a==="x"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";if(this.inited){this.startMonitoringAllSubviews()}this.callSuper(a)}else{if(a==="y"){if(this.inited){this.stopMonitoringAllSubviews()}this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";if(this.inited){this.startMonitoringAllSubviews()}this.callSuper(a)}}}},setAlign:function(a){if(this.align!==a){this.align=a;if(this.inited){this.fireNewEvent("align",a);this.update()}}},setAxis:function(a){this.setTargetAttrName(a);this.axis=this.targetAttrName},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update","visible")},doBeforeUpdate:function(){var e=this.measureAttrName,f=0,c=this.subviews,a,d=c.length;while(d){a=c[--d];if(this.skipSubview(a)){continue}f=Math.max(f,a[e])}if(isNaN(f)||0>=f){f=0}this.setTargetValue(f)},updateSubview:function(d,a,c,e){switch(this.align){case"center":case"middle":a[c]((e-a[this.measureAttrName])/2);break;case"right":case"bottom":a[c](e-a[this.measureAttrName]);break;default:a[c](0);break}return e},updateParent:function(a,c){this.parent[this.parentSetterName](c)}});myt.ImageSupport=new JS.Module("ImageSupport",{extend:{SIZE_CACHE:{},OPEN_SIZE_QUERIES:{}},initNode:function(c,a){if(a.imageRepeat===undefined){a.imageRepeat="no-repeat"}if(a.imageAttachment===undefined){a.imageAttachment="scroll"}this.callSuper(c,a)},setImageUrl:function(a){if(this.imageUrl!==a){this.imageUrl=a;this.deStyle.backgroundImage=a?'url("'+a+'")':"none";if(this.inited){this.fireNewEvent("imageUrl",a);this.setNaturalWidth(undefined);this.setNaturalHeight(undefined);if(!a&&this.useNaturalSize){this.setWidth(0);this.setHeight(0)}}this.__calculateNaturalSize()}},setImageSize:function(a){if(this.imageSize!==a){this.imageSize=a;this.deStyle.backgroundSize=a||"auto";if(this.inited){this.fireNewEvent("imageSize",a)}}},setImageRepeat:function(a){if(this.imageRepeat!==a){this.deStyle.backgroundRepeat=this.imageRepeat=a;if(this.inited){this.fireNewEvent("imageRepeat",a)}}},setImagePosition:function(a){if(this.imagePosition!==a){this.deStyle.backgroundPosition=this.imagePosition=a;if(this.inited){this.fireNewEvent("imagePosition",a)}}},setImageAttachment:function(a){if(this.imageAttachment!==a){this.deStyle.backgroundAttachment=this.imageAttachment=a;if(this.inited){this.fireNewEvent("imageAttachment",a)}}},setCalculateNaturalSize:function(a){if(this.calculateNaturalSize!==a){this.calculateNaturalSize=a;if(this.inited){this.fireNewEvent("calculateNaturalSize",a)}this.__calculateNaturalSize()}},setNaturalWidth:function(a){if(this.naturalWidth!==a){this.naturalWidth=a;if(this.inited){this.fireNewEvent("naturalWidth",a)}if(this.useNaturalSize&&a){this.setWidth(a)}}},setNaturalHeight:function(a){if(this.naturalHeight!==a){this.naturalHeight=a;if(this.inited){this.fireNewEvent("naturalHeight",a)}if(this.useNaturalSize&&a){this.setHeight(a)}}},setUseNaturalSize:function(a){if(this.useNaturalSize!==a){this.useNaturalSize=a;if(this.inited){this.fireNewEvent("useNaturalSize",a)}if(a){if(this.naturalWidth){this.setWidth(this.naturalWidth)}if(this.naturalHeight){this.setHeight(this.naturalHeight)}}if(a&&!this.calculateNaturalSize){this.setCalculateNaturalSize(true)}}},__calculateNaturalSize:function(){var g=this.imageUrl;if(this.calculateNaturalSize&&g){var e=myt.ImageSupport.SIZE_CACHE,d=e[g];if(d){this.setNaturalWidth(d.width);this.setNaturalHeight(d.height)}else{var c=myt.ImageSupport.OPEN_SIZE_QUERIES,f=c[g];if(!f){c[g]=f=[];var a=new Image();a.onload=function(){var k=this.width,m=this.height;var n=c[g];if(n){var l=n.length,j;while(l){j=n[--l];j.setNaturalWidth(k);j.setNaturalHeight(m)}n.length=0;delete c[g]}e[g]={width:k,height:m}};a.src=g}f.push(this)}}}});myt.Image=new JS.Class("Image",myt.View,{include:[myt.ImageSupport],initNode:function(c,a){if(a.useNaturalSize===undefined){a.useNaturalSize=true}this.callSuper(c,a)}});myt.SizeToChildren=new JS.Class("SizeToChildren",myt.Layout,{initNode:function(c,a){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(c,a)},setAxis:function(a){if(this.axis!==a){if(this.inited){this.stopMonitoringAllSubviews();this.axis=a;this.startMonitoringAllSubviews();this.fireNewEvent("axis",a);this.update()}else{this.axis=a}}},setPaddingX:function(a){if(this.paddingX!==a){this.paddingX=a;if(this.inited){this.fireNewEvent("paddingX",a);this.update()}}},setPaddingY:function(a){if(this.paddingY!==a){this.paddingY=a;if(this.inited){this.fireNewEvent("paddingY",a);this.update()}}},update:function(){if(this.canUpdate()){this.incrementLockedCounter();var l=this.subviews,g=l.length,k,h,d,c=this.parent,e=this.axis,a=Math.max,j,f;if(!c.isBeingDestroyed){if(e==="x"){h=0;while(g){k=l[--g];j=k.boundsWidth;j=j>0?j:0;if(k.visible){h=a(h,k.x+j)}}c.setWidth(h+this.paddingX)}else{if(e==="y"){d=0;while(g){k=l[--g];f=k.boundsHeight;f=f>0?f:0;if(k.visible){d=a(d,k.y+f)}}c.setHeight(d+this.paddingY)}else{h=d=0;while(g){k=l[--g];if(k.visible){j=k.boundsWidth;j=j>0?j:0;h=a(h,k.x+j);f=k.boundsHeight;f=f>0?f:0;d=a(d,k.y+f)}}c.setWidth(h+this.paddingX);c.setHeight(d+this.paddingY)}}}this.decrementLockedCounter()}},startMonitoringSubview:function(a){this.__updateMonitoringSubview(a,this.attachTo)},stopMonitoringSubview:function(a){this.__updateMonitoringSubview(a,this.detachFrom)},__updateMonitoringSubview:function(a,d){var c=this.axis,d=d.bind(this);if(c==="x"){d(a,"update","x");d(a,"update","boundsWidth")}else{if(c==="y"){d(a,"update","y");d(a,"update","boundsHeight")}else{d(a,"update","x");d(a,"update","boundsWidth");d(a,"update","y");d(a,"update","boundsHeight")}}d(a,"update","visible")}});myt.ThreePanel=new JS.Module("ThreePanel",{extend:{IGNORE_FUNCTION_MIXIN:{ignore:function(a){switch(a.name){case"first":case"second":case"third":return false;default:return true}}}},initNode:function(c,a){this.axis="x";this.repeat=false;this.callSuper(c,a)},doBeforeAdoption:function(){this.callSuper();var a=myt;new a.Image(this,{name:"first",imageUrl:this.firstImageUrl,ignoreLayout:true});var d=new a.Image(this,{name:"second",layoutHint:1,imageUrl:this.secondImageUrl,ignoreLayout:true,useNaturalSize:false,calculateNaturalSize:true,});this.attachTo(d,"__updateSize","naturalWidth");this.attachTo(d,"__updateSize","naturalHeight");this.attachTo(d,"__updateImageSize","width");this.attachTo(d,"__updateImageSize","height");new a.Image(this,{name:"third",imageUrl:this.thirdImageUrl,ignoreLayout:true});var e=this.axis,c=e==="x"?"y":"x",f=[a.ThreePanel.IGNORE_FUNCTION_MIXIN];new a.ResizeLayout(this,{name:"resizeLayout",axis:e},f);new a.SizeToChildren(this,{name:"sizeToChildren",axis:c},f);this.__updateRepeat();this.__updateSize();this.__updateImageSize()},setFirstImageUrl:function(a){if(this.firstImageUrl!==a){this.firstImageUrl=a;if(this.inited){this.first.setImageUrl(a)}}},setSecondImageUrl:function(a){if(this.secondImageUrl!==a){this.secondImageUrl=a;if(this.inited){this.second.setImageUrl(a)}}},setThirdImageUrl:function(a){if(this.thirdImageUrl!==a){this.thirdImageUrl=a;if(this.inited){this.third.setImageUrl(a)}}},setRepeat:function(a){if(this.repeat!==a){this.repeat=a;if(this.inited){this.fireNewEvent("repeat",a);this.__updateRepeat()}}},setAxis:function(a){if(this.axis!==a){this.axis=a;if(this.inited){this.__updateRepeat();if(a==="x"){this.first.setY(0);this.second.setY(0);this.third.setY(0)}else{this.first.setX(0);this.second.setX(0);this.third.setX(0)}this.__updateSize();this.resizeLayout.setAxis(a);this.sizeToChildren.setAxis(a==="x"?"y":"x");this.fireNewEvent("axis",a)}}},__updateSize:function(c){var a=this.second;if(this.axis==="x"){a.setHeight(a.naturalHeight)}else{a.setWidth(a.naturalWidth)}},__updateImageSize:function(c){var a=this.second;a.setImageSize(this.repeat?undefined:a.width+"px "+a.height+"px")},__updateRepeat:function(a){this.second.setImageRepeat(this.repeat?(this.axis==="x"?"repeat-x":"repeat-y"):"no-repeat")}});myt.Canvas=new JS.Class("Canvas",myt.View,{createOurDomElement:function(c){var d=this.callSuper(c);var a=this.__canvas=document.createElement("canvas");d.appendChild(a);a.style.position="absolute";this.__ctx=a.getContext("2d");return d},setWidth:function(a,c){if(0>a){a=0}this.__canvas.setAttribute("width",a);this.callSuper(a,c)},setHeight:function(a,c){if(0>a){a=0}this.__canvas.setAttribute("height",a);this.callSuper(a,c)},setFillStyle:function(a){this.__ctx.fillStyle=a},getFillStyle:function(){return this.__ctx.fillStyle},setStrokeStyle:function(a){this.__ctx.strokeStyle=a},getStrokeStyle:function(){return this.__ctx.strokeStyle},setShadowColor:function(a){this.__ctx.shadowColor=a},getShadowColor:function(){return this.__ctx.shadowColor},setShadowBlur:function(a){this.__ctx.shadowBlur=a},getShadowBlur:function(){return this.__ctx.shadowBlur},setShadowOffsetX:function(a){this.__ctx.shadowOffsetX=a},getShadowOffsetX:function(){return this.__ctx.shadowOffsetX},setShadowOffsetY:function(a){this.__ctx.shadowOffsetY=a},getShadowOffsetY:function(){return this.__ctx.shadowOffsetY},setLineWidth:function(a){this.__ctx.lineWidth=a},getLineWidth:function(){return this.__ctx.lineWidth},setLineCap:function(a){this.__ctx.lineCap=a},getLineCap:function(){return this.__ctx.lineCap},setLineJoin:function(a){this.__ctx.lineJoin=a},getLineJoin:function(){return this.__ctx.lineJoin},setMiterLimit:function(a){this.__ctx.miterLimit=a},getMiterLimit:function(){return this.__ctx.miterLimit},setFont:function(a){this.__ctx.font=a},getFont:function(){return this.__ctx.font},setTextAlign:function(a){this.__ctx.textAlign=a},getTextAlign:function(){return this.__ctx.textAlign},setTextBaseline:function(a){this.__ctx.textBaseline=a},getTextBaseline:function(){return this.__ctx.textBaseline},setGlobalAlpha:function(a){this.__ctx.globalAlpha=a},getGlobalAlpha:function(){return this.__ctx.globalAlpha},setGlobalCompositeOperation:function(a){this.__ctx.globalCompositeOperation=a},getGlobalCompositeOperation:function(){return this.__ctx.globalCompositeOperation},sendSubviewToBack:function(a){if(a.parent===this){var e=this.domElement,d=e.childNodes[1];if(a.domElement!==d){var c=e.removeChild(a.domElement);if(c){e.insertBefore(c,d)}}}},clear:function(){var a=this.__ctx;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.width,this.height);a.restore()},circle:function(c,d,a){this.__ctx.arc(c,d,a,0,2*Math.PI)},save:function(){var a=this.__ctx;a.save.apply(a,arguments)},restore:function(){var a=this.__ctx;a.restore.apply(a,arguments)},scale:function(){var a=this.__ctx;a.scale.apply(a,arguments)},rotate:function(){var a=this.__ctx;a.rotate.apply(a,arguments)},translate:function(){var a=this.__ctx;a.translate.apply(a,arguments)},transform:function(){var a=this.__ctx;a.transform.apply(a,arguments)},setTransform:function(){var a=this.__ctx;a.setTransform.apply(a,arguments)},createLinearGradient:function(){var a=this.__ctx;return a.createLinearGradient.apply(a,arguments)},createRadialGradient:function(){var a=this.__ctx;return a.createRadialGradient.apply(a,arguments)},createPattern:function(){var a=this.__ctx;return a.createPattern.apply(a,arguments)},clearRect:function(){var a=this.__ctx;a.clearRect.apply(a,arguments)},fillRect:function(){var a=this.__ctx;a.fillRect.apply(a,arguments)},strokeRect:function(){var a=this.__ctx;a.strokeRect.apply(a,arguments)},beginPath:function(){var a=this.__ctx;a.beginPath.apply(a,arguments)},closePath:function(){var a=this.__ctx;a.closePath.apply(a,arguments)},moveTo:function(){var a=this.__ctx;a.moveTo.apply(a,arguments)},lineTo:function(){var a=this.__ctx;a.lineTo.apply(a,arguments)},quadraticCurveTo:function(){var a=this.__ctx;a.quadraticCurveTo.apply(a,arguments)},bezierCurveTo:function(){var a=this.__ctx;a.bezierCurveTo.apply(a,arguments)},arcTo:function(){var a=this.__ctx;a.arcTo.apply(a,arguments)},rect:function(){var a=this.__ctx;a.rect.apply(a,arguments)},arc:function(){var a=this.__ctx;a.arc.apply(a,arguments)},fill:function(){var a=this.__ctx;a.fill.apply(a,arguments)},stroke:function(){var a=this.__ctx;a.stroke.apply(a,arguments)},clip:function(){var a=this.__ctx;a.clip.apply(a,arguments)},isPointInPath:function(){var a=this.__ctx;a.isPointInPath.apply(a,arguments)},fillText:function(){var a=this.__ctx;a.fillText.apply(a,arguments)},strokeText:function(){var a=this.__ctx;a.strokeText.apply(a,arguments)},measureText:function(){var a=this.__ctx;a.measureText.apply(a,arguments)},drawImage:function(){var a=this.__ctx;a.drawImage.apply(a,arguments)},createImageData:function(){var a=this.__ctx;a.createImageData.apply(a,arguments)},getImageData:function(){var a=this.__ctx;return a.getImageData.apply(a,arguments)},putImageData:function(){var a=this.__ctx;a.putImageData.apply(a,arguments)}});myt.UpdateableUI=new JS.Module("UpdateableUI",{initNode:function(c,a){this.callSuper(c,a);this.updateUI()},updateUI:function(){}});myt.Disableable=new JS.Module("Disableable",{initNode:function(c,a){if(a.disabled===undefined){a.disabled=false}this.callSuper(c,a)},setDisabled:function(a){if(this.disabled!==a){this.disabled=a;if(this.inited){this.fireNewEvent("disabled",a)}this.doDisabled()}},doDisabled:function(){if(this.inited){if(this.disabled&&this.giveAwayFocus){this.giveAwayFocus()}if(this.updateUI){this.updateUI()}}}});new JS.Singleton("GlobalMouse",{include:[myt.DomElementProxy,myt.DomObservable,myt.MouseObservable],initialize:function(){this.setDomElement(document);myt.global.register("mouse",this)}});myt.MouseOver=new JS.Module("MouseOver",{initNode:function(c,a){if(a.mouseOver===undefined){a.mouseOver=false}this.callSuper(c,a);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){if(this.mouseOver!==a){this.mouseOver=a;if(this.inited&&!this.__attachedToOverIdle){this.__attachedToOverIdle=true;this.attachTo(myt.global.idle,"__doMouseOverOnIdle","idle")}}},setDisabled:function(a){if(a&&this.mouseOver){this.setMouseOver(false)}this.callSuper(a)},__doMouseOverOnIdle:function(){this.detachFrom(myt.global.idle,"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=false;var a=this.mouseOver;if(this.__lastOverIdleValue!==a){this.__lastOverIdleValue=a;this.doSmoothMouseOver(a)}},doSmoothMouseOver:function(a){if(this.inited&&this.updateUI){this.updateUI()}},doMouseOver:function(a){if(!this.disabled){this.setMouseOver(true)}},doMouseOut:function(a){if(!this.disabled){this.setMouseOver(false)}}});myt.MouseDown=new JS.Module("MouseDown",{initNode:function(c,a){if(a.mouseDown===undefined){a.mouseDown=false}this.callSuper(c,a);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){if(this.mouseDown!==a){this.mouseDown=a;if(this.inited){if(a&&this.isFocusable()){this.focus(true)}if(this.updateUI){this.updateUI()}}}},setDisabled:function(a){if(a&&this.mouseDown){this.setMouseDown(false)}this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);if(this.mouseDown){this.detachFromDom(myt.global.mouse,"doMouseUp","mouseup",true)}},doMouseOut:function(a){this.callSuper(a);if(!this.disabled&&this.mouseDown){this.attachToDom(myt.global.mouse,"doMouseUp","mouseup",true)}},doMouseDown:function(a){if(!this.disabled){this.setMouseDown(true)}},doMouseUp:function(a){if(!this.mouseOver){this.detachFromDom(myt.global.mouse,"doMouseUp","mouseup",true)}if(!this.disabled&&this.mouseDown){this.setMouseDown(false);if(this.mouseOver){this.doMouseUpInside(a)}}},doMouseUpInside:function(a){if(this.doActivated){this.doActivated()}}});myt.MouseOverAndDown=new JS.Module("MouseOverAndDown",{include:[myt.MouseOver,myt.MouseDown]});myt.Activateable=new JS.Module("Activateable",{doActivated:function(){}});myt.KeyActivation=new JS.Module("KeyActivation",{extend:{DEFAULT_ACTIVATION_KEYS:[13,32]},initNode:function(c,a){this.activateKeyDown=-1;if(a.activationKeys===undefined){a.activationKeys=myt.KeyActivation.DEFAULT_ACTIVATION_KEYS}this.callSuper(c,a);this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyPress","keypress");this.attachToDom(this,"__handleKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=a},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__handleKeyDown:function(d){if(!this.disabled){if(this.activateKeyDown===-1||this.repeatKeyDown){var e=myt.KeyObservable.getKeyCodeFromEvent(d),c=this.activationKeys,a=c.length;while(a){if(e===c[--a]){if(this.activateKeyDown===e){this.doActivationKeyDown(e,true)}else{this.activateKeyDown=e;this.doActivationKeyDown(e,false)}d.value.preventDefault();return}}}}},__handleKeyPress:function(d){if(!this.disabled){var e=myt.KeyObservable.getKeyCodeFromEvent(d);if(this.activateKeyDown===e){var c=this.activationKeys,a=c.length;while(a){if(e===c[--a]){d.value.preventDefault();return}}}}},__handleKeyUp:function(d){if(!this.disabled){var e=myt.KeyObservable.getKeyCodeFromEvent(d);if(this.activateKeyDown===e){var c=this.activationKeys,a=c.length;while(a){if(e===c[--a]){this.activateKeyDown=-1;this.doActivationKeyUp(e);d.value.preventDefault();return}}}}},__doDomBlur:function(a){if(!this.disabled){var c=this.activateKeyDown;if(c!==-1){this.activateKeyDown=-1;this.doActivationKeyAborted(c)}}},doActivationKeyDown:function(c,a){},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:function(a){}});myt.Button=new JS.Module("Button",{include:[myt.Activateable,myt.UpdateableUI,myt.Disableable,myt.MouseOverAndDown,myt.KeyActivation],extend:{DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE:[0,0,7,"#666666"],DEFAULT_DISABLED_OPACITY:0.5},initNode:function(c,a){if(a.focusable===undefined){a.focusable=true}if(a.cursor===undefined){a.cursor="pointer"}this.callSuper(c,a)},setFocused:function(a){var c=this.focused;this.callSuper(a);if(this.inited&&this.focused!==c){this.updateUI()}},doActivationKeyDown:function(c,a){if(!a){this.updateUI()}},doActivationKeyUp:function(a){this.callSuper(a);this.updateUI()},doActivationKeyAborted:function(a){this.callSuper(a);this.updateUI()},updateUI:function(){if(this.disabled){if(this.__restoreCursor==null){this.__restoreCursor=this.cursor}this.setCursor("not-allowed");this.drawDisabledState()}else{var a=this.__restoreCursor;if(a){this.setCursor(a);this.__restoreCursor=null}if(this.activateKeyDown!==-1||this.mouseDown){this.drawActiveState()}else{if(this.focused){this.drawFocusedState()}else{if(this.mouseOver){this.drawHoverState()}else{this.drawReadyState()}}}}},drawDisabledState:function(){},drawFocusedState:function(){this.drawHoverState()},drawHoverState:function(){},drawActiveState:function(){},drawReadyState:function(){},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()}});myt.Color=new JS.Class("Color",{extend:{cleanChannelValue:function(a){a=Math.round(a);if(a>255){return 255}if(a<0){return 0}return a},getRedChannel:function(a){return(16711680&a)>>16},getGreenChannel:function(a){return(65280&a)>>8},getBlueChannel:function(a){return(255&a)},makeColorFromNumber:function(a){return new myt.Color(this.getRedChannel(a),this.getGreenChannel(a),this.getBlueChannel(a))},makeColorFromHexString:function(a){if(a&&a.indexOf("#")===0){return this.makeColorFromNumber(parseInt(a.substring(1),16))}else{return null}},getLighterColor:function(e,d){var c=this.makeColorFromNumber(e),f=this.makeColorFromNumber(d);return c.isLighterThan(f)?e:d},makeColorNumberFromChannels:function(d,c,a){d=this.cleanChannelValue(d);c=this.cleanChannelValue(c);a=this.cleanChannelValue(a);return(d<<16)+(c<<8)+a}},initialize:function(d,c,a){this.setRed(d);this.setGreen(c);this.setBlue(a)},setRed:function(a){this.red=myt.Color.cleanChannelValue(a)},setGreen:function(a){this.green=myt.Color.cleanChannelValue(a)},setBlue:function(a){this.blue=myt.Color.cleanChannelValue(a)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},__toHex:function(a){var c=Number(a).toString(16);return c.length===1?"0"+c:c},getHtmlHexString:function(){return"#"+this.__toHex(this.red)+this.__toHex(this.green)+this.__toHex(this.blue)},isLighterThan:function(d){var a=this.getDiffFrom(d);return 0>(a.red+a.green+a.blue)},getDiffFrom:function(a){return{red:a.red-this.red,green:a.green-this.green,blue:a.blue-this.blue}},applyDiff:function(a){this.setRed(this.red+a.red);this.setGreen(this.green+a.green);this.setBlue(this.blue+a.blue);return this},add:function(a){this.setRed(this.red+a.red);this.setGreen(this.green+a.green);this.setBlue(this.blue+a.blue);return this},subtract:function(a){this.setRed(this.red-a.red);this.setGreen(this.green-a.green);this.setBlue(this.blue-a.blue);return this},multiply:function(a){this.setRed(this.red*a);this.setGreen(this.green*a);this.setBlue(this.blue*a);return this},divide:function(a){this.setRed(this.red/a);this.setGreen(this.green/a);this.setBlue(this.blue/a);return this},clone:function(){return new myt.Color(this.red,this.green,this.blue)}});myt.Path=new JS.Class("Path",{initialize:function(a){this.setVectors(a||[])},setVectors:function(a){this._boundingBox=null;this.vectors=a},copyFrom:function(a){this.vectors=a.vectors.slice();this._boundingBox=null},drawInto:function(c){c.beginPath();var e=this.vectors,a=e.length,d=0;c.moveTo(e[d++],e[d++]);for(;a>d;){c.lineTo(e[d++],e[d++])}c.closePath()},translate:function(c,a){var e=this.vectors,d=e.length;while(d){e[--d]+=a;e[--d]+=c}this._boundingBox=null},rotate:function(e){var k=Math.cos(e),h=Math.sin(e),j=this.vectors,c=j.length,g,d,f=0;for(;c>f;){g=j[f]*k-j[f+1]*h;d=j[f]*h+j[f+1]*k;j[f++]=g;j[f++]=d}this._boundingBox=null},rotateAroundOrigin:function(d,c,a){this.translate(-c,-a);this.rotate(d);this.translate(c,a)},getBoundingBox:function(){if(this._boundingBox){return this._boundingBox}var e=this.vectors,d=e.length,c,j,a,g,h,f;if(d>=2){h=f=e[--d];a=g=e[--d];while(d){j=e[--d];c=e[--d];h=Math.min(j,h);f=Math.max(j,f);a=Math.min(c,a);g=Math.max(c,g)}return this._boundingBox={x:a,y:h,width:g-a,height:f-h}}return this._boundingBox=null},getCenter:function(){var a=this.getBoundingBox();return a?{x:a.x+(a.width-a.x)/2,y:a.y+(a.height-a.y)/2}:null},isPointInPath:function(a,c){if(typeof a==="object"){c=a.y;a=a.x}return myt.Geometry.isPointInPath(a,c,this.getBoundingBox(),this.vectors)}});myt.DrawingUtil={drawRoundedRect:function(f,a,n,g,m,o,k){var c=m+k,p=g+o;f.beginPath();f.moveTo(g,m+a);f.lineTo(g,c-a);f.quadraticCurveTo(g,c,g+a,c);f.lineTo(p-a,c);f.quadraticCurveTo(p,c,p,c-a);f.lineTo(p,m+a);f.quadraticCurveTo(p,m,p-a,m);f.lineTo(g+a,m);f.quadraticCurveTo(g,m,g,m+a);if(n>0){var l=a-n,e=g+n,d=p-n,j=m+n,q=c-n;f.lineTo(e,j+l);f.quadraticCurveTo(e,j,e+l,j);f.lineTo(d-l,j);f.quadraticCurveTo(d,j,d,j+l);f.lineTo(d,q-l);f.quadraticCurveTo(d,q,d-l,q);f.lineTo(e+l,q);f.quadraticCurveTo(e,q,e,q-l);f.lineTo(e,j+l)}f.closePath()},drawRectOutline:function(e,l,f,k,m,j){var a=k+j,n=f+m,d=f+l,c=n-l,g=k+l,o=a-l;e.beginPath();e.moveTo(f,k);e.lineTo(f,a);e.lineTo(n,a);e.lineTo(n,k);e.lineTo(f,k);e.lineTo(d,g);e.lineTo(c,g);e.lineTo(c,o);e.lineTo(d,o);e.lineTo(d,g);e.closePath()},drawPartiallyRoundedRect:function(c,d,n,j,f,e,k,l,g){var a=k+g,m=e+l;c.beginPath();c.moveTo(e,k+d);c.lineTo(e,a-j);if(j>0){c.quadraticCurveTo(e,a,e+j,a)}c.lineTo(m-f,a);if(f>0){c.quadraticCurveTo(m,a,m,a-f)}c.lineTo(m,k+n);if(n>0){c.quadraticCurveTo(m,k,m-n,k)}c.lineTo(e+d,k);if(d>0){c.quadraticCurveTo(e,k,e,k+d)}c.closePath()},drawGradientArc:function(f,m,l,s,j,w,u,o,v){if(v==null){v=60}var q=Math.PI/v,n=Math.PI/360,A=o.length,y=0,x,a,p;for(;A>y+1;y++){x=o[y+1].angle-o[y].angle;a=Math.round(x/q);p=o[y].color.getDiffFrom(o[y+1].color);o[y].colorDelta={red:p.red/a,green:p.green/a,blue:p.blue/a}}var t=new myt.Path([m+s,l,m+j,l]),F,H,h,B,e,D=w;t.rotateAroundOrigin(D,m,l);var k=t.vectors,z=k[0],d=k[1],E=k[2],g=k[3],I=0;y=0;while(u>D){B=z;e=d;H=E;h=g;F=D;D+=q;if(D>u){q+=u-D;n=0;D=u}t.rotateAroundOrigin(q+n,m,l);z=k[0];d=k[1];E=k[2];g=k[3];f.beginPath();f.moveTo(B,e);f.lineTo(H,h);f.lineTo(E,g);f.lineTo(z,d);f.closePath();var G=o[y].color;var C=o[y].colorDelta;f.fillStyle=myt.Color.makeColorNumberFromChannels(G.red+(I*C.red),G.green+(I*C.green),G.blue+(I*C.blue));f.fill();if(n>0){t.rotateAroundOrigin(-n,m,l);z=k[0];d=k[1];E=k[2];g=k[3]}I++;if(D>=o[y+1].angle){I=0;y++}}}};myt.DrawingMethod=new JS.Class("DrawingMethod",{extend:{_drawingMethods:{},get:function(c){var a=this._drawingMethods,e=a[c];if(!e){var d=myt.resolveName(c);if(d){a[c]=e=new d()}}return e},draw:function(d,c,a){var e=this.get(d);if(e){e.draw(c,a)}else{console.log("Unknown DrawingMethod",d)}}},draw:function(c,a){}});myt.DrawButton=new JS.Class("DrawButton",myt.Canvas,{include:[myt.Button],initNode:function(c,a){this.drawBounds={x:0,y:0,w:0,h:0};this.callSuper(c,a)},setDrawingMethodClassname:function(a){if(this.drawingMethodClassname!==a){this.drawingMethodClassname=a;this.setDrawingMethod(myt.DrawingMethod.get(a))}},setDrawingMethod:function(a){if(this.drawingMethod!==a){this.drawingMethod=a;if(this.inited){this.updateUI()}}},getDrawBounds:function(){var a=this.drawBounds;a.w=this.width;a.h=this.height;return a},getDrawConfig:function(a){return{state:a,focused:this.focused,bounds:this.getDrawBounds()}},setWidth:function(a,c){this.callSuper(a,c);if(this.inited){this.redraw()}},setHeight:function(a,c){this.callSuper(a,c);if(this.inited){this.redraw()}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.redraw("disabled")},drawHoverState:function(){this.setOpacity(1);this.redraw("hover")},drawActiveState:function(){this.setOpacity(1);this.redraw("active")},drawReadyState:function(){this.setOpacity(1);this.redraw("ready")},redraw:function(c){if(c===undefined){c=this.__lastState}this.__lastState=c;var a=this.drawingMethod||this;a.draw(this,this.getDrawConfig(c))},draw:function(c,a){myt.dumpStack("No drawing method found")}});myt.SimpleButton=new JS.Class("SimpleButton",myt.View,{include:[myt.Button],initNode:function(c,a){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(c,a)},setActiveColor:function(a){if(this.activeColor!==a){this.activeColor=a;if(this.inited){this.updateUI()}}},setHoverColor:function(a){if(this.hoverColor!==a){this.hoverColor=a;if(this.inited){this.updateUI()}}},setReadyColor:function(a){if(this.readyColor!==a){this.readyColor=a;if(this.inited){this.updateUI()}}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.setBgColor(this.readyColor)},drawHoverState:function(){this.setOpacity(1);this.setBgColor(this.hoverColor)},drawActiveState:function(){this.setOpacity(1);this.setBgColor(this.activeColor)},drawReadyState:function(){this.setOpacity(1);this.setBgColor(this.readyColor)}});myt.IconTextButtonContent=new JS.Module("IconTextButtonContent",{initNode:function(d,a){this.textY=this.iconY="middle";this.iconSpacing=2;this.inset=this.outset=0;if(a.shrinkToFit===undefined){a.shrinkToFit=false}if(a.contentAlign===undefined){a.contentAlign="center"}this.callSuper(d,a);var e=this.iconView,c=this.textView;this.applyConstraint("__updateContentPosition",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",this,"iconSpacing",this,"contentAlign",e,"width",e,"visible",c,"visible",c,"width"])},doAfterAdoption:function(){var c,d=this.iconY,a=this.textY;c={name:"iconView",imageUrl:this.iconUrl};if(typeof d==="string"){c.valign=d}else{c.y=d}new myt.Image(this,c);c={name:"textView",whiteSpace:"nowrap",text:this.text,domClass:"mytButtonText mytUnselectable"};if(typeof a==="string"){c.valign=a}else{c.y=a}new myt.Text(this,c);this.callSuper()},setInset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a)}}},setOutset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a)}}},setText:function(a){if(this.text!==a){this.text=a;if(this.inited){this.textView.setText(a);this.fireNewEvent("text",a)}}},setShrinkToFit:function(a){if(this.shrinkToFit!==a){this.shrinkToFit=a;if(this.inited){this.fireNewEvent("shrinkToFit",a)}}},setContentAlign:function(a){if(this.contentAlign!==a){this.contentAlign=a;if(this.inited){this.fireNewEvent("contentAlign",a)}}},setIconUrl:function(a){if(this.iconUrl!==a){this.iconUrl=a;if(this.inited){this.fireNewEvent("iconUrl",a);this.iconView.setImageUrl(a)}}},setIconY:function(a){if(this.iconY!==a){this.iconY=a;if(this.inited){this.fireNewEvent("iconY",a);if(typeof a==="string"){this.iconView.setValign(a)}else{this.iconView.setY(a)}}}},setIconSpacing:function(a){if(this.iconSpacing!==a){this.iconSpacing=a;if(this.inited){this.fireNewEvent("iconSpacing",a)}}},setTextY:function(a){if(this.textY!==a){this.textY=a;if(this.inited){this.fireNewEvent("textY",a);if(typeof a==="string"){this.textView.setValign(a)}else{this.textView.setValign("");this.textView.setY(a)}}}},__updateContentPosition:function(l){if(this.__updateContentPositionLoopBlock||this.destroyed){return}var n=this.inset,e=this.outset,d=this.iconView,j=this.textView,m=j.visible&&this.text,g=d.visible?d.width:0,k=g+(m&&g>0?this.iconSpacing:0),h=m?j.width:0;if(this.shrinkToFit){var f=n;d.setX(f);f+=k;j.setX(f);f+=h+e;this.__updateContentPositionLoopBlock=true;this.setWidth(f);this.__updateContentPositionLoopBlock=false}else{var c;if(this.contentAlign==="left"){c=n}else{if(this.contentAlign==="center"){var a=this.width-n-k-h-e;c=n+(a/2)}else{c=this.width-k-h-e}}d.setX(c);j.setX(c+k)}}});myt.BaseTooltip=new JS.Class("BaseTooltip",myt.View,{include:[myt.RootView],extend:{DEFAULT_TIP_DELAY:500,DEFAULT_TIP_HIDE_DELAY:100},initNode:function(c,a){var d=myt.BaseTooltip;this.tipDelay=this.nextTipDelay=d.DEFAULT_TIP_DELAY;this.tipHideDelay=d.DEFAULT_TIP_HIDE_DELAY;if(a.visible===undefined){a.visible=false}this.callSuper(c,a);this.__checkTipCallback=new myt.Callback("__checkTip",this);this.__checkTipTimer=new myt.Timer()},setTooltip:function(a){if(this.inited){this.tooltip=a;if(a){this.attachToDom(myt.global.mouse,"__checkMouseMovement","mousemove",true);var c=a.parent;this.attachToDom(c,"hideTip","mousedown",true);this.attachToDom(c,"hideTip","mouseup",true)}}},__checkMouseMovement:function(a){this._lastPos=myt.MouseObservable.getMouseFromEvent(a);if(this.__checkIn()){this.__checkTipTimer.reset(this.__checkTipCallback,this.nextTipDelay)}},__checkTip:function(){if(this.__checkIn()){this.showTip()}},__checkIn:function(){var a=this.tooltip;if(a){var c=this._lastPos;if(a.parent.containsPoint(c.x,c.y)){return true}}this.hideTip();return false},hideTip:function(a){this.__checkTipTimer.clear();var c=this.tooltip.parent;this.detachFromDom(c,"hideTip","mousedown",true);this.detachFromDom(c,"hideTip","mouseup",true);this.detachFromDom(myt.global.mouse,"__checkMouseMovement","mousemove",true);this.nextTipDelay=this.tipDelay;this.setVisible(false);return true},showTip:function(){if(!myt.global.dragManager.dragView){this.nextTipDelay=this.tipHideDelay;this.bringToFront();this.setVisible(true)}}});myt.Tooltip=new JS.Class("Tooltip",myt.BaseTooltip,{extend:{DEFAULT_POINTER_WIDTH:7,DEFAULT_POINTER_HEIGHT:4,DEFAULT_EDGE_WIDTH:1,DEFAULT_POINTER_INSET:2,DEFAULT_HORIZONTAL_INSET:4,DEFAULT_TOP_INSET:2,DEFAULT_BOTTOM_INSET:3,DEFAULT_SHADOW_WIDTH:2,DEFAULT_MAX_TEXT_WIDTH:280,DEFAULT_TIP_BG_COLOR:"#dddddd",DEFAULT_EDGE_COLOR:"#666666",DEFAULT_SHADOW_COLOR:"#000000"},initNode:function(d,c){var a=myt.Tooltip;if(c.pointerWidth===undefined){c.pointerWidth=a.DEFAULT_POINTER_WIDTH}if(c.pointerHeight===undefined){c.pointerHeight=a.DEFAULT_POINTER_HEIGHT}if(c.edgeWidth===undefined){c.edgeWidth=a.DEFAULT_EDGE_WIDTH}if(c.pointerInset===undefined){c.pointerInset=a.DEFAULT_POINTER_INSET}if(c.insetH===undefined){c.insetH=a.DEFAULT_HORIZONTAL_INSET}if(c.insetTop===undefined){c.insetTop=a.DEFAULT_TOP_INSET}if(c.insetBottom===undefined){c.insetBottom=a.DEFAULT_BOTTOM_INSET}if(c.shadowWidth===undefined){c.shadowWidth=a.DEFAULT_SHADOW_WIDTH}if(c.maxTextWidth===undefined){c.maxTextWidth=a.DEFAULT_MAX_TEXT_WIDTH}if(c.tipBgColor===undefined){c.tipBgColor=a.DEFAULT_TIP_BG_COLOR}if(c.edgeColor===undefined){c.edgeColor=a.DEFAULT_EDGE_COLOR}if(c.shadowColor===undefined){c.shadowColor=a.DEFAULT_SHADOW_COLOR}this.__tipWidth=0;this.callSuper(d,c);new myt.Canvas(this,{name:"_bg",percentOfParentWidth:100,percentOfParentHeight:100},[myt.SizeToParent]);new myt.Text(this,{name:"_tipText",fontSize:"12px",x:this.edgeWidth+this.insetH,whiteSpace:"inherit"})},setPointerWidth:function(a){this.pointerWidth=a},setPointerHeight:function(a){this.pointerHeight=a},setEdgeWidth:function(a){this.edgeWidth=a},setPointerInset:function(a){this.pointerInset=a},setInsetH:function(a){this.insetH=a},setInsetTop:function(a){this.insetTop=a},setInsetBottom:function(a){this.insetBottom=a},setShadowWidth:function(a){this.shadowWidth=a},setMaxTextWidth:function(a){this.maxTextWidth=a},setTipBgColor:function(a){this.tipBgColor=a},setEdgeColor:function(a){this.edgeColor=a},setShadowColor:function(a){this.shadowColor=a},showTip:function(){var a=this.tooltip,n=a.text,g=a.parent,f=this._tipText,v=this.insetTop,m=this.shadowWidth;if(f.text!==n){f.setText(n)}var d=myt.global.windowResize,h={x:0,y:0,width:d.getWidth(),height:d.getHeight()},k=0,u=0;var c=g.getPagePosition(),q=c.x,j=c.y;f.setWidth("auto");var r=Math.min(f.measureNoWrapWidth(),this.maxTextWidth),e=f.x;this.__tipWidth=2*e+r;f.setWidth(r);f.sizeViewToDom();if(a.tipalign==="right"){q+=g.width-this.__tipWidth;e+=f.width-this.pointerInset-this.pointerWidth}else{e+=this.pointerInset}var l;if(k>q){l=k-q;q+=l;e-=l}if(q+this.__tipWidth>k+h.width){l=(q+this.__tipWidth)-(k+h.width);q-=l;e+=l}var o=2*this.edgeWidth+v+this.insetBottom+f.height+this.pointerHeight,s=g.height,t,p;switch(a.tipvalign){case"below":p=j+s;t=true;if(p+o>u+h.height){p=j-o;t=false}break;case"above":default:p=j-o;t=false;if(u>p){p=j+s;t=true}break}this.setX(Math.round(q));this.setY(Math.round(p));f.setY(v+this.edgeWidth+(t?this.pointerHeight:0));this.setWidth(this.__tipWidth+m);this.setHeight(o+m);this.__redraw(e,t);this.callSuper()},__redraw:function(a,d){var e=this._bg,o=this.__tipWidth,m=d?this.pointerHeight:0,c=2*this.edgeWidth+this.insetTop+this.insetBottom+this._tipText.height+m,n=this.pointerWidth,g=a+n/2,k=a+n,j=this.pointerHeight,h=this.shadowWidth,l=this.edgeWidth,f=e.lineTo.bind(e);e.clear();e.beginPath();e.moveTo(h,m+h);f(o+h,m+h);f(o+h,c+h);f(h,c+h);e.closePath();e.setGlobalAlpha(0.3);e.setFillStyle(this.shadowColor);e.fill();e.setGlobalAlpha(1);e.beginPath();e.moveTo(0,m);if(d){f(a,m);f(g,m-j);f(k,m)}f(o,m);f(o,c);if(!d){f(k,c);f(g,c+j);f(a,c)}f(0,c);e.closePath();e.setFillStyle(this.edgeColor);e.fill();o-=l;m+=l;c-=l;e.beginPath();e.moveTo(l,m);if(d){f(a,m);f(g,m-j);f(k,m)}f(o,m);f(o,c);if(!d){f(k,c);f(g,c+j);f(a,c)}f(l,c);e.closePath();e.setFillStyle(this.tipBgColor);e.fill()}});myt.TooltipMixin=new JS.Module("TooltipMixin",{extend:{DEFAULT_TIP_CLASS:myt.Tooltip},setTooltip:function(a){if(this.tooltip!==a){this.tooltip=a;if(this.inited){this.fireNewEvent("tooltip",a)}}},setTipAlign:function(a){if(this.tipAlign!==a){this.tipAlign=a;if(this.inited){this.fireNewEvent("tipAlign",a)}}},setTipValign:function(a){if(this.tipValign!==a){this.tipValign=a;if(this.inited){this.fireNewEvent("tipValign",a)}}},setTipClass:function(a){if(this.tipClass!==a){this.tipClass=a;if(this.inited){this.fireNewEvent("tipClass",a)}}},doSmoothMouseOver:function(f){this.callSuper(f);if(f&&this.tooltip){var c=this.tipClass||myt.TooltipMixin.DEFAULT_TIP_CLASS,e=myt.global,a=e.tooltipView;if(a&&!(a instanceof c)){e.unregister("tooltipView");a.destroy();a=null}if(!a){var d=document.getElementById("tooltipDiv");if(!d){d=myt.DomElementProxy.createDomElement("div",{position:"absolute"});myt.getElement().appendChild(d)}a=new c(d,{domId:"tooltipDiv"});e.register("tooltipView",a)}a.setTooltip({parent:this,text:this.tooltip,tipalign:this.tipAlign||"left",tipvalign:this.tipValign||"above"})}}});myt.SimpleIconTextButton=new JS.Class("SimpleIconTextButton",myt.SimpleButton,{include:[myt.IconTextButtonContent,myt.TooltipMixin]});myt.BaseMouseablePanel=new JS.Module("BaseMouseablePanel",{include:[myt.Button],initNode:function(c,a){this.extension="png";if(a.repeat===undefined){a.repeat=false}this.callSuper(c,a)},setImageRoot:function(a){if(this.imageRoot!==a){this.imageRoot=a;if(this.inited){updateUI()}}},setExtension:function(a){if(this.extension!==a){this.extension=a;if(this.inited){updateUI()}}},setFirstPrefix:function(a){if(this.firstPrefix!==a){this.firstPrefix=a;if(this.inited){updateUI()}}},setSecondPrefix:function(a){if(this.secondPrefix!==a){this.secondPrefix=a;if(this.inited){updateUI()}}},setThirdPrefix:function(a){if(this.thirdPrefix!==a){this.thirdPrefix=a;if(this.inited){updateUI()}}},drawDisabledState:function(){this.setOpacity(myt.Button.DEFAULT_DISABLED_OPACITY);this.__updateImageUrls("up")},drawHoverState:function(){this.setOpacity(1);this.__updateImageUrls("mo")},drawActiveState:function(){this.setOpacity(1);this.__updateImageUrls("dn")},drawReadyState:function(){this.setOpacity(1);this.__updateImageUrls("up")},__updateImageUrls:function(d){var c="_"+d+"."+this.extension,a=this.imageRoot;this.first.setImageUrl(a+this.firstPrefix+c);this.second.setImageUrl(a+this.secondPrefix+c);this.third.setImageUrl(a+this.thirdPrefix+c)}});myt.HorizontalThreePanel=new JS.Module("HorizontalThreePanel",{initNode:function(c,a){this.repeat=true;this.callSuper(c,a)},doBeforeAdoption:function(){this.callSuper();var a=myt;new a.Image(this,{name:"first",imageUrl:this.firstImageUrl,ignoreLayout:true});var c=new a.Image(this,{name:"second",layoutHint:1,imageUrl:this.secondImageUrl,ignoreLayout:true,useNaturalSize:false,calculateNaturalSize:true});this.attachTo(c,"__updateSize","naturalHeight");this.attachTo(c,"__updateImageSize","width");new a.Image(this,{name:"third",imageUrl:this.thirdImageUrl,ignoreLayout:true});var d=[a.ThreePanel.IGNORE_FUNCTION_MIXIN];new a.ResizeLayout(this,{name:"resizeLayout"},d);new a.SizeToChildren(this,{axis:"y"},d);this.__updateRepeat();this.__updateSize()},setFirstImageUrl:function(a){if(this.firstImageUrl!==a){this.firstImageUrl=a;if(this.inited){this.first.setImageUrl(a)}}},setSecondImageUrl:function(a){if(this.secondImageUrl!==a){this.secondImageUrl=a;if(this.inited){this.second.setImageUrl(a)}}},setThirdImageUrl:function(a){if(this.thirdImageUrl!==a){this.thirdImageUrl=a;if(this.inited){this.third.setImageUrl(a)}}},setRepeat:function(a){if(this.repeat!==a){this.repeat=a;if(this.inited){this.fireNewEvent("repeat",a);this.__updateRepeat()}}},__updateSize:function(c){var a=this.second;a.setHeight(a.naturalHeight);this.__updateImageSize()},__updateImageSize:function(c){var a=this.second;a.setImageSize(this.repeat?undefined:a.width+"px "+a.height+"px")},__updateRepeat:function(){this.second.setImageRepeat(this.repeat?"repeat-x":"no-repeat")}});myt.MouseableH3Panel=new JS.Module("MouseableH3Panel",{include:[myt.BaseMouseablePanel,myt.HorizontalThreePanel],initNode:function(c,a){this.firstPrefix="lft";this.secondPrefix="ctr";this.thirdPrefix="rt";this.callSuper(c,a)}});myt.PanelButton=new JS.Class("PanelButton",myt.View,{include:[myt.MouseableH3Panel],initNode:function(c,a){this.imageRoot=myt.IMAGE_ROOT+"component/panelbutton/rsrc/";this.callSuper(c,a)}});myt.IconTextPanelButton=new JS.Class("IconTextPanelButton",myt.PanelButton,{include:[myt.IconTextButtonContent,myt.TooltipMixin],doAfterAdoption:function(){this.syncTo(this.first,"setInset","width");this.syncTo(this.third,"setOutset","width");this.callSuper()}});myt.DelayedMethodCall=new JS.Class("DelayedMethodCall",{extend:{createDelayedMethodCall:function(k,d,h){var j=myt.AccessorSupport.generateName,a=j("delayed",h),c=j("timer",h),g=j("callback",h),e=typeof k==="function"||k instanceof JS.Module;if((e?k.instanceMethod(a):k[a])!==undefined){console.warn("Can't clobber existing property during setup of delayed method function.",a,k);return false}if((e?k.instanceMethod(c):k[c])!==undefined){console.warn("Can't clobber existing property during setup of delayed method timer reference.",c,k);return false}if((e?k.instanceMethod(g):k[g])!==undefined){console.warn("Can't clobber existing property during setup of delayed method callback reference.",g,k);return false}var f={};f[a]=function(){var m=this[g];if(!m){m=this[g]=new myt.Callback(h,this)}var l=this[c];if(l){l.reset(m,d)}else{this[c]=new myt.Timer(m,d)}};if(e){k.include(f)}else{k.extend(f)}return true}}});myt.DelayedMethodCall.createDelayedMethodCall(myt.DelayedMethodCall,0,"execute");myt.FloatingPanel=new JS.Class("FloatingPanel",myt.View,{include:[myt.RootView],initNode:function(c,a){var d=document.createElement("div");d.style.position="absolute";myt.getElement().appendChild(d);this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=true;a.visible=a.focusEmbellishment=false;a.focusable=a.focusCage=true;this.callSuper(d,a)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=a},__doMouseDown:function(e){var a=e.value,d=a.pageX,c=a.pageY;if(!this.containsPoint(d,c)&&(this.ignoreOwnerForHideOnMouseDown?!this.owner.containsPoint(d,c):true)){this.doMouseDownOutside()}return true},doMouseDownOutside:function(){if(this.hideOnMouseDown){this.hide()}},focus:function(d){var a=myt.global.focus;if(this.owner&&this.isAncestorOf(a.focusedView)){this.owner[a.lastTraversalWasForward?"getNextFocusAfterPanel":"getPrevFocusAfterPanel"](this.panelId).focus(d)}else{var c=this.getFirstFocusableDescendant();if(c===this){this.callSuper(d)}else{c.focus(d)}}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(c){var a=c.value;if(a&&!this.isAncestorOf(a)){this.doLostFocus()}},doLostFocus:function(){if(this.hideOnBlur){if(this.ignoreOwnerForHideOnBlur&&myt.global.focus.focusedView===this.owner){return}this.hide(true)}},isShown:function(){return this.visible},show:function(c){if(!this.isShown()){this.bringToFront();this.updateLocation(c);this.setVisible(true);this.owner.notifyPanelShown(this);var a=myt.global;this.attachToDom(a.mouse,"__doMouseDown","mousedown",true);this.attachTo(a.focus,"__doFocusChange","focused")}},hide:function(c){if(this.isShown()){var a=myt.global;this.detachFromDom(a.mouse,"__doMouseDown","mousedown",true);this.detachFrom(a.focus,"__doFocusChange","focused");this.setVisible(false);this.owner.notifyPanelHidden(this);if(!c){this.restoreFocus()}this.setOwner()}},restoreFocus:function(){if(this.owner){this.owner.focus()}},updateLocation:function(g){this.setOwner(g);var e=this.panelId,j=g.getFloatingAlignForPanelId(e),d=g.getFloatingValignForPanelId(e),c=g.getPagePosition(),a=0,h=0,f=typeof j;if(f==="string"){a=c.x+g.getFloatingAlignOffsetForPanelId(e);switch(j){case"outsideRight":a+=g.width;break;case"insideRight":a+=g.width-this.width;break;case"outsideLeft":a-=this.width;break;case"insideLeft":break;default:console.warn("Unexpected align value",f,j)}}else{if(f==="number"){a=j}else{console.warn("Unexpected align type",f,j)}}this.setX(a);f=typeof d;if(f==="string"){h=c.y+g.getFloatingValignOffsetForPanelId(e);switch(d){case"outsideBottom":h+=g.height;break;case"insideBottom":h+=g.height-this.height;break;case"outsideTop":h-=this.height;break;case"insideTop":break;default:console.warn("Unexpected valign value",f,d)}}else{if(f==="number"){h=d}else{console.warn("Unexpected valign type",f,d)}}this.setY(h)}});myt.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{classesByPanelId:{},panelsByPanelId:{}},initNode:function(c,a){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(c,a)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=a},setFloatingAlign:function(a){if(this.floatingAlign!==a){this.floatingAlign=a;if(this.inited){this.fireNewEvent("floatingAlign",a)}}},setFloatingValign:function(a){if(this.floatingValign!==a){this.floatingValign=a;if(this.inited){this.fireNewEvent("floatingValign",a)}}},setFloatingAlignOffset:function(a){if(this.floatingAlignOffset!==a){this.floatingAlignOffset=a;if(this.inited){this.fireNewEvent("floatingAlignOffset",a)}}},setFloatingValignOffset:function(a){if(this.floatingValignOffset!==a){this.floatingValignOffset=a;if(this.inited){this.fireNewEvent("floatingValignOffset",a)}}},createFloatingPanel:function(d,a,e){d=d||this.floatingPanelId;var c=myt.FloatingPanelAnchor;a=a||c.classesByPanelId[d];if(!a){console.log("No panel class found for panelId:",d);return null}e=e||{};e.panelId=d;return c.panelsByPanelId[d]=new a(null,e)},getFloatingPanel:function(a){return myt.FloatingPanelAnchor.panelsByPanelId[a||this.floatingPanelId]},toggleFloatingPanel:function(c){c=c||this.floatingPanelId;var a=this.getFloatingPanel(c);if(a&&a.isShown()){this.hideFloatingPanel(c)}else{this.showFloatingPanel(c)}},showFloatingPanel:function(c){var a=this.getFloatingPanel(c||this.floatingPanelId);if(a){a.show(this);this.setLastFloatingPanelShown(a)}},hideFloatingPanel:function(c){var a=this.getFloatingPanel(c||this.floatingPanelId);if(a){a.hide();this.setLastFloatingPanelShown()}},notifyPanelShown:function(a){},notifyPanelHidden:function(a){},getFloatingAlignForPanelId:function(a){return this.floatingAlign},getFloatingValignForPanelId:function(a){return this.floatingValign},getFloatingAlignOffsetForPanelId:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanelId:function(a){return this.floatingValignOffset},getNextFocus:function(){var a=this.lastFloatingPanelShown;if(a&&a.isShown()){return a}return this.callSuper?this.callSuper():null},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});myt.ListViewItemMixin=new JS.Module("ListViewItemMixin",{setListView:function(a){this.listView=a},getMinimumWidth:function(){return 0}});myt.ListViewItem=new JS.Class("ListViewItem",myt.SimpleIconTextButton,{include:[myt.ListViewItemMixin],initNode:function(c,a){if(a.height===undefined){a.height=24}if(a.activeColor===undefined){a.activeColor="#bbbbbb"}if(a.hoverColor===undefined){a.hoverColor="#ffffff"}if(a.readyColor===undefined){a.readyColor="#eeeeee"}if(a.contentAlign===undefined){a.contentAlign="left"}if(a.inset===undefined){a.inset=8}if(a.outset===undefined){a.outset=8}if(a.activationKeys===undefined){a.activationKeys=[13,27,32,37,38,39,40]}this.callSuper(c,a)},getMinimumWidth:function(){var e=this.iconView,c=this.textView,d=c.visible&&this.text,g=e.visible?e.width:0,a=g+(d&&g>0?this.iconSpacing:0),f=d?Math.ceil(c.width):0;return this.inset+a+f+this.outset},doActivated:function(){this.listView.doItemActivated(this)},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},doActivationKeyDown:function(c,a){switch(c){case 27:this.listView.owner.hideFloatingPanel();return;case 37:case 38:myt.global.focus.prev();break;case 39:case 40:myt.global.focus.next();break}this.callSuper(c,a)}});myt.ListViewSeparator=new JS.Class("ListViewSeparator",myt.View,{include:[myt.ListViewItemMixin],initNode:function(c,a){if(a.height===undefined){a.height=1}if(a.bgColor===undefined){a.bgColor="#666666"}this.callSuper(c,a)},getMinimumWidth:function(){return 0}});myt.ListView=new JS.Class("ListView",myt.FloatingPanel,{initNode:function(c,a){this.items=[];this.maxHeight=-1;this.minWidth=0;if(a.defaultItemClass===undefined){a.defaultItemClass=myt.ListViewItem}if(a.overflow===undefined){a.overflow="auto"}if(a.bgColor===undefined){a.bgColor="#cccccc"}if(a.boxShadow===undefined){a.boxShadow=myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE}this.callSuper(c,a);this.__updateItems();new myt.SpacedLayout(this.getContentView(),{axis:"y",spacing:1,collapseParent:true})},setMinWidth:function(a){this.minWidth=a},setDefaultItemClass:function(a){this.defaultItemClass=a},setItemConfig:function(a){this.itemConfig=a;if(this.inited){this.__updateItems()}},getContentView:function(a){return this},setMaxHeight:function(a){if(this.maxHeight!==a){this.maxHeight=a;if(this.inited){this.fireNewEvent("maxHeight",a);this.setHeight(this.height)}}},setHeight:function(a,c){if(this.maxHeight>=0){a=Math.min(this.maxHeight,a)}this.callSuper(a,c)},doItemActivated:function(c){var a=this.owner;if(a){a.doItemActivated(c)}},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()||this.callSuper()},getFirstFocusableItem:function(){var c=this.items,e,a=c.length,d=0;for(;a>d;++d){e=c[d];if(e.isFocusable()){return e}}return null},getLastFocusableItem:function(){var a=this.items,d,c=a.length;while(c){d=a[--c];if(d.isFocusable()){return d}}return null},__updateItems:function(){var m=this.itemConfig||[],g=m.length,j,d,o,n=this.items,e=n.length,r,h=this.defaultItemClass,q=this.getContentView(),p=q.getLayouts(),l,f=p.length,k,c,a=this.minWidth;k=f;while(k){p[--k].incrementLockedCounter()}for(k=0;g>k;++k){j=m[k];d=j.klass||h;o=j.attrs||{};r=n[k];if(r&&!r.isA(d)){r.destroy();r=null}if(!r){r=n[k]=new d(q,{listView:this})}if(r){r.callSetters(o);c=r.getMinimumWidth();if(c>a){a=c}}}for(;e>k;++k){n[k].destroy()}n.length=g;for(k=0;g>k;++k){n[k].setWidth(a)}q.setWidth(a);k=f;while(k){l=p[--k];l.decrementLockedCounter();l.update()}}});myt.ListViewAnchor=new JS.Module("ListViewAnchor",{include:[myt.FloatingPanelAnchor],initNode:function(c,a){if(a.listViewClass===undefined){a.listViewClass=myt.ListView}if(a.listViewAttrs===undefined){a.listViewAttrs={}}if(a.itemConfig===undefined){a.itemConfig=[]}if(a.activationKeys===undefined){a.activationKeys=[13,27,32,37,38,39,40]}this.callSuper(c,a)},setListViewClass:function(a){this.listViewClass=a},setListViewAttrs:function(a){this.listViewAttrs=a},setItemConfig:function(a){this.itemConfig=a},doItemActivated:function(a){this.hideFloatingPanel()},getFloatingPanel:function(a){return this.callSuper(a)||this.createFloatingPanel(a,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(c){var a=this.getFloatingPanel(c);if(a){a.setItemConfig(this.itemConfig);this.callSuper(c)}},doActivationKeyDown:function(c,a){if(c===27){this.hideFloatingPanel();return}switch(c){case 37:case 38:this.selectLastItem();break;case 39:case 40:this.selectFirstItem();break}this.callSuper(c,a)},doActivationKeyUp:function(a){if(a===27){return}this.callSuper(a);switch(a){case 37:case 38:this.selectLastItem();break;case 39:case 40:this.selectFirstItem();break}},selectLastItem:function(){var a=this.getFloatingPanel();if(a&&a.isShown()){var c=a.getLastFocusableItem();if(c){c.focus()}}},selectFirstItem:function(){var a=this.getFloatingPanel();if(a&&a.isShown()){var c=a.getFirstFocusableItem();if(c){c.focus()}}}});myt.CheckboxStyleMixin=new JS.Module("CheckboxStyleMixin",{extend:{DEFAULT_PAD_X:3,DEFAULT_PAD_Y:4,DEFAULT_WIDTH:14,DEFAULT_HEIGHT:14,DEFAULT_FILL_COLOR_CHECKED:"#666666",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#cccccc",DEFAULT_FILL_COLOR_READY:"#ffffff",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5},initNode:function(c,a){if(a.width===undefined){a.width=this.getIconExtentX()}if(a.height===undefined){a.height=this.getIconExtentY()}if(a.focusEmbellishment===undefined){a.focusEmbellishment=false}var d=myt.CheckboxStyleMixin;if(a.fillColorChecked===undefined){a.fillColorChecked=d.DEFAULT_FILL_COLOR_CHECKED}if(a.fillColorHover===undefined){a.fillColorHover=d.DEFAULT_FILL_COLOR_HOVER}if(a.fillColorActive===undefined){a.fillColorActive=d.DEFAULT_FILL_COLOR_ACTIVE}if(a.fillColorReady===undefined){a.fillColorReady=d.DEFAULT_FILL_COLOR_READY}if(a.edgeColor===undefined){a.edgeColor=d.DEFAULT_EDGE_COLOR}if(a.edgeSize===undefined){a.edgeSize=d.DEFAULT_EDGE_SIZE}this.callSuper(c,a)},setFillColorChecked:function(a){this.fillColorChecked=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},getDrawBounds:function(){var a=this.drawBounds,c=myt.CheckboxStyleMixin;a.x=c.DEFAULT_PAD_X;a.y=c.DEFAULT_PAD_Y;a.w=c.DEFAULT_WIDTH;a.h=c.DEFAULT_HEIGHT;return a},getDrawConfig:function(c){var a=this.callSuper(c);a.checkedColor=this.fillColorChecked;a.edgeColor=this.edgeColor;a.edgeSize=this.edgeSize;switch(c){case"hover":a.fillColor=this.fillColorHover;break;case"active":a.fillColor=this.fillColorActive;break;case"disabled":case"ready":a.fillColor=this.fillColorReady;break;default:}return a},getIconExtentX:function(){var a=myt.CheckboxStyleMixin;return a.DEFAULT_WIDTH+2*a.DEFAULT_PAD_X},getIconExtentY:function(){var a=myt.CheckboxStyleMixin;return a.DEFAULT_HEIGHT+2*a.DEFAULT_PAD_Y}});myt.ValueComponent=new JS.Module("ValueComponent",{initNode:function(c,a){this.callSuper(c,a);if(this.valueFilter){this.setValue(this.value)}},setValueFilter:function(a){this.valueFilter=a;if(this.inited&&a){this.setValue(this.value)}},setValue:function(a){if(this.valueFilter){a=this.valueFilter(a)}if(this.value!==a){this.value=a;if(this.inited){this.fireNewEvent("value",this.getValue())}}},getValue:function(){return this.value},chainValueFilter:function(e,d){var a=this.valueFilter,c=e;if(a){if(d==="last"){c=function(f){return e(a(f))}}else{if(d==="first"||d===undefined){c=function(f){return a(e(f))}}}}this.setValueFilter(c)}});myt.CheckboxDrawingMethod=new JS.Class("CheckboxDrawingMethod",myt.DrawingMethod,{initialize:function(){this.__getTemplate=myt.memoize(this.__getTemplate)},draw:function(c,a){c.clear();c.drawImage(this.__getTemplate(a),0,0)},__getTemplate:function(G){var z=myt,F=G.bounds,n=F.x,j=F.y,o=F.w,D=F.h,p=G.shadowBlur==null?2:G.shadowBlur,v=G.shadowOffsetX==null?0:G.shadowOffsetX,t=G.shadowOffsetY==null?1:G.shadowOffsetY,d=G.radius==null?4:G.radius,r=G.shadowColor==null?"rgba(0, 0, 0, 0.3)":G.shadowColor,C=G.focusedShadowColor==null?"rgba(0, 0, 0, 0.5)":G.focusedShadowColor,e=G.fillColor,k=G.focused,A=G.edgeSize,E=n+A,a=j+A,l=o-2*A,g=D-2*A,B=(z.Color.makeColorFromHexString(e)).multiply(5/6),f=z.DrawingUtil;var c=new z.Canvas(z.global.roots.getRoots()[0],{width:n+o+v+p,height:j+D+t+p,visible:false,ignoreLayout:true,ignorePlacement:true});var u=c.createLinearGradient(E,a,E,a+g);c.save();c.setShadowOffsetX(v);c.setShadowOffsetY(t);c.setShadowBlur(p*(k?2:1));c.setShadowColor(k?C:r);f.drawRoundedRect(c,d,0,n,j,o,D);c.setFillStyle(G.edgeColor);c.fill();c.restore();f.drawRoundedRect(c,d-A,0,E,a,l,g);u.addColorStop(0,e);u.addColorStop(1,B.getHtmlHexString());c.setFillStyle(u);c.fill();if(G.checked){var s=new z.Path([E+2,a+1/2*g,E+1/2*l,a+g-2,n+o+3,j,E+1/2*l,a+g-6,E+5,a+1/2*g-2]);s.drawInto(c);c.setFillStyle(G.checkedColor);c.fill()}var q=c.__canvas;c.destroy();return q}});myt.CheckboxMixin=new JS.Module("CheckboxMixin",{include:[myt.ValueComponent,myt.CheckboxStyleMixin],initNode:function(c,a){if(a.value===undefined){a.value=false}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.CheckboxDrawingMethod"}this.callSuper(c,a)},setValue:function(a){if(this.value!==a){this.callSuper(a);if(this.inited){this.redraw()}}},getDrawConfig:function(c){var a=this.callSuper(c);a.checked=this.value;return a},doActivated:function(){this.setValue(!this.value)}});myt.Checkbox=new JS.Class("Checkbox",myt.DrawButton,{include:[myt.CheckboxMixin]});myt.TextButtonContent=new JS.Module("TextButtonContent",{initNode:function(d,a){this.inset=this.outset=0;if(a.shrinkToFit===undefined){a.shrinkToFit=false}this.textY=a.shrinkToFit?"middle":0;this.callSuper(d,a);var c=this.textView;this.applyConstraint("__updateContentPosition",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",c,"visible",c,"width",c,"height",c,"y"])},doAfterAdoption:function(){var a=this.textY,c={name:"textView",whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"mytButtonText mytUnselectable"};if(typeof a==="string"){c.valign=a}else{c.y=a}new myt.Text(this,c);this.__origHeight=this.height;this.callSuper()},setInset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a)}}},setOutset:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.outset!==a){this.outset=a;if(this.inited){this.fireNewEvent("outset",a)}}},setText:function(a){if(this.text!==a){this.text=a;if(this.inited){this.textView.setText(a);this.fireNewEvent("text",a)}}},setShrinkToFit:function(a){if(this.shrinkToFit!==a){this.shrinkToFit=a;if(this.inited){if(this.textView){this.textView.setWhiteSpace(a?"nowrap":"normal")}this.fireNewEvent("shrinkToFit",a)}}},setTextY:function(a){if(this.textY!==a){this.textY=a;if(this.inited){this.fireNewEvent("textY",a);if(typeof a==="string"){this.textView.setValign(a)}else{this.textView.setValign("");this.textView.setY(a)}}}},__updateContentPosition:function(d){if(this.__updateContentPositionLoopBlock||this.destroyed){return}var c=this.inset,a=this.outset,e=this.textView,f=e.visible&&this.text;if(this.shrinkToFit){e.setX(c);this.__updateContentPositionLoopBlock=true;this.setWidth(c+(f?e.width:0)+a);this.__updateContentPositionLoopBlock=false;this.setHeight(this.__origHeight)}else{e.setHeight("auto");e.setWidth(this.width-c-a);e.setX(c);this.__updateContentPositionLoopBlock=true;this.setHeight(f?e.y+e.height:this.__origHeight);this.__updateContentPositionLoopBlock=false}}});myt.TextCheckbox=new JS.Class("TextCheckbox",myt.Checkbox,{include:[myt.TextButtonContent,myt.TooltipMixin],extend:{DEFAULT_PAD_X:2,DEFAULT_MULTILINE_PAD_Y:4,},doAfterAdoption:function(){var a=myt.TextCheckbox,c=a.DEFAULT_PAD_X;this.setInset(this.getIconExtentX()+c);this.setOutset(c);if(!this.shrinkToFit){this.setTextY(a.DEFAULT_MULTILINE_PAD_Y)}this.callSuper()}});myt.RadioDrawingMethod=new JS.Class("RadioDrawingMethod",myt.DrawingMethod,{initialize:function(){this.__getTemplate=myt.memoize(this.__getTemplate)},draw:function(c,a){c.clear();c.drawImage(this.__getTemplate(a),0,0)},__getTemplate:function(E){var v=myt,D=E.bounds,n=D.x,k=D.y,o=D.w,C=D.h,p=E.shadowBlur==null?2:E.shadowBlur,u=E.shadowOffsetX==null?0:E.shadowOffsetX,s=E.shadowOffsetY==null?1:E.shadowOffsetY,r=E.shadowColor==null?"rgba(0, 0, 0, 0.3)":E.shadowColor,B=E.focusedShadowColor==null?"rgba(0, 0, 0, 0.5)":E.focusedShadowColor,f=E.fillColor,l=E.focused,z=E.edgeSize,e=o/2,a=e-z,d=(a/2)-1,j=n+e,g=k+e,A=(v.Color.makeColorFromHexString(f)).multiply(5/6);var c=new v.Canvas(v.global.roots.getRoots()[0],{width:n+o+u+p,height:k+C+s+p,visible:false,ignoreLayout:true,ignorePlacement:true});var t=c.createLinearGradient(n,k,n,k+o);c.save();c.setShadowOffsetX(u);c.setShadowOffsetY(s);c.setShadowBlur(p*(l?2:1));c.setShadowColor(l?B:r);c.beginPath();c.circle(j,g,e);c.closePath();c.setFillStyle(E.edgeColor);c.fill();c.restore();c.beginPath();c.circle(j,g,a);c.closePath();t.addColorStop(0,f);t.addColorStop(1,A.getHtmlHexString());c.setFillStyle(t);c.fill();if(E.checked){c.beginPath();c.circle(j,g,d);c.closePath();c.setFillStyle(E.checkedColor);c.fill()}var q=c.__canvas;c.destroy();return q}});myt.BAGMembership=new JS.Module("BAGMembership",{initNode:function(c,a){this.__bags=[];this.callSuper(c,a)},destroyAfterOrphaning:function(){this.callSuper();var a=this.__bags,c=a.length,d;while(c){d=a[--c];this.removeFromBAG(d.attrName,d.groupId)}},isRegisteredWithBAG:function(d){var a=this.__bags,c=a.length;while(c){if(a[--c]===d){return true}}return false},getBAG:function(c,a){return myt.BAG.getGroup(c,a)},addToBAG:function(c,a){var d=this.getBAG(c,a);if(!this.isRegisteredWithBAG(d)){this.__bags.push(d);d.register(this);if(!this.isAttachedTo(this,"__updateForBAG",c)){this.attachTo(this,"__updateForBAG",c)}}},removeFromBAG:function(e,d){var j=this.getBAG(e,d);if(this.isRegisteredWithBAG(j)){var a=this.__bags,c=a.length,f,h=true;while(c){f=a[--c];if(f===j){a.splice(c,1);j.unregister(this)}else{if(f.attrName===e){h=false}}}if(h){this.detachFrom(this,"__updateForBAG",e)}}},__updateForBAG:function(e){var d=e.type,f=e.value,a=this.__bags,c=a.length,g;while(c){g=a[--c];if(g.attrName===d){if(f){g.setTrue(this)}else{g.setFalse(this)}}}}});myt.BAG=new JS.Class("BAG",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable],extend:{__groups:{},generateUniqueGroupId:function(){return myt.generateGuid()},createGroup:function(a){return new BAG(a,this.generateUniqueGroupId())},getGroup:function(d,c){if(d&&c){var a=this.__groups,e=a[d]||(a[d]={});return e[c]||(e[c]=new myt.BAG(d,c))}return null},removeGroup:function(d,c){if(d&&c){var a=this.__groups;if(a){var f=a[d];if(f){var e=f[c];if(e){delete f[c]}return e}}}return null}},initialize:function(c,a){this.__nodes=[];this.trueNode=null;this.attrName=c;this.groupId=a},destroy:function(){if(this.trueNode){this.setTrueNode(null)}if(this.__nodes.length===0){myt.BAG.removeGroup(this.attrName,this.groupId)}this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(a){if(this.groupId!==a){this.groupId=a;this.fireNewEvent("groupId",a)}},setAttrName:function(a){if(this.attrName!==a){this.attrName=a;this.fireNewEvent("attrName",a)}},setTrueNode:function(a){if(this.trueNode!==a){this.trueNode=a;this.fireNewEvent("trueNode",a)}},getNodes:function(){return this.__nodes},register:function(a){if(a&&!this.isRegistered(a)){this.__nodes.push(a);if(a[this.attrName]){this.setTrue(a)}}},unregister:function(d){if(d){var a=this.__nodes,c=a.length;while(c){if(d===a[--c]){a.splice(c,1);break}}if(this.trueNode===d){this.setTrueNode(null)}if(a.length===0){this.destroy()}}},setTrue:function(f){if(f&&this.trueNode!==f&&this.isRegistered(f)){var e=this.attrName,c=myt.AccessorSupport.generateSetterName(e),a=this.__nodes,d=a.length,g;this.setTrueNode(f);while(d){g=a[--d];if(f===g){if(!g[e]){g[c](true)}}else{if(g[e]){g[c](false)}}}}},setFalse:function(c){if(c&&this.trueNode===c){var a=myt.AccessorSupport.generateSetterName(this.attrName);c[a](false);this.setTrueNode(null)}},isRegistered:function(d){var a=this.__nodes,c=a.length;while(c){if(d===a[--c]){return true}}return false}});myt.RadioMixin=new JS.Module("RadioMixin",{include:[myt.BAGMembership,myt.CheckboxStyleMixin],initNode:function(c,a){if(a.selected===undefined){a.selected=false}if(a.groupId===undefined){a.groupId=myt.generateGuid()}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.RadioDrawingMethod"}this.callSuper(c,a);if(this.__initValue!==undefined){this.__updateGroupValue(this.__initValue);delete this.__initValue}if(this.selected){var d=this.__getBAG();if(d){d.setTrue(this)}}},setOptionValue:function(a){if(this.optionValue!==a){this.optionValue=a;if(this.inited){this.fireNewEvent("optionValue",a)}}},setValue:function(a){if(this.inited){this.__updateGroupValue(a)}else{this.__initValue=a}},getValue:function(){var c=this.__getBAG(),a=c?c.trueNode:null;return a?a.optionValue:null},setSelected:function(a){if(this.selected!==a){this.selected=a;if(this.inited){this.fireNewEvent("selected",a);this.redraw()}}},setGroupId:function(a){if(this.groupId!==a){var c=this.groupId;this.groupId=a;if(c){this.removeFromBAG("selected",c)}if(a){this.addToBAG("selected",a)}if(this.inited){this.fireNewEvent("groupId",a)}}},getDrawConfig:function(c){var a=this.callSuper(c);a.checked=this.selected;return a},doActivated:function(){if(!this.selected){this.setValue(this.optionValue)}},__getBAG:function(){return this.getBAG("selected",this.groupId)},__updateGroupValue:function(c){var f=this.__getBAG();if(f){var a=f.getNodes(),d=a.length,e;while(d){e=a[--d];if(e.optionValue===c){f.setTrue(e);break}}}}});myt.Radio=new JS.Class("Radio",myt.DrawButton,{include:[myt.RadioMixin]});myt.TextRadio=new JS.Class("TextRadio",myt.Radio,{include:[myt.TextButtonContent,myt.TooltipMixin],doAfterAdoption:function(){var a=myt.TextCheckbox,c=a.DEFAULT_PAD_X;this.setInset(this.getIconExtentX()+c);this.setOutset(c);if(!this.shrinkToFit){this.setTextY(a.DEFAULT_MULTILINE_PAD_Y)}this.callSuper()}});myt.TabSliderDrawingMethod=new JS.Class("TabSliderDrawingMethod",myt.DrawingMethod,{draw:function(a,c){var g=c.bounds,j=g.x,f=g.y,k=g.w,d=g.h;a.clear();if(k==0||d==0){return}var l=c.edgeSize,e=2*l;if(l>0){a.beginPath();a.rect(j,f,k,d);a.closePath();a.setFillStyle(c.edgeColor);a.fill()}a.beginPath();a.rect(j+l,f+l,k-e,d-e);a.closePath();a.setFillStyle(c.fillColor);a.fill()}});myt.Selectable=new JS.Module("Selectable",{setSelected:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.selected!==a){this.selected=a;if(this.inited&&this.fireNewEvent){this.fireNewEvent("selected",a)}}},isSelected:function(){return this.selected?true:false},canSelect:function(a){return true},canDeselect:function(a){return true}});myt.SelectionManager=new JS.Module("SelectionManager",{extend:{isAddMode:function(){return myt.global.keys.isShiftKeyDown()},isToggleMode:function(){var a=myt.global.keys;return a.isControlKeyDown()||a.isCommandKeyDown()}},initNode:function(c,a){this.__selected={};this.__lastSelectedItem=null;a.selectedCount=0;if(a.itemSelectionId===undefined){a.itemSelectionId="id"}if(a.maxSelected===undefined){a.maxSelected=-1}this.callSuper(c,a)},setItemSelectionId:function(a){this.itemSelectionId=a},setMaxSelected:function(a){this.maxSelected=a},setSelectedCount:function(a){if(this.selectedCount!==a){this.selectedCount=a;if(this.inited){this.fireNewEvent("selectedCount",a)}}},isAddMode:function(){return myt.SelectionManager.isAddMode()},isToggleMode:function(){return myt.SelectionManager.isToggleMode()},getSelected:function(){var a=[],c=this.__selected,d;for(d in c){a.push(c[d])}return a},select:function(a){if(!this.isSelected(a)&&this.canSelect(a)){a.setSelected(true);this.__selected[a[this.itemSelectionId]]=a;this.setSelectedCount(this.selectedCount+1);this.__lastSelectedItem=a;this.doSelected(a);this.fireNewEvent("itemSelected",a)}},doSelected:function(a){},selectById:function(a){this.select(this.getSelectableItem(a))},canSelect:function(c){var a=this.maxSelected,d=this.selectedCount;if(a===0){return false}else{if(a===1){if(d>0){this.deselectAll();if(this.selectedCount>0){return false}}}else{if(a>1){if(d>=a){return false}}}}return c.canSelect(this)},selectAll:function(){var a=this.getSelectableItems(),c=a.length;while(c){this.select(a[--c])}},deselect:function(a){if(this.isSelected(a)&&this.canDeselect(a)){a.setSelected(false);delete this.__selected[a[this.itemSelectionId]];this.setSelectedCount(this.selectedCount-1);if(this.__lastSelectedItem===a){this.__lastSelectedItem=null}this.doDeselected(a);this.fireNewEvent("itemDeselected",a)}},doDeselected:function(a){},deselectById:function(a){this.deselect(this.getSelectableItem(a))},canDeselect:function(a){return a.canDeselect(this)},deselectAll:function(){var a=this.__selected,c;for(c in a){this.deselect(a[c])}},isSelected:function(a){return a?a.isSelected():false},areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){var d=[],c=this.getSubviews(),e=c.length,a;while(e){a=c[--e];if(a.isA(myt.Selectable)){d.push(a)}}return d},getSelectableItems:function(){var a=this.getManagedItems(),c=a.length;while(c){if(!a[--c].canSelect(this)){a.splice(c,1)}}return a},getSelectableItem:function(c){var d=this.getSelectableItems(),e=d.length,f,a=this.itemSelectionId;while(e){f=d[--e];if(f[a]===c){return f}}return null}});myt.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[myt.SelectionManager],extend:{DEFAULT_SPACING:1},initNode:function(c,a){this._tabSliders=[];a.defaultPlacement="container";if(a.spacing===undefined){a.spacing=myt.TabSliderContainer.DEFAULT_SPACING}if(a.overflow===undefined){a.overflow="auto"}if(a.itemSelectionId===undefined){a.itemSelectionId="tabId"}if(a.maxSelected===undefined){a.maxSelected=1}myt.DelayedMethodCall.createDelayedMethodCall(this,0,"__updateLayout");this.callSuper(c,a)},doAfterAdoption:function(){var c=this;var a=new myt.View(this,{name:"container",ignorePlacement:true,percentOfParentWidth:100},[myt.SizeToParent,{subnodeAdded:function(d){this.callSuper(d);if(d instanceof myt.TabSlider){c._tabSliders.push(d);c.attachTo(d,"updateLayout","selected")}},subnodeRemoved:function(f){if(f instanceof myt.TabSlider){var e=c._tabSliders,d=e.length;while(d){if(e[--d]===f){c.detachFrom(f,"updateLayout","selected");e.splice(d,1);break}}}this.callSuper(f)}}]);new myt.SpacedLayout(a,{name:"layout",axis:"y",spacing:this.spacing,collapseParent:true});this.attachTo(this,"updateLayout","height");this.callSuper()},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.layout){this.layout.setSpacing(a)}}},updateLayout:function(a){this.__updateLayoutDelayed()},__updateLayout:function(){var g=this._tabSliders,k=g.length,d,j=0,q=0,f=0;while(k){d=g[--k];if(d.visible){++f;if(d.selected){j+=d.getMinimumExpandedHeight();q+=d.getPreferredExpandedHeight()}else{j+=d.getCollapsedHeight();q+=d.getCollapsedHeight()}}}var m=this.container.layout,p=m.inset+m.outset+m.spacing*(f-1);j+=p;q+=p;var l=this.height,c=j>l,e=q>l,o=q-l,n,r,a;k=g.length;while(k){d=g[--k];if(d.visible){if(d.selected){if(c){d.expand(d.getMinimumExpandedHeight())}else{if(e){n=d.getPreferredExpandedHeight();r=d.getMinimumExpandedHeight();a=n-o;if(r>a){o-=n-r;a=r}else{o=0}d.expand(a)}else{d.expand(d.getPreferredExpandedHeight())}}}else{d.collapse(d.getCollapsedHeight())}}}}});myt.TabSlider=new JS.Class("TabSlider",myt.View,{include:[myt.Selectable,myt.Disableable,myt.SizeToParent],extend:{DEFAULT_BUTTON_HEIGHT:30,DEFAULT_MINIMUM_CONTAINER_HEIGHT:100,DEFAULT_FILL_COLOR_SELECTED:"#666666",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#cccccc",DEFAULT_FILL_COLOR_READY:"#ffffff",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5,DEFAULT_ANIMATION_MILLIS:500},initNode:function(c,a){a.defaultPlacement="wrapper.container";a.percentOfParentWidth=100;a.expansionState="collapsed";if(a.tabId===undefined){a.tabId=myt.generateGuid()}if(a.tabContainer===undefined){a.tabContainer=c}if(a.selected===undefined){a.selected=false}if(a.buttonClass===undefined){a.buttonClass=myt.DrawButton}if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.TabSliderDrawingMethod"}if(a.zIndex===undefined){a.zIndex=0}var e=myt.TabSlider;if(a.edgeColor===undefined){a.edgeColor=e.DEFAULT_EDGE_COLOR}if(a.edgeSize===undefined){a.edgeSize=e.DEFAULT_EDGE_SIZE}if(a.buttonHeight===undefined){a.buttonHeight=e.DEFAULT_BUTTON_HEIGHT}if(a.fillColorSelected===undefined){a.fillColorSelected=e.DEFAULT_FILL_COLOR_SELECTED}if(a.fillColorHover===undefined){a.fillColorHover=e.DEFAULT_FILL_COLOR_HOVER}if(a.fillColorActive===undefined){a.fillColorActive=e.DEFAULT_FILL_COLOR_ACTIVE}if(a.fillColorReady===undefined){a.fillColorReady=e.DEFAULT_FILL_COLOR_READY}if(a.minContainerHeight===undefined){a.minContainerHeight=e.DEFAULT_MINIMUM_CONTAINER_HEIGHT}if(a.selected){var d=true;delete a.selected}this.callSuper(c,a);if(d){this.tabContainer.select(this)}if(a.disabled===true){this.setDisabled(true)}this.setHeight(this.getCollapsedHeight())},doAfterAdoption:function(){var c=this,d=this.buttonClass;new d(this,{name:"button",ignorePlacement:true,zIndex:1,height:this.buttonHeight,focusEmbellishment:true,drawingMethodClassname:this.drawingMethodClassname,groupId:this.parent.parent.groupId,percentOfParentWidth:100,fillColorChecked:this.fillColorChecked,fillColorHover:this.fillColorHover,fillColorActive:this.fillColorActive,fillColorReady:this.fillColorReady,fillBorderColor:this.fillBorderColor,edgeSize:this.edgeSize},[myt.SizeToParent,{setFocused:function(f){this.callSuper(f);if(this.inited){this.redraw()}},doActivated:function(){var f=c.tabContainer;if(c.isSelected()&&f.maxSelected!==1){f.deselect(c)}else{f.select(c)}},getDrawConfig:function(g){var f=this.callSuper(g);f.selected=c.selected;f.edgeColor=c.edgeColor;f.edgeSize=c.edgeSize;if(c.selected&&c.tabContainer.maxSelected!==-1){f.fillColor=c.fillColorSelected}else{switch(g){case"hover":f.fillColor=c.fillColorHover;break;case"active":f.fillColor=c.fillColorActive;break;case"disabled":case"ready":f.fillColor=this.focused?c.fillColorHover:c.fillColorReady;break;default:}}return f},getDrawBounds:function(){var f=this.drawBounds;f.w=this.width;f.h=this.height;return f},redraw:function(f){this.callSuper(f);c.notifyButtonRedraw(f)}}]);var e=new myt.View(this,{name:"wrapper",ignorePlacement:true,y:this.buttonHeight,height:0,visible:false,maskFocus:true,overflow:"hidden",percentOfParentWidth:100},[myt.SizeToParent,{setHeight:function(f,g){this.callSuper(Math.round(f),g)},setWidth:function(f,g){this.callSuper(f,g);if(this.inited){this.container.setWidth(f)}}}]);var a=new myt.View(e,{name:"container"});new myt.SizeToChildren(a,{axis:"y"});this.applyConstraint("__updateHeight",[e,"y",e,"height"]);this.callSuper()},setSelected:function(a){this.callSuper(a);if(this.button){this.button.redraw()}},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setDrawingMethodClassname:function(a){this.drawingMethodClassname=a},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){if(this.buttonHeight!==a){this.buttonHeight=a;if(this.button){this.button.setHeight(a);this.wrapper.setY(a)}}},setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;if(this.inited){this.fireNewEvent("expansionState",a)}var c=this.wrapper;if(c){if(a==="expanded"){c.setMaskFocus(false);c.setOverflow("auto")}else{if(a==="expanding"){c.setVisible(true)}else{if(a==="collapsed"){c.setVisible(false)}else{if(a==="collapsing"){c.setMaskFocus(true);c.setOverflow("hidden")}}}}}}},doDisabled:function(){var a=this.button;if(a){a.setDisabled(this.disabled)}},notifyButtonRedraw:function(a){},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(a){this.setExpansionState("expanding");var e=this.wrapper,d=a-this.getCollapsedHeight();e.stopActiveAnimators();if(e.height!==d){var c=this;e.animate({attribute:"height",to:d,duration:myt.TabSlider.DEFAULT_ANIMATION_MILLIS,easingFunction:"easeInOutQuad"}).next(function(f){c.setExpansionState("expanded")})}else{this.setExpansionState("expanded")}},collapse:function(a){this.setExpansionState("collapsing");var e=this.wrapper,d=a-this.getCollapsedHeight();e.stopActiveAnimators();if(e.height!==d){var c=this;e.animate({attribute:"height",to:d,duration:myt.TabSlider.DEFAULT_ANIMATION_MILLIS,easingFunction:"easeInOutQuad"}).next(function(f){c.setExpansionState("collapsed")})}else{this.setExpansionState("collapsed")}},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});myt.TextTabSlider=new JS.Class("TextTabSlider",myt.TabSlider,{extend:{DEFAULT_LABEL_TEXT_COLOR_CHECKED:"#ffffff",DEFAULT_LABEL_TEXT_COLOR:"#333333"},initNode:function(d,c){var a=myt.TextTabSlider;if(c.labelTextColorChecked===undefined){c.labelTextColorChecked=a.DEFAULT_LABEL_TEXT_COLOR_CHECKED}if(c.labelTextColor===undefined){c.labelTextColor=a.DEFAULT_LABEL_TEXT_COLOR}this.callSuper(d,c);new myt.Text(this.button,{name:"label",domClass:"mytTextTabSliderLabel",ignorePlacement:true,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){if(this.text!==a){this.text=a;var c=this.button;if(c&&c.label){c.label.setText(a)}}},notifyButtonRedraw:function(c){var a=this.button.label;if(a){a.setTextColor(this.__getTextColor())}},__getTextColor:function(){return(this.selected&&this.tabContainer.maxSelected!==-1)?this.labelTextColorChecked:this.labelTextColor}});myt.TabDrawingMethod=new JS.Class("TabDrawingMethod",myt.DrawingMethod,{extend:{DEFAULT_RADIUS:6},draw:function(d,E){var C=E.bounds,l=C.x,j=C.y,m=C.w,z=C.h;d.clear();if(m==0||z==0){return}var u=E.edgeSize,n=2*u,a=0,B=0,D=0,A=0,t=0,o=0,p=0,g=0,q=E.cornerRadius===undefined?myt.TabDrawingMethod.DEFAULT_RADIUS:E.cornerRadius,e=q-u,v=l+u,c=j+u,k=m-n,f=z-n,s=E.selected;switch(E.location){case"top":a=B=q;t=o=q;if(s){f+=u}break;case"right":A=B=q;g=o=q;if(s){v-=u;k+=u}break;case"bottom":D=A=q;p=g=q;if(s){c-=u;f+=u}break;case"left":a=D=q;t=p=q;if(s){k+=u}break}if(u>0){d.beginPath();myt.DrawingUtil.drawPartiallyRoundedRect(d,a,B,D,A,l,j,m,z);d.closePath();d.setFillStyle(E.edgeColor);d.fill()}d.beginPath();myt.DrawingUtil.drawPartiallyRoundedRect(d,t,o,p,g,v,c,k,f);d.closePath();d.setFillStyle(E.fillColor);d.fill()}});myt.TabContainer=new JS.Module("TabContainer",{include:[myt.SelectionManager],extend:{DEFAULT_SPACING:1,DEFAULT_INSET:0},initNode:function(e,c){this.__tabs=[];var a=myt.TabContainer;if(c.spacing===undefined){c.spacing=a.DEFAULT_SPACING}if(c.inset===undefined){c.inset=a.DEFAULT_INSET}if(c.location===undefined){c.location="top"}if(c.itemSelectionId===undefined){c.itemSelectionId="tabId"}if(c.maxSelected===undefined){c.maxSelected=1}this.callSuper(e,c);var d;switch(this.location){case"top":case"bottom":d="x";break;case"left":case"right":d="y";break}new myt.SpacedLayout(this,{name:"layout",axis:d,spacing:this.spacing,inset:this.inset,collapseParent:true})},setLocation:function(a){this.location=a},setSpacing:function(a){if(this.spacing!==a){this.spacing=a;if(this.layout){this.layout.setSpacing(a)}}},setInset:function(a){if(this.inset!==a){this.inset=a;if(this.layout){this.layout.setInset(a)}}},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(a){this.callSuper(a);if(a.isA(myt.TabMixin)){this.__tabs.push(a);switch(this.location){case"top":a.setValign("bottom");break;case"bottom":a.setValign("top");break;case"left":a.setAlign("right");break;case"right":a.setAlign("left");break}}},subnodeRemoved:function(d){if(d.isA(myt.TabMixin)){var c=this.__tabs,a=c.length;while(a){if(c[--a]===d){c.splice(a,1);break}}}this.callSuper(d)}});myt.TabMixin=new JS.Module("TabMixin",{include:[myt.Selectable],initNode:function(c,a){if(a.tabId===undefined){a.tabId=myt.generateGuid()}if(a.tabContainer===undefined){a.tabContainer=c}var d;if(a.selected){d=true;delete a.selected}this.callSuper(c,a);if(d){this.tabContainer.select(this)}},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},doActivated:function(){if(!this.selected){this.tabContainer.select(this)}}});myt.Tab=new JS.Class("Tab",myt.DrawButton,{include:[myt.TabMixin,myt.IconTextButtonContent],extend:{DEFAULT_HEIGHT:24,DEFAULT_INSET:8,DEFAULT_OUTSET:8,DEFAULT_FILL_COLOR_SELECTED:"#ffffff",DEFAULT_FILL_COLOR_HOVER:"#eeeeee",DEFAULT_FILL_COLOR_ACTIVE:"#aaaaaa",DEFAULT_FILL_COLOR_READY:"#cccccc",DEFAULT_LABEL_TEXT_COLOR_SELECTED:"#333333",DEFAULT_EDGE_COLOR:"#333333",DEFAULT_EDGE_SIZE:0.5},initNode:function(d,c){var a=myt.Tab;if(c.drawingMethodClassname===undefined){c.drawingMethodClassname="myt.TabDrawingMethod"}if(c.inset===undefined){c.inset=a.DEFAULT_INSET}if(c.outset===undefined){c.outset=a.DEFAULT_OUTSET}if(c.edgeColor===undefined){c.edgeColor=a.DEFAULT_EDGE_COLOR}if(c.edgeSize===undefined){c.edgeSize=a.DEFAULT_EDGE_SIZE}if(c.fillColorSelected===undefined){c.fillColorSelected=a.DEFAULT_FILL_COLOR_SELECTED}if(c.fillColorHover===undefined){c.fillColorHover=a.DEFAULT_FILL_COLOR_HOVER}if(c.fillColorActive===undefined){c.fillColorActive=a.DEFAULT_FILL_COLOR_ACTIVE}if(c.fillColorReady===undefined){c.fillColorReady=a.DEFAULT_FILL_COLOR_READY}if(c.labelTextColorSelected===undefined){c.labelTextColorSelected=a.DEFAULT_LABEL_TEXT_COLOR_SELECTED}if(c.height===undefined){c.height=a.DEFAULT_HEIGHT}if(c.focusEmbellishment===undefined){c.focusEmbellishment=false}this.callSuper(d,c)},setEdgeColor:function(a){this.edgeColor=a},setEdgeSize:function(a){this.edgeSize=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setLabelTextColor:function(a){this.labelTextColor=a},setLabelTextColorSelected:function(a){this.labelTextColorSelected=a},setCornerRadius:function(a){this.cornerRadius=a},setSelected:function(a){this.callSuper(a);if(this.inited){this.redraw()}},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},getDrawBounds:function(){var a=this.drawBounds;a.w=this.width;a.h=this.height;return a},getDrawConfig:function(c){var a=this.callSuper(c);a.selected=this.selected;a.location=this.tabContainer.location;a.cornerRadius=this.cornerRadius;a.edgeColor=this.edgeColor;a.edgeSize=this.edgeSize;if(this.selected){a.fillColor=this.fillColorSelected}else{switch(c){case"hover":a.fillColor=this.fillColorHover;break;case"active":a.fillColor=this.fillColorActive;break;case"disabled":case"ready":a.fillColor=this.focused?this.fillColorHover:this.fillColorReady;break;default:}}return a},redraw:function(a){this.callSuper(a);this.textView.setTextColor(this.selected?this.labelTextColorSelected:this.labelTextColor)}});myt.SimpleTab=new JS.Class("SimpleTab",myt.SimpleIconTextButton,{include:[myt.TabMixin],initNode:function(d,c){var a=myt.Tab;if(c.inset===undefined){c.inset=a.DEFAULT_INSET}if(c.outset===undefined){c.outset=a.DEFAULT_OUTSET}if(c.selectedColor===undefined){c.selectedColor=a.DEFAULT_FILL_COLOR_SELECTED}if(c.hoverColor===undefined){c.hoverColor=a.DEFAULT_FILL_COLOR_HOVER}if(c.activeColor===undefined){c.activeColor=a.DEFAULT_FILL_COLOR_ACTIVE}if(c.readyColor===undefined){c.readyColor=a.DEFAULT_FILL_COLOR_READY}if(c.labelTextSelectedColor===undefined){c.labelTextSelectedColor=a.DEFAULT_LABEL_TEXT_COLOR_SELECTED}if(c.height===undefined){c.height=a.DEFAULT_HEIGHT}if(c.focusEmbellishment===undefined){c.focusEmbellishment=false}this.callSuper(d,c);this.__updateCornerRadius();this.__updateTextColor()},setSelectedColor:function(a){this.selectedColor=a},setCornerRadius:function(a){this.cornerRadius=a;if(this.inited){this.__updateCornerRadius()}},setLabelTextColor:function(a){this.labelTextColor=a},setLabelTextSelectedColor:function(a){this.labelTextSelectedColor=a;if(this.inited&&this.selected){this.textView.setTextColor(a)}},setSelected:function(a){this.callSuper(a);if(this.inited){this.updateUI();this.__updateTextColor()}},__updateTextColor:function(){this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor)},__updateCornerRadius:function(){var a=this.cornerRadius!=null?this.cornerRadius:myt.TabDrawingMethod.DEFAULT_RADIUS;switch(this.tabContainer.location){case"top":this.setRoundedTopLeftCorner(a);this.setRoundedTopRightCorner(a);break;case"bottom":this.setRoundedBottomLeftCorner(a);this.setRoundedBottomRightCorner(a);break;case"left":this.setRoundedTopLeftCorner(a);this.setRoundedBottomLeftCorner(a);break;case"right":this.setRoundedTopRightCorner(a);this.setRoundedBottomRightCorner(a);break}},drawDisabledState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawHoverState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawActiveState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}},drawReadyState:function(){this.callSuper();if(this.selected){this.setBgColor(this.selectedColor)}}});myt.InputObservable=new JS.Module("InputObservable",{extend:{EVENT_TYPES:{input:true,select:true,change:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.InputObservable)||this.callSuper(d,a,c)}});myt.NativeInputWrapper=new JS.Class("NativeInputWrapper",myt.View,{include:[myt.Disableable,myt.InputObservable],initNode:function(c,a){if(a.focusable===undefined){a.focusable=true}this.callSuper(c,a);this.addDomClass("mytNativeInput")},createOurDomElement:function(a){var c=document.createElement("input");c.style.position="absolute";c.type=this.inputType;return c},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a)}},setValue:function(a){if(this.value!==a){this.value=a;this.setDomValue(a);if(this.inited){this.fireNewEvent("value",a)}}},getDomValue:function(){return this.domElement.value},setDomValue:function(a){var c=this.domElement;if(c.value!==a){c.value=a}}});myt.DragDropObservable=new JS.Module("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:true,dragenter:true,dragover:true,drop:true},EVENT:{source:null,type:null,value:null}},createDomMethodRef:function(d,a,c){return this.createStandardDomMethodRef(d,a,c,myt.DragDropObservable,true)||this.callSuper(d,a,c)}});myt.DragDropSupport=new JS.Module("DragDropSupport",{include:[myt.DragDropObservable],initNode:function(c,a){this.callSuper(c,a);if(!this.disabled){this.setupDragListeners()}},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a);if(this.inited){if(a){this.teardownDragListeners()}else{this.setupDragListeners()}}}},setupDragListeners:function(){this.attachToDom(this,"doDragOver","dragover",false);this.attachToDom(this,"doDragEnter","dragenter",false);this.attachToDom(this,"doDragLeave","dragleave",false);this.attachToDom(this,"doDrop","drop",false)},teardownDragListeners:function(){this.detachFromDom(this,"doDragOver","dragover",false);this.detachFromDom(this,"doDragEnter","dragenter",false);this.detachFromDom(this,"doDragLeave","dragleave",false);this.detachFromDom(this,"doDrop","drop",false)},doDragOver:function(a){},doDragEnter:function(a){},doDragLeave:function(a){},doDrop:function(a){this.handleFiles(a.value.dataTransfer.files,a)},handleFiles:function(e,d){if(e!==undefined){var c=e.length,a;while(c){a=e[--c];if(this.filterFiles(a)){this.handleDroppedFile(a,d)}}}else{myt.dumpStack("Browser doesn't support the File API")}},filterFiles:function(a){return true},handleDroppedFile:function(a,c){}});myt.Ajax=new JS.Class("Ajax",myt.Node,{extend:{doRequest:function(c,a,d){return $.ajax(c).done(a).fail(d)}},initNode:function(c,a){this.opts={};this.callSuper()},setUrl:function(a){this.__s("url",a)},setRequestMethod:function(a){this.__s("type",a)},setRequestData:function(a){this.__s("data",a)},setResponseType:function(a){this.__s("datatype",a)},__s:function(a,c){if(c){this.opts[a]=c}else{delete this.opts[a]}},doRequest:function(c,a,e){var d={context:this,beforeSend:function(g,f){g.callbackData=c.callbackData;g.requestData=c.requestData;g.requestURL=f.url}};$.each(c,function(f,g){switch(f){case"requestData":f="data";break;case"requestMethod":f="type";break;case"responseType":f="datatype";break}d[f]=g});return myt.Ajax.doRequest($.extend(true,{},this.opts,d),a||this.handleSuccess,e||this.handleFailure)},handleSuccess:function(c,a,d){this.fireNewEvent("success",{data:c,status:a,xhr:d})},handleFailure:function(d,a,c){this.fireNewEvent("failure",{exception:c,status:a,xhr:d})}});myt.Form=new JS.Module("Form",{initNode:function(c,a){this.isChanged=this._lockCascade=false;this.isValid=true;this.__sf={};this.__v=[];this.__acc={};this.callSuper(c,a);if(this.form){this.form.addSubForm(this)}},destroy:function(){if(this.form){this.form.removeSubForm(this.id)}this.callSuper()},setErrorMessages:function(a){this.errorMessages=a},setId:function(a){if(this.id!==a){var d=this.id;this.id=a;var c=this.form;if(c&&this.inited){c.removeSubForm(d);c.addSubForm(this)}}},setForm:function(a){if(this.form!==a){var c=this.form;this.form=a;if(c){c.removeSubForm(this.id)}if(a&&this.inited){a.addSubForm(this)}}},setIsValid:function(a){this.isValid=a;if(this.inited){this.fireNewEvent("isValid",a)}var c=this.form;if(c&&!this._lockCascade){if(a){c.verifyValidState(this)}else{c.notifySubFormInvalid()}}},setIsChanged:function(a){if(this.isChanged!==a){this.isChanged=a;if(this.inited){this.fireNewEvent("isChanged",a)}var c=this.form;if(c&&!this._lockCascade){if(a){c.notifySubFormChanged()}else{c.verifyChangedState(this)}}}},setValidators:function(a){var d=a.length,c;while(d){c=a[--d];if(typeof c==="string"){a[d]=c=myt.global.validators.getValidator(c);if(!c){a.splice(d,1)}}}this.__v=a},getValue:function(){if(this.callSuper){return this.callSuper()}if(this.isA(myt.FormElement)){return this.value}var a={},c=this.__sf,d;for(d in c){a[d]=c[d].getValue()}return a},setValue:function(c){if(this.callSuper){this.callSuper(c)}if(typeof c==="object"&&!this.isA(myt.FormElement)){var a,d;for(d in c){a=this.getSubForm(d);if(a){c[d]=a.setValue(c[d])}else{console.warn("ID in setValue for non-existant subform",d)}}}if(this.form){this.form.notifyValueChanged(this)}return c},getDefaultValue:function(){var a={},c=this.__sf,d;for(d in c){a[d]=c[d].getDefaultValue()}return a},setDefaultValue:function(c){if(typeof c==="object"){var a,d;for(d in c){a=this.getSubForm(d);if(a){c[d]=a.setDefaultValue(c[d])}else{console.warn("ID in setDefaultValue for non-existant subform",d)}}}return c},getRollbackValue:function(){var a={},c=this.__sf,d;for(d in c){a[d]=c[d].getRollbackValue()}return a},setRollbackValue:function(c){if(typeof c==="object"){var a,d;for(d in c){a=this.getSubForm(d);if(a){c[d]=a.setRollbackValue(c[d])}else{console.warn("ID in setRollbackValue for non-existant subform",d)}}}return c},addAccelerator:function(c,a){this.__acc[c]=a},removeAccelerator:function(a){delete this.__acc[a]},invokeAccelerator:function(d,c){var a=this.__acc[d];if(a){a.call(this,c===undefined?null:c)}},addValidator:function(a){if(a){this.__v.push(a)}},removeValidator:function(e){if(e){var a=this.__v,d=a.length,c;while(d){c=a[--d];if(c.id===e){a.splice(d,1);return c}}}return null},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(a){var c=a.id;if(this.getSubForm(c)!=null){console.warn("ID in use for subform, add aborted.",c,a);return}a.setForm(this);this.__sf[c]=a;if(a.isChanged){this.notifySubFormChanged()}if(!a.isValid){this.notifySubFormInvalid()}},removeSubForm:function(c){var a=this.getSubForm(c);if(a){a.setForm(null);delete this.__sf[c];this.verifyChangedState();this.verifyValidState()}return a},getSubForm:function(a){return this.__sf[a]},getAllErrorMessages:function(){var c=this.errorMessages.concat(),a=this.__sf,d;for(d in a){c=c.concat(a[d].getAllErrorMessages())}return c},notifySubFormInvalid:function(){this.setIsValid(false)},verifyValidState:function(a){var e=true,d=this.__sf,c,f;for(f in d){c=d[f];if(c!==a){e=c.isValid&&e}}return this.__applyValidation(e)},doValidation:function(){var c=true,a=this.__sf,d;for(d in a){c=a[d].doValidation()&&c}this._lockCascade=true;c=this.__applyValidation(c);this._lockCascade=false;return c},__applyValidation:function(e){var c=this.__v,a=c.length,f=[],d=0;for(;a>d;){e=c[d++].isFormValid(this,null,f)&&e}this.setErrorMessages(f);this.setIsValid(e);return e},notifyValueChanged:function(a){if(this.form){this.form.notifyValueChanged(a)}},notifySubFormChanged:function(){this.setIsChanged(true)},verifyChangedState:function(a){var e=false,d=this.__sf,c,f;for(f in d){c=d[f];if(c!==a){e=c.isChanged||e}}this.setIsChanged(e);return e},setup:function(a,e,d){this._lockCascade=true;this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false;if(a==null){a={}}if(e==null){e={}}if(d==null){d={}}var c=this.__sf,f;for(f in c){c[f].setup(a[f],e[f],d[f])}},resetForm:function(){this._lockCascade=true;var a=this.__sf,c;for(c in a){a[c].resetForm()}this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},rollbackForm:function(){this._lockCascade=true;var a=this.__sf,c;for(c in a){a[c].rollbackForm()}this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},getChangedValue:function(){var a={},d=this.__sf,c,e;for(e in d){c=d[e];if(c.isChanged){a[e]=c.getChangedValue()}}return a}});myt.RootForm=new JS.Module("RootForm",{include:[myt.Form],initNode:function(c,a){this.callSuper(c,a);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){if(this.isChanged){if(this.doValidation()){this.doValidSubmit(this.getValue())}else{this.doInvalidSubmit()}}},doValidSubmit:function(a){},doInvalidSubmit:function(){},doCancel:function(){this.rollbackForm();this.doValidation()}});myt.FormElement=new JS.Module("FormElement",{include:[myt.Form],initNode:function(c,a){this.__vp=[];this.callSuper(c,a)},getValue:function(){return this.__processValue(this.callSuper?this.callSuper():this.value,myt.ValueProcessor.CURRENT_ATTR)},setValue:function(a){if(a===undefined){a=this.getRollbackValue()}if(this.value!==a){this.callSuper(a);this.verifyChangedState()}return a},getDefaultValue:function(){return this.__processValue(this.defaultValue,myt.ValueProcessor.DEFAULT_ATTR)},setDefaultValue:function(a){if(this.defaultValue!==a){this.defaultValue=a;if(this.inited){this.fireNewEvent("defaultValue",a)}this.verifyChangedState()}return a},getRollbackValue:function(){return this.__processValue(this.rollbackValue,myt.ValueProcessor.ROLLBACK_ATTR)},setRollbackValue:function(a){if(a===undefined){a=this.getDefaultValue()}if(this.rollbackValue!==a){this.rollbackValue=a;if(this.inited){this.fireNewEvent("rollbackValue",a)}this.verifyChangedState()}return a},setValueProcessors:function(a){var c=a.length,d;while(c){d=a[--c];if(typeof d==="string"){a[c]=d=myt.global.valueProcessors.getValueProcessor(d);if(!d){a.splice(c,1)}}}this.__vp=a},addValueProcessor:function(a){this.__vp.push(a)},removeValueProcessor:function(e){if(e){var a=this.__vp,c=a.length,d;while(c){d=a[--c];if(d.id===e){a.splice(c,1);return d}}}return null},__processValue:function(g,f){var c=this.__vp,a=c.length,e,d=0;for(;a>d;){e=c[d++];if(e[f]){g=e.process(g)}}return g},addSubForm:function(a){myt.dumpStack("addSubForm not supported on form elements.")},getSubForm:function(a){myt.dumpStack("getSubForm not supported on form elements.");return null},removeSubForm:function(a){myt.dumpStack("removeSubForm not supported on form elements.");return null},verifyChangedState:function(a){var c=this.value!==this.rollbackValue;this.setIsChanged(c);return c},setup:function(a,d,c){this._lockCascade=true;this.defaultValue=undefined;this.rollbackValue=undefined;this.value=undefined;this.setDefaultValue(a);this.setRollbackValue(d);this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false;this.setValue(c)},resetForm:function(){this._lockCascade=true;var a=this.getDefaultValue();this.setRollbackValue(a);this.setValue(a);this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},rollbackForm:function(){this._lockCascade=true;this.setValue(this.getRollbackValue());this.setIsChanged(false);this.setErrorMessages([]);this.setIsValid(true);this._lockCascade=false},getChangedValue:function(){return this.isChanged?this.getValue():undefined}});myt.Uploader=new JS.Class("Uploader",myt.View,{include:[myt.DragDropSupport,myt.Disableable,myt.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",MIME_TYPES_BY_EXTENSION:{gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},readFile:function(a,c){if(FileReader!==undefined){reader=new FileReader();reader.onload=c;reader.readAsDataURL(a)}},isSameFile:function(a,c){if(a==null||c==null){return false}return a.name===c.name&&a.type===c.type&&a.size===c.size},createFile:function(e){var d=new myt.URI(e),a=d.file,c=a.split(".")[1];return{name:a,serverPath:e,size:-1,type:this.MIME_TYPES_BY_EXTENSION[c]}}},initNode:function(d,c){this.files=[];if(c.requestFileParam===undefined){c.requestFileParam="file"}if(c.maxFiles===undefined){c.maxFiles=-1}this.callSuper(d,c);var a=this;new myt.NativeInputWrapper(this,{name:"fileInput",percentOfParentWidth:100,percentOfParentHeight:100,opacity:0.01,disabled:this.disabled,overflow:"hidden"},[myt.SizeToParent,{initNode:function(f,e){this.inputType="file";this.callSuper(f,e);this.attachToDom(this,"_handleInput","change");this.domElement.multiple=a.maxFiles>1},_handleInput:function(e){a.handleFiles(this.domElement.files,e)}}])},setValue:function(c){this.clearFiles();if(c){if(!Array.isArray(c)){c=[c]}var a=c.length,d=0;for(;a>d;++d){this.addFile(myt.Uploader.createFile(c[d]))}}if(this.callSuper){return this.callSuper(c)}else{return c}},getValue:function(){return this.value},setDisabled:function(a){this.callSuper(a);if(this.fileInput){this.fileInput.setDisabled(a)}},setMaxFiles:function(a){if(this.maxFiles!==a){this.maxFiles=a;if(this.inited){this.fireNewEvent("maxFiles",a)}if(this.fileInput){this.fileInput.domElement.multiple=a>1}}},setUploadUrl:function(a){if(this.uploadUrl!==a){this.uploadUrl=a;if(this.inited){this.fireNewEvent("uploadUrl",a)}}},setRequestFileParam:function(a){if(this.requestFileParam!==a){this.requestFileParam=a;if(this.inited){this.fireNewEvent("requestFileParam",a)}}},bringSubviewToFront:function(a){if(a===this.fileInput){this.callSuper(a)}else{this.sendSubviewBehind(a,this.fileInput)}},subviewAdded:function(a){this.callSuper(a);if(this.fileInput){this.bringSubviewToFront(this.fileInput)}},handleDroppedFile:function(a,c){this.addFile(a)},filterFiles:function(a){var c=this.maxFiles;if(c>=0&&this.files.length>=c){return false}return true},uploadFiles:function(c,a){c=c||this.uploadUrl;var e=this.files,d=e.length;while(d){this.uploadFile(e[--d],c,a)}},uploadFile:function(e,d,c){d=d||this.uploadUrl;c=c||this.requestFileParam;var a=this;var f=new myt.Ajax(this,{url:d,requestMethod:"post",responseType:"json"},[{handleSuccess:function(j,h,k){this.callSuper(j,h,k);a.handleUploadSuccess(e,j,h,k)},handleFailure:function(k,h,j){this.callSuper(k,h,j);a.handleUploadFailure(e,k,h,j)}}]);var g=new FormData();g.append(c,e,e.name);f.setRequestData(g);f.doRequest({contentType:false,cache:false,processData:false})},handleUploadSuccess:function(c,d,a,e){c[myt.Uploader.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(d);this.updateValueFromFiles()},handleUploadFailure:function(d,e,a,c){myt.dumpStack("XHR failure: "+a+" : "+c)},parseServerPathFromResponse:function(a){return null},addFile:function(a){this.files.push(a);this.updateValueFromFiles();this.fireNewEvent("addFile",a)},removeFile:function(c){var d=this.files,a=d.length;while(a){if(myt.Uploader.isSameFile(d[--a],c)){d.splice(a,1);this.updateValueFromFiles();this.fireNewEvent("removeFile",c);break}}},updateValueFromFiles:function(){var f=[],e=this.files,d=e.length,c;while(d){c=e[--d][myt.Uploader.FILE_ATTR_SERVER_PATH];if(c){f.push(c)}}var a=f.length;this.value=a===1?f[0]:(a===0?undefined:f);this.verifyChangedState();if(this.form){this.form.notifyValueChanged(this)}this.fireNewEvent("value",this.value)},clearFiles:function(){var c=this.files,a=c.length;while(a){this.removeFile(c[--a])}}});myt.ImageUploader=new JS.Class("ImageUploader",myt.Uploader,{extend:{isImageFile:function(a){return(/image/i).test(a.type)}},initNode:function(c,a){a.maxFiles=1;this.callSuper(c,a)},filterFiles:function(a){if(!myt.ImageUploader.isImageFile(a)){return false}while(this.files.length>0){this.removeFile(this.files[0])}retval=this.callSuper(a);if(!retval){return false}return true},addFile:function(a){this.callSuper(a);var c=this.getImageToReadInto();if(c){c.file=a;this.readImageInto(a,c)}},getImageToReadInto:function(){return new myt.Image(this,{useNaturalSize:false,align:"center",valign:"middle"})},scaleToFit:function(g,c,e,a){var f=g/c;var d=e/a;if(d>f){return[g,a*g/e]}else{return[e*c/a,c]}},removeFile:function(d){this.callSuper(d);var a=this.getSubviews(),c=a.length,e;while(c){e=a[--c];if(myt.Uploader.isSameFile(e.file,d)){e.destroy();break}}},handleDroppedFile:function(a,c){this.callSuper(a,c);this.uploadFile(a,this.uploadUrl)},readImageInto:function(d,e){var c=this;if(d.size===-1){var a=new Image();a.onload=function(){d.width=this.width;d.height=this.height;if(!e||e.destroyed){return}c.updateImage(d,e,this.src)};a.src=d.serverPath}else{if(FileReader!==undefined&&myt.ImageUploader.isImageFile(d)){myt.Uploader.readFile(d,function(g){var f=new Image();f.onload=function(){d.width=this.width;d.height=this.height;if(!e||e.destroyed){return}c.updateImage(d,e,this.src)};f.src=g.target.result})}}},updateImage:function(d,f,g){var c=this.scaleToFit(this.width,this.height,d.width,d.height),a=Math.round(c[0]),e=Math.round(c[1]);f.setImageSize(a+"px "+e+"px");f.setWidth(a);f.setHeight(e);f.setImageUrl(g)}});(function(f,c,a){var k={color:false,allowEmpty:true,showSelectionPalette:true,localStorageKey:false,selectionWrapSize:8,maxSelectionSize:56,clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",palette:[],selectionPalette:[]},d=[],e=!!/msie/i.exec(f.navigator.userAgent),l=(function(){var n="";if(e){for(var o=1;o<=6;o++){n+="<div class='sp-"+o+"'></div>"}}return["<div class='sp-container'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",n,"</div>","</div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'/>","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","</div>","</div>"].join("")})();function g(q,s,n){var u=[];for(var t=0;t<q.length;t++){var v=q[t];if(v){var o=tinycolor(v);var w=o.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";w+=tinycolor.equals(s,v)?" sp-thumb-active":"";var r="background-color:"+o.toHexString();u.push('<span title="'+o.toHexString()+'" data-color="'+o.toHexString()+'" class="'+w+'"><span class="sp-thumb-inner" style="'+r+';" /></span>')}else{var x="sp-clear-display";u.push(c("<div />").append(c('<span data-color="" style="background-color:transparent;" class="'+x+'"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf'>"+u.join("")+"</div>"}function h(G,aj){var U=c.extend({},k,aj),E=U.showSelectionPalette,ak=U.localStorageKey,ab=0,ae=0,V=0,at=0,D=0,u=0,aa=0,N=0,C=0,an=[],W=[],K={},L=U.selectionPalette.slice(0),Y=U.selectionWrapSize,p=U.maxSelectionSize,ah="sp-dragging",O=null;var v=G.ownerDocument,R=v.body,Q=c(G),Z=c(l,v),ar=Z.find(".sp-picker-container"),af=Z.find(".sp-color"),ap=Z.find(".sp-dragger"),w=Z.find(".sp-hue"),z=Z.find(".sp-slider"),H=Z.find(".sp-input"),ac=Z.find(".sp-palette"),n=Z.find(".sp-initial"),P=Z.find(".sp-clear"),J=U.color,S=false,M=!J,q=U.allowEmpty,al=U.dialog;function I(){if(U.palette){an=U.palette.slice(0);W=c.isArray(an[0])?an:[an];K={};for(var av=0;av<W.length;av++){for(var au=0;au<W[av].length;au++){var o=tinycolor(W[av][au]).toHexString();K[o]=true}}}Z.toggleClass("sp-clear-enabled",q);r()}function t(){if(e){Z.find("*:not(input)").attr("unselectable","on")}I();if(!q){P.hide()}Q.after(Z).hide();s();H.change(x);H.bind("paste",function(){setTimeout(x,1)});H.keydown(function(av){if(av.keyCode==13){x()}});P.attr("title",U.clearText);P.bind("click.spectrum",function(av){av.stopPropagation();av.preventDefault();M=true;ao()});m(w,function(aw,av){aa=parseFloat(av/at);M=false;ao()},y,B);m(af,function(aC,aA,az){if(!az.shiftKey){O=null}else{if(!O){var ax=N*ab;var av=ae-(C*ae);var aw=Math.abs(aC-ax)>Math.abs(aA-av);O=aw?"x":"y"}}var ay=!O||O==="x";var aB=!O||O==="y";if(ay){N=parseFloat(aC/ab)}if(aB){C=parseFloat((ae-aA)/ae)}M=false;ao()},y,B);if(!!J){T(J);X(J)}r();S=am();ao();function au(av){T(c(av.target).closest(".sp-thumb-el").data("color"));ao();return false}var o=e?"mousedown.spectrum":"click.spectrum";ac.delegate(".sp-thumb-el",o,au);n.delegate(".sp-thumb-el:nth-child(1)",o,au)}function s(){if(ak&&f.localStorage){try{L=f.localStorage[ak].split(";")}catch(o){}}}function X(o){if(E){var au=tinycolor(o).toHexString();if(!K[au]&&c.inArray(au,L)===-1){L.push(au);while(L.length>p){L.shift()}}if(ak&&f.localStorage){try{f.localStorage[ak]=L.join(";")}catch(av){}}}}function A(){var av=[];for(var au=0;au<L.length;au++){var o=tinycolor(L[au]).toHexString();if(!K[o]){av.push(L[au])}}return av.reverse().slice(0,U.maxSelectionSize)}function ag(){var au=am();var ax=c.map(W,function(ay,az){return g(ay,au,U)});s();if(L){var av=A();for(var aw=0,o=av.length;o>aw;aw+=Y){ax.push(g(av.slice(aw,aw+Y),au,U))}}ac.html(ax.join(""))}function y(){if(ae<=0||ab<=0||at<=0){r()}Z.addClass(ah);O=null;Q.trigger("dragstart.spectrum",[am()])}function B(){Z.removeClass(ah);Q.trigger("dragstop.spectrum",[am()])}function x(){var au=H.val();if((au===null||au==="")&&q){T(null)}else{var o=tinycolor(au);if(o.isValid()){T(o)}else{H.addClass("sp-validation-error")}}}function T(o){if(!tinycolor.equals(o,am())){var au,av;if(!o&&q){M=true}else{M=false;au=tinycolor(o);av=au.toHsv();aa=(av.h%360)/360;N=av.s;C=av.v}}ao()}function am(){if(q&&M){return null}return tinycolor.fromRatio({h:aa,s:N,v:C})}function ao(){H.removeClass("sp-validation-error");aq();var au=tinycolor.fromRatio({h:aa,s:1,v:1});af.css("background-color",au.toHexString());var av=am(),ax=(av||!q)?av.toHexString():"";H.val(ax);ag();var o=S;var aw=am();n.html(g([o,aw],aw,U))}function aq(){if(q&&M){z.hide();ap.hide()}else{z.show();ap.show();var av=N*ab,o=ae-(C*ae);av=Math.max(-V,Math.min(ab-V,av-V));o=Math.max(-V,Math.min(ae-V,o-V));ap.css({top:o+"px",left:av+"px"});var au=aa*at;z.css({top:(au-u)+"px"})}}function r(){ab=af.width();ae=af.height();V=ap.height();D=w.width();at=w.height();u=z.height();aq();ag();Q.trigger("reflow.spectrum")}function ai(){Q.show();Z.remove();d[F.id]=null}function ad(o,au){if(o===a){return c.extend({},U)}if(au===a){return U[o]}U[o]=au;I()}t();var F={reflow:r,option:ad,set:T,addColorToSelectionPalette:X,get:am,destroy:ai,container:Z};F.id=d.push(F)-1;al._spectrumCallback(F);return F}function m(s,w,o,p){w=w||function(){};o=o||function(){};p=p||function(){};var x=s.ownerDocument||document;var z=false;var r={};var A=0;var y=0;var t={};t.selectstart=v;t.dragstart=v;t.mousemove=q;t.mouseup=u;function v(B){if(B.stopPropagation){B.stopPropagation()}if(B.preventDefault){B.preventDefault()}B.returnValue=false}function q(C){if(z){if(e&&document.documentMode<9&&!C.button){return u()}var D=Math.max(0,Math.min(C.pageX-r.left,y));var B=Math.max(0,Math.min(C.pageY-r.top,A));w.apply(s,[D,B,C])}}function n(C){var B=(C.which)?(C.which==3):(C.button==2);if(!B&&!z){if(o.apply(s,arguments)!==false){z=true;A=c(s).height();y=c(s).width();r=c(s).offset();c(x).bind(t);c(x.body).addClass("sp-dragging");q(C);v(C)}}}function u(){if(z){c(x).unbind(t);c(x.body).removeClass("sp-dragging");p.apply(s,arguments)}z=false}c(s).bind("mousedown",n)}var j="spectrum.id";c.fn.spectrum=function(q,n){if(typeof q=="string"){var p=this;var o=Array.prototype.slice.call(arguments,1);this.each(function(){var r=d[c(this).data(j)];if(r){var s=r[q];if(!s){throw new Error("Spectrum: no such method: '"+q+"'")}if(q=="get"){p=r.get()}else{if(q=="container"){p=r.container}else{if(q=="option"){p=r.option.apply(r,o)}else{if(q=="destroy"){r.destroy();c(this).removeData(j)}else{s.apply(r,o)}}}}}});return p}return this.spectrum("destroy").each(function(){var r=c.extend({},q,c(this).data());var s=h(this,r);c(this).data(j,s.id)})};c.fn.spectrum.load=true;c.fn.spectrum.draggable=m;c.fn.spectrum.defaults=k;c.spectrum={};(function(){var r=/^[\s,#]+/,y=/\s+$/,A=Math,s=A.round,o=A.min,w=A.max;var v=function v(E){E=E?E:"";if(E instanceof v){return E}if(!(this instanceof v)){return new v(E)}var F={r:0,g:0,b:0},G=false;if(typeof E=="string"){E=B(E)}if(typeof E=="object"){if(E.hasOwnProperty("r")&&E.hasOwnProperty("g")&&E.hasOwnProperty("b")){F=D(E.r,E.g,E.b);G=true}else{if(E.hasOwnProperty("h")&&E.hasOwnProperty("s")&&E.hasOwnProperty("v")){E.s=n(E.s);E.v=n(E.v);F=u(E.h,E.s,E.v);G=true}}}this._r=o(255,w(F.r,0));this._g=o(255,w(F.g,0));this._b=o(255,w(F.b,0));this._ok=G;if(this._r<1){this._r=s(this._r)}if(this._g<1){this._g=s(this._g)}if(this._b<1){this._b=s(this._b)}};v.prototype={isValid:function(){return this._ok},toHsv:function(){var E=z(this._r,this._g,this._b);return{h:E.h*360,s:E.s,v:E.v}},toHsl:function(){var E=p(this._r,this._g,this._b);return{h:E.h*360,s:E.s,l:E.l}},toHexString:function(){return"#"+x(this._r,this._g,this._b)}};v.fromRatio=function(E){if(typeof E=="object"){var F={};for(var G in E){if(E.hasOwnProperty(G)){F[G]=n(E[G])}}E=F}return v(E)};v.equals=function(F,E){if(!F||!E){return false}return v(F).toHexString()==v(E).toHexString()};function D(G,F,E){return{r:t(G,255)*255,g:t(F,255)*255,b:t(E,255)*255}}function p(E,I,K){E=t(E,255);I=t(I,255);K=t(K,255);var L=w(E,I,K),G=o(E,I,K);var H,M,F=(L+G)/2;if(L==G){H=M=0}else{var J=L-G;M=F>0.5?J/(2-L-G):J/(L+G);switch(L){case E:H=(I-K)/J+(I<K?6:0);break;case I:H=(K-E)/J+2;break;case K:H=(E-I)/J+4;break}H/=6}return{h:H,s:M,l:F}}function z(E,H,J){E=t(E,255);H=t(H,255);J=t(J,255);var K=w(E,H,J),F=o(E,H,J);var G,M,L=K;var I=K-F;M=K===0?0:I/K;if(K==F){G=0}else{switch(K){case E:G=(H-J)/I+(H<J?6:0);break;case H:G=(J-E)/I+2;break;case J:G=(E-H)/I+4;break}G/=6}return{h:G,s:M,v:L}}function u(I,P,N){I=t(I,360)*6;P=t(P,100);N=t(N,100);var H=A.floor(I),K=I-H,G=N*(1-P),F=N*(1-K*P),O=N*(1-(1-K)*P),M=H%6,E=[N,F,G,G,O,N][M],J=[O,N,N,F,G,G][M],L=[G,G,O,N,N,F][M];return{r:E*255,g:J*255,b:L*255}}function x(G,F,E){return[C(s(G).toString(16)),C(s(F).toString(16)),C(s(E).toString(16))].join("")}function C(E){return E.length==1?"0"+E:""+E}function t(H,F){var E=typeof H=="string";if(E&&H.indexOf(".")!=-1&&parseFloat(H)===1){H="100%"}var G=E&&H.indexOf("%")!=-1;H=o(F,w(0,parseFloat(H)));if(G){H=parseInt(H*F,10)/100}if(A.abs(H-F)<0.000001){return 1}return(H%F)/parseFloat(F)}function n(E){return E<=1?(E*100)+"%":E}var q=(function(){var E="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)";return{rgb:new RegExp("rgb[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?"),hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function B(E){E=E.replace(r,"").replace(y,"").toLowerCase();var F;if(F=q.rgb.exec(E)){return{r:F[1],g:F[2],b:F[3]}}if(F=q.hex6.exec(E)){return{r:parseInt(F[1],16),g:parseInt(F[2],16),b:parseInt(F[3],16)}}return false}f.tinycolor=v})()})(window,jQuery);myt.Dimmer=new JS.Class("Dimmer",myt.View,{include:[myt.SizeToParent],extend:{DEFAULT_OPACITY:0.35,DEFAULT_COLOR:"#000000"},initNode:function(c,a){this.restoreFocus=true;a.focusable=a.focusCage=true;if(a.percentOfParentWidth===undefined){a.percentOfParentWidth=100}if(a.percentOfParentHeight===undefined){a.percentOfParentHeight=100}if(a.visible===undefined){a.visible=false}if(a.ignoreLayout===undefined){a.ignoreLayout=true}this.callSuper(c,a);this.attachDomObserver(this,"eatMouseEvent","mouseover");this.attachDomObserver(this,"eatMouseEvent","mouseout");this.attachDomObserver(this,"eatMouseEvent","mousedown");this.attachDomObserver(this,"eatMouseEvent","mouseup");this.attachDomObserver(this,"eatMouseEvent","click");this.attachDomObserver(this,"eatMouseEvent","dblclick");this.attachDomObserver(this,"eatMouseEvent","mousemove");myt.RootView.setupCaptureDrop(this)},doBeforeAdoption:function(){this.callSuper();var a=myt.Dimmer;new myt.View(this,{name:"overlay",ignorePlacement:true,opacity:a.DEFAULT_OPACITY,bgColor:a.DEFAULT_COLOR,percentOfParentWidth:100,percentOfParentHeight:100},[myt.SizeToParent])},destroyAfterOrphaning:function(){myt.RootView.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(a){this.restoreFocus=a},eatMouseEvent:function(a){return true},show:function(){var a=myt.global.focus;this.prevFocus=a.focusedView||a.focusedDom;this.makeHighestZIndex();if(this.focusable){this.focus()}this.setVisible(true)},hide:function(a){this.setVisible(false);if(!a&&this.restoreFocus&&this.prevFocus){this.prevFocus.focus()}}});myt.ModalPanel=new JS.Class("ModalPanel",myt.Dimmer,{extend:{DEFAULT_PADDING_X:20,DEFAULT_PADDING_Y:15},initNode:function(c,a){this.defaultPlacement="content";this.callSuper(c,a)},doBeforeAdoption:function(){this.callSuper();var a=new myt.View(this,{name:"content",ignorePlacement:true,align:"center",valign:"middle"});var c=myt.ModalPanel;new myt.SizeToChildren(a,{name:"sizeToChildren",axis:"both",paddingX:c.DEFAULT_PADDING_X,paddingY:c.DEFAULT_PADDING_Y})}});myt.Spinner=new JS.Class("Spinner",myt.View,{initNode:function(c,a){this.lines=12;this.length=7;this.lineWidth=5;this.radius=10;this.corners=1;this.lineColor="#000000";this.direction=this.speed=1;this.trail=100;this.lineOpacity=0.25;if(a.visible===undefined){a.visible=false}this.callSuper(c,a);if(this.visible){this.__show()}},destroyBeforeOrphaning:function(){this.__hide();this.callSuper()},setLines:function(a){this.lines=a},setLength:function(a){this.length=a},setLineWidth:function(a){this.lineWidth=a},setRadius:function(a){this.radius=a},setCorners:function(a){this.corners=a},setLineColor:function(a){this.lineColor=a},setDirection:function(a){this.direction=a},setSpeed:function(a){this.speed=a},setTrail:function(a){this.trail=a},setLineOpacity:function(a){this.lineOpacity=a},setVisible:function(a){this.callSuper(a);if(this.inited){if(this.visible){this.__show()}else{this.__hide()}}},getSize:function(){return 2*(this.radius+this.length+this.lineWidth)},__show:function(){var c=this.__spinner||(this.__spinner=new myt.Spinner.FACTORY({lines:this.lines,length:this.length,width:this.lineWidth,radius:this.radius,corners:this.corners,color:this.lineColor,direction:this.direction,speed:this.speed,trail:this.trail,opacity:this.lineOpacity}));var a=this.getSize();this.setWidth(a);this.setHeight(a);c.spin(this.domElement)},__hide:function(){var a=this.__spinner;if(a){a.stop()}}});myt.Spinner.FACTORY=function(){var e=["webkit","Moz","ms","O"],m={},l;function g(o,r){var p=document.createElement(o||"div"),q;for(q in r){p[q]=r[q]}return p}function h(p){for(var o=1,q=arguments.length;o<q;o++){p.appendChild(arguments[o])}return p}var j=(function(){var n=g("style",{type:"text/css"});h(myt.getElement("head"),n);return n.sheet||n.styleSheet}());function d(r,n,s,v){var o=["opacity",n,~~(r*100),s,v].join("-"),p=0.01+s/v*100,u=Math.max(1-(1-r)/n*(100-p),r),t=l.substring(0,l.indexOf("Animation")).toLowerCase(),q=t&&"-"+t+"-"||"";if(!m[o]){j.insertRule("@"+q+"keyframes "+o+"{0%{opacity:"+u+"}"+p+"%{opacity:"+r+"}"+(p+0.01)+"%{opacity:1}"+(p+n)%100+"%{opacity:"+r+"}100%{opacity:"+u+"}}",j.cssRules.length);m[o]=1}return o}function k(q,r){var p=q.style,n,o;if(p[r]!==undefined){return r}r=r.charAt(0).toUpperCase()+r.slice(1);for(o=0;o<e.length;o++){n=e[o]+r;if(p[n]!==undefined){return n}}}function f(o,q){for(var p in q){o.style[k(o,p)||p]=q[p]}return o}function c(n){this.opts=n}c.prototype.spin=function(o){this.stop();var n=this.el=f(g(),{position:"relative",left:(o.offsetWidth>>1)+"px",top:(o.offsetHeight>>1)+"px"});o.insertBefore(n,null);this.lines(n,this.opts);return this};c.prototype.stop=function(){var n=this.el;if(n){if(n.parentNode){n.parentNode.removeChild(n)}this.el=undefined}return this};c.prototype.lines=function(q,s){var p=0,t=(s.lines-1)*(1-s.direction)/2,n;function r(o){return f(g(),{position:"absolute",width:(s.length+s.width)+"px",height:s.width+"px",background:o,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*p)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(;p<s.lines;p++){n=f(g(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:l&&d(s.opacity,s.trail,t+p*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"});h(q,h(n,r(s.color)))}return q};var a=f(g("group"));l=k(a,"animation");return c}();myt.Dialog=new JS.Class("Dialog",myt.ModalPanel,{extend:{DEFAULT_RADIUS:12,DEFAULT_SHADOW:[0,4,20,"#666666"],DEFAULT_BGCOLOR:"#ffffff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300},PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000"},setupDialog:function(a){var c=a.content;c.setRoundedCorners(this.DEFAULT_RADIUS);c.setBgColor(this.DEFAULT_BGCOLOR);c.setBoxShadow(this.DEFAULT_SHADOW);c.setFocusCage(true);this.createCloseButton(c,a)},createCloseButton:function(c,a,d,g,f,e){d=d||"#666666";g=g||"#000000";f=f||"#333333";e=e||"#ffffff";return new myt.DrawButton(c,{name:"closeBtn",width:16,height:16,y:4,roundedCorners:8,tooltip:"Close Dialog.",ignoreLayout:true,align:"right",alignOffset:4},[myt.TooltipMixin,{doActivated:function(){a.doCallback(this)},draw:function(k,j){k.clear();var h=j.bounds;if(h.w==0||h.h==0){return}var l;switch(j.state){case"hover":l=d;break;case"active":l=g;break;case"ready":case"disabled":default:l=f;break}k.beginPath();k.circle(8,8,8);k.closePath();k.setFillStyle(l);k.fill();k.beginPath();k.moveTo(8,6);k.lineTo(11,3);k.lineTo(13,5);k.lineTo(10,8);k.lineTo(13,11);k.lineTo(11,13);k.lineTo(8,10);k.lineTo(5,13);k.lineTo(3,11);k.lineTo(6,8);k.lineTo(3,5);k.lineTo(5,3);k.closePath();k.setFillStyle(e);k.fill()}}])}},doAfterAdoption:function(){myt.Dialog.setupDialog(this);this.callSuper()},setDisplayMode:function(a){this.displayMode=a},setCallbackFunction:function(a){this.callbackFunction=a},hide:function(a){this.__hideSpinner();this.callSuper(a)},__hideSpinner:function(){if(this.spinner){this.spinner.setVisible(false);this.spinner=undefined}},eatMouseEvent:function(a){if(this.displayMode==="message"){this.content.closeBtn.focus()}return this.callSuper(a)},__destroyContent:function(){this.__hideSpinner();var f=this.content,g=myt.ModalPanel,d=f.sizeToChildren,c=f.getSubviews(),e=c.length,a;while(e){a=c[--e];if(a.name!=="closeBtn"){a.destroy()}}f.setVisible(true);this.overlay.setBgColor(myt.Dimmer.DEFAULT_COLOR);this.setCallbackFunction();d.setPaddingY(g.DEFAULT_PADDING_Y);d.setPaddingX(g.DEFAULT_PADDING_X)},doCallback:function(a){var c=this.callbackFunction;if(!c||!c.call(this,a.name)){this.hide()}},showBlank:function(a){this.__destroyContent();this.content.setVisible(false);if(a&&a.bgColor){this.overlay.setBgColor(a.bgColor)}this.show();this.setDisplayMode("blank")},showMessage:function(g,a,d){d=$.extend({},myt.Dialog.WRAP_TEXT_DEFAULTS,d);var c=this.content,f=myt.ModalPanel;this.__destroyContent();this.setCallbackFunction(a);new myt.Text(c,{name:"msg",text:g,whiteSpace:d.whiteSpace,wordWrap:d.wordWrap,fontWeight:d.fontWeight,x:f.DEFAULT_PADDING_X,y:f.DEFAULT_PADDING_Y,width:d.width});this.show();var e=c.closeBtn;e.setVisible(true);e.focus();this.setDisplayMode("message")},showSpinner:function(f,c){c=$.extend({},myt.Dialog.NO_WRAP_TEXT_DEFAULTS,c);var a=this.content,d=myt.ModalPanel;this.__destroyContent();var e=this.spinner=new myt.Spinner(a,{align:"center",visible:true,radius:10,lines:12,length:14,lineWidth:3,y:d.DEFAULT_PADDING_Y});if(f){new myt.Text(a,{text:f,whiteSpace:c.whiteSpace,wordWrap:c.wordWrap,fontWeight:c.fontWeight,x:d.DEFAULT_PADDING_X,y:e.y+e.getSize()+d.DEFAULT_PADDING_Y,width:c.width})}this.show();a.closeBtn.setVisible(false);this.focus();this.setDisplayMode("spinner")},showColorPicker:function(h,c){var k=myt.ModalPanel,g=this.content;c=$.extend({},myt.Dialog.PICKER_DEFAULTS,c);this.__destroyContent();var j=function(n){switch(n){case"closeBtn":case"cancelBtn":h.call(this,n);break;case"confirmBtn":var m=this._spectrum.get();this._spectrum.addColorToSelectionPalette(m);h.call(this,n,m?m.toHexString():"transparent");break}this._spectrum.destroy()};this.setCallbackFunction(j);var f=new myt.View(g,{name:"picker",x:k.DEFAULT_PADDING_X,y:k.DEFAULT_PADDING_Y+24,width:337,height:177});var d=new myt.View(f,{});$(d.domElement).spectrum({color:c.color,palette:[["#000000","#111111","#222222","#333333","#444444","#555555","#666666","#777777"],["#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff"]],localStorageKey:"myt.default",dialog:this});this.show();var l=g.closeBtn;l.setVisible(true);l.focus();this.__setupConfirmButtons(f,c);var a=myt.Dialog.DEFAULT_RADIUS;var e=new myt.View(g,{ignoreLayout:true,x:0,y:0,width:g.width,height:24,bgColor:"#eeeeee",roundedTopLeftCorner:a,roundedTopRightCorner:a});e.sendToBack();new myt.Text(g,{name:"title",x:a,y:4,text:c.titleText,fontWeight:"bold"});this.setDisplayMode("color_picker")},_spectrumCallback:function(a){this._spectrum=a},showConfirm:function(d,a,c){c=$.extend({},myt.Dialog.CONFIRM_DEFAULTS,c);this.showMessage(d,a,c);this.__setupConfirmButtons(this.content.msg,c);this.setDisplayMode("confirm")},showContentConfirm:function(e,h,c){var j=myt.ModalPanel,f=this.content;c=$.extend({},myt.Dialog.CONFIRM_DEFAULTS,c);this.__destroyContent();f.sizeToChildren.setPaddingX(1);this.setCallbackFunction(h);var l=c.maxContainerHeight;var g=new myt.View(f,{name:"contentContainer",x:1,y:25,overflow:"auto"},[{setHeight:function(m){if(m>l){m=l}this.callSuper(m)}}]);e.call(this,g);new myt.SizeToChildren(g,{axis:"both"});this.show();var k=f.closeBtn;k.setVisible(true);k.focus();this.__setupConfirmButtons(g,c);var a=myt.Dialog.DEFAULT_RADIUS;var d=new myt.View(f,{ignoreLayout:true,x:0,y:0,width:f.width,height:24,bgColor:"#eeeeee",roundedTopLeftCorner:a,roundedTopRightCorner:a});d.sendToBack();new myt.Text(f,{name:"title",x:a,y:4,text:c.titleText,fontWeight:"bold"});this.setDisplayMode("content");if(g.initialFocus){g.initialFocus.focus()}},__setupConfirmButtons:function(j,c){var o=this,h=this.content,l=myt.ModalPanel,d=l.DEFAULT_PADDING_Y;var n=new myt.View(h,{y:j.y+j.height+d,align:"center"});var m={name:"cancelBtn",text:c.cancelTxt,shrinkToFit:true,height:20,inset:10,outset:10,roundedCorners:5,activeColor:"#bbbbbb",hoverColor:"#dddddd",readyColor:"#cccccc"};if(c.activeColor!==undefined){m.activeColor=c.activeColor}if(c.hoverColor!==undefined){m.hoverColor=c.hoverColor}if(c.readyColor!==undefined){m.readyColor=c.readyColor}if(c.textColor!==undefined){m.textColor=c.textColor}new myt.SimpleIconTextButton(n,m,[{doActivated:function(){o.doCallback(this)}}]);m.name="confirmBtn";m.text=c.confirmTxt;if(c.activeColorConfirm!==undefined){m.activeColor=c.activeColorConfirm}if(c.hoverColorConfirm!==undefined){m.hoverColor=c.hoverColorConfirm}if(c.readyColorConfirm!==undefined){m.readyColor=c.readyColorConfirm}if(c.textColorConfirm!==undefined){m.textColor=c.textColorConfirm}new myt.SimpleIconTextButton(n,m,[{doActivated:function(){o.doCallback(this)}}]);var k=c.buttons;if(k){for(var f=0,g=k.length;g>f;f++){m=k[f];if(m.name==null){m.name="btn_"+f}if(m.shrinkToFit==null){m.shrinkToFit=true}if(m.height==null){m.height=20}if(m.inset==null){m.inset=10}if(m.outset==null){m.outset=10}if(m.roundedCorners==null){m.roundedCorners=5}if(m.activeColor==null){m.activeColor="#bbbbbb"}if(m.hoverColor==null){m.hoverColor="#dddddd"}if(m.readyColor==null){m.readyColor="#cccccc"}if(m.textColor==null){m.textColor="#000000"}new myt.SimpleIconTextButton(n,m,[{doActivated:function(){o.doCallback(this)}}])}}new myt.SizeToChildren(n,{axis:"y"});new myt.SpacedLayout(n,{spacing:4,axis:"x",collapseParent:true});h.sizeToChildren.setPaddingY(d/2);var a=myt.Dialog.DEFAULT_RADIUS;var e=new myt.View(h,{ignoreLayout:true,x:0,y:n.y-(d/2),width:h.width,bgColor:"#eeeeee",roundedBottomLeftCorner:a,roundedBottomRightCorner:a});e.setHeight(h.height-e.y);e.sendToBack()}});myt.Validator=new JS.Class("Validator",{initialize:function(a){this.id=a},isValid:function(c,a,d){return true},isFormValid:function(c,a,d){if(!a){a={}}a.form=c;return this.isValid(c.getValue(),a,d)}});myt.CompoundValidator=new JS.Class("CompoundValidator",myt.Validator,{initialize:function(e){this.callSuper(e);var a=Array.prototype.slice.call(arguments);a.shift();var d=a.length,c;while(d){c=a[--d];if(typeof c==="string"){a[d]=c=myt.global.validators.getValidator(c);if(!c){a.splice(d,1)}}}this.__v=a},addValidator:function(a){if(typeof a==="string"){a=myt.global.validators.getValidator(a)}if(a){this.__v.push(a)}},isValid:function(f,d,h){var g=true,c=this.__v,a=c.length,e=0;for(;a>e;){g=c[e++].isValid(f,d,h)&&g}return g}});myt.EqualsIgnoreCaseValidator=new JS.Class("EqualsIgnoreCaseValidator",myt.Validator,{isValid:function(d,a,e){var c=a.form.getRollbackValue();if(d&&c&&d.toLowerCase()===c.toLowerCase()){if(e){e.push("Value must differ by more than just case.")}return false}return true}});myt.RequiredFieldValidator=new JS.Class("RequiredFieldValidator",myt.Validator,{isValid:function(c,a,d){if(c==null||c===""){if(d){d.push("This value is required.")}return false}return true}});myt.URI=new JS.Class("URI",{initialize:function(a,c){if(a){this.parse(a,c)}},setSource:function(a){this.source=a},setProtocol:function(a){this.protocol=a},setAuthority:function(a){this.authority=a},setUserInfo:function(a){this.userInfo=a},setUser:function(a){this.user=a},setPassword:function(a){this.password=a},setHost:function(a){this.host=a},setPort:function(a){this.port=a},setRelative:function(a){this.relative=a},setPath:function(a){this.path=a},setDirectory:function(a){this.directory=a},setFile:function(a){this.file=a},setQuery:function(a){this.query=a},setAnchor:function(a){this.anchor=a},parse:function(d,e){var a=myt.URI[e?"_looseParser":"_strictParser"].exec(d);this.setSource(a[0]||"");this.setProtocol(a[1]||"");this.setAuthority(a[2]||"");this.setUserInfo(a[3]||"");this.setUser(a[4]||"");this.setPassword(a[5]||"");this.setHost(a[6]||"");this.setPort(a[7]||"");this.setRelative(a[8]||"");this.setPath(a[9]||"");this.setDirectory(a[10]||"");this.setFile(a[11]||"");this.setQuery(a[12]||"");this.setAnchor(a[13]||"");this.queryPairs={};var c=this;this.query.replace(myt.URI._queryParser,function(g,f,h){if(f){c.queryPairs[f]=h}})},decodeQueryParam:function(a){a=decodeURIComponent(a);return a.replace("+"," ")},getQuery:function(){var d=this.queryPairs,e=[],a,c;for(a in d){e.push(a+"="+encodeURIComponent(d[a]))}c=e.join("&");return c.length>0?"?"+c:c},getQueryParam:function(c){var a=this.queryPairs[c];return a==null?undefined:this.decodeQueryParam(a)},getPathParts:function(a){var d=this.path.split("/");if(!a){var c=d.length;while(c){if(d[--c].length===0){d.splice(c,1)}}}return d},toString:function(){var j=this.protocol,f=this.host,a=this.userInfo,c=this.port,h=this.path,g=this.getQuery(),d=this.anchor,e="";if(j){e+=j+"://"}if(a&&f){e+=a+"@"}if(f){e+=f;if(c){e+=":"+c}}if(h){e+=h}else{if(f&&(g||d)){e+="/"}}if(g){e+=g}if(d){e+="#"+d}return e}});myt.URI._queryParser=/(?:^|&)([^&=]*)=?([^&]*)/g;myt.URI._strictParser=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/;myt.URI._looseParser=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;myt.URLValidator=new JS.Class("URLValidator",myt.Validator,{isValid:function(d,a,e){var c=new myt.URI(d);if(c.toString()!==d){if(e){e.push("Not a valid URL.")}return false}return true}});myt.JSONValidator=new JS.Class("JSONValidator",myt.Validator,{isValid:function(c,a,f){try{JSON.parse(c);return true}catch(d){if(f){f.push(d)}return false}}});new JS.Singleton("GlobalValidatorRegistry",{include:[myt.Observable],initialize:function(){this.__c={};myt.global.register("validators",this);this.register(new myt.RequiredFieldValidator("required"));this.register(new myt.EqualsIgnoreCaseValidator("equalsIgnoreCase"));this.register(new myt.URLValidator("url"));this.register(new myt.JSONValidator("json"))},getValidator:function(a){return this.__c[a]},register:function(a){if(a){var c=a.id;if(c){this.__c[c]=a;this.fireNewEvent("validatorAdded",a)}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No validator")}},unregister:function(a){if(a){var c=a.id;if(c){a=this.getValidator(c);if(a){delete this.__c[c];this.fireNewEvent("validatorRemoved",a);return true}}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No validator")}return false}});myt.EqualFieldsValidator=new JS.Class("EqualFieldsValidator",myt.Validator,{initialize:function(d,c,a){this.callSuper(d);this.fieldA=c;this.fieldB=a},isValid:function(c,a,d){if(c&&fieldA.getValue()===fieldB.getValue()){return true}if(d){d.push('Field "'+this.fieldA.key+'" must be equal to field "'+this.fieldB.key+'".')}return false}});myt.LengthValidator=new JS.Class("LengthValidator",myt.Validator,{initialize:function(d,c,a){this.callSuper(d);this.min=c;this.max=a},isValid:function(f,d,g){var c=f?f.length:0,e=this.min,a=this.max;if(e!==undefined&&e>c){if(g){g.push("Value must not be less than "+e+".")}return false}if(a!==undefined&&a<c){if(g){g.push("Value must not be greater than "+a+".")}return false}return true}});myt.NumericRangeValidator=new JS.Class("NumericRangeValidator",myt.Validator,{initialize:function(d,c,a){this.callSuper(d);this.min=c;this.max=a},isValid:function(e,c,g){if(e===""){return true}var f=Number(e),d=this.min,a=this.max;if(isNaN(f)){if(g){g.push("Value is not a number.")}return false}if(d!==undefined&&d>f){if(g){g.push("Value must not be less than "+d+".")}return false}if(a!==undefined&&a<f){if(g){g.push("Value must not be greater than "+a+".")}return false}return true}});myt.ValueProcessor=new JS.Class("ValueProcessor",{extend:{DEFAULT_ATTR:"runForDefault",ROLLBACK_ATTR:"runForRollback",CURRENT_ATTR:"runForCurrent"},initialize:function(f,c,d,e){this.id=f;var a=myt.ValueProcessor;this[a.DEFAULT_ATTR]=c?true:false;this[a.ROLLBACK_ATTR]=d?true:false;this[a.CURRENT_ATTR]=e?true:false},process:function(a){return a}});myt.ToNumberValueProcessor=new JS.Class("ToNumberValueProcessor",myt.ValueProcessor,{process:function(a){if(a==null||a===""||a==="-"){return a}var c=Number(a);return isNaN(c)?a:c}});myt.TrimValueProcessor=new JS.Class("TrimValueProcessor",myt.ValueProcessor,{initialize:function(f,c,d,e,a){this.callSuper(f,c,d,e);this.trim=a},process:function(a){a+="";if(this.trim==="left"){return a.trimLeft()}else{if(this.trim==="right"){return a.trimRight()}}return a.trim()}});myt.UndefinedValueProcessor=new JS.Class("UndefinedValueProcessor",myt.ValueProcessor,{initialize:function(f,c,d,e,a){this.callSuper(f,c,d,e);this.defaultValue=a},process:function(a){return a===undefined?this.defaultValue:a}});new JS.Singleton("GlobalValueProcessorRegistry",{include:[myt.Observable],initialize:function(){this.__c={};var a=myt;a.global.register("valueProcessors",this);this.register(new a.UndefinedValueProcessor("undefToEmpty",true,true,true,""));this.register(new a.ToNumberValueProcessor("toNumber",true,true,true));this.register(new a.TrimValueProcessor("trimLeft",true,true,true,"left"));this.register(new a.TrimValueProcessor("trimRight",true,true,true,"right"));this.register(new a.TrimValueProcessor("trimBoth",true,true,true,"both"))},getValueProcessor:function(a){return this.__c[a]},register:function(a){if(a){var c=a.id;if(c){this.__c[c]=a;this.fireNewEvent("processorAdded",a)}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No processor")}},unregister:function(a){if(a){var c=a.id;if(c){a=this.getValueProcessor(c);if(a){delete this.__c[c];this.fireNewEvent("processorRemoved",a);return true}}else{myt.dumpStack("No ID")}}else{myt.dumpStack("No processor")}return false}});myt.UseOtherFieldIfEmptyValueProcessor=new JS.Class("UseOtherFieldIfEmptyValueProcessor",myt.ValueProcessor,{initialize:function(f,a,d,e,c){this.callSuper(f,a,d,e);this.otherField=c},process:function(a){return(a==null||a==="")?this.otherField.getValue():a}});myt.InputSelect=new JS.Class("InputSelect",myt.NativeInputWrapper,{include:[myt.SizeHeightToDom],initNode:function(c,a){if(a.multiple===undefined){a.multiple=false}if(a.size===undefined){a.size=a.multiple?4:1}this.callSuper(c,a);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},createOurDomElement:function(a){var c=document.createElement("select");c.style.position="absolute";return c},setMultiple:function(a){if(this.multiple!==a){this.multiple=this.domElement.multiple=a;if(this.inited){this.fireNewEvent("multiple",a)}}},setSize:function(a){if(this.size!==a){this.size=this.domElement.size=a;if(this.inited){this.fireNewEvent("size",a)}}},setOptions:function(c){this.destroyAllOptions();if(Array.isArray(c)){for(var d=0,a=c.length;a>d;++d){this.addOption(c[d])}}},getOptions:function(){return this.getSubviews().concat()},setValue:function(a){if(Array.isArray(a)&&myt.areArraysEqual(a,this.value)){return}if(this.value!==a){this.value=a;if(this.inited){this.fireNewEvent("value",a)}}},subviewAdded:function(a){if(!(a instanceof myt.InputSelectOption)){myt.dumpStack("Subview not supported. Destroying it.");a.destroy()}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()},getSelectedOptions:function(){var c=this.getOptions(),d=c.length,e,a=[];while(d){e=c[--d];if(e.isSelected()){a.push(e)}}return a},getSelectedOptionValues:function(){var c=this.getOptions(),d=c.length,e,a=[];while(d){e=c[--d];if(e.isSelected()){a.push(e.value)}}return a},getOptionForValue:function(e){var a=this.getOptions(),c=a.length,d;while(c){d=a[--c];if(d.value===e){return d}}return null},addOption:function(a){new myt.InputSelectOption(this,a)},destroyAllOptions:function(){var a=this.getOptions(),c=a.length;while(c){a[--c].destroy()}},destroyOptionWithValue:function(c){var a=this.getOptionForValue(c);if(a){a.destroy();if(a.destroyed){return true}}return false},deselectAll:function(){var a=this.getOptions(),c=a.length,d,e=false;while(c){d=a[--c];if(d.isSelected()){d.setSelected(false);e=true}}if(e){this.__doChanged()}},selectValues:function(a){a=Array.isArray(a)?a:[a];var c=a.length;while(c){this.selectValue(a[--c])}},selectValue:function(a){this.select(this.getOptionForValue(a))},select:function(a){if(a&&a.canSelect(this)){a.setSelected(true);this.__syncToDom()}},deselectValue:function(a){this.deselect(this.getOptionForValue(a))},deselect:function(a){if(a&&a.canDeselect(this)){a.setSelected(false);this.__syncToDom()}},__doChanged:function(a){this.__syncToDom();this.doChanged()},doChanged:function(){},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}});myt.InputSelectOption=new JS.Class("InputSelectOption",myt.View,{include:[myt.Disableable,myt.Selectable],createOurDomElement:function(a){return document.createElement("option")},setSelected:function(a){if(a!==null&&typeof a==="object"){a=a.value}var c=this.domElement;if(c.selected!==a){c.selected=a}},setDisabled:function(a){if(this.disabled!==a){this.domElement.disabled=a;this.callSuper(a)}},setValue:function(a){if(this.value!==a){this.value=a;if(this.domElement.value!==a){this.domElement.value=a}if(this.inited){this.fireNewEvent("value",a)}}},setLabel:function(a){if(this.label!==a){this.domElement.textContent=this.label=a;if(this.inited){this.fireNewEvent("label",a)}}},isSelected:function(){return this.domElement.selected},canSelect:function(a){return !this.disabled&&!this.domElement.selected&&this.parent===a},canDeselect:function(a){return !this.disabled&&this.domElement.selected&&this.parent===a}});myt.FormInputSelect=new JS.Class("FormInputSelect",myt.InputSelect,{include:[myt.FormElement],setValue:function(c){if(this.__abortSetValue){return}var a=this.callSuper(c);this.__abortSetValue=true;this.deselectAll();this.selectValues(a);this.__abortSetValue=false;return a}});myt.FormRadioGroup=new JS.Class("FormRadioGroup",myt.Node,{include:[myt.ValueComponent,myt.FormElement],initNode:function(c,a){if(a.groupId===undefined){a.groupId=myt.generateGuid()}this.callSuper(c,a);if(this.value!==undefined){this.__updateGroupValue()}this.__startMonitoring()},setValue:function(c){var a=this.callSuper(c);if(this.inited){this.__updateGroupValue()}return a},setGroupId:function(a){if(this.groupId!==a){this.__stopMonitoring();this.groupId=a;if(this.inited){this.__startMonitoring()}}},__startMonitoring:function(){if(this.groupId){var a=this.__getBAG();if(a){this.syncTo(a,"__syncValue","trueNode")}}},__stopMonitoring:function(){if(this.groupId){var a=this.__getBAG();if(a){this.detachFrom(a,"__syncValue","trueNode")}}},__syncValue:function(a){this.setValue(a.value?a.value.optionValue:null)},__updateGroupValue:function(){var f=this.__getBAG();if(f){var c=f.getNodes(),d=c.length,e,a=this.value;while(d){e=c[--d];if(e.optionValue===a){f.setTrue(e);break}}}},__getBAG:function(){return myt.BAG.getGroup("selected",this.groupId)}});myt.FormCheckbox=new JS.Class("FormCheckbox",myt.Checkbox,{include:[myt.FormElement],initNode:function(c,a){this.rollbackValue=this.defaultValue=false;this.callSuper(c,a)}});myt.FormTextCheckbox=new JS.Class("FormTextCheckbox",myt.TextCheckbox,{include:[myt.FormElement],initNode:function(c,a){this.rollbackValue=this.defaultValue=false;this.callSuper(c,a)}});myt.FormInputTextMixin=new JS.Module("FormInputTextMixin",{include:[myt.FormElement,myt.UpdateableUI],initNode:function(c,a){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#ff9999";this.actionRequiredColor="#996666";this.normalColor="#999999";if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.borderWidth===undefined){a.borderWidth=1}if(a.borderStyle===undefined){a.borderStyle="solid"}if(a.focusEmbellishment===undefined){a.focusEmbellishment=true}this.callSuper(c,a);this.addValueProcessor(myt.global.valueProcessors.getValueProcessor("undefToEmpty"));this.attachToDom(this,"__handleKeyDown","keydown");this.attachToDom(this,"__handleKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(a){this.validateWhen=a},setAcceleratorScope:function(a){this.acceleratorScope=a},setErrorColor:function(a){this.errorColor=a},setActionRequiredColor:function(a){this.actionRequiredColor=a},setNormalColor:function(a){this.normalColor=a},setIsChanged:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setIsValid:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setValue:function(d){var c=this.callSuper(d);var a=this.validateWhen;if(a==="key"||a==="blurWithKeyFix"){this.verifyValidState()}return c},doAccept:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("submit");break;case"element":myt.global.focus.next(false);break;case"none":default:}}},doReject:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("cancel");break;case"element":this.rollbackForm();this.getRootForm().doValidation();if(this.form){this.form.verifyChangedState(this)}break;case"none":default:}}},__handleKeyDown:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===13){this.invokeAccelerator("accept")}},__handleKeyUp:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===27){this.invokeAccelerator("reject")}},doBlur:function(){this.callSuper();var a=this.validateWhen;if(a==="blur"||a==="blurWithKeyFix"){this.verifyValidState()}},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:(this.isChanged?this.errorColor:this.actionRequiredColor))}});myt.BaseInputText=new JS.Class("BaseInputText",myt.NativeInputWrapper,{include:[myt.TextSupport],initNode:function(c,a){if(a.bgColor===undefined){a.bgColor="transparent"}if(a.spellcheck===undefined){a.spellcheck=false}this.callSuper(c,a);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(a){this.callSuper(a);this.setValue(a)},setSpellcheck:function(a){if(this.spellcheck!==a){this.spellcheck=this.domElement.spellcheck=a;if(this.inited){this.fireNewEvent("spellcheck",a)}}},setMaxLength:function(a){if(a==null||0>a){a=undefined}if(this.maxLength!==a){this.maxLength=this.domElement.maxLength=a;if(this.inited){this.fireNewEvent("maxLength",a)}}},setAllowedChars:function(a){this.allowedChars=a},setPlaceholder:function(a){if(this.placeholder!==a){this.domElement.placeholder=this.placeholder=a;if(this.inited){this.fireNewEvent("placeholder",a)}}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow(myt.Button.DEFAULT_FOCUS_SHADOW_PROPERTY_VALUE)},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow()},__filterInput:function(a){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(e){var d=e.value,f=String.fromCharCode(d.which);var a=this.allowedChars;if(a&&a.indexOf(f)===-1){d.preventDefault()}this.filterInputPress(d)},filterInput:function(a){return a},filterInputPress:function(a){},__syncToDom:function(a){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){var a=document.selection.createRange();a.moveStart("character",-this.getDomValue().length);return a.text.length}return this.domElement.selectionStart||0},setCaretPosition:function(e,a){if(a===undefined||e===a){if(this.getCaretPosition()===e){return}a=e}var d=this.domElement;if(d.setSelectionRange){d.setSelectionRange(e,a)}else{if(d.createTextRange){var c=d.createTextRange();c.collapse(true);c.moveEnd("character",a);c.moveStart("character",e);c.select()}}},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.domElement.select()},getSelection:function(){var a=this.domElement;return{start:a.selectionStart,startElem:a,end:a.selectionEnd,endElem:a}},setSelection:function(a){if(a){this.setCaretPosition(a.start,a.end)}},saveSelection:function(a){this._selRange=a||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}});myt.InputText=new JS.Class("InputText",myt.BaseInputText,{include:[myt.SizeHeightToDom],initNode:function(c,a){this.inputType="text";this.callSuper(c,a);this.setCaretToEnd()}});myt.FormInputText=new JS.Class("FormInputText",myt.InputText,{include:[myt.FormInputTextMixin]});myt.ComboBox=new JS.Class("ComboBox",myt.InputText,{include:[myt.Activateable,myt.KeyActivation,myt.ListViewAnchor],initNode:function(c,a){this.filterItems=true;if(a.activationKeys===undefined){a.activationKeys=[13,27,38,40]}if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.borderWidth===undefined){a.borderWidth=1}if(a.borderStyle===undefined){a.borderStyle="solid"}if(a.floatingAlignOffset===undefined){a.floatingAlignOffset=a.borderWidth}if(a.listViewAttrs===undefined){a.listViewAttrs={maxHeight:99}}if(a.fullItemConfig===undefined){a.fullItemConfig=[]}this.callSuper(c,a)},setFullItemConfig:function(a){this.fullItemConfig=a},setFilterItems:function(a){this.filterItems=a},__syncToDom:function(c){var a=this.value;this.callSuper(c);if(a!==this.value){this.showFloatingPanel()}},showFloatingPanel:function(c){var h=this.getFloatingPanel(c);if(h){var g;if(this.filterItems){g=[];var d=this.value,m=d==null?"":(""+d).toLowerCase(),a=this.fullItemConfig,f=a.length,e=0,l,k,j;for(;f>e;){l=a[e++];k=l.attrs.text.toLowerCase();j=k.indexOf(m);if(j===0){if(k!==m){g.push(l)}}else{if(j>0){g.push(l)}}}}else{g=this.fullItemConfig}if(g.length>0){h.setMinWidth(this.width-2*this.borderWidth);this.setItemConfig(g);this.callSuper(c)}else{this.hideFloatingPanel(c)}}},doItemActivated:function(a){this.setValue(a.text);this.callSuper(a)},doActivated:function(){this.toggleFloatingPanel()}});myt.FormComboBox=new JS.Class("FormComboBox",myt.ComboBox,{include:[myt.FormElement,myt.UpdateableUI],initNode:function(c,a){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#ff9999";this.actionRequiredColor="#996666";this.normalColor="#999999";this.callSuper(c,a);this.addValueProcessor(myt.global.valueProcessors.getValueProcessor("undefToEmpty"));this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(a){this.validateWhen=a},setAcceleratorScope:function(a){this.acceleratorScope=a},setErrorColor:function(a){this.errorColor=a},setActionRequiredColor:function(a){this.actionRequiredColor=a},setNormalColor:function(a){this.normalColor=a},setIsChanged:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setIsValid:function(a){this.callSuper(a);if(this.inited){this.updateUI()}},setValue:function(d){var c=this.callSuper(d);var a=this.validateWhen;if(a==="key"||a==="blurWithKeyFix"){this.verifyValidState()}return c},doAccept:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("submit");break;case"element":myt.global.focus.next(false);break;case"none":default:}}},doReject:function(){if(!this.disabled){switch(this.acceleratorScope){case"root":this.getRootForm().invokeAccelerator("cancel");break;case"element":this.rollbackForm();this.getRootForm().doValidation();if(this.form){this.form.verifyChangedState(this)}break;case"none":default:}}},notifyPanelShown:function(a){this._isShown=true},notifyPanelHidden:function(a){this._isShown=false},doActivationKeyDown:function(c,a){if(c===27&&!this._isShown){this.invokeAccelerator("reject")}else{this.callSuper(c,a)}},doActivationKeyUp:function(a){if(a===13&&!this._isShown){this.invokeAccelerator("accept")}else{this.callSuper(a)}},doBlur:function(){this.callSuper();var a=this.validateWhen;if(a==="blur"||a==="blurWithKeyFix"){this.verifyValidState()}},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:(this.isChanged?this.errorColor:this.actionRequiredColor))}});myt.InputTextArea=new JS.Class("InputTextArea",myt.BaseInputText,{initNode:function(c,a){if(a.resize===undefined){a.resize="none"}if(a.wrap===undefined){a.wrap="soft"}this.callSuper(c,a)},createOurDomElement:function(a){var c=document.createElement("textarea");c.style.position="absolute";return c},setResize:function(a){if(this.resize!==a){this.resize=this.deStyle.resize=a||"none";if(this.inited){this.fireNewEvent("resize",a)}}},setWrap:function(a){if(this.wrap!==a){this.wrap=this.domElement.wrap=a;if(this.inited){this.fireNewEvent("wrap",a)}}}});myt.FormInputTextArea=new JS.Class("FormInputTextArea",myt.InputTextArea,{include:[myt.FormInputTextMixin],__handleKeyDown:function(a){},});myt.EditableText=new JS.Class("EditableText",myt.BaseInputText,{include:[myt.SizeToDom],initNode:function(c,a){if(a.whiteSpace===undefined){a.whiteSpace="pre"}if(a.contentEditable===undefined){a.contentEditable=true}this.callSuper(c,a);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},createOurDomElement:function(a){var c=document.createElement("div");c.style.position="absolute";return c},setMinWidth:function(a){this.__setProp(a,"minWidth")},setMinHeight:function(a){if(BrowserDetect.browser==="Firefox"){a+=2}this.__setProp(a,"minHeight")},setPadding:function(a){this.setPaddingTop(a);this.setPaddingRight(a);this.setPaddingBottom(a);this.setPaddingLeft(a)},setPaddingTop:function(a){this.__setProp(a,"paddingTop")},setPaddingRight:function(a){this.__setProp(a,"paddingRight")},setPaddingBottom:function(a){this.__setProp(a,"paddingBottom")},setPaddingLeft:function(a){this.__setProp(a,"paddingLeft")},__setProp:function(a,c){if(this[c]!==a){this[c]=a;this.deStyle[c]=a+"px";if(this.inited){this.fireNewEvent(c,a);this.sizeViewToDom()}}},setContentEditable:function(a){if(this.contentEditable!==a){this.contentEditable=this.domElement.contentEditable=a;if(this.inited){this.fireNewEvent("contentEditable",a)}}},filterInputPress:function(c){var a=this.maxLength;if(a>=0&&this.getCharacterCount()===a){c.preventDefault()}this.callSuper(c)},getDomValue:function(){return this.domElement.innerHTML},setDomValue:function(a){var c=this.domElement;if(c.innerHTML!==a){c.innerHTML=a;this.sizeViewToDom();this.restoreSelection()}},__cleanInput:function(a){if(myt.KeyObservable.getKeyCodeFromEvent(a)===13){a.value.preventDefault();if(this.whitespace!=="nowrap"){document.execCommand("insertHTML",false,this.isCaretAtEnd()?"\n\n":"\n")}}},__syncToDom:function(a){this.callSuper(a);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){var a=this.domElement.firstChild;return a?a.length:0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){var a=this.getSelection();return a?a.end:0},setCaretPosition:function(c,a){if(a===undefined||c===a){if(this.getCaretPosition()===c){return}a=c}this.saveSelection({start:c,startElem:this.domElement.firstChild,end:a,endElem:this.domElement.firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(a){this.saveSelection();return true},getSelection:function(){var a;if(window.getSelection){var c=window.getSelection();if(c.rangeCount>0){if(c.extentNode===this.domElement){return null}a=c.getRangeAt(0)}}else{if(document.selection){a=document.selection.createRange()}}return{start:a?a.startOffset:0,startElem:a?a.startContainer:this.domElement.firstChild,end:a?a.endOffset:0,endElem:a?a.endContainer:this.domElement.firstChild}},setSelection:function(e){if(e){var d=e.startElem,a=e.endElem;if(d&&d.parentNode&&a&&a.parentNode){var c=document.createRange();c.setStart(d,Math.min(e.start,d.length));c.setEnd(a,Math.min(e.end,a.length));if(window.getSelection){var f=window.getSelection();if(f.rangeCount>0){f.removeAllRanges()}f.addRange(c)}else{if(document.selection){c.select()}}}}}});myt.FormEditableText=new JS.Class("FormEditableText",myt.EditableText,{include:[myt.FormInputTextMixin],__handleKeyDown:function(a){if(this.whitespace==="nowrap"){this.callSuper(a)}},});myt.ScatterGraphPoint=new JS.Class("ScatterGraphPoint",{include:[myt.Selectable],initialize:function(e,a,d,c){this.setId(e);this.setX(a);this.setY(d);this.setConfig(c)},setId:function(a){this.id=a},setX:function(a){this.x=a},setY:function(a){this.y=a},setPx:function(a){this.px=a},setPy:function(a){this.py=a},setAx:function(a){this.ax=a},setAy:function(a){this.ay=a},setConfig:function(a){this.config=a},getTemplate:function(a){return a.getPointTemplate(this.selected?this.config.selectedTemplateKey:this.config.templateKey)},setData:function(a,d){var c=this._data;if(!c){this._data=c={}}c[a]=d},getData:function(a){return this._data?this._data[a]:undefined},prepareForAnimation:function(c,a){this.ax=c;this.ay=a;this._origX=this.x;this._origY=this.y;this._xAttrDiff=c-this.x;this._yAttrDiff=a-this.y;this._progress=0},updateForAnimation:function(c){if(Math.abs(this.x-this.ax)+Math.abs(this.y-this.ay)<1e-8){this.x=this.ax;this.y=this.ay;return false}this._progress+=c;if(this._progress>1000){this._progress=1000}var a=this.config.easingFunction||myt.Animator.easingFunctions.easeInOutQuad;this.x=this._origX+a(this._progress,this._xAttrDiff,1000);this.y=this._origY+a(this._progress,this._yAttrDiff,1000);return true}});myt.KDTreeNode=new JS.Class("KDTreeNode",{initialize:function(d,c,a){this.obj=d;this.left=null;this.right=null;this.parent=a;this.dimension=c}});myt.BinaryHeap=new JS.Class("BinaryHeap",{initialize:function(a){this.content=[];this.scoreFunction=a},push:function(a){this.content.push(a);this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0];var c=this.content.pop();if(this.content.length>0){this.content[0]=c;this.sinkDown(0)}return a},peek:function(){return this.content[0]},remove:function(e){var a=this.content.length;for(var d=0;d<a;d++){if(this.content[d]==e){var c=this.content.pop();if(d!=a-1){this.content[d]=c;if(this.scoreFunction(c)<this.scoreFunction(e)){this.bubbleUp(d)}else{this.sinkDown(d)}}return}}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){var a=this.content[e];while(e>0){var d=Math.floor((e+1)/2)-1,c=this.content[d];if(this.scoreFunction(a)<this.scoreFunction(c)){this.content[d]=a;this.content[e]=c;e=d}else{break}}},sinkDown:function(c){var a=this.content.length,g=this.content[c],j=this.scoreFunction(g);while(true){var f=(c+1)*2,l=f-1;var d=null;if(l<a){var k=this.content[l],m=this.scoreFunction(k);if(m<j){d=l}}if(f<a){var h=this.content[f],e=this.scoreFunction(h);if(e<(d==null?j:m)){d=f}}if(d!=null){this.content[c]=this.content[d];this.content[d]=g;c=d}else{break}}}});myt.KDTree=new JS.Class("KDTree",{extend:{EUCLIDEAN_METRIC:function(d,c){return Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)}},initialize:function(c,a,d){this.metric=a;this.dimensions=d;this.rebuildTree(c)},rebuildTree:function(a){this.root=this.buildTree(a,0,null)},buildTree:function(d,h,c){var f=this.dimensions,g=h%f.length,a,e;if(d.length===0){return null}if(d.length===1){return new myt.KDTreeNode(d[0],g,c)}d.sort(function(k,j){return k[f[g]]-j[f[g]]});a=Math.floor(d.length/2);e=new myt.KDTreeNode(d[a],g,c);e.left=this.buildTree(d.slice(0,a),h+1,e);e.right=this.buildTree(d.slice(a+1),h+1,e);return e},insert:function(a){var e=this.dimensions;function c(k,j,h){if(k===null){return j}var l=e[k.dimension];if(h[l]<k.obj[l]){return c(k.left,k,h)}else{return c(k.right,k,h)}}var f=c(this.root,null,a),d,g;if(f===null){this.root=new myt.KDTreeNode(a,0,null);return}d=new myt.KDTreeNode(a,(f.dimension+1)%e.length,f);g=e[f.dimension];if(a[g]<f.obj[g]){f.left=d}else{f.right=d}},nearest:function(h,g,c){var e,k,d,a=this.dimensions,j=this;d=new myt.BinaryHeap(function(l){return -l[1]});function f(p){var o,q=a[p.dimension],l=j.metric(h,p.obj),s={},n,t,r;function m(u,v){d.push([u,v]);if(d.size()>g){d.pop()}}for(r=0;r<a.length;r+=1){if(r===p.dimension){s[a[r]]=h[a[r]]}else{s[a[r]]=p.obj[a[r]]}}n=j.metric(s,p.obj);if(p.right===null&&p.left===null){if(d.size()<g||l<d.peek()[1]){m(p,l)}return}if(p.right===null){o=p.left}else{if(p.left===null){o=p.right}else{if(h[q]<p.obj[q]){o=p.left}else{o=p.right}}}f(o);if(d.size()<g||l<d.peek()[1]){m(p,l)}if(d.size()<g||Math.abs(n)<d.peek()[1]){if(o===p.left){t=p.right}else{t=p.left}if(t!==null){f(t)}}}if(c){for(e=0;e<g;e+=1){d.push([null,c])}}if(j.root){f(j.root)}k=[];for(e=0;e<g;e+=1){if(d.content[e][0]){k.push([d.content[e][0].obj,d.content[e][1]])}}return k},balanceFactor:function(){var c=this;function a(e){if(e===null){return 0}return Math.max(a(e.left),a(e.right))+1}function d(e){if(e===null){return 0}return d(e.left)+d(e.right)+1}return a(c.root)/(Math.log(d(c.root))/Math.log(2))},dump:function(){this._dump(this.root,"  ","root")},_dump:function(c,d,a){console.log(d+a+" "+c.dimension+": "+c.obj.id+" x:"+c.obj.x+" y:"+c.obj.y);if(c.left){this._dump(c.left,d+"  ","L")}if(c.right){this._dump(c.right,d+"  ","R")}}});myt.ScatterGraph=new JS.Class("ScatterGraph",myt.Canvas,{include:[myt.SelectionManager],extend:{createCircleTemplate:function(g,e,f,j,k,h){var j=j==null?0:j,a=g+j+1,d=new myt.Canvas(myt.global.roots.getRoots()[0],{width:2*a,height:2*a,visible:false});d.beginPath();d.circle(a,a,g);d.closePath();d.setFillStyle(e);d.setGlobalAlpha(f==null?1:f);d.fill();if(j>0){d.setGlobalAlpha(h==null?1:h);d.setStrokeStyle(k==null?e:k);d.setLineWidth(j);d.stroke()}var c=d.__canvas;c.centerX=c.centerY=a;d.destroy();return c},convertXPixelToValue:function(a,c){return(a-c.originX)/c.scaleDataX},convertYPixelToValue:function(a,c){return(a-c.originY)/c.scaleDataY},convertXValueToPixel:function(a,c){return Math.round((a*c.scaleDataX)+c.originX)},convertYValueToPixel:function(c,a){return Math.round((c*a.scaleDataY)+a.originY)},BASE_FILTER:function(c,a){return c.px<0||c.px>a.width||c.py<0||c.py>a.height}},initNode:function(f,d){this._pointTemplates={};this._animating=[];this._maxTemplateSizeSquared=0;this.drawnCount=this.drawnAnimatingCount=this.drawnCountTotal=0;if(d.data===undefined){d.data=[]}if(d.scaleDataX===undefined){d.scaleDataX=1}if(d.scaleDataY===undefined){d.scaleDataY=1}if(d.originX===undefined){d.originX=0}if(d.originY===undefined){d.originY=0}var g=myt.ScatterGraph;if(d.xConversionFuncPxToV===undefined){d.xConversionFuncPxToV=g.convertXPixelToValue}if(d.yConversionFuncPxToV===undefined){d.yConversionFuncPxToV=g.convertYPixelToValue}if(d.xConversionFuncVToPx===undefined){d.xConversionFuncVToPx=g.convertXValueToPixel}if(d.yConversionFuncVToPx===undefined){d.yConversionFuncVToPx=g.convertYValueToPixel}if(d.highlightColor===undefined){d.highlightColor="#000000"}if(d.highlightSelectedColor===undefined){d.highlightSelectedColor="#000000"}if(d.highlightWidth===undefined){d.highlightWidth=1}if(d.highlightOffset===undefined){d.highlightOffset=2}if(d.allowSelection===undefined){d.allowSelection=true}this.callSuper(f,d);var c=this.width,e=this.height,j=this.animationLayer,a=this.highlightLayer;j.setWidth(c);a.setWidth(c);j.setHeight(e);a.setHeight(e);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed();this.attachToDom(this,"_doMouseMove","mousemove")},doBeforeAdoption:function(){this.callSuper();new myt.Canvas(this,{name:"animationLayer"});new myt.Canvas(this,{name:"highlightLayer"})},setWidth:function(a){this.callSuper(a);if(this.inited){this.animationLayer.setWidth(a);this.highlightLayer.setWidth(a)}},setHeight:function(a){this.callSuper(a);if(this.inited){this.animationLayer.setHeight(a);this.highlightLayer.setHeight(a)}},setAllowSelection:function(a){if(this.allowSelection===a){return}this.allowSelection=a;if(this.inited){this.fireNewEvent("allowSelection",a)}if(a){this.attachToDom(this,"_doClick","click")}else{if(this.inited){this.detachFromDom(this,"_doClick","click")}}},setXConversionFuncPxToV:function(a){this.xConversionFuncPxToV=a},setYConversionFuncPxToV:function(a){this.yConversionFuncPxToV=a},setXConversionFuncVToPx:function(a){this.xConversionFuncVToPx=a},setYConversionFuncVToPx:function(a){this.yConversionFuncVToPx=a},setScaleDataX:function(a){if(this.scaleDataX===a){return}this.scaleDataX=a;if(this.inited){this.fireNewEvent("scaleDataX",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setScaleDataY:function(a){if(this.scaleDataY===a){return}this.scaleDataY=a;if(this.inited){this.fireNewEvent("scaleDataY",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setOriginX:function(a){if(this.originX===a){return}this.originX=a;if(this.inited){this.fireNewEvent("originX",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setOriginY:function(a){if(this.originY===a){return}this.originY=a;if(this.inited){this.fireNewEvent("originY",a);this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setScaleAndOrigin:function(e,d,c,a){var f=false;if(this.scaleDataX!==e){this.scaleDataX=e;f=true}if(this.scaleDataY!==d){this.scaleDataY=d;f=true}if(this.originX!==c){this.originX=c;f=true}if(this.originY!==a){this.originY=a;f=true}if(f){this.redrawPoints();this.redrawAnimatingPoints()}},setData:function(a){this.data=a;this._kdtree=a?new myt.KDTree(a,myt.KDTree.EUCLIDEAN_METRIC,["x","y"]):null;if(this.inited){this.redrawPointsDelayed()}},setAnimating:function(a){if(this.animating===a){return}this.animating=a;if(this.inited){if(a){this.attachTo(myt.global.idle,"__animate","idle")}else{this.detachFrom(myt.global.idle,"__animate","idle")}}},setHighlightedPoint:function(a){if(this.highlightedPoint===a){return}this.highlightedPoint=a;if(this.inited){this.fireNewEvent("highlightedPoint",a);this.drawHighlightedPoint()}},setHighlightColor:function(a){this.highlightColor=a},setHighlightSelectedColor:function(a){this.highlightSelectedColor=a},setHighlightWidth:function(a){this.highlightWidth=a},setHighlightOffset:function(a){this.highlightOffset=a},setFilter:function(a){this.filter=a;if(this.inited){this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}},setDrawnCount:function(a){this.drawnCount=a;this.setDrawnCountTotal(a+this.drawnAnimatingCount)},setDrawnAnimatingCount:function(a){this.drawnAnimatingCount=a;this.setDrawnCountTotal(a+this.drawnCount)},setDrawnCountTotal:function(a){if(this.drawnCountTotal!==a){this.drawnCountTotal=a;if(this.inited){this.fireNewEvent("drawnCountTotal",a)}}},getManagedItems:function(){return this.data.concat(this.animating)},getMinX:function(){return this.convertXPixelToValue(0)},getMinY:function(){return this.convertYPixelToValue(0)},getMaxX:function(){return this.convertXPixelToValue(this.width)},getMaxY:function(){return this.convertYPixelToValue(this.height)},_doClick:function(c){var d=this.highlightedPoint,e=this.isToggleMode(),a=this.isAddMode();if(d){if(e){d.selected?this.deselect(d):this.select(d)}else{if(a){this.select(d)}else{this.deselectAll();this.select(d)}}this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}else{if(this.selectedCount>0&&!e&&!a){this.deselectAll();this.redrawPointsDelayed();this.redrawAnimatingPointsDelayed()}}return true},_doMouseMove:function(c){var j=myt.MouseObservable.getMouseFromEventRelativeToView(c,this);j.x=this.convertXPixelToValue(j.x);j.y=this.convertYPixelToValue(j.y);var k=this._maxTemplateSizeSquared/this.scaleDataX;var d=this.nearest(j,1000,k);var g=d.length,e=g,o,l,a,n,m,f=myt.ScatterGraph.BASE_FILTER,p=0;while(e){o=d[--e];l=o[0];a=o[1];n=l.getTemplate(this);m=Math.max(n.centerX,n.centerY)/this.scaleDataX;if(a>(m*m)||f(l,this)||(this.filter&&this.filter(l,this))){d.splice(e,1)}else{p=p===0?m:Math.min(p,m)}}e=d.length;while(e){o=d[--e];l=o[0];n=l.getTemplate(this);m=Math.max(n.centerX,n.centerY)/this.scaleDataX;if(m!==p){d.splice(e,1)}}var h;if(d.length>0){d.sort(function(r,q){return r[1]-q[1]});h=d[0][0]}this.setHighlightedPoint(h);return true},nearest:function(a,c,d){if(this._kdtree){return this._kdtree.nearest(a,c,d)}else{return null}},drawHighlightedPoint:function(){var a=this.highlightLayer,d=this.highlightedPoint;a.clear();if(d){if(myt.ScatterGraph.BASE_FILTER(d,this)||(this.filter&&this.filter(d,this))){return}var c=d.getTemplate(this);a.beginPath();a.circle(d.px,d.py,c.centerX+this.highlightOffset);a.closePath();a.setLineWidth(this.highlightWidth);a.setStrokeStyle(d.selected?this.highlightSelectedColor:this.highlightColor);a.stroke()}},addDataPoint:function(a){this.data.push(a);this._kdtree.insert(a);this.drawPoint(a)},addDataPoints:function(a){this.data=this.data.concat(a);this.drawPoints(a);if(!this._lockRebuild){this._kdtree.rebuildTree(this.data)}},getDataPoint:function(c,a){return this._getDataPoint(this.data,c,a)},getAnimatingDataPoint:function(c,a){return this._getDataPoint(this._animating,c,a)},getAllDataPoints:function(g,f){var c=[];if(g){var e=this.data,d=e.length,a;while(d){a=e[--d];if(g.call(this,a,d)===!f){c.push(a)}}e=this._animating;d=e.length;while(d){a=e[--d];if(g.call(this,a,d)===!f){c.push(a)}}}else{c=this.data.concat(this._animating)}return c},_getDataPoint:function(f,g,a){var e=f.length,d,c=[];while(e){d=f[--e];if(g.call(this,d,e)){if(!a){return d}c.push(d)}}if(c.length===0){return null}return c},getDataPointById:function(c,a){return this._getDataPointsBy(function(e,d){return e.id===c},a)},_getDataPointsBy:function(d,c,a){if(c==="animating"){return this.getDataPoint(d,a)}else{if(c==="still"){return this.getAnimatingDataPoint(d,a)}else{if(a){return this._getDataPoint(this.getAllDataPoints(),d,true)}else{return this.getDataPoint(d,a)||this.getAnimatingDataPoint(d,a)}}}},getDataPointsInsideCircle:function(g,f,a,c,d){var e=myt.Geometry[c?"circleContainsLatLng":"circleContainsPoint"];e=e.bind(myt.Geometry);if(!d){d=this.getAllDataPoints()}return this._getDataPoint(d,function(j,h){return e(j.y,j.x,f,g,a)},true)},getDataPointsInsidePolygon:function(d,a){var c=d.getBoundingBox(),e=d.vectors;if(!a){a=this.getAllDataPoints()}return this._getDataPoint(a,function(g,f){return myt.Geometry.isPointInPath(g.x,g.y,c,e)},true)},removeAllDataPoints:function(){var a=this.data;a.length=0;this._animating.length=0;this._kdtree.rebuildTree(a);this.setHighlightedPoint(null);this.deselectAll();this.redrawPoints(true);this.redrawAnimatingPoints(true)},removeDataPoint:function(d,a){var c=this._removeDataPoint(this.data,d,a);if(c){this.redrawPoints(true)}return c},removeAnimatingDataPoint:function(d,a){var c=this._removeDataPoint(this._animating,d,a);if(c){this.redrawAnimatingPoints(true)}return c},_removeDataPoint:function(f,g,a){var e=f.length,d,c=[];while(e){d=f[--e];if(g.call(this,d,e)){f.splice(e,1);if(!this._lockRebuild&&this.data===f){this._kdtree.rebuildTree(this.data)}if(this.highlightedPoint===d){this.setHighlightedPoint(null)}if(!a){return d}c.push(d)}}return c.length===0?null:c},removeDataPointById:function(c,a){return this._removeDataPointBy(function(e,d){return e.id===c},a)},removeDataPointsById:function(f){var d=f.length,g,e,a=false,c=false;this._lockDraw=this._lockRebuild=true;while(d){g=f[--d];e=function(j,h){return j.id===g};if(this.removeDataPoint(e)){a=true}else{if(this.removeAnimatingDataPoint(e)){c=true}}}this._lockDraw=this._lockRebuild=false;if(a){this.redrawPoints(true);this._kdtree.rebuildTree(this.data)}if(c){this.redrawAnimatingPoints(true)}},removeDataPointByIndex:function(a,c){return this._removeDataPointBy(function(e,d){return d===a},c)},removeDataPointByEquality:function(a,c){return this._removeDataPointBy(function(e,d){return e===a},c)},_removeDataPointBy:function(c,a){if(a==="animating"){return this.removeDataPoint(c)}else{if(a==="still"){return this.removeAnimatingDataPoint(c)}else{return this.removeDataPoint(c)||this.removeAnimatingDataPoint(c)}}},removeDataPointInsideBounds:function(a,f,c,d,e){return this.removeDataPoint(function(h,g){if(e){return(h.x>=a)&&(h.x<=a+c)&&(h.y>=f)&&(h.y<=f+d)}else{return(h.x>a)&&(h.x<a+c)&&(h.y>f)&&(h.y<f+d)}},true)},removeDataPointOutsideBounds:function(a,f,c,d,e){return this.removeDataPoint(function(h,g){if(e){return(h.x<=a)||(h.x>=a+c)||(h.y<=f)||(h.y>=f+d)}else{return(h.x<a)||(h.x>a+c)||(h.y<f)||(h.y>f+d)}},true)},addPointTemplate:function(a,c){this._pointTemplates[a]=c;this._recalcMaxTemplateSizeSquared()},getPointTemplate:function(a){return this._pointTemplates[a]},removePointTemplate:function(c){var a=this._pointTemplates[c];delete this._pointTemplates[c];this._recalcMaxTemplateSizeSquared();return a},_recalcMaxTemplateSizeSquared:function(){var a=0,d,c=this._pointTemplates,e;for(d in c){e=c[d];a=Math.max(a,Math.max(e.centerX,e.centerY))}this._maxTemplateSizeSquared=a*a},convertXPixelToValue:function(a){return this.xConversionFuncPxToV(a,this)},convertYPixelToValue:function(a){return this.yConversionFuncPxToV(a,this)},convertXValueToPixel:function(a){return this.xConversionFuncVToPx(a,this)},convertYValueToPixel:function(a){return this.yConversionFuncVToPx(a,this)},convertPointToPixels:function(a){a.setPx(this.convertXValueToPixel(a.x));a.setPy(this.convertYValueToPixel(a.y))},convertPointsToPixels:function(c){var a=c.length;while(a){this.convertPointToPixels(c[--a])}},drawPoint:function(e,c,a){if(!this._lockDraw){if(!c){c=this.__ctx}if(!a){this.convertPointToPixels(e)}if(myt.ScatterGraph.BASE_FILTER(e,this)||(this.filter&&this.filter(e,this))){return}var d=e.getTemplate(this);c.drawImage(d,e.px-d.centerX,e.py-d.centerY)}},drawPoints:function(e,c,d){var k=0;if(!this._lockDraw){var f=e.length,a,m=this._pointTemplates,n,l=this.width,g=this.height,j=myt.ScatterGraph.BASE_FILTER;if(!c){c=this.__ctx}if(!d){this.convertPointsToPixels(e)}while(f){a=e[--f];if(j(a,this)||(this.filter&&this.filter(a,this))){continue}n=a.getTemplate(this);c.drawImage(n,a.px-n.centerX,a.py-n.centerY);++k}}return k},redrawPoints:function(a){this.clear();var c=this.drawPoints(this.data,this.__ctx,a);this.drawHighlightedPoint();this.setDrawnCount(c)},redrawAnimatingPoints:function(a){this.animationLayer.clear();var c=this.drawPoints(this._animating,this.animationLayer.__ctx,a);this.drawHighlightedPoint();this.setDrawnAnimatingCount(c)},animatePoints:function(d){this._lockDraw=this._lockRebuild=true;var e=this._animating.length,a=d.length,c=0;if(a%3===0){while(a>c){this.animatePoint(d[c++],d[c++],d[c++])}}this._lockDraw=this._lockRebuild=false;this.redrawAnimatingPoints(true);if(this._animating.length!==e){this.redrawPoints(true)}if(this._kdtree){this._kdtree.rebuildTree(this.data)}},animatePoint:function(c,a,d){if(c){c.prepareForAnimation(a,d);this.removeDataPointByEquality(c);this._animating.push(c);this.setAnimating(true)}},__animate:function(e){var d=this._animating,c=d.length,a,f=e.value.delta;while(c){a=d[--c];if(!a.updateForAnimation(f)){d.splice(c,1);this.addDataPoint(a)}}this.redrawAnimatingPoints();if(d.length===0){this.setAnimating(false)}},countDataPoints:function(a){if(a){return this.getAllDataPoints(a).length}else{return this._animating.length+this.data.length}}});myt.DelayedMethodCall.createDelayedMethodCall(myt.ScatterGraph,0,"redrawPoints");myt.DelayedMethodCall.createDelayedMethodCall(myt.ScatterGraph,0,"redrawAnimatingPoints");myt.BoundedValueComponent=new JS.Module("BoundedValueComponent",{include:[myt.ValueComponent],initNode:function(d,c){if(c.snapToInt===undefined){c.snapToInt=true}if(!c.valueFilter){var a=this;c.valueFilter=function(f){var e=a.maxValue;if(e!=null&&f>e){return e}var g=a.minValue;if(g!=null&&f<g){return g}return f}}this.callSuper(d,c)},setSnapToInt:function(a){if(this.snapToInt!==a){this.snapToInt=a;if(this.inited){this.fireNewEvent("snapToInt",a);if(a){this.setMinValue(this.minValue);this.setMaxValue(this.maxValue);this.setValue(this.value)}}}},setMinValue:function(c){if(c!=null&&this.snapToInt){c=Math.round(c)}if(this.minValue!==c){var a=this.maxValue;if(a!=null&&c>a){c=a}this.minValue=c;if(this.inited){this.fireNewEvent("minValue",c);this.setValue(this.value)}}},setMaxValue:function(a){if(a!=null&&this.snapToInt){a=Math.round(a)}if(this.maxValue!==a){var c=this.minValue;if(c!=null&&a<c){a=c}this.maxValue=a;if(this.inited){this.fireNewEvent("maxValue",a);this.setValue(this.value)}}},setValue:function(a){this.callSuper(this.snapToInt&&a!=null&&!isNaN(a)?Math.round(a):a)}});new JS.Singleton("GlobalDragManager",{include:[myt.Observable],initialize:function(){this.dropTargets=[];this.autoScrollers=[];myt.global.register("dragManager",this)},setDragView:function(e){var j=this.dragView;if(j!==e){this.dragView=e;var c=!!e,a,g,f,h,d;if(c){f=e;h="notifyDragStart";d="startDrag"}else{f=j;h="notifyDragStop";d="stopDrag"}a=this.__filterList(f,this.dropTargets);g=a.length;while(g){a[--g][h](f)}a=this.__filterList(f,this.autoScrollers);g=a.length;while(g){a[--g][h](f)}this.fireNewEvent(d,e)}},setOverView:function(a){var d=this.overView;if(d!==a){var c=this.dragView;if(d){d.notifyDragLeave(c);c.notifyDragLeave(d);this.fireNewEvent("dragLeave",d)}this.overView=a;if(a){a.notifyDragEnter(c);c.notifyDragEnter(a);this.fireNewEvent("dragEnter",d)}}},registerAutoScroller:function(a){this.autoScrollers.push(a)},unregisterAutoScroller:function(d){var a=this.autoScrollers,c=a.length;while(c){if(a[--c]===d){a.splice(c,1);break}}},registerDropTarget:function(a){this.dropTargets.push(a)},unregisterDropTarget:function(d){var c=this.dropTargets,a=c.length;while(a){if(c[--a]===d){c.splice(a,1);break}}},startDrag:function(a){this.setDragView(a)},stopDrag:function(e,c,a){var d=this.overView;c.notifyDrop(d,a);if(d&&!a){d.notifyDrop(c)}this.setOverView();this.setDragView();if(d&&!a){this.fireNewEvent("drop",[c,d])}},updateDrag:function(f,d){var j,g=this.__filterList(d,this.dropTargets);i=g.length;if(i>0){var a=f.value,e=a.pageX,c=a.pageY,h;while(i){h=g[--i];if(h.willAcceptDrop(d)&&d.willPermitDrop(h)&&h.isPointVisible(e,c)&&(!j||h.isInFrontOf(j))){j=h}}}this.setOverView(j)},__filterList:function(d,h){var c;if(d.acceptAnyDragGroup()){c=h}else{c=[];var f=d.getDragGroups(),e=h.length,g,a,j;while(e){g=h[--e];if(g.acceptAnyDragGroup()){c.push(g)}else{a=g.getDragGroups();for(j in f){if(a[j]){c.push(g);break}}}}}return c},});myt.Draggable=new JS.Module("Draggable",{initNode:function(d,a){this.isDraggable=this.isDragging=false;this.draggableAllowBubble=true;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;var c=true;if(a.isDraggable!==undefined){c=a.isDraggable;delete a.isDraggable}this.callSuper(d,a);this.setIsDraggable(c)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;var f;if(a){f=this.attachToDom}else{if(this.inited){f=this.detachFromDom}}if(f){var e=this.getDragViews(),d,c=e.length;while(c){d=e[--c];f.call(this,d,"__doMouseDown","mousedown");f.call(this,d,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){if(this.isDragging!==a){this.isDragging=a;if(this.inited){this.fireNewEvent("isDragging",a)}}},setDragOffsetX:function(a,c){if(this.dragOffsetX!==a){this.dragOffsetX=a;if(this.inited&&this.isDragging&&!c){this.__requestDragPosition()}}},setDragOffsetY:function(a,c){if(this.dragOffsetY!==a){this.dragOffsetY=a;if(this.inited&&this.isDragging&&!c){this.__requestDragPosition()}}},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},getDragViews:function(){return[this]},__doContextMenu:function(a){},__doMouseDown:function(a){var d=myt.MouseObservable.getMouseFromEvent(a);this.dragInitX=d.x-this.x;this.dragInitY=d.y-this.y;var c=myt.global.mouse;this.attachToDom(c,"__doMouseUp","mouseup",true);if(this.distanceBeforeDrag>0){this.attachToDom(c,"__doDragCheck","mousemove",true)}else{this.startDrag(a)}a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){if(this.isDragging){this.stopDrag(a,false)}else{var c=myt.global.mouse;this.detachFromDom(c,"__doMouseUp","mouseup",true);this.detachFromDom(c,"__doDragCheck","mousemove",true)}return this.draggableAllowBubble},__watchForAbort:function(a){if(a.value===27){this.stopDrag(a,true)}},__doDragCheck:function(a){var d=myt.MouseObservable.getMouseFromEvent(a),c=myt.Geometry.measureDistance(d.x,d.y,this.dragInitX+this.x,this.dragInitY+this.y);if(c>=this.distanceBeforeDrag){this.detachFromDom(myt.global.mouse,"__doDragCheck","mousemove",true);this.startDrag(a)}},startDrag:function(c){if(this.centerOnMouse){this.syncTo(this,"__updateDragInitX","width");this.syncTo(this,"__updateDragInitY","height")}var a=myt.global;if(this.allowAbort){this.attachTo(a.keys,"__watchForAbort","keyup")}this.setIsDragging(true);this.attachToDom(a.mouse,"updateDrag","mousemove",true);this.updateDrag(c)},updateDrag:function(a){this.__lastMousePosition=myt.MouseObservable.getMouseFromEvent(a);this.__requestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},__requestDragPosition:function(){var a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+this.dragOffsetY)},stopDrag:function(d,a){var c=myt.global,e=c.mouse;this.detachFromDom(e,"__doMouseUp","mouseup",true);this.detachFromDom(e,"updateDrag","mousemove",true);if(this.centerOnMouse){this.detachFrom(this,"__updateDragInitX","width");this.detachFrom(this,"__updateDragInitY","height")}if(this.allowAbort){this.detachFrom(c.keys,"__watchForAbort","keyup")}this.setIsDragging(false)},requestDragPosition:function(a,c){if(!this.disabled){this.setX(a);this.setY(c)}}});myt.SliderThumbMixin=new JS.Module("SliderThumbMixin",{include:[myt.Draggable],initNode:function(c,a){if(a.width===undefined){a.width=c.thumbWidth}if(a.height===undefined){a.height=c.thumbHeight}if(a.repeatKeyDown===undefined){a.repeatKeyDown=true}if(a.activationKeys===undefined){a.activationKeys=[37,38,39,40]}this.callSuper(c,a);if(c.axis==="x"){this.setY(c.thumbOffset)}else{this.setX(c.thumbOffset)}this.syncTo(c,"setDisabled","disabled");c._syncThumbToValue(this,c.getValue())},setDisabled:function(a){if(a!==null&&typeof a==="object"){a=a.value}this.callSuper(a)},setFocused:function(a){this.callSuper(a);if(a){this.makeHighestZIndex()}},setX:function(a){if(this.x!==a){this.callSuper(a);if(this.parent.axis==="x"){this.parent._syncValueToThumb(this)}}},setY:function(a){if(this.y!==a){this.callSuper(a);if(this.parent.axis==="y"){this.parent._syncValueToThumb(this)}}},requestDragPosition:function(a,j){if(!this.disabled){var e=this.parent,d=e.getMinPixelValueForThumb(this),h=e.getMaxPixelValueForThumb(this),c,g,f;if(e.axis==="x"){c=this.width/2;g=a;f=this.setX}else{c=this.height/2;g=j;f=this.setY}f.call(this,Math.min(Math.max(g,d-c),h-c))}},doActivationKeyDown:function(c,a){var d=this.parent;switch(c){case 37:d.nudgeValueLeft(this);break;case 38:d.nudgeValueUp(this);break;case 39:d.nudgeValueRight(this);break;case 40:d.nudgeValueDown(this);break}this.callSuper(c,a)}});myt.SimpleSliderThumb=new JS.Class("SimpleSliderThumb",myt.SimpleButton,{include:[myt.SliderThumbMixin],initNode:function(c,a){if(a.activeColor===undefined){a.activeColor="#bbbbbb"}if(a.readyColor===undefined){a.readyColor="#cccccc"}if(a.hoverColor===undefined){a.hoverColor="#dddddd"}if(a.boxShadow===undefined){a.boxShadow=[0,0,4,"#666666"]}this.callSuper(c,a);if(a.roundedCorners===undefined){this.setRoundedCorners(Math.min(this.height,this.width)/2)}},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow([0,0,9,"#666666"])},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment();this.setBoxShadow([0,0,4,"#666666"])}});myt.BaseSlider=new JS.Class("BaseSlider",myt.View,{include:[myt.Disableable],initNode:function(c,a){if(a.axis===undefined){a.axis="x"}if(a.axis==="x"){if(a.width===undefined){a.width=100}if(a.height===undefined){a.height=18}}else{if(a.width===undefined){a.width=18}if(a.height===undefined){a.height=100}}if(a.bgColor===undefined){a.bgColor="#999999"}if(a.roundedCorners===undefined){a.roundedCorners=9}if(a.trackInset===undefined){a.trackInset=9}if(a.trackOutset===undefined){a.trackOutset=9}if(a.thumbWidth===undefined){a.thumbWidth=16}if(a.thumbHeight===undefined){a.thumbHeight=16}if(a.thumbOffset===undefined){a.thumbOffset=1}if(a.nudgeAmount===undefined){a.nudgeAmount=1}if(a.thumbClass===undefined){a.thumbClass=myt.SimpleSliderThumb}this.callSuper(c,a)},setAxis:function(a){this.axis=a},setTrackInset:function(a){this.trackInset=a},setTrackOutset:function(a){this.trackOutset=a},setThumbWidth:function(a){this.thumbWidth=a},setThumbHeight:function(a){this.thumbHeight=a},setThumbOffset:function(a){this.thumbOffset=a},setThumbClass:function(a){this.thumbClass=a},setNudgeAmount:function(a){this.nudgeAmount=a},convertValueToPixels:function(c){var a=this.minValue,d=this.trackInset,f=(this.axis==="x"?this.width:this.height)-d-this.trackOutset,e=this.maxValue-a;return d+((c-a)*(f/e))},convertPixelsToValue:function(c){var a=this.minValue,d=this.trackInset,f=(this.axis==="x"?this.width:this.height)-d-this.trackOutset,e=this.maxValue-a;return((c-d)*(e/f))+a},nudgeValueLeft:function(a){this._nudge(a,false)},nudgeValueUp:function(a){this._nudge(a,false)},nudgeValueRight:function(a){this._nudge(a,true)},nudgeValueDown:function(a){this._nudge(a,true)},_nudge:function(c,a){},_syncThumbToValue:function(a,c){c=this.convertValueToPixels(c);if(this.axis==="x"){a.setX(c-a.width/2)}else{a.setY(c-a.height/2)}}});myt.Slider=new JS.Class("Slider",myt.BaseSlider,{include:[myt.BoundedValueComponent],doAfterAdoption:function(){new this.thumbClass(this,{name:"thumb"});this.callSuper()},setValue:function(a){this.callSuper(a);if(this.inited&&!this.__lockSync){this._syncThumbToValue(this.thumb,this.getValue())}},setWidth:function(a,d){var c=this.width;this.callSuper(a,d);if(this.inited&&this.axis==="x"&&this.width!==c){this._syncThumbToValue(this.thumb,this.getValue())}},setHeight:function(a,d){var c=this.height;this.callSuper(a,d);if(this.inited&&this.axis==="y"&&this.height!==c){this._syncThumbToValue(this.thumb,this.getValue())}},_syncValueToThumb:function(a){this.__lockSync=true;this.setValue(this.convertPixelsToValue(this.axis==="x"?a.x+a.width/2:a.y+a.height/2));this._syncThumbToValue(a,this.getValue());this.__lockSync=false},_nudge:function(c,a){this.setValue(this.getValue()+this.nudgeAmount*(a?1:-1))},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(this.maxValue)}});myt.RangeComponent=new JS.Module("RangeComponent",{include:[myt.ValueComponent],setLowerValue:function(a){this.setValue({lower:a,upper:(this.value&&this.value.upper!==undefined)?this.value.upper:a})},getLowerValue:function(){return this.value?this.value.lower:undefined},setUpperValue:function(a){this.setValue({lower:(this.value&&this.value.lower!==undefined)?this.value.lower:a,upper:a})},getUpperValue:function(){return this.value?this.value.upper:undefined},setValue:function(d){if(d){var f=this.value,a=f?f.lower:undefined,e=f?f.upper:undefined;if(this.valueFilter){d=this.valueFilter(d)}if(d.lower===a&&d.upper===e){return}if(d.lower===undefined){d.lower=d.upper}if(d.upper===undefined){d.upper=d.lower}if(d.lower!==undefined&&d.upper!==undefined&&d.lower>d.upper){var c=d.lower;d.lower=d.upper;d.upper=c}this.value=d;if(this.inited){this.fireNewEvent("value",this.getValue());if(d.lower!==a){this.fireNewEvent("lowerValue",d.lower)}if(d.upper!==e){this.fireNewEvent("upperValue",d.upper)}}}else{this.callSuper(d)}},getValueCopy:function(){var a=this.value;return{lower:a.lower,upper:a.upper}}});myt.BoundedRangeComponent=new JS.Module("BoundedRangeComponent",{include:[myt.BoundedValueComponent,myt.RangeComponent],initNode:function(d,c){if(!c.valueFilter){var a=this;c.valueFilter=function(f){if(f){var e=a.maxValue,g=a.minValue;if(e!=null&&f.upper>e){f.upper=e}if(g!=null&&f.lower<g){f.lower=g}}return f}}this.callSuper(d,c)},setValue:function(a){if(this.snapToInt&&a!=null){if(a.lower!=null&&!isNaN(a.lower)){a.lower=Math.round(a.lower)}if(a.upper!=null&&!isNaN(a.upper)){a.upper=Math.round(a.upper)}}this.callSuper(a)}});myt.SimpleSliderRangeFill=new JS.Class("SimpleSliderRangeFill",myt.View,{initNode:function(c,a){if(a.bgColor===undefined){a.bgColor="#666666"}this.callSuper(c,a);if(c.axis==="x"){this.setY(c.thumbOffset);this.setHeight(c.thumbHeight);this.setRoundedCorners(c.thumbHeight/2)}else{this.setX(c.thumbOffset);this.setWidth(c.thumbWidth);this.setRoundedCorners(c.thumbWidth/2)}c._syncRangeFillToValue()}});myt.RangeSlider=new JS.Class("RangeSlider",myt.BaseSlider,{include:[myt.BoundedRangeComponent],initNode:function(c,a){if(a.rangeFillClass===undefined){a.rangeFillClass=myt.SimpleSliderRangeFill}this.callSuper(c,a)},doAfterAdoption:function(){new this.rangeFillClass(this,{name:"rangeFill"});new this.thumbClass(this,{name:"thumbLower"});new this.thumbClass(this,{name:"thumbUpper"});this.callSuper()},setRangeFillClass:function(a){this.rangeFillClass=a},setValue:function(a){this.callSuper(a);if(this.inited){if(!this.__lockSync){a=this.getValue();this._syncThumbToValue(this.thumbLower,a);this._syncThumbToValue(this.thumbUpper,a)}this._syncRangeFillToValue()}},setWidth:function(a,d){var c=this.width;this.callSuper(a,d);if(this.inited&&this.axis==="x"&&this.width!==c){var e=this.getValue();this._syncThumbToValue(this.thumbLower,e);this._syncThumbToValue(this.thumbUpper,e)}},setHeight:function(a,d){var c=this.height;this.callSuper(a,d);if(this.inited&&this.axis==="y"&&this.height!==c){var e=this.getValue();this._syncThumbToValue(this.thumbLower,e);this._syncThumbToValue(this.thumbUpper,e)}},_syncRangeFillToValue:function(){var a=this.rangeFill,e=this.getValue(),c=this.convertValueToPixels(e.lower),d=this.convertValueToPixels(e.upper)-c;if(this.axis==="x"){a.setX(c);a.setWidth(d)}else{a.setY(c);a.setHeight(d)}},_syncThumbToValue:function(a,c){this.callSuper(a,a.name==="thumbLower"?c.lower:c.upper)},_syncValueToThumb:function(a){this.__lockSync=true;var d=this.convertPixelsToValue(this.axis==="x"?a.x+a.width/2:a.y+a.height/2);var c=this.getValueCopy();if(a.name==="thumbLower"){c.lower=d}else{c.upper=d}this.setValue(c);c=this.getValue();if(this.thumbLower){this._syncThumbToValue(this.thumbLower,c)}if(this.thumbUpper){this._syncThumbToValue(this.thumbUpper,c)}this.__lockSync=false},_nudge:function(d,a){var e=this.getValueCopy(),c=this.nudgeAmount*(a?1:-1);if(d.name==="thumbLower"){e.lower+=c;if(e.lower>e.upper){e.lower=e.upper}}else{e.upper+=c;if(e.lower>e.upper){e.upper=e.lower}}this.setValue(e)},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(a.name==="thumbLower"?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(a.name==="thumbLower"?this.getValue().upper:this.maxValue)}});myt.DividerDrawingMethod=new JS.Class("DividerDrawingMethod",myt.DrawingMethod,{draw:function(d,e){var l=e.bounds,m=l.x,k=l.y,n=l.w,j=l.h,p=e.inset,c,a,f,o,g;d.clear();if(n==0||j==0){return}switch(e.state){case"hover":c=e.hoverFillColor||"#d8d8d8";a=e.hoverBumpColor||"#e8e8e8";break;case"active":c=e.activeFillColor||"#b8b8b8";a=e.activeBumpColor||"#c8c8c8";break;case"ready":c=e.focused?(e.focusedFillColor||"#d8d8d8"):(e.readyFillColor||"#cccccc");a=e.focused?(e.focusedBumpColor||"#e8e8e8"):(e.readyBumpColor||"#dddddd");break;case"disabled":c=e.readyFillColor||"#cccccc";a=e.readyBumpColor||"#dddddd";break}if(e.axis==="y"){k+=p;j-=2*p;f=d.createLinearGradient(m,k,m+n,k)}else{m+=p;n-=2*p;o=n/2;f=d.createLinearGradient(m,k,m,k+j)}d.beginPath();d.rect(m,k,n,j);d.closePath();f.addColorStop(0,e.readyFillColor||"#cccccc");f.addColorStop(0.5,c);f.addColorStop(1,e.readyFillColor||"#cccccc");d.setFillStyle(f);d.fill();d.setFillStyle(a);if(e.axis==="y"){o=j/2;g=Math.max(3*o,e.bumpMaxLength||14);m=m+(n-g)/2;k=k+o/2;myt.DrawingUtil.drawRoundedRect(d,o/2,0,m,k,g,o)}else{o=n/2;g=Math.max(3*o,e.bumpMaxLength||14);k=k+(j-g)/2;m=m+o/2;myt.DrawingUtil.drawRoundedRect(d,o/2,0,m,k,o,g)}d.fill()}});myt.BaseDivider=new JS.Class("BaseDivider",myt.DrawButton,{include:[myt.BoundedValueComponent,myt.Draggable],initNode:function(c,a){if(a.drawingMethodClassname===undefined){a.drawingMethodClassname="myt.DividerDrawingMethod"}if(a.axis===undefined){a.axis="x"}if(a.inset===undefined){a.inset=2}if(a.minValue===undefined){a.minValue=-a.inset}if(a.value===undefined){a.value=a.minValue}if(a.focusEmbellishment===undefined){a.focusEmbellishment=false}if(a.repeatKeyDown===undefined){a.repeatKeyDown=true}if(a.expansionState===undefined){a.expansionState=2}if(a.activationKeys===undefined){a.activationKeys=[37,38,39,40,13,32]}if(a.axis==="y"){if(a.height===undefined){a.height=8}if(a.cursor===undefined){a.cursor="row-resize"}}else{if(a.width===undefined){a.width=8}if(a.cursor===undefined){a.cursor="col-resize"}}this.__nudgeAcc=1;this.callSuper(c,a);if(a.restoreValue===undefined){this.setRestoreValue(this.value)}if(this.limitToParent!==undefined){this.__updateLimitToParentConstraint()}this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(a){this.expansionState=a},setRestoreValue:function(a){this.restoreValue=a},setLimitToParent:function(a){if(this.limitToParent!==a){this.limitToParent=a;if(this.inited){this.fireNewEvent("limitToParent",a);if(a===undefined){this.releaseConstraint("__limitToParent")}else{this.__updateLimitToParentConstraint()}}}},setInset:function(a){if(this.inset!==a){this.inset=a;if(this.inited){this.fireNewEvent("inset",a);this.updateUI()}}},setAxis:function(a){if(this.inited){myt.dumpStack("Axis may not be updated after instantiation.");return}this.axis=a},setValue:function(a,c){this.callSuper(a);a=this.value;if(this.axis==="y"){this.setY(a)}else{this.setX(a)}if(c){this.setRestoreValue(a)}},setFocused:function(a){this.callSuper(a);if(this.inited){this.redraw()}},__updateLimitToParentConstraint:function(){var a=this.axis==="y"?"height":"width";this.applyConstraint("__limitToParent",[this,"limitToParent",this,"inset",this,a,this.parent,a])},__limitToParent:function(a){var c=this.axis==="y"?"height":"width";this.setMaxValue(this.parent[c]-this.limitToParent-this[c]+this.inset)},doActivationKeyDown:function(d,c){this.callSuper(d,c);var a=0;switch(d){case 37:case 38:a=-1;break;case 39:case 40:a=1;break;case 13:case 32:default:this.doPrimaryAction();return}this.__nudgeAcc=c?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+a*this.__nudgeAcc,true);this.setExpansionState(2)},doPrimaryAction:function(){var a,e=this.restoreValue,d=this.maxValue,c=this.minValue;switch(this.expansionState){case 0:if(e!=null){this.setExpansionState(1);if(e===c){if(e!==d){this.doPrimaryAction()}}else{a=e}}break;case 1:if(d!=null){this.setExpansionState(3);if(this.value===d){this.doPrimaryAction()}else{a=d}}break;case 2:if(c!=null){this.setExpansionState(0);if(this.value===c){this.doPrimaryAction()}else{a=c}}break;case 3:if(e!=null){this.setExpansionState(2);if(e===d){this.doPrimaryAction()}else{a=e}}break}if(a!=null){this.stopActiveAnimators("value");this.animate("value",a,null,null,null,250,null,null,"easeInOutQuad")}},requestDragPosition:function(a,c){if(!this.disabled){this.setValue(this.axis==="y"?c:a,true);this.setExpansionState(2)}},getDrawConfig:function(c){var a=this.callSuper(c);a.axis=this.axis;a.inset=this.inset;return a},});myt.HorizontalDivider=new JS.Class("HorizontalDivider",myt.BaseDivider,{initNode:function(c,a){a.axis="x";this.callSuper(c,a)}});myt.VerticalDivider=new JS.Class("VerticalDivider",myt.BaseDivider,{initNode:function(c,a){a.axis="y";this.callSuper(c,a)}});myt.GridColumnHeader=new JS.Module("GridColumnHeader",{include:[myt.BoundedValueComponent],extend:{DEFAULT_MIN_VALUE:16,DEFAULT_MAX_VALUE:9999},initNode:function(c,a){var e=myt.GridColumnHeader;if(a.minValue===undefined){a.minValue=e.DEFAULT_MIN_VALUE}if(a.maxValue===undefined){a.maxValue=e.DEFAULT_MAX_VALUE}if(a.resizable===undefined){a.resizable=true}if(a.flex===undefined){a.flex=0}if(a.cellXAdj===undefined){a.cellXAdj=0}if(a.cellWidthAdj===undefined){a.cellWidthAdj=0}if(a.sortable===undefined){a.sortable=true}if(a.sortState===undefined){a.sortState="none"}if(a.placement===undefined){a.placement="*"}this.callSuper(c,a);new myt.View(this,{name:"resizer",cursor:"col-resize",width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:false},[myt.SizeToParent,myt.Draggable,{requestDragPosition:function(q,n){var g=this.parent,t=g.gridController,r=q-this.x;if(t.fitToWidth){if(r>0){var l=g.maxValue-g.value;var m=g._getGiveLeft();var k=g._getTakeRight();r=Math.min(r,Math.min(-k,l+m))}else{if(r<0){var v=g.minValue-g.value;var j=g._getTakeLeft();var h=g._getGiveRight();r=Math.max(r,Math.max(-h,v+j))}}if(r===0){return}}var f=g.value+r;if(g.resizable){g.setValue(f)}var s=f-g.value;var u=s-r;var o=0;if(s<0){o=g._stealPrevWidth(s)}else{if(s>0){o=g._givePrevWidth(s)}}this.dragInitX+=o;u-=o;if(t.fitToWidth){if(u<0){g._stealNextWidth(u)}else{if(u>0){g._giveNextWidth(u)}}}}}]);var d=this.gridController;if(d){d.notifyAddColumnHeader(this);d.notifyColumnHeaderXChange(this)}this.setWidth(this.value);this._updateLast()},destroy:function(a){this.setGridController();this.callSuper(a)},setSortable:function(a){if(this.sortable!==a){this.sortable=a;if(this.inited){this.fireNewEvent("sortable",a)}}},setSortState:function(a){if(this.sortState!==a){this.sortState=a;if(this.inited){this.fireNewEvent("sortState",a)}}},setCellWidthAdj:function(a){this.cellWidthAdj=a},setCellXAdj:function(a){this.cellXAdj=a},setFlex:function(a){this.flex=a},setColumnId:function(a){this.columnId=a},setLast:function(a){this.last=a;if(this.inited){this._updateLast()}},setResizable:function(a){if(this.resizable!==a){this.resizable=a;if(this.inited){this.fireNewEvent("resizable",a)}}},setGridController:function(a){var c=this.gridController;if(c!==a){if(c){c.notifyRemoveColumnHeader(this)}this.gridController=a;if(this.inited&&a){a.notifyAddColumnHeader(this);a.notifyColumnHeaderXChange(this);a.notifyColumnHeaderWidthChange(this)}}},setValue:function(a){this.callSuper(a);if(this.inited){this.setWidth(this.value)}},setMinValue:function(a){var c=this.minValue||0,d=this.gridController;this.callSuper(a);a=this.minValue;if(this.inited&&d&&c!==a){d.setMinWidth(d.minWidth+a-c)}},setMaxValue:function(a){var c=this.maxValue||0,d=this.gridController;if(a==null){a=myt.GridColumnHeader.DEFAULT_MAX_VALUE}this.callSuper(a);a=this.maxValue;if(this.inited&&d&&c!==a){d.setMaxWidth(d.maxWidth+a-c)}},setWidth:function(a,c){var e=this.width;this.callSuper(a,c);if(this.inited&&e!==this.width){var d=this.gridController;if(d){d.notifyColumnHeaderWidthChange(this)}}},setX:function(a){var d=this.x;this.callSuper(a);if(this.inited&&d!==this.x){var c=this.gridController;if(c){c.notifyColumnHeaderXChange(this)}}},_updateLast:function(){this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},_stealPrevWidth:function(e){var f=this.gridController.getPrevColumnHeader(this),c=0;if(f){var d=f.value+e;if(f.resizable){f.setValue(d)}var a=d-f.value;c=e-a;if(a<0){c+=f._stealPrevWidth(a)}}return c},_givePrevWidth:function(e){var f=this.gridController.getPrevColumnHeader(this),c=0;if(f){var d=f.value+e;if(f.resizable){f.setValue(d)}var a=d-f.value;c=e-a;if(a>0){c+=f._givePrevWidth(a)}}return c},_stealNextWidth:function(d){var e=this.gridController.getNextColumnHeader(this);if(e){var c=e.value+d;if(e.resizable){e.setValue(c)}var a=c-e.value;if(a<0){e._stealNextWidth(a)}}},_giveNextWidth:function(d){var e=this.gridController.getNextColumnHeader(this);if(e){var c=e.value+d;if(e.resizable){e.setValue(c)}var a=c-e.value;if(a>0){e._giveNextWidth(a)}}},_getGiveLeft:function(){var c=this.gridController.getPrevColumnHeader(this),a=0;if(c){a=c.maxValue-c.value+c._getGiveLeft()}return a},_getGiveRight:function(){var c=this.gridController.getNextColumnHeader(this),a=0;if(c){a=c.maxValue-c.value+c._getGiveRight()}return a},_getTakeLeft:function(){var c=this.gridController.getPrevColumnHeader(this),a=0;if(c){a=c.minValue-c.value+c._getTakeLeft()}return a},_getTakeRight:function(){var c=this.gridController.getNextColumnHeader(this),a=0;if(c){a=c.minValue-c.value+c._getTakeRight()}return a}});myt.GridRow=new JS.Module("GridRow",{initNode:function(c,a){if(a.placement===undefined){a.placement="*"}this.callSuper(c,a);var d=this.gridController;if(d){d.notifyAddRow(this)}},destroy:function(a){this.setGridController();this.callSuper(a)},setGridController:function(a){var c=this.gridController;if(c!==a){if(c){c.notifyRemoveRow(this)}this.gridController=a;if(this.inited&&a){a.notifyAddRow(this)}}},notifyColumnHeaderXChange:function(c){var a=this[c.columnId+"View"];if(a){a.setX(c.x+c.cellXAdj)}},notifyColumnHeaderWidthChange:function(c){var a=this[c.columnId+"View"];if(a){a.setWidth(c.width+c.cellWidthAdj)}}});myt.GridController=new JS.Module("GridController",{initNode:function(c,a){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=true;this.callSuper(c,a);this._fitToWidth();this._notifyHeadersOfSortState();if(!this.locked){this.doSort()}},setSort:function(a){if(!myt.areArraysEqual(a,this.sort)){this.sort=a;if(this.inited){this.fireNewEvent("sort",a);this._notifyHeadersOfSortState();if(!this.locked){this.doSort()}}}},setLastColumn:function(a){var c=this.lastColumn;if(c!==a){if(c){c.setLast(false)}this.lastColumn=a;if(a){a.setLast(true)}}},setFitToWidth:function(a){this.fitToWidth=a},setLocked:function(a){this.locked=a;if(this.inited&&!a){this.__tempLock=true;this._fitToWidth();this.__tempLock=false;var d=this.columnHeaders,c=d.length,e;while(c){e=d[--c];this.notifyColumnHeaderXChange(e);this.notifyColumnHeaderWidthChange(e)}this.doSort()}},setMaxWidth:function(a){if(this.maxWidth!==a){this.maxWidth=a;if(this.inited){this.fireNewEvent("maxWidth",a)}}},setMinWidth:function(a){if(this.minWidth!==a){this.minWidth=a;if(this.inited){this.fireNewEvent("minWidth",a)}}},setGridWidth:function(a){if(a!==null&&typeof a==="object"){a=a.value}if(this.gridWidth!==a){this.gridWidth=a;if(this.inited){this._fitToWidth()}}},_fitToWidth:function(){if(this.locked||!this.fitToWidth){return}var p=this.columnHeaders,j=p.length,h=j,m;var n=0,q;while(h){m=p[--h];q=m.x+m.width;if(q>n){n=q}}var f=this.gridWidth-n;if(f===0){return}var k=f>0;var o=[],g;h=j;while(h){m=p[--h];if(m.resizable&&m.flex>0){g=(k?m.maxValue:m.minValue)-m.value;o.push({hdr:m,limit:g,amt:0})}}var a=o.length;if(a<=0){return}var l=0,e=0,c,d;while(f!==0){d=o[l];m=d.hdr;if(!d.full){if(k){c=Math.min(m.flex,f);if(d.amt+c>d.limit){c=d.limit-d.amt;d.full=true}}else{c=Math.max(-m.flex,f);if(d.amt+c<d.limit){c=d.limit-d.amt;d.full=true}}d.amt+=c;f-=c}else{++e}if(e===a){break}++l;if(l===a){l=0;e=0}}h=a;while(h){d=o[--h];m=d.hdr;m.setValue(m.value+d.amt)}if(f!==0){o=[];h=j;while(h){m=p[--h];if(m.resizable&&m.flex===0){g=(k?m.maxValue:m.minValue)-m.value;o.push({hdr:m,limit:g,amt:0})}}a=o.length;if(a<=0){return}l=0;e=0;while(f!==0){d=o[l];m=d.hdr;if(!d.full){if(k){c=Math.min(1,f);if(d.amt+c>d.limit){c=d.limit-d.amt;d.full=true}}else{c=Math.max(-1,f);if(d.amt+c<d.limit){c=d.limit-d.amt;d.full=true}}d.amt+=c;f-=c}else{++e}if(e===a){break}++l;if(l===a){l=0;e=0}}h=a;while(h){d=o[--h];m=d.hdr;m.setValue(m.value+d.amt)}}},_notifyHeadersOfSortState:function(){var e=this.columnHeaders,c=e.length,g,a=this.sort,f=a?a[0]:"",d=a?a[1]:"";while(c){g=e[--c];if(g.columnId===f){if(g.sortable){g.setSortState(d)}}else{g.setSortState("none")}}},doSort:function(){},getPrevColumnHeader:function(c){var a=this.getColumnHeaderIndex(c)-1;return a>=0?this.columnHeaders[a]:null},getNextColumnHeader:function(d){var a=this.getColumnHeaderIndex(d)+1;var c=this.columnHeaders;return a>0&&a<c.length?c[a]:null},hasColumnHeader:function(a){return this.getColumnHeaderIndex(a)!==-1},getColumnHeaderIndex:function(a){return this.columnHeaders.indexOf(a)},notifyAddColumnHeader:function(a){if(!this.hasColumnHeader(a)){this.columnHeaders.push(a);this.setLastColumn(a);this.setMaxWidth(this.maxWidth+a.maxValue);this.setMinWidth(this.minWidth+a.minValue);this._fitToWidth()}},notifyRemoveColumnHeader:function(d){var a=this.getColumnHeaderIndex(d);if(a>=0){var c=this.columnHeaders;c.splice(a,1);if(d.last){this.setLastColumn(c[c.length-1])}this.setMaxWidth(this.maxWidth-d.maxValue);this.setMinWidth(this.minWidth-d.minValue);this._fitToWidth()}},notifyColumnHeaderXChange:function(d){if(this.locked||this.__tempLock){return}var c=this.rows,a=c.length;while(a){c[--a].notifyColumnHeaderXChange(d)}},notifyColumnHeaderWidthChange:function(d){if(this.locked||this.__tempLock){return}var c=this.rows,a=c.length;while(a){c[--a].notifyColumnHeaderWidthChange(d)}},hasRow:function(a){return this.getRowIndex(a)!==-1},getRowIndex:function(a){return this.rows.indexOf(a)},notifyAddRow:function(d){if(!this.hasRow(d)){this.rows.push(d);if(!this.locked){var c=this.columnHeaders,a=c.length,e;while(a){e=c[--a];d.notifyColumnHeaderXChange(e);d.notifyColumnHeaderWidthChange(e)}this.doSort()}}},notifyRemoveRow:function(c){var a=this.getRowIndex(c);if(a>=0){this.rows.splice(a,1)}}});myt.Grid=new JS.Class("Grid",myt.View,{include:[myt.GridController],initNode:function(c,a){if(a.overflow===undefined){a.overflow="auto"}if(a.bgColor===undefined){a.bgColor="#cccccc"}if(a.rowSpacing===undefined){a.rowSpacing=1}if(a.columnSpacing===undefined){a.columnSpacing=1}this.callSuper(c,a)},doAfterAdoption:function(){var c=this.sizeHeightToRows,a=myt;var e=new a.View(this,{name:"header",overflow:"hidden"});new a.SpacedLayout(e,{name:"xLayout",locked:true,axis:"x",collapseParent:true,spacing:this.columnSpacing});new a.SizeToChildren(e,{name:"yLayout",locked:true,axis:"y"});var d=new a.View(this,{name:"content",overflow:c?"hidden":"auto"});new a.SpacedLayout(d,{name:"yLayout",locked:true,axis:"y",spacing:this.rowSpacing,collapseParent:c});this.syncTo(this,"setGridWidth","width");this.syncTo(e,"_updateContentWidth","width");this.applyConstraint("_updateContentHeight",[c?d:this,"height",e,"height",e,"y"]);this.callSuper()},setSizeHeightToRows:function(a){this.sizeHeightToRows=a},setRowSpacing:function(a){if(this.rowSpacing!==a){this.rowSpacing=a;if(this.inited){this.content.yLayout.setSpacing(a)}}},setColumnSpacing:function(a){if(this.columnSpacing!==a){this.columnSpacing=a;if(this.inited){this.header.xLayout.setSpacing(a)}}},setLocked:function(d){if(this.inited){var f=this.header,a=f.xLayout,c=f.yLayout,e=this.content.yLayout;if(d){a.incrementLockedCounter();c.incrementLockedCounter();e.incrementLockedCounter()}else{a.decrementLockedCounter();a.update();c.decrementLockedCounter();c.update();e.decrementLockedCounter();e.update()}}this.callSuper(d)},_updateContentWidth:function(a){this.content.setWidth(a.value)},_updateContentHeight:function(c){var e=this.header,a=this.content,d=e.y+e.height;a.setY(d);if(this.sizeHeightToRows){this.setHeight(d+a.height)}else{a.setHeight(this.height-d)}},determinePlacement:function(c,a){if(c==="*"){var d;if(a.isA(myt.GridRow)){d=this.content}else{if(a.isA(myt.GridColumnHeader)){d=this.header}}if(d){if(a.gridController!==this){a.setGridController(this)}return d}}return this.callSuper(c,a)},doSort:function(){var a=this.sort,e=this.getSortFunction(a?a[0]:"",a?a[1]:"");if(e){var d=this.content,c=d.yLayout;d.sortSubviews(e);c.sortSubviews(e);c.update()}},getSortFunction:function(d,c){if(d&&c){var a=c==="ascending"?1:-1;return function(f,e){var h=f[d+"View"].text,g=e[d+"View"].text;if(h>g){return a}else{if(g>h){return -a}}return 0}}}});myt.SimpleGridColumnHeader=new JS.Class("SimpleGridColumnHeader",myt.SimpleIconTextButton,{include:[myt.GridColumnHeader],initNode:function(c,a){if(a.activeColor===undefined){a.activeColor="#999999"}if(a.hoverColor===undefined){a.hoverColor="#bbbbbb"}if(a.readyColor===undefined){a.readyColor="#aaaaaa"}if(a.inset===undefined){a.inset=2}if(a.outset===undefined){a.outset=2}if(a.height===undefined){a.height=18}if(a.contentAlign===undefined){a.contentAlign="left"}if(a.sortIconColor===undefined){a.sortIconColor="#666666"}this.callSuper(c,a);if(this.sortable){this.setOutset(14)}this.setDisabled(!this.sortable);this._updateTextWidth();this._drawSortIcon()},doAfterAdoption:function(){new myt.Canvas(this,{name:"sortIcon",align:"right",alignOffset:3,width:8,height:10,y:Math.floor((this.height-10)/2)});this.callSuper();this.textView.enableEllipsis()},setSortIconColor:function(a){this.sortIconColor=a},setSortable:function(a){this.callSuper(a);if(this.inited){if(a){this.setOutset(14)}this.setDisabled(!a);this._drawSortIcon()}},setSortState:function(a){this.callSuper(a);if(this.inited){this._drawSortIcon()}},setWidth:function(a,c){this.callSuper(a,c);if(this.inited){this._updateTextWidth()}},_drawSortIcon:function(){var a=this.sortIcon;a.clear();if(this.sortable){a.beginPath();var c;switch(this.sortState){case"ascending":c=this.sortIconColor;a.moveTo(0,10);a.lineTo(4,0);a.lineTo(8,10);break;case"descending":c=this.sortIconColor;a.moveTo(0,0);a.lineTo(4,10);a.lineTo(8,0);break;case"none":c=this.activeColor;a.moveTo(0,5);a.lineTo(4,10);a.lineTo(8,5);a.lineTo(4,0);break}a.closePath();a.setFillStyle(c);a.fill()}},_updateTextWidth:function(){if(this.contentAlign==="left"){var a=this.textView;a.setWidth(this.width-this.outset-a.x)}},doActivated:function(){if(!this.disabled){switch(this.sortState){case"ascending":this.setSortState("descending");break;case"descending":this.setSortState("ascending");break;case"none":this.setSortState("ascending");break}this.gridController.setSort([this.columnId,this.sortState])}},drawDisabledState:function(){this.setBgColor(this.readyColor)},showFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()},hideFocusEmbellishment:function(){this.hideDefaultFocusEmbellishment()}});myt.StackablePanel=new JS.Module("StackablePanel",{include:[myt.Selectable],initNode:function(c,a){a.visible=a.selected=false;if(a.bgColor===undefined){a.bgColor="#ffffff"}if(a.panelId===undefined){a.panelId=a.name}this.callSuper(c,a);if(this.selected){this.doStackTransition()}},setPanelStack:function(a){this.panelStack=a},setPanelId:function(a){this.panelId=a},setSelected:function(a){if(this.selected!==a){this.callSuper(a);if(this.inited){this.doStackTransition()}}},doStackTransition:function(){(this.panelStack||this.parent).doStackTransition(this)}});myt.PanelStack=new JS.Class("PanelStack",myt.View,{include:[myt.SelectionManager],initNode:function(c,a){a.overflow="hidden";if(a.itemSelectionId===undefined){a.itemSelectionId="panelId"}if(a.maxSelected===undefined){a.maxSelected=1}this.callSuper(c,a);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},__updateWidth:function(c){var a=this.getActivePanel();if(a){a.setWidth(c.value)}},__updateHeight:function(c){var a=this.getActivePanel();if(a){a.setHeight(c.value)}},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(a){return this.getSelectableItem(a)},selectPanel:function(a){this.selectById(a)},doSelected:function(a){a.setWidth(this.width);a.setHeight(this.height)},doStackTransition:function(a){var c=a.selected;if(c){a.makeHighestZIndex()}a.setVisible(c)}});myt.DragGroupSupport=new JS.Module("DragGroupSupport",{initNode:function(c,a){this.__dragGroups={"*":true};this.__acceptAny=true;this.callSuper(c,a)},setDragGroups:function(c){var a={};for(var d in c){a[d]=true}this.__dragGroups=a;this.__acceptAny=a.hasOwnProperty("*")},getDragGroups:function(){return this.__dragGroups},addDragGroup:function(a){if(a){this.__dragGroups[a]=true;if(a==="*"){this.__acceptAny=true}}},removeDragGroup:function(a){if(a){delete this.__dragGroups[a];if(a==="*"){this.__acceptAny=false}}},acceptAnyDragGroup:function(){return this.__acceptAny}});myt.Dropable=new JS.Module("Dropable",{include:[myt.Draggable,myt.DragGroupSupport],setDropTarget:function(a){this.dropTarget=a},setDropped:function(a){this.dropped=a},setDropFailed:function(a){this.dropFailed=a},willPermitDrop:function(a){return true},startDrag:function(a){this.setDropped(false);this.setDropFailed(false);myt.global.dragManager.startDrag(this);this.callSuper(a)},updateDrag:function(a){myt.global.dragManager.updateDrag(a,this);this.callSuper(a)},stopDrag:function(c,a){myt.global.dragManager.stopDrag(c,this,a);this.callSuper(c,a);if(a){this.notifyDropAborted()}else{if(this.dropFailed){this.notifyDropFailed()}}},notifyDragEnter:function(a){this.setDropTarget(a)},notifyDragLeave:function(a){this.setDropTarget()},notifyDrop:function(c,a){this.setDropped(true);if(!this.dropTarget){this.setDropFailed(true)}},notifyDropFailed:function(){},notifyDropAborted:function(){}});myt.DropTarget=new JS.Module("DropTarget",{include:[myt.DragGroupSupport],initNode:function(c,a){this.callSuper(c,a);myt.global.dragManager.registerDropTarget(this)},destroyAfterOrphaning:function(){myt.global.dragManager.unregisterDropTarget(this);this.callSuper()},willAcceptDrop:function(a){if(this.disabled||!this.isVisible()){return false}return true},notifyDragStart:function(a){},notifyDragStop:function(a){},notifyDragEnter:function(a){},notifyDragLeave:function(a){},notifyDrop:function(a){}});myt.DropSource=new JS.Module("DropSource",{include:[myt.Draggable],initNode:function(c,a){if(a.distanceBeforeDrag===undefined){a.distanceBeforeDrag=2}if(a.dropParent===undefined){a.dropParent=c.getRoot()}this.callSuper(c,a)},setDropClass:function(a){this.dropClass=a},setDropClassAttrs:function(a){this.dropClassAttrs=a},setDropParent:function(a){this.dropParent=a},startDrag:function(d){var a=this.dropable=this.makeDropable();if(a){var c=a.distanceBeforeDrag;a.distanceBeforeDrag=0;a.doMouseDown(d);a.__doMouseDown(d);a.distanceBeforeDrag=c}},doMouseUp:function(c){this.callSuper(c);var a=this.dropable;if(a){a.__doMouseUp(c);a.doMouseUp(c);this.dropable=null}},makeDropable:function(){var c=this.dropClass,d=this.dropParent;if(c&&d){var e=myt.DomElementProxy.getPagePosition(this.domElement,d.domElement),a=this.dropClassAttrs||{};a.x=e.x||0;a.y=e.y||0;return new c(d,a)}},});myt.AutoScroller=new JS.Module("AutoScroller",{include:[myt.DragGroupSupport],initNode:function(c,a){this.scrollBorder=40;this.scrollFrequency=50;this.scrollAmount=2;this.scrollAcceleration=7;if(a.overflow===undefined){a.overflow="auto"}this.callSuper(c,a);myt.global.dragManager.registerAutoScroller(this)},destroyAfterOrphaning:function(){myt.global.dragManager.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(a){this.scrollBorder=a},setScrollFrequency:function(a){this.scrollFrequency=a},setScrollAmount:function(a){this.scrollAmount=a},setScrollAcceleration:function(a){this.scrollAcceleration=a},notifyDragStart:function(a){var c=this.domElement;if(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth){this.attachToDom(myt.global.mouse,"__handleMouseMove","mousemove",true)}},notifyDragStop:function(a){this.detachFromDom(myt.global.mouse,"__handleMouseMove","mousemove",true);this.__resetVScroll();this.__resetHScroll()},__handleMouseMove:function(e){var a=e.value,d=a.pageX,c=a.pageY;if(this.containsPoint(d,c)){var g=this.getPagePosition(),f=this.scrollBorder;d-=g.x;c-=g.y;if(c<f){this.__isAutoscrollUp=true;this.__amountscrollUp=this.__calculateAmount((f-c)/f);if(!this.__timerIdAutoscrollUp){this.__doAutoScrollAdj("scrollUp",-1)}}else{if(this.height-c<f){this.__isAutoscrollDown=true;this.__amountscrollDown=this.__calculateAmount((f-(this.height-c))/f);if(!this.__timerIdAutoscrollDown){this.__doAutoScrollAdj("scrollDown",1)}}else{this.__resetVScroll()}}if(d<f){this.__isAutoscrollLeft=true;this.__amountscrollLeft=this.__calculateAmount((f-d)/f);if(!this.__timerIdAutoscrollLeft){this.__doAutoScrollAdj("scrollLeft",-1)}}else{if(this.width-d<f){this.__isAutoscrollRight=true;this.__amountscrollRight=this.__calculateAmount((f-(this.width-d))/f);if(!this.__timerIdAutoscrollRight){this.__doAutoScrollAdj("scrollRight",1)}}else{this.__resetHScroll()}}}else{this.__resetVScroll();this.__resetHScroll()}},__calculateAmount:function(a){return Math.round(this.scrollAmount*(1+this.scrollAcceleration*a))},__resetVScroll:function(){this.__isAutoscrollUp=false;this.__timerIdAutoscrollUp=null;this.__isAutoscrollDown=false;this.__timerIdAutoscrollDown=null},__resetHScroll:function(){this.__isAutoscrollLeft=false;this.__timerIdAutoscrollLeft=null;this.__isAutoscrollRight=false;this.__timerIdAutoscrollRight=null},__doAutoScrollAdj:function(c,d){if(this["__isAuto"+c]){this.domElement[c==="scrollUp"||c==="scrollDown"?"scrollTop":"scrollLeft"]+=d*this["__amount"+c];var a=this;this["__timerIdAuto"+c]=setTimeout(function(){a.__doAutoScrollAdj(c,d)},this.scrollFrequency)}}});myt.Eventable=new JS.Class("Eventable",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Constrainable],initialize:function(d,c){if(c){for(var e=0,a=c.length;a>e;){this.extend(c[e++])}}this.inited=false;this.init(d||{})},init:function(a){this.callSetters(a);this.inited=true},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});myt.all=true;
