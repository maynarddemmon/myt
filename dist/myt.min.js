(u=>{let x;var w=c=>{let h=c.length;for(;h;){const e=c[--h];x=e.ver??e.id;if(e.str?.includes(e.sub)||e.prop)return e.id}};var t=c=>{const h=c.indexOf(x);if(0<=h)return parseFloat(c.slice(h+x.length+1))};const l=navigator.userAgent,a=navigator.platform;t=u.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:l,sub:"Firefox",id:"Firefox"},{str:l,sub:"Chrome",id:"Chrome"},{str:l,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:t(l)||t(navigator.appVersion)||"UNKNOWN",os:w([{str:l,sub:"iPhone",id:"iPhone/iPod"},{str:a,sub:"Linux",id:"Linux"},{str:a,sub:"Mac",id:"Mac"},{str:a,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(t.browser){case "Chrome":case "Safari":u="WebKit";break;case "Explorer":u="MS";break;case "Firefox":u="Moz";break;case "Opera":u="O";break;default:u="UNKNOWN"}w=u.toLowerCase();t.prefix={dom:u,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:u,floor:x,ceil:w}=Math,t="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h=d=>(10>d?"0":"")+d,e=(d,g)=>{d=d.getTimezoneOffset();return(0<d?"-":"+")+h(x(u(d/60)))+(g?":":"")+(0==u(d%60)?"00":h(u(d%60)))},k={d:d=>
h(d.getDate()),D:d=>a[d.getDay()],j:d=>d.getDate(),l:d=>c[d.getDay()],N:d=>0==d.getDay()?7:d.getDay(),S:d=>{d=d.getDate();return 1==d%10&&11!=d?"st":2==d%10&&12!=d?"nd":3==d%10&&13!=d?"rd":"th"},w:d=>d.getDay(),z:d=>{const g=new Date(d.getFullYear(),0,1);return w((d-g)/864E5)},W:d=>{const g=new Date(d.valueOf());d=(d.getDay()+6)%7;g.setDate(g.getDate()-d+3);d=g.valueOf();g.setMonth(0,1);4!==g.getDay()&&g.setMonth(0,1+(4-g.getDay()+7)%7);return h(1+w((d-g)/6048E5))},F:d=>l[d.getMonth()],m:d=>h(d.getMonth()+
1),M:d=>t[d.getMonth()],n:d=>d.getMonth()+1,t:d=>{let g=d.getFullYear();d=d.getMonth()+1;12===d&&(g=g++,d=0);return(new Date(g,d,0)).getDate()},L:d=>{d=d.getFullYear();return 0==d%400||0!=d%100&&0==d%4},o:d=>{const g=new Date(d.valueOf());g.setDate(g.getDate()-(d.getDay()+6)%7+3);return g.getFullYear()},Y:d=>d.getFullYear(),y:d=>(""+d.getFullYear()).substr(2),a:d=>12>d.getHours()?"am":"pm",A:d=>12>d.getHours()?"AM":"PM",B:d=>x(1E3*((d.getUTCHours()+1)%24+d.getUTCMinutes()/60+d.getUTCSeconds()/3600)/
24),g:d=>d.getHours()%12||12,G:d=>d.getHours(),h:d=>h(d.getHours()%12||12),H:d=>h(d.getHours()),i:d=>h(d.getMinutes()),s:d=>h(d.getSeconds()),e:d=>/\((.*)\)/.exec((new Date).toString())[1],I:d=>{let g=null,f=0;for(;12>f;){const b=(new Date(d.getFullYear(),f++,1)).getTimezoneOffset();if(null===g)g=b;else if(b<g){g=b;break}else if(b>g)break}return d.getTimezoneOffset()==g|0},O:d=>e(d,!1),P:d=>e(d,!0),T:d=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:d=>60*-d.getTimezoneOffset(),c:d=>d.format("Y-m-d\\TH:i:sP"),
r:d=>d.toString(),U:d=>d.getTime()/1E3};return function(d){return d.replace(/(\\?)(.)/g,(g,f,b)=>""===f&&k[b]?k[b](this):b)}})();
(u=>{const x=(f,b)=>{var q=f.__mct__.get(b);if(q)return q.slice();const m=[];if(q=f.__anc__){const p=q.length;for(let r=0;r<p;){const z=q[r++].__fns__;z.has(b)&&m.push(z.get(b))}}else{const p=f.__anc__=[],r=z=>{const E=z.__inc__,I=E.length;for(let J=0;J<I;)r(E[J++]);p.includes(z)||(p.push(z),z=z.__fns__,z.has(b)&&m.push(z.get(b)))};r(f)}f.__mct__.set(b,m.slice());return m},w=(f,b)=>{const q=f.callable;return f.__hs?function(...m){const p=this.callSuper,r=x(b,f.name);let z=r.length-1;if(0===z)p&&delete this.callSuper;
else{const I=m.length,J=this.callSuper=(...A)=>{for(let B=A.length;B<I;)A[B]=m[B++];0===--z&&delete this.callSuper;A=r[z].callable.call(this,...A);this.callSuper=J;z++;return A}}const E=q.call(this,...m);p?this.callSuper=p:delete this.callSuper;return E}:q},t=(f,b)=>{b=b??f;if(b===f){f.__anc__=null;f.__mct__=new Map;var q=f.__dep__;for(var m=q.length;0<m;)t(q[--m])}q=b.__tgt__;m=f.__inc__;const p=m.length;for(let r=0;r<p;)t(m[r++],b);for(const [r,z]of f.__fns__)f=z instanceof c?w(z,b):z,q[r]!==f&&
(q[r]=f)},l=f=>f.__meta__??(f.__meta__=new h(null,null,f)).include(f.klass,!0),a=f=>{const b=function(...q){return this.initialize(...q)??this};b.prototype=Object.create(f.prototype);return b},c=a(Object),h=u.Module=a(Object);c.prototype.initialize=function(f,b,q){this.module=f;this.name=b;this.callable=q;this.__hs=q.toString().includes("callSuper")};var e=h.prototype;e.initialize=function(f,b,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;f&&(this.__displayName=
f);this.include(b,!0)};e.include=function(f,b){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var q=f.extend,m=f.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(m&&(m.__fns__||"function"!==typeof m)){q=m.length;for(let p=0;p<q;)this.include(m[p++],!0)}for(const p of Object.keys(f))m=f[p],("extend"!==p&&"include"!==p||!m.__fns__&&"function"===typeof m)&&this.__fns__.set(p,m?.__fns__||"function"!==typeof m?m:new c(this,p,m))}!0!==b&&t(this)}return this};e.includes=
function(f){if(f===this)return!0;const b=this.__inc__,q=b.length;for(let m=0;m<q;)if(b[m++].includes(f))return!0;return!1};e.instanceMethod=function(f){return x(this,f).pop()};const k=new h("Kernel",{extend:function(f){l(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||l(this).includes(f)}}),d=u.Class=a(h),g=d.prototype;g.initialize=function(f,b,q){"function"!==typeof b&&(q=b,b=Object);h.prototype.initialize.call(this,f);f=a(b);for(const m in this)f[m]===this[m]||
f.hasOwnProperty(m)||(f[m]=this[m]);f.prototype.constructor=f.prototype.klass=f;l(f).include(b.__meta__);f.__tgt__=f.prototype;b=b===Object?{}:b.__fns__?b:new h(b.prototype,!0);f.include(k,!0).include(b,!0).include(q,!0);t(f);return f};e=(f,b)=>{f.__inc__=[];f.__dep__=[];const q=f.__tgt__=f.prototype,m=f.__fns__=new Map;for(const E of Object.keys(q)){var p=m,r=p.set;var z=q[E];z=z?.__fns__||"function"!==typeof z?z:new c(f,E,z);r.call(p,E,z)}q.constructor=q.klass=f;for(const E in g)f[E]===g[E]||f.hasOwnProperty(E)||
(f[E]=g[E]);f.include(b);f.constructor=f.klass=d};e(c,k);e(h,k);e(d,h);t(l(c));t(l(h));l(d).include(h.__meta__);u.Singleton=new d("Singleton",{initialize:(f,b,q)=>new (new d(f,b,q))})})(global.JS={});
(u=>{class x extends Error{constructor(A,B,...v){super(...v);this.name="FetchError";this.status=A;this.url=B}}let w=0,t;const l=console.warn,a=Math,{abs:c,min:h,max:e,pow:k}=a,d=document,g=d.head,f=d.createElement.bind(d),b={},q={"":!0},m=d.fonts,p=A=>{var B=A.family.split('"').join("");for(const v of[B,B+" "+A.weight])if(!q[v])for(q[v]=!0,B=b[v]??[];B.length;)(A=B.pop())&&!A.destroyed&&A.sizeViewToDom()},r={},z=A=>{const B={};return(...v)=>{const n=JSON.stringify(v);return n in B?B[n]:B[n]=A(...v)}},
E=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,I=/\$(\d+)/g,J=u.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:A=>A.split("").reduce((B,v)=>{B=(B<<5)-B+v.charCodeAt(0);return B&B},0),addEventListener:(A,B,v,n,y)=>{A.addEventListener(B,v,{capture:n||!1,passive:y||!1})},removeEventListener:(A,B,v,n)=>{A.removeEventListener(B,v,n||!1)},resolveName:(A,B)=>{if(A&&0!==A.length){B=B??global;var v=Array.isArray(A)?A:A.split("."),n=v.length;for(let y=0;y<n;y++)if(B=B[v[y]],null==B){l("resolveName failed for",
A,"at part",y,v[y]);return}return B}},resolveClassname:A=>{"string"===typeof A&&(A=J.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,B,v){const n=this._loadedScripts??(this._loadedScripts={});if(n[A])return l("script already loaded for src",A),null;n[A]=!0;const y=f("script");y.type="text/javascript";y.async=!1;if(B){let D=!1;y.onload=y.onreadystatechange=()=>{D||y.readyState&&"complete"!==
y.readyState||(D=!0,y.onload=y.onreadystatechange=null,B())}}y.src=A+(v?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());g.appendChild(y);return y},dumpStack:(A,B)=>{let v;"string"===typeof A&&(v=A,A=null);J.global.error.notify(B||"error",null,v,A)},getRandom:A=>{const B=a.random();return A?e(0,h(A(B),.9999999999)):B},getRandomArbitrary:(A,B,v)=>{const n=h(A,B);return J.getRandom(v)*(e(A,B)-n)+n},getRandomInt:(A,B,v)=>{const n=h(A,B);return a.floor(J.getRandom(v)*(e(A,B)-n+1)+n)},areFloatsEqual:(A,
B,v)=>{const n=c(A),y=c(B);return c(A-B)<=(n>y?y:n)*(null==v?1E-6:c(v))},areArraysEqual:(A,B)=>{if(A!==B){if(null==A||null==B)return!1;let v=A.length;if(v!==B.length)return!1;for(;v;)if(A[--v]!==B[v])return!1}return!0},areObjectsEqual:(A,B)=>{if(A!==B){if(null==A||null==B)return!1;for(const v in A)if(A[v]!==B[v])return!1;for(const v in B)if(A[v]!==B[v])return!1}return!0},getElement:(A,B)=>d.getElementsByTagName(A||"body")[0<B?B:0],loadFontFaces:(A,B)=>{const v=[];for(const n of A)A=new FontFace(n.family,
"url("+n.url+")",n.options),v.push(A.load());Promise.all(v).then(n=>{for(const y of n)m.add(y),p(y);B?.(n)})},loadFontFace:(A,B,v={},n)=>{A=new FontFace(A,"url("+B+")",v);A.loaded.then(y=>{m.add(y);p(y);n?.(y)});A.load()},registerForFontNotification:(A,B)=>{q[B]?A&&!A.destroyed&&A.sizeViewToDom():(b[B]??(b[B]=[])).push(A)},createBaseFontCSSRule:A=>{J.addCSSRule(J.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{A?.forEach(J.createStylesheetLink)},createStylesheetLink:A=>{const B=
f("link");B.rel="stylesheet";A&&(B.href=A);g.appendChild(B);return B},createStylesheet:()=>{const A=f("style");g.appendChild(A);return A.sheet},addCSSRule:(A,B,v,n)=>{A.insertRule(B+"{"+v+"}",n)},removeCSSRules:A=>{let B=A.cssRules.length;for(;B;)A.deleteRule(--B)},createInputPlaceholderCSSRule:(A,B,v,n=1)=>{let y=A.__sheet;y?J.removeCSSRules(y):y=A.__sheet=J.createStylesheet();A=A.getODE();A=A.id||(A.id="id"+ ++w);const D=[];B&&D.push("color:"+B);v&&D.push("font-family:"+v);n&&D.push("opacity:"+
n);J.addCSSRule(y,"#"+A+"::placeholder",D.join("; "),0)},isNotSorted:(A,B)=>{const v=A.length;for(let n=1;n<v;n++)if(0<B(A[n-1],A[n]))return!0},chainSortFunc:(...A)=>(B,v)=>{for(const n of A){const y=n(B,v);if(0!==y)return y}return 0},getAlphaObjSortFunc:z((A,B,v,n)=>{const y=B?1:-1;return(D,F)=>{D=D[A];F=F[A];n?("string"!==typeof D&&(D=""+D),"string"!==typeof F&&(F=""+F)):(D=D||"",F=F||"");v&&(D=D.toLowerCase(),F=F.toLowerCase());return D.localeCompare(F)*y}}),getNumericObjSortFunc:z((A,B)=>{const v=
B?1:-1;return(n,y)=>{n=n[A]||0;y=y[A]||0;return(n-y)*v}}),dataURIToBlob:A=>{var B=A.indexOf(",");const v=A.slice(0,B).split(":")[1].split(";")[0];A=A.slice(B+1);if(v.startsWith("text/"))A=decodeURIComponent(A);else{A=atob(A);B=A.length;const n=new Uint8Array(B);for(;B;)n[--B]=A.charCodeAt(B);A=n}return new Blob([A],{type:v})},formatAsPercentage:(A,B=2)=>{switch(typeof A){case "number":return B=h(16,e(0,B)),A=a.round(e(0,h(1,A))*k(10,2+B))/k(10,B),(0===A%1?A:A.toFixed(B))+"%";case "string":return A;
default:return l("formatAsPercentage: expects a number"),A}},memoize:z,debounce:(A,B,v)=>{const n="__DBTO_"+ ++w;return function(){const y=this,D=y[n],F=arguments,K=v&&!D;clearTimeout(D);y[n]=setTimeout(function(){y[n]=null;v||A.apply(y,F)},B);K&&A.apply(y,F)}},createFixedThresholdCounter:(A,B,v,n)=>{var y=J.AccessorSupport.generateName;const D="function"===typeof A||A instanceof JS.Module,F={};n=n||y("counter",v);const K=y(n,"increment");y=y(n,"decrement");if(void 0!==(D?A.instanceMethod(K):A[K]))return l("Increment: Abort clobber",
K,A),!1;if(void 0!==(D?A.instanceMethod(y):A[y]))return l("Decrement: Abort clobber",y,A),!1;F[K]=function(){const L=this[n]+1;this[n]=L;this.fireEvent(n,L);L===B&&this.set(v,!0)};F[y]=function(){const L=this[n];if(0!==L){var P=L-1;this[n]=P;this.fireEvent(n,P);L===B&&this.set(v,!1)}};A[D?"include":"extend"](F);return!0},makeURLSearchParams:(A={})=>{const B=new URLSearchParams;for(const v in A){const n=A[v];void 0!==n&&B.set(v,n)}return B},doFetch:(A,B,v,n,y,D)=>fetch(A,B).then(F=>{if(!F.ok)throw new x(F.status,
A,F.statusText);return F}).then(F=>v?F.text():F.json()).then(F=>{if(n)try{if(v)n(F);else{if(!1===F.success)throw new x(200,A,F.message);n(F.data)}}catch(K){throw F=new x(200,A,K.message),F.stack=K.stack,F;}}).catch(F=>{if(y){if("FetchError"!==F.name){const K=new x(0,A,F.message);K.stack=F.stack;F=K}y(F)}}).finally(()=>{D?.()}),I18N:{setLocale:A=>{t=A},getLocale:()=>t,addDictionary:(A,B)=>{r[B]=Object.assign(r[B]??{},A)},setDictionary:(A,B)=>{r[B]=A??{}},get:(A,...B)=>{var v=t??=(navigator.language??
"en").split("-")[0].toLowerCase();v=(r[v]??r.en??{})[A];return null!=v?0<B.length?v.replaceAll(E,(n,y,D,F)=>D&&F?1==B[parseInt(y)]?D:F:"").replaceAll(I,(n,y)=>B[y]):v:A}}};m.onloadingdone=A=>{for(const B of A.fontfaces)p(B)}})(global);
(u=>{const x=(t,l)=>{t.startsWith('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return l?JSON.parse(t):t}catch(a){}},w=u.Cookie={defaults:{raw:!1,json:!1},read:(t,l)=>{l={...w.defaults,...l};const a=l.raw?d=>d:d=>decodeURIComponent(d.split("+").join(" "));l=l.json;const c=document.cookie.split("; "),h=c.length,e=t?void 0:{};for(let d=0;d<h;){var k=c[d++].split("=");const g=a(k.shift());k=a(k.join("="));if(t){if(t===g)return x(k,l)}else e[g]=x(k,l)}return e},write:(t,l,a)=>
{a={...w.defaults,...a};if("number"===typeof a.expires){const g=a.expires,f=a.expires=new Date;f.setDate(f.getDate()+g)}l=a.json?JSON.stringify(l):String(l);const {raw:c,expires:h,path:e,domain:k,samesite:d}=a;return document.cookie=[c?t:encodeURIComponent(t),"=",c?l:encodeURIComponent(l),h?"; expires="+h.toUTCString():"",e?"; path="+e:"",k?"; domain="+k:"",d?"; samesite="+d:"",a.secure?"; secure":""].join("")},remove:(t,l)=>void 0!==w.read(t,l)?(w.write(t,"",{...l,expires:-1}),!0):!1}})(myt);
(u=>{const x=console.error,w=JSON.parse,t=global.localStorage,l=t.getItem.bind(t),a=t.setItem.bind(t),c=t.removeItem.bind(t),h=t.clear.bind(t),e=(d,g,f)=>{if(0<g){const b="__timerId_"+f;(f=k[b])&&clearTimeout(f);k[b]=setTimeout(()=>{d();delete k[b]},g)}else d()},k=u.LocalStorage={hasDatum:(d,g)=>{if(d&&(g=l(g??"myt")))try{return null!=w(g)[d]}catch(f){x(f)}return!1},getDatum:(d,g)=>{if(d&&(g=l(g??"myt")))try{const f=w(g);if("object"===typeof f)return f[d]}catch(f){x(f)}},setDatum:(d,g,f,b)=>{f=f??
"myt";e(()=>{const q=k.getData(f);q[d]=g;a(f,JSON.stringify(q))},b,f+"___"+d)},removeDatum:(d,g,f)=>{g=g??"myt";e(()=>{const b=k.getData(g);delete b[d];a(g,JSON.stringify(b))},f,g+"___"+d)},hasData:d=>null!=l(d??"myt"),getData:d=>{if(d=l(d??"myt"))try{return w(d)}catch(g){x(g)}return{}},setData:(d,g,f)=>{g=g??"myt";d??={};return"object"===typeof d?(e(()=>{a(g,JSON.stringify(d))},f,g),!0):!1},removeData:(d,g)=>{d=d??"myt";e(()=>{c(d)},g,d)},getLength:()=>t.length,getKey:t.key.bind(t),getItem:l,setItem:a,
removeItem:c,clear:h,get:l,set:a,remove:c,clearAll:h}})(myt);
(u=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;u.URI=new JS.Class("URI",{initialize:function(l,a){l&&this.parse(l,a)},setSource:function(l){this.source=l},setProtocol:function(l){this.protocol=
l},setAuthority:function(l){this.authority=l},setUserInfo:function(l){this.userInfo=l},setUser:function(l){this.user=l},setPassword:function(l){this.password=l},setHost:function(l){this.host=l},setPort:function(l){this.port=l},setRelative:function(l){this.relative=l},setPath:function(l){this.path=l},setDirectory:function(l){this.directory=l},setFile:function(l){this.file=l},setQuery:function(l){this.query=l},setAnchor:function(l){this.anchor=l},parse:function(l,a){const c=this,[h,e,k,d,g,f,b,q,m,
p,r,z,E,I]=(a?t:w).exec(l)??[];c.setSource(h??"");c.setProtocol(e??"");c.setAuthority(k??"");c.setUserInfo(d??"");c.setUser(g??"");c.setPassword(f??"");c.setHost(b??"");c.setPort(q??"");c.setRelative(m??"");c.setPath(p??"");c.setDirectory(r??"");c.setFile(z??"");c.setQuery(E??"");c.setAnchor(I??"");c.queryPairs={};c.query.replace(x,(J,A,B)=>{A&&(c.queryPairs[A]=B)})},decodeQueryParam:l=>decodeURIComponent(l).split("+").join(" "),getQuery:function(){var l=this.queryPairs;const a=[];for(const c in l)a.push(c+
"="+encodeURIComponent(this.getQueryParam(c)));l=a.join("&");return 0<l.length?"?"+l:l},getQueryParam:function(l){l=this.queryPairs[l];return null==l?void 0:this.decodeQueryParam(l)},setQueryParam:function(l,a){this.queryPairs[encodeURIComponent(l)]=encodeURIComponent(a)},removeQueryParam:function(l){delete this.queryPairs[l]},getPathParts:function(l){const a=this.path.split("/");if(!l)for(l=a.length;l;)0===a[--l].length&&a.splice(l,1);return a},toString:function(l){const a=this.path;l=l?this.query?
"?"+this.query:"":this.getQuery();const c=this.anchor;let h=this.toStringThroughPort();a?h+=a:this.host&&(l||c)&&(h+="/");l&&(h+=l);c&&(h+="#"+c);return h},toStringThroughPort:function(){const l=this.protocol,a=this.host,c=this.userInfo,h=this.port;let e="";l&&(e+=l+"://");c&&a&&(e+=c+"@");a&&(e+=a,h&&(e+=":"+h));return e}})})(myt);
(u=>{const x=Math,{PI:w,cos:t,sin:l,sqrt:a}=x,c=(k,d,g,f,b,q)=>{"object"===typeof k&&(q=b,b=f,f=g,g=d,d=k.y,k=k.x);"object"===typeof g&&(q=g.height,b=g.width,f=g.y,g=g.x);return k>=g&&d>=f&&k<=g+b&&d<=f+q},h=(k,d,g,f,b)=>{k=g-k;d=f-d;d=k*k+d*d;return b?d:a(d)},e=(k,d,g,f,b)=>{null==b&&(b=6371);k=k*w/180;g=g*w/180;return b*x.acos(l(k)*l(g)+t(k)*t(g)*t(f*w/180-d*w/180))};u.Geometry={getClosestPointOnALineToAPoint:(k,d,g,f,b,q,m)=>{g-=k;f-=d;b=(g*(b-k)+f*(q-d))/(g*g+f*f);m&&(b=x.min(1,x.max(0,b)));return{x:k+
g*b,y:d+f*b}},isPointInPath:(k,d,g,f)=>{"object"===typeof k&&(f=g,g=d,d=k.y,k=k.x);if(c(k,d,g)&&(g=f.length,6<=g)){let b=!1,q=f[0],m=f[1],p,r;for(;g;)r=f[--g],p=f[--g],r>d!==m>d&&k<(q-p)*(d-r)/(m-r)+p&&(b=!b),q=p,m=r;return b}return!1},measureDistance:h,measureLatLngDistance:e,degreesToRadians:k=>k*w/180,radiansToDegrees:k=>180*k/w,rectContainsPoint:c,circleContainsPoint:(k,d,g,f,b)=>h(k,d,g,f,!0)<=b*b,circleContainsLatLng:(k,d,g,f,b,q)=>e(k,d,g,f,q)<=b,polarToCartesian:(k,d,g,f)=>{g??=0;f??=0;d%=
360;if(0===d)d=k,k=0;else if(90===d)d=0;else if(180===d)d=-k,k=0;else if(270===d)d=0,k=-k;else{const b=d*w/180;d=k*t(b);k*=l(b)}return[g+d,f+k]},cartesianToPolar:(k,d,g,f,b)=>{g??=0;f??=0;k-=g;f=d-f;d=a(k*k+f*f);f=x.atan2(f,k);0>f&&(f+=2*w);return[d,b?f:180*f/w]}}})(myt);
(u=>{const x=JS.Module,w=console.log,t=u.dumpStack;u.Observable=new x("Observable",{attachObserver:function(l,a,c){return l&&a&&c?(this.getObservers(c).push(a,l),!0):!1},detachObserver:function(l,a,c){if(l&&a&&c){var h=this.__obsbt;if(h&&(c=h[c])){h=!1;for(let e=c.length-2;0<=e;e-=2){const [k,d]=c.slice(e);l===d&&a===k&&(c.splice(e,2),h=!0)}return h}}return!1},detachAllObservers:function(){const l=this.__obsbt;if(l)for(const a in l){const c=l[a];for(let h=c.length-2;0<=h;h-=2){const [e,k]=c.slice(h);
k&&e&&("function"===typeof k.detachFrom&&k.detachFrom(this,e,a)||c.splice(h,2))}}},getObservers:function(l){let a;return(a=this.__obsbt??(this.__obsbt={}))[l]??(a[l]=[])},hasObservers:function(l){const a=this.__obsbt;return a?0<a[l]?.length:!1},createEvent:function(l,a){return{source:this,type:l,value:a}},fireEvent:function(l,a,c){if(c=c??(this.hasObservers(l)?this.__obsbt[l]:null)){const h={source:this,type:l,value:a},e=this.__aet??(this.__aet={});if(e[l])u.global.error.notify("warn","eventLoop",
"Abort refiring event:"+l,null,{observable:this,type:l,value:a});else{e[l]=!0;for(a=c.length-2;0<=a;a-=2){const [k,d]=c.slice(a);if(d&&k)try{if("function"===typeof k){if(k.call(d,h))break}else if(d[k](h))break}catch(g){t(g),w("Additional context",k,d)}}e[l]=!1}}}});u.Observer=new x("Observer",{valueFromEvent:l=>l&&"object"===typeof l&&l.type?l.value:l,syncTo:function(l,a,c,h,e){h??=c;try{this[a](l.createEvent(c,l.get(h)))}catch(k){t(k)}e||this.attachTo(l,a,c,e)},isAttachedTo:function(l,a,c){if(l&&
a&&c){var h=this.__obt;if(h&&(c=h[c]))for(h=c.length-2;0<=h;h-=2){const [e,k]=c.slice(h);if(l===k&&a===e)return!0}}return!1},getObservables:function(l){let a;return(a=this.__obt??(this.__obt={}))[l]??(a[l]=[])},hasObservables:function(l){const a=this.__obt;return a?0<a[l]?.length:!1},attachTo:function(l,a,c,h){if(l&&a&&c){const e=this.getObservables(c);if(h){const k=this,d=a;this.__methodNameCounter??(this.__methodNameCounter=0);a="__DO_ONCE_"+this.__methodNameCounter++;this[a]=g=>{k.detachFrom(l,
a,c);delete k[a];return k[d](g)}}if(l.attachObserver(this,a,c))return e.push(a,l),!0}return!1},detachFrom:function(l,a,c){if(l&&a&&c){var h=this.__obt;if(h&&(h=h[c])){let e=!1;for(let k=h.length-2;0<=k;k-=2){const [d,g]=h.slice(k);l===g&&a===d&&l.detachObserver(this,a,c)&&(h.splice(k,2),e=!0)}return e}}return!1},detachFromAllObservables:function(){var l=this.__obt;if(l)for(const [a,c]of Object.entries(l)){for(l=c.length-2;0<=l;l-=2){const [h,e]=c.slice(l);e.detachObserver(this,h,a)}c.length=0}},constrain:function(l,
a){if(l&&a){const h=a.length;if(0!==h%2)w("Observables uneven",this);else{var c;const e=(c=this.__cbmn??(this.__cbmn={}))[l]??(c[l]=[]);if(0<e.length)w("Constraint exists for "+l+" on "+this);else{for(c=0;c<h;c+=2){const [k,d]=a.slice(c);k&&d&&(this.attachTo(k,l,d),e.push(k,d))}try{this[l]()}catch(k){t(k)}}}}},releaseConstraint:function(l){if(l){var a=this.__cbmn;if(a&&(a=a[l])){for(let c=a.length;0<=c;c-=2){const [h,e]=a.slice(c);this.detachFrom(h,l,e)}a.length=0}}},releaseAllConstraints:function(){const l=
this.__cbmn;if(l)for(const a in l)this.releaseConstraint(a)}})})(myt);(u=>{const x=console.warn,w=u.global=new JS.Singleton("Global",{include:[u.Observable],initialize:()=>{},register:(t,l)=>{w.hasOwnProperty(t)&&(x("Global key in use",t),w.unregister(t));w[t]=l;w.fireEvent("register"+t,l)},unregister:t=>{if(w.hasOwnProperty(t)){const l=w[t];delete w[t];w.fireEvent("unregister"+t,l)}else x("Global key not in use",t)}})})(myt);
(u=>{let x;new JS.Singleton("GlobalError",{include:[u.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);u.global.register("error",x)},setConsoleLogging:w=>{x.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=x.stackTraceLimit=w},notify:(w,t,l,a,c)=>{a??=Error(l??t);a=a.stack??a.stacktrace;x.fireEvent(t??"error",{msg:l,stacktrace:a,...c});if(x.consoleLogging&&w)console[w](a)}})})(myt);
(u=>{const x=global,w=x.getComputedStyle,t=document,l=Math.max,a=e=>{const {zIndex:k,opacity:d}=w(e);if("auto"===k){if(1===parseInt(d,10)){let g=0;e=e.childNodes;let f=e.length;for(;f;){const b=e[--f];1===b.nodeType&&(g=l(g,a(b)))}return g}return 0}return parseInt(k,10)},c=(e,k)=>{const d=[];for(;e;){d.push(e);if(e===k)break;e=e.parentNode}return d},h=u.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(e,k,d)=>{e=t.createElement(e);for(const g in d)e[g]=d[g];for(const g in k)e.style[g]=
k[g];return e},isDomElementVisible:e=>{if("INPUT"!==e.nodeName||"hidden"!==e.type)for(;e;){if(e===t)return!0;const {display:k,visibility:d}=w(e);if("none"===k||"hidden"===d)break;e=e.parentNode}return!1},getZIndexRelativeToAncestor:(e,k)=>{if(e&&k)for(e=c(e,k),k=e.length-1;k;){const d=w(e[--k]),g=d.zIndex,f="auto"===g;if(0===k||!f||1!==parseInt(d.opacity,10))return f?0:parseInt(g,10)}return 0},getAncestorArray:c,getHighestZIndex:a,getRelativePosition:(e,k)=>{if(e){let d=0,g=0;for(;e&&"BODY"!==e.nodeName&&
e!==k;)if(d+=e.offsetLeft,g+=e.offsetTop,(e=e.offsetParent)&&"BODY"!==e.nodeName){const {borderLeftWidth:f,borderTopWidth:b}=w(e);d+=parseInt(f,10)-e.scrollLeft;g+=parseInt(b,10)-e.scrollTop}return{x:d,y:g}}},getTruePosition:e=>{if(e)return e=e.getBoundingClientRect(),e.left+=x.scrollX,e.top+=x.scrollY,e},simulateDomEvent:(e,k,d)=>{if(e){const g={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(d)for(const q in d)g[q]=d[q];let b;for(const q in f)if(f[q].test(k)){b=q;break}if(!b)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(t.createEvent)d=t.createEvent(b),"HTMLEvents"===b?d.initEvent(k,g.bubbles,g.cancelable):d.initMouseEvent(k,g.bubbles,g.cancelable,t.defaultView,g.button,g.pointerX,g.pointerY,g.pointerX,g.pointerY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,null),e.dispatchEvent(d);
else{g.clientX=g.pointerX;g.clientY=g.pointerY;d=t.createEventObject();for(const q in g)d[q]=g[q];e.fireEvent("on"+k,d)}}},getScrollbarSize:u.memoize(()=>{const e=t.body,k=h.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});e.appendChild(k);const d=k.offsetWidth-k.clientWidth;e.removeChild(k);return d})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(e){if(Array.isArray(e)){const [k,
d]=e;this.__oE=k;this.__iE=d;this.__iS=d.style;this.__oS=k.style;d.model=k.model=this}else this.__oE=this.__iE=e,this.__iS=this.__oS=e.style,e.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(e){this.__iE.className=this.domClass=e},addDomClass:function(e){const k=this.__iE.className;this.setDomClass((k?
k+" ":"")+e)},removeDomClass:function(e){var k=this.__iE.className;if(k){k=k.split(" ");let d=k.length;for(;d;)k[--d]===e&&k.splice(d,1);this.setDomClass(k.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(e){this.__iE.id=this.domId=e},setZIndex:function(e){this.__oS.zIndex=e},setStyleProperty:function(e,k){this.__iS[e]=k},getPagePosition:function(e){return h["get"+(e?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){h.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return a(this.__iE)},getHighestChildZIndex:function(e){const k=this.__iE.childNodes;let d=k.length,g=0;for(;d;){const f=k[--d];1===f.nodeType&&f!==e&&(g=l(g,a(f)))}return g},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(e,k){(k?this.__iE:this.__oE).scrollTop=e||0}})})(myt);
(u=>{let x;const w=l=>{for(;l.lastChild;)l=l.lastChild;return l},t=(l,a)=>{x.lastTraversalWasForward=l;let c=document.body,h=c;var e=document.activeElement;let k=h,d;const g=l?"getNextFocus":"getPrevFocus";e&&(k=h=e,(e=h.model)??(e=x.findModelForDomElement(h)),e&&(a=e.getFocusTrap(a))&&(c=a.getIDE()));for(;k;){if(k.model&&k.model[g]&&(d=k.model[g]()))k=d.getIDE();else if(l)if(k.firstChild)k=k.firstChild;else{if(k===c)return h.model;if(k.nextSibling)k=k.nextSibling;else for(;k&&(k=k.parentNode,k!==
c);)if(k.nextSibling){k=k.nextSibling;break}}else k=k===c?w(c):k.previousSibling?w(k.previousSibling):k.parentNode;if(k===h)return h.model;if(1===k.nodeType)if((e=k.model)&&e instanceof u.View){if(e.isFocusable())return e}else if(a=k.nodeName,!("A"!==a&&"AREA"!==a&&"INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a&&"BUTTON"!==a||k.disabled||isNaN(k.tabIndex))&&u.DomElementProxy.isDomElementVisible(k)&&(e=x.findModelForDomElement(k),!e?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){k.focus();x.focusedDom=k;
break}}};new JS.Singleton("GlobalFocus",{include:[u.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;u.global.register("focus",x)},setFocusedView:l=>{if(x.focusedView!==l){x.prevFocusedView=x.focusedView;if(x.focusedView=l)x.focusedDom=null;x.fireEvent("focused",l)}},notifyFocus:l=>{x.focusedView!==l&&x.setFocusedView(l)},notifyBlur:l=>{x.focusedView===l&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:l=>{t(!0,l)?.focus()},prev:l=>{t(!1,l)?.focus()},findModelForDomElement:l=>{for(;l;){let a=l.model;if(a&&a instanceof u.View)return a;l=l.parentNode}}})})(myt);
(u=>{const x=JS.Module,w=u.global,t=w.focus,l=()=>({source:null,type:null,value:null}),a=b=>{b=b.value??b;return(b.target??b.srcElement).model},c=u.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:l(),getKeyFromEvent:b=>b.value.key,getCodeFromEvent:b=>b.value.code,isEnterKeyEvent:b=>b.value.code===w.keys.CODE_ENTER,isEscKeyEvent:b=>b.value.code===w.keys.CODE_ESC,isShiftKeyEvent:b=>w.keys.isShiftCode(b.value.code)},createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,
q,m,c)??this.callSuper(b,q,m)}}),h=u.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:l(),getMouseFromEvent:b=>({x:b.value.pageX,y:b.value.pageY}),getMouseFromEventRelativeToView:(b,q)=>{q=q.getPagePosition();b=h.getMouseFromEvent(b);b.x-=q.x;b.y-=q.y;return b}},createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,q,m,h,!0)??this.callSuper(b,q,m)}}),e=u.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:l(),getScrollFromEvent:b=>{const {scrollLeft:q,scrollTop:m}=a(b);return{x:q,y:m}}},createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,q,m,e)??this.callSuper(b,q,m)}}),k=u.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:l()},createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,q,m,k,!1)??this.callSuper(b,q,m)}}),d=u.FocusObservable=
new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:l()},initNode:function(b,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(b,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(b){this.focused!==b&&(this.focused=b,this.inited&&(this.fireEvent("focused",b),b?t.notifyFocus(this):t.notifyBlur(this)))},setFocusable:function(b){if(this.focusable!==b){const q=this.focusable;(this.focusable=b)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",b)}},setFocusIndicator:function(b){this.focusIndicator!==b&&(this.focusIndicator=b,this.focused&&(b?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(t.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(b=>!0===b.maskFocus)},focus:function(b){this.isFocusable()&&this.getIDE().focus({preventScroll:b})},blur:function(){this.getIDE().blur()},__doFocus:function(b){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(b){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const b=this.getIDS();b.outlineWidth="thin";b.outlineColor="#8bf";b.outlineStyle="solid";b.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(b,q,m){if(d.EVENT_TYPES[m]){const p=this;return r=>{r??=window.event;if(p._ignoreFocus)r.cancelBubble=!0,r.stopPropagation?.(),r.preventDefault();
else{var z=d.EVENT;z.source=p;z.type=r.type;z.value=r;b[q](z)||(r.cancelBubble=!0,r.stopPropagation?.());z.source=void 0}}}return this.callSuper(b,q,m)}}),g=u.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:l()},createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,q,m,g)??this.callSuper(b,q,m)}}),f=u.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:l()},
createDomHandler:function(b,q,m){return this.createStandardDomHandler(b,q,m,f,!0)??this.callSuper(b,q,m)}});u.DomObservable=new x("DomObservable",{attachDomObserver:function(b,q,m,p,r){if(b&&q&&m){p=!!p;const z=this.createDomHandler(b,q,m);if(z){const E=this.__dobsbt??(this.__dobsbt={}),I=E[m];I?I.push(b,q,z,p):E[m]=[b,q,z,p];u.addEventListener(this.getDomElementForDomObservable(m),m,z,p,r);return!0}}return!1},getDomElementForDomObservable:function(b){return this.getIDE()},createDomHandler:(b,q,m)=>
null,createStandardDomHandler:function(b,q,m,p,r){if(p.EVENT_TYPES[m]){const z=this,E=p.EVENT;return I=>{I??=window.event;E.source=z;E.type=I.type;E.value=I;b[q](E)||(I.cancelBubble=!0,I.stopPropagation?.(),r&&I.preventDefault());E.source=void 0}}},detachDomObserver:function(b,q,m,p){if(b&&q&&m){p=!!p;var r=this.__dobsbt;if(r&&(r=r[m])){const z=this.getDomElementForDomObservable(m);let E=!1;for(let I=r.length-4;0<=I;I-=4){const [J,A,B,v]=r.slice(I,I+4);b===J&&q===A&&p===v&&(z&&u.removeEventListener(z,
m,B,p),r.splice(I,4),E=!0)}return E}}return!1},detachAllDomObservers:function(){var b=this.__dobsbt;if(b)for(const [q,m]of Object.entries(b)){for(b=m.length-2;0<=b;b-=4){const [p,r]=m.slice(b);u.removeEventListener(this.getDomElementForDomObservable(q),q,p,r)}m.length=0}}});u.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:a},attachToDom:function(b,q,m,p,r){if(b&&q&&m){p=!!p;let z;const E=(z=this.__dobt??(this.__dobt={}))[m]??(z[m]=[]);b.attachDomObserver(this,q,m,p,r)&&E.push(p,q,
b)}},detachFromDom:function(b,q,m,p){if(b&&q&&m){p=!!p;var r=this.__dobt;if(r&&(r=r[m])){let z=!1;for(let E=r.length-3;0<=E;E-=3){const [I,J,A]=r.slice(E);b===A&&q===J&&p===I&&b.detachDomObserver(this,q,m,p)&&(r.splice(E,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var b=this.__dobt;if(b)for(const [q,m]of Object.entries(b)){for(b=m.length-3;0<=b;b-=3){const [p,r,z]=m.slice(b);z.detachDomObserver(this,r,q,p)}m.length=0}}})})(myt);
(u=>{let x;const {KeyObservable:w,global:t}=u,l=t.focus,a=w.getCodeFromEvent,c=new Set,h="Firefox"===BrowserDetect.browser,e=h?"OSLeft":"MetaLeft",k=h?"OSRight":"MetaRight",d=()=>c.has("ShiftLeft")||c.has("ShiftRight"),g=()=>c.has("ControlLeft")||c.has("ControlRight"),f=()=>c.has("AltLeft")||c.has("AltRight"),b=()=>c.has(e)||c.has(k),q=(p,r)=>{switch(p){case "Backspace":return p=r.nodeName,!("TEXTAREA"===p||"INPUT"===p&&("text"===r.type||"number"===r.type||"password"===r.type)||"DIV"===p&&"true"===
r.contentEditable&&r.firstChild);case "Tab":return!0}return!1},m=(p,r)=>{for(const z of["keydown","keypress","keyup"])x[r](p,"__hndl_"+z,z)};new JS.Singleton("GlobalKeys",{include:[u.DomElementProxy,u.DomObservable,u.DomObserver,w,u.Observable,u.Observer],initialize:function(){t.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const p of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+p]="Key"+p;for(const p of"1234567890".split(""))x["CODE_"+p]="Digit"+p;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(l,"__hndl_focused","focused");m(x,"attachToDom");global.onblur=()=>{c.clear()}},isShiftKeyDown:d,isControlKeyDown:g,isAltKeyDown:f,isMetaKeyDown:b,isShiftCode:p=>
"ShiftLeft"===p||"ShiftRight"===p,isControlCode:p=>"ControlLeft"===p||"ControlRight"===p,isAltCode:p=>"AltLeft"===p||"AltRight"===p,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?b():g(),ignoreFocusTrap:()=>f(),__hndl_focused:p=>{(p=p.value)?(m(x,"detachFromDom"),m(p,"attachToDom")):((p=l.prevFocusedView)&&m(p,"detachFromDom"),m(x,"attachToDom"))},__hndl_keydown:p=>{const r=a(p);p=p.value;q(r,p.target)&&p.preventDefault();b()&&"ShiftLeft"!==r&&"ShiftRight"!==r&&"ControlLeft"!==r&&"ControlRight"!==
r&&"AltLeft"!==r&&"AltRight"!==r?(x.fireEvent("keydown",r),x.fireEvent("keyup",r)):(c.add(r),"Tab"===r&&(p=f(),d()?l.prev(p):l.next(p)),x.fireEvent("keydown",r))},__hndl_keypress:p=>{x.fireEvent("keypress",a(p))},__hndl_keyup:p=>{const r=a(p);p=p.value;q(r,p.target)&&p.preventDefault();c.delete(r);x.fireEvent("keyup",r)}})})(myt);
(u=>{const x=JS.Module,w=Math.max,t=(d,g,f,b,q=0)=>{const m=d.length;for(let p=f;q<m;q++)e(d[q],g,p),b&&(p+=f)},l=(d,g,f,b=0)=>{const q=d.length;for(let m=g;b<q;)d[b++].crossPos+=m,f&&(m+=g)},a=(d,g)=>g?d.getFlexBasisWidth():d.getFlexBasisHeight(),c=(d,g,f,b)=>{d[g?"setWidthViaFlex":"setHeightViaFlex"]((b?a(d,g):0)+f)},h=(d,g,f)=>{d[g?"setXViaFlex":"setYViaFlex"](f,!1)},e=(d,g,f)=>{d[g?"setXViaFlex":"setYViaFlex"](f,!0)},k=(d,g,f)=>{d[g]!==f&&(d[g]=f,d.inited&&d.fireEvent(g,f),d.updateFlexboxLayout())};
u.FlexboxSupport=new x("FlexboxSupport",{initNode:function(d,g){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(d,g);this.updateFlexboxLayout()},setWidth:function(d){const g=this.width;this.callSuper(d);g!==this.width&&this.updateFlexboxLayout()},setHeight:function(d){const g=this.height;this.callSuper(d);g!==this.height&&this.updateFlexboxLayout()},
setDirection:function(d){k(this,"direction",d)},setWrap:function(d){k(this,"wrap",d)},setJustifyContent:function(d){k(this,"justifyContent",d)},setAlignItems:function(d){k(this,"alignItems",d)},setAlignContent:function(d){k(this,"alignContent",d)},setRowGap:function(d){k(this,"rowGap",w(0,d))},setColumnGap:function(d){k(this,"columnGap",w(0,d))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(d){this.set("totalBasisWidth",
d,!0)},setTotalBasisHeight:function(d){this.set("totalBasisHeight",d,!0)},ignoreSubviewForFlex:function(d){return d&&"function"===typeof d.ignoreFlex?d.ignoreFlex():!0},setFlexboxPaused:function(d,g){this.__flexboxPaused!==d&&((this.__flexboxPaused=d)||g||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(d){this.callSuper(d);d&&!this.ignoreSubviewForFlex(d)&&this.updateFlexboxLayout()},subviewRemoved:function(d){this.callSuper(d);!d||this.ignoreSubviewForFlex(d)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(d){this.callSuper(d);d&&this.ignoreSubviewForFlex(d)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(d){return d?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(d){return d?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(d){this._updateAgain=d},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const d=this;if(d.isOKToUpdateLayout()){var g=d.getSubviewsInLexicalOrder().filter(J=>!0!==d.ignoreSubviewForFlex(J)&&!0===J.visible);const I=g.length;if(0<I){d.__isUpdatingFlexboxLayout=!0;var f=d.direction;const J=f.startsWith("row"),A=!J;var b=d.getWidthForFlexboxLayout(),q=d.getHeightForFlexboxLayout();const B=J?d.columnGap:d.rowGap,v=J?b:q;var m=J?d.rowGap:
d.columnGap;const n=J?q:b,y=d.isWrapNotAllowed();b=d.justifyContent;q=d.alignItems;var p=y?"stretch":d.alignContent;f.endsWith("Reverse")&&g.reverse();let D=0,F=0,K=0,L=0,P={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:K,crossSize:0};f=[P];for(let R=0;R<I;){const S=g[R++],U=a(S,J),O=S.getShrink(),ba=S.getGrow();!y&&0<P.items.length&&D+(0===L?0:B)+U>v&&(P.extraSize=v-D,K+=P.crossSize+m,F=w(F,D),L=D=0,P={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:K,
crossSize:0},f.push(P));0!==L&&(D+=B);0<O&&0<U&&(P.shrinkCount+=O,P.shrinkBasis+=U*O);0<ba&&(P.growCount+=ba);P.crossSize=w(P.crossSize,a(S,A));h(S,J,D);c(S,J,U);D+=U;P.items.push(S);L++}P.extraSize=v-D;K+=P.crossSize;F=w(F,D);if(d.isCompactOnMainAxis(J)&&(g=f.reduce((R,S)=>null==R?S.extraSize:Math.min(R,S.extraSize),null),0!==g))for(var r of f)r.extraSize-=g;d[J?"setTotalBasisWidth":"setTotalBasisHeight"](F);d[J?"setTotalBasisHeight":"setTotalBasisWidth"](K);r=f.length;if(1<r&&"wrapReverse"===d.wrap){for(var z of f)z.crossPos=
K-(z.crossPos+z.crossSize);f.reverse()}if(!d.isCompactOnCrossAxis(J))switch(z=n-K,p){default:case "start":break;case "end":l(f,z,!1);break;case "center":l(f,z/2,!1);break;case "spaceBetween":1<r&&l(f,z/(r-1),!0,1);break;case "spaceAround":z<=m?l(f,z/2,!1):(l(f,m/2,!1),z-=m,l(f,z/(2*r),!0),l(f,z/(2*r),!0,1));break;case "spaceEvenly":z<=2*m?l(f,z/2,!1):(l(f,m,!1),l(f,(z-2*m)/(r+1),!0));break;case "stretch":m=z/r;z=0;for(var E of f)E.crossSize+=m,E.crossPos+=z,z+=m}for(const R of f){E=R.items;m=R.extraSize;
if(0<m)if(0<R.growCount){m/=R.growCount;f=0;for(const O of E)0<f&&e(O,J,f),z=O.getGrow()*m,0<z&&(c(O,J,z,!0),f+=z)}else switch(f=E.length,b){default:case "start":break;case "end":t(E,J,m,!1);break;case "center":t(E,J,m/2,!1);break;case "spaceBetween":1<f&&t(E,J,m/(f-1),!0,1);break;case "spaceAround":m<=B?t(E,J,m/2,!1):(t(E,J,B/2,!1),m-=B,t(E,J,m/(2*f),!0),t(E,J,m/(2*f),!0,1));break;case "spaceEvenly":m<=2*B?t(E,J,m/2,!1):(t(E,J,B,!1),m-=2*B,t(E,J,m/(f+1),!0))}else if(0>m&&0<R.shrinkCount){f=R.shrinkBasis;
z=0;for(const O of E)0>z&&e(O,J,z),p=O.getShrink()*a(O,J)/f*w(m,-f),0>p&&(c(O,J,p,!0),z+=p)}m=!1;const {crossSize:S,crossPos:U}=R;for(const O of E)switch(O.getAlignSelf()||q){case "start":h(O,A,U);c(O,A,a(O,A),!1);break;case "end":h(O,A,U+S-a(O,A));c(O,A,a(O,A),!1);break;case "center":h(O,A,U+(S-a(O,A))/2);c(O,A,a(O,A),!1);break;case "baseline":m=!0;h(O,A,U+(S-a(O,A))/2+O.getFlexBaselineOffset(J));c(O,A,a(O,A),!1);break;default:h(O,A,U),c(O,A,S,!1)}m&&d.updateFlexboxLayoutBaselineAdjustment(E,J,U)}d.__isUpdatingFlexboxLayout=
!1;d.isUpdateAgain()&&!d.__UPDATE_AGAIN_LOOP_PROTECTION&&(d.setUpdateAgain(!1),d.__UPDATE_AGAIN_LOOP_PROTECTION=!0,d.updateFlexboxLayout(),d.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else d.setTotalBasisWidth(0),d.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(d,g,f)=>{}});u.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(d){this.visible!==d&&(this.callSuper(d),this.updateFlexboxLayoutFromChild())},setXViaFlex(d,g){g&&(d+=this.x);this.x!==d&&(this.__isFlexUpdate=!0,
this.setX(d),this.__isFlexUpdate=!1)},setYViaFlex(d,g){g&&(d+=this.y);this.y!==d&&(this.__isFlexUpdate=!0,this.setY(d),this.__isFlexUpdate=!1)},setWidth:function(d){const g=this.width!==d;g&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(d);g&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(d){this.width!==d&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(d),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??
this.width},setHeight:function(d){const g=this.height!==d;g&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(d);g&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(d){this.height!==d&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(d),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:d=>0,setIgnoreFlex:function(d){this.__ignoreFlex!==d&&(this.__ignoreFlex=d,this.inited&&
(this.fireEvent("ignoreFlex",d),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(d){d=w(0,d);this.grow!==d&&(this.grow=d,this.inited&&(this.fireEvent("grow",d),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(d){d=w(0,d);this.shrink!==d&&(this.shrink=d,this.inited&&(this.fireEvent("shrink",d),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(d){this.alignSelf!==
d&&(this.alignSelf=d,this.inited&&(this.fireEvent("alignSelf",d),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const d=this.alignSelf;return"auto"===d||""===d?null:d},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(u=>{const x=console.log,w=new Map,t=new Map,l=(e,k)=>k+e.charAt(0).toUpperCase()+e.slice(1),a=e=>t.get(e)??(t.set(e,l(e,"set")),t.get(e)),c=e=>w.get(e)??(w.set(e,l(e,"get")),w.get(e)),h=(e,k)=>{let d;for(const g in k){const f=k[g],b=a(g);if(b in e)e[b](f);else e[g]!==f&&(e[g]=f,(d??=!1!==e.inited&&e.fireEvent)&&e.fireEvent(g,f))}};u.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:a,generateGetterName:c,generateName:l,createSetterFunction:(e,k)=>{const d=a(k);e[d]&&x("Overwriting setter",
d);e[d]=function(g){this[k]!==g&&(this[k]=g,this.inited&&this.fireEvent(k,g))}},createGetterFunction:(e,k)=>{const d=c(k);e[d]&&x("Overwriting getter",d);e[d]=function(){return this[k]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(e,k){if(e)for(const d of e)this[d]=k[d],delete k[d]},callSetters:function(e){var k=this.earlyAttrs,d=this.lateAttrs;if(k||d){e={...e};if(k){var g=k.length;for(var f=0;f<g;){const q=k[f++];q in e&&(this.set(q,e[q]),delete e[q])}}let b;if(d)for(b=[],k=d.length,g=0;g<k;)f=d[g++],f in e&&(b.push(f,e[f]),delete e[f]);h(this,e);if(b)for(d=b.length,e=0;e<d;)this.set(b[e++],b[e++])}else h(this,e)},get:function(e){const k=c(e);return k in self?
this[k]():this[e]},set:function(e,k,d){if(!d&&(d=a(e),d in this))return this[d](k);this[e]!==k&&(this[e]=k,!1!==this.inited&&this?.fireEvent(e,k))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var u=this.__meta__;if(u){var x=Object.keys(u);for(let w=x.length;0<w;)u[x[--w]]=null}u=Object.keys(this);for(x=u.length;0<x;)this[u[--x]]=null;this.destroyed=!0}}});
(u=>{const {Class:x,Module:w}=JS,t=console.warn;let l;const a=(f,b)=>b?(l=f).__op??(l.__op=[]):f.__op;let c;const h=(f,b)=>b?(c=f).__actives??(c.__actives=[]):f.__actives,e=new x("AbstractPool",{include:[u.Destructible],initialize:()=>{},destroy:function(){const f=a(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=a(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){a(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=a(this);if(f){let b=f.length;for(;b;){const q=f[--b];"function"===typeof q.destroy&&q.destroy()}}}}),k=u.SimplePool=new x("SimplePool",e,{initialize:function(f,b){this.callSuper();this.instanceClass=f??Object;this.instanceParent=b},createInstance:function(f){var b=this.instanceParent,q=this.instanceClass;return b?new q(b,f):new q}}),d=new w("TrackActives",{destroy:function(){const f=h(this);
f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();h(this,!0).push(f);return f},putInstance:function(f){var b=h(this);if(b){const q=b.indexOf(f);if(-1<q){b.splice(q,1);this.callSuper(f);return}b="inactive"}else b="missing";t("Tried to put a "+b+" instance",f,this)},getActives:function(f){const b=h(this);if(b){if(f){const q=[],m=b.length;for(let p=0;m>p;){const r=b[p++];f.call(this,r)&&q.push(r)}return q}return b.slice()}return[]},putActives:function(){const f=h(this);
if(f){let b=f.length;for(;b;)this.putInstance(f[--b])}}}),g=u.TrackActivesPool=new x("TrackActivesPool",k,{include:[d]});u.TrackActivesMultiPool=new x("TrackActivesMultiPool",e,{initialize:function(f,b){this.callSuper();this.instanceClassesByKey=f;const q=this._poolsByClassName={},m=this.__pbk={};for(const p in f){const r=f[p];m[p]=q[r.__displayName]=new g(r,b)}},destroy:function(){const f=this.__pbk;for(const b in f)f[b].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],b=this.__pbk[f];
if(b)return b.getInstance(arguments);t("No pool for key",f)},putInstance:function(f){const b=this._poolsByClassName[f.klass.__displayName];b?b.putInstance(f):t("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const b in f)f[b].destroyPooledInstances()},getActives:function(f){let b=[];const q=this.__pbk;for(const m in q)b.push(...q[m].getActives(f));return b},putActives:function(){const f=this.__pbk;for(const b in f)f[b].putActives()}});u.Reusable=new w("Reusable",{clean:()=>
{}})})(myt);
(u=>{const x=JS.Class,w=console.warn,t=[u.AccessorSupport,u.Destructible,u.Observable,u.Observer],l=(d,g)=>{if(g){const f=g.length;for(let b=0,q;f>b;)(q=g[b++])?d.extend(q):w("Missing mixin in",d.klass.__displayName)}d.inited=!1},a=(d,g)=>{if(g)for(;d;){if(g(d))return d;d=d.parent}},c=(d,g)=>{const f=g.name;void 0===d[f]?d[f]=g:w("Name in use",f)},h=(d,g)=>{const f=g.name;d[f]===g?delete d[f]:w("Name not in use",f)};let e;const k=d=>(e=d).__animPool??(e.__animPool=new u.TrackActivesPool(u.Animator,d));
u.Eventable=new x("Eventable",{include:t,initialize:function(d,g){l(this,g);this.init(d??{})},init:function(d){this.callSetters(d);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});u.Node=new x("Node",{include:t,extend:{getMatchingAncestorOrSelf:a,getMatchingAncestor:(d,g)=>a(d?d.parent:null,g),DEFAULT_PLACEMENT:"*"},initialize:function(d,g,f){l(this,f);this.initNode(d,g??{})},initNode:function(d,g){this.callSetters(g);
this.setParent(d);this.inited=!0},destroy:function(){const d=this.subnodes;this.isBeingDestroyed=!0;if(d)for(let g=d.length;0<g;)d[--g].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(d){this.placement=d},setDefaultPlacement:function(d){this.defaultPlacement=
d},setIgnorePlacement:function(d){this.ignorePlacement=d},setParent:function(d){if(d&&!this.ignorePlacement){var g=this.placement??d.defaultPlacement;g&&(d=d.determinePlacement(g,this))}if(this.parent!==d&&!d?.destroyed){if(g=this.parent){const f=g.getSubnodes().indexOf(this);-1<f&&(this.name&&h(g,this),g.subnodes.splice(f,1),g.subnodeRemoved(this))}if(this.parent=d)d.getSubnodes().push(this),this.name&&c(d,this),d.subnodeAdded(this);this.inited&&this.fireEvent("parent",d)}},setName:function(d){if(this.name!==
d){const g=this.parent;g&&this.name&&h(g,this);this.name=d;g&&d&&c(g,this)}},determinePlacement:function(d,g){let f=d.indexOf("."),b;0<=f&&(b=d.slice(f+1),d=d.slice(0,f));"*"===d&&(d=this.defaultPlacement)&&(f=d.indexOf("."),0<=f&&(b=d.slice(f+1)+(b?"."+b:""),d=d.slice(0,f)));return(d=this[d])?b?d.determinePlacement(b,g):d:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(d){if(d){if(d===this)return!0;if(this.parent)return this.getIDE&&
d.getIDE?d.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(d)}return!1},isAncestorOf:function(d){return d?d.isDescendantOf(this):!1},getLeastCommonAncestor:function(d){for(;d;){if(this.isDescendantOf(d))return d;d=d.parent}},searchAncestorsForClass:function(d){if(d)return this.searchAncestors(g=>g instanceof d)},searchAncestorsForModule:function(d){if(d)return this.searchAncestors(g=>g.isA(d))},searchAncestors:function(d){return a(this?this.parent:null,d)},searchAncestorsOrSelf:function(d){return a(this,
d)},getAncestors:function(){const d=[];let g=this;for(;g;)d.push(g),g=g.parent;return d},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:d=>{},subnodeRemoved:d=>{},animate:function(d){if(d){const g=k(this),f=g.getInstance({ignorePlacement:!0}),b=d.callback;delete d.callback;f.callSetters(d);f.next(q=>{g.putInstance(f)});b&&f.next(b);f.setRunning(!0);return f}},getActiveAnimators:function(d){if("string"===typeof d){const g=d;d=f=>f.attribute===g}return k(this).getActives(d)},
stopActiveAnimators:function(d,g=!1){d=this.getActiveAnimators(d);let f=d.length;if(0<f){const b=k(this);for(;f;){const q=d[--f];q.reset(g);g||b.putInstance(q)}}},doOnceOnIdle:function(d){this.attachTo(u.global.idle,d,"idle",!0)}})})(myt);
(u=>{let x=0,w=!1;const t=JS.Class,l=[],a=g=>{if(w!==g&&(w=g,!g)){for(g=l.length;g;){const f=l[--g];f.__deferredLayout=!1;f.update()}l.length=0}},c=(g,f,b,q)=>{const m=g.getSubviewIndex(f),p=g.subviews;-1<m&&(g=g.getSubviewIndex(b),p.splice(m,1),-1<g?(m<g&&--g,p.splice(g+(q?1:0),0,f)):q?p.push(f):p.unshift(f))},h=(g,f,b)=>{g[f]!==b&&(g[f]=b,g.inited&&(g.fireEvent(f,b),g.update()))},e=u.Layout=new t("Layout",u.Node,{extend:{incrementGlobalLock:()=>{1===++x&&a(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&a(!1)}},initNode:function(g,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const b=!0===f.locked;delete f.locked;this.callSuper(g,f);b||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(g){var f=this.parent;if(f!==g){const b=!this.locked;b&&(this.locked=!0);let q,m;if(f){q=this.subviews;for(m=q.length;m;)this.removeSubview(q[--m]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(g);
if(g=this.parent){q=g.getSubviews();m=0;for(f=q.length;f>m;)this.addSubview(q[m++]);this.attachTo(g,"__hndlPSA","subviewAdded");this.attachTo(g,"__hndlPSR","subviewRemoved")}b&&(this.locked=!1,this.inited&&g&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(l.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(g){return this.subviews.includes(g)},getSubviewIndex:function(g){return this.subviews.indexOf(g)},addSubview:function(g){this.ignore(g)||
(this.subviews.push(g),this.startMonitoringSubview(g),this.locked||this.update())},startMonitoringSubview:g=>{},startMonitoringAllSubviews:function(){const g=this.subviews;let f=g.length;for(;f;)this.startMonitoringSubview(g[--f])},removeSubview:function(g){if(this.ignore(g))return-1;const f=this.getSubviewIndex(g);-1<f&&(this.stopMonitoringSubview(g),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:g=>{},stopMonitoringAllSubviews:function(){const g=this.subviews;
let f=g.length;for(;f;)this.stopMonitoringSubview(g[--f])},ignore:g=>g.ignoreLayout,__hndlPSA:function(g){g=g.value;g.parent===this.parent&&this.addSubview(g)},__hndlPSR:function(g){g=g.value;g.parent===this.parent&&this.removeSubview(g)},sortSubviews:function(g){this.subviews.sort(g)},moveSubviewBefore:function(g,f){c(this,g,f,!1)},moveSubviewAfter:function(g,f){c(this,g,f,!0)}});var k=u.ConstantLayout=new t("ConstantLayout",e,{setTargetAttrName:function(g){this.setterName=u.AccessorSupport.generateSetterName(g);
h(this,"targetAttrName",g)},setTargetValue:function(g){h(this,"targetValue",g)},update:function(){if(this.canUpdate()){const g=this.setterName,f=this.targetValue,b=this.subviews,q=b.length;if(g)for(let m=0;q>m;)b[m++][g](f)}}});k=u.VariableLayout=new t("VariableLayout",k,{initNode:function(g,f){this.collapseParent=this.reverse=!1;this.callSuper(g,f)},setCollapseParent:function(g){h(this,"collapseParent",g)},setReverse:function(g){h(this,"reverse",g)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,b=this.subviews;var g=b.length;let q=this.targetValue,m,p=0;if(this.reverse)for(m=g;m;)g=b[--m],this.skipSubview(g)||(q=this.updateSubview(++p,g,f,q));else for(m=0;g>m;){const r=b[m++];this.skipSubview(r)||(q=this.updateSubview(++p,r,f,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(g){this.attachTo(g,
"update","visible")},stopMonitoringSubview:function(g){this.detachFrom(g,"update","visible")},updateSubview:(g,f,b,q)=>{f[b](q);return q},skipSubview:g=>!g.visible,updateParent:(g,f)=>{}});const d=u.SpacedLayout=new t("SpacedLayout",k,{initNode:function(g,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(g,f)},setTargetAttrName:function(g){if(this.targetAttrName!==
g){const f="y"===g,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(g)}},setNoAddSubviewOptimization:function(g){this.noAddSubviewOptimization=g},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){h(this,"spacing",g)},setOutset:function(g){h(this,
"outset",g)},addSubview:function(g){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(g);this.locked=f},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},updateSubview:function(g,f,b,q){g=f[this.measureAttrName];f[b](q+(g-f[this.measureAttrBaseName])/2);return q+g+this.spacing},updateParent:function(g,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});u.ResizeLayout=new t("ResizeLayout",d,{setCollapseParent:g=>{},setTargetAttrName:function(g){if(this.targetAttrName!==g){if(this.inited){const f="x"===g;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(g);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(g){this.attachTo(this.parent,
"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},doBeforeUpdate:function(){const g=this.measureAttrName,f=this.subviews;let b=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=f.length,m=0,p=0;for(;q;){const r=f[--q];this.skipSubview(r)||(++m,0<r.layoutHint?p+=r.layoutHint:b-=r[g])}0!==m&&(this.remainder=b-=(m-1)*this.spacing,this.resizeSum=p,this.scalingFactor=b/p,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===g?
"setWidth":"setHeight")},updateSubview:function(g,f,b,q){var m=f.layoutHint;0<m&&(this.resizeSumUsed+=m,m=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(m*this.scalingFactor),this.remainderUsed+=m,f[this.measureSetter](m));return this.callSuper(g,f,b,q)},startMonitoringSubview:function(g){0<g.layoutHint||this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update","visible")},stopMonitoringSubview:function(g){0<g.layoutHint||this.detachFrom(g,"update",
this.measureAttrName);this.detachFrom(g,"update","visible")},updateParent:(g,f)=>{}});u.AlignedLayout=new t("AlignedLayout",k,{initNode:function(g,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(g,f)},setTargetAttrName:function(g){if(this.targetAttrName!==g){const f="y"===g,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(g)}},setAlign:function(g){if(this.align!==g){this.align=g;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===g||"bottom"===g||"top"===g?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",g),this.update())}},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.callSuper(g)},
stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.callSuper(g)},doBeforeUpdate:function(){const g=this.measureAttrName,f=this.subviews;let b=0,q=f.length;for(;q;){const m=f[--q];this.skipSubview(m)||(b=b>m[g]?b:m[g])}this.setTargetValue(b)},updateSubview:function(g,f,b,q){switch(this.align){case "center":case "middle":f[b]((q-f[this.measureAttrName])/2);break;case "right":case "bottom":f[b](q-f[this.measureAttrName]);break;default:f[b](0)}return q},updateParent:function(g,
f){this.parent[this.parentSetterName](f)}});u.WrappingLayout=new t("WrappingLayout",k,{initNode:function(g,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(g,f)},
setTargetAttrName:function(g){if(this.targetAttrName!==g){const f="y"===g,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const m=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";b&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(m),this.startMonitoringParent(q));
this.callSuper(g)}},setParent:function(g){if(this.parent!==g){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(g);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(g){this.setTargetAttrName(this.axis=g)},setInset:function(g){this.setTargetValue(this.inset=g)},setSpacing:function(g){h(this,"spacing",g)},setOutset:function(g){h(this,"outset",g)},setLineSpacing:function(g){h(this,"lineSpacing",g)},setLineInset:function(g){h(this,
"lineInset",g)},setLineOutset:function(g){h(this,"lineOutset",g)},startMonitoringParent:function(g){this.attachTo(this.parent,"update",g)},stopMonitoringParent:function(g){this.detachFrom(this.parent,"update",g)},startMonitoringSubview:function(g){this.attachTo(g,"update",this.measureAttrName);this.attachTo(g,"update",this.otherMeasureAttrName);this.callSuper(g)},stopMonitoringSubview:function(g){this.detachFrom(g,"update",this.measureAttrName);this.detachFrom(g,"update",this.otherMeasureAttrName);
this.callSuper(g)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(g,f,b,q){g=f[this.measureAttrName];const m=f[this.otherMeasureAttrName];q+g>this.parentSizeLessOutset||"break"===f.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=m,++this.lineCount):m>this.lineSize&&(this.lineSize=m);f[this.otherSetterName](this.linePos+
(m-f[this.otherMeasureAttrBaseName])/2);f[b](q+(g-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+g+this.outset);return q+g+this.spacing},updateParent:function(g,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});u.createFixedThresholdCounter(e,1,"locked")})(myt);
(u=>{const x=Math.round,w=u.DomElementProxy,t=u.Geometry.rectContainsPoint,l=(b,q)=>{const m=u.global.focus.focusedView,p=b.getIDE();if(m===b||m?.isDescendantOf(b))m._ignoreFocus=!0;const {scrollTop:r,scrollLeft:z}=p;q();m&&(m._ignoreFocus=!1,m.focus(!0));p.scrollTop=r;p.scrollLeft=z},a=(b,q,m)=>{const p=b.getODE(),r=p.parentNode;if(r){const z=()=>{const E=p.nextElementSibling;r.removeChild(p);q();r.insertBefore(p,E)};m?l(b,z):z()}else q()},c=(b,q,m,p)=>{if(q&&"object"===typeof q){if(p){var r=b.getLeastCommonAncestor(q)?.getIDE();
if(r){const z=w.getZIndexRelativeToAncestor,E=m?-1:1;p=E*z(b.getODE(),r);r=E*z(q.getODE(),r);if(p<r)return!0;if(r<p)return!1}}b=b.getODE().compareDocumentPosition(q.getODE());return m?2===b||10===b:4===b||20===b}return!1},h=b=>{b=b.getAncestors();let q=b.length,m=1,p=1;for(;q;){const r=b[--q];m*=r.scaleX||1;p*=r.scaleY||1;r.__effectiveScaleX=m;r.__effectiveScaleY=p}return{scaleX:m,scaleY:p}},e=(b,q,m)=>{const p=b.getODE();if(t(q,m,0,0,p.offsetWidth*b.__effectiveScaleX,p.offsetHeight*b.__effectiveScaleY)){if(b=
b.parent){const r=b.getIDE();return e(b,q+(p.offsetLeft-r.scrollLeft)*b.__effectiveScaleX,m+(p.offsetTop-r.scrollTop)*b.__effectiveScaleY)}return!0}return!1},k=b=>{switch(b.align){case "center":b.releaseConstraint("__doAlignCenter");break;case "right":b.releaseConstraint("__doAlignRight")}},d=b=>{const q=b.parent;if(q)switch(b.align){case "center":b.constrain("__doAlignCenter",[b,"width",b,"alignOffset",q,"width"]);break;case "right":b.constrain("__doAlignRight",[b,"width",b,"alignOffset",q,"width"]);
break;case "left":b.setX(b.alignOffset||0)}},g=b=>{switch(b.valign){case "middle":b.releaseConstraint("__doValignMiddle");break;case "bottom":b.releaseConstraint("__doValignBottom")}},f=b=>{const q=b.parent;if(q)switch(b.valign){case "middle":b.constrain("__doValignMiddle",[b,"height",b,"valignOffset",q,"height"]);break;case "bottom":b.constrain("__doValignBottom",[b,"height",b,"valignOffset",q,"height"]);break;case "top":b.setY(b.valignOffset||0)}};u.View=new JS.Class("View",u.Node,{include:[w,u.DomObservable,
u.DomObserver,u.ScrollObservable,u.FocusObservable,u.KeyObservable,u.MouseObservable],extend:{retainFocusDuringDomUpdate:l,doWhileRemovedFromDom:a},initNode:function(b,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(b));const m=this.getODS();m.left=m.top="0px";this.callSuper(b,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(b){b=document.createElement(this.tagName??
"div");b.style.position="absolute";let q;b.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return b},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(b){this.parent!==b&&(this.inited&&(k(this),g(this)),this.callSuper(b),this.align&&d(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const b=[],q=this.getIDE().children,m=q.length;for(let p=0;p<m;){const r=q[p++].model;r?.parent===this&&b.push(r)}return b},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(b=>b!==this)},setFocusTrap:function(b){this.focusTrap=b},setFocusCage:function(b){this.focusCage=b},setMaskFocus:function(b){this.maskFocus=b},setLayoutHint:function(b){this.layoutHint=b},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(b){if(this.ignoreLayout!==
b){var q=this.inited&&this.parent;let m;if(b){if(q)for(q=this.parent.getLayouts(),m=q.length;m;)q[--m].removeSubview(this);this.ignoreLayout=b}else if(this.ignoreLayout=b,q)for(q=this.parent.getLayouts(),m=q.length;m;)q[--m].addSubview(this)}},setDomClass:function(b){this.domClass!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domClass",b))},setDomId:function(b){this.domId!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domId",b))},setAlignOffset:function(b){this.alignOffset!==b&&(this.alignOffset=
b,this.inited&&this.fireEvent("alignOffset",b),this.parent&&"left"===this.align&&this.setX(b))},setAlign:function(b){this.align!==b&&(this.inited&&k(this),this.align=b,this.inited&&(this.fireEvent("align",b),d(this)))},__doAlignCenter:function(b){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(b){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(b){this.valignOffset!==b&&(this.valignOffset=b,this.inited&&this.fireEvent("valignOffset",
b),this.parent&&"top"===this.valign&&this.setY(b))},setValign:function(b){this.valign!==b&&(this.inited&&g(this),this.valign=b,this.inited&&(this.fireEvent("valign",b),f(this)))},__doValignMiddle:function(b){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(b){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(b){this.x!==b&&(this.x=b,this.visible&&(this.getODS().left=b+"px"),this.inited&&this.fireEvent("x",b))},setY:function(b){this.y!==
b&&(this.y=b,this.visible&&(this.getODS().top=b+"px"),this.inited&&this.fireEvent("y",b))},setWidth:function(b){0>b&&(b=0);this.width!==b&&(this.width=b,this.getODS().width=b+"px",this.inited&&(this.__updateBounds(b,this.height),this.fireEvent("width",b)))},setHeight:function(b){0>b&&(b=0);this.height!==b&&(this.height=b,this.getODS().height=b+"px",this.inited&&(this.__updateBounds(this.width,b),this.fireEvent("height",b)))},setDomMinWidth:function(b,q){(q?this.getIDS():this.getODS()).minWidth=null!=
b?b+"px":null},getDomMinWidth:function(b){b=(b?this.getIDS():this.getODS()).minWidth;return null!=b?Number.parseInt(b):null},setDomMinHeight:function(b,q){(q?this.getIDS():this.getODS()).minHeight=null!=b?b+"px":null},getDomMinHeight:function(b){b=(b?this.getIDS():this.getODS()).minHeight;return null!=b?Number.parseInt(b):null},setTextColor:function(b){this.textColor!==b&&(this.textColor=b,this.getODS().color=b||"inherit",this.inited&&this.fireEvent("textColor",b))},setBgColor:function(b){this.bgColor!==
b&&(this.getODS().backgroundColor=this.bgColor=b,this.inited&&this.fireEvent("bgColor",b))},isColorAttr:b=>"bgColor"===b||"textColor"===b,setOpacity:function(b){this.opacity!==b&&(this.getODS().opacity=this.opacity=b,this.inited&&this.fireEvent("opacity",b))},setOverflow:function(b){const q=this.overflow;if(q!==b){this.overflow=b;const m=this.getIDS();if("autox"===b)m.overflowX="auto",m.overflowY="hidden";else if("autoy"===b)m.overflowY="auto",m.overflowX="hidden";else{if("autox"===q||"autoy"===q)m.overflowX=
m.overflowY=null;m.overflow=b||"visible"}this.inited&&this.fireEvent("overflow",b)}},setVisible:function(b){if(this.visible!==b){this.visible=b;const q=this.getODS();q.visibility=b?"inherit":"hidden";q.left=b?this.x+"px":"-100000px";q.top=b?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",b)}},setPointerEvents:function(b){this.pointerEvents!==b&&(this.pointerEvents=b,this.getODS().pointerEvents=b||"auto",this.inited&&this.fireEvent("pointerEvents",b))},setCursor:function(b){this.cursor!==
b&&(this.cursor=b,this.getODS().cursor=b||"auto",this.inited&&this.fireEvent("cursor",b))},__updateBounds:function(b,q){this.boundsWidth!==b&&this.fireEvent("boundsWidth",this.boundsWidth=b);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(b){const [q,m,p]=b??[];this.setOutlineWidth(q);this.setOutlineStyle(m);this.setOutlineColor(p)},setOutlineWidth:function(b){this.getODS().outlineWidth=(this.outlineWidth=b||0)+"px"},setOutlineStyle:function(b){this.getODS().outlineStyle=
this.outlineStyle=b||"none"},setOutlineColor:function(b){this.getODS().outlineColor=this.outlineColor=b||"#000"},setBorder:function(b){const [q,m,p]=b??[];this.setBorderWidth(q);this.setBorderStyle(m);this.setBorderColor(p)},setBorderWidth:function(b){this.getODS().borderWidth=(this.borderWidth=b||0)+"px"},setBorderStyle:function(b){this.getODS().borderStyle=this.borderStyle=b||"none"},setBorderColor:function(b){this.getODS().borderColor=this.borderColor=b||"#000"},setRoundedCorners:function(b){this.getODS().borderRadius=
b+"px"},setRoundedTopLeftCorner:function(b){this.getODS().borderTopLeftRadius=b+"px"},setRoundedTopRightCorner:function(b){this.getODS().borderTopRightRadius=b+"px"},setRoundedBottomLeftCorner:function(b){this.getODS().borderBottomLeftRadius=b+"px"},setRoundedBottomRightCorner:function(b){this.getODS().borderBottomRightRadius=b+"px"},setBoxShadow:function(b){const [q,m,p,r]=b??[];this.getODS().boxShadow=b?(q||0)+"px "+(m||0)+"px "+(p||7)+"px "+(r||"#000"):"none"},setGradient:function(b){const q=this.getODS();
if(b){let p=b[0];"linear"===p||"radial"===p?b.shift():p="linear";let r=b[0];if("radial"===p){void 0===r?r="closest-side":b.shift();var m=b[0];if(void 0===m)m="circle";else{switch(m){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",m),m="circle"}b.shift()}let z=b[0];void 0===z?z="center":(z=z.replaceAll("middle","center"),b.shift());r=m+" "+r+" at "+z}else"number"===typeof r?(r+="deg",b.shift()):r?(r="to "+r,b.shift()):r="0deg";m=z=>{b.push(z&&"inherit"!==
z?z:"transparent")};2>b.length&&m(this.textColor);2>b.length&&m(this.bgColor);q.background=p+"-gradient("+r+","+b.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(b){this.tooltip!==b&&(this.tooltip=this.getODE().title=b,this.inited&&this.fireEvent("tooltip",b))},isVisible:function(){return null==this.searchAncestorsOrSelf(b=>!b.visible)},getFocusTrap:function(b){return this.searchAncestorsOrSelf(q=>q.focusCage||q.focusTrap&&!b)},subnodeAdded:function(b){b instanceof
u.View?(this.getIDE().appendChild(b.getODE()),this.getSubviews().push(b),this.fireEvent("subviewAdded",b),this.subviewAdded(b)):b instanceof u.Layout&&(this.getLayouts().push(b),this.fireEvent("layoutAdded",b),this.layoutAdded(b))},subnodeRemoved:function(b){let q;b instanceof u.View?(q=this.getSubviewIndex(b),-1<q&&(this.fireEvent("subviewRemoved",b),b.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(b))):b instanceof u.Layout&&(q=this.getLayoutIndex(b),-1<q&&(this.fireEvent("layoutRemoved",
b),this.layouts.splice(q,1),this.layoutRemoved(b)))},hasSubview:function(b){return this.getSubviews().includes(b)},getSubviewIndex:function(b){return this.getSubviews().indexOf(b)},subviewAdded:b=>{},subviewRemoved:b=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(b){return this.getLayouts().includes(b)},getLayoutIndex:function(b){return this.getLayouts().indexOf(b)},
layoutAdded:b=>{},layoutRemoved:b=>{},isBehind:function(b,q){return c(this,b,!1,q)},isInFrontOf:function(b,q){return c(this,b,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(b){this.parent.sendSubviewBehind(this,b)},sendInFrontOf:function(b){this.parent.sendSubviewInFrontOf(this,b)},doSubviewsReorderedInDom:b=>{},bringSubviewToFront:function(b){const q=this;if(b?.parent===q){const m=q.getIDE(),p=b.getODE();
p!==m.lastElementChild&&l(b,()=>{m.appendChild(p);q.doSubviewsReorderedInDom(b)})}},sendSubviewToBack:function(b){const q=this;if(b?.parent===q){const m=q.getIDE(),p=m.firstElementChild,r=b.getODE();r!==p&&l(b,()=>{m.insertBefore(r,p);q.doSubviewsReorderedInDom(b)})}},sendSubviewBehind:function(b,q){const m=this;if(b?.parent===m&&q?.parent===m){const p=b.getODE(),r=q.getODE();if(p!==r.previousElementSibling){const z=m.getIDE();l(b,()=>{z.insertBefore(p,r);m.doSubviewsReorderedInDom(b)})}}},sendSubviewInFrontOf:function(b,
q){const m=this;if(b?.parent===m&&q?.parent===m){const p=b.getODE(),r=q.getODE().nextElementSibling;if(p!==r){const z=m.getIDE();l(b,()=>{z.insertBefore(p,r);m.doSubviewsReorderedInDom(b)})}}},sortSubviews:function(b){const q=this,m=q.getSubviews();u.isNotSorted(m,b)&&(m.sort(b),a(q,()=>{const p=document.createDocumentFragment(),r=m.length;for(let z=0;r>z;)p.appendChild(m[z++].getODE());q.getIDE().appendChild(p)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(b,q,m){const p=this.getODE();
if(!p)return!1;const {x:r,y:z}=w.getRelativePosition(p,m);return t(b,q,r,z,this.width,this.height)},isPointVisible:function(b,q){const {x:m,y:p}=this.getPagePosition(!0);h(this);return e(this,b-m,q-p)},intersectsWithSibling:function(b){return b.parent===this.parent&&!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)},getEffectiveScale:function(){return h(this)},getEffectiveScaleX:function(){return h(this).scaleX},getEffectiveScaleY:function(){return h(this).scaleY}})})(myt);
(u=>{const x=(t,l,a)=>{const c=w(t,l);t.getODS().transform=c+(0===c.length?"":" ")+l+"("+a+")"},w=(t,l)=>{t=t.getODS();var a=t.transform;if(!a||0===a.length)return"";a=a.split(" ");let c=a.length;for(;c;)if(a[--c].startsWith(l)){a.splice(c,1);break}return t.transform=a.join(" ")};u.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(t){this.transformOrigin!==t&&(this.transformOrigin=t,this.getODS().transformOrigin=t||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",t)))},setRotation:function(t){this.rotation!==t&&(this.rotation=t,x(this,"rotate",(t||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",t)))},setScale:function(t){const l=this.scaleX!==t,a=this.scaleY!==t;if(l){var c=this.scaleX=t;null==c?w(this,"scaleX"):x(this,"scaleX",c||1)}a&&(c=this.scaleY=t,null==c?w(this,"scaleY"):x(this,"scaleY",c||1));this.inited&&((l||a)&&this.__updateBounds(this.width,this.height),
l&&this.fireEvent("scaleX",t),a&&this.fireEvent("scaleY",t))},setScaleX:function(t){if(this.scaleX!==t){var l=this.scaleX=t;null==l?w(this,"scaleX"):x(this,"scaleX",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",t))}},setScaleY:function(t){if(this.scaleY!==t){var l=this.scaleY=t;null==l?w(this,"scaleY"):x(this,"scaleY",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",t))}},setSkewX:function(t){this.skewX!==t&&(this.skewX=
t,x(this,"skewX",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",t)))},setSkewY:function(t){this.skewY!==t&&(this.skewY=t,x(this,"skewY",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",t)))},__updateBounds:function(t,l){const {rotation:a,scaleX:c,scaleY:h}=this,e=(null==c||1===c)&&(null==h||1===h);if(!e||null!=a&&0!==a&&180!==a)!e||90!==a&&270!==a?{width:t,height:l}=this.getODE().getBoundingClientRect():{width:l,height:t}=
this;this.callSuper(t,l)}})})(myt);
(u=>{const x=JS.Module,w=(c,h)=>{if("auto"===h)c.__hasSetWidth=!1,c.getODS().width="auto",c.sizeViewToDom();else return c.__hasSetWidth=!0},t=(c,h)=>{if("auto"===h)c.__hasSetHeight=!1,c.getODS().height="auto",c.sizeViewToDom();else return c.__hasSetHeight=!0},l=c=>{if(!c.__hasSetWidth){const h=c.getODE().offsetWidth/c.getEffectiveScaleX();c.width!==h&&(c.width=h,c.inited&&c.__updateBounds(h,c.height),c.fireEvent("width",h))}},a=c=>{if(!c.__hasSetHeight){const h=c.getODE().offsetHeight/c.getEffectiveScaleY();
c.height!==h&&(c.height=h,c.inited&&c.__updateBounds(c.width,h),c.fireEvent("height",h))}};u.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:l,sizeHeight:a},initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c){w(this,c)&&this.callSuper(c)},setHeight:function(c){t(this,c)&&this.callSuper(c)},sizeViewToDom:function(){l(this);a(this)}});u.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c,h){w(this,
c)&&this.callSuper(c,h)},sizeViewToDom:function(){l(this)}});u.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setHeight:function(c,h){t(this,c)&&this.callSuper(c,h)},sizeViewToDom:function(){a(this)}})})(myt);
(u=>{const x=JS.Module,w=(c,h,e,k)=>{c[e]!==h&&(c[e]=h,c.getIDS()[e]=h||k||"inherit",c.inited&&(c.fireEvent(e,h),c.sizeViewToDom()))};u.TextSupport=new x("TextSupport",{setWidth:function(c){this.callSuper(c);"auto"!==c&&(c=this.whiteSpace,"normal"!==c&&"pre-line"!==c&&"pre-wrap"!==c&&"break-spaces"!==c||this.sizeViewToDom())},setText:function(c){c||="";c=this.valueFromEvent(c);this.text!==c&&(this.getIDE().innerHTML=this.text=c,this.inited&&(this.fireEvent("text",c),this.sizeViewToDom()))},setTextOverflow:function(c){this.textOverflow!==
c&&(this.textOverflow=c,this.getIDS().textOverflow=c||"inherit",this.inited&&this.fireEvent("textOverflow",c))},setTextAlign:function(c){this.textAlign!==c&&(this.textAlign=c,this.getIDS().textAlign=c||"inherit",this.inited&&this.fireEvent("textAlign",c))},setWhiteSpace:function(c){w(this,c,"whiteSpace")},setWordWrap:function(c){w(this,c,"wordWrap","normal")},setTextIndent:function(c){w(this,c,"textIndent")},setTextTransform:function(c){w(this,c,"textTransform")},setTextDecoration:function(c){w(this,
c,"textDecoration")},setLineHeight:function(c){w(this,c,"lineHeight")},setLetterSpacing:function(c){w(this,c,"letterSpacing")},setWordSpacing:function(c){w(this,c,"wordSpacing")},setFontFamily:function(c){w(this,c,"fontFamily")},setFontStyle:function(c){w(this,c,"fontStyle")},setFontVariant:function(c){w(this,c,"fontVariant")},setFontWeight:function(c){w(this,c,"fontWeight")},setFontSize:function(c){w(this,c,"fontSize")},setUserUnselectable:function(c){this.userUnselectable!==c&&(this.userUnselectable=
c,this[c?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(c?"default":"text"),this.inited&&this.fireEvent("userUnselectable",c))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(c,h,e,k){this.getIDS().textShadow=(c||0)+"px "+(h||0)+"px "+(null!=e?e:2)+"px "+(k||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const t=(c,h,e)=>{const k="padding"+e;h=Math.max(h,0);c[k]!==h&&(c[k]=h,c.getIDS()[k]=h+"px",c.fireEvent(k,h),"Left"===e||"Right"===e?l(c):a(c))},l=c=>{c.__hasSetWidth&&(c.getODS().width=c.width-(c.paddingLeft||0)-(c.paddingRight||0)+"px",c.inited&&c.sizeViewToDom())},a=c=>{c.__hasSetHeight&&(c.getODS().height=c.height-(c.paddingTop||0)-(c.paddingBottom||0)+"px",c.inited&&c.sizeViewToDom())};u.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(c){this.callSuper(c);l(this)},setHeight:function(c){this.callSuper(c);
a(this)},setPadding:function(c){let h,e,k;c||=0;"object"===typeof c?(h=c.top||0,e=c.right||0,k=c.bottom||0,c=c.left||0):h=e=k=c;this.setPaddingTop(h);this.setPaddingRight(e);this.setPaddingBottom(k);this.setPaddingLeft(c)},setPaddingTop:function(c){t(this,c,"Top")},setPaddingRight:function(c){t(this,c,"Right")},setPaddingBottom:function(c){t(this,c,"Bottom")},setPaddingLeft:function(c){t(this,c,"Left")}})})(myt);
(u=>{const x={},w={},t=l=>{const a=l.imageUrl;if(l.calculateNaturalSize&&a){var c=x[a];if(c)l.setNaturalWidth(c.width),l.setNaturalHeight(c.height);else{c=w[a];if(!c){w[a]=c=[];const h=new Image;h.onerror=e=>{if(e=w[a]){let k=e.length;for(;k;)e[--k].setImageLoadingError(!0);e.length=0;delete w[a]}};h.onload=()=>{const e=h.width,k=h.height,d=w[a];if(d){let g=d.length;for(;g;){const f=d[--g];f.imageUrl===a&&(f.setNaturalWidth(e),f.setNaturalHeight(k))}d.length=0;delete w[a]}x[a]={width:e,height:k}};
h.src=a}c.push(l)}}};u.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:l=>x[l]},initNode:function(l,a){a.imageRepeat??(a.imageRepeat="no-repeat");a.imageAttachment??(a.imageAttachment="scroll");this.callSuper(l,a)},setImageUrl:function(l){this.imageUrl!==l&&(this.imageUrl=l,this.getIDS().backgroundImage=l?'url("'+l+'")':"none",this.inited&&(this.fireEvent("imageUrl",l),this.setNaturalWidth(),this.setNaturalHeight(),!l&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
t(this))},setImageLoadingError:function(l){this.set("imageLoadingError",l,!0)},setImageSize:function(l){this.imageSize!==l&&(this.imageSize=l,this.getIDS().backgroundSize=l||"auto",this.inited&&this.fireEvent("imageSize",l))},setImageRepeat:function(l){this.imageRepeat!==l&&(this.getIDS().backgroundRepeat=this.imageRepeat=l,this.inited&&this.fireEvent("imageRepeat",l))},setImagePosition:function(l){this.imagePosition!==l&&(this.getIDS().backgroundPosition=this.imagePosition=l,this.inited&&this.fireEvent("imagePosition",
l))},setImageAttachment:function(l){this.imageAttachment!==l&&(this.getIDS().backgroundAttachment=this.imageAttachment=l,this.inited&&this.fireEvent("imageAttachment",l))},setCalculateNaturalSize:function(l){this.calculateNaturalSize!==l&&(this.calculateNaturalSize=l,this.inited&&this.fireEvent("calculateNaturalSize",l),t(this))},setNaturalWidth:function(l){this.naturalWidth!==l&&(this.naturalWidth=l,this.inited&&this.fireEvent("naturalWidth",l),this.useNaturalSize&&l&&this.setWidth(l))},setNaturalHeight:function(l){this.naturalHeight!==
l&&(this.naturalHeight=l,this.inited&&this.fireEvent("naturalHeight",l),this.useNaturalSize&&l&&this.setHeight(l))},setUseNaturalSize:function(l){this.useNaturalSize!==l&&(this.useNaturalSize=l,this.inited&&this.fireEvent("useNaturalSize",l),l&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),l&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToDom:t}=u;u.Flexbox=new x("Flexbox",w,{include:[u.FlexboxSupport]});u.Frame=new x("Frame",w,{initNode:function(l,a){a.tagName??(a.tagName="iframe");this.callSuper(l,a);l=u.global.mouse;this.attachToDom(l,"__doMouseDown","mousedown",!0);this.attachToDom(l,"__doMouseUp","mouseup",!0)},createOurDomElement:function(l){l=this.callSuper(l);(Array.isArray(l)?l[1]:l).style.border="0px";return l},setSrc:function(l){this.src!==l&&(this.src=this.getIDE().src=l,this.inited&&
this.fireEvent("src",l))},__doMouseDown:function(l){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(l){this.setPointerEvents(this.__restorePointerEvents);return!0}});u.Markup=new x("Markup",w,{include:[t],setHtml:function(l){this.html!==l&&(this.getIDE().innerHTML=this.html=l,this.inited&&(this.fireEvent("html",l),this.sizeViewToDom()))}});u.Text=new x("Text",w,{include:[t,u.TextSupport],initNode:function(l,a){a.whiteSpace??(a.whiteSpace=
"nowrap");a.userUnselectable??(a.userUnselectable=!0);this.callSuper(l,a)},measureNoWrapWidth:function(){const l=this.__hasSetWidth,a=this.width;if(!l&&"nowrap"===this.whiteSpace)return a;const c=this.getIDS(),h=c.whiteSpace;l&&(c.width="auto");c.whiteSpace="nowrap";const e=this.getODE().getBoundingClientRect().width;c.whiteSpace=h;l&&(c.width=a);return e}});u.PaddedText=new x("PaddedText",u.Text,{include:[u.PaddedTextSupport]});u.Image=new x("Image",w,{include:[u.ImageSupport],initNode:function(l,
a){a.useNaturalSize??(a.useNaturalSize=!0);this.callSuper(l,a)}});u.BackView=new x("BackView",w,{sendSubviewToBack:function(l){if(l.parent===this){const a=this.getIDE(),c=a.childNodes[1];l=l.getODE();l!==c&&(l=a.removeChild(l))&&a.insertBefore(l,c)}}})})(myt);
(u=>{const x=Math.round,w=c=>{c.parent&&0<=c.percentOfParentWidth&&c.syncTo(c.parent,"__doPOPW","width")},t=c=>{0<=c.percentOfParentWidth&&c.detachFrom(c.parent,"__doPOPW","width")},l=c=>{c.parent&&0<=c.percentOfParentHeight&&c.syncTo(c.parent,"__doPOPH","height")},a=c=>{0<=c.percentOfParentHeight&&c.detachFrom(c.parent,"__doPOPH","height")};u.SizeToParent=new JS.Module("SizeToParent",{setParent:function(c){this.parent!==c&&(this.inited&&(t(this),a(this)),this.callSuper(c),w(this),l(this))},setPercentOfParentWidthOffset:function(c){this.percentOfParentWidthOffset!==
c&&(this.percentOfParentWidthOffset=c,this.inited&&(this.fireEvent("percentOfParentWidthOffset",c),this.__doPOPW()))},setPercentOfParentWidth:function(c){this.percentOfParentWidth!==c&&(this.inited&&t(this),this.percentOfParentWidth=c,this.inited&&this.fireEvent("percentOfParentWidth",c),w(this))},setPercentOfParentHeightOffset:function(c){this.percentOfParentHeightOffset!==c&&(this.percentOfParentHeightOffset=c,this.inited&&(this.fireEvent("percentOfParentHeightOffset",c),this.__doPOPH()))},setPercentOfParentHeight:function(c){this.percentOfParentHeight!==
c&&(this.inited&&a(this),this.percentOfParentHeight=c,this.inited&&this.fireEvent("percentOfParentHeight",c),l(this))},__doPOPW:function(c){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(c){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(u=>{let x;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[u.Observable],initialize:function(){u.global.register("roots",x=this)},getRoots:()=>w,addRoot:t=>{w.push(t);x.fireEvent("rootAdded",t)},removeRoot:t=>{const l=w.indexOf(t);-1<l&&(w.splice(l,1),x.fireEvent("rootRemoved",t))}})})(myt);
(u=>{const {addEventListener:x,removeEventListener:w,global:{roots:t}}=u,l=u.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:a=>{const c=a.getIDE();a=a.__captureDrop=h=>{h.preventDefault()};x(c,"drop",a);x(c,"dragover",a)},teardownCaptureDrop:a=>{const c=a.getIDE();a=a.__captureDrop;w(c,"drop",a);w(c,"dragover",a)}},initNode:function(a,c){this.callSuper(a,c);this.setZIndex(0);this.addDomClass("myt");t.addRoot(this);l.setupCaptureDrop(this)},createOurDomElement:function(a){a||(a=this.callSuper(a),
u.getElement().appendChild(a));return a},destroy:function(){l.teardownCaptureDrop(this);t.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(a){this.keepDomElementWhenDestroyed=a},setParent:a=>{},bringToFront:function(){var a=this.getIDE();const c=a.parentNode;a!==c.lastChild&&(a=c.removeChild(a))&&c.appendChild(a)},sendToBack:function(){var a=this.getIDE();const c=a.parentNode;a!==c.firstChild&&(a=c.removeChild(a))&&
c.insertBefore(a,c.firstChild)},sendBehind:function(a){var c=this.getIDE();a=a.getIDE();const h=c.parentNode;a.parentNode===h&&(c=h.removeChild(c))&&h.insertBefore(c,a)},sendInFrontOf:function(a){a.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(a),a.sendBehind(this))}})})(myt);
(u=>{let x,w,t=!1;const {requestAnimationFrame:l,cancelAnimationFrame:a}=window,c={},h=k=>{x=l(h);k=Math.round(k);-1!==w&&(c.delta=k-w,c.time=k,e.fireEvent("idle",c));w=k},e=new JS.Singleton("GlobalIdle",{include:[u.Observable],initialize:function(){u.global.register("idle",this)},attachObserver:(k,d,g)=>{k=e.callSuper(k,d,g);!t&&e.hasObservers("idle")&&(t=!0,w=-1,x=l(h));return k},detachObserver:(k,d,g)=>{k=e.callSuper(k,d,g);t&&!e.hasObservers("idle")&&(a(x),t=!1);return k}})})(myt);
(u=>{let x,w,t;const l=u.global,a=l.idle,c=window.document;new JS.Singleton("GlobalWindowResize",{include:[u.Observable,u.Observer],initialize:function(){x=this;x.attachTo(a,"__setup","idle");l.register("windowResize",x)},__setup:h=>{const e=c.body;e&&(x.detachFrom(a,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:w=e.clientWidth,h:t=e.clientHeight})})).observe(e))},getWidth:()=>w??=c.body.clientWidth,getHeight:()=>t??=c.body.clientHeight})})(myt);
(u=>{const x=JS.Module,w=u.global.windowResize,t=Math.max,l=c=>{const h=c.resizeDimension;"both"!==h&&"width"!==h||c.setWidth(t(c.minWidth,w.getWidth()));"both"!==h&&"height"!==h||c.setHeight(t(c.minHeight,w.getHeight()))},a=u.SizeToWindow=new x("SizeToWindow",{include:[u.RootView],initNode:function(c,h){this.minWidth=this.minHeight=0;h.resizeDimension??(h.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(c,h)},setResizeDimension:function(c){this.resizeDimension!==c&&
(this.resizeDimension=c,l(this))},setMinWidth:function(c){this.minWidth!==c&&(this.minWidth=c,l(this))},setMinHeight:function(c){this.minHeight!==c&&(this.minHeight=c,l(this))},__hndlResize:function(c){l(this)}});u.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[a],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="width");this.callSuper(c,h)}});u.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[a],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="height");this.callSuper(c,
h)}})})(myt);
(u=>{const x=Math,{min:w,max:t}=x,l=f=>w(255,t(0,x.round(f))),a=f=>l(f).toString(16).padStart(2,"0"),c=(f,b,q,m)=>(m?"#":"")+a(f)+a(b)+a(q),h=f=>new g((16711680&f)>>16,(65280&f)>>8,255&f),e=(f,b)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*b/100;else return 0;f=w(b,t(0,f))/b;return 1E-6>x.abs(1-f)?1:f},k=(f,b,q)=>{f=e(f,255);b=e(b,255);q=e(q,255);const m=t(f,b,q),p=m-w(f,b,q);if(0===p)return{h:0,s:0,v:m};let r;switch(m){case f:r=(b-q)/p+(b<q?6:0);break;case b:r=(q-f)/p+
2;break;case q:r=(f-b)/p+4}return{h:60*r,s:0===m?0:p/m,v:m}},d=(f,b,q)=>{f=6*e(f,360);b=e(b,100);q=e(q,100);var m=x.floor(f);const p=f-m;f=q*(1-b);const r=q*(1-p*b);b=q*(1-(1-p)*b);m%=6;return{red:255*[q,r,f,f,b,q][m],green:255*[b,q,q,r,f,f][m],blue:255*[f,f,b,q,q,r][m]}},g=u.Color=new JS.Class("Color",{extend:{toUnitRange:e,rgbToHsv:k,hsvToRgb:d,toHex:a,rgbToHex:c,cleanChannelValue:l,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:h,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [b,q,m]=f;return new g(parseInt(b+b,16),parseInt(q+q,16),parseInt(m+m,16));case 6:return h(parseInt(f,16));default:return h(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,b,q)=>{const {red:m,green:p,blue:r}=d(f,b,q);return new g(m,p,r)},getLighterColor:(f,b)=>h(f).isLighterThan(h(b))?f:b,makeColorNumberFromChannels:(f,b,q)=>(l(f)<<16)+(l(b)<<8)+l(q),makeBlendedColor:(f,b,
q)=>new g(f.red+q*(b.red-f.red),f.green+q*(b.green-f.green),f.blue+q*(b.blue-f.blue))},initialize:function(f,b,q){this.setRed(f);this.setGreen(b);this.setBlue(q)},setRed:function(f){this.red=l(f)},setGreen:function(f){this.green=l(f)},setBlue:function(f){this.blue=l(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return c(this.red,this.green,this.blue,!0)},getHSV:function(){return k(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new g(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(g)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(u=>{const {max:x,sin:w,cos:t,pow:l,sqrt:a,PI:c}=Math,h=2*c,e=c/2,k=u.global.idle,d=u.Color.makeColorFromHexString,g={linear:m=>m,inQuad:m=>m*m,outQuad:m=>-m*(m-2),inOutQuad:m=>1>(m*=2)?m*m/2:-(--m*(m-2)-1)/2,inCubic:m=>m*m*m,outCubic:m=>--m*m*m+1,inOutCubic:m=>1>(m*=2)?m*m*m/2:((m-=2)*m*m+2)/2,inQuart:m=>m*m*m*m,outQuart:m=>-(--m*m*m*m-1),inOutQuart:m=>1>(m*=2)?m*m*m*m/2:-((m-=2)*m*m*m-2)/2,inQuint:m=>m*m*m*m*m,outQuint:m=>--m*m*m*m*m+1,inOutQuint:m=>1>(m*=2)?m*m*m*m*m/2:((m-=2)*m*m*m*m+2)/2,inSine:m=>
-t(m*e)+1,outSine:m=>w(m*e),inOutSine:m=>-(t(m*c)-1)/2,inCirc:m=>-(a(1-m*m)-1),outCirc:m=>a(1- --m*m),inOutCirc:m=>1>(m*=2)?-(a(1-m*m)-1)/2:(a(1-(m-=2)*m)+1)/2,inExpo:m=>0===m?0:l(2,10*(m-1)),outExpo:m=>1===m?1:-l(2,-10*m)+1,inOutExpo:m=>0===m||1===m?m:1>(m*=2)?l(2,10*(m-1))/2:(-l(2,-10*--m)+2)/2,inElastic:m=>0===m||1===m?m:-(l(2,10*--m)*w((1*m-.075)*h/.3)),outElastic:m=>0===m||1===m?m:l(2,-10*m)*w((1*m-.075)*h/.3)+1,inOutElastic:m=>0===m||1===m?m:1>(m*=2)?-(l(2,10*--m)*w((1*m-.1125)*h/.45))/2:l(2,
-10*--m)*w((1*m-.1125)*h/.45)/2+1,inBack:(m,p=1.70158)=>(m/=1)*m*((p+1)*m-p),outBack:(m,p=1.70158)=>(m=m/1-1)*m*((p+1)*m+p)+1,inOutBack:(m,p=1.70158)=>1>(m*=2)?m*m*(((p*=1.525)+1)*m-p)/2:((m-=2)*m*(((p*=1.525)+1)*m+p)+2)/2,inBounce:m=>1-g.outBounce(1-m),outBounce:m=>m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375,inOutBounce:m=>1>(m*=2)?g.inBounce(m)/2:(g.outBounce(m-1)+1)/2},f=g.inOutQuad,b=m=>{m.__tmpFrom=!1;m.__loopCnt=
m.reverse?m.repeat-1:0;m.__prog=m.reverse?m.duration:0},q=(m,p)=>{const {running:r,paused:z,reverse:E,duration:I,repeat:J,__prog:A,easingFunction:B,callback:v}=m;if(r&&!z){E&&(p*=-1);p=A+p;let R=0;p>I?(R=p-I,p=I,++m.__loopCnt===J&&(R=0)):0>p&&(R=-p,p=0,0>--m.__loopCnt&&0<J&&(R=0));var n=m.target??m.parent;if(n){const {relative:S,attribute:U,__isColorAnim:O,__loopCnt:ba,to:T}=m;var y=x(0,p/I),D=x(0,A/I);null==m.from&&(m.__tmpFrom=!0,m.from=S?O?"#000":0:n.get(U));D=B(y)-(S?B(D):0);var F=m.from,K=S?
n.get(U):F;y=n.set;if(O){var L=T,P=S;F=d(F);L=d(L);P=P?d(K):F;P.setRed(P.red+(L.red-F.red)*D);P.setGreen(P.green+(L.green-F.green)*D);P.setBlue(P.blue+(L.blue-F.blue)*D);D=P.getHtmlHexString()}else D=K+(T-F)*D;y.call(n,U,D);!E&&ba===J||E&&0>ba&&0<J?(m.setRunning(!1),v?.call(m,!0)):0<R?(m.fireEvent("repeat",ba),m.__prog=E?I:0,q(m,R)):m.__prog=p}else console.log("No target for animator",m),m.setRunning(!1),v?.call(m,!1)}};u.Animator=new JS.Class("Animator",u.Node,{include:[u.Reusable],extend:{easings:g},
initNode:function(m,p){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=f;this.callSuper(m,p);b(this)},setRunning:function(m){if(this.running!==m&&(this.running=m,this.inited&&this.fireEvent("running",m),!this.paused)){if(m){const p=this.target??this.parent;this.__isColorAnim=p&&"function"===typeof p.isColorAttr?p.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),b(this);this[m?"attachTo":"detachFrom"](k,"__updateAnim",
"idle")}},setPaused:function(m){if(this.paused!==m&&(this.paused=m,this.inited&&this.fireEvent("paused",m),this.running))this[m?"detachFrom":"attachTo"](k,"__updateAnim","idle")},setReverse:function(m){this.set("reverse",m,!0);this.inited&&!this.running&&b(this)},setRepeat:function(m){this.set("repeat",m,!0);this.inited&&!this.running&&b(this)},setDuration:function(m){this.set("duration",m,!0);this.inited&&!this.running&&b(this)},setEasingFunction:function(m){"string"===typeof m&&(m=g[m]);this.set("easingFunction",
m??f,!0)},setFrom:function(m){this.set("from",m,!0)},setTo:function(m){this.set("to",m,!0)},setCallback:function(m){this.callback=m},next:function(m,p){const r=this,z=r.callback;z&&!p?r.setCallback(E=>{z.call(r,E);m.call(r,E)}):r.setCallback(m)},reset:function(m){b(this);this.setRunning(!1);this.setPaused(!1);m&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},
__updateAnim:function(m){q(this,m.value.delta)}})})(myt);
(u=>{const x=Array.isArray,w=a=>{a.__additionalArgs=[];a.__pendingTransition="";a.__transDestinationState="";a.__transStage="leaveState"},t=(a,c)=>{if(a.__transInProgress){var h=a.__deferredTransitions;h??=a.__deferredTransitions=[];h.unshift(c)}else{a.__transInProgress=!0;h=c.shift();const e=c.shift();if(a.__pendingTransition)return 3;if(a.isFinished())return a.__transInProgress=!1,5;let k=a.map[a.current][e];k??=a.map["*"][e];if(k)return a.__pendingTransition=e,a.__transDestinationState=k,a.__additionalArgs=
c,a.resumeTransition(h);a.__transInProgress=!1;return 5}},l=a=>{a.__transInProgress=!1;const c=a.__deferredTransitions;if(c)for(;0<c.length;)t(a,c.pop())};u.StateMachine=new JS.Class("StateMachine",u.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(a,c){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(a,c)},setInitialState:function(a){if(""===this.current){if(x(a)){var c=a;a=c.shift()}else c=[];this.current=
this.initial=a;this.doEnterState("","",a,c);c={name:"",from:"",to:a,args:c};this.fireEvent("enter"+a,c);this.fireEvent("enter",c);this.isFinished()&&this.fireEvent("finished",c)}},setTerminalState:function(a){this.terminal=a},addTransitions:function(a){for(const c of a)this.addTransition(...c)},addTransition:function(a,c,h){c=c?x(c)?c:[c]:["*"];const e=this.map;let k=c.length;for(;k;){let d,g;((d=e)[g=c[--k]]??(d[g]={}))[a]=h}},doTransition:function(...a){a.unshift("sync");return t(this,a)},doAsyncTransition:function(...a){a.unshift("async");
return t(this,a)},resumeTransition:function(a){const c=this.__pendingTransition;if(!c)return 4;const h=this.current,e=this.__transDestinationState,k=this.__additionalArgs,d={name:c,from:h,to:e,args:k},g=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(c,h,e,k);if(!1===f)return w(this),l(this),2;if("async"===f||"async"===a)return this.__transStage="enterState",g("start"+c,d),g("start",d),g("leave"+h,d),g("leave",d),l(this),3;g("start"+c,d);g("start",d);
g("leave"+h,d);g("leave",d);case "enterState":this.current=e,w(this),this.doEnterState(c,h,e,k),g("enter"+e,d),g("enter",d),g("end"+c,d),g("end",d),this.isFinished()&&g("finished",d)}l(this);return 1},doLeaveState:(a,c,h,e)=>{},doEnterState:(a,c,h,e)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(a){return x(a)?a.includes(this.current):this.current===a},can:function(a){return void 0!==this.map[this.current][a]?!0:void 0!==this.map["*"][a]}})})(myt);
(u=>{const x=(a,c)=>a.replicationIndex-c.replicationIndex,w=(a,c)=>{let h=a.length;for(;h;){const e=a[--h];e.decrementLockedCounter();c&&e.update()}},t=a=>{l(a);const c=a.template;c&&(a.__pool=new u.TrackActivesPool(c,a.parent))},l=a=>{const c=a.__pool;if(c){const h=a.parent.getLayouts();a=h;let e=a.length;for(;e;)a[--e].incrementLockedCounter();c.putActives();c.destroyPooledInstances();w(h,!1);c.destroy()}};u.Replicable=new JS.Module("Replicable",{include:[u.Reusable],replicate:function(a,c){this.replicationData=
a;this.replicationIndex=c},notify:(a,c)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(a,c){return c===this.replicationIndex&&a===this.replicationData}});u.Replicator=new JS.Class("Replicator",u.Node,{initNode:function(a,c){this.callSuper(a,c);t(this);this.doReplication()},destroy:function(){l(this);this.callSuper()},setTemplate:function(a){(this.template=a.includes(u.Replicable)?a:null)||u.dumpStack("Template not replicable");this.inited&&
(t(this),this.doReplication())},setData:function(a){this.data=a;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const a=this.__pool;let c;if(a){c=this.parent.getLayouts();for(var h=c.length;h;)c[--h].incrementLockedCounter();const e=(h=this.data)?h.length:0,k=a.getActives(),d=k.length,g=[];let f=d,b,q;for(k.sort(x);f;)if(b=k[--f],q=b.replicationIndex,q>=e||!b.alreadyHasReplicationData(h[q],q))g[q]=b;for(f=g.length;f;)(b=g[--f])&&
a.putInstance(b);for(f=0;e>f;++f)(f>=d||null!=g[f])&&a.getInstance().replicate(h[f],f);for(f=c.length;f;)c[--f].sortSubviews(x);w(c,!0)}},notify:function(a,c){var h=this.__pool;if(h){h=h.getActives();let e=h.length;for(;e;)h[--e].notify(a,c)}}})})(myt);
(u=>{const x=JS.Singleton,w=document,{DomElementProxy:t,DomObservable:l,global:{register:a}}=u;new x("GlobalMouse",{include:[t,l,u.MouseObservable],initialize:function(){this.setDomElement(w);a("mouse",this)}});new x("GlobalTouch",{include:[t,l,u.TouchObservable],initialize:function(){this.setDomElement(w);a("touch",this)}})})(myt);
(u=>{let x,w,t;const l=[],a=[],c=k=>{const d=t;d!==k&&(d&&(d.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(d),x("dragLeave",d)),t=k)&&(k.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(k),x("dragEnter",d))},h=k=>{let d=w;if(d!==k)if(w=k){d=k;for(const g of e(d,a))g.notifyDragStart(d);for(const g of e(d,l))g.notifyAutoScrollerDragStart(d);x("startDrag",k)}else{for(const g of e(d,a))g.notifyDragStop(d);for(const g of e(d,l))g.notifyAutoScrollerDragStop(d);x("stopDrag",k)}},e=(k,d)=>{if(k.destroyed)return[];
if(k.isAnyDragGroup())return d;const g=[];k=k.getDragGroups();let f=d.length;for(;f;){const b=d[--f];if(b.isAnyDropGroup())g.push(b);else{const q=b.getDropGroups();for(const m in k)if(q[m]){g.push(b);break}}}return g};new JS.Singleton("GlobalDragManager",{include:[u.Observable],initialize:function(){u.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:k=>{l.push(k)},unregisterAutoScroller:k=>{k=l.indexOf(k);-1<k&&l.splice(k,1)},registerDropTarget:k=>
{a.push(k)},unregisterDropTarget:k=>{k=a.indexOf(k);-1<k&&a.splice(k,1)},startDrag:k=>{h(k)},stopDrag:(k,d,g)=>{d.notifyDropped(t,g);g||t?.notifyDrop(d);c();h();t&&!g&&x("drop",[d,t])},updateDrag:(k,d)=>{const g=e(d,a);let f=g.length,b;if(0<f){const {pageX:q,pageY:m}=k.value;for(;f;)k=g[--f],k.willAcceptDrop(d)&&d.willPermitDrop(k)&&k.isPointVisible(q,m)&&(!b||k.isInFrontOf(b))&&(b=k)}c(b)}})})(myt);
(u=>{const x=JS.Module,{mouse:w,keys:t,idle:l}=u.global;u.Activateable=new x("Activateable",{doActivated:()=>{}});u.UpdateableUI=new x("UpdateableUI",{initNode:function(a,c){this.callSuper(a,c);this.updateUI()},updateUI:()=>{}});u.Disableable=new x("Disableable",{initNode:function(a,c){c.disabled??(c.disabled=!1);this.callSuper(a,c)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});u.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[t.CODE_ENTER,t.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,c){this.activateKeyDown="";c.activationKeys??(c.activationKeys=u.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,c);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=
a??[]},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const c=u.KeyObservable.getCodeFromEvent(a);this.activationKeys.includes(c)&&(this.activateKeyDown===c?this.doActivationKeyDown(c,!0):(this.activateKeyDown=c,this.doActivationKeyDown(c,!1)),a.value.preventDefault())}},__hndlKeyPress:function(a){if(!this.disabled){const c=u.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===c&&this.activationKeys.includes(c)&&
a.value.preventDefault()}},__hndlKeyUp:function(a){if(!this.disabled){const c=u.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===c&&this.activationKeys.includes(c)&&(this.activateKeyDown="",this.doActivationKeyUp(c),a.value.preventDefault())}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,c)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});u.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(a,c){switch(a){case t.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,c))return;break;case t.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,c))return;break;case t.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,c))return;break;case t.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,c))return}this.callSuper(a,c)},doKeyArrowLeftOrUp:(a,c)=>{},doKeyArrowRightOrDown:(a,c)=>{}});u.MouseOver=new x("MouseOver",{initNode:function(a,c){c.mouseOver??(c.mouseOver=
!1);this.callSuper(a,c);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(l,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(l,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI?.()},doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});u.MouseDown=new x("MouseDown",{initNode:function(a,c){c.mouseDown??(c.mouseDown=!1);this.callSuper(a,
c);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated?.()}});u.MouseOverAndDown=new x("MouseOverAndDown",{include:[u.MouseOver,u.MouseDown]});u.Draggable=new x("Draggable",{initNode:function(a,c){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let h=!0;null!=c.isDraggable&&(h=c.isDraggable,delete c.isDraggable);this.callSuper(a,c);this.setIsDraggable(h)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;let c;a?c=this.attachToDom:this.inited&&(c=this.detachFromDom);if(c){a=this.getDragViews();let h=a.length;for(;h;){const e=a[--h];c.call(this,e,"__doMouseDown","mousedown");c.call(this,e,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",
a,!0)},setDragOffsetX:function(a,c){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDragOffsetY:function(a,c){this.dragOffsetY!==a&&(this.dragOffsetY=a,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},
getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const c=u.MouseObservable.getMouseFromEvent(a),h=this.getODE();this.dragInitX=c.x-h.offsetLeft;this.dragInitY=c.y-h.offsetTop;this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(w,"__doMouseUp",
"mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===t.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const c=u.MouseObservable.getMouseFromEvent(a);u.Geometry.measureDistance(c.x,c.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(t,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(a)},updateDrag:function(a){this.__lastMousePosition=u.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,c){this.detachFromDom(w,
"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(t,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,c){this.disabled||(this.setX(a),this.setY(c))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,{View:t,KeyActivation:l}=u;var a=u.Button=new w("Button",{include:[u.Activateable,u.UpdateableUI,u.Disableable,u.MouseOverAndDown,l],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(h,e){e.focusable??(e.focusable=!0);e.cursor??(e.cursor="pointer");this.callSuper(h,e)},setFocused:function(h){const e=this.focused;this.callSuper(h);this.inited&&this.focused!==e&&this.updateUI()},doActivationKeyDown:function(h,e){e||this.updateUI()},doActivationKeyUp:function(h){this.callSuper(h);
this.updateUI()},doActivationKeyAborted:function(h){this.callSuper(h);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const h=this.__restoreCursor;h&&(this.setCursor(h),this.__restoreCursor=null);this.activateKeyDown!==l.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});a=u.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[a],setActiveColor:function(h){this.activeColor!==h&&(this.activeColor=h,this.inited&&this.updateUI())},setHoverColor:function(h){this.hoverColor!==h&&(this.hoverColor=h,this.inited&&this.updateUI())},setReadyColor:function(h){this.readyColor!==
h&&(this.readyColor=h,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(h,e=1){this.setOpacity(e);this.setBgColor(h)}});const c=u.SimpleButton=new x("SimpleButton",t,{include:[a],initNode:function(h,e){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(h,
e)}});u.SimpleTextButton=new x("SimpleTextButton",c,{initNode:function(h,e){this.inset=this.outset=0;e.shrinkToFit??(e.shrinkToFit=!1);e.height??(e.height=24);e.textY??(e.textY="middle");this.callSuper(h,e);h=this.textY;e={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof h?e.valign=h:e.y=h;h=this.textView=new u.Text(this,e);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",h,"visible",h,"width",
h,"height",h,"y"])},setInset:function(h){this.set("inset",this.valueFromEvent(h),!0)},setOutset:function(h){this.set("outset",this.valueFromEvent(h),!0)},setText:function(h){this.text!==h&&(this.text=h,this.inited&&(this.textView.setText(h),this.fireEvent("text",h)))},setShrinkToFit:function(h){this.shrinkToFit!==h&&(this.shrinkToFit=h,this.inited&&(this.textView.setWhiteSpace(h?"nowrap":"normal"),this.fireEvent("shrinkToFit",h)))},setTextY:function(h){if(this.textY!==h&&(this.textY=h,this.inited)){const e=
this.textView;this.fireEvent("textY",h);"string"===typeof h?e.setValign(h):(e.setValign(""),e.setY(h))}},__updateContent:function(h){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:e,outset:k,textView:d}=this;this.__updateContentLoopBlock=!0;d.setX(e);this.shrinkToFit?this.setWidth(e+(d.visible&&this.text?d.width:0)+k):d.setWidth(this.width-e-k);this.__updateContentLoopBlock=!1}}});u.TextButton=new x("TextButton",u.PaddedText,{include:[a],initNode:function(h,e){e.focusIndicator??
(e.focusIndicator=!1);e.roundedCorners??(e.roundedCorners=3);e.textAlign??(e.textAlign="center");e.paddingTop??(e.paddingTop=1);e.height??(e.height=23-(e.paddingTop??0));e.activeColor??(e.activeColor="#ddd");e.hoverColor??(e.hoverColor="#eee");e.readyColor??(e.readyColor="#fff");this.callSuper(h,e)}})})(myt);
(u=>{const x=console.warn,{focus:w,mouse:t}=u.global,l={};u.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:a=>l[a]},initNode:function(a,c){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(a,c)},setLastFloatingPanelShown:function(a){this.lastFloatingPanelShown=a},setLastFloatingPanelId:function(a){this.floatingPanelId=a},setFloatingAlign:function(a){this.set("floatingAlign",a,!0)},
setFloatingValign:function(a){this.set("floatingValign",a,!0)},setFloatingAlignOffset:function(a){this.set("floatingAlignOffset",a,!0)},setFloatingValignOffset:function(a){this.set("floatingValignOffset",a,!0)},createFloatingPanel:function(a,c,h){a=a??this.floatingPanelId;h=h??{};h.panelId=a;return l[a]=new c(null,h)},getFloatingPanel:function(a){return l[a??this.floatingPanelId]},toggleFloatingPanel:function(a){this.getFloatingPanel(a??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(a):
this.showFloatingPanel(a)},showFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.show(this),this.setLastFloatingPanelShown(a)},hideFloatingPanel:function(a){if(a=this.getFloatingPanel(a??this.floatingPanelId))a.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(a){this.callSuper?.()},notifyPanelHidden:function(a){this.callSuper?.()},getFloatingAlignForPanel:function(a){return this.floatingAlign},getFloatingValignForPanel:function(a){return this.floatingValign},
getFloatingAlignOffsetForPanel:function(a){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(a){return this.floatingValignOffset},getNextFocus:function(){const a=this.lastFloatingPanelShown;return a?.isShown()?a:this.callSuper?.()},getNextFocusAfterPanel:function(a){return this},getPrevFocusAfterPanel:function(a){return this}});u.FloatingPanel=new JS.Class("FloatingPanel",u.View,{include:[u.RootView],initNode:function(a,c){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=
this.hideOnBlur=this.hideOnMouseDown=!0;c.visible=c.focusIndicator=!1;c.focusable=c.focusCage=!0;this.callSuper(a,c)},setOwner:function(a){this.owner=a},setPanelId:function(a){this.panelId=a},setIgnoreOwnerForHideOnMouseDown:function(a){this.ignoreOwnerForHideOnMouseDown=a},setHideOnBlur:function(a){this.hideOnBlur=a},setHideOnMouseDown:function(a){this.hideOnMouseDown=a},__doMouseDown:function(a){var c=a.value;a=c.pageX;c=c.pageY;this.containsPoint(a,c)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(a,
c)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(a){this.hideOnMouseDown&&this.hide(a)},focus:function(a){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(a);else{const c=this.getFirstFocusableDescendant();c===this?this.callSuper(a):c.focus(a)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(a){(a=a.value)&&!this.isAncestorOf(a)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||
this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||this.hide(!0)},isShown:function(){return this.visible},show:function(a){this.isShown()||(this.bringToFront(),this.updateLocation(a),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(t,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(a){this.isShown()&&(this.detachFromDom(t,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),
a||this.restoreFocus(),this.setOwner())},restoreFocus:function(){this.owner?.focus()},updateLocation:function(a){this.setOwner(a);this.updateLocationX(a);this.updateLocationY(a)},updateLocationX:function(a){const c=a.getFloatingAlignForPanel(this),h=typeof c;let e;if("string"===h)switch(e=a.getPagePosition().x+a.getFloatingAlignOffsetForPanel(this),c){case "outsideRight":e+=a.width;break;case "insideRight":e+=a.width-this.width;break;case "outsideLeft":e-=this.width;break;case "insideLeft":break;
default:x("Invalid align value",h,c)}else"number"===h?e=c:x("Invalid align type",h,c);this.setX(e)},updateLocationY:function(a){const c=a.getFloatingValignForPanel(this),h=typeof c;let e;if("string"===h)switch(e=a.getPagePosition().y+a.getFloatingValignOffsetForPanel(this),c){case "outsideBottom":e+=a.height;break;case "insideBottom":e+=a.height-this.height;break;case "outsideTop":e-=this.height;break;case "insideTop":break;default:x("Invalid valign value",h,c)}else"number"===h?e=c:x("Invalid valign type",
h,c);this.setY(e)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,t=Math,{View:l,global:a}=u,c=a.focus,h=a.keys,{LIST_KEYS:e,CODE_ESC:k}=h,d=f=>{const b=f.itemConfig??[],q=b.length,{items:m,defaultItemClass:p,fixedWidth:r}=f,z=m.length,E=0<r,I=f.getContentView(),J=I.getLayouts();let A=0;for(var B of J)B.incrementLockedCounter();l.doWhileRemovedFromDom(I,()=>{const v={listView:f};E&&(v.width=r,v.enableEllipsis=!0);for(;q>A;++A){var n=b[A];const y=n.klass??p;n=n.attrs??{};let D=m[A];D&&!D.isA(y)&&(D.destroy(),D=null);D??=m[A]=new y(I,
{...v});D&&(D.callSetters(n),D.__LAYOUT_IDX=A)}});if(E)B=r;else for(B=f.minWidth,A=0;q>A;){const v=m[A++];v.syncToDom();B=t.max(B,v.getMinimumWidth())}for(;z>A;)m[A++].destroy();m.length=q;if(!E)for(A=0;q>A;)f.updateItemWidth(m[A++],B);f.updateContentWidth(I,B);for(const v of J)v.sortSubviews((n,y)=>n.__LAYOUT_IDX-y.__LAYOUT_IDX),v.decrementLockedCounter(),v.update()},g=u.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
u.ListView=new x("ListView",u.FloatingPanel,{initNode:function(f,b){this.items=[];this.maxHeight=-1;this.minWidth=0;b.defaultItemClass??(b.defaultItemClass=u.ListViewItem);b.overflow??(b.overflow="autoy");b.bgColor??(b.bgColor="#ccc");b.boxShadow??(b.boxShadow=u.Button.FOCUS_SHADOW);this.callSuper(f,b);d(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new u.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&d(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?t.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,b)=>{f.setWidth(b)},updateContentWidth:(f,b)=>{f.setWidth(b)}});u.ListViewAnchor=new w("ListViewAnchor",{include:[u.FloatingPanelAnchor,u.ArrowKeyActivation],initNode:function(f,
b){b.listViewClass??(b.listViewClass=u.ListView);b.listViewAttrs??(b.listViewAttrs={});b.itemConfig??(b.itemConfig=[]);b.activationKeys??(b.activationKeys=e);this.callSuper(f,b)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var b=f.height,q=this.getPagePosition().y,m=a.windowResize.getHeight()-this.getPagePosition().y-this.height;f=q-b;b=m-b;q=q>m;m=this.floatingValign;
switch(m){case "outsideBottom":0>b&&q&&(m="outsideTop");break;case "insideBottom":0>b&&q&&(m="insideTop");break;case "outsideTop":0>f&&!q&&(m="outsideBottom");break;case "insideTop":0>f&&!q&&(m="insideBottom")}return m},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const b=this.getFloatingPanel(f);b&&(b.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,b){f===k?this.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,b){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==k)switch(this.callSuper(f),f){case h.CODE_ARROW_LEFT:case h.CODE_ARROW_UP:this.focusToLastItem();break;case h.CODE_ARROW_RIGHT:case h.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,b,q){(f=this.getEntryByValue(f))&&(f.attrs[b]=q);return f},getEntryByValue:function(f){return this.itemConfig.find(b=>b?.attrs&&b.attrs.value===f)}});u.ListViewItem=new x("ListViewItem",u.TextButton,{include:[g,u.ArrowKeyActivation],initNode:function(f,b){b.activeColor??(b.activeColor="#bbb");b.hoverColor??(b.hoverColor="#fff");b.readyColor??(b.readyColor="#eee");b.paddingLeft??
(b.paddingLeft=8);b.paddingRight??(b.paddingRight=8);b.textAlign??(b.textAlign="left");b.roundedCorners??(b.roundedCorners=0);b.activationKeys??(b.activationKeys=e);b.focusIndicator??(b.focusIndicator=!0);const q=this.__enableEllipsis=b.enableEllipsis;delete b.enableEllipsis;this.callSuper(f,b);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return t.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,b){f===k?this.listView.owner.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){c.prev()},doKeyArrowRightOrDown:function(f,b){c.next()}});u.ListViewSeparator=new x("ListViewSeparator",l,{include:[g],initNode:function(f,b){b.height??(b.height=1);b.bgColor??(b.bgColor="#666");this.callSuper(f,b)}})})(myt);
(u=>{const x=u.AccessorSupport,w=x.generateSetterName,t={},l=u.BAG=new JS.Class("BAG",{include:[x,u.Destructible,u.Observable],extend:{getGroup:(a,c)=>{if(a&&c){let h;return(h=t[a]??(t[a]={}))[c]??(h[c]=new l(a,c))}},removeGroup:(a,c)=>{if(a&&c&&(a=t[a])){const h=a[c];h&&delete a[c];return h}}},initialize:function(a,c){this.__nodes=[];this.trueNode=null;this.attrName=a;this.groupId=c},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&l.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(a){this.set("groupId",a,!0)},setAttrName:function(a){this.set("attrName",a,!0)},setTrueNode:function(a){this.set("trueNode",a,!0)},getNodes:function(){return this.__nodes},register:function(a){a&&!this.isRegistered(a)&&(this.__nodes.push(a),a[this.attrName]&&this.setTrue(a))},unregister:function(a){if(a){const c=this.__nodes,h=c.indexOf(a);-1<h&&c.splice(h,1);this.trueNode===a&&this.setTrueNode(null);0===c.length&&
this.destroy()}},setTrue:function(a){if(a&&this.trueNode!==a&&this.isRegistered(a)){const c=this.attrName,h=w(c),e=this.__nodes;let k=e.length;for(this.setTrueNode(a);k;){const d=e[--k];if(a===d){if(!d[c])d[h](!0)}else if(d[c])d[h](!1)}}},setFalse:function(a){a&&this.trueNode===a&&(a[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(a){return this.__nodes.includes(a)}});u.BAGMembership=new JS.Module("BAGMembership",{initNode:function(a,c){this.__bags=[];this.callSuper(a,c)},destroy:function(){const a=
this.__bags;let c=a.length;for(;c;){const h=a[--c];this.removeFromBAG(h.attrName,h.groupId)}this.callSuper()},isRegisteredWithBAG:function(a){return this.__bags.includes(a)},getBAG:(a,c)=>l.getGroup(a,c),addToBAG:function(a,c){c=this.getBAG(a,c);this.isRegisteredWithBAG(c)||(this.__bags.push(c),c.register(this),this.isAttachedTo(this,"__updateForBAG",a)||this.attachTo(this,"__updateForBAG",a))},removeFromBAG:function(a,c){c=this.getBAG(a,c);if(this.isRegisteredWithBAG(c)){const h=this.__bags;let e=
h.length,k=!0;for(;e;){const d=h[--e];d===c?(h.splice(e,1),c.unregister(this)):d.attrName===a&&(k=!1)}k&&this.detachFrom(this,"__updateForBAG",a)}},__updateForBAG:function(a){for(const c of this.__bags)if(c.attrName===a.type)c[a.value?"setTrue":"setFalse"](this)}})})(myt);
(u=>{const x=w=>{const t=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<t.length?" ":"")+t)};u.Radio=new JS.Class("Radio",u.Text,{include:[u.SimpleButtonStyle,u.BAGMembership],initNode:function(w,t){t.selected??(t.selected=!1);t.groupId??(t.groupId=u.generateGuid());t.focusIndicator??(t.focusIndicator=!1);t.activeColor??(t.activeColor="inherit");t.hoverColor??(t.hoverColor="inherit");t.readyColor??(t.readyColor="inherit");const l=t.value;delete t.value;this.callSuper(w,
t);this.setValue(l);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);u.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const t=this.getBAG("selected",this.groupId);if(t){const l=t.getNodes();let a=l.length;for(;a;){const c=l[--a];if(c.optionValue===w){t.setTrue(c);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),x(this)))},setGroupId:function(w){if(this.groupId!==w){const t=this.groupId;this.groupId=w;t&&this.removeFromBAG("selected",t);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,t=1){this.setOpacity(t);this.setTextColor(w)}})})(myt);
(u=>{const x=JS.Module,w=u.global.keys,t=u.Selectable=new x("Selectable",{setSelected:function(a){a=this.valueFromEvent(a);this.selected!==a&&(this.selected=a,this.inited&&this.fireEvent?.("selected",a))},isSelected:function(){return!!this.selected},canSelect:a=>!0,canDeselect:a=>!0}),l=u.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(a,c){this.__selected={};this.__lastSelectedItem=null;c.selectedCount=
0;c.itemSelectionId??(c.itemSelectionId="id");c.maxSelected??(c.maxSelected=-1);this.callSuper(a,c)},setItemSelectionId:function(a){this.itemSelectionId=a},setMaxSelected:function(a){this.maxSelected=a},setSelectedCount:function(a){this.selectedCount!==a&&(this.selectedCount=a,this.inited&&this.fireEvent("selectedCount",a))},isAddMode:()=>l.isAddMode(),isToggleMode:()=>l.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(a){a&&!this.isSelectedItem(a)&&this.canSelectItem(a)&&
(a.setSelected(!0),this.__selected[a[this.itemSelectionId]]=a,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=a,this.doSelected(a),this.fireEvent("itemSelected",a))},doSelected:a=>{},selectById:function(a){this.select(this.getSelectableItem(a))},canSelectItem:function(a){const {maxSelected:c,selectedCount:h}=this;if(0===c)return!1;if(1===c){if(0<h&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<c&&h>=c)return!1;return a.canSelect(this)},selectAll:function(){const a=
this.getSelectableItems();let c=a.length;for(;c;)this.select(a[--c])},deselect:function(a){this.isSelectedItem(a)&&this.canDeselectItem(a)&&(a.setSelected(!1),delete this.__selected[a[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===a&&(this.__lastSelectedItem=null),this.doDeselected(a),this.fireEvent("itemDeselected",a))},doDeselected:a=>{},deselectById:function(a){this.deselect(this.getSelectableItem(a))},canDeselectItem:function(a){return a.canDeselect(this)},
deselectAll:function(){const a=this.__selected;for(const c in a)this.deselect(a[c])},isSelectedItem:a=>a?a.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const a=[],c=this.getSubviews();let h=c.length;for(;h;){const e=c[--h];e.isA(t)&&a.push(e)}return a},getSelectableItems:function(){const a=this.getManagedItems();let c=a.length;for(;c;)a[--c].canSelect(this)||a.splice(c,1);return a},getSelectableItem:function(a){const c=
this.getSelectableItems(),h=this.itemSelectionId;let e=c.length;for(;e;){const k=c[--e];if(k[h]===a)return k}}})})(myt);
(u=>{const x=JS.Class,{View:w,SizeToParent:t}=u,l=u.TabSlider=new x("TabSlider",w,{include:[u.Selectable,u.Disableable,t],initNode:function(c,h){const e=this;let k;h.defaultPlacement="wrapper.container";h.percentOfParentWidth=100;h.expansionState="collapsed";h.tabId??(h.tabId=u.generateGuid());h.tabContainer??(h.tabContainer=c);h.selected??(h.selected=!1);h.buttonClass??(h.buttonClass=u.SimpleButton);h.zIndex??(h.zIndex=0);h.buttonHeight??(h.buttonHeight=30);h.fillColorSelected??(h.fillColorSelected=
"#666");h.fillColorHover??(h.fillColorHover="#eee");h.fillColorActive??(h.fillColorActive="#ccc");h.fillColorReady??(h.fillColorReady="#fff");h.minContainerHeight??(h.minContainerHeight=100);h.selected&&(k=!0,delete h.selected);e.callSuper(c,h);e.button=new e.buttonClass(e,{ignorePlacement:!0,zIndex:1,height:e.buttonHeight,focusIndicator:!0,groupId:e.parent.parent.groupId,percentOfParentWidth:100,hoverColor:e.fillColorHover,activeColor:e.fillColorActive,readyColor:e.fillColorReady},[t,{doActivated:()=>
{const d=e.tabContainer;e.isSelected()&&1!==d.maxSelected?d.deselect(e):d.select(e)},updateUI:function(){this.callSuper();e.selected&&-1!==e.tabContainer.maxSelected&&this.setBgColor(e.fillColorSelected);e.notifyButtonRedraw()}}]);c=e.wrapper=new w(e,{ignorePlacement:!0,y:e.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[t,{setHeight:function(d){this.callSuper(Math.round(d))},setWidth:function(d){this.callSuper(d);this.inited&&this.container.setWidth(d)}}]);new u.SizeToChildren(c.container=
new w(c),{axis:"y"});e.constrain("__updateHeight",[c,"y",c,"height"]);k&&e.tabContainer.select(e);!0===h.disabled&&e.setDisabled(!0);e.setHeight(e.getCollapsedHeight())},setSelected:function(c){this.callSuper(c);this.button?.updateUI()},setTabId:function(c){this.tabId=c},setTabContainer:function(c){this.tabContainer=c},setMinContainerHeight:function(c){this.minContainerHeight=c},setButtonClass:function(c){this.buttonClass=c},setFillColorSelected:function(c){this.fillColorSelected=c},setFillColorHover:function(c){this.fillColorHover=
c},setFillColorActive:function(c){this.fillColorActive=c},setFillColorReady:function(c){this.fillColorReady=c},setButtonHeight:function(c){this.buttonHeight!==c&&(this.buttonHeight=c,this.button&&(this.button.setHeight(c),this.wrapper.setY(c)))},setExpansionState:function(c){if(this.expansionState!==c){this.expansionState=c;this.inited&&this.fireEvent("expansionState",c);const h=this.wrapper;h&&("expanded"===c?(h.setMaskFocus(!1),h.setOverflow("auto")):"expanding"===c?h.setVisible(!0):"collapsed"===
c?h.setVisible(!1):"collapsing"===c&&(h.setMaskFocus(!0),h.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(c){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(c){const h=this,e=h.wrapper;c-=h.getCollapsedHeight();h.setExpansionState("expanding");e.stopActiveAnimators();if(e.height!==c){const k=h.tabContainer.duration;1===k?(e.setHeight(c),h.setExpansionState("expanded")):e.animate({attribute:"height",
to:c,duration:k}).next(d=>{h.setExpansionState("expanded")})}else h.setExpansionState("expanded")},collapse:function(){const c=this,h=c.wrapper;c.setExpansionState("collapsing");h.stopActiveAnimators();if(0!==h.height){const e=c.tabContainer.duration;1===e?(h.setHeight(0),c.setExpansionState("collapsed")):h.animate({attribute:"height",to:0,duration:e}).next(k=>{c.setExpansionState("collapsed")})}else c.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});u.TextTabSlider=new x("TextTabSlider",l,{initNode:function(c,h){h.labelTextColorChecked??(h.labelTextColorChecked="#fff");h.labelTextColor??(h.labelTextColor="#333");this.callSuper(c,h);this.button.label=new u.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(c){this.labelTextColorChecked=c},setLabelTextColor:function(c){this.labelTextColor=c},setText:function(c){this.text!==c&&(this.text=c,this.button?.label?.setText(c))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const a=u.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[u.SelectionManager],
extend:{SPACING:1},initNode:function(c,h){const e=this;e._tabSliders=[];h.defaultPlacement="container";h.spacing??(h.spacing=a.SPACING);h.overflow??(h.overflow="autoy");h.itemSelectionId??(h.itemSelectionId="tabId");h.maxSelected??(h.maxSelected=1);h.duration??(h.duration=500);e.updateLayout=u.debounce(e.updateLayout);e.callSuper(c,h);c=e.container=new w(e,{ignorePlacement:!0,percentOfParentWidth:100},[t,{subnodeAdded:function(k){this.callSuper(k);k instanceof l&&(e._tabSliders.push(k),e.attachTo(k,
"updateLayout","selected"))},subnodeRemoved:function(k){if(k instanceof l){const d=e._tabSliders,g=d.indexOf(k);-1<g&&(e.detachFrom(k,"updateLayout","selected"),d.splice(g,1))}this.callSuper(k)}}]);c.layout=new u.SpacedLayout(c,{axis:"y",spacing:e.spacing,collapseParent:!0});e.attachTo(e,"updateLayout","height")},setSpacing:function(c){this.spacing!==c&&(this.spacing=c,this.layout?.setSpacing(c))},setDuration:function(c){this.duration=c},updateLayout:function(c,h){c=this._tabSliders;for(var e=c.length,
k=e,d=0,g=0,f=0;k;){var b=c[--k];b.visible&&(++f,b.selected?(d+=b.getMinimumExpandedHeight(),g+=b.getPreferredExpandedHeight()):(b=b.getCollapsedHeight(),d+=b,g+=b))}k=this.container.layout;f=k.inset+k.outset+k.spacing*(f-1);g+=f;k=this.height;d=d+f>k;f=g>k;b=this.duration;g-=k;0<h&&this.setDuration(h);for(k=e;k;)if(e=c[--k],e.visible)if(e.selected){let q;if(d)q=e.getMinimumExpandedHeight();else if(f){const m=e.getPreferredExpandedHeight(),p=e.getMinimumExpandedHeight();q=m-g;p>q?(g-=m-p,q=p):g=0}else q=
e.getPreferredExpandedHeight();e.expand(q)}else e.collapse();0<h&&this.setDuration(b)}})})(myt);
(u=>{const x=l=>{const a=[];switch(l.tabContainer.location){case "top":a.push("TopLeft","TopRight");break;case "bottom":a.push("BottomLeft","BottomRight");break;case "left":a.push("TopLeft","BottomLeft");break;case "right":a.push("TopRight","BottomRight")}for(const c of a)l["setRounded"+c+"Corner"](l.cornerRadius||0)},w=u.Tab=new JS.Class("Tab",u.SimpleTextButton,{include:[u.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(l,a){a.tabId??(a.tabId=u.generateGuid());a.tabContainer??(a.tabContainer=
l);let c;a.selected&&(c=!0,delete a.selected);a.inset??(a.inset=w.INSET);a.outset??(a.outset=w.OUTSET);a.selectedColor??(a.selectedColor="#fff");a.hoverColor??(a.hoverColor="#eee");a.activeColor??(a.activeColor="#aaa");a.readyColor??(a.readyColor="#ccc");a.labelTextSelectedColor??(a.labelTextSelectedColor="#333");a.height??(a.height=24);a.focusIndicator??(a.focusIndicator=!1);a.cornerRadius??(a.cornerRadius=6);this.callSuper(l,a);c&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(l){this.tabId=l},setTabContainer:function(l){this.tabContainer=l},setSelectedColor:function(l){this.selectedColor=l},setLabelTextColor:function(l){this.labelTextColor=l},setCornerRadius:function(l){this.cornerRadius=l;this.inited&&x(this)},setLabelTextSelectedColor:function(l){this.labelTextSelectedColor=l;this.inited&&this.selected&&this.textView.setTextColor(l)},setSelected:function(l){this.callSuper(l);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),t=u.TabContainer=new JS.Module("TabContainer",{include:[u.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(l,a){this.__tabs=[];a.spacing??(a.spacing=t.SPACING);a.inset??(a.inset=t.INSET);a.location??(a.location="top");a.itemSelectionId??
(a.itemSelectionId="tabId");a.maxSelected??(a.maxSelected=1);this.callSuper(l,a);this.layout=new u.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(l){this.location=l},setSpacing:function(l){this.spacing!==l&&(this.spacing=l,this.layout?.setSpacing(l))},setInset:function(l){this.inset!==l&&(this.inset=l,this.layout?.setInset(l))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(l){this.callSuper(l);if(l.isA(w))switch(this.__tabs.push(l),this.location){case "top":l.setValign("bottom");break;case "bottom":l.setValign("top");break;case "left":l.setAlign("right");break;case "right":l.setAlign("left")}},subnodeRemoved:function(l){if(l.isA(w)){const a=this.__tabs,c=a.indexOf(l);-1<c&&a.splice(c,1)}this.callSuper(l)}})})(myt);
(u=>{const x=JS.Class,w=Math.min,t=Array.isArray,{SizeToDom:l,View:a,Disableable:c,KeyObservable:h,Button:{FOCUS_SHADOW:e},global:{keys:k}}=u,d=(p,r,z)=>{p[z]!==r&&(p[z]=r,p.getIDS()[z]=r+"px",p.inited&&(p.fireEvent(z,r),p.sizeViewToDom()))},g=(p,r,z)=>{p[r]!==z&&(p.getIDE()[r]=p[r]=z,p.inited&&p.fireEvent(r,z))},f=u.NativeInputWrapper=new x("NativeInputWrapper",a,{include:[c,u.InputObservable],initNode:function(p,r){r.tagName??(r.tagName="input");r.focusable??(r.focusable=!0);this.callSuper(p,r);
this.addDomClass("mytNativeInput")},createOurDomElement:function(p){p=this.callSuper(p);this.inputType&&((t(p)?p[1]:p).type=this.inputType);return p},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){this.value!==p&&(this.value=p,this.setDomValue(p),this.inited&&this.fireEvent("value",p))},getDomValue:function(){return this.getIDE().value},setDomValue:function(p){const r=this.getIDE();r.value!==p&&(r.value=p)}}),b=u.InputSelectOption=new x("InputSelectOption",
a,{include:[c,u.Selectable],createOurDomElement:p=>document.createElement("option"),setSelected:function(p){p=this.valueFromEvent(p);const r=this.getIDE();r.selected!==p&&(r.selected=p)},setDisabled:function(p){this.disabled!==p&&(this.getIDE().disabled=p,this.callSuper(p))},setValue:function(p){g(this,"value",p)},setLabel:function(p){this.label!==p&&(this.getIDE().textContent=this.label=p,this.inited&&this.fireEvent("label",p))},isSelected:function(){return this.getIDE().selected},canSelect:function(p){return!this.disabled&&
!this.getIDE().selected&&this.parent===p},canDeselect:function(p){return!this.disabled&&this.getIDE().selected&&this.parent===p}}),q=u.BaseInputText=new x("BaseInputText",f,{include:[u.TextSupport],initNode:function(p,r){r.bgColor??(r.bgColor="transparent");r.spellcheck??(r.spellcheck=!1);this.callSuper(p,r);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(p){this.callSuper(p);this.setValue(p)},
setSpellcheck:function(p){g(this,"spellcheck",p)},setMaxLength:function(p){g(this,"maxLength",null==p||0>p?void 0:p)},setAllowedChars:function(p){this.allowedChars=p},setPlaceholder:function(p){g(this,"placeholder",p)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(e)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(p){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(p){const r=
p.value,z=this.allowedChars;z&&!z.includes(h.getKeyFromEvent(p))&&r.preventDefault();this.filterInputPress(r)},filterInput:p=>p,filterInputPress:p=>{},__syncToDom:function(p){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const p=document.selection.createRange();p.moveStart("character",-this.getDomValue().length);return p.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(p,r){if(null==r||p===r){if(this.getCaretPosition()===p)return;
r=p}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(p,r):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",r),z.moveStart("character",p),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const p=this.getIDE();return{start:p.selectionStart,startElem:p,end:p.selectionEnd,endElem:p}},setSelection:function(p){p&&
this.setCaretPosition(p.start,p.end)},saveSelection:function(p){this._selRange=p||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),m=u.InputText=new x("InputText",q,{include:[u.SizeHeightToDom],initNode:function(p,r){this.inputType=!0===r.password?"password":"text";this.callSuper(p,r);this.setCaretToEnd()},setPassword:function(p){this.set("password",p,!0);this.inited&&(this.getIDE().type=p?"password":"text")}});u.EditableText=new x("EditableText",
q,{include:[l],initNode:function(p,r){r.tagName??(r.tagName="div");r.inputType=null;r.whiteSpace??(r.whiteSpace="pre");r.contentEditable??(r.contentEditable=!0);this.callSuper(p,r);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(p){d(this,p,"minWidth")},setMinHeight:function(p){d(this,p,"minHeight")},setPadding:function(p){this.setPaddingTop(p);this.setPaddingRight(p);
this.setPaddingBottom(p);this.setPaddingLeft(p)},setPaddingTop:function(p){d(this,p,"paddingTop")},setPaddingRight:function(p){d(this,p,"paddingRight")},setPaddingBottom:function(p){d(this,p,"paddingBottom")},setPaddingLeft:function(p){d(this,p,"paddingLeft")},setContentEditable:function(p){g(this,"contentEditable",p)},filterInputPress:function(p){const r=this.maxLength;0<=r&&this.getCharacterCount()===r&&p.preventDefault();this.callSuper(p)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(p){const r=this.getIDE();r.innerHTML!==p&&(r.innerHTML=p,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(p){h.isEnterKeyEvent(p)&&(p.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(p){this.callSuper(p);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(p,r){if(null==r||p===r){if(this.getCaretPosition()===p)return;r=p}this.saveSelection({start:p,startElem:this.getIDE().firstChild,end:r,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(p){this.saveSelection();return!0},getSelection:function(){let p;if(window.getSelection){const r=window.getSelection();if(0<r.rangeCount){if(r.extentNode===
this.getIDE())return;p=r.getRangeAt(0)}}else document.selection&&(p=document.selection.createRange());return{start:p?p.startOffset:0,startElem:p?p.startContainer:this.getIDE().firstChild,end:p?p.endOffset:0,endElem:p?p.endContainer:this.getIDE().firstChild}},setSelection:function(p){if(p){const {startElem:r,endElem:z}=p;if(r&&r.parentNode&&z&&z.parentNode){const E=document.createRange();E.setStart(r,w(p.start,r.length));E.setEnd(z,w(p.end,z.length));window.getSelection?(p=window.getSelection(),0<
p.rangeCount&&p.removeAllRanges(),p.addRange(E)):document.selection&&E.select()}}}});u.InputTextArea=new x("InputTextArea",q,{initNode:function(p,r){r.tagName??(r.tagName="textarea");r.inputType=null;r.resize??(r.resize="none");r.wrap??(r.wrap="soft");this.callSuper(p,r)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(p){const r=this;r.resize!==p&&(p=r.resize=r.getIDS().resize=p||"none",r.inited&&r.fireEvent("resize",p),"none"!==p&&(r.__resizeObserver??
(r.__resizeObserver=new ResizeObserver(()=>{r.doResize()}))).observe(r.getIDE()))},setWrap:function(p){g(this,"wrap",p)},doResize:function(){const p=this.resize;"both"!==p&&"horizontal"!==p||l.sizeWidth(this);"both"!==p&&"vertical"!==p||l.sizeHeight(this)}});u.ComboBox=new x("ComboBox",m,{include:[u.Activateable,u.KeyActivation,u.ListViewAnchor],initNode:function(p,r){this.filterItems=!0;r.activationKeys??(r.activationKeys=[k.CODE_ENTER,k.CODE_ESC,k.CODE_ARROW_UP,k.CODE_ARROW_DOWN]);r.bgColor??(r.bgColor=
"#fff");r.borderWidth??(r.borderWidth=1);r.borderStyle??(r.borderStyle="solid");r.floatingAlignOffset??(r.floatingAlignOffset=r.borderWidth);r.fullItemConfig??(r.fullItemConfig=[]);r.listViewAttrs={...r.listViewAttrs,maxHeight:r.listViewAttrs?.maxHeight??99};this.callSuper(p,r)},setFullItemConfig:function(p){this.fullItemConfig=p},setFilterItems:function(p){this.filterItems=p},__syncToDom:function(p){const r=this.value;this.callSuper(p);r!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(p){const r=
this.getFloatingPanel(p);if(r){let E;if(this.filterItems){E=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const I=this.fullItemConfig,J=I.length;for(let A=0;J>A;){const B=I[A++],v=B.attrs.text.toLowerCase(),n=v.indexOf(z);0===n?v!==z&&E.push(B):0<n&&E.push(B)}}else E=this.fullItemConfig;0<E.length?(r.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(E),this.callSuper(p)):this.hideFloatingPanel(p)}},doItemActivated:function(p){this.setValue(null==p.value?p.text:p.value);this.callSuper(p)},
doActivated:function(){this.toggleFloatingPanel()}});u.InputSelect=new x("InputSelect",f,{include:[l],initNode:function(p,r){r.tagName??(r.tagName="select");r.inputType=null;r.multiple??(r.multiple=!1);r.size??(r.size=r.multiple?4:1);this.callSuper(p,r);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(p){g(this,"multiple",p)},setSize:function(p){g(this,"size",p)},setOptions:function(p){this.destroyAllOptions();if(t(p))for(const r of p)this.addOption(r)},getOptions:function(){return this.getSubviews().slice()},
setValue:function(p){t(p)&&u.areArraysEqual(p,this.value)||this.value===p||(this.value=p,this.inited&&this.fireEvent("value",p))},subviewAdded:function(p){p instanceof b||(u.dumpStack("Subview unsupported. Destroying it"),p.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(e)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(p=>p.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(p=>
p.value)},getOptionForValue:function(p){return this.getOptions().find(r=>r.value===p)},addOption:function(p){return new b(this,p)},destroyAllOptions:function(){for(const p of this.getOptions())p.destroy()},destroyOptionWithValue:function(p){if(p=this.getOptionForValue(p))if(p.destroy(),p.destroyed)return!0;return!1},deselectAll:function(){let p=!1;for(const r of this.getOptions())r.isSelected()&&(r.setSelected(!1),p=!0);p&&this.__doChanged()},selectValues:function(p){t(p)||(p=[p]);for(const r of p)this.selectValue(r)},
selectValue:function(p){this.select(this.getOptionForValue(p))},select:function(p){p?.canSelect(this)&&(p.setSelected(!0),this.__syncToDom())},deselectValue:function(p){this.deselect(this.getOptionForValue(p))},deselect:function(p){p?.canDeselect(this)&&(p.setSelected(!1),this.__syncToDom())},__doChanged:function(p){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(u=>{const x=JS.Module,w=Math.round;var t=u.ValueComponent=new x("ValueComponent",{initNode:function(a,c){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(a,c)},setValueFilter:function(a){this.valueFilter=a;this.inited&&a&&this.setValue(this.value)},setValue:function(a){this.valueFilter&&(a=this.valueFilter(a));this.value!==a&&(this.value=a,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(a,c){const h=this.valueFilter;
this.setValueFilter(h?"last"===c?e=>a(h(e)):e=>h(a(e)):a)}});const l=u.RangeComponent=new x("RangeComponent",{include:[t],setLowerValue:function(a){this.setValue({lower:a,upper:this.value&&void 0!==this.value.upper?this.value.upper:a})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(a){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:a,upper:a})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(a){if(a){var c=
this.value;const k=c?c.lower:void 0;c=c?c.upper:void 0;this.valueFilter&&(a=this.valueFilter(a));if(a.lower!==k||a.upper!==c){var h;(h=a).lower??(h.lower=a.upper);var e;(e=a).upper??(e.upper=a.lower);void 0!==a.lower&&void 0!==a.upper&&a.lower>a.upper&&(h=a.lower,a.lower=a.upper,a.upper=h);this.value=a;this.inited&&(this.fireEvent("value",this.getValue()),a.lower!==k&&this.fireEvent("lowerValue",a.lower),a.upper!==c&&this.fireEvent("upperValue",a.upper))}}else this.callSuper(a)},getValueCopy:function(){const a=
this.value;return{lower:a.lower,upper:a.upper}}});t=u.BoundedValueComponent=new x("BoundedValueComponent",{include:[t],initNode:function(a,c){const h=this;h.appendToEarlyAttrs("snapToInt","minValue","maxValue");c.snapToInt??(c.snapToInt=!0);c.valueFilter||(c.valueFilter=e=>{var k=h.maxValue;if(null!=k&&e>k)return k;k=h.minValue;return null!=k&&e<k?k:e});h.callSuper(a,c)},setSnapToInt:function(a){this.snapToInt!==a&&(this.snapToInt=a,this.inited&&(this.fireEvent("snapToInt",a),a&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(a){this.snapToInt&&null!=a&&(a=w(a));if(this.minValue!==a){const c=this.maxValue;null!=c&&a>c&&(a=c);this.minValue!==a&&(this.minValue=a,this.inited&&(this.fireEvent("minValue",a),this.setValue(this.value)))}},setMaxValue:function(a){this.snapToInt&&null!=a&&(a=w(a));if(this.maxValue!==a){const c=this.minValue;null!=c&&a<c&&(a=c);this.maxValue!==a&&(this.maxValue=a,this.inited&&(this.fireEvent("maxValue",a),this.setValue(this.value)))}},
setValue:function(a){this.callSuper(this.snapToInt&&null!=a&&!isNaN(a)?w(a):a)}});u.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[t,l],initNode:function(a,c){const h=this;c.valueFilter||(c.valueFilter=e=>{if(e){const k=h.maxValue,d=h.minValue;null!=k&&e.upper>k&&(e.upper=k);null!=d&&e.lower<d&&(e.lower=d)}return e});h.callSuper(a,c)},setValue:function(a){this.snapToInt&&null!=a&&(null==a.lower||isNaN(a.lower)||(a.lower=w(a.lower)),null==a.upper||isNaN(a.upper)||(a.upper=w(a.upper)));
this.callSuper(a)}})})(myt);
(u=>{const x=w=>{const t=w.label??"";w.setText('<i class="'+("solid"===(w.checkboxStyle??"outline")?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<t.length?" ":"")+t)};u.Checkbox=new JS.Class("Checkbox",u.Text,{include:[u.SimpleButtonStyle,u.ValueComponent],initNode:function(w,t){this.appendToEarlyAttrs("userUnselectable");t.value??(t.value=!1);t.focusIndicator??(t.focusIndicator=!1);t.checkboxStyle??(t.checkboxStyle="outline");t.activeColor??(t.activeColor="inherit");t.hoverColor??
(t.hoverColor="inherit");t.readyColor??(t.readyColor="inherit");this.callSuper(w,t);u.FontAwesome.registerForNotification(this);x(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&x(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(w,t=1){this.setOpacity(t);this.setTextColor(w)}})})(myt);
(u=>{let x;const {Class:w,Module:t}=JS,l=console.warn,{KeyObservable:a,UpdateableUI:c,dumpStack:h,global:e}=u,k=e.focus,d=e.keys,g={},f=(n,y)=>{if(n){const D=n.id;n.id?y(D):h("No ID")}else h("No processor")},b=n=>{f(n,y=>{g[y]=n})},q=n=>{const y=u.BAG.getGroup("selected",n.groupId);if(y){const D=y.getNodes();n=n.value;let F=D.length;for(;F;){const K=D[--F];if(K.optionValue===n){y.setTrue(K);break}}}},m=n=>{if(n.groupId){const y=u.BAG.getGroup("selected",n.groupId);y&&n.syncTo(y,"__syncValue","trueNode")}},
p=(n,y)=>{const D=[],F=n.__v;if(F)for(const K of F)y=K.isFormValid(n,null,D)&&y;n.setErrorMessages(D);n.setIsValid(y);return y},r=(n,y,D)=>{if(n=n.__vp)for(const F of n)F[D]&&(y=F.process(y));return y},z=u.ValueProcessor=new w("ValueProcessor",{initialize:function(n,y,D,F){this.id=n;this.runForDefault=!!y;this.runForRollback=!!D;this.runForCurrent=!!F},process:n=>n}),E=u.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:n=>{if(null==n||""===n||"-"===n)return n;const y=Number(n);return isNaN(y)?
n:y}}),I=u.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(n,y,D,F,K){this.callSuper(n,y,D,F);this.trim=K},process:function(n){n+="";switch(this.trim){case "start":case "left":return n.trimStart();case "end":case "right":return n.trimEnd();default:return n.trim()}}}),J=u.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(n,y,D,F,K){this.callSuper(n,y,D,F);this.defaultValue=K},process:function(n){return void 0===n?this.defaultValue:n}}),A=u.Form=new t("Form",
{initNode:function(n,y){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(n,y);this.form?.isA(A)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(A)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(n){this.set("errorMessages",n,!0)},getFullId:function(){const n=[this.id];let y=this.form;for(;y&&y.id;)n.unshift(y.id),y=y.form;return n.join(".")},setId:function(n){if(this.id!==n){const y=this.id;this.id=
n;(n=this.form)&&this.inited&&(n.removeSubForm(y),n.addSubForm(this))}},setForm:function(n){if(this.form!==n){const y=this.form;this.form=n;y?.removeSubForm(this.id);this.inited&&n?.addSubForm(this)}},setIsValid:function(n){this.isValid=n;this.inited&&this.fireEvent("isValid",n);const y=this.form;y&&!this._lockCascade&&(n?y.verifyValidState(this):y.notifySubFormInvalid())},setIsChanged:function(n){if(this.isChanged!==n){this.isChanged=n;this.inited&&this.fireEvent("isChanged",n);const y=this.form;
y&&!this._lockCascade&&(n?y.notifySubFormChanged():y.verifyChangedState(this))}},setValidators:function(n){let y=n.length;for(;y;){const D=n[--y];"string"===typeof D&&(n[y]=e.validators.getValidator(D),n[y]||n.splice(y,1))}this.__v=n},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(B))return this.value;const n={},y=this.__sf;for(const D in y)n[D]=y[D].getValue();return n},setValue:function(n){this.callSuper?.(n);if("object"===typeof n&&!this.isA(B))for(const y in n){const D=
this.getSubForm(y);D?n[y]=D.setValue(n[y]):l("ID in setValue for missing subform",y)}this.form?.notifyValueChanged(this);return n},getDefaultValue:function(){const n={};let y=this.__sf;for(const D in y)n[D]=y[D].getDefaultValue();return n},setDefaultValue:function(n){if("object"===typeof n)for(const y in n){const D=this.getSubForm(y);D?n[y]=D.setDefaultValue(n[y]):l("ID in setDefaultValue for missing subform",y)}return n},getRollbackValue:function(){const n={},y=this.__sf;for(const D in y)n[D]=y[D].getRollbackValue();
return n},setRollbackValue:function(n){if("object"===typeof n)for(const y in n){const D=this.getSubForm(y);D?n[y]=D.setRollbackValue(n[y]):l("ID in setRollbackValue for missing subform",y)}return n},addAccelerator:function(n,y){this.__acc[n]=y},removeAccelerator:function(n){delete this.__acc[n]},invokeAccelerator:function(n,y){this.__acc[n]?.call(this,y??null)},addValidator:function(n){n&&this.__v.push(n)},removeValidator:function(n){if(n){const y=this.__v;let D=y.length;for(;D;){const F=y[--D];if(F.id===
n)return y.splice(D,1),F}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(n){const y=n.id;null!=this.getSubForm(y)?l("ID in use for subform, add aborted",y,n):(n.setForm(this),this.__sf[y]=n,n.isChanged&&this.notifySubFormChanged(),n.isValid||this.notifySubFormInvalid())},removeSubForm:function(n){const y=this.getSubForm(n);y&&(y.setForm(null),delete this.__sf[n],this.verifyChangedState(),this.verifyValidState());return y},getSubForm:function(n){return this.__sf[n]},
getSubForms:function(){return this.__sf},getInvalidSubformIds:function(n){n&&this.doValidation();const y=[];(function K(F){if(F.isA(B))F.isValid||y.push(F.getFullId());else{F=F.getSubForms();for(const L in F)K(F[L])}})(this);return y},getAllErrorMessages:function(){const n=this.__sf;let y=(this.errorMessages??[]).slice();for(const D in n)y.push(...n[D].getAllErrorMessages());return y},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(n){const y=this.__sf;let D=!0;for(const F in y){const K=
y[F];K!==n&&(D=K.isValid&&D)}return p(this,D)},doValidation:function(){const n=this.__sf;let y=!0;for(const D in n)y=n[D].doValidation()&&y;this._lockCascade=!0;y=p(this,y);this._lockCascade=!1;return y},notifyValueChanged:function(n){this.form?.notifyValueChanged(n)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(n){const y=this.__sf;let D=!1;for(const F in y){const K=y[F];K!==n&&(D=K.isChanged||D)}this.setIsChanged(D);return D},setup:function(n,y,D){this._lockCascade=
!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;n??={};y??={};D??={};const F=this.__sf;for(const K in F)F[K].setup(n[K],y[K],D[K])},resetForm:function(){this._lockCascade=!0;const n=this.__sf;for(const y in n)n[y].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const n=this.__sf;for(const y in n)n[y].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const n={},y=this.__sf;for(const D in y){const F=y[D];F.isChanged&&(n[D]=F.getChangedValue())}return n}}),B=u.FormElement=new t("FormElement",{include:[A],initNode:function(n,y){this.__vp=[];this.callSuper(n,y)},getValue:function(){return r(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(n){void 0===n&&(n=this.getRollbackValue());this.value!==n&&(this.callSuper(n),this.verifyChangedState());return n},
getDefaultValue:function(){return r(this,this.defaultValue,"runForDefault")},setDefaultValue:function(n){this.defaultValue!==n&&(this.defaultValue=n,this.inited&&this.fireEvent("defaultValue",n),this.verifyChangedState());return n},getRollbackValue:function(){return r(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(n){void 0===n&&(n=this.getDefaultValue());this.rollbackValue!==n&&(this.rollbackValue=n,this.inited&&this.fireEvent("rollbackValue",n),this.verifyChangedState());return n},
setValueProcessors:function(n){let y=n.length;for(;y;){const D=n[--y];"string"===typeof D&&(n[y]=g[D],n[y]||n.splice(y,1))}this.__vp=n},addValueProcessor:function(n){this.__vp.push(n)},removeValueProcessor:function(n){if(n){const y=this.__vp;let D=y.length;for(;D;){const F=y[--D];if(F.id===n)return y.splice(D,1),F}}},addSubForm:n=>{h("addSubForm unsupported on FormElement")},getSubForm:n=>{h("getSubForm unsupported on FormElement")},removeSubForm:n=>{h("removeSubForm unsupported on FormElement")},
verifyChangedState:function(n){n=this.getValue()!==this.getRollbackValue();this.setIsChanged(n);return n},setup:function(n,y,D){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(n);this.setRollbackValue(y);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(D)},resetForm:function(){this._lockCascade=!0;const n=this.getDefaultValue();this.setRollbackValue(n);this.setValue(n);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),v=u.FormInputTextMixin=new t("FormInputTextMixin",{include:[B,c],initNode:function(n,y){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";y.bgColor??(y.bgColor="#fff");y.borderWidth??(y.borderWidth=1);y.borderStyle??(y.borderStyle="solid");this.callSuper(n,y);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(n){this.validateWhen=n},setAcceleratorScope:function(n){this.acceleratorScope=n},setErrorColor:function(n){this.errorColor=n},setActionRequiredColor:function(n){this.actionRequiredColor=
n},setNormalColor:function(n){this.normalColor=n},setIsChanged:function(n){this.callSuper(n);this.inited&&this.updateUI()},setIsValid:function(n){this.callSuper(n);this.inited&&this.updateUI()},setValue:function(n){n=this.callSuper(n);const y=this.validateWhen;"key"!==y&&"blurWithKeyFix"!==y||this.verifyValidState();return n},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":k.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(n){a.isEnterKeyEvent(n)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(n){a.isEscKeyEvent(n)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const n=this.validateWhen;"blur"!==n&&"blurWithKeyFix"!==n||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
u.RootForm=new t("RootForm",{include:[A],initNode:function(n,y){this.callSuper(n,y);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:n=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});u.FormCheckbox=new w("FormCheckbox",u.Checkbox,{include:[B],initNode:function(n,y){this.rollbackValue=this.defaultValue=
!1;this.callSuper(n,y)}});u.FormComboBox=new w("FormComboBox",u.ComboBox,{include:[B,c],initNode:function(n,y){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(n,y);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(n){this.validateWhen=n},setAcceleratorScope:function(n){this.acceleratorScope=n},setErrorColor:function(n){this.errorColor=
n},setActionRequiredColor:function(n){this.actionRequiredColor=n},setNormalColor:function(n){this.normalColor=n},setIsChanged:function(n){this.callSuper(n);this.inited&&this.updateUI()},setIsValid:function(n){this.callSuper(n);this.inited&&this.updateUI()},setValue:function(n){n=this.callSuper(n);const y=this.validateWhen;"key"!==y&&"blurWithKeyFix"!==y||this.verifyValidState();return n},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":k.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(n){this._isShown=!0},notifyPanelHidden:function(n){this._isShown=!1},doActivationKeyDown:function(n,y){n!==d.CODE_ESC||this._isShown?this.callSuper(n,y):this.invokeAccelerator("reject")},doActivationKeyUp:function(n){n!==
d.CODE_ENTER||this._isShown?this.callSuper(n):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const n=this.validateWhen;"blur"!==n&&"blurWithKeyFix"!==n||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});u.FormEditableText=new w("FormEditableText",u.EditableText,{include:[v],__hndlKeyDown:function(n){"nowrap"===this.whitespace&&this.callSuper(n)}});u.FormInputText=new w("FormInputText",
u.InputText,{include:[v]});u.FormInputTextArea=new w("FormInputTextArea",u.InputTextArea,{include:[v],__hndlKeyDown:n=>{}});u.FormInputSelect=new w("FormInputSelect",u.InputSelect,{include:[B],setValue:function(n){if(!this.__abortSetValue)return n=this.callSuper(n),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(n),this.__abortSetValue=!1,this.verifyValidState(),n}});u.FormRadioGroup=new w("FormRadioGroup",u.Node,{include:[u.ValueComponent,B],initNode:function(n,y){y.groupId??(y.groupId=
u.generateGuid());this.callSuper(n,y);void 0!==this.value&&q(this);m(this)},setValue:function(n){n=this.callSuper(n);this.inited&&q(this);return n},setGroupId:function(n){if(this.groupId!==n){if(this.groupId){const y=u.BAG.getGroup("selected",this.groupId);y&&this.detachFrom(y,"__syncValue","trueNode")}this.groupId=n;this.inited&&m(this)}},__syncValue:function(n){n=n.value;this.setValue(n?n.optionValue:null)}});u.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(n,
y,D,F,K){this.callSuper(n,y,D,F);this.otherField=K},process:function(n){return null==n||""===n?this.otherField.getValue():n}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){b(x=new J("undefToEmpty",!0,!0,!0,""));b(new E("toNumber",!0,!0,!0));b(new I("trimLeft",!0,!0,!0,"left"));b(new I("trimRight",!0,!0,!0,"right"));b(new I("trimBoth",!0,!0,!0,"both"));e.register("valueProcessors",this)},getValueProcessor:n=>g[n],register:b,unregister:n=>{f(n,y=>{g[y]&&delete g[y]})}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,t=Math.round,l={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},a=(k,d)=>{k[d](k,"doDragOver","dragover",!1);k[d](k,"doDragEnter","dragenter",!1);k[d](k,"doDragLeave","dragleave",!1);k[d](k,"doDrop","drop",!1)},c=u.DragDropSupport=new JS.Module("DragDropSupport",{include:[u.DragDropObservable],initNode:function(k,d){this.callSuper(k,d);this.disabled||this.setupDragListeners()},setDisabled:function(k){this.disabled!==
k&&(this.getIDE().disabled=k,this.callSuper(k),this.inited&&(k?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){a(this,"attachToDom")},teardownDragListeners:function(){a(this,"detachFromDom")},doDragOver:k=>{},doDragEnter:k=>{},doDragLeave:k=>{},doDrop:function(k){this.handleFiles(k.value.dataTransfer.files,k)},handleFiles:function(k,d){if(void 0!==k){let g=k.length;for(;g;){const f=this.filterFiles(k[--g]);f&&this.handleDroppedFile(f,d)}}else w("No File API")},
filterFiles:k=>k,handleDroppedFile:(k,d)=>{}}),h=u.Uploader=new x("Uploader",u.View,{include:[c,u.Disableable,u.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(k,d)=>{if(void 0!==FileReader){const g=new FileReader;g.onload=d;g.readAsDataURL(k)}},isSameFile:(k,d)=>null!=k&&null!=d&&k.name===d.name&&k.type===d.type&&k.size===d.size,createFile:k=>{const d=(new u.URI(k)).file;return{name:d,serverPath:k,size:-1,type:l[u.getExtension(d)]}}},initNode:function(k,d){const g=this;g.files=
[];d.requestFileParam??(d.requestFileParam="file");d.maxFiles??(d.maxFiles=-1);g.callSuper(k,d);g.fileInput=new u.NativeInputWrapper(g,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:g.disabled,overflow:"hidden"},[u.SizeToParent,{initNode:function(f,b){this.inputType="file";this.callSuper(f,b);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<g.maxFiles},_hndlInput:function(f){g.handleFiles(this.getIDE().files,f)}}])},setValue:function(k){this.clearFiles();
if(k){Array.isArray(k)||(k=[k]);for(const d of k)this.addFile(h.createFile(d))}return this.callSuper?this.callSuper(k):k},getValue:function(){return this.value},setDisabled:function(k){this.callSuper(k);this.fileInput?.setDisabled(k)},setMaxFiles:function(k){this.maxFiles!==k&&(this.maxFiles=k,this.inited&&this.fireEvent("maxFiles",k),this.fileInput&&(this.fileInput.getIDE().multiple=1<k))},setUploadUrl:function(k){this.set("uploadUrl",k,!0)},setRequestFileParam:function(k){this.set("requestFileParam",
k,!0)},bringSubviewToFront:function(k){k===this.fileInput?this.callSuper(k):this.sendSubviewBehind(k,this.fileInput)},subviewAdded:function(k){this.callSuper(k);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(k,d){this.addFile(k)},filterFiles:function(k){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:k},uploadFiles:function(k,d){k??=this.uploadUrl;const g=this.files;let f=g.length;for(;f;)this.uploadFile(g[--f],k,d)},makeFetchOptionsForUpload:k=>
({method:"POST",body:k}),uploadFile:function(k,d,g){const f=this,b=new FormData;b.append(g??f.requestFileParam,k,k.name);u.doFetch(d??f.uploadUrl,f.makeFetchOptionsForUpload(b),!1,q=>{f.handleUploadSuccess(k,q)},q=>{f.handleUploadFailure(k,q)})},handleUploadSuccess:function(k,d){k[h.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(k,d);this.updateValueFromFiles()},handleUploadFailure:(k,d)=>{w("Upload failure:"+d.status+":"+d.message)},parseServerPathFromResponse:(k,d)=>null,addFile:function(k){this.files.push(k);
this.updateValueFromFiles();this.fireEvent("addFile",k)},removeFile:function(k){const d=this.files;let g=d.length;for(;g;)if(h.isSameFile(d[--g],k)){d.splice(g,1);this.updateValueFromFiles();this.fireEvent("removeFile",k);break}},updateValueFromFiles:function(){const k=[];var d=this.files;let g=d.length;for(;g;){const f=d[--g][h.FILE_ATTR_SERVER_PATH];f&&k.push(f)}d=k.length;this.value=1===d?k[0]:0===d?void 0:k;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const k=this.files;let d=k.length;for(;d;)this.removeFile(k[--d])}}),e=u.ImageUploader=new x("ImageUploader",h,{extend:{isImageFile:k=>/image/i.test(k.type)},initNode:function(k,d){d.maxFiles=1;this.callSuper(k,d)},setWidth:function(k){this.callSuper(k);this.inited&&this.updateImageSize()},setHeight:function(k){this.callSuper(k);this.inited&&this.updateImageSize()},filterFiles:function(k){if(e.isImageFile(k)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(k)}},addFile:function(k){const d=this,g=e.isImageFile(k);d.callSuper(k);const f=d.image=new u.Image(d,{useNaturalSize:!1,align:"center",valign:"middle"});f.file=k;const b=q=>{const m=new Image;m.onload=()=>{k.width=m.width;k.height=m.height;f&&!f.destroyed&&d.updateImage(k,f,m.src)};m.src=q};g?-1===k.size?b(k.serverPath):void 0!==FileReader&&e.isImageFile(k)&&h.readFile(k,q=>{b(q.target.result)}):-1===k.size?d.updateImage(k,f,k.serverPath):void 0!==FileReader&&h.readFile(k,q=>
{d.updateImage(k,f,q.target.result)})},scaleToFit:(k,d,g,f)=>g/f>k/d?[k,f*k/g]:[g*d/f,d],removeFile:function(k){this.callSuper(k);const d=this.getSubviews();let g=d.length;for(;g;){const f=d[--g];if(h.isSameFile(f.file,k)){f.destroy();break}}},handleDroppedFile:function(k,d){this.callSuper(k,d);this.uploadFile(k,this.uploadUrl)},updateImage:function(k,d,g){this.nativeWidth=k.width;this.nativeHeight=k.height;this.updateImageSize();d.setImageUrl(g)},updateImageSize:function(){const k=this.image;if(k&&
!k.destroyed){var d=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const g=t(d[0]);d=t(d[1]);k.setImageSize(g+"px "+d+"px");k.setWidth(g);k.setHeight(d)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(u=>{const x=(w,t,l,a)=>{l=l.bind(w);"y"!==w.axis&&(l(t,a,"x"),l(t,a,"boundsWidth"));"x"!==w.axis&&(l(t,a,"y"),l(t,a,"boundsHeight"));l(t,a,"visible")};u.SizeToChildren=new JS.Class("SizeToChildren",u.Layout,{initNode:function(w,t){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,t)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const t=this.parent;if(!t.isBeingDestroyed){const l=this.subviews;var w=l.length;const a=this.axis,c=Math.max;let h,e;if("y"!==a){h=w;for(e=0;h;){const k=l[--h];k.visible&&(e=c(e,k.x+(0<k.boundsWidth?k.boundsWidth:0)))}t.setWidth(e+
this.paddingX)}if("x"!==a){h=w;for(e=0;h;)w=l[--h],w.visible&&(e=c(e,w.y+(0<w.boundsHeight?w.boundsHeight:0)));t.setHeight(e+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){x(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){x(this,w,this.detachFrom,"update")}})})(myt);
(u=>{let x=0;const w=JS.Class,{View:t,SizeToParent:l,RootView:a}=u,c=u.Dimmer=new w("Dimmer",t,{include:[l],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(e,k){this.restoreFocus=!0;k.focusable=k.focusCage=!0;k.percentOfParentWidth??(k.percentOfParentWidth=100);k.percentOfParentHeight??(k.percentOfParentHeight=100);k.visible??(k.visible=!1);k.ignoreLayout??(k.ignoreLayout=!0);this.callSuper(e,k);this.overlay=new t(this,{ignorePlacement:!0,opacity:c.OPACITY,bgColor:c.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[l]);for(const d of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",d);a.setupCaptureDrop(this)},destroy:function(){a.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(e){this.restoreFocus=e},eatMouseEvent:e=>!0,show:function(){const e=u.global.focus;this.prevFocus=e.focusedView??e.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(e){this.visible&&
(this.setVisible(!1),!e&&this.restoreFocus&&this.prevFocus?.focus())}}),h=u.ModalPanel=new w("ModalPanel",c,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(e,k){const d={name:"content",ignorePlacement:!0},g={...d,align:"center",valign:"middle"};this.defaultPlacement="content";k.sizingStrategy??(k.sizingStrategy="children");k.marginTop??(k.marginTop=h.MARGIN_TOP);k.marginLeft??
(k.marginLeft=h.MARGIN_LEFT);k.marginBottom??(k.marginBottom=h.MARGIN_BOTTOM);k.marginRight??(k.marginRight=h.MARGIN_RIGHT);k.paddingX??(k.paddingX=h.PADDING_X);k.paddingY??(k.paddingY=h.PADDING_Y);this.callSuper(e,k);switch(this.sizingStrategy){case "children":new u.SizeToChildren(new t(this,g),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new t(this,{...d,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[l]);break;case "basic":new t(this,g);break;default:new t(this,d)}},setSizingStrategy:function(e){this.sizingStrategy=e},setMarginTop:function(e){this.marginTop=e},setMarginLeft:function(e){this.marginLeft=e},setMarginBottom:function(e){this.marginBottom=e},setMarginRight:function(e){this.marginRight=e},setPaddingX:function(e){this.paddingX=e},setPaddingY:function(e){this.paddingY=e},
show:function(){this.callSuper();x++},hide:function(e){this.callSuper(e);x=Math.max(0,x-1)}})})(myt);
(u=>{const x=t=>{t[t.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=t=>{const l=t.size,a=t.getIDS();t.setWidth(l);t.setHeight(l);a.width=a.height=l-2*t.borderWidth+"px"};u.Spinner=new JS.Class("Spinner",u.View,{initNode:function(t,l){this.lateAttrs=["spinColor"];l.visible??(l.visible=!1);l.borderWidth??(l.borderWidth=5);l.borderColor??(l.borderColor="#fff");l.borderStyle??(l.borderStyle="solid");l.spinColor??(l.spinColor="#000");this.callSuper(t,l);this.getIDS().borderRadius="50%";w(this);
x(this)},setSize:function(t){this.size!==t&&(this.size=t,this.inited&&w(this))},setSpinColor:function(t){this.spinColor!==t&&(this.getIDS().borderTopColor=this.spinColor=t,this.inited&&this.fireEvent("spinColor",t))},setBorderWidth:function(t){this.borderWidth!==t&&(this.callSuper(t),this.inited&&w(this))},setVisible:function(t){this.visible!==t&&(this.callSuper(t),this.inited&&x(this))}})})(myt);
(u=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=a=>{if(Array.isArray(a)){let c=a.length;if(0<c){a.unshift("fa");c++;a[1].startsWith("fa-")||(a[1]="fa-"+a[1]);3<=c&&(a[2]=x[a[2]]??"");if(3<c)for(let h=3;c>h;h++)a[h].startsWith("fa-")||(a[h]="fa-"+a[h]);return'<i class="'+a.join(" ")+'"></i>'}}u.dumpStack("Error making tag");console.error(a);return""},t=a=>{let c=a.properties;c=c?"string"===typeof c?c.split(" "):c.slice():[];c.unshift(a.icon,a.size);a.setHtml(w(c))},l=a=>{for(const c of["Free 400",
"Free 900","Brands 400"])u.registerForFontNotification(a,"Font Awesome 5 "+c)};u.FontAwesome=new JS.Class("FontAwesome",u.Markup,{extend:{makeTag:w,registerForNotification:l},initNode:function(a,c){this.size=0;this.icon="";this.callSuper(a,c);t(this);l(this)},setIcon:function(a){const c=this.icon;this.set("icon",a,!0);this.inited&&c!==a&&t(this)},setSize:function(a){const c=this.size;this.set("size",a,!0);this.inited&&c!==a&&t(this)},setProperties:function(a){this.properties=a;this.fireEvent("properties",
a);this.inited&&t(this)}});u.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(u=>{let x,w,t,l,a=0,c=0,h=0,e=255,k=[],d,g,f,b,q,m,p,r,z,E,I,J,A,B,v,n,y,D,F,K,L,P,R,S,U,O;const ba=JS.Class,{View:T,Text:ka,ModalPanel:ca,SizeToChildren:ua,SpacedLayout:Aa,WrappingLayout:Ba,SelectionManager:Ca,Color:pa,LocalStorage:Da,Button:va,TextButton:ma,Draggable:Ea,FontAwesome:{makeTag:na}}=u,{min:ha,max:ia}=Math,la=[1,"solid","#333"],Fa=[1,"solid","#999"],wa=[1,"solid","#fff"],Ka=new ba("DialogButton",ma,{initNode:function(C,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??
(G.paddingLeft=10);G.paddingRight??(G.paddingRight=10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(C,G)}}),La=na(["check"]),Ha=C=>{for(let G of C)7===G?.length&&(G+="ff"),Ga[G]=!0},Ga={},Ma=new ba("Swatch",T,{include:[va],initNode:function(C,G){const H=G.width=G.height=16;G.border=Fa;G.domClass="mytCheckerboardPattern";const M=G.bgColor;this.callSuper(C,G);this.colorView=new T(this,{width:H,
height:H,bgColor:M});M===l&&(C=pa.makeColorFromHexString(l),new ka(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView?.setBgColor(C);this.setTooltip(C)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(la)},drawReadyState:function(){this.setBorder(Fa)}}),Na=u.ColorPicker=new ba("ColorPicker",T,{initNode:function(C,G){x=this;x._isReady=!1;let H=G.color??"transparent";delete G.color;
t=G.alphaChannel??!1;delete G.alphaChannel;d=G.palette??[];Ha(d);delete G.palette;w="transparent"===H;x.callSuper(C,G);g=new T(x,{width:160,height:170});new Ba(g,{spacing:4,lineSpacing:4});f=new T(x,{x:170,width:139,height:139,border:la},[Ea,{requestDragPosition:function(M,N){f.callSuper(f.x,f.y);const Q=this.getPagePosition();c=parseFloat(ia(0,ha(1,(M+this.dragInitX-Q.x)/this.width)));h=parseFloat(1-ia(0,ha(1,(N+this.dragInitY-Q.y)/this.height)));w=!1;x.updateUI()}}]);C=new T(f,{width:139,height:139});
G=new T(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";b=new T(G,{width:6,height:6,bgColor:"#000",border:wa,roundedCorners:4});q=new T(x,{x:315,y:30,width:24,height:109,border:la},[Ea,{requestDragPosition:function(M,N){this.callSuper(q.x,q.y);a=parseFloat(ia(0,ha(1,(N+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;x.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";m=new T(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new T(x,{x:315,width:24,height:24,border:la,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[va,{doActivated:()=>{x.setColor("transparent")}}]);C=146;t&&(z=new u.LabelSlider(x,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(M,N){N=M.value;if(null==N||isNaN(N))N=
0;M.value=u.formatAsPercentage(N/255,0);this.callSuper(M,!0);e=N;x._isReady&&(w=!1,x.updateUI())}}]),C+=23);p=new u.InputText(x,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:la,maxLength:11,fontFamily:"monospace"});x.attachToDom(p,"_submitInput","blur");x.attachToDom(p,"_handleKeyDown","keydown");p.getIDS().paddingLeft="6px";C=new T(x,{x:170,y:C,width:60,height:23,border:la,domClass:"mytCheckerboardPattern"});new T(C,{width:30,height:23,focusIndicator:!1,bgColor:H},[va,{doActivated:()=>
{x.setColor(H)}}]);r=new T(C,{x:30,width:30,height:23});if(C=Da.getItem("myt.default"))k=C.split(";"),Ha(k);x.setColor(H);x._isReady=!0},_handleKeyDown:C=>{u.KeyObservable.isEnterKeyEvent(C)&&x._submitInput()},_submitInput:()=>{x.setColor(p.value)},addToPalette:C=>{C&&"transparent"!==C&&!Ga[C]&&(k.unshift(C),k.length=ha(k.length,56),Da.setItem("myt.default",k.join(";")))},setColor:C=>{const G=C&&"transparent"!==C;if(t){let H="ff";G&&7<C.length&&(H=C.slice(7,9),C=C.slice(0,7));z.setValue(parseInt(H,
16))}else G&&7<C.length&&(C=C.slice(0,7));G?(C=pa.makeColorFromHexString(C).getHSV(),a=C.h/360,c=C.s,h=C.v,w=!1):w=!0;x.updateUI()},getColor:()=>{if(w)return"transparent";let C="";t&&(C=e.toString(16),2>C.length&&(C="0"+C));return pa.makeColorFromHSV(360*a,100*c,100*h).getHtmlHexString()+C},updateUI:()=>{const C=!w;m.setVisible(C);b.setVisible(C);C&&(b.setX(ia(0,ha(1,c)*(f.width+2))-5),b.setY(ia(0,ha(1,1-h)*(f.height+2))-5),m.setY(a*(q.height-2)-1));f.setBgColor(pa.makeColorFromHSV(360*a,100,100).getHtmlHexString());
l=x.getColor();p.setValue(l);r.setBgColor(l);x.redrawPalette()},redrawPalette:u.debounce(()=>{var C=g.getSubviews();let G=C.length;for(;G;)C[--G].destroy();C=new Set;d.push(...k);for(let H of d)if(t||7===H.length)7===H.length&&(H+="ff"),C.has(H)||(new Ma(g,{bgColor:H}),C.add(H))},50)}),xa=C=>{C=C.split(":");return[ia(0,ha(23,parseInt(C[0]))),ia(0,ha(60,parseInt(C[1])))]},Ia=C=>{C.deselectAll();C=C.getSubviews();let G=C.length;for(;G;)C[--G].destroy()},Ja=new ba("SelectableBtn",ma,{include:[u.Selectable],
setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ba("TimeBtn",Ja,{initNode:function(C,G){G.width=A?175:49;this.callSuper(C,G)},doActivated:function(){this.callSuper();const C=this.text,G=xa(C);O.selectById(C);L.setHours(G[0]);L.setMinutes(G[1])}}),Pa=new ba("DayBtn",Ja,{initNode:function(C,G){G.width=23;G.border=wa;this.callSuper(C,G)},setData:function(C){this.data=
C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const C=new Date(this.data);C.setHours(L.getHours());C.setMinutes(L.getMinutes());
oa(C)}}),oa=C=>{C.setSeconds(0);C.setMilliseconds(0);var G=6>=v.length,H;if(G)for(H=7;H--&&!v.includes(C.getDay());)C.setDate(C.getDate()+1);L=C;const M=O.getODE().scrollTop;var N=new Date,Q=N.getFullYear();H=N.getMonth();var W=N.getDate();N.getHours();N.getMinutes();const V=C.getFullYear(),X=C.getMonth(),qa=C.getDate();var da=C.getTime();N=C.getHours();C=C.getMinutes();const ea=(new Date(V,X,1)).getDay()-B,ra=(new Date(V,X+1,0)).getDate(),ya=(new Date(V,X,0)).getDate(),sa=new Date(V,X,0),ta=new Date(V,
X+2,0),Qa=Q==V&&H==X;if(!A){Ia(U);H=new Date(da);const ja=7+B;Q=I.days;R.setText(V+" "+I.sep+" "+I.months[X]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);P.setVisible(null==n||n<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(X+1);S.setVisible(null==y||y>H.getTime());for(H=0;7>H;H++)new ka(U,{width:23,height:20,textAlign:"center",text:Q[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>ea&&(H=-7,fa=35);Q=new Date(da);Q.setHours(0);Q.setMinutes(0);for(Q.setSeconds(0);H<
fa;H++){var Y=H+1-ea;const za=(H+ja)%7,Z=new Pa(U);ea>H?(Z.setText(ya+Y),Z.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(ya+Y)),Z.setIsAnotherMonth(!0),Q.setDate(ya+Y),Q.setMonth(sa.getMonth()),Q.setYear(sa.getFullYear())):H<ea+ra?(Z.setText(Y),Z.setData(V+"/"+(X+1)+"/"+Y),Q.setDate(Y),Q.setMonth(X),Q.setYear(V)):(Z.setText(Y-ra),Z.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(Y-ra)),Z.setIsAnotherMonth(!0),Q.setDate(Y-ra),Q.setMonth(ta.getMonth()),Q.setYear(ta.getFullYear()));G&&!v.includes(za)?
Z.setDisabled(!0):(0===za?Z.setIsSunday(!0):6===za&&Z.setIsSaturday(!0),Y===qa&&(U.select(Z),Z.focus()),Qa&&Y===W&&Z.setIsToday(!0),Y=new Date(Q.getTime()),Y.setHours(23),Y.setMinutes(59),Y.setSeconds(59),(null!=n&&n>Y.getTime()||null!=y&&y<Q.getTime())&&Z.setDisabled(!0));Z.updateUI()}}if(!J){G=60*F[0]+F[1];Ia(O);let [ja,fa]=D;for(Q=new Date(da);60*ja+fa<G;)W=new Oa(O,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===N&&fa===C&&O.select(W),Q.setHours(ja),Q.setMinutes(fa),da=Q.getTime(),(null!=
n&&n>da||null!=y&&y<da)&&W.setDisabled(!0),fa+=K,60<=fa&&(fa-=60,ja++);O.scrollYTo(M)}},Ra=u.DatePicker=new ba("DatePicker",T,{initNode:function(C,G){E=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;E.callSuper(C,G);I=H.locales[H.locale??"en"];J=H.dateOnly;A=H.timeOnly;B=H.firstDayOfWeek;K=ia(5,ha(30,H.minuteInterval));v=
H.allowedDays;Array.isArray(v)&&0!==v.length||(v=[0,1,2,3,4,5,6]);n=Date.parse(H.minDate);n=isNaN(n)?null:n;y=Date.parse(H.maxDate);y=isNaN(y)?null:y;D=xa(H.minTime);F=xa(H.maxTime);C=new T(E,{visible:!A});H.showTodayButton&&new ma(C,{width:24,text:na(["home"]),tooltip:I.today},[{doActivated:()=>{oa(new Date)}}]);P=new ma(C,{width:24,x:28,text:na(["chevron-left"]),tooltip:I.prevMonth},[{doActivated:()=>{const M=(new Date(L.getFullYear(),L.getMonth(),0)).getDate();M<L.getDate()&&L.setDate(M);L.setMonth(L.getMonth()-
1);oa(L);P.focus()}}]);R=new ka(C,{width:100,x:52,textAlign:"center"});S=new ma(C,{width:24,x:152,text:na(["chevron-right"]),tooltip:I.nextMonth},[{doActivated:()=>{var M=(new Date(L.getFullYear(),L.getMonth()+1,0)).getDate();M<L.getDate()&&L.setDate(M);M=(new Date(L.getFullYear(),L.getMonth()+2,0)).getDate();M<L.getDate()&&L.setDate(M);L.setMonth(L.getMonth()+1);oa(L);S.focus()}}]);U=new T(E,{y:25,width:175,height:175,visible:!A,maxSelected:1,itemSelectionId:"data"},[Ca]);new Ba(U,{spacing:2,lineInset:2,
lineSpacing:3});O=new T(E,{x:A?0:195,y:A?0:25,width:(A?175:49)+u.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!J,maxSelected:1,itemSelectionId:"text"},[Ca]);new Aa(O,{axis:"y",inset:1,spacing:3});E.setWidth(O.visible?O.x+O.width:U.width);oa(H.current??new Date)},getPickedDate:()=>L}),aa=u.Dialog=new ba("Dialog",ca,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:wa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},
NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,G){G.buttonClass??(G.buttonClass=aa.BUTTON_CLASS);this.callSuper(C,G);C=this.content;C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER);C.setFocusCage(!0);this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=C},makeButton:function(C,G){const H=this;return new H.buttonClass(C,
G,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(C){return C.closeBtn=this.makeButton(C,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:na(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const C=this.content,G=C.sizeToChildren,H=C.getSubviews();let M=H.length;for(;M;){const N=H[--M];"closeBtn"!==N.name&&N.destroy()}C.setVisible(!0);this.overlay.setBgColor(u.Dimmer.COLOR);this.setCallbackFunction();G.setPaddingY(ca.PADDING_Y);G.setPaddingX(ca.PADDING_X);C.setRoundedCorners(aa.RADIUS);C.setBgColor(aa.BGCOLOR);C.setBoxShadow(aa.SHADOW);C.setBorder(aa.BORDER)},doCallback:function(C){const G=this.callbackFunction;G&&G.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();
this.content.setVisible(!1);C?.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,G,H){const M=this.content,N=M.closeBtn;H={...aa.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(G);C=M.msg=new ka(M,{text:C,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ca.PADDING_X:H.msgX,y:null==H.msgY?ca.PADDING_Y:H.msgY,width:H.width});H.titleText&&(this.setupTitle(M,H.titleText),C.setY(C.y+24));this.show();!1===H.showClose?
N.setVisible(!1):(N.setVisible(!0),N.focus())},showSimple:function(C,G,H,M){H=H??{};const N=this.content,Q=N.closeBtn,W=H.maxContainerHeight;this.destroyContent();H.bgColor&&N.setBgColor(H.bgColor);H.roundedCorners&&N.setRoundedCorners(H.roundedCorners);H.boxShadow&&N.setBoxShadow(H.boxShadow);H.border&&N.setBorder(H.border);N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=N.contentContainer=new T(N,{x:1,y:25,overflow:"auto"},[{setHeight:function(V){V>W&&(V=W);this.callSuper(V)}}]);C.call(this,
G);new ua(G,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();H.titleText&&(this.setupTitle(N,H.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();M?.(this)},showConfirm:function(C,G,H){H={...aa.CONFIRM_DEFAULTS,...H};this.showMessage(C,G,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(C,G,H,M){H={...aa.CONFIRM_DEFAULTS,...H};const N=this.content,Q=N.closeBtn,W=H.maxContainerHeight;this.destroyContent();N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);
G=N.contentContainer=new T(N,{x:1,y:25,overflow:"auto"},[{setHeight:function(V){this.callSuper(V>W?W:V)}}]);C.call(this,G);new ua(G,{axis:"both"});this.show();Q.setVisible(!0);Q.focus();this.setupTitle(N,H.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,H);G.initialFocus?.focus();M?.(this)},showSpinner:function(C,G){const H=this.content;G={...aa.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const M=this.spinner=new u.Spinner(H,{align:"center",visible:!0,borderColor:"#ccc",size:50,
y:null==G.msgY?ca.PADDING_Y:G.msgY});C&&new ka(H,{text:C,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ca.PADDING_X:G.msgX,y:M.y+M.size+ca.PADDING_Y,width:G.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,G){const H=this,M=H.content,N=M.closeBtn;G={...aa.COLOR_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,Q);break;case "confirmBtn":const W=x.getColor();
x.addToPalette(W);C.call(H,Q,W)}x.destroy()});x=new Na(M,{x:ca.PADDING_X,y:ca.PADDING_Y+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();N.setVisible(!0);N.focus();H.setupFooterButtons(x,G);H.setupTitle(M,G.titleText)},showDatePicker:function(C,G){const H=this,M=H.content,N=M.closeBtn;G={...aa.DATE_PICKER_DEFAULTS,
...G};H.destroyContent();H.setCallbackFunction(Q=>{switch(Q){case "closeBtn":case "cancelBtn":C.call(H,Q);break;case "confirmBtn":C.call(H,Q,E.getPickedDate())}E.destroy()});E=new Ra(M,{x:ca.PADDING_X,y:ca.PADDING_Y+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});H.show();N.setVisible(!0);N.focus();H.setupFooterButtons(E,G);H.setupTitle(M,G.timeOnly?G.timeOnlyTitleText:G.titleText)},setupTitle:function(C,
G){const H=aa.RADIUS;(this.header=new T(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();C.title=new ka(C,{x:H,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(C,G){const H=this.content;var M=ca.PADDING_Y,N=M/2;C=H.btnContainer=new T(H,{y:C.y+C.height+M,align:"center"});const Q=["active","hover","ready","text"];M=G.cancelAttrs??{};var W;(W=M).name??(W.name="cancelBtn");let V;(V=M).text??(V.text=G.cancelTxt);for(let ea of Q)ea+=
"Color",null!=G[ea]&&(M[ea]=G[ea]);W=this.makeButton(C,M);M=G.confirmAttrs??{};var X;(X=M).name??(X.name="confirmBtn");let qa;(qa=M).text??(qa.text=G.confirmTxt);for(var da of Q)da+="Color",X=da+"Confirm",null!=G[X]&&(M[da]=G[X]);this.makeButton(C,M);if(da=G.button)for(const ea of da)this.makeButton(C,ea);new ua(C,{axis:"y"});new Aa(C,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(N);N=C.y-N;(new T(H,{ignoreLayout:!0,y:N,width:H.width,height:H.height-N,bgColor:"#eee"})).sendToBack();
!1===G.showClose&&W.focus()}})})(myt);
(u=>{const x=JS.Class,w=u.dumpStack,t={},l=(g,f)=>{if(g){const b=g.id;g.id?f(b):w("No ID")}else w("No validator")},a=g=>{l(g,f=>{t[f]=g})},c=u.Validator=new x("Validator",{initialize:function(g){this.id=g},isValid:(g,f,b)=>!0,isFormValid:function(g,f,b){f??={};f.form=g;return this.isValid(g.getValue(),f,b)}}),h=u.RequiredFieldValidator=new x("RequiredFieldValidator",c,{isValid:(g,f,b)=>null==g||""===g||"string"===typeof g&&""===g.trim()?(b?.push("This value is required."),!1):!0}),e=u.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",c,{isValid:(g,f,b)=>{f=f.form.getRollbackValue();return g&&f&&g.toLowerCase()===f.toLowerCase()?(b?.push("Value must differ by more than just case."),!1):!0}}),k=u.URLValidator=new x("URLValidator",c,{initialize:function(g,f){this.callSuper(g);this.originalRawQuery=f},isValid:function(g,f,b){return(new u.URI(g)).toString(this.originalRawQuery)!==g?(b?.push("Invalid URL."),!1):!0}}),d=u.JSONValidator=new x("JSONValidator",c,{isValid:(g,f,b)=>{try{return JSON.parse(g),
!0}catch(q){return b?.push(q),!1}}});u.EqualFieldsValidator=new x("EqualFieldsValidator",c,{initialize:function(g,f,b){this.callSuper(g);this.fieldA=f;this.fieldB=b},isValid:function(g,f,b){if(g&&this.fieldA.getValue()===this.fieldB.getValue())return!0;b?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});u.LengthValidator=new x("LengthValidator",c,{initialize:function(g,f,b){this.callSuper(g);this.min=f;this.max=b},isValid:function(g,f,b){g=g?g.length:
0;f=this.min;const q=this.max;return void 0!==f&&f>g?(b?.push("The value must not be less than "+f+" characters long."),!1):void 0!==q&&q<g?(b?.push("The value must not be greater than "+q+" characters long."),!1):!0}});u.NumericRangeValidator=new x("NumericRangeValidator",c,{initialize:function(g,f,b){this.callSuper(g);this.min=f;this.max=b},isValid:function(g,f,b){if(""===g)return!0;g=Number(g);f=this.min;const q=this.max;return isNaN(g)?(b?.push("Value is not a number."),!1):void 0!==f&&f>g?(b?.push("Value must not be less than "+
f+"."),!1):void 0!==q&&q<g?(b?.push("Value must not be greater than "+q+"."),!1):!0}});u.CompoundValidator=new x("CompoundValidator",c,{initialize:function(g,...f){this.callSuper(g);for(g=f.length;g;){let b=f[--g];"string"===typeof b&&((f[g]=b=t[b])||f.splice(g,1))}this.__v=f},addValidator:function(g){"string"===typeof g&&(g=t[g]);g&&this.__v.push(g)},isValid:function(g,f,b){const q=this.__v,m=q.length;let p=!0,r=0;for(;m>r;)p=q[r++].isValid(g,f,b)&&p;return p}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){a(new h("required"));a(new e("equalsIgnoreCase"));a(new k("url"));a(new d("json"));u.global.register("validators",this)},getValidator:g=>t[g],register:a,unregister:g=>{l(g,f=>{t[f]&&delete t[f]})}})})(myt);
(u=>{const x=JS.Class,{min:w,max:t,round:l}=Math,a=u.View,c=new x("SliderThumb",u.SimpleButton,{include:[u.Draggable,u.ArrowKeyActivation],initNode:function(e,k){const d=k.width=e.thumbWidth,g=k.height=e.thumbHeight;k.roundedCorners=w(g,d)/2;k.repeatKeyDown=!0;k.activationKeys=u.global.keys.ARROW_KEYS;k.activeColor="#bbb";k.readyColor="#ccc";k.hoverColor="#ddd";k.boxShadow=[0,0,4,"#666"];this.callSuper(e,k);this["x"===e.axis?"setY":"setX"](e.thumbOffset);this.syncTo(e,"setDisabled","disabled");e._syncThumbToValue(this,
e.getValue())},setDisabled:function(e){this.callSuper(this.valueFromEvent(e))},setFocused:function(e){this.callSuper(e);e&&this.makeHighestZIndex()},setX:function(e){this.x!==e&&(this.callSuper(e),e=this.parent,"x"===e.axis&&e.syncValueToThumb(this))},setY:function(e){this.y!==e&&(this.callSuper(e),e=this.parent,"y"===e.axis&&e.syncValueToThumb(this))},requestDragPosition:function(e,k){if(!this.disabled){var d=this.parent;const g=d.getMinPixelValueForThumb(this),f=d.getMaxPixelValueForThumb(this);
"x"===d.axis?(d=this.width/2,k="setX"):(d=this.height/2,e=k,k="setY");this[k](w(t(e,g-d),f-d))}},doKeyArrowLeftOrUp:function(e,k){e?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(e,k){e?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),h=u.BaseSlider=new x("BaseSlider",a,{include:[u.Disableable],initNode:function(e,k){k.axis??(k.axis="x");"x"===k.axis?(k.width??(k.width=100),k.height??(k.height=18)):(k.width??(k.width=
18),k.height??(k.height=100));k.bgColor??(k.bgColor="#999");k.roundedCorners??(k.roundedCorners=9);k.trackInset??(k.trackInset=9);k.trackOutset??(k.trackOutset=9);k.thumbWidth??(k.thumbWidth=16);k.thumbHeight??(k.thumbHeight=16);k.thumbOffset??(k.thumbOffset=1);k.nudgeAmount??(k.nudgeAmount=1);this.callSuper(e,k)},setAxis:function(e){this.axis=e},setTrackInset:function(e){this.trackInset=e},setTrackOutset:function(e){this.trackOutset=e},setThumbWidth:function(e){this.thumbWidth=e},setThumbHeight:function(e){this.thumbHeight=
e},setThumbOffset:function(e){this.thumbOffset=e},setNudgeAmount:function(e){this.nudgeAmount=e},convertValueToPixels:function(e){const k=this.minValue,d=this.trackInset;return d+(("x"===this.axis?this.width:this.height)-d-this.trackOutset)/(this.maxValue-k)*(e-k)},convertPixelsToValue:function(e){const k=this.minValue,d=this.trackInset;return(this.maxValue-k)/(("x"===this.axis?this.width:this.height)-d-this.trackOutset)*(e-d)+k},nudgeValueLeft:function(e){this._nudge(e,!1)},nudgeValueUp:function(e){this._nudge(e,
!1)},nudgeValueRight:function(e){this._nudge(e,!0)},nudgeValueDown:function(e){this._nudge(e,!0)},_nudge:(e,k)=>{},_syncThumbToValue:function(e,k){k=this.convertValueToPixels(k);"x"===this.axis?e.setX(k-e.width/2):e.setY(k-e.height/2)},syncValueToThumb:function(e){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(e,this.convertPixelsToValue("x"===this.axis?e.x+e.width/2:e.y+e.height/2)),this.__lockSync=!1)},_syncValueToThumb:(e,k)=>{},getMinPixelValueForThumb:function(e){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(e){return this.convertValueToPixels(this.maxValue)}});u.RangeSlider=new x("RangeSlider",h,{include:[u.BoundedRangeComponent],initNode:function(e,k){this.callSuper(e,k);e=this.rangeFill=new a(this,{bgColor:"#666"});"x"===this.axis?(e.setY(this.thumbOffset),e.setHeight(this.thumbHeight),e.setRoundedCorners(this.thumbHeight/2)):(e.setX(this.thumbOffset),e.setWidth(this.thumbWidth),e.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new c(this);this.thumbUpper=new c(this);
this._syncRangeFillToValue()},setValue:function(e){this.callSuper(e);this.inited&&(this.__lockSync||(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e)),this._syncRangeFillToValue())},setWidth:function(e){const k=this.width;this.callSuper(e);this.inited&&"x"===this.axis&&this.width!==k&&(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e))},setHeight:function(e){const k=this.height;this.callSuper(e);
this.inited&&"y"===this.axis&&this.height!==k&&(e=this.getValue(),this._syncThumbToValue(this.thumbLower,e),this._syncThumbToValue(this.thumbUpper,e))},_syncRangeFillToValue:function(){const e=this.rangeFill;var k=this.getValue();const d=this.convertValueToPixels(k.lower);k=this.convertValueToPixels(k.upper)-d;"x"===this.axis?(e.setX(d),e.setWidth(k)):(e.setY(d),e.setHeight(k))},_syncThumbToValue:function(e,k){this.callSuper(e,"thumbLower"===e.name?k.lower:k.upper)},_syncValueToThumb:function(e,k){let d=
this.getValueCopy();d["thumbLower"===e.name?"lower":"upper"]=k;this.setValue(d);d=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,d);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,d)},_nudge:function(e,k){const d=this.getValueCopy();k=this.nudgeAmount*(k?1:-1);"thumbLower"===e.name?d.lower=w(d.lower+k,d.upper):d.upper=t(d.upper+k,d.lower);this.setValue(d)},getMinPixelValueForThumb:function(e){return this.convertValueToPixels("thumbLower"===e.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(e){return this.convertValueToPixels("thumbLower"===e.name?this.getValue().upper:this.maxValue)}});u.Slider=new x("Slider",h,{include:[u.BoundedValueComponent],initNode:function(e,k){this.callSuper(e,k);this.thumb=new c(this)},setValue:function(e){this.callSuper(e);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(e){const k=this.width;this.callSuper(e);this.inited&&"x"===this.axis&&this.width!==k&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(e){const k=this.height;this.callSuper(e);this.inited&&"y"===this.axis&&this.height!==k&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(e,k){this.setValue(k);this._syncThumbToValue(e,this.getValue())},_nudge:function(e,k){this.setValue(this.getValue()+this.nudgeAmount*(k?1:-1))}});u.LabelSlider=new x("LabelSlider",u.Slider,{initNode:function(e,k){const d=this;k.labelX??(k.labelX=8);k.labelY??(k.labelY=2);k.labelFontSize??(k.labelFontSize=
"12px");k.labelColor??(k.labelColor="#000");k.flipThreshold??(k.flipThreshold=l((k.maxValue-k.minValue)/2)||0);d.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],k);d.callSuper(e,k);const g=d.labelX;d.labelTxt=new u.Text(d,{x:g,y:d.labelY,textColor:d.labelColor,fontSize:d.labelFontSize},[{initNode:function(f,b){this.targetX=g;this.callSuper(f,b)},updateX:function(f){const b=d.getValue()>=d.flipThreshold?g:d.width-this.width-g;this.targetX!==b&&(this.targetX=b,this.stopActiveAnimators("x"),
f?this.setX(b):this.animate({attribute:"x",to:b,duration:250}))}}]);d.syncTo(d,"setText","value")},setWidth:function(e){this.callSuper(e);this.labelTxt?.updateX(!0)},setText:function(e,k){const d=this.labelTxt;d&&(d.setText(e.value),d.updateX(k))}})})(myt);
(u=>{const x=JS.Class,{CODE_ENTER:w,CODE_SPACE:t,ARROW_KEYS:l}=u.global.keys,a=h=>{const e="y"===h.axis?"height":"width";h.constrain("__limitToParent",[h,"limitToParent",h,e,h.parent,e])},c=new x("BaseDivider",u.SimpleButton,{include:[u.BoundedValueComponent,u.Draggable,u.ArrowKeyActivation],initNode:function(h,e){e.activeColor??(e.activeColor="#bbb");e.hoverColor??(e.hoverColor="#ddd");e.readyColor??(e.readyColor="#ccc");e.axis??(e.axis="x");e.minValue??(e.minValue=0);e.value??(e.value=e.minValue);
e.expansionState??(e.expansionState=2);e.focusIndicator??(e.focusIndicator=!1);e.repeatKeyDown??(e.repeatKeyDown=!0);e.activationKeys??(e.activationKeys=[w,t,...l]);"y"===e.axis?(e.height??(e.height=6),e.cursor??(e.cursor="row-resize")):(e.width??(e.width=6),e.cursor??(e.cursor="col-resize"));this.quickSet(["axis"],e);this.__nudgeAcc=1;this.callSuper(h,e);null==e.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&a(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},
setExpansionState:function(h){this.expansionState=h},setRestoreValue:function(h){this.restoreValue=h},setLimitToParent:function(h){this.limitToParent!==h&&(this.limitToParent=h,this.inited&&(this.fireEvent("limitToParent",h),null==h?this.releaseConstraint("__limitToParent"):a(this)))},setAxis:function(h){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=h},setValue:function(h,e){this.callSuper(h);h=this.value;"y"===this.axis?this.setY(h):this.setX(h);e&&this.setRestoreValue(h)},
__limitToParent:function(h){h="y"===this.axis?"height":"width";this.setMaxValue(this.parent[h]-this.limitToParent-this[h])},doActivationKeyDown:function(h,e){this.callSuper(h,e);switch(h){case w:case t:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(h,e){return this.nudge(!1,e)},doKeyArrowRightOrDown:function(h,e){return this.nudge(!0,e)},nudge:function(h,e){this.__nudgeAcc=e?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+(h?1:-1)*this.__nudgeAcc,!0);this.setExpansionState(2);return!0},
doPrimaryAction:function(){const {restoreValue:h,maxValue:e,minValue:k}=this;let d;switch(this.expansionState){case 0:null!=h&&(this.setExpansionState(1),h===k?h!==e&&this.doPrimaryAction():d=h);break;case 1:null!=e&&(this.setExpansionState(3),this.value===e?this.doPrimaryAction():d=e);break;case 2:null!=k&&(this.setExpansionState(0),this.value===k?this.doPrimaryAction():d=k);break;case 3:null!=h&&(this.setExpansionState(2),h===e?this.doPrimaryAction():d=h)}this.animateToValue(d)},animateToValue:function(h,
e=250){null!=h&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:h,duration:e}))},requestDragPosition:function(h,e){this.disabled||(h="y"===this.axis?e:h,e=this.value,h!==e&&(this.setValue(h,!0),this.setExpansionState(e>h?2:1)))}});u.HorizontalDivider=new x("HorizontalDivider",c,{initNode:function(h,e){e.axis="x";this.callSuper(h,e)}});u.VerticalDivider=new x("VerticalDivider",c,{initNode:function(h,e){e.axis="y";this.callSuper(h,e)}})})(myt);
(u=>{let x=0;const {Class:w,Module:t}=JS,{min:l,max:a}=Math,{View:c,SpacedLayout:h,Node:{DEFAULT_PLACEMENT:e}}=u,k=v=>{const n=v.columnHeaders,[y,D]=v.sort??["",""];let F=n.length;for(;F;){const K=n[--F];K.columnId===y?K.sortable&&K.setSortState(D):K.setSortState("none")}v.locked||v.doSort()},d=(v,n,y,D)=>{if(0!==n){const P=0<n,R=[];for(var F=v.length;F;){var K=v[--F];K.resizable&&(y?0<K.flex:0===K.flex)&&R.push({hdr:K,limit:(P?K.maxValue:K.minValue)-K.value,amt:0})}v=R.length;if(0<v){for(F=0;0!==
n;){x>=v&&(F=x=0);K=R[x];var L=K.hdr;K.full?++F:(P?(L=l(y?L.flex:1,n),K.amt+L>K.limit&&(L=K.limit-K.amt,K.full=!0)):(L=a(y?-L.flex:-1,n),K.amt+L<K.limit&&(L=K.limit-K.amt,K.full=!0)),K.amt+=L,n-=L);if(F===v)break;++x}for(const S of R)S.hdr.setValue(S.hdr.value+S.amt);D?.(n)}}},g=v=>(v=v.gridController?v.gridController.getPrevHdr(v):null)?v.maxValue-v.value+g(v):0,f=v=>(v=v.gridController?v.gridController.getNextHdr(v):null)?v.maxValue-v.value+f(v):0,b=v=>(v=v.gridController?v.gridController.getPrevHdr(v):
null)?v.minValue-v.value+b(v):0,q=v=>(v=v.gridController?v.gridController.getNextHdr(v):null)?v.minValue-v.value+q(v):0,m=(v,n)=>{v=v.gridController?v.gridController.getPrevHdr(v):null;var y=0;if(v){y=v.value+n;v.resizable&&v.setValue(y);const D=y-v.value;y=n-D;0>D&&(y+=m(v,D))}return y},p=(v,n)=>{v=v.gridController?v.gridController.getPrevHdr(v):null;var y=0;if(v){y=v.value+n;v.resizable&&v.setValue(y);const D=y-v.value;y=n-D;0<D&&(y+=p(v,D))}return y},r=(v,n)=>{if(v=v.gridController?v.gridController.getNextHdr(v):
null)n=v.value+n,v.resizable&&v.setValue(n),n-=v.value,0>n&&r(v,n)},z=(v,n)=>{if(v=v.gridController?v.gridController.getNextHdr(v):null)n=v.value+n,v.resizable&&v.setValue(n),n-=v.value,0<n&&z(v,n)},E=v=>{let n="";if(v.sortable)switch(v.sortState){case "ascending":n="chevron-up";break;case "descending":n="chevron-down"}v.sortIcon.setIcon(n)},I=v=>{const n=v.textView;n?.setWidth(v.width-v.outset-n.x)},J=u.GridController=new t("GridController",{initNode:function(v,n){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(v,n);this.fitHeadersToWidth();k(this)},setMaxWidth:function(v){this.set("maxWidth",v,!0)},setMinWidth:function(v){this.set("minWidth",v,!0)},setFitToWidth:function(v){this.fitToWidth=v},setSort:function(v){u.areArraysEqual(v,this.sort)||(this.sort=v,this.inited&&(this.fireEvent("sort",v),k(this)))},setLastColumn:function(v){const n=this.lastColumn;n!==v&&(n?.setLast(!1),this.lastColumn=v,v?.setLast(!0))},
setLocked:function(v){this.locked=v;if(this.inited&&!v){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=!0;for(const n of this.columnHeaders)this.notifyHdrXChange(n),this.notifyHdrWidthChange(n),this.notifyHdrVisibilityChange(n);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(v){v=this.valueFromEvent(v);this.gridWidth!==v&&(this.gridWidth=
v,this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(v){const n=this.columnHeaders;v=this.getHdrIndex(v);if(0<v)for(;v;){const y=n[--v];if(y.visible)return y}},getNextHdr:function(v){const n=this.columnHeaders,y=n.length;v=this.getHdrIndex(v)+1;if(0<v&&v<y)for(;y>v;){const D=n[v++];if(D.visible)return D}},hasHdr:function(v){return this.columnHeaders.includes(v)},getHdrIndex:function(v){return this.columnHeaders.indexOf(v)},getHdrById:function(v){const n=this.columnHeaders;let y=
n.length;for(;y;){const D=n[--y];if(D.columnId===v)return D}},getVisibleHdrs:function(){return this.columnHeaders.filter(v=>v.visible)},notifyAddHdr:function(v){this.hasHdr(v)||(this.columnHeaders.push(v),v.visible&&this.setLastColumn(v),this.fixupResizerCursors())},notifyRemoveHdr:function(v){const n=this.getHdrIndex(v);-1<n&&(this.columnHeaders.splice(n,1),v.visible&&v.last&&this.setLastColumn(this.getPrevHdr(v)),this.fixupResizerCursors())},notifyHdrXChange:function(v){if(!this.isLocked())for(const n of this.rows)n.notifyHdrXChange(v)},
notifyHdrWidthChange:function(v){if(!this.isLocked())for(const n of this.rows)n.notifyHdrWidthChange(v)},notifyHdrVisibilityChange:function(v){if((!this.__skipInvisibleHeaders||v.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(v);var n=this.setLastColumn;a:{var y=this.columnHeaders;let D=y.length;for(;D;){const F=y[--D];if(F.visible){y=F;break a}}y=void 0}n.call(this,y);n=v.visible?1:-1;this.setMaxWidth(this.maxWidth+v.maxValue*n);this.setMinWidth(this.minWidth+v.minValue*n);this.fitHeadersToWidth();
this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(v){for(const n of this.rows)n.notifyHdrVisibilityChange(v)},hasRow:function(v){return this.rows.includes(v)},getRowIndex:function(v){return this.rows.indexOf(v)},getRowById:function(v,n=y=>y.model.id===v){return this.rows.find(n)},getPrevRow:function(v){v=this.getRowIndex(v)-1;return this.rows[0>v?this.rows.length-1:v]},getNextRow:function(v){v=this.getRowIndex(v)+1;return this.rows[v<this.rows.length?v:0]},notifyAddRow:function(v,
n){if(!this.hasRow(v)&&(this.rows.push(v),!this.locked)){const y=this.width;for(const D of this.columnHeaders)v.setWidth(y),v.notifyHdrXChange(D),v.notifyHdrWidthChange(D),v.notifyHdrVisibilityChange(D);n||this.doSort()}},notifyRemoveRow:function(v){v=this.getRowIndex(v);-1<v&&this.rows.splice(v,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const v=this.getVisibleHdrs();let n=0;for(const y of v)n=a(n,y.x+y.width);d(v,this.gridWidth-n,!0,y=>{d(v,y,!1,null)})}},fixupResizerCursors:function(){const v=
this.getVisibleHdrs();let n=!0,y=0;v.forEach((L,P)=>{n&&L.isFixed()?L.setResizerCursor("",!0):(n&&(y=P),n=!1,L.restoreResizerCursor())});let D=!0,F=v.length,K=F-1;for(;F>y;){const L=v[--F];D?L.setResizerCursor("",!0):L.restoreResizerCursor();L.isFixed()||(D&&(K=F),D=!1)}y===K&&v[y].setResizerCursor("",!0)}}),A=u.GridColHdr=new t("GridColHdr",{include:[u.BoundedValueComponent],initNode:function(v,n){const y=this,D=n.resizerCursor??"col-resize";delete n.resizerCursor;n.minValue??(n.minValue=16);n.maxValue??
(n.maxValue=1E3);n.value??(n.value=n.minValue);n.resizable??(n.resizable=!0);n.flex??(n.flex=0);n.cellXAdj??(n.cellXAdj=0);n.cellWidthAdj??(n.cellWidthAdj=0);n.sortable??(n.sortable=!0);n.sortState??(n.sortState="none");n.placement??(n.placement=e);y.callSuper(v,n);const F=y.gridController;y.resizer=new c(y,{cursor:D,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[u.SizeToParent,u.Draggable,{requestDragPosition:function(K,L){L=K-this.x;if(F.fitToWidth&&
(0<L?L=l(L,l(-q(y),y.maxValue-y.value+g(y))):0>L&&(L=a(L,a(-f(y),y.minValue-y.value+b(y)))),0===L))return;K=y.value+L;y.resizable&&y.setValue(K);K-=y.value;L=K-L;let P=0;0>K?P=m(y,K):0<K&&(P=p(y,K));this.dragInitX+=P;L-=P;F.fitToWidth&&(0>L?r(y,L):0<L&&z(y,L))}}]);F&&(F.notifyAddHdr(y),F.notifyHdrXChange(y),F.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},destroy:function(v){this.setGridController();this.callSuper(v)},setSortable:function(v){this.set("sortable",
v,!0)},setSortState:function(v){this.set("sortState",v,!0)},setResizable:function(v){this.set("resizable",v,!0)},setCellWidthAdj:function(v){this.cellWidthAdj=v},setCellXAdj:function(v){this.cellXAdj=v},setFlex:function(v){this.flex=v},setColumnId:function(v){this.columnId=v},setResizerCursor:function(v,n){const y=this.resizer,D=y.cursor;v!==D&&(n&&(this.__rrc=D),y.setCursor(v))},restoreResizerCursor:function(){const v=this.__rrc;v&&(this.setResizerCursor(v),this.__rrc=null)},isFixed:function(){return this.minValue===
this.maxValue},setLast:function(v){this.last=v;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(v){const n=this.gridController;n!==v&&(n?.notifyRemoveHdr(this),this.gridController=v,this.inited&&v&&(v.notifyAddHdr(this),v.notifyHdrXChange(this),v.notifyHdrWidthChange(this),v.notifyHdrVisibilityChange(this)))},setValue:function(v){this.callSuper(v);this.inited&&this.setWidth(this.value)},setMinValue:function(v){const n=this.minValue??0,
y=this.gridController;this.callSuper(v);this.inited&&n!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-n)},setMaxValue:function(v){const n=this.maxValue??0,y=this.gridController;v??=1E3;this.callSuper(v);this.inited&&n!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-n)},setWidth:function(v){const n=this.width;this.callSuper(v);this.inited&&n!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(v){const n=this.x;this.callSuper(v);this.inited&&n!==this.x&&this.gridController?.notifyHdrXChange(this)},
setVisible:function(v){const n=this.visible;this.callSuper(v);this.inited&&n!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),B=u.GridRow=new t("GridRow",{initNode:function(v,n){n.placement??(n.placement=e);this.callSuper(v,n);this.gridController?.notifyAddRow(this)},destroy:function(v){this.setGridController();this.callSuper(v)},setGridController:function(v){const n=this.gridController;n!==v&&(n?.notifyRemoveRow(this),this.gridController=v,this.inited&&v?.notifyAddRow(this))},
notifyHdrXChange:function(v){this[v.columnId+"View"]?.setX(v.x+v.cellXAdj)},notifyHdrWidthChange:function(v){this[v.columnId+"View"]?.setWidth(v.width+v.cellWidthAdj)},notifyHdrVisibilityChange:function(v){this[v.columnId+"View"]?.setVisible(v.visible)}});u.Grid=new w("Grid",c,{include:[J],initNode:function(v,n){n.overflow??(n.overflow="autox");n.bgColor??(n.bgColor="#ccc");n.rowSpacing??(n.rowSpacing=1);n.columnSpacing??(n.columnSpacing=1);var y=n.isAutoScrolling;delete n.isAutoScrolling;this.callSuper(v,
n);v=this.header=new c(this,{overflow:"hidden"});v.xLayout=new h(v,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});v.yLayout=new u.SizeToChildren(v,{locked:!0,axis:"y"});n=this.sizeHeightToRows;y=this.content=new c(this,{overflow:n?"hidden":"autoy"},y?[u.AutoScroller]:[]);y.yLayout=new h(y,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:n});this.syncTo(this,"setGridWidth","width");this.syncTo(v,"_updateContentWidth","width");this.constrain("_updateContentHeight",[n?y:this,"height",
v,"height",v,"y"])},setSizeHeightToRows:function(v){this.sizeHeightToRows=v},setRowSpacing:function(v){this.rowSpacing!==v&&(this.rowSpacing=v,this.inited&&this.content.yLayout.setSpacing(v))},setColumnSpacing:function(v){this.columnSpacing!==v&&(this.columnSpacing=v,this.inited&&this.header.xLayout.setSpacing(v))},setLocked:function(v){if(this.inited)for(const n of[this.header.xLayout,this.header.yLayout,this.content.yLayout])v?n.incrementLockedCounter():(n.decrementLockedCounter(),n.update());this.callSuper(v)},
_updateContentWidth:function(v){const n=this.content;v=v.value;n.setWidth(v);for(const y of n.getSubviews())y.setWidth(v)},_updateContentHeight:function(v){var n=this.header;v=this.content;n=n.y+n.height;v.setY(n);this.sizeHeightToRows?this.setHeight(n+v.height):v.setHeight(this.height-n)},determinePlacement:function(v,n){if(v===e){let y;n.isA(B)?y=this.content:n.isA(A)&&(y=this.header);if(y)return n.gridController!==this&&n.setGridController(this),y}return this.callSuper(v,n)},doSort:function(){const [v,
n]=this.sort??["",""],y=this.getSortFunction(v,n);if(y){const D=this.content,F=D.yLayout;this.rows.sort(y);D.sortSubviews(y);F.sortSubviews(y);F.update()}},getSortFunction:(v,n)=>{if(v){const y="ascending"===n?1:-1,D=v+"View";return(F,K)=>{F=F[D].text;K=K[D].text;return F>K?y:K>F?-y:0}}}});u.SimpleGridColHdr=new w("SimpleGridColHdr",u.SimpleTextButton,{include:[A],initNode:function(v,n){const y=this;n.activeColor??(n.activeColor="#999");n.hoverColor??(n.hoverColor="#bbb");n.readyColor??(n.readyColor=
"#aaa");n.inset??(n.inset=2);n.sortIconColor??(n.sortIconColor="#666");const D=n.outset??2;delete n.outset;y.callSuper(v,n);y.sortIcon=new u.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(F,K){this.callSuper(F,K);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();y.setOutset(this.width+D);I(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);I(y);E(y)},setSortIconColor:function(v){this.sortIconColor=v;this.sortIcon?.setTextColor(v)},
setSortable:function(v){this.callSuper(v);this.inited&&(v&&this.setOutset(14),this.setDisabled(!v),E(this))},setSortState:function(v){this.callSuper(v);this.inited&&E(this)},setWidth:function(v){this.callSuper(v);this.inited&&I(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(u=>{const {Class:x,Module:w}=JS,t=Math,l=t.max,{View:a,global:{focus:c,keys:h},getAlphaObjSortFunc:e}=u,k=r=>{const z=r.selectedRow;z&&(z.setSelected(!1),r.set("selectedRow",null,!0))},d=u.InfiniteListRow=new w("InfiniteListRow",{include:[u.Reusable],setInfiniteOwner:function(r){this.infiniteOwner=r},setModel:function(r){this.model=r},setClassKey:function(r){this.classKey=r},notifyRefreshed:()=>{}}),g=u.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[d,u.Selectable]}),f=u.InfiniteList=
new x("InfiniteList",a,{initNode:function(r,z){let E=z.rowClasses;delete z.rowClasses;if("function"===typeof E){const I={};I["default"]=E;E=I}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(r,z);r=this._listView=new a(this);this._scrollAnchorView=new a(r,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(E,r);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(r,z)=>new u.TrackActivesMultiPool(r,z),setOverscrollBehavior:function(r){this.overscrollBehavior=r;this.getIDS().overscrollBehavior=r},setCollectionModel:function(r){this.collectionModel=
r},setModelIDName:function(r){this.modelIDName=r},setRowSpacing:function(r){this.rowSpacing=r;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(r){this.rowHeight=r;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(r){if(0<r&&(this.callSuper(r),this.inited)){r=this._listView;const z=this.width;r.setWidth(z);for(const E of r.getSubviews())E.setWidth(z)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(r){const z=this.getVisibleRows();let E=z.length;for(;E;){const I=z[--E];if(I.model===r)return I}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const r=this.modelIDName,z=this.ascendingSort;return this.numericSort?u.getNumericObjSortFunc(r,z):e(r,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(r,z){var E=this.getIndexOfModelInData(r);
let I=!1;if(0<=E){var J=this._rowExtent;const A=this.getIDE().scrollTop,B=A+this.height;E=this.rowInset+E*J;J=E+J;E<=A?(this.scrollYTo(E,!0),I=!0):J>=B&&(this.scrollYTo(J-this.height,!0),I=!0);z&&((z=this.getVisibleRowForModel(r))?z.focus():this._focusToModel=r)}return I},isModelInData:function(r){return 0<=this.getIndexOfModelInData(r)},getNextModel:function(r,z=!0,E=!0){const I=this.getListData(),J=I.length;r=this.getIndexOfModelInData(r);if(0<=r)return r+=1,r>=J?z?I[0]:I[J-1]:I[r];if(E&&0<J)return I[J-
1]},getPrevModel:function(r,z=!0,E=!0){const I=this.getListData(),J=I.length;r=this.getIndexOfModelInData(r);if(0<=r)return--r,0>r?z?I[J-1]:I[0]:I[r];if(E&&0<J)return I[0]},getIndexOfModelInData:function(r){if(r){const z=this.getListData();let E=z.length;for(;E;)if(this.areModelsEqual(z[--E],r))return E}return-1},areModelsEqual:function(r,z){const E=this.modelIDName;return r[E]===z[E]},getActiveRowForModel:function(r){if(r){const z=this._itemPool.getActives();let E=z.length;for(;E;){const I=z[--E];
if(this.areModelsEqual(I.model,r))return I}}},refreshListData:function(r,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(r,z)},resetListUI:function(r,z){const E=this.getListData().length,I=this._listView,J=this._scrollAnchorView;I.setHeight(E*this._rowExtent-(0<E?this.rowSpacing:0)+this.rowInset+this.rowOutset);J.setY(I.height-J.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;r||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(r){if(c.focusedView?.isDescendantOf(r)){const z=this.getFocusTrap();z?z.focus():c.clear()}r.setVisible(!1);this._itemPool.putInstance(r)},refreshListUI:function(r){r=this._rowExtent;const z=this.rowInset,E=this.forceFullResetOnNextRefresh;var I=this.getIDE().scrollTop;const J=this.getListData()??[];var A=l(0,t.floor((I-z)/r));I=t.min(J.length,t.ceil((I-z+this.height)/r));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==A||this._endIdx!==I||E){const v=this.width,n=this.rowHeight,y=this._visibleRowsByIdx,D=this._focusToModel;this._startIdx=A;this._endIdx=I;for(var B in y)if(B<A||B>=I)this.putRowBackInPool(y[B]),delete y[B];for(B=A;B<I;B++){A=y[B];const F=J[B],K=this.getClassKey(F);let L=!1;A&&A.classKey===K||(A&&this.putRowBackInPool(A),y[B]=A=this._itemPool.getInstance(K),A.setInfiniteOwner(this),A.setClassKey(K),A.setWidth(v),A.setHeight(n),A.setY(z+B*r),A.setVisible(!0),L=!0);!E&&A.model&&
this.areModelsEqual(A.model,F)?L&&this.updateRow(A):(A.setModel(F),this.updateRow(A));A.notifyRefreshed();A.bringToFront();D&&this.areModelsEqual(D,F)&&(A.focus(),this._focusToModel=null)}}},getClassKey:r=>"default",updateRow:r=>{}}),b=u.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",u.SimpleButton,{include:[g,u.ArrowKeyActivation],initNode:function(r,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=h.LIST_KEYS);this.callSuper(r,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(r){this.callSuper(r);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(r,z){r===h.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(r,z)},doKeyArrowLeftOrUp:function(r,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(r,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(r){switch(r){case h.CODE_ENTER:case h.CODE_SPACE:this.doActivated()}}}),q=u.SelectableInfiniteList=new x("SelectableInfiniteList",
f,{setSelectedRow:function(r){const z=this.selectedRow;r!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",r,!0),r&&(this.setSelectedRowModel(r.model),r.setSelected(!0)))},setSelectedRowModel:function(r){this.set("selectedRowModel",r,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(r,z,E){r&&(k(this),this.setSelectedRowModel(r),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(r,z=!0){this.selectRowForModel(this.getNextModel(r),z,!0)},selectPrevRowForModel:function(r,z=!0){this.selectRowForModel(this.getPrevModel(r),z,!1)},resetListUI:function(r,z){this.isModelInData(this.selectedRowModel)?k(this):this.setSelectedRow();this.callSuper(r,z)},putRowBackInPool:function(r){r.selected&&k(this);this.callSuper(r)},refreshListUI:function(r){r=c.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),r&&r!==z||z.focus(!0))}}),m=new w("InfiniteGridRowMixin",{notifyXChange:function(r){this[r.columnId+"View"]?.setX(r.x+r.cellXAdj)},notifyWidthChange:function(r){this[r.columnId+"View"]?.setWidth(r.width+r.cellWidthAdj)},notifyVisibilityChange:function(r){this[r.columnId+"View"]?.setVisible(r.visible)}}),p=new w("InfiniteGridMixin",{setGridHeader:function(r){(this.gridHeader=r)?.setGrid(this)},makeReady:function(r,z){const E=this.gridHeader;E?(this.forceFullResetOnNextRefresh=
z,E.setSort(r),E.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [r,z]=this.gridHeader.sort??["",""];return r?e(r,"ascending"===z,!1):this.callSuper()},updateRow:function(r){const z=this.gridHeader;if(z)for(const E of z.columnHeaders)r.notifyXChange(E),r.notifyWidthChange(E),r.notifyVisibilityChange(E)},notifyXChange:function(r){for(const z of this.getVisibleRows())z.notifyXChange(r)},notifyWidthChange:function(r){for(const z of this.getVisibleRows())z.notifyWidthChange(r)},
notifyVisibilityChange:function(r){for(const z of this.getVisibleRows())z.notifyVisibilityChange(r)}});u.InfiniteGridRow=new w("InfiniteGridRow",{include:[d,m]});u.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[g,m]});u.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",b,{include:[m]});u.InfiniteGrid=new x("InfiniteGrid",f,{include:[p]});u.SelectableInfiniteGrid=new x("InfiniteGrid",q,{include:[p]});u.InfiniteGridHeader=new x("InfiniteGridHeader",a,{include:[u.GridController],
initNode:function(r,z){z.columnSpacing??(z.columnSpacing=1);z.overflow="hidden";this.callSuper(r,z);new u.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(r){this.grid=r},setColumnSpacing:function(r){this.columnSpacing=r},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:l(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(r){this.callSuper(r);if(this.inited){r=this.height;for(const z of this.columnHeaders)z.setHeight(r)}},setWidth:function(r){this.callSuper(l(this.minWidth,
r));this.inited&&(r=this.width,this.setGridWidth(r),this.grid.setWidth(r))},subviewAdded:function(r){this.callSuper(r);r.isA(u.GridColHdr)&&(r.setGridController(this),r.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(r){this.isLocked()||this.grid.notifyXChange(r)},notifyHdrWidthChange:function(r){this.isLocked()||this.grid.notifyWidthChange(r)},updateRowsForVisibilityChange:function(r){this.grid.notifyVisibilityChange(r)}})})(myt);
(u=>{const x=JS.Class,w=u.PanelStackTransition=new x("PanelStackTransition",u.Node,{to:t=>Promise.resolve(t),from:t=>Promise.resolve(t)});u.PanelStack=new x("PanelStack",u.View,{include:[u.SelectionManager],initNode:function(t,l){l.overflow="hidden";l.itemSelectionId??(l.itemSelectionId="panelId");l.maxSelected??(l.maxSelected=1);this.callSuper(t,l);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(t){this.set("transition",t,!0)},__updateWidth:function(t){this.getActivePanel()?.setWidth(t.value)},
__updateHeight:function(t){this.getActivePanel()?.setHeight(t.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(t){return this.getSelectableItem(t)},selectPanel:function(t){this.selectById(t)},doSelected:function(t){t.setWidth(this.width);t.setHeight(this.height)},doStackTransition:function(t){this["doStackTransition"+(t.selected?"To":"From")](t)},doStackTransitionTo:function(t){const l=this;l.doBeforeTransitionTo(t);const a=l.transition;a?a.to(t).then(c=>{l.doAfterTransitionTo(c)}):
(t.makeHighestZIndex(),t.setVisible(!0),l.doAfterTransitionTo(t))},doBeforeTransitionTo:t=>{},doAfterTransitionTo:t=>{},doStackTransitionFrom:function(t){const l=this;l.doBeforeTransitionFrom(t);const a=l.transition;a?a.from(t).then(c=>{l.doAfterTransitionFrom(c)}):(t.setVisible(!1),l.doAfterTransitionFrom(t))},doBeforeTransitionFrom:t=>{},doAfterTransitionFrom:t=>{}});u.StackablePanel=new JS.Module("StackablePanel",{include:[u.Selectable],initNode:function(t,l){l.visible=l.selected=!1;l.bgColor??
(l.bgColor="#fff");l.panelId??(l.panelId=l.name);this.callSuper(t,l);this.selected&&this.doStackTransition()},setPanelStack:function(t){this.panelStack=t},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(t){this.panelId=t},setSelected:function(t){this.selected!==t&&(this.callSuper(t),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});u.PanelStackFadeTransition=new x("PanelStackFadeTransition",w,{initNode:function(t,
l){l.duration??(l.duration=1E3);this.callSuper(t,l)},setDuration:function(t){this.duration=t},to:function(t){return new Promise((l,a)=>{t.stopActiveAnimators("opacity");t.setVisible(!0);t.animate({attribute:"opacity",to:1,duration:this.duration}).next(c=>{t.makeHighestZIndex();l(t)})})},from:function(t){return new Promise((l,a)=>{t.stopActiveAnimators("opacity");t.animate({attribute:"opacity",to:0,duration:this.duration}).next(c=>{t.setVisible(!1);l(t)})})}});u.PanelStackSlideTransition=new x("PanelStackSlideTransition",
w,{initNode:function(t,l){l.duration??(l.duration=1E3);l.direction??(l.direction="right");this.callSuper(t,l)},setDuration:function(t){this.duration=t},setDirection:function(t){this.direction=t},to:function(t){const l=t.getPanelStack(),a=this.duration;let c,h;switch(this.direction){case "left":h="x";c=l.width;break;case "right":h="x";c=-l.width;break;case "up":h="y";c=l.height;break;case "down":h="y",c=-l.height}t.stopActiveAnimators(h);t.set(h,c);t.setVisible(!0);return new Promise((e,k)=>{k=d=>
{t.makeHighestZIndex();e(t)};0<a?t.animate({attribute:h,to:0,duration:a}).next(k):(t.set(h,0),t.makeHighestZIndex(),e(t))})},from:function(t){const l=t.getPanelStack(),a=this.duration;let c,h;switch(this.direction){case "left":h="x";c=-l.width;break;case "right":h="x";c=l.width;break;case "up":h="y";c=-l.height;break;case "down":h="y",c=l.height}t.stopActiveAnimators(h);return new Promise((e,k)=>{k=d=>{t.setVisible(!1);e(t)};0<a?t.animate({attribute:h,to:c,duration:a}).next(k):(t.set(h,c),t.setVisible(!1),
e(t))})}})})(myt);
(u=>{const x=JS.Module,{Draggable:w,global:{dragManager:t,mouse:l}}=u,a=(h,e,k)=>{for(const d of[e,k])h["__is"+d]=!1,h["__tmrId"+d]=null},c=u.DragGroupSupport=new x("DragGroupSupport",{initNode:function(h,e){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(h,e)},setDragGroups:function(h){const e=this.__dgs={};for(const k in h)e[k]=!0;this.__anyDG=e.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(h){const e=this.__drpgs=
{};for(const k in h)e[k]=!0;this.__anyDRPG=e.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(h){h&&(this.__dgs[h]=!0,"*"===h&&(this.__anyDG=!0))},removeDragGroup:function(h){h&&(delete this.__dgs[h],"*"===h&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(h){h&&(this.__drpgs[h]=!0,"*"===h&&(this.__anyDRPG=!0))},removeDropGroup:function(h){h&&(delete this.__drpgs[h],"*"===h&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
u.DropSource=new x("DropSource",{include:[w],initNode:function(h,e){e.distanceBeforeDrag??(e.distanceBeforeDrag=2);e.dropParent??(e.dropParent=h.getRoot());this.callSuper(h,e)},setDropClass:function(h){this.dropClass=u.resolveClassname(h)},setDropClassAttrs:function(h){this.dropClassAttrs=h},setDropParent:function(h){this.dropParent=h},startDrag:function(h){const e=this.dropable=this.makeDropable();if(e){const k=e.distanceBeforeDrag;e.distanceBeforeDrag=0;e.doMouseDown(h);e.__doMouseDown(h);e.distanceBeforeDrag=
k}},doMouseUp:function(h){this.callSuper(h);const e=this.dropable;e&&(e.__doMouseUp(h),e.doMouseUp(h),this.dropable=null)},makeDropable:function(){const h=this.dropClass,e=this.dropParent;if(h&&e){const k=u.DomElementProxy.getRelativePosition(this.getIDE(),e.getIDE());return new h(e,{...this.dropClassAttrs,x:k.x??0,y:k.y??0})}}});u.DropTarget=new x("DropTarget",{include:[c],initNode:function(h,e){this.callSuper(h,e);t.registerDropTarget(this)},destroy:function(){t.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(h){return!this.disabled&&this.isVisible()},notifyDragStart:h=>{},notifyDragStop:h=>{},notifyDragEnter:h=>{},notifyDragLeave:h=>{},notifyDrop:h=>{}});u.Dropable=new x("Dropable",{include:[w,c],setDropTarget:function(h){this.dropTarget=h},setDropped:function(h){this.dropped=h},setDropFailed:function(h){this.dropFailed=h},willPermitDrop:h=>!0,startDrag:function(h){this.setDropped(!1);this.setDropFailed(!1);t.startDrag(this);this.callSuper(h)},updateDrag:function(h){t.updateDrag(h,
this);this.callSuper(h)},stopDrag:function(h,e){t.stopDrag(h,this,e);this.callSuper(h,e);e?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(h){this.setDropTarget(h)},notifyDragLeaving:function(h){this.setDropTarget()},notifyDropped:function(h,e){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});u.AutoScroller=new x("AutoScroller",{include:[c],initNode:function(h,e){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;e.overflow??(e.overflow="auto");this.callSuper(h,e);t.registerAutoScroller(this)},destroy:function(){t.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(h){this.scrollBorder=Math.max(1,h)},setScrollFrequency:function(h){this.scrollFrequency=h},setScrollAmount:function(h){this.scrollAmount=h},setScrollAcceleration:function(h){this.scrollAcceleration=h},notifyAutoScrollerDragStart:function(h){h=this.getIDE();(h.scrollHeight>h.clientHeight||
h.scrollWidth>h.clientWidth)&&this.attachToDom(l,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(h){this.detachFromDom(l,"__hndlMove","mousemove",!0);a(this,"Up","Down");a(this,"Left","Right")},__hndlMove:function(h){const e=this;let {pageX:k,pageY:d}=h.value;if(e.containsPoint(k,d)){h=e.getPagePosition();const g=e.scrollBorder,f=(b,q)=>{e["__is"+b]&&(e.getIDE()["scroll"+("Up"===b||"Down"===b?"Top":"Left")]+=q*e["__amt"+b],e["__tmrId"+b]=setTimeout(()=>{f(b,q)},e.scrollFrequency))};
k-=h.x;d-=h.y;d<g?(e.__isUp=!0,e.__amtUp=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-d/g))),e.__tmrIdUp||f("Up",-1)):e.height-d<g?(e.__isDown=!0,e.__amtDown=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-(e.height-d)/g))),e.__tmrIdDown||f("Down",1)):a(e,"Up","Down");k<g?(e.__isLeft=!0,e.__amtLeft=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-k/g))),e.__tmrIdLeft||f("Left",-1)):e.width-k<g?(e.__isRight=!0,e.__amtRight=Math.round(e.scrollAmount*(1+e.scrollAcceleration*(1-(e.width-
k)/g))),e.__tmrIdRight||f("Right",1)):a(e,"Left","Right")}else a(e,"Up","Down"),a(e,"Left","Right")}})})(myt);
(u=>{const {max:x,cos:w,sin:t,PI:l}=Math,a=u.Geometry.degreesToRadians,c=g=>{var f=a(g.startAngle),b=a(g.endAngle);if(f>b){var q=f;f=b;b=q}q=g.__path;var m=g.width/2,p=g.thickness;const r=g.radius,z=r+p;var E=b-f;const I=E+1E-4>=2*l;I&&(f=0,b=l);const J=[m+z*w(f),m+z*t(f)],A=[m+z*w(b),m+z*t(b)];b=[m+r*w(b),m+r*t(b)];f=[m+r*w(f),m+r*t(f)];m=["M"+J.join()];I?m.push("A"+[z,z,0,1,1,A].join(),"A"+[z,z,0,1,1,J].join(),"L"+b.join(),"A"+[r,r,0,1,0,f].join(),"A"+[r,r,0,1,0,b].join()):(E=E%(2*l)>l?1:0,p/=2,
m.push("A"+[z,z,0,E,1,A].join(),g.endCapRounding?"A"+[p,p,0,0,1,b].join():"L"+b.join(),"A"+[r,r,0,E,0,f].join(),g.startCapRounding?"A"+[p,p,0,0,1,J].join():""));m.push("z");q.setAttribute("d",m.join(" "));q.setAttribute("fill",g.color)},h=g=>{const f=2*(g.radius+g.thickness),b=g.__svg;g.setWidth(f);g.setHeight(f);b.setAttribute("viewBox","0 0 "+f+" "+f);b.setAttribute("width",f);b.setAttribute("height",f);c(g)},e=(g,f,b)=>{g[f]!==b&&(g[f]=b,g.inited&&(c(g),g.fireEvent(f,b)))},k=(g,f,b)=>{g[f]!==b&&
(g[f]=b=x(0,b),g.inited&&(h(g),g.fireEvent(f,b)))},d=(g,f)=>{g=document.createElementNS("http://www.w3.org/2000/svg",g);f?.appendChild(g);return g};u.Annulus=new JS.Class("Annulus",u.BackView,{initNode:function(g,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(g,f);h(this)},createOurDomElement:function(g){g=this.callSuper(g);var f=Array.isArray(g)?g[1]:g;f=this.__svg=d("svg",f);this.__path=d("path",f);f.style.pointerEvents=
"none";return g},setRadius:function(g){k(this,"radius",g)},setThickness:function(g){k(this,"thickness",g)},setStartAngle:function(g){e(this,"startAngle",g)},setEndAngle:function(g){e(this,"endAngle",g)},setStartCapRounding:function(g){e(this,"startCapRounding",g)},setEndCapRounding:function(g){e(this,"endCapRounding",g)},setColor:function(g){e(this,"color",g)},isColorAttr:function(g){return"color"===g||this.callSuper(g)}})})(myt);
(u=>{let x;const w=JS.Class,{mouse:t,windowResize:l,dragManager:a}=u.global,{min:c,max:h,round:e}=Math,k=q=>{q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID)},d=q=>{if(q.tooltip){const m=q._lastPos;if(q.tooltip.parent.containsPoint(m.x,m.y))return!0}q.hideTip();return!1},g=u.BaseTooltip=new w("BaseTooltip",u.View,{include:[u.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(q,m){this.tipDelay=this.nextTipDelay=g.TIP_DELAY;this.tipHideDelay=g.TIP_HIDE_DELAY;m.visible??
(m.visible=!1);this.callSuper(q,m)},setTooltip:function(q){this.inited&&(this.tooltip=q)&&(this.attachToDom(t,"__hndl_mousemove","mousemove",!0),this.attachToDom(q.parent,"hideTip","mousedown",!0),this.attachToDom(q.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(q){const m=this;m._lastPos=u.MouseObservable.getMouseFromEvent(q);d(m)&&(k(m),m.__checkTID=setTimeout(()=>{delete m.__checkTID;d(m)&&m.showTip()},m.nextTipDelay))},hideTip:function(q){k(this);if(q=this.tooltip?.parent)this.detachFromDom(q,
"hideTip","mousedown",!0),this.detachFromDom(q,"hideTip","mouseup",!0),this.detachFromDom(t,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){a.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),f=u.Tooltip=new w("Tooltip",g,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},initNode:function(q,
m){m.edgeSize??(m.edgeSize=f.EDGE_SIZE);m.edgeColor??(m.edgeColor=f.EDGE_COLOR);m.shadowSize??(m.shadowSize=f.SHADOW_SIZE);m.shadowColor??(m.shadowColor=f.SHADOW_COLOR);m.insetH??(m.insetH=f.HORIZONTAL_INSET);m.insetV??(m.insetV=f.VERTICAL_INSET);m.tipBgColor??(m.tipBgColor=f.TIP_BG_COLOR);m.tipTextColor??(m.tipTextColor=f.TIP_TEXT_COLOR);this.callSuper(q,m);this._tipText=new u.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},setEdgeSize:function(q){this.edgeSize=
q},setEdgeColor:function(q){this.edgeColor=q},setShadowSize:function(q){this.shadowSize=q},setShadowColor:function(q){this.shadowColor=q},setInsetH:function(q){this.insetH=q},setInsetV:function(q){this.insetV=q},setTipBgColor:function(q){this.tipBgColor=q},setTipTextColor:function(q){this.tipTextColor=q},showTip:function(){const q=this.tooltip;var m=q.text;const p=q.parent;var r=this._tipText;const z=this.edgeSize,E=this.shadowSize;r.text!==m&&r.setText(m);r.setWidth("auto");var I=c(r.measureNoWrapWidth(),
q.maxTextWidth);m=I+2*r.x;const J=m+2*z;r.setWidth(I);r.sizeViewToDom();I=p.getPagePosition();r=r.height+2*r.y;const A=r+2*z,B=I.y-A+("below"===q.tipvalign?p.height+A:0);I=I.x;switch(q.tipalign){case "right":I-=J;case "farright":I+=p.width;break;case "farleft":I-=J}this.setX(e(c(h(I,0),l.getWidth()-J)));this.setY(e(c(h(B,0),l.getHeight()-A)));this.setWidth(m);this.setHeight(r);this.setBgColor(this.tipBgColor);this.setBorder([z,"solid",this.edgeColor]);this.setBoxShadow([E,E,E,this.shadowColor]);this.callSuper()}}),
b=u.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:f,MAX_TEXT_WIDTH:280},setTooltip:function(q){this.callSuper("");this.set("tooltip",q,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(q){this.set("tipAlign",q,!0)},setTipValign:function(q){this.set("tipValign",q,!0)},setMaxTextWidth:function(q){this.set("maxTextWidth",q,!0)},setTipClass:function(q){this.set("tipClass",q,!0)},doSmoothMouseOver:function(q){const m=this.getTooltip();this.callSuper(q);if(q&&m){q=this.tipClass??
b.TIP_CLASS;!x||x instanceof q||(x.destroy(),x=null);if(!x){let p=document.getElementById("tooltipDiv");p||(p=u.DomElementProxy.createElement("div",{position:"absolute"}),u.getElement().appendChild(p));x=new q(p,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:m,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||b.MAX_TEXT_WIDTH})}}})})(myt);
(u=>{const x=Math,{min:w,max:t}=x;u.Path=new JS.Class("Path",{initialize:function(l){this.setVectors(l??[])},setVectors:function(l){this._boundingBox=null;this.vectors=l},copyFrom:function(l){this.vectors=l.vectors.slice();this._boundingBox=null},drawInto:function(l){l.beginPath();const a=this.vectors;let c=a.length,h=0;for(l.moveTo(a[h++],a[h++]);c>h;)l.lineTo(a[h++],a[h++]);l.closePath()},translate:function(l,a){const c=this.vectors;let h=c.length;for(;h;)c[--h]+=a,c[--h]+=l;this._boundingBox=null},
rotate:function(l){const a=x.cos(l);l=x.sin(l);const c=this.vectors,h=c.length;for(let e=0;h>e;){const k=c[e]*a-c[e+1]*l,d=c[e]*l+c[e+1]*a;c[e++]=k;c[e++]=d}this._boundingBox=null},rotateAroundOrigin:function(l,a,c){this.translate(-a,-c);this.rotate(l);this.translate(a,c)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const l=this.vectors;let a=l.length,c,h,e,k;if(2<=a){e=k=l[--a];for(c=h=l[--a];a;){const d=l[--a],g=l[--a];e=w(d,e);k=t(d,k);c=w(g,c);h=t(g,h)}return this._boundingBox=
{x:c,y:e,width:h-c,height:k-e}}return this._boundingBox=null},getCenter:function(){const l=this.getBoundingBox();return l?{x:l.x+l.width/2,y:l.y+l.height/2}:null},isPointInPath:function(l,a){"object"===typeof l&&(a=l.y,l=l.x);return u.Geometry.isPointInPath(l,a,this.getBoundingBox(),this.vectors)}})})(myt);
(u=>{const x=console.warn,w=Math.PI,t=w/2,l=3*w/2,a=u.AccessorSupport,c={};for(const h of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))c[h]=function(...e){this.__ctx[h](...e)};for(const h of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])c[h]=
function(...e){return this.__ctx[h](...e)};for(const h of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))c[a.generateSetterName(h)]=function(e){this.__ctx[h]=e},c[a.generateGetterName(h)]=function(){return this.__ctx[h]};u.Canvas=new JS.Class("Canvas",u.BackView,{include:[c],createOurDomElement:function(h){h=this.callSuper(h);const e=Array.isArray(h)?h[1]:h,
k=this.__cvs=document.createElement("canvas");k.className="mytUnselectable";e.appendChild(k);k.style.position="absolute";this.__ctx=k.getContext("2d");return h},setWidth:function(h){0>h&&(h=0);this.__cvs.setAttribute("width",h);this.callSuper(h)},setHeight:function(h){0>h&&(h=0);this.__cvs.setAttribute("height",h);this.callSuper(h)},clear:function(){const h=this.__ctx;h.save();h.setTransform(1,0,0,1,0,0);h.clearRect(0,0,this.width,this.height);h.restore()},dataURItoBlob:function(h,e){h=atob(h.split(",")[1]);
const k=h.length,d=[];for(let g=0;g<k;)d.push(h.charCodeAt(g++));return new Blob([new Uint8Array(d)],{type:e})},getDataURL:function(h,e){return this.__cvs.toDataURL(h,e)},getImageFile:function(h,e,k){switch(h){case "png":case "PNG":h="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":h="jpeg";k??=.5;break;default:x("Unexpected image type",h),h=h.toLowerCase()}const d="image/"+h;k=this.dataURItoBlob(this.getDataURL(d,k),d);e&&(k.name=e+"."+h);return k},circle:function(h,e,k){this.__ctx.arc(h,
e,k,0,2*w)},drawRoundedRect:function(h,e,k,d,g,f){const b=this.lineTo.bind(this),q=this.arc.bind(this);f=d+f;g=k+g;this.beginPath();this.moveTo(k,d+h);b(k,f-h);q(k+h,f-h,h,w,t,!0);b(g-h,f);q(g-h,f-h,h,t,0,!0);b(g,d+h);q(g-h,d+h,h,0,l,!0);b(k+h,d);q(k+h,d+h,h,l,w,!0);this.closePath();0<e&&(h-=e,k+=e,g-=e,d+=e,f-=e,this.moveTo(k,d+h),q(k+h,d+h,h,w,l),b(g-h,d),q(g-h,d+h,h,l,0),b(g,f-h),q(g-h,f-h,h,0,t),b(k+h,f),q(k+h,f-h,h,t,w),this.closePath());return this},drawRectOutline:function(h,e,k,d,g){g=k+g;
d=e+d;const f=e+h,b=d-h,q=k+h;h=g-h;const m=this.lineTo.bind(this);this.beginPath();this.moveTo(e,k);m(e,g);m(d,g);m(d,k);m(e,k);m(f,q);m(b,q);m(b,h);m(f,h);m(f,q);this.closePath();return this},drawPartiallyRoundedRect:function(h,e,k,d,g,f,b,q){q=f+q;b=g+b;const m=this.lineTo.bind(this),p=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(g,f+h);m(g,q-k);0<k&&p(g,q,g+k,q);m(b-d,q);0<d&&p(b,q,b,q-d);m(b,f+e);0<e&&p(b,f,b-e,f);m(g+h,f);0<h&&p(g,f,g,f+h);this.closePath();return this},drawAnnulus:function(h,
e,k,d,g,f,b,q=60){const m=u.Color;for(var p of b)"string"===typeof p.color&&(p.color=m.makeColorFromHexString(p.color));1>q&&(x("Invalid segements",q),q=60);q=w/q;p=0;for(var r=b.length-1;p<r;){var z=b[p++];const {angle:D,color:F}=z,{angle:K,color:L}=b[p];var E=Math.round((K-D)/q),I=F.getDiffFrom(L);z.colorDelta={red:I.red/E,green:I.green/E,blue:I.blue/E}}k=new u.Path([h+k,e,h+d,e]);k.rotateAroundOrigin(g,h,e);d=k.vectors;let [J,A,B,v]=d,n=0,y=w/360;for(p=0;f>g;){E=J;I=A;r=B;z=v;g+=q;g>f&&(q+=f-g,
y=0,g=f);k.rotateAroundOrigin(q+y,h,e);[J,A,B,v]=d;this.beginPath();this.moveTo(E,I);this.lineTo(r,z);this.lineTo(B,v);this.lineTo(J,A);this.closePath();const {color:D,colorDelta:F}=b[p];this.setFillStyle(m.rgbToHex(D.red+n*F.red,D.green+n*F.green,D.blue+n*F.blue,!0));this.fill();0<y&&(k.rotateAroundOrigin(-y,h,e),[J,A,B,v]=d);n++;g>=b[p+1].angle&&(n=0,p++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
