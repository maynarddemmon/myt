(r=>{let v;var t=a=>{let e=a.length;for(;e;){const c=a[--e];v=c.ver??c.id;if(c.str?.includes(c.sub)||c.prop)return c.id}};var m=a=>{const e=a.indexOf(v);if(0<=e)return parseFloat(a.slice(e+v.length+1))};const h=navigator.userAgent,b=navigator.platform;m=r.BrowserDetect={browser:t([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:h,sub:"Firefox",id:"Firefox"},{str:h,sub:"Chrome",id:"Chrome"},{str:h,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:m(h)||m(navigator.appVersion)||"UNKNOWN",os:t([{str:h,sub:"iPhone",id:"iPhone/iPod"},{str:b,sub:"Linux",id:"Linux"},{str:b,sub:"Mac",id:"Mac"},{str:b,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(m.browser){case "Chrome":case "Safari":r="WebKit";break;case "Explorer":r="MS";break;case "Firefox":r="Moz";break;case "Opera":r="O";break;default:r="UNKNOWN"}t=r.toLowerCase();m.prefix={dom:r,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const r=Math,v=r.abs,t=r.floor,m=r.ceil,h="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),b="January February March April May June July August September October November December".split(" "),a="Sun Mon Tue Wed Thu Fri Sat".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c=f=>(10>f?"0":"")+f,g=(f,d)=>{f=f.getTimezoneOffset();return(0<f?"-":"+")+c(t(v(f/60)))+(d?":":"")+(0==v(f%60)?"00":c(v(f%60)))},k=
{d:f=>c(f.getDate()),D:f=>a[f.getDay()],j:f=>f.getDate(),l:f=>e[f.getDay()],N:f=>0==f.getDay()?7:f.getDay(),S:f=>{f=f.getDate();return 1==f%10&&11!=f?"st":2==f%10&&12!=f?"nd":3==f%10&&13!=f?"rd":"th"},w:f=>f.getDay(),z:f=>{const d=new Date(f.getFullYear(),0,1);return m((f-d)/864E5)},W:f=>{const d=new Date(f.valueOf());f=(f.getDay()+6)%7;d.setDate(d.getDate()-f+3);f=d.valueOf();d.setMonth(0,1);4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7);return c(1+m((f-d)/6048E5))},F:f=>b[f.getMonth()],m:f=>
c(f.getMonth()+1),M:f=>h[f.getMonth()],n:f=>f.getMonth()+1,t:f=>{let d=f.getFullYear();f=f.getMonth()+1;12===f&&(d=d++,f=0);return(new Date(d,f,0)).getDate()},L:f=>{f=f.getFullYear();return 0==f%400||0!=f%100&&0==f%4},o:f=>{const d=new Date(f.valueOf());d.setDate(d.getDate()-(f.getDay()+6)%7+3);return d.getFullYear()},Y:f=>f.getFullYear(),y:f=>(""+f.getFullYear()).substr(2),a:f=>12>f.getHours()?"am":"pm",A:f=>12>f.getHours()?"AM":"PM",B:f=>t(1E3*((f.getUTCHours()+1)%24+f.getUTCMinutes()/60+f.getUTCSeconds()/
3600)/24),g:f=>f.getHours()%12||12,G:f=>f.getHours(),h:f=>c(f.getHours()%12||12),H:f=>c(f.getHours()),i:f=>c(f.getMinutes()),s:f=>c(f.getSeconds()),e:f=>/\((.*)\)/.exec((new Date).toString())[1],I:f=>{let d=null,q=0;for(;12>q;){const x=(new Date(f.getFullYear(),q++,1)).getTimezoneOffset();if(null===d)d=x;else if(x<d){d=x;break}else if(x>d)break}return f.getTimezoneOffset()==d|0},O:f=>g(f,!1),P:f=>g(f,!0),T:f=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:f=>60*-f.getTimezoneOffset(),c:f=>f.format("Y-m-d\\TH:i:sP"),
r:f=>f.toString(),U:f=>f.getTime()/1E3};return function(f){return f.replace(/(\\?)(.)/g,(d,q,x)=>""===q&&k[x]?k[x](this):x)}})();
(r=>{const v=(d,q)=>{var x=d.__mct__.get(q);if(x)return x.slice();const n=[];if(x=d.__anc__){const l=x.length;for(let w=0;w<l;){const C=x[w++].__fns__;C.has(q)&&n.push(C.get(q))}}else{const l=d.__anc__=[],w=C=>{const F=C.__inc__,I=F.length;for(let A=0;A<I;)w(F[A++]);l.includes(C)||(l.push(C),C=C.__fns__,C.has(q)&&n.push(C.get(q)))};w(d)}d.__mct__.set(q,n.slice());return n},t=(d,q)=>{const x=d.callable;return d.__hs?function(...n){const l=this.callSuper,w=v(q,d.name);let C=w.length-1;if(0===C)l&&delete this.callSuper;
else{const I=n.length,A=this.callSuper=(...u)=>{for(let p=u.length;p<I;)u[p]=n[p++];0===--C&&delete this.callSuper;u=w[C].callable.call(this,...u);this.callSuper=A;C++;return u}}const F=x.call(this,...n);l?this.callSuper=l:delete this.callSuper;return F}:x},m=(d,q)=>{q=q??d;if(q===d){d.__anc__=null;d.__mct__=new Map;var x=d.__dep__;for(var n=x.length;0<n;)m(x[--n])}x=q.__tgt__;n=d.__inc__;const l=n.length;for(let w=0;w<l;)m(n[w++],q);for(const [w,C]of d.__fns__)d=C instanceof a?t(C,q):C,x[w]!==d&&
(x[w]=d)},h=d=>d.__meta__??(d.__meta__=new e(null,null,d)).include(d.klass,!0),b=d=>{const q=function(...x){return this.initialize(...x)??this};q.prototype=Object.create(d.prototype);return q},a=b(Object),e=r.Module=b(Object);a.prototype.initialize=function(d,q,x){this.module=d;this.name=q;this.callable=x;this.__hs=x.toString().includes("callSuper")};var c=e.prototype;c.initialize=function(d,q,x){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=x;d&&(this.__displayName=
d);this.include(q,!0)};c.include=function(d,q){if(d){if(d.__fns__)this.__inc__.push(d),d.__dep__.push(this);else{var x=d.extend,n=d.include;x&&(x.__fns__||"function"!==typeof x)&&this.extend(x);if(n&&(n.__fns__||"function"!==typeof n)){x=n.length;for(let l=0;l<x;)this.include(n[l++],!0)}for(const l of Object.keys(d))n=d[l],("extend"!==l&&"include"!==l||!n.__fns__&&"function"===typeof n)&&this.__fns__.set(l,n?.__fns__||"function"!==typeof n?n:new a(this,l,n))}!0!==q&&m(this)}return this};c.includes=
function(d){if(d===this)return!0;const q=this.__inc__,x=q.length;for(let n=0;n<x;)if(q[n++].includes(d))return!0;return!1};c.instanceMethod=function(d){return v(this,d).pop()};const g=new e("Kernel",{extend:function(d){h(this).include(d)},isA:function(d){return"function"===typeof d&&this instanceof d||h(this).includes(d)}}),k=r.Class=b(e),f=k.prototype;f.initialize=function(d,q,x){"function"!==typeof q&&(x=q,q=Object);e.prototype.initialize.call(this,d);d=b(q);for(const n in this)d[n]===this[n]||
d.hasOwnProperty(n)||(d[n]=this[n]);d.prototype.constructor=d.prototype.klass=d;h(d).include(q.__meta__);d.__tgt__=d.prototype;q=q===Object?{}:q.__fns__?q:new e(q.prototype,!0);d.include(g,!0).include(q,!0).include(x,!0);m(d);return d};c=(d,q)=>{d.__inc__=[];d.__dep__=[];const x=d.__tgt__=d.prototype,n=d.__fns__=new Map;for(const F of Object.keys(x)){var l=n,w=l.set;var C=x[F];C=C?.__fns__||"function"!==typeof C?C:new a(d,F,C);w.call(l,F,C)}x.constructor=x.klass=d;for(const F in f)d[F]===f[F]||d.hasOwnProperty(F)||
(d[F]=f[F]);d.include(q);d.constructor=d.klass=k};c(a,g);c(e,g);c(k,e);m(h(a));m(h(e));h(k).include(e.__meta__);r.Singleton=new k("Singleton",{initialize:(d,q,x)=>new (new k(d,q,x))})})(global.JS={});
(r=>{class v extends Error{constructor(A,u,...p){super(...p);this.name="FetchError";this.status=A;this.url=u}}let t=0,m;const h=Math,{abs:b,min:a,max:e,pow:c}=h,g=document,k=g.head,f=g.createElement.bind(g),d={},q={"":!0},x=g.fonts,n=A=>{const u=A.family.split('"').join("");[u,u+" "+A.weight].forEach(p=>{if(!q[p]){q[p]=!0;const y=d[p]??[];for(;y.length;)(p=y.pop())&&!p.destroyed&&p.sizeViewToDom()}})},l={},w=A=>{const u={};return(...p)=>{const y=JSON.stringify(p);return y in u?u[y]:u[y]=A(...p)}},
C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,F=/\$(\d+)/g,I=r.myt={version:2.02306021558E7,generateGuid:()=>++t,hash:A=>A.split("").reduce((u,p)=>{u=(u<<5)-u+p.charCodeAt(0);return u&u},0),addEventListener:(A,u,p,y,z)=>{A.addEventListener(u,p,{capture:y||!1,passive:z||!1})},removeEventListener:(A,u,p,y)=>{A.removeEventListener(u,p,y||!1)},resolveName:(A,u)=>{if(A&&0!==A.length){u=u??global;var p=Array.isArray(A)?A:A.split("."),y=p.length;for(let z=0;z<y;z++)if(u=u[p[z]],null==u){console.warn("resolveName failed for",
A,"at part",z,p[z]);return}return u}},resolveClassname:A=>{"string"===typeof A&&(A=I.resolveName(A));return A&&"function"===typeof A.isA&&A.isA(JS.Class)?A:null},getExtension:A=>A?(A=A.split("."),1<A.length?A.pop():null):null,loadScript:function(A,u,p){const y=this._loadedScripts??(this._loadedScripts={});if(y[A])return console.warn("script already loaded for src",A),null;y[A]=!0;const z=f("script");z.type="text/javascript";z.async=!1;if(u){let D=!1;z.onload=z.onreadystatechange=()=>{D||z.readyState&&
"complete"!==z.readyState||(D=!0,z.onload=z.onreadystatechange=null,u())}}z.src=A+(p?"":(A.includes("?")?"&":"?")+"cacheBust="+Date.now());k.appendChild(z);return z},dumpStack:(A,u)=>{let p;"string"===typeof A&&(p=A,A=null);I.global.error.notify(u||"error",null,p,A)},getRandom:A=>{const u=h.random();return A?e(0,a(A(u),.9999999999)):u},getRandomArbitrary:(A,u,p)=>{const y=a(A,u);return I.getRandom(p)*(e(A,u)-y)+y},getRandomInt:(A,u,p)=>{const y=a(A,u);return h.floor(I.getRandom(p)*(e(A,u)-y+1)+y)},
areFloatsEqual:(A,u,p)=>{const y=b(A),z=b(u);return b(A-u)<=(y>z?z:y)*(null==p?1E-6:b(p))},areArraysEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;let p=A.length;if(p!==u.length)return!1;for(;p;)if(A[--p]!==u[p])return!1}return!0},areObjectsEqual:(A,u)=>{if(A!==u){if(null==A||null==u)return!1;for(const p in A)if(A[p]!==u[p])return!1;for(const p in u)if(A[p]!==u[p])return!1}return!0},getElement:(A,u)=>g.getElementsByTagName(A||"body")[0<u?u:0],loadFontFaces:(A,u)=>{const p=[];A.forEach(y=>{y=
new FontFace(y.family,"url("+y.url+")",y.options);p.push(y.load())});Promise.all(p).then(y=>{y.forEach(z=>{x.add(z);n(z)});u?.(y)})},loadFontFace:(A,u,p={},y)=>{A=new FontFace(A,"url("+u+")",p);A.loaded.then(z=>{x.add(z);n(z);y?.(z)});A.load()},registerForFontNotification:(A,u)=>{q[u]?A&&!A.destroyed&&A.sizeViewToDom():(d[u]??(d[u]=[])).push(A)},createBaseFontCSSRule:A=>{I.addCSSRule(I.createStylesheet(),"body, input","font-family:"+A,0)},loadCSSFonts:A=>{A?.forEach(I.createStylesheetLink)},createStylesheetLink:A=>
{const u=f("link");u.rel="stylesheet";A&&(u.href=A);k.appendChild(u);return u},createStylesheet:()=>{const A=f("style");k.appendChild(A);return A.sheet},addCSSRule:(A,u,p,y)=>{A.insertRule(u+"{"+p+"}",y)},removeCSSRules:A=>{let u=A.cssRules.length;for(;u;)A.deleteRule(--u)},createInputPlaceholderCSSRule:(A,u,p,y=1)=>{let z=A.__sheet;z?I.removeCSSRules(z):z=A.__sheet=I.createStylesheet();var D;A=(D=A.getODE()).id??(D.id="id"+ ++t);D=[];u&&D.push("color:"+u);p&&D.push("font-family:"+p);y&&D.push("opacity:"+
y);I.addCSSRule(z,"#"+A+"::placeholder",D.join("; "),0)},chainSortFunc:(A,u)=>(p,y)=>{const z=A(p,y);return 0===z?u(p,y):z},getAlphaObjSortFunc:w((A,u,p,y)=>{const z=u?1:-1;return(D,H)=>{D=D[A];H=H[A];y?("string"!==typeof D&&(D=""+D),"string"!==typeof H&&(H=""+H)):(D=D||"",H=H||"");p&&(D=D.toLowerCase(),H=H.toLowerCase());return D.localeCompare(H)*z}}),getNumericObjSortFunc:w((A,u)=>{const p=u?1:-1;return(y,z)=>{y=y[A]||0;z=z[A]||0;return(y-z)*p}}),dataURIToBlob:A=>{var u=A.indexOf(",");const p=A.slice(0,
u).split(":")[1].split(";")[0];A=A.slice(u+1);if(p.startsWith("text/"))A=decodeURIComponent(A);else{A=atob(A);u=A.length;const y=new Uint8Array(u);for(;u;)y[--u]=A.charCodeAt(u);A=y}return new Blob([A],{type:p})},formatAsPercentage:(A,u=2)=>{switch(typeof A){case "number":return u=a(16,e(0,u)),A=h.round(e(0,a(1,A))*c(10,2+u))/c(10,u),(0===A%1?A:A.toFixed(u))+"%";case "string":return A;default:return console.warn("formatAsPercentage: expects a number"),A}},memoize:w,debounce:(A,u,p)=>{const y="__DBTO_"+
++t;return function(){const z=this,D=z[y],H=arguments,K=p&&!D;clearTimeout(D);z[y]=setTimeout(function(){z[y]=null;p||A.apply(z,H)},u);K&&A.apply(z,H)}},createFixedThresholdCounter:(A,u,p,y)=>{var z=I.AccessorSupport.generateName;const D="function"===typeof A||A instanceof JS.Module,H={};y=y||z("counter",p);const K=z(y,"increment");z=z(y,"decrement");if(void 0!==(D?A.instanceMethod(K):A[K]))return console.warn("Increment: Abort clobber",K,A),!1;if(void 0!==(D?A.instanceMethod(z):A[z]))return console.warn("Decrement: Abort clobber",
z,A),!1;H[K]=function(){const J=this[y]+1;this[y]=J;this.fireEvent(y,J);J===u&&this.set(p,!0)};H[z]=function(){const J=this[y];if(0!==J){var M=J-1;this[y]=M;this.fireEvent(y,M);J===u&&this.set(p,!1)}};A[D?"include":"extend"](H);return!0},makeURLSearchParams:(A={})=>{const u=new URLSearchParams;for(const p in A){const y=A[p];void 0!==y&&u.set(p,y)}return u},doFetch:(A,u,p,y,z,D)=>fetch(A,u).then(H=>{if(!H.ok)throw new v(H.status,A,H.statusText);return H}).then(H=>p?H.text():H.json()).then(H=>{if(y)try{if(p)y(H);
else{if(!1===H.success)throw new v(200,A,H.message);y(H.data)}}catch(K){throw H=new v(200,A,K.message),H.stack=K.stack,H;}}).catch(H=>{if(z){if("FetchError"!==H.name){const K=new v(0,A,H.message);K.stack=H.stack;H=K}z(H)}}).finally(()=>{D?.()}),I18N:{setLocale:A=>{m=A},getLocale:()=>m,addDictionary:(A,u)=>{l[u]=Object.assign(l[u]??{},A)},setDictionary:(A,u)=>{l[u]=A??{}},get:(A,...u)=>{var p=m??=(navigator.language??"en").split("-")[0].toLowerCase();p=(l[p]??l.en??{})[A];return null!=p?0<u.length?
p.replaceAll(C,(y,z,D,H)=>D&&H?1==u[parseInt(z)]?D:H:"").replaceAll(F,(y,z)=>u[z]):p:A}}};x.onloadingdone=A=>{A.fontfaces.forEach(u=>{n(u)})}})(global);
(r=>{const v=(m,h)=>{m.startsWith('"')&&(m=m.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return h?JSON.parse(m):m}catch(b){}},t=r.Cookie={defaults:{raw:!1,json:!1},read:(m,h)=>{h={...t.defaults,...h};const b=h.raw?k=>k:k=>decodeURIComponent(k.split("+").join(" "));h=h.json;const a=document.cookie.split("; "),e=a.length,c=m?void 0:{};for(let k=0;k<e;){var g=a[k++].split("=");const f=b(g.shift());g=b(g.join("="));if(m){if(m===f)return v(g,h)}else c[f]=v(g,h)}return c},write:(m,h,b)=>
{b={...t.defaults,...b};if("number"===typeof b.expires){const a=b.expires,e=b.expires=new Date;e.setDate(e.getDate()+a)}h=b.json?JSON.stringify(h):String(h);return document.cookie=[b.raw?m:encodeURIComponent(m),"=",b.raw?h:encodeURIComponent(h),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.samesite?"; samesite="+b.samesite:"",b.secure?"; secure":""].join("")},remove:(m,h)=>void 0!==t.read(m,h)?(t.write(m,"",{...h,expires:-1}),!0):!1}})(myt);
(r=>{const v=global.localStorage,t=(h,b,a)=>{if(0<b){const e="__timerId_"+a;(a=m[e])&&clearTimeout(a);m[e]=setTimeout(()=>{h();delete m[e]},b)}else h()},m=r.LocalStorage={hasDatum:(h,b)=>{if(h&&(b=m.getItem(b??"myt")))try{return null!=JSON.parse(b)[h]}catch(a){console.error(a)}return!1},getDatum:(h,b)=>{if(h&&(b=m.getItem(b??"myt")))try{const a=JSON.parse(b);if("object"===typeof a)return a[h]}catch(a){console.error(a)}},setDatum:(h,b,a,e)=>{a=a??"myt";t(()=>{const c=m.getData(a);c[h]=b;m.setItem(a,
JSON.stringify(c))},e,a+"___"+h)},removeDatum:(h,b,a)=>{b=b??"myt";t(()=>{const e=m.getData(b);delete e[h];m.setItem(b,JSON.stringify(e))},a,b+"___"+h)},hasData:h=>null!=m.getItem(h??"myt"),getData:h=>{if(h=m.getItem(h??"myt"))try{return JSON.parse(h)}catch(b){console.error(b)}return{}},setData:(h,b,a)=>{b=b??"myt";h??={};return"object"===typeof h?(t(()=>{m.setItem(b,JSON.stringify(h))},a,b),!0):!1},removeData:(h,b)=>{h=h??"myt";t(()=>{m.removeItem(h)},b,h)},getLength:()=>v.length,getKey:h=>v.key(h),
getItem:h=>v.getItem(h),setItem:(h,b)=>{v.setItem(h,b)},removeItem:h=>{v.removeItem(h)},clear:()=>{v.clear()},get:h=>m.getItem(h),set:(h,b)=>{m.setItem(h,b)},remove:h=>{m.removeItem(h)},clearAll:()=>{m.clear()}}})(myt);
(r=>{const v=/(?:^|&)([^&=]*)=?([^&]*)/g,t=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;r.URI=new JS.Class("URI",{initialize:function(h,b){h&&this.parse(h,b)},setSource:function(h){this.source=h},setProtocol:function(h){this.protocol=
h},setAuthority:function(h){this.authority=h},setUserInfo:function(h){this.userInfo=h},setUser:function(h){this.user=h},setPassword:function(h){this.password=h},setHost:function(h){this.host=h},setPort:function(h){this.port=h},setRelative:function(h){this.relative=h},setPath:function(h){this.path=h},setDirectory:function(h){this.directory=h},setFile:function(h){this.file=h},setQuery:function(h){this.query=h},setAnchor:function(h){this.anchor=h},parse:function(h,b){const a=this,[e,c,g,k,f,d,q,x,n,
l,w,C,F,I]=(b?m:t).exec(h)??[];a.setSource(e??"");a.setProtocol(c??"");a.setAuthority(g??"");a.setUserInfo(k??"");a.setUser(f??"");a.setPassword(d??"");a.setHost(q??"");a.setPort(x??"");a.setRelative(n??"");a.setPath(l??"");a.setDirectory(w??"");a.setFile(C??"");a.setQuery(F??"");a.setAnchor(I??"");a.queryPairs={};a.query.replace(v,(A,u,p)=>{u&&(a.queryPairs[u]=p)})},decodeQueryParam:h=>decodeURIComponent(h).split("+").join(" "),getQuery:function(){var h=this.queryPairs;const b=[];for(const a in h)b.push(a+
"="+encodeURIComponent(this.getQueryParam(a)));h=b.join("&");return 0<h.length?"?"+h:h},getQueryParam:function(h){h=this.queryPairs[h];return null==h?void 0:this.decodeQueryParam(h)},setQueryParam:function(h,b){this.queryPairs[encodeURIComponent(h)]=encodeURIComponent(b)},removeQueryParam:function(h){delete this.queryPairs[h]},getPathParts:function(h){const b=this.path.split("/");if(!h)for(h=b.length;h;)0===b[--h].length&&b.splice(h,1);return b},toString:function(h){const b=this.path;h=h?this.query?
"?"+this.query:"":this.getQuery();const a=this.anchor;let e=this.toStringThroughPort();b?e+=b:this.host&&(h||a)&&(e+="/");h&&(e+=h);a&&(e+="#"+a);return e},toStringThroughPort:function(){const h=this.protocol,b=this.host,a=this.userInfo,e=this.port;let c="";h&&(c+=h+"://");a&&b&&(c+=a+"@");b&&(c+=b,e&&(c+=":"+e));return c}})})(myt);
(r=>{const v=Math,t=v.PI,m=v.cos,h=v.sin,b=v.sqrt,a=r.Geometry={getClosestPointOnALineToAPoint:(e,c,g,k,f,d,q)=>{g-=e;k-=c;f=(g*(f-e)+k*(d-c))/(g*g+k*k);q&&(f=v.min(1,v.max(0,f)));return{x:e+g*f,y:c+k*f}},isPointInPath:(e,c,g,k)=>{"object"===typeof e&&(k=g,g=c,c=e.y,e=e.x);if(a.rectContainsPoint(e,c,g)&&(g=k.length,6<=g)){let f=!1,d=k[0],q=k[1],x,n;for(;g;)n=k[--g],x=k[--g],n>c!==q>c&&e<(d-x)*(c-n)/(q-n)+x&&(f=!f),d=x,q=n;return f}return!1},rectContainsPoint:(e,c,g,k,f,d)=>{"object"===typeof e&&(d=
f,f=k,k=g,g=c,c=e.y,e=e.x);"object"===typeof g&&(d=g.height,f=g.width,k=g.y,g=g.x);return e>=g&&c>=k&&e<=g+f&&c<=k+d},circleContainsPoint:(e,c,g,k,f)=>a.measureDistance(e,c,g,k,!0)<=f*f,measureDistance:(e,c,g,k,f)=>{e=g-e;c=k-c;c=e*e+c*c;return f?c:b(c)},degreesToRadians:e=>e*t/180,radiansToDegrees:e=>180*e/t,circleContainsLatLng:(e,c,g,k,f,d)=>a.measureLatLngDistance(e,c,g,k,d)<=f,measureLatLngDistance:(e,c,g,k,f)=>{void 0===f&&(f=6371);e=a.degreesToRadians(e);c=a.degreesToRadians(c);g=a.degreesToRadians(g);
k=a.degreesToRadians(k);return f*v.acos(h(e)*h(g)+m(e)*m(g)*m(k-c))},polarToCartesian:(e,c,g,k)=>{g??=0;k??=0;c%=360;if(0===c)c=e,e=0;else if(90===c)c=0;else if(180===c)c=-e,e=0;else if(270===c)c=0,e=-e;else{const f=a.degreesToRadians(c);c=e*m(f);e*=h(f)}return[g+c,k+e]},cartesianToPolar:(e,c,g,k,f)=>{g??=0;k??=0;e-=g;k=c-k;c=b(e*e+k*k);k=v.atan2(k,e);0>k&&(k+=2*t);return[c,f?k:a.radiansToDegrees(k)]}}})(myt);
(r=>{const v=JS.Module;r.Observable=new v("Observable",{attachObserver:function(t,m,h){return t&&m&&h?(this.getObservers(h).push(m,t),!0):!1},detachObserver:function(t,m,h){if(t&&m&&h){var b=this.__obsbt;if(b&&(h=b[h])){b=!1;for(let a=h.length-2;0<=a;a-=2){const [e,c]=h.slice(a);t===c&&m===e&&(h.splice(a,2),b=!0)}return b}}return!1},detachAllObservers:function(){const t=this.__obsbt;if(t)for(const m in t){const h=t[m];for(let b=h.length-2;0<=b;b-=2){const [a,e]=h.slice(b);e&&a&&("function"===typeof e.detachFrom&&
e.detachFrom(this,a,m)||h.splice(b,2))}}},getObservers:function(t){let m;return(m=this.__obsbt??(this.__obsbt={}))[t]??(m[t]=[])},hasObservers:function(t){const m=this.__obsbt;return m?0<m[t]?.length:!1},createEvent:function(t,m){return{source:this,type:t,value:m}},fireEvent:function(t,m,h){if(h=h??(this.hasObservers(t)?this.__obsbt[t]:null)){const b={source:this,type:t,value:m},a=this.__aet??(this.__aet={});if(a[t])r.global.error.notify("warn","eventLoop","Abort refiring event:"+t,null,{observable:this,
type:t,value:m});else{a[t]=!0;for(m=h.length-2;0<=m;m-=2){const [e,c]=h.slice(m);if(c&&e)try{if("function"===typeof e){if(e.call(c,b))break}else if(c[e](b))break}catch(g){r.dumpStack(g),console.log("Additional context",e,c)}}a[t]=!1}}}});r.Observer=new v("Observer",{valueFromEvent:t=>t&&"object"===typeof t&&t.type?t.value:t,syncTo:function(t,m,h,b,a){b??=h;try{this[m](t.createEvent(h,t.get(b)))}catch(e){r.dumpStack(e)}a||this.attachTo(t,m,h,a)},isAttachedTo:function(t,m,h){if(t&&m&&h){var b=this.__obt;
if(b&&(h=b[h]))for(b=h.length-2;0<=b;b-=2){const [a,e]=h.slice(b);if(t===e&&m===a)return!0}}return!1},getObservables:function(t){let m;return(m=this.__obt??(this.__obt={}))[t]??(m[t]=[])},hasObservables:function(t){const m=this.__obt;return m?0<m[t]?.length:!1},attachTo:function(t,m,h,b){if(t&&m&&h){const a=this.getObservables(h);if(b){const e=this,c=m;this.__methodNameCounter??(this.__methodNameCounter=0);m="__DO_ONCE_"+this.__methodNameCounter++;this[m]=g=>{e.detachFrom(t,m,h);delete e[m];return e[c](g)}}if(t.attachObserver(this,
m,h))return a.push(m,t),!0}return!1},detachFrom:function(t,m,h){if(t&&m&&h){var b=this.__obt;if(b&&(b=b[h])){let a=!1;for(let e=b.length-2;0<=e;e-=2){const [c,g]=b.slice(e);t===g&&m===c&&t.detachObserver(this,m,h)&&(b.splice(e,2),a=!0)}return a}}return!1},detachFromAllObservables:function(){var t=this.__obt;if(t)for(const [m,h]of Object.entries(t)){for(t=h.length-2;0<=t;t-=2){const [b,a]=h.slice(t);a.detachObserver(this,b,m)}h.length=0}},constrain:function(t,m){if(t&&m){const b=m.length;if(0!==b%
2)console.log("Observables uneven",this);else{var h;const a=(h=this.__cbmn??(this.__cbmn={}))[t]??(h[t]=[]);if(0<a.length)console.log("Constraint exists for "+t+" on "+this);else{for(h=0;h<b;h+=2){const [e,c]=m.slice(h);e&&c&&(this.attachTo(e,t,c),a.push(e,c))}try{this[t]()}catch(e){r.dumpStack(e)}}}}},releaseConstraint:function(t){if(t){var m=this.__cbmn;if(m&&(m=m[t])){for(let h=m.length;0<=h;h-=2){const [b,a]=m.slice(h);this.detachFrom(b,t,a)}m.length=0}}},releaseAllConstraints:function(){const t=
this.__cbmn;if(t)for(const m in t)this.releaseConstraint(m)}})})(myt);(r=>{let v;r.global=new JS.Singleton("Global",{include:[r.Observable],initialize:function(){v=this},register:(t,m)=>{v.hasOwnProperty(t)&&(console.warn("Global key in use",t),v.unregister(t));v[t]=m;v.fireEvent("register"+t,m)},unregister:t=>{if(v.hasOwnProperty(t)){const m=v[t];delete v[t];v.fireEvent("unregister"+t,m)}else console.warn("Global key not in use",t)}})})(myt);
(r=>{let v;new JS.Singleton("GlobalError",{include:[r.Observable],initialize:function(){v=this;v.setStackTraceLimit(50);v.setConsoleLogging(!0);r.global.register("error",v)},setConsoleLogging:t=>{v.consoleLogging=t},setStackTraceLimit:t=>{Error.stackTraceLimit=v.stackTraceLimit=t},notify:(t,m,h,b,a)=>{b??=Error(h??m);b=b.stack??b.stacktrace;v.fireEvent(m??"error",{msg:h,stacktrace:b,...a});if(v.consoleLogging&&t)console[t](b)}})})(myt);
(r=>{const v=global,t=v.getComputedStyle,m=document,h=Math.max,b=c=>{const {zIndex:g,opacity:k}=t(c);if("auto"===g){if(1===parseInt(k,10)){let f=0;c=c.childNodes;let d=c.length;for(;d;){const q=c[--d];1===q.nodeType&&(f=h(f,b(q)))}return f}return 0}return parseInt(g,10)},a=(c,g)=>{const k=[];for(;c;){k.push(c);if(c===g)break;c=c.parentNode}return k},e=r.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(c,g,k)=>{c=m.createElement(c);for(const f in k)c[f]=k[f];for(const f in g)c.style[f]=
g[f];return c},isDomElementVisible:c=>{if("INPUT"!==c.nodeName||"hidden"!==c.type)for(;c;){if(c===m)return!0;const {display:g,visibility:k}=t(c);if("none"===g||"hidden"===k)break;c=c.parentNode}return!1},getZIndexRelativeToAncestor:(c,g)=>{if(c&&g)for(c=a(c,g),g=c.length-1;g;){const k=t(c[--g]),f=k.zIndex,d="auto"===f;if(0===g||!d||1!==parseInt(k.opacity,10))return d?0:parseInt(f,10)}return 0},getAncestorArray:a,getHighestZIndex:b,getRelativePosition:(c,g)=>{if(c){let k=0,f=0;for(;c&&"BODY"!==c.nodeName&&
c!==g;)if(k+=c.offsetLeft,f+=c.offsetTop,(c=c.offsetParent)&&"BODY"!==c.nodeName){const {borderLeftWidth:d,borderTopWidth:q}=t(c);k+=parseInt(d,10)-c.scrollLeft;f+=parseInt(q,10)-c.scrollTop}return{x:k,y:f}}},getTruePosition:c=>{if(c)return c=c.getBoundingClientRect(),c.left+=v.scrollX,c.top+=v.scrollY,c},simulateDomEvent:(c,g,k)=>{if(c){const f={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},d={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(k)for(const x in k)f[x]=k[x];let q;for(const x in d)if(d[x].test(g)){q=x;break}if(!q)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(m.createEvent)k=m.createEvent(q),"HTMLEvents"===q?k.initEvent(g,f.bubbles,f.cancelable):k.initMouseEvent(g,f.bubbles,f.cancelable,m.defaultView,f.button,f.pointerX,f.pointerY,f.pointerX,f.pointerY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,null),c.dispatchEvent(k);
else{f.clientX=f.pointerX;f.clientY=f.pointerY;k=m.createEventObject();for(const x in f)k[x]=f[x];c.fireEvent("on"+g,k)}}},getScrollbarSize:r.memoize(()=>{const c=m.body,g=e.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});c.appendChild(g);const k=g.offsetWidth-g.clientWidth;c.removeChild(g);return k})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(c){if(Array.isArray(c)){const [g,
k]=c;this.__oE=g;this.__iE=k;this.__iS=k.style;this.__oS=g.style;k.model=g.model=this}else this.__oE=this.__iE=c,this.__iS=this.__oS=c.style,c.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(c){this.__iE.className=this.domClass=c},addDomClass:function(c){const g=this.__iE.className;this.setDomClass((g?
g+" ":"")+c)},removeDomClass:function(c){var g=this.__iE.className;if(g){g=g.split(" ");let k=g.length;for(;k;)g[--k]===c&&g.splice(k,1);this.setDomClass(g.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(c){this.__iE.id=this.domId=c},setZIndex:function(c){this.__oS.zIndex=c},setStyleProperty:function(c,g){this.__iS[c]=g},getPagePosition:function(c){return e["get"+(c?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){e.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return b(this.__iE)},getHighestChildZIndex:function(c){const g=this.__iE.childNodes;let k=g.length,f=0;for(;k;){const d=g[--k];1===d.nodeType&&d!==c&&(f=h(f,b(d)))}return f},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(c,g){(g?this.__iE:this.__oE).scrollTop=c||0}})})(myt);
(r=>{let v;const t=h=>{for(;h.lastChild;)h=h.lastChild;return h},m=(h,b)=>{v.lastTraversalWasForward=h;let a=document.body,e=a;var c=document.activeElement;let g=e,k;const f=h?"getNextFocus":"getPrevFocus";c&&(g=e=c,(c=e.model)??(c=v.findModelForDomElement(e)),c&&(b=c.getFocusTrap(b))&&(a=b.getIDE()));for(;g;){if(g.model&&g.model[f]&&(k=g.model[f]()))g=k.getIDE();else if(h)if(g.firstChild)g=g.firstChild;else{if(g===a)return e.model;if(g.nextSibling)g=g.nextSibling;else for(;g&&(g=g.parentNode,g!==
a);)if(g.nextSibling){g=g.nextSibling;break}}else g=g===a?t(a):g.previousSibling?t(g.previousSibling):g.parentNode;if(g===e)return e.model;if(1===g.nodeType)if((c=g.model)&&c instanceof r.View){if(c.isFocusable())return c}else if(b=g.nodeName,!("A"!==b&&"AREA"!==b&&"INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b&&"BUTTON"!==b||g.disabled||isNaN(g.tabIndex))&&r.DomElementProxy.isDomElementVisible(g)&&(c=v.findModelForDomElement(g),!c?.searchAncestorsOrSelf(d=>!0===d.maskFocus))){g.focus();v.focusedDom=g;
break}}};new JS.Singleton("GlobalFocus",{include:[r.Observable],initialize:function(){this.lastTraversalWasForward=!0;r.global.register("focus",v=this)},setFocusedView:h=>{if(v.focusedView!==h){v.prevFocusedView=v.focusedView;if(v.focusedView=h)v.focusedDom=null;v.fireEvent("focused",h)}},notifyFocus:h=>{v.focusedView!==h&&v.setFocusedView(h)},notifyBlur:h=>{v.focusedView===h&&v.setFocusedView(null)},clear:()=>{v.focusedView?v.focusedView.blur():v.focusedDom&&(v.focusedDom.blur(),v.focusedDom=null)},
next:h=>{m(!0,h)?.focus()},prev:h=>{m(!1,h)?.focus()},findModelForDomElement:h=>{for(;h;){let b=h.model;if(b&&b instanceof r.View)return b;h=h.parentNode}}})})(myt);
(r=>{const v=JS.Module,t=r.global,m=t.focus,h=()=>({source:null,type:null,value:null}),b=q=>{q=q.value??q;return(q.target??q.srcElement).model},a=r.KeyObservable=new v("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:h(),getKeyFromEvent:q=>q.value.key,getCodeFromEvent:q=>q.value.code,isEnterKeyEvent:q=>q.value.code===t.keys.CODE_ENTER,isEscKeyEvent:q=>q.value.code===t.keys.CODE_ESC,isShiftKeyEvent:q=>t.keys.isShiftCode(q.value.code)},createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,
x,n,a)??this.callSuper(q,x,n)}}),e=r.MouseObservable=new v("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:h(),getMouseFromEvent:q=>({x:q.value.pageX,y:q.value.pageY}),getMouseFromEventRelativeToView:(q,x)=>{x=x.getPagePosition();q=e.getMouseFromEvent(q);q.x-=x.x;q.y-=x.y;return q}},createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,x,n,e,!0)??this.callSuper(q,x,n)}}),c=r.ScrollObservable=
new v("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:h(),getScrollFromEvent:q=>{const {scrollLeft:x,scrollTop:n}=b(q);return{x,y:n}}},createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,x,n,c)??this.callSuper(q,x,n)}}),g=r.TouchObservable=new v("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:h()},createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,x,n,g,!1)??this.callSuper(q,x,n)}}),k=r.FocusObservable=
new v("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:h()},initNode:function(q,x){this.focusable=!1;this.focusIndicator=!0;this.callSuper(q,x)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(q){this.focused!==q&&(this.focused=q,this.inited&&(this.fireEvent("focused",q),q?m.notifyFocus(this):m.notifyBlur(this)))},setFocusable:function(q){if(this.focusable!==q){const x=this.focusable;(this.focusable=q)?(this.getIDE().tabIndex=0,this.attachToDom(this,"__doFocus",
"focus"),this.attachToDom(this,"__doBlur","blur")):x&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",q)}},setFocusIndicator:function(q){this.focusIndicator!==q&&(this.focusIndicator=q,this.focused&&(q?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(m.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(q=>!0===q.maskFocus)},focus:function(q){this.isFocusable()&&this.getIDE().focus({preventScroll:q})},blur:function(){this.getIDE().blur()},__doFocus:function(q){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(q){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const q=this.getIDS();q.outlineWidth="thin";q.outlineColor="#8bf";q.outlineStyle="solid";q.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(q,x,n){if(k.EVENT_TYPES[n]){const l=this;return w=>{w??=window.event;if(l._ignoreFocus)w.cancelBubble=!0,w.stopPropagation?.(),w.preventDefault();
else{var C=k.EVENT;C.source=l;C.type=w.type;C.value=w;q[x](C)||(w.cancelBubble=!0,w.stopPropagation?.());C.source=void 0}}}return this.callSuper(q,x,n)}}),f=r.InputObservable=new v("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:h()},createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,x,n,f)??this.callSuper(q,x,n)}}),d=r.DragDropObservable=new v("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:h()},
createDomHandler:function(q,x,n){return this.createStandardDomHandler(q,x,n,d,!0)??this.callSuper(q,x,n)}});r.DomObservable=new v("DomObservable",{attachDomObserver:function(q,x,n,l,w){if(q&&x&&n){l=!!l;const C=this.createDomHandler(q,x,n);if(C){const F=this.__dobsbt??(this.__dobsbt={}),I=F[n];I?I.push(q,x,C,l):F[n]=[q,x,C,l];r.addEventListener(this.getDomElementForDomObservable(n),n,C,l,w);return!0}}return!1},getDomElementForDomObservable:function(q){return this.getIDE()},createDomHandler:(q,x,n)=>
null,createStandardDomHandler:function(q,x,n,l,w){if(l.EVENT_TYPES[n]){const C=this,F=l.EVENT;return I=>{I??=window.event;F.source=C;F.type=I.type;F.value=I;q[x](F)||(I.cancelBubble=!0,I.stopPropagation?.(),w&&I.preventDefault());F.source=void 0}}},detachDomObserver:function(q,x,n,l){if(q&&x&&n){l=!!l;var w=this.__dobsbt;if(w&&(w=w[n])){const C=this.getDomElementForDomObservable(n);let F=!1;for(let I=w.length-4;0<=I;I-=4){const [A,u,p,y]=w.slice(I,I+4);q===A&&x===u&&l===y&&(C&&r.removeEventListener(C,
n,p,l),w.splice(I,4),F=!0)}return F}}return!1},detachAllDomObservers:function(){var q=this.__dobsbt;if(q)for(const [x,n]of Object.entries(q)){for(q=n.length-2;0<=q;q-=4){const [l,w]=n.slice(q);r.removeEventListener(this.getDomElementForDomObservable(x),x,l,w)}n.length=0}}});r.DomObserver=new v("DomObserver",{extend:{getSourceViewFromEvent:b},attachToDom:function(q,x,n,l,w){if(q&&x&&n){l=!!l;let C;const F=(C=this.__dobt??(this.__dobt={}))[n]??(C[n]=[]);q.attachDomObserver(this,x,n,l,w)&&F.push(l,x,
q)}},detachFromDom:function(q,x,n,l){if(q&&x&&n){l=!!l;var w=this.__dobt;if(w&&(w=w[n])){let C=!1;for(let F=w.length-3;0<=F;F-=3){const [I,A,u]=w.slice(F);q===u&&x===A&&l===I&&q.detachDomObserver(this,x,n,l)&&(w.splice(F,3),C=!0)}return C}}return!1},detachFromAllDomSources:function(){var q=this.__dobt;if(q)for(const [x,n]of Object.entries(q)){for(q=n.length-3;0<=q;q-=3){const [l,w,C]=n.slice(q);C.detachDomObserver(this,w,x,l)}n.length=0}}})})(myt);
(r=>{let v;const t=r.global,m=t.focus,h=new Set,b="Firefox"===BrowserDetect.browser,a=b?"OSLeft":"MetaLeft",e=b?"OSRight":"MetaRight",c=r.KeyObservable.getCodeFromEvent,g=()=>h.has("ShiftLeft")||h.has("ShiftRight"),k=()=>h.has("ControlLeft")||h.has("ControlRight"),f=()=>h.has("AltLeft")||h.has("AltRight"),d=()=>h.has(a)||h.has(e),q=(n,l)=>{switch(n){case "Backspace":return n=l.nodeName,!("TEXTAREA"===n||"INPUT"===n&&("text"===l.type||"number"===l.type||"password"===l.type)||"DIV"===n&&"true"===l.contentEditable&&
l.firstChild);case "Tab":return!0}return!1},x=(n,l)=>{["keydown","keypress","keyup"].forEach(w=>{v[l](n,"__hndl_"+w,w)})};new JS.Singleton("GlobalKeys",{include:[r.DomElementProxy,r.DomObservable,r.DomObserver,r.KeyObservable,r.Observable,r.Observer],initialize:function(){t.register("keys",v=this);v.CODE_ENTER="Enter";v.CODE_ESC="Escape";v.CODE_SPACE="Space";v.CODE_ARROW_LEFT="ArrowLeft";v.CODE_ARROW_UP="ArrowUp";v.CODE_ARROW_RIGHT="ArrowRight";v.CODE_ARROW_DOWN="ArrowDown";v.CODE_DELETE="Delete";
v.CODE_BACKSPACE="Backspace";"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(n=>{v["CODE_"+n]="Key"+n});"1234567890".split("").forEach(n=>{v["CODE_"+n]="Digit"+n});v.ARROW_KEYS=[v.CODE_ARROW_LEFT,v.CODE_ARROW_UP,v.CODE_ARROW_RIGHT,v.CODE_ARROW_DOWN];v.LIST_KEYS=[v.CODE_ENTER,v.CODE_SPACE,v.CODE_ESC,...v.ARROW_KEYS];v.setDomElement(document);v.attachTo(m,"__hndl_focused","focused");x(v,"attachToDom");global.onblur=()=>{h.clear()}},isShiftKeyDown:g,isControlKeyDown:k,isAltKeyDown:f,isMetaKeyDown:d,isShiftCode:n=>
"ShiftLeft"===n||"ShiftRight"===n,isControlCode:n=>"ControlLeft"===n||"ControlRight"===n,isAltCode:n=>"AltLeft"===n||"AltRight"===n,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?d():k(),ignoreFocusTrap:()=>f(),__hndl_focused:n=>{(n=n.value)?(x(v,"detachFromDom"),x(n,"attachToDom")):((n=m.prevFocusedView)&&x(n,"detachFromDom"),x(v,"attachToDom"))},__hndl_keydown:n=>{const l=c(n);n=n.value;q(l,n.target)&&n.preventDefault();d()&&"ShiftLeft"!==l&&"ShiftRight"!==l&&"ControlLeft"!==l&&"ControlRight"!==
l&&"AltLeft"!==l&&"AltRight"!==l?(v.fireEvent("keydown",l),v.fireEvent("keyup",l)):(h.add(l),"Tab"===l&&(n=f(),g()?m.prev(n):m.next(n)),v.fireEvent("keydown",l))},__hndl_keypress:n=>{v.fireEvent("keypress",c(n))},__hndl_keyup:n=>{const l=c(n);n=n.value;q(l,n.target)&&n.preventDefault();h.delete(l);v.fireEvent("keyup",l)}})})(myt);
(r=>{const v=JS.Module,t=Math.max,m=(k,f,d,q,x=0)=>{const n=k.length;for(let l=d;x<n;x++)c(k[x],f,l),q&&(l+=d)},h=(k,f,d,q=0)=>{const x=k.length;for(let n=f;q<x;)k[q++].crossPos+=n,d&&(n+=f)},b=(k,f)=>f?k.getFlexBasisWidth():k.getFlexBasisHeight(),a=(k,f,d,q)=>{k[f?"setWidthViaFlex":"setHeightViaFlex"]((q?b(k,f):0)+d)},e=(k,f,d)=>{k[f?"setXViaFlex":"setYViaFlex"](d,!1)},c=(k,f,d)=>{k[f?"setXViaFlex":"setYViaFlex"](d,!0)},g=(k,f,d)=>{k[f]!==d&&(k[f]=d,k.inited&&k.fireEvent(f,d),k.updateFlexboxLayout())};
r.FlexboxSupport=new v("FlexboxSupport",{initNode:function(k,f){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(k,f);this.updateFlexboxLayout()},setWidth:function(k){const f=this.width;this.callSuper(k);f!==this.width&&this.updateFlexboxLayout()},setHeight:function(k){const f=this.height;this.callSuper(k);f!==this.height&&this.updateFlexboxLayout()},
setDirection:function(k){g(this,"direction",k)},setWrap:function(k){g(this,"wrap",k)},setJustifyContent:function(k){g(this,"justifyContent",k)},setAlignItems:function(k){g(this,"alignItems",k)},setAlignContent:function(k){g(this,"alignContent",k)},setRowGap:function(k){g(this,"rowGap",t(0,k))},setColumnGap:function(k){g(this,"columnGap",t(0,k))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(k){this.set("totalBasisWidth",
k,!0)},setTotalBasisHeight:function(k){this.set("totalBasisHeight",k,!0)},ignoreSubviewForFlex:function(k){return k&&"function"===typeof k.ignoreFlex?k.ignoreFlex():!0},setFlexboxPaused:function(k,f){this.__flexboxPaused!==k&&((this.__flexboxPaused=k)||f||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(k){this.callSuper(k);k&&!this.ignoreSubviewForFlex(k)&&this.updateFlexboxLayout()},subviewRemoved:function(k){this.callSuper(k);!k||this.ignoreSubviewForFlex(k)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(k){this.callSuper(k);k&&this.ignoreSubviewForFlex(k)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(k){return k?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(k){return k?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(k){this._updateAgain=k},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const k=this;if(k.isOKToUpdateLayout()){var f=k.getSubviewsInLexicalOrder().filter(l=>!0!==k.ignoreSubviewForFlex(l)&&!0===l.visible),d=f.length;if(0<d){k.__isUpdatingFlexboxLayout=!0;var q=k.direction;const l=q.startsWith("row"),w=!l;var x=k.getWidthForFlexboxLayout(),n=k.getHeightForFlexboxLayout();const C=l?k.columnGap:k.rowGap,F=l?x:n,I=l?k.rowGap:k.columnGap;
n=l?n:x;const A=k.isWrapNotAllowed(),u=k.justifyContent,p=k.alignItems;x=A?"stretch":k.alignContent;q.endsWith("Reverse")&&f.reverse();let y=0,z=0,D=0,H=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:D,crossSize:0};q=[K];for(let J=0;J<d;){const M=f[J++],O=b(M,l),V=M.getShrink(),X=M.getGrow();!A&&0<K.items.length&&y+(0===H?0:C)+O>F&&(K.extraSize=F-y,D+=K.crossSize+I,z=t(z,y),H=y=0,K={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:D,crossSize:0},q.push(K));
0!==H&&(y+=C);0<V&&0<O&&(K.shrinkCount+=V,K.shrinkBasis+=O*V);0<X&&(K.growCount+=X);K.crossSize=t(K.crossSize,b(M,w));e(M,l,y);a(M,l,O);y+=O;K.items.push(M);H++}K.extraSize=F-y;D+=K.crossSize;z=t(z,y);if(k.isCompactOnMainAxis(l)){let J=q.reduce((M,O)=>null==M?O.extraSize:Math.min(M,O.extraSize),null);0!==J&&q.forEach(M=>{M.extraSize-=J})}k[l?"setTotalBasisWidth":"setTotalBasisHeight"](z);k[l?"setTotalBasisHeight":"setTotalBasisWidth"](D);f=q.length;1<f&&"wrapReverse"===k.wrap&&(q.forEach(J=>{J.crossPos=
D-(J.crossPos+J.crossSize)}),q.reverse());if(!k.isCompactOnCrossAxis(l))switch(d=n-D,x){default:case "start":break;case "end":h(q,d,!1);break;case "center":h(q,d/2,!1);break;case "spaceBetween":1<f&&h(q,d/(f-1),!0,1);break;case "spaceAround":d<=I?h(q,d/2,!1):(h(q,I/2,!1),d-=I,h(q,d/(2*f),!0),h(q,d/(2*f),!0,1));break;case "spaceEvenly":d<=2*I?h(q,d/2,!1):(h(q,I,!1),h(q,(d-2*I)/(f+1),!0));break;case "stretch":const J=d/f;let M=0;q.forEach(O=>{O.crossSize+=J;O.crossPos+=M;M+=J})}q.forEach(J=>{const M=
J.items;let O=J.extraSize;if(0<O)if(0<J.growCount){const Q=O/J.growCount;let R=0;M.forEach(Y=>{0<R&&c(Y,l,R);const W=Y.getGrow()*Q;0<W&&(a(Y,l,W,!0),R+=W)})}else{const Q=M.length;switch(u){default:case "start":break;case "end":m(M,l,O,!1);break;case "center":m(M,l,O/2,!1);break;case "spaceBetween":1<Q&&m(M,l,O/(Q-1),!0,1);break;case "spaceAround":O<=C?m(M,l,O/2,!1):(m(M,l,C/2,!1),O-=C,m(M,l,O/(2*Q),!0),m(M,l,O/(2*Q),!0,1));break;case "spaceEvenly":O<=2*C?m(M,l,O/2,!1):(m(M,l,C,!1),O-=2*C,m(M,l,O/
(Q+1),!0))}}else if(0>O&&0<J.shrinkCount){const Q=J.shrinkBasis;let R=0;M.forEach(Y=>{0>R&&c(Y,l,R);const W=Y.getShrink()*b(Y,l)/Q*t(O,-Q);0>W&&(a(Y,l,W,!0),R+=W)})}let V=!1;const X=J.crossSize,U=J.crossPos;M.forEach(Q=>{switch(Q.getAlignSelf()||p){case "start":e(Q,w,U);a(Q,w,b(Q,w),!1);break;case "end":e(Q,w,U+X-b(Q,w));a(Q,w,b(Q,w),!1);break;case "center":e(Q,w,U+(X-b(Q,w))/2);a(Q,w,b(Q,w),!1);break;case "baseline":V=!0;e(Q,w,U+(X-b(Q,w))/2+Q.getFlexBaselineOffset(l));a(Q,w,b(Q,w),!1);break;default:e(Q,
w,U),a(Q,w,X,!1)}});V&&k.updateFlexboxLayoutBaselineAdjustment(M,l,U)});k.__isUpdatingFlexboxLayout=!1;k.isUpdateAgain()&&!k.__UPDATE_AGAIN_LOOP_PROTECTION&&(k.setUpdateAgain(!1),k.__UPDATE_AGAIN_LOOP_PROTECTION=!0,k.updateFlexboxLayout(),k.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else k.setTotalBasisWidth(0),k.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(k,f,d)=>{}});r.FlexboxChildSupport=new v("FlexboxChildSupport",{setVisible:function(k){this.visible!==k&&(this.callSuper(k),this.updateFlexboxLayoutFromChild())},
setXViaFlex(k,f){f&&(k+=this.x);this.x!==k&&(this.__isFlexUpdate=!0,this.setX(k),this.__isFlexUpdate=!1)},setYViaFlex(k,f){f&&(k+=this.y);this.y!==k&&(this.__isFlexUpdate=!0,this.setY(k),this.__isFlexUpdate=!1)},setWidth:function(k){const f=this.width!==k;f&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(k);f&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(k){this.width!==k&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(k),this.__isFlexUpdate=
!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(k){const f=this.height!==k;f&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(k);f&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(k){this.height!==k&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(k),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:k=>0,setIgnoreFlex:function(k){this.__ignoreFlex!==
k&&(this.__ignoreFlex=k,this.inited&&(this.fireEvent("ignoreFlex",k),this.isChildOfFlexbox()&&this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(k){k=t(0,k);this.grow!==k&&(this.grow=k,this.inited&&(this.fireEvent("grow",k),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(k){k=t(0,k);this.shrink!==k&&(this.shrink=k,this.inited&&(this.fireEvent("shrink",k),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},
setAlignSelf:function(k){this.alignSelf!==k&&(this.alignSelf=k,this.inited&&(this.fireEvent("alignSelf",k),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const k=this.alignSelf;return"auto"===k||""===k?null:k},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?
this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(r=>{const v=new Map,t=new Map,m=(e,c)=>c+e.charAt(0).toUpperCase()+e.slice(1),h=e=>t.get(e)??(t.set(e,m(e,"set")),t.get(e)),b=e=>v.get(e)??(v.set(e,m(e,"get")),v.get(e)),a=(e,c)=>{let g;for(const k in c){const f=c[k],d=h(k);if(d in e)e[d](f);else e[k]!==f&&(e[k]=f,(g??=!1!==e.inited&&e.fireEvent)&&e.fireEvent(k,f))}};r.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:h,generateGetterName:b,generateName:m,createSetterFunction:(e,c)=>{const g=h(c);e[g]&&console.log("Overwriting setter",
g);e[g]=function(k){this[c]!==k&&(this[c]=k,this.inited&&this.fireEvent(c,k))}},createGetterFunction:(e,c)=>{const g=b(c);e[g]&&console.log("Overwriting getter",g);e[g]=function(){return this[c]}}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(e,c){e?.forEach(g=>{this[g]=c[g];delete c[g]})},callSetters:function(e){var c=this.earlyAttrs,g=this.lateAttrs;if(c||g){e={...e};if(c){var k=c.length;for(var f=0;f<k;){const q=c[f++];q in e&&(this.set(q,e[q]),delete e[q])}}let d;if(g)for(d=[],c=g.length,k=0;k<c;)f=g[k++],f in e&&(d.push(f,e[f]),delete e[f]);a(this,e);if(d)for(g=d.length,e=0;e<g;)this.set(d[e++],d[e++])}else a(this,e)},get:function(e){const c=b(e);return c in self?this[c]():
this[e]},set:function(e,c,g){if(!g&&(g=h(e),g in this))return this[g](c);this[e]!==c&&(this[e]=c,!1!==this.inited&&this?.fireEvent(e,c))}})})(myt);myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var r=this.__meta__;if(r){var v=Object.keys(r);for(let t=v.length;0<t;)delete r[v[--t]]}r=Object.keys(this);for(v=r.length;0<v;)delete this[r[--v]];this.destroyed=!0}}});
(r=>{const v=JS.Class,t=JS.Module;let m;const h=(f,d)=>d?(m=f).__op??(m.__op=[]):f.__op;let b;const a=(f,d)=>d?(b=f).__actives??(b.__actives=[]):f.__actives,e=new v("AbstractPool",{include:[r.Destructible],initialize:()=>{},destroy:function(){const f=h(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=h(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){h(this,!0).push(this.cleanInstance(f))},cleanInstance:f=>
{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=h(this);if(f){let d=f.length;for(;d;){const q=f[--d];"function"===typeof q.destroy&&q.destroy()}}}}),c=r.SimplePool=new v("SimplePool",e,{initialize:function(f,d){this.callSuper();this.instanceClass=f??Object;this.instanceParent=d},createInstance:function(f){var d=this.instanceParent,q=this.instanceClass;return d?new q(d,f):new q}}),g=new t("TrackActives",{destroy:function(){const f=a(this);f&&(f.length=0);this.callSuper()},
getInstance:function(){const f=this.callSuper();a(this,!0).push(f);return f},putInstance:function(f){var d=a(this);if(d){const q=d.indexOf(f);if(-1<q){d.splice(q,1);this.callSuper(f);return}d="inactive"}else d="missing";console.warn("Tried to put a "+d+" instance",f,this)},getActives:function(f){const d=a(this);if(d){if(f){const q=[],x=d.length;for(let n=0;x>n;){const l=d[n++];f.call(this,l)&&q.push(l)}return q}return d.slice()}return[]},putActives:function(){const f=a(this);if(f){let d=f.length;
for(;d;)this.putInstance(f[--d])}}}),k=r.TrackActivesPool=new v("TrackActivesPool",c,{include:[g]});r.TrackActivesMultiPool=new v("TrackActivesMultiPool",e,{initialize:function(f,d){this.callSuper();this.instanceClassesByKey=f;const q=this._poolsByClassName={},x=this.__pbk={};for(const n in f){const l=f[n];x[n]=q[l.__displayName]=new k(l,d)}},destroy:function(){const f=this.__pbk;for(const d in f)f[d].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],d=this.__pbk[f];if(d)return d.getInstance(arguments);
console.warn("No pool for key",f)},putInstance:function(f){const d=this._poolsByClassName[f.klass.__displayName];d?d.putInstance(f):console.warn("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const d in f)f[d].destroyPooledInstances()},getActives:function(f){let d=[];const q=this.__pbk;for(const x in q)d.push(...q[x].getActives(f));return d},putActives:function(){const f=this.__pbk;for(const d in f)f[d].putActives()}});r.Reusable=new t("Reusable",{clean:()=>{}})})(myt);
(r=>{const v=(a,e)=>{if(e)for(;a;){if(e(a))return a;a=a.parent}},t=(a,e)=>{const c=e.name;void 0===a[c]?a[c]=e:console.warn("Name in use",c)},m=(a,e)=>{const c=e.name;a[c]===e?delete a[c]:console.warn("Name not in use",c)};let h;const b=a=>(h=a).__animPool??(h.__animPool=new r.TrackActivesPool(r.Animator,a));r.Node=new JS.Class("Node",{include:[r.AccessorSupport,r.Destructible,r.Observable,r.Observer],extend:{getMatchingAncestorOrSelf:v,getMatchingAncestor:(a,e)=>v(a?a.parent:null,e),DEFAULT_PLACEMENT:"*"},
initialize:function(a,e,c){if(c){const g=c.length;for(let k=0,f;g>k;)(f=c[k++])?this.extend(f):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.initNode(a,e??{})},initNode:function(a,e){this.callSetters(e);this.setParent(a);this.inited=!0},destroy:function(){const a=this.subnodes;this.isBeingDestroyed=!0;if(a)for(let e=a.length;0<e;)a[--e].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();
this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(a){if(a&&!this.ignorePlacement){var e=this.placement??a.defaultPlacement;e&&(a=a.determinePlacement(e,this))}if(this.parent!==a&&!a?.destroyed){if(e=this.parent){const c=e.getSubnodes().indexOf(this);
-1<c&&(this.name&&m(e,this),e.subnodes.splice(c,1),e.subnodeRemoved(this))}if(this.parent=a)a.getSubnodes().push(this),this.name&&t(a,this),a.subnodeAdded(this);this.inited&&this.fireEvent("parent",a)}},setName:function(a){if(this.name!==a){const e=this.parent;e&&this.name&&m(e,this);this.name=a;e&&a&&t(e,this)}},determinePlacement:function(a,e){let c=a.indexOf("."),g;0<=c&&(g=a.slice(c+1),a=a.slice(0,c));"*"===a&&(a=this.defaultPlacement)&&(c=a.indexOf("."),0<=c&&(g=a.slice(c+1)+(g?"."+g:""),a=a.slice(0,
c)));return(a=this[a])?g?a.determinePlacement(g,e):a:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(a){if(a){if(a===this)return!0;if(this.parent)return this.getIDE&&a.getIDE?a.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(a)}return!1},isAncestorOf:function(a){return a?a.isDescendantOf(this):!1},getLeastCommonAncestor:function(a){for(;a;){if(this.isDescendantOf(a))return a;a=a.parent}},searchAncestorsForClass:function(a){if(a)return this.searchAncestors(e=>
e instanceof a)},searchAncestorsForModule:function(a){if(a)return this.searchAncestors(e=>e.isA(a))},searchAncestors:function(a){return v(this?this.parent:null,a)},searchAncestorsOrSelf:function(a){return v(this,a)},getAncestors:function(){const a=[];let e=this;for(;e;)a.push(e),e=e.parent;return a},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:a=>{},subnodeRemoved:a=>{},animate:function(a){if(a){const e=b(this),c=e.getInstance({ignorePlacement:!0}),g=a.callback;delete a.callback;
c.callSetters(a);c.next(k=>{e.putInstance(c)});g&&c.next(g);c.setRunning(!0);return c}},getActiveAnimators:function(a){if("string"===typeof a){const e=a;a=c=>c.attribute===e}return b(this).getActives(a)},stopActiveAnimators:function(a,e=!1){a=this.getActiveAnimators(a);let c=a.length;if(0<c){const g=b(this);for(;c;){const k=a[--c];k.reset(e);e||g.putInstance(k)}}},doOnceOnIdle:function(a){this.attachTo(r.global.idle,a,"idle",!0)}})})(myt);
(r=>{let v=0,t=!1;const m=JS.Class,h=[],b=f=>{if(t!==f&&(t=f,!f)){for(f=h.length;f;){const d=h[--f];d.__deferredLayout=!1;d.update()}h.length=0}},a=(f,d,q,x)=>{const n=f.getSubviewIndex(d),l=f.subviews;-1<n&&(f=f.getSubviewIndex(q),l.splice(n,1),-1<f?(n<f&&--f,l.splice(f+(x?1:0),0,d)):x?l.push(d):l.unshift(d))},e=(f,d,q)=>{f[d]!==q&&(f[d]=q,f.inited&&(f.fireEvent(d,q),f.update()))},c=r.Layout=new m("Layout",r.Node,{extend:{incrementGlobalLock:()=>{1===++v&&b(!0)},decrementGlobalLock:()=>{0<v&&0===
--v&&b(!1)}},initNode:function(f,d){this.subviews=[];this.locked=!0;this.lockedCounter=1;const q=!0===d.locked;delete d.locked;this.callSuper(f,d);q||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(f){var d=this.parent;if(d!==f){const q=!this.locked;q&&(this.locked=!0);let x,n;if(d){x=this.subviews;for(n=x.length;n;)this.removeSubview(x[--n]);this.detachFrom(d,"__hndlPSA","subviewAdded");this.detachFrom(d,"__hndlPSR","subviewRemoved")}this.callSuper(f);
if(f=this.parent){x=f.getSubviews();n=0;for(d=x.length;d>n;)this.addSubview(x[n++]);this.attachTo(f,"__hndlPSA","subviewAdded");this.attachTo(f,"__hndlPSR","subviewRemoved")}q&&(this.locked=!1,this.inited&&f&&this.update())}},canUpdate:function(){return t?(this.__deferredLayout||(h.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(f){return this.subviews.includes(f)},getSubviewIndex:function(f){return this.subviews.indexOf(f)},addSubview:function(f){this.ignore(f)||
(this.subviews.push(f),this.startMonitoringSubview(f),this.locked||this.update())},startMonitoringSubview:f=>{},startMonitoringAllSubviews:function(){const f=this.subviews;let d=f.length;for(;d;)this.startMonitoringSubview(f[--d])},removeSubview:function(f){if(this.ignore(f))return-1;const d=this.getSubviewIndex(f);-1<d&&(this.stopMonitoringSubview(f),this.subviews.splice(d,1),this.locked||this.update());return d},stopMonitoringSubview:f=>{},stopMonitoringAllSubviews:function(){const f=this.subviews;
let d=f.length;for(;d;)this.stopMonitoringSubview(f[--d])},ignore:f=>f.ignoreLayout,__hndlPSA:function(f){f=f.value;f.parent===this.parent&&this.addSubview(f)},__hndlPSR:function(f){f=f.value;f.parent===this.parent&&this.removeSubview(f)},sortSubviews:function(f){this.subviews.sort(f)},moveSubviewBefore:function(f,d){a(this,f,d,!1)},moveSubviewAfter:function(f,d){a(this,f,d,!0)}});var g=r.ConstantLayout=new m("ConstantLayout",c,{setTargetAttrName:function(f){this.setterName=r.AccessorSupport.generateSetterName(f);
e(this,"targetAttrName",f)},setTargetValue:function(f){e(this,"targetValue",f)},update:function(){if(this.canUpdate()){const f=this.setterName,d=this.targetValue,q=this.subviews,x=q.length;if(f)for(let n=0;x>n;)q[n++][f](d)}}});g=r.VariableLayout=new m("VariableLayout",g,{initNode:function(f,d){this.collapseParent=this.reverse=!1;this.callSuper(f,d)},setCollapseParent:function(f){e(this,"collapseParent",f)},setReverse:function(f){e(this,"reverse",f)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const d=this.setterName,q=this.subviews;var f=q.length;let x=this.targetValue,n,l=0;if(this.reverse)for(n=f;n;)f=q[--n],this.skipSubview(f)||(x=this.updateSubview(++l,f,d,x));else for(n=0;f>n;){const w=q[n++];this.skipSubview(w)||(x=this.updateSubview(++l,w,d,x))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(d,x);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(f){this.attachTo(f,
"update","visible")},stopMonitoringSubview:function(f){this.detachFrom(f,"update","visible")},updateSubview:(f,d,q,x)=>{d[q](x);return x},skipSubview:f=>!f.visible,updateParent:(f,d)=>{}});const k=r.SpacedLayout=new m("SpacedLayout",g,{initNode:function(f,d){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(f,d)},setTargetAttrName:function(f){if(this.targetAttrName!==
f){const d="y"===f,q=this.inited;q&&this.stopMonitoringAllSubviews();this.measureAttrName=d?"boundsHeight":"boundsWidth";this.measureAttrBaseName=d?"height":"width";this.parentSetterName=d?"setHeight":"setWidth";q&&this.startMonitoringAllSubviews();this.callSuper(f)}},setNoAddSubviewOptimization:function(f){this.noAddSubviewOptimization=f},setAxis:function(f){this.setTargetAttrName(this.axis=f)},setInset:function(f){this.setTargetValue(this.inset=f)},setSpacing:function(f){e(this,"spacing",f)},setOutset:function(f){e(this,
"outset",f)},addSubview:function(f){const d=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(f);this.locked=d},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.callSuper(f)},stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.callSuper(f)},updateSubview:function(f,d,q,x){f=d[this.measureAttrName];d[q](x+(f-d[this.measureAttrBaseName])/2);return x+f+this.spacing},updateParent:function(f,d){this.parent[this.parentSetterName](d+
this.outset-this.spacing)}});r.ResizeLayout=new m("ResizeLayout",k,{setCollapseParent:f=>{},setTargetAttrName:function(f){if(this.targetAttrName!==f){if(this.inited){const d="x"===f;this.stopMonitoringParent(d?"height":"width");this.startMonitoringParent(d?"width":"height")}this.callSuper(f)}},setParent:function(f){if(this.parent!==f){const d="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(d);this.callSuper(f);this.parent&&this.startMonitoringParent(d)}},startMonitoringParent:function(f){this.attachTo(this.parent,
"update",f)},stopMonitoringParent:function(f){this.detachFrom(this.parent,"update",f)},doBeforeUpdate:function(){const f=this.measureAttrName,d=this.subviews;let q=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,x=d.length,n=0,l=0;for(;x;){const w=d[--x];this.skipSubview(w)||(++n,0<w.layoutHint?l+=w.layoutHint:q-=w[f])}0!==n&&(this.remainder=q-=(n-1)*this.spacing,this.resizeSum=l,this.scalingFactor=q/l,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===f?
"setWidth":"setHeight")},updateSubview:function(f,d,q,x){var n=d.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,d[this.measureSetter](n));return this.callSuper(f,d,q,x)},startMonitoringSubview:function(f){0<f.layoutHint||this.attachTo(f,"update",this.measureAttrName);this.attachTo(f,"update","visible")},stopMonitoringSubview:function(f){0<f.layoutHint||this.detachFrom(f,"update",
this.measureAttrName);this.detachFrom(f,"update","visible")},updateParent:(f,d)=>{}});r.AlignedLayout=new m("AlignedLayout",g,{initNode:function(f,d){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(f,d)},setTargetAttrName:function(f){if(this.targetAttrName!==f){const d="y"===f,q=this.inited;q&&this.stopMonitoringAllSubviews();this.measureAttrName=
d?"boundsHeight":"boundsWidth";this.measureAttrBaseName=d?"height":"width";this.parentSetterName=d?"setHeight":"setWidth";q&&this.startMonitoringAllSubviews();this.callSuper(f)}},setAlign:function(f){if(this.align!==f){this.align=f;const d=this.locked;this.locked=!0;this.setTargetAttrName("middle"===f||"bottom"===f||"top"===f?"y":"x");this.locked=d;this.inited&&(this.fireEvent("align",f),this.update())}},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.callSuper(f)},
stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.callSuper(f)},doBeforeUpdate:function(){const f=this.measureAttrName,d=this.subviews;let q=0,x=d.length;for(;x;){const n=d[--x];this.skipSubview(n)||(q=q>n[f]?q:n[f])}this.setTargetValue(q)},updateSubview:function(f,d,q,x){switch(this.align){case "center":case "middle":d[q]((x-d[this.measureAttrName])/2);break;case "right":case "bottom":d[q](x-d[this.measureAttrName]);break;default:d[q](0)}return x},updateParent:function(f,
d){this.parent[this.parentSetterName](d)}});r.WrappingLayout=new m("WrappingLayout",g,{initNode:function(f,d){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(f,d)},
setTargetAttrName:function(f){if(this.targetAttrName!==f){const d="y"===f,q=this.inited;q&&this.stopMonitoringAllSubviews();this.measureAttrName=d?"boundsHeight":"boundsWidth";const x=this.measureAttrBaseName=d?"height":"width";this.otherMeasureAttrName=d?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=d?"width":"height";this.parentSetterName=d?"setWidth":"setHeight";this.otherSetterName=d?"setX":"setY";q&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(x));
this.callSuper(f)}},setParent:function(f){if(this.parent!==f){const d="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(d?"height":"width");this.callSuper(f);this.parent&&this.startMonitoringParent(d?"height":"width")}},setAxis:function(f){this.setTargetAttrName(this.axis=f)},setInset:function(f){this.setTargetValue(this.inset=f)},setSpacing:function(f){e(this,"spacing",f)},setOutset:function(f){e(this,"outset",f)},setLineSpacing:function(f){e(this,"lineSpacing",f)},setLineInset:function(f){e(this,
"lineInset",f)},setLineOutset:function(f){e(this,"lineOutset",f)},startMonitoringParent:function(f){this.attachTo(this.parent,"update",f)},stopMonitoringParent:function(f){this.detachFrom(this.parent,"update",f)},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.attachTo(f,"update",this.otherMeasureAttrName);this.callSuper(f)},stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.detachFrom(f,"update",this.otherMeasureAttrName);
this.callSuper(f)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(f,d,q,x){f=d[this.measureAttrName];const n=d[this.otherMeasureAttrName];x+f>this.parentSizeLessOutset||"break"===d.layoutHint?(x=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);d[this.otherSetterName](this.linePos+
(n-d[this.otherMeasureAttrBaseName])/2);d[q](x+(f-d[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,x+f+this.outset);return x+f+this.spacing},updateParent:function(f,d){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});r.createFixedThresholdCounter(c,1,"locked")})(myt);
(r=>{const v=Math.round,t=r.DomElementProxy,m=r.Geometry.rectContainsPoint,h=(d,q)=>{const x=r.global.focus.focusedView,n=d.getIDE();if(x===d||x&&x.isDescendantOf(d))x._ignoreFocus=!0;d=n.scrollTop;const l=n.scrollLeft;q.call();x&&(x._ignoreFocus=!1,x.focus(!0));n.scrollTop=d;n.scrollLeft=l},b=(d,q,x,n)=>{if(q&&"object"===typeof q){if(n&&(n=d.getLeastCommonAncestor(q))){var l=n.getIDE();n=t.getZIndexRelativeToAncestor(d.getODE(),l);l=t.getZIndexRelativeToAncestor(q.getODE(),l);x&&(n*=-1,l*=-1);if(n<
l)return!0;if(l<n)return!1}d=d.getODE().compareDocumentPosition(q.getODE());return x?2===d||10===d:4===d||20===d}return!1},a=d=>{d=d.getAncestors();let q=d.length,x=1,n=1;for(;q;){const l=d[--q];x*=l.scaleX||1;n*=l.scaleY||1;l.__effectiveScaleX=x;l.__effectiveScaleY=n}return{scaleX:x,scaleY:n}},e=(d,q,x)=>{const n=d.getODE();if(m(q,x,0,0,n.offsetWidth*d.__effectiveScaleX,n.offsetHeight*d.__effectiveScaleY)){if(d=d.parent){const l=d.getIDE();return e(d,q+(n.offsetLeft-l.scrollLeft)*d.__effectiveScaleX,
x+(n.offsetTop-l.scrollTop)*d.__effectiveScaleY)}return!0}return!1},c=d=>{switch(d.align){case "center":d.releaseConstraint("__doAlignCenter");break;case "right":d.releaseConstraint("__doAlignRight")}},g=d=>{const q=d.parent;if(q)switch(d.align){case "center":d.constrain("__doAlignCenter",[d,"width",d,"alignOffset",q,"width"]);break;case "right":d.constrain("__doAlignRight",[d,"width",d,"alignOffset",q,"width"]);break;case "left":d.setX(d.alignOffset||0)}},k=d=>{switch(d.valign){case "middle":d.releaseConstraint("__doValignMiddle");
break;case "bottom":d.releaseConstraint("__doValignBottom")}},f=d=>{const q=d.parent;if(q)switch(d.valign){case "middle":d.constrain("__doValignMiddle",[d,"height",d,"valignOffset",q,"height"]);break;case "bottom":d.constrain("__doValignBottom",[d,"height",d,"valignOffset",q,"height"]);break;case "top":d.setY(d.valignOffset||0)}};r.View=new JS.Class("View",r.Node,{include:[t,r.DomObservable,r.DomObserver,r.ScrollObservable,r.FocusObservable,r.KeyObservable,r.MouseObservable],extend:{retainFocusDuringDomUpdate:h},
initNode:function(d,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(d));const x=this.getODS();x.left=x.top="0px";this.callSuper(d,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(d){d=document.createElement(this.tagName??"div");d.style.position="absolute";let q;d.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));
return d},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(d){this.parent!==d&&(this.inited&&(c(this),k(this)),this.callSuper(d),this.align&&g(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},getSubviewsInLexicalOrder:function(){const d=[],q=this.getIDE().children,x=q.length;for(let n=0;n<x;){const l=q[n++].model;l?.parent===this&&d.push(l)}return d},
getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(d=>d!==this)},setFocusTrap:function(d){this.focusTrap=d},setFocusCage:function(d){this.focusCage=d},setMaskFocus:function(d){this.maskFocus=d},setLayoutHint:function(d){this.layoutHint=d},getLayouts:function(){return this.layouts??(this.layouts=[])},setIgnoreLayout:function(d){if(this.ignoreLayout!==d){var q=this.inited&&this.parent;let x;if(d){if(q)for(q=this.parent.getLayouts(),x=q.length;x;)q[--x].removeSubview(this);
this.ignoreLayout=d}else if(this.ignoreLayout=d,q)for(q=this.parent.getLayouts(),x=q.length;x;)q[--x].addSubview(this)}},setDomClass:function(d){this.domClass!==d&&(this.callSuper(d),this.inited&&this.fireEvent("domClass",d))},setDomId:function(d){this.domId!==d&&(this.callSuper(d),this.inited&&this.fireEvent("domId",d))},setAlignOffset:function(d){this.alignOffset!==d&&(this.alignOffset=d,this.inited&&this.fireEvent("alignOffset",d),this.parent&&"left"===this.align&&this.setX(d))},setAlign:function(d){this.align!==
d&&(this.inited&&c(this),this.align=d,this.inited&&(this.fireEvent("align",d),g(this)))},__doAlignCenter:function(d){this.setX(v((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(d){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(d){this.valignOffset!==d&&(this.valignOffset=d,this.inited&&this.fireEvent("valignOffset",d),this.parent&&"top"===this.valign&&this.setY(d))},setValign:function(d){this.valign!==d&&(this.inited&&k(this),
this.valign=d,this.inited&&(this.fireEvent("valign",d),f(this)))},__doValignMiddle:function(d){this.setY(v((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(d){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(d){this.x!==d&&(this.x=d,this.visible&&(this.getODS().left=d+"px"),this.inited&&this.fireEvent("x",d))},setY:function(d){this.y!==d&&(this.y=d,this.visible&&(this.getODS().top=d+"px"),this.inited&&this.fireEvent("y",d))},setWidth:function(d){0>
d&&(d=0);this.width!==d&&(this.width=d,this.getODS().width=d+"px",this.inited&&(this.__updateBounds(d,this.height),this.fireEvent("width",d)))},setHeight:function(d){0>d&&(d=0);this.height!==d&&(this.height=d,this.getODS().height=d+"px",this.inited&&(this.__updateBounds(this.width,d),this.fireEvent("height",d)))},setDomMinWidth:function(d,q){(q?this.getIDS():this.getODS()).minWidth=null!=d?d+"px":null},getDomMinWidth:function(d){d=(d?this.getIDS():this.getODS()).minWidth;return null!=d?Number.parseInt(d):
null},setDomMinHeight:function(d,q){(q?this.getIDS():this.getODS()).minHeight=null!=d?d+"px":null},getDomMinHeight:function(d){d=(d?this.getIDS():this.getODS()).minHeight;return null!=d?Number.parseInt(d):null},setTextColor:function(d){this.textColor!==d&&(this.textColor=d,this.getODS().color=d||"inherit",this.inited&&this.fireEvent("textColor",d))},setBgColor:function(d){this.bgColor!==d&&(this.getODS().backgroundColor=this.bgColor=d,this.inited&&this.fireEvent("bgColor",d))},isColorAttr:d=>"bgColor"===
d||"textColor"===d,setOpacity:function(d){this.opacity!==d&&(this.getODS().opacity=this.opacity=d,this.inited&&this.fireEvent("opacity",d))},setOverflow:function(d){const q=this.overflow;if(q!==d){this.overflow=d;const x=this.getIDS();if("autox"===d)x.overflowX="auto",x.overflowY="hidden";else if("autoy"===d)x.overflowY="auto",x.overflowX="hidden";else{if("autox"===q||"autoy"===q)x.overflowX=x.overflowY=null;x.overflow=d||"visible"}this.inited&&this.fireEvent("overflow",d)}},setVisible:function(d){if(this.visible!==
d){this.visible=d;const q=this.getODS();q.visibility=d?"inherit":"hidden";q.left=d?this.x+"px":"-100000px";q.top=d?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",d)}},setPointerEvents:function(d){this.pointerEvents!==d&&(this.pointerEvents=d,this.getODS().pointerEvents=d||"auto",this.inited&&this.fireEvent("pointerEvents",d))},setCursor:function(d){this.cursor!==d&&(this.cursor=d,this.getODS().cursor=d||"auto",this.inited&&this.fireEvent("cursor",d))},__updateBounds:function(d,q){this.boundsWidth!==
d&&this.fireEvent("boundsWidth",this.boundsWidth=d);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(d){const [q,x,n]=d??[];this.setOutlineWidth(q);this.setOutlineStyle(x);this.setOutlineColor(n)},setOutlineWidth:function(d){this.getODS().outlineWidth=(this.outlineWidth=d||0)+"px"},setOutlineStyle:function(d){this.getODS().outlineStyle=this.outlineStyle=d||"none"},setOutlineColor:function(d){this.getODS().outlineColor=this.outlineColor=d||"#000"},setBorder:function(d){const [q,
x,n]=d??[];this.setBorderWidth(q);this.setBorderStyle(x);this.setBorderColor(n)},setBorderWidth:function(d){this.getODS().borderWidth=(this.borderWidth=d||0)+"px"},setBorderStyle:function(d){this.getODS().borderStyle=this.borderStyle=d||"none"},setBorderColor:function(d){this.getODS().borderColor=this.borderColor=d||"#000"},setRoundedCorners:function(d){this.getODS().borderRadius=d+"px"},setRoundedTopLeftCorner:function(d){this.getODS().borderTopLeftRadius=d+"px"},setRoundedTopRightCorner:function(d){this.getODS().borderTopRightRadius=
d+"px"},setRoundedBottomLeftCorner:function(d){this.getODS().borderBottomLeftRadius=d+"px"},setRoundedBottomRightCorner:function(d){this.getODS().borderBottomRightRadius=d+"px"},setBoxShadow:function(d){const [q,x,n,l]=d??[];this.getODS().boxShadow=d?(q||0)+"px "+(x||0)+"px "+(n||7)+"px "+(l||"#000"):"none"},setGradient:function(d){const q=this.getODS();if(d){let n=d[0];"linear"===n||"radial"===n?d.shift():n="linear";let l=d[0];if("radial"===n){void 0===l?l="closest-side":d.shift();var x=d[0];if(void 0===
x)x="circle";else{switch(x){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",x),x="circle"}d.shift()}let w=d[0];void 0===w?w="center":(w=w.replaceAll("middle","center"),d.shift());l=x+" "+l+" at "+w}else"number"===typeof l?(l+="deg",d.shift()):l?(l="to "+l,d.shift()):l="0deg";x=w=>{d.push(w&&"inherit"!==w?w:"transparent")};2>d.length&&x(this.textColor);2>d.length&&x(this.bgColor);q.background=n+"-gradient("+l+","+d.join(",")+")"}else q.background="none";this.bgColor=
void 0},setTooltip:function(d){this.tooltip!==d&&(this.tooltip=this.getODE().title=d,this.inited&&this.fireEvent("tooltip",d))},isVisible:function(){return null==this.searchAncestorsOrSelf(d=>!d.visible)},getFocusTrap:function(d){return this.searchAncestorsOrSelf(q=>q.focusCage||q.focusTrap&&!d)},subnodeAdded:function(d){d instanceof r.View?(this.getIDE().appendChild(d.getODE()),this.getSubviews().push(d),this.fireEvent("subviewAdded",d),this.subviewAdded(d)):d instanceof r.Layout&&(this.getLayouts().push(d),
this.fireEvent("layoutAdded",d),this.layoutAdded(d))},subnodeRemoved:function(d){let q;d instanceof r.View?(q=this.getSubviewIndex(d),-1<q&&(this.fireEvent("subviewRemoved",d),d.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(d))):d instanceof r.Layout&&(q=this.getLayoutIndex(d),-1<q&&(this.fireEvent("layoutRemoved",d),this.layouts.splice(q,1),this.layoutRemoved(d)))},hasSubview:function(d){return this.getSubviews().includes(d)},getSubviewIndex:function(d){return this.getSubviews().indexOf(d)},
subviewAdded:d=>{},subviewRemoved:d=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},hasLayout:function(d){return this.getLayouts().includes(d)},getLayoutIndex:function(d){return this.getLayouts().indexOf(d)},layoutAdded:d=>{},layoutRemoved:d=>{},isBehind:function(d,q){return b(this,d,!1,q)},isInFrontOf:function(d,q){return b(this,d,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},
sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(d){this.parent.sendSubviewBehind(this,d)},sendInFrontOf:function(d){this.parent.sendSubviewInFrontOf(this,d)},doSubviewsReorderedInDom:d=>{},bringSubviewToFront:function(d){const q=this;if(d?.parent===q){const x=q.getIDE();d.getODE()!==x.lastChild&&h(d,()=>{x.appendChild(d.getODE());q.doSubviewsReorderedInDom(d)})}},sendSubviewToBack:function(d){const q=this;if(d?.parent===q){const x=q.getIDE();d.getODE()!==x.firstChild&&
h(d,()=>{x.insertBefore(d.getODE(),x.firstChild);q.doSubviewsReorderedInDom(d)})}},sendSubviewBehind:function(d,q){const x=this;if(d?.parent===x&&q?.parent===x){const n=x.getIDE();h(d,()=>{n.insertBefore(d.getODE(),q.getODE());x.doSubviewsReorderedInDom(d)})}},sendSubviewInFrontOf:function(d,q){const x=this;if(d?.parent===x&&q?.parent===x){const n=x.getIDE();h(d,()=>{n.insertBefore(d.getODE(),q.getODE().nextSibling);x.doSubviewsReorderedInDom(d)})}},sortSubviews:function(d){const q=this,x=q.getSubviews().sort(d);
h(q,()=>{const n=q.getODE(),l=n.parentNode;let w;l&&(w=n.nextSibling,l.removeChild(n));const C=document.createDocumentFragment(),F=x.length;for(let I=0;F>I;)C.appendChild(x[I++].getODE());q.getIDE().appendChild(C);l?.insertBefore(n,w);q.doSubviewsReorderedInDom(null)})},containsPoint:function(d,q,x){const n=this.getODE();if(!n)return!1;const {x:l,y:w}=t.getRelativePosition(n,x);return m(d,q,l,w,this.width,this.height)},isPointVisible:function(d,q){const {x,y:n}=this.getPagePosition(!0);a(this);return e(this,
d-x,q-n)},getEffectiveScale:function(){return a(this)},getEffectiveScaleX:function(){return a(this).scaleX},getEffectiveScaleY:function(){return a(this).scaleY}})})(myt);
(r=>{const v=(m,h,b)=>{const a=t(m,h);m.getODS().transform=a+(0===a.length?"":" ")+h+"("+b+")"},t=(m,h)=>{m=m.getODS();var b=m.transform;if(!b||0===b.length)return"";b=b.split(" ");let a=b.length;for(;a;)if(b[--a].startsWith(h)){b.splice(a,1);break}return m.transform=b.join(" ")};r.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(m){this.transformOrigin!==m&&(this.transformOrigin=m,this.getODS().transformOrigin=m||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",m)))},setRotation:function(m){this.rotation!==m&&(this.rotation=m,v(this,"rotate",(m||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",m)))},setScale:function(m){const h=this.scaleX!==m,b=this.scaleY!==m;if(h){var a=this.scaleX=m;null==a?t(this,"scaleX"):v(this,"scaleX",a||1)}b&&(a=this.scaleY=m,null==a?t(this,"scaleY"):v(this,"scaleY",a||1));this.inited&&((h||b)&&this.__updateBounds(this.width,this.height),
h&&this.fireEvent("scaleX",m),b&&this.fireEvent("scaleY",m))},setScaleX:function(m){if(this.scaleX!==m){var h=this.scaleX=m;null==h?t(this,"scaleX"):v(this,"scaleX",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",m))}},setScaleY:function(m){if(this.scaleY!==m){var h=this.scaleY=m;null==h?t(this,"scaleY"):v(this,"scaleY",h||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",m))}},setSkewX:function(m){this.skewX!==m&&(this.skewX=
m,v(this,"skewX",m||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",m)))},setSkewY:function(m){this.skewY!==m&&(this.skewY=m,v(this,"skewY",m||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",m)))},__updateBounds:function(m,h){const {rotation:b,scaleX:a,scaleY:e}=this,c=(null==a||1===a)&&(null==e||1===e);if(!c||null!=b&&0!==b&&180!==b)!c||90!==b&&270!==b?{width:m,height:h}=this.getODE().getBoundingClientRect():{width:h,height:m}=
this;this.callSuper(m,h)}})})(myt);
(r=>{const v=JS.Module,t=(a,e)=>{if("auto"===e)a.__hasSetWidth=!1,a.getODS().width="auto",a.sizeViewToDom();else return a.__hasSetWidth=!0},m=(a,e)=>{if("auto"===e)a.__hasSetHeight=!1,a.getODS().height="auto",a.sizeViewToDom();else return a.__hasSetHeight=!0},h=a=>{if(!a.__hasSetWidth){const e=a.getODE().offsetWidth/a.getEffectiveScaleX();a.width!==e&&(a.width=e,a.inited&&a.__updateBounds(e,a.height),a.fireEvent("width",e))}},b=a=>{if(!a.__hasSetHeight){const e=a.getODE().offsetHeight/a.getEffectiveScaleY();
a.height!==e&&(a.height=e,a.inited&&a.__updateBounds(a.width,e),a.fireEvent("height",e))}};r.SizeToDom=new v("SizeToDom",{extend:{sizeWidth:h,sizeHeight:b},initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a){t(this,a)&&this.callSuper(a)},setHeight:function(a){m(this,a)&&this.callSuper(a)},sizeViewToDom:function(){h(this);b(this)}});r.SizeWidthToDom=new v("SizeWidthToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setWidth:function(a,e){t(this,
a)&&this.callSuper(a,e)},sizeViewToDom:function(){h(this)}});r.SizeHeightToDom=new v("SizeHeightToDom",{initNode:function(a,e){this.callSuper(a,e);this.sizeViewToDom()},setHeight:function(a,e){m(this,a)&&this.callSuper(a,e)},sizeViewToDom:function(){b(this)}})})(myt);
(r=>{const v=(b,a,e,c)=>{b[e]!==a&&(b[e]=a,b.getIDS()[e]=a||c||"inherit",b.inited&&(b.fireEvent(e,a),b.sizeViewToDom()))};r.TextSupport=new JS.Module("TextSupport",{setWidth:function(b){this.callSuper(b);"auto"!==b&&(b=this.whiteSpace,"normal"!==b&&"pre-line"!==b&&"pre-wrap"!==b&&"break-spaces"!==b||this.sizeViewToDom())},setText:function(b){b||="";b=this.valueFromEvent(b);this.text!==b&&(this.getIDE().innerHTML=this.text=b,this.inited&&(this.fireEvent("text",b),this.sizeViewToDom()))},setTextOverflow:function(b){this.textOverflow!==
b&&(this.textOverflow=b,this.getIDS().textOverflow=b||"inherit",this.inited&&this.fireEvent("textOverflow",b))},setTextAlign:function(b){this.textAlign!==b&&(this.textAlign=b,this.getIDS().textAlign=b||"inherit",this.inited&&this.fireEvent("textAlign",b))},setWhiteSpace:function(b){v(this,b,"whiteSpace")},setWordWrap:function(b){v(this,b,"wordWrap","normal")},setTextIndent:function(b){v(this,b,"textIndent")},setTextTransform:function(b){v(this,b,"textTransform")},setTextDecoration:function(b){v(this,
b,"textDecoration")},setLineHeight:function(b){v(this,b,"lineHeight")},setLetterSpacing:function(b){v(this,b,"letterSpacing")},setWordSpacing:function(b){v(this,b,"wordSpacing")},setFontFamily:function(b){v(this,b,"fontFamily")},setFontStyle:function(b){v(this,b,"fontStyle")},setFontVariant:function(b){v(this,b,"fontVariant")},setFontWeight:function(b){v(this,b,"fontWeight")},setFontSize:function(b){v(this,b,"fontSize")},setUserUnselectable:function(b){this.userUnselectable!==b&&(this.userUnselectable=
b,this[b?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(b?"default":"text"),this.inited&&this.fireEvent("userUnselectable",b))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(b,a,e,c){this.getIDS().textShadow=(b||0)+"px "+(a||0)+"px "+(null!=e?e:2)+"px "+(c||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const t=(b,a,e)=>{const c="padding"+e;a=Math.max(a,0);b[c]!==a&&(b[c]=a,b.getIDS()[c]=a+"px",b.fireEvent(c,a),"Left"===e||"Right"===e?m(b):h(b))},m=b=>{b.__hasSetWidth&&(b.getODS().width=b.width-(b.paddingLeft||0)-(b.paddingRight||0)+"px",b.inited&&b.sizeViewToDom())},h=b=>{b.__hasSetHeight&&(b.getODS().height=b.height-(b.paddingTop||0)-(b.paddingBottom||0)+"px",b.inited&&b.sizeViewToDom())};r.PaddedTextSupport=new JS.Module("PaddedTextSupport",{setWidth:function(b){this.callSuper(b);m(this)},
setHeight:function(b){this.callSuper(b);h(this)},setPadding:function(b){let a,e,c;b||=0;"object"===typeof b?(a=b.top||0,e=b.right||0,c=b.bottom||0,b=b.left||0):a=e=c=b;this.setPaddingTop(a);this.setPaddingRight(e);this.setPaddingBottom(c);this.setPaddingLeft(b)},setPaddingTop:function(b){t(this,b,"Top")},setPaddingRight:function(b){t(this,b,"Right")},setPaddingBottom:function(b){t(this,b,"Bottom")},setPaddingLeft:function(b){t(this,b,"Left")}})})(myt);
(r=>{const v={},t={},m=h=>{const b=h.imageUrl;if(h.calculateNaturalSize&&b){var a=v[b];if(a)h.setNaturalWidth(a.width),h.setNaturalHeight(a.height);else{a=t[b];if(!a){t[b]=a=[];const e=new Image;e.onerror=c=>{if(c=t[b]){let g=c.length;for(;g;)c[--g].setImageLoadingError(!0);c.length=0;delete t[b]}};e.onload=()=>{const c=e.width,g=e.height,k=t[b];if(k){let f=k.length;for(;f;){const d=k[--f];d.imageUrl===b&&(d.setNaturalWidth(c),d.setNaturalHeight(g))}k.length=0;delete t[b]}v[b]={width:c,height:g}};
e.src=b}a.push(h)}}};r.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:h=>v[h]},initNode:function(h,b){b.imageRepeat??(b.imageRepeat="no-repeat");b.imageAttachment??(b.imageAttachment="scroll");this.callSuper(h,b)},setImageUrl:function(h){this.imageUrl!==h&&(this.imageUrl=h,this.getIDS().backgroundImage=h?'url("'+h+'")':"none",this.inited&&(this.fireEvent("imageUrl",h),this.setNaturalWidth(),this.setNaturalHeight(),!h&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
m(this))},setImageLoadingError:function(h){this.set("imageLoadingError",h,!0)},setImageSize:function(h){this.imageSize!==h&&(this.imageSize=h,this.getIDS().backgroundSize=h||"auto",this.inited&&this.fireEvent("imageSize",h))},setImageRepeat:function(h){this.imageRepeat!==h&&(this.getIDS().backgroundRepeat=this.imageRepeat=h,this.inited&&this.fireEvent("imageRepeat",h))},setImagePosition:function(h){this.imagePosition!==h&&(this.getIDS().backgroundPosition=this.imagePosition=h,this.inited&&this.fireEvent("imagePosition",
h))},setImageAttachment:function(h){this.imageAttachment!==h&&(this.getIDS().backgroundAttachment=this.imageAttachment=h,this.inited&&this.fireEvent("imageAttachment",h))},setCalculateNaturalSize:function(h){this.calculateNaturalSize!==h&&(this.calculateNaturalSize=h,this.inited&&this.fireEvent("calculateNaturalSize",h),m(this))},setNaturalWidth:function(h){this.naturalWidth!==h&&(this.naturalWidth=h,this.inited&&this.fireEvent("naturalWidth",h),this.useNaturalSize&&h&&this.setWidth(h))},setNaturalHeight:function(h){this.naturalHeight!==
h&&(this.naturalHeight=h,this.inited&&this.fireEvent("naturalHeight",h),this.useNaturalSize&&h&&this.setHeight(h))},setUseNaturalSize:function(h){this.useNaturalSize!==h&&(this.useNaturalSize=h,this.inited&&this.fireEvent("useNaturalSize",h),h&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),h&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(r=>{const v=JS.Class,t=r.View,m=r.SizeToDom;r.Flexbox=new v("Flexbox",t,{include:[r.FlexboxSupport]});r.Frame=new v("Frame",t,{initNode:function(h,b){b.tagName??(b.tagName="iframe");this.callSuper(h,b);h=r.global.mouse;this.attachToDom(h,"__doMouseDown","mousedown",!0);this.attachToDom(h,"__doMouseUp","mouseup",!0)},createOurDomElement:function(h){h=this.callSuper(h);(Array.isArray(h)?h[1]:h).style.border="0px";return h},setSrc:function(h){this.src!==h&&(this.src=this.getIDE().src=h,this.inited&&
this.fireEvent("src",h))},__doMouseDown:function(h){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(h){this.setPointerEvents(this.__restorePointerEvents);return!0}});r.Markup=new v("Markup",t,{include:[m],setHtml:function(h){this.html!==h&&(this.getIDE().innerHTML=this.html=h,this.inited&&(this.fireEvent("html",h),this.sizeViewToDom()))}});r.Text=new v("Text",t,{include:[m,r.TextSupport],initNode:function(h,b){b.whiteSpace??(b.whiteSpace=
"nowrap");b.userUnselectable??(b.userUnselectable=!0);this.callSuper(h,b)},measureNoWrapWidth:function(){const h=this.__hasSetWidth,b=this.width;if(!h&&"nowrap"===this.whiteSpace)return b;const a=this.getIDS(),e=a.whiteSpace;h&&(a.width="auto");a.whiteSpace="nowrap";const c=this.getODE().getBoundingClientRect().width;a.whiteSpace=e;h&&(a.width=b);return c}});r.PaddedText=new v("PaddedText",r.Text,{include:[r.PaddedTextSupport]});r.Image=new v("Image",t,{include:[r.ImageSupport],initNode:function(h,
b){b.useNaturalSize??(b.useNaturalSize=!0);this.callSuper(h,b)}});r.BackView=new v("BackView",t,{sendSubviewToBack:function(h){if(h.parent===this){const b=this.getIDE(),a=b.childNodes[1];h=h.getODE();h!==a&&(h=b.removeChild(h))&&b.insertBefore(h,a)}}})})(myt);
(r=>{const v=Math.round,t=a=>{a.parent&&0<=a.percentOfParentWidth&&a.syncTo(a.parent,"__doPOPW","width")},m=a=>{0<=a.percentOfParentWidth&&a.detachFrom(a.parent,"__doPOPW","width")},h=a=>{a.parent&&0<=a.percentOfParentHeight&&a.syncTo(a.parent,"__doPOPH","height")},b=a=>{0<=a.percentOfParentHeight&&a.detachFrom(a.parent,"__doPOPH","height")};r.SizeToParent=new JS.Module("SizeToParent",{setParent:function(a){this.parent!==a&&(this.inited&&(m(this),b(this)),this.callSuper(a),t(this),h(this))},setPercentOfParentWidthOffset:function(a){this.percentOfParentWidthOffset!==
a&&(this.percentOfParentWidthOffset=a,this.inited&&(this.fireEvent("percentOfParentWidthOffset",a),this.__doPOPW()))},setPercentOfParentWidth:function(a){this.percentOfParentWidth!==a&&(this.inited&&m(this),this.percentOfParentWidth=a,this.inited&&this.fireEvent("percentOfParentWidth",a),t(this))},setPercentOfParentHeightOffset:function(a){this.percentOfParentHeightOffset!==a&&(this.percentOfParentHeightOffset=a,this.inited&&(this.fireEvent("percentOfParentHeightOffset",a),this.__doPOPH()))},setPercentOfParentHeight:function(a){this.percentOfParentHeight!==
a&&(this.inited&&b(this),this.percentOfParentHeight=a,this.inited&&this.fireEvent("percentOfParentHeight",a),h(this))},__doPOPW:function(a){this.setWidth((this.percentOfParentWidthOffset||0)+v(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(a){this.setHeight((this.percentOfParentHeightOffset||0)+v(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(r=>{let v;const t=[];new JS.Singleton("GlobalRootViewRegistry",{include:[r.Observable],initialize:function(){r.global.register("roots",v=this)},getRoots:()=>t,addRoot:m=>{t.push(m);v.fireEvent("rootAdded",m)},removeRoot:m=>{const h=t.indexOf(m);-1<h&&(t.splice(h,1),v.fireEvent("rootRemoved",m))}})})(myt);
(r=>{const v=r.global.roots,t=r.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:m=>{const h=m.__captureDrop=b=>{b.preventDefault()};m=m.getIDE();r.addEventListener(m,"drop",h);r.addEventListener(m,"dragover",h)},teardownCaptureDrop:m=>{const h=m.getIDE();m=m.__captureDrop;r.removeEventListener(h,"drop",m);r.removeEventListener(h,"dragover",m)}},initNode:function(m,h){this.callSuper(m,h);this.setZIndex(0);this.addDomClass("myt");v.addRoot(this);t.setupCaptureDrop(this)},createOurDomElement:function(m){m||
(m=this.callSuper(m),r.getElement().appendChild(m));return m},destroy:function(){t.teardownCaptureDrop(this);v.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(m){this.keepDomElementWhenDestroyed=m},setParent:m=>{},bringToFront:function(){var m=this.getIDE();const h=m.parentNode;m!==h.lastChild&&(m=h.removeChild(m))&&h.appendChild(m)},sendToBack:function(){var m=this.getIDE();const h=m.parentNode;m!==h.firstChild&&
(m=h.removeChild(m))&&h.insertBefore(m,h.firstChild)},sendBehind:function(m){var h=this.getIDE();m=m.getIDE();const b=h.parentNode;m.parentNode===b&&(h=b.removeChild(h))&&b.insertBefore(h,m)},sendInFrontOf:function(m){m.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(m),m.sendBehind(this))}})})(myt);
(r=>{let v,t,m,h=!1;const {requestAnimationFrame:b,cancelAnimationFrame:a}=window,e={},c=g=>{t=b(c);g=Math.round(g);-1!==m&&(e.delta=g-m,e.time=g,v.fireEvent("idle",e));m=g};new JS.Singleton("GlobalIdle",{include:[r.Observable],initialize:function(){r.global.register("idle",v=this)},attachObserver:(g,k,f)=>{g=v.callSuper(g,k,f);!h&&v.hasObservers("idle")&&(h=!0,m=-1,t=b(c));return g},detachObserver:(g,k,f)=>{g=v.callSuper(g,k,f);h&&!v.hasObservers("idle")&&(a(t),h=!1);return g}})})(myt);
(r=>{let v,t,m;const h=r.global,b=h.idle,a=window.document;new JS.Singleton("GlobalWindowResize",{include:[r.Observable,r.Observer],initialize:function(){v=this;v.attachTo(b,"__setup","idle");h.register("windowResize",v)},__setup:e=>{const c=a.body;c&&(v.detachFrom(b,"__setup","idle"),(new ResizeObserver(()=>{v.fireEvent("resize",{w:t=c.clientWidth,h:m=c.clientHeight})})).observe(c))},getWidth:()=>t??=a.body.clientWidth,getHeight:()=>m??=a.body.clientHeight})})(myt);
(r=>{const v=JS.Module,t=r.global.windowResize,m=Math.max,h=a=>{const e=a.resizeDimension;"both"!==e&&"width"!==e||a.setWidth(m(a.minWidth,t.getWidth()));"both"!==e&&"height"!==e||a.setHeight(m(a.minHeight,t.getHeight()))},b=r.SizeToWindow=new v("SizeToWindow",{include:[r.RootView],initNode:function(a,e){this.minWidth=this.minHeight=0;e.resizeDimension??(e.resizeDimension="both");this.attachTo(t,"__hndlResize","resize");this.callSuper(a,e)},setResizeDimension:function(a){this.resizeDimension!==a&&
(this.resizeDimension=a,h(this))},setMinWidth:function(a){this.minWidth!==a&&(this.minWidth=a,h(this))},setMinHeight:function(a){this.minHeight!==a&&(this.minHeight=a,h(this))},__hndlResize:function(a){h(this)}});r.SizeToWindowWidth=new v("SizeToWindowWidth",{include:[b],initNode:function(a,e){e.resizeDimension??(e.resizeDimension="width");this.callSuper(a,e)}});r.SizeToWindowHeight=new v("SizeToWindowHeight",{include:[b],initNode:function(a,e){e.resizeDimension??(e.resizeDimension="height");this.callSuper(a,
e)}})})(myt);
(r=>{const v=Math,t=v.max,m=v.min,h=d=>m(255,t(0,v.round(d))),b=d=>h(d).toString(16).padStart(2,"0"),a=(d,q,x,n)=>(n?"#":"")+b(d)+b(q)+b(x),e=d=>new f((16711680&d)>>16,(65280&d)>>8,255&d),c=(d,q)=>{if("string"===typeof d)if(d.endsWith("%"))d=parseFloat(d.slice(0,-1))*q/100;else return 0;d=m(q,t(0,d))/q;return 1E-6>v.abs(1-d)?1:d},g=(d,q,x)=>{d=c(d,255);q=c(q,255);x=c(x,255);const n=t(d,q,x),l=n-m(d,q,x);if(0===l)return{h:0,s:0,v:n};let w;switch(n){case d:w=(q-x)/l+(q<x?6:0);break;case q:w=(x-d)/l+
2;break;case x:w=(d-q)/l+4}return{h:60*w,s:0===n?0:l/n,v:n}},k=(d,q,x)=>{d=6*c(d,360);q=c(q,100);x=c(x,100);var n=v.floor(d);const l=d-n;d=x*(1-q);const w=x*(1-l*q);q=x*(1-(1-l)*q);n%=6;return{red:255*[x,w,d,d,q,x][n],green:255*[q,x,x,w,d,d][n],blue:255*[d,d,q,x,x,w][n]}},f=r.Color=new JS.Class("Color",{extend:{toUnitRange:c,rgbToHsv:g,hsvToRgb:k,toHex:b,rgbToHex:a,cleanChannelValue:h,getRedChannel:d=>(16711680&d)>>16,getGreenChannel:d=>(65280&d)>>8,getBlueChannel:d=>255&d,makeColorFromNumber:e,makeColorFromHexString:d=>
{if(d)switch(d.startsWith("#")&&(d=d.slice(1)),d.length){case 0:d+="0";case 1:d+="0";case 2:d+="0";case 3:case 4:case 5:const [q,x,n]=d;return new f(parseInt(q+q,16),parseInt(x+x,16),parseInt(n+n,16));case 6:return e(parseInt(d,16));default:return e(parseInt(d.slice(0,6),16))}},makeColorFromHSV:(d,q,x)=>{const {red:n,green:l,blue:w}=k(d,q,x);return new f(n,l,w)},getLighterColor:(d,q)=>e(d).isLighterThan(e(q))?d:q,makeColorNumberFromChannels:(d,q,x)=>(h(d)<<16)+(h(q)<<8)+h(x),makeBlendedColor:(d,q,
x)=>new f(d.red+x*(q.red-d.red),d.green+x*(q.green-d.green),d.blue+x*(q.blue-d.blue))},initialize:function(d,q,x){this.setRed(d);this.setGreen(q);this.setBlue(x)},setRed:function(d){this.red=h(d)},setGreen:function(d){this.green=h(d)},setBlue:function(d){this.blue=h(d)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return a(this.red,this.green,this.blue,!0)},getHSV:function(){return g(this.red,this.green,this.blue)},isLighterThan:function(d){d=
this.getDiffFrom(d);return 0>d.red+d.green+d.blue},getDiffFrom:function(d){return{red:d.red-this.red,green:d.green-this.green,blue:d.blue-this.blue}},applyDiff:function(d){return this.add(d)},add:function(d){this.setRed(this.red+d.red);this.setGreen(this.green+d.green);this.setBlue(this.blue+d.blue);return this},subtract:function(d){this.setRed(this.red-d.red);this.setGreen(this.green-d.green);this.setBlue(this.blue-d.blue);return this},multiply:function(d){this.setRed(this.red*d);this.setGreen(this.green*
d);this.setBlue(this.blue*d);return this},divide:function(d){this.setRed(this.red/d);this.setGreen(this.green/d);this.setBlue(this.blue/d);return this},clone:function(){return new f(this.red,this.green,this.blue)},equals:function(d){return d===this||d?.isA?.(f)&&d.red===this.red&&d.green===this.green&&d.blue===this.blue}})})(myt);
(r=>{const {max:v,sin:t,cos:m,pow:h,sqrt:b,PI:a}=Math,e=2*a,c=a/2,g=r.global.idle,k=r.Color.makeColorFromHexString,f={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-m(n*c)+1,outSine:n=>t(n*c),inOutSine:n=>-(m(n*a)-1)/2,inCirc:n=>-(b(1-n*n)-1),outCirc:n=>b(1- --n*n),inOutCirc:n=>1>(n*=2)?-(b(1-n*n)-1)/2:(b(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:h(2,10*(n-1)),outExpo:n=>1===n?1:-h(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?h(2,10*(n-1))/2:(-h(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(h(2,10*--n)*t((1*n-.075)*e/.3)),outElastic:n=>0===n||1===n?n:h(2,-10*n)*t((1*n-.075)*e/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(h(2,10*--n)*t((1*n-.1125)*e/.45))/2:h(2,
-10*--n)*t((1*n-.1125)*e/.45)/2+1,inBack:(n,l=1.70158)=>(n/=1)*n*((l+1)*n-l),outBack:(n,l=1.70158)=>(n=n/1-1)*n*((l+1)*n+l)+1,inOutBack:(n,l=1.70158)=>1>(n*=2)?n*n*(((l*=1.525)+1)*n-l)/2:((n-=2)*n*(((l*=1.525)+1)*n+l)+2)/2,inBounce:n=>1-f.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?f.inBounce(n)/2:(f.outBounce(n-1)+1)/2},d=f.inOutQuad,q=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},x=(n,l)=>{const {running:w,paused:C,reverse:F,duration:I,repeat:A,__prog:u,easingFunction:p,callback:y}=n;if(w&&!C){F&&(l*=-1);l=u+l;let V=0;l>I?(V=l-I,l=I,++n.__loopCnt===A&&(V=0)):0>l&&(V=-l,l=0,0>--n.__loopCnt&&0<A&&(V=0));var z=n.target??n.parent;if(z){const {relative:X,attribute:U,__isColorAnim:Q,__loopCnt:R,to:Y}=n;var D=v(0,l/I),H=v(0,u/I);null==n.from&&(n.__tmpFrom=!0,n.from=X?Q?"#000":0:z.get(U));H=p(D)-(X?p(H):0);var K=n.from,J=X?z.get(U):
K;D=z.set;if(Q){var M=Y,O=X;K=k(K);M=k(M);O=O?k(J):K;O.setRed(O.red+(M.red-K.red)*H);O.setGreen(O.green+(M.green-K.green)*H);O.setBlue(O.blue+(M.blue-K.blue)*H);H=O.getHtmlHexString()}else H=J+(Y-K)*H;D.call(z,U,H);!F&&R===A||F&&0>R&&0<A?(n.setRunning(!1),y?.call(n,!0)):0<V?(n.fireEvent("repeat",R),n.__prog=F?I:0,x(n,V)):n.__prog=l}else console.log("No target for animator",n),n.setRunning(!1),y?.call(n,!1)}};r.Animator=new JS.Class("Animator",r.Node,{include:[r.Reusable],extend:{easings:f},initNode:function(n,
l){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=d;this.callSuper(n,l);q(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const l=this.target??this.parent;this.__isColorAnim=l&&"function"===typeof l.isColorAttr?l.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),q(this);this[n?"attachTo":"detachFrom"](g,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](g,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&q(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&q(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&q(this)},setEasingFunction:function(n){"string"===typeof n&&(n=f[n]);this.set("easingFunction",n??d,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,l){const w=this,C=w.callback;C&&!l?w.setCallback(F=>{C.call(w,F);n.call(w,F)}):w.setCallback(n)},reset:function(n){q(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=d;this.reset(!1)},__updateAnim:function(n){x(this,
n.value.delta)}})})(myt);
(r=>{const v=Array.isArray,t=b=>{b.__additionalArgs=[];b.__pendingTransition="";b.__transDestinationState="";b.__transStage="leaveState"},m=(b,a)=>{if(b.__transInProgress){var e=b.__deferredTransitions;e??=b.__deferredTransitions=[];e.unshift(a)}else{b.__transInProgress=!0;e=a.shift();const c=a.shift();if(b.__pendingTransition)return 3;if(b.isFinished())return b.__transInProgress=!1,5;let g=b.map[b.current][c];g??=b.map["*"][c];if(g)return b.__pendingTransition=c,b.__transDestinationState=g,b.__additionalArgs=
a,b.resumeTransition(e);b.__transInProgress=!1;return 5}},h=b=>{b.__transInProgress=!1;const a=b.__deferredTransitions;if(a)for(;0<a.length;)m(b,a.pop())};r.StateMachine=new JS.Class("StateMachine",r.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(b,a){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";t(this);this.callSuper(b,a)},setInitialState:function(b){if(""===this.current){if(v(b)){var a=b;b=a.shift()}else a=[];this.current=
this.initial=b;this.doEnterState("","",b,a);a={name:"",from:"",to:b,args:a};this.fireEvent("enter"+b,a);this.fireEvent("enter",a);this.isFinished()&&this.fireEvent("finished",a)}},setTerminalState:function(b){this.terminal=b},addTransitions:function(b){b.forEach(a=>this.addTransition(...a))},addTransition:function(b,a,e){a=a?v(a)?a:[a]:["*"];const c=this.map;let g=a.length;for(;g;){let k,f;((k=c)[f=a[--g]]??(k[f]={}))[b]=e}},doTransition:function(...b){b.unshift("sync");return m(this,b)},doAsyncTransition:function(...b){b.unshift("async");
return m(this,b)},resumeTransition:function(b){const a=this.__pendingTransition;if(!a)return 4;const e=this.current,c=this.__transDestinationState,g=this.__additionalArgs,k={name:a,from:e,to:c,args:g},f=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const d=this.doLeaveState(a,e,c,g);if(!1===d)return t(this),h(this),2;if("async"===d||"async"===b)return this.__transStage="enterState",f("start"+a,k),f("start",k),f("leave"+e,k),f("leave",k),h(this),3;f("start"+a,k);f("start",k);
f("leave"+e,k);f("leave",k);case "enterState":this.current=c,t(this),this.doEnterState(a,e,c,g),f("enter"+c,k),f("enter",k),f("end"+a,k),f("end",k),this.isFinished()&&f("finished",k)}h(this);return 1},doLeaveState:(b,a,e,c)=>{},doEnterState:(b,a,e,c)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(b){return v(b)?b.includes(this.current):this.current===b},can:function(b){return void 0!==this.map[this.current][b]?!0:void 0!==this.map["*"][b]}})})(myt);
(r=>{const v=(b,a)=>b.replicationIndex-a.replicationIndex,t=(b,a)=>{let e=b.length,c;for(;e;)c=b[--e],c.decrementLockedCounter(),a&&c.update()},m=b=>{h(b);const a=b.template;a&&(b.__pool=new r.TrackActivesPool(a,b.parent))},h=b=>{const a=b.__pool;if(a){const e=b.parent.getLayouts();b=e;let c=b.length;for(;c;)b[--c].incrementLockedCounter();a.putActives();a.destroyPooledInstances();t(e,!1);a.destroy()}};r.Replicable=new JS.Module("Replicable",{include:[r.Reusable],replicate:function(b,a){this.replicationData=
b;this.replicationIndex=a},notify:(b,a)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(b,a){return a===this.replicationIndex&&b===this.replicationData}});r.Replicator=new JS.Class("Replicator",r.Node,{initNode:function(b,a){this.callSuper(b,a);m(this);this.doReplication()},destroy:function(){h(this);this.callSuper()},setTemplate:function(b){(this.template=b.includes(r.Replicable)?b:null)||r.dumpStack("Template not replicable");this.inited&&
(m(this),this.doReplication())},setData:function(b){this.data=b;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const b=this.__pool;let a;if(b){a=this.parent.getLayouts();for(var e=a.length;e;)a[--e].incrementLockedCounter();const c=(e=this.data)?e.length:0,g=b.getActives(),k=g.length,f=[];let d=k,q,x;for(g.sort(v);d;)if(q=g[--d],x=q.replicationIndex,x>=c||!q.alreadyHasReplicationData(e[x],x))f[x]=q;for(d=f.length;d;)(q=f[--d])&&
b.putInstance(q);for(d=0;c>d;++d)(d>=k||null!=f[d])&&b.getInstance().replicate(e[d],d);for(d=a.length;d;)a[--d].sortSubviews(v);t(a,!0)}},notify:function(b,a){var e=this.__pool;if(e){e=e.getActives();let c=e.length;for(;c;)e[--c].notify(b,a)}}})})(myt);
(r=>{const v=JS.Singleton,t=document,m=r.global.register,{DomElementProxy:h,DomObservable:b}=r;new v("GlobalMouse",{include:[h,b,r.MouseObservable],initialize:function(){this.setDomElement(t);m("mouse",this)}});new v("GlobalTouch",{include:[h,b,r.TouchObservable],initialize:function(){this.setDomElement(t);m("touch",this)}})})(myt);
(r=>{let v,t,m;const h=[],b=[],a=g=>{const k=m;k!==g&&(k&&(k.notifyDragLeave(t),t.destroyed||t.notifyDragLeaving(k),v("dragLeave",k)),m=g)&&(g.notifyDragEnter(t),t.destroyed||t.notifyDragEntering(g),v("dragEnter",k))},e=g=>{let k=t;k!==g&&((t=g)?(k=g,c(k,b).forEach(f=>{f.notifyDragStart(k)}),c(k,h).forEach(f=>{f.notifyAutoScrollerDragStart(k)}),v("startDrag",g)):(c(k,b).forEach(f=>{f.notifyDragStop(k)}),c(k,h).forEach(f=>{f.notifyAutoScrollerDragStop(k)}),v("stopDrag",g)))},c=(g,k)=>{if(g.destroyed)return[];
if(g.isAnyDragGroup())return k;const f=[];g=g.getDragGroups();let d=k.length;for(;d;){const q=k[--d];if(q.isAnyDropGroup())f.push(q);else{const x=q.getDropGroups();for(const n in g)if(x[n]){f.push(q);break}}}return f};new JS.Singleton("GlobalDragManager",{include:[r.Observable],initialize:function(){r.global.register("dragManager",this);v=this.fireEvent.bind(this)},getDragView:()=>t,registerAutoScroller:g=>{h.push(g)},unregisterAutoScroller:g=>{g=h.indexOf(g);-1<g&&h.splice(g,1)},registerDropTarget:g=>
{b.push(g)},unregisterDropTarget:g=>{g=b.indexOf(g);-1<g&&b.splice(g,1)},startDrag:g=>{e(g)},stopDrag:(g,k,f)=>{k.notifyDropped(m,f);f||m?.notifyDrop(k);a();e();m&&!f&&v("drop",[k,m])},updateDrag:(g,k)=>{const f=c(k,b);let d=f.length,q;if(0<d){const {pageX:x,pageY:n}=g.value;for(;d;)g=f[--d],g.willAcceptDrop(k)&&k.willPermitDrop(g)&&g.isPointVisible(x,n)&&(!q||g.isInFrontOf(q))&&(q=g)}a(q)}})})(myt);
(r=>{const v=JS.Module,t=r.global,m=t.mouse,h=t.keys,b=t.idle;r.Activateable=new v("Activateable",{doActivated:()=>{}});r.UpdateableUI=new v("UpdateableUI",{initNode:function(a,e){this.callSuper(a,e);this.updateUI()},updateUI:()=>{}});r.Disableable=new v("Disableable",{initNode:function(a,e){e.disabled??(e.disabled=!1);this.callSuper(a,e)},setDisabled:function(a){a=this.valueFromEvent(a);this.disabled!==a&&(this.disabled=a,this.inited&&this.fireEvent("disabled",a),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});r.KeyActivation=new v("KeyActivation",{extend:{ACTIVATION_KEYS:[h.CODE_ENTER,h.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(a,e){this.activateKeyDown="";e.activationKeys??(e.activationKeys=r.KeyActivation.ACTIVATION_KEYS);this.callSuper(a,e);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(a){this.activationKeys=
a??[]},setRepeatKeyDown:function(a){this.repeatKeyDown=a},__hndlKeyDown:function(a){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const e=r.KeyObservable.getCodeFromEvent(a);this.activationKeys.includes(e)&&(this.activateKeyDown===e?this.doActivationKeyDown(e,!0):(this.activateKeyDown=e,this.doActivationKeyDown(e,!1)),a.value.preventDefault())}},__hndlKeyPress:function(a){if(!this.disabled){const e=r.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===e&&this.activationKeys.includes(e)&&
a.value.preventDefault()}},__hndlKeyUp:function(a){if(!this.disabled){const e=r.KeyObservable.getCodeFromEvent(a);this.activateKeyDown===e&&this.activationKeys.includes(e)&&(this.activateKeyDown="",this.doActivationKeyUp(e),a.value.preventDefault())}},__doDomBlur:function(a){this.disabled||(a=this.activateKeyDown,""!==a&&(this.activateKeyDown="",this.doActivationKeyAborted(a)))},doActivationKeyDown:(a,e)=>{},doActivationKeyUp:function(a){this.doActivated()},doActivationKeyAborted:a=>{}});r.ArrowKeyActivation=
new v("KeyActivation",{doActivationKeyDown:function(a,e){switch(a){case h.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,e))return;break;case h.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,e))return;break;case h.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,e))return;break;case h.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,e))return}this.callSuper(a,e)},doKeyArrowLeftOrUp:(a,e)=>{},doKeyArrowRightOrDown:(a,e)=>{}});r.MouseOver=new v("MouseOver",{initNode:function(a,e){e.mouseOver??(e.mouseOver=
!1);this.callSuper(a,e);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(a){this.mouseOver!==a&&(this.mouseOver=a,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(b,"__doMouseOverOnIdle","idle")))},setDisabled:function(a){this.callSuper(a);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(b,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const a=this.mouseOver;this.__lastOverIdleValue!==a&&(this.__lastOverIdleValue=a,this.doSmoothMouseOver(a))},doSmoothMouseOver:function(a){this.inited&&this.updateUI?.()},doMouseOver:function(a){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(a){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});r.MouseDown=new v("MouseDown",{initNode:function(a,e){e.mouseDown??(e.mouseDown=!1);this.callSuper(a,
e);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(a){this.mouseDown!==a&&(this.mouseDown=a,this.inited&&(a&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(a){a&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(a)},doMouseOver:function(a){this.callSuper(a);this.mouseDown&&this.detachFromDom(m,"doMouseUp","mouseup",!0)},doMouseOut:function(a){this.callSuper(a);!this.disabled&&this.mouseDown&&this.attachToDom(m,
"doMouseUp","mouseup",!0)},doMouseDown:function(a){this.disabled||this.setMouseDown(!0)},doMouseUp:function(a){this.mouseOver||this.detachFromDom(m,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(a))},doMouseUpInside:function(a){this.doActivated?.()}});r.MouseOverAndDown=new v("MouseOverAndDown",{include:[r.MouseOver,r.MouseDown]});r.Draggable=new v("Draggable",{initNode:function(a,e){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=
!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let c=!0;null!=e.isDraggable&&(c=e.isDraggable,delete e.isDraggable);this.callSuper(a,e);this.setIsDraggable(c)},setIsDraggable:function(a){if(this.isDraggable!==a){this.isDraggable=a;let e;a?e=this.attachToDom:this.inited&&(e=this.detachFromDom);if(e){a=this.getDragViews();let c=a.length;for(;c;){const g=a[--c];e.call(this,g,"__doMouseDown","mousedown");e.call(this,g,"__doContextMenu","contextmenu")}}}},setIsDragging:function(a){this.set("isDragging",
a,!0)},setDragOffsetX:function(a,e){this.dragOffsetX!==a&&(this.dragOffsetX=a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDragOffsetY:function(a,e){this.dragOffsetY!==a&&(this.dragOffsetY=a,this.inited&&this.isDragging&&!e&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(a){this.distanceBeforeDrag=a},setDraggableAllowBubble:function(a){this.draggableAllowBubble=a},setCenterOnMouse:function(a){this.centerOnMouse=a},setAllowAbort:function(a){this.allowAbort=a},
getDragViews:function(){return[this]},__doContextMenu:a=>{},__doMouseDown:function(a){const e=r.MouseObservable.getMouseFromEvent(a),c=this.getODE();this.dragInitX=e.x-c.offsetLeft;this.dragInitY=e.y-c.offsetTop;this.attachToDom(m,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(m,"__doDragCheck","mousemove",!0):this.startDrag(a);a.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(a){this.isDragging?this.stopDrag(a,!1):(this.detachFromDom(m,"__doMouseUp",
"mouseup",!0),this.detachFromDom(m,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(a){a.value===h.CODE_ESC&&this.stopDrag(a,!0)},__doDragCheck:function(a){const e=r.MouseObservable.getMouseFromEvent(a);r.Geometry.measureDistance(e.x,e.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(r.global.mouse,"__doDragCheck","mousemove",!0),this.startDrag(a))},startDrag:function(a){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX",
"width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(h,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(m,"updateDrag","mousemove",!0);this.updateDrag(a)},updateDrag:function(a){this.__lastMousePosition=r.MouseObservable.getMouseFromEvent(a);this.reRequestDragPosition()},__updateDragInitX:function(a){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(a){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(a,e){this.detachFromDom(m,
"__doMouseUp","mouseup",!0);this.detachFromDom(m,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY","height"));this.allowAbort&&this.detachFrom(h,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(a,e){this.disabled||(this.setX(a),this.setY(e))},reRequestDragPosition:function(){const a=this.__lastMousePosition;this.requestDragPosition(a.x-this.dragInitX+this.dragOffsetX,a.y-this.dragInitY+
this.dragOffsetY)}})})(myt);
(r=>{const v=JS.Class;var t=JS.Module,m=r.View;const h=r.KeyActivation,b=r.Button=new t("Button",{include:[r.Activateable,r.UpdateableUI,r.Disableable,r.MouseOverAndDown,h],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(a,e){e.focusable??(e.focusable=!0);e.cursor??(e.cursor="pointer");this.callSuper(a,e)},setFocused:function(a){const e=this.focused;this.callSuper(a);this.inited&&this.focused!==e&&this.updateUI()},doActivationKeyDown:function(a,e){e||this.updateUI()},doActivationKeyUp:function(a){this.callSuper(a);
this.updateUI()},doActivationKeyAborted:function(a){this.callSuper(a);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const a=this.__restoreCursor;a&&(this.setCursor(a),this.__restoreCursor=null);this.activateKeyDown!==h.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});t=r.SimpleButtonStyle=new t("SimpleButtonStyle",{include:[b],setActiveColor:function(a){this.activeColor!==a&&(this.activeColor=a,this.inited&&this.updateUI())},setHoverColor:function(a){this.hoverColor!==a&&(this.hoverColor=a,this.inited&&this.updateUI())},setReadyColor:function(a){this.readyColor!==
a&&(this.readyColor=a,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(a,e=1){this.setOpacity(e);this.setBgColor(a)}});m=r.SimpleButton=new v("SimpleButton",m,{include:[t],initNode:function(a,e){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(a,e)}});
r.SimpleTextButton=new v("SimpleTextButton",m,{initNode:function(a,e){this.inset=this.outset=0;e.shrinkToFit??(e.shrinkToFit=!1);e.height??(e.height=24);e.textY??(e.textY="middle");this.callSuper(a,e);a=this.textY;e={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof a?e.valign=a:e.y=a;a=this.textView=new r.Text(this,e);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",a,"visible",a,"width",a,
"height",a,"y"])},setInset:function(a){this.set("inset",this.valueFromEvent(a),!0)},setOutset:function(a){this.set("outset",this.valueFromEvent(a),!0)},setText:function(a){this.text!==a&&(this.text=a,this.inited&&(this.textView.setText(a),this.fireEvent("text",a)))},setShrinkToFit:function(a){this.shrinkToFit!==a&&(this.shrinkToFit=a,this.inited&&(this.textView?.setWhiteSpace(a?"nowrap":"normal"),this.fireEvent("shrinkToFit",a)))},setTextY:function(a){const e=this.textView;this.textY!==a&&(this.textY=
a,this.inited&&(this.fireEvent("textY",a),"string"===typeof a?e.setValign(a):(e.setValign(""),e.setY(a))))},__updateContent:function(a){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:e,outset:c,textView:g}=this;this.__updateContentLoopBlock=!0;g.setX(e);this.shrinkToFit?this.setWidth(e+(g.visible&&this.text?g.width:0)+c):g.setWidth(this.width-e-c);this.__updateContentLoopBlock=!1}}});r.TextButton=new v("TextButton",r.PaddedText,{include:[t],initNode:function(a,e){e.focusIndicator??
(e.focusIndicator=!1);e.roundedCorners??(e.roundedCorners=3);e.textAlign??(e.textAlign="center");e.paddingTop??(e.paddingTop=1);e.height??(e.height=23-(e.paddingTop??0));e.activeColor??(e.activeColor="#ddd");e.hoverColor??(e.hoverColor="#eee");e.readyColor??(e.readyColor="#fff");this.callSuper(a,e)}})})(myt);
(r=>{const v=r.global,t=v.focus,m=v.mouse,h={};r.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:b=>h[b]},initNode:function(b,a){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.floatingAlignOffset=this.floatingValignOffset=0;this.callSuper(b,a)},setLastFloatingPanelShown:function(b){this.lastFloatingPanelShown=b},setLastFloatingPanelId:function(b){this.floatingPanelId=b},setFloatingAlign:function(b){this.set("floatingAlign",b,!0)},setFloatingValign:function(b){this.set("floatingValign",
b,!0)},setFloatingAlignOffset:function(b){this.set("floatingAlignOffset",b,!0)},setFloatingValignOffset:function(b){this.set("floatingValignOffset",b,!0)},createFloatingPanel:function(b,a,e){b=b??this.floatingPanelId;e=e??{};e.panelId=b;return h[b]=new a(null,e)},getFloatingPanel:function(b){return h[b??this.floatingPanelId]},toggleFloatingPanel:function(b){this.getFloatingPanel(b??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(b):this.showFloatingPanel(b)},showFloatingPanel:function(b){if(b=
this.getFloatingPanel(b??this.floatingPanelId))b.show(this),this.setLastFloatingPanelShown(b)},hideFloatingPanel:function(b){if(b=this.getFloatingPanel(b??this.floatingPanelId))b.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(b){this.callSuper?.()},notifyPanelHidden:function(b){this.callSuper?.()},getFloatingAlignForPanel:function(b){return this.floatingAlign},getFloatingValignForPanel:function(b){return this.floatingValign},getFloatingAlignOffsetForPanel:function(b){return this.floatingAlignOffset},
getFloatingValignOffsetForPanel:function(b){return this.floatingValignOffset},getNextFocus:function(){const b=this.lastFloatingPanelShown;return b?.isShown()?b:this.callSuper?.()},getNextFocusAfterPanel:function(b){return this},getPrevFocusAfterPanel:function(b){return this}});r.FloatingPanel=new JS.Class("FloatingPanel",r.View,{include:[r.RootView],initNode:function(b,a){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;a.visible=a.focusIndicator=
!1;a.focusable=a.focusCage=!0;this.callSuper(b,a)},setOwner:function(b){this.owner=b},setPanelId:function(b){this.panelId=b},setIgnoreOwnerForHideOnMouseDown:function(b){this.ignoreOwnerForHideOnMouseDown=b},setHideOnBlur:function(b){this.hideOnBlur=b},setHideOnMouseDown:function(b){this.hideOnMouseDown=b},__doMouseDown:function(b){var a=b.value;b=a.pageX;a=a.pageY;this.containsPoint(b,a)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(b,a)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(b){this.hideOnMouseDown&&
this.hide(b)},focus:function(b){if(this.owner&&this.isAncestorOf(t.focusedView))this.owner[(t.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(b);else{const a=this.getFirstFocusableDescendant();a===this?this.callSuper(b):a.focus(b)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(b){(b=b.value)&&!this.isAncestorOf(b)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&t.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(b){this.isShown()||(this.bringToFront(),this.updateLocation(b),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(m,"__doMouseDown","mousedown",!0),this.attachTo(t,"__doFocusChange","focused"))},hide:function(b){this.isShown()&&(this.detachFromDom(m,"__doMouseDown","mousedown",!0),this.detachFrom(t,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),b||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(b){this.setOwner(b);this.updateLocationX(b);this.updateLocationY(b)},updateLocationX:function(b){const a=b.getFloatingAlignForPanel(this),e=typeof a;let c;if("string"===e)switch(c=b.getPagePosition().x+b.getFloatingAlignOffsetForPanel(this),a){case "outsideRight":c+=b.width;break;case "insideRight":c+=b.width-this.width;break;case "outsideLeft":c-=this.width;break;case "insideLeft":break;default:console.warn("Invalid align value",
e,a)}else"number"===e?c=a:console.warn("Invalid align type",e,a);this.setX(c)},updateLocationY:function(b){const a=b.getFloatingValignForPanel(this),e=typeof a;let c;if("string"===e)switch(c=b.getPagePosition().y+b.getFloatingValignOffsetForPanel(this),a){case "outsideBottom":c+=b.height;break;case "insideBottom":c+=b.height-this.height;break;case "outsideTop":c-=this.height;break;case "insideTop":break;default:console.warn("Invalid valign value",e,a)}else"number"===e?c=a:console.warn("Invalid valign type",
e,a);this.setY(c)}})})(myt);
(r=>{const v=JS.Class,t=JS.Module,m=r.global,h=m.focus,b=m.keys,a=b.LIST_KEYS,e=g=>{var k=g.itemConfig??[];const f=k.length,d=g.items,q=d.length;var x=g.defaultItemClass;const n=g.getContentView(),l=n.getLayouts(),w=g.fixedWidth,C=0<w;l.forEach(z=>{z.incrementLockedCounter()});const F=n.getODE(),I=F.nextSibling,A=F.parentNode;A.removeChild(F);let u=0;const p={listView:g};C&&(p.width=w,p.enableEllipsis=!0);for(;f>u;++u){var y=k[u];const z=y.klass??x;y=y.attrs??{};let D=d[u];D&&!D.isA(z)&&(D.destroy(),
D=null);D??=d[u]=new z(n,{...p});D&&(D.callSetters(y),D.__LAYOUT_IDX=u)}A.insertBefore(F,I);if(C)k=w;else for(k=g.minWidth,u=0;f>u;)x=d[u++],x.syncToDom(),k=Math.max(k,x.getMinimumWidth());for(;q>u;)d[u++].destroy();d.length=f;if(!C)for(u=0;f>u;)g.updateItemWidth(d[u++],k);g.updateContentWidth(n,k);l.forEach(z=>{z.sortSubviews((D,H)=>D.__LAYOUT_IDX-H.__LAYOUT_IDX);z.decrementLockedCounter();z.update()})},c=r.ListViewItemMixin=new t("ListViewItemMixin",{setListView:function(g){this.listView=g},getMinimumWidth:()=>
0,syncToDom:()=>{}});r.ListView=new v("ListView",r.FloatingPanel,{initNode:function(g,k){this.items=[];this.maxHeight=-1;this.minWidth=0;k.defaultItemClass??(k.defaultItemClass=r.ListViewItem);k.overflow??(k.overflow="autoy");k.bgColor??(k.bgColor="#ccc");k.boxShadow??(k.boxShadow=r.Button.FOCUS_SHADOW);this.callSuper(g,k);e(this);this.buildLayout(this.getContentView())},buildLayout:g=>{new r.SpacedLayout(g,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(g){this.minWidth=g},setDefaultItemClass:function(g){this.defaultItemClass=
g},setItemConfig:function(g){this.itemConfig=g;this.inited&&e(this)},getContentView:function(){return this},setMaxHeight:function(g){this.maxHeight!==g&&(this.maxHeight=g,this.inited&&(this.fireEvent("maxHeight",g),this.setHeight(this.height)))},setHeight:function(g){this.callSuper(0<=this.maxHeight?Math.min(this.maxHeight,g):g);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(g){this?.owner.doItemActivated(g)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(g=>g.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(g=>g.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(g,k)=>{g.setWidth(k)},updateContentWidth:(g,k)=>{g.setWidth(k)}});r.ListViewAnchor=new t("ListViewAnchor",{include:[r.FloatingPanelAnchor,r.ArrowKeyActivation],initNode:function(g,
k){k.listViewClass??(k.listViewClass=r.ListView);k.listViewAttrs??(k.listViewAttrs={});k.itemConfig??(k.itemConfig=[]);k.activationKeys??(k.activationKeys=a);this.callSuper(g,k)},setListViewClass:function(g){this.listViewClass=g},setListViewAttrs:function(g){this.listViewAttrs=g},setItemConfig:function(g){this.itemConfig=g},getFloatingValignForPanel:function(g){var k=g.height,f=this.getPagePosition().y,d=m.windowResize.getHeight()-this.getPagePosition().y-this.height;g=f-k;k=d-k;f=f>d;d=this.floatingValign;
switch(d){case "outsideBottom":0>k&&f&&(d="outsideTop");break;case "insideBottom":0>k&&f&&(d="insideTop");break;case "outsideTop":0>g&&!f&&(d="outsideBottom");break;case "insideTop":0>g&&!f&&(d="insideBottom")}return d},doItemActivated:function(g){this.hideFloatingPanel()},getFloatingPanel:function(g){return this.callSuper(g)??this.createFloatingPanel(g,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(g){const k=this.getFloatingPanel(g);k&&(k.setItemConfig(this.itemConfig),this.callSuper(g))},
doActivationKeyDown:function(g,k){g===b.CODE_ESC?this.hideFloatingPanel():this.callSuper(g,k)},doKeyArrowLeftOrUp:function(g,k){this.focusToLastItem()},doKeyArrowRightOrDown:function(g,k){this.focusToFirstItem()},doActivationKeyUp:function(g){if(g!==b.CODE_ESC)switch(this.callSuper(g),g){case b.CODE_ARROW_LEFT:case b.CODE_ARROW_UP:this.focusToLastItem();break;case b.CODE_ARROW_RIGHT:case b.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const g=this.getFloatingPanel();g?.isShown()&&
g.focusToLastItem()},focusToFirstItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToFirstItem()},updateEntryAttr:function(g,k,f){(g=this.getEntryByValue(g))&&(g.attrs[k]=f);return g},getEntryByValue:function(g){return this.itemConfig.find(k=>k?.attrs&&k.attrs.value===g)}});r.ListViewItem=new v("ListViewItem",r.TextButton,{include:[c,r.ArrowKeyActivation],initNode:function(g,k){k.activeColor??(k.activeColor="#bbb");k.hoverColor??(k.hoverColor="#fff");k.readyColor??(k.readyColor=
"#eee");k.paddingLeft??(k.paddingLeft=8);k.paddingRight??(k.paddingRight=8);k.textAlign??(k.textAlign="left");k.roundedCorners??(k.roundedCorners=0);k.activationKeys??(k.activationKeys=a);k.focusIndicator??(k.focusIndicator=!0);const f=this.__enableEllipsis=k.enableEllipsis;delete k.enableEllipsis;this.callSuper(g,k);this.addDomClass("mytButtonText");f&&this.enableEllipsis()},setText:function(g){this.callSuper(g);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width=
"auto";this.sizeViewToDom()},getMinimumWidth:function(){return Math.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(g,k){g===b.CODE_ESC?this.listView.owner.hideFloatingPanel():this.callSuper(g,k)},doKeyArrowLeftOrUp:function(g,k){h.prev()},doKeyArrowRightOrDown:function(g,k){h.next()}});r.ListViewSeparator=new v("ListViewSeparator",r.View,{include:[c],initNode:function(g,k){k.height??(k.height=1);k.bgColor??(k.bgColor="#666");
this.callSuper(g,k)}})})(myt);
(r=>{const v=r.AccessorSupport,t={},m=r.BAG=new JS.Class("BAG",{include:[v,r.Destructible,r.Observable],extend:{getGroup:(h,b)=>{if(h&&b){let a;return(a=t[h]??(t[h]={}))[b]??(a[b]=new m(h,b))}},removeGroup:(h,b)=>{if(h&&b&&(h=t[h])){const a=h[b];a&&delete h[b];return a}}},initialize:function(h,b){this.__nodes=[];this.trueNode=null;this.attrName=h;this.groupId=b},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&m.removeGroup(this.attrName,this.groupId);this.__nodes.length=
0;this.detachAllObservers();this.callSuper()},setGroupId:function(h){this.set("groupId",h,!0)},setAttrName:function(h){this.set("attrName",h,!0)},setTrueNode:function(h){this.set("trueNode",h,!0)},getNodes:function(){return this.__nodes},register:function(h){h&&!this.isRegistered(h)&&(this.__nodes.push(h),h[this.attrName]&&this.setTrue(h))},unregister:function(h){if(h){const b=this.__nodes,a=b.indexOf(h);-1<a&&b.splice(a,1);this.trueNode===h&&this.setTrueNode(null);0===b.length&&this.destroy()}},
setTrue:function(h){if(h&&this.trueNode!==h&&this.isRegistered(h)){const b=this.attrName,a=v.generateSetterName(b),e=this.__nodes;let c=e.length;for(this.setTrueNode(h);c;){const g=e[--c];if(h===g){if(!g[b])g[a](!0)}else if(g[b])g[a](!1)}}},setFalse:function(h){h&&this.trueNode===h&&(h[v.generateSetterName(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(h){return this.__nodes.includes(h)}});r.BAGMembership=new JS.Module("BAGMembership",{initNode:function(h,b){this.__bags=[];this.callSuper(h,
b)},destroy:function(){const h=this.__bags;let b=h.length;for(;b;){const a=h[--b];this.removeFromBAG(a.attrName,a.groupId)}this.callSuper()},isRegisteredWithBAG:function(h){return this.__bags.includes(h)},getBAG:(h,b)=>m.getGroup(h,b),addToBAG:function(h,b){b=this.getBAG(h,b);this.isRegisteredWithBAG(b)||(this.__bags.push(b),b.register(this),this.isAttachedTo(this,"__updateForBAG",h)||this.attachTo(this,"__updateForBAG",h))},removeFromBAG:function(h,b){b=this.getBAG(h,b);if(this.isRegisteredWithBAG(b)){const a=
this.__bags;let e=a.length,c=!0;for(;e;){const g=a[--e];g===b?(a.splice(e,1),b.unregister(this)):g.attrName===h&&(c=!1)}c&&this.detachFrom(this,"__updateForBAG",h)}},__updateForBAG:function(h){this.__bags.forEach(b=>{if(b.attrName===h.type)b[h.value?"setTrue":"setFalse"](this)})}})})(myt);
(r=>{const v=t=>{const m=t.label||"";t.setText('<i class="far fa-'+(!0===t.selected?"dot-":"")+'circle"></i>'+(0<m.length?" ":"")+m)};r.Radio=new JS.Class("Radio",r.Text,{include:[r.SimpleButtonStyle,r.BAGMembership],initNode:function(t,m){m.selected??(m.selected=!1);m.groupId??(m.groupId=r.generateGuid());m.focusIndicator??(m.focusIndicator=!1);m.activeColor??(m.activeColor="inherit");m.hoverColor??(m.hoverColor="inherit");m.readyColor??(m.readyColor="inherit");const h=m.value;delete m.value;this.callSuper(t,
m);this.setValue(h);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);r.FontAwesome.registerForNotification(this);v(this)},setOptionValue:function(t){this.set("optionValue",t,!0)},setValue:function(t){if(this.inited){const m=this.getBAG("selected",this.groupId);if(m){const h=m.getNodes();let b=h.length;for(;b;){const a=h[--b];if(a.optionValue===t){m.setTrue(a);break}}}}},getValue:function(){var t=this.getBAG("selected",this.groupId);return(t=t?t.trueNode:null)?t.optionValue:null},
setSelected:function(t){this.selected!==t&&(this.selected=t,this.inited&&(this.fireEvent("selected",t),v(this)))},setGroupId:function(t){if(this.groupId!==t){const m=this.groupId;this.groupId=t;m&&this.removeFromBAG("selected",m);t&&this.addToBAG("selected",t);this.inited&&this.fireEvent("groupId",t)}},setLabel:function(t){this.label!==t&&(this.set("label",t,!0),this.inited&&v(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(t,m=1){this.setOpacity(m);this.setTextColor(t)}})})(myt);
(r=>{const v=JS.Module,t=r.global.keys,m=r.Selectable=new v("Selectable",{setSelected:function(b){b=this.valueFromEvent(b);this.selected!==b&&(this.selected=b,this.inited&&this.fireEvent?.("selected",b))},isSelected:function(){return!!this.selected},canSelect:b=>!0,canDeselect:b=>!0}),h=r.SelectionManager=new v("SelectionManager",{extend:{isAddMode:()=>t.isShiftKeyDown(),isToggleMode:()=>t.isAcceleratorKeyDown()},initNode:function(b,a){this.__selected={};this.__lastSelectedItem=null;a.selectedCount=
0;a.itemSelectionId??(a.itemSelectionId="id");a.maxSelected??(a.maxSelected=-1);this.callSuper(b,a)},setItemSelectionId:function(b){this.itemSelectionId=b},setMaxSelected:function(b){this.maxSelected=b},setSelectedCount:function(b){this.selectedCount!==b&&(this.selectedCount=b,this.inited&&this.fireEvent("selectedCount",b))},isAddMode:()=>h.isAddMode(),isToggleMode:()=>h.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(b){b&&!this.isSelectedItem(b)&&this.canSelectItem(b)&&
(b.setSelected(!0),this.__selected[b[this.itemSelectionId]]=b,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=b,this.doSelected(b),this.fireEvent("itemSelected",b))},doSelected:b=>{},selectById:function(b){this.select(this.getSelectableItem(b))},canSelectItem:function(b){const a=this.maxSelected,e=this.selectedCount;if(0===a)return!1;if(1===a){if(0<e&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<a&&e>=a)return!1;return b.canSelect(this)},selectAll:function(){const b=
this.getSelectableItems();let a=b.length;for(;a;)this.select(b[--a])},deselect:function(b){this.isSelectedItem(b)&&this.canDeselectItem(b)&&(b.setSelected(!1),delete this.__selected[b[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===b&&(this.__lastSelectedItem=null),this.doDeselected(b),this.fireEvent("itemDeselected",b))},doDeselected:b=>{},deselectById:function(b){this.deselect(this.getSelectableItem(b))},canDeselectItem:function(b){return b.canDeselect(this)},
deselectAll:function(){const b=this.__selected;for(const a in b)this.deselect(b[a])},isSelectedItem:b=>b?b.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const b=[],a=this.getSubviews();let e=a.length;for(;e;){const c=a[--e];c.isA(m)&&b.push(c)}return b},getSelectableItems:function(){const b=this.getManagedItems();let a=b.length;for(;a;)b[--a].canSelect(this)||b.splice(a,1);return b},getSelectableItem:function(b){const a=
this.getSelectableItems(),e=this.itemSelectionId;let c=a.length;for(;c;){const g=a[--c];if(g[e]===b)return g}}})})(myt);
(r=>{const v=JS.Class,t=r.View,m=r.SizeToParent,h=r.TabSlider=new v("TabSlider",t,{include:[r.Selectable,r.Disableable,m],initNode:function(a,e){const c=this;let g;e.defaultPlacement="wrapper.container";e.percentOfParentWidth=100;e.expansionState="collapsed";e.tabId??(e.tabId=r.generateGuid());e.tabContainer??(e.tabContainer=a);e.selected??(e.selected=!1);e.buttonClass??(e.buttonClass=r.SimpleButton);e.zIndex??(e.zIndex=0);e.buttonHeight??(e.buttonHeight=30);e.fillColorSelected??(e.fillColorSelected=
"#666");e.fillColorHover??(e.fillColorHover="#eee");e.fillColorActive??(e.fillColorActive="#ccc");e.fillColorReady??(e.fillColorReady="#fff");e.minContainerHeight??(e.minContainerHeight=100);e.selected&&(g=!0,delete e.selected);c.callSuper(a,e);c.button=new c.buttonClass(c,{ignorePlacement:!0,zIndex:1,height:c.buttonHeight,focusIndicator:!0,groupId:c.parent.parent.groupId,percentOfParentWidth:100,hoverColor:c.fillColorHover,activeColor:c.fillColorActive,readyColor:c.fillColorReady},[m,{doActivated:()=>
{const k=c.tabContainer;c.isSelected()&&1!==k.maxSelected?k.deselect(c):k.select(c)},updateUI:function(){this.callSuper();c.selected&&-1!==c.tabContainer.maxSelected&&this.setBgColor(c.fillColorSelected);c.notifyButtonRedraw()}}]);a=c.wrapper=new t(c,{ignorePlacement:!0,y:c.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[m,{setHeight:function(k){this.callSuper(Math.round(k))},setWidth:function(k){this.callSuper(k);this.inited&&this.container.setWidth(k)}}]);new r.SizeToChildren(a.container=
new t(a),{axis:"y"});c.constrain("__updateHeight",[a,"y",a,"height"]);g&&c.tabContainer.select(c);!0===e.disabled&&c.setDisabled(!0);c.setHeight(c.getCollapsedHeight())},setSelected:function(a){this.callSuper(a);this.button?.updateUI()},setTabId:function(a){this.tabId=a},setTabContainer:function(a){this.tabContainer=a},setMinContainerHeight:function(a){this.minContainerHeight=a},setButtonClass:function(a){this.buttonClass=a},setFillColorSelected:function(a){this.fillColorSelected=a},setFillColorHover:function(a){this.fillColorHover=
a},setFillColorActive:function(a){this.fillColorActive=a},setFillColorReady:function(a){this.fillColorReady=a},setButtonHeight:function(a){this.buttonHeight!==a&&(this.buttonHeight=a,this.button&&(this.button.setHeight(a),this.wrapper.setY(a)))},setExpansionState:function(a){if(this.expansionState!==a){this.expansionState=a;this.inited&&this.fireEvent("expansionState",a);const e=this.wrapper;e&&("expanded"===a?(e.setMaskFocus(!1),e.setOverflow("auto")):"expanding"===a?e.setVisible(!0):"collapsed"===
a?e.setVisible(!1):"collapsing"===a&&(e.setMaskFocus(!0),e.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(a){this.setHeight(this.wrapper.y+this.wrapper.height)},expand:function(a){const e=this,c=e.wrapper;a-=e.getCollapsedHeight();e.setExpansionState("expanding");c.stopActiveAnimators();if(c.height!==a){const g=e.tabContainer.duration;1===g?(c.setHeight(a),e.setExpansionState("expanded")):c.animate({attribute:"height",
to:a,duration:g}).next(k=>{e.setExpansionState("expanded")})}else e.setExpansionState("expanded")},collapse:function(){const a=this,e=a.wrapper;a.setExpansionState("collapsing");e.stopActiveAnimators();if(0!==e.height){const c=a.tabContainer.duration;1===c?(e.setHeight(0),a.setExpansionState("collapsed")):e.animate({attribute:"height",to:0,duration:c}).next(g=>{a.setExpansionState("collapsed")})}else a.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),
this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});r.TextTabSlider=new v("TextTabSlider",h,{initNode:function(a,e){e.labelTextColorChecked??(e.labelTextColorChecked="#fff");e.labelTextColor??(e.labelTextColor="#333");this.callSuper(a,e);this.button.label=new r.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},
setLabelTextColorChecked:function(a){this.labelTextColorChecked=a},setLabelTextColor:function(a){this.labelTextColor=a},setText:function(a){this.text!==a&&(this.text=a,this.button?.label?.setText(a))},notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const b=r.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[r.SelectionManager],
extend:{SPACING:1},initNode:function(a,e){const c=this;c._tabSliders=[];e.defaultPlacement="container";e.spacing??(e.spacing=b.SPACING);e.overflow??(e.overflow="autoy");e.itemSelectionId??(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);e.duration??(e.duration=500);c.updateLayout=r.debounce(c.updateLayout);c.callSuper(a,e);a=c.container=new t(c,{ignorePlacement:!0,percentOfParentWidth:100},[m,{subnodeAdded:function(g){this.callSuper(g);g instanceof h&&(c._tabSliders.push(g),c.attachTo(g,
"updateLayout","selected"))},subnodeRemoved:function(g){if(g instanceof h){const k=c._tabSliders,f=k.indexOf(g);-1<f&&(c.detachFrom(g,"updateLayout","selected"),k.splice(f,1))}this.callSuper(g)}}]);a.layout=new r.SpacedLayout(a,{axis:"y",spacing:c.spacing,collapseParent:!0});c.attachTo(c,"updateLayout","height")},setSpacing:function(a){this.spacing!==a&&(this.spacing=a,this.layout?.setSpacing(a))},setDuration:function(a){this.duration=a},updateLayout:function(a,e){a=this._tabSliders;for(var c=a.length,
g=c,k=0,f=0,d=0;g;){var q=a[--g];q.visible&&(++d,q.selected?(k+=q.getMinimumExpandedHeight(),f+=q.getPreferredExpandedHeight()):(q=q.getCollapsedHeight(),k+=q,f+=q))}g=this.container.layout;d=g.inset+g.outset+g.spacing*(d-1);f+=d;g=this.height;k=k+d>g;d=f>g;q=this.duration;f-=g;0<e&&this.setDuration(e);for(g=c;g;)if(c=a[--g],c.visible)if(c.selected){let x;if(k)x=c.getMinimumExpandedHeight();else if(d){const n=c.getPreferredExpandedHeight(),l=c.getMinimumExpandedHeight();x=n-f;l>x?(f-=n-l,x=l):f=0}else x=
c.getPreferredExpandedHeight();c.expand(x)}else c.collapse();0<e&&this.setDuration(q)}})})(myt);
(r=>{const v=h=>{const b=[];switch(h.tabContainer.location){case "top":b.push("TopLeft","TopRight");break;case "bottom":b.push("BottomLeft","BottomRight");break;case "left":b.push("TopLeft","BottomLeft");break;case "right":b.push("TopRight","BottomRight")}b.forEach(a=>{h["setRounded"+a+"Corner"](h.cornerRadius||0)})},t=r.Tab=new JS.Class("Tab",r.SimpleTextButton,{include:[r.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(h,b){b.tabId??(b.tabId=r.generateGuid());b.tabContainer??(b.tabContainer=
h);let a;b.selected&&(a=!0,delete b.selected);b.inset??(b.inset=t.INSET);b.outset??(b.outset=t.OUTSET);b.selectedColor??(b.selectedColor="#fff");b.hoverColor??(b.hoverColor="#eee");b.activeColor??(b.activeColor="#aaa");b.readyColor??(b.readyColor="#ccc");b.labelTextSelectedColor??(b.labelTextSelectedColor="#333");b.height??(b.height=24);b.focusIndicator??(b.focusIndicator=!1);b.cornerRadius??(b.cornerRadius=6);this.callSuper(h,b);a&&this.tabContainer.select(this);v(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(h){this.tabId=h},setTabContainer:function(h){this.tabContainer=h},setSelectedColor:function(h){this.selectedColor=h},setLabelTextColor:function(h){this.labelTextColor=h},setCornerRadius:function(h){this.cornerRadius=h;this.inited&&v(this)},setLabelTextSelectedColor:function(h){this.labelTextSelectedColor=h;this.inited&&this.selected&&this.textView.setTextColor(h)},setSelected:function(h){this.callSuper(h);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),m=r.TabContainer=new JS.Module("TabContainer",{include:[r.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(h,b){this.__tabs=[];b.spacing??(b.spacing=m.SPACING);b.inset??(b.inset=m.INSET);b.location??(b.location="top");b.itemSelectionId??
(b.itemSelectionId="tabId");b.maxSelected??(b.maxSelected=1);this.callSuper(h,b);this.layout=new r.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:!0})},setLocation:function(h){this.location=h},setSpacing:function(h){this.spacing!==h&&(this.spacing=h,this.layout?.setSpacing(h))},setInset:function(h){this.inset!==h&&(this.inset=h,this.layout?.setInset(h))},getFirstTab:function(){return this.__tabs[0]},getSelectedTab:function(){return this.getSelected()[0]},
subnodeAdded:function(h){this.callSuper(h);if(h.isA(t))switch(this.__tabs.push(h),this.location){case "top":h.setValign("bottom");break;case "bottom":h.setValign("top");break;case "left":h.setAlign("right");break;case "right":h.setAlign("left")}},subnodeRemoved:function(h){if(h.isA(t)){const b=this.__tabs,a=b.indexOf(h);-1<a&&b.splice(a,1)}this.callSuper(h)}})})(myt);
(r=>{const v=JS.Class,t=Math.min,m=Array.isArray,h=r.global.keys,{SizeToDom:b,View:a,Disableable:e,KeyObservable:c}=r,g=r.Button.FOCUS_SHADOW,k=(l,w,C)=>{l[C]!==w&&(l[C]=w,l.getIDS()[C]=w+"px",l.inited&&(l.fireEvent(C,w),l.sizeViewToDom()))},f=(l,w,C)=>{l[w]!==C&&(l.getIDE()[w]=l[w]=C,l.inited&&l.fireEvent(w,C))},d=r.NativeInputWrapper=new v("NativeInputWrapper",a,{include:[e,r.InputObservable],initNode:function(l,w){w.tagName??(w.tagName="input");w.focusable??(w.focusable=!0);this.callSuper(l,w);
this.addDomClass("mytNativeInput")},createOurDomElement:function(l){l=this.callSuper(l);this.inputType&&((m(l)?l[1]:l).type=this.inputType);return l},setDisabled:function(l){this.disabled!==l&&(this.getIDE().disabled=l,this.callSuper(l))},setValue:function(l){this.value!==l&&(this.value=l,this.setDomValue(l),this.inited&&this.fireEvent("value",l))},getDomValue:function(){return this.getIDE().value},setDomValue:function(l){const w=this.getIDE();w.value!==l&&(w.value=l)}}),q=r.InputSelectOption=new v("InputSelectOption",
a,{include:[e,r.Selectable],createOurDomElement:l=>document.createElement("option"),setSelected:function(l){l=this.valueFromEvent(l);const w=this.getIDE();w.selected!==l&&(w.selected=l)},setDisabled:function(l){this.disabled!==l&&(this.getIDE().disabled=l,this.callSuper(l))},setValue:function(l){f(this,"value",l)},setLabel:function(l){this.label!==l&&(this.getIDE().textContent=this.label=l,this.inited&&this.fireEvent("label",l))},isSelected:function(){return this.getIDE().selected},canSelect:function(l){return!this.disabled&&
!this.getIDE().selected&&this.parent===l},canDeselect:function(l){return!this.disabled&&this.getIDE().selected&&this.parent===l}}),x=r.BaseInputText=new v("BaseInputText",d,{include:[r.TextSupport],initNode:function(l,w){w.bgColor??(w.bgColor="transparent");w.spellcheck??(w.spellcheck=!1);this.callSuper(l,w);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(l){this.callSuper(l);this.setValue(l)},
setSpellcheck:function(l){f(this,"spellcheck",l)},setMaxLength:function(l){f(this,"maxLength",null==l||0>l?void 0:l)},setAllowedChars:function(l){this.allowedChars=l},setPlaceholder:function(l){f(this,"placeholder",l)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(g)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(l){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(l){const w=
l.value,C=this.allowedChars;C&&!C.includes(c.getKeyFromEvent(l))&&w.preventDefault();this.filterInputPress(w)},filterInput:l=>l,filterInputPress:l=>{},__syncToDom:function(l){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const l=document.selection.createRange();l.moveStart("character",-this.getDomValue().length);return l.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(l,w){if(null==w||l===w){if(this.getCaretPosition()===l)return;
w=l}var C=this.getIDE();C.setSelectionRange?C.setSelectionRange(l,w):C.createTextRange&&(C=C.createTextRange(),C.collapse(!0),C.moveEnd("character",w),C.moveStart("character",l),C.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const l=this.getIDE();return{start:l.selectionStart,startElem:l,end:l.selectionEnd,endElem:l}},setSelection:function(l){l&&
this.setCaretPosition(l.start,l.end)},saveSelection:function(l){this._selRange=l||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=r.InputText=new v("InputText",x,{include:[r.SizeHeightToDom],initNode:function(l,w){this.inputType=!0===w.password?"password":"text";this.callSuper(l,w);this.setCaretToEnd()},setPassword:function(l){this.set("password",l,!0);this.inited&&(this.getIDE().type=l?"password":"text")}});r.EditableText=new v("EditableText",
x,{include:[b],initNode:function(l,w){w.tagName??(w.tagName="div");w.inputType=null;w.whiteSpace??(w.whiteSpace="pre");w.contentEditable??(w.contentEditable=!0);this.callSuper(l,w);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(l){k(this,l,"minWidth")},setMinHeight:function(l){k(this,l,"minHeight")},setPadding:function(l){this.setPaddingTop(l);this.setPaddingRight(l);
this.setPaddingBottom(l);this.setPaddingLeft(l)},setPaddingTop:function(l){k(this,l,"paddingTop")},setPaddingRight:function(l){k(this,l,"paddingRight")},setPaddingBottom:function(l){k(this,l,"paddingBottom")},setPaddingLeft:function(l){k(this,l,"paddingLeft")},setContentEditable:function(l){f(this,"contentEditable",l)},filterInputPress:function(l){const w=this.maxLength;0<=w&&this.getCharacterCount()===w&&l.preventDefault();this.callSuper(l)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(l){const w=this.getIDE();w.innerHTML!==l&&(w.innerHTML=l,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(l){c.isEnterKeyEvent(l)&&(l.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(l){this.callSuper(l);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(l,w){if(null==w||l===w){if(this.getCaretPosition()===l)return;w=l}this.saveSelection({start:l,startElem:this.getIDE().firstChild,end:w,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(l){this.saveSelection();return!0},getSelection:function(){let l;if(window.getSelection){const w=window.getSelection();if(0<w.rangeCount){if(w.extentNode===
this.getIDE())return;l=w.getRangeAt(0)}}else document.selection&&(l=document.selection.createRange());return{start:l?l.startOffset:0,startElem:l?l.startContainer:this.getIDE().firstChild,end:l?l.endOffset:0,endElem:l?l.endContainer:this.getIDE().firstChild}},setSelection:function(l){if(l){const w=l.startElem,C=l.endElem;if(w&&w.parentNode&&C&&C.parentNode){const F=document.createRange();F.setStart(w,t(l.start,w.length));F.setEnd(C,t(l.end,C.length));window.getSelection?(l=window.getSelection(),0<
l.rangeCount&&l.removeAllRanges(),l.addRange(F)):document.selection&&F.select()}}}});r.InputTextArea=new v("InputTextArea",x,{initNode:function(l,w){w.tagName??(w.tagName="textarea");w.inputType=null;w.resize??(w.resize="none");w.wrap??(w.wrap="soft");this.callSuper(l,w)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(l){const w=this;w.resize!==l&&(l=w.resize=w.getIDS().resize=l||"none",w.inited&&w.fireEvent("resize",l),"none"!==l&&(w.__resizeObserver??
(w.__resizeObserver=new ResizeObserver(()=>{w.doResize()}))).observe(w.getIDE()))},setWrap:function(l){f(this,"wrap",l)},doResize:function(){const l=this.resize;"both"!==l&&"horizontal"!==l||b.sizeWidth(this);"both"!==l&&"vertical"!==l||b.sizeHeight(this)}});r.ComboBox=new v("ComboBox",n,{include:[r.Activateable,r.KeyActivation,r.ListViewAnchor],initNode:function(l,w){this.filterItems=!0;w.activationKeys??(w.activationKeys=[h.CODE_ENTER,h.CODE_ESC,h.CODE_ARROW_UP,h.CODE_ARROW_DOWN]);w.bgColor??(w.bgColor=
"#fff");w.borderWidth??(w.borderWidth=1);w.borderStyle??(w.borderStyle="solid");w.floatingAlignOffset??(w.floatingAlignOffset=w.borderWidth);w.fullItemConfig??(w.fullItemConfig=[]);w.listViewAttrs={...w.listViewAttrs,maxHeight:w.listViewAttrs?.maxHeight??99};this.callSuper(l,w)},setFullItemConfig:function(l){this.fullItemConfig=l},setFilterItems:function(l){this.filterItems=l},__syncToDom:function(l){const w=this.value;this.callSuper(l);w!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(l){const w=
this.getFloatingPanel(l);if(w){let F;if(this.filterItems){F=[];var C=this.value;C=null==C?"":(""+C).toLowerCase();const I=this.fullItemConfig,A=I.length;for(let u=0;A>u;){const p=I[u++],y=p.attrs.text.toLowerCase(),z=y.indexOf(C);0===z?y!==C&&F.push(p):0<z&&F.push(p)}}else F=this.fullItemConfig;0<F.length?(w.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(F),this.callSuper(l)):this.hideFloatingPanel(l)}},doItemActivated:function(l){this.setValue(null==l.value?l.text:l.value);this.callSuper(l)},
doActivated:function(){this.toggleFloatingPanel()}});r.InputSelect=new v("InputSelect",d,{include:[b],initNode:function(l,w){w.tagName??(w.tagName="select");w.inputType=null;w.multiple??(w.multiple=!1);w.size??(w.size=w.multiple?4:1);this.callSuper(l,w);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(l){f(this,"multiple",l)},setSize:function(l){f(this,"size",l)},setOptions:function(l){this.destroyAllOptions();m(l)&&l.forEach(w=>{this.addOption(w)})},getOptions:function(){return this.getSubviews().slice()},
setValue:function(l){m(l)&&r.areArraysEqual(l,this.value)||this.value===l||(this.value=l,this.inited&&this.fireEvent("value",l))},subviewAdded:function(l){l instanceof q||(r.dumpStack("Subview unsupported. Destroying it"),l.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(g)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(l=>l.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(l=>
l.value)},getOptionForValue:function(l){return this.getOptions().find(w=>w.value===l)},addOption:function(l){return new q(this,l)},destroyAllOptions:function(){this.getOptions().forEach(l=>{l.destroy()})},destroyOptionWithValue:function(l){if(l=this.getOptionForValue(l))if(l.destroy(),l.destroyed)return!0;return!1},deselectAll:function(){let l=!1;this.getOptions().forEach(w=>{w.isSelected()&&(w.setSelected(!1),l=!0)});l&&this.__doChanged()},selectValues:function(l){(m(l)?l:[l]).forEach(w=>{this.selectValue(w)})},
selectValue:function(l){this.select(this.getOptionForValue(l))},select:function(l){l?.canSelect(this)&&(l.setSelected(!0),this.__syncToDom())},deselectValue:function(l){this.deselect(this.getOptionForValue(l))},deselect:function(l){l?.canDeselect(this)&&(l.setSelected(!1),this.__syncToDom())},__doChanged:function(l){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(r=>{const v=JS.Module,t=Math.round;var m=r.ValueComponent=new v("ValueComponent",{initNode:function(b,a){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(b,a)},setValueFilter:function(b){this.valueFilter=b;this.inited&&b&&this.setValue(this.value)},setValue:function(b){this.valueFilter&&(b=this.valueFilter(b));this.value!==b&&(this.value=b,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(b,a){const e=this.valueFilter;
this.setValueFilter(e?"last"===a?c=>b(e(c)):c=>e(b(c)):b)}});const h=r.RangeComponent=new v("RangeComponent",{include:[m],setLowerValue:function(b){this.setValue({lower:b,upper:this.value&&void 0!==this.value.upper?this.value.upper:b})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(b){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:b,upper:b})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(b){if(b){var a=
this.value;const g=a?a.lower:void 0;a=a?a.upper:void 0;this.valueFilter&&(b=this.valueFilter(b));if(b.lower!==g||b.upper!==a){var e;(e=b).lower??(e.lower=b.upper);var c;(c=b).upper??(c.upper=b.lower);void 0!==b.lower&&void 0!==b.upper&&b.lower>b.upper&&(e=b.lower,b.lower=b.upper,b.upper=e);this.value=b;this.inited&&(this.fireEvent("value",this.getValue()),b.lower!==g&&this.fireEvent("lowerValue",b.lower),b.upper!==a&&this.fireEvent("upperValue",b.upper))}}else this.callSuper(b)},getValueCopy:function(){const b=
this.value;return{lower:b.lower,upper:b.upper}}});m=r.BoundedValueComponent=new v("BoundedValueComponent",{include:[m],initNode:function(b,a){const e=this;e.appendToEarlyAttrs("snapToInt","minValue","maxValue");a.snapToInt??(a.snapToInt=!0);a.valueFilter||(a.valueFilter=c=>{var g=e.maxValue;if(null!=g&&c>g)return g;g=e.minValue;return null!=g&&c<g?g:c});e.callSuper(b,a)},setSnapToInt:function(b){this.snapToInt!==b&&(this.snapToInt=b,this.inited&&(this.fireEvent("snapToInt",b),b&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(b){this.snapToInt&&null!=b&&(b=t(b));if(this.minValue!==b){const a=this.maxValue;null!=a&&b>a&&(b=a);this.minValue!==b&&(this.minValue=b,this.inited&&(this.fireEvent("minValue",b),this.setValue(this.value)))}},setMaxValue:function(b){this.snapToInt&&null!=b&&(b=t(b));if(this.maxValue!==b){const a=this.minValue;null!=a&&b<a&&(b=a);this.maxValue!==b&&(this.maxValue=b,this.inited&&(this.fireEvent("maxValue",b),this.setValue(this.value)))}},
setValue:function(b){this.callSuper(this.snapToInt&&null!=b&&!isNaN(b)?t(b):b)}});r.BoundedRangeComponent=new v("BoundedRangeComponent",{include:[m,h],initNode:function(b,a){const e=this;a.valueFilter||(a.valueFilter=c=>{if(c){const g=e.maxValue,k=e.minValue;null!=g&&c.upper>g&&(c.upper=g);null!=k&&c.lower<k&&(c.lower=k)}return c});e.callSuper(b,a)},setValue:function(b){this.snapToInt&&null!=b&&(null==b.lower||isNaN(b.lower)||(b.lower=t(b.lower)),null==b.upper||isNaN(b.upper)||(b.upper=t(b.upper)));
this.callSuper(b)}})})(myt);
(r=>{const v=t=>{const m=t.label??"";t.setText('<i class="'+("solid"===(t.checkboxStyle??"outline")?"fas":"far")+" fa-"+(t.isChecked()?"check-":"")+'square"></i>'+(0<m.length?" ":"")+m)};r.Checkbox=new JS.Class("Checkbox",r.Text,{include:[r.SimpleButtonStyle,r.ValueComponent],initNode:function(t,m){this.appendToEarlyAttrs("userUnselectable");m.value??(m.value=!1);m.focusIndicator??(m.focusIndicator=!1);m.checkboxStyle??(m.checkboxStyle="outline");m.activeColor??(m.activeColor="inherit");m.hoverColor??
(m.hoverColor="inherit");m.readyColor??(m.readyColor="inherit");this.callSuper(t,m);r.FontAwesome.registerForNotification(this);v(this)},setValue:function(t){this.value!==t&&(this.callSuper(t),this.inited&&v(this))},setLabel:function(t){this.label!==t&&(this.set("label",t,!0),this.inited&&v(this))},setCheckboxStyle:function(t){this.checkboxStyle!==t&&(this.set("checkboxStyle",t,!0),this.inited&&v(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},
draw:function(t,m=1){this.setOpacity(m);this.setTextColor(t)}})})(myt);
(r=>{let v;const t=JS.Class,m=JS.Module,h=r.global,b=h.focus,a=h.keys,e=r.KeyObservable,c={},g=(u,p)=>{if(u){const y=u.id;u.id?p(y):r.dumpStack("No ID")}else r.dumpStack("No processor")},k=u=>{g(u,p=>{c[p]=u})},f=u=>{const p=r.BAG.getGroup("selected",u.groupId);if(p){const y=p.getNodes();u=u.value;let z=y.length;for(;z;){const D=y[--z];if(D.optionValue===u){p.setTrue(D);break}}}},d=u=>{if(u.groupId){const p=r.BAG.getGroup("selected",u.groupId);p&&u.syncTo(p,"__syncValue","trueNode")}},q=(u,p)=>{const y=
[];u.__v?.forEach(z=>{p=z.isFormValid(u,null,y)&&p});u.setErrorMessages(y);u.setIsValid(p);return p},x=(u,p,y)=>{u.__vp?.forEach(z=>{z[y]&&(p=z.process(p))});return p},n=r.ValueProcessor=new t("ValueProcessor",{initialize:function(u,p,y,z){this.id=u;this.runForDefault=!!p;this.runForRollback=!!y;this.runForCurrent=!!z},process:u=>u}),l=r.ToNumberValueProcessor=new t("ToNumberValueProcessor",n,{process:u=>{if(null==u||""===u||"-"===u)return u;const p=Number(u);return isNaN(p)?u:p}}),w=r.TrimValueProcessor=
new t("TrimValueProcessor",n,{initialize:function(u,p,y,z,D){this.callSuper(u,p,y,z);this.trim=D},process:function(u){u+="";switch(this.trim){case "start":case "left":return u.trimStart();case "end":case "right":return u.trimEnd();default:return u.trim()}}}),C=r.UndefinedValueProcessor=new t("UndefinedValueProcessor",n,{initialize:function(u,p,y,z,D){this.callSuper(u,p,y,z);this.defaultValue=D},process:function(u){return void 0===u?this.defaultValue:u}}),F=r.Form=new m("Form",{initNode:function(u,
p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(u,p);this.form?.isA(F)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(F)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(u){this.set("errorMessages",u,!0)},getFullId:function(){const u=[this.id];let p=this.form;for(;p&&p.id;)u.unshift(p.id),p=p.form;return u.join(".")},setId:function(u){if(this.id!==u){const p=this.id;this.id=u;(u=this.form)&&this.inited&&
(u.removeSubForm(p),u.addSubForm(this))}},setForm:function(u){if(this.form!==u){const p=this.form;this.form=u;p?.removeSubForm(this.id);this.inited&&u?.addSubForm(this)}},setIsValid:function(u){this.isValid=u;this.inited&&this.fireEvent("isValid",u);const p=this.form;p&&!this._lockCascade&&(u?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(u){if(this.isChanged!==u){this.isChanged=u;this.inited&&this.fireEvent("isChanged",u);const p=this.form;p&&!this._lockCascade&&(u?p.notifySubFormChanged():
p.verifyChangedState(this))}},setValidators:function(u){let p=u.length;for(;p;){const y=u[--p];"string"===typeof y&&(u[p]=h.validators.getValidator(y),u[p]||u.splice(p,1))}this.__v=u},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(I))return this.value;const u={},p=this.__sf;for(const y in p)u[y]=p[y].getValue();return u},setValue:function(u){this.callSuper?.(u);if("object"===typeof u&&!this.isA(I))for(const p in u){const y=this.getSubForm(p);y?u[p]=y.setValue(u[p]):console.warn("ID in setValue for missing subform",
p)}this.form?.notifyValueChanged(this);return u},getDefaultValue:function(){const u={};let p=this.__sf;for(const y in p)u[y]=p[y].getDefaultValue();return u},setDefaultValue:function(u){if("object"===typeof u)for(const p in u){const y=this.getSubForm(p);y?u[p]=y.setDefaultValue(u[p]):console.warn("ID in setDefaultValue for missing subform",p)}return u},getRollbackValue:function(){const u={},p=this.__sf;for(const y in p)u[y]=p[y].getRollbackValue();return u},setRollbackValue:function(u){if("object"===
typeof u)for(const p in u){const y=this.getSubForm(p);y?u[p]=y.setRollbackValue(u[p]):console.warn("ID in setRollbackValue for missing subform",p)}return u},addAccelerator:function(u,p){this.__acc[u]=p},removeAccelerator:function(u){delete this.__acc[u]},invokeAccelerator:function(u,p){this.__acc[u]?.call(this,p??null)},addValidator:function(u){u&&this.__v.push(u)},removeValidator:function(u){if(u){const p=this.__v;let y=p.length;for(;y;){const z=p[--y];if(z.id===u)return p.splice(y,1),z}}},getRootForm:function(){return this.form?
this.form.getRootForm():this},addSubForm:function(u){const p=u.id;null!=this.getSubForm(p)?console.warn("ID in use for subform, add aborted",p,u):(u.setForm(this),this.__sf[p]=u,u.isChanged&&this.notifySubFormChanged(),u.isValid||this.notifySubFormInvalid())},removeSubForm:function(u){const p=this.getSubForm(u);p&&(p.setForm(null),delete this.__sf[u],this.verifyChangedState(),this.verifyValidState());return p},getSubForm:function(u){return this.__sf[u]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(u){u&&
this.doValidation();const p=[];(function D(z){if(z.isA(I))z.isValid||p.push(z.getFullId());else{z=z.getSubForms();for(const H in z)D(z[H])}})(this);return p},getAllErrorMessages:function(){const u=this.__sf;let p=(this.errorMessages??[]).slice();for(const y in u)p.push(...u[y].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(u){const p=this.__sf;let y=!0;for(const z in p){const D=p[z];D!==u&&(y=D.isValid&&y)}return q(this,y)},doValidation:function(){const u=
this.__sf;let p=!0;for(const y in u)p=u[y].doValidation()&&p;this._lockCascade=!0;p=q(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(u){this.form?.notifyValueChanged(u)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(u){const p=this.__sf;let y=!1;for(const z in p){const D=p[z];D!==u&&(y=D.isChanged||y)}this.setIsChanged(y);return y},setup:function(u,p,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);
this._lockCascade=!1;u??={};p??={};y??={};const z=this.__sf;for(const D in z)z[D].setup(u[D],p[D],y[D])},resetForm:function(){this._lockCascade=!0;const u=this.__sf;for(const p in u)u[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const u=this.__sf;for(const p in u)u[p].rollbackForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const u=
{},p=this.__sf;for(const y in p){const z=p[y];z.isChanged&&(u[y]=z.getChangedValue())}return u}}),I=r.FormElement=new m("FormElement",{include:[F],initNode:function(u,p){this.__vp=[];this.callSuper(u,p)},getValue:function(){return x(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(u){void 0===u&&(u=this.getRollbackValue());this.value!==u&&(this.callSuper(u),this.verifyChangedState());return u},getDefaultValue:function(){return x(this,this.defaultValue,"runForDefault")},
setDefaultValue:function(u){this.defaultValue!==u&&(this.defaultValue=u,this.inited&&this.fireEvent("defaultValue",u),this.verifyChangedState());return u},getRollbackValue:function(){return x(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(u){void 0===u&&(u=this.getDefaultValue());this.rollbackValue!==u&&(this.rollbackValue=u,this.inited&&this.fireEvent("rollbackValue",u),this.verifyChangedState());return u},setValueProcessors:function(u){let p=u.length;for(;p;){const y=u[--p];
"string"===typeof y&&(u[p]=c[y],u[p]||u.splice(p,1))}this.__vp=u},addValueProcessor:function(u){this.__vp.push(u)},removeValueProcessor:function(u){if(u){const p=this.__vp;let y=p.length;for(;y;){const z=p[--y];if(z.id===u)return p.splice(y,1),z}}},addSubForm:u=>{r.dumpStack("addSubForm unsupported on FormElement")},getSubForm:u=>{r.dumpStack("getSubForm unsupported on FormElement")},removeSubForm:u=>{r.dumpStack("removeSubForm unsupported on FormElement")},verifyChangedState:function(u){u=this.getValue()!==
this.getRollbackValue();this.setIsChanged(u);return u},setup:function(u,p,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(u);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const u=this.getDefaultValue();this.setRollbackValue(u);this.setValue(u);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=
!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),A=r.FormInputTextMixin=new m("FormInputTextMixin",{include:[I,r.UpdateableUI],initNode:function(u,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";p.bgColor??(p.bgColor=
"#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(u,p);this.addValueProcessor(v);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(u){this.validateWhen=u},setAcceleratorScope:function(u){this.acceleratorScope=u},setErrorColor:function(u){this.errorColor=u},setActionRequiredColor:function(u){this.actionRequiredColor=
u},setNormalColor:function(u){this.normalColor=u},setIsChanged:function(u){this.callSuper(u);this.inited&&this.updateUI()},setIsValid:function(u){this.callSuper(u);this.inited&&this.updateUI()},setValue:function(u){u=this.callSuper(u);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return u},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(u){e.isEnterKeyEvent(u)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(u){e.isEscKeyEvent(u)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const u=this.validateWhen;"blur"!==u&&"blurWithKeyFix"!==u||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
r.RootForm=new m("RootForm",{include:[F],initNode:function(u,p){this.callSuper(u,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:u=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});r.FormCheckbox=new t("FormCheckbox",r.Checkbox,{include:[I],initNode:function(u,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(u,p)}});r.FormComboBox=new t("FormComboBox",r.ComboBox,{include:[I,r.UpdateableUI],initNode:function(u,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(u,p);this.addValueProcessor(v);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(u){this.validateWhen=u},setAcceleratorScope:function(u){this.acceleratorScope=u},setErrorColor:function(u){this.errorColor=
u},setActionRequiredColor:function(u){this.actionRequiredColor=u},setNormalColor:function(u){this.normalColor=u},setIsChanged:function(u){this.callSuper(u);this.inited&&this.updateUI()},setIsValid:function(u){this.callSuper(u);this.inited&&this.updateUI()},setValue:function(u){u=this.callSuper(u);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return u},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":b.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(u){this._isShown=!0},notifyPanelHidden:function(u){this._isShown=!1},doActivationKeyDown:function(u,p){u!==a.CODE_ESC||this._isShown?this.callSuper(u,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(u){u!==
a.CODE_ENTER||this._isShown?this.callSuper(u):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const u=this.validateWhen;"blur"!==u&&"blurWithKeyFix"!==u||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});r.FormEditableText=new t("FormEditableText",r.EditableText,{include:[A],__hndlKeyDown:function(u){"nowrap"===this.whitespace&&this.callSuper(u)}});r.FormInputText=new t("FormInputText",
r.InputText,{include:[A]});r.FormInputTextArea=new t("FormInputTextArea",r.InputTextArea,{include:[A],__hndlKeyDown:u=>{}});r.FormInputSelect=new t("FormInputSelect",r.InputSelect,{include:[I],setValue:function(u){if(!this.__abortSetValue)return u=this.callSuper(u),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(u),this.__abortSetValue=!1,this.verifyValidState(),u}});r.FormRadioGroup=new t("FormRadioGroup",r.Node,{include:[r.ValueComponent,I],initNode:function(u,p){p.groupId??(p.groupId=
r.generateGuid());this.callSuper(u,p);void 0!==this.value&&f(this);d(this)},setValue:function(u){u=this.callSuper(u);this.inited&&f(this);return u},setGroupId:function(u){if(this.groupId!==u){if(this.groupId){const p=r.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=u;this.inited&&d(this)}},__syncValue:function(u){u=u.value;this.setValue(u?u.optionValue:null)}});r.UseOtherFieldIfEmptyValueProcessor=new t("UseOtherFieldIfEmptyValueProcessor",n,{initialize:function(u,
p,y,z,D){this.callSuper(u,p,y,z);this.otherField=D},process:function(u){return null==u||""===u?this.otherField.getValue():u}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){k(v=new C("undefToEmpty",!0,!0,!0,""));k(new l("toNumber",!0,!0,!0));k(new w("trimLeft",!0,!0,!0,"left"));k(new w("trimRight",!0,!0,!0,"right"));k(new w("trimBoth",!0,!0,!0,"both"));h.register("valueProcessors",this)},getValueProcessor:u=>c[u],register:k,unregister:u=>{g(u,p=>{c[p]&&delete c[p]})}})})(myt);
(r=>{const v=JS.Class,t=Math.round,m={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},h=(c,g)=>{c[g](c,"doDragOver","dragover",!1);c[g](c,"doDragEnter","dragenter",!1);c[g](c,"doDragLeave","dragleave",!1);c[g](c,"doDrop","drop",!1)},b=r.DragDropSupport=new JS.Module("DragDropSupport",{include:[r.DragDropObservable],initNode:function(c,g){this.callSuper(c,g);this.disabled||this.setupDragListeners()},setDisabled:function(c){this.disabled!==c&&
(this.getIDE().disabled=c,this.callSuper(c),this.inited&&(c?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){h(this,"attachToDom")},teardownDragListeners:function(){h(this,"detachFromDom")},doDragOver:c=>{},doDragEnter:c=>{},doDragLeave:c=>{},doDrop:function(c){this.handleFiles(c.value.dataTransfer.files,c)},handleFiles:function(c,g){if(void 0!==c){let k=c.length;for(;k;){const f=this.filterFiles(c[--k]);f&&this.handleDroppedFile(f,g)}}else r.dumpStack("No File API")},
filterFiles:c=>c,handleDroppedFile:(c,g)=>{}}),a=r.Uploader=new v("Uploader",r.View,{include:[b,r.Disableable,r.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(c,g)=>{if(void 0!==FileReader){const k=new FileReader;k.onload=g;k.readAsDataURL(c)}},isSameFile:(c,g)=>null!=c&&null!=g&&c.name===g.name&&c.type===g.type&&c.size===g.size,createFile:c=>{const g=(new r.URI(c)).file;return{name:g,serverPath:c,size:-1,type:m[r.getExtension(g)]}}},initNode:function(c,g){const k=this;k.files=
[];g.requestFileParam??(g.requestFileParam="file");g.maxFiles??(g.maxFiles=-1);k.callSuper(c,g);k.fileInput=new r.NativeInputWrapper(k,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:k.disabled,overflow:"hidden"},[r.SizeToParent,{initNode:function(f,d){this.inputType="file";this.callSuper(f,d);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<k.maxFiles},_hndlInput:function(f){k.handleFiles(this.getIDE().files,f)}}])},setValue:function(c){this.clearFiles();
c&&(Array.isArray(c)||(c=[c]),c.forEach(g=>{this.addFile(a.createFile(g))}));return this.callSuper?this.callSuper(c):c},getValue:function(){return this.value},setDisabled:function(c){this.callSuper(c);this.fileInput?.setDisabled(c)},setMaxFiles:function(c){this.maxFiles!==c&&(this.maxFiles=c,this.inited&&this.fireEvent("maxFiles",c),this.fileInput&&(this.fileInput.getIDE().multiple=1<c))},setUploadUrl:function(c){this.set("uploadUrl",c,!0)},setRequestFileParam:function(c){this.set("requestFileParam",
c,!0)},bringSubviewToFront:function(c){c===this.fileInput?this.callSuper(c):this.sendSubviewBehind(c,this.fileInput)},subviewAdded:function(c){this.callSuper(c);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(c,g){this.addFile(c)},filterFiles:function(c){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:c},uploadFiles:function(c,g){c??=this.uploadUrl;const k=this.files;let f=k.length;for(;f;)this.uploadFile(k[--f],c,g)},makeFetchOptionsForUpload:c=>
({method:"POST",body:c}),uploadFile:function(c,g,k){const f=this,d=new FormData;d.append(k??f.requestFileParam,c,c.name);r.doFetch(g??f.uploadUrl,f.makeFetchOptionsForUpload(d),!1,q=>{f.handleUploadSuccess(c,q)},q=>{f.handleUploadFailure(c,q)})},handleUploadSuccess:function(c,g){c[a.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(c,g);this.updateValueFromFiles()},handleUploadFailure:(c,g)=>{r.dumpStack("Upload failure:"+g.status+":"+g.message)},parseServerPathFromResponse:(c,g)=>null,addFile:function(c){this.files.push(c);
this.updateValueFromFiles();this.fireEvent("addFile",c)},removeFile:function(c){const g=this.files;let k=g.length;for(;k;)if(a.isSameFile(g[--k],c)){g.splice(k,1);this.updateValueFromFiles();this.fireEvent("removeFile",c);break}},updateValueFromFiles:function(){const c=[];var g=this.files;let k=g.length;for(;k;){const f=g[--k][a.FILE_ATTR_SERVER_PATH];f&&c.push(f)}g=c.length;this.value=1===g?c[0]:0===g?void 0:c;this.value||(this.fileInput.getIDE().value="");this.verifyChangedState();this.form?.notifyValueChanged(this);
this.fireEvent("value",this.value)},clearFiles:function(){const c=this.files;let g=c.length;for(;g;)this.removeFile(c[--g])}}),e=r.ImageUploader=new v("ImageUploader",a,{extend:{isImageFile:c=>/image/i.test(c.type)},initNode:function(c,g){g.maxFiles=1;this.callSuper(c,g)},setWidth:function(c){this.callSuper(c);this.inited&&this.updateImageSize()},setHeight:function(c){this.callSuper(c);this.inited&&this.updateImageSize()},filterFiles:function(c){if(e.isImageFile(c)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);
return this.callSuper(c)}},addFile:function(c){const g=this,k=e.isImageFile(c);g.callSuper(c);const f=g.image=new r.Image(g,{useNaturalSize:!1,align:"center",valign:"middle"});f.file=c;const d=q=>{const x=new Image;x.onload=()=>{c.width=x.width;c.height=x.height;f&&!f.destroyed&&g.updateImage(c,f,x.src)};x.src=q};k?-1===c.size?d(c.serverPath):void 0!==FileReader&&e.isImageFile(c)&&a.readFile(c,q=>{d(q.target.result)}):-1===c.size?g.updateImage(c,f,c.serverPath):void 0!==FileReader&&a.readFile(c,q=>
{g.updateImage(c,f,q.target.result)})},scaleToFit:(c,g,k,f)=>k/f>c/g?[c,f*c/k]:[k*g/f,g],removeFile:function(c){this.callSuper(c);const g=this.getSubviews();let k=g.length;for(;k;){const f=g[--k];if(a.isSameFile(f.file,c)){f.destroy();break}}},handleDroppedFile:function(c,g){this.callSuper(c,g);this.uploadFile(c,this.uploadUrl)},updateImage:function(c,g,k){this.nativeWidth=c.width;this.nativeHeight=c.height;this.updateImageSize();g.setImageUrl(k)},updateImageSize:function(){const c=this.image;if(c&&
!c.destroyed){var g=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const k=t(g[0]);g=t(g[1]);c.setImageSize(k+"px "+g+"px");c.setWidth(k);c.setHeight(g)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(r=>{const v=(t,m,h,b)=>{h=h.bind(t);"y"!==t.axis&&(h(m,b,"x"),h(m,b,"boundsWidth"));"x"!==t.axis&&(h(m,b,"y"),h(m,b,"boundsHeight"));h(m,b,"visible")};r.SizeToChildren=new JS.Class("SizeToChildren",r.Layout,{initNode:function(t,m){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(t,m)},setAxis:function(t){this.axis!==t&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=t,this.startMonitoringAllSubviews(),this.fireEvent("axis",t),this.update()):this.axis=t)},setPaddingX:function(t){this.paddingX!==
t&&(this.paddingX=t,this.inited&&(this.fireEvent("paddingX",t),this.update()))},setPaddingY:function(t){this.paddingY!==t&&(this.paddingY=t,this.inited&&(this.fireEvent("paddingY",t),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const m=this.parent;if(!m.isBeingDestroyed){const h=this.subviews;var t=h.length;const b=this.axis,a=Math.max;let e,c;if("y"!==b){e=t;for(c=0;e;){const g=h[--e];g.visible&&(c=a(c,g.x+(0<g.boundsWidth?g.boundsWidth:0)))}m.setWidth(c+
this.paddingX)}if("x"!==b){e=t;for(c=0;e;)t=h[--e],t.visible&&(c=a(c,t.y+(0<t.boundsHeight?t.boundsHeight:0)));m.setHeight(c+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(t){v(this,t,this.attachTo,"update")},stopMonitoringSubview:function(t){v(this,t,this.detachFrom,"update")}})})(myt);
(r=>{let v=0;const t=JS.Class,m=r.SizeToParent,h=r.View,b=r.RootView,a=r.Dimmer=new t("Dimmer",h,{include:[m],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(c,g){const k=this;k.restoreFocus=!0;g.focusable=g.focusCage=!0;g.percentOfParentWidth??(g.percentOfParentWidth=100);g.percentOfParentHeight??(g.percentOfParentHeight=100);g.visible??(g.visible=!1);g.ignoreLayout??(g.ignoreLayout=!0);k.callSuper(c,g);k.overlay=new h(k,{ignorePlacement:!0,opacity:a.OPACITY,bgColor:a.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[m]);"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" ").forEach(f=>{k.attachDomObserver(k,"eatMouseEvent",f)});b.setupCaptureDrop(k)},destroy:function(){b.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(c){this.restoreFocus=c},eatMouseEvent:c=>!0,show:function(){const c=r.global.focus;this.prevFocus=c.focusedView??c.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(c){this.visible&&
(this.setVisible(!1),!c&&this.restoreFocus&&this.prevFocus?.focus())}}),e=r.ModalPanel=new t("ModalPanel",a,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>v,hasOpenModalPanels:()=>0<v},initNode:function(c,g){const k={name:"content",ignorePlacement:!0},f={...k,align:"center",valign:"middle"};this.defaultPlacement="content";g.sizingStrategy??(g.sizingStrategy="children");g.marginTop??(g.marginTop=e.MARGIN_TOP);g.marginLeft??
(g.marginLeft=e.MARGIN_LEFT);g.marginBottom??(g.marginBottom=e.MARGIN_BOTTOM);g.marginRight??(g.marginRight=e.MARGIN_RIGHT);g.paddingX??(g.paddingX=e.PADDING_X);g.paddingY??(g.paddingY=e.PADDING_Y);this.callSuper(c,g);switch(this.sizingStrategy){case "children":new r.SizeToChildren(new h(this,f),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new h(this,{...k,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[m]);break;case "basic":new h(this,f);break;default:new h(this,k)}},setSizingStrategy:function(c){this.sizingStrategy=c},setMarginTop:function(c){this.marginTop=c},setMarginLeft:function(c){this.marginLeft=c},setMarginBottom:function(c){this.marginBottom=c},setMarginRight:function(c){this.marginRight=c},setPaddingX:function(c){this.paddingX=c},setPaddingY:function(c){this.paddingY=c},
show:function(){this.callSuper();v++},hide:function(c){this.callSuper(c);v=Math.max(0,v-1)}})})(myt);
(r=>{const v=m=>{m[m.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},t=m=>{const h=m.size,b=m.getIDS();m.setWidth(h);m.setHeight(h);b.width=b.height=h-2*m.borderWidth+"px"};r.Spinner=new JS.Class("Spinner",r.View,{initNode:function(m,h){this.lateAttrs=["spinColor"];h.visible??(h.visible=!1);h.borderWidth??(h.borderWidth=5);h.borderColor??(h.borderColor="#fff");h.borderStyle??(h.borderStyle="solid");h.spinColor??(h.spinColor="#000");this.callSuper(m,h);this.getIDS().borderRadius="50%";t(this);
v(this)},setSize:function(m){this.size!==m&&(this.size=m,this.inited&&t(this))},setSpinColor:function(m){this.spinColor!==m&&(this.getIDS().borderTopColor=this.spinColor=m,this.inited&&this.fireEvent("spinColor",m))},setBorderWidth:function(m){this.borderWidth!==m&&(this.callSuper(m),this.inited&&t(this))},setVisible:function(m){this.visible!==m&&(this.callSuper(m),this.inited&&v(this))}})})(myt);
(r=>{const v=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),t=b=>{if(Array.isArray(b)){let a=b.length;if(0<a){b.unshift("fa");a++;b[1].startsWith("fa-")||(b[1]="fa-"+b[1]);3<=a&&(b[2]=v[b[2]]??"");if(3<a)for(let e=3;a>e;e++)b[e].startsWith("fa-")||(b[e]="fa-"+b[e]);return'<i class="'+b.join(" ")+'"></i>'}}r.dumpStack("Error making tag");console.error(b);return""},m=b=>{let a=b.properties;a=a?"string"===typeof a?a.split(" "):a.slice():[];a.unshift(b.icon,b.size);b.setHtml(t(a))},h=b=>{["Free 400","Free 900",
"Brands 400"].forEach(a=>{r.registerForFontNotification(b,"Font Awesome 5 "+a)})};r.FontAwesome=new JS.Class("FontAwesome",r.Markup,{extend:{makeTag:t,registerForNotification:h},initNode:function(b,a){this.size=0;this.icon="";this.callSuper(b,a);m(this);h(this)},setIcon:function(b){const a=this.icon;this.set("icon",b,!0);this.inited&&a!==b&&m(this)},setSize:function(b){const a=this.size;this.set("size",b,!0);this.inited&&a!==b&&m(this)},setProperties:function(b){this.properties=b;this.fireEvent("properties",
b);this.inited&&m(this)}});r.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(r=>{let v,t,m,h,b=0,a=0,e=0,c=255,g=[],k,f,d,q,x,n,l,w,C,F,I,A,u,p,y,z,D,H,K,J,M,O,V,X,U;const Q=JS.Class,R=r.View,Y=r.Text,W=r.ModalPanel,ua=r.SizeToChildren,za=r.SpacedLayout,Aa=r.SelectionManager,qa=r.Color,Ba=r.LocalStorage,va=r.Button,na=r.TextButton,Ca=r.Draggable,oa=r.FontAwesome.makeTag,ha=Math.min,ia=Math.max,la=[1,"solid","#333"],Da=[1,"solid","#999"],wa=[1,"solid","#fff"],Ia=new Q("DialogButton",na,{initNode:function(B,E){E.height??(E.height=17);E.paddingTop??(E.paddingTop=3);E.paddingLeft??
(E.paddingLeft=10);E.paddingRight??(E.paddingRight=10);E.activeColor??(E.activeColor="#bbb");E.hoverColor??(E.hoverColor="#ddd");E.readyColor??(E.readyColor="#ccc");E.domClass="mytButtonText";this.callSuper(B,E)}}),Ja=oa(["check"]),Fa=B=>{B.forEach(E=>{7===E?.length&&(E+="ff");Ea[E]=!0})},Ea={},Ka=new Q("Swatch",R,{include:[va],initNode:function(B,E){const G=E.width=E.height=16;E.border=Da;E.domClass="mytCheckerboardPattern";const L=E.bgColor;this.callSuper(B,E);this.colorView=new R(this,{width:G,
height:G,bgColor:L});L===h&&(B=qa.makeColorFromHexString(h),new r.Text(this,{x:2,y:2,text:Ja,fontSize:"12px",textColor:382.5>B.red+B.green+B.blue?"#fff":"#000"}))},setBgColor:function(B){this.colorView?.setBgColor(B);this.setTooltip(B)},doActivated:function(){v.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(la)},drawReadyState:function(){this.setBorder(Da)}}),La=r.ColorPicker=new Q("ColorPicker",R,{initNode:function(B,E){v=this;v._isReady=!1;let G=E.color??"transparent";
delete E.color;m=E.alphaChannel??!1;delete E.alphaChannel;k=E.palette??[];Fa(k);delete E.palette;t="transparent"===G;v.callSuper(B,E);f=new R(v,{width:160,height:170});new r.WrappingLayout(f,{spacing:4,lineSpacing:4});d=new R(v,{x:170,width:139,height:139,border:la},[Ca,{requestDragPosition:function(L,N){d.callSuper(d.x,d.y);const P=this.getPagePosition();a=parseFloat(ia(0,ha(1,(L+this.dragInitX-P.x)/this.width)));e=parseFloat(1-ia(0,ha(1,(N+this.dragInitY-P.y)/this.height)));t=!1;v.updateUI()}}]);
B=new R(d,{width:139,height:139});E=new R(B,{width:139,height:139});B.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";E.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";q=new R(E,{width:6,height:6,bgColor:"#000",border:wa,roundedCorners:4});x=new R(v,{x:315,y:30,width:24,height:109,border:la},[Ca,{requestDragPosition:function(L,N){this.callSuper(x.x,x.y);b=parseFloat(ia(0,ha(1,(N+this.dragInitY-this.getPagePosition().y)/this.height)));
t=!1;v.updateUI()}}]);x.getIDS().background="linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new R(x,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new R(v,{x:315,width:24,height:24,border:la,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[va,{doActivated:()=>{v.setColor("transparent")}}]);B=146;m&&(C=new r.LabelSlider(v,{x:170,y:B,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(L,
N){N=L.value;if(null==N||isNaN(N))N=0;L.value=r.formatAsPercentage(N/255,0);this.callSuper(L,!0);c=N;v._isReady&&(t=!1,v.updateUI())}}]),B+=23);l=new r.InputText(v,{x:236,y:B,width:105,height:25,roundedCorners:3,textColor:"#333",border:la,maxLength:11,fontFamily:"monospace"});v.attachToDom(l,"_submitInput","blur");v.attachToDom(l,"_handleKeyDown","keydown");l.getIDS().paddingLeft="6px";B=new R(v,{x:170,y:B,width:60,height:23,border:la,domClass:"mytCheckerboardPattern"});new R(B,{width:30,height:23,
focusIndicator:!1,bgColor:G},[va,{doActivated:()=>{v.setColor(G)}}]);w=new R(B,{x:30,width:30,height:23});if(B=Ba.getItem("myt.default"))g=B.split(";"),Fa(g);v.setColor(G);v._isReady=!0},_handleKeyDown:B=>{r.KeyObservable.isEnterKeyEvent(B)&&v._submitInput()},_submitInput:()=>{v.setColor(l.value)},addToPalette:B=>{B&&"transparent"!==B&&!Ea[B]&&(g.unshift(B),g.length=ha(g.length,56),Ba.setItem("myt.default",g.join(";")))},setColor:B=>{const E=B&&"transparent"!==B;if(m){let G="ff";E&&7<B.length&&(G=
B.slice(7,9),B=B.slice(0,7));C.setValue(parseInt(G,16))}else E&&7<B.length&&(B=B.slice(0,7));E?(B=qa.makeColorFromHexString(B).getHSV(),b=B.h/360,a=B.s,e=B.v,t=!1):t=!0;v.updateUI()},getColor:()=>{if(t)return"transparent";let B="";m&&(B=c.toString(16),2>B.length&&(B="0"+B));return qa.makeColorFromHSV(360*b,100*a,100*e).getHtmlHexString()+B},updateUI:()=>{const B=!t;n.setVisible(B);q.setVisible(B);B&&(q.setX(ia(0,ha(1,a)*(d.width+2))-5),q.setY(ia(0,ha(1,1-e)*(d.height+2))-5),n.setY(b*(x.height-2)-
1));d.setBgColor(qa.makeColorFromHSV(360*b,100,100).getHtmlHexString());h=v.getColor();l.setValue(h);w.setBgColor(h);v.redrawPalette()},redrawPalette:r.debounce(()=>{const B=f.getSubviews();let E=B.length;for(;E;)B[--E].destroy();const G=new Set;k.push(...g);k.forEach(L=>{if(m||7===L.length)7===L.length&&(L+="ff"),G.has(L)||(new Ka(f,{bgColor:L}),G.add(L))})},50)}),xa=B=>{B=B.split(":");return[ia(0,ha(23,parseInt(B[0]))),ia(0,ha(60,parseInt(B[1])))]},Ga=B=>{B.deselectAll();B=B.getSubviews();let E=
B.length;for(;E;)B[--E].destroy()},Ha=new Q("SelectableBtn",na,{include:[r.Selectable],setSelected:function(B){this.callSuper(B);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Ma=new Q("TimeBtn",Ha,{initNode:function(B,E){E.width=A?175:49;this.callSuper(B,E)},doActivated:function(){this.callSuper();const B=this.text,E=xa(B);U.selectById(B);J.setHours(E[0]);J.setMinutes(E[1])}}),Na=new Q("DayBtn",Ha,
{initNode:function(B,E){E.width=23;E.border=wa;this.callSuper(B,E)},setData:function(B){this.data=B},setIsAnotherMonth:function(B){this.isAnotherMonth=B},setIsToday:function(B){this.isToday=B},setIsSunday:function(B){this.isSunday=B},setIsSaturday:function(B){this.isSaturday=B},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();
const B=new Date(this.data);B.setHours(J.getHours());B.setMinutes(J.getMinutes());pa(B)}}),pa=B=>{B.setSeconds(0);B.setMilliseconds(0);var E=6>=p.length,G;if(E)for(G=7;G--&&!p.includes(B.getDay());)B.setDate(B.getDate()+1);J=B;const L=U.getODE().scrollTop;var N=new Date,P=N.getFullYear();G=N.getMonth();var T=N.getDate();N.getHours();N.getMinutes();const S=B.getFullYear(),ca=B.getMonth(),ra=B.getDate();var ea=B.getTime();N=B.getHours();B=B.getMinutes();const ka=(new Date(S,ca,1)).getDay()-u,da=(new Date(S,
ca+1,0)).getDate(),ma=(new Date(S,ca,0)).getDate(),sa=new Date(S,ca,0),ta=new Date(S,ca+2,0),Oa=P==S&&G==ca;if(!A){Ga(X);G=new Date(ea);const ja=7+u;P=F.days;O.setText(S+" "+F.sep+" "+F.months[ca]);G.setMinutes(59);G.setHours(23);G.setSeconds(59);G.setDate(0);M.setVisible(null==y||y<G.getTime());G.setMinutes(0);G.setHours(0);G.setSeconds(0);G.setDate(1);G.setMonth(ca+1);V.setVisible(null==z||z>G.getTime());for(G=0;7>G;G++)new Y(X,{width:23,height:20,textAlign:"center",text:P[(G+ja)%7],textColor:"#999"});
G=0;let fa=42;0>ka&&(G=-7,fa=35);P=new Date(ea);P.setHours(0);P.setMinutes(0);for(P.setSeconds(0);G<fa;G++){var aa=G+1-ka;const ya=(G+ja)%7,ba=new Na(X);ka>G?(ba.setText(ma+aa),ba.setData(sa.getFullYear()+"/"+(sa.getMonth()+1)+"/"+(ma+aa)),ba.setIsAnotherMonth(!0),P.setDate(ma+aa),P.setMonth(sa.getMonth()),P.setYear(sa.getFullYear())):G<ka+da?(ba.setText(aa),ba.setData(S+"/"+(ca+1)+"/"+aa),P.setDate(aa),P.setMonth(ca),P.setYear(S)):(ba.setText(aa-da),ba.setData(ta.getFullYear()+"/"+(ta.getMonth()+
1)+"/"+(aa-da)),ba.setIsAnotherMonth(!0),P.setDate(aa-da),P.setMonth(ta.getMonth()),P.setYear(ta.getFullYear()));E&&!p.includes(ya)?ba.setDisabled(!0):(0===ya?ba.setIsSunday(!0):6===ya&&ba.setIsSaturday(!0),aa===ra&&(X.select(ba),ba.focus()),Oa&&aa===T&&ba.setIsToday(!0),aa=new Date(P.getTime()),aa.setHours(23),aa.setMinutes(59),aa.setSeconds(59),(null!=y&&y>aa.getTime()||null!=z&&z<P.getTime())&&ba.setDisabled(!0));ba.updateUI()}}if(!I){E=60*H[0]+H[1];Ga(U);let [ja,fa]=D;for(P=new Date(ea);60*ja+
fa<E;)T=new Ma(U,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===N&&fa===B&&U.select(T),P.setHours(ja),P.setMinutes(fa),ea=P.getTime(),(null!=y&&y>ea||null!=z&&z<ea)&&T.setDisabled(!0),fa+=K,60<=fa&&(fa-=60,ja++);U.scrollYTo(L)}},Pa=r.DatePicker=new Q("DatePicker",R,{initNode:function(B,E){const G={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...E.opt};
delete E.opt;this.callSuper(B,E);F=G.locales[G.locale??"en"];I=G.dateOnly;A=G.timeOnly;u=G.firstDayOfWeek;K=ia(5,ha(30,G.minuteInterval));p=G.allowedDays;Array.isArray(p)&&0!==p.length||(p=[0,1,2,3,4,5,6]);y=Date.parse(G.minDate);y=isNaN(y)?null:y;z=Date.parse(G.maxDate);z=isNaN(z)?null:z;D=xa(G.minTime);H=xa(G.maxTime);B=new R(this,{visible:!A});G.showTodayButton&&new na(B,{width:24,text:oa(["home"]),tooltip:F.today},[{doActivated:()=>{pa(new Date)}}]);M=new na(B,{width:24,x:28,text:oa(["chevron-left"]),
tooltip:F.prevMonth},[{doActivated:()=>{const L=(new Date(J.getFullYear(),J.getMonth(),0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()-1);pa(J);M.focus()}}]);O=new Y(B,{width:100,x:52,textAlign:"center"});V=new na(B,{width:24,x:152,text:oa(["chevron-right"]),tooltip:F.nextMonth},[{doActivated:()=>{var L=(new Date(J.getFullYear(),J.getMonth()+1,0)).getDate();L<J.getDate()&&J.setDate(L);L=(new Date(J.getFullYear(),J.getMonth()+2,0)).getDate();L<J.getDate()&&J.setDate(L);J.setMonth(J.getMonth()+
1);pa(J);V.focus()}}]);X=new R(this,{y:25,width:175,height:175,visible:!A,maxSelected:1,itemSelectionId:"data"},[Aa]);new r.WrappingLayout(X,{spacing:2,lineInset:2,lineSpacing:3});U=new R(this,{x:A?0:195,y:A?0:25,width:(A?175:49)+r.DomElementProxy.getScrollbarSize(),height:A?200:175,overflow:"autoy",visible:!I,maxSelected:1,itemSelectionId:"text"},[Aa]);new za(U,{axis:"y",inset:1,spacing:3});this.setWidth(U.visible?U.x+U.width:X.width);pa(G.current??new Date)},getPickedDate:()=>J}),Z=r.Dialog=new Q("Dialog",
W,{extend:{RADIUS:12,BUTTON_CLASS:Ia,SHADOW:[0,4,20,"#666"],BORDER:wa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",
confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(B,E){E.buttonClass??(E.buttonClass=Z.BUTTON_CLASS);this.callSuper(B,E);B=this.content;B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER);
B.setFocusCage(!0);this.makeCloseButton(B)},setButtonClass:function(B){this.buttonClass=B},setCallbackFunction:function(B){this.callbackFunction=B},makeButton:function(B,E){const G=this;return new G.buttonClass(B,E,[{doActivated:function(){G.doCallback(this)}}])},makeCloseButton:function(B){return B.closeBtn=this.makeButton(B,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",
text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(B){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(B)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);const B=this.content,E=B.sizeToChildren,G=B.getSubviews();let L=G.length;for(;L;){const N=G[--L];"closeBtn"!==N.name&&N.destroy()}B.setVisible(!0);this.overlay.setBgColor(r.Dimmer.COLOR);this.setCallbackFunction();E.setPaddingY(W.PADDING_Y);E.setPaddingX(W.PADDING_X);
B.setRoundedCorners(Z.RADIUS);B.setBgColor(Z.BGCOLOR);B.setBoxShadow(Z.SHADOW);B.setBorder(Z.BORDER)},doCallback:function(B){const E=this.callbackFunction;E&&E.call(this,B.name)||this.hide()},showBlank:function(B){this.destroyContent();this.content.setVisible(!1);B?.bgColor&&this.overlay.setBgColor(B.bgColor);this.show()},showMessage:function(B,E,G){const L=this.content,N=L.closeBtn;G={...Z.WRAP_TEXT_DEFAULTS,...G};this.destroyContent();this.setCallbackFunction(E);B=L.msg=new Y(L,{text:B,whiteSpace:G.whiteSpace,
wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?W.PADDING_X:G.msgX,y:null==G.msgY?W.PADDING_Y:G.msgY,width:G.width});G.titleText&&(this.setupTitle(L,G.titleText),B.setY(B.y+24));this.show();!1===G.showClose?N.setVisible(!1):(N.setVisible(!0),N.focus())},showSimple:function(B,E,G,L){G=G??{};const N=this.content,P=N.closeBtn,T=G.maxContainerHeight;this.destroyContent();G.bgColor&&N.setBgColor(G.bgColor);G.roundedCorners&&N.setRoundedCorners(G.roundedCorners);G.boxShadow&&N.setBoxShadow(G.boxShadow);
G.border&&N.setBorder(G.border);N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(E);E=N.contentContainer=new R(N,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){S>T&&(S=T);this.callSuper(S)}}]);B.call(this,E);new ua(E,{axis:"both"});this.show();P.setVisible(!0);P.focus();G.titleText&&(this.setupTitle(N,G.titleText),E.setY(this.header.height+1));E.initialFocus?.focus();L?.(this)},showConfirm:function(B,E,G){G={...Z.CONFIRM_DEFAULTS,...G};this.showMessage(B,E,G);this.setupFooterButtons(this.content.msg,
G)},showContentConfirm:function(B,E,G,L){G={...Z.CONFIRM_DEFAULTS,...G};const N=this.content,P=N.closeBtn,T=G.maxContainerHeight;this.destroyContent();N.sizeToChildren.setPaddingX(1);this.setCallbackFunction(E);E=N.contentContainer=new R(N,{x:1,y:25,overflow:"auto"},[{setHeight:function(S){this.callSuper(S>T?T:S)}}]);B.call(this,E);new ua(E,{axis:"both"});this.show();P.setVisible(!0);P.focus();this.setupTitle(N,G.titleText);E.setY(this.header.height+1);this.setupFooterButtons(E,G);E.initialFocus?.focus();
L?.(this)},showSpinner:function(B,E){const G=this.content;E={...Z.NO_WRAP_TEXT_DEFAULTS,...E};this.destroyContent();const L=this.spinner=new r.Spinner(G,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==E.msgY?W.PADDING_Y:E.msgY});B&&new Y(G,{text:B,whiteSpace:E.whiteSpace,wordWrap:E.wordWrap,fontWeight:E.fontWeight,x:null==E.msgX?W.PADDING_X:E.msgX,y:L.y+L.size+W.PADDING_Y,width:E.width});this.show();G.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(B,E){const G=this,L=
G.content,N=L.closeBtn;E={...Z.COLOR_PICKER_DEFAULTS,...E};G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":B.call(G,T);break;case "confirmBtn":const S=P.getColor();P.addToPalette(S);B.call(G,T,S)}P.destroy()});const P=new La(L,{x:W.PADDING_X,y:W.PADDING_Y+24,width:337,height:177+(E.alphaChannel?23:0),color:E.color,alphaChannel:E.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});
G.show();N.setVisible(!0);N.focus();G.setupFooterButtons(P,E);G.setupTitle(L,E.titleText)},showDatePicker:function(B,E){const G=this,L=G.content,N=L.closeBtn;E={...Z.DATE_PICKER_DEFAULTS,...E};G.destroyContent();G.setCallbackFunction(T=>{switch(T){case "closeBtn":case "cancelBtn":B.call(G,T);break;case "confirmBtn":B.call(G,T,P.getPickedDate())}P.destroy()});const P=new Pa(L,{x:W.PADDING_X,y:W.PADDING_Y+24,height:195,opt:{current:new Date(E.initialDate??Date.now()),dateOnly:E.dateOnly||!1,timeOnly:E.timeOnly||
!1,locales:E.locales,locale:E.locale}});G.show();N.setVisible(!0);N.focus();G.setupFooterButtons(P,E);G.setupTitle(L,E.timeOnly?E.timeOnlyTitleText:E.titleText)},setupTitle:function(B,E){const G=Z.RADIUS;(this.header=new R(B,{ignoreLayout:!0,width:B.width,height:24,bgColor:"#eee",roundedTopLeftCorner:G,roundedTopRightCorner:G})).sendToBack();B.title=new Y(B,{x:G,y:4,text:E,fontWeight:"bold"})},setupFooterButtons:function(B,E){const G=this,L=G.content,N=W.PADDING_Y;var P=N/2;const T=L.btnContainer=
new R(L,{y:B.y+B.height+N,align:"center"});B=["active","hover","ready","text"];let S=E.cancelAttrs??{};var ca;(ca=S).name??(ca.name="cancelBtn");let ra;(ra=S).text??(ra.text=E.cancelTxt);B.forEach(da=>{da+="Color";null!=E[da]&&(S[da]=E[da])});ca=G.makeButton(T,S);S=E.confirmAttrs??{};var ea;(ea=S).name??(ea.name="confirmBtn");let ka;(ka=S).text??(ka.text=E.confirmTxt);B.forEach(da=>{da+="Color";const ma=da+"Confirm";null!=E[ma]&&(S[da]=E[ma])});G.makeButton(T,S);E.buttons?.forEach(da=>{G.makeButton(T,
da)});new ua(T,{axis:"y"});new za(T,{spacing:4,collapseParent:!0});L.sizeToChildren.setPaddingY(P);ea=Z.RADIUS;P=T.y-P;(new R(L,{ignoreLayout:!0,y:P,width:L.width,height:L.height-P,bgColor:"#eee",roundedBottomLeftCorner:ea,roundedBottomRightCorner:ea})).sendToBack();!1===E.showClose&&ca.focus()}})})(myt);
(r=>{const v=JS.Class,t={},m=(k,f)=>{if(k){const d=k.id;k.id?f(d):r.dumpStack("No ID")}else r.dumpStack("No validator")},h=k=>{m(k,f=>{t[f]=k})},b=r.Validator=new v("Validator",{initialize:function(k){this.id=k},isValid:(k,f,d)=>!0,isFormValid:function(k,f,d){f??={};f.form=k;return this.isValid(k.getValue(),f,d)}}),a=r.RequiredFieldValidator=new v("RequiredFieldValidator",b,{isValid:function(k,f,d){return null==k||""===k||"string"===typeof k&&""===k.trim()?(d?.push("This value is required."),!1):
!0}}),e=r.EqualsIgnoreCaseValidator=new v("EqualsIgnoreCaseValidator",b,{isValid:function(k,f,d){f=f.form.getRollbackValue();return k&&f&&k.toLowerCase()===f.toLowerCase()?(d?.push("Value must differ by more than just case."),!1):!0}}),c=r.URLValidator=new v("URLValidator",b,{initialize:function(k,f){this.callSuper(k);this.originalRawQuery=f},isValid:function(k,f,d){return(new r.URI(k)).toString(this.originalRawQuery)!==k?(d?.push("Invalid URL."),!1):!0}}),g=r.JSONValidator=new v("JSONValidator",
b,{isValid:function(k,f,d){try{return JSON.parse(k),!0}catch(q){return d?.push(q),!1}}});r.EqualFieldsValidator=new v("EqualFieldsValidator",b,{initialize:function(k,f,d){this.callSuper(k);this.fieldA=f;this.fieldB=d},isValid:function(k,f,d){if(k&&this.fieldA.getValue()===this.fieldB.getValue())return!0;d?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});r.LengthValidator=new v("LengthValidator",b,{initialize:function(k,f,d){this.callSuper(k);this.min=
f;this.max=d},isValid:function(k,f,d){k=k?k.length:0;f=this.min;const q=this.max;return void 0!==f&&f>k?(d?.push("The value must not be less than "+f+" characters long."),!1):void 0!==q&&q<k?(d?.push("The value must not be greater than "+q+" characters long."),!1):!0}});r.NumericRangeValidator=new v("NumericRangeValidator",b,{initialize:function(k,f,d){this.callSuper(k);this.min=f;this.max=d},isValid:function(k,f,d){if(""===k)return!0;k=Number(k);f=this.min;const q=this.max;return isNaN(k)?(d?.push("Value is not a number."),
!1):void 0!==f&&f>k?(d?.push("Value must not be less than "+f+"."),!1):void 0!==q&&q<k?(d?.push("Value must not be greater than "+q+"."),!1):!0}});r.CompoundValidator=new v("CompoundValidator",b,{initialize:function(k,...f){this.callSuper(k);for(k=f.length;k;){let d=f[--k];"string"===typeof d&&((f[k]=d=t[d])||f.splice(k,1))}this.__v=f},addValidator:function(k){"string"===typeof k&&(k=t[k]);k&&this.__v.push(k)},isValid:function(k,f,d){const q=this.__v,x=q.length;let n=!0,l=0;for(;x>l;)n=q[l++].isValid(k,
f,d)&&n;return n}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){h(new a("required"));h(new e("equalsIgnoreCase"));h(new c("url"));h(new g("json"));r.global.register("validators",this)},getValidator:k=>t[k],register:h,unregister:k=>{m(k,f=>{t[f]&&delete t[f]})}})})(myt);
(r=>{const v=JS.Class,t=Math,m=t.min,h=t.max,b=r.View,a=new v("SliderThumb",r.SimpleButton,{include:[r.Draggable,r.ArrowKeyActivation],initNode:function(c,g){const k=g.width=c.thumbWidth,f=g.height=c.thumbHeight;g.roundedCorners=m(f,k)/2;g.repeatKeyDown=!0;g.activationKeys=r.global.keys.ARROW_KEYS;g.activeColor="#bbb";g.readyColor="#ccc";g.hoverColor="#ddd";g.boxShadow=[0,0,4,"#666"];this.callSuper(c,g);this["x"===c.axis?"setY":"setX"](c.thumbOffset);this.syncTo(c,"setDisabled","disabled");c._syncThumbToValue(this,
c.getValue())},setDisabled:function(c){this.callSuper(this.valueFromEvent(c))},setFocused:function(c){this.callSuper(c);c&&this.makeHighestZIndex()},setX:function(c){this.x!==c&&(this.callSuper(c),c=this.parent,"x"===c.axis&&c.syncValueToThumb(this))},setY:function(c){this.y!==c&&(this.callSuper(c),c=this.parent,"y"===c.axis&&c.syncValueToThumb(this))},requestDragPosition:function(c,g){if(!this.disabled){var k=this.parent;const f=k.getMinPixelValueForThumb(this),d=k.getMaxPixelValueForThumb(this);
"x"===k.axis?(k=this.width/2,g="setX"):(k=this.height/2,c=g,g="setY");this[g](m(h(c,f-k),d-k))}},doKeyArrowLeftOrUp:function(c,g){c?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(c,g){c?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),e=r.BaseSlider=new v("BaseSlider",b,{include:[r.Disableable],initNode:function(c,g){g.axis??(g.axis="x");"x"===g.axis?(g.width??(g.width=100),g.height??(g.height=18)):(g.width??(g.width=
18),g.height??(g.height=100));g.bgColor??(g.bgColor="#999");g.roundedCorners??(g.roundedCorners=9);g.trackInset??(g.trackInset=9);g.trackOutset??(g.trackOutset=9);g.thumbWidth??(g.thumbWidth=16);g.thumbHeight??(g.thumbHeight=16);g.thumbOffset??(g.thumbOffset=1);g.nudgeAmount??(g.nudgeAmount=1);this.callSuper(c,g)},setAxis:function(c){this.axis=c},setTrackInset:function(c){this.trackInset=c},setTrackOutset:function(c){this.trackOutset=c},setThumbWidth:function(c){this.thumbWidth=c},setThumbHeight:function(c){this.thumbHeight=
c},setThumbOffset:function(c){this.thumbOffset=c},setNudgeAmount:function(c){this.nudgeAmount=c},convertValueToPixels:function(c){const g=this.minValue,k=this.trackInset;return k+(("x"===this.axis?this.width:this.height)-k-this.trackOutset)/(this.maxValue-g)*(c-g)},convertPixelsToValue:function(c){const g=this.minValue,k=this.trackInset;return(this.maxValue-g)/(("x"===this.axis?this.width:this.height)-k-this.trackOutset)*(c-k)+g},nudgeValueLeft:function(c){this._nudge(c,!1)},nudgeValueUp:function(c){this._nudge(c,
!1)},nudgeValueRight:function(c){this._nudge(c,!0)},nudgeValueDown:function(c){this._nudge(c,!0)},_nudge:(c,g)=>{},_syncThumbToValue:function(c,g){g=this.convertValueToPixels(g);"x"===this.axis?c.setX(g-c.width/2):c.setY(g-c.height/2)},syncValueToThumb:function(c){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(c,this.convertPixelsToValue("x"===this.axis?c.x+c.width/2:c.y+c.height/2)),this.__lockSync=!1)},_syncValueToThumb:(c,g)=>{},getMinPixelValueForThumb:function(c){return this.convertValueToPixels(this.minValue)},
getMaxPixelValueForThumb:function(c){return this.convertValueToPixels(this.maxValue)}});r.RangeSlider=new v("RangeSlider",e,{include:[r.BoundedRangeComponent],initNode:function(c,g){this.callSuper(c,g);c=this.rangeFill=new b(this,{bgColor:"#666"});"x"===this.axis?(c.setY(this.thumbOffset),c.setHeight(this.thumbHeight),c.setRoundedCorners(this.thumbHeight/2)):(c.setX(this.thumbOffset),c.setWidth(this.thumbWidth),c.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new a(this);this.thumbUpper=new a(this);
this._syncRangeFillToValue()},setValue:function(c){this.callSuper(c);this.inited&&(this.__lockSync||(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c)),this._syncRangeFillToValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},setHeight:function(c){const g=this.height;this.callSuper(c);
this.inited&&"y"===this.axis&&this.height!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},_syncRangeFillToValue:function(){const c=this.rangeFill;var g=this.getValue();const k=this.convertValueToPixels(g.lower);g=this.convertValueToPixels(g.upper)-k;"x"===this.axis?(c.setX(k),c.setWidth(g)):(c.setY(k),c.setHeight(g))},_syncThumbToValue:function(c,g){this.callSuper(c,"thumbLower"===c.name?g.lower:g.upper)},_syncValueToThumb:function(c,g){let k=
this.getValueCopy();k["thumbLower"===c.name?"lower":"upper"]=g;this.setValue(k);k=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,k);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,k)},_nudge:function(c,g){const k=this.getValueCopy();g=this.nudgeAmount*(g?1:-1);"thumbLower"===c.name?k.lower=m(k.lower+g,k.upper):k.upper=h(k.upper+g,k.lower);this.setValue(k)},getMinPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.minValue:this.getValue().lower)},
getMaxPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.getValue().upper:this.maxValue)}});r.Slider=new v("Slider",e,{include:[r.BoundedValueComponent],initNode:function(c,g){this.callSuper(c,g);this.thumb=new a(this)},setValue:function(c){this.callSuper(c);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,
this.getValue())},setHeight:function(c){const g=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(c,g){this.setValue(g);this._syncThumbToValue(c,this.getValue())},_nudge:function(c,g){this.setValue(this.getValue()+this.nudgeAmount*(g?1:-1))}});r.LabelSlider=new v("LabelSlider",r.Slider,{initNode:function(c,g){const k=this;g.labelX??(g.labelX=8);g.labelY??(g.labelY=2);g.labelFontSize??(g.labelFontSize=
"12px");g.labelColor??(g.labelColor="#000");g.flipThreshold??(g.flipThreshold=t.round((g.maxValue-g.minValue)/2)||0);k.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],g);k.callSuper(c,g);const f=k.labelX;k.labelTxt=new r.Text(k,{x:f,y:k.labelY,textColor:k.labelColor,fontSize:k.labelFontSize},[{initNode:function(d,q){this.targetX=f;this.callSuper(d,q)},updateX:function(d){const q=k.getValue()>=k.flipThreshold?f:k.width-this.width-f;this.targetX!==q&&(this.targetX=q,this.stopActiveAnimators("x"),
d?this.setX(q):this.animate({attribute:"x",to:q,duration:250}))}}]);k.syncTo(k,"setText","value")},setWidth:function(c){this.callSuper(c);this.labelTxt?.updateX(!0)},setText:function(c,g){const k=this.labelTxt;k&&(k.setText(c.value),k.updateX(g))}})})(myt);
(r=>{const v=JS.Class,t=r.global.keys,m=b=>{const a="y"===b.axis?"height":"width";b.constrain("__limitToParent",[b,"limitToParent",b,a,b.parent,a])},h=new v("BaseDivider",r.SimpleButton,{include:[r.BoundedValueComponent,r.Draggable,r.ArrowKeyActivation],initNode:function(b,a){a.activeColor??(a.activeColor="#bbb");a.hoverColor??(a.hoverColor="#ddd");a.readyColor??(a.readyColor="#ccc");a.axis??(a.axis="x");a.minValue??(a.minValue=0);a.value??(a.value=a.minValue);a.expansionState??(a.expansionState=
2);a.focusIndicator??(a.focusIndicator=!1);a.repeatKeyDown??(a.repeatKeyDown=!0);a.activationKeys??(a.activationKeys=[t.CODE_ENTER,t.CODE_SPACE,...t.ARROW_KEYS]);"y"===a.axis?(a.height??(a.height=6),a.cursor??(a.cursor="row-resize")):(a.width??(a.width=6),a.cursor??(a.cursor="col-resize"));this.quickSet(["axis"],a);this.__nudgeAcc=1;this.callSuper(b,a);null==a.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&m(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},
setExpansionState:function(b){this.expansionState=b},setRestoreValue:function(b){this.restoreValue=b},setLimitToParent:function(b){this.limitToParent!==b&&(this.limitToParent=b,this.inited&&(this.fireEvent("limitToParent",b),null==b?this.releaseConstraint("__limitToParent"):m(this)))},setAxis:function(b){this.inited?console.warn("Axis not updatable after instantiation"):this.axis=b},setValue:function(b,a){this.callSuper(b);b=this.value;"y"===this.axis?this.setY(b):this.setX(b);a&&this.setRestoreValue(b)},
__limitToParent:function(b){b="y"===this.axis?"height":"width";this.setMaxValue(this.parent[b]-this.limitToParent-this[b])},doActivationKeyDown:function(b,a){this.callSuper(b,a);switch(b){case t.CODE_ENTER:case t.CODE_SPACE:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(b,a){return this.nudge(!1,a)},doKeyArrowRightOrDown:function(b,a){return this.nudge(!0,a)},nudge:function(b,a){this.__nudgeAcc=a?Math.min(this.__nudgeAcc+1,64):1;this.setValue(this.value+(b?1:-1)*this.__nudgeAcc,!0);this.setExpansionState(2);
return!0},doPrimaryAction:function(){const b=this.restoreValue,a=this.maxValue,e=this.minValue;let c;switch(this.expansionState){case 0:null!=b&&(this.setExpansionState(1),b===e?b!==a&&this.doPrimaryAction():c=b);break;case 1:null!=a&&(this.setExpansionState(3),this.value===a?this.doPrimaryAction():c=a);break;case 2:null!=e&&(this.setExpansionState(0),this.value===e?this.doPrimaryAction():c=e);break;case 3:null!=b&&(this.setExpansionState(2),b===a?this.doPrimaryAction():c=b)}this.animateToValue(c)},
animateToValue:function(b,a=250){null!=b&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:b,duration:a}))},requestDragPosition:function(b,a){this.disabled||(b="y"===this.axis?a:b,a=this.value,b!==a&&(this.setValue(b,!0),this.setExpansionState(a>b?2:1)))}});r.HorizontalDivider=new v("HorizontalDivider",h,{initNode:function(b,a){a.axis="x";this.callSuper(b,a)}});r.VerticalDivider=new v("VerticalDivider",h,{initNode:function(b,a){a.axis="y";this.callSuper(b,a)}})})(myt);
(r=>{let v=0;const t=JS.Class,m=JS.Module,h=Math.min,b=Math.max,a=r.View,e=r.Node.DEFAULT_PLACEMENT,c=p=>{const y=p.columnHeaders,[z,D]=p.sort??["",""];let H=y.length;for(;H;){const K=y[--H];K.columnId===z?K.sortable&&K.setSortState(D):K.setSortState("none")}p.locked||p.doSort()},g=(p,y,z,D)=>{if(0!==y){const M=0<y,O=[];for(var H=p.length;H;){var K=p[--H];K.resizable&&(z?0<K.flex:0===K.flex)&&O.push({hdr:K,limit:(M?K.maxValue:K.minValue)-K.value,amt:0})}p=O.length;if(0<p){for(H=0;0!==y;){v>=p&&(H=
v=0);K=O[v];var J=K.hdr;K.full?++H:(M?(J=h(z?J.flex:1,y),K.amt+J>K.limit&&(J=K.limit-K.amt,K.full=!0)):(J=b(z?-J.flex:-1,y),K.amt+J<K.limit&&(J=K.limit-K.amt,K.full=!0)),K.amt+=J,y-=J);if(H===p)break;++v}O.forEach(V=>{V.hdr.setValue(V.hdr.value+V.amt)});D?.(y)}}},k=p=>(p=p.gridController?p.gridController.getPrevHdr(p):null)?p.maxValue-p.value+k(p):0,f=p=>(p=p.gridController?p.gridController.getNextHdr(p):null)?p.maxValue-p.value+f(p):0,d=p=>(p=p.gridController?p.gridController.getPrevHdr(p):null)?
p.minValue-p.value+d(p):0,q=p=>(p=p.gridController?p.gridController.getNextHdr(p):null)?p.minValue-p.value+q(p):0,x=(p,y)=>{p=p.gridController?p.gridController.getPrevHdr(p):null;var z=0;if(p){z=p.value+y;p.resizable&&p.setValue(z);const D=z-p.value;z=y-D;0>D&&(z+=x(p,D))}return z},n=(p,y)=>{p=p.gridController?p.gridController.getPrevHdr(p):null;var z=0;if(p){z=p.value+y;p.resizable&&p.setValue(z);const D=z-p.value;z=y-D;0<D&&(z+=n(p,D))}return z},l=(p,y)=>{if(p=p.gridController?p.gridController.getNextHdr(p):
null)y=p.value+y,p.resizable&&p.setValue(y),y-=p.value,0>y&&l(p,y)},w=(p,y)=>{if(p=p.gridController?p.gridController.getNextHdr(p):null)y=p.value+y,p.resizable&&p.setValue(y),y-=p.value,0<y&&w(p,y)},C=p=>{let y="";if(p.sortable)switch(p.sortState){case "ascending":y="chevron-up";break;case "descending":y="chevron-down"}p.sortIcon.setIcon(y)},F=p=>{const y=p.textView;y?.setWidth(p.width-p.outset-y.x)},I=r.GridController=new m("GridController",{initNode:function(p,y){this.columnHeaders=[];this.rows=
[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(p,y);this.fitHeadersToWidth();c(this)},setMaxWidth:function(p){this.set("maxWidth",p,!0)},setMinWidth:function(p){this.set("minWidth",p,!0)},setFitToWidth:function(p){this.fitToWidth=p},setSort:function(p){r.areArraysEqual(p,this.sort)||(this.sort=p,this.inited&&(this.fireEvent("sort",p),c(this)))},setLastColumn:function(p){const y=this.lastColumn;y!==p&&(y?.setLast(!1),this.lastColumn=p,p?.setLast(!0))},
setLocked:function(p){this.locked=p;this.inited&&!p&&(this.__tempLock=!0,this.fitHeadersToWidth(),this.__tempLock=!1,this.setMaxWidth(0),this.setMinWidth(0),this.__skipInvisibleHeaders=!0,this.columnHeaders.forEach(y=>{this.notifyHdrXChange(y);this.notifyHdrWidthChange(y);this.notifyHdrVisibilityChange(y)}),this.__skipInvisibleHeaders=!1,this.doSort())},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(p){p=this.valueFromEvent(p);this.gridWidth!==p&&(this.gridWidth=p,
this.inited&&this.fitHeadersToWidth())},doSort:()=>{},getPrevHdr:function(p){const y=this.columnHeaders;p=this.getHdrIndex(p);if(0<p)for(;p;){const z=y[--p];if(z.visible)return z}},getNextHdr:function(p){const y=this.columnHeaders,z=y.length;p=this.getHdrIndex(p)+1;if(0<p&&p<z)for(;z>p;){const D=y[p++];if(D.visible)return D}},hasHdr:function(p){return this.columnHeaders.includes(p)},getHdrIndex:function(p){return this.columnHeaders.indexOf(p)},getHdrById:function(p){const y=this.columnHeaders;let z=
y.length;for(;z;){const D=y[--z];if(D.columnId===p)return D}},getVisibleHdrs:function(){return this.columnHeaders.filter(p=>p.visible)},notifyAddHdr:function(p){this.hasHdr(p)||(this.columnHeaders.push(p),p.visible&&this.setLastColumn(p),this.fixupResizerCursors())},notifyRemoveHdr:function(p){const y=this.getHdrIndex(p);-1<y&&(this.columnHeaders.splice(y,1),p.visible&&p.last&&this.setLastColumn(this.getPrevHdr(p)),this.fixupResizerCursors())},notifyHdrXChange:function(p){this.isLocked()||this.rows.forEach(y=>
{y.notifyHdrXChange(p)})},notifyHdrWidthChange:function(p){this.isLocked()||this.rows.forEach(y=>{y.notifyHdrWidthChange(p)})},notifyHdrVisibilityChange:function(p){if((!this.__skipInvisibleHeaders||p.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(p);var y=this.setLastColumn;a:{var z=this.columnHeaders;let D=z.length;for(;D;){const H=z[--D];if(H.visible){z=H;break a}}z=void 0}y.call(this,z);y=p.visible?1:-1;this.setMaxWidth(this.maxWidth+p.maxValue*y);this.setMinWidth(this.minWidth+
p.minValue*y);this.fitHeadersToWidth();this.fixupResizerCursors()}},updateRowsForVisibilityChange:function(p){this.rows.forEach(y=>{y.notifyHdrVisibilityChange(p)})},hasRow:function(p){return this.rows.includes(p)},getRowIndex:function(p){return this.rows.indexOf(p)},getRowById:function(p,y=z=>z.model.id===p){return this.rows.find(y)},getPrevRow:function(p){p=this.getRowIndex(p)-1;return this.rows[0>p?this.rows.length-1:p]},getNextRow:function(p){p=this.getRowIndex(p)+1;return this.rows[p<this.rows.length?
p:0]},notifyAddRow:function(p,y){if(!this.hasRow(p)&&(this.rows.push(p),!this.locked)){const z=this.width;this.columnHeaders.forEach(D=>{p.setWidth(z);p.notifyHdrXChange(D);p.notifyHdrWidthChange(D);p.notifyHdrVisibilityChange(D)});y||this.doSort()}},notifyRemoveRow:function(p){p=this.getRowIndex(p);-1<p&&this.rows.splice(p,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const p=this.getVisibleHdrs();let y=0;p.forEach(z=>{y=b(y,z.x+z.width)});g(p,this.gridWidth-y,!0,z=>{g(p,z,!1,
null)})}},fixupResizerCursors:function(){const p=this.getVisibleHdrs();let y=!0,z=0;p.forEach((J,M)=>{y&&J.isFixed()?J.setResizerCursor("",!0):(y&&(z=M),y=!1,J.restoreResizerCursor())});let D=!0,H=p.length,K=H-1;for(;H>z;){const J=p[--H];D?J.setResizerCursor("",!0):J.restoreResizerCursor();J.isFixed()||(D&&(K=H),D=!1)}z===K&&p[z].setResizerCursor("",!0)}}),A=r.GridColHdr=new m("GridColHdr",{include:[r.BoundedValueComponent],initNode:function(p,y){const z=this,D=y.resizerCursor??"col-resize";delete y.resizerCursor;
y.minValue??(y.minValue=16);y.maxValue??(y.maxValue=1E3);y.value??(y.value=y.minValue);y.resizable??(y.resizable=!0);y.flex??(y.flex=0);y.cellXAdj??(y.cellXAdj=0);y.cellWidthAdj??(y.cellWidthAdj=0);y.sortable??(y.sortable=!0);y.sortState??(y.sortState="none");y.placement??(y.placement=e);z.callSuper(p,y);const H=z.gridController;z.resizer=new a(z,{cursor:D,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},[r.SizeToParent,r.Draggable,{requestDragPosition:function(K,
J){J=K-this.x;if(H.fitToWidth&&(0<J?J=h(J,h(-q(z),z.maxValue-z.value+k(z))):0>J&&(J=b(J,b(-f(z),z.minValue-z.value+d(z)))),0===J))return;K=z.value+J;z.resizable&&z.setValue(K);K-=z.value;J=K-J;let M=0;0>K?M=x(z,K):0<K&&(M=n(z,K));this.dragInitX+=M;J-=M;H.fitToWidth&&(0>J?l(z,J):0<J&&w(z,J))}}]);H&&(H.notifyAddHdr(z),H.notifyHdrXChange(z),H.notifyHdrVisibilityChange(z));z.setWidth(z.value);z.resizer.setVisible(!(z.last&&z.gridController.fitToWidth))},destroy:function(p){this.setGridController();this.callSuper(p)},
setSortable:function(p){this.set("sortable",p,!0)},setSortState:function(p){this.set("sortState",p,!0)},setResizable:function(p){this.set("resizable",p,!0)},setCellWidthAdj:function(p){this.cellWidthAdj=p},setCellXAdj:function(p){this.cellXAdj=p},setFlex:function(p){this.flex=p},setColumnId:function(p){this.columnId=p},setResizerCursor:function(p,y){const z=this.resizer,D=z.cursor;p!==D&&(y&&(this.__rrc=D),z.setCursor(p))},restoreResizerCursor:function(){const p=this.__rrc;p&&(this.setResizerCursor(p),
this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(p){this.last=p;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(p){const y=this.gridController;y!==p&&(y?.notifyRemoveHdr(this),this.gridController=p,this.inited&&p&&(p.notifyAddHdr(this),p.notifyHdrXChange(this),p.notifyHdrWidthChange(this),p.notifyHdrVisibilityChange(this)))},setValue:function(p){this.callSuper(p);this.inited&&this.setWidth(this.value)},
setMinValue:function(p){const y=this.minValue??0,z=this.gridController;this.callSuper(p);this.inited&&y!==this.minValue&&z?.setMinWidth(z.minWidth+this.minValue-y)},setMaxValue:function(p){const y=this.maxValue??0,z=this.gridController;p??=1E3;this.callSuper(p);this.inited&&y!==this.maxValue&&z?.setMaxWidth(z.maxWidth+this.maxValue-y)},setWidth:function(p){const y=this.width;this.callSuper(p);this.inited&&y!==this.width&&this.gridController?.notifyHdrWidthChange(this)},setX:function(p){const y=this.x;
this.callSuper(p);this.inited&&y!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(p){const y=this.visible;this.callSuper(p);this.inited&&y!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),u=r.GridRow=new m("GridRow",{initNode:function(p,y){y.placement??(y.placement=e);this.callSuper(p,y);this.gridController?.notifyAddRow(this)},destroy:function(p){this.setGridController();this.callSuper(p)},setGridController:function(p){const y=this.gridController;
y!==p&&(y?.notifyRemoveRow(this),this.gridController=p,this.inited&&p?.notifyAddRow(this))},notifyHdrXChange:function(p){this[p.columnId+"View"]?.setX(p.x+p.cellXAdj)},notifyHdrWidthChange:function(p){this[p.columnId+"View"]?.setWidth(p.width+p.cellWidthAdj)},notifyHdrVisibilityChange:function(p){this[p.columnId+"View"]?.setVisible(p.visible)}});r.Grid=new t("Grid",a,{include:[I],initNode:function(p,y){const z=r.SpacedLayout;y.overflow??(y.overflow="autox");y.bgColor??(y.bgColor="#ccc");y.rowSpacing??
(y.rowSpacing=1);y.columnSpacing??(y.columnSpacing=1);var D=y.isAutoScrolling;delete y.isAutoScrolling;this.callSuper(p,y);p=this.header=new a(this,{overflow:"hidden"});p.xLayout=new z(p,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});p.yLayout=new r.SizeToChildren(p,{locked:!0,axis:"y"});y=this.sizeHeightToRows;D=this.content=new a(this,{overflow:y?"hidden":"autoy"},D?[r.AutoScroller]:[]);D.yLayout=new z(D,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:y});this.syncTo(this,
"setGridWidth","width");this.syncTo(p,"_updateContentWidth","width");this.constrain("_updateContentHeight",[y?D:this,"height",p,"height",p,"y"])},setSizeHeightToRows:function(p){this.sizeHeightToRows=p},setRowSpacing:function(p){this.rowSpacing!==p&&(this.rowSpacing=p,this.inited&&this.content.yLayout.setSpacing(p))},setColumnSpacing:function(p){this.columnSpacing!==p&&(this.columnSpacing=p,this.inited&&this.header.xLayout.setSpacing(p))},setLocked:function(p){this.inited&&[this.header.xLayout,this.header.yLayout,
this.content.yLayout].forEach(y=>{p?y.incrementLockedCounter():(y.decrementLockedCounter(),y.update())});this.callSuper(p)},_updateContentWidth:function(p){const y=this.content,z=p.value;y.setWidth(z);y.getSubviews().forEach(D=>{D.setWidth(z)})},_updateContentHeight:function(p){var y=this.header;p=this.content;y=y.y+y.height;p.setY(y);this.sizeHeightToRows?this.setHeight(y+p.height):p.setHeight(this.height-y)},determinePlacement:function(p,y){if(p===e){let z;y.isA(u)?z=this.content:y.isA(A)&&(z=this.header);
if(z)return y.gridController!==this&&y.setGridController(this),z}return this.callSuper(p,y)},doSort:function(){const [p,y]=this.sort??["",""],z=this.getSortFunction(p,y);if(z){const D=this.content,H=D.yLayout;this.rows.sort(z);D.sortSubviews(z);H.sortSubviews(z);H.update()}},getSortFunction:(p,y)=>{if(p){const z="ascending"===y?1:-1,D=p+"View";return(H,K)=>{H=H[D].text;K=K[D].text;return H>K?z:K>H?-z:0}}}});r.SimpleGridColHdr=new t("SimpleGridColHdr",r.SimpleTextButton,{include:[A],initNode:function(p,
y){const z=this;y.activeColor??(y.activeColor="#999");y.hoverColor??(y.hoverColor="#bbb");y.readyColor??(y.readyColor="#aaa");y.inset??(y.inset=2);y.sortIconColor??(y.sortIconColor="#666");const D=y.outset??2;delete y.outset;z.callSuper(p,y);z.sortIcon=new r.FontAwesome(z,{align:"right",alignOffset:3,valign:"middle",textColor:z.sortIconColor},[{initNode:function(H,K){this.callSuper(H,K);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();z.setOutset(this.width+D);F(z)}}]);z.textView.enableEllipsis();
z.setDisabled(!z.sortable);F(z);C(z)},setSortIconColor:function(p){this.sortIconColor=p;this.sortIcon?.setTextColor(p)},setSortable:function(p){this.callSuper(p);this.inited&&(p&&this.setOutset(14),this.setDisabled(!p),C(this))},setSortState:function(p){this.callSuper(p);this.inited&&C(this)},setWidth:function(p){this.callSuper(p);this.inited&&F(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),this.gridController.setSort([this.columnId,
this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(r=>{const v=JS.Class,t=JS.Module,m=Math,h=m.max,b=r.View;var a=r.global;const e=a.focus,c=a.keys,g=l=>{const w=l.selectedRow;w&&(w.setSelected(!1),l.set("selectedRow",null,!0))};a=r.InfiniteListRow=new t("InfiniteListRow",{include:[r.Reusable],setInfiniteOwner:function(l){this.infiniteOwner=l},setModel:function(l){this.model=l},setClassKey:function(l){this.classKey=l},notifyRefreshed:()=>{}});const k=r.SelectableInfiniteListRow=new t("SelectableInfiniteListRow",{include:[a,r.Selectable]}),f=r.InfiniteList=
new v("InfiniteList",b,{initNode:function(l,w){let C=w.rowClasses;delete w.rowClasses;if("function"===typeof C){const F={};F["default"]=C;C=F}w.modelIDName??(w.modelIDName="id");w.numericSort??(w.numericSort=!0);w.ascendingSort??(w.ascendingSort=!0);w.overflow??(w.overflow="autoy");w.bgColor??(w.bgColor="#ccc");w.rowSpacing??(w.rowSpacing=1);w.rowInset??(w.rowInset=0);w.rowOutset??(w.rowOutset=0);w.rowHeight??(w.rowHeight=30);w.overscrollBehavior??(w.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(l,w);l=this._listView=new b(this);this._scrollAnchorView=new b(l,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(C,l);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(l,w)=>new r.TrackActivesMultiPool(l,w),setOverscrollBehavior:function(l){this.overscrollBehavior=l;this.getIDS().overscrollBehavior=l},setCollectionModel:function(l){this.collectionModel=
l},setModelIDName:function(l){this.modelIDName=l},setRowSpacing:function(l){this.rowSpacing=l;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(l){this.rowHeight=l;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(l){if(0<l&&(this.callSuper(l),this.inited)){l=this._listView;const w=this.width;l.setWidth(w);l.getSubviews().forEach(C=>{C.setWidth(w)})}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(l){const w=this.getVisibleRows();let C=w.length;for(;C;){const F=w[--C];if(F.model===l)return F}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const l=this.modelIDName,w=this.ascendingSort;return this.numericSort?r.getNumericObjSortFunc(l,w):r.getAlphaObjSortFunc(l,w,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(l,
w){var C=this.getIndexOfModelInData(l);let F=!1;if(0<=C){var I=this._rowExtent;const A=this.getIDE().scrollTop,u=A+this.height;C=this.rowInset+C*I;I=C+I;C<=A?(this.scrollYTo(C,!0),F=!0):I>=u&&(this.scrollYTo(I-this.height,!0),F=!0);w&&((w=this.getVisibleRowForModel(l))?w.focus():this._focusToModel=l)}return F},isModelInData:function(l){return 0<=this.getIndexOfModelInData(l)},getNextModel:function(l,w=!0,C=!0){const F=this.getListData(),I=F.length;l=this.getIndexOfModelInData(l);if(0<=l)return l+=
1,l>=I?w?F[0]:F[I-1]:F[l];if(C&&0<I)return F[I-1]},getPrevModel:function(l,w=!0,C=!0){const F=this.getListData(),I=F.length;l=this.getIndexOfModelInData(l);if(0<=l)return--l,0>l?w?F[I-1]:F[0]:F[l];if(C&&0<I)return F[0]},getIndexOfModelInData:function(l){if(l){const w=this.getListData();let C=w.length;for(;C;)if(this.areModelsEqual(w[--C],l))return C}return-1},areModelsEqual:function(l,w){const C=this.modelIDName;return l[C]===w[C]},getActiveRowForModel:function(l){if(l){const w=this._itemPool.getActives();
let C=w.length;for(;C;){const F=w[--C];if(this.areModelsEqual(F.model,l))return F}}},refreshListData:function(l,w){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(l,w)},resetListUI:function(l,w){const C=this.getListData().length,F=this._listView,I=this._scrollAnchorView;F.setHeight(C*this._rowExtent-(0<C?this.rowSpacing:0)+this.rowInset+this.rowOutset);I.setY(F.height-I.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=
w;l||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(l){if(e.focusedView?.isDescendantOf(l)){const w=this.getFocusTrap();w?w.focus():e.clear()}l.setVisible(!1);this._itemPool.putInstance(l)},refreshListUI:function(l){l=this._rowExtent;const w=this.rowInset,C=this.forceFullResetOnNextRefresh;var F=this.getIDE().scrollTop;const I=this.getListData()??[];var A=h(0,m.floor((F-w)/l));F=m.min(I.length,m.ceil((F-w+this.height)/l));this.forceFullResetOnNextRefresh&&
(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==A||this._endIdx!==F||C){const p=this.width,y=this.rowHeight,z=this._visibleRowsByIdx,D=this._focusToModel;this._startIdx=A;this._endIdx=F;for(var u in z)if(u<A||u>=F)this.putRowBackInPool(z[u]),delete z[u];for(u=A;u<F;u++){A=z[u];const H=I[u],K=this.getClassKey(H);let J=!1;A&&A.classKey===K||(A&&this.putRowBackInPool(A),z[u]=A=this._itemPool.getInstance(K),A.setInfiniteOwner(this),A.setClassKey(K),A.setWidth(p),A.setHeight(y),A.setY(w+u*l),
A.setVisible(!0),J=!0);!C&&A.model&&this.areModelsEqual(A.model,H)?J&&this.updateRow(A):(A.setModel(H),this.updateRow(A));A.notifyRefreshed();A.bringToFront();D&&this.areModelsEqual(D,H)&&(A.focus(),this._focusToModel=null)}}},getClassKey:l=>"default",updateRow:l=>{}}),d=r.SimpleSelectableInfiniteListRow=new v("SimpleSelectableInfiniteListRow",r.SimpleButton,{include:[k,r.ArrowKeyActivation],initNode:function(l,w){w.selectedColor??(w.selectedColor="#ccf");w.activeColor??(w.activeColor="#f8f8f8");
w.hoverColor??(w.hoverColor="#eee");w.readyColor??(w.readyColor="#fff");w.focusIndicator??(w.focusIndicator=!1);w.activationKeys??(w.activationKeys=c.LIST_KEYS);this.callSuper(l,w)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(l){this.callSuper(l);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},
doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(l,w){l===c.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(l,w)},doKeyArrowLeftOrUp:function(l,w){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(l,w){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(l){switch(l){case c.CODE_ENTER:case c.CODE_SPACE:this.doActivated()}}}),q=r.SelectableInfiniteList=
new v("SelectableInfiniteList",f,{setSelectedRow:function(l){const w=this.selectedRow;l!==w&&(w?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",l,!0),l&&(this.setSelectedRowModel(l.model),l.setSelected(!0)))},setSelectedRowModel:function(l){this.set("selectedRowModel",l,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(l,w,C){l&&(g(this),this.setSelectedRowModel(l),
this.refreshListUI(),w&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(l,w=!0){this.selectRowForModel(this.getNextModel(l),w,!0)},selectPrevRowForModel:function(l,w=!0){this.selectRowForModel(this.getPrevModel(l),w,!1)},resetListUI:function(l,w){this.isModelInData(this.selectedRowModel)?g(this):this.setSelectedRow();this.callSuper(l,w)},putRowBackInPool:function(l){l.selected&&g(this);this.callSuper(l)},refreshListUI:function(l){l=e.focusedView;this.callSuper();const w=this.getActiveSelectedRow();
w&&(this.set("selectedRow",w,!0),w.setSelected(!0),l&&l!==w||w.focus(!0))}}),x=new t("InfiniteGridRowMixin",{notifyXChange:function(l){this[l.columnId+"View"]?.setX(l.x+l.cellXAdj)},notifyWidthChange:function(l){this[l.columnId+"View"]?.setWidth(l.width+l.cellWidthAdj)},notifyVisibilityChange:function(l){this[l.columnId+"View"]?.setVisible(l.visible)}}),n=new t("InfiniteGridMixin",{setGridHeader:function(l){(this.gridHeader=l)?.setGrid(this)},makeReady:function(l,w){const C=this.gridHeader;C?(this.forceFullResetOnNextRefresh=
w,C.setSort(l),C.setLocked(!1)):this.refreshListData(!1,w)},getSortFunction:function(){const [l,w]=this.gridHeader.sort??["",""];return l?r.getAlphaObjSortFunc(l,"ascending"===w,!1):this.callSuper()},updateRow:function(l){this.gridHeader?.columnHeaders.forEach(w=>{l.notifyXChange(w);l.notifyWidthChange(w);l.notifyVisibilityChange(w)})},notifyXChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyXChange(l)})},notifyWidthChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyWidthChange(l)})},
notifyVisibilityChange:function(l){this.getVisibleRows().forEach(w=>{w.notifyVisibilityChange(l)})}});r.InfiniteGridRow=new t("InfiniteGridRow",{include:[a,x]});r.SelectableInfiniteGridRow=new t("SelectableInfiniteGridRow",{include:[k,x]});r.SimpleSelectableInfiniteGridRow=new v("SimpleSelectableInfiniteGridRow",d,{include:[x]});r.InfiniteGrid=new v("InfiniteGrid",f,{include:[n]});r.SelectableInfiniteGrid=new v("InfiniteGrid",q,{include:[n]});r.InfiniteGridHeader=new v("InfiniteGridHeader",b,{include:[r.GridController],
initNode:function(l,w){w.columnSpacing??(w.columnSpacing=1);w.overflow="hidden";this.callSuper(l,w);new r.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(l){this.grid=l},setColumnSpacing:function(l){this.columnSpacing=l},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:h(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(l){this.callSuper(l);this.inited&&(l=this.height,this.columnHeaders.forEach(w=>{w.setHeight(l)}))},setWidth:function(l){this.callSuper(h(this.minWidth,
l));this.inited&&(l=this.width,this.setGridWidth(l),this.grid.setWidth(l))},subviewAdded:function(l){this.callSuper(l);l.isA(r.GridColHdr)&&(l.setGridController(this),l.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(l){this.isLocked()||this.grid.notifyXChange(l)},notifyHdrWidthChange:function(l){this.isLocked()||this.grid.notifyWidthChange(l)},updateRowsForVisibilityChange:function(l){this.grid.notifyVisibilityChange(l)}})})(myt);
(r=>{const v=JS.Class,t=r.PanelStackTransition=new v("PanelStackTransition",r.Node,{to:m=>Promise.resolve(m),from:m=>Promise.resolve(m)});r.PanelStack=new v("PanelStack",r.View,{include:[r.SelectionManager],initNode:function(m,h){h.overflow="hidden";h.itemSelectionId??(h.itemSelectionId="panelId");h.maxSelected??(h.maxSelected=1);this.callSuper(m,h);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(m){this.set("transition",m,!0)},__updateWidth:function(m){this.getActivePanel()?.setWidth(m.value)},
__updateHeight:function(m){this.getActivePanel()?.setHeight(m.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(m){return this.getSelectableItem(m)},selectPanel:function(m){this.selectById(m)},doSelected:function(m){m.setWidth(this.width);m.setHeight(this.height)},doStackTransition:function(m){this["doStackTransition"+(m.selected?"To":"From")](m)},doStackTransitionTo:function(m){const h=this;h.doBeforeTransitionTo(m);const b=h.transition;b?b.to(m).then(a=>{h.doAfterTransitionTo(a)}):
(m.makeHighestZIndex(),m.setVisible(!0),h.doAfterTransitionTo(m))},doBeforeTransitionTo:m=>{},doAfterTransitionTo:m=>{},doStackTransitionFrom:function(m){const h=this;h.doBeforeTransitionFrom(m);const b=h.transition;b?b.from(m).then(a=>{h.doAfterTransitionFrom(a)}):(m.setVisible(!1),h.doAfterTransitionFrom(m))},doBeforeTransitionFrom:m=>{},doAfterTransitionFrom:m=>{}});r.StackablePanel=new JS.Module("StackablePanel",{include:[r.Selectable],initNode:function(m,h){h.visible=h.selected=!1;h.bgColor??
(h.bgColor="#fff");h.panelId??(h.panelId=h.name);this.callSuper(m,h);this.selected&&this.doStackTransition()},setPanelStack:function(m){this.panelStack=m},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(m){this.panelId=m},setSelected:function(m){this.selected!==m&&(this.callSuper(m),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});r.PanelStackFadeTransition=new v("PanelStackFadeTransition",t,{initNode:function(m,
h){h.duration??(h.duration=1E3);this.callSuper(m,h)},setDuration:function(m){this.duration=m},to:function(m){return new Promise((h,b)=>{m.stopActiveAnimators("opacity");m.setVisible(!0);m.animate({attribute:"opacity",to:1,duration:this.duration}).next(a=>{m.makeHighestZIndex();h(m)})})},from:function(m){return new Promise((h,b)=>{m.stopActiveAnimators("opacity");m.animate({attribute:"opacity",to:0,duration:this.duration}).next(a=>{m.setVisible(!1);h(m)})})}});r.PanelStackSlideTransition=new v("PanelStackSlideTransition",
t,{initNode:function(m,h){h.duration??(h.duration=1E3);h.direction??(h.direction="right");this.callSuper(m,h)},setDuration:function(m){this.duration=m},setDirection:function(m){this.direction=m},to:function(m){const h=m.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=h.width;break;case "right":e="x";a=-h.width;break;case "up":e="y";a=h.height;break;case "down":e="y",a=-h.height}m.stopActiveAnimators(e);m.set(e,a);m.setVisible(!0);return new Promise((c,g)=>{g=k=>
{m.makeHighestZIndex();c(m)};0<b?m.animate({attribute:e,to:0,duration:b}).next(g):(m.set(e,0),m.makeHighestZIndex(),c(m))})},from:function(m){const h=m.getPanelStack(),b=this.duration;let a,e;switch(this.direction){case "left":e="x";a=-h.width;break;case "right":e="x";a=h.width;break;case "up":e="y";a=-h.height;break;case "down":e="y",a=h.height}m.stopActiveAnimators(e);return new Promise((c,g)=>{g=k=>{m.setVisible(!1);c(m)};0<b?m.animate({attribute:e,to:a,duration:b}).next(g):(m.set(e,a),m.setVisible(!1),
c(m))})}})})(myt);
(r=>{const v=JS.Module;var t=r.global;const m=t.dragManager,h=t.mouse;t=r.Draggable;const b=(e,c,g)=>{[c,g].forEach(k=>{e["__is"+k]=!1;e["__tmrId"+k]=null})},a=r.DragGroupSupport=new v("DragGroupSupport",{initNode:function(e,c){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(e,c)},setDragGroups:function(e){const c=this.__dgs={};for(const g in e)c[g]=!0;this.__anyDG=c.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(e){const c=this.__drpgs=
{};for(const g in e)c[g]=!0;this.__anyDRPG=c.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(e){e&&(this.__dgs[e]=!0,"*"===e&&(this.__anyDG=!0))},removeDragGroup:function(e){e&&(delete this.__dgs[e],"*"===e&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(e){e&&(this.__drpgs[e]=!0,"*"===e&&(this.__anyDRPG=!0))},removeDropGroup:function(e){e&&(delete this.__drpgs[e],"*"===e&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
r.DropSource=new v("DropSource",{include:[t],initNode:function(e,c){c.distanceBeforeDrag??(c.distanceBeforeDrag=2);c.dropParent??(c.dropParent=e.getRoot());this.callSuper(e,c)},setDropClass:function(e){this.dropClass=r.resolveClassname(e)},setDropClassAttrs:function(e){this.dropClassAttrs=e},setDropParent:function(e){this.dropParent=e},startDrag:function(e){const c=this.dropable=this.makeDropable();if(c){const g=c.distanceBeforeDrag;c.distanceBeforeDrag=0;c.doMouseDown(e);c.__doMouseDown(e);c.distanceBeforeDrag=
g}},doMouseUp:function(e){this.callSuper(e);const c=this.dropable;c&&(c.__doMouseUp(e),c.doMouseUp(e),this.dropable=null)},makeDropable:function(){const e=this.dropClass,c=this.dropParent;if(e&&c){const g=r.DomElementProxy.getRelativePosition(this.getIDE(),c.getIDE());return new e(c,{...this.dropClassAttrs,x:g.x??0,y:g.y??0})}}});r.DropTarget=new v("DropTarget",{include:[a],initNode:function(e,c){this.callSuper(e,c);m.registerDropTarget(this)},destroy:function(){m.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(e){return!this.disabled&&this.isVisible()},notifyDragStart:e=>{},notifyDragStop:e=>{},notifyDragEnter:e=>{},notifyDragLeave:e=>{},notifyDrop:e=>{}});r.Dropable=new v("Dropable",{include:[t,a],setDropTarget:function(e){this.dropTarget=e},setDropped:function(e){this.dropped=e},setDropFailed:function(e){this.dropFailed=e},willPermitDrop:e=>!0,startDrag:function(e){this.setDropped(!1);this.setDropFailed(!1);m.startDrag(this);this.callSuper(e)},updateDrag:function(e){m.updateDrag(e,
this);this.callSuper(e)},stopDrag:function(e,c){m.stopDrag(e,this,c);this.callSuper(e,c);c?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(e){this.setDropTarget(e)},notifyDragLeaving:function(e){this.setDropTarget()},notifyDropped:function(e,c){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});r.AutoScroller=new v("AutoScroller",{include:[a],initNode:function(e,c){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;c.overflow??(c.overflow="auto");this.callSuper(e,c);m.registerAutoScroller(this)},destroy:function(){m.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(e){this.scrollBorder=Math.max(1,e)},setScrollFrequency:function(e){this.scrollFrequency=e},setScrollAmount:function(e){this.scrollAmount=e},setScrollAcceleration:function(e){this.scrollAcceleration=e},notifyAutoScrollerDragStart:function(e){e=this.getIDE();(e.scrollHeight>e.clientHeight||
e.scrollWidth>e.clientWidth)&&this.attachToDom(h,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(e){this.detachFromDom(h,"__hndlMove","mousemove",!0);b(this,"Up","Down");b(this,"Left","Right")},__hndlMove:function(e){const c=this;var g=e.value;e=g.pageX;g=g.pageY;if(c.containsPoint(e,g)){const k=c.getPagePosition(),f=c.scrollBorder,d=(q,x)=>{c["__is"+q]&&(c.getIDE()["scroll"+("Up"===q||"Down"===q?"Top":"Left")]+=x*c["__amt"+q],c["__tmrId"+q]=setTimeout(()=>{d(q,x)},c.scrollFrequency))};
e-=k.x;g-=k.y;g<f?(c.__isUp=!0,c.__amtUp=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-g/f))),c.__tmrIdUp||d("Up",-1)):c.height-g<f?(c.__isDown=!0,c.__amtDown=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-(c.height-g)/f))),c.__tmrIdDown||d("Down",1)):b(c,"Up","Down");e<f?(c.__isLeft=!0,c.__amtLeft=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-e/f))),c.__tmrIdLeft||d("Left",-1)):c.width-e<f?(c.__isRight=!0,c.__amtRight=Math.round(c.scrollAmount*(1+c.scrollAcceleration*(1-(c.width-
e)/f))),c.__tmrIdRight||d("Right",1)):b(c,"Left","Right")}else b(c,"Up","Down"),b(c,"Left","Right")}})})(myt);
myt.Eventable=new JS.Class("Eventable",{include:[myt.AccessorSupport,myt.Destructible,myt.Observable,myt.Observer],initialize:function(r,v){if(v){const t=v.length;for(let m=0,h;t>m;)(h=v[m++])?this.extend(h):console.warn("Missing mixin in",this.klass.__displayName)}this.inited=!1;this.init(r??{})},init:function(r){this.callSetters(r);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});
(r=>{const v=Math,t=r.Geometry.degreesToRadians,m=c=>{var g=t(c.startAngle),k=t(c.endAngle);if(g>k){var f=g;g=k;k=f}f=c.__path;var d=c.width/2,q=c.thickness;const x=c.radius,n=x+q;var l=v.PI;const w=k-g,C=w+1E-4>=2*l;C&&(g=0,k=l);const F=v.cos,I=v.sin,A=[d+n*F(g),d+n*I(g)],u=[d+n*F(k),d+n*I(k)];k=[d+x*F(k),d+x*I(k)];g=[d+x*F(g),d+x*I(g)];d=["M"+A.join()];C?d.push("A"+[n,n,0,1,1,u].join(),"A"+[n,n,0,1,1,A].join(),"L"+k.join(),"A"+[x,x,0,1,0,g].join(),"A"+[x,x,0,1,0,k].join()):(l=w%(2*l)>l?1:0,q/=2,
d.push("A"+[n,n,0,l,1,u].join(),c.endCapRounding?"A"+[q,q,0,0,1,k].join():"L"+k.join(),"A"+[x,x,0,l,0,g].join(),c.startCapRounding?"A"+[q,q,0,0,1,A].join():""));d.push("z");f.setAttribute("d",d.join(" "));f.setAttribute("fill",c.color)},h=c=>{const g=2*(c.radius+c.thickness),k=c.__svg;c.setWidth(g);c.setHeight(g);k.setAttribute("viewBox","0 0 "+g+" "+g);k.setAttribute("width",g);k.setAttribute("height",g);m(c)},b=(c,g,k)=>{c[g]!==k&&(c[g]=k,c.inited&&(m(c),c.fireEvent(g,k)))},a=(c,g,k)=>{c[g]!==k&&
(c[g]=k=v.max(0,k),c.inited&&(h(c),c.fireEvent(g,k)))},e=(c,g)=>{c=document.createElementNS("http://www.w3.org/2000/svg",c);g?.appendChild(c);return c};r.Annulus=new JS.Class("Annulus",r.BackView,{initNode:function(c,g){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(c,g);h(this)},createOurDomElement:function(c){c=this.callSuper(c);var g=Array.isArray(c)?c[1]:c;g=this.__svg=e("svg",g);this.__path=e("path",g);g.style.pointerEvents=
"none";return c},setRadius:function(c){a(this,"radius",c)},setThickness:function(c){a(this,"thickness",c)},setStartAngle:function(c){b(this,"startAngle",c)},setEndAngle:function(c){b(this,"endAngle",c)},setStartCapRounding:function(c){b(this,"startCapRounding",c)},setEndCapRounding:function(c){b(this,"endCapRounding",c)},setColor:function(c){b(this,"color",c)},isColorAttr:function(c){return"color"===c||this.callSuper(c)}})})(myt);
(r=>{let v;const t=JS.Class,m=r.global,h=m.mouse,b=m.windowResize,a=Math,e=a.min,c=a.max,g=a.round,k=n=>{n.__checkTID&&(clearTimeout(n.__checkTID),delete n.__checkTID)},f=n=>{if(n.tooltip){const l=n._lastPos;if(n.tooltip.parent.containsPoint(l.x,l.y))return!0}n.hideTip();return!1},d=r.BaseTooltip=new t("BaseTooltip",r.View,{include:[r.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(n,l){this.tipDelay=this.nextTipDelay=d.TIP_DELAY;this.tipHideDelay=d.TIP_HIDE_DELAY;l.visible??
(l.visible=!1);this.callSuper(n,l)},setTooltip:function(n){this.inited&&(this.tooltip=n)&&(this.attachToDom(h,"__hndl_mousemove","mousemove",!0),this.attachToDom(n.parent,"hideTip","mousedown",!0),this.attachToDom(n.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(n){const l=this;l._lastPos=r.MouseObservable.getMouseFromEvent(n);f(l)&&(k(l),l.__checkTID=setTimeout(()=>{delete l.__checkTID;f(l)&&l.showTip()},l.nextTipDelay))},hideTip:function(n){k(this);if(n=this.tooltip?.parent)this.detachFromDom(n,
"hideTip","mousedown",!0),this.detachFromDom(n,"hideTip","mouseup",!0),this.detachFromDom(h,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){m.dragManager.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),q=r.Tooltip=new t("Tooltip",d,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",TIP_TEXT_COLOR:"#eee"},
initNode:function(n,l){l.edgeSize??(l.edgeSize=q.EDGE_SIZE);l.edgeColor??(l.edgeColor=q.EDGE_COLOR);l.shadowSize??(l.shadowSize=q.SHADOW_SIZE);l.shadowColor??(l.shadowColor=q.SHADOW_COLOR);l.insetH??(l.insetH=q.HORIZONTAL_INSET);l.insetV??(l.insetV=q.VERTICAL_INSET);l.tipBgColor??(l.tipBgColor=q.TIP_BG_COLOR);l.tipTextColor??(l.tipTextColor=q.TIP_TEXT_COLOR);this.callSuper(n,l);this._tipText=new r.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,whiteSpace:"inherit"})},
setEdgeSize:function(n){this.edgeSize=n},setEdgeColor:function(n){this.edgeColor=n},setShadowSize:function(n){this.shadowSize=n},setShadowColor:function(n){this.shadowColor=n},setInsetH:function(n){this.insetH=n},setInsetV:function(n){this.insetV=n},setTipBgColor:function(n){this.tipBgColor=n},setTipTextColor:function(n){this.tipTextColor=n},showTip:function(){const n=this.tooltip;var l=n.text;const w=n.parent;var C=this._tipText;const F=this.edgeSize,I=this.shadowSize;C.text!==l&&C.setText(l);C.setWidth("auto");
var A=e(C.measureNoWrapWidth(),n.maxTextWidth);l=A+2*C.x;const u=l+2*F;C.setWidth(A);C.sizeViewToDom();A=w.getPagePosition();C=C.height+2*C.y;const p=C+2*F,y=A.y-p+("below"===n.tipvalign?w.height+p:0);A=A.x;switch(n.tipalign){case "right":A-=u;case "farright":A+=w.width;break;case "farleft":A-=u}this.setX(g(e(c(A,0),b.getWidth()-u)));this.setY(g(e(c(y,0),b.getHeight()-p)));this.setWidth(l);this.setHeight(C);this.setBgColor(this.tipBgColor);this.setBorder([F,"solid",this.edgeColor]);this.setBoxShadow([I,
I,I,this.shadowColor]);this.callSuper()}}),x=r.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:q,MAX_TEXT_WIDTH:280},setTooltip:function(n){this.callSuper("");this.set("tooltip",n,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(n){this.set("tipAlign",n,!0)},setTipValign:function(n){this.set("tipValign",n,!0)},setMaxTextWidth:function(n){this.set("maxTextWidth",n,!0)},setTipClass:function(n){this.set("tipClass",n,!0)},doSmoothMouseOver:function(n){const l=this.getTooltip();
this.callSuper(n);if(n&&l){n=this.tipClass??x.TIP_CLASS;!v||v instanceof n||(v.destroy(),v=null);if(!v){let w=document.getElementById("tooltipDiv");w||(w=r.DomElementProxy.createElement("div",{position:"absolute"}),r.getElement().appendChild(w));v=new n(w,{domId:"tooltipDiv"})}v.setTooltip({parent:this,text:l,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||x.MAX_TEXT_WIDTH})}}})})(myt);
(r=>{const v=Math;r.Path=new JS.Class("Path",{initialize:function(t){this.setVectors(t??[])},setVectors:function(t){this._boundingBox=null;this.vectors=t},copyFrom:function(t){this.vectors=t.vectors.slice();this._boundingBox=null},drawInto:function(t){t.beginPath();const m=this.vectors;let h=m.length,b=0;for(t.moveTo(m[b++],m[b++]);h>b;)t.lineTo(m[b++],m[b++]);t.closePath()},translate:function(t,m){const h=this.vectors;let b=h.length;for(;b;)h[--b]+=m,h[--b]+=t;this._boundingBox=null},rotate:function(t){const m=
v.cos(t);t=v.sin(t);const h=this.vectors,b=h.length;for(let a=0;b>a;){const e=h[a]*m-h[a+1]*t,c=h[a]*t+h[a+1]*m;h[a++]=e;h[a++]=c}this._boundingBox=null},rotateAroundOrigin:function(t,m,h){this.translate(-m,-h);this.rotate(t);this.translate(m,h)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const t=this.vectors;let m=t.length,h,b,a,e;if(2<=m){a=e=t[--m];for(h=b=t[--m];m;){const c=t[--m],g=t[--m];a=v.min(c,a);e=v.max(c,e);h=v.min(g,h);b=v.max(g,b)}return this._boundingBox=
{x:h,y:a,width:b-h,height:e-a}}return this._boundingBox=null},getCenter:function(){const t=this.getBoundingBox();return t?{x:t.x+t.width/2,y:t.y+t.height/2}:null},isPointInPath:function(t,m){"object"===typeof t&&(m=t.y,t=t.x);return r.Geometry.isPointInPath(t,m,this.getBoundingBox(),this.vectors)}})})(myt);
(r=>{const v=Math.PI,t=v/2,m=3*v/2,h=r.AccessorSupport,b={};"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" ").forEach(a=>{b[a]=function(...e){this.__ctx[a](...e)}});["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"].forEach(a=>{b[a]=function(...e){return this.__ctx[a](...e)}});
"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" ").forEach(a=>{b[h.generateSetterName(a)]=function(e){this.__ctx[a]=e};b[h.generateGetterName(a)]=function(){return this.__ctx[a]}});r.Canvas=new JS.Class("Canvas",r.BackView,{include:[b],createOurDomElement:function(a){a=this.callSuper(a);const e=Array.isArray(a)?a[1]:a,c=this.__cvs=document.createElement("canvas");
c.className="mytUnselectable";e.appendChild(c);c.style.position="absolute";this.__ctx=c.getContext("2d");return a},setWidth:function(a){0>a&&(a=0);this.__cvs.setAttribute("width",a);this.callSuper(a)},setHeight:function(a){0>a&&(a=0);this.__cvs.setAttribute("height",a);this.callSuper(a)},clear:function(){const a=this.__ctx;a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.width,this.height);a.restore()},dataURItoBlob:function(a,e){a=atob(a.split(",")[1]);const c=a.length,g=[];for(let k=0;k<
c;)g.push(a.charCodeAt(k++));return new Blob([new Uint8Array(g)],{type:e})},getDataURL:function(a,e){return this.__cvs.toDataURL(a,e)},getImageFile:function(a,e,c){switch(a){case "png":case "PNG":a="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":a="jpeg";c??=.5;break;default:console.warn("Unexpected image type",a),a=a.toLowerCase()}const g="image/"+a;c=this.dataURItoBlob(this.getDataURL(g,c),g);e&&(c.name=e+"."+a);return c},circle:function(a,e,c){this.__ctx.arc(a,e,c,0,2*v)},drawRoundedRect:function(a,
e,c,g,k,f){const d=this.lineTo.bind(this),q=this.arc.bind(this);f=g+f;k=c+k;this.beginPath();this.moveTo(c,g+a);d(c,f-a);q(c+a,f-a,a,v,t,!0);d(k-a,f);q(k-a,f-a,a,t,0,!0);d(k,g+a);q(k-a,g+a,a,0,m,!0);d(c+a,g);q(c+a,g+a,a,m,v,!0);this.closePath();0<e&&(a-=e,c+=e,k-=e,g+=e,f-=e,this.moveTo(c,g+a),q(c+a,g+a,a,v,m),d(k-a,g),q(k-a,g+a,a,m,0),d(k,f-a),q(k-a,f-a,a,0,t),d(c+a,f),q(c+a,f-a,a,t,v),this.closePath());return this},drawRectOutline:function(a,e,c,g,k){k=c+k;g=e+g;const f=e+a,d=g-a,q=c+a;a=k-a;const x=
this.lineTo.bind(this);this.beginPath();this.moveTo(e,c);x(e,k);x(g,k);x(g,c);x(e,c);x(f,q);x(d,q);x(d,a);x(f,a);x(f,q);this.closePath();return this},drawPartiallyRoundedRect:function(a,e,c,g,k,f,d,q){q=f+q;d=k+d;const x=this.lineTo.bind(this),n=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(k,f+a);x(k,q-c);0<c&&n(k,q,k+c,q);x(d-g,q);0<g&&n(d,q,d,q-g);x(d,f+e);0<e&&n(d,f,d-e,f);x(k+a,f);0<a&&n(k,f,k,f+a);this.closePath();return this},drawAnnulus:function(a,e,c,g,k,f,d,q=60){const x=
r.Color;d.forEach(D=>{"string"===typeof D.color&&(D.color=x.makeColorFromHexString(D.color))});1>q&&(console.warn("Invalid segements",q),q=60);q=v/q;let n=0;for(var l=d.length-1;n<l;){var w=d[n++];const {angle:D,color:H}=w,{angle:K,color:J}=d[n];var C=Math.round((K-D)/q),F=H.getDiffFrom(J);w.colorDelta={red:F.red/C,green:F.green/C,blue:F.blue/C}}c=new r.Path([a+c,e,a+g,e]);c.rotateAroundOrigin(k,a,e);g=c.vectors;let [I,A,u,p]=g,y=0,z=v/360;for(n=0;f>k;){C=I;F=A;l=u;w=p;k+=q;k>f&&(q+=f-k,z=0,k=f);
c.rotateAroundOrigin(q+z,a,e);[I,A,u,p]=g;this.beginPath();this.moveTo(C,F);this.lineTo(l,w);this.lineTo(u,p);this.lineTo(I,A);this.closePath();const {color:D,colorDelta:H}=d[n];this.setFillStyle(x.rgbToHex(D.red+y*H.red,D.green+y*H.green,D.blue+y*H.blue,!0));this.fill();0<z&&(c.rotateAroundOrigin(-z,a,e),[I,A,u,p]=g);y++;k>=d[n+1].angle&&(y=0,n++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
