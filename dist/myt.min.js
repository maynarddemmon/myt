(r=>{let x;var v=d=>{let h=d.length;for(;h;){const n=d[--h];x=n.ver??n.id;if(n.str?.includes(n.sub)||n.prop)return n.id}};var t=d=>{const h=d.indexOf(x);if(0<=h)return parseFloat(d.slice(h+x.length+1))};const l=navigator.userAgent,e=navigator.platform;t=r.BrowserDetect={browser:v([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:l,sub:"Firefox",id:"Firefox"},{str:l,sub:"Chrome",id:"Chrome"},{str:l,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:t(l)||t(navigator.appVersion)||"UNKNOWN",os:v([{str:l,sub:"iPhone",id:"iPhone/iPod"},{str:e,sub:"Linux",id:"Linux"},{str:e,sub:"Mac",id:"Mac"},{str:e,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(t.browser){case "Chrome":case "Safari":r="WebKit";break;case "Explorer":r="MS";break;case "Firefox":r="Moz";break;case "Opera":r="O";break;default:r="UNKNOWN"}v=r.toLowerCase();t.prefix={dom:r,lowercase:v,css:"-"+v+"-",js:v[0].toUpperCase()+v.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:r,floor:x,ceil:v}=Math,t="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" "),d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h=g=>(10>g?"0":"")+g,n=(g,a)=>{g=g.getTimezoneOffset();return(0<g?"-":"+")+h(x(r(g/60)))+(a?":":"")+(0==r(g%60)?"00":h(r(g%60)))},c={d:g=>
h(g.getDate()),D:g=>e[g.getDay()],j:g=>g.getDate(),l:g=>d[g.getDay()],N:g=>0==g.getDay()?7:g.getDay(),S:g=>{g=g.getDate();return 1==g%10&&11!=g?"st":2==g%10&&12!=g?"nd":3==g%10&&13!=g?"rd":"th"},w:g=>g.getDay(),z:g=>{const a=new Date(g.getFullYear(),0,1);return v((g-a)/864E5)},W:g=>{const a=new Date(g.valueOf());g=(g.getDay()+6)%7;a.setDate(a.getDate()-g+3);g=a.valueOf();a.setMonth(0,1);4!==a.getDay()&&a.setMonth(0,1+(4-a.getDay()+7)%7);return h(1+v((g-a)/6048E5))},F:g=>l[g.getMonth()],m:g=>h(g.getMonth()+
1),M:g=>t[g.getMonth()],n:g=>g.getMonth()+1,t:g=>{let a=g.getFullYear();g=g.getMonth()+1;12===g&&(a=a++,g=0);return(new Date(a,g,0)).getDate()},L:g=>{g=g.getFullYear();return 0==g%400||0!=g%100&&0==g%4},o:g=>{const a=new Date(g.valueOf());a.setDate(a.getDate()-(g.getDay()+6)%7+3);return a.getFullYear()},Y:g=>g.getFullYear(),y:g=>(""+g.getFullYear()).substr(2),a:g=>12>g.getHours()?"am":"pm",A:g=>12>g.getHours()?"AM":"PM",B:g=>x(1E3*((g.getUTCHours()+1)%24+g.getUTCMinutes()/60+g.getUTCSeconds()/3600)/
24),g:g=>g.getHours()%12||12,G:g=>g.getHours(),h:g=>h(g.getHours()%12||12),H:g=>h(g.getHours()),i:g=>h(g.getMinutes()),s:g=>h(g.getSeconds()),e:g=>/\((.*)\)/.exec((new Date).toString())[1],I:g=>{let a=null,f=0;for(;12>f;){const b=(new Date(g.getFullYear(),f++,1)).getTimezoneOffset();if(null===a)a=b;else if(b<a){a=b;break}else if(b>a)break}return g.getTimezoneOffset()==a|0},O:g=>n(g,!1),P:g=>n(g,!0),T:g=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:g=>60*-g.getTimezoneOffset(),c:g=>g.format("Y-m-d\\TH:i:sP"),
r:g=>g.toString(),U:g=>g.getTime()/1E3,x:g=>g.toLocaleDateString(),X:g=>g.toLocaleTimeString()};return function(g){return g.replace(/(\\?)(.)/g,(a,f,b)=>""===f&&c[b]?c[b](this):b)}})();
(r=>{const x=(f,b)=>{var q=f.__mct__.get(b);if(q)return q.slice();const w=[];if(q=f.__anc__){const k=q.length;for(let u=0;u<k;){const B=q[u++].__fns__;B.has(b)&&w.push(B.get(b))}}else{const k=f.__anc__=[],u=B=>{const I=B.__inc__,z=I.length;for(let C=0;C<z;)u(I[C++]);k.includes(B)||(k.push(B),B=B.__fns__,B.has(b)&&w.push(B.get(b)))};u(f)}f.__mct__.set(b,w.slice());return w},v=(f,b)=>{const q=f.callable;return f.__hs?function(...w){const k=this.callSuper,u=x(b,f.name);let B=u.length-1;if(0===B)k&&delete this.callSuper;
else{const z=w.length,C=this.callSuper=(...J)=>{for(let M=J.length;M<z;)J[M]=w[M++];0===--B&&delete this.callSuper;J=u[B].callable.call(this,...J);this.callSuper=C;B++;return J}}const I=q.call(this,...w);k?this.callSuper=k:delete this.callSuper;return I}:q},t=(f,b)=>{b=b??f;if(b===f){f.__anc__=null;f.__mct__=new Map;var q=f.__dep__;for(var w=q.length;0<w;)t(q[--w])}q=b.__tgt__;w=f.__inc__;const k=w.length;for(let u=0;u<k;)t(w[u++],b);for(const [u,B]of f.__fns__)f=B instanceof d?v(B,b):B,q[u]!==f&&
(q[u]=f)},l=f=>f.__meta__??(f.__meta__=new h(null,null,f)).include(f.klass,!0),e=f=>{const b=function(...q){return this.initialize(...q)??this};b.prototype=Object.create(f.prototype);return b},d=e(Object),h=r.Module=e(Object);d.prototype.initialize=function(f,b,q){this.module=f;this.name=b;this.callable=q;this.__hs=q.toString().includes("callSuper")};var n=h.prototype;n.initialize=function(f,b,q){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=q;f&&(this.__displayName=
f);this.include(b,!0)};n.include=function(f,b){if(f){if(f.__fns__)this.__inc__.push(f),f.__dep__.push(this);else{var q=f.extend,w=f.include;q&&(q.__fns__||"function"!==typeof q)&&this.extend(q);if(w&&(w.__fns__||"function"!==typeof w)){q=w.length;for(let k=0;k<q;)this.include(w[k++],!0)}for(const k of Object.keys(f))if(w=f[k],"extend"!==k&&"include"!==k||!w.__fns__&&"function"===typeof w)this.__fns__.has(k)?(console.warn('JS.Module already has field: "'+k+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new h("Auto_"+k,{[k]:w}),!1)):this.__fns__.set(k,w?.__fns__||"function"!==typeof w?w:new d(this,k,w))}!0!==b&&t(this)}return this};n.includes=function(f){if(f===this)return!0;const b=this.__inc__,q=b.length;for(let w=0;w<q;)if(b[w++].includes(f))return!0;return!1};n.instanceMethod=function(f){return x(this,f).pop()};const c=new h("Kernel",{extend:function(f){l(this).include(f)},isA:function(f){return"function"===typeof f&&this instanceof f||l(this).includes(f)}}),g=r.Class=e(h),a=g.prototype;
a.initialize=function(f,b,q){"function"!==typeof b&&(q=b,b=Object);h.prototype.initialize.call(this,f);f=e(b);for(const w in this)f[w]===this[w]||f.hasOwnProperty(w)||(f[w]=this[w]);f.prototype.constructor=f.prototype.klass=f;l(f).include(b.__meta__);f.__tgt__=f.prototype;b=b===Object?{}:b.__fns__?b:new h(b.prototype,!0);f.include(c,!0).include(b,!0).include(q,!0);t(f);return f};n=(f,b)=>{f.__inc__=[];f.__dep__=[];const q=f.__tgt__=f.prototype,w=f.__fns__=new Map;for(const I of Object.keys(q)){var k=
w,u=k.set;var B=q[I];B=B?.__fns__||"function"!==typeof B?B:new d(f,I,B);u.call(k,I,B)}q.constructor=q.klass=f;for(const I in a)f[I]===a[I]||f.hasOwnProperty(I)||(f[I]=a[I]);f.include(b);f.constructor=f.klass=g};n(d,c);n(h,c);n(g,h);t(l(d));t(l(h));l(g).include(h.__meta__);r.Singleton=new g("Singleton",{initialize:(f,b,q)=>new (new g(f,b,q))})})(global.JS={});
(r=>{class x extends Error{constructor(p,y,...A){super(...A);this.name="FetchError";this.status=p;this.url=y}}let v=0,t,l={};const e=console.warn,d=Math,{abs:h,min:n,max:c,pow:g}=d,a=Array.isArray,f=document,b=f.head,q=f.createElement.bind(f),w={},k={"":!0},u=f.fonts,B=p=>{const y=p.family.split('"').join("");for(const A of[y,y+" "+p.weight])if(!k[A]){k[A]=!0;const E=w[A]??[];for(;E.length;)(p=E.pop())&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y))}},I={},z=p=>{const y=
{};return(...A)=>{const E=JSON.stringify(A);return E in y?y[E]:y[E]=p(...A)}},C=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,J=/\$(\d+)/g,M=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,O=/[\\"](.)/g,m=r.myt={version:2.02306021558E7,generateGuid:()=>++v,hash:p=>p.split("").reduce((y,A)=>{y=(y<<5)-y+A.charCodeAt(0);return y&y},0),addEventListener:(p,y,A,E,F)=>{p.addEventListener(y,A,{capture:E||!1,passive:F||!1})},removeEventListener:(p,y,A,E)=>{p.removeEventListener(y,A,E||!1)},resolveName:(p,
y)=>{if(p&&0!==p.length){y=y??global;var A=a(p)?p:p.split("."),E=A.length;for(let F=0;F<E;F++)if(y=y[A[F]],null==y){e("resolveName failed for",p,"at part",F,A[F]);return}return y}},resolveClassname:p=>{"string"===typeof p&&(p=m.resolveName(p));return p&&"function"===typeof p.isA&&p.isA(JS.Class)?p:null},getExtension:p=>p?(p=p.split("."),1<p.length?p.pop():null):null,loadScript:function(p,y,A,E){const F=this._loadedScripts??(this._loadedScripts={});let K=F[p];if(!0===K)y?.(!0);else if(!1===K)y?.(!1);
else if(Array.isArray(K))y&&K.push(y);else{K=F[p]=[];y&&K.push(y);const L=q("script");L.type="text/javascript";L.async=!1;E&&(L.integrity=E,L.crossOrigin="anonymous");const R=N=>{L.onload=L.onreadystatechange=L.onerror=null;for(const T of K)T(N);F[p]=N};L.onerror=()=>{R(!1)};L.onload=L.onreadystatechange=()=>{L.readyState&&"complete"!==L.readyState||R(!0)};L.src=p+(A?"":(p.includes("?")?"&":"?")+"cacheBust="+Date.now());b.appendChild(L)}},dumpStack:(p,y)=>{let A;"string"===typeof p&&(A=p,p=null);
m.global.error.notify(y||"error",null,A,p)},getRandom:p=>{const y=d.random();return p?c(0,n(p(y),.9999999999)):y},getRandomArbitrary:(p,y,A)=>{const E=n(p,y);return m.getRandom(A)*(c(p,y)-E)+E},getRandomInt:(p,y,A)=>{const E=n(p,y);return d.floor(m.getRandom(A)*(c(p,y)-E+1)+E)},areFloatsEqual:(p,y,A)=>{const E=h(p),F=h(y);return h(p-y)<=(E>F?F:E)*(null==A?1E-6:h(A))},areArraysEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;let A=p.length;if(A!==y.length)return!1;for(;A;)if(p[--A]!==y[A])return!1}return!0},
areObjectsEqual:(p,y)=>{if(p!==y){if(null==p||null==y)return!1;for(const A in p)if(p[A]!==y[A])return!1;for(const A in y)if(p[A]!==y[A])return!1}return!0},getElement:(p,y)=>f.getElementsByTagName(p||"body")[0<y?y:0],loadFontFaces:(p,y)=>{const A=[];for(const E of p)p=new FontFace(E.family,"url("+E.url+")",E.options),A.push(p.load());Promise.all(A).then(E=>{for(const F of E)u.add(F),B(F);y?.(E)})},loadFontFace:(p,y,A={},E)=>{p=new FontFace(p,"url("+y+")",A);p.loaded.then(F=>{u.add(F);B(F);E?.(F)});
p.load()},registerForFontNotification:(p,y)=>{k[y]?p&&!p.destroyed&&p.isVisible()&&(p.sizeViewToDom(),p.notifyFontLoaded?.(y)):(w[y]??(w[y]=[])).push(p)},createBaseFontCSSRule:p=>{m.addCSSRule(m.createStylesheet(),"body, input","font-family:"+p,0)},loadCSSFonts:p=>{p?.forEach(m.createStylesheetLink)},createStylesheetLink:p=>{if(p){let y=l[p];y?console.warn("stylesheet already exists",p):(y=l[p]=q("link"),y.rel="stylesheet",y.href=p,b.appendChild(y));return y}},createStylesheet:()=>{const p=q("style");
b.appendChild(p);return p.sheet},addCSSRule:(p,y,A,E)=>{p.insertRule(y+"{"+A+"}",E)},removeCSSRules:p=>{let y=p.cssRules.length;for(;y;)p.deleteRule(--y)},createInputPlaceholderCSSRule:(p,y,A,E=1)=>{let F=p.__sheet;F?m.removeCSSRules(F):F=p.__sheet=m.createStylesheet();p=p.getODE();p=p.id||(p.id="id"+ ++v);const K=[];y&&K.push("color:"+y);A&&K.push("font-family:"+A);E&&K.push("opacity:"+E);m.addCSSRule(F,"#"+p+"::placeholder",K.join("; "),0)},isNotSorted:(p,y)=>{const A=p.length;for(let E=1;E<A;E++)if(0<
y(p[E-1],p[E]))return!0},chainSortFunc:(...p)=>(y,A)=>{for(const E of p){const F=E(y,A);if(0!==F)return F}return 0},getAlphaObjSortFunc:z((p,y,A,E)=>{const F=y?1:-1;return(K,L)=>{K=K[p];L=L[p];E?("string"!==typeof K&&(K=""+K),"string"!==typeof L&&(L=""+L)):(K=K||"",L=L||"");A&&(K=K.toLowerCase(),L=L.toLowerCase());return K.localeCompare(L)*F}}),getNumericObjSortFunc:z((p,y)=>{const A=y?1:-1;return(E,F)=>{E=E[p]||0;F=F[p]||0;return(E-F)*A}}),csvStringToArray:(p,y)=>{if(!p)return[];const A=[[]];let E;
for(;E=M.exec(p);)E[1].length&&","!==E[1]&&A.push([]),A[A.length-1].push(E[2]?E[2].replace(O,"$1"):E[3]);if(y){const F=A.shift();return A.map(K=>{let L=0;return F.reduce((R,N)=>{R[N]=K[L++];return R},{})})}return A},prepareCSVDataURI:(p,y)=>{const A=K=>{if(K&&a(K)){const L=[],R=K.length;for(let N=0,T;R>N;N++)T=K[N],T=null==T?"":T.toString(),T=T.replace(/"/g,'""'),0<=T.search(/("|,|\n)/g)&&(T='"'+T+'"'),L.push(T);return L.join(",")}e("Unexpected row",K);return null},E=[];if(y){var F=A(y);F&&E.push(F)}if(p)if(a(p)){F=
p.length;for(let K=0;F>K;K++){const L=A(p[K]);L&&E.push(L)}}else e("Rows were not an array");return m.encodeCSVDataURI(E.join("\r\n"),y)},encodeCSVDataURI:(p,y)=>"data:text/csv;charset=utf-8"+(null==y?"":";header="+(y?"present":"absent"))+","+encodeURIComponent(p),dataURIToBlob:p=>{var y=p.indexOf(",");const A=p.slice(0,y).split(":")[1].split(";")[0];p=p.slice(y+1);if(A.startsWith("text/"))p=decodeURIComponent(p);else{p=atob(p);y=p.length;const E=new Uint8Array(y);for(;y;)E[--y]=p.charCodeAt(y);p=
E}return new Blob([p],{type:A})},formatAsPercentage:(p,y=2)=>{switch(typeof p){case "number":return y=n(16,c(0,y)),p=d.round(c(0,n(1,p))*g(10,2+y))/g(10,y),(0===p%1?p:p.toFixed(y))+"%";case "string":return p;default:return e("formatAsPercentage: expects a number"),p}},leftPadNumber:(p,y,A="0",E=10)=>{p=p.toString(E);return A.repeat(c(y-p.length,0))+p},memoize:z,debounce:(p,y,A)=>{const E="__DBTO_"+ ++v;return function(){const F=this,K=F[E],L=arguments,R=A&&!K;clearTimeout(K);F[E]=setTimeout(function(){F[E]=
null;A||p.apply(F,L)},y);R&&p.apply(F,L)}},createFixedThresholdCounter:(p,y,A,E)=>{var F=m.AccessorSupport.generateName;const K="function"===typeof p||p instanceof JS.Module,L={};E=E||F("counter",A);const R=F(E,"increment");F=F(E,"decrement");if(void 0!==(K?p.instanceMethod(R):p[R]))return e("Increment: Abort clobber",R,p),!1;if(void 0!==(K?p.instanceMethod(F):p[F]))return e("Decrement: Abort clobber",F,p),!1;L[R]=function(){const N=this[E]+1;this[E]=N;this.fireEvent(E,N);N===y&&this.set(A,!0)};L[F]=
function(){const N=this[E];if(0!==N){var T=N-1;this[E]=T;this.fireEvent(E,T);N===y&&this.set(A,!1)}};p[K?"include":"extend"](L);return!0},makeURLSearchParams:(p={})=>{const y=new URLSearchParams;for(const A in p){const E=p[A];void 0!==E&&y.set(A,E)}return y},doFetch:(p,y,A,E,F,K)=>fetch(p,y).then(L=>{if(!L.ok)throw new x(L.status,p,L.statusText);return L}).then(L=>A?L.text():L.json()).then(L=>{if(E)try{if(A)E(L);else{if(!1===L.success)throw new x(200,p,L.message);E(L.data)}}catch(R){throw L=new x(200,
p,R.message),L.stack=R.stack,L;}}).catch(L=>{if(F){if("FetchError"!==L.name){const R=new x(0,p,L.message);R.stack=L.stack;L=R}F(L)}}).finally(()=>{K?.()}),I18N:{setLocale:p=>{t=p},getLocale:()=>t,addDictionary:(p,y)=>{I[y]=Object.assign(I[y]??{},p)},setDictionary:(p,y)=>{I[y]=p??{}},get:(p,...y)=>{var A=t??=(navigator.language??"en").split("-")[0].toLowerCase();A=(I[A]??I.en??{})[p];return null!=A?0<y.length?A.replaceAll(C,(E,F,K,L)=>K&&L?1==y[parseInt(F)]?K:L:"").replaceAll(J,(E,F)=>y[F]):A:p}}};
u.onloadingdone=p=>{for(const y of p.fontfaces)B(y)}})(global);
(r=>{const x=(t,l)=>{t.startsWith('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return l?JSON.parse(t):t}catch(e){}},v=r.Cookie={defaults:{raw:!1,json:!1},read:(t,l)=>{l={...v.defaults,...l};const e=l.raw?g=>g:g=>decodeURIComponent(g.split("+").join(" "));l=l.json;const d=document.cookie.split("; "),h=d.length,n=t?void 0:{};for(let g=0;g<h;){var c=d[g++].split("=");const a=e(c.shift());c=e(c.join("="));if(t){if(t===a)return x(c,l)}else n[a]=x(c,l)}return n},write:(t,l,e)=>
{e={...v.defaults,...e};if("number"===typeof e.expires){const a=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+a)}l=e.json?JSON.stringify(l):String(l);const {raw:d,expires:h,path:n,domain:c,samesite:g}=e;return document.cookie=[d?t:encodeURIComponent(t),"=",d?l:encodeURIComponent(l),h?"; expires="+h.toUTCString():"",n?"; path="+n:"",c?"; domain="+c:"",g?"; samesite="+g:"",e.secure?"; secure":""].join("")},remove:(t,l)=>void 0!==v.read(t,l)?(v.write(t,"",{...l,expires:-1}),!0):!1}})(myt);
(r=>{const x=console.error,v=JSON.parse,t=global.localStorage,l=t.getItem.bind(t),e=t.setItem.bind(t),d=t.removeItem.bind(t),h=t.clear.bind(t),n=(g,a,f)=>{if(0<a){const b="__timerId_"+f;(f=c[b])&&clearTimeout(f);c[b]=setTimeout(()=>{g();delete c[b]},a)}else g()},c=r.LocalStorage={hasDatum:(g,a)=>{if(g&&(a=l(a??"myt")))try{return null!=v(a)[g]}catch(f){x(f)}return!1},getDatum:(g,a)=>{if(g&&(a=l(a??"myt")))try{const f=v(a);if("object"===typeof f)return f[g]}catch(f){x(f)}},setDatum:(g,a,f,b)=>{f=f??
"myt";n(()=>{const q=c.getData(f);q[g]=a;e(f,JSON.stringify(q))},b,f+"___"+g)},removeDatum:(g,a,f)=>{a=a??"myt";n(()=>{const b=c.getData(a);delete b[g];e(a,JSON.stringify(b))},f,a+"___"+g)},hasData:g=>null!=l(g??"myt"),getData:g=>{if(g=l(g??"myt"))try{return v(g)}catch(a){x(a)}return{}},setData:(g,a,f)=>{a=a??"myt";g??={};return"object"===typeof g?(n(()=>{e(a,JSON.stringify(g))},f,a),!0):!1},removeData:(g,a)=>{g=g??"myt";n(()=>{d(g)},a,g)},getLength:()=>t.length,getKey:t.key.bind(t),getItem:l,setItem:e,
removeItem:d,clear:h,get:l,set:e,remove:d,clearAll:h}})(myt);
(r=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,v=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;r.URI=new JS.Class("URI",{initialize:function(l,e){l&&this.parse(l,e)},setSource:function(l){this.source=l},setProtocol:function(l){this.protocol=
l},setAuthority:function(l){this.authority=l},setUserInfo:function(l){this.userInfo=l},setUser:function(l){this.user=l},setPassword:function(l){this.password=l},setHost:function(l){this.host=l},setPort:function(l){this.port=l},setRelative:function(l){this.relative=l},setPath:function(l){this.path=l},setDirectory:function(l){this.directory=l},setFile:function(l){this.file=l},setQuery:function(l){this.query=l},setAnchor:function(l){this.anchor=l},parse:function(l,e){const d=this,[h,n,c,g,a,f,b,q,w,
k,u,B,I,z]=(e?t:v).exec(l)??[];d.setSource(h??"");d.setProtocol(n??"");d.setAuthority(c??"");d.setUserInfo(g??"");d.setUser(a??"");d.setPassword(f??"");d.setHost(b??"");d.setPort(q??"");d.setRelative(w??"");d.setPath(k??"");d.setDirectory(u??"");d.setFile(B??"");d.setQuery(I??"");d.setAnchor(z??"");d.queryPairs={};d.query.replace(x,(C,J,M)=>{J&&(d.queryPairs[J]=M)})},decodeQueryParam:l=>decodeURIComponent(l).split("+").join(" "),getQuery:function(){var l=this.queryPairs;const e=[];for(const d in l)e.push(d+
"="+encodeURIComponent(this.getQueryParam(d)));l=e.join("&");return 0<l.length?"?"+l:l},getQueryParam:function(l){l=this.queryPairs[l];return null==l?void 0:this.decodeQueryParam(l)},setQueryParam:function(l,e){this.queryPairs[encodeURIComponent(l)]=encodeURIComponent(e)},removeQueryParam:function(l){delete this.queryPairs[l]},getPathParts:function(l){const e=this.path.split("/");if(!l)for(l=e.length;l;)0===e[--l].length&&e.splice(l,1);return e},toString:function(l){const e=this.path;l=l?this.query?
"?"+this.query:"":this.getQuery();const d=this.anchor;let h=this.toStringThroughPort();e?h+=e:this.host&&(l||d)&&(h+="/");l&&(h+=l);d&&(h+="#"+d);return h},toStringThroughPort:function(){const l=this.protocol,e=this.host,d=this.userInfo,h=this.port;let n="";l&&(n+=l+"://");d&&e&&(n+=d+"@");e&&(n+=e,h&&(n+=":"+h));return n}})})(myt);
(r=>{const x=Math,{PI:v,cos:t,sin:l,sqrt:e}=x,d=(c,g,a,f,b,q)=>{"object"===typeof c&&(q=b,b=f,f=a,a=g,g=c.y,c=c.x);"object"===typeof a&&(q=a.height,b=a.width,f=a.y,a=a.x);return c>=a&&g>=f&&c<=a+b&&g<=f+q},h=(c,g,a,f,b)=>{c=a-c;g=f-g;g=c*c+g*g;return b?g:e(g)},n=(c,g,a,f,b)=>{null==b&&(b=6371);c=c*v/180;a=a*v/180;return b*x.acos(l(c)*l(a)+t(c)*t(a)*t(f*v/180-g*v/180))};r.Geometry={getClosestPointOnALineToAPoint:(c,g,a,f,b,q,w)=>{a-=c;f-=g;b=(a*(b-c)+f*(q-g))/(a*a+f*f);w&&(b=x.min(1,x.max(0,b)));return{x:c+
a*b,y:g+f*b}},isPointInPath:(c,g,a,f)=>{"object"===typeof c&&(f=a,a=g,g=c.y,c=c.x);if(d(c,g,a)&&(a=f.length,6<=a)){let b=!1,q=f[0],w=f[1],k,u;for(;a;)u=f[--a],k=f[--a],u>g!==w>g&&c<(q-k)*(g-u)/(w-u)+k&&(b=!b),q=k,w=u;return b}return!1},measureDistance:h,measureLatLngDistance:n,degreesToRadians:c=>c*v/180,radiansToDegrees:c=>180*c/v,rectContainsPoint:d,circleContainsPoint:(c,g,a,f,b)=>h(c,g,a,f,!0)<=b*b,circleContainsLatLng:(c,g,a,f,b,q)=>n(c,g,a,f,q)<=b,polarToCartesian:(c,g,a,f)=>{a??=0;f??=0;g%=
360;if(0===g)g=c,c=0;else if(90===g)g=0;else if(180===g)g=-c,c=0;else if(270===g)g=0,c=-c;else{const b=g*v/180;g=c*t(b);c*=l(b)}return[a+g,f+c]},cartesianToPolar:(c,g,a,f,b)=>{a??=0;f??=0;c-=a;f=g-f;g=e(c*c+f*f);f=x.atan2(f,c);0>f&&(f+=2*v);return[g,b?f:180*f/v]}}})(myt);
(r=>{const x=JS.Module,v=console.log,t=r.dumpStack;r.Observable=new x("Observable",{attachObserver:function(l,e,d){return l&&e&&d?(this.getObservers(d).push(e,l),!0):!1},detachObserver:function(l,e,d){if(l&&e&&d){var h=this.__obsbt;if(h&&(d=h[d])){h=!1;let n=d.length;for(;2<=n;){const c=d[--n],g=d[--n];l===c&&e===g&&(d.splice(n,2),h=!0)}return h}}return!1},detachAllObservers:function(){const l=this.__obsbt;if(l)for(const e in l){const d=l[e];let h=d.length;for(;2<=h;){const n=d[--h],c=d[--h];n&&c&&
("function"===typeof n.detachFrom&&n.detachFrom(this,c,e)||d.splice(h,2))}}},getObservers:function(l){let e;return(e=this.__obsbt??(this.__obsbt={}))[l]??(e[l]=[])},hasObservers:function(l){const e=this.__obsbt;return e?0<e[l]?.length:!1},createEvent:function(l,e){return{source:this,type:l,value:e}},fireEvent:function(l,e,d){if(null==d){var h=this.__obsbt;h&&(d=h[l])}if(d){h={source:this,type:l,value:e};const n=this.__aet??(this.__aet={});if(n[l])r.global.error.notify("warn","eventLoop","Abort refiring event:"+
l,null,{observable:this,type:l,value:e});else{n[l]=!0;for(e=d.length;2<=e;){const c=d[--e],g=d[--e];if(c&&g)try{if("function"===typeof g){if(g.call(c,h))break}else if(c[g]?.(h))break}catch(a){t(a),v("Additional context",g,c)}}n[l]=!1}}}});r.Observer=new x("Observer",{valueFromEvent:l=>l&&"object"===typeof l&&l.type?l.value:l,syncTo:function(l,e,d,h,n){h??=d;try{this[e](l.createEvent(d,l.get(h)))}catch(c){t(c)}n||this.attachTo(l,e,d,n)},isAttachedTo:function(l,e,d){if(l&&e&&d){var h=this.__obt;if(h&&
(d=h[d]))for(h=d.length;2<=h;){const n=d[--h],c=d[--h];if(l===n&&e===c)return!0}}return!1},getObservables:function(l){let e;return(e=this.__obt??(this.__obt={}))[l]??(e[l]=[])},hasObservables:function(l){const e=this.__obt;return e?0<e[l]?.length:!1},attachTo:function(l,e,d,h){if(l&&e&&d){const n=this.getObservables(d);if(h){const c=this,g=e;this.__methodNameCounter??(this.__methodNameCounter=0);e="__DO_ONCE_"+this.__methodNameCounter++;this[e]=a=>{c.detachFrom(l,e,d);delete c[e];return c[g](a)}}if(l.attachObserver(this,
e,d))return n.push(e,l),!0}return!1},detachFrom:function(l,e,d){if(l&&e&&d){var h=this.__obt;if(h&&(h=h[d])){let n=!1,c=h.length;for(;2<=c;){const g=h[--c],a=h[--c];l===g&&e===a&&l.detachObserver(this,e,d)&&(h.splice(c,2),n=!0)}return n}}return!1},detachFromAllObservables:function(){var l=this.__obt;if(l)for(const [e,d]of Object.entries(l)){for(l=d.length;2<=l;){const h=d[--l],n=d[--l];h.detachObserver(this,n,e)}d.length=0}},constrain:function(l,e){if(l&&e){const h=e.length;if(0!==h%2)v("Observables uneven",
this);else{var d;const n=(d=this.__cbmn??(this.__cbmn={}))[l]??(d[l]=[]);if(0<n.length)v("Constraint exists for "+l+" on",this);else{for(d=0;d<h;){const c=e[d++],g=e[d++];c&&g&&(this.attachTo(c,l,g),n.push(c,g))}try{this[l]()}catch(c){t(c)}}}}},releaseConstraint:function(l){if(l){var e=this.__cbmn;if(e&&(e=e[l])){let d=e.length;for(;2<=d;){const h=e[d--],n=e[d--];this.detachFrom(n,l,h)}e.length=0}}},releaseAllConstraints:function(){const l=this.__cbmn;if(l)for(const e in l)this.releaseConstraint(e)}})})(myt);
(r=>{const x=console.warn,v=r.global=new JS.Singleton("Global",{include:[r.Observable],initialize:()=>{},register:(t,l)=>{v.hasOwnProperty(t)&&(x("Global key in use",t),v.unregister(t));v[t]=l;v.fireEvent("register"+t,l)},unregister:t=>{if(v.hasOwnProperty(t)){const l=v[t];delete v[t];v.fireEvent("unregister"+t,l)}else x("Global key not in use",t)}})})(myt);
(r=>{let x;new JS.Singleton("GlobalError",{include:[r.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);r.global.register("error",x)},setConsoleLogging:v=>{x.consoleLogging=v},setStackTraceLimit:v=>{Error.stackTraceLimit=x.stackTraceLimit=v},notify:(v,t,l,e,d)=>{e??=Error(l??t);e=e.stack??e.stacktrace;x.fireEvent(t??"error",{msg:l,stacktrace:e,...d});if(x.consoleLogging&&v)console[v](e)}})})(myt);
(r=>{const x=global,v=x.getComputedStyle,t=document,l=Math.max,e=n=>{const {zIndex:c,opacity:g}=v(n);if("auto"===c){if(1===parseInt(g,10)){let a=0;n=n.childNodes;let f=n.length;for(;f;){const b=n[--f];1===b.nodeType&&(a=l(a,e(b)))}return a}return 0}return parseInt(c,10)},d=(n,c)=>{const g=[];for(;n;){g.push(n);if(n===c)break;n=n.parentNode}return g},h=r.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(n,c,g)=>{n=t.createElement(n);for(const a in g)n[a]=g[a];for(const a in c)n.style[a]=
c[a];return n},isDomElementVisible:n=>{if("INPUT"!==n.nodeName||"hidden"!==n.type)for(;n;){if(n===t)return!0;const {display:c,visibility:g}=v(n);if("none"===c||"hidden"===g)break;n=n.parentNode}return!1},getZIndexRelativeToAncestor:(n,c)=>{if(n&&c)for(n=d(n,c),c=n.length-1;c;){const g=v(n[--c]),a=g.zIndex,f="auto"===a;if(0===c||!f||1!==parseInt(g.opacity,10))return f?0:parseInt(a,10)}return 0},getAncestorArray:d,getHighestZIndex:e,getRelativePosition:(n,c)=>{if(n){let g=0,a=0;for(;n&&"BODY"!==n.nodeName&&
n!==c;)if(g+=n.offsetLeft,a+=n.offsetTop,(n=n.offsetParent)&&"BODY"!==n.nodeName){const {borderLeftWidth:f,borderTopWidth:b}=v(n);g+=parseInt(f,10)-n.scrollLeft;a+=parseInt(b,10)-n.scrollTop}return{x:g,y:a}}},getTruePosition:n=>{if(n)return n=n.getBoundingClientRect(),n.left+=x.scrollX,n.top+=x.scrollY,n},simulateDomEvent:(n,c,g)=>{if(n){const a={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},f={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(g)for(const q in g)a[q]=g[q];let b;for(const q in f)if(f[q].test(c)){b=q;break}if(!b)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(t.createEvent)g=t.createEvent(b),"HTMLEvents"===b?g.initEvent(c,a.bubbles,a.cancelable):g.initMouseEvent(c,a.bubbles,a.cancelable,t.defaultView,a.button,a.pointerX,a.pointerY,a.pointerX,a.pointerY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null),n.dispatchEvent(g);
else{a.clientX=a.pointerX;a.clientY=a.pointerY;g=t.createEventObject();for(const q in a)g[q]=a[q];n.fireEvent("on"+c,g)}}},getScrollbarSize:r.memoize(()=>{const n=t.body,c=h.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});n.appendChild(c);const g=c.offsetWidth-c.clientWidth;n.removeChild(c);return g})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(n){if(Array.isArray(n)){const [c,
g]=n;this.__oE=c;this.__iE=g;this.__iS=g.style;this.__oS=c.style;g.model=c.model=this}else this.__oE=this.__iE=n,this.__iS=this.__oS=n.style,n.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(n){this.__iE.className=this.domClass=n},addDomClass:function(n){const c=this.__iE.className;this.setDomClass((c?
c+" ":"")+n)},removeDomClass:function(n){var c=this.__iE.className;if(c){c=c.split(" ");let g=c.length;for(;g;)c[--g]===n&&c.splice(g,1);this.setDomClass(c.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(n){this.__iE.id=this.domId=n},setZIndex:function(n){this.__oS.zIndex=n},setStyleProperty:function(n,c){this.__iS[n]=c},getPagePosition:function(n){return h["get"+(n?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){h.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return e(this.__iE)},getHighestChildZIndex:function(n){const c=this.__iE.childNodes;let g=c.length,a=0;for(;g;){const f=c[--g];1===f.nodeType&&f!==n&&(a=l(a,e(f)))}return a},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(n,c){(c?this.__iE:this.__oE).scrollTop=n||0}})})(myt);
(r=>{let x;const v=l=>{for(;l.lastChild;)l=l.lastChild;return l},t=(l,e)=>{x.lastTraversalWasForward=l;let d=document.body,h=d;var n=document.activeElement;let c=h,g;const a=l?"getNextFocus":"getPrevFocus";n&&(c=h=n,(n=h.model)??(n=x.findModelForDomElement(h)),n&&(e=n.getFocusTrap(e))&&(d=e.getIDE()));for(;c;){if(c.model&&c.model[a]&&(g=c.model[a]()))c=g.getIDE();else if(l)if(c.firstChild)c=c.firstChild;else{if(c===d)return h.model;if(c.nextSibling)c=c.nextSibling;else for(;c&&(c=c.parentNode,c!==
d);)if(c.nextSibling){c=c.nextSibling;break}}else c=c===d?v(d):c.previousSibling?v(c.previousSibling):c.parentNode;if(c===h)return h.model;if(1===c.nodeType)if((n=c.model)&&n instanceof r.View){if(n.isFocusable())return n}else if(e=c.nodeName,!("A"!==e&&"AREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e&&"BUTTON"!==e||c.disabled||isNaN(c.tabIndex))&&r.DomElementProxy.isDomElementVisible(c)&&(n=x.findModelForDomElement(c),!n?.searchAncestorsOrSelf(f=>!0===f.maskFocus))){c.focus();x.focusedDom=c;
break}}};new JS.Singleton("GlobalFocus",{include:[r.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;r.global.register("focus",x)},setFocusedView:l=>{if(x.focusedView!==l){x.prevFocusedView=x.focusedView;if(x.focusedView=l)x.focusedDom=null;x.fireEvent("focused",l)}},notifyFocus:l=>{x.focusedView!==l&&x.setFocusedView(l)},notifyBlur:l=>{x.focusedView===l&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:l=>{t(!0,l)?.focus()},prev:l=>{t(!1,l)?.focus()},findModelForDomElement:l=>{for(;l;){let e=l.model;if(e&&e instanceof r.View)return e;l=l.parentNode}}})})(myt);
(r=>{const x=JS.Module,v=r.global,t=v.focus,l=()=>({source:null,type:null,value:null}),e=b=>{b=b.value??b;return(b.target??b.srcElement).model},d=r.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:l(),getKeyFromEvent:b=>b.value.key,getCodeFromEvent:b=>b.value.code,isEnterKeyEvent:b=>b.value.code===v.keys.CODE_ENTER,isEscKeyEvent:b=>b.value.code===v.keys.CODE_ESC,isShiftKeyEvent:b=>v.keys.isShiftCode(b.value.code)},createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,
q,w,d)??this.callSuper(b,q,w)}}),h=r.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:l(),getMouseFromEvent:b=>({x:b.value.pageX,y:b.value.pageY}),getMouseFromEventRelativeToView:(b,q)=>{q=q.getPagePosition();b=h.getMouseFromEvent(b);b.x-=q.x;b.y-=q.y;return b}},createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,q,w,h,!0)??this.callSuper(b,q,w)}}),n=r.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:l(),getScrollFromEvent:b=>{const {scrollLeft:q,scrollTop:w}=e(b)?.getIDE();return{x:q,y:w}}},createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,q,w,n)??this.callSuper(b,q,w)}}),c=r.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:l()},createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,q,w,c,!1)??this.callSuper(b,q,w)}}),
g=r.FocusObservable=new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:l()},initNode:function(b,q){this.focusable=!1;this.focusIndicator=!0;this.callSuper(b,q)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(b){this.focused!==b&&(this.focused=b,this.inited&&(this.fireEvent("focused",b),b?t.notifyFocus(this):t.notifyBlur(this)))},setFocusable:function(b){if(this.focusable!==b){const q=this.focusable;(this.focusable=b)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):q&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",b)}},setFocusIndicator:function(b){this.focusIndicator!==b&&(this.focusIndicator=b,this.focused&&(b?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(t.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(b=>!0===b.maskFocus)},focus:function(b){this.isFocusable()&&this.getIDE().focus({preventScroll:b})},blur:function(){this.getIDE().blur()},__doFocus:function(b){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(b){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const b=this.getIDS();b.outlineWidth="thin";b.outlineColor="#8bf";b.outlineStyle="solid";b.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(b,q,w){if(g.EVENT_TYPES[w]){const k=this;return u=>{u??=window.event;if(k._ignoreFocus)u.cancelBubble=!0,u.stopPropagation?.(),u.preventDefault();
else{var B=g.EVENT;B.source=k;B.type=u.type;B.value=u;b[q](B)||(u.cancelBubble=!0,u.stopPropagation?.());B.source=void 0}}}return this.callSuper(b,q,w)}}),a=r.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:l()},createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,q,w,a)??this.callSuper(b,q,w)}}),f=r.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:l()},
createDomHandler:function(b,q,w){return this.createStandardDomHandler(b,q,w,f,!0)??this.callSuper(b,q,w)}});r.DomObservable=new x("DomObservable",{attachDomObserver:function(b,q,w,k,u){if(b&&q&&w){const B=this.createDomHandler(b,q,w);if(B){k=!!k;const I=this.__dobsbt??(this.__dobsbt={}),z=I[w];z?z.push(b,q,B,k):I[w]=[b,q,B,k];r.addEventListener(this.getDomElementForDomObservable(w),w,B,k,u);return!0}}return!1},getDomElementForDomObservable:function(b){return this.getIDE()},createDomHandler:(b,q,w)=>
null,createStandardDomHandler:function(b,q,w,k,u){if(k.EVENT_TYPES[w]){const B=this,I=k.EVENT;return z=>{z??=window.event;I.source=B;I.type=z.type;I.value=z;b[q](I)||(z.cancelBubble=!0,z.stopPropagation?.(),u&&z.preventDefault());I.source=void 0}}},detachDomObserver:function(b,q,w,k){if(b&&q&&w){var u=this.__dobsbt;if(u&&(u=u[w])){k=!!k;const B=this.getDomElementForDomObservable(w);let I=!1,z=u.length;for(;4<=z;){const C=u[--z],J=u[--z],M=u[--z],O=u[--z];b===O&&q===M&&k===C&&(B&&r.removeEventListener(B,
w,J,k),u.splice(z,4),I=!0)}return I}}return!1},detachAllDomObservers:function(){var b=this.__dobsbt;if(b)for(const [q,w]of Object.entries(b)){for(b=w.length+2;4<=b;){const k=w[b-=3],u=w[--b];r.removeEventListener(this.getDomElementForDomObservable(q),q,u,k)}w.length=0}}});r.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:e},attachToDom:function(b,q,w,k,u){if(b&&q&&w){k=!!k;let B;const I=(B=this.__dobt??(this.__dobt={}))[w]??(B[w]=[]);b.attachDomObserver(this,q,w,k,u)&&I.push(k,q,b)}},
detachFromDom:function(b,q,w,k){if(b&&q&&w){var u=this.__dobt;if(u&&(u=u[w])){k=!!k;let B=!1,I=u.length;for(;3<=I;){const z=u[--I],C=u[--I],J=u[--I];b===z&&q===C&&k===J&&b.detachDomObserver(this,q,w,k)&&(u.splice(I,3),B=!0)}return B}}return!1},detachFromAllDomSources:function(){var b=this.__dobt;if(b)for(const [q,w]of Object.entries(b)){for(b=w.length;3<=b;){const k=w[--b],u=w[--b],B=w[--b];k.detachDomObserver(this,u,q,B)}w.length=0}}})})(myt);
(r=>{let x;const {KeyObservable:v,global:t}=r,l=t.focus,e=v.getCodeFromEvent,d=new Set,h="Firefox"===BrowserDetect.browser,n=h?"OSLeft":"MetaLeft",c=h?"OSRight":"MetaRight",g=()=>d.has("ShiftLeft")||d.has("ShiftRight"),a=()=>d.has("ControlLeft")||d.has("ControlRight"),f=()=>d.has("AltLeft")||d.has("AltRight"),b=()=>d.has(n)||d.has(c),q=(k,u)=>{switch(k){case "Backspace":return k=u.nodeName,!("TEXTAREA"===k||"INPUT"===k&&("text"===u.type||"number"===u.type||"password"===u.type)||"DIV"===k&&"true"===
u.contentEditable&&u.firstChild);case "Tab":return!0}return!1},w=(k,u)=>{for(const B of["keydown","keypress","keyup"])x[u](k,"__hndl_"+B,B)};new JS.Singleton("GlobalKeys",{include:[r.DomElementProxy,r.DomObservable,r.DomObserver,v,r.Observable,r.Observer],initialize:function(){t.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const k of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+k]="Key"+k;for(const k of"1234567890".split(""))x["CODE_"+k]="Digit"+k;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(l,"__hndl_focused","focused");w(x,"attachToDom");global.onblur=()=>{d.clear()}},isShiftKeyDown:g,isControlKeyDown:a,isAltKeyDown:f,isMetaKeyDown:b,isShiftCode:k=>
"ShiftLeft"===k||"ShiftRight"===k,isControlCode:k=>"ControlLeft"===k||"ControlRight"===k,isAltCode:k=>"AltLeft"===k||"AltRight"===k,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?b():a(),ignoreFocusTrap:()=>f(),__hndl_focused:k=>{(k=k.value)?(w(x,"detachFromDom"),w(k,"attachToDom")):((k=l.prevFocusedView)&&w(k,"detachFromDom"),w(x,"attachToDom"))},__hndl_keydown:k=>{const u=e(k);k=k.value;q(u,k.target)&&k.preventDefault();b()&&"ShiftLeft"!==u&&"ShiftRight"!==u&&"ControlLeft"!==u&&"ControlRight"!==
u&&"AltLeft"!==u&&"AltRight"!==u?(x.fireEvent("keydown",u),x.fireEvent("keyup",u)):(d.add(u),"Tab"===u&&(k=f(),g()?l.prev(k):l.next(k)),x.fireEvent("keydown",u))},__hndl_keypress:k=>{x.fireEvent("keypress",e(k))},__hndl_keyup:k=>{const u=e(k);k=k.value;q(u,k.target)&&k.preventDefault();d.delete(u);x.fireEvent("keyup",u)}})})(myt);
(r=>{const x=JS.Module,v=Math.max,t=(c,g,a,f,b=0)=>{const q=c.length;for(let w=a;b<q;b++)h(c[b],g,w),f&&(w+=a)},l=(c,g,a,f=0)=>{const b=c.length;for(let q=g;f<b;)c[f++].crossPos+=q,a&&(q+=g)},e=(c,g,a,f)=>{var b=c[g?"setWidthViaFlex":"setHeightViaFlex"];g=f?g?c.getFlexBasisWidth():c.getFlexBasisHeight():0;b.call(c,g+a)},d=(c,g,a)=>{c[g?"setXViaFlex":"setYViaFlex"](a,!1)},h=(c,g,a)=>{c[g?"setXViaFlex":"setYViaFlex"](a,!0)},n=(c,g,a)=>{c[g]!==a&&(c[g]=a,c.inited&&c.fireEvent(g,a),c.updateFlexboxLayout())};
r.FlexboxSupport=new x("FlexboxSupport",{initNode:function(c,g){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(c,g);this.updateFlexboxLayout()},setWidth:function(c){const g=this.width;this.callSuper(c);g!==this.width&&this.updateFlexboxLayout()},setHeight:function(c){const g=this.height;this.callSuper(c);g!==this.height&&this.updateFlexboxLayout()},
setDirection:function(c){n(this,"direction",c)},setWrap:function(c){n(this,"wrap",c)},setJustifyContent:function(c){n(this,"justifyContent",c)},setAlignItems:function(c){n(this,"alignItems",c)},setAlignContent:function(c){n(this,"alignContent",c)},setRowGap:function(c){n(this,"rowGap",v(0,c))},setColumnGap:function(c){n(this,"columnGap",v(0,c))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(c){this.set("totalBasisWidth",
c,!0)},setTotalBasisHeight:function(c){this.set("totalBasisHeight",c,!0)},ignoreSubviewForFlex:function(c){return c&&"function"===typeof c.ignoreFlex?c.ignoreFlex():!0},setFlexboxPaused:function(c,g){this.__flexboxPaused!==c&&((this.__flexboxPaused=c)||g||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(c){this.callSuper(c);c&&!this.ignoreSubviewForFlex(c)&&this.updateFlexboxLayout()},subviewRemoved:function(c){this.callSuper(c);!c||this.ignoreSubviewForFlex(c)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(c){this.callSuper(c);c&&this.ignoreSubviewForFlex(c)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(c){return c?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(c){return c?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(c){this._updateAgain=c},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const c=this;if(c.isOKToUpdateLayout()){var g=c.getSubviewsInLexicalOrder().filter(z=>!0!==c.ignoreSubviewForFlex(z)&&!0===z.visible);const I=g.length;if(0<I){c.__isUpdatingFlexboxLayout=!0;var a=c.direction;const z=a.startsWith("row"),C=!z;var f=c.getWidthForFlexboxLayout(),b=c.getHeightForFlexboxLayout();const J=z?c.columnGap:c.rowGap,M=z?f:b;var q=z?c.rowGap:
c.columnGap;const O=z?b:f,m=c.isWrapNotAllowed();f=c.justifyContent;b=c.alignItems;var w=m?"stretch":c.alignContent;a.endsWith("Reverse")&&g.reverse();let p=0,y=0,A=0,E=0,F={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:A,crossSize:0};a=[F];for(let K=0;K<I;){const L=g[K++],R=z?L.getFlexBasisWidth():L.getFlexBasisHeight(),N=L.getShrink(),T=L.getGrow();!m&&0<F.items.length&&p+(0===E?0:J)+R>M&&(F.extraSize=M-p,A+=F.crossSize+q,y=v(y,p),E=p=0,F={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:A,crossSize:0},a.push(F));0!==E&&(p+=J);0<N&&0<R&&(F.shrinkCount+=N,F.shrinkBasis+=R*N);0<T&&(F.growCount+=T);F.crossSize=v(F.crossSize,C?L.getFlexBasisWidth():L.getFlexBasisHeight());d(L,z,p);e(L,z,R);p+=R;F.items.push(L);E++}F.extraSize=M-p;A+=F.crossSize;y=v(y,p);if(c.isCompactOnMainAxis(z)&&(g=a.reduce((K,L)=>null==K?L.extraSize:Math.min(K,L.extraSize),null),0!==g))for(var k of a)k.extraSize-=g;c[z?"setTotalBasisWidth":"setTotalBasisHeight"](y);c[z?"setTotalBasisHeight":
"setTotalBasisWidth"](A);k=a.length;if(1<k&&"wrapReverse"===c.wrap){for(var u of a)u.crossPos=A-(u.crossPos+u.crossSize);a.reverse()}if(!c.isCompactOnCrossAxis(z))switch(u=O-A,w){default:case "start":break;case "end":l(a,u,!1);break;case "center":l(a,u/2,!1);break;case "spaceBetween":1<k&&l(a,u/(k-1),!0,1);break;case "spaceAround":u<=q?l(a,u/2,!1):(l(a,q/2,!1),u-=q,l(a,u/(2*k),!0),l(a,u/(2*k),!0,1));break;case "spaceEvenly":u<=2*q?l(a,u/2,!1):(l(a,q,!1),l(a,(u-2*q)/(k+1),!0));break;case "stretch":q=
u/k;u=0;for(var B of a)B.crossSize+=q,B.crossPos+=u,u+=q}for(const K of a){B=K.items;q=K.extraSize;if(0<q)if(0<K.growCount){q/=K.growCount;a=0;for(const N of B)0<a&&h(N,z,a),u=N.getGrow()*q,0<u&&(e(N,z,u,!0),a+=u)}else switch(a=B.length,f){default:case "start":break;case "end":t(B,z,q,!1);break;case "center":t(B,z,q/2,!1);break;case "spaceBetween":1<a&&t(B,z,q/(a-1),!0,1);break;case "spaceAround":q<=J?t(B,z,q/2,!1):(t(B,z,J/2,!1),q-=J,t(B,z,q/(2*a),!0),t(B,z,q/(2*a),!0,1));break;case "spaceEvenly":q<=
2*J?t(B,z,q/2,!1):(t(B,z,J,!1),q-=2*J,t(B,z,q/(a+1),!0))}else if(0>q&&0<K.shrinkCount){a=K.shrinkBasis;u=0;for(const N of B)0>u&&h(N,z,u),w=N.getShrink()*(z?N.getFlexBasisWidth():N.getFlexBasisHeight())/a*v(q,-a),0>w&&(e(N,z,w,!0),u+=w)}q=!1;const {crossSize:L,crossPos:R}=K;for(const N of B)switch(N.getAlignSelf()||b){case "start":d(N,C,R);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "end":d(N,C,R+L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()));e(N,C,C?N.getFlexBasisWidth():
N.getFlexBasisHeight(),!1);break;case "center":d(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2);e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;case "baseline":q=!0;d(N,C,R+(L-(C?N.getFlexBasisWidth():N.getFlexBasisHeight()))/2+N.getFlexBaselineOffset(z));e(N,C,C?N.getFlexBasisWidth():N.getFlexBasisHeight(),!1);break;default:d(N,C,R),e(N,C,L,!1)}q&&c.updateFlexboxLayoutBaselineAdjustment(B,z,R)}c.__isUpdatingFlexboxLayout=!1;c.isUpdateAgain()&&!c.__UPDATE_AGAIN_LOOP_PROTECTION&&
(c.setUpdateAgain(!1),c.__UPDATE_AGAIN_LOOP_PROTECTION=!0,c.updateFlexboxLayout(),c.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else c.setTotalBasisWidth(0),c.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(c,g,a)=>{}});r.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(c){this.visible!==c&&(this.callSuper(c),this.updateFlexboxLayoutFromChild())},setXViaFlex(c,g){g&&(c+=this.x);this.x!==c&&(this.__isFlexUpdate=!0,this.setX(c),this.__isFlexUpdate=!1)},setYViaFlex(c,g){g&&
(c+=this.y);this.y!==c&&(this.__isFlexUpdate=!0,this.setY(c),this.__isFlexUpdate=!1)},setWidth:function(c){const g=this.width!==c;g&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(c);g&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(c){this.width!==c&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(c),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(c){const g=this.height!==c;
g&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(c);g&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(c){this.height!==c&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(c),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:c=>0,setIgnoreFlex:function(c){this.__ignoreFlex!==c&&(this.__ignoreFlex=c,this.inited&&(this.fireEvent("ignoreFlex",c),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(c){c=v(0,c);this.grow!==c&&(this.grow=c,this.inited&&(this.fireEvent("grow",c),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(c){c=v(0,c);this.shrink!==c&&(this.shrink=c,this.inited&&(this.fireEvent("shrink",c),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(c){this.alignSelf!==c&&(this.alignSelf=
c,this.inited&&(this.fireEvent("alignSelf",c),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const c=this.alignSelf;return"auto"===c||""===c?null:c},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(r=>{const x=console.log,v=new Map,t=new Map,l=(g,a)=>a+g.charAt(0).toUpperCase()+g.slice(1),e=g=>t.get(g)??(t.set(g,l(g,"set")),t.get(g)),d=g=>v.get(g)??(v.set(g,l(g,"get")),v.get(g)),h=(g,a)=>{let f;for(const b in a){const q=a[b],w=e(b);if(w in g)g[w](q);else g[b]!==q&&(g[b]=q,(f??=!1!==g.inited&&g.fireEvent)&&g.fireEvent(b,q))}},n=(g,a)=>{const f=d(a);g[f]&&x("Overwriting getter",f);g[f]=function(){return this[a]}},c=(g,a)=>{const f=e(a);g[f]&&x("Overwriting setter",f);g[f]=function(b){this[a]!==
b&&(this[a]=b,this.inited&&this.fireEvent(a,b))}};r.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:e,generateGetterName:d,generateName:l,createSetterFunction:c,createGetterFunction:n,createSetterMixin:(g,a)=>{const f={};for(const b of g)c(f,b),a&&n(f,b);return f}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(g,a){if(g)for(const f of g)this[f]=a[f],delete a[f]},callSetters:function(g){var a=this.earlyAttrs,f=this.lateAttrs;if(a||f){g={...g};if(a){var b=a.length;for(var q=0;q<b;){const k=a[q++];k in g&&(this.set(k,g[k]),delete g[k])}}let w;if(f)for(w=[],a=f.length,b=0;b<a;)q=f[b++],q in g&&(w.push(q,g[q]),delete g[q]);h(this,g);if(w)for(f=w.length,g=0;g<f;)this.set(w[g++],
w[g++])}else h(this,g)},get:function(g){const a=d(g);return"function"===typeof this[a]?this[a]():this[g]},set:function(g,a,f){if(!f&&(f=e(g),"function"===typeof this[f]))return this[f](a);this[g]!==a&&(this[g]=a,!1!==this.inited&&this?.fireEvent(g,a))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{const r=this.__meta__;if(r)for(const x of Object.keys(r))r[x]=null;for(const x of Object.keys(this))this[x]=null;this.destroyed=!0}}});
(r=>{const {Class:x,Module:v}=JS,t=console.warn;let l;const e=(f,b)=>b?(l=f).__op??(l.__op=[]):f.__op;let d;const h=(f,b)=>b?(d=f).__actives??(d.__actives=[]):f.__actives,n=new x("AbstractPool",{include:[r.Destructible],initialize:()=>{},destroy:function(){const f=e(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=e(this,!0);return f.length?f.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(f){e(this,!0).push(this.cleanInstance(f))},
cleanInstance:f=>{"function"===typeof f.clean&&f.clean();return f},destroyPooledInstances:function(){var f=e(this);if(f){let b=f.length;for(;b;){const q=f[--b];"function"===typeof q.destroy&&q.destroy()}f.length=0}}}),c=r.SimplePool=new x("SimplePool",n,{initialize:function(f,b){this.callSuper();this.instanceClass=f??Object;this.instanceParent=b},createInstance:function(f){var b=this.instanceParent,q=this.instanceClass;return b?new q(b,f):new q}}),g=new v("TrackActives",{destroy:function(){const f=
h(this);f&&(f.length=0);this.callSuper()},getInstance:function(){const f=this.callSuper();h(this,!0).push(f);return f},putInstance:function(f){var b=h(this);if(b){const q=b.indexOf(f);if(-1<q){b.splice(q,1);this.callSuper(f);return}b="inactive"}else b="missing";t("Tried to put a "+b+" instance",f,this)},getActives:function(f){const b=h(this);if(b){if(f){const q=[],w=b.length;for(let k=0;w>k;){const u=b[k++];f.call(this,u)&&q.push(u)}return q}return b.slice()}return[]},putActives:function(){const f=
h(this);if(f){let b=f.length;for(;b;)this.putInstance(f[--b])}}}),a=r.TrackActivesPool=new x("TrackActivesPool",c,{include:[g]});r.TrackActivesMultiPool=new x("TrackActivesMultiPool",n,{initialize:function(f,b){this.callSuper();this.instanceClassesByKey=f;const q=this._poolsByClassName={},w=this.__pbk={};for(const k in f){const u=f[k];w[k]=q[u.__displayName]=new a(u,b)}},destroy:function(){const f=this.__pbk;for(const b in f)f[b].destroy();this.callSuper()},getInstance:function(){const f=arguments[0],
b=this.__pbk[f];if(b)return b.getInstance(arguments);t("No pool for key",f)},putInstance:function(f){const b=this._poolsByClassName[f.klass.__displayName];b?b.putInstance(f):t("No pool for obj",f)},destroyPooledInstances:function(){const f=this.__pbk;for(const b in f)f[b].destroyPooledInstances()},getActives:function(f){let b=[];const q=this.__pbk;for(const w in q)b.push(...q[w].getActives(f));return b},putActives:function(){const f=this.__pbk;for(const b in f)f[b].putActives()}});r.Reusable=new v("Reusable",
{clean:()=>{}})})(myt);
(r=>{const x=JS.Class,v=console.warn,t=[r.AccessorSupport,r.Destructible,r.Observable,r.Observer],l=(a,f)=>{if(f){const b=f.length;for(let q=0,w;b>q;)(w=f[q++])?a.extend(w):v("Missing mixin in",a.klass.__displayName)}a.inited=!1},e=(a,f)=>{if(f)for(;a;){if(f(a))return a;a=a.parent}},d=(a,f)=>{const b=f.name;void 0===a[b]?a[b]=f:v("Name in use",b)},h=(a,f)=>{const b=f.name;a[b]===f?delete a[b]:v("Name not in use",b)};let n;const c=a=>(n=a).__animPool??(n.__animPool=new r.TrackActivesPool(r.Animator,a));
let g;r.Eventable=new x("Eventable",{include:t,initialize:function(a,f){l(this,f);this.init(a??{})},init:function(a){this.callSetters(a);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});r.Node=new x("Node",{include:t,extend:{getMatchingAncestorOrSelf:e,getMatchingAncestor:(a,f)=>e(a?a.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(a,f,b){l(this,b);this.initNode(a,f??{})},initNode:function(a,f){this.callSetters(f);
this.setParent(a);this.inited=!0},destroy:function(){const a=this.subnodes;this.isBeingDestroyed=!0;if(a)for(let f=a.length;0<f;)a[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(a){this.placement=a},setDefaultPlacement:function(a){this.defaultPlacement=
a},setIgnorePlacement:function(a){this.ignorePlacement=a},setParent:function(a){if(a&&!this.ignorePlacement){var f=this.placement??a.defaultPlacement;f&&(a=a.determinePlacement(f,this))}if(this.parent!==a&&!a?.destroyed){if(f=this.parent){const b=f.getSubnodes().indexOf(this);-1<b&&(this.name&&h(f,this),f.subnodes.splice(b,1),f.subnodeRemoved(this))}if(this.parent=a)a.getSubnodes().push(this),this.name&&d(a,this),a.subnodeAdded(this);this.inited&&this.fireEvent("parent",a)}},setName:function(a){if(this.name!==
a){const f=this.parent;f&&this.name&&h(f,this);this.name=a;f&&a&&d(f,this)}},determinePlacement:function(a,f){let b=a.indexOf("."),q;0<=b&&(q=a.slice(b+1),a=a.slice(0,b));"*"===a&&(a=this.defaultPlacement)&&(b=a.indexOf("."),0<=b&&(q=a.slice(b+1)+(q?"."+q:""),a=a.slice(0,b)));return(a=this[a])?q?a.determinePlacement(q,f):a:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(a){if(a){if(a===this)return!0;if(this.parent)return this.getIDE&&
a.getIDE?a.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(a)}return!1},isAncestorOf:function(a){return a?a.isDescendantOf(this):!1},getLeastCommonAncestor:function(a){for(;a;){if(this.isDescendantOf(a))return a;a=a.parent}},searchAncestorsForClass:function(a){if(a)return this.searchAncestors(f=>f instanceof a)},searchAncestorsForModule:function(a){if(a)return this.searchAncestors(f=>f.isA(a))},searchAncestors:function(a){return e(this?this.parent:null,a)},searchAncestorsOrSelf:function(a){return e(this,
a)},getAncestors:function(){const a=[];let f=this;for(;f;)a.push(f),f=f.parent;return a},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:a=>{},subnodeRemoved:a=>{},animate:function(a){if(a){const f=c(this),b=f.getInstance({ignorePlacement:!0}),q=a.callback;delete a.callback;b.callSetters(a);b.next(w=>{f.putInstance(b)});q&&b.next(q);b.setRunning(!0);return b}},getActiveAnimators:function(a){if("string"===typeof a){const f=a;a=b=>b.attribute===f}return c(this).getActives(a)},
stopActiveAnimators:function(a,f=!1){a=this.getActiveAnimators(a);let b=a.length;if(0<b){const q=c(this);for(;b;){const w=a[--b];w.reset(f);f||q.putInstance(w)}}},doOnceOnIdle:function(a){this.attachTo(r.global.idle,a,"idle",!0)},addRef:function(a,f){return((g=this).__REFS??(g.__REFS={}))[a]=f},getRef:function(a){return((g=this).__REFS??(g.__REFS={}))[a]},removeRef:function(a){const f=(g=this).__REFS??(g.__REFS={}),b=f[a];delete f[a];return b}})})(myt);
(r=>{let x=0,v=!1;const t=JS.Class,l=[],e=a=>{if(v!==a&&(v=a,!a)){for(a=l.length;a;){const f=l[--a];f.__deferredLayout=!1;f.update()}l.length=0}},d=(a,f,b,q)=>{const w=a.getSubviewIndex(f),k=a.subviews;-1<w&&(a=a.getSubviewIndex(b),k.splice(w,1),-1<a?(w<a&&--a,k.splice(a+(q?1:0),0,f)):q?k.push(f):k.unshift(f))},h=(a,f,b)=>{a[f]!==b&&(a[f]=b,a.inited&&(a.fireEvent(f,b),a.update()))},n=r.Layout=new t("Layout",r.Node,{extend:{incrementGlobalLock:()=>{1===++x&&e(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&e(!1)}},initNode:function(a,f){this.subviews=[];this.locked=!0;this.lockedCounter=1;const b=!0===f.locked;delete f.locked;this.callSuper(a,f);b||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(a){var f=this.parent;if(f!==a){const w=!this.locked;w&&(this.locked=!0);if(f){for(var b=this.subviews,q=b.length;q;)this.removeSubview(b[--q]);this.detachFrom(f,"__hndlPSA","subviewAdded");this.detachFrom(f,"__hndlPSR","subviewRemoved")}this.callSuper(a);
if(a=this.parent){f=a.getSubviews();b=f.length;for(q=0;b>q;)this.addSubview(f[q++]);this.attachTo(a,"__hndlPSA","subviewAdded");this.attachTo(a,"__hndlPSR","subviewRemoved")}w&&(this.locked=!1,this.inited&&a&&this.update())}},canUpdate:function(){return v?(this.__deferredLayout||(l.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(a){return this.subviews.includes(a)},getSubviewIndex:function(a){return this.subviews.indexOf(a)},addSubview:function(a){this.ignore(a)||
(this.subviews.push(a),this.startMonitoringSubview(a),this.locked||this.update())},startMonitoringSubview:a=>{},startMonitoringAllSubviews:function(){const a=this.subviews;let f=a.length;for(;f;)this.startMonitoringSubview(a[--f])},removeSubview:function(a){if(this.ignore(a))return-1;const f=this.getSubviewIndex(a);-1<f&&(this.stopMonitoringSubview(a),this.subviews.splice(f,1),this.locked||this.update());return f},stopMonitoringSubview:a=>{},stopMonitoringAllSubviews:function(){const a=this.subviews;
let f=a.length;for(;f;)this.stopMonitoringSubview(a[--f])},ignore:a=>a.ignoreLayout,__hndlPSA:function(a){a=a.value;a.parent===this.parent&&this.addSubview(a)},__hndlPSR:function(a){a=a.value;a.parent===this.parent&&this.removeSubview(a)},sortSubviews:function(a){this.subviews.sort(a)},moveSubviewBefore:function(a,f){d(this,a,f,!1)},moveSubviewAfter:function(a,f){d(this,a,f,!0)}});var c=r.ConstantLayout=new t("ConstantLayout",n,{setTargetAttrName:function(a){this.setterName=r.AccessorSupport.generateSetterName(a);
h(this,"targetAttrName",a)},setTargetValue:function(a){h(this,"targetValue",a)},update:function(){if(this.canUpdate()){const a=this.setterName,f=this.targetValue,b=this.subviews,q=b.length;if(a)for(let w=0;q>w;)b[w++][a](f)}}});c=r.VariableLayout=new t("VariableLayout",c,{initNode:function(a,f){this.collapseParent=this.reverse=!1;this.callSuper(a,f)},setCollapseParent:function(a){h(this,"collapseParent",a)},setReverse:function(a){h(this,"reverse",a)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const f=this.setterName,b=this.subviews;var a=b.length;let q=this.targetValue,w,k=0;if(this.reverse)for(w=a;w;)a=b[--w],this.skipSubview(a)||(q=this.updateSubview(++k,a,f,q));else for(w=0;a>w;){const u=b[w++];this.skipSubview(u)||(q=this.updateSubview(++k,u,f,q))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(f,q);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(a){this.attachTo(a,
"update","visible")},stopMonitoringSubview:function(a){this.detachFrom(a,"update","visible")},updateSubview:(a,f,b,q)=>{f[b](q);return q},skipSubview:a=>!a.visible,updateParent:(a,f)=>{}});const g=r.SpacedLayout=new t("SpacedLayout",c,{initNode:function(a,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(a,f)},setTargetAttrName:function(a){if(this.targetAttrName!==
a){const f="y"===a,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(a)}},setNoAddSubviewOptimization:function(a){this.noAddSubviewOptimization=a},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){h(this,"spacing",a)},setOutset:function(a){h(this,
"outset",a)},addSubview:function(a){const f=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(a);this.locked=f},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},updateSubview:function(a,f,b,q){a=f[this.measureAttrName];f[b](q+(a-f[this.measureAttrBaseName])/2);return q+a+this.spacing},updateParent:function(a,f){this.parent[this.parentSetterName](f+
this.outset-this.spacing)}});r.ResizeLayout=new t("ResizeLayout",g,{setCollapseParent:a=>{},setTargetAttrName:function(a){if(this.targetAttrName!==a){if(this.inited){const f="x"===a;this.stopMonitoringParent(f?"height":"width");this.startMonitoringParent(f?"width":"height")}this.callSuper(a)}},setParent:function(a){if(this.parent!==a){const f="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(f);this.callSuper(a);this.parent&&this.startMonitoringParent(f)}},startMonitoringParent:function(a){this.attachTo(this.parent,
"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},doBeforeUpdate:function(){const a=this.measureAttrName,f=this.subviews;let b=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,q=f.length,w=0,k=0;for(;q;){const u=f[--q];this.skipSubview(u)||(++w,0<u.layoutHint?k+=u.layoutHint:b-=u[a])}0!==w&&(this.remainder=b-=(w-1)*this.spacing,this.resizeSum=k,this.scalingFactor=b/k,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===a?
"setWidth":"setHeight")},updateSubview:function(a,f,b,q){var w=f.layoutHint;0<w&&(this.resizeSumUsed+=w,w=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(w*this.scalingFactor),this.remainderUsed+=w,f[this.measureSetter](w));return this.callSuper(a,f,b,q)},startMonitoringSubview:function(a){0<a.layoutHint||this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update","visible")},stopMonitoringSubview:function(a){0<a.layoutHint||this.detachFrom(a,"update",
this.measureAttrName);this.detachFrom(a,"update","visible")},updateParent:(a,f)=>{}});r.AlignedLayout=new t("AlignedLayout",c,{initNode:function(a,f){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(a,f)},setTargetAttrName:function(a){if(this.targetAttrName!==a){const f="y"===a,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=
f?"boundsHeight":"boundsWidth";this.measureAttrBaseName=f?"height":"width";this.parentSetterName=f?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(a)}},setAlign:function(a){if(this.align!==a){this.align=a;const f=this.locked;this.locked=!0;this.setTargetAttrName("middle"===a||"bottom"===a||"top"===a?"y":"x");this.locked=f;this.inited&&(this.fireEvent("align",a),this.update())}},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.callSuper(a)},
stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.callSuper(a)},doBeforeUpdate:function(){const a=this.measureAttrName,f=this.subviews;let b=0,q=f.length;for(;q;){const w=f[--q];this.skipSubview(w)||(b=b>w[a]?b:w[a])}this.setTargetValue(b)},updateSubview:function(a,f,b,q){switch(this.align){case "center":case "middle":f[b]((q-f[this.measureAttrName])/2);break;case "right":case "bottom":f[b](q-f[this.measureAttrName]);break;default:f[b](0)}return q},updateParent:function(a,
f){this.parent[this.parentSetterName](f)}});r.WrappingLayout=new t("WrappingLayout",c,{initNode:function(a,f){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(a,f)},
setTargetAttrName:function(a){if(this.targetAttrName!==a){const f="y"===a,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=f?"boundsHeight":"boundsWidth";const q=this.measureAttrBaseName=f?"height":"width";this.otherMeasureAttrName=f?"boundsWidth":"boundsHeight";const w=this.otherMeasureAttrBaseName=f?"width":"height";this.parentSetterName=f?"setWidth":"setHeight";this.otherSetterName=f?"setX":"setY";b&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(w),this.startMonitoringParent(q));
this.callSuper(a)}},setParent:function(a){if(this.parent!==a){const f="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(f?"height":"width");this.callSuper(a);this.parent&&this.startMonitoringParent(f?"height":"width")}},setAxis:function(a){this.setTargetAttrName(this.axis=a)},setInset:function(a){this.setTargetValue(this.inset=a)},setSpacing:function(a){h(this,"spacing",a)},setOutset:function(a){h(this,"outset",a)},setLineSpacing:function(a){h(this,"lineSpacing",a)},setLineInset:function(a){h(this,
"lineInset",a)},setLineOutset:function(a){h(this,"lineOutset",a)},startMonitoringParent:function(a){this.attachTo(this.parent,"update",a)},stopMonitoringParent:function(a){this.detachFrom(this.parent,"update",a)},startMonitoringSubview:function(a){this.attachTo(a,"update",this.measureAttrName);this.attachTo(a,"update",this.otherMeasureAttrName);this.callSuper(a)},stopMonitoringSubview:function(a){this.detachFrom(a,"update",this.measureAttrName);this.detachFrom(a,"update",this.otherMeasureAttrName);
this.callSuper(a)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(a,f,b,q){a=f[this.measureAttrName];const w=f[this.otherMeasureAttrName];q+a>this.parentSizeLessOutset||"break"===f.layoutHint?(q=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=w,++this.lineCount):w>this.lineSize&&(this.lineSize=w);f[this.otherSetterName](this.linePos+
(w-f[this.otherMeasureAttrBaseName])/2);f[b](q+(a-f[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,q+a+this.outset);return q+a+this.spacing},updateParent:function(a,f){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});r.createFixedThresholdCounter(n,1,"locked")})(myt);
(r=>{const x=Math.round,v=r.DomElementProxy,t=r.Geometry.rectContainsPoint,l=(b,q)=>{const w=r.global.focus.focusedView,k=b.getIDE();if(w===b||w?.isDescendantOf(b))w._ignoreFocus=!0;const {scrollTop:u,scrollLeft:B}=k;q();w&&(w._ignoreFocus=!1,w.focus(!0));k.scrollTop=u;k.scrollLeft=B},e=(b,q,w)=>{const k=b.getODE(),u=k.parentNode;if(u){const B=()=>{const I=k.nextElementSibling;u.removeChild(k);q();u.insertBefore(k,I)};w?l(b,B):B()}else q()},d=(b,q,w,k)=>{if(q&&"object"===typeof q){if(k){var u=b.getLeastCommonAncestor(q)?.getIDE();
if(u){const B=v.getZIndexRelativeToAncestor,I=w?-1:1;k=I*B(b.getODE(),u);u=I*B(q.getODE(),u);if(k<u)return!0;if(u<k)return!1}}b=b.getODE().compareDocumentPosition(q.getODE());return w?2===b||10===b:4===b||20===b}return!1},h=b=>{b=b.getAncestors();let q=b.length,w=1,k=1;for(;q;){const u=b[--q];w*=u.scaleX||1;k*=u.scaleY||1;u.__effectiveScaleX=w;u.__effectiveScaleY=k}return{scaleX:w,scaleY:k}},n=(b,q,w)=>{const k=b.getODE();if(t(q,w,0,0,k.offsetWidth*b.__effectiveScaleX,k.offsetHeight*b.__effectiveScaleY)){if(b=
b.parent){const u=b.getIDE();return n(b,q+(k.offsetLeft-u.scrollLeft)*b.__effectiveScaleX,w+(k.offsetTop-u.scrollTop)*b.__effectiveScaleY)}return!0}return!1},c=b=>{switch(b.align){case "center":b.releaseConstraint("__doAlignCenter");break;case "right":b.releaseConstraint("__doAlignRight")}},g=b=>{const q=b.parent;if(q)switch(b.align){case "center":b.constrain("__doAlignCenter",[b,"width",b,"alignOffset",q,"width"]);break;case "right":b.constrain("__doAlignRight",[b,"width",b,"alignOffset",q,"width"]);
break;case "left":b.setX(b.alignOffset||0)}},a=b=>{switch(b.valign){case "middle":b.releaseConstraint("__doValignMiddle");break;case "bottom":b.releaseConstraint("__doValignBottom")}},f=b=>{const q=b.parent;if(q)switch(b.valign){case "middle":b.constrain("__doValignMiddle",[b,"height",b,"valignOffset",q,"height"]);break;case "bottom":b.constrain("__doValignBottom",[b,"height",b,"valignOffset",q,"height"]);break;case "top":b.setY(b.valignOffset||0)}};r.View=new JS.Class("View",r.Node,{include:[v,r.DomObservable,
r.DomObserver,r.ScrollObservable,r.FocusObservable,r.KeyObservable,r.MouseObservable],extend:{retainFocusDuringDomUpdate:l,doWhileRemovedFromDom:e},initNode:function(b,q){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;q.tagName&&(this.tagName=q.tagName,delete q.tagName);this.setDomElement(this.createOurDomElement(b));const w=this.getODS();w.left=w.top="0px";this.callSuper(b,q);this.__updateBounds(this.width,this.height)},createOurDomElement:function(b){b=document.createElement(this.tagName??
"div");b.style.position="absolute";let q;b.className=(q=this.klass).__cssClassName??(q.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return b},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(b){this.parent!==b&&(this.inited&&(c(this),a(this)),this.callSuper(b),this.align&&g(this),this.valign&&f(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const b=[],q=this.getIDE().children,w=q.length;for(let k=0;k<w;){const u=q[k++].model;u?.parent===this&&b.push(u)}return b},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(b=>b!==this)},setFocusTrap:function(b){this.focusTrap=b},setFocusCage:function(b){this.focusCage=b},setMaskFocus:function(b){this.maskFocus=b},setLayoutHint:function(b){this.layoutHint=b},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(b){if(this.ignoreLayout!==b){var q=this.inited&&this.parent;let w;if(b){if(q)for(q=this.parent.getLayouts(),w=q.length;w;)q[--w].removeSubview(this);this.ignoreLayout=b}else if(this.ignoreLayout=b,q)for(q=this.parent.getLayouts(),w=q.length;w;)q[--w].addSubview(this)}},setDomClass:function(b){this.domClass!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domClass",b))},setDomId:function(b){this.domId!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domId",b))},setAlignOffset:function(b){this.alignOffset!==
b&&(this.alignOffset=b,this.inited&&this.fireEvent("alignOffset",b),this.parent&&"left"===this.align&&this.setX(b))},setAlign:function(b){this.align!==b&&(this.inited&&c(this),this.align=b,this.inited&&(this.fireEvent("align",b),g(this)))},__doAlignCenter:function(b){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(b){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(b){this.valignOffset!==b&&(this.valignOffset=b,this.inited&&
this.fireEvent("valignOffset",b),this.parent&&"top"===this.valign&&this.setY(b))},setValign:function(b){this.valign!==b&&(this.inited&&a(this),this.valign=b,this.inited&&(this.fireEvent("valign",b),f(this)))},__doValignMiddle:function(b){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(b){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(b){this.x!==b&&(this.x=b,this.visible&&(this.getODS().left=b+"px"),this.inited&&this.fireEvent("x",
b))},setY:function(b){this.y!==b&&(this.y=b,this.visible&&(this.getODS().top=b+"px"),this.inited&&this.fireEvent("y",b))},setWidth:function(b){0>b&&(b=0);this.width!==b&&(this.width=b,this.getODS().width=b+"px",this.inited&&(this.__updateBounds(b,this.height),this.fireEvent("width",b)))},setHeight:function(b){0>b&&(b=0);this.height!==b&&(this.height=b,this.getODS().height=b+"px",this.inited&&(this.__updateBounds(this.width,b),this.fireEvent("height",b)))},setDomMinWidth:function(b,q){(q?this.getIDS():
this.getODS()).minWidth=null!=b?b+"px":null},getDomMinWidth:function(b){b=(b?this.getIDS():this.getODS()).minWidth;return null!=b?Number.parseInt(b):null},setDomMinHeight:function(b,q){(q?this.getIDS():this.getODS()).minHeight=null!=b?b+"px":null},getDomMinHeight:function(b){b=(b?this.getIDS():this.getODS()).minHeight;return null!=b?Number.parseInt(b):null},setTextColor:function(b){this.textColor!==b&&(this.textColor=b,this.getODS().color=b||"inherit",this.inited&&this.fireEvent("textColor",b))},
setBgColor:function(b){this.bgColor!==b&&(this.getODS().backgroundColor=this.bgColor=b,this.inited&&this.fireEvent("bgColor",b))},isColorAttr:b=>"bgColor"===b||"textColor"===b,setOpacity:function(b){this.opacity!==b&&(this.getODS().opacity=this.opacity=b,this.inited&&this.fireEvent("opacity",b))},setOverflow:function(b){const q=this.overflow;if(q!==b){this.overflow=b;const w=this.getIDS();if("autox"===b)w.overflowX="auto",w.overflowY="hidden";else if("autoy"===b)w.overflowY="auto",w.overflowX="hidden";
else{if("autox"===q||"autoy"===q)w.overflowX=w.overflowY=null;w.overflow=b||"visible"}this.inited&&this.fireEvent("overflow",b)}},setVisible:function(b){if(this.visible!==b){this.visible=b;const q=this.getODS();q.visibility=b?"inherit":"hidden";q.left=b?this.x+"px":"-100000px";q.top=b?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",b)}},setPointerEvents:function(b){this.pointerEvents!==b&&(this.pointerEvents=b,this.getODS().pointerEvents=b||"auto",this.inited&&this.fireEvent("pointerEvents",
b))},setCursor:function(b){this.cursor!==b&&(this.cursor=b,this.getODS().cursor=b||"auto",this.inited&&this.fireEvent("cursor",b))},__updateBounds:function(b,q){this.boundsWidth!==b&&this.fireEvent("boundsWidth",this.boundsWidth=b);this.boundsHeight!==q&&this.fireEvent("boundsHeight",this.boundsHeight=q)},setOutline:function(b){const [q,w,k]=b??[];this.setOutlineWidth(q);this.setOutlineStyle(w);this.setOutlineColor(k)},setOutlineWidth:function(b){this.getODS().outlineWidth=(this.outlineWidth=b||0)+
"px"},setOutlineStyle:function(b){this.getODS().outlineStyle=this.outlineStyle=b||"none"},setOutlineColor:function(b){this.getODS().outlineColor=this.outlineColor=b||"#000"},setBorder:function(b){const [q,w,k]=b??[];this.setBorderWidth(q);this.setBorderStyle(w);this.setBorderColor(k)},setBorderWidth:function(b){this.getODS().borderWidth=(this.borderWidth=b||0)+"px"},setBorderStyle:function(b){this.getODS().borderStyle=this.borderStyle=b||"none"},setBorderColor:function(b){this.getODS().borderColor=
this.borderColor=b||"#000"},setRoundedCorners:function(b){this.getODS().borderRadius=b+"px"},setRoundedTopLeftCorner:function(b){this.getODS().borderTopLeftRadius=b+"px"},setRoundedTopRightCorner:function(b){this.getODS().borderTopRightRadius=b+"px"},setRoundedBottomLeftCorner:function(b){this.getODS().borderBottomLeftRadius=b+"px"},setRoundedBottomRightCorner:function(b){this.getODS().borderBottomRightRadius=b+"px"},setBoxShadow:function(b){const [q,w,k,u]=b??[];this.getODS().boxShadow=b?(q||0)+
"px "+(w||0)+"px "+(k||7)+"px "+(u||"#000"):"none"},setGradient:function(b){const q=this.getODS();if(b){let k=b[0];"linear"===k||"radial"===k?b.shift():k="linear";let u=b[0];if("radial"===k){void 0===u?u="closest-side":b.shift();var w=b[0];if(void 0===w)w="circle";else{switch(w){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",w),w="circle"}b.shift()}let B=b[0];void 0===B?B="center":(B=B.replaceAll("middle","center"),b.shift());u=w+" "+u+" at "+B}else"number"===
typeof u?(u+="deg",b.shift()):u?(u="to "+u,b.shift()):u="0deg";w=B=>{b.push(B&&"inherit"!==B?B:"transparent")};2>b.length&&w(this.textColor);2>b.length&&w(this.bgColor);q.background=k+"-gradient("+u+","+b.join(",")+")"}else q.background="none";this.bgColor=void 0},setTooltip:function(b){this.tooltip!==b&&(this.tooltip=this.getODE().title=b,this.inited&&this.fireEvent("tooltip",b))},isVisible:function(){return null==this.searchAncestorsOrSelf(b=>!b.visible)},getFocusTrap:function(b){return this.searchAncestorsOrSelf(q=>
q.focusCage||q.focusTrap&&!b)},subnodeAdded:function(b){b instanceof r.View?(this.getIDE().appendChild(b.getODE()),this.getSubviews().push(b),this.fireEvent("subviewAdded",b),this.subviewAdded(b)):b instanceof r.Layout&&(this.getLayouts().push(b),this.fireEvent("layoutAdded",b),this.layoutAdded(b))},subnodeRemoved:function(b){let q;b instanceof r.View?(q=this.getSubviewIndex(b),-1<q&&(this.fireEvent("subviewRemoved",b),b.removeDomElement(),this.subviews.splice(q,1),this.subviewRemoved(b))):b instanceof
r.Layout&&(q=this.getLayoutIndex(b),-1<q&&(this.fireEvent("layoutRemoved",b),this.layouts.splice(q,1),this.layoutRemoved(b)))},hasSubview:function(b){return this.getSubviews().includes(b)},getSubviewIndex:function(b){return this.getSubviews().indexOf(b)},subviewAdded:b=>{},subviewRemoved:b=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(b){const q=
this.getSubviews();for(let w=q.length;0<w;){const k=q[--w];b&&!b(k)||k.destroy()}},hasLayout:function(b){return this.getLayouts().includes(b)},getLayoutIndex:function(b){return this.getLayouts().indexOf(b)},layoutAdded:b=>{},layoutRemoved:b=>{},isBehind:function(b,q){return d(this,b,!1,q)},isInFrontOf:function(b,q){return d(this,b,!0,q)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(b,q){this.parent.sendSubviewBehind(this,
b,q)},sendInFrontOf:function(b,q){this.parent.sendSubviewInFrontOf(this,b,q)},doSubviewsReorderedInDom:b=>{},bringSubviewToFront:function(b){const q=this;if(b?.parent===q){const w=q.getIDE(),k=b.getODE();k!==w.lastElementChild&&l(b,()=>{w.appendChild(k);q.doSubviewsReorderedInDom(b)})}},sendSubviewToBack:function(b){const q=this;if(b?.parent===q){const w=q.getIDE(),k=w.firstElementChild,u=b.getODE();u!==k&&l(b,()=>{w.insertBefore(u,k);q.doSubviewsReorderedInDom(b)})}},sendSubviewBehind:function(b,
q,w){w?.moveSubviewBefore(b,q);const k=this;if(b?.parent===k&&q?.parent===k){const u=b.getODE(),B=q.getODE();if(u!==B.previousElementSibling){const I=k.getIDE();l(b,()=>{I.insertBefore(u,B);k.doSubviewsReorderedInDom(b)})}}w?.update()},sendSubviewInFrontOf:function(b,q,w){w?.moveSubviewAfter(b,q);const k=this;if(b?.parent===k&&q?.parent===k){const u=b.getODE(),B=q.getODE().nextElementSibling;if(u!==B){const I=k.getIDE();l(b,()=>{I.insertBefore(u,B);k.doSubviewsReorderedInDom(b)})}}w?.update()},sortSubviews:function(b){const q=
this,w=q.getSubviews();r.isNotSorted(w,b)&&(w.sort(b),e(q,()=>{const k=document.createDocumentFragment(),u=w.length;for(let B=0;u>B;)k.appendChild(w[B++].getODE());q.getIDE().appendChild(k)},!0),q.doSubviewsReorderedInDom(null))},containsPoint:function(b,q,w){const k=this.getODE();if(!k)return!1;const {x:u,y:B}=v.getRelativePosition(k,w);return t(b,q,u,B,this.width,this.height)},isPointVisible:function(b,q){const {x:w,y:k}=this.getPagePosition(!0);h(this);return n(this,b-w,q-k)},intersectsWithSibling:function(b){return b.parent===
this.parent&&!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)},getEffectiveScale:function(){return h(this)},getEffectiveScaleX:function(){return h(this).scaleX},getEffectiveScaleY:function(){return h(this).scaleY}})})(myt);
(r=>{const x=(t,l,e)=>{const d=v(t,l);t.getODS().transform=d+(0===d.length?"":" ")+l+"("+e+")"},v=(t,l)=>{t=t.getODS();var e=t.transform;if(!e||0===e.length)return"";e=e.split(" ");let d=e.length;for(;d;)if(e[--d].startsWith(l)){e.splice(d,1);break}return t.transform=e.join(" ")};r.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(t){this.transformOrigin!==t&&(this.transformOrigin=t,this.getODS().transformOrigin=t||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",t)))},setRotation:function(t){this.rotation!==t&&(this.rotation=t,x(this,"rotate",(t||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",t)))},setScale:function(t){const l=this.scaleX!==t,e=this.scaleY!==t;if(l){var d=this.scaleX=t;null==d?v(this,"scaleX"):x(this,"scaleX",d||1)}e&&(d=this.scaleY=t,null==d?v(this,"scaleY"):x(this,"scaleY",d||1));this.inited&&((l||e)&&this.__updateBounds(this.width,this.height),
l&&this.fireEvent("scaleX",t),e&&this.fireEvent("scaleY",t))},setScaleX:function(t){if(this.scaleX!==t){var l=this.scaleX=t;null==l?v(this,"scaleX"):x(this,"scaleX",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",t))}},setScaleY:function(t){if(this.scaleY!==t){var l=this.scaleY=t;null==l?v(this,"scaleY"):x(this,"scaleY",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",t))}},setSkewX:function(t){this.skewX!==t&&(this.skewX=
t,x(this,"skewX",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",t)))},setSkewY:function(t){this.skewY!==t&&(this.skewY=t,x(this,"skewY",t||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",t)))},__updateBounds:function(t,l){const {rotation:e,scaleX:d,scaleY:h}=this,n=(null==d||1===d)&&(null==h||1===h);if(!n||null!=e&&0!==e&&180!==e)!n||90!==e&&270!==e?{width:t,height:l}=this.getODE().getBoundingClientRect():{width:l,height:t}=
this;this.callSuper(t,l)}})})(myt);
(r=>{const x=JS.Module,v=(d,h)=>{if("auto"===h)d.__hasSetWidth=!1,d.getODS().width="auto",d.sizeViewToDom();else return d.__hasSetWidth=!0},t=(d,h)=>{if("auto"===h)d.__hasSetHeight=!1,d.getODS().height="auto",d.sizeViewToDom();else return d.__hasSetHeight=!0},l=d=>{if(!d.__hasSetWidth){const h=d.getODE().offsetWidth/d.getEffectiveScaleX();d.width!==h&&(d.width=h,d.inited&&d.__updateBounds(h,d.height),d.fireEvent("width",h))}},e=d=>{if(!d.__hasSetHeight){const h=d.getODE().offsetHeight/d.getEffectiveScaleY();
d.height!==h&&(d.height=h,d.inited&&d.__updateBounds(d.width,h),d.fireEvent("height",h))}};r.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:l,sizeHeight:e},initNode:function(d,h){this.callSuper(d,h);this.sizeViewToDom()},setWidth:function(d){v(this,d)&&this.callSuper(d)},setHeight:function(d){t(this,d)&&this.callSuper(d)},sizeViewToDom:function(){l(this);e(this)}});r.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(d,h){this.callSuper(d,h);this.sizeViewToDom()},setWidth:function(d){v(this,
d)&&this.callSuper(d)},sizeViewToDom:function(){l(this)}});r.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(d,h){this.callSuper(d,h);this.sizeViewToDom()},setHeight:function(d){t(this,d)&&this.callSuper(d)},sizeViewToDom:function(){e(this)}})})(myt);
(r=>{const x=JS.Module,v=(d,h,n,c)=>{d[n]!==h&&(d[n]=h,d.getIDS()[n]=h||c||"inherit",d.inited&&(d.fireEvent(n,h),d.sizeViewToDom()))};r.TextSupport=new x("TextSupport",{setWidth:function(d){this.callSuper(d);"auto"!==d&&(d=this.whiteSpace,"normal"!==d&&"pre-line"!==d&&"pre-wrap"!==d&&"break-spaces"!==d||this.sizeViewToDom())},setText:function(d){d||="";d=this.valueFromEvent(d);this.text!==d&&(this.getIDE().innerHTML=this.text=d,this.inited&&(this.fireEvent("text",d),this.sizeViewToDom()))},setTextOverflow:function(d){this.textOverflow!==
d&&(this.textOverflow=d,this.getIDS().textOverflow=d||"inherit",this.inited&&this.fireEvent("textOverflow",d))},setTextAlign:function(d){this.textAlign!==d&&(this.textAlign=d,this.getIDS().textAlign=d||"inherit",this.inited&&this.fireEvent("textAlign",d))},setWhiteSpace:function(d){v(this,d,"whiteSpace")},setWordWrap:function(d){v(this,d,"wordWrap","normal")},setTextIndent:function(d){v(this,d,"textIndent")},setTextTransform:function(d){v(this,d,"textTransform")},setTextDecoration:function(d){v(this,
d,"textDecoration")},setLineHeight:function(d){v(this,d,"lineHeight")},setLetterSpacing:function(d){v(this,d,"letterSpacing")},setWordSpacing:function(d){v(this,d,"wordSpacing")},setFontFamily:function(d){v(this,d,"fontFamily")},setFontStyle:function(d){v(this,d,"fontStyle")},setFontVariant:function(d){v(this,d,"fontVariant")},setFontWeight:function(d){v(this,d,"fontWeight")},setFontSize:function(d){v(this,d,"fontSize")},setUserUnselectable:function(d){this.userUnselectable!==d&&(this.userUnselectable=
d,this[d?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(d?"default":"text"),this.inited&&this.fireEvent("userUnselectable",d))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(d,h,n,c){this.getIDS().textShadow=(d||0)+"px "+(h||0)+"px "+(null!=n?n:2)+"px "+(c||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const t=(d,h,n)=>{const c="padding"+n;h=Math.max(h,0);d[c]!==h&&(d[c]=h,d.getIDS()[c]=h+"px",d.fireEvent(c,h),"Left"===n||"Right"===n?l(d):e(d))},l=d=>{d.__hasSetWidth&&(d.getODS().width=d.width-(d.paddingLeft||0)-(d.paddingRight||0)+"px",d.inited&&d.sizeViewToDom())},e=d=>{d.__hasSetHeight&&(d.getODS().height=d.height-(d.paddingTop||0)-(d.paddingBottom||0)+"px",d.inited&&d.sizeViewToDom())};r.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(d){this.callSuper(d);l(this)},setHeight:function(d){this.callSuper(d);
e(this)},setPadding:function(d){let h,n,c;d||=0;"object"===typeof d?(h=d.top||0,n=d.right||0,c=d.bottom||0,d=d.left||0):h=n=c=d;this.setPaddingTop(h);this.setPaddingRight(n);this.setPaddingBottom(c);this.setPaddingLeft(d)},setPaddingTop:function(d){t(this,d,"Top")},setPaddingRight:function(d){t(this,d,"Right")},setPaddingBottom:function(d){t(this,d,"Bottom")},setPaddingLeft:function(d){t(this,d,"Left")}})})(myt);
(r=>{const x={},v={},t=l=>{const e=l.imageUrl;if(l.calculateNaturalSize&&e){var d=x[e];if(d)l.setNaturalWidth(d.width),l.setNaturalHeight(d.height);else{d=v[e];if(!d){v[e]=d=[];const h=new Image;h.onerror=n=>{if(n=v[e]){let c=n.length;for(;c;)n[--c].setImageLoadingError(!0);n.length=0;delete v[e]}};h.onload=()=>{const n=h.width,c=h.height,g=v[e];if(g){let a=g.length;for(;a;){const f=g[--a];f.imageUrl===e&&(f.setNaturalWidth(n),f.setNaturalHeight(c))}g.length=0;delete v[e]}x[e]={width:n,height:c}};
h.src=e}d.push(l)}}};r.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:l=>x[l]},initNode:function(l,e){e.imageRepeat??(e.imageRepeat="no-repeat");e.imageAttachment??(e.imageAttachment="scroll");this.callSuper(l,e)},setImageUrl:function(l){this.imageUrl!==l&&(this.imageUrl=l,this.getIDS().backgroundImage=l?'url("'+l+'")':"none",this.inited&&(this.fireEvent("imageUrl",l),this.setNaturalWidth(),this.setNaturalHeight(),!l&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
t(this))},setImageLoadingError:function(l){this.set("imageLoadingError",l,!0)},setImageSize:function(l){this.imageSize!==l&&(this.imageSize=l,this.getIDS().backgroundSize=l||"auto",this.inited&&this.fireEvent("imageSize",l))},setImageRepeat:function(l){this.imageRepeat!==l&&(this.getIDS().backgroundRepeat=this.imageRepeat=l,this.inited&&this.fireEvent("imageRepeat",l))},setImagePosition:function(l){this.imagePosition!==l&&(this.getIDS().backgroundPosition=this.imagePosition=l,this.inited&&this.fireEvent("imagePosition",
l))},setImageAttachment:function(l){this.imageAttachment!==l&&(this.getIDS().backgroundAttachment=this.imageAttachment=l,this.inited&&this.fireEvent("imageAttachment",l))},setCalculateNaturalSize:function(l){this.calculateNaturalSize!==l&&(this.calculateNaturalSize=l,this.inited&&this.fireEvent("calculateNaturalSize",l),t(this))},setNaturalWidth:function(l){this.naturalWidth!==l&&(this.naturalWidth=l,this.inited&&this.fireEvent("naturalWidth",l),this.useNaturalSize&&l&&this.setWidth(l))},setNaturalHeight:function(l){this.naturalHeight!==
l&&(this.naturalHeight=l,this.inited&&this.fireEvent("naturalHeight",l),this.useNaturalSize&&l&&this.setHeight(l))},setUseNaturalSize:function(l){this.useNaturalSize!==l&&(this.useNaturalSize=l,this.inited&&this.fireEvent("useNaturalSize",l),l&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),l&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(r=>{const x=JS.Class,{View:v,SizeToDom:t}=r;r.Flexbox=new x("Flexbox",v,{include:[r.FlexboxSupport]});r.Frame=new x("Frame",v,{initNode:function(l,e){e.tagName??(e.tagName="iframe");this.callSuper(l,e);l=r.global.mouse;this.attachToDom(l,"__doMouseDown","mousedown",!0);this.attachToDom(l,"__doMouseUp","mouseup",!0)},createOurDomElement:function(l){l=this.callSuper(l);(Array.isArray(l)?l[1]:l).style.border="0px";return l},setSrc:function(l){this.src!==l&&(this.src=this.getIDE().src=l,this.inited&&
this.fireEvent("src",l))},__doMouseDown:function(l){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(l){this.setPointerEvents(this.__restorePointerEvents);return!0}});r.Markup=new x("Markup",v,{include:[t],setHtml:function(l){this.html!==l&&(this.getIDE().innerHTML=this.html=l,this.inited&&(this.fireEvent("html",l),this.sizeViewToDom()))}});r.Text=new x("Text",v,{include:[t,r.TextSupport],initNode:function(l,e){e.whiteSpace??(e.whiteSpace=
"nowrap");e.userUnselectable??(e.userUnselectable=!0);this.callSuper(l,e)},measureNoWrapWidth:function(){const l=this.__hasSetWidth,e=this.width;if(!l&&"nowrap"===this.whiteSpace)return e;const d=this.getIDS(),h=d.whiteSpace;l&&(d.width="auto");d.whiteSpace="nowrap";const n=this.getODE().getBoundingClientRect().width;d.whiteSpace=h;l&&(d.width=e);return n}});r.PaddedText=new x("PaddedText",r.Text,{include:[r.PaddedTextSupport]});r.Image=new x("Image",v,{include:[r.ImageSupport],initNode:function(l,
e){e.useNaturalSize??(e.useNaturalSize=!0);this.callSuper(l,e)}});r.BackView=new x("BackView",v,{sendSubviewToBack:function(l){if(l.parent===this){const e=this.getIDE(),d=e.childNodes[1];l=l.getODE();l!==d&&(l=e.removeChild(l))&&e.insertBefore(l,d)}}})})(myt);
(r=>{const x=Math.round,v=d=>{d.parent&&0<=d.percentOfParentWidth&&d.syncTo(d.parent,"__doPOPW","width")},t=d=>{0<=d.percentOfParentWidth&&d.detachFrom(d.parent,"__doPOPW","width")},l=d=>{d.parent&&0<=d.percentOfParentHeight&&d.syncTo(d.parent,"__doPOPH","height")},e=d=>{0<=d.percentOfParentHeight&&d.detachFrom(d.parent,"__doPOPH","height")};r.SizeToParent=new JS.Module("SizeToParent",{setParent:function(d){this.parent!==d&&(this.inited&&(t(this),e(this)),this.callSuper(d),v(this),l(this))},setPercentOfParentWidthOffset:function(d){this.percentOfParentWidthOffset!==
d&&(this.percentOfParentWidthOffset=d,this.inited&&(this.fireEvent("percentOfParentWidthOffset",d),this.__doPOPW()))},setPercentOfParentWidth:function(d){this.percentOfParentWidth!==d&&(this.inited&&t(this),this.percentOfParentWidth=d,this.inited&&(this.fireEvent("percentOfParentWidth",d),v(this)))},setPercentOfParentHeightOffset:function(d){this.percentOfParentHeightOffset!==d&&(this.percentOfParentHeightOffset=d,this.inited&&(this.fireEvent("percentOfParentHeightOffset",d),this.__doPOPH()))},setPercentOfParentHeight:function(d){this.percentOfParentHeight!==
d&&(this.inited&&e(this),this.percentOfParentHeight=d,this.inited&&(this.fireEvent("percentOfParentHeight",d),l(this)))},__doPOPW:function(d){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(d){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(r=>{let x;const v=[];new JS.Singleton("GlobalRootViewRegistry",{include:[r.Observable],initialize:function(){r.global.register("roots",x=this)},getRoots:()=>v,addRoot:t=>{v.push(t);x.fireEvent("rootAdded",t)},removeRoot:t=>{const l=v.indexOf(t);-1<l&&(v.splice(l,1),x.fireEvent("rootRemoved",t))}})})(myt);
(r=>{const {addEventListener:x,removeEventListener:v,global:{roots:t}}=r,l=r.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:e=>{const d=e.getIDE();e=e.__captureDrop=h=>{h.preventDefault()};x(d,"drop",e);x(d,"dragover",e)},teardownCaptureDrop:e=>{const d=e.getIDE();e=e.__captureDrop;v(d,"drop",e);v(d,"dragover",e)}},initNode:function(e,d){this.callSuper(e,d);this.setZIndex(0);this.addDomClass("myt");t.addRoot(this);l.setupCaptureDrop(this)},createOurDomElement:function(e){e||(e=this.callSuper(e),
r.getElement().appendChild(e));return e},destroy:function(){l.teardownCaptureDrop(this);t.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(e){this.keepDomElementWhenDestroyed=e},setParent:e=>{},bringToFront:function(){var e=this.getIDE();const d=e.parentNode;e!==d.lastChild&&(e=d.removeChild(e))&&d.appendChild(e)},sendToBack:function(){var e=this.getIDE();const d=e.parentNode;e!==d.firstChild&&(e=d.removeChild(e))&&
d.insertBefore(e,d.firstChild)},sendBehind:function(e,d){d=this.getIDE();e=e.getIDE();const h=d.parentNode;e.parentNode===h&&(d=h.removeChild(d))&&h.insertBefore(d,e)},sendInFrontOf:function(e,d){e.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(e,d),e.sendBehind(this,d))}})})(myt);
(r=>{let x,v,t=!1;const {requestAnimationFrame:l,cancelAnimationFrame:e}=window,d={},h=c=>{x=l(h);c=Math.round(c);-1!==v&&(d.delta=c-v,d.time=c,n.fireEvent("idle",d));v=c},n=new JS.Singleton("GlobalIdle",{include:[r.Observable],initialize:function(){r.global.register("idle",this)},attachObserver:(c,g,a)=>{c=n.callSuper(c,g,a);!t&&n.hasObservers("idle")&&(t=!0,v=-1,x=l(h));return c},detachObserver:(c,g,a)=>{c=n.callSuper(c,g,a);t&&!n.hasObservers("idle")&&(e(x),t=!1);return c}})})(myt);
(r=>{let x,v,t;const l=r.global,e=l.idle,d=window.document;new JS.Singleton("GlobalWindowResize",{include:[r.Observable,r.Observer],initialize:function(){x=this;x.attachTo(e,"__setup","idle");l.register("windowResize",x)},__setup:h=>{const n=d.body;n&&(x.detachFrom(e,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:v=n.clientWidth,h:t=n.clientHeight})})).observe(n))},getWidth:()=>v??=d.body.clientWidth,getHeight:()=>t??=d.body.clientHeight})})(myt);
(r=>{const x=JS.Module,v=r.global.windowResize,t=Math.max,l=d=>{const h=d.resizeDimension;"both"!==h&&"width"!==h||d.setWidth(t(d.minWidth,v.getWidth()));"both"!==h&&"height"!==h||d.setHeight(t(d.minHeight,v.getHeight()))},e=r.SizeToWindow=new x("SizeToWindow",{include:[r.RootView],initNode:function(d,h){this.minWidth=this.minHeight=0;h.resizeDimension??(h.resizeDimension="both");this.attachTo(v,"__hndlResize","resize");this.callSuper(d,h)},setResizeDimension:function(d){this.resizeDimension!==d&&
(this.resizeDimension=d,l(this))},setMinWidth:function(d){this.minWidth!==d&&(this.minWidth=d,l(this))},setMinHeight:function(d){this.minHeight!==d&&(this.minHeight=d,l(this))},__hndlResize:function(d){l(this)}});r.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[e],initNode:function(d,h){h.resizeDimension??(h.resizeDimension="width");this.callSuper(d,h)}});r.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[e],initNode:function(d,h){h.resizeDimension??(h.resizeDimension="height");this.callSuper(d,
h)}})})(myt);
(r=>{const x=Math,{min:v,max:t}=x,l=f=>v(255,t(0,x.round(f))),e=f=>l(f).toString(16).padStart(2,"0"),d=(f,b,q,w)=>(w?"#":"")+e(f)+e(b)+e(q),h=f=>new a((16711680&f)>>16,(65280&f)>>8,255&f),n=(f,b)=>{if("string"===typeof f)if(f.endsWith("%"))f=parseFloat(f.slice(0,-1))*b/100;else return 0;f=v(b,t(0,f))/b;return 1E-6>x.abs(1-f)?1:f},c=(f,b,q)=>{f=n(f,255);b=n(b,255);q=n(q,255);const w=t(f,b,q),k=w-v(f,b,q);if(0===k)return{h:0,s:0,v:w};let u;switch(w){case f:u=(b-q)/k+(b<q?6:0);break;case b:u=(q-f)/k+
2;break;case q:u=(f-b)/k+4}return{h:60*u,s:0===w?0:k/w,v:w}},g=(f,b,q)=>{f=6*n(f,360);b=n(b,100);q=n(q,100);var w=x.floor(f);const k=f-w;f=q*(1-b);const u=q*(1-k*b);b=q*(1-(1-k)*b);w%=6;return{red:255*[q,u,f,f,b,q][w],green:255*[b,q,q,u,f,f][w],blue:255*[f,f,b,q,q,u][w]}},a=r.Color=new JS.Class("Color",{extend:{toUnitRange:n,rgbToHsv:c,hsvToRgb:g,toHex:e,rgbToHex:d,cleanChannelValue:l,getRedChannel:f=>(16711680&f)>>16,getGreenChannel:f=>(65280&f)>>8,getBlueChannel:f=>255&f,makeColorFromNumber:h,makeColorFromHexString:f=>
{if(f)switch(f.startsWith("#")&&(f=f.slice(1)),f.length){case 0:f+="0";case 1:f+="0";case 2:f+="0";case 3:case 4:case 5:const [b,q,w]=f;return new a(parseInt(b+b,16),parseInt(q+q,16),parseInt(w+w,16));case 6:return h(parseInt(f,16));default:return h(parseInt(f.slice(0,6),16))}},makeColorFromHSV:(f,b,q)=>{const {red:w,green:k,blue:u}=g(f,b,q);return new a(w,k,u)},getLighterColor:(f,b)=>h(f).isLighterThan(h(b))?f:b,makeColorNumberFromChannels:(f,b,q)=>(l(f)<<16)+(l(b)<<8)+l(q),makeBlendedColor:(f,b,
q)=>new a(f.red+q*(b.red-f.red),f.green+q*(b.green-f.green),f.blue+q*(b.blue-f.blue))},initialize:function(f,b,q){this.setRed(f);this.setGreen(b);this.setBlue(q)},setRed:function(f){this.red=l(f)},setGreen:function(f){this.green=l(f)},setBlue:function(f){this.blue=l(f)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return d(this.red,this.green,this.blue,!0)},getHSV:function(){return c(this.red,this.green,this.blue)},isLighterThan:function(f){f=
this.getDiffFrom(f);return 0>f.red+f.green+f.blue},getDiffFrom:function(f){return{red:f.red-this.red,green:f.green-this.green,blue:f.blue-this.blue}},applyDiff:function(f){return this.add(f)},add:function(f){this.setRed(this.red+f.red);this.setGreen(this.green+f.green);this.setBlue(this.blue+f.blue);return this},subtract:function(f){this.setRed(this.red-f.red);this.setGreen(this.green-f.green);this.setBlue(this.blue-f.blue);return this},multiply:function(f){this.setRed(this.red*f);this.setGreen(this.green*
f);this.setBlue(this.blue*f);return this},divide:function(f){this.setRed(this.red/f);this.setGreen(this.green/f);this.setBlue(this.blue/f);return this},clone:function(){return new a(this.red,this.green,this.blue)},equals:function(f){return f===this||f?.isA?.(a)&&f.red===this.red&&f.green===this.green&&f.blue===this.blue}})})(myt);
(r=>{const {max:x,sin:v,cos:t,pow:l,sqrt:e,PI:d}=Math,h=2*d,n=d/2,c=r.global.idle,g=r.Color.makeColorFromHexString,a={linear:k=>k,inQuad:k=>k*k,outQuad:k=>-k*(k-2),inOutQuad:k=>1>(k*=2)?k*k/2:-(--k*(k-2)-1)/2,inCubic:k=>k*k*k,outCubic:k=>--k*k*k+1,inOutCubic:k=>1>(k*=2)?k*k*k/2:((k-=2)*k*k+2)/2,inQuart:k=>k*k*k*k,outQuart:k=>-(--k*k*k*k-1),inOutQuart:k=>1>(k*=2)?k*k*k*k/2:-((k-=2)*k*k*k-2)/2,inQuint:k=>k*k*k*k*k,outQuint:k=>--k*k*k*k*k+1,inOutQuint:k=>1>(k*=2)?k*k*k*k*k/2:((k-=2)*k*k*k*k+2)/2,inSine:k=>
-t(k*n)+1,outSine:k=>v(k*n),inOutSine:k=>-(t(k*d)-1)/2,inCirc:k=>-(e(1-k*k)-1),outCirc:k=>e(1- --k*k),inOutCirc:k=>1>(k*=2)?-(e(1-k*k)-1)/2:(e(1-(k-=2)*k)+1)/2,inExpo:k=>0===k?0:l(2,10*(k-1)),outExpo:k=>1===k?1:-l(2,-10*k)+1,inOutExpo:k=>0===k||1===k?k:1>(k*=2)?l(2,10*(k-1))/2:(-l(2,-10*--k)+2)/2,inElastic:k=>0===k||1===k?k:-(l(2,10*--k)*v((1*k-.075)*h/.3)),outElastic:k=>0===k||1===k?k:l(2,-10*k)*v((1*k-.075)*h/.3)+1,inOutElastic:k=>0===k||1===k?k:1>(k*=2)?-(l(2,10*--k)*v((1*k-.1125)*h/.45))/2:l(2,
-10*--k)*v((1*k-.1125)*h/.45)/2+1,inBack:(k,u=1.70158)=>(k/=1)*k*((u+1)*k-u),outBack:(k,u=1.70158)=>(k=k/1-1)*k*((u+1)*k+u)+1,inOutBack:(k,u=1.70158)=>1>(k*=2)?k*k*(((u*=1.525)+1)*k-u)/2:((k-=2)*k*(((u*=1.525)+1)*k+u)+2)/2,inBounce:k=>1-a.outBounce(1-k),outBounce:k=>k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375,inOutBounce:k=>1>(k*=2)?a.inBounce(k)/2:(a.outBounce(k-1)+1)/2},f=a.inOutQuad,b=k=>{k.__tmpFrom=!1;k.__loopCnt=
k.reverse?k.repeat-1:0;k.__prog=k.reverse?k.duration:0},q=(k,u)=>{const {running:B,paused:I,reverse:z,duration:C,repeat:J,__prog:M,easingFunction:O,callback:m}=k;if(B&&!I){z&&(u*=-1);u=M+u;let K=0;u>C?(K=u-C,u=C,++k.__loopCnt===J&&(K=0)):0>u&&(K=-u,u=0,0>--k.__loopCnt&&0<J&&(K=0));var p=k.target??k.parent;if(p){const {relative:L,attribute:R,__isColorAnim:N,__loopCnt:T,to:ea}=k;var y=x(0,u/C),A=x(0,M/C);null==k.from&&(k.__tmpFrom=!0,k.from=L?N?"#000":0:p.get(R));A=O(y)-(L?O(A):0);var E=k.from,F=L?
p.get(R):E;y=p.set;if(N){E=g(E);const U=g(ea);F=L?g(F):E;F.setRed(F.red+(U.red-E.red)*A);F.setGreen(F.green+(U.green-E.green)*A);F.setBlue(F.blue+(U.blue-E.blue)*A);A=F.getHtmlHexString()}else A=F+(ea-E)*A;y.call(p,R,A);!z&&T===J||z&&0>T&&0<J?(k.setRunning(!1),m?.call(k,!0)):0<K?(k.fireEvent("repeat",T),k.__prog=z?C:0,q(k,K)):k.__prog=u}else console.log("No target for animator",k),k.setRunning(!1),m?.call(k,!1)}},w=(k,u,B,I,z)=>{k.stopActiveAnimators(z);const C=k.animate.bind(k),J=B-u,M={attribute:z,
to:B,duration:I};C({attribute:z,from:B,to:u,duration:I}).next(O=>{C(M).next(m=>{C({attribute:z,to:B-.5*J,duration:I}).next(p=>{C(M).next(y=>{C({attribute:z,to:B-.25*J,duration:I}).next(A=>{C(M)})})})})})};r.Animator=new JS.Class("Animator",r.Node,{include:[r.Reusable],extend:{easings:a,bounceView:(k,u=0,B=6,I=150)=>{w(k,u,B,I,"y")},shakeView:(k,u=-10,B=0,I=50)=>{w(k,u,B,I,"x")},wiggleView:w},initNode:function(k,u){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=
1;this.easingFunction=f;this.callSuper(k,u);b(this)},setRunning:function(k){if(this.running!==k&&(this.running=k,this.inited&&this.fireEvent("running",k),!this.paused)){if(k){const u=this.target??this.parent;this.__isColorAnim=u&&"function"===typeof u.isColorAttr?u.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),b(this);this[k?"attachTo":"detachFrom"](c,"__updateAnim","idle")}},setPaused:function(k){if(this.paused!==k&&(this.paused=k,this.inited&&this.fireEvent("paused",
k),this.running))this[k?"detachFrom":"attachTo"](c,"__updateAnim","idle")},setReverse:function(k){this.set("reverse",k,!0);this.inited&&!this.running&&b(this)},setRepeat:function(k){this.set("repeat",k,!0);this.inited&&!this.running&&b(this)},setDuration:function(k){this.set("duration",k,!0);this.inited&&!this.running&&b(this)},setEasingFunction:function(k){"string"===typeof k&&(k=a[k]);this.set("easingFunction",k??f,!0)},setFrom:function(k){this.set("from",k,!0)},setTo:function(k){this.set("to",
k,!0)},setCallback:function(k){this.callback=k},next:function(k,u){const B=this,I=B.callback;I&&!u?B.setCallback(z=>{I.call(B,z);k.call(B,z)}):B.setCallback(k)},reset:function(k){b(this);this.setRunning(!1);this.setPaused(!1);k&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=f;this.reset(!1)},__updateAnim:function(k){q(this,k.value.delta)}})})(myt);
(r=>{const x=Array.isArray,v=e=>{e.__additionalArgs=[];e.__pendingTransition="";e.__transDestinationState="";e.__transStage="leaveState"},t=(e,d)=>{if(e.__transInProgress){var h=e.__deferredTransitions;h??=e.__deferredTransitions=[];h.unshift(d)}else{e.__transInProgress=!0;h=d.shift();const n=d.shift();if(e.__pendingTransition)return 3;if(e.isFinished())return e.__transInProgress=!1,5;let c=e.map[e.current][n];c??=e.map["*"][n];if(c)return e.__pendingTransition=n,e.__transDestinationState=c,e.__additionalArgs=
d,e.resumeTransition(h);e.__transInProgress=!1;return 5}},l=e=>{e.__transInProgress=!1;const d=e.__deferredTransitions;if(d)for(;0<d.length;)t(e,d.pop())};r.StateMachine=new JS.Class("StateMachine",r.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(e,d){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";v(this);this.callSuper(e,d)},setInitialState:function(e){if(""===this.current){if(x(e)){var d=e;e=d.shift()}else d=[];this.current=
this.initial=e;this.doEnterState("","",e,d);d={name:"",from:"",to:e,args:d};this.fireEvent("enter"+e,d);this.fireEvent("enter",d);this.isFinished()&&this.fireEvent("finished",d)}},setTerminalState:function(e){this.terminal=e},addTransitions:function(e){for(const d of e)this.addTransition(...d)},addTransition:function(e,d,h){d=d?x(d)?d:[d]:["*"];const n=this.map;let c=d.length;for(;c;){let g,a;((g=n)[a=d[--c]]??(g[a]={}))[e]=h}},doTransition:function(...e){e.unshift("sync");return t(this,e)},doAsyncTransition:function(...e){e.unshift("async");
return t(this,e)},resumeTransition:function(e){const d=this.__pendingTransition;if(!d)return 4;const h=this.current,n=this.__transDestinationState,c=this.__additionalArgs,g={name:d,from:h,to:n,args:c},a=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const f=this.doLeaveState(d,h,n,c);if(!1===f)return v(this),l(this),2;if("async"===f||"async"===e)return this.__transStage="enterState",a("start"+d,g),a("start",g),a("leave"+h,g),a("leave",g),l(this),3;a("start"+d,g);a("start",g);
a("leave"+h,g);a("leave",g);case "enterState":this.current=n,v(this),this.doEnterState(d,h,n,c),a("enter"+n,g),a("enter",g),a("end"+d,g),a("end",g),this.isFinished()&&a("finished",g)}l(this);return 1},doLeaveState:(e,d,h,n)=>{},doEnterState:(e,d,h,n)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(e){return x(e)?e.includes(this.current):this.current===e},can:function(e){return void 0!==this.map[this.current][e]?!0:void 0!==this.map["*"][e]}})})(myt);
(r=>{const x=(e,d)=>e.replicationIndex-d.replicationIndex,v=(e,d)=>{let h=e.length;for(;h;){const n=e[--h];n.decrementLockedCounter();d&&n.update()}},t=e=>{l(e);const d=e.template;d&&(e.__pool=new r.TrackActivesPool(d,e.parent))},l=e=>{const d=e.__pool;if(d){e=e.parent.getLayouts();let h=e.length;for(;h;)e[--h].incrementLockedCounter();d.putActives();d.destroyPooledInstances();v(e,!1);d.destroy()}};r.Replicable=new JS.Module("Replicable",{include:[r.Reusable],replicate:function(e,d){this.replicationData=
e;this.replicationIndex=d},notify:(e,d)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(e,d){return d===this.replicationIndex&&e===this.replicationData}});r.Replicator=new JS.Class("Replicator",r.Node,{initNode:function(e,d){this.callSuper(e,d);t(this);this.doReplication()},destroy:function(){l(this);this.callSuper()},setTemplate:function(e){(this.template=e.includes(r.Replicable)?e:null)||r.dumpStack("Template not replicable");this.inited&&
(t(this),this.doReplication())},setData:function(e){this.data=e;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const e=this.__pool;let d;if(e){d=this.parent.getLayouts();for(var h=d.length;h;)d[--h].incrementLockedCounter();const n=(h=this.data)?h.length:0,c=e.getActives(),g=c.length,a=[];let f=g,b,q;for(c.sort(x);f;)if(b=c[--f],q=b.replicationIndex,q>=n||!b.alreadyHasReplicationData(h[q],q))a[q]=b;for(f=a.length;f;)(b=a[--f])&&
e.putInstance(b);for(f=0;n>f;++f)(f>=g||null!=a[f])&&e.getInstance().replicate(h[f],f);for(f=d.length;f;)d[--f].sortSubviews(x);v(d,!0)}},notify:function(e,d){var h=this.__pool;if(h){h=h.getActives();let n=h.length;for(;n;)h[--n].notify(e,d)}}})})(myt);
(r=>{const x=JS.Singleton,v=document,{DomElementProxy:t,DomObservable:l,global:{register:e}}=r;new x("GlobalMouse",{include:[t,l,r.MouseObservable],initialize:function(){this.setDomElement(v);e("mouse",this)}});new x("GlobalTouch",{include:[t,l,r.TouchObservable],initialize:function(){this.setDomElement(v);e("touch",this)}})})(myt);
(r=>{let x,v,t;const l=[],e=[],d=c=>{const g=t;g!==c&&(g&&(g.notifyDragLeave(v),v.destroyed||v.notifyDragLeaving(g),x("dragLeave",g)),t=c)&&(c.notifyDragEnter(v),v.destroyed||v.notifyDragEntering(c),x("dragEnter",g))},h=c=>{let g=v;if(g!==c)if(v=c){g=c;for(const a of n(g,e))a.notifyDragStart(g);for(const a of n(g,l))a.notifyAutoScrollerDragStart(g);x("startDrag",c)}else{for(const a of n(g,e))a.notifyDragStop(g);for(const a of n(g,l))a.notifyAutoScrollerDragStop(g);x("stopDrag",c)}},n=(c,g)=>{if(c.destroyed)return[];
if(c.isAnyDragGroup())return g;const a=[];c=c.getDragGroups();let f=g.length;for(;f;){const b=g[--f];if(b.isAnyDropGroup())a.push(b);else{const q=b.getDropGroups();for(const w in c)if(q[w]){a.push(b);break}}}return a};new JS.Singleton("GlobalDragManager",{include:[r.Observable],initialize:function(){r.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>v,registerAutoScroller:c=>{l.push(c)},unregisterAutoScroller:c=>{c=l.indexOf(c);-1<c&&l.splice(c,1)},registerDropTarget:c=>
{e.push(c)},unregisterDropTarget:c=>{c=e.indexOf(c);-1<c&&e.splice(c,1)},startDrag:c=>{h(c)},stopDrag:(c,g,a)=>{g.notifyDropped(t,a);a||t?.notifyDrop(g);d();h();t&&!a&&x("drop",[g,t])},updateDrag:(c,g)=>{const a=n(g,e);let f=a.length,b;if(0<f){const {pageX:q,pageY:w}=c.value;for(;f;)c=a[--f],c.willAcceptDrop(g)&&g.willPermitDrop(c)&&c.isPointVisible(q,w)&&(!b||c.isInFrontOf(b))&&(b=c)}d(b)}})})(myt);
(r=>{const x=JS.Module,{mouse:v,keys:t,idle:l}=r.global;r.Activateable=new x("Activateable",{doActivated:()=>{}});r.UpdateableUI=new x("UpdateableUI",{initNode:function(e,d){this.callSuper(e,d);this.updateUI()},updateUI:()=>{}});r.Disableable=new x("Disableable",{initNode:function(e,d){d.disabled??(d.disabled=!1);this.callSuper(e,d)},setDisabled:function(e){e=this.valueFromEvent(e);this.disabled!==e&&(this.disabled=e,this.inited&&this.fireEvent("disabled",e),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});r.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[t.CODE_ENTER,t.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(e,d){this.activateKeyDown="";d.activationKeys??(d.activationKeys=r.KeyActivation.ACTIVATION_KEYS);this.callSuper(e,d);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(e){this.activationKeys=
e??[]},setRepeatKeyDown:function(e){this.repeatKeyDown=e},__hndlKeyDown:function(e){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const d=r.KeyObservable.getCodeFromEvent(e);this.activationKeys.includes(d)&&(this.activateKeyDown===d?this.doActivationKeyDown(d,!0):(this.activateKeyDown=d,this.doActivationKeyDown(d,!1)),e.value.preventDefault())}},__hndlKeyPress:function(e){if(!this.disabled){const d=r.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===d&&this.activationKeys.includes(d)&&
e.value.preventDefault()}},__hndlKeyUp:function(e){if(!this.disabled){const d=r.KeyObservable.getCodeFromEvent(e);this.activateKeyDown===d&&this.activationKeys.includes(d)&&(this.activateKeyDown="",this.doActivationKeyUp(d),e.value.preventDefault())}},__doDomBlur:function(e){this.disabled||(e=this.activateKeyDown,""!==e&&(this.activateKeyDown="",this.doActivationKeyAborted(e)))},doActivationKeyDown:(e,d)=>{},doActivationKeyUp:function(e){this.doActivated()},doActivationKeyAborted:e=>{}});r.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(e,d){switch(e){case t.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,d))return;break;case t.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,d))return;break;case t.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,d))return;break;case t.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,d))return}this.callSuper(e,d)},doKeyArrowLeftOrUp:(e,d)=>{},doKeyArrowRightOrDown:(e,d)=>{}});r.MouseOver=new x("MouseOver",{initNode:function(e,d){d.mouseOver??(d.mouseOver=
!1);this.callSuper(e,d);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(e){this.mouseOver!==e&&(this.mouseOver=e,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(l,"__doMouseOverOnIdle","idle")))},setDisabled:function(e){this.callSuper(e);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(l,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const e=this.mouseOver;this.__lastOverIdleValue!==e&&(this.__lastOverIdleValue=e,this.doSmoothMouseOver(e))},doSmoothMouseOver:function(e){this.inited&&this.updateUI?.()},doMouseOver:function(e){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(e){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});r.MouseDown=new x("MouseDown",{initNode:function(e,d){d.mouseDown??(d.mouseDown=!1);this.callSuper(e,
d);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(e){this.mouseDown!==e&&(this.mouseDown=e,this.inited&&(e&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(e){e&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(e)},doMouseOver:function(e){this.callSuper(e);this.mouseDown&&this.detachFromDom(v,"doMouseUp","mouseup",!0)},doMouseOut:function(e){this.callSuper(e);!this.disabled&&this.mouseDown&&this.attachToDom(v,
"doMouseUp","mouseup",!0)},doMouseDown:function(e){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(e){this.mouseOver||this.detachFromDom(v,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(e))},doMouseUpInside:function(e){this.doActivated?.()}});r.MouseOverAndDown=new x("MouseOverAndDown",{include:[r.MouseOver,r.MouseDown]});r.MouseEventsBubbleUp=new x("MouseEventsBubbleUp",
{doMouseOver:function(e){this.callSuper(e);return!0},doMouseOut:function(e){this.callSuper(e);return!0},doMouseDown:function(e){this.callSuper(e);return!0},doMouseUp:function(e){this.callSuper(e);return!0}});r.Draggable=new x("Draggable",{initNode:function(e,d){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let h=!0;null!=d.isDraggable&&(h=d.isDraggable,delete d.isDraggable);this.callSuper(e,d);this.setIsDraggable(h)},setIsDraggable:function(e){if(this.isDraggable!==
e){this.isDraggable=e;let d;e?d=this.attachToDom:this.inited&&(d=this.detachFromDom);if(d){e=this.getDragViews();let h=e.length;for(;h;){const n=e[--h];d.call(this,n,"__doMouseDown","mousedown");d.call(this,n,"__doContextMenu","contextmenu")}}}},setIsDragging:function(e){this.set("isDragging",e,!0)},setDragOffsetX:function(e,d){this.dragOffsetX!==e&&(this.dragOffsetX=e,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDragOffsetY:function(e,d){this.dragOffsetY!==e&&(this.dragOffsetY=
e,this.inited&&this.isDragging&&!d&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(e){this.distanceBeforeDrag=e},setDraggableAllowBubble:function(e){this.draggableAllowBubble=e},setCenterOnMouse:function(e){this.centerOnMouse=e},setAllowAbort:function(e){this.allowAbort=e},getDragViews:function(){return[this]},__doContextMenu:e=>{},__doMouseDown:function(e){const d=r.MouseObservable.getMouseFromEvent(e),h=this.getODE();this.dragInitX=d.x-h.offsetLeft;this.dragInitY=d.y-h.offsetTop;
this.attachToDom(v,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(v,"__doDragCheck","mousemove",!0):this.startDrag(e);e.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(e){this.isDragging?this.stopDrag(e,!1):(this.detachFromDom(v,"__doMouseUp","mouseup",!0),this.detachFromDom(v,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(e){e.value===t.CODE_ESC&&this.stopDrag(e,!0)},__doDragCheck:function(e){const d=
r.MouseObservable.getMouseFromEvent(e);r.Geometry.measureDistance(d.x,d.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(v,"__doDragCheck","mousemove",!0),this.startDrag(e))},startDrag:function(e){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(t,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(v,"updateDrag","mousemove",!0);this.updateDrag(e)},
updateDrag:function(e){this.__lastMousePosition=r.MouseObservable.getMouseFromEvent(e);this.reRequestDragPosition()},__updateDragInitX:function(e){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(e){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(e,d){this.detachFromDom(v,"__doMouseUp","mouseup",!0);this.detachFromDom(v,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(t,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(e,d){this.disabled||(this.setX(e),this.setY(d))},reRequestDragPosition:function(){const e=this.__lastMousePosition;this.requestDragPosition(e.x-this.dragInitX+this.dragOffsetX,e.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(r=>{const {Class:x,Module:v}=JS,{View:t,KeyActivation:l}=r;var e=r.Button=new v("Button",{include:[r.Activateable,r.UpdateableUI,r.Disableable,r.MouseOverAndDown,l],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(h,n){n.focusable??(n.focusable=!0);n.cursor??(n.cursor="pointer");this.callSuper(h,n)},setFocused:function(h){const n=this.focused;this.callSuper(h);this.inited&&this.focused!==n&&this.updateUI()},doActivationKeyDown:function(h,n){n||this.updateUI()},doActivationKeyUp:function(h){this.callSuper(h);
this.updateUI()},doActivationKeyAborted:function(h){this.callSuper(h);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const h=this.__restoreCursor;h&&(this.setCursor(h),this.__restoreCursor=null);this.activateKeyDown!==l.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});e=r.SimpleButtonStyle=new v("SimpleButtonStyle",{include:[e],setActiveColor:function(h){this.activeColor!==h&&(this.activeColor=h,this.inited&&this.updateUI())},setHoverColor:function(h){this.hoverColor!==h&&(this.hoverColor=h,this.inited&&this.updateUI())},setReadyColor:function(h){this.readyColor!==
h&&(this.readyColor=h,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(h,n=1){this.setOpacity(n);this.setBgColor(h)}});const d=r.SimpleButton=new x("SimpleButton",t,{include:[e],initNode:function(h,n){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(h,
n)}});r.SimpleTextButton=new x("SimpleTextButton",d,{initNode:function(h,n){this.inset=this.outset=0;n.shrinkToFit??(n.shrinkToFit=!1);n.height??(n.height=24);n.textY??(n.textY="middle");this.callSuper(h,n);h=this.textY;n={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof h?n.valign=h:n.y=h;h=this.textView=new r.Text(this,n);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",h,"visible",h,"width",
h,"height",h,"y"])},setInset:function(h){this.set("inset",this.valueFromEvent(h),!0)},setOutset:function(h){this.set("outset",this.valueFromEvent(h),!0)},setText:function(h){this.text!==h&&(this.text=h,this.inited&&(this.textView.setText(h),this.fireEvent("text",h)))},setShrinkToFit:function(h){this.shrinkToFit!==h&&(this.shrinkToFit=h,this.inited&&(this.textView.setWhiteSpace(h?"nowrap":"normal"),this.fireEvent("shrinkToFit",h)))},setTextY:function(h){if(this.textY!==h&&(this.textY=h,this.inited)){const n=
this.textView;this.fireEvent("textY",h);"string"===typeof h?n.setValign(h):(n.setValign(""),n.setY(h))}},__updateContent:function(h){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:n,outset:c,textView:g}=this;this.__updateContentLoopBlock=!0;g.setX(n);this.shrinkToFit?this.setWidth(n+(g.visible&&this.text?g.width:0)+c):g.setWidth(this.width-n-c);this.__updateContentLoopBlock=!1}}});r.TextButton=new x("TextButton",r.PaddedText,{include:[e],initNode:function(h,n){n.focusIndicator??
(n.focusIndicator=!1);n.roundedCorners??(n.roundedCorners=3);n.textAlign??(n.textAlign="center");n.paddingTop??(n.paddingTop=1);n.height??(n.height=23-(n.paddingTop??0));n.activeColor??(n.activeColor="#ddd");n.hoverColor??(n.hoverColor="#eee");n.readyColor??(n.readyColor="#fff");this.callSuper(h,n)}})})(myt);
(r=>{const x=console.warn,{focus:v,mouse:t,windowResize:l}=r.global,e={};r.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:d=>e[d]},initNode:function(d,h){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(d,h)},setLastFloatingPanelShown:function(d){this.lastFloatingPanelShown=d},setLastFloatingPanelId:function(d){this.floatingPanelId=
d},setFloatingAlign:function(d){this.set("floatingAlign",d,!0)},setFloatingValign:function(d){this.set("floatingValign",d,!0)},setFloatingAlignOffset:function(d){this.set("floatingAlignOffset",d,!0)},setFloatingValignOffset:function(d){this.set("floatingValignOffset",d,!0)},setKeepInWindow:function(d){this.set("keepInWindow",d,!0)},setKeepInWindowBorder:function(d){this.set("keepInWindowBorder",d,!0)},createFloatingPanel:function(d,h,n){d=d??this.floatingPanelId;n=n??{};n.panelId=d;return e[d]=new h(null,
n)},getFloatingPanel:function(d){return e[d??this.floatingPanelId]},toggleFloatingPanel:function(d){this.getFloatingPanel(d??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(d):this.showFloatingPanel(d)},showFloatingPanel:function(d){if(d=this.getFloatingPanel(d??this.floatingPanelId))d.show(this),this.setLastFloatingPanelShown(d)},hideFloatingPanel:function(d){if(d=this.getFloatingPanel(d??this.floatingPanelId))d.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(d){this.callSuper?.()},
notifyPanelHidden:function(d){this.callSuper?.()},getFloatingAlignForPanel:function(d){return this.floatingAlign},getFloatingValignForPanel:function(d){return this.floatingValign},getFloatingAlignOffsetForPanel:function(d){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(d){return this.floatingValignOffset},getNextFocus:function(){const d=this.lastFloatingPanelShown;return d?.isShown()?d:this.callSuper?.()},getNextFocusAfterPanel:function(d){return this},getPrevFocusAfterPanel:function(d){return this}});
r.FloatingPanel=new JS.Class("FloatingPanel",r.View,{include:[r.RootView],initNode:function(d,h){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;h.visible=h.focusIndicator=!1;h.focusable=h.focusCage=!0;this.callSuper(d,h)},setOwner:function(d){this.owner=d},setPanelId:function(d){this.panelId=d},setIgnoreOwnerForHideOnMouseDown:function(d){this.ignoreOwnerForHideOnMouseDown=d},setHideOnBlur:function(d){this.hideOnBlur=d},setHideOnMouseDown:function(d){this.hideOnMouseDown=
d},setWidth:function(d){const h=this.width;this.callSuper(d);this.isShown()&&h!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(d){const h=this.height;this.callSuper(d);this.isShown()&&h!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(d){var h=d.value;d=h.pageX;h=h.pageY;this.containsPoint(d,h)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(d,h)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(d){this.hideOnMouseDown&&
this.hide(d)},focus:function(d){if(this.owner&&this.isAncestorOf(v.focusedView))this.owner[(v.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(d);else{const h=this.getFirstFocusableDescendant();h===this?this.callSuper(d):h.focus(d)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(d){(d=d.value)&&!this.isAncestorOf(d)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&v.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(d){this.isShown()||(this.bringToFront(),this.updateLocation(d),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(t,"__doMouseDown","mousedown",!0),this.attachTo(v,"__doFocusChange","focused"))},hide:function(d){this.isShown()&&(this.detachFromDom(t,"__doMouseDown","mousedown",!0),this.detachFrom(v,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),d||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(d){this.setOwner(d);this.updateLocationX(d);this.updateLocationY(d)},updateLocationX:function(d){const h=d.getFloatingAlignForPanel(this),n=typeof h;let c;if("string"===n){c=d.getPagePosition().x+d.getFloatingAlignOffsetForPanel(this);switch(h){case "outsideRight":c+=d.width;break;case "insideRight":c+=d.width-this.width;break;case "outsideLeft":c-=this.width;break;case "insideLeft":break;default:x("Invalid align value",n,h)}d.keepInWindow&&
(d=c+this.width+(d.keepInWindowBorder||0)-l.getWidth(),0<d&&(c-=d))}else"number"===n?c=h:x("Invalid align type",n,h);this.setX(c)},updateLocationY:function(d){const h=d.getFloatingValignForPanel(this),n=typeof h;let c;if("string"===n){c=d.getPagePosition().y+d.getFloatingValignOffsetForPanel(this);switch(h){case "outsideBottom":c+=d.height;break;case "insideBottom":c+=d.height-this.height;break;case "outsideTop":c-=this.height;break;case "insideTop":break;default:x("Invalid valign value",n,h)}d.keepInWindow&&
(d=c+this.height+(d.keepInWindowBorder||0)-l.getHeight(),0<d&&(c-=d))}else"number"===n?c=h:x("Invalid valign type",n,h);this.setY(c)}})})(myt);
(r=>{const {Class:x,Module:v}=JS,t=Math,{View:l,global:e}=r,d=e.focus,h=e.keys,{LIST_KEYS:n,CODE_ESC:c}=h,g=f=>{const b=f.itemConfig??[],q=b.length,{items:w,defaultItemClass:k,fixedWidth:u}=f,B=w.length,I=0<u,z=f.getContentView(),C=z.getLayouts();let J=0;for(var M of C)M.incrementLockedCounter();l.doWhileRemovedFromDom(z,()=>{const O={listView:f};I&&(O.width=u,O.enableEllipsis=!0);for(;q>J;++J){var m=b[J];const p=m.klass??k;m=m.attrs??{};let y=w[J];y&&!y.isA(p)&&(y.destroy(),y=null);y??=w[J]=new p(z,
{...O});y&&(y.callSetters(m),y.__LAYOUT_IDX=J)}});if(I)M=u;else for(M=f.minWidth,J=0;q>J;){const O=w[J++];O.syncToDom();M=t.max(M,O.getMinimumWidth())}for(;B>J;)w[J++].destroy();w.length=q;if(!I)for(J=0;q>J;)f.updateItemWidth(w[J++],M);f.updateContentWidth(z,M);for(const O of C)O.sortSubviews((m,p)=>m.__LAYOUT_IDX-p.__LAYOUT_IDX),O.decrementLockedCounter(),O.update()},a=r.ListViewItemMixin=new v("ListViewItemMixin",{setListView:function(f){this.listView=f},getMinimumWidth:()=>0,syncToDom:()=>{}});
r.ListView=new x("ListView",r.FloatingPanel,{initNode:function(f,b){this.items=[];this.maxHeight=-1;this.minWidth=0;b.defaultItemClass??(b.defaultItemClass=r.ListViewItem);b.overflow??(b.overflow="autoy");b.bgColor??(b.bgColor="#ccc");b.boxShadow??(b.boxShadow=r.Button.FOCUS_SHADOW);this.callSuper(f,b);g(this);this.buildLayout(this.getContentView())},buildLayout:f=>{new r.SpacedLayout(f,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(f){this.minWidth=f},setDefaultItemClass:function(f){this.defaultItemClass=
f},setItemConfig:function(f){this.itemConfig=f;this.inited&&g(this)},getContentView:function(){return this},setMaxHeight:function(f){this.maxHeight!==f&&(this.maxHeight=f,this.inited&&(this.fireEvent("maxHeight",f),this.setHeight(this.height)))},setHeight:function(f){this.callSuper(0<=this.maxHeight?t.min(this.maxHeight,f):f);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(f){this?.owner.doItemActivated(f)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(f=>f.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(f=>f.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(f,b)=>{f.setWidth(b)},updateContentWidth:(f,b)=>{f.setWidth(b)}});r.ListViewAnchor=new v("ListViewAnchor",{include:[r.FloatingPanelAnchor,r.ArrowKeyActivation],initNode:function(f,
b){b.listViewClass??(b.listViewClass=r.ListView);b.listViewAttrs??(b.listViewAttrs={});b.itemConfig??(b.itemConfig=[]);b.activationKeys??(b.activationKeys=n);this.callSuper(f,b)},setListViewClass:function(f){this.listViewClass=f},setListViewAttrs:function(f){this.listViewAttrs=f},setItemConfig:function(f){this.itemConfig=f},getFloatingValignForPanel:function(f){var b=f.height,q=this.getPagePosition().y,w=e.windowResize.getHeight()-this.getPagePosition().y-this.height;f=q-b;b=w-b;q=q>w;w=this.floatingValign;
switch(w){case "outsideBottom":0>b&&q&&(w="outsideTop");break;case "insideBottom":0>b&&q&&(w="insideTop");break;case "outsideTop":0>f&&!q&&(w="outsideBottom");break;case "insideTop":0>f&&!q&&(w="insideBottom")}return w},doItemActivated:function(f){this.hideFloatingPanel()},getFloatingPanel:function(f){return this.callSuper(f)??this.createFloatingPanel(f,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(f){const b=this.getFloatingPanel(f);b&&(b.setItemConfig(this.itemConfig),this.callSuper(f))},
doActivationKeyDown:function(f,b){f===c?this.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){this.focusToLastItem()},doKeyArrowRightOrDown:function(f,b){this.focusToFirstItem()},doActivationKeyUp:function(f){if(f!==c)switch(this.callSuper(f),f){case h.CODE_ARROW_LEFT:case h.CODE_ARROW_UP:this.focusToLastItem();break;case h.CODE_ARROW_RIGHT:case h.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToLastItem()},
focusToFirstItem:function(){const f=this.getFloatingPanel();f?.isShown()&&f.focusToFirstItem()},updateEntryAttr:function(f,b,q){(f=this.getEntryByValue(f))&&(f.attrs[b]=q);return f},getEntryByValue:function(f){return this.itemConfig.find(b=>b?.attrs&&b.attrs.value===f)}});r.ListViewItem=new x("ListViewItem",r.TextButton,{include:[a,r.ArrowKeyActivation],initNode:function(f,b){b.activeColor??(b.activeColor="#bbb");b.hoverColor??(b.hoverColor="#fff");b.readyColor??(b.readyColor="#eee");b.paddingLeft??
(b.paddingLeft=8);b.paddingRight??(b.paddingRight=8);b.textAlign??(b.textAlign="left");b.roundedCorners??(b.roundedCorners=0);b.activationKeys??(b.activationKeys=n);b.focusIndicator??(b.focusIndicator=!0);const q=this.__enableEllipsis=b.enableEllipsis;delete b.enableEllipsis;this.callSuper(f,b);this.addDomClass("mytButtonText");q&&this.enableEllipsis()},setText:function(f){this.callSuper(f);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return t.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(f,b){f===c?this.listView.owner.hideFloatingPanel():this.callSuper(f,b)},doKeyArrowLeftOrUp:function(f,b){d.prev()},doKeyArrowRightOrDown:function(f,b){d.next()}});r.ListViewSeparator=new x("ListViewSeparator",l,{include:[a],initNode:function(f,b){b.height??(b.height=1);b.bgColor??(b.bgColor="#666");this.callSuper(f,b)}})})(myt);
(r=>{const x=r.AccessorSupport,v=x.generateSetterName,t={},l=r.BAG=new JS.Class("BAG",{include:[x,r.Destructible,r.Observable],extend:{getGroup:(e,d)=>{if(e&&d){let h;return(h=t[e]??(t[e]={}))[d]??(h[d]=new l(e,d))}},removeGroup:(e,d)=>{if(e&&d&&(e=t[e])){const h=e[d];h&&delete e[d];return h}}},initialize:function(e,d){this.__nodes=[];this.trueNode=null;this.attrName=e;this.groupId=d},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&l.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(e){this.set("groupId",e,!0)},setAttrName:function(e){this.set("attrName",e,!0)},setTrueNode:function(e){this.set("trueNode",e,!0)},getNodes:function(){return this.__nodes},register:function(e){e&&!this.isRegistered(e)&&(this.__nodes.push(e),e[this.attrName]&&this.setTrue(e))},unregister:function(e){if(e){const d=this.__nodes,h=d.indexOf(e);-1<h&&d.splice(h,1);this.trueNode===e&&this.setTrueNode(null);0===d.length&&
this.destroy()}},setTrue:function(e){if(e&&this.trueNode!==e&&this.isRegistered(e)){const d=this.attrName,h=v(d),n=this.__nodes;let c=n.length;for(this.setTrueNode(e);c;){const g=n[--c];if(e===g){if(!g[d])g[h](!0)}else if(g[d])g[h](!1)}}},setFalse:function(e){e&&this.trueNode===e&&(e[v(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(e){return this.__nodes.includes(e)}});r.BAGMembership=new JS.Module("BAGMembership",{initNode:function(e,d){this.__bags=[];this.callSuper(e,d)},destroy:function(){const e=
this.__bags;let d=e.length;for(;d;){const h=e[--d];this.removeFromBAG(h.attrName,h.groupId)}this.callSuper()},isRegisteredWithBAG:function(e){return this.__bags.includes(e)},getBAG:(e,d)=>l.getGroup(e,d),addToBAG:function(e,d){d=this.getBAG(e,d);this.isRegisteredWithBAG(d)||(this.__bags.push(d),d.register(this),this.isAttachedTo(this,"__updateForBAG",e)||this.attachTo(this,"__updateForBAG",e))},removeFromBAG:function(e,d){d=this.getBAG(e,d);if(this.isRegisteredWithBAG(d)){const h=this.__bags;let n=
h.length,c=!0;for(;n;){const g=h[--n];g===d?(h.splice(n,1),d.unregister(this)):g.attrName===e&&(c=!1)}c&&this.detachFrom(this,"__updateForBAG",e)}},__updateForBAG:function(e){for(const d of this.__bags)if(d.attrName===e.type)d[e.value?"setTrue":"setFalse"](this)}})})(myt);
(r=>{const x=v=>{const t=v.label||"";v.setText('<i class="far fa-'+(!0===v.selected?"dot-":"")+'circle"></i>'+(0<t.length?" ":"")+t)};r.Radio=new JS.Class("Radio",r.Text,{include:[r.SimpleButtonStyle,r.BAGMembership],initNode:function(v,t){t.selected??(t.selected=!1);t.groupId??(t.groupId=r.generateGuid());t.focusIndicator??(t.focusIndicator=!1);t.activeColor??(t.activeColor="inherit");t.hoverColor??(t.hoverColor="inherit");t.readyColor??(t.readyColor="inherit");const l=t.value;delete t.value;this.callSuper(v,
t);this.setValue(l);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);r.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(v){this.set("optionValue",v,!0)},setValue:function(v){if(this.inited){const t=this.getBAG("selected",this.groupId);if(t){const l=t.getNodes();let e=l.length;for(;e;){const d=l[--e];if(d.optionValue===v){t.setTrue(d);break}}}}},getValue:function(){var v=this.getBAG("selected",this.groupId);return(v=v?v.trueNode:null)?v.optionValue:null},
setSelected:function(v){this.selected!==v&&(this.selected=v,this.inited&&(this.fireEvent("selected",v),x(this)))},setGroupId:function(v){if(this.groupId!==v){const t=this.groupId;this.groupId=v;t&&this.removeFromBAG("selected",t);v&&this.addToBAG("selected",v);this.inited&&this.fireEvent("groupId",v)}},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(v,t=1){this.setOpacity(t);this.setTextColor(v)}})})(myt);
(r=>{const x=JS.Module,v=r.global.keys,t=r.Selectable=new x("Selectable",{setSelected:function(e){e=this.valueFromEvent(e);this.selected!==e&&(this.selected=e,this.inited&&this.fireEvent?.("selected",e))},isSelected:function(){return!!this.selected},canSelect:e=>!0,canDeselect:e=>!0}),l=r.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>v.isShiftKeyDown(),isToggleMode:()=>v.isAcceleratorKeyDown()},initNode:function(e,d){this.__selected={};this.__lastSelectedItem=null;d.selectedCount=
0;d.itemSelectionId??(d.itemSelectionId="id");d.maxSelected??(d.maxSelected=-1);this.callSuper(e,d)},setItemSelectionId:function(e){this.itemSelectionId=e},setMaxSelected:function(e){this.maxSelected=e},setSelectedCount:function(e){this.selectedCount!==e&&(this.selectedCount=e,this.inited&&this.fireEvent("selectedCount",e))},isAddMode:()=>l.isAddMode(),isToggleMode:()=>l.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(e){e&&!this.isSelectedItem(e)&&this.canSelectItem(e)&&
(e.setSelected(!0),this.__selected[e[this.itemSelectionId]]=e,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=e,this.doSelected(e),this.fireEvent("itemSelected",e))},doSelected:e=>{},selectById:function(e){this.select(this.getSelectableItem(e))},canSelectItem:function(e){const {maxSelected:d,selectedCount:h}=this;if(0===d)return!1;if(1===d){if(0<h&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<d&&h>=d)return!1;return e.canSelect(this)},selectAll:function(){const e=
this.getSelectableItems();let d=e.length;for(;d;)this.select(e[--d])},deselect:function(e){this.isSelectedItem(e)&&this.canDeselectItem(e)&&(e.setSelected(!1),delete this.__selected[e[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===e&&(this.__lastSelectedItem=null),this.doDeselected(e),this.fireEvent("itemDeselected",e))},doDeselected:e=>{},deselectById:function(e){this.deselect(this.getSelectableItem(e))},canDeselectItem:function(e){return e.canDeselect(this)},
deselectAll:function(){const e=this.__selected;for(const d in e)this.deselect(e[d])},isSelectedItem:e=>e?e.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const e=[],d=this.getSubviews();let h=d.length;for(;h;){const n=d[--h];n.isA(t)&&e.push(n)}return e},getSelectableItems:function(){const e=this.getManagedItems();let d=e.length;for(;d;)e[--d].canSelect(this)||e.splice(d,1);return e},getSelectableItem:function(e){const d=
this.getSelectableItems(),h=this.itemSelectionId;let n=d.length;for(;n;){const c=d[--n];if(c[h]===e)return c}}})})(myt);
(r=>{const x=JS.Class,{View:v,SizeToParent:t}=r,l=r.TabSlider=new x("TabSlider",v,{include:[r.Selectable,r.Disableable,t],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(d,h){const n=this;let c;h.defaultPlacement="wrapper.container";h.percentOfParentWidth=100;h.expansionState="collapsed";h.tabId??(h.tabId=r.generateGuid());h.tabContainer??(h.tabContainer=d);h.selected??(h.selected=!1);h.buttonClass??(h.buttonClass=
r.SimpleButton);h.zIndex??(h.zIndex=0);h.buttonHeight??(h.buttonHeight=30);h.fillColorSelected??(h.fillColorSelected="#666");h.fillColorHover??(h.fillColorHover="#eee");h.fillColorActive??(h.fillColorActive="#ccc");h.fillColorReady??(h.fillColorReady="#fff");h.minContainerHeight??(h.minContainerHeight=100);h.layoutPaddingY??(h.layoutPaddingY=0);h.selected&&(c=!0,delete h.selected);n.callSuper(d,h);n.button=new n.buttonClass(n,{ignorePlacement:!0,zIndex:1,height:n.buttonHeight,focusIndicator:!0,groupId:n.parent.parent.groupId,
percentOfParentWidth:100,hoverColor:n.fillColorHover,activeColor:n.fillColorActive,readyColor:n.fillColorReady},[t,{doActivated:()=>{const g=n.tabContainer;n.isSelected()&&1!==g.maxSelected?g.deselect(n):g.select(n)},updateUI:function(){this.callSuper();n.selected&&-1!==n.tabContainer.maxSelected&&this.setBgColor(n.fillColorSelected);n.notifyButtonRedraw()}}]);d=n.wrapper=new v(n,{ignorePlacement:!0,y:n.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[t,{setHeight:function(g){this.callSuper(Math.round(g))},
setWidth:function(g){this.callSuper(g);this.inited&&this.container.setWidth(g)}}]);n._wrapperLayout=new r.SizeToChildren(d.container=new v(d),{axis:"y",paddingY:n.layoutPaddingY});n.constrain("__updateHeight",[d,"y",d,"height"]);c&&n.tabContainer.select(n);!0===h.disabled&&n.setDisabled(!0);n.setHeight(n.getCollapsedHeight())},setSelected:function(d){this.callSuper(d);this.button?.updateUI()},setTabId:function(d){this.tabId=d},setTabContainer:function(d){this.tabContainer=d},setLayoutPaddingY:function(d){this.layoutPaddingY=
d;this.inited&&this._wrapperLayout.setPaddingY(d)},setMinContainerHeight:function(d){this.minContainerHeight=d},setButtonClass:function(d){this.buttonClass=d},setFillColorSelected:function(d){this.fillColorSelected=d},setFillColorHover:function(d){this.fillColorHover=d},setFillColorActive:function(d){this.fillColorActive=d},setFillColorReady:function(d){this.fillColorReady=d},setButtonHeight:function(d){this.buttonHeight!==d&&(this.buttonHeight=d,this.button&&(this.button.setHeight(d),this.wrapper.setY(d)))},
setExpansionState:function(d){if(this.expansionState!==d){this.expansionState=d;this.inited&&this.fireEvent("expansionState",d);const h=this.wrapper;h&&("expanded"===d?(h.setMaskFocus(!1),h.setOverflow("auto")):"expanding"===d?h.setVisible(!0):"collapsed"===d?h.setVisible(!1):"collapsing"===d&&(h.setMaskFocus(!0),h.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(d){this.setHeight(this.wrapper.y+this.wrapper.height)},
expand:function(d){const h=this,n=h.wrapper;d-=h.getCollapsedHeight();h.setExpansionState("expanding");n.stopActiveAnimators();if(n.height!==d){const c=h.tabContainer.duration;1===c?(n.setHeight(d),h.setExpansionState("expanded")):n.animate({attribute:"height",to:d,duration:c}).next(g=>{h.setExpansionState("expanded")})}else h.setExpansionState("expanded")},collapse:function(){const d=this,h=d.wrapper;d.setExpansionState("collapsing");h.stopActiveAnimators();if(0!==h.height){const n=d.tabContainer.duration;
1===n?(h.setHeight(0),d.setExpansionState("collapsed")):h.animate({attribute:"height",to:0,duration:n}).next(c=>{d.setExpansionState("collapsed")})}else d.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});r.TextTabSlider=new x("TextTabSlider",
l,{initNode:function(d,h){h.labelTextColorChecked??(h.labelTextColorChecked="#fff");h.labelTextColor??(h.labelTextColor="#333");this.callSuper(d,h);this.button.label=new r.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(d){this.labelTextColorChecked=d},setLabelTextColor:function(d){this.labelTextColor=d},setText:function(d){this.text!==d&&(this.text=d,this.button?.label?.setText(d))},
notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const e=r.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[r.SelectionManager],extend:{SPACING:1},initNode:function(d,h){const n=this;n._tabSliders=[];h.defaultPlacement="container";h.spacing??(h.spacing=e.SPACING);h.overflow??(h.overflow="autoy");h.itemSelectionId??
(h.itemSelectionId="tabId");h.maxSelected??(h.maxSelected=1);h.duration??(h.duration=500);n.updateLayout=r.debounce(n.updateLayout);n.callSuper(d,h);d=n.container=new v(n,{ignorePlacement:!0,percentOfParentWidth:100},[t,{subnodeAdded:function(c){this.callSuper(c);c instanceof l&&(n._tabSliders.push(c),n.attachTo(c,"updateLayout","selected"))},subnodeRemoved:function(c){if(c instanceof l){const g=n._tabSliders,a=g.indexOf(c);-1<a&&(n.detachFrom(c,"updateLayout","selected"),g.splice(a,1))}this.callSuper(c)}}]);
d.layout=new r.SpacedLayout(d,{axis:"y",spacing:n.spacing,collapseParent:!0});n.attachTo(n,"updateLayout","height")},setSpacing:function(d){this.spacing!==d&&(this.spacing=d,this.layout?.setSpacing(d))},setDuration:function(d){this.duration=d},updateLayout:function(d,h){d=this._tabSliders;for(var n=d.length,c=n,g=0,a=0,f=0;c;){var b=d[--c];b.visible&&(++f,b.selected?(g+=b.getMinimumExpandedHeight(),a+=b.getPreferredExpandedHeight()):(b=b.getCollapsedHeight(),g+=b,a+=b))}c=this.container.layout;f=
c.inset+c.outset+c.spacing*(f-1);a+=f;c=this.height;g=g+f>c;f=a>c;b=this.duration;a-=c;0<h&&this.setDuration(h);for(c=n;c;)if(n=d[--c],n.visible)if(n.selected){let q;if(g)q=n.getMinimumExpandedHeight();else if(f){const w=n.getPreferredExpandedHeight(),k=n.getMinimumExpandedHeight();q=w-a;k>q?(a-=w-k,q=k):a=0}else q=n.getPreferredExpandedHeight();n.expand(q)}else n.collapse();0<h&&this.setDuration(b)}})})(myt);
(r=>{const x=l=>{const e=[];switch(l.tabContainer.location){case "top":e.push("TopLeft","TopRight");break;case "bottom":e.push("BottomLeft","BottomRight");break;case "left":e.push("TopLeft","BottomLeft");break;case "right":e.push("TopRight","BottomRight")}for(const d of e)l["setRounded"+d+"Corner"](l.cornerRadius||0)},v=r.Tab=new JS.Class("Tab",r.SimpleTextButton,{include:[r.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(l,e){e.tabId??(e.tabId=r.generateGuid());e.tabContainer??(e.tabContainer=
l);let d;e.selected&&(d=!0,delete e.selected);e.inset??(e.inset=v.INSET);e.outset??(e.outset=v.OUTSET);e.selectedColor??(e.selectedColor="#fff");e.hoverColor??(e.hoverColor="#eee");e.activeColor??(e.activeColor="#aaa");e.readyColor??(e.readyColor="#ccc");e.labelTextSelectedColor??(e.labelTextSelectedColor="#333");e.height??(e.height=24);e.focusIndicator??(e.focusIndicator=!1);e.cornerRadius??(e.cornerRadius=6);this.callSuper(l,e);d&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(l){this.tabId=l},setTabContainer:function(l){this.tabContainer=l},setSelectedColor:function(l){this.selectedColor=l},setLabelTextColor:function(l){this.labelTextColor=l},setCornerRadius:function(l){this.cornerRadius=l;this.inited&&x(this)},setLabelTextSelectedColor:function(l){this.labelTextSelectedColor=l;this.inited&&this.selected&&this.textView.setTextColor(l)},setSelected:function(l){this.callSuper(l);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),t=r.TabContainer=new JS.Module("TabContainer",{include:[r.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(l,e){this.__tabs=[];e.spacing??(e.spacing=t.SPACING);e.inset??(e.inset=t.INSET);e.location??(e.location="top");e.itemSelectionId??
(e.itemSelectionId="tabId");e.maxSelected??(e.maxSelected=1);const d=e.collapse??!0;delete e.collapse;this.callSuper(l,e);this.layout=new r.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:d})},setLocation:function(l){this.location=l},setSpacing:function(l){this.spacing!==l&&(this.spacing=l,this.layout?.setSpacing(l))},setInset:function(l){this.inset!==l&&(this.inset=l,this.layout?.setInset(l))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(l){this.callSuper(l);if(l.isA(v))switch(this.__tabs.push(l),this.location){case "top":l.setValign("bottom");break;case "bottom":l.setValign("top");break;case "left":l.setAlign("right");break;case "right":l.setAlign("left")}},subnodeRemoved:function(l){if(l.isA(v)){const e=this.__tabs,d=e.indexOf(l);-1<d&&e.splice(d,1)}this.callSuper(l)}})})(myt);
(r=>{const x=JS.Class,v=Math.min,t=Array.isArray,{SizeToDom:l,View:e,Disableable:d,KeyObservable:h,Button:{FOCUS_SHADOW:n},global:{keys:c}}=r,g=(k,u,B)=>{k[B]!==u&&(k[B]=u,k.getIDS()[B]=u+"px",k.inited&&(k.fireEvent(B,u),k.sizeViewToDom()))},a=(k,u,B)=>{k[u]!==B&&(k.getIDE()[u]=k[u]=B,k.inited&&k.fireEvent(u,B))},f=r.NativeInputWrapper=new x("NativeInputWrapper",e,{include:[d,r.InputObservable],initNode:function(k,u){u.tagName??(u.tagName="input");u.focusable??(u.focusable=!0);this.callSuper(k,u);
this.addDomClass("mytNativeInput")},createOurDomElement:function(k){k=this.callSuper(k);this.inputType&&((t(k)?k[1]:k).type=this.inputType);return k},setDisabled:function(k){this.disabled!==k&&(this.getIDE().disabled=k,this.callSuper(k))},setValue:function(k){this.value!==k&&(this.value=k,this.setDomValue(k),this.inited&&this.fireEvent("value",k))},getDomValue:function(){return this.getIDE().value},setDomValue:function(k){const u=this.getIDE();u.value!==k&&(u.value=k)}}),b=r.InputSelectOption=new x("InputSelectOption",
e,{include:[d,r.Selectable],createOurDomElement:k=>document.createElement("option"),setSelected:function(k){k=this.valueFromEvent(k);const u=this.getIDE();u.selected!==k&&(u.selected=k)},setDisabled:function(k){this.disabled!==k&&(this.getIDE().disabled=k,this.callSuper(k))},setValue:function(k){a(this,"value",k)},setLabel:function(k){this.label!==k&&(this.getIDE().textContent=this.label=k,this.inited&&this.fireEvent("label",k))},isSelected:function(){return this.getIDE().selected},canSelect:function(k){return!this.disabled&&
!this.getIDE().selected&&this.parent===k},canDeselect:function(k){return!this.disabled&&this.getIDE().selected&&this.parent===k}}),q=r.BaseInputText=new x("BaseInputText",f,{include:[r.TextSupport],initNode:function(k,u){u.bgColor??(u.bgColor="transparent");u.spellcheck??(u.spellcheck=!1);this.callSuper(k,u);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(k){this.callSuper(k);this.setValue(k)},
setSpellcheck:function(k){a(this,"spellcheck",k)},setMaxLength:function(k){a(this,"maxLength",null==k||0>k?void 0:k)},setAllowedChars:function(k){this.allowedChars=k},setPlaceholder:function(k){a(this,"placeholder",k)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(n)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(k){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(k){const u=
k.value,B=this.allowedChars;B&&!B.includes(h.getKeyFromEvent(k))&&u.preventDefault();this.filterInputPress(u)},filterInput:k=>k,filterInputPress:k=>{},__syncToDom:function(k){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const k=document.selection.createRange();k.moveStart("character",-this.getDomValue().length);return k.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(k,u){if(null==u||k===u){if(this.getCaretPosition()===k)return;
u=k}var B=this.getIDE();B.setSelectionRange?B.setSelectionRange(k,u):B.createTextRange&&(B=B.createTextRange(),B.collapse(!0),B.moveEnd("character",u),B.moveStart("character",k),B.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const k=this.getIDE();return{start:k.selectionStart,startElem:k,end:k.selectionEnd,endElem:k}},setSelection:function(k){k&&
this.setCaretPosition(k.start,k.end)},saveSelection:function(k){this._selRange=k||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),w=r.InputText=new x("InputText",q,{include:[r.SizeHeightToDom],initNode:function(k,u){this.inputType=!0===u.password?"password":"text";this.callSuper(k,u);this.setCaretToEnd()},setPassword:function(k){this.set("password",k,!0);this.inited&&(this.getIDE().type=k?"password":"text")}});r.InputTextMouseFixMixin=new JS.Module("InputTextMouseFixMixin",
{initNode:function(k,u){this.callSuper(k,u);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},createDomHandler:function(k,u,B){return"mousedown"===B||"mouseup"===B?this.createStandardDomHandler(k,u,B,r.MouseObservable,!1):this.callSuper(k,u,B)},doMouseDown:k=>{},doMouseUp:k=>{}});r.EditableText=new x("EditableText",q,{include:[l],initNode:function(k,u){u.tagName??(u.tagName="div");u.inputType=null;u.whiteSpace??(u.whiteSpace="pre");u.contentEditable??(u.contentEditable=
!0);this.callSuper(k,u);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(k){g(this,k,"minWidth")},setMinHeight:function(k){g(this,k,"minHeight")},setPadding:function(k){this.setPaddingTop(k);this.setPaddingRight(k);this.setPaddingBottom(k);this.setPaddingLeft(k)},setPaddingTop:function(k){g(this,k,"paddingTop")},setPaddingRight:function(k){g(this,k,"paddingRight")},
setPaddingBottom:function(k){g(this,k,"paddingBottom")},setPaddingLeft:function(k){g(this,k,"paddingLeft")},setContentEditable:function(k){a(this,"contentEditable",k)},filterInputPress:function(k){const u=this.maxLength;0<=u&&this.getCharacterCount()===u&&k.preventDefault();this.callSuper(k)},getDomValue:function(){return this.getIDE().innerHTML},setDomValue:function(k){const u=this.getIDE();u.innerHTML!==k&&(u.innerHTML=k,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(k){h.isEnterKeyEvent(k)&&
(k.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(k){this.callSuper(k);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(k,u){if(null==u||k===
u){if(this.getCaretPosition()===k)return;u=k}this.saveSelection({start:k,startElem:this.getIDE().firstChild,end:u,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(k){this.saveSelection();return!0},getSelection:function(){let k;if(window.getSelection){const u=window.getSelection();if(0<u.rangeCount){if(u.extentNode===this.getIDE())return;k=u.getRangeAt(0)}}else document.selection&&(k=document.selection.createRange());return{start:k?
k.startOffset:0,startElem:k?k.startContainer:this.getIDE().firstChild,end:k?k.endOffset:0,endElem:k?k.endContainer:this.getIDE().firstChild}},setSelection:function(k){if(k){const {startElem:u,endElem:B}=k;if(u&&u.parentNode&&B&&B.parentNode){const I=document.createRange();I.setStart(u,v(k.start,u.length));I.setEnd(B,v(k.end,B.length));window.getSelection?(k=window.getSelection(),0<k.rangeCount&&k.removeAllRanges(),k.addRange(I)):document.selection&&I.select()}}}});r.InputTextArea=new x("InputTextArea",
q,{initNode:function(k,u){u.tagName??(u.tagName="textarea");u.inputType=null;u.resize??(u.resize="none");u.wrap??(u.wrap="soft");this.callSuper(k,u)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(k){const u=this;u.resize!==k&&(k=u.resize=u.getIDS().resize=k||"none",u.inited&&u.fireEvent("resize",k),"none"!==k&&(u.__resizeObserver??(u.__resizeObserver=new ResizeObserver(()=>{u.doResize()}))).observe(u.getIDE()))},setWrap:function(k){a(this,
"wrap",k)},doResize:function(){const k=this.resize;"both"!==k&&"horizontal"!==k||l.sizeWidth(this);"both"!==k&&"vertical"!==k||l.sizeHeight(this)}});r.ComboBox=new x("ComboBox",w,{include:[r.Activateable,r.KeyActivation,r.ListViewAnchor],initNode:function(k,u){this.filterItems=!0;u.activationKeys??(u.activationKeys=[c.CODE_ENTER,c.CODE_ESC,c.CODE_ARROW_UP,c.CODE_ARROW_DOWN]);u.bgColor??(u.bgColor="#fff");u.borderWidth??(u.borderWidth=1);u.borderStyle??(u.borderStyle="solid");u.floatingAlignOffset??
(u.floatingAlignOffset=u.borderWidth);u.fullItemConfig??(u.fullItemConfig=[]);u.listViewAttrs={...u.listViewAttrs,maxHeight:u.listViewAttrs?.maxHeight??99};this.callSuper(k,u)},setFullItemConfig:function(k){this.fullItemConfig=k},setFilterItems:function(k){this.filterItems=k},__syncToDom:function(k){const u=this.value;this.callSuper(k);u!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(k){const u=this.getFloatingPanel(k);if(u){let I;if(this.filterItems){I=[];var B=this.value;B=null==
B?"":(""+B).toLowerCase();const z=this.fullItemConfig,C=z.length;for(let J=0;C>J;){const M=z[J++],O=M.attrs.text.toLowerCase(),m=O.indexOf(B);0===m?O!==B&&I.push(M):0<m&&I.push(M)}}else I=this.fullItemConfig;0<I.length?(u.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(I),this.callSuper(k)):this.hideFloatingPanel(k)}},doItemActivated:function(k){this.setValue(null==k.value?k.text:k.value);this.callSuper(k)},doActivated:function(){this.toggleFloatingPanel()}});r.InputSelect=new x("InputSelect",
f,{include:[l],initNode:function(k,u){u.tagName??(u.tagName="select");u.inputType=null;u.multiple??(u.multiple=!1);u.size??(u.size=u.multiple?4:1);this.callSuper(k,u);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(k){a(this,"multiple",k)},setSize:function(k){a(this,"size",k)},setOptions:function(k){this.destroyAllOptions();if(t(k))for(const u of k)this.addOption(u)},getOptions:function(){return this.getSubviews().slice()},setValue:function(k){t(k)&&r.areArraysEqual(k,
this.value)||this.value===k||(this.value=k,this.inited&&this.fireEvent("value",k))},subviewAdded:function(k){k instanceof b||(r.dumpStack("Subview unsupported. Destroying it"),k.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(n)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(k=>k.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(k=>
k.value)},getOptionForValue:function(k){return this.getOptions().find(u=>u.value===k)},addOption:function(k){return new b(this,k)},destroyAllOptions:function(){for(const k of this.getOptions())k.destroy()},destroyOptionWithValue:function(k){if(k=this.getOptionForValue(k))if(k.destroy(),k.destroyed)return!0;return!1},deselectAll:function(){let k=!1;for(const u of this.getOptions())u.isSelected()&&(u.setSelected(!1),k=!0);k&&this.__doChanged()},selectValues:function(k){t(k)||(k=[k]);for(const u of k)this.selectValue(u)},
selectValue:function(k){this.select(this.getOptionForValue(k))},select:function(k){k?.canSelect(this)&&(k.setSelected(!0),this.__syncToDom())},deselectValue:function(k){this.deselect(this.getOptionForValue(k))},deselect:function(k){k?.canDeselect(this)&&(k.setSelected(!1),this.__syncToDom())},__doChanged:function(k){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(r=>{const x=JS.Module,v=Math.round;var t=r.ValueComponent=new x("ValueComponent",{initNode:function(e,d){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(e,d)},setValueFilter:function(e){this.valueFilter=e;this.inited&&e&&this.setValue(this.value)},setValue:function(e){this.valueFilter&&(e=this.valueFilter(e));this.value!==e&&(this.value=e,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(e,d){const h=this.valueFilter;
this.setValueFilter(h?"last"===d?n=>e(h(n)):n=>h(e(n)):e)}});const l=r.RangeComponent=new x("RangeComponent",{include:[t],setLowerValue:function(e){this.setValue({lower:e,upper:this.value&&void 0!==this.value.upper?this.value.upper:e})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(e){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:e,upper:e})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(e){if(e){var d=
this.value;const c=d?d.lower:void 0;d=d?d.upper:void 0;this.valueFilter&&(e=this.valueFilter(e));if(e.lower!==c||e.upper!==d){var h;(h=e).lower??(h.lower=e.upper);var n;(n=e).upper??(n.upper=e.lower);void 0!==e.lower&&void 0!==e.upper&&e.lower>e.upper&&(h=e.lower,e.lower=e.upper,e.upper=h);this.value=e;this.inited&&(this.fireEvent("value",this.getValue()),e.lower!==c&&this.fireEvent("lowerValue",e.lower),e.upper!==d&&this.fireEvent("upperValue",e.upper))}}else this.callSuper(e)},getValueCopy:function(){const e=
this.value;return{lower:e.lower,upper:e.upper}}});t=r.BoundedValueComponent=new x("BoundedValueComponent",{include:[t],initNode:function(e,d){const h=this;h.appendToEarlyAttrs("snapToInt","minValue","maxValue");d.snapToInt??(d.snapToInt=!0);d.valueFilter||(d.valueFilter=n=>{var c=h.maxValue;if(null!=c&&n>c)return c;c=h.minValue;return null!=c&&n<c?c:n});h.callSuper(e,d)},setSnapToInt:function(e){this.snapToInt!==e&&(this.snapToInt=e,this.inited&&(this.fireEvent("snapToInt",e),e&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.minValue!==e){const d=this.maxValue;null!=d&&e>d&&(e=d);this.minValue!==e&&(this.minValue=e,this.inited&&(this.fireEvent("minValue",e),this.setValue(this.value)))}},setMaxValue:function(e){this.snapToInt&&null!=e&&(e=v(e));if(this.maxValue!==e){const d=this.minValue;null!=d&&e<d&&(e=d);this.maxValue!==e&&(this.maxValue=e,this.inited&&(this.fireEvent("maxValue",e),this.setValue(this.value)))}},
setValue:function(e){this.callSuper(this.snapToInt&&null!=e&&!isNaN(e)?v(e):e)}});r.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[t,l],initNode:function(e,d){const h=this;d.valueFilter||(d.valueFilter=n=>{if(n){const c=h.maxValue,g=h.minValue;null!=c&&n.upper>c&&(n.upper=c);null!=g&&n.lower<g&&(n.lower=g)}return n});h.callSuper(e,d)},setValue:function(e){this.snapToInt&&null!=e&&(null==e.lower||isNaN(e.lower)||(e.lower=v(e.lower)),null==e.upper||isNaN(e.upper)||(e.upper=v(e.upper)));
this.callSuper(e)}})})(myt);
(r=>{const x=v=>{const t=v.label??"";v.setText('<i class="'+("solid"===v.checkboxStyle?"fas":"far")+" fa-"+(v.isChecked()?"check-":"")+'square"></i>'+(0<t.length?" "+t:""))};r.Checkbox=new JS.Class("Checkbox",r.Text,{include:[r.SimpleButtonStyle,r.ValueComponent],initNode:function(v,t){this.appendToEarlyAttrs("userUnselectable");t.value??(t.value=!1);t.focusIndicator??(t.focusIndicator=!1);t.checkboxStyle??(t.checkboxStyle="outline");t.activeColor??(t.activeColor="inherit");t.hoverColor??(t.hoverColor=
"inherit");t.readyColor??(t.readyColor="inherit");this.callSuper(v,t);r.FontAwesome.registerForNotification(this);x(this)},setValue:function(v){this.value!==v&&(this.callSuper(v),this.inited&&x(this))},setLabel:function(v){this.label!==v&&(this.set("label",v,!0),this.inited&&x(this))},setCheckboxStyle:function(v){this.checkboxStyle!==v&&(this.set("checkboxStyle",v,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(v,
t=1){this.setOpacity(t);this.setTextColor(v)}})})(myt);
(r=>{let x;const {Class:v,Module:t}=JS,l=console.warn,{KeyObservable:e,UpdateableUI:d,dumpStack:h,global:n}=r,c=n.focus,g=n.keys,a={},f=(m,p)=>{if(m){const y=m.id;m.id?p(y):h("No ID")}else h("No processor")},b=m=>{f(m,p=>{a[p]=m})},q=m=>{const p=r.BAG.getGroup("selected",m.groupId);if(p){const y=p.getNodes();m=m.value;let A=y.length;for(;A;){const E=y[--A];if(E.optionValue===m){p.setTrue(E);break}}}},w=m=>{if(m.groupId){const p=r.BAG.getGroup("selected",m.groupId);p&&m.syncTo(p,"__syncValue","trueNode")}},
k=(m,p)=>{const y=[],A=m.__v;if(A)for(const E of A)p=E.isFormValid(m,null,y)&&p;m.setErrorMessages(y);m.setIsValid(p);return p},u=(m,p,y)=>{if(m=m.__vp)for(const A of m)A[y]&&(p=A.process(p));return p},B=r.ValueProcessor=new v("ValueProcessor",{initialize:function(m,p,y,A){this.id=m;this.runForDefault=!!p;this.runForRollback=!!y;this.runForCurrent=!!A},process:m=>m}),I=r.ToNumberValueProcessor=new v("ToNumberValueProcessor",B,{process:m=>{if(null==m||""===m||"-"===m)return m;const p=Number(m);return isNaN(p)?
m:p}}),z=r.TrimValueProcessor=new v("TrimValueProcessor",B,{initialize:function(m,p,y,A,E){this.callSuper(m,p,y,A);this.trim=E},process:function(m){m+="";switch(this.trim){case "start":case "left":return m.trimStart();case "end":case "right":return m.trimEnd();default:return m.trim()}}}),C=r.UndefinedValueProcessor=new v("UndefinedValueProcessor",B,{initialize:function(m,p,y,A,E){this.callSuper(m,p,y,A);this.defaultValue=E},process:function(m){return void 0===m?this.defaultValue:m}}),J=r.Form=new t("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(m,p){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(m,p);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(m){this.set("errorMessages",m,!0)},getFullId:function(){const m=[this.id];let p=this.form;for(;p&&p.id;)m.unshift(p.id),
p=p.form;return m.join(".")},setId:function(m){if(this.id!==m){const p=this.id;this.id=m;(m=this.form)&&this.inited&&(m.removeSubForm(p),m.addSubForm(this))}},setForm:function(m){if(this.form!==m){const p=this.form;this.form=m;p?.removeSubForm(this.id);this.inited&&m?.addSubForm(this)}},setIsValid:function(m){this.isValid=m;this.inited&&this.fireEvent("isValid",m);const p=this.form;p&&!this._lockCascade&&(m?p.verifyValidState(this):p.notifySubFormInvalid())},setIsChanged:function(m){if(this.isChanged!==
m){this.isChanged=m;this.inited&&this.fireEvent("isChanged",m);const p=this.form;p&&!this._lockCascade&&(m?p.notifySubFormChanged():p.verifyChangedState(this))}},setValidators:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=n.validators.getValidator(y),m[p]||m.splice(p,1))}this.__v=m},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(M))return this.value;const m={},p=this.__sf;for(const y in p)m[y]=p[y].getValue();return m},setValue:function(m){this.callSuper?.(m);
if("object"===typeof m&&!this.isA(M))for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setValue(m[p]):l("ID in setValue for missing subform",p)}this.form?.notifyValueChanged(this);return m},getDefaultValue:function(){const m={};let p=this.__sf;for(const y in p)m[y]=p[y].getDefaultValue();return m},setDefaultValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setDefaultValue(m[p]):l("ID in setDefaultValue for missing subform",p)}return m},getRollbackValue:function(){const m=
{},p=this.__sf;for(const y in p)m[y]=p[y].getRollbackValue();return m},setRollbackValue:function(m){if("object"===typeof m)for(const p in m){const y=this.getSubForm(p);y?m[p]=y.setRollbackValue(m[p]):l("ID in setRollbackValue for missing subform",p)}return m},addAccelerator:function(m,p){this.__acc[m]=p},removeAccelerator:function(m){delete this.__acc[m]},invokeAccelerator:function(m,p){this.__acc[m]?.call(this,p??null)},addValidator:function(m){m&&this.__v.push(m)},removeValidator:function(m){if(m){const p=
this.__v;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(m){const p=m.id;null!=this.getSubForm(p)?l("ID in use for subform, add aborted",p,m):(m.setForm(this),this.__sf[p]=m,m.isChanged&&this.notifySubFormChanged(),m.isValid||this.notifySubFormInvalid())},removeSubForm:function(m){const p=this.getSubForm(m);p&&(p.setForm(null),delete this.__sf[m],this.verifyChangedState(),this.verifyValidState());
return p},getSubForm:function(m){return this.__sf[m]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(m){m&&this.doValidation();const p=[];(function E(A){if(A.isA(M))A.isValid||p.push(A.getFullId());else{A=A.getSubForms();for(const F in A)E(A[F])}})(this);return p},getAllErrorMessages:function(){const m=this.__sf;let p=(this.errorMessages??[]).slice();for(const y in m)p.push(...m[y].getAllErrorMessages());return p},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(m){const p=
this.__sf;let y=!0;for(const A in p){const E=p[A];E!==m&&(y=E.isValid&&y)}return k(this,y)},doValidation:function(){const m=this.__sf;let p=!0;for(const y in m)p=m[y].doValidation()&&p;this._lockCascade=!0;p=k(this,p);this._lockCascade=!1;return p},notifyValueChanged:function(m){this.form?.notifyValueChanged(m)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(m){const p=this.__sf;let y=!1;for(const A in p){const E=p[A];E!==m&&(y=E.isChanged||y)}this.setIsChanged(y);
return y},setup:function(m,p,y){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;m??={};p??={};y??={};const A=this.__sf;for(const E in A)A[E].setup(m[E],p[E],y[E])},resetForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const m=this.__sf;for(const p in m)m[p].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const m={},p=this.__sf;for(const y in p){const A=p[y];A.isChanged&&(m[y]=A.getChangedValue())}return m}}),M=r.FormElement=new t("FormElement",{include:[J],initNode:function(m,p){this.__vp=[];this.callSuper(m,p)},getValue:function(){return u(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(m){void 0===m&&(m=this.getRollbackValue());this.value!==m&&
(this.callSuper(m),this.verifyChangedState());return m},getDefaultValue:function(){return u(this,this.defaultValue,"runForDefault")},setDefaultValue:function(m){this.defaultValue!==m&&(this.defaultValue=m,this.inited&&this.fireEvent("defaultValue",m),this.verifyChangedState());return m},getRollbackValue:function(){return u(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(m){void 0===m&&(m=this.getDefaultValue());this.rollbackValue!==m&&(this.rollbackValue=m,this.inited&&this.fireEvent("rollbackValue",
m),this.verifyChangedState());return m},setValueProcessors:function(m){let p=m.length;for(;p;){const y=m[--p];"string"===typeof y&&(m[p]=a[y],m[p]||m.splice(p,1))}this.__vp=m},addValueProcessor:function(m){this.__vp.push(m)},removeValueProcessor:function(m){if(m){const p=this.__vp;let y=p.length;for(;y;){const A=p[--y];if(A.id===m)return p.splice(y,1),A}}},addSubForm:m=>{h("addSubForm unsupported on FormElement")},getSubForm:m=>{h("getSubForm unsupported on FormElement")},removeSubForm:m=>{h("removeSubForm unsupported on FormElement")},
verifyChangedState:function(m){m=this.getValue()!==this.getRollbackValue();this.setIsChanged(m);return m},setup:function(m,p,y){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(m);this.setRollbackValue(p);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(y)},resetForm:function(){this._lockCascade=!0;const m=this.getDefaultValue();this.setRollbackValue(m);this.setValue(m);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),O=r.FormInputTextMixin=new t("FormInputTextMixin",{include:[M,d],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";p.bgColor??(p.bgColor="#fff");p.borderWidth??(p.borderWidth=1);p.borderStyle??(p.borderStyle="solid");this.callSuper(m,p);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=m},setActionRequiredColor:function(m){this.actionRequiredColor=
m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":c.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(m){e.isEnterKeyEvent(m)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(m){e.isEscKeyEvent(m)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
r.RootForm=new t("RootForm",{include:[J],initNode:function(m,p){this.callSuper(m,p);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:m=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});r.FormCheckbox=new v("FormCheckbox",r.Checkbox,{include:[M],initNode:function(m,p){this.rollbackValue=this.defaultValue=
!1;this.callSuper(m,p)}});r.FormComboBox=new v("FormComboBox",r.ComboBox,{include:[M,d],initNode:function(m,p){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(m,p);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(m){this.validateWhen=m},setAcceleratorScope:function(m){this.acceleratorScope=m},setErrorColor:function(m){this.errorColor=
m},setActionRequiredColor:function(m){this.actionRequiredColor=m},setNormalColor:function(m){this.normalColor=m},setIsChanged:function(m){this.callSuper(m);this.inited&&this.updateUI()},setIsValid:function(m){this.callSuper(m);this.inited&&this.updateUI()},setValue:function(m){m=this.callSuper(m);const p=this.validateWhen;"key"!==p&&"blurWithKeyFix"!==p||this.verifyValidState();return m},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":c.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(m){this._isShown=!0},notifyPanelHidden:function(m){this._isShown=!1},doActivationKeyDown:function(m,p){m!==g.CODE_ESC||this._isShown?this.callSuper(m,p):this.invokeAccelerator("reject")},doActivationKeyUp:function(m){m!==
g.CODE_ENTER||this._isShown?this.callSuper(m):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const m=this.validateWhen;"blur"!==m&&"blurWithKeyFix"!==m||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});r.FormEditableText=new v("FormEditableText",r.EditableText,{include:[O],__hndlKeyDown:function(m){"nowrap"===this.whitespace&&this.callSuper(m)}});r.FormInputText=new v("FormInputText",
r.InputText,{include:[O]});r.FormInputTextArea=new v("FormInputTextArea",r.InputTextArea,{include:[O],__hndlKeyDown:m=>{}});r.FormInputSelect=new v("FormInputSelect",r.InputSelect,{include:[M],setValue:function(m){if(!this.__abortSetValue)return m=this.callSuper(m),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(m),this.__abortSetValue=!1,this.verifyValidState(),m}});r.FormRadioGroup=new v("FormRadioGroup",r.Node,{include:[r.ValueComponent,M],initNode:function(m,p){p.groupId??(p.groupId=
r.generateGuid());this.callSuper(m,p);void 0!==this.value&&q(this);w(this)},setValue:function(m){m=this.callSuper(m);this.inited&&q(this);return m},setGroupId:function(m){if(this.groupId!==m){if(this.groupId){const p=r.BAG.getGroup("selected",this.groupId);p&&this.detachFrom(p,"__syncValue","trueNode")}this.groupId=m;this.inited&&w(this)}},__syncValue:function(m){m=m.value;this.setValue(m?m.optionValue:null)}});r.UseOtherFieldIfEmptyValueProcessor=new v("UseOtherFieldIfEmptyValueProcessor",B,{initialize:function(m,
p,y,A,E){this.callSuper(m,p,y,A);this.otherField=E},process:function(m){return null==m||""===m?this.otherField.getValue():m}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){b(x=new C("undefToEmpty",!0,!0,!0,""));b(new I("toNumber",!0,!0,!0));b(new z("trimLeft",!0,!0,!0,"left"));b(new z("trimRight",!0,!0,!0,"right"));b(new z("trimBoth",!0,!0,!0,"both"));n.register("valueProcessors",this)},getValueProcessor:m=>a[m],register:b,unregister:m=>{f(m,p=>{a[p]&&delete a[p]})}})})(myt);
(r=>{const x=JS.Class,v=r.dumpStack,t={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},l=(c,g)=>{c[g](c,"doDragOver","dragover",!1);c[g](c,"doDragEnter","dragenter",!1);c[g](c,"doDragLeave","dragleave",!1);c[g](c,"doDrop","drop",!1)},e=r.DragDropSupport=new JS.Module("DragDropSupport",{include:[r.DragDropObservable],initNode:function(c,g){this.callSuper(c,g);this.disabled||this.setupDragListeners()},setDisabled:function(c){this.disabled!==
c&&(this.getIDE().disabled=c,this.callSuper(c),this.inited&&(c?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){l(this,"attachToDom")},teardownDragListeners:function(){l(this,"detachFromDom")},doDragOver:c=>{},doDragEnter:c=>{},doDragLeave:c=>{},doDrop:function(c){this.handleFiles(c.value.dataTransfer.files,c)},handleFiles:function(c,g){if(void 0!==c){let a=c.length;for(;a;){const f=this.filterFiles(c[--a]);f&&this.handleDroppedFile(f,g)}}else v("No File API")},
filterFiles:c=>c,handleDroppedFile:(c,g)=>{}}),d=r.FileInput=new x("FileInput",r.NativeInputWrapper,{initNode:function(c,g){this.inputType="file";this.callSuper(c,g);this.attachToDom(this,"_onChange","change")},setAccept:function(c){this.set("accept",c,!0);this.getIDE().accept=this.accept},setMaxFiles:function(c){this.maxFiles!==c&&(this.set("maxFiles",c,!0),this.getIDE().multiple=1<this.maxFiles)},clearValue:function(){this.getIDE().value=""},_onChange:c=>{}}),h=r.Uploader=new x("Uploader",r.View,
{include:[e,r.Disableable,r.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(c,g,a)=>{if(void 0!==FileReader){const f=new FileReader;f.onload=b=>{g(b.target.result)};switch(a){case "text":f.readAsText(c);break;case "arrayBuffer":f.readAsArrayBuffer(c);break;default:f.readAsDataURL(c)}}},isSameFile:(c,g)=>null!=c&&null!=g&&c.name===g.name&&c.type===g.type&&c.size===g.size,createFile:c=>{const g=(new r.URI(c)).file;return{name:g,serverPath:c,size:-1,type:t[r.getExtension(g)]}}},initNode:function(c,
g){const a=this;a.files=[];g.requestFileParam??(g.requestFileParam="file");g.maxFiles??(g.maxFiles=-1);g.responseIsRaw??(g.responseIsRaw=!1);const f=g.accept;delete g.accept;a.callSuper(c,g);a.fileInput=new d(a,{maxFiles:a.maxFiles,accept:f,percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:a.disabled,overflow:"hidden"},[r.SizeToParent,{_onChange:function(b){a.handleFiles(this.getIDE().files,b)}}])},setAccept:function(c){this.fileInput?.setAccept(this.accept)},getAccept:function(){return this.fileInput?.accept},
setMaxFiles:function(c){this.fileInput?.setMaxFiles(this.maxFiles)},getMaxFiles:function(){return this.fileInput?.maxFiles},setValue:function(c){this.clearFiles();if(c){Array.isArray(c)||(c=[c]);for(const g of c)this.addFile(h.createFile(g))}return this.callSuper?this.callSuper(c):c},getValue:function(){return this.value},setDisabled:function(c){this.callSuper(c);this.fileInput?.setDisabled(c)},setUploadUrl:function(c){this.set("uploadUrl",c,!0)},setRequestFileParam:function(c){this.set("requestFileParam",
c,!0)},setResponseIsRaw:function(c){this.set("responseIsRaw",c,!0)},bringSubviewToFront:function(c){c===this.fileInput?this.callSuper(c):this.sendSubviewBehind(c,this.fileInput)},subviewAdded:function(c){this.callSuper(c);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(c,g){this.addFile(c)},filterFiles:function(c){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:c},uploadFiles:function(c,g){c??=this.uploadUrl;const a=this.files;let f=a.length;for(;f;)this.uploadFile(a[--f],
c,g)},makeFetchOptionsForUpload:c=>({method:"POST",body:c}),uploadFile:function(c,g,a){const f=this,b=new FormData;b.append(a??f.requestFileParam,c,c.name.replaceAll("%20"," "));r.doFetch(g??f.uploadUrl,f.makeFetchOptionsForUpload(b),f.responseIsRaw,q=>{f.handleUploadSuccess(c,q)},q=>{f.handleUploadFailure(c,q)})},handleUploadSuccess:function(c,g){c[h.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(c,g);this.updateValueFromFiles()},handleUploadFailure:(c,g)=>{v("Upload failure:"+g.status+
":"+g.message)},parseServerPathFromResponse:(c,g)=>null,addFile:function(c){this.files.push(c);this.updateValueFromFiles();this.fireEvent("addFile",c)},removeFile:function(c){const g=this.files;let a=g.length;for(;a;)if(h.isSameFile(g[--a],c)){g.splice(a,1);this.updateValueFromFiles();this.fireEvent("removeFile",c);break}},updateValueFromFiles:function(){const c=[];var g=this.files;let a=g.length;for(;a;){const f=g[--a][h.FILE_ATTR_SERVER_PATH];f&&c.push(f)}g=c.length;(this.value=1===g?c[0]:0===g?
void 0:c)||this.fileInput.clearValue();this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const c=this.files;let g=c.length;for(;g;)this.removeFile(c[--g])}}),n=r.ImageUploader=new x("ImageUploader",h,{extend:{isImageFile:c=>/image/i.test(c.type)},initNode:function(c,g){g.maxFiles=1;this.callSuper(c,g)},filterFiles:function(c){if(n.isImageFile(c)||this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(c)}},
addFile:function(c){const g=this,a=n.isImageFile(c);g.callSuper(c);const f=g.imageView=new r.Image(g,{percentOfParentWidth:100,percentOfParentHeight:100,useNaturalSize:!1,imageSize:"contain",imagePosition:"center"},[r.SizeToParent]);f.file=c;const b=q=>{const w=new Image;w.onload=()=>{c.width=w.width;c.height=w.height;f&&!f.destroyed&&g.updateImage(c,f,w.src)};w.src=q};a?-1===c.size?b(c.serverPath):n.isImageFile(c)&&h.readFile(c,b):-1===c.size?g.updateImage(c,f,c.serverPath):h.readFile(c,q=>{g.updateImage(c,
f,q)});return f},removeFile:function(c){this.callSuper(c);const g=this.getSubviews();let a=g.length;for(;a;){const f=g[--a];if(h.isSameFile(f.file,c)){f.destroy();break}}},handleDroppedFile:function(c,g){this.callSuper(c,g);this.uploadFile(c,this.uploadUrl)},updateImage:function(c,g,a){this.nativeWidth=c.width;this.nativeHeight=c.height;g.setImageUrl(a)},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(r=>{const x=(v,t,l,e)=>{l=l.bind(v);"y"!==v.axis&&(l(t,e,"x"),l(t,e,"boundsWidth"));"x"!==v.axis&&(l(t,e,"y"),l(t,e,"boundsHeight"));l(t,e,"visible")};r.SizeToChildren=new JS.Class("SizeToChildren",r.Layout,{initNode:function(v,t){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(v,t)},setAxis:function(v){this.axis!==v&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=v,this.startMonitoringAllSubviews(),this.fireEvent("axis",v),this.update()):this.axis=v)},setPaddingX:function(v){this.paddingX!==
v&&(this.paddingX=v,this.inited&&(this.fireEvent("paddingX",v),this.update()))},setPaddingY:function(v){this.paddingY!==v&&(this.paddingY=v,this.inited&&(this.fireEvent("paddingY",v),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const t=this.parent;if(!t.isBeingDestroyed){const l=this.subviews;var v=l.length;const e=this.axis,d=Math.max;let h,n;if("y"!==e){h=v;for(n=0;h;){const c=l[--h];c.visible&&(n=d(n,c.x+(0<c.boundsWidth?c.boundsWidth:0)))}t.setWidth(n+
this.paddingX)}if("x"!==e){h=v;for(n=0;h;)v=l[--h],v.visible&&(n=d(n,v.y+(0<v.boundsHeight?v.boundsHeight:0)));t.setHeight(n+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(v){x(this,v,this.attachTo,"update")},stopMonitoringSubview:function(v){x(this,v,this.detachFrom,"update")}})})(myt);
(r=>{let x=0;const v=JS.Class,{View:t,SizeToParent:l,RootView:e}=r,d=r.Dimmer=new v("Dimmer",t,{include:[l],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(n,c){this.restoreFocus=!0;c.focusable=c.focusCage=!0;c.percentOfParentWidth??(c.percentOfParentWidth=100);c.percentOfParentHeight??(c.percentOfParentHeight=100);c.visible??(c.visible=!1);c.ignoreLayout??(c.ignoreLayout=!0);this.callSuper(n,c);this.overlay=new t(this,{ignorePlacement:!0,opacity:d.OPACITY,bgColor:d.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[l]);for(const g of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",g);e.setupCaptureDrop(this)},destroy:function(){e.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(n){this.restoreFocus=n},eatMouseEvent:n=>!0,show:function(){const n=r.global.focus;this.prevFocus=n.focusedView??n.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(n){this.visible&&
(this.setVisible(!1),!n&&this.restoreFocus&&this.prevFocus?.focus())}}),h=r.ModalPanel=new v("ModalPanel",d,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(n,c){const g={name:"content",ignorePlacement:!0},a={...g,align:"center",valign:"middle"};this.defaultPlacement="content";c.sizingStrategy??(c.sizingStrategy="children");c.marginTop??(c.marginTop=h.MARGIN_TOP);c.marginLeft??
(c.marginLeft=h.MARGIN_LEFT);c.marginBottom??(c.marginBottom=h.MARGIN_BOTTOM);c.marginRight??(c.marginRight=h.MARGIN_RIGHT);c.paddingX??(c.paddingX=h.PADDING_X);c.paddingY??(c.paddingY=h.PADDING_Y);this.callSuper(n,c);switch(this.sizingStrategy){case "children":new r.SizeToChildren(new t(this,a),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new t(this,{...g,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[l]);break;case "basic":new t(this,a);break;default:new t(this,g)}},setSizingStrategy:function(n){this.sizingStrategy=n},setMarginTop:function(n){this.marginTop=n},setMarginLeft:function(n){this.marginLeft=n},setMarginBottom:function(n){this.marginBottom=n},setMarginRight:function(n){this.marginRight=n},setPaddingX:function(n){this.paddingX=n},setPaddingY:function(n){this.paddingY=n},
show:function(){this.callSuper();x++},hide:function(n){this.callSuper(n);x=Math.max(0,x-1)}})})(myt);
(r=>{const x=t=>{t[t.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},v=t=>{const l=t.size,e=t.getIDS();t.setWidth(l);t.setHeight(l);e.width=e.height=l-2*t.borderWidth+"px"};r.Spinner=new JS.Class("Spinner",r.View,{initNode:function(t,l){this.lateAttrs=["spinColor"];l.visible??(l.visible=!1);l.borderWidth??(l.borderWidth=5);l.borderColor??(l.borderColor="#fff");l.borderStyle??(l.borderStyle="solid");l.spinColor??(l.spinColor="#000");this.callSuper(t,l);this.getIDS().borderRadius="50%";v(this);
x(this)},setSize:function(t){this.size!==t&&(this.size=t,this.inited&&v(this))},setSpinColor:function(t){this.spinColor!==t&&(this.getIDS().borderTopColor=this.spinColor=t,this.inited&&this.fireEvent("spinColor",t))},setBorderWidth:function(t){this.borderWidth!==t&&(this.callSuper(t),this.inited&&v(this))},setVisible:function(t){this.visible!==t&&(this.callSuper(t),this.inited&&x(this))}})})(myt);
(r=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),v=e=>{if(Array.isArray(e)){let d=e.length;if(0<d){e.unshift("fa");d++;e[1].startsWith("fa-")||(e[1]="fa-"+e[1]);3<=d&&(e[2]=x[e[2]]??"");if(3<d)for(let h=3;d>h;h++)e[h].startsWith("fa-")||(e[h]="fa-"+e[h]);return'<i class="'+e.join(" ")+'"></i>'}}r.dumpStack("Error making tag");console.error(e);return""},t=e=>{let d=e.properties;d=d?"string"===typeof d?d.split(" "):d.slice():[];d.unshift(e.icon,e.size);e.setHtml(v(d))},l=e=>{for(const d of["Free 400",
"Free 900","Brands 400"])r.registerForFontNotification(e,"Font Awesome 5 "+d)};r.FontAwesome=new JS.Class("FontAwesome",r.Markup,{extend:{makeTag:v,registerForNotification:l},initNode:function(e,d){this.size=0;this.icon="";this.callSuper(e,d);t(this);l(this)},setIcon:function(e){const d=this.icon;this.set("icon",e,!0);this.inited&&d!==e&&t(this)},setSize:function(e){const d=this.size;this.set("size",e,!0);this.inited&&d!==e&&t(this)},setProperties:function(e){this.properties=e;this.fireEvent("properties",
e);this.inited&&t(this)}});r.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(r=>{let x,v,t,l,e=0,d=0,h=0,n=255,c=[],g,a,f,b,q,w,k,u,B,I,z,C,J,M,O,m,p,y,A,E,F,K,L,R,N,T;const ea=JS.Class,{View:U,Text:la,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=r,{min:ha,max:ia}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(D,G){G.height??(G.height=17);G.paddingTop??(G.paddingTop=3);G.paddingLeft??
(G.paddingLeft=10);G.paddingRight??(G.paddingRight=10);G.activeColor??(G.activeColor="#bbb");G.hoverColor??(G.hoverColor="#ddd");G.readyColor??(G.readyColor="#ccc");G.domClass="mytButtonText";this.callSuper(D,G)}}),La=oa(["check"]),Ia=D=>{for(let G of D)7===G?.length&&(G+="ff"),Ha[G]=!0},Ha={},Ma=new ea("Swatch",U,{include:[wa],initNode:function(D,G){const H=G.width=G.height=16;G.border=Ga;G.domClass="mytCheckerboardPattern";const P=G.bgColor;this.callSuper(D,G);this.colorView=new U(this,{width:H,
height:H,bgColor:P});P===l&&(D=qa.makeColorFromHexString(l),new la(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>D.red+D.green+D.blue?"#fff":"#000"}))},setBgColor:function(D){this.colorView?.setBgColor(D);this.setTooltip(D)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=r.ColorPicker=new ea("ColorPicker",U,{initNode:function(D,G){x=this;x._isReady=!1;let H=G.color??"transparent";delete G.color;
t=G.alphaChannel??!1;delete G.alphaChannel;g=G.palette??[];Ia(g);delete G.palette;v="transparent"===H;x.callSuper(D,G);a=new U(x,{width:160,height:170});new Ca(a,{spacing:4,lineSpacing:4});f=new U(x,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(P,Q){f.callSuper(f.x,f.y);const V=this.getPagePosition();d=parseFloat(ia(0,ha(1,(P+this.dragInitX-V.x)/this.width)));h=parseFloat(1-ia(0,ha(1,(Q+this.dragInitY-V.y)/this.height)));v=!1;x.updateUI()}}]);D=new U(f,{width:139,height:139});
G=new U(D,{width:139,height:139});D.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";G.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";b=new U(G,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});q=new U(x,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(P,Q){this.callSuper(q.x,q.y);e=parseFloat(ia(0,ha(1,(Q+this.dragInitY-this.getPagePosition().y)/this.height)));v=!1;x.updateUI()}}]);q.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";w=new U(q,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new U(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);D=146;t&&(B=new r.LabelSlider(x,{x:170,y:D,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(P,Q){Q=P.value;if(null==Q||isNaN(Q))Q=
0;P.value=r.formatAsPercentage(Q/255,0);this.callSuper(P,!0);n=Q;x._isReady&&(v=!1,x.updateUI())}}]),D+=23);k=new r.InputText(x,{x:236,y:D,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(k,"_submitInput","blur");x.attachToDom(k,"_handleKeyDown","keydown");k.getIDS().paddingLeft="6px";D=new U(x,{x:170,y:D,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new U(D,{width:30,height:23,focusIndicator:!1,bgColor:H},[wa,{doActivated:()=>
{x.setColor(H)}}]);u=new U(D,{x:30,width:30,height:23});if(D=Ea.getItem("myt.default"))c=D.split(";"),Ia(c);x.setColor(H);x._isReady=!0},_handleKeyDown:D=>{r.KeyObservable.isEnterKeyEvent(D)&&x._submitInput()},_submitInput:()=>{x.setColor(k.value)},addToPalette:D=>{D&&"transparent"!==D&&!Ha[D]&&(c.unshift(D),c.length=ha(c.length,56),Ea.setItem("myt.default",c.join(";")))},setColor:D=>{const G=D&&"transparent"!==D;if(t){let H="ff";G&&7<D.length&&(H=D.slice(7,9),D=D.slice(0,7));B.setValue(parseInt(H,
16))}else G&&7<D.length&&(D=D.slice(0,7));G?(D=qa.makeColorFromHexString(D).getHSV(),e=D.h/360,d=D.s,h=D.v,v=!1):v=!0;x.updateUI()},getColor:()=>{if(v)return"transparent";let D="";t&&(D=n.toString(16),2>D.length&&(D="0"+D));return qa.makeColorFromHSV(360*e,100*d,100*h).getHtmlHexString()+D},updateUI:()=>{const D=!v;w.setVisible(D);b.setVisible(D);D&&(b.setX(ia(0,ha(1,d)*(f.width+2))-5),b.setY(ia(0,ha(1,1-h)*(f.height+2))-5),w.setY(e*(q.height-2)-1));f.setBgColor(qa.makeColorFromHSV(360*e,100,100).getHtmlHexString());
l=x.getColor();k.setValue(l);u.setBgColor(l);x.redrawPalette()},redrawPalette:r.debounce(()=>{a.destroyAllSubviews();const D=new Set;g.push(...c);for(let G of g)if(t||7===G.length)7===G.length&&(G+="ff"),D.has(G)||(new Ma(a,{bgColor:G}),D.add(G))},50)}),ya=D=>{D=D.split(":");return[ia(0,ha(23,parseInt(D[0]))),ia(0,ha(60,parseInt(D[1])))]},Ja=new ea("SelectableBtn",na,{include:[r.Selectable],setSelected:function(D){this.callSuper(D);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(D,G){G.width=J?175:49;this.callSuper(D,G)},doActivated:function(){this.callSuper();const D=this.text,G=ya(D);T.selectById(D);F.setHours(G[0]);F.setMinutes(G[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(D,G){G.width=23;G.border=xa;this.callSuper(D,G)},setData:function(D){this.data=D},setIsAnotherMonth:function(D){this.isAnotherMonth=D},setIsToday:function(D){this.isToday=D},setIsSunday:function(D){this.isSunday=
D},setIsSaturday:function(D){this.isSaturday=D},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const D=new Date(this.data);D.setHours(F.getHours());D.setMinutes(F.getMinutes());pa(D)}}),pa=D=>{D.setSeconds(0);D.setMilliseconds(0);var G=6>=O.length,H;if(G)for(H=7;H--&&!O.includes(D.getDay());)D.setDate(D.getDate()+
1);F=D;const P=T.getODE().scrollTop;var Q=new Date,V=Q.getFullYear(),S=Q.getMonth(),W=Q.getDate();Q.getHours();Q.getMinutes();const aa=D.getFullYear(),ca=D.getMonth(),ka=D.getDate();var da=D.getTime();Q=D.getHours();D=D.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-M,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);V=V==aa&&S==ca;if(!J){S=N;S.deselectAll();S.destroyAllSubviews();H=new Date(da);const ja=7+M;S=z.days;L.setText(aa+" "+
z.sep+" "+z.months[ca]);H.setMinutes(59);H.setHours(23);H.setSeconds(59);H.setDate(0);K.setVisible(null==m||m<H.getTime());H.setMinutes(0);H.setHours(0);H.setSeconds(0);H.setDate(1);H.setMonth(ca+1);R.setVisible(null==p||p>H.getTime());for(H=0;7>H;H++)new la(N,{width:23,height:20,textAlign:"center",text:S[(H+ja)%7],textColor:"#999"});H=0;let fa=42;0>ra&&(H=-7,fa=35);S=new Date(da);S.setHours(0);S.setMinutes(0);for(S.setSeconds(0);H<fa;H++){var X=H+1-ra;const Aa=(H+ja)%7,Y=new Pa(N);ra>H?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),S.setDate(za+X),S.setMonth(ta.getMonth()),S.setYear(ta.getFullYear())):H<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),S.setDate(X),S.setMonth(ca),S.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),S.setDate(X-sa),S.setMonth(ua.getMonth()),S.setYear(ua.getFullYear()));G&&!O.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===ka&&(N.select(Y),Y.focus()),V&&X===W&&Y.setIsToday(!0),X=new Date(S.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=m&&m>X.getTime()||null!=p&&p<S.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!C){G=60*A[0]+A[1];W=T;W.deselectAll();W.destroyAllSubviews();let [ja,fa]=y;for(S=new Date(da);60*ja+fa<G;)da=new Oa(T,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===Q&&fa===D&&T.select(da),S.setHours(ja),S.setMinutes(fa),W=S.getTime(),(null!=m&&m>W||null!=p&&p<W)&&da.setDisabled(!0),
fa+=E,60<=fa&&(fa-=60,ja++);T.scrollYTo(P)}},Qa=r.DatePicker=new ea("DatePicker",U,{initNode:function(D,G){I=this;const H={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...G.opt};delete G.opt;I.callSuper(D,G);z=H.locales[H.locale??"en"];C=H.dateOnly;J=H.timeOnly;M=H.firstDayOfWeek;E=ia(5,ha(30,H.minuteInterval));O=H.allowedDays;Array.isArray(O)&&0!==O.length||
(O=[0,1,2,3,4,5,6]);m=Date.parse(H.minDate);m=isNaN(m)?null:m;p=Date.parse(H.maxDate);p=isNaN(p)?null:p;y=ya(H.minTime);A=ya(H.maxTime);D=new U(I,{visible:!J});H.showTodayButton&&new na(D,{width:24,text:oa(["home"]),tooltip:z.today},[{doActivated:()=>{pa(new Date)}}]);K=new na(D,{width:24,x:28,text:oa(["chevron-left"]),tooltip:z.prevMonth},[{doActivated:()=>{const P=(new Date(F.getFullYear(),F.getMonth(),0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()-1);pa(F);K.focus()}}]);L=new la(D,
{width:100,x:52,textAlign:"center"});R=new na(D,{width:24,x:152,text:oa(["chevron-right"]),tooltip:z.nextMonth},[{doActivated:()=>{var P=(new Date(F.getFullYear(),F.getMonth()+1,0)).getDate();P<F.getDate()&&F.setDate(P);P=(new Date(F.getFullYear(),F.getMonth()+2,0)).getDate();P<F.getDate()&&F.setDate(P);F.setMonth(F.getMonth()+1);pa(F);R.focus()}}]);N=new U(I,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(N,{spacing:2,lineInset:2,lineSpacing:3});T=new U(I,
{x:J?0:195,y:J?0:25,width:(J?175:49)+r.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!C,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(T,{axis:"y",inset:1,spacing:3});I.setWidth(T.visible?T.x+T.width:N.width);pa(H.current??new Date)},getPickedDate:()=>F}),Z=r.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(D,G){G.buttonClass??(G.buttonClass=Z.BUTTON_CLASS);this.callSuper(D,G);D=this.content;D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER);D.setFocusCage(!0);this.makeCloseButton(D)},setButtonClass:function(D){this.buttonClass=D},setCallbackFunction:function(D){this.callbackFunction=D},makeButton:function(D,G){const H=this;return new H.buttonClass(D,
G,[{doActivated:function(){H.doCallback(this)}}])},makeCloseButton:function(D){return D.closeBtn=this.makeButton(D,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(D){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(D)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const D=this.content,G=D.sizeToChildren;D.destroyAllSubviews(H=>"closeBtn"!==H.name);D.setVisible(!0);this.overlay.setBgColor(r.Dimmer.COLOR);this.setCallbackFunction();G.setPaddingY(ba.PADDING_Y);G.setPaddingX(ba.PADDING_X);D.setRoundedCorners(Z.RADIUS);D.setBgColor(Z.BGCOLOR);D.setBoxShadow(Z.SHADOW);D.setBorder(Z.BORDER)},doCallback:function(D){const G=this.callbackFunction;G&&G.call(this,D.name)||this.hide()},showBlank:function(D){this.destroyContent();this.content.setVisible(!1);
D?.bgColor&&this.overlay.setBgColor(D.bgColor);this.show()},showMessage:function(D,G,H){const P=this.content,Q=P.closeBtn;H={...Z.WRAP_TEXT_DEFAULTS,...H};this.destroyContent();this.setCallbackFunction(G);D=P.msg=new la(P,{text:D,whiteSpace:H.whiteSpace,wordWrap:H.wordWrap,fontWeight:H.fontWeight,x:null==H.msgX?ba.PADDING_X:H.msgX,y:null==H.msgY?ba.PADDING_Y:H.msgY,width:H.width});H.titleText&&(this.setupTitle(P,H.titleText),D.setY(D.y+24));this.show();!1===H.showClose?Q.destroyed||Q.setVisible(!1):
(Q.setVisible(!0),Q.focus())},showSimple:function(D,G,H,P){H=H??{};const Q=this.content,V=Q.closeBtn,S=H.maxContainerHeight;this.destroyContent();H.bgColor&&Q.setBgColor(H.bgColor);H.roundedCorners&&Q.setRoundedCorners(H.roundedCorners);H.boxShadow&&Q.setBoxShadow(H.boxShadow);H.border&&Q.setBorder(H.border);Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>S&&(W=S);this.callSuper(W)}}]);D.call(this,G);new va(G,
{axis:"both"});this.show();V.setVisible(!0);V.focus();H.titleText&&(this.setupTitle(Q,H.titleText),G.setY(this.header.height+1));G.initialFocus?.focus();P?.(this)},showConfirm:function(D,G,H){H={...Z.CONFIRM_DEFAULTS,...H};this.showMessage(D,G,H);this.setupFooterButtons(this.content.msg,H)},showContentConfirm:function(D,G,H,P){H={...Z.CONFIRM_DEFAULTS,...H};const Q=this.content,V=Q.closeBtn,S=H.maxContainerHeight;this.destroyContent();Q.sizeToChildren.setPaddingX(1);this.setCallbackFunction(G);G=
Q.contentContainer=new U(Q,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>S?S:W)}}]);D.call(this,G);new va(G,{axis:"both"});this.show();!1===H.showClose?V.destroyed||V.setVisible(!1):(V.setVisible(!0),V.focus());this.setupTitle(Q,H.titleText);G.setY(this.header.height+1);this.setupFooterButtons(G,H);G.initialFocus?.focus();P?.(this)},showSpinner:function(D,G){const H=this.content;G={...Z.NO_WRAP_TEXT_DEFAULTS,...G};this.destroyContent();const P=this.spinner=new r.Spinner(H,{align:"center",
visible:!0,borderColor:"#ccc",size:50,y:null==G.msgY?ba.PADDING_Y:G.msgY});D&&new la(H,{text:D,whiteSpace:G.whiteSpace,wordWrap:G.wordWrap,fontWeight:G.fontWeight,x:null==G.msgX?ba.PADDING_X:G.msgX,y:P.y+P.size+ba.PADDING_Y,width:G.width});this.show();H.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(D,G){const H=this,P=H.content,Q=P.closeBtn;G={...Z.COLOR_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(H,V);break;
case "confirmBtn":const S=x.getColor();x.addToPalette(S);D.call(H,V,S)}x.destroy()});x=new Na(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(G.alphaChannel?23:0),color:G.color,alphaChannel:G.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(x,G);H.setupTitle(P,G.titleText)},showDatePicker:function(D,G){const H=this,P=
H.content,Q=P.closeBtn;G={...Z.DATE_PICKER_DEFAULTS,...G};H.destroyContent();H.setCallbackFunction(V=>{switch(V){case "closeBtn":case "cancelBtn":D.call(H,V);break;case "confirmBtn":D.call(H,V,I.getPickedDate())}I.destroy()});I=new Qa(P,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(G.initialDate??Date.now()),dateOnly:G.dateOnly||!1,timeOnly:G.timeOnly||!1,locales:G.locales,locale:G.locale}});H.show();Q.setVisible(!0);Q.focus();H.setupFooterButtons(I,G);H.setupTitle(P,G.timeOnly?
G.timeOnlyTitleText:G.titleText)},setupTitle:function(D,G){const H=Z.RADIUS;(this.header=new U(D,{ignoreLayout:!0,width:D.width,height:24,bgColor:"#eee",roundedTopLeftCorner:H,roundedTopRightCorner:H})).sendToBack();D.title=new la(D,{x:H,y:4,text:G,fontWeight:"bold"})},setupFooterButtons:function(D,G){const H=this.content;var P=ba.PADDING_Y,Q=P/2;D=H.btnContainer=new U(H,{y:D.y+D.height+P,align:"center"});const V=["active","hover","ready","text"];P=G.cancelAttrs??{};var S;(S=P).name??(S.name="cancelBtn");
let W;(W=P).text??(W.text=G.cancelTxt);for(let da of V)da+="Color",null!=G[da]&&(P[da]=G[da]);S=this.makeButton(D,P);P=G.confirmAttrs??{};var aa;(aa=P).name??(aa.name="confirmBtn");let ca;(ca=P).text??(ca.text=G.confirmTxt);for(var ka of V)ka+="Color",aa=ka+"Confirm",null!=G[aa]&&(P[ka]=G[aa]);this.makeButton(D,P);if(ka=G.button)for(const da of ka)this.makeButton(D,da);new va(D,{axis:"y"});new Ba(D,{spacing:4,collapseParent:!0});H.sizeToChildren.setPaddingY(Q);Q=D.y-Q;(new U(H,{ignoreLayout:!0,y:Q,
width:H.width,height:H.height-Q,bgColor:"#eee"})).sendToBack();!1===G.showClose&&S.focus()}})})(myt);
(r=>{const x=JS.Class,v=r.dumpStack,t={},l=(a,f)=>{if(a){const b=a.id;a.id?f(b):v("No ID")}else v("No validator")},e=a=>{l(a,f=>{t[f]=a})},d=r.Validator=new x("Validator",{initialize:function(a){this.id=a},isValid:(a,f,b)=>!0,isFormValid:function(a,f,b){f??={};f.form=a;return this.isValid(a.getValue(),f,b)}}),h=r.RequiredFieldValidator=new x("RequiredFieldValidator",d,{isValid:(a,f,b)=>null==a||""===a||"string"===typeof a&&""===a.trim()?(b?.push("This value is required."),!1):!0}),n=r.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",d,{isValid:(a,f,b)=>{f=f.form.getRollbackValue();return a&&f&&a.toLowerCase()===f.toLowerCase()?(b?.push("Value must differ by more than just case."),!1):!0}}),c=r.URLValidator=new x("URLValidator",d,{initialize:function(a,f){this.callSuper(a);this.originalRawQuery=f},isValid:function(a,f,b){return(new r.URI(a)).toString(this.originalRawQuery)!==a?(b?.push("Invalid URL."),!1):!0}}),g=r.JSONValidator=new x("JSONValidator",d,{isValid:(a,f,b)=>{try{return JSON.parse(a),
!0}catch(q){return b?.push(q),!1}}});r.RegexValidator=new x("RegexValidator",d,{initialize:function(a,f,b){this.callSuper(a);this.regex=new RegExp(f);this.errorMsg=b},isValid:function(a,f,b){a=this.regex.test(a);!a&&this.errorMsg&&b?.push(this.errorMsg);return a}});r.EqualFieldsValidator=new x("EqualFieldsValidator",d,{initialize:function(a,f,b){this.callSuper(a);this.fieldA=f;this.fieldB=b},isValid:function(a,f,b){const {fieldA:q,fieldB:w}=this;if(q?.inited&&w?.inited){if(a&&q.getValue()===w.getValue())return!0;
b?.push('The field "'+q.key+'" must be equal to the field "'+w.key+'".')}return!1}});r.LengthValidator=new x("LengthValidator",d,{initialize:function(a,f,b){this.callSuper(a);this.min=f;this.max=b},isValid:function(a,f,b){a=a?a.length:0;f=this.min;const q=this.max;return void 0!==f&&f>a?(b?.push("The value must not be less than "+f+" characters long."),!1):void 0!==q&&q<a?(b?.push("The value must not be greater than "+q+" characters long."),!1):!0}});r.NumericRangeValidator=new x("NumericRangeValidator",
d,{initialize:function(a,f,b){this.callSuper(a);this.min=f;this.max=b},isValid:function(a,f,b){if(""===a)return!0;a=Number(a);f=this.min;const q=this.max;return isNaN(a)?(b?.push("Value is not a number."),!1):void 0!==f&&f>a?(b?.push("Value must not be less than "+f+"."),!1):void 0!==q&&q<a?(b?.push("Value must not be greater than "+q+"."),!1):!0}});r.CompoundValidator=new x("CompoundValidator",d,{initialize:function(a,...f){this.callSuper(a);for(a=f.length;a;){let b=f[--a];"string"===typeof b&&((f[a]=
b=t[b])||f.splice(a,1))}this.__v=f},addValidator:function(a){"string"===typeof a&&(a=t[a]);a&&this.__v.push(a)},isValid:function(a,f,b){const q=this.__v,w=q.length;let k=!0,u=0;for(;w>u;)k=q[u++].isValid(a,f,b)&&k;return k}});new JS.Singleton("GlobalValidatorRegistry",{initialize:function(){e(new h("required"));e(new n("equalsIgnoreCase"));e(new c("url"));e(new g("json"));r.global.register("validators",this)},getValidator:a=>t[a],register:e,unregister:a=>{l(a,f=>{t[f]&&delete t[f]})}})})(myt);
(r=>{const x=JS.Class,{min:v,max:t,round:l,abs:e}=Math,d=r.View,h=new x("SliderThumb",r.SimpleButton,{include:[r.Draggable,r.ArrowKeyActivation],initNode:function(c,g){const a=g.width=c.thumbWidth,f=g.height=c.thumbHeight;g.roundedCorners=v(f,a)/2;g.repeatKeyDown=!0;g.activationKeys=r.global.keys.ARROW_KEYS;g.activeColor="#bbb";g.readyColor="#ccc";g.hoverColor="#ddd";g.boxShadow=[0,0,4,"#666"];this.callSuper(c,g);this["x"===c.axis?"setY":"setX"](c.thumbOffset);this.syncTo(c,"setDisabled","disabled");
c._syncThumbToValue(this,c.getValue())},setDisabled:function(c){this.callSuper(this.valueFromEvent(c))},setFocused:function(c){this.callSuper(c);c&&this.makeHighestZIndex()},setX:function(c){this.x!==c&&(this.callSuper(c),c=this.parent,"x"===c.axis&&c.syncValueToThumb(this))},setY:function(c){this.y!==c&&(this.callSuper(c),c=this.parent,"y"===c.axis&&c.syncValueToThumb(this))},requestDragPosition:function(c,g){if(!this.disabled){const a=this.parent,f=a.getMinPixelValueForThumb(this),b=a.getMaxPixelValueForThumb(this),
q=a.snapThreshold;let w;"x"===a.axis?(w=this.width/2,g="setX"):(w=this.height/2,c=g,g="setY");if(a.allowSnap(this))for(let k of a.getSnapValuesAsPx())if(k-=w,e(c-k)<=q){c=k;break}this[g](v(t(c,f-w),b-w))}},doKeyArrowLeftOrUp:function(c,g){c?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(c,g){c?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),n=r.BaseSlider=new x("BaseSlider",d,{include:[r.Disableable],initNode:function(c,
g){g.axis??(g.axis="x");"x"===g.axis?(g.width??(g.width=100),g.height??(g.height=18)):(g.width??(g.width=18),g.height??(g.height=100));g.bgColor??(g.bgColor="#999");g.roundedCorners??(g.roundedCorners=9);g.trackInset??(g.trackInset=9);g.trackOutset??(g.trackOutset=9);g.thumbWidth??(g.thumbWidth=16);g.thumbHeight??(g.thumbHeight=16);g.thumbOffset??(g.thumbOffset=1);g.nudgeAmount??(g.nudgeAmount=1);g.snapThreshold??(g.snapThreshold=8);g.snapValues??(g.snapValues=[]);this.callSuper(c,g)},setAxis:function(c){this.axis=
c},setTrackInset:function(c){this.trackInset=c},setTrackOutset:function(c){this.trackOutset=c},setThumbWidth:function(c){this.thumbWidth=c},setThumbHeight:function(c){this.thumbHeight=c},setThumbOffset:function(c){this.thumbOffset=c},setNudgeAmount:function(c){this.nudgeAmount=c},setSnapThreshold:function(c){this.snapThreshold=c},setSnapValues:function(c){this.snapValues=c},getSnapValuesAsPx:function(){const c=[];for(const g of this.snapValues)c.push(this.convertValueToPixels(g));return c},allowSnap:function(c){var g=
c.__lastMousePosition;const a=r.DomElementProxy.getRelativePosition(c.getODE()),f="x"===this.axis;c=f?c.height:c.width;g=f?g.y-a.y:g.x-a.x;return 0<g&&g<c},convertValueToPixels:function(c){const g=this.minValue,a=this.trackInset;return a+(("x"===this.axis?this.width:this.height)-a-this.trackOutset)/(this.maxValue-g)*(c-g)},convertPixelsToValue:function(c){const g=this.minValue,a=this.trackInset;return(this.maxValue-g)/(("x"===this.axis?this.width:this.height)-a-this.trackOutset)*(c-a)+g},nudgeValueLeft:function(c){this._nudge(c,
!1)},nudgeValueUp:function(c){this._nudge(c,!1)},nudgeValueRight:function(c){this._nudge(c,!0)},nudgeValueDown:function(c){this._nudge(c,!0)},_nudge:(c,g)=>{},_syncThumbToValue:function(c,g){g=this.convertValueToPixels(g);"x"===this.axis?c.setX(g-c.width/2):c.setY(g-c.height/2)},syncValueToThumb:function(c){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(c,this.convertPixelsToValue("x"===this.axis?c.x+c.width/2:c.y+c.height/2)),this.__lockSync=!1)},_syncValueToThumb:(c,g)=>
{},getMinPixelValueForThumb:function(c){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(c){return this.convertValueToPixels(this.maxValue)}});r.RangeSlider=new x("RangeSlider",n,{include:[r.BoundedRangeComponent],initNode:function(c,g){this.callSuper(c,g);c=this.rangeFill=new d(this,{bgColor:"#666"});"x"===this.axis?(c.setY(this.thumbOffset),c.setHeight(this.thumbHeight),c.setRoundedCorners(this.thumbHeight/2)):(c.setX(this.thumbOffset),c.setWidth(this.thumbWidth),
c.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new h(this);this.thumbUpper=new h(this);this._syncRangeFillToValue()},setValue:function(c){this.callSuper(c);this.inited&&(this.__lockSync||(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c)),this._syncRangeFillToValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===this.axis&&this.width!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,
c))},setHeight:function(c){const g=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==g&&(c=this.getValue(),this._syncThumbToValue(this.thumbLower,c),this._syncThumbToValue(this.thumbUpper,c))},_syncRangeFillToValue:function(){const c=this.rangeFill;var g=this.getValue();const a=this.convertValueToPixels(g.lower);g=this.convertValueToPixels(g.upper)-a;"x"===this.axis?(c.setX(a),c.setWidth(g)):(c.setY(a),c.setHeight(g))},_syncThumbToValue:function(c,g){this.callSuper(c,"thumbLower"===
c.name?g.lower:g.upper)},_syncValueToThumb:function(c,g){let a=this.getValueCopy();a["thumbLower"===c.name?"lower":"upper"]=g;this.setValue(a);a=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,a);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,a)},_nudge:function(c,g){const a=this.getValueCopy();g=this.nudgeAmount*(g?1:-1);"thumbLower"===c.name?a.lower=v(a.lower+g,a.upper):a.upper=t(a.upper+g,a.lower);this.setValue(a)},getMinPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===
c.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(c){return this.convertValueToPixels("thumbLower"===c.name?this.getValue().upper:this.maxValue)}});r.Slider=new x("Slider",n,{include:[r.BoundedValueComponent],initNode:function(c,g){this.callSuper(c,g);this.thumb=new h(this)},setValue:function(c){this.callSuper(c);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(c){const g=this.width;this.callSuper(c);this.inited&&"x"===
this.axis&&this.width!==g&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(c){const g=this.height;this.callSuper(c);this.inited&&"y"===this.axis&&this.height!==g&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(c,g){this.setValue(g);this._syncThumbToValue(c,this.getValue())},_nudge:function(c,g){this.setValue(this.getValue()+this.nudgeAmount*(g?1:-1))}});r.LabelSlider=new x("LabelSlider",r.Slider,{initNode:function(c,g){const a=this;g.labelX??
(g.labelX=8);g.labelY??(g.labelY=2);g.labelFontSize??(g.labelFontSize="12px");g.labelColor??(g.labelColor="#000");g.flipThreshold??(g.flipThreshold=l((g.maxValue-g.minValue)/2)||0);a.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],g);a.callSuper(c,g);const f=a.labelX;a.labelTxt=new r.Text(a,{x:f,y:a.labelY,textColor:a.labelColor,fontSize:a.labelFontSize},[{initNode:function(b,q){this.targetX=f;this.callSuper(b,q)},updateX:function(b){const q=a.getValue()>=a.flipThreshold?
f:a.width-this.width-f;this.targetX!==q&&(this.targetX=q,this.stopActiveAnimators("x"),b?this.setX(q):this.animate({attribute:"x",to:q,duration:250}))}}]);a.syncTo(a,"setText","value")},setWidth:function(c){this.callSuper(c);this.labelTxt?.updateX(!0)},setText:function(c,g){const a=this.labelTxt;a&&(a.setText(c.value),a.updateX(g))}})})(myt);
(r=>{const x=JS.Class,{abs:v,min:t}=Math,{CODE_ENTER:l,CODE_SPACE:e,ARROW_KEYS:d}=r.global.keys,h=c=>{const g="y"===c.axis?"height":"width";c.constrain("__limitToParent",[c,"limitToParent",c,g,c.parent,g])};var n=r.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(c,g){g.nudgeTargetValue??(g.nudgeTargetValue="value");g.nudgeIncrement??(g.nudgeIncrement=1);g.nudgeMin??(g.nudgeMin=1);g.nudgeMax??(g.nudgeMax=64);this.__nudgeAcc=g.nudgeMin;this.callSuper(c,g)},setNudgeIncrement:function(c){this.set("nudgeIncrement",
v(c),!0)},setNudgeMin:function(c){this.set("nudgeMin",v(c),!0)},setNudgeMax:function(c){this.set("nudgeMax",v(c),!0)},setNudgeTargetValue:function(c){this.set("nudgeTargetValue",c,!0)},nudge:function(c,g){const a=this.nudgeTargetValue;g=this.__nudgeAcc=g?t(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(a,(this.get(a)||0)+(c?1:-1)*g);return!0}});n=new x("BaseDivider",r.SimpleButton,{include:[r.BoundedValueComponent,r.Draggable,r.ArrowKeyActivation,n],initNode:function(c,
g){g.activeColor??(g.activeColor="#bbb");g.hoverColor??(g.hoverColor="#ddd");g.readyColor??(g.readyColor="#ccc");g.axis??(g.axis="x");g.minValue??(g.minValue=0);g.value??(g.value=g.minValue);g.expansionState??(g.expansionState=2);g.focusIndicator??(g.focusIndicator=!1);g.repeatKeyDown??(g.repeatKeyDown=!0);g.activationKeys??(g.activationKeys=[l,e,...d]);"y"===g.axis?(g.height??(g.height=6),g.cursor??(g.cursor="row-resize")):(g.width??(g.width=6),g.cursor??(g.cursor="col-resize"));this.quickSet(["axis"],
g);this.callSuper(c,g);null==g.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&h(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(c){this.expansionState=c},setRestoreValue:function(c){this.restoreValue=c},setLimitToParent:function(c){this.limitToParent!==c&&(this.limitToParent=c,this.inited&&(this.fireEvent("limitToParent",c),null==c?this.releaseConstraint("__limitToParent"):h(this)))},setAxis:function(c){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=c},setValue:function(c){this.callSuper(c);c=this.value;"y"===this.axis?this.setY(c):this.setX(c)},__limitToParent:function(c){c="y"===this.axis?"height":"width";this.setMaxValue(this.parent[c]-this.limitToParent-this[c])},doActivationKeyDown:function(c,g){this.callSuper(c,g);switch(c){case l:case e:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(c,g){return this.nudge(!1,g)},doKeyArrowRightOrDown:function(c,g){return this.nudge(!0,g)},nudge:function(c,g){c=this.callSuper(c,g);this.setExpansionState(2);
this.setRestoreValue(this.value);return c},doPrimaryAction:function(){const {restoreValue:c,maxValue:g,minValue:a}=this;let f;switch(this.expansionState){case 0:null!=c&&(this.setExpansionState(1),c===a?c!==g&&this.doPrimaryAction():f=c);break;case 1:null!=g&&(this.setExpansionState(3),this.value===g?this.doPrimaryAction():f=g);break;case 2:null!=a&&(this.setExpansionState(0),this.value===a?this.doPrimaryAction():f=a);break;case 3:null!=c&&(this.setExpansionState(2),c===g?this.doPrimaryAction():f=
c)}this.animateToValue(f)},animateToValue:function(c,g=250){null!=c&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:c,duration:g}))},requestDragPosition:function(c,g){this.disabled||(c="y"===this.axis?g:c,g=this.value,c!==g&&(this.setValue(c),this.setRestoreValue(c),this.setExpansionState(g>c?2:1)))}});r.HorizontalDivider=new x("HorizontalDivider",n,{initNode:function(c,g){g.axis="x";this.callSuper(c,g)}});r.VerticalDivider=new x("VerticalDivider",n,{initNode:function(c,g){g.axis=
"y";this.callSuper(c,g)}})})(myt);
(r=>{let x=0;const {Class:v,Module:t}=JS,{min:l,max:e}=Math,{View:d,SpacedLayout:h,Node:{DEFAULT_PLACEMENT:n}}=r,c=m=>{const p=m.columnHeaders,[y,A]=m.sort??["",""];let E=p.length;for(;E;){const F=p[--E];F.columnId===y?F.sortable&&F.setSortState(A):F.setSortState("none")}m.locked||m.doSort()},g=(m,p,y,A)=>{if(0!==p){const L=0<p,R=[];for(var E=m.length;E;){var F=m[--E];F.resizable&&(y?0<F.flex:0===F.flex)&&R.push({hdr:F,limit:(L?F.maxValue:F.minValue)-F.value,amt:0})}m=R.length;if(0<m){for(E=0;0!==
p;){x>=m&&(E=x=0);F=R[x];var K=F.hdr;F.full?++E:(L?(K=l(y?K.flex:1,p),F.amt+K>F.limit&&(K=F.limit-F.amt,F.full=!0)):(K=e(y?-K.flex:-1,p),F.amt+K<F.limit&&(K=F.limit-F.amt,F.full=!0)),F.amt+=K,p-=K);if(E===m)break;++x}for(const N of R)N.hdr.setValue(N.hdr.value+N.amt);A?.(p)}}},a=m=>(m=m.gridController?.getPrevHdr(m))?m.maxValue-m.value+a(m):0,f=m=>(m=m.gridController?.getNextHdr(m))?m.maxValue-m.value+f(m):0,b=m=>(m=m.gridController?.getPrevHdr(m))?m.minValue-m.value+b(m):0,q=m=>(m=m.gridController?.getNextHdr(m))?
m.minValue-m.value+q(m):0,w=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0>A&&(y+=w(m,A))}return y},k=(m,p)=>{m=m.gridController?.getPrevHdr(m);var y=0;if(m){y=m.value+p;m.resizable&&m.setValue(y);const A=y-m.value;y=p-A;0<A&&(y+=k(m,A))}return y},u=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&m.setValue(p),p-=m.value,0>p&&u(m,p)},B=(m,p)=>{if(m=m.gridController?.getNextHdr(m))p=m.value+p,m.resizable&&
m.setValue(p),p-=m.value,0<p&&B(m,p)},I=m=>{let p="";if(m.sortable)switch(m.sortState){case O.SORT_ORDER_ASC:p="chevron-up";break;case O.SORT_ORDER_DESC:p="chevron-down"}m.sortIcon.setIcon(p)},z=m=>{const p=m.textView;p?.setWidth(m.width-m.outset-p.x)},C=r.GridController=new t("GridController",{initNode:function(m,p){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(m,p);this.fitHeadersToWidth();c(this)},setMaxWidth:function(m){this.set("maxWidth",
m,!0)},setMinWidth:function(m){this.set("minWidth",m,!0)},setFitToWidth:function(m){this.fitToWidth=m},setSort:function(m){r.areArraysEqual(m,this.sort)||(this.sort=m,this.inited&&(this.fireEvent("sort",m),c(this)))},setLastColumn:function(m){const p=this.lastColumn;p!==m&&(p?.setLast(!1),this.lastColumn=m,m?.setLast(!0))},setLocked:function(m){this.locked=m;if(this.inited&&!m){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const p of this.columnHeaders)this.notifyHdrXChange(p),this.notifyHdrWidthChange(p),this.notifyHdrVisibilityChange(p);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(m){m=this.valueFromEvent(m);this.gridWidth!==m&&(this.gridWidth=m,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(m){this.hdrChangeListener=m},doSort:()=>{},getPrevHdr:function(m){const p=this.columnHeaders;m=this.getHdrIndex(m);
if(0<m)for(;m;){const y=p[--m];if(y.visible)return y}},getNextHdr:function(m){const p=this.columnHeaders,y=p.length;m=this.getHdrIndex(m)+1;if(0<m&&m<y)for(;y>m;){const A=p[m++];if(A.visible)return A}},hasHdr:function(m){return this.columnHeaders.includes(m)},getHdrIndex:function(m){return this.columnHeaders.indexOf(m)},getHdrById:function(m){for(const p of this.columnHeaders)if(p.columnId===m)return p},getVisibleHdrs:function(){return this.columnHeaders.filter(m=>m.visible)},notifyAddHdr:function(m){this.hasHdr(m)||
(this.columnHeaders.push(m),m.visible&&this.setLastColumn(m),this.fixupResizerCursors())},notifyRemoveHdr:function(m){const p=this.getHdrIndex(m);-1<p&&(this.columnHeaders.splice(p,1),m.visible&&m.last&&this.setLastColumn(this.getPrevHdr(m)),this.fixupResizerCursors())},notifyHdrXChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrXChange(m);this._notifyHdrChange("X",m)}},notifyHdrWidthChange:function(m){if(!this.isLocked()){for(const p of this.rows)p.notifyHdrWidthChange(m);
this._notifyHdrChange("Width",m)}},notifyHdrVisibilityChange:function(m){if((!this.__skipInvisibleHeaders||m.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(m);var p=this.setLastColumn;a:{var y=this.columnHeaders;let A=y.length;for(;A;){const E=y[--A];if(E.visible){y=E;break a}}y=void 0}p.call(this,y);p=m.visible?1:-1;this.setMaxWidth(this.maxWidth+m.maxValue*p);this.setMinWidth(this.minWidth+m.minValue*p);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
m)}},_notifyHdrChange:function(m,p){const y=this.hdrChangeListener;if(y)y["notifyHdr"+m+"Change"](p)},updateRowsForVisibilityChange:function(m){for(const p of this.rows)p.notifyHdrVisibilityChange(m)},hasRow:function(m){return this.rows.includes(m)},getRowIndex:function(m){return this.rows.indexOf(m)},getRowById:function(m,p=y=>y.model.id===m){return this.rows.find(p)},getPrevRow:function(m){m=this.getRowIndex(m)-1;return this.rows[0>m?this.rows.length-1:m]},getNextRow:function(m){m=this.getRowIndex(m)+
1;return this.rows[m<this.rows.length?m:0]},notifyAddRow:function(m,p){if(!this.hasRow(m)&&(this.rows.push(m),!this.locked)){const y=this.width;for(const A of this.columnHeaders)m.setWidth(y),m.notifyHdrXChange(A),m.notifyHdrWidthChange(A),m.notifyHdrVisibilityChange(A);p||this.doSort()}},notifyRemoveRow:function(m){m=this.getRowIndex(m);-1<m&&this.rows.splice(m,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const m=this.getVisibleHdrs();let p=0;for(const y of m)p=e(p,y.x+y.width);
g(m,this.gridWidth-p,!0,y=>{g(m,y,!1,null)})}},fixupResizerCursors:function(){const m=this.getVisibleHdrs();let p=!0,y=0;m.forEach((K,L)=>{p&&K.isFixed()?K.setResizerCursor("",!0):(p&&(y=L),p=!1,K.restoreResizerCursor())});let A=!0,E=m.length,F=E-1;for(;E>y;){const K=m[--E];A?K.setResizerCursor("",!0):K.restoreResizerCursor();K.isFixed()||(A&&(F=E),A=!1)}y===F&&m[y].setResizerCursor("",!0)}}),J=r.GridColHdr=new t("GridColHdr",{include:[r.BoundedValueComponent],initNode:function(m,p){const y=this,
A=p.resizerCursor??"col-resize";delete p.resizerCursor;p.minValue??(p.minValue=16);p.maxValue??(p.maxValue=1E3);p.value??(p.value=p.minValue);p.resizable??(p.resizable=!0);p.flex??(p.flex=0);p.cellXAdj??(p.cellXAdj=0);p.cellWidthAdj??(p.cellWidthAdj=0);p.sortable??(p.sortable=!0);p.sortState??(p.sortState="none");p.placement??(p.placement=n);y.callSuper(m,p);const E=y.gridController;y.resizer=new d(y,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[r.SizeToParent,r.Draggable,{requestDragPosition:function(F,K){K=F-this.x;if(E.fitToWidth&&(0<K?K=l(K,-q(y),y.maxValue-y.value+a(y)):0>K&&(K=e(K,-f(y),y.minValue-y.value+b(y))),0===K))return;F=y.value+K;y.resizable&&y.setValue(F);F-=y.value;K=F-K;let L=0;0>F?L=w(y,F):0<F&&(L=k(y,F));this.dragInitX+=L;K-=L;E.fitToWidth&&(0>K?u(y,K):0<K&&B(y,K))}}]);E&&(E.notifyAddHdr(y),E.notifyHdrXChange(y),E.notifyHdrVisibilityChange(y));y.setWidth(y.value);y.resizer.setVisible(!(y.last&&y.gridController.fitToWidth))},
destroy:function(m){this.setGridController();this.callSuper(m)},setSortable:function(m){this.set("sortable",m,!0)},setSortState:function(m){this.set("sortState",m,!0)},setResizable:function(m){this.set("resizable",m,!0)},setCellWidthAdj:function(m){this.cellWidthAdj=m},setCellXAdj:function(m){this.cellXAdj=m},setFlex:function(m){this.flex=m},setColumnId:function(m){this.columnId=m},setResizerCursor:function(m,p){const y=this.resizer,A=y.cursor;m!==A&&(p&&(this.__rrc=A),y.setCursor(m))},restoreResizerCursor:function(){const m=
this.__rrc;m&&(this.setResizerCursor(m),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(m){this.last=m;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(m){const p=this.gridController;p!==m&&(p?.notifyRemoveHdr(this),this.gridController=m,this.inited&&m&&(m.notifyAddHdr(this),m.notifyHdrXChange(this),m.notifyHdrWidthChange(this),m.notifyHdrVisibilityChange(this)))},setValue:function(m){this.callSuper(m);
this.inited&&this.setWidth(this.value)},setMinValue:function(m){const p=this.minValue??0,y=this.gridController;this.callSuper(m);this.inited&&p!==this.minValue&&y?.setMinWidth(y.minWidth+this.minValue-p)},setMaxValue:function(m){const p=this.maxValue??0,y=this.gridController;m??=1E3;this.callSuper(m);this.inited&&p!==this.maxValue&&y?.setMaxWidth(y.maxWidth+this.maxValue-p)},setWidth:function(m){const p=this.width;this.callSuper(m);this.inited&&p!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(m){const p=this.x;this.callSuper(m);this.inited&&p!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(m){const p=this.visible;this.callSuper(m);this.inited&&p!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),M=r.GridRow=new t("GridRow",{initNode:function(m,p){p.placement??(p.placement=n);this.callSuper(m,p);this.gridController?.notifyAddRow(this)},destroy:function(m){this.setGridController();this.callSuper(m)},setGridController:function(m){const p=
this.gridController;p!==m&&(p?.notifyRemoveRow(this),this.gridController=m,this.inited&&m?.notifyAddRow(this))},notifyHdrXChange:function(m){this.getRef(m.columnId)?.setX(m.x+m.cellXAdj)},notifyHdrWidthChange:function(m){this.getRef(m.columnId)?.setWidth(m.width+m.cellWidthAdj)},notifyHdrVisibilityChange:function(m){this.getRef(m.columnId)?.setVisible(m.visible)}}),O=r.Grid=new v("Grid",d,{include:[C],extend:{SORT_ORDER_ASC:"ascending",SORT_ORDER_DESC:"descending"},initNode:function(m,p){p.overflow??
(p.overflow="autox");p.bgColor??(p.bgColor="#ccc");p.rowSpacing??(p.rowSpacing=1);p.columnSpacing??(p.columnSpacing=1);var y=p.isAutoScrolling;delete p.isAutoScrolling;this.callSuper(m,p);m=this.header=new d(this,{overflow:"hidden"});m.xLayout=new h(m,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});m.yLayout=new r.SizeToChildren(m,{locked:!0,axis:"y"});p=this.sizeHeightToRows;y=this.content=new d(this,{overflow:p?"hidden":"autoy"},y?[r.AutoScroller]:[]);y.yLayout=new h(y,{locked:!0,axis:"y",
spacing:this.rowSpacing,collapseParent:p});this.syncTo(this,"setGridWidth","width");this.syncTo(m,"_updateContentWidth","width");this.constrain("_updateContentHeight",[p?y:this,"height",m,"height",m,"y"])},setSizeHeightToRows:function(m){this.sizeHeightToRows=m},setRowSpacing:function(m){this.rowSpacing!==m&&(this.rowSpacing=m,this.inited&&this.content.yLayout.setSpacing(m))},setColumnSpacing:function(m){this.columnSpacing!==m&&(this.columnSpacing=m,this.inited&&this.header.xLayout.setSpacing(m))},
setLocked:function(m){if(this.inited)for(const p of[this.header.xLayout,this.header.yLayout,this.content.yLayout])m?p.incrementLockedCounter():(p.decrementLockedCounter(),p.update());this.callSuper(m)},_updateContentWidth:function(m){const p=this.content;m=m.value;p.setWidth(m);for(const y of p.getSubviews())y.setWidth(m)},_updateContentHeight:function(m){const {header:p,content:y}=this;m=p.y+p.height;y.setY(m);this.sizeHeightToRows?this.setHeight(m+y.height):y.setHeight(this.height-m)},determinePlacement:function(m,
p){if(m===n){let y;p.isA(M)?y=this.content:p.isA(J)&&(y=this.header);if(y)return p.gridController!==this&&p.setGridController(this),y}return this.callSuper(m,p)},doSort:function(){const [m,p]=this.sort??["",""],y=this.getSortFunction(m,p);if(y){const A=this.content,E=A.yLayout;this.rows.sort(y);A.sortSubviews(y);E.sortSubviews(y);E.update()}},getSortFunction:(m,p)=>{if(m){const y=p===O.SORT_ORDER_ASC?1:-1;return(A,E)=>{A=A.getRef(m).text;E=E.getRef(m).text;return A>E?y:E>A?-y:0}}}});r.SimpleGridColHdr=
new v("SimpleGridColHdr",r.SimpleTextButton,{include:[J],initNode:function(m,p){const y=this;p.activeColor??(p.activeColor="#999");p.hoverColor??(p.hoverColor="#bbb");p.readyColor??(p.readyColor="#aaa");p.inset??(p.inset=2);p.sortIconColor??(p.sortIconColor="#666");const A=p.outset??2;delete p.outset;y.callSuper(m,p);y.sortIcon=new r.FontAwesome(y,{align:"right",alignOffset:3,valign:"middle",textColor:y.sortIconColor},[{initNode:function(E,F){this.callSuper(E,F);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();
y.setOutset(this.width+A);z(y)}}]);y.textView.enableEllipsis();y.setDisabled(!y.sortable);z(y);I(y)},setSortIconColor:function(m){this.sortIconColor=m;this.sortIcon?.setTextColor(m)},setSortable:function(m){this.callSuper(m);this.inited&&(m&&this.setOutset(14),this.setDisabled(!m),I(this))},setSortState:function(m){this.callSuper(m);this.inited&&I(this)},setWidth:function(m){this.callSuper(m);this.inited&&z(this)},doActivated:function(){this.disabled||(this.setSortState(this.sortState===O.SORT_ORDER_ASC?
O.SORT_ORDER_DESC:O.SORT_ORDER_ASC),this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(r=>{const {Class:x,Module:v}=JS,t=Math,l=t.max,{View:e,LocalStorage:{setDatum:d,getDatum:h},global:{focus:n,keys:c},getAlphaObjSortFunc:g}=r,a=z=>{const C=z.selectedRow;C&&(C.setSelected(!1),z.set("selectedRow",null,!0))},f=z=>z.__ssk??(z.__ssk="InfiniteGridMixin.sort."+r.hash(z.columnHeaders.map(C=>C.columnId).sort().join(","))),b=r.InfiniteListRow=new v("InfiniteListRow",{include:[r.Reusable],setInfiniteOwner:function(z){this.infiniteOwner=z},setModel:function(z){this.model=z},setClassKey:function(z){this.classKey=
z},notifyRefreshed:()=>{}}),q=r.SelectableInfiniteListRow=new v("SelectableInfiniteListRow",{include:[b,r.Selectable]}),w=r.InfiniteList=new x("InfiniteList",e,{initNode:function(z,C){let J=C.rowClasses;delete C.rowClasses;if("function"===typeof J){const M={};M["default"]=J;J=M}C.modelIDName??(C.modelIDName="id");C.numericSort??(C.numericSort=!0);C.ascendingSort??(C.ascendingSort=!0);C.overflow??(C.overflow="autoy");C.bgColor??(C.bgColor="#ccc");C.rowSpacing??(C.rowSpacing=1);C.rowInset??(C.rowInset=
0);C.rowOutset??(C.rowOutset=0);C.rowHeight??(C.rowHeight=30);C.overscrollBehavior??(C.overscrollBehavior="auto contain");this._rowExtent=this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(z,C);z=this._listView=new e(this);this._scrollAnchorView=new e(z,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(J,z);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(z,C)=>new r.TrackActivesMultiPool(z,
C),setOverscrollBehavior:function(z){this.overscrollBehavior=z;this.getIDS().overscrollBehavior=z},setCollectionModel:function(z){this.collectionModel=z},setModelIDName:function(z){this.modelIDName=z},setRowSpacing:function(z){this.rowSpacing=z;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(z){this.rowHeight=z;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(z){if(0<z&&(this.callSuper(z),this.inited)){z=this._listView;
const C=this.width;z.setWidth(C);for(const J of z.getSubviews())J.setWidth(C)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??{})},getVisibleRowForModel:function(z){const C=this.getVisibleRows();let J=C.length;for(;J;){const M=C[--J];if(M.model===z)return M}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const z=this.modelIDName,C=this.ascendingSort;
return this.numericSort?r.getNumericObjSortFunc(z,C):g(z,C,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(z,C){var J=this.getIndexOfModelInData(z);let M=!1;if(0<=J){var O=this._rowExtent;const m=this.getIDE().scrollTop,p=m+this.height;J=this.rowInset+J*O;O=J+O;J<=m?(this.scrollYTo(J,!0),M=!0):O>=p&&(this.scrollYTo(O-this.height,!0),M=!0);C&&((C=this.getVisibleRowForModel(z))?C.focus():this._focusToModel=z)}return M},isModelInData:function(z){return 0<=this.getIndexOfModelInData(z)},getNextModel:function(z,
C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return z+=1,z>=O?C?M[0]:M[O-1]:M[z];if(J&&0<O)return M[O-1]},getPrevModel:function(z,C=!0,J=!0){const M=this.getListData(),O=M.length;z=this.getIndexOfModelInData(z);if(0<=z)return--z,0>z?C?M[O-1]:M[0]:M[z];if(J&&0<O)return M[0]},getIndexOfModelInData:function(z){if(z){const C=this.getListData();let J=C.length;for(;J;)if(this.areModelsEqual(C[--J],z))return J}return-1},areModelsEqual:function(z,C){const J=this.modelIDName;
return z[J]===C[J]},getActiveRowForModel:function(z){if(z){const C=this._itemPool.getActives();let J=C.length;for(;J;){const M=C[--J];if(this.areModelsEqual(M.model,z))return M}}},refreshListData:function(z,C){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(z,C)},resetListUI:function(z,C){const J=this.getListData().length,M=this._listView,O=this._scrollAnchorView;M.setHeight(J*this._rowExtent-(0<J?this.rowSpacing:0)+this.rowInset+
this.rowOutset);O.setY(M.height-O.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=C;z||0===this.getIDE().scrollTop?this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(z){if(n.focusedView?.isDescendantOf(z)){const C=this.getFocusTrap();C?C.focus():n.clear()}z.setVisible(!1);this._itemPool.putInstance(z)},refreshListUI:function(z){z=this._rowExtent;const C=this.rowInset,J=this.forceFullResetOnNextRefresh;var M=this.getIDE().scrollTop;const O=this.getListData()??
[];var m=l(0,t.floor((M-C)/z));M=t.min(O.length,t.ceil((M-C+this.height)/z));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=!1);if(this._startIdx!==m||this._endIdx!==M||J){const y=this.width,A=this.rowHeight,E=this._visibleRowsByIdx,F=this._focusToModel;this._startIdx=m;this._endIdx=M;for(var p in E)if(p<m||p>=M)this.putRowBackInPool(E[p]),delete E[p];for(p=m;p<M;p++){m=E[p];const K=O[p],L=this.getClassKey(K);let R=!1;m&&m.classKey===L||(m&&this.putRowBackInPool(m),E[p]=m=this._itemPool.getInstance(L),
m.setInfiniteOwner(this),m.setClassKey(L),m.setWidth(y),m.setHeight(A),m.setY(C+p*z),m.setVisible(!0),R=!0);!J&&m.model&&this.areModelsEqual(m.model,K)?R&&this.updateRow(m):(m.setModel(K),this.updateRow(m));m.notifyRefreshed();m.bringToFront();F&&this.areModelsEqual(F,K)&&(m.focus(),this._focusToModel=null)}}},getClassKey:z=>"default",updateRow:z=>{}}),k=r.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",r.SimpleButton,{include:[q,r.ArrowKeyActivation],initNode:function(z,C){C.selectedColor??
(C.selectedColor="#ccf");C.activeColor??(C.activeColor="#f8f8f8");C.hoverColor??(C.hoverColor="#eee");C.readyColor??(C.readyColor="#fff");C.focusIndicator??(C.focusIndicator=!1);C.activationKeys??(C.activationKeys=c.LIST_KEYS);this.callSuper(z,C)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(z){this.callSuper(z);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},
updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(z,C){z===c.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(z,C)},doKeyArrowLeftOrUp:function(z,C){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(z,C){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(z){switch(z){case c.CODE_ENTER:case c.CODE_SPACE:this.doActivated()}}}),
u=r.SelectableInfiniteList=new x("SelectableInfiniteList",w,{setSelectedRow:function(z){const C=this.selectedRow;z!==C&&(C?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",z,!0),z&&(this.setSelectedRowModel(z.model),z.setSelected(!0)))},setSelectedRowModel:function(z){this.set("selectedRowModel",z,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(z,C,J){z&&(a(this),
this.setSelectedRowModel(z),this.refreshListUI(),C&&this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(z,C=!0){this.selectRowForModel(this.getNextModel(z),C,!0)},selectPrevRowForModel:function(z,C=!0){this.selectRowForModel(this.getPrevModel(z),C,!1)},resetListUI:function(z,C){this.isModelInData(this.selectedRowModel)?a(this):this.setSelectedRow();this.callSuper(z,C)},putRowBackInPool:function(z){z.selected&&a(this);this.callSuper(z)},refreshListUI:function(z){z=n.focusedView;this.callSuper();
const C=this.getActiveSelectedRow();C&&(this.set("selectedRow",C,!0),C.setSelected(!0),z&&z!==C||C.focus(!0))}}),B=new v("InfiniteGridRowMixin",{notifyXChange:function(z){this.getRef(z.columnId)?.setX(z.x+z.cellXAdj)},notifyWidthChange:function(z){this.getRef(z.columnId)?.setWidth(z.width+z.cellWidthAdj)},notifyVisibilityChange:function(z){this.getRef(z.columnId)?.setVisible(z.visible)}}),I=new v("InfiniteGridMixin",{setGridHeader:function(z){(this.gridHeader=z)?.setGrid(this)},makeReady:function(z,
C){const J=this.gridHeader;J?(this.forceFullResetOnNextRefresh=C,C=J.persistSortOrder?h(f(J)):void 0,J.setSort(C??z),J.setLocked(!1)):this.refreshListData(!1,C)},getSortFunction:function(){const [z,C]=this.gridHeader.sort??["",""];return z?g(z,C===r.Grid.SORT_ORDER_ASC,!1):this.callSuper()},updateRow:function(z){const C=this.gridHeader;if(C)for(const J of C.columnHeaders)z.notifyXChange(J),z.notifyWidthChange(J),z.notifyVisibilityChange(J)},notifyXChange:function(z){for(const C of this.getVisibleRows())C.notifyXChange(z)},
notifyWidthChange:function(z){for(const C of this.getVisibleRows())C.notifyWidthChange(z)},notifyVisibilityChange:function(z){for(const C of this.getVisibleRows())C.notifyVisibilityChange(z)}});r.InfiniteGridRow=new v("InfiniteGridRow",{include:[b,B]});r.SelectableInfiniteGridRow=new v("SelectableInfiniteGridRow",{include:[q,B]});r.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",k,{include:[B]});r.InfiniteGrid=new x("InfiniteGrid",w,{include:[I]});r.SelectableInfiniteGrid=
new x("InfiniteGrid",u,{include:[I]});r.InfiniteGridHeader=new x("InfiniteGridHeader",e,{include:[r.GridController],initNode:function(z,C){C.columnSpacing??(C.columnSpacing=1);C.persistSortOrder??(C.persistSortOrder=!0);C.overflow="hidden";this.callSuper(z,C);new r.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(z){this.grid=z},setColumnSpacing:function(z){this.columnSpacing=z},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:l(0,this.getVisibleHdrs().length-1)*this.columnSpacing},
setPersistSortOrder:function(z){this.persistSortOrder=z},setHeight:function(z){this.callSuper(z);if(this.inited){z=this.height;for(const C of this.columnHeaders)C.setHeight(z)}},setWidth:function(z){this.callSuper(l(this.minWidth,z));this.inited&&(z=this.width,this.setGridWidth(z),this.grid.setWidth(z))},subviewAdded:function(z){this.callSuper(z);z.isA(r.GridColHdr)&&(z.setGridController(this),z.setHeight(this.height))},doSort:function(){this.persistSort();this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},
persistSort:function(){this.persistSortOrder&&d(f(this),this.sort)},notifyHdrXChange:function(z){this.isLocked()||(this.grid.notifyXChange(z),this._notifyHdrChange("X",z))},notifyHdrWidthChange:function(z){this.isLocked()||(this.grid.notifyWidthChange(z),this._notifyHdrChange("Width",z))},updateRowsForVisibilityChange:function(z){this.grid.notifyVisibilityChange(z);this.isLocked()||this._notifyHdrChange("Visibility",z)}})})(myt);
(r=>{const x=JS.Class,v=r.PanelStackTransition=new x("PanelStackTransition",r.Node,{to:t=>Promise.resolve(t),from:t=>Promise.resolve(t)});r.PanelStack=new x("PanelStack",r.View,{include:[r.SelectionManager],initNode:function(t,l){l.overflow="hidden";l.itemSelectionId??(l.itemSelectionId="panelId");l.maxSelected??(l.maxSelected=1);this.callSuper(t,l);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(t){this.set("transition",t,!0)},__updateWidth:function(t){this.getActivePanel()?.setWidth(t.value)},
__updateHeight:function(t){this.getActivePanel()?.setHeight(t.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(t){return this.getSelectableItem(t)},selectPanel:function(t){this.selectById(t)},doSelected:function(t){t.setWidth(this.width);t.setHeight(this.height)},doStackTransition:function(t){this["doStackTransition"+(t.selected?"To":"From")](t)},doStackTransitionTo:function(t){const l=this;l.doBeforeTransitionTo(t);const e=l.transition;e?e.to(t).then(d=>{l.doAfterTransitionTo(d)}):
(t.makeHighestZIndex(),t.setVisible(!0),l.doAfterTransitionTo(t))},doBeforeTransitionTo:t=>{},doAfterTransitionTo:t=>{},doStackTransitionFrom:function(t){const l=this;l.doBeforeTransitionFrom(t);const e=l.transition;e?e.from(t).then(d=>{l.doAfterTransitionFrom(d)}):(t.setVisible(!1),l.doAfterTransitionFrom(t))},doBeforeTransitionFrom:t=>{},doAfterTransitionFrom:t=>{}});r.StackablePanel=new JS.Module("StackablePanel",{include:[r.Selectable],initNode:function(t,l){l.visible=l.selected=!1;l.bgColor??
(l.bgColor="#fff");l.panelId??(l.panelId=l.name);this.callSuper(t,l);this.selected&&this.doStackTransition()},setPanelStack:function(t){this.panelStack=t},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(t){this.panelId=t},setSelected:function(t){this.selected!==t&&(this.callSuper(t),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});r.PanelStackFadeTransition=new x("PanelStackFadeTransition",v,{initNode:function(t,
l){l.duration??(l.duration=1E3);this.callSuper(t,l)},setDuration:function(t){this.duration=t},to:function(t){return new Promise((l,e)=>{t.stopActiveAnimators("opacity");t.setVisible(!0);t.animate({attribute:"opacity",to:1,duration:this.duration}).next(d=>{t.makeHighestZIndex();l(t)})})},from:function(t){return new Promise((l,e)=>{t.stopActiveAnimators("opacity");t.animate({attribute:"opacity",to:0,duration:this.duration}).next(d=>{t.setVisible(!1);l(t)})})}});r.PanelStackSlideTransition=new x("PanelStackSlideTransition",
v,{initNode:function(t,l){l.duration??(l.duration=1E3);l.direction??(l.direction="right");this.callSuper(t,l)},setDuration:function(t){this.duration=t},setDirection:function(t){this.direction=t},to:function(t){const l=t.getPanelStack(),e=this.duration;let d,h;switch(this.direction){case "left":h="x";d=l.width;break;case "right":h="x";d=-l.width;break;case "up":h="y";d=l.height;break;case "down":h="y",d=-l.height}t.stopActiveAnimators(h);t.set(h,d);t.setVisible(!0);return new Promise((n,c)=>{c=g=>
{t.makeHighestZIndex();n(t)};0<e?t.animate({attribute:h,to:0,duration:e}).next(c):(t.set(h,0),t.makeHighestZIndex(),n(t))})},from:function(t){const l=t.getPanelStack(),e=this.duration;let d,h;switch(this.direction){case "left":h="x";d=-l.width;break;case "right":h="x";d=l.width;break;case "up":h="y";d=-l.height;break;case "down":h="y",d=l.height}t.stopActiveAnimators(h);return new Promise((n,c)=>{c=g=>{t.setVisible(!1);n(t)};0<e?t.animate({attribute:h,to:d,duration:e}).next(c):(t.set(h,d),t.setVisible(!1),
n(t))})}})})(myt);
(r=>{const x=JS.Module,{Draggable:v,global:{dragManager:t,mouse:l}}=r,e=(h,n,c)=>{for(const g of[n,c])h["__is"+g]=!1,h["__tmrId"+g]=null},d=r.DragGroupSupport=new x("DragGroupSupport",{initNode:function(h,n){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(h,n)},setDragGroups:function(h){const n=this.__dgs={};for(const c in h)n[c]=!0;this.__anyDG=n.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(h){const n=this.__drpgs=
{};for(const c in h)n[c]=!0;this.__anyDRPG=n.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(h){h&&(this.__dgs[h]=!0,"*"===h&&(this.__anyDG=!0))},removeDragGroup:function(h){h&&(delete this.__dgs[h],"*"===h&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(h){h&&(this.__drpgs[h]=!0,"*"===h&&(this.__anyDRPG=!0))},removeDropGroup:function(h){h&&(delete this.__drpgs[h],"*"===h&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
r.DropSource=new x("DropSource",{include:[v],initNode:function(h,n){n.distanceBeforeDrag??(n.distanceBeforeDrag=2);n.dropParent??(n.dropParent=h.getRoot());this.callSuper(h,n)},setDropClass:function(h){this.dropClass=r.resolveClassname(h)},setDropClassAttrs:function(h){this.dropClassAttrs=h},setDropParent:function(h){this.dropParent=h},startDrag:function(h){const n=this.dropable=this.makeDropable();if(n){const c=n.distanceBeforeDrag;n.distanceBeforeDrag=0;n.doMouseDown(h);n.__doMouseDown(h);n.distanceBeforeDrag=
c}},doMouseUp:function(h){this.callSuper(h);const n=this.dropable;n&&(n.__doMouseUp(h),n.doMouseUp(h),this.dropable=null)},makeDropable:function(){const h=this.dropClass,n=this.dropParent;if(h&&n){const c=r.DomElementProxy.getRelativePosition(this.getIDE(),n.getIDE());return new h(n,{...this.dropClassAttrs,x:c.x??0,y:c.y??0})}}});r.DropTarget=new x("DropTarget",{include:[d],initNode:function(h,n){this.callSuper(h,n);t.registerDropTarget(this)},destroy:function(){t.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(h){return!this.disabled&&this.isVisible()},notifyDragStart:h=>{},notifyDragStop:h=>{},notifyDragEnter:h=>{},notifyDragLeave:h=>{},notifyDrop:h=>{}});r.Dropable=new x("Dropable",{include:[v,d],setDropTarget:function(h){this.dropTarget=h},setDropped:function(h){this.dropped=h},setDropFailed:function(h){this.dropFailed=h},willPermitDrop:h=>!0,startDrag:function(h){this.setDropped(!1);this.setDropFailed(!1);t.startDrag(this);this.callSuper(h)},updateDrag:function(h){t.updateDrag(h,
this);this.callSuper(h)},stopDrag:function(h,n){t.stopDrag(h,this,n);this.callSuper(h,n);n?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(h){this.setDropTarget(h)},notifyDragLeaving:function(h){this.setDropTarget()},notifyDropped:function(h,n){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});r.AutoScroller=new x("AutoScroller",{include:[d],initNode:function(h,n){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;n.overflow??(n.overflow="auto");this.callSuper(h,n);t.registerAutoScroller(this)},destroy:function(){t.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(h){this.scrollBorder=Math.max(1,h)},setScrollFrequency:function(h){this.scrollFrequency=h},setScrollAmount:function(h){this.scrollAmount=h},setScrollAcceleration:function(h){this.scrollAcceleration=h},notifyAutoScrollerDragStart:function(h){h=this.getIDE();(h.scrollHeight>h.clientHeight||
h.scrollWidth>h.clientWidth)&&this.attachToDom(l,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(h){this.detachFromDom(l,"__hndlMove","mousemove",!0);e(this,"Up","Down");e(this,"Left","Right")},__hndlMove:function(h){const n=this;let {pageX:c,pageY:g}=h.value;if(n.containsPoint(c,g)){h=n.getPagePosition();const a=n.scrollBorder,f=(b,q)=>{n["__is"+b]&&(n.getIDE()["scroll"+("Up"===b||"Down"===b?"Top":"Left")]+=q*n["__amt"+b],n["__tmrId"+b]=setTimeout(()=>{f(b,q)},n.scrollFrequency))};
c-=h.x;g-=h.y;g<a?(n.__isUp=!0,n.__amtUp=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-g/a))),n.__tmrIdUp||f("Up",-1)):n.height-g<a?(n.__isDown=!0,n.__amtDown=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-(n.height-g)/a))),n.__tmrIdDown||f("Down",1)):e(n,"Up","Down");c<a?(n.__isLeft=!0,n.__amtLeft=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-c/a))),n.__tmrIdLeft||f("Left",-1)):n.width-c<a?(n.__isRight=!0,n.__amtRight=Math.round(n.scrollAmount*(1+n.scrollAcceleration*(1-(n.width-
c)/a))),n.__tmrIdRight||f("Right",1)):e(n,"Left","Right")}else e(n,"Up","Down"),e(n,"Left","Right")}})})(myt);
(r=>{const {max:x,cos:v,sin:t,PI:l}=Math,e=r.Geometry.degreesToRadians,d=a=>{var f=e(a.startAngle),b=e(a.endAngle);if(f>b){var q=f;f=b;b=q}q=a.__path;var w=a.width/2,k=a.thickness;const u=a.radius,B=u+k;var I=b-f;const z=I+1E-4>=2*l;z&&(f=0,b=l);const C=[w+B*v(f),w+B*t(f)],J=[w+B*v(b),w+B*t(b)];b=[w+u*v(b),w+u*t(b)];f=[w+u*v(f),w+u*t(f)];w=["M"+C.join()];z?w.push("A"+[B,B,0,1,1,J].join(),"A"+[B,B,0,1,1,C].join(),"L"+b.join(),"A"+[u,u,0,1,0,f].join(),"A"+[u,u,0,1,0,b].join()):(I=I%(2*l)>l?1:0,k/=2,
w.push("A"+[B,B,0,I,1,J].join(),a.endCapRounding?"A"+[k,k,0,0,1,b].join():"L"+b.join(),"A"+[u,u,0,I,0,f].join(),a.startCapRounding?"A"+[k,k,0,0,1,C].join():""));w.push("z");q.setAttribute("d",w.join(" "));q.setAttribute("fill",a.color)},h=a=>{const f=2*(a.radius+a.thickness),b=a.__svg;a.setWidth(f);a.setHeight(f);b.setAttribute("viewBox","0 0 "+f+" "+f);b.setAttribute("width",f);b.setAttribute("height",f);d(a)},n=(a,f,b)=>{a[f]!==b&&(a[f]=b,a.inited&&(d(a),a.fireEvent(f,b)))},c=(a,f,b)=>{a[f]!==b&&
(a[f]=b=x(0,b),a.inited&&(h(a),a.fireEvent(f,b)))},g=(a,f)=>{a=document.createElementNS("http://www.w3.org/2000/svg",a);f?.appendChild(a);return a};r.Annulus=new JS.Class("Annulus",r.BackView,{initNode:function(a,f){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(a,f);h(this)},createOurDomElement:function(a){a=this.callSuper(a);var f=Array.isArray(a)?a[1]:a;f=this.__svg=g("svg",f);this.__path=g("path",f);f.style.pointerEvents=
"none";return a},setRadius:function(a){c(this,"radius",a)},setThickness:function(a){c(this,"thickness",a)},setStartAngle:function(a){n(this,"startAngle",a)},setEndAngle:function(a){n(this,"endAngle",a)},setStartCapRounding:function(a){n(this,"startCapRounding",a)},setEndCapRounding:function(a){n(this,"endCapRounding",a)},setColor:function(a){n(this,"color",a)},isColorAttr:function(a){return"color"===a||this.callSuper(a)}})})(myt);
(r=>{const x=JS.Class,v=r.RadialGuage=new x("RadialGuage",r.View,{include:[r.BoundedValueComponent],initNode:function(t,l){l.radius??(l.radius=32);l.thickness??(l.thickness=4);l.startAngle??(l.startAngle=270);l.color??(l.color="#666");this.quickSet(["radius","thickness","startAngle","color"],l);const e=this.thickness,d=this.radius;l.width=l.height=2*d;l.minValue??(l.minValue=0);l.maxValue??(l.maxValue=100);l.value??(l.value=0);l.bgColor??(l.bgColor="#fff");l.roundedCorners=d+e;l.borderWidth??(l.borderWidth=
e);l.borderStyle??(l.borderStyle="solid");l.borderColor??(l.borderColor="#ccc");this.callSuper(t,l);this._progressView=new r.Annulus(this,{x:-e,y:-e,radius:d,thickness:e,startAngle:this.startAngle});this._valueView=new r.Text(this,{fontSize:d+"px",align:"center",valign:"middle"});this.redraw()},setMinValue:function(t){this.callSuper(t);this.inited&&this.redraw()},setMaxValue:function(t){this.callSuper(t);this.inited&&this.redraw()},setValue:function(t){this.callSuper(t);this.inited&&this.redraw()},
redraw:function(){const t=this._progressView,l=this._valueView,e=this.value,d=e/(this.maxValue-this.minValue),h=this.getColorByValue(e,d);t.setEndAngle(this.startAngle+360*d);t.setColor(h);l.setText(this.getTextByValue(e));l.setTextColor(h);this.setTooltip(this.getTooltipByValue(e))},getColorByValue:function(t,l){return this.color},getTooltipByValue:function(t){return this.getTextByValue(t)},getTextByValue:function(t){return""+t}});r.ColorThresholdRadialGuage=new x("ColorThresholdRadialGuage",v,{initNode:function(t,
l){l.thresholdType??(l.thresholdType="percent");l.thresholds??(l.thresholds=[]);this.quickSet(["thresholdType","thresholds"],l);this.thresholds.sort((e,d)=>d.value-e.value);this.callSuper(t,l)},getColorByValue:function(t,l){const e="percent"===this.thresholdType?l:t;for(const d of this.thresholds)if(e>=d.value)return d.color;return this.callSuper(t,l)}})})(myt);
(r=>{let x;const v=JS.Class,{mouse:t,windowResize:l,dragManager:e}=r.global,{min:d,max:h,round:n}=Math,c=b=>{if(b.tooltip){const q=b._lastPos;if(b.tooltip.parent.containsPoint(q.x,q.y))return!0}b.hideTip();return!1},g=r.BaseTooltip=new v("BaseTooltip",r.View,{include:[r.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(b,q){this.tipDelay=this.nextTipDelay=g.TIP_DELAY;this.tipHideDelay=g.TIP_HIDE_DELAY;q.visible??(q.visible=!1);this.callSuper(b,q)},setTooltip:function(b){this.inited&&
(this.tooltip=b)&&(this.attachToDom(t,"__hndl_mousemove","mousemove",!0),this.attachToDom(b.parent,"hideTip","mousedown",!0),this.attachToDom(b.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(b){const q=this;q._lastPos=r.MouseObservable.getMouseFromEvent(b);c(q)&&(q.__checkTID&&(clearTimeout(q.__checkTID),delete q.__checkTID),q.__checkTID=setTimeout(()=>{delete q.__checkTID;c(q)&&q.showTip()},q.nextTipDelay))},hideTip:function(b){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(b=this.tooltip?.parent)this.detachFromDom(b,"hideTip","mousedown",!0),this.detachFromDom(b,"hideTip","mouseup",!0),this.detachFromDom(t,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){e.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),a=r.Tooltip=new v("Tooltip",g,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(b,q){q.edgeSize??(q.edgeSize=a.EDGE_SIZE);q.edgeColor??(q.edgeColor=a.EDGE_COLOR);q.shadowSize??(q.shadowSize=a.SHADOW_SIZE);q.shadowColor??(q.shadowColor=a.SHADOW_COLOR);q.insetH??(q.insetH=a.HORIZONTAL_INSET);q.insetV??(q.insetV=a.VERTICAL_INSET);q.tipBgColor??(q.tipBgColor=a.TIP_BG_COLOR);q.tipTextColor??(q.tipTextColor=a.TIP_TEXT_COLOR);this.callSuper(b,q);this._tipText=new r.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(b){this.edgeSize=b},setEdgeColor:function(b){this.edgeColor=b},setShadowSize:function(b){this.shadowSize=b},setShadowColor:function(b){this.shadowColor=b},setInsetH:function(b){this.insetH=b},setInsetV:function(b){this.insetV=b},setTipBgColor:function(b){this.tipBgColor=b},setTipTextColor:function(b){this.tipTextColor=b},showTip:function(){const b=this.tooltip;var q=b.text;const w=b.parent;var k=this._tipText;const u=this.edgeSize,B=this.shadowSize;k.text!==
q&&k.setText(q);k.setWidth("auto");var I=d(k.measureNoWrapWidth(),b.maxTextWidth);q=I+2*k.x;const z=q+2*u;k.setWidth(I);k.sizeViewToDom();I=w.getPagePosition();k=k.height+2*k.y;const C=k+2*u,J=I.y-C+("below"===b.tipvalign?w.height+C:0);I=I.x;switch(b.tipalign){case "right":I-=z;case "farright":I+=w.width;break;case "farleft":I-=z}this.setX(n(d(h(I,0),l.getWidth()-z)));this.setY(n(d(h(J,0),l.getHeight()-C)));this.setWidth(q);this.setHeight(k);this.setBgColor(this.tipBgColor);this.setBorder([u,"solid",
this.edgeColor]);this.setBoxShadow([B,B,B,this.shadowColor]);this.callSuper()}}),f=r.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:a,MAX_TEXT_WIDTH:280},setTooltip:function(b){this.callSuper("");this.set("tooltip",b,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(b){this.set("tipAlign",b,!0)},setTipValign:function(b){this.set("tipValign",b,!0)},setMaxTextWidth:function(b){this.set("maxTextWidth",b,!0)},setTipClass:function(b){this.set("tipClass",b,!0)},doSmoothMouseOver:function(b){const q=
this.getTooltip();this.callSuper(b);if(b&&q){b=this.tipClass??f.TIP_CLASS;!x||x instanceof b||(x.destroy(),x=null);if(!x){let w=document.getElementById("tooltipDiv");w||(w=r.DomElementProxy.createElement("div",{position:"absolute"}),r.getElement().appendChild(w));x=new b(w,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:q,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||f.MAX_TEXT_WIDTH})}}})})(myt);
(r=>{const x=Math,{min:v,max:t}=x;r.Path=new JS.Class("Path",{initialize:function(l){this.setVectors(l??[])},setVectors:function(l){this._boundingBox=null;this.vectors=l},copyFrom:function(l){this.vectors=l.vectors.slice();this._boundingBox=null},drawInto:function(l){l.beginPath();const e=this.vectors;let d=e.length,h=0;for(l.moveTo(e[h++],e[h++]);d>h;)l.lineTo(e[h++],e[h++]);l.closePath()},translate:function(l,e){const d=this.vectors;let h=d.length;for(;h;)d[--h]+=e,d[--h]+=l;this._boundingBox=null},
scale:function(l){const e=this.vectors;let d=e.length;for(;d;)e[--d]*=l,e[--d]*=l;this._boundingBox=null},rotate:function(l){const e=x.cos(l);l=x.sin(l);const d=this.vectors,h=d.length;for(let n=0;h>n;){const c=d[n]*e-d[n+1]*l,g=d[n]*l+d[n+1]*e;d[n++]=c;d[n++]=g}this._boundingBox=null},rotateAroundOrigin:function(l,e,d){this.translate(-e,-d);this.rotate(l);this.translate(e,d)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const l=this.vectors;let e=l.length,d,h,n,c;if(2<=
e){n=c=l[--e];for(d=h=l[--e];e;){const g=l[--e],a=l[--e];n=v(g,n);c=t(g,c);d=v(a,d);h=t(a,h)}return this._boundingBox={x:d,y:n,width:h-d,height:c-n}}return this._boundingBox=null},getCenter:function(){const l=this.getBoundingBox();return l?{x:l.x+l.width/2,y:l.y+l.height/2}:null},isPointInPath:function(l,e){"object"===typeof l&&(e=l.y,l=l.x);return r.Geometry.isPointInPath(l,e,this.getBoundingBox(),this.vectors)}})})(myt);
(r=>{const x=console.warn,v=Math.PI,t=v/2,l=3*v/2,e=r.AccessorSupport,d={};for(const h of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))d[h]=function(...n){this.__ctx[h](...n)};for(const h of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])d[h]=
function(...n){return this.__ctx[h](...n)};for(const h of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))d[e.generateSetterName(h)]=function(n){this.__ctx[h]=n},d[e.generateGetterName(h)]=function(){return this.__ctx[h]};r.Canvas=new JS.Class("Canvas",r.BackView,{include:[d],initNode:function(h,n){this.quickSet(["willReadFrequently"],n);this.callSuper(h,n)},
createOurDomElement:function(h){h=this.callSuper(h);var n=Array.isArray(h)?h[1]:h;const c=this.__cvs=document.createElement("canvas");c.className="mytUnselectable";n.appendChild(c);c.style.position="absolute";n={};this.willReadFrequently&&(n.willReadFrequently=!0);this.__ctx=c.getContext("2d",n);return h},setWidth:function(h){0>h&&(h=0);this.__cvs.setAttribute("width",h);this.callSuper(h)},setHeight:function(h){0>h&&(h=0);this.__cvs.setAttribute("height",h);this.callSuper(h)},clear:function(){const h=
this.__ctx;h.save();h.setTransform(1,0,0,1,0,0);h.clearRect(0,0,this.width,this.height);h.restore()},dataURItoBlob:function(h,n){h=atob(h.split(",")[1]);const c=h.length,g=[];for(let a=0;a<c;)g.push(h.charCodeAt(a++));return new Blob([new Uint8Array(g)],{type:n})},getDataURL:function(h,n){return this.__cvs.toDataURL(h,n)},getImageFile:function(h,n,c){switch(h){case "png":case "PNG":h="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":h="jpeg";c??=.5;break;default:x("Unexpected image type",
h),h=h.toLowerCase()}const g="image/"+h;c=this.dataURItoBlob(this.getDataURL(g,c),g);n&&(c.name=n+"."+h);return c},circle:function(h,n,c){this.__ctx.arc(h,n,c,0,2*v)},drawRoundedRect:function(h,n,c,g,a,f){const b=this.lineTo.bind(this),q=this.arc.bind(this);f=g+f;a=c+a;this.beginPath();this.moveTo(c,g+h);b(c,f-h);q(c+h,f-h,h,v,t,!0);b(a-h,f);q(a-h,f-h,h,t,0,!0);b(a,g+h);q(a-h,g+h,h,0,l,!0);b(c+h,g);q(c+h,g+h,h,l,v,!0);this.closePath();0<n&&(h-=n,c+=n,a-=n,g+=n,f-=n,this.moveTo(c,g+h),q(c+h,g+h,h,
v,l),b(a-h,g),q(a-h,g+h,h,l,0),b(a,f-h),q(a-h,f-h,h,0,t),b(c+h,f),q(c+h,f-h,h,t,v),this.closePath());return this},drawRectOutline:function(h,n,c,g,a){a=c+a;g=n+g;const f=n+h,b=g-h,q=c+h;h=a-h;const w=this.lineTo.bind(this);this.beginPath();this.moveTo(n,c);w(n,a);w(g,a);w(g,c);w(n,c);w(f,q);w(b,q);w(b,h);w(f,h);w(f,q);this.closePath();return this},drawPartiallyRoundedRect:function(h,n,c,g,a,f,b,q){q=f+q;b=a+b;const w=this.lineTo.bind(this),k=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(a,
f+h);w(a,q-c);0<c&&k(a,q,a+c,q);w(b-g,q);0<g&&k(b,q,b,q-g);w(b,f+n);0<n&&k(b,f,b-n,f);w(a+h,f);0<h&&k(a,f,a,f+h);this.closePath();return this},drawAnnulus:function(h,n,c,g,a,f,b,q=60){const w=r.Color;for(var k of b)"string"===typeof k.color&&(k.color=w.makeColorFromHexString(k.color));1>q&&(x("Invalid segements",q),q=60);q=v/q;k=0;for(var u=b.length-1;k<u;){var B=b[k++];const {angle:y,color:A}=B,{angle:E,color:F}=b[k];var I=Math.round((E-y)/q),z=A.getDiffFrom(F);B.colorDelta={red:z.red/I,green:z.green/
I,blue:z.blue/I}}c=new r.Path([h+c,n,h+g,n]);c.rotateAroundOrigin(a,h,n);g=c.vectors;let [C,J,M,O]=g,m=0,p=v/360;for(k=0;f>a;){I=C;z=J;u=M;B=O;a+=q;a>f&&(q+=f-a,p=0,a=f);c.rotateAroundOrigin(q+p,h,n);[C,J,M,O]=g;this.beginPath();this.moveTo(I,z);this.lineTo(u,B);this.lineTo(M,O);this.lineTo(C,J);this.closePath();const {color:y,colorDelta:A}=b[k];this.setFillStyle(w.rgbToHex(y.red+m*A.red,y.green+m*A.green,y.blue+m*A.blue,!0));this.fill();0<p&&(c.rotateAroundOrigin(-p,h,n),[C,J,M,O]=g);m++;a>=b[k+
1].angle&&(m=0,k++)}return this}})})(myt);
(r=>{const {Class:x,Module:v}=JS,{View:t,Text:l,FontAwesome:{makeTag:e}}=r;r.GrowlManager=new x("GrowlManager",t,{include:[r.SizeToWindowHeight],initNode:function(g,a){const f=this;a.overflow??(a.overflow="autoy");a.margin??(a.margin=8);a.spacing??(a.spacing=4);a.reverse??(a.reverse=!0);a.width??(a.width=300);a.visible??(a.visible=!1);a.pointerEvents??(a.pointerEvents="none");a.moveDuration??(a.moveDuration=300);a.dedupe??(a.dedupe=!0);a.simpleGrowlClass??(a.simpleGrowlClass=r.SimpleGrowl);f.quickSet(["moveDuration",
"dedupe"],a);f.callSuper(g,a);f.doAlignment();const b=f.moveDuration;new r.SpacedLayout(f,{axis:"y",reverse:f.reverse,spacing:f.spacing},[{updateParent:function(q,w){0<b?(f.stopActiveAnimators("height"),f.animate({attribute:"height",to:w+this.outset-this.spacing,duration:b})):this.callSuper(q,w)},updateSubview:function(q,w,k,u){return 0<b?(w.stopActiveAnimators("y"),w.animate({attribute:"y",to:u,duration:b}),u+w.height+this.spacing):this.callSuper(q,w,k,u)}}])},setHeight:function(g){this.callSuper(g-
2*this.margin)},setVisible:function(g){this.visible!==g&&(this.visible=g,this.getODS().display=g?"block":"none",this.inited&&this.fireEvent("visible",g))},setMargin:function(g){this.set("margin",g,!0);this.getODS().margin=g+"px"},setSpacing:function(g){this.set("spacing",g,!0)},setReverse:function(g){this.set("reverse",g,!0)},doAlignment:function(){const g=this.getODS();g.left=null;g.right="0px"},notifyChanged:function(){this.setVisible(0<this.getSubviews().length)},subviewAdded:function(g){this.callSuper(g);
this.notifyChanged()},subviewRemoved:function(g){this.callSuper(g);this.notifyChanged()},addGrowl:function(g){if(this.dedupe){const a=g.getHash(),f=this.getSubviews();let b=f.length;for(;b;){const q=f[--b];if(q!==g&&q.getHash?.()===a){this.removeGrowl(q);break}}}g.setVisible(!0)},removeGrowl:function(g){g.destroy()},addSimpleGrowl:function(g,a){this.addGrowl(new this.simpleGrowlClass(this,{text:g,...(a??{})}))}});r.KeepShowingMixin=new v("KeepShowingMixin",{include:[r.MouseOver],initNode:function(g,
a){a.initialKeepDuration??(a.initialKeepDuration=-1);a.keepDuration??(a.keepDuration=-1);this.quickSet(["initialKeepDuration","keepDuration"],a);this.callSuper(g,a);g=this.initialKeepDuration;0<=g&&this.keepShowing(!1,g)},keepShowing:function(g,a){const f=this;a??=f.keepDuration;(f.__keepShowing=g)&&f.__timerIdKS&&clearTimeout(f.__timerIdKS);0<=a&&!g&&(f.__timerIdKS=setTimeout(()=>{("function"===typeof f.isShown?f.isShown():f.visible)&&!f.__keepShowing&&("function"===typeof f.hide?f.hide(!0):f.setVisible(!1))},
a))},doMouseOver:function(g){this.keepShowing(!0);this.callSuper(g)},doMouseOut:function(g){this.keepShowing(!1);this.callSuper(g)}});r.KeepShowingChildMixin=new v("KeepShowingChildMixin",{doMouseOver:function(g){this.callSuper(g);return!0},doMouseOut:function(g){this.callSuper(g);return!0}});r.GrowlMixin=new v("GrowlMixin",{include:[r.SizeToParent,r.KeepShowingMixin],initNode:function(g,a){a.percentOfParentWidth??(a.percentOfParentWidth=100);a.pointerEvents??(a.pointerEvents="auto");a.overflow??
(a.overflow="hidden");a.bgColor??(a.bgColor="#fff");a.roundedCorners??(a.roundedCorners=3);a.boxShadow??(a.boxShadow=[0,0,8,"#00000088"]);a.initialKeepDuration??(a.initialKeepDuration=5E3);a.keepDuration??(a.keepDuration=1E3);a.showDuration??(a.showDuration=300);a.hideDuration??(a.hideDuration=300);this.quickSet(["showDuration","hideDuration"],a);a.opacity=0;a.visible=!1;this.callSuper(g,a)},setVisible:function(g){const a=this;a.inited?(a.stopActiveAnimators("opacity"),g?(a.animate({attribute:"opacity",
to:1,duration:a.showDuration}),a.callSuper(g)):a.animate({attribute:"opacity",to:0,duration:a.hideDuration}).next(f=>{a.parent.removeGrowl(a)})):a.callSuper(g)},getHash:function(){return this.hash??(this.hash=r.hash(this.getHashableString()))},getHashableString:()=>""+r.generateGuid()});const d=e(["times"]),h=e(["clipboard-check"]),n="maxHeight icon iconSize text padding spacing whiteSpace showCloseButton closeIcon closeOnly showCopyButton copyIcon".split(" "),c=new x("LocalTxtBtn",r.TextButton,{include:[r.KeepShowingChildMixin],
initNode:function(g,a){a.width??(a.width=24);a.height??(a.height=24);a.paddingTop??(a.paddingTop=4);a.activeColor??(a.activeColor="#ccc");a.hoverColor??(a.hoverColor="#ddd");a.readyColor??(a.readyColor="#eee");this.callSuper(g,a)}});r.SimpleGrowl=new x("SimpleGrowl",t,{include:[r.GrowlMixin],initNode:function(g,a){const f={};a.maxHeight??(a.maxHeight=100);a.spacing??(a.spacing=6);a.padding??(a.padding=12);a.whiteSpace??(a.whiteSpace="normal");a.iconSize??(a.iconSize="24px");a.showCloseButton??(a.showCloseButton=
!1);a.showCloseButton&&(a.closeIcon??(a.closeIcon=d),a.closeOnly??(a.closeOnly=!1));a.showCopyButton??(a.showCopyButton=!1);a.showCopyButton&&(a.copyIcon??(a.copyIcon=h));for(const k of n)f[k]=a[k],delete a[k];f.closeOnly&&(a.initialKeepDuration=a.keepDuration=-1);this.callSuper(g,a);const {maxHeight:b,padding:q,icon:w}=f;w&&(this.iconTxt=new l(this,{y:q,text:w,fontSize:f.iconSize}));g=this.msgTxt=new l(this,{y:q,text:f.text,whiteSpace:f.whiteSpace,layoutHint:1});0<b&&(g.setOverflow("autoy"),g.getIDS().maxHeight=
b+"px");f.showCopyButton&&(this.copyBtn=this.makeCopyButton(f),g.setUserUnselectable(!1));f.showCloseButton&&(this.closeBtn=this.makeCloseButton(f));new r.ResizeLayout(this,{inset:q,spacing:f.spacing,outset:q});new r.SizeToChildren(this,{axis:"y",paddingY:q})},makeCloseButton:function(g){const a=this;new c(a,{y:g.padding,text:g.closeIcon,tooltip:"Dismiss this notification."},[{doActivated:()=>{a.parent.removeGrowl(a)}}])},makeCopyButton:function(g){const a=this;new c(a,{y:g.padding,text:g.copyIcon,
tooltip:"Copy to system clipboard."},[{doActivated:()=>{navigator.clipboard.writeText(a.msgTxt.text)}}])},getHashableString:function(){return this.iconTxt?.text+" | "+this.msgTxt.text}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
