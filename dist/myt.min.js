(t=>{let x;var w=c=>{let h=c.length;for(;h;){const m=c[--h];x=m.ver??m.id;if(m.str?.includes(m.sub)||m.prop)return m.id}};var u=c=>{const h=c.indexOf(x);if(0<=h)return parseFloat(c.slice(h+x.length+1))};const l=navigator.userAgent,d=navigator.platform;u=t.BrowserDetect={browser:w([{prop:window.opera,id:"Opera",ver:"Version"},{str:navigator.vendor,sub:"Apple",id:"Safari",ver:"Version"},{str:l,sub:"Firefox",id:"Firefox"},{str:l,sub:"Chrome",id:"Chrome"},{str:l,sub:"MSIE",id:"Explorer",ver:"MSIE"}])??
"UNKNOWN",version:u(l)||u(navigator.appVersion)||"UNKNOWN",os:w([{str:l,sub:"iPhone",id:"iPhone/iPod"},{str:d,sub:"Linux",id:"Linux"},{str:d,sub:"Mac",id:"Mac"},{str:d,sub:"Win",id:"Windows"}])??"UNKNOWN"};switch(u.browser){case "Chrome":case "Safari":t="WebKit";break;case "Explorer":t="MS";break;case "Firefox":t="Moz";break;case "Opera":t="O";break;default:t="UNKNOWN"}w=t.toLowerCase();u.prefix={dom:t,lowercase:w,css:"-"+w+"-",js:w[0].toUpperCase()+w.substr(1)}})(global);
Date.prototype.format=Date.prototype.format??(()=>{const {abs:t,floor:x,ceil:w}=Math,u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),d="Sun Mon Tue Wed Thu Fri Sat".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h=e=>(10>e?"0":"")+e,m=(e,f)=>{e=e.getTimezoneOffset();return(0<e?"-":"+")+h(x(t(e/60)))+(f?":":"")+(0==t(e%60)?"00":h(t(e%60)))},a={d:e=>
h(e.getDate()),D:e=>d[e.getDay()],j:e=>e.getDate(),l:e=>c[e.getDay()],N:e=>0==e.getDay()?7:e.getDay(),S:e=>{e=e.getDate();return 1==e%10&&11!=e?"st":2==e%10&&12!=e?"nd":3==e%10&&13!=e?"rd":"th"},w:e=>e.getDay(),z:e=>{const f=new Date(e.getFullYear(),0,1);return w((e-f)/864E5)},W:e=>{const f=new Date(e.valueOf());e=(e.getDay()+6)%7;f.setDate(f.getDate()-e+3);e=f.valueOf();f.setMonth(0,1);4!==f.getDay()&&f.setMonth(0,1+(4-f.getDay()+7)%7);return h(1+w((e-f)/6048E5))},F:e=>l[e.getMonth()],m:e=>h(e.getMonth()+
1),M:e=>u[e.getMonth()],n:e=>e.getMonth()+1,t:e=>{let f=e.getFullYear();e=e.getMonth()+1;12===e&&(f=f++,e=0);return(new Date(f,e,0)).getDate()},L:e=>{e=e.getFullYear();return 0==e%400||0!=e%100&&0==e%4},o:e=>{const f=new Date(e.valueOf());f.setDate(f.getDate()-(e.getDay()+6)%7+3);return f.getFullYear()},Y:e=>e.getFullYear(),y:e=>(""+e.getFullYear()).substr(2),a:e=>12>e.getHours()?"am":"pm",A:e=>12>e.getHours()?"AM":"PM",B:e=>x(1E3*((e.getUTCHours()+1)%24+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/
24),g:e=>e.getHours()%12||12,G:e=>e.getHours(),h:e=>h(e.getHours()%12||12),H:e=>h(e.getHours()),i:e=>h(e.getMinutes()),s:e=>h(e.getSeconds()),e:e=>/\((.*)\)/.exec((new Date).toString())[1],I:e=>{let f=null,g=0;for(;12>g;){const b=(new Date(e.getFullYear(),g++,1)).getTimezoneOffset();if(null===f)f=b;else if(b<f){f=b;break}else if(b>f)break}return e.getTimezoneOffset()==f|0},O:e=>m(e,!1),P:e=>m(e,!0),T:e=>Intl.DateTimeFormat().resolvedOptions().timeZone,Z:e=>60*-e.getTimezoneOffset(),c:e=>e.format("Y-m-d\\TH:i:sP"),
r:e=>e.toString(),U:e=>e.getTime()/1E3,x:e=>e.toLocaleDateString(),X:e=>e.toLocaleTimeString()};return function(e){return e.replace(/(\\?)(.)/g,(f,g,b)=>""===g&&a[b]?a[b](this):b)}})();
(t=>{const x=(g,b)=>{var p=g.__mct__.get(b);if(p)return p.slice();const n=[];if(p=g.__anc__){const q=p.length;for(let r=0;r<q;){const z=p[r++].__fns__;z.has(b)&&n.push(z.get(b))}}else{const q=g.__anc__=[],r=z=>{const E=z.__inc__,G=E.length;for(let L=0;L<G;)r(E[L++]);q.includes(z)||(q.push(z),z=z.__fns__,z.has(b)&&n.push(z.get(b)))};r(g)}g.__mct__.set(b,n.slice());return n},w=(g,b)=>{const p=g.callable;return g.__hs?function(...n){const q=this.callSuper,r=x(b,g.name);let z=r.length-1;if(0===z)q&&delete this.callSuper;
else{const G=n.length,L=this.callSuper=(...J)=>{for(let N=J.length;N<G;)J[N]=n[N++];0===--z&&delete this.callSuper;J=r[z].callable.call(this,...J);this.callSuper=L;z++;return J}}const E=p.call(this,...n);q?this.callSuper=q:delete this.callSuper;return E}:p},u=(g,b)=>{b=b??g;if(b===g){g.__anc__=null;g.__mct__=new Map;var p=g.__dep__;for(var n=p.length;0<n;)u(p[--n])}p=b.__tgt__;n=g.__inc__;const q=n.length;for(let r=0;r<q;)u(n[r++],b);for(const [r,z]of g.__fns__)g=z instanceof c?w(z,b):z,p[r]!==g&&
(p[r]=g)},l=g=>g.__meta__??(g.__meta__=new h(null,null,g)).include(g.klass,!0),d=g=>{const b=function(...p){return this.initialize(...p)??this};b.prototype=Object.create(g.prototype);return b},c=d(Object),h=t.Module=d(Object);c.prototype.initialize=function(g,b,p){this.module=g;this.name=b;this.callable=p;this.__hs=p.toString().includes("callSuper")};var m=h.prototype;m.initialize=function(g,b,p){this.__inc__=[];this.__dep__=[];this.__fns__=new Map;this.__mct__=new Map;this.__tgt__=p;g&&(this.__displayName=
g);this.include(b,!0)};m.include=function(g,b){if(g){if(g.__fns__)this.__inc__.push(g),g.__dep__.push(this);else{var p=g.extend,n=g.include;p&&(p.__fns__||"function"!==typeof p)&&this.extend(p);if(n&&(n.__fns__||"function"!==typeof n)){p=n.length;for(let q=0;q<p;)this.include(n[q++],!0)}for(const q of Object.keys(g))if(n=g[q],"extend"!==q&&"include"!==q||!n.__fns__&&"function"===typeof n)this.__fns__.has(q)?(console.warn('JS.Module already has field: "'+q+'" auto generating a JS.Module from the field for inclusion.'),
this.include(new h("Auto_"+q,{[q]:n}),!1)):this.__fns__.set(q,n?.__fns__||"function"!==typeof n?n:new c(this,q,n))}!0!==b&&u(this)}return this};m.includes=function(g){if(g===this)return!0;const b=this.__inc__,p=b.length;for(let n=0;n<p;)if(b[n++].includes(g))return!0;return!1};m.instanceMethod=function(g){return x(this,g).pop()};const a=new h("Kernel",{extend:function(g){l(this).include(g)},isA:function(g){return"function"===typeof g&&this instanceof g||l(this).includes(g)}}),e=t.Class=d(h),f=e.prototype;
f.initialize=function(g,b,p){"function"!==typeof b&&(p=b,b=Object);h.prototype.initialize.call(this,g);g=d(b);for(const n in this)g[n]===this[n]||g.hasOwnProperty(n)||(g[n]=this[n]);g.prototype.constructor=g.prototype.klass=g;l(g).include(b.__meta__);g.__tgt__=g.prototype;b=b===Object?{}:b.__fns__?b:new h(b.prototype,!0);g.include(a,!0).include(b,!0).include(p,!0);u(g);return g};m=(g,b)=>{g.__inc__=[];g.__dep__=[];const p=g.__tgt__=g.prototype,n=g.__fns__=new Map;for(const E of Object.keys(p)){var q=
n,r=q.set;var z=p[E];z=z?.__fns__||"function"!==typeof z?z:new c(g,E,z);r.call(q,E,z)}p.constructor=p.klass=g;for(const E in f)g[E]===f[E]||g.hasOwnProperty(E)||(g[E]=f[E]);g.include(b);g.constructor=g.klass=e};m(c,a);m(h,a);m(e,h);u(l(c));u(l(h));l(e).include(h.__meta__);t.Singleton=new e("Singleton",{initialize:(g,b,p)=>new (new e(g,b,p))})})(global.JS={});
(t=>{class x extends Error{constructor(k,v,...A){super(...A);this.name="FetchError";this.status=k;this.url=v}}let w=0,u;const l=console.warn,d=Math,{abs:c,min:h,max:m,pow:a}=d,e=Array.isArray,f=document,g=f.head,b=f.createElement.bind(f),p={},n={"":!0},q=f.fonts,r=k=>{var v=k.family.split('"').join("");for(const A of[v,v+" "+k.weight])if(!n[A])for(n[A]=!0,v=p[A]??[];v.length;)(k=v.pop())&&!k.destroyed&&k.isVisible()&&k.sizeViewToDom()},z={},E=k=>{const v={};return(...A)=>{const B=JSON.stringify(A);
return B in v?v[B]:v[B]=k(...A)}},G=/\{\{plural:\$(.*?)\|(.*?)\|(.*?)\}\}/g,L=/\$(\d+)/g,J=/(,|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^,"\r\n]*))/gi,N=/[\\"](.)/g,y=t.myt={version:2.02306021558E7,generateGuid:()=>++w,hash:k=>k.split("").reduce((v,A)=>{v=(v<<5)-v+A.charCodeAt(0);return v&v},0),addEventListener:(k,v,A,B,D)=>{k.addEventListener(v,A,{capture:B||!1,passive:D||!1})},removeEventListener:(k,v,A,B)=>{k.removeEventListener(v,A,B||!1)},resolveName:(k,v)=>{if(k&&0!==k.length){v=v??global;var A=
e(k)?k:k.split("."),B=A.length;for(let D=0;D<B;D++)if(v=v[A[D]],null==v){l("resolveName failed for",k,"at part",D,A[D]);return}return v}},resolveClassname:k=>{"string"===typeof k&&(k=y.resolveName(k));return k&&"function"===typeof k.isA&&k.isA(JS.Class)?k:null},getExtension:k=>k?(k=k.split("."),1<k.length?k.pop():null):null,loadScript:function(k,v,A){const B=this._loadedScripts??(this._loadedScripts={});if(B[k])return l("script already loaded for src",k),null;B[k]=!0;const D=b("script");D.type="text/javascript";
D.async=!1;if(v){let H=!1;D.onload=D.onreadystatechange=()=>{H||D.readyState&&"complete"!==D.readyState||(H=!0,D.onload=D.onreadystatechange=null,v())}}D.src=k+(A?"":(k.includes("?")?"&":"?")+"cacheBust="+Date.now());g.appendChild(D);return D},dumpStack:(k,v)=>{let A;"string"===typeof k&&(A=k,k=null);y.global.error.notify(v||"error",null,A,k)},getRandom:k=>{const v=d.random();return k?m(0,h(k(v),.9999999999)):v},getRandomArbitrary:(k,v,A)=>{const B=h(k,v);return y.getRandom(A)*(m(k,v)-B)+B},getRandomInt:(k,
v,A)=>{const B=h(k,v);return d.floor(y.getRandom(A)*(m(k,v)-B+1)+B)},areFloatsEqual:(k,v,A)=>{const B=c(k),D=c(v);return c(k-v)<=(B>D?D:B)*(null==A?1E-6:c(A))},areArraysEqual:(k,v)=>{if(k!==v){if(null==k||null==v)return!1;let A=k.length;if(A!==v.length)return!1;for(;A;)if(k[--A]!==v[A])return!1}return!0},areObjectsEqual:(k,v)=>{if(k!==v){if(null==k||null==v)return!1;for(const A in k)if(k[A]!==v[A])return!1;for(const A in v)if(k[A]!==v[A])return!1}return!0},getElement:(k,v)=>f.getElementsByTagName(k||
"body")[0<v?v:0],loadFontFaces:(k,v)=>{const A=[];for(const B of k)k=new FontFace(B.family,"url("+B.url+")",B.options),A.push(k.load());Promise.all(A).then(B=>{for(const D of B)q.add(D),r(D);v?.(B)})},loadFontFace:(k,v,A={},B)=>{k=new FontFace(k,"url("+v+")",A);k.loaded.then(D=>{q.add(D);r(D);B?.(D)});k.load()},registerForFontNotification:(k,v)=>{n[v]?k&&!k.destroyed&&k.isVisible()&&k.sizeViewToDom():(p[v]??(p[v]=[])).push(k)},createBaseFontCSSRule:k=>{y.addCSSRule(y.createStylesheet(),"body, input",
"font-family:"+k,0)},loadCSSFonts:k=>{k?.forEach(y.createStylesheetLink)},createStylesheetLink:k=>{const v=b("link");v.rel="stylesheet";k&&(v.href=k);g.appendChild(v);return v},createStylesheet:()=>{const k=b("style");g.appendChild(k);return k.sheet},addCSSRule:(k,v,A,B)=>{k.insertRule(v+"{"+A+"}",B)},removeCSSRules:k=>{let v=k.cssRules.length;for(;v;)k.deleteRule(--v)},createInputPlaceholderCSSRule:(k,v,A,B=1)=>{let D=k.__sheet;D?y.removeCSSRules(D):D=k.__sheet=y.createStylesheet();k=k.getODE();
k=k.id||(k.id="id"+ ++w);const H=[];v&&H.push("color:"+v);A&&H.push("font-family:"+A);B&&H.push("opacity:"+B);y.addCSSRule(D,"#"+k+"::placeholder",H.join("; "),0)},isNotSorted:(k,v)=>{const A=k.length;for(let B=1;B<A;B++)if(0<v(k[B-1],k[B]))return!0},chainSortFunc:(...k)=>(v,A)=>{for(const B of k){const D=B(v,A);if(0!==D)return D}return 0},getAlphaObjSortFunc:E((k,v,A,B)=>{const D=v?1:-1;return(H,K)=>{H=H[k];K=K[k];B?("string"!==typeof H&&(H=""+H),"string"!==typeof K&&(K=""+K)):(H=H||"",K=K||"");
A&&(H=H.toLowerCase(),K=K.toLowerCase());return H.localeCompare(K)*D}}),getNumericObjSortFunc:E((k,v)=>{const A=v?1:-1;return(B,D)=>{B=B[k]||0;D=D[k]||0;return(B-D)*A}}),csvStringToArray:(k,v)=>{if(!k)return[];const A=[[]];let B;for(;B=J.exec(k);)B[1].length&&","!==B[1]&&A.push([]),A[A.length-1].push(B[2]?B[2].replace(N,"$1"):B[3]);if(v){const D=A.shift();return A.map(H=>{let K=0;return D.reduce((Q,S)=>{Q[S]=H[K++];return Q},{})})}return A},prepareCSVDataURI:(k,v)=>{const A=H=>{if(H&&e(H)){const K=
[],Q=H.length;for(let S=0,M;Q>S;S++)M=H[S],M=null==M?"":M.toString(),M=M.replace(/"/g,'""'),0<=M.search(/("|,|\n)/g)&&(M='"'+M+'"'),K.push(M);return K.join(",")}l("Unexpected row",H);return null},B=[];if(v){var D=A(v);D&&B.push(D)}if(k)if(e(k)){D=k.length;for(let H=0;D>H;H++){const K=A(k[H]);K&&B.push(K)}}else l("Rows were not an array");return y.encodeCSVDataURI(B.join("\r\n"),v)},encodeCSVDataURI:(k,v)=>"data:text/csv;charset=utf-8"+(null==v?"":";header="+(v?"present":"absent"))+","+encodeURIComponent(k),
dataURIToBlob:k=>{var v=k.indexOf(",");const A=k.slice(0,v).split(":")[1].split(";")[0];k=k.slice(v+1);if(A.startsWith("text/"))k=decodeURIComponent(k);else{k=atob(k);v=k.length;const B=new Uint8Array(v);for(;v;)B[--v]=k.charCodeAt(v);k=B}return new Blob([k],{type:A})},formatAsPercentage:(k,v=2)=>{switch(typeof k){case "number":return v=h(16,m(0,v)),k=d.round(m(0,h(1,k))*a(10,2+v))/a(10,v),(0===k%1?k:k.toFixed(v))+"%";case "string":return k;default:return l("formatAsPercentage: expects a number"),
k}},memoize:E,debounce:(k,v,A)=>{const B="__DBTO_"+ ++w;return function(){const D=this,H=D[B],K=arguments,Q=A&&!H;clearTimeout(H);D[B]=setTimeout(function(){D[B]=null;A||k.apply(D,K)},v);Q&&k.apply(D,K)}},createFixedThresholdCounter:(k,v,A,B)=>{var D=y.AccessorSupport.generateName;const H="function"===typeof k||k instanceof JS.Module,K={};B=B||D("counter",A);const Q=D(B,"increment");D=D(B,"decrement");if(void 0!==(H?k.instanceMethod(Q):k[Q]))return l("Increment: Abort clobber",Q,k),!1;if(void 0!==
(H?k.instanceMethod(D):k[D]))return l("Decrement: Abort clobber",D,k),!1;K[Q]=function(){const S=this[B]+1;this[B]=S;this.fireEvent(B,S);S===v&&this.set(A,!0)};K[D]=function(){const S=this[B];if(0!==S){var M=S-1;this[B]=M;this.fireEvent(B,M);S===v&&this.set(A,!1)}};k[H?"include":"extend"](K);return!0},makeURLSearchParams:(k={})=>{const v=new URLSearchParams;for(const A in k){const B=k[A];void 0!==B&&v.set(A,B)}return v},doFetch:(k,v,A,B,D,H)=>fetch(k,v).then(K=>{if(!K.ok)throw new x(K.status,k,K.statusText);
return K}).then(K=>A?K.text():K.json()).then(K=>{if(B)try{if(A)B(K);else{if(!1===K.success)throw new x(200,k,K.message);B(K.data)}}catch(Q){throw K=new x(200,k,Q.message),K.stack=Q.stack,K;}}).catch(K=>{if(D){if("FetchError"!==K.name){const Q=new x(0,k,K.message);Q.stack=K.stack;K=Q}D(K)}}).finally(()=>{H?.()}),I18N:{setLocale:k=>{u=k},getLocale:()=>u,addDictionary:(k,v)=>{z[v]=Object.assign(z[v]??{},k)},setDictionary:(k,v)=>{z[v]=k??{}},get:(k,...v)=>{var A=u??=(navigator.language??"en").split("-")[0].toLowerCase();
A=(z[A]??z.en??{})[k];return null!=A?0<v.length?A.replaceAll(G,(B,D,H,K)=>H&&K?1==v[parseInt(D)]?H:K:"").replaceAll(L,(B,D)=>v[D]):A:k}}};q.onloadingdone=k=>{for(const v of k.fontfaces)r(v)}})(global);
(t=>{const x=(u,l)=>{u.startsWith('"')&&(u=u.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return l?JSON.parse(u):u}catch(d){}},w=t.Cookie={defaults:{raw:!1,json:!1},read:(u,l)=>{l={...w.defaults,...l};const d=l.raw?e=>e:e=>decodeURIComponent(e.split("+").join(" "));l=l.json;const c=document.cookie.split("; "),h=c.length,m=u?void 0:{};for(let e=0;e<h;){var a=c[e++].split("=");const f=d(a.shift());a=d(a.join("="));if(u){if(u===f)return x(a,l)}else m[f]=x(a,l)}return m},write:(u,l,d)=>
{d={...w.defaults,...d};if("number"===typeof d.expires){const f=d.expires,g=d.expires=new Date;g.setDate(g.getDate()+f)}l=d.json?JSON.stringify(l):String(l);const {raw:c,expires:h,path:m,domain:a,samesite:e}=d;return document.cookie=[c?u:encodeURIComponent(u),"=",c?l:encodeURIComponent(l),h?"; expires="+h.toUTCString():"",m?"; path="+m:"",a?"; domain="+a:"",e?"; samesite="+e:"",d.secure?"; secure":""].join("")},remove:(u,l)=>void 0!==w.read(u,l)?(w.write(u,"",{...l,expires:-1}),!0):!1}})(myt);
(t=>{const x=console.error,w=JSON.parse,u=global.localStorage,l=u.getItem.bind(u),d=u.setItem.bind(u),c=u.removeItem.bind(u),h=u.clear.bind(u),m=(e,f,g)=>{if(0<f){const b="__timerId_"+g;(g=a[b])&&clearTimeout(g);a[b]=setTimeout(()=>{e();delete a[b]},f)}else e()},a=t.LocalStorage={hasDatum:(e,f)=>{if(e&&(f=l(f??"myt")))try{return null!=w(f)[e]}catch(g){x(g)}return!1},getDatum:(e,f)=>{if(e&&(f=l(f??"myt")))try{const g=w(f);if("object"===typeof g)return g[e]}catch(g){x(g)}},setDatum:(e,f,g,b)=>{g=g??
"myt";m(()=>{const p=a.getData(g);p[e]=f;d(g,JSON.stringify(p))},b,g+"___"+e)},removeDatum:(e,f,g)=>{f=f??"myt";m(()=>{const b=a.getData(f);delete b[e];d(f,JSON.stringify(b))},g,f+"___"+e)},hasData:e=>null!=l(e??"myt"),getData:e=>{if(e=l(e??"myt"))try{return w(e)}catch(f){x(f)}return{}},setData:(e,f,g)=>{f=f??"myt";e??={};return"object"===typeof e?(m(()=>{d(f,JSON.stringify(e))},g,f),!0):!1},removeData:(e,f)=>{e=e??"myt";m(()=>{c(e)},f,e)},getLength:()=>u.length,getKey:u.key.bind(u),getItem:l,setItem:d,
removeItem:c,clear:h,get:l,set:d,remove:c,clearAll:h}})(myt);
(t=>{const x=/(?:^|&)([^&=]*)=?([^&]*)/g,w=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.URI=new JS.Class("URI",{initialize:function(l,d){l&&this.parse(l,d)},setSource:function(l){this.source=l},setProtocol:function(l){this.protocol=
l},setAuthority:function(l){this.authority=l},setUserInfo:function(l){this.userInfo=l},setUser:function(l){this.user=l},setPassword:function(l){this.password=l},setHost:function(l){this.host=l},setPort:function(l){this.port=l},setRelative:function(l){this.relative=l},setPath:function(l){this.path=l},setDirectory:function(l){this.directory=l},setFile:function(l){this.file=l},setQuery:function(l){this.query=l},setAnchor:function(l){this.anchor=l},parse:function(l,d){const c=this,[h,m,a,e,f,g,b,p,n,
q,r,z,E,G]=(d?u:w).exec(l)??[];c.setSource(h??"");c.setProtocol(m??"");c.setAuthority(a??"");c.setUserInfo(e??"");c.setUser(f??"");c.setPassword(g??"");c.setHost(b??"");c.setPort(p??"");c.setRelative(n??"");c.setPath(q??"");c.setDirectory(r??"");c.setFile(z??"");c.setQuery(E??"");c.setAnchor(G??"");c.queryPairs={};c.query.replace(x,(L,J,N)=>{J&&(c.queryPairs[J]=N)})},decodeQueryParam:l=>decodeURIComponent(l).split("+").join(" "),getQuery:function(){var l=this.queryPairs;const d=[];for(const c in l)d.push(c+
"="+encodeURIComponent(this.getQueryParam(c)));l=d.join("&");return 0<l.length?"?"+l:l},getQueryParam:function(l){l=this.queryPairs[l];return null==l?void 0:this.decodeQueryParam(l)},setQueryParam:function(l,d){this.queryPairs[encodeURIComponent(l)]=encodeURIComponent(d)},removeQueryParam:function(l){delete this.queryPairs[l]},getPathParts:function(l){const d=this.path.split("/");if(!l)for(l=d.length;l;)0===d[--l].length&&d.splice(l,1);return d},toString:function(l){const d=this.path;l=l?this.query?
"?"+this.query:"":this.getQuery();const c=this.anchor;let h=this.toStringThroughPort();d?h+=d:this.host&&(l||c)&&(h+="/");l&&(h+=l);c&&(h+="#"+c);return h},toStringThroughPort:function(){const l=this.protocol,d=this.host,c=this.userInfo,h=this.port;let m="";l&&(m+=l+"://");c&&d&&(m+=c+"@");d&&(m+=d,h&&(m+=":"+h));return m}})})(myt);
(t=>{const x=Math,{PI:w,cos:u,sin:l,sqrt:d}=x,c=(a,e,f,g,b,p)=>{"object"===typeof a&&(p=b,b=g,g=f,f=e,e=a.y,a=a.x);"object"===typeof f&&(p=f.height,b=f.width,g=f.y,f=f.x);return a>=f&&e>=g&&a<=f+b&&e<=g+p},h=(a,e,f,g,b)=>{a=f-a;e=g-e;e=a*a+e*e;return b?e:d(e)},m=(a,e,f,g,b)=>{null==b&&(b=6371);a=a*w/180;f=f*w/180;return b*x.acos(l(a)*l(f)+u(a)*u(f)*u(g*w/180-e*w/180))};t.Geometry={getClosestPointOnALineToAPoint:(a,e,f,g,b,p,n)=>{f-=a;g-=e;b=(f*(b-a)+g*(p-e))/(f*f+g*g);n&&(b=x.min(1,x.max(0,b)));return{x:a+
f*b,y:e+g*b}},isPointInPath:(a,e,f,g)=>{"object"===typeof a&&(g=f,f=e,e=a.y,a=a.x);if(c(a,e,f)&&(f=g.length,6<=f)){let b=!1,p=g[0],n=g[1],q,r;for(;f;)r=g[--f],q=g[--f],r>e!==n>e&&a<(p-q)*(e-r)/(n-r)+q&&(b=!b),p=q,n=r;return b}return!1},measureDistance:h,measureLatLngDistance:m,degreesToRadians:a=>a*w/180,radiansToDegrees:a=>180*a/w,rectContainsPoint:c,circleContainsPoint:(a,e,f,g,b)=>h(a,e,f,g,!0)<=b*b,circleContainsLatLng:(a,e,f,g,b,p)=>m(a,e,f,g,p)<=b,polarToCartesian:(a,e,f,g)=>{f??=0;g??=0;e%=
360;if(0===e)e=a,a=0;else if(90===e)e=0;else if(180===e)e=-a,a=0;else if(270===e)e=0,a=-a;else{const b=e*w/180;e=a*u(b);a*=l(b)}return[f+e,g+a]},cartesianToPolar:(a,e,f,g,b)=>{f??=0;g??=0;a-=f;g=e-g;e=d(a*a+g*g);g=x.atan2(g,a);0>g&&(g+=2*w);return[e,b?g:180*g/w]}}})(myt);
(t=>{const x=JS.Module,w=console.log,u=t.dumpStack;t.Observable=new x("Observable",{attachObserver:function(l,d,c){return l&&d&&c?(this.getObservers(c).push(d,l),!0):!1},detachObserver:function(l,d,c){if(l&&d&&c){var h=this.__obsbt;if(h&&(c=h[c])){h=!1;for(let m=c.length-2;0<=m;m-=2){const [a,e]=c.slice(m);l===e&&d===a&&(c.splice(m,2),h=!0)}return h}}return!1},detachAllObservers:function(){const l=this.__obsbt;if(l)for(const d in l){const c=l[d];for(let h=c.length-2;0<=h;h-=2){const [m,a]=c.slice(h);
a&&m&&("function"===typeof a.detachFrom&&a.detachFrom(this,m,d)||c.splice(h,2))}}},getObservers:function(l){let d;return(d=this.__obsbt??(this.__obsbt={}))[l]??(d[l]=[])},hasObservers:function(l){const d=this.__obsbt;return d?0<d[l]?.length:!1},createEvent:function(l,d){return{source:this,type:l,value:d}},fireEvent:function(l,d,c){if(c=c??(this.hasObservers(l)?this.__obsbt[l]:null)){const h={source:this,type:l,value:d},m=this.__aet??(this.__aet={});if(m[l])t.global.error.notify("warn","eventLoop",
"Abort refiring event:"+l,null,{observable:this,type:l,value:d});else{m[l]=!0;for(d=c.length-2;0<=d;d-=2){const [a,e]=c.slice(d);if(e&&a)try{if("function"===typeof a){if(a.call(e,h))break}else if(e[a](h))break}catch(f){u(f),w("Additional context",a,e)}}m[l]=!1}}}});t.Observer=new x("Observer",{valueFromEvent:l=>l&&"object"===typeof l&&l.type?l.value:l,syncTo:function(l,d,c,h,m){h??=c;try{this[d](l.createEvent(c,l.get(h)))}catch(a){u(a)}m||this.attachTo(l,d,c,m)},isAttachedTo:function(l,d,c){if(l&&
d&&c){var h=this.__obt;if(h&&(c=h[c]))for(h=c.length-2;0<=h;h-=2){const [m,a]=c.slice(h);if(l===a&&d===m)return!0}}return!1},getObservables:function(l){let d;return(d=this.__obt??(this.__obt={}))[l]??(d[l]=[])},hasObservables:function(l){const d=this.__obt;return d?0<d[l]?.length:!1},attachTo:function(l,d,c,h){if(l&&d&&c){const m=this.getObservables(c);if(h){const a=this,e=d;this.__methodNameCounter??(this.__methodNameCounter=0);d="__DO_ONCE_"+this.__methodNameCounter++;this[d]=f=>{a.detachFrom(l,
d,c);delete a[d];return a[e](f)}}if(l.attachObserver(this,d,c))return m.push(d,l),!0}return!1},detachFrom:function(l,d,c){if(l&&d&&c){var h=this.__obt;if(h&&(h=h[c])){let m=!1;for(let a=h.length-2;0<=a;a-=2){const [e,f]=h.slice(a);l===f&&d===e&&l.detachObserver(this,d,c)&&(h.splice(a,2),m=!0)}return m}}return!1},detachFromAllObservables:function(){var l=this.__obt;if(l)for(const [d,c]of Object.entries(l)){for(l=c.length-2;0<=l;l-=2){const [h,m]=c.slice(l);m.detachObserver(this,h,d)}c.length=0}},constrain:function(l,
d){if(l&&d){const h=d.length;if(0!==h%2)w("Observables uneven",this);else{var c;const m=(c=this.__cbmn??(this.__cbmn={}))[l]??(c[l]=[]);if(0<m.length)w("Constraint exists for "+l+" on "+this);else{for(c=0;c<h;c+=2){const [a,e]=d.slice(c);a&&e&&(this.attachTo(a,l,e),m.push(a,e))}try{this[l]()}catch(a){u(a)}}}}},releaseConstraint:function(l){if(l){var d=this.__cbmn;if(d&&(d=d[l])){for(let c=d.length;0<=c;c-=2){const [h,m]=d.slice(c);this.detachFrom(h,l,m)}d.length=0}}},releaseAllConstraints:function(){const l=
this.__cbmn;if(l)for(const d in l)this.releaseConstraint(d)}})})(myt);(t=>{const x=console.warn,w=t.global=new JS.Singleton("Global",{include:[t.Observable],initialize:()=>{},register:(u,l)=>{w.hasOwnProperty(u)&&(x("Global key in use",u),w.unregister(u));w[u]=l;w.fireEvent("register"+u,l)},unregister:u=>{if(w.hasOwnProperty(u)){const l=w[u];delete w[u];w.fireEvent("unregister"+u,l)}else x("Global key not in use",u)}})})(myt);
(t=>{let x;new JS.Singleton("GlobalError",{include:[t.Observable],initialize:function(){x=this;x.setStackTraceLimit(50);x.setConsoleLogging(!0);t.global.register("error",x)},setConsoleLogging:w=>{x.consoleLogging=w},setStackTraceLimit:w=>{Error.stackTraceLimit=x.stackTraceLimit=w},notify:(w,u,l,d,c)=>{d??=Error(l??u);d=d.stack??d.stacktrace;x.fireEvent(u??"error",{msg:l,stacktrace:d,...c});if(x.consoleLogging&&w)console[w](d)}})})(myt);
(t=>{const x=global,w=x.getComputedStyle,u=document,l=Math.max,d=m=>{const {zIndex:a,opacity:e}=w(m);if("auto"===a){if(1===parseInt(e,10)){let f=0;m=m.childNodes;let g=m.length;for(;g;){const b=m[--g];1===b.nodeType&&(f=l(f,d(b)))}return f}return 0}return parseInt(a,10)},c=(m,a)=>{const e=[];for(;m;){e.push(m);if(m===a)break;m=m.parentNode}return e},h=t.DomElementProxy=new JS.Module("DomElementProxy",{extend:{createElement:(m,a,e)=>{m=u.createElement(m);for(const f in e)m[f]=e[f];for(const f in a)m.style[f]=
a[f];return m},isDomElementVisible:m=>{if("INPUT"!==m.nodeName||"hidden"!==m.type)for(;m;){if(m===u)return!0;const {display:a,visibility:e}=w(m);if("none"===a||"hidden"===e)break;m=m.parentNode}return!1},getZIndexRelativeToAncestor:(m,a)=>{if(m&&a)for(m=c(m,a),a=m.length-1;a;){const e=w(m[--a]),f=e.zIndex,g="auto"===f;if(0===a||!g||1!==parseInt(e.opacity,10))return g?0:parseInt(f,10)}return 0},getAncestorArray:c,getHighestZIndex:d,getRelativePosition:(m,a)=>{if(m){let e=0,f=0;for(;m&&"BODY"!==m.nodeName&&
m!==a;)if(e+=m.offsetLeft,f+=m.offsetTop,(m=m.offsetParent)&&"BODY"!==m.nodeName){const {borderLeftWidth:g,borderTopWidth:b}=w(m);e+=parseInt(g,10)-m.scrollLeft;f+=parseInt(b,10)-m.scrollTop}return{x:e,y:f}}},getTruePosition:m=>{if(m)return m=m.getBoundingClientRect(),m.left+=x.scrollX,m.top+=x.scrollY,m},simulateDomEvent:(m,a,e)=>{if(m){const f={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},g={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};if(e)for(const p in e)f[p]=e[p];let b;for(const p in g)if(g[p].test(a)){b=p;break}if(!b)throw new SyntaxError("Only supports HTMLEvent and MouseEvent interfaces");if(u.createEvent)e=u.createEvent(b),"HTMLEvents"===b?e.initEvent(a,f.bubbles,f.cancelable):e.initMouseEvent(a,f.bubbles,f.cancelable,u.defaultView,f.button,f.pointerX,f.pointerY,f.pointerX,f.pointerY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,null),m.dispatchEvent(e);
else{f.clientX=f.pointerX;f.clientY=f.pointerY;e=u.createEventObject();for(const p in f)e[p]=f[p];m.fireEvent("on"+a,e)}}},getScrollbarSize:t.memoize(()=>{const m=u.body,a=h.createElement("div",{width:"100px",height:"100px",overflow:"scroll"});m.appendChild(a);const e=a.offsetWidth-a.clientWidth;m.removeChild(a);return e})},getIDE:function(){return this.__iE},getODE:function(){return this.__oE},getIDS:function(){return this.__iS},getODS:function(){return this.__oS},setDomElement:function(m){if(Array.isArray(m)){const [a,
e]=m;this.__oE=a;this.__iE=e;this.__iS=e.style;this.__oS=a.style;e.model=a.model=this}else this.__oE=this.__iE=m,this.__iS=this.__oS=m.style,m.model=this},removeDomElement:function(){this.__oE.parentNode.removeChild(this.__oE)},disposeOfDomElement:function(){delete this.__iE.model;delete this.__iS;delete this.__iE;delete this.__oE.model;delete this.__oS;delete this.__oE},setDomClass:function(m){this.__iE.className=this.domClass=m},addDomClass:function(m){const a=this.__iE.className;this.setDomClass((a?
a+" ":"")+m)},removeDomClass:function(m){var a=this.__iE.className;if(a){a=a.split(" ");let e=a.length;for(;e;)a[--e]===m&&a.splice(e,1);this.setDomClass(a.join(" "))}},clearDomClass:function(){this.setDomClass("")},setDomId:function(m){this.__iE.id=this.domId=m},setZIndex:function(m){this.__oS.zIndex=m},setStyleProperty:function(m,a){this.__iS[m]=a},getPagePosition:function(m){return h["get"+(m?"True":"Relative")+"Position"](this.__iE)},simulateClick:function(){h.simulateDomEvent(this.__iE,"click")},
getHighestZIndex:function(){return d(this.__iE)},getHighestChildZIndex:function(m){const a=this.__iE.childNodes;let e=a.length,f=0;for(;e;){const g=a[--e];1===g.nodeType&&g!==m&&(f=l(f,d(g)))}return f},makeHighestZIndex:function(){this.setZIndex(this.parent.getHighestChildZIndex(this.__iE)+1)},scrollYTo:function(m,a){(a?this.__iE:this.__oE).scrollTop=m||0}})})(myt);
(t=>{let x;const w=l=>{for(;l.lastChild;)l=l.lastChild;return l},u=(l,d)=>{x.lastTraversalWasForward=l;let c=document.body,h=c;var m=document.activeElement;let a=h,e;const f=l?"getNextFocus":"getPrevFocus";m&&(a=h=m,(m=h.model)??(m=x.findModelForDomElement(h)),m&&(d=m.getFocusTrap(d))&&(c=d.getIDE()));for(;a;){if(a.model&&a.model[f]&&(e=a.model[f]()))a=e.getIDE();else if(l)if(a.firstChild)a=a.firstChild;else{if(a===c)return h.model;if(a.nextSibling)a=a.nextSibling;else for(;a&&(a=a.parentNode,a!==
c);)if(a.nextSibling){a=a.nextSibling;break}}else a=a===c?w(c):a.previousSibling?w(a.previousSibling):a.parentNode;if(a===h)return h.model;if(1===a.nodeType)if((m=a.model)&&m instanceof t.View){if(m.isFocusable())return m}else if(d=a.nodeName,!("A"!==d&&"AREA"!==d&&"INPUT"!==d&&"TEXTAREA"!==d&&"SELECT"!==d&&"BUTTON"!==d||a.disabled||isNaN(a.tabIndex))&&t.DomElementProxy.isDomElementVisible(a)&&(m=x.findModelForDomElement(a),!m?.searchAncestorsOrSelf(g=>!0===g.maskFocus))){a.focus();x.focusedDom=a;
break}}};new JS.Singleton("GlobalFocus",{include:[t.Observable],initialize:function(){x=this;x.lastTraversalWasForward=!0;t.global.register("focus",x)},setFocusedView:l=>{if(x.focusedView!==l){x.prevFocusedView=x.focusedView;if(x.focusedView=l)x.focusedDom=null;x.fireEvent("focused",l)}},notifyFocus:l=>{x.focusedView!==l&&x.setFocusedView(l)},notifyBlur:l=>{x.focusedView===l&&x.setFocusedView(null)},clear:()=>{x.focusedView?x.focusedView.blur():x.focusedDom&&(x.focusedDom.blur(),x.focusedDom=null)},
next:l=>{u(!0,l)?.focus()},prev:l=>{u(!1,l)?.focus()},findModelForDomElement:l=>{for(;l;){let d=l.model;if(d&&d instanceof t.View)return d;l=l.parentNode}}})})(myt);
(t=>{const x=JS.Module,w=t.global,u=w.focus,l=()=>({source:null,type:null,value:null}),d=b=>{b=b.value??b;return(b.target??b.srcElement).model},c=t.KeyObservable=new x("KeyObservable",{extend:{EVENT_TYPES:{keypress:!0,keydown:!0,keyup:!0},EVENT:l(),getKeyFromEvent:b=>b.value.key,getCodeFromEvent:b=>b.value.code,isEnterKeyEvent:b=>b.value.code===w.keys.CODE_ENTER,isEscKeyEvent:b=>b.value.code===w.keys.CODE_ESC,isShiftKeyEvent:b=>w.keys.isShiftCode(b.value.code)},createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,
p,n,c)??this.callSuper(b,p,n)}}),h=t.MouseObservable=new x("MouseObservable",{extend:{EVENT_TYPES:{mouseover:!0,mouseout:!0,mousedown:!0,mouseup:!0,click:!0,dblclick:!0,mousemove:!0,contextmenu:!0,wheel:!0},EVENT:l(),getMouseFromEvent:b=>({x:b.value.pageX,y:b.value.pageY}),getMouseFromEventRelativeToView:(b,p)=>{p=p.getPagePosition();b=h.getMouseFromEvent(b);b.x-=p.x;b.y-=p.y;return b}},createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,p,n,h,!0)??this.callSuper(b,p,n)}}),m=t.ScrollObservable=
new x("ScrollObservable",{extend:{EVENT_TYPES:{scroll:!0},EVENT:l(),getScrollFromEvent:b=>{const {scrollLeft:p,scrollTop:n}=d(b)?.getIDE();return{x:p,y:n}}},createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,p,n,m)??this.callSuper(b,p,n)}}),a=t.TouchObservable=new x("TouchObservable",{extend:{EVENT_TYPES:{touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0},EVENT:l()},createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,p,n,a,!1)??this.callSuper(b,p,n)}}),
e=t.FocusObservable=new x("FocusObservable",{extend:{EVENT_TYPES:{focus:!0,blur:!0},EVENT:l()},initNode:function(b,p){this.focusable=!1;this.focusIndicator=!0;this.callSuper(b,p)},destroy:function(){this.giveAwayFocus();this.callSuper()},setFocused:function(b){this.focused!==b&&(this.focused=b,this.inited&&(this.fireEvent("focused",b),b?u.notifyFocus(this):u.notifyBlur(this)))},setFocusable:function(b){if(this.focusable!==b){const p=this.focusable;(this.focusable=b)?(this.getIDE().tabIndex=0,this.attachToDom(this,
"__doFocus","focus"),this.attachToDom(this,"__doBlur","blur")):p&&(this.getIDE().removeAttribute("tabIndex"),this.detachFromDom(this,"__doFocus","focus"),this.detachFromDom(this,"__doBlur","blur"));this.inited&&this.fireEvent("focusable",b)}},setFocusIndicator:function(b){this.focusIndicator!==b&&(this.focusIndicator=b,this.focused&&(b?this.showFocusIndicator():this.hideFocusIndicator()))},giveAwayFocus:function(){this.focused&&(u.next(),this.focused&&this.blur())},isFocusable:function(){return this.focusable&&
!this.disabled&&this.isVisible()&&null==this.searchAncestorsOrSelf(b=>!0===b.maskFocus)},focus:function(b){this.isFocusable()&&this.getIDE().focus({preventScroll:b})},blur:function(){this.getIDE().blur()},__doFocus:function(b){this.focused||this.setFocused(!0);this.doFocus()},__doBlur:function(b){this.doBlur();this.focused&&this.setFocused(!1)},doFocus:function(){this.focusIndicator?this.showFocusIndicator():this.hideFocusIndicator()},doBlur:function(){this.focusIndicator&&this.hideFocusIndicator()},
showFocusIndicator:function(){this.getIDE().hideFocus=!1;const b=this.getIDS();b.outlineWidth="thin";b.outlineColor="#8bf";b.outlineStyle="solid";b.outlineOffset="0px"},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideDefaultFocusIndicator:function(){this.getIDE().hideFocus=!0;this.getIDS().outlineStyle="none"},createDomHandler:function(b,p,n){if(e.EVENT_TYPES[n]){const q=this;return r=>{r??=window.event;if(q._ignoreFocus)r.cancelBubble=!0,r.stopPropagation?.(),r.preventDefault();
else{var z=e.EVENT;z.source=q;z.type=r.type;z.value=r;b[p](z)||(r.cancelBubble=!0,r.stopPropagation?.());z.source=void 0}}}return this.callSuper(b,p,n)}}),f=t.InputObservable=new x("InputObservable",{extend:{EVENT_TYPES:{input:!0,select:!0,change:!0,paste:!0},EVENT:l()},createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,p,n,f)??this.callSuper(b,p,n)}}),g=t.DragDropObservable=new x("DragDropObservable",{extend:{EVENT_TYPES:{dragleave:!0,dragenter:!0,dragover:!0,drop:!0},EVENT:l()},
createDomHandler:function(b,p,n){return this.createStandardDomHandler(b,p,n,g,!0)??this.callSuper(b,p,n)}});t.DomObservable=new x("DomObservable",{attachDomObserver:function(b,p,n,q,r){if(b&&p&&n){q=!!q;const z=this.createDomHandler(b,p,n);if(z){const E=this.__dobsbt??(this.__dobsbt={}),G=E[n];G?G.push(b,p,z,q):E[n]=[b,p,z,q];t.addEventListener(this.getDomElementForDomObservable(n),n,z,q,r);return!0}}return!1},getDomElementForDomObservable:function(b){return this.getIDE()},createDomHandler:(b,p,n)=>
null,createStandardDomHandler:function(b,p,n,q,r){if(q.EVENT_TYPES[n]){const z=this,E=q.EVENT;return G=>{G??=window.event;E.source=z;E.type=G.type;E.value=G;b[p](E)||(G.cancelBubble=!0,G.stopPropagation?.(),r&&G.preventDefault());E.source=void 0}}},detachDomObserver:function(b,p,n,q){if(b&&p&&n){q=!!q;var r=this.__dobsbt;if(r&&(r=r[n])){const z=this.getDomElementForDomObservable(n);let E=!1;for(let G=r.length-4;0<=G;G-=4){const [L,J,N,y]=r.slice(G,G+4);b===L&&p===J&&q===y&&(z&&t.removeEventListener(z,
n,N,q),r.splice(G,4),E=!0)}return E}}return!1},detachAllDomObservers:function(){var b=this.__dobsbt;if(b)for(const [p,n]of Object.entries(b)){for(b=n.length-2;0<=b;b-=4){const [q,r]=n.slice(b);t.removeEventListener(this.getDomElementForDomObservable(p),p,q,r)}n.length=0}}});t.DomObserver=new x("DomObserver",{extend:{getSourceViewFromEvent:d},attachToDom:function(b,p,n,q,r){if(b&&p&&n){q=!!q;let z;const E=(z=this.__dobt??(this.__dobt={}))[n]??(z[n]=[]);b.attachDomObserver(this,p,n,q,r)&&E.push(q,p,
b)}},detachFromDom:function(b,p,n,q){if(b&&p&&n){q=!!q;var r=this.__dobt;if(r&&(r=r[n])){let z=!1;for(let E=r.length-3;0<=E;E-=3){const [G,L,J]=r.slice(E);b===J&&p===L&&q===G&&b.detachDomObserver(this,p,n,q)&&(r.splice(E,3),z=!0)}return z}}return!1},detachFromAllDomSources:function(){var b=this.__dobt;if(b)for(const [p,n]of Object.entries(b)){for(b=n.length-3;0<=b;b-=3){const [q,r,z]=n.slice(b);z.detachDomObserver(this,r,p,q)}n.length=0}}})})(myt);
(t=>{let x;const {KeyObservable:w,global:u}=t,l=u.focus,d=w.getCodeFromEvent,c=new Set,h="Firefox"===BrowserDetect.browser,m=h?"OSLeft":"MetaLeft",a=h?"OSRight":"MetaRight",e=()=>c.has("ShiftLeft")||c.has("ShiftRight"),f=()=>c.has("ControlLeft")||c.has("ControlRight"),g=()=>c.has("AltLeft")||c.has("AltRight"),b=()=>c.has(m)||c.has(a),p=(q,r)=>{switch(q){case "Backspace":return q=r.nodeName,!("TEXTAREA"===q||"INPUT"===q&&("text"===r.type||"number"===r.type||"password"===r.type)||"DIV"===q&&"true"===
r.contentEditable&&r.firstChild);case "Tab":return!0}return!1},n=(q,r)=>{for(const z of["keydown","keypress","keyup"])x[r](q,"__hndl_"+z,z)};new JS.Singleton("GlobalKeys",{include:[t.DomElementProxy,t.DomObservable,t.DomObserver,w,t.Observable,t.Observer],initialize:function(){u.register("keys",x=this);x.CODE_ENTER="Enter";x.CODE_ESC="Escape";x.CODE_SPACE="Space";x.CODE_ARROW_LEFT="ArrowLeft";x.CODE_ARROW_UP="ArrowUp";x.CODE_ARROW_RIGHT="ArrowRight";x.CODE_ARROW_DOWN="ArrowDown";x.CODE_DELETE="Delete";
x.CODE_BACKSPACE="Backspace";for(const q of"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""))x["CODE_"+q]="Key"+q;for(const q of"1234567890".split(""))x["CODE_"+q]="Digit"+q;x.ARROW_KEYS=[x.CODE_ARROW_LEFT,x.CODE_ARROW_UP,x.CODE_ARROW_RIGHT,x.CODE_ARROW_DOWN];x.LIST_KEYS=[x.CODE_ENTER,x.CODE_SPACE,x.CODE_ESC,...x.ARROW_KEYS];x.setDomElement(document);x.attachTo(l,"__hndl_focused","focused");n(x,"attachToDom");global.onblur=()=>{c.clear()}},isShiftKeyDown:e,isControlKeyDown:f,isAltKeyDown:g,isMetaKeyDown:b,isShiftCode:q=>
"ShiftLeft"===q||"ShiftRight"===q,isControlCode:q=>"ControlLeft"===q||"ControlRight"===q,isAltCode:q=>"AltLeft"===q||"AltRight"===q,isAcceleratorKeyDown:()=>"Mac"===BrowserDetect.os?b():f(),ignoreFocusTrap:()=>g(),__hndl_focused:q=>{(q=q.value)?(n(x,"detachFromDom"),n(q,"attachToDom")):((q=l.prevFocusedView)&&n(q,"detachFromDom"),n(x,"attachToDom"))},__hndl_keydown:q=>{const r=d(q);q=q.value;p(r,q.target)&&q.preventDefault();b()&&"ShiftLeft"!==r&&"ShiftRight"!==r&&"ControlLeft"!==r&&"ControlRight"!==
r&&"AltLeft"!==r&&"AltRight"!==r?(x.fireEvent("keydown",r),x.fireEvent("keyup",r)):(c.add(r),"Tab"===r&&(q=g(),e()?l.prev(q):l.next(q)),x.fireEvent("keydown",r))},__hndl_keypress:q=>{x.fireEvent("keypress",d(q))},__hndl_keyup:q=>{const r=d(q);q=q.value;p(r,q.target)&&q.preventDefault();c.delete(r);x.fireEvent("keyup",r)}})})(myt);
(t=>{const x=JS.Module,w=Math.max,u=(a,e,f,g,b=0)=>{const p=a.length;for(let n=f;b<p;b++)h(a[b],e,n),g&&(n+=f)},l=(a,e,f,g=0)=>{const b=a.length;for(let p=e;g<b;)a[g++].crossPos+=p,f&&(p+=e)},d=(a,e,f,g)=>{var b=a[e?"setWidthViaFlex":"setHeightViaFlex"];e=g?e?a.getFlexBasisWidth():a.getFlexBasisHeight():0;b.call(a,e+f)},c=(a,e,f)=>{a[e?"setXViaFlex":"setYViaFlex"](f,!1)},h=(a,e,f)=>{a[e?"setXViaFlex":"setYViaFlex"](f,!0)},m=(a,e,f)=>{a[e]!==f&&(a[e]=f,a.inited&&a.fireEvent(e,f),a.updateFlexboxLayout())};
t.FlexboxSupport=new x("FlexboxSupport",{initNode:function(a,e){this.__IS_FLEXBOX_SUPPORT=!0;this.rowGap=this.columnGap=0;this.direction??(this.direction="row");this.wrap="nowrap";this.justifyContent=this.alignContent="start";this.alignItems="stretch";this.callSuper(a,e);this.updateFlexboxLayout()},setWidth:function(a){const e=this.width;this.callSuper(a);e!==this.width&&this.updateFlexboxLayout()},setHeight:function(a){const e=this.height;this.callSuper(a);e!==this.height&&this.updateFlexboxLayout()},
setDirection:function(a){m(this,"direction",a)},setWrap:function(a){m(this,"wrap",a)},setJustifyContent:function(a){m(this,"justifyContent",a)},setAlignItems:function(a){m(this,"alignItems",a)},setAlignContent:function(a){m(this,"alignContent",a)},setRowGap:function(a){m(this,"rowGap",w(0,a))},setColumnGap:function(a){m(this,"columnGap",w(0,a))},getWidthForFlexboxLayout:function(){return this.width},getHeightForFlexboxLayout:function(){return this.height},setTotalBasisWidth:function(a){this.set("totalBasisWidth",
a,!0)},setTotalBasisHeight:function(a){this.set("totalBasisHeight",a,!0)},ignoreSubviewForFlex:function(a){return a&&"function"===typeof a.ignoreFlex?a.ignoreFlex():!0},setFlexboxPaused:function(a,e){this.__flexboxPaused!==a&&((this.__flexboxPaused=a)||e||this.updateFlexboxLayout())},isFlexboxPaused:function(){return!!this.__flexboxPaused},subviewAdded:function(a){this.callSuper(a);a&&!this.ignoreSubviewForFlex(a)&&this.updateFlexboxLayout()},subviewRemoved:function(a){this.callSuper(a);!a||this.ignoreSubviewForFlex(a)||
this.isBeingDestroyed||this.updateFlexboxLayout()},doSubviewsReorderedInDom:function(a){this.callSuper(a);a&&this.ignoreSubviewForFlex(a)||this.updateFlexboxLayout()},isOKToUpdateLayout:function(){return this.inited&&!this.__isUpdatingFlexboxLayout&&!this.isFlexboxPaused()},isCompactWidth:()=>!1,isCompactHeight:()=>!1,isCompactOnMainAxis:function(a){return a?this.isCompactWidth():this.isCompactHeight()},isCompactOnCrossAxis:function(a){return a?this.isCompactHeight():this.isCompactWidth()},isWrapNotAllowed:function(){return"nowrap"===
this.wrap},setUpdateAgain:function(a){this._updateAgain=a},isUpdateAgain:function(){return this._updateAgain},updateFlexboxLayout:function(){const a=this;if(a.isOKToUpdateLayout()){var e=a.getSubviewsInLexicalOrder().filter(G=>!0!==a.ignoreSubviewForFlex(G)&&!0===G.visible);const E=e.length;if(0<E){a.__isUpdatingFlexboxLayout=!0;var f=a.direction;const G=f.startsWith("row"),L=!G;var g=a.getWidthForFlexboxLayout(),b=a.getHeightForFlexboxLayout();const J=G?a.columnGap:a.rowGap,N=G?g:b;var p=G?a.rowGap:
a.columnGap;const y=G?b:g,k=a.isWrapNotAllowed();g=a.justifyContent;b=a.alignItems;var n=k?"stretch":a.alignContent;f.endsWith("Reverse")&&e.reverse();let v=0,A=0,B=0,D=0,H={items:[],shrinkCount:0,shrinkBasis:0,growCount:0,extraSize:0,crossPos:B,crossSize:0};f=[H];for(let K=0;K<E;){const Q=e[K++],S=G?Q.getFlexBasisWidth():Q.getFlexBasisHeight(),M=Q.getShrink(),V=Q.getGrow();!k&&0<H.items.length&&v+(0===D?0:J)+S>N&&(H.extraSize=N-v,B+=H.crossSize+p,A=w(A,v),D=v=0,H={items:[],shrinkCount:0,shrinkBasis:0,
growCount:0,extraSize:0,crossPos:B,crossSize:0},f.push(H));0!==D&&(v+=J);0<M&&0<S&&(H.shrinkCount+=M,H.shrinkBasis+=S*M);0<V&&(H.growCount+=V);H.crossSize=w(H.crossSize,L?Q.getFlexBasisWidth():Q.getFlexBasisHeight());c(Q,G,v);d(Q,G,S);v+=S;H.items.push(Q);D++}H.extraSize=N-v;B+=H.crossSize;A=w(A,v);if(a.isCompactOnMainAxis(G)&&(e=f.reduce((K,Q)=>null==K?Q.extraSize:Math.min(K,Q.extraSize),null),0!==e))for(var q of f)q.extraSize-=e;a[G?"setTotalBasisWidth":"setTotalBasisHeight"](A);a[G?"setTotalBasisHeight":
"setTotalBasisWidth"](B);q=f.length;if(1<q&&"wrapReverse"===a.wrap){for(var r of f)r.crossPos=B-(r.crossPos+r.crossSize);f.reverse()}if(!a.isCompactOnCrossAxis(G))switch(r=y-B,n){default:case "start":break;case "end":l(f,r,!1);break;case "center":l(f,r/2,!1);break;case "spaceBetween":1<q&&l(f,r/(q-1),!0,1);break;case "spaceAround":r<=p?l(f,r/2,!1):(l(f,p/2,!1),r-=p,l(f,r/(2*q),!0),l(f,r/(2*q),!0,1));break;case "spaceEvenly":r<=2*p?l(f,r/2,!1):(l(f,p,!1),l(f,(r-2*p)/(q+1),!0));break;case "stretch":p=
r/q;r=0;for(var z of f)z.crossSize+=p,z.crossPos+=r,r+=p}for(const K of f){z=K.items;p=K.extraSize;if(0<p)if(0<K.growCount){p/=K.growCount;f=0;for(const M of z)0<f&&h(M,G,f),r=M.getGrow()*p,0<r&&(d(M,G,r,!0),f+=r)}else switch(f=z.length,g){default:case "start":break;case "end":u(z,G,p,!1);break;case "center":u(z,G,p/2,!1);break;case "spaceBetween":1<f&&u(z,G,p/(f-1),!0,1);break;case "spaceAround":p<=J?u(z,G,p/2,!1):(u(z,G,J/2,!1),p-=J,u(z,G,p/(2*f),!0),u(z,G,p/(2*f),!0,1));break;case "spaceEvenly":p<=
2*J?u(z,G,p/2,!1):(u(z,G,J,!1),p-=2*J,u(z,G,p/(f+1),!0))}else if(0>p&&0<K.shrinkCount){f=K.shrinkBasis;r=0;for(const M of z)0>r&&h(M,G,r),n=M.getShrink()*(G?M.getFlexBasisWidth():M.getFlexBasisHeight())/f*w(p,-f),0>n&&(d(M,G,n,!0),r+=n)}p=!1;const {crossSize:Q,crossPos:S}=K;for(const M of z)switch(M.getAlignSelf()||b){case "start":c(M,L,S);d(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;case "end":c(M,L,S+Q-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()));d(M,L,L?M.getFlexBasisWidth():
M.getFlexBasisHeight(),!1);break;case "center":c(M,L,S+(Q-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()))/2);d(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;case "baseline":p=!0;c(M,L,S+(Q-(L?M.getFlexBasisWidth():M.getFlexBasisHeight()))/2+M.getFlexBaselineOffset(G));d(M,L,L?M.getFlexBasisWidth():M.getFlexBasisHeight(),!1);break;default:c(M,L,S),d(M,L,Q,!1)}p&&a.updateFlexboxLayoutBaselineAdjustment(z,G,S)}a.__isUpdatingFlexboxLayout=!1;a.isUpdateAgain()&&!a.__UPDATE_AGAIN_LOOP_PROTECTION&&
(a.setUpdateAgain(!1),a.__UPDATE_AGAIN_LOOP_PROTECTION=!0,a.updateFlexboxLayout(),a.__UPDATE_AGAIN_LOOP_PROTECTION=!1)}else a.setTotalBasisWidth(0),a.setTotalBasisHeight(0)}},updateFlexboxLayoutBaselineAdjustment:(a,e,f)=>{}});t.FlexboxChildSupport=new x("FlexboxChildSupport",{setVisible:function(a){this.visible!==a&&(this.callSuper(a),this.updateFlexboxLayoutFromChild())},setXViaFlex(a,e){e&&(a+=this.x);this.x!==a&&(this.__isFlexUpdate=!0,this.setX(a),this.__isFlexUpdate=!1)},setYViaFlex(a,e){e&&
(a+=this.y);this.y!==a&&(this.__isFlexUpdate=!0,this.setY(a),this.__isFlexUpdate=!1)},setWidth:function(a){const e=this.width!==a;e&&!this.__isFlexUpdate&&(this.__basisWidth=null);this.callSuper(a);e&&this.updateFlexboxLayoutFromChild()},setWidthViaFlex(a){this.width!==a&&(this.__basisWidth??(this.__basisWidth=this.width),this.__isFlexUpdate=!0,this.setWidth(a),this.__isFlexUpdate=!1)},getFlexBasisWidth:function(){return this.__basisWidth??this.width},setHeight:function(a){const e=this.height!==a;
e&&!this.__isFlexUpdate&&(this.__basisHeight=null);this.callSuper(a);e&&this.updateFlexboxLayoutFromChild()},setHeightViaFlex(a){this.height!==a&&(this.__basisHeight??(this.__basisHeight=this.height),this.__isFlexUpdate=!0,this.setHeight(a),this.__isFlexUpdate=!1)},getFlexBasisHeight:function(){return this.__basisHeight??this.height},getFlexBaselineOffset:a=>0,setIgnoreFlex:function(a){this.__ignoreFlex!==a&&(this.__ignoreFlex=a,this.inited&&(this.fireEvent("ignoreFlex",a),this.isChildOfFlexbox()&&
this.parent.updateFlexboxLayout()))},ignoreFlex:function(){return this.__ignoreFlex},setGrow:function(a){a=w(0,a);this.grow!==a&&(this.grow=a,this.inited&&(this.fireEvent("grow",a),this.updateFlexboxLayoutFromChild()))},getGrow:function(){return this.grow},setShrink:function(a){a=w(0,a);this.shrink!==a&&(this.shrink=a,this.inited&&(this.fireEvent("shrink",a),this.updateFlexboxLayoutFromChild()))},getShrink:function(){return this.shrink},setAlignSelf:function(a){this.alignSelf!==a&&(this.alignSelf=
a,this.inited&&(this.fireEvent("alignSelf",a),this.updateFlexboxLayoutFromChild()))},getAlignSelf:function(){const a=this.alignSelf;return"auto"===a||""===a?null:a},isChildOfFlexbox:function(){return!(!this.parent||!this.parent.__IS_FLEXBOX_SUPPORT)},isFlexUpdateInProgress:function(){return this.__isFlexUpdate},updateFlexboxLayoutFromChild:function(){this.inited&&!this.ignoreFlex()&&this.isChildOfFlexbox()&&(this.isFlexUpdateInProgress()?this.parent.setUpdateAgain(!0):this.parent.updateFlexboxLayout())}})})(myt);
(t=>{const x=console.log,w=new Map,u=new Map,l=(e,f)=>f+e.charAt(0).toUpperCase()+e.slice(1),d=e=>u.get(e)??(u.set(e,l(e,"set")),u.get(e)),c=e=>w.get(e)??(w.set(e,l(e,"get")),w.get(e)),h=(e,f)=>{let g;for(const b in f){const p=f[b],n=d(b);if(n in e)e[n](p);else e[b]!==p&&(e[b]=p,(g??=!1!==e.inited&&e.fireEvent)&&e.fireEvent(b,p))}},m=(e,f)=>{const g=c(f);e[g]&&x("Overwriting getter",g);e[g]=function(){return this[f]}},a=(e,f)=>{const g=d(f);e[g]&&x("Overwriting setter",g);e[g]=function(b){this[f]!==
b&&(this[f]=b,this.inited&&this.fireEvent(f,b))}};t.AccessorSupport=new JS.Module("AccessorSupport",{extend:{generateSetterName:d,generateGetterName:c,generateName:l,createSetterFunction:a,createGetterFunction:m,createSetterMixin:(e,f)=>{const g={};for(const b of e)a(g,b),f&&m(g,b);return g}},appendToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).push(...arguments)},prependToEarlyAttrs:function(){(this.earlyAttrs??(this.earlyAttrs=[])).unshift(...arguments)},appendToLateAttrs:function(){(this.lateAttrs??
(this.lateAttrs=[])).push(...arguments)},prependToLateAttrs:function(){(this.lateAttrs??(this.lateAttrs=[])).unshift(...arguments)},quickSet:function(e,f){if(e)for(const g of e)this[g]=f[g],delete f[g]},callSetters:function(e){var f=this.earlyAttrs,g=this.lateAttrs;if(f||g){e={...e};if(f){var b=f.length;for(var p=0;p<b;){const q=f[p++];q in e&&(this.set(q,e[q]),delete e[q])}}let n;if(g)for(n=[],f=g.length,b=0;b<f;)p=g[b++],p in e&&(n.push(p,e[p]),delete e[p]);h(this,e);if(n)for(g=n.length,e=0;e<g;)this.set(n[e++],
n[e++])}else h(this,e)},get:function(e){const f=c(e);return"function"===typeof this[f]?this[f]():this[e]},set:function(e,f,g){if(!g&&(g=d(e),"function"===typeof this[g]))return this[g](f);this[e]!==f&&(this[e]=f,!1!==this.inited&&this?.fireEvent(e,f))}})})(myt);
myt.Destructible=new JS.Module("Destructible",{destroy:function(){if(this.destroyed)console.warn("Already destroyed");else{var t=this.__meta__;if(t){var x=Object.keys(t);for(let w=x.length;0<w;)t[x[--w]]=null}t=Object.keys(this);for(x=t.length;0<x;)this[t[--x]]=null;this.destroyed=!0}}});
(t=>{const {Class:x,Module:w}=JS,u=console.warn;let l;const d=(g,b)=>b?(l=g).__op??(l.__op=[]):g.__op;let c;const h=(g,b)=>b?(c=g).__actives??(c.__actives=[]):g.__actives,m=new x("AbstractPool",{include:[t.Destructible],initialize:()=>{},destroy:function(){const g=d(this);g&&(g.length=0);this.callSuper()},getInstance:function(){const g=d(this,!0);return g.length?g.pop():this.createInstance.apply(this,arguments)},createInstance:()=>null,putInstance:function(g){d(this,!0).push(this.cleanInstance(g))},
cleanInstance:g=>{"function"===typeof g.clean&&g.clean();return g},destroyPooledInstances:function(){var g=d(this);if(g){let b=g.length;for(;b;){const p=g[--b];"function"===typeof p.destroy&&p.destroy()}}}}),a=t.SimplePool=new x("SimplePool",m,{initialize:function(g,b){this.callSuper();this.instanceClass=g??Object;this.instanceParent=b},createInstance:function(g){var b=this.instanceParent,p=this.instanceClass;return b?new p(b,g):new p}}),e=new w("TrackActives",{destroy:function(){const g=h(this);
g&&(g.length=0);this.callSuper()},getInstance:function(){const g=this.callSuper();h(this,!0).push(g);return g},putInstance:function(g){var b=h(this);if(b){const p=b.indexOf(g);if(-1<p){b.splice(p,1);this.callSuper(g);return}b="inactive"}else b="missing";u("Tried to put a "+b+" instance",g,this)},getActives:function(g){const b=h(this);if(b){if(g){const p=[],n=b.length;for(let q=0;n>q;){const r=b[q++];g.call(this,r)&&p.push(r)}return p}return b.slice()}return[]},putActives:function(){const g=h(this);
if(g){let b=g.length;for(;b;)this.putInstance(g[--b])}}}),f=t.TrackActivesPool=new x("TrackActivesPool",a,{include:[e]});t.TrackActivesMultiPool=new x("TrackActivesMultiPool",m,{initialize:function(g,b){this.callSuper();this.instanceClassesByKey=g;const p=this._poolsByClassName={},n=this.__pbk={};for(const q in g){const r=g[q];n[q]=p[r.__displayName]=new f(r,b)}},destroy:function(){const g=this.__pbk;for(const b in g)g[b].destroy();this.callSuper()},getInstance:function(){const g=arguments[0],b=this.__pbk[g];
if(b)return b.getInstance(arguments);u("No pool for key",g)},putInstance:function(g){const b=this._poolsByClassName[g.klass.__displayName];b?b.putInstance(g):u("No pool for obj",g)},destroyPooledInstances:function(){const g=this.__pbk;for(const b in g)g[b].destroyPooledInstances()},getActives:function(g){let b=[];const p=this.__pbk;for(const n in p)b.push(...p[n].getActives(g));return b},putActives:function(){const g=this.__pbk;for(const b in g)g[b].putActives()}});t.Reusable=new w("Reusable",{clean:()=>
{}})})(myt);
(t=>{const x=JS.Class,w=console.warn,u=[t.AccessorSupport,t.Destructible,t.Observable,t.Observer],l=(e,f)=>{if(f){const g=f.length;for(let b=0,p;g>b;)(p=f[b++])?e.extend(p):w("Missing mixin in",e.klass.__displayName)}e.inited=!1},d=(e,f)=>{if(f)for(;e;){if(f(e))return e;e=e.parent}},c=(e,f)=>{const g=f.name;void 0===e[g]?e[g]=f:w("Name in use",g)},h=(e,f)=>{const g=f.name;e[g]===f?delete e[g]:w("Name not in use",g)};let m;const a=e=>(m=e).__animPool??(m.__animPool=new t.TrackActivesPool(t.Animator,e));
t.Eventable=new x("Eventable",{include:u,initialize:function(e,f){l(this,f);this.init(e??{})},init:function(e){this.callSetters(e);this.inited=!0},destroy:function(){this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.callSuper()}});t.Node=new x("Node",{include:u,extend:{getMatchingAncestorOrSelf:d,getMatchingAncestor:(e,f)=>d(e?e.parent:null,f),DEFAULT_PLACEMENT:"*"},initialize:function(e,f,g){l(this,g);this.initNode(e,f??{})},initNode:function(e,f){this.callSetters(f);
this.setParent(e);this.inited=!0},destroy:function(){const e=this.subnodes;this.isBeingDestroyed=!0;if(e)for(let f=e.length;0<f;)e[--f].destroy();this.__animPool&&(this.stopActiveAnimators(),this.__animPool.destroy());this.parent&&this.setParent();this.releaseAllConstraints();this.detachFromAllObservables();this.detachAllObservers();this.destroyAfterOrphaning();this.callSuper()},destroyAfterOrphaning:()=>{},setPlacement:function(e){this.placement=e},setDefaultPlacement:function(e){this.defaultPlacement=
e},setIgnorePlacement:function(e){this.ignorePlacement=e},setParent:function(e){if(e&&!this.ignorePlacement){var f=this.placement??e.defaultPlacement;f&&(e=e.determinePlacement(f,this))}if(this.parent!==e&&!e?.destroyed){if(f=this.parent){const g=f.getSubnodes().indexOf(this);-1<g&&(this.name&&h(f,this),f.subnodes.splice(g,1),f.subnodeRemoved(this))}if(this.parent=e)e.getSubnodes().push(this),this.name&&c(e,this),e.subnodeAdded(this);this.inited&&this.fireEvent("parent",e)}},setName:function(e){if(this.name!==
e){const f=this.parent;f&&this.name&&h(f,this);this.name=e;f&&e&&c(f,this)}},determinePlacement:function(e,f){let g=e.indexOf("."),b;0<=g&&(b=e.slice(g+1),e=e.slice(0,g));"*"===e&&(e=this.defaultPlacement)&&(g=e.indexOf("."),0<=g&&(b=e.slice(g+1)+(b?"."+b:""),e=e.slice(0,g)));return(e=this[e])?b?e.determinePlacement(b,f):e:this},getRoot:function(){return this.parent?.getRoot()??this},isRoot:function(){return null==this.parent},isDescendantOf:function(e){if(e){if(e===this)return!0;if(this.parent)return this.getIDE&&
e.getIDE?e.getIDE().contains(this.getIDE()):this.parent.isDescendantOf(e)}return!1},isAncestorOf:function(e){return e?e.isDescendantOf(this):!1},getLeastCommonAncestor:function(e){for(;e;){if(this.isDescendantOf(e))return e;e=e.parent}},searchAncestorsForClass:function(e){if(e)return this.searchAncestors(f=>f instanceof e)},searchAncestorsForModule:function(e){if(e)return this.searchAncestors(f=>f.isA(e))},searchAncestors:function(e){return d(this?this.parent:null,e)},searchAncestorsOrSelf:function(e){return d(this,
e)},getAncestors:function(){const e=[];let f=this;for(;f;)e.push(f),f=f.parent;return e},getSubnodes:function(){return this.subnodes??(this.subnodes=[])},subnodeAdded:e=>{},subnodeRemoved:e=>{},animate:function(e){if(e){const f=a(this),g=f.getInstance({ignorePlacement:!0}),b=e.callback;delete e.callback;g.callSetters(e);g.next(p=>{f.putInstance(g)});b&&g.next(b);g.setRunning(!0);return g}},getActiveAnimators:function(e){if("string"===typeof e){const f=e;e=g=>g.attribute===f}return a(this).getActives(e)},
stopActiveAnimators:function(e,f=!1){e=this.getActiveAnimators(e);let g=e.length;if(0<g){const b=a(this);for(;g;){const p=e[--g];p.reset(f);f||b.putInstance(p)}}},doOnceOnIdle:function(e){this.attachTo(t.global.idle,e,"idle",!0)}})})(myt);
(t=>{let x=0,w=!1;const u=JS.Class,l=[],d=f=>{if(w!==f&&(w=f,!f)){for(f=l.length;f;){const g=l[--f];g.__deferredLayout=!1;g.update()}l.length=0}},c=(f,g,b,p)=>{const n=f.getSubviewIndex(g),q=f.subviews;-1<n&&(f=f.getSubviewIndex(b),q.splice(n,1),-1<f?(n<f&&--f,q.splice(f+(p?1:0),0,g)):p?q.push(g):q.unshift(g))},h=(f,g,b)=>{f[g]!==b&&(f[g]=b,f.inited&&(f.fireEvent(g,b),f.update()))},m=t.Layout=new u("Layout",t.Node,{extend:{incrementGlobalLock:()=>{1===++x&&d(!0)},decrementGlobalLock:()=>{0<x&&0===
--x&&d(!1)}},initNode:function(f,g){this.subviews=[];this.locked=!0;this.lockedCounter=1;const b=!0===g.locked;delete g.locked;this.callSuper(f,g);b||this.decrementLockedCounter();this.update()},destroy:function(){this.subviews.length=0;this.callSuper()},setParent:function(f){var g=this.parent;if(g!==f){const b=!this.locked;b&&(this.locked=!0);let p,n;if(g){p=this.subviews;for(n=p.length;n;)this.removeSubview(p[--n]);this.detachFrom(g,"__hndlPSA","subviewAdded");this.detachFrom(g,"__hndlPSR","subviewRemoved")}this.callSuper(f);
if(f=this.parent){p=f.getSubviews();n=0;for(g=p.length;g>n;)this.addSubview(p[n++]);this.attachTo(f,"__hndlPSA","subviewAdded");this.attachTo(f,"__hndlPSR","subviewRemoved")}b&&(this.locked=!1,this.inited&&f&&this.update())}},canUpdate:function(){return w?(this.__deferredLayout||(l.push(this),this.__deferredLayout=!0),!1):!this.locked},update:()=>{},hasSubview:function(f){return this.subviews.includes(f)},getSubviewIndex:function(f){return this.subviews.indexOf(f)},addSubview:function(f){this.ignore(f)||
(this.subviews.push(f),this.startMonitoringSubview(f),this.locked||this.update())},startMonitoringSubview:f=>{},startMonitoringAllSubviews:function(){const f=this.subviews;let g=f.length;for(;g;)this.startMonitoringSubview(f[--g])},removeSubview:function(f){if(this.ignore(f))return-1;const g=this.getSubviewIndex(f);-1<g&&(this.stopMonitoringSubview(f),this.subviews.splice(g,1),this.locked||this.update());return g},stopMonitoringSubview:f=>{},stopMonitoringAllSubviews:function(){const f=this.subviews;
let g=f.length;for(;g;)this.stopMonitoringSubview(f[--g])},ignore:f=>f.ignoreLayout,__hndlPSA:function(f){f=f.value;f.parent===this.parent&&this.addSubview(f)},__hndlPSR:function(f){f=f.value;f.parent===this.parent&&this.removeSubview(f)},sortSubviews:function(f){this.subviews.sort(f)},moveSubviewBefore:function(f,g){c(this,f,g,!1)},moveSubviewAfter:function(f,g){c(this,f,g,!0)}});var a=t.ConstantLayout=new u("ConstantLayout",m,{setTargetAttrName:function(f){this.setterName=t.AccessorSupport.generateSetterName(f);
h(this,"targetAttrName",f)},setTargetValue:function(f){h(this,"targetValue",f)},update:function(){if(this.canUpdate()){const f=this.setterName,g=this.targetValue,b=this.subviews,p=b.length;if(f)for(let n=0;p>n;)b[n++][f](g)}}});a=t.VariableLayout=new u("VariableLayout",a,{initNode:function(f,g){this.collapseParent=this.reverse=!1;this.callSuper(f,g)},setCollapseParent:function(f){h(this,"collapseParent",f)},setReverse:function(f){h(this,"reverse",f)},update:function(){if(this.canUpdate()){this.incrementLockedCounter();
this.doBeforeUpdate();const g=this.setterName,b=this.subviews;var f=b.length;let p=this.targetValue,n,q=0;if(this.reverse)for(n=f;n;)f=b[--n],this.skipSubview(f)||(p=this.updateSubview(++q,f,g,p));else for(n=0;f>n;){const r=b[n++];this.skipSubview(r)||(p=this.updateSubview(++q,r,g,p))}this.doAfterUpdate();this.collapseParent&&!this.parent.isBeingDestroyed&&this.updateParent(g,p);this.decrementLockedCounter()}},doBeforeUpdate:()=>{},doAfterUpdate:()=>{},startMonitoringSubview:function(f){this.attachTo(f,
"update","visible")},stopMonitoringSubview:function(f){this.detachFrom(f,"update","visible")},updateSubview:(f,g,b,p)=>{g[b](p);return p},skipSubview:f=>!f.visible,updateParent:(f,g)=>{}});const e=t.SpacedLayout=new u("SpacedLayout",a,{initNode:function(f,g){this.targetAttrName=this.axis="x";this.setterName="setX";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.parentSetterName="setWidth";this.targetValue=this.spacing=this.inset=this.outset=0;this.callSuper(f,g)},setTargetAttrName:function(f){if(this.targetAttrName!==
f){const g="y"===f,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=g?"boundsHeight":"boundsWidth";this.measureAttrBaseName=g?"height":"width";this.parentSetterName=g?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(f)}},setNoAddSubviewOptimization:function(f){this.noAddSubviewOptimization=f},setAxis:function(f){this.setTargetAttrName(this.axis=f)},setInset:function(f){this.setTargetValue(this.inset=f)},setSpacing:function(f){h(this,"spacing",f)},setOutset:function(f){h(this,
"outset",f)},addSubview:function(f){const g=this.locked;this.noAddSubviewOptimization||(this.locked=!0);this.callSuper(f);this.locked=g},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.callSuper(f)},stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.callSuper(f)},updateSubview:function(f,g,b,p){f=g[this.measureAttrName];g[b](p+(f-g[this.measureAttrBaseName])/2);return p+f+this.spacing},updateParent:function(f,g){this.parent[this.parentSetterName](g+
this.outset-this.spacing)}});t.ResizeLayout=new u("ResizeLayout",e,{setCollapseParent:f=>{},setTargetAttrName:function(f){if(this.targetAttrName!==f){if(this.inited){const g="x"===f;this.stopMonitoringParent(g?"height":"width");this.startMonitoringParent(g?"width":"height")}this.callSuper(f)}},setParent:function(f){if(this.parent!==f){const g="x"===this.targetAttrName?"width":"height";this.parent&&this.stopMonitoringParent(g);this.callSuper(f);this.parent&&this.startMonitoringParent(g)}},startMonitoringParent:function(f){this.attachTo(this.parent,
"update",f)},stopMonitoringParent:function(f){this.detachFrom(this.parent,"update",f)},doBeforeUpdate:function(){const f=this.measureAttrName,g=this.subviews;let b=this.parent[this.measureAttrBaseName]-this.targetValue-this.outset,p=g.length,n=0,q=0;for(;p;){const r=g[--p];this.skipSubview(r)||(++n,0<r.layoutHint?q+=r.layoutHint:b-=r[f])}0!==n&&(this.remainder=b-=(n-1)*this.spacing,this.resizeSum=q,this.scalingFactor=b/q,this.resizeSumUsed=this.remainderUsed=0,this.measureSetter="boundsWidth"===f?
"setWidth":"setHeight")},updateSubview:function(f,g,b,p){var n=g.layoutHint;0<n&&(this.resizeSumUsed+=n,n=this.resizeSum===this.resizeSumUsed?this.remainder-this.remainderUsed:Math.round(n*this.scalingFactor),this.remainderUsed+=n,g[this.measureSetter](n));return this.callSuper(f,g,b,p)},startMonitoringSubview:function(f){0<f.layoutHint||this.attachTo(f,"update",this.measureAttrName);this.attachTo(f,"update","visible")},stopMonitoringSubview:function(f){0<f.layoutHint||this.detachFrom(f,"update",
this.measureAttrName);this.detachFrom(f,"update","visible")},updateParent:(f,g)=>{}});t.AlignedLayout=new u("AlignedLayout",a,{initNode:function(f,g){this.align="middle";this.targetAttrName="y";this.setterName="setY";this.measureAttrName="boundsHeight";this.measureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=0;this.callSuper(f,g)},setTargetAttrName:function(f){if(this.targetAttrName!==f){const g="y"===f,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=
g?"boundsHeight":"boundsWidth";this.measureAttrBaseName=g?"height":"width";this.parentSetterName=g?"setHeight":"setWidth";b&&this.startMonitoringAllSubviews();this.callSuper(f)}},setAlign:function(f){if(this.align!==f){this.align=f;const g=this.locked;this.locked=!0;this.setTargetAttrName("middle"===f||"bottom"===f||"top"===f?"y":"x");this.locked=g;this.inited&&(this.fireEvent("align",f),this.update())}},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.callSuper(f)},
stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.callSuper(f)},doBeforeUpdate:function(){const f=this.measureAttrName,g=this.subviews;let b=0,p=g.length;for(;p;){const n=g[--p];this.skipSubview(n)||(b=b>n[f]?b:n[f])}this.setTargetValue(b)},updateSubview:function(f,g,b,p){switch(this.align){case "center":case "middle":g[b]((p-g[this.measureAttrName])/2);break;case "right":case "bottom":g[b](p-g[this.measureAttrName]);break;default:g[b](0)}return p},updateParent:function(f,
g){this.parent[this.parentSetterName](g)}});t.WrappingLayout=new u("WrappingLayout",a,{initNode:function(f,g){this.targetAttrName=this.axis="x";this.setterName="setX";this.otherSetterName="setY";this.measureAttrName="boundsWidth";this.measureAttrBaseName="width";this.otherMeasureAttrName="boundsHeight";this.otherMeasureAttrBaseName="height";this.parentSetterName="setHeight";this.targetValue=this.spacing=this.inset=this.outset=this.lineSpacing=this.lineInset=this.lineOutset=0;this.callSuper(f,g)},
setTargetAttrName:function(f){if(this.targetAttrName!==f){const g="y"===f,b=this.inited;b&&this.stopMonitoringAllSubviews();this.measureAttrName=g?"boundsHeight":"boundsWidth";const p=this.measureAttrBaseName=g?"height":"width";this.otherMeasureAttrName=g?"boundsWidth":"boundsHeight";const n=this.otherMeasureAttrBaseName=g?"width":"height";this.parentSetterName=g?"setWidth":"setHeight";this.otherSetterName=g?"setX":"setY";b&&(this.startMonitoringAllSubviews(),this.stopMonitoringParent(n),this.startMonitoringParent(p));
this.callSuper(f)}},setParent:function(f){if(this.parent!==f){const g="y"===this.targetAttrName;this.parent&&this.stopMonitoringParent(g?"height":"width");this.callSuper(f);this.parent&&this.startMonitoringParent(g?"height":"width")}},setAxis:function(f){this.setTargetAttrName(this.axis=f)},setInset:function(f){this.setTargetValue(this.inset=f)},setSpacing:function(f){h(this,"spacing",f)},setOutset:function(f){h(this,"outset",f)},setLineSpacing:function(f){h(this,"lineSpacing",f)},setLineInset:function(f){h(this,
"lineInset",f)},setLineOutset:function(f){h(this,"lineOutset",f)},startMonitoringParent:function(f){this.attachTo(this.parent,"update",f)},stopMonitoringParent:function(f){this.detachFrom(this.parent,"update",f)},startMonitoringSubview:function(f){this.attachTo(f,"update",this.measureAttrName);this.attachTo(f,"update",this.otherMeasureAttrName);this.callSuper(f)},stopMonitoringSubview:function(f){this.detachFrom(f,"update",this.measureAttrName);this.detachFrom(f,"update",this.otherMeasureAttrName);
this.callSuper(f)},doBeforeUpdate:function(){this.lineCount=1;this.lineSize=this.maxSize=0;this.linePos=this.lineInset;this.parentSizeLessOutset=this.parent[this.measureAttrName]-this.outset},updateSubview:function(f,g,b,p){f=g[this.measureAttrName];const n=g[this.otherMeasureAttrName];p+f>this.parentSizeLessOutset||"break"===g.layoutHint?(p=this.targetValue,this.linePos+=this.lineSize+this.lineSpacing,this.lineSize=n,++this.lineCount):n>this.lineSize&&(this.lineSize=n);g[this.otherSetterName](this.linePos+
(n-g[this.otherMeasureAttrBaseName])/2);g[b](p+(f-g[this.measureAttrBaseName])/2);this.maxSize=Math.max(this.maxSize,p+f+this.outset);return p+f+this.spacing},updateParent:function(f,g){this.parent[this.parentSetterName](this.linePos+this.lineSize+this.lineOutset)}});t.createFixedThresholdCounter(m,1,"locked")})(myt);
(t=>{const x=Math.round,w=t.DomElementProxy,u=t.Geometry.rectContainsPoint,l=(b,p)=>{const n=t.global.focus.focusedView,q=b.getIDE();if(n===b||n?.isDescendantOf(b))n._ignoreFocus=!0;const {scrollTop:r,scrollLeft:z}=q;p();n&&(n._ignoreFocus=!1,n.focus(!0));q.scrollTop=r;q.scrollLeft=z},d=(b,p,n)=>{const q=b.getODE(),r=q.parentNode;if(r){const z=()=>{const E=q.nextElementSibling;r.removeChild(q);p();r.insertBefore(q,E)};n?l(b,z):z()}else p()},c=(b,p,n,q)=>{if(p&&"object"===typeof p){if(q){var r=b.getLeastCommonAncestor(p)?.getIDE();
if(r){const z=w.getZIndexRelativeToAncestor,E=n?-1:1;q=E*z(b.getODE(),r);r=E*z(p.getODE(),r);if(q<r)return!0;if(r<q)return!1}}b=b.getODE().compareDocumentPosition(p.getODE());return n?2===b||10===b:4===b||20===b}return!1},h=b=>{b=b.getAncestors();let p=b.length,n=1,q=1;for(;p;){const r=b[--p];n*=r.scaleX||1;q*=r.scaleY||1;r.__effectiveScaleX=n;r.__effectiveScaleY=q}return{scaleX:n,scaleY:q}},m=(b,p,n)=>{const q=b.getODE();if(u(p,n,0,0,q.offsetWidth*b.__effectiveScaleX,q.offsetHeight*b.__effectiveScaleY)){if(b=
b.parent){const r=b.getIDE();return m(b,p+(q.offsetLeft-r.scrollLeft)*b.__effectiveScaleX,n+(q.offsetTop-r.scrollTop)*b.__effectiveScaleY)}return!0}return!1},a=b=>{switch(b.align){case "center":b.releaseConstraint("__doAlignCenter");break;case "right":b.releaseConstraint("__doAlignRight")}},e=b=>{const p=b.parent;if(p)switch(b.align){case "center":b.constrain("__doAlignCenter",[b,"width",b,"alignOffset",p,"width"]);break;case "right":b.constrain("__doAlignRight",[b,"width",b,"alignOffset",p,"width"]);
break;case "left":b.setX(b.alignOffset||0)}},f=b=>{switch(b.valign){case "middle":b.releaseConstraint("__doValignMiddle");break;case "bottom":b.releaseConstraint("__doValignBottom")}},g=b=>{const p=b.parent;if(p)switch(b.valign){case "middle":b.constrain("__doValignMiddle",[b,"height",b,"valignOffset",p,"height"]);break;case "bottom":b.constrain("__doValignBottom",[b,"height",b,"valignOffset",p,"height"]);break;case "top":b.setY(b.valignOffset||0)}};t.View=new JS.Class("View",t.Node,{include:[w,t.DomObservable,
t.DomObserver,t.ScrollObservable,t.FocusObservable,t.KeyObservable,t.MouseObservable],extend:{retainFocusDuringDomUpdate:l,doWhileRemovedFromDom:d},initNode:function(b,p){this.x=this.y=this.width=this.height=0;this.opacity=1;this.visible=!0;p.tagName&&(this.tagName=p.tagName,delete p.tagName);this.setDomElement(this.createOurDomElement(b));const n=this.getODS();n.left=n.top="0px";this.callSuper(b,p);this.__updateBounds(this.width,this.height)},createOurDomElement:function(b){b=document.createElement(this.tagName??
"div");b.style.position="absolute";let p;b.className=(p=this.klass).__cssClassName??(p.__cssClassName="myt-"+this.klass.__displayName.split(".").join("-"));return b},destroyAfterOrphaning:function(){this.callSuper();this.detachFromAllDomSources();this.detachAllDomObservers();this.disposeOfDomElement()},setParent:function(b){this.parent!==b&&(this.inited&&(a(this),f(this)),this.callSuper(b),this.align&&e(this),this.valign&&g(this))},getSubviews:function(){return this.subviews??(this.subviews=[])},
getSubviewsInLexicalOrder:function(){const b=[],p=this.getIDE().children,n=p.length;for(let q=0;q<n;){const r=p[q++].model;r?.parent===this&&b.push(r)}return b},getSiblingViews:function(){if(this.parent)return this.parent.getSubviews().filter(b=>b!==this)},setFocusTrap:function(b){this.focusTrap=b},setFocusCage:function(b){this.focusCage=b},setMaskFocus:function(b){this.maskFocus=b},setLayoutHint:function(b){this.layoutHint=b},getLayouts:function(){return this.layouts??(this.layouts=[])},getFirstLayout:function(){return this.getLayouts()[0]},
setIgnoreLayout:function(b){if(this.ignoreLayout!==b){var p=this.inited&&this.parent;let n;if(b){if(p)for(p=this.parent.getLayouts(),n=p.length;n;)p[--n].removeSubview(this);this.ignoreLayout=b}else if(this.ignoreLayout=b,p)for(p=this.parent.getLayouts(),n=p.length;n;)p[--n].addSubview(this)}},setDomClass:function(b){this.domClass!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domClass",b))},setDomId:function(b){this.domId!==b&&(this.callSuper(b),this.inited&&this.fireEvent("domId",b))},setAlignOffset:function(b){this.alignOffset!==
b&&(this.alignOffset=b,this.inited&&this.fireEvent("alignOffset",b),this.parent&&"left"===this.align&&this.setX(b))},setAlign:function(b){this.align!==b&&(this.inited&&a(this),this.align=b,this.inited&&(this.fireEvent("align",b),e(this)))},__doAlignCenter:function(b){this.setX(x((this.parent.width-this.width)/2)+(this.alignOffset||0))},__doAlignRight:function(b){this.setX(this.parent.width-this.width-(this.alignOffset||0))},setValignOffset:function(b){this.valignOffset!==b&&(this.valignOffset=b,this.inited&&
this.fireEvent("valignOffset",b),this.parent&&"top"===this.valign&&this.setY(b))},setValign:function(b){this.valign!==b&&(this.inited&&f(this),this.valign=b,this.inited&&(this.fireEvent("valign",b),g(this)))},__doValignMiddle:function(b){this.setY(x((this.parent.height-this.height)/2)+(this.valignOffset||0))},__doValignBottom:function(b){this.setY(this.parent.height-this.height-(this.valignOffset||0))},setX:function(b){this.x!==b&&(this.x=b,this.visible&&(this.getODS().left=b+"px"),this.inited&&this.fireEvent("x",
b))},setY:function(b){this.y!==b&&(this.y=b,this.visible&&(this.getODS().top=b+"px"),this.inited&&this.fireEvent("y",b))},setWidth:function(b){0>b&&(b=0);this.width!==b&&(this.width=b,this.getODS().width=b+"px",this.inited&&(this.__updateBounds(b,this.height),this.fireEvent("width",b)))},setHeight:function(b){0>b&&(b=0);this.height!==b&&(this.height=b,this.getODS().height=b+"px",this.inited&&(this.__updateBounds(this.width,b),this.fireEvent("height",b)))},setDomMinWidth:function(b,p){(p?this.getIDS():
this.getODS()).minWidth=null!=b?b+"px":null},getDomMinWidth:function(b){b=(b?this.getIDS():this.getODS()).minWidth;return null!=b?Number.parseInt(b):null},setDomMinHeight:function(b,p){(p?this.getIDS():this.getODS()).minHeight=null!=b?b+"px":null},getDomMinHeight:function(b){b=(b?this.getIDS():this.getODS()).minHeight;return null!=b?Number.parseInt(b):null},setTextColor:function(b){this.textColor!==b&&(this.textColor=b,this.getODS().color=b||"inherit",this.inited&&this.fireEvent("textColor",b))},
setBgColor:function(b){this.bgColor!==b&&(this.getODS().backgroundColor=this.bgColor=b,this.inited&&this.fireEvent("bgColor",b))},isColorAttr:b=>"bgColor"===b||"textColor"===b,setOpacity:function(b){this.opacity!==b&&(this.getODS().opacity=this.opacity=b,this.inited&&this.fireEvent("opacity",b))},setOverflow:function(b){const p=this.overflow;if(p!==b){this.overflow=b;const n=this.getIDS();if("autox"===b)n.overflowX="auto",n.overflowY="hidden";else if("autoy"===b)n.overflowY="auto",n.overflowX="hidden";
else{if("autox"===p||"autoy"===p)n.overflowX=n.overflowY=null;n.overflow=b||"visible"}this.inited&&this.fireEvent("overflow",b)}},setVisible:function(b){if(this.visible!==b){this.visible=b;const p=this.getODS();p.visibility=b?"inherit":"hidden";p.left=b?this.x+"px":"-100000px";p.top=b?this.y+"px":"-100000px";this.inited&&this.fireEvent("visible",b)}},setPointerEvents:function(b){this.pointerEvents!==b&&(this.pointerEvents=b,this.getODS().pointerEvents=b||"auto",this.inited&&this.fireEvent("pointerEvents",
b))},setCursor:function(b){this.cursor!==b&&(this.cursor=b,this.getODS().cursor=b||"auto",this.inited&&this.fireEvent("cursor",b))},__updateBounds:function(b,p){this.boundsWidth!==b&&this.fireEvent("boundsWidth",this.boundsWidth=b);this.boundsHeight!==p&&this.fireEvent("boundsHeight",this.boundsHeight=p)},setOutline:function(b){const [p,n,q]=b??[];this.setOutlineWidth(p);this.setOutlineStyle(n);this.setOutlineColor(q)},setOutlineWidth:function(b){this.getODS().outlineWidth=(this.outlineWidth=b||0)+
"px"},setOutlineStyle:function(b){this.getODS().outlineStyle=this.outlineStyle=b||"none"},setOutlineColor:function(b){this.getODS().outlineColor=this.outlineColor=b||"#000"},setBorder:function(b){const [p,n,q]=b??[];this.setBorderWidth(p);this.setBorderStyle(n);this.setBorderColor(q)},setBorderWidth:function(b){this.getODS().borderWidth=(this.borderWidth=b||0)+"px"},setBorderStyle:function(b){this.getODS().borderStyle=this.borderStyle=b||"none"},setBorderColor:function(b){this.getODS().borderColor=
this.borderColor=b||"#000"},setRoundedCorners:function(b){this.getODS().borderRadius=b+"px"},setRoundedTopLeftCorner:function(b){this.getODS().borderTopLeftRadius=b+"px"},setRoundedTopRightCorner:function(b){this.getODS().borderTopRightRadius=b+"px"},setRoundedBottomLeftCorner:function(b){this.getODS().borderBottomLeftRadius=b+"px"},setRoundedBottomRightCorner:function(b){this.getODS().borderBottomRightRadius=b+"px"},setBoxShadow:function(b){const [p,n,q,r]=b??[];this.getODS().boxShadow=b?(p||0)+
"px "+(n||0)+"px "+(q||7)+"px "+(r||"#000"):"none"},setGradient:function(b){const p=this.getODS();if(b){let q=b[0];"linear"===q||"radial"===q?b.shift():q="linear";let r=b[0];if("radial"===q){void 0===r?r="closest-side":b.shift();var n=b[0];if(void 0===n)n="circle";else{switch(n){case "circle":case "ellipse":break;default:console.warn("Unexpected radial gradient shape",n),n="circle"}b.shift()}let z=b[0];void 0===z?z="center":(z=z.replaceAll("middle","center"),b.shift());r=n+" "+r+" at "+z}else"number"===
typeof r?(r+="deg",b.shift()):r?(r="to "+r,b.shift()):r="0deg";n=z=>{b.push(z&&"inherit"!==z?z:"transparent")};2>b.length&&n(this.textColor);2>b.length&&n(this.bgColor);p.background=q+"-gradient("+r+","+b.join(",")+")"}else p.background="none";this.bgColor=void 0},setTooltip:function(b){this.tooltip!==b&&(this.tooltip=this.getODE().title=b,this.inited&&this.fireEvent("tooltip",b))},isVisible:function(){return null==this.searchAncestorsOrSelf(b=>!b.visible)},getFocusTrap:function(b){return this.searchAncestorsOrSelf(p=>
p.focusCage||p.focusTrap&&!b)},subnodeAdded:function(b){b instanceof t.View?(this.getIDE().appendChild(b.getODE()),this.getSubviews().push(b),this.fireEvent("subviewAdded",b),this.subviewAdded(b)):b instanceof t.Layout&&(this.getLayouts().push(b),this.fireEvent("layoutAdded",b),this.layoutAdded(b))},subnodeRemoved:function(b){let p;b instanceof t.View?(p=this.getSubviewIndex(b),-1<p&&(this.fireEvent("subviewRemoved",b),b.removeDomElement(),this.subviews.splice(p,1),this.subviewRemoved(b))):b instanceof
t.Layout&&(p=this.getLayoutIndex(b),-1<p&&(this.fireEvent("layoutRemoved",b),this.layouts.splice(p,1),this.layoutRemoved(b)))},hasSubview:function(b){return this.getSubviews().includes(b)},getSubviewIndex:function(b){return this.getSubviews().indexOf(b)},subviewAdded:b=>{},subviewRemoved:b=>{},getNextSibling:function(){if(this.parent)return this.getODE().nextElementSibling?.model},getPrevSibling:function(){if(this.parent)return this.getODE().previousElementSibling?.model},destroyAllSubviews:function(b){const p=
this.getSubviews();for(let n=p.length;0<n;){const q=p[--n];b&&!b(q)||q.destroy()}},hasLayout:function(b){return this.getLayouts().includes(b)},getLayoutIndex:function(b){return this.getLayouts().indexOf(b)},layoutAdded:b=>{},layoutRemoved:b=>{},isBehind:function(b,p){return c(this,b,!1,p)},isInFrontOf:function(b,p){return c(this,b,!0,p)},bringToFront:function(){this.parent.bringSubviewToFront(this)},sendToBack:function(){this.parent.sendSubviewToBack(this)},sendBehind:function(b,p){this.parent.sendSubviewBehind(this,
b,p)},sendInFrontOf:function(b,p){this.parent.sendSubviewInFrontOf(this,b,p)},doSubviewsReorderedInDom:b=>{},bringSubviewToFront:function(b){const p=this;if(b?.parent===p){const n=p.getIDE(),q=b.getODE();q!==n.lastElementChild&&l(b,()=>{n.appendChild(q);p.doSubviewsReorderedInDom(b)})}},sendSubviewToBack:function(b){const p=this;if(b?.parent===p){const n=p.getIDE(),q=n.firstElementChild,r=b.getODE();r!==q&&l(b,()=>{n.insertBefore(r,q);p.doSubviewsReorderedInDom(b)})}},sendSubviewBehind:function(b,
p,n){n?.moveSubviewBefore(b,p);const q=this;if(b?.parent===q&&p?.parent===q){const r=b.getODE(),z=p.getODE();if(r!==z.previousElementSibling){const E=q.getIDE();l(b,()=>{E.insertBefore(r,z);q.doSubviewsReorderedInDom(b)})}}n?.update()},sendSubviewInFrontOf:function(b,p,n){n?.moveSubviewAfter(b,p);const q=this;if(b?.parent===q&&p?.parent===q){const r=b.getODE(),z=p.getODE().nextElementSibling;if(r!==z){const E=q.getIDE();l(b,()=>{E.insertBefore(r,z);q.doSubviewsReorderedInDom(b)})}}n?.update()},sortSubviews:function(b){const p=
this,n=p.getSubviews();t.isNotSorted(n,b)&&(n.sort(b),d(p,()=>{const q=document.createDocumentFragment(),r=n.length;for(let z=0;r>z;)q.appendChild(n[z++].getODE());p.getIDE().appendChild(q)},!0),p.doSubviewsReorderedInDom(null))},containsPoint:function(b,p,n){const q=this.getODE();if(!q)return!1;const {x:r,y:z}=w.getRelativePosition(q,n);return u(b,p,r,z,this.width,this.height)},isPointVisible:function(b,p){const {x:n,y:q}=this.getPagePosition(!0);h(this);return m(this,b-n,p-q)},intersectsWithSibling:function(b){return b.parent===
this.parent&&!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)},getEffectiveScale:function(){return h(this)},getEffectiveScaleX:function(){return h(this).scaleX},getEffectiveScaleY:function(){return h(this).scaleY}})})(myt);
(t=>{const x=(u,l,d)=>{const c=w(u,l);u.getODS().transform=c+(0===c.length?"":" ")+l+"("+d+")"},w=(u,l)=>{u=u.getODS();var d=u.transform;if(!d||0===d.length)return"";d=d.split(" ");let c=d.length;for(;c;)if(d[--c].startsWith(l)){d.splice(c,1);break}return u.transform=d.join(" ")};t.TransformSupport=new JS.Module("TransformSupport",{setTransformOrigin:function(u){this.transformOrigin!==u&&(this.transformOrigin=u,this.getODS().transformOrigin=u||"50% 50% 0",this.inited&&(this.__updateBounds(this.width,
this.height),this.fireEvent("transformOrigin",u)))},setRotation:function(u){this.rotation!==u&&(this.rotation=u,x(this,"rotate",(u||0)+"deg"),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("rotation",u)))},setScale:function(u){const l=this.scaleX!==u,d=this.scaleY!==u;if(l){var c=this.scaleX=u;null==c?w(this,"scaleX"):x(this,"scaleX",c||1)}d&&(c=this.scaleY=u,null==c?w(this,"scaleY"):x(this,"scaleY",c||1));this.inited&&((l||d)&&this.__updateBounds(this.width,this.height),
l&&this.fireEvent("scaleX",u),d&&this.fireEvent("scaleY",u))},setScaleX:function(u){if(this.scaleX!==u){var l=this.scaleX=u;null==l?w(this,"scaleX"):x(this,"scaleX",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleX",u))}},setScaleY:function(u){if(this.scaleY!==u){var l=this.scaleY=u;null==l?w(this,"scaleY"):x(this,"scaleY",l||1);this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("scaleY",u))}},setSkewX:function(u){this.skewX!==u&&(this.skewX=
u,x(this,"skewX",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewX",u)))},setSkewY:function(u){this.skewY!==u&&(this.skewY=u,x(this,"skewY",u||0),this.inited&&(this.__updateBounds(this.width,this.height),this.fireEvent("skewY",u)))},__updateBounds:function(u,l){const {rotation:d,scaleX:c,scaleY:h}=this,m=(null==c||1===c)&&(null==h||1===h);if(!m||null!=d&&0!==d&&180!==d)!m||90!==d&&270!==d?{width:u,height:l}=this.getODE().getBoundingClientRect():{width:l,height:u}=
this;this.callSuper(u,l)}})})(myt);
(t=>{const x=JS.Module,w=(c,h)=>{if("auto"===h)c.__hasSetWidth=!1,c.getODS().width="auto",c.sizeViewToDom();else return c.__hasSetWidth=!0},u=(c,h)=>{if("auto"===h)c.__hasSetHeight=!1,c.getODS().height="auto",c.sizeViewToDom();else return c.__hasSetHeight=!0},l=c=>{if(!c.__hasSetWidth){const h=c.getODE().offsetWidth/c.getEffectiveScaleX();c.width!==h&&(c.width=h,c.inited&&c.__updateBounds(h,c.height),c.fireEvent("width",h))}},d=c=>{if(!c.__hasSetHeight){const h=c.getODE().offsetHeight/c.getEffectiveScaleY();
c.height!==h&&(c.height=h,c.inited&&c.__updateBounds(c.width,h),c.fireEvent("height",h))}};t.SizeToDom=new x("SizeToDom",{extend:{sizeWidth:l,sizeHeight:d},initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c){w(this,c)&&this.callSuper(c)},setHeight:function(c){u(this,c)&&this.callSuper(c)},sizeViewToDom:function(){l(this);d(this)}});t.SizeWidthToDom=new x("SizeWidthToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setWidth:function(c){w(this,
c)&&this.callSuper(c)},sizeViewToDom:function(){l(this)}});t.SizeHeightToDom=new x("SizeHeightToDom",{initNode:function(c,h){this.callSuper(c,h);this.sizeViewToDom()},setHeight:function(c){u(this,c)&&this.callSuper(c)},sizeViewToDom:function(){d(this)}})})(myt);
(t=>{const x=JS.Module,w=(c,h,m,a)=>{c[m]!==h&&(c[m]=h,c.getIDS()[m]=h||a||"inherit",c.inited&&(c.fireEvent(m,h),c.sizeViewToDom()))};t.TextSupport=new x("TextSupport",{setWidth:function(c){this.callSuper(c);"auto"!==c&&(c=this.whiteSpace,"normal"!==c&&"pre-line"!==c&&"pre-wrap"!==c&&"break-spaces"!==c||this.sizeViewToDom())},setText:function(c){c||="";c=this.valueFromEvent(c);this.text!==c&&(this.getIDE().innerHTML=this.text=c,this.inited&&(this.fireEvent("text",c),this.sizeViewToDom()))},setTextOverflow:function(c){this.textOverflow!==
c&&(this.textOverflow=c,this.getIDS().textOverflow=c||"inherit",this.inited&&this.fireEvent("textOverflow",c))},setTextAlign:function(c){this.textAlign!==c&&(this.textAlign=c,this.getIDS().textAlign=c||"inherit",this.inited&&this.fireEvent("textAlign",c))},setWhiteSpace:function(c){w(this,c,"whiteSpace")},setWordWrap:function(c){w(this,c,"wordWrap","normal")},setTextIndent:function(c){w(this,c,"textIndent")},setTextTransform:function(c){w(this,c,"textTransform")},setTextDecoration:function(c){w(this,
c,"textDecoration")},setLineHeight:function(c){w(this,c,"lineHeight")},setLetterSpacing:function(c){w(this,c,"letterSpacing")},setWordSpacing:function(c){w(this,c,"wordSpacing")},setFontFamily:function(c){w(this,c,"fontFamily")},setFontStyle:function(c){w(this,c,"fontStyle")},setFontVariant:function(c){w(this,c,"fontVariant")},setFontWeight:function(c){w(this,c,"fontWeight")},setFontSize:function(c){w(this,c,"fontSize")},setUserUnselectable:function(c){this.userUnselectable!==c&&(this.userUnselectable=
c,this[c?"addDomClass":"removeDomClass"]("mytUnselectable"),"default"!==this.cursor&&"text"!==this.cursor||this.setCursor(c?"default":"text"),this.inited&&this.fireEvent("userUnselectable",c))},enableEllipsis:function(){this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis")},disableEllipsis:function(){this.setOverflow("visible")},showTextShadow:function(c,h,m,a){this.getIDS().textShadow=(c||0)+"px "+(h||0)+"px "+(null!=m?m:2)+"px "+(a||"#000")},hideTextShadow:function(){this.getIDS().textShadow=
"none"}});const u=(c,h,m)=>{const a="padding"+m;h=Math.max(h,0);c[a]!==h&&(c[a]=h,c.getIDS()[a]=h+"px",c.fireEvent(a,h),"Left"===m||"Right"===m?l(c):d(c))},l=c=>{c.__hasSetWidth&&(c.getODS().width=c.width-(c.paddingLeft||0)-(c.paddingRight||0)+"px",c.inited&&c.sizeViewToDom())},d=c=>{c.__hasSetHeight&&(c.getODS().height=c.height-(c.paddingTop||0)-(c.paddingBottom||0)+"px",c.inited&&c.sizeViewToDom())};t.PaddedTextSupport=new x("PaddedTextSupport",{setWidth:function(c){this.callSuper(c);l(this)},setHeight:function(c){this.callSuper(c);
d(this)},setPadding:function(c){let h,m,a;c||=0;"object"===typeof c?(h=c.top||0,m=c.right||0,a=c.bottom||0,c=c.left||0):h=m=a=c;this.setPaddingTop(h);this.setPaddingRight(m);this.setPaddingBottom(a);this.setPaddingLeft(c)},setPaddingTop:function(c){u(this,c,"Top")},setPaddingRight:function(c){u(this,c,"Right")},setPaddingBottom:function(c){u(this,c,"Bottom")},setPaddingLeft:function(c){u(this,c,"Left")}})})(myt);
(t=>{const x={},w={},u=l=>{const d=l.imageUrl;if(l.calculateNaturalSize&&d){var c=x[d];if(c)l.setNaturalWidth(c.width),l.setNaturalHeight(c.height);else{c=w[d];if(!c){w[d]=c=[];const h=new Image;h.onerror=m=>{if(m=w[d]){let a=m.length;for(;a;)m[--a].setImageLoadingError(!0);m.length=0;delete w[d]}};h.onload=()=>{const m=h.width,a=h.height,e=w[d];if(e){let f=e.length;for(;f;){const g=e[--f];g.imageUrl===d&&(g.setNaturalWidth(m),g.setNaturalHeight(a))}e.length=0;delete w[d]}x[d]={width:m,height:a}};
h.src=d}c.push(l)}}};t.ImageSupport=new JS.Module("ImageSupport",{extend:{getSizeFromCache:l=>x[l]},initNode:function(l,d){d.imageRepeat??(d.imageRepeat="no-repeat");d.imageAttachment??(d.imageAttachment="scroll");this.callSuper(l,d)},setImageUrl:function(l){this.imageUrl!==l&&(this.imageUrl=l,this.getIDS().backgroundImage=l?'url("'+l+'")':"none",this.inited&&(this.fireEvent("imageUrl",l),this.setNaturalWidth(),this.setNaturalHeight(),!l&&this.useNaturalSize&&(this.setWidth(0),this.setHeight(0))),
u(this))},setImageLoadingError:function(l){this.set("imageLoadingError",l,!0)},setImageSize:function(l){this.imageSize!==l&&(this.imageSize=l,this.getIDS().backgroundSize=l||"auto",this.inited&&this.fireEvent("imageSize",l))},setImageRepeat:function(l){this.imageRepeat!==l&&(this.getIDS().backgroundRepeat=this.imageRepeat=l,this.inited&&this.fireEvent("imageRepeat",l))},setImagePosition:function(l){this.imagePosition!==l&&(this.getIDS().backgroundPosition=this.imagePosition=l,this.inited&&this.fireEvent("imagePosition",
l))},setImageAttachment:function(l){this.imageAttachment!==l&&(this.getIDS().backgroundAttachment=this.imageAttachment=l,this.inited&&this.fireEvent("imageAttachment",l))},setCalculateNaturalSize:function(l){this.calculateNaturalSize!==l&&(this.calculateNaturalSize=l,this.inited&&this.fireEvent("calculateNaturalSize",l),u(this))},setNaturalWidth:function(l){this.naturalWidth!==l&&(this.naturalWidth=l,this.inited&&this.fireEvent("naturalWidth",l),this.useNaturalSize&&l&&this.setWidth(l))},setNaturalHeight:function(l){this.naturalHeight!==
l&&(this.naturalHeight=l,this.inited&&this.fireEvent("naturalHeight",l),this.useNaturalSize&&l&&this.setHeight(l))},setUseNaturalSize:function(l){this.useNaturalSize!==l&&(this.useNaturalSize=l,this.inited&&this.fireEvent("useNaturalSize",l),l&&(this.naturalWidth&&this.setWidth(this.naturalWidth),this.naturalHeight&&this.setHeight(this.naturalHeight)),l&&!this.calculateNaturalSize&&this.setCalculateNaturalSize(!0))}})})(myt);
(t=>{const x=JS.Class,{View:w,SizeToDom:u}=t;t.Flexbox=new x("Flexbox",w,{include:[t.FlexboxSupport]});t.Frame=new x("Frame",w,{initNode:function(l,d){d.tagName??(d.tagName="iframe");this.callSuper(l,d);l=t.global.mouse;this.attachToDom(l,"__doMouseDown","mousedown",!0);this.attachToDom(l,"__doMouseUp","mouseup",!0)},createOurDomElement:function(l){l=this.callSuper(l);(Array.isArray(l)?l[1]:l).style.border="0px";return l},setSrc:function(l){this.src!==l&&(this.src=this.getIDE().src=l,this.inited&&
this.fireEvent("src",l))},__doMouseDown:function(l){this.__restorePointerEvents=this.pointerEvents;this.setPointerEvents("none");return!0},__doMouseUp:function(l){this.setPointerEvents(this.__restorePointerEvents);return!0}});t.Markup=new x("Markup",w,{include:[u],setHtml:function(l){this.html!==l&&(this.getIDE().innerHTML=this.html=l,this.inited&&(this.fireEvent("html",l),this.sizeViewToDom()))}});t.Text=new x("Text",w,{include:[u,t.TextSupport],initNode:function(l,d){d.whiteSpace??(d.whiteSpace=
"nowrap");d.userUnselectable??(d.userUnselectable=!0);this.callSuper(l,d)},measureNoWrapWidth:function(){const l=this.__hasSetWidth,d=this.width;if(!l&&"nowrap"===this.whiteSpace)return d;const c=this.getIDS(),h=c.whiteSpace;l&&(c.width="auto");c.whiteSpace="nowrap";const m=this.getODE().getBoundingClientRect().width;c.whiteSpace=h;l&&(c.width=d);return m}});t.PaddedText=new x("PaddedText",t.Text,{include:[t.PaddedTextSupport]});t.Image=new x("Image",w,{include:[t.ImageSupport],initNode:function(l,
d){d.useNaturalSize??(d.useNaturalSize=!0);this.callSuper(l,d)}});t.BackView=new x("BackView",w,{sendSubviewToBack:function(l){if(l.parent===this){const d=this.getIDE(),c=d.childNodes[1];l=l.getODE();l!==c&&(l=d.removeChild(l))&&d.insertBefore(l,c)}}})})(myt);
(t=>{const x=Math.round,w=c=>{c.parent&&0<=c.percentOfParentWidth&&c.syncTo(c.parent,"__doPOPW","width")},u=c=>{0<=c.percentOfParentWidth&&c.detachFrom(c.parent,"__doPOPW","width")},l=c=>{c.parent&&0<=c.percentOfParentHeight&&c.syncTo(c.parent,"__doPOPH","height")},d=c=>{0<=c.percentOfParentHeight&&c.detachFrom(c.parent,"__doPOPH","height")};t.SizeToParent=new JS.Module("SizeToParent",{setParent:function(c){this.parent!==c&&(this.inited&&(u(this),d(this)),this.callSuper(c),w(this),l(this))},setPercentOfParentWidthOffset:function(c){this.percentOfParentWidthOffset!==
c&&(this.percentOfParentWidthOffset=c,this.inited&&(this.fireEvent("percentOfParentWidthOffset",c),this.__doPOPW()))},setPercentOfParentWidth:function(c){this.percentOfParentWidth!==c&&(this.inited&&u(this),this.percentOfParentWidth=c,this.inited&&this.fireEvent("percentOfParentWidth",c),w(this))},setPercentOfParentHeightOffset:function(c){this.percentOfParentHeightOffset!==c&&(this.percentOfParentHeightOffset=c,this.inited&&(this.fireEvent("percentOfParentHeightOffset",c),this.__doPOPH()))},setPercentOfParentHeight:function(c){this.percentOfParentHeight!==
c&&(this.inited&&d(this),this.percentOfParentHeight=c,this.inited&&this.fireEvent("percentOfParentHeight",c),l(this))},__doPOPW:function(c){this.setWidth((this.percentOfParentWidthOffset||0)+x(this.percentOfParentWidth/100*this.parent.width));this.inited||this.fireEvent("width",this.width)},__doPOPH:function(c){this.setHeight((this.percentOfParentHeightOffset||0)+x(this.percentOfParentHeight/100*this.parent.height));this.inited||this.fireEvent("height",this.height)}})})(myt);
(t=>{let x;const w=[];new JS.Singleton("GlobalRootViewRegistry",{include:[t.Observable],initialize:function(){t.global.register("roots",x=this)},getRoots:()=>w,addRoot:u=>{w.push(u);x.fireEvent("rootAdded",u)},removeRoot:u=>{const l=w.indexOf(u);-1<l&&(w.splice(l,1),x.fireEvent("rootRemoved",u))}})})(myt);
(t=>{const {addEventListener:x,removeEventListener:w,global:{roots:u}}=t,l=t.RootView=new JS.Module("RootView",{extend:{setupCaptureDrop:d=>{const c=d.getIDE();d=d.__captureDrop=h=>{h.preventDefault()};x(c,"drop",d);x(c,"dragover",d)},teardownCaptureDrop:d=>{const c=d.getIDE();d=d.__captureDrop;w(c,"drop",d);w(c,"dragover",d)}},initNode:function(d,c){this.callSuper(d,c);this.setZIndex(0);this.addDomClass("myt");u.addRoot(this);l.setupCaptureDrop(this)},createOurDomElement:function(d){d||(d=this.callSuper(d),
t.getElement().appendChild(d));return d},destroy:function(){l.teardownCaptureDrop(this);u.removeRoot(this);this.keepDomElementWhenDestroyed||this.removeDomElement();this.callSuper()},setKeepDomElementWhenDestroyed:function(d){this.keepDomElementWhenDestroyed=d},setParent:d=>{},bringToFront:function(){var d=this.getIDE();const c=d.parentNode;d!==c.lastChild&&(d=c.removeChild(d))&&c.appendChild(d)},sendToBack:function(){var d=this.getIDE();const c=d.parentNode;d!==c.firstChild&&(d=c.removeChild(d))&&
c.insertBefore(d,c.firstChild)},sendBehind:function(d,c){c=this.getIDE();d=d.getIDE();const h=c.parentNode;d.parentNode===h&&(c=h.removeChild(c))&&h.insertBefore(c,d)},sendInFrontOf:function(d,c){d.getIDE().parentNode===this.getIDE().parentNode&&(this.sendBehind(d,c),d.sendBehind(this,c))}})})(myt);
(t=>{let x,w,u=!1;const {requestAnimationFrame:l,cancelAnimationFrame:d}=window,c={},h=a=>{x=l(h);a=Math.round(a);-1!==w&&(c.delta=a-w,c.time=a,m.fireEvent("idle",c));w=a},m=new JS.Singleton("GlobalIdle",{include:[t.Observable],initialize:function(){t.global.register("idle",this)},attachObserver:(a,e,f)=>{a=m.callSuper(a,e,f);!u&&m.hasObservers("idle")&&(u=!0,w=-1,x=l(h));return a},detachObserver:(a,e,f)=>{a=m.callSuper(a,e,f);u&&!m.hasObservers("idle")&&(d(x),u=!1);return a}})})(myt);
(t=>{let x,w,u;const l=t.global,d=l.idle,c=window.document;new JS.Singleton("GlobalWindowResize",{include:[t.Observable,t.Observer],initialize:function(){x=this;x.attachTo(d,"__setup","idle");l.register("windowResize",x)},__setup:h=>{const m=c.body;m&&(x.detachFrom(d,"__setup","idle"),(new ResizeObserver(()=>{x.fireEvent("resize",{w:w=m.clientWidth,h:u=m.clientHeight})})).observe(m))},getWidth:()=>w??=c.body.clientWidth,getHeight:()=>u??=c.body.clientHeight})})(myt);
(t=>{const x=JS.Module,w=t.global.windowResize,u=Math.max,l=c=>{const h=c.resizeDimension;"both"!==h&&"width"!==h||c.setWidth(u(c.minWidth,w.getWidth()));"both"!==h&&"height"!==h||c.setHeight(u(c.minHeight,w.getHeight()))},d=t.SizeToWindow=new x("SizeToWindow",{include:[t.RootView],initNode:function(c,h){this.minWidth=this.minHeight=0;h.resizeDimension??(h.resizeDimension="both");this.attachTo(w,"__hndlResize","resize");this.callSuper(c,h)},setResizeDimension:function(c){this.resizeDimension!==c&&
(this.resizeDimension=c,l(this))},setMinWidth:function(c){this.minWidth!==c&&(this.minWidth=c,l(this))},setMinHeight:function(c){this.minHeight!==c&&(this.minHeight=c,l(this))},__hndlResize:function(c){l(this)}});t.SizeToWindowWidth=new x("SizeToWindowWidth",{include:[d],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="width");this.callSuper(c,h)}});t.SizeToWindowHeight=new x("SizeToWindowHeight",{include:[d],initNode:function(c,h){h.resizeDimension??(h.resizeDimension="height");this.callSuper(c,
h)}})})(myt);
(t=>{const x=Math,{min:w,max:u}=x,l=g=>w(255,u(0,x.round(g))),d=g=>l(g).toString(16).padStart(2,"0"),c=(g,b,p,n)=>(n?"#":"")+d(g)+d(b)+d(p),h=g=>new f((16711680&g)>>16,(65280&g)>>8,255&g),m=(g,b)=>{if("string"===typeof g)if(g.endsWith("%"))g=parseFloat(g.slice(0,-1))*b/100;else return 0;g=w(b,u(0,g))/b;return 1E-6>x.abs(1-g)?1:g},a=(g,b,p)=>{g=m(g,255);b=m(b,255);p=m(p,255);const n=u(g,b,p),q=n-w(g,b,p);if(0===q)return{h:0,s:0,v:n};let r;switch(n){case g:r=(b-p)/q+(b<p?6:0);break;case b:r=(p-g)/q+
2;break;case p:r=(g-b)/q+4}return{h:60*r,s:0===n?0:q/n,v:n}},e=(g,b,p)=>{g=6*m(g,360);b=m(b,100);p=m(p,100);var n=x.floor(g);const q=g-n;g=p*(1-b);const r=p*(1-q*b);b=p*(1-(1-q)*b);n%=6;return{red:255*[p,r,g,g,b,p][n],green:255*[b,p,p,r,g,g][n],blue:255*[g,g,b,p,p,r][n]}},f=t.Color=new JS.Class("Color",{extend:{toUnitRange:m,rgbToHsv:a,hsvToRgb:e,toHex:d,rgbToHex:c,cleanChannelValue:l,getRedChannel:g=>(16711680&g)>>16,getGreenChannel:g=>(65280&g)>>8,getBlueChannel:g=>255&g,makeColorFromNumber:h,makeColorFromHexString:g=>
{if(g)switch(g.startsWith("#")&&(g=g.slice(1)),g.length){case 0:g+="0";case 1:g+="0";case 2:g+="0";case 3:case 4:case 5:const [b,p,n]=g;return new f(parseInt(b+b,16),parseInt(p+p,16),parseInt(n+n,16));case 6:return h(parseInt(g,16));default:return h(parseInt(g.slice(0,6),16))}},makeColorFromHSV:(g,b,p)=>{const {red:n,green:q,blue:r}=e(g,b,p);return new f(n,q,r)},getLighterColor:(g,b)=>h(g).isLighterThan(h(b))?g:b,makeColorNumberFromChannels:(g,b,p)=>(l(g)<<16)+(l(b)<<8)+l(p),makeBlendedColor:(g,b,
p)=>new f(g.red+p*(b.red-g.red),g.green+p*(b.green-g.green),g.blue+p*(b.blue-g.blue))},initialize:function(g,b,p){this.setRed(g);this.setGreen(b);this.setBlue(p)},setRed:function(g){this.red=l(g)},setGreen:function(g){this.green=l(g)},setBlue:function(g){this.blue=l(g)},getColorNumber:function(){return(this.red<<16)+(this.green<<8)+this.blue},getHtmlHexString:function(){return c(this.red,this.green,this.blue,!0)},getHSV:function(){return a(this.red,this.green,this.blue)},isLighterThan:function(g){g=
this.getDiffFrom(g);return 0>g.red+g.green+g.blue},getDiffFrom:function(g){return{red:g.red-this.red,green:g.green-this.green,blue:g.blue-this.blue}},applyDiff:function(g){return this.add(g)},add:function(g){this.setRed(this.red+g.red);this.setGreen(this.green+g.green);this.setBlue(this.blue+g.blue);return this},subtract:function(g){this.setRed(this.red-g.red);this.setGreen(this.green-g.green);this.setBlue(this.blue-g.blue);return this},multiply:function(g){this.setRed(this.red*g);this.setGreen(this.green*
g);this.setBlue(this.blue*g);return this},divide:function(g){this.setRed(this.red/g);this.setGreen(this.green/g);this.setBlue(this.blue/g);return this},clone:function(){return new f(this.red,this.green,this.blue)},equals:function(g){return g===this||g?.isA?.(f)&&g.red===this.red&&g.green===this.green&&g.blue===this.blue}})})(myt);
(t=>{const {max:x,sin:w,cos:u,pow:l,sqrt:d,PI:c}=Math,h=2*c,m=c/2,a=t.global.idle,e=t.Color.makeColorFromHexString,f={linear:n=>n,inQuad:n=>n*n,outQuad:n=>-n*(n-2),inOutQuad:n=>1>(n*=2)?n*n/2:-(--n*(n-2)-1)/2,inCubic:n=>n*n*n,outCubic:n=>--n*n*n+1,inOutCubic:n=>1>(n*=2)?n*n*n/2:((n-=2)*n*n+2)/2,inQuart:n=>n*n*n*n,outQuart:n=>-(--n*n*n*n-1),inOutQuart:n=>1>(n*=2)?n*n*n*n/2:-((n-=2)*n*n*n-2)/2,inQuint:n=>n*n*n*n*n,outQuint:n=>--n*n*n*n*n+1,inOutQuint:n=>1>(n*=2)?n*n*n*n*n/2:((n-=2)*n*n*n*n+2)/2,inSine:n=>
-u(n*m)+1,outSine:n=>w(n*m),inOutSine:n=>-(u(n*c)-1)/2,inCirc:n=>-(d(1-n*n)-1),outCirc:n=>d(1- --n*n),inOutCirc:n=>1>(n*=2)?-(d(1-n*n)-1)/2:(d(1-(n-=2)*n)+1)/2,inExpo:n=>0===n?0:l(2,10*(n-1)),outExpo:n=>1===n?1:-l(2,-10*n)+1,inOutExpo:n=>0===n||1===n?n:1>(n*=2)?l(2,10*(n-1))/2:(-l(2,-10*--n)+2)/2,inElastic:n=>0===n||1===n?n:-(l(2,10*--n)*w((1*n-.075)*h/.3)),outElastic:n=>0===n||1===n?n:l(2,-10*n)*w((1*n-.075)*h/.3)+1,inOutElastic:n=>0===n||1===n?n:1>(n*=2)?-(l(2,10*--n)*w((1*n-.1125)*h/.45))/2:l(2,
-10*--n)*w((1*n-.1125)*h/.45)/2+1,inBack:(n,q=1.70158)=>(n/=1)*n*((q+1)*n-q),outBack:(n,q=1.70158)=>(n=n/1-1)*n*((q+1)*n+q)+1,inOutBack:(n,q=1.70158)=>1>(n*=2)?n*n*(((q*=1.525)+1)*n-q)/2:((n-=2)*n*(((q*=1.525)+1)*n+q)+2)/2,inBounce:n=>1-f.outBounce(1-n),outBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,inOutBounce:n=>1>(n*=2)?f.inBounce(n)/2:(f.outBounce(n-1)+1)/2},g=f.inOutQuad,b=n=>{n.__tmpFrom=!1;n.__loopCnt=
n.reverse?n.repeat-1:0;n.__prog=n.reverse?n.duration:0},p=(n,q)=>{const {running:r,paused:z,reverse:E,duration:G,repeat:L,__prog:J,easingFunction:N,callback:y}=n;if(r&&!z){E&&(q*=-1);q=J+q;let H=0;q>G?(H=q-G,q=G,++n.__loopCnt===L&&(H=0)):0>q&&(H=-q,q=0,0>--n.__loopCnt&&0<L&&(H=0));var k=n.target??n.parent;if(k){const {relative:K,attribute:Q,__isColorAnim:S,__loopCnt:M,to:V}=n;var v=x(0,q/G),A=x(0,J/G);null==n.from&&(n.__tmpFrom=!0,n.from=K?S?"#000":0:k.get(Q));A=N(v)-(K?N(A):0);var B=n.from,D=K?k.get(Q):
B;v=k.set;if(S){B=e(B);const ea=e(V);D=K?e(D):B;D.setRed(D.red+(ea.red-B.red)*A);D.setGreen(D.green+(ea.green-B.green)*A);D.setBlue(D.blue+(ea.blue-B.blue)*A);A=D.getHtmlHexString()}else A=D+(V-B)*A;v.call(k,Q,A);!E&&M===L||E&&0>M&&0<L?(n.setRunning(!1),y?.call(n,!0)):0<H?(n.fireEvent("repeat",M),n.__prog=E?G:0,p(n,H)):n.__prog=q}else console.log("No target for animator",n),n.setRunning(!1),y?.call(n,!1)}};t.Animator=new JS.Class("Animator",t.Node,{include:[t.Reusable],extend:{easings:f},initNode:function(n,
q){this.duration=1E3;this.relative=this.reverse=this.running=this.paused=!1;this.repeat=1;this.easingFunction=g;this.callSuper(n,q);b(this)},setRunning:function(n){if(this.running!==n&&(this.running=n,this.inited&&this.fireEvent("running",n),!this.paused)){if(n){const q=this.target??this.parent;this.__isColorAnim=q&&"function"===typeof q.isColorAttr?q.isColorAttr(this.attribute):void 0}else this.__tmpFrom&&(this.from=void 0),b(this);this[n?"attachTo":"detachFrom"](a,"__updateAnim","idle")}},setPaused:function(n){if(this.paused!==
n&&(this.paused=n,this.inited&&this.fireEvent("paused",n),this.running))this[n?"detachFrom":"attachTo"](a,"__updateAnim","idle")},setReverse:function(n){this.set("reverse",n,!0);this.inited&&!this.running&&b(this)},setRepeat:function(n){this.set("repeat",n,!0);this.inited&&!this.running&&b(this)},setDuration:function(n){this.set("duration",n,!0);this.inited&&!this.running&&b(this)},setEasingFunction:function(n){"string"===typeof n&&(n=f[n]);this.set("easingFunction",n??g,!0)},setFrom:function(n){this.set("from",
n,!0)},setTo:function(n){this.set("to",n,!0)},setCallback:function(n){this.callback=n},next:function(n,q){const r=this,z=r.callback;z&&!q?r.setCallback(E=>{z.call(r,E);n.call(r,E)}):r.setCallback(n)},reset:function(n){b(this);this.setRunning(!1);this.setPaused(!1);n&&this.callback?.call(this,!1)},clean:function(){this.to=this.from=this.attribute=this.callback=void 0;this.duration=1E3;this.relative=this.reverse=!1;this.repeat=1;this.easingFunction=g;this.reset(!1)},__updateAnim:function(n){p(this,
n.value.delta)}})})(myt);
(t=>{const x=Array.isArray,w=d=>{d.__additionalArgs=[];d.__pendingTransition="";d.__transDestinationState="";d.__transStage="leaveState"},u=(d,c)=>{if(d.__transInProgress){var h=d.__deferredTransitions;h??=d.__deferredTransitions=[];h.unshift(c)}else{d.__transInProgress=!0;h=c.shift();const m=c.shift();if(d.__pendingTransition)return 3;if(d.isFinished())return d.__transInProgress=!1,5;let a=d.map[d.current][m];a??=d.map["*"][m];if(a)return d.__pendingTransition=m,d.__transDestinationState=a,d.__additionalArgs=
c,d.resumeTransition(h);d.__transInProgress=!1;return 5}},l=d=>{d.__transInProgress=!1;const c=d.__deferredTransitions;if(c)for(;0<c.length;)u(d,c.pop())};t.StateMachine=new JS.Class("StateMachine",t.Node,{extend:{SUCCEEDED:1,CANCELLED:2,PENDING:3,INVALID:4,NO_TRANSITION:5},initNode:function(d,c){this.map={};this.map["*"]={};this.current=this.initial=this.terminal="";w(this);this.callSuper(d,c)},setInitialState:function(d){if(""===this.current){if(x(d)){var c=d;d=c.shift()}else c=[];this.current=
this.initial=d;this.doEnterState("","",d,c);c={name:"",from:"",to:d,args:c};this.fireEvent("enter"+d,c);this.fireEvent("enter",c);this.isFinished()&&this.fireEvent("finished",c)}},setTerminalState:function(d){this.terminal=d},addTransitions:function(d){for(const c of d)this.addTransition(...c)},addTransition:function(d,c,h){c=c?x(c)?c:[c]:["*"];const m=this.map;let a=c.length;for(;a;){let e,f;((e=m)[f=c[--a]]??(e[f]={}))[d]=h}},doTransition:function(...d){d.unshift("sync");return u(this,d)},doAsyncTransition:function(...d){d.unshift("async");
return u(this,d)},resumeTransition:function(d){const c=this.__pendingTransition;if(!c)return 4;const h=this.current,m=this.__transDestinationState,a=this.__additionalArgs,e={name:c,from:h,to:m,args:a},f=this.fireEvent.bind(this);switch(this.__transStage){case "leaveState":const g=this.doLeaveState(c,h,m,a);if(!1===g)return w(this),l(this),2;if("async"===g||"async"===d)return this.__transStage="enterState",f("start"+c,e),f("start",e),f("leave"+h,e),f("leave",e),l(this),3;f("start"+c,e);f("start",e);
f("leave"+h,e);f("leave",e);case "enterState":this.current=m,w(this),this.doEnterState(c,h,m,a),f("enter"+m,e),f("enter",e),f("end"+c,e),f("end",e),this.isFinished()&&f("finished",e)}l(this);return 1},doLeaveState:(d,c,h,m)=>{},doEnterState:(d,c,h,m)=>{},isFinished:function(){return this.is(this.terminal)},isStarting:function(){return this.is(this.initial)},is:function(d){return x(d)?d.includes(this.current):this.current===d},can:function(d){return void 0!==this.map[this.current][d]?!0:void 0!==this.map["*"][d]}})})(myt);
(t=>{const x=(d,c)=>d.replicationIndex-c.replicationIndex,w=(d,c)=>{let h=d.length;for(;h;){const m=d[--h];m.decrementLockedCounter();c&&m.update()}},u=d=>{l(d);const c=d.template;c&&(d.__pool=new t.TrackActivesPool(c,d.parent))},l=d=>{const c=d.__pool;if(c){d=d.parent.getLayouts();let h=d.length;for(;h;)d[--h].incrementLockedCounter();c.putActives();c.destroyPooledInstances();w(d,!1);c.destroy()}};t.Replicable=new JS.Module("Replicable",{include:[t.Reusable],replicate:function(d,c){this.replicationData=
d;this.replicationIndex=c},notify:(d,c)=>{},clean:function(){this.replicationData=null;this.replicationIndex=-1},alreadyHasReplicationData:function(d,c){return c===this.replicationIndex&&d===this.replicationData}});t.Replicator=new JS.Class("Replicator",t.Node,{initNode:function(d,c){this.callSuper(d,c);u(this);this.doReplication()},destroy:function(){l(this);this.callSuper()},setTemplate:function(d){(this.template=d.includes(t.Replicable)?d:null)||t.dumpStack("Template not replicable");this.inited&&
(u(this),this.doReplication())},setData:function(d){this.data=d;this.inited&&this.doReplication()},getActiveReplicants:function(){return this.__pool.getActives()},doReplication:function(){const d=this.__pool;let c;if(d){c=this.parent.getLayouts();for(var h=c.length;h;)c[--h].incrementLockedCounter();const m=(h=this.data)?h.length:0,a=d.getActives(),e=a.length,f=[];let g=e,b,p;for(a.sort(x);g;)if(b=a[--g],p=b.replicationIndex,p>=m||!b.alreadyHasReplicationData(h[p],p))f[p]=b;for(g=f.length;g;)(b=f[--g])&&
d.putInstance(b);for(g=0;m>g;++g)(g>=e||null!=f[g])&&d.getInstance().replicate(h[g],g);for(g=c.length;g;)c[--g].sortSubviews(x);w(c,!0)}},notify:function(d,c){var h=this.__pool;if(h){h=h.getActives();let m=h.length;for(;m;)h[--m].notify(d,c)}}})})(myt);
(t=>{const x=JS.Singleton,w=document,{DomElementProxy:u,DomObservable:l,global:{register:d}}=t;new x("GlobalMouse",{include:[u,l,t.MouseObservable],initialize:function(){this.setDomElement(w);d("mouse",this)}});new x("GlobalTouch",{include:[u,l,t.TouchObservable],initialize:function(){this.setDomElement(w);d("touch",this)}})})(myt);
(t=>{let x,w,u;const l=[],d=[],c=a=>{const e=u;e!==a&&(e&&(e.notifyDragLeave(w),w.destroyed||w.notifyDragLeaving(e),x("dragLeave",e)),u=a)&&(a.notifyDragEnter(w),w.destroyed||w.notifyDragEntering(a),x("dragEnter",e))},h=a=>{let e=w;if(e!==a)if(w=a){e=a;for(const f of m(e,d))f.notifyDragStart(e);for(const f of m(e,l))f.notifyAutoScrollerDragStart(e);x("startDrag",a)}else{for(const f of m(e,d))f.notifyDragStop(e);for(const f of m(e,l))f.notifyAutoScrollerDragStop(e);x("stopDrag",a)}},m=(a,e)=>{if(a.destroyed)return[];
if(a.isAnyDragGroup())return e;const f=[];a=a.getDragGroups();let g=e.length;for(;g;){const b=e[--g];if(b.isAnyDropGroup())f.push(b);else{const p=b.getDropGroups();for(const n in a)if(p[n]){f.push(b);break}}}return f};new JS.Singleton("GlobalDragManager",{include:[t.Observable],initialize:function(){t.global.register("dragManager",this);x=this.fireEvent.bind(this)},getDragView:()=>w,registerAutoScroller:a=>{l.push(a)},unregisterAutoScroller:a=>{a=l.indexOf(a);-1<a&&l.splice(a,1)},registerDropTarget:a=>
{d.push(a)},unregisterDropTarget:a=>{a=d.indexOf(a);-1<a&&d.splice(a,1)},startDrag:a=>{h(a)},stopDrag:(a,e,f)=>{e.notifyDropped(u,f);f||u?.notifyDrop(e);c();h();u&&!f&&x("drop",[e,u])},updateDrag:(a,e)=>{const f=m(e,d);let g=f.length,b;if(0<g){const {pageX:p,pageY:n}=a.value;for(;g;)a=f[--g],a.willAcceptDrop(e)&&e.willPermitDrop(a)&&a.isPointVisible(p,n)&&(!b||a.isInFrontOf(b))&&(b=a)}c(b)}})})(myt);
(t=>{const x=JS.Module,{mouse:w,keys:u,idle:l}=t.global;t.Activateable=new x("Activateable",{doActivated:()=>{}});t.UpdateableUI=new x("UpdateableUI",{initNode:function(d,c){this.callSuper(d,c);this.updateUI()},updateUI:()=>{}});t.Disableable=new x("Disableable",{initNode:function(d,c){c.disabled??(c.disabled=!1);this.callSuper(d,c)},setDisabled:function(d){d=this.valueFromEvent(d);this.disabled!==d&&(this.disabled=d,this.inited&&this.fireEvent("disabled",d),this.doDisabled())},doDisabled:function(){this.inited&&
(this.disabled&&this.giveAwayFocus?.(),this.updateUI?.())}});t.KeyActivation=new x("KeyActivation",{extend:{ACTIVATION_KEYS:[u.CODE_ENTER,u.CODE_SPACE],NO_KEY_DOWN:""},initNode:function(d,c){this.activateKeyDown="";c.activationKeys??(c.activationKeys=t.KeyActivation.ACTIVATION_KEYS);this.callSuper(d,c);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyPress","keypress");this.attachToDom(this,"__hndlKeyUp","keyup");this.attachToDom(this,"__doDomBlur","blur")},setActivationKeys:function(d){this.activationKeys=
d??[]},setRepeatKeyDown:function(d){this.repeatKeyDown=d},__hndlKeyDown:function(d){if(!this.disabled&&(""===this.activateKeyDown||this.repeatKeyDown)){const c=t.KeyObservable.getCodeFromEvent(d);this.activationKeys.includes(c)&&(this.activateKeyDown===c?this.doActivationKeyDown(c,!0):(this.activateKeyDown=c,this.doActivationKeyDown(c,!1)),d.value.preventDefault())}},__hndlKeyPress:function(d){if(!this.disabled){const c=t.KeyObservable.getCodeFromEvent(d);this.activateKeyDown===c&&this.activationKeys.includes(c)&&
d.value.preventDefault()}},__hndlKeyUp:function(d){if(!this.disabled){const c=t.KeyObservable.getCodeFromEvent(d);this.activateKeyDown===c&&this.activationKeys.includes(c)&&(this.activateKeyDown="",this.doActivationKeyUp(c),d.value.preventDefault())}},__doDomBlur:function(d){this.disabled||(d=this.activateKeyDown,""!==d&&(this.activateKeyDown="",this.doActivationKeyAborted(d)))},doActivationKeyDown:(d,c)=>{},doActivationKeyUp:function(d){this.doActivated()},doActivationKeyAborted:d=>{}});t.ArrowKeyActivation=
new x("KeyActivation",{doActivationKeyDown:function(d,c){switch(d){case u.CODE_ARROW_LEFT:if(this.doKeyArrowLeftOrUp(!0,c))return;break;case u.CODE_ARROW_UP:if(this.doKeyArrowLeftOrUp(!1,c))return;break;case u.CODE_ARROW_RIGHT:if(this.doKeyArrowRightOrDown(!0,c))return;break;case u.CODE_ARROW_DOWN:if(this.doKeyArrowRightOrDown(!1,c))return}this.callSuper(d,c)},doKeyArrowLeftOrUp:(d,c)=>{},doKeyArrowRightOrDown:(d,c)=>{}});t.MouseOver=new x("MouseOver",{initNode:function(d,c){c.mouseOver??(c.mouseOver=
!1);this.callSuper(d,c);this.attachToDom(this,"doMouseOver","mouseover");this.attachToDom(this,"doMouseOut","mouseout")},setMouseOver:function(d){this.mouseOver!==d&&(this.mouseOver=d,this.inited&&!this.__attachedToOverIdle&&(this.__attachedToOverIdle=!0,this.attachTo(l,"__doMouseOverOnIdle","idle")))},setDisabled:function(d){this.callSuper(d);this.disabled?this.mouseOver&&(this.__disabledOver=!0,this.setMouseOver(!1)):this.__disabledOver&&this.setMouseOver(!0)},__doMouseOverOnIdle:function(){this.detachFrom(l,
"__doMouseOverOnIdle","idle");this.__attachedToOverIdle=!1;const d=this.mouseOver;this.__lastOverIdleValue!==d&&(this.__lastOverIdleValue=d,this.doSmoothMouseOver(d))},doSmoothMouseOver:function(d){this.inited&&this.updateUI?.()},doMouseOver:function(d){this.__disabledOver=!0;this.disabled||this.setMouseOver(!0)},doMouseOut:function(d){this.__disabledOver=!1;this.disabled||this.setMouseOver(!1)}});t.MouseDown=new x("MouseDown",{initNode:function(d,c){c.mouseDown??(c.mouseDown=!1);this.callSuper(d,
c);this.attachToDom(this,"doMouseDown","mousedown");this.attachToDom(this,"doMouseUp","mouseup")},setMouseDown:function(d){this.mouseDown!==d&&(this.mouseDown=d,this.inited&&(d&&this.isFocusable()&&this.focus(!0),this.updateUI?.()))},setDisabled:function(d){d&&this.mouseDown&&this.setMouseDown(!1);this.callSuper(d)},doMouseOver:function(d){this.callSuper(d);this.mouseDown&&this.detachFromDom(w,"doMouseUp","mouseup",!0)},doMouseOut:function(d){this.callSuper(d);!this.disabled&&this.mouseDown&&this.attachToDom(w,
"doMouseUp","mouseup",!0)},doMouseDown:function(d){this.disabled?this.doMouseDownWhenDisabled():this.setMouseDown(!0)},doMouseDownWhenDisabled:()=>{},doMouseUp:function(d){this.mouseOver||this.detachFromDom(w,"doMouseUp","mouseup",!0);!this.disabled&&this.mouseDown&&(this.setMouseDown(!1),this.mouseOver&&this.doMouseUpInside(d))},doMouseUpInside:function(d){this.doActivated?.()}});t.MouseOverAndDown=new x("MouseOverAndDown",{include:[t.MouseOver,t.MouseDown]});t.MouseEventsBubbleUp=new x("MouseEventsBubbleUp",
{doMouseOver:function(d){this.callSuper(d);return!0},doMouseOut:function(d){this.callSuper(d);return!0},doMouseDown:function(d){this.callSuper(d);return!0},doMouseUp:function(d){this.callSuper(d);return!0}});t.Draggable=new x("Draggable",{initNode:function(d,c){this.isDraggable=this.isDragging=!1;this.draggableAllowBubble=!0;this.distanceBeforeDrag=this.dragOffsetX=this.dragOffsetY=0;let h=!0;null!=c.isDraggable&&(h=c.isDraggable,delete c.isDraggable);this.callSuper(d,c);this.setIsDraggable(h)},setIsDraggable:function(d){if(this.isDraggable!==
d){this.isDraggable=d;let c;d?c=this.attachToDom:this.inited&&(c=this.detachFromDom);if(c){d=this.getDragViews();let h=d.length;for(;h;){const m=d[--h];c.call(this,m,"__doMouseDown","mousedown");c.call(this,m,"__doContextMenu","contextmenu")}}}},setIsDragging:function(d){this.set("isDragging",d,!0)},setDragOffsetX:function(d,c){this.dragOffsetX!==d&&(this.dragOffsetX=d,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDragOffsetY:function(d,c){this.dragOffsetY!==d&&(this.dragOffsetY=
d,this.inited&&this.isDragging&&!c&&this.reRequestDragPosition())},setDistanceBeforeDrag:function(d){this.distanceBeforeDrag=d},setDraggableAllowBubble:function(d){this.draggableAllowBubble=d},setCenterOnMouse:function(d){this.centerOnMouse=d},setAllowAbort:function(d){this.allowAbort=d},getDragViews:function(){return[this]},__doContextMenu:d=>{},__doMouseDown:function(d){const c=t.MouseObservable.getMouseFromEvent(d),h=this.getODE();this.dragInitX=c.x-h.offsetLeft;this.dragInitY=c.y-h.offsetTop;
this.attachToDom(w,"__doMouseUp","mouseup",!0);0<this.distanceBeforeDrag?this.attachToDom(w,"__doDragCheck","mousemove",!0):this.startDrag(d);d.value.preventDefault();return this.draggableAllowBubble},__doMouseUp:function(d){this.isDragging?this.stopDrag(d,!1):(this.detachFromDom(w,"__doMouseUp","mouseup",!0),this.detachFromDom(w,"__doDragCheck","mousemove",!0));return this.draggableAllowBubble},__watchForAbort:function(d){d.value===u.CODE_ESC&&this.stopDrag(d,!0)},__doDragCheck:function(d){const c=
t.MouseObservable.getMouseFromEvent(d);t.Geometry.measureDistance(c.x,c.y,this.dragInitX+this.x,this.dragInitY+this.y)>=this.distanceBeforeDrag&&(this.detachFromDom(w,"__doDragCheck","mousemove",!0),this.startDrag(d))},startDrag:function(d){this.centerOnMouse&&(this.syncTo(this,"__updateDragInitX","width"),this.syncTo(this,"__updateDragInitY","height"));this.allowAbort&&this.attachTo(u,"__watchForAbort","keyup");this.setIsDragging(!0);this.attachToDom(w,"updateDrag","mousemove",!0);this.updateDrag(d)},
updateDrag:function(d){this.__lastMousePosition=t.MouseObservable.getMouseFromEvent(d);this.reRequestDragPosition()},__updateDragInitX:function(d){this.dragInitX=this.width/2*(this.scaleX||1)},__updateDragInitY:function(d){this.dragInitY=this.height/2*(this.scaleY||1)},stopDrag:function(d,c){this.detachFromDom(w,"__doMouseUp","mouseup",!0);this.detachFromDom(w,"updateDrag","mousemove",!0);this.centerOnMouse&&(this.detachFrom(this,"__updateDragInitX","width"),this.detachFrom(this,"__updateDragInitY",
"height"));this.allowAbort&&this.detachFrom(u,"__watchForAbort","keyup");this.setIsDragging(!1)},requestDragPosition:function(d,c){this.disabled||(this.setX(d),this.setY(c))},reRequestDragPosition:function(){const d=this.__lastMousePosition;this.requestDragPosition(d.x-this.dragInitX+this.dragOffsetX,d.y-this.dragInitY+this.dragOffsetY)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,{View:u,KeyActivation:l}=t;var d=t.Button=new w("Button",{include:[t.Activateable,t.UpdateableUI,t.Disableable,t.MouseOverAndDown,l],extend:{FOCUS_SHADOW:[0,0,7,"#666"],DISABLED_OPACITY:.5},initNode:function(h,m){m.focusable??(m.focusable=!0);m.cursor??(m.cursor="pointer");this.callSuper(h,m)},setFocused:function(h){const m=this.focused;this.callSuper(h);this.inited&&this.focused!==m&&this.updateUI()},doActivationKeyDown:function(h,m){m||this.updateUI()},doActivationKeyUp:function(h){this.callSuper(h);
this.updateUI()},doActivationKeyAborted:function(h){this.callSuper(h);this.updateUI()},updateUI:function(){if(this.disabled)this.__restoreCursor??(this.__restoreCursor=this.cursor),this.setCursor("not-allowed"),this.drawDisabledState();else{const h=this.__restoreCursor;h&&(this.setCursor(h),this.__restoreCursor=null);this.activateKeyDown!==l.NO_KEY_DOWN||this.mouseDown?this.drawActiveState():this.focused?this.drawFocusedState():this.mouseOver?this.drawHoverState():this.drawReadyState()}},drawFocusedState:function(){this.drawHoverState()},
drawHoverState:()=>{},drawActiveState:()=>{},drawReadyState:()=>{},drawDisabledState:()=>{},showFocusIndicator:function(){this.hideDefaultFocusIndicator()},hideFocusIndicator:function(){this.hideDefaultFocusIndicator()}});d=t.SimpleButtonStyle=new w("SimpleButtonStyle",{include:[d],setActiveColor:function(h){this.activeColor!==h&&(this.activeColor=h,this.inited&&this.updateUI())},setHoverColor:function(h){this.hoverColor!==h&&(this.hoverColor=h,this.inited&&this.updateUI())},setReadyColor:function(h){this.readyColor!==
h&&(this.readyColor=h,this.inited&&this.updateUI())},drawDisabledState:function(){this.draw(this.readyColor,.5)},drawHoverState:function(){this.draw(this.hoverColor)},drawActiveState:function(){this.draw(this.activeColor)},drawReadyState:function(){this.draw(this.readyColor)},draw:function(h,m=1){this.setOpacity(m);this.setBgColor(h)}});const c=t.SimpleButton=new x("SimpleButton",u,{include:[d],initNode:function(h,m){this.activeColor=this.hoverColor=this.readyColor="transparent";this.callSuper(h,
m)}});t.SimpleTextButton=new x("SimpleTextButton",c,{initNode:function(h,m){this.inset=this.outset=0;m.shrinkToFit??(m.shrinkToFit=!1);m.height??(m.height=24);m.textY??(m.textY="middle");this.callSuper(h,m);h=this.textY;m={whiteSpace:this.shrinkToFit?"nowrap":"normal",text:this.text,domClass:"myt-Text mytButtonText"};"string"===typeof h?m.valign=h:m.y=h;h=this.textView=new t.Text(this,m);this.constrain("__updateContent",[this,"inset",this,"outset",this,"width",this,"shrinkToFit",h,"visible",h,"width",
h,"height",h,"y"])},setInset:function(h){this.set("inset",this.valueFromEvent(h),!0)},setOutset:function(h){this.set("outset",this.valueFromEvent(h),!0)},setText:function(h){this.text!==h&&(this.text=h,this.inited&&(this.textView.setText(h),this.fireEvent("text",h)))},setShrinkToFit:function(h){this.shrinkToFit!==h&&(this.shrinkToFit=h,this.inited&&(this.textView.setWhiteSpace(h?"nowrap":"normal"),this.fireEvent("shrinkToFit",h)))},setTextY:function(h){if(this.textY!==h&&(this.textY=h,this.inited)){const m=
this.textView;this.fireEvent("textY",h);"string"===typeof h?m.setValign(h):(m.setValign(""),m.setY(h))}},__updateContent:function(h){if(!this.__updateContentLoopBlock&&!this.destroyed){const {inset:m,outset:a,textView:e}=this;this.__updateContentLoopBlock=!0;e.setX(m);this.shrinkToFit?this.setWidth(m+(e.visible&&this.text?e.width:0)+a):e.setWidth(this.width-m-a);this.__updateContentLoopBlock=!1}}});t.TextButton=new x("TextButton",t.PaddedText,{include:[d],initNode:function(h,m){m.focusIndicator??
(m.focusIndicator=!1);m.roundedCorners??(m.roundedCorners=3);m.textAlign??(m.textAlign="center");m.paddingTop??(m.paddingTop=1);m.height??(m.height=23-(m.paddingTop??0));m.activeColor??(m.activeColor="#ddd");m.hoverColor??(m.hoverColor="#eee");m.readyColor??(m.readyColor="#fff");this.callSuper(h,m)}})})(myt);
(t=>{const x=console.warn,{focus:w,mouse:u,windowResize:l}=t.global,d={};t.FloatingPanelAnchor=new JS.Module("FloatingPanelAnchor",{extend:{getFloatingPanel:c=>d[c]},initNode:function(c,h){this.floatingAlign="insideLeft";this.floatingValign="outsideBottom";this.keepInWindow=!1;this.floatingAlignOffset=this.floatingValignOffset=this.keepInWindowBorder=0;this.callSuper(c,h)},setLastFloatingPanelShown:function(c){this.lastFloatingPanelShown=c},setLastFloatingPanelId:function(c){this.floatingPanelId=
c},setFloatingAlign:function(c){this.set("floatingAlign",c,!0)},setFloatingValign:function(c){this.set("floatingValign",c,!0)},setFloatingAlignOffset:function(c){this.set("floatingAlignOffset",c,!0)},setFloatingValignOffset:function(c){this.set("floatingValignOffset",c,!0)},setKeepInWindow:function(c){this.set("keepInWindow",c,!0)},setKeepInWindowBorder:function(c){this.set("keepInWindowBorder",c,!0)},createFloatingPanel:function(c,h,m){c=c??this.floatingPanelId;m=m??{};m.panelId=c;return d[c]=new h(null,
m)},getFloatingPanel:function(c){return d[c??this.floatingPanelId]},toggleFloatingPanel:function(c){this.getFloatingPanel(c??=this.floatingPanelId)?.isShown()?this.hideFloatingPanel(c):this.showFloatingPanel(c)},showFloatingPanel:function(c){if(c=this.getFloatingPanel(c??this.floatingPanelId))c.show(this),this.setLastFloatingPanelShown(c)},hideFloatingPanel:function(c){if(c=this.getFloatingPanel(c??this.floatingPanelId))c.hide(),this.setLastFloatingPanelShown()},notifyPanelShown:function(c){this.callSuper?.()},
notifyPanelHidden:function(c){this.callSuper?.()},getFloatingAlignForPanel:function(c){return this.floatingAlign},getFloatingValignForPanel:function(c){return this.floatingValign},getFloatingAlignOffsetForPanel:function(c){return this.floatingAlignOffset},getFloatingValignOffsetForPanel:function(c){return this.floatingValignOffset},getNextFocus:function(){const c=this.lastFloatingPanelShown;return c?.isShown()?c:this.callSuper?.()},getNextFocusAfterPanel:function(c){return this},getPrevFocusAfterPanel:function(c){return this}});
t.FloatingPanel=new JS.Class("FloatingPanel",t.View,{include:[t.RootView],initNode:function(c,h){this.ignoreOwnerForHideOnMouseDown=this.ignoreOwnerForHideOnBlur=this.hideOnBlur=this.hideOnMouseDown=!0;h.visible=h.focusIndicator=!1;h.focusable=h.focusCage=!0;this.callSuper(c,h)},setOwner:function(c){this.owner=c},setPanelId:function(c){this.panelId=c},setIgnoreOwnerForHideOnMouseDown:function(c){this.ignoreOwnerForHideOnMouseDown=c},setHideOnBlur:function(c){this.hideOnBlur=c},setHideOnMouseDown:function(c){this.hideOnMouseDown=
c},setWidth:function(c){const h=this.width;this.callSuper(c);this.isShown()&&h!==this.width&&this.owner?.keepInWindow&&this.updateLocationX(this.owner)},setHeight:function(c){const h=this.height;this.callSuper(c);this.isShown()&&h!==this.height&&this.owner?.keepInWindow&&this.updateLocationY(this.owner)},__doMouseDown:function(c){var h=c.value;c=h.pageX;h=h.pageY;this.containsPoint(c,h)||this.ignoreOwnerForHideOnMouseDown&&this.owner.containsPoint(c,h)||this.doMouseDownOutside(!0);return!0},doMouseDownOutside:function(c){this.hideOnMouseDown&&
this.hide(c)},focus:function(c){if(this.owner&&this.isAncestorOf(w.focusedView))this.owner[(w.lastTraversalWasForward?"getNext":"getPrev")+"FocusAfterPanel"](this.panelId).focus(c);else{const h=this.getFirstFocusableDescendant();h===this?this.callSuper(c):h.focus(c)}},getFirstFocusableDescendant:function(){return this},__doFocusChange:function(c){(c=c.value)&&!this.isAncestorOf(c)&&this.doLostFocus()},doLostFocus:function(){!this.hideOnBlur||this.ignoreOwnerForHideOnBlur&&w.focusedView===this.owner||
this.hide(!0)},isShown:function(){return this.visible},show:function(c){this.isShown()||(this.bringToFront(),this.updateLocation(c),this.setVisible(!0),this.owner.notifyPanelShown(this),this.attachToDom(u,"__doMouseDown","mousedown",!0),this.attachTo(w,"__doFocusChange","focused"))},hide:function(c){this.isShown()&&(this.detachFromDom(u,"__doMouseDown","mousedown",!0),this.detachFrom(w,"__doFocusChange","focused"),this.setVisible(!1),this.owner.notifyPanelHidden(this),c||this.restoreFocus(),this.setOwner())},
restoreFocus:function(){this.owner?.focus()},updateLocation:function(c){this.setOwner(c);this.updateLocationX(c);this.updateLocationY(c)},updateLocationX:function(c){const h=c.getFloatingAlignForPanel(this),m=typeof h;let a;if("string"===m){a=c.getPagePosition().x+c.getFloatingAlignOffsetForPanel(this);switch(h){case "outsideRight":a+=c.width;break;case "insideRight":a+=c.width-this.width;break;case "outsideLeft":a-=this.width;break;case "insideLeft":break;default:x("Invalid align value",m,h)}c.keepInWindow&&
(c=a+this.width+(c.keepInWindowBorder||0)-l.getWidth(),0<c&&(a-=c))}else"number"===m?a=h:x("Invalid align type",m,h);this.setX(a)},updateLocationY:function(c){const h=c.getFloatingValignForPanel(this),m=typeof h;let a;if("string"===m){a=c.getPagePosition().y+c.getFloatingValignOffsetForPanel(this);switch(h){case "outsideBottom":a+=c.height;break;case "insideBottom":a+=c.height-this.height;break;case "outsideTop":a-=this.height;break;case "insideTop":break;default:x("Invalid valign value",m,h)}c.keepInWindow&&
(c=a+this.height+(c.keepInWindowBorder||0)-l.getHeight(),0<c&&(a-=c))}else"number"===m?a=h:x("Invalid valign type",m,h);this.setY(a)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,u=Math,{View:l,global:d}=t,c=d.focus,h=d.keys,{LIST_KEYS:m,CODE_ESC:a}=h,e=g=>{const b=g.itemConfig??[],p=b.length,{items:n,defaultItemClass:q,fixedWidth:r}=g,z=n.length,E=0<r,G=g.getContentView(),L=G.getLayouts();let J=0;for(var N of L)N.incrementLockedCounter();l.doWhileRemovedFromDom(G,()=>{const y={listView:g};E&&(y.width=r,y.enableEllipsis=!0);for(;p>J;++J){var k=b[J];const v=k.klass??q;k=k.attrs??{};let A=n[J];A&&!A.isA(v)&&(A.destroy(),A=null);A??=n[J]=new v(G,
{...y});A&&(A.callSetters(k),A.__LAYOUT_IDX=J)}});if(E)N=r;else for(N=g.minWidth,J=0;p>J;){const y=n[J++];y.syncToDom();N=u.max(N,y.getMinimumWidth())}for(;z>J;)n[J++].destroy();n.length=p;if(!E)for(J=0;p>J;)g.updateItemWidth(n[J++],N);g.updateContentWidth(G,N);for(const y of L)y.sortSubviews((k,v)=>k.__LAYOUT_IDX-v.__LAYOUT_IDX),y.decrementLockedCounter(),y.update()},f=t.ListViewItemMixin=new w("ListViewItemMixin",{setListView:function(g){this.listView=g},getMinimumWidth:()=>0,syncToDom:()=>{}});
t.ListView=new x("ListView",t.FloatingPanel,{initNode:function(g,b){this.items=[];this.maxHeight=-1;this.minWidth=0;b.defaultItemClass??(b.defaultItemClass=t.ListViewItem);b.overflow??(b.overflow="autoy");b.bgColor??(b.bgColor="#ccc");b.boxShadow??(b.boxShadow=t.Button.FOCUS_SHADOW);this.callSuper(g,b);e(this);this.buildLayout(this.getContentView())},buildLayout:g=>{new t.SpacedLayout(g,{axis:"y",spacing:1,collapseParent:!0})},setMinWidth:function(g){this.minWidth=g},setDefaultItemClass:function(g){this.defaultItemClass=
g},setItemConfig:function(g){this.itemConfig=g;this.inited&&e(this)},getContentView:function(){return this},setMaxHeight:function(g){this.maxHeight!==g&&(this.maxHeight=g,this.inited&&(this.fireEvent("maxHeight",g),this.setHeight(this.height)))},setHeight:function(g){this.callSuper(0<=this.maxHeight?u.min(this.maxHeight,g):g);this.inited&&this.owner&&this.updateLocationY(this.owner)},doItemActivated:function(g){this?.owner.doItemActivated(g)},getFirstFocusableDescendant:function(){return this.getFirstFocusableItem()??
this.callSuper()},getFirstFocusableItem:function(){return this.items.find(g=>g.isFocusable())},getLastFocusableItem:function(){return this.items.findLast(g=>g.isFocusable())},focusToLastItem:function(){this.getLastFocusableItem()?.focus()},focusToFirstItem:function(){this.getFirstFocusableItem()?.focus()},updateItemWidth:(g,b)=>{g.setWidth(b)},updateContentWidth:(g,b)=>{g.setWidth(b)}});t.ListViewAnchor=new w("ListViewAnchor",{include:[t.FloatingPanelAnchor,t.ArrowKeyActivation],initNode:function(g,
b){b.listViewClass??(b.listViewClass=t.ListView);b.listViewAttrs??(b.listViewAttrs={});b.itemConfig??(b.itemConfig=[]);b.activationKeys??(b.activationKeys=m);this.callSuper(g,b)},setListViewClass:function(g){this.listViewClass=g},setListViewAttrs:function(g){this.listViewAttrs=g},setItemConfig:function(g){this.itemConfig=g},getFloatingValignForPanel:function(g){var b=g.height,p=this.getPagePosition().y,n=d.windowResize.getHeight()-this.getPagePosition().y-this.height;g=p-b;b=n-b;p=p>n;n=this.floatingValign;
switch(n){case "outsideBottom":0>b&&p&&(n="outsideTop");break;case "insideBottom":0>b&&p&&(n="insideTop");break;case "outsideTop":0>g&&!p&&(n="outsideBottom");break;case "insideTop":0>g&&!p&&(n="insideBottom")}return n},doItemActivated:function(g){this.hideFloatingPanel()},getFloatingPanel:function(g){return this.callSuper(g)??this.createFloatingPanel(g,this.listViewClass,this.listViewAttrs)},showFloatingPanel:function(g){const b=this.getFloatingPanel(g);b&&(b.setItemConfig(this.itemConfig),this.callSuper(g))},
doActivationKeyDown:function(g,b){g===a?this.hideFloatingPanel():this.callSuper(g,b)},doKeyArrowLeftOrUp:function(g,b){this.focusToLastItem()},doKeyArrowRightOrDown:function(g,b){this.focusToFirstItem()},doActivationKeyUp:function(g){if(g!==a)switch(this.callSuper(g),g){case h.CODE_ARROW_LEFT:case h.CODE_ARROW_UP:this.focusToLastItem();break;case h.CODE_ARROW_RIGHT:case h.CODE_ARROW_DOWN:this.focusToFirstItem()}},focusToLastItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToLastItem()},
focusToFirstItem:function(){const g=this.getFloatingPanel();g?.isShown()&&g.focusToFirstItem()},updateEntryAttr:function(g,b,p){(g=this.getEntryByValue(g))&&(g.attrs[b]=p);return g},getEntryByValue:function(g){return this.itemConfig.find(b=>b?.attrs&&b.attrs.value===g)}});t.ListViewItem=new x("ListViewItem",t.TextButton,{include:[f,t.ArrowKeyActivation],initNode:function(g,b){b.activeColor??(b.activeColor="#bbb");b.hoverColor??(b.hoverColor="#fff");b.readyColor??(b.readyColor="#eee");b.paddingLeft??
(b.paddingLeft=8);b.paddingRight??(b.paddingRight=8);b.textAlign??(b.textAlign="left");b.roundedCorners??(b.roundedCorners=0);b.activationKeys??(b.activationKeys=m);b.focusIndicator??(b.focusIndicator=!0);const p=this.__enableEllipsis=b.enableEllipsis;delete b.enableEllipsis;this.callSuper(g,b);this.addDomClass("mytButtonText");p&&this.enableEllipsis()},setText:function(g){this.callSuper(g);this.__enableEllipsis&&this.setTooltip(this.text)},syncToDom:function(){this.getIDS().width="auto";this.sizeViewToDom()},
getMinimumWidth:function(){return u.ceil(this.measureNoWrapWidth())},doActivated:function(){this.listView.doItemActivated(this)},doActivationKeyDown:function(g,b){g===a?this.listView.owner.hideFloatingPanel():this.callSuper(g,b)},doKeyArrowLeftOrUp:function(g,b){c.prev()},doKeyArrowRightOrDown:function(g,b){c.next()}});t.ListViewSeparator=new x("ListViewSeparator",l,{include:[f],initNode:function(g,b){b.height??(b.height=1);b.bgColor??(b.bgColor="#666");this.callSuper(g,b)}})})(myt);
(t=>{const x=t.AccessorSupport,w=x.generateSetterName,u={},l=t.BAG=new JS.Class("BAG",{include:[x,t.Destructible,t.Observable],extend:{getGroup:(d,c)=>{if(d&&c){let h;return(h=u[d]??(u[d]={}))[c]??(h[c]=new l(d,c))}},removeGroup:(d,c)=>{if(d&&c&&(d=u[d])){const h=d[c];h&&delete d[c];return h}}},initialize:function(d,c){this.__nodes=[];this.trueNode=null;this.attrName=d;this.groupId=c},destroy:function(){this.trueNode&&this.setTrueNode(null);0===this.__nodes.length&&l.removeGroup(this.attrName,this.groupId);
this.__nodes.length=0;this.detachAllObservers();this.callSuper()},setGroupId:function(d){this.set("groupId",d,!0)},setAttrName:function(d){this.set("attrName",d,!0)},setTrueNode:function(d){this.set("trueNode",d,!0)},getNodes:function(){return this.__nodes},register:function(d){d&&!this.isRegistered(d)&&(this.__nodes.push(d),d[this.attrName]&&this.setTrue(d))},unregister:function(d){if(d){const c=this.__nodes,h=c.indexOf(d);-1<h&&c.splice(h,1);this.trueNode===d&&this.setTrueNode(null);0===c.length&&
this.destroy()}},setTrue:function(d){if(d&&this.trueNode!==d&&this.isRegistered(d)){const c=this.attrName,h=w(c),m=this.__nodes;let a=m.length;for(this.setTrueNode(d);a;){const e=m[--a];if(d===e){if(!e[c])e[h](!0)}else if(e[c])e[h](!1)}}},setFalse:function(d){d&&this.trueNode===d&&(d[w(this.attrName)](!1),this.setTrueNode(null))},isRegistered:function(d){return this.__nodes.includes(d)}});t.BAGMembership=new JS.Module("BAGMembership",{initNode:function(d,c){this.__bags=[];this.callSuper(d,c)},destroy:function(){const d=
this.__bags;let c=d.length;for(;c;){const h=d[--c];this.removeFromBAG(h.attrName,h.groupId)}this.callSuper()},isRegisteredWithBAG:function(d){return this.__bags.includes(d)},getBAG:(d,c)=>l.getGroup(d,c),addToBAG:function(d,c){c=this.getBAG(d,c);this.isRegisteredWithBAG(c)||(this.__bags.push(c),c.register(this),this.isAttachedTo(this,"__updateForBAG",d)||this.attachTo(this,"__updateForBAG",d))},removeFromBAG:function(d,c){c=this.getBAG(d,c);if(this.isRegisteredWithBAG(c)){const h=this.__bags;let m=
h.length,a=!0;for(;m;){const e=h[--m];e===c?(h.splice(m,1),c.unregister(this)):e.attrName===d&&(a=!1)}a&&this.detachFrom(this,"__updateForBAG",d)}},__updateForBAG:function(d){for(const c of this.__bags)if(c.attrName===d.type)c[d.value?"setTrue":"setFalse"](this)}})})(myt);
(t=>{const x=w=>{const u=w.label||"";w.setText('<i class="far fa-'+(!0===w.selected?"dot-":"")+'circle"></i>'+(0<u.length?" ":"")+u)};t.Radio=new JS.Class("Radio",t.Text,{include:[t.SimpleButtonStyle,t.BAGMembership],initNode:function(w,u){u.selected??(u.selected=!1);u.groupId??(u.groupId=t.generateGuid());u.focusIndicator??(u.focusIndicator=!1);u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor="inherit");u.readyColor??(u.readyColor="inherit");const l=u.value;delete u.value;this.callSuper(w,
u);this.setValue(l);this.selected&&this.getBAG("selected",this.groupId)?.setTrue(this);t.FontAwesome.registerForNotification(this);x(this)},setOptionValue:function(w){this.set("optionValue",w,!0)},setValue:function(w){if(this.inited){const u=this.getBAG("selected",this.groupId);if(u){const l=u.getNodes();let d=l.length;for(;d;){const c=l[--d];if(c.optionValue===w){u.setTrue(c);break}}}}},getValue:function(){var w=this.getBAG("selected",this.groupId);return(w=w?w.trueNode:null)?w.optionValue:null},
setSelected:function(w){this.selected!==w&&(this.selected=w,this.inited&&(this.fireEvent("selected",w),x(this)))},setGroupId:function(w){if(this.groupId!==w){const u=this.groupId;this.groupId=w;u&&this.removeFromBAG("selected",u);w&&this.addToBAG("selected",w);this.inited&&this.fireEvent("groupId",w)}},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},doActivated:function(){this.selected||this.setValue(this.optionValue)},draw:function(w,u=1){this.setOpacity(u);this.setTextColor(w)}})})(myt);
(t=>{const x=JS.Module,w=t.global.keys,u=t.Selectable=new x("Selectable",{setSelected:function(d){d=this.valueFromEvent(d);this.selected!==d&&(this.selected=d,this.inited&&this.fireEvent?.("selected",d))},isSelected:function(){return!!this.selected},canSelect:d=>!0,canDeselect:d=>!0}),l=t.SelectionManager=new x("SelectionManager",{extend:{isAddMode:()=>w.isShiftKeyDown(),isToggleMode:()=>w.isAcceleratorKeyDown()},initNode:function(d,c){this.__selected={};this.__lastSelectedItem=null;c.selectedCount=
0;c.itemSelectionId??(c.itemSelectionId="id");c.maxSelected??(c.maxSelected=-1);this.callSuper(d,c)},setItemSelectionId:function(d){this.itemSelectionId=d},setMaxSelected:function(d){this.maxSelected=d},setSelectedCount:function(d){this.selectedCount!==d&&(this.selectedCount=d,this.inited&&this.fireEvent("selectedCount",d))},isAddMode:()=>l.isAddMode(),isToggleMode:()=>l.isToggleMode(),getSelected:function(){return Object.values(this.__selected)},select:function(d){d&&!this.isSelectedItem(d)&&this.canSelectItem(d)&&
(d.setSelected(!0),this.__selected[d[this.itemSelectionId]]=d,this.setSelectedCount(this.selectedCount+1),this.__lastSelectedItem=d,this.doSelected(d),this.fireEvent("itemSelected",d))},doSelected:d=>{},selectById:function(d){this.select(this.getSelectableItem(d))},canSelectItem:function(d){const {maxSelected:c,selectedCount:h}=this;if(0===c)return!1;if(1===c){if(0<h&&(this.deselectAll(),0<this.selectedCount))return!1}else if(1<c&&h>=c)return!1;return d.canSelect(this)},selectAll:function(){const d=
this.getSelectableItems();let c=d.length;for(;c;)this.select(d[--c])},deselect:function(d){this.isSelectedItem(d)&&this.canDeselectItem(d)&&(d.setSelected(!1),delete this.__selected[d[this.itemSelectionId]],this.setSelectedCount(this.selectedCount-1),this.__lastSelectedItem===d&&(this.__lastSelectedItem=null),this.doDeselected(d),this.fireEvent("itemDeselected",d))},doDeselected:d=>{},deselectById:function(d){this.deselect(this.getSelectableItem(d))},canDeselectItem:function(d){return d.canDeselect(this)},
deselectAll:function(){const d=this.__selected;for(const c in d)this.deselect(d[c])},isSelectedItem:d=>d?d.isSelected():!1,areAllSelected:function(){return this.selectedCount===this.getSelectableItems().length},getManagedItems:function(){const d=[],c=this.getSubviews();let h=c.length;for(;h;){const m=c[--h];m.isA(u)&&d.push(m)}return d},getSelectableItems:function(){const d=this.getManagedItems();let c=d.length;for(;c;)d[--c].canSelect(this)||d.splice(c,1);return d},getSelectableItem:function(d){const c=
this.getSelectableItems(),h=this.itemSelectionId;let m=c.length;for(;m;){const a=c[--m];if(a[h]===d)return a}}})})(myt);
(t=>{const x=JS.Class,{View:w,SizeToParent:u}=t,l=t.TabSlider=new x("TabSlider",w,{include:[t.Selectable,t.Disableable,u],extend:{STATE_EXPANDED:"expanded",STATE_EXPANDING:"expanding",STATE_COLLAPSED:"collapsed",STATE_COLLAPSING:"collapsing"},initNode:function(c,h){const m=this;let a;h.defaultPlacement="wrapper.container";h.percentOfParentWidth=100;h.expansionState="collapsed";h.tabId??(h.tabId=t.generateGuid());h.tabContainer??(h.tabContainer=c);h.selected??(h.selected=!1);h.buttonClass??(h.buttonClass=
t.SimpleButton);h.zIndex??(h.zIndex=0);h.buttonHeight??(h.buttonHeight=30);h.fillColorSelected??(h.fillColorSelected="#666");h.fillColorHover??(h.fillColorHover="#eee");h.fillColorActive??(h.fillColorActive="#ccc");h.fillColorReady??(h.fillColorReady="#fff");h.minContainerHeight??(h.minContainerHeight=100);h.layoutPaddingY??(h.layoutPaddingY=0);h.selected&&(a=!0,delete h.selected);m.callSuper(c,h);m.button=new m.buttonClass(m,{ignorePlacement:!0,zIndex:1,height:m.buttonHeight,focusIndicator:!0,groupId:m.parent.parent.groupId,
percentOfParentWidth:100,hoverColor:m.fillColorHover,activeColor:m.fillColorActive,readyColor:m.fillColorReady},[u,{doActivated:()=>{const e=m.tabContainer;m.isSelected()&&1!==e.maxSelected?e.deselect(m):e.select(m)},updateUI:function(){this.callSuper();m.selected&&-1!==m.tabContainer.maxSelected&&this.setBgColor(m.fillColorSelected);m.notifyButtonRedraw()}}]);c=m.wrapper=new w(m,{ignorePlacement:!0,y:m.buttonHeight,visible:!1,maskFocus:!0,overflow:"hidden",percentOfParentWidth:100},[u,{setHeight:function(e){this.callSuper(Math.round(e))},
setWidth:function(e){this.callSuper(e);this.inited&&this.container.setWidth(e)}}]);m._wrapperLayout=new t.SizeToChildren(c.container=new w(c),{axis:"y",paddingY:m.layoutPaddingY});m.constrain("__updateHeight",[c,"y",c,"height"]);a&&m.tabContainer.select(m);!0===h.disabled&&m.setDisabled(!0);m.setHeight(m.getCollapsedHeight())},setSelected:function(c){this.callSuper(c);this.button?.updateUI()},setTabId:function(c){this.tabId=c},setTabContainer:function(c){this.tabContainer=c},setLayoutPaddingY:function(c){this.layoutPaddingY=
c;this.inited&&this._wrapperLayout.setPaddingY(c)},setMinContainerHeight:function(c){this.minContainerHeight=c},setButtonClass:function(c){this.buttonClass=c},setFillColorSelected:function(c){this.fillColorSelected=c},setFillColorHover:function(c){this.fillColorHover=c},setFillColorActive:function(c){this.fillColorActive=c},setFillColorReady:function(c){this.fillColorReady=c},setButtonHeight:function(c){this.buttonHeight!==c&&(this.buttonHeight=c,this.button&&(this.button.setHeight(c),this.wrapper.setY(c)))},
setExpansionState:function(c){if(this.expansionState!==c){this.expansionState=c;this.inited&&this.fireEvent("expansionState",c);const h=this.wrapper;h&&("expanded"===c?(h.setMaskFocus(!1),h.setOverflow("auto")):"expanding"===c?h.setVisible(!0):"collapsed"===c?h.setVisible(!1):"collapsing"===c&&(h.setMaskFocus(!0),h.setOverflow("hidden")))}},doDisabled:function(){this.button?.setDisabled(this.disabled)},notifyButtonRedraw:()=>{},__updateHeight:function(c){this.setHeight(this.wrapper.y+this.wrapper.height)},
expand:function(c){const h=this,m=h.wrapper;c-=h.getCollapsedHeight();h.setExpansionState("expanding");m.stopActiveAnimators();if(m.height!==c){const a=h.tabContainer.duration;1===a?(m.setHeight(c),h.setExpansionState("expanded")):m.animate({attribute:"height",to:c,duration:a}).next(e=>{h.setExpansionState("expanded")})}else h.setExpansionState("expanded")},collapse:function(){const c=this,h=c.wrapper;c.setExpansionState("collapsing");h.stopActiveAnimators();if(0!==h.height){const m=c.tabContainer.duration;
1===m?(h.setHeight(0),c.setExpansionState("collapsed")):h.animate({attribute:"height",to:0,duration:m}).next(a=>{c.setExpansionState("collapsed")})}else c.setExpansionState("collapsed")},getCollapsedHeight:function(){return this.buttonHeight},getMinimumExpandedHeight:function(){return Math.min(this.getPreferredExpandedHeight(),this.buttonHeight+this.minContainerHeight)},getPreferredExpandedHeight:function(){return this.buttonHeight+this.wrapper.container.height}});t.TextTabSlider=new x("TextTabSlider",
l,{initNode:function(c,h){h.labelTextColorChecked??(h.labelTextColorChecked="#fff");h.labelTextColor??(h.labelTextColor="#333");this.callSuper(c,h);this.button.label=new t.Text(this.button,{domClass:"myt-Text mytTextTabSliderLabel",ignorePlacement:!0,text:this.text,align:"center",valign:"middle",textColor:this.__getTextColor()})},setLabelTextColorChecked:function(c){this.labelTextColorChecked=c},setLabelTextColor:function(c){this.labelTextColor=c},setText:function(c){this.text!==c&&(this.text=c,this.button?.label?.setText(c))},
notifyButtonRedraw:function(){this.button.label?.setTextColor(this.__getTextColor())},__getTextColor:function(){return this.selected&&-1!==this.tabContainer.maxSelected?this.labelTextColorChecked:this.labelTextColor}});const d=t.TabSliderContainer=new JS.Module("TabSliderContainer",{include:[t.SelectionManager],extend:{SPACING:1},initNode:function(c,h){const m=this;m._tabSliders=[];h.defaultPlacement="container";h.spacing??(h.spacing=d.SPACING);h.overflow??(h.overflow="autoy");h.itemSelectionId??
(h.itemSelectionId="tabId");h.maxSelected??(h.maxSelected=1);h.duration??(h.duration=500);m.updateLayout=t.debounce(m.updateLayout);m.callSuper(c,h);c=m.container=new w(m,{ignorePlacement:!0,percentOfParentWidth:100},[u,{subnodeAdded:function(a){this.callSuper(a);a instanceof l&&(m._tabSliders.push(a),m.attachTo(a,"updateLayout","selected"))},subnodeRemoved:function(a){if(a instanceof l){const e=m._tabSliders,f=e.indexOf(a);-1<f&&(m.detachFrom(a,"updateLayout","selected"),e.splice(f,1))}this.callSuper(a)}}]);
c.layout=new t.SpacedLayout(c,{axis:"y",spacing:m.spacing,collapseParent:!0});m.attachTo(m,"updateLayout","height")},setSpacing:function(c){this.spacing!==c&&(this.spacing=c,this.layout?.setSpacing(c))},setDuration:function(c){this.duration=c},updateLayout:function(c,h){c=this._tabSliders;for(var m=c.length,a=m,e=0,f=0,g=0;a;){var b=c[--a];b.visible&&(++g,b.selected?(e+=b.getMinimumExpandedHeight(),f+=b.getPreferredExpandedHeight()):(b=b.getCollapsedHeight(),e+=b,f+=b))}a=this.container.layout;g=
a.inset+a.outset+a.spacing*(g-1);f+=g;a=this.height;e=e+g>a;g=f>a;b=this.duration;f-=a;0<h&&this.setDuration(h);for(a=m;a;)if(m=c[--a],m.visible)if(m.selected){let p;if(e)p=m.getMinimumExpandedHeight();else if(g){const n=m.getPreferredExpandedHeight(),q=m.getMinimumExpandedHeight();p=n-f;q>p?(f-=n-q,p=q):f=0}else p=m.getPreferredExpandedHeight();m.expand(p)}else m.collapse();0<h&&this.setDuration(b)}})})(myt);
(t=>{const x=l=>{const d=[];switch(l.tabContainer.location){case "top":d.push("TopLeft","TopRight");break;case "bottom":d.push("BottomLeft","BottomRight");break;case "left":d.push("TopLeft","BottomLeft");break;case "right":d.push("TopRight","BottomRight")}for(const c of d)l["setRounded"+c+"Corner"](l.cornerRadius||0)},w=t.Tab=new JS.Class("Tab",t.SimpleTextButton,{include:[t.Selectable],extend:{INSET:8,OUTSET:8},initNode:function(l,d){d.tabId??(d.tabId=t.generateGuid());d.tabContainer??(d.tabContainer=
l);let c;d.selected&&(c=!0,delete d.selected);d.inset??(d.inset=w.INSET);d.outset??(d.outset=w.OUTSET);d.selectedColor??(d.selectedColor="#fff");d.hoverColor??(d.hoverColor="#eee");d.activeColor??(d.activeColor="#aaa");d.readyColor??(d.readyColor="#ccc");d.labelTextSelectedColor??(d.labelTextSelectedColor="#333");d.height??(d.height=24);d.focusIndicator??(d.focusIndicator=!1);d.cornerRadius??(d.cornerRadius=6);this.callSuper(l,d);c&&this.tabContainer.select(this);x(this);this.textView.setTextColor(this.selected?
this.labelTextSelectedColor:this.labelTextColor)},setTabId:function(l){this.tabId=l},setTabContainer:function(l){this.tabContainer=l},setSelectedColor:function(l){this.selectedColor=l},setLabelTextColor:function(l){this.labelTextColor=l},setCornerRadius:function(l){this.cornerRadius=l;this.inited&&x(this)},setLabelTextSelectedColor:function(l){this.labelTextSelectedColor=l;this.inited&&this.selected&&this.textView.setTextColor(l)},setSelected:function(l){this.callSuper(l);this.inited&&(this.updateUI(),
this.textView.setTextColor(this.selected?this.labelTextSelectedColor:this.labelTextColor))},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.selected||this.tabContainer.select(this)}}),u=t.TabContainer=new JS.Module("TabContainer",{include:[t.SelectionManager],extend:{SPACING:1,INSET:0},initNode:function(l,d){this.__tabs=[];d.spacing??(d.spacing=u.SPACING);d.inset??(d.inset=u.INSET);d.location??(d.location="top");d.itemSelectionId??
(d.itemSelectionId="tabId");d.maxSelected??(d.maxSelected=1);const c=d.collapse??!0;delete d.collapse;this.callSuper(l,d);this.layout=new t.SpacedLayout(this,{axis:"left"===this.location||"right"===this.location?"y":"x",spacing:this.spacing,inset:this.inset,collapseParent:c})},setLocation:function(l){this.location=l},setSpacing:function(l){this.spacing!==l&&(this.spacing=l,this.layout?.setSpacing(l))},setInset:function(l){this.inset!==l&&(this.inset=l,this.layout?.setInset(l))},getFirstTab:function(){return this.__tabs[0]},
getSelectedTab:function(){return this.getSelected()[0]},subnodeAdded:function(l){this.callSuper(l);if(l.isA(w))switch(this.__tabs.push(l),this.location){case "top":l.setValign("bottom");break;case "bottom":l.setValign("top");break;case "left":l.setAlign("right");break;case "right":l.setAlign("left")}},subnodeRemoved:function(l){if(l.isA(w)){const d=this.__tabs,c=d.indexOf(l);-1<c&&d.splice(c,1)}this.callSuper(l)}})})(myt);
(t=>{const x=JS.Class,w=Math.min,u=Array.isArray,{SizeToDom:l,View:d,Disableable:c,KeyObservable:h,Button:{FOCUS_SHADOW:m},global:{keys:a}}=t,e=(q,r,z)=>{q[z]!==r&&(q[z]=r,q.getIDS()[z]=r+"px",q.inited&&(q.fireEvent(z,r),q.sizeViewToDom()))},f=(q,r,z)=>{q[r]!==z&&(q.getIDE()[r]=q[r]=z,q.inited&&q.fireEvent(r,z))},g=t.NativeInputWrapper=new x("NativeInputWrapper",d,{include:[c,t.InputObservable],initNode:function(q,r){r.tagName??(r.tagName="input");r.focusable??(r.focusable=!0);this.callSuper(q,r);
this.addDomClass("mytNativeInput")},createOurDomElement:function(q){q=this.callSuper(q);this.inputType&&((u(q)?q[1]:q).type=this.inputType);return q},setDisabled:function(q){this.disabled!==q&&(this.getIDE().disabled=q,this.callSuper(q))},setValue:function(q){this.value!==q&&(this.value=q,this.setDomValue(q),this.inited&&this.fireEvent("value",q))},getDomValue:function(){return this.getIDE().value},setDomValue:function(q){const r=this.getIDE();r.value!==q&&(r.value=q)}}),b=t.InputSelectOption=new x("InputSelectOption",
d,{include:[c,t.Selectable],createOurDomElement:q=>document.createElement("option"),setSelected:function(q){q=this.valueFromEvent(q);const r=this.getIDE();r.selected!==q&&(r.selected=q)},setDisabled:function(q){this.disabled!==q&&(this.getIDE().disabled=q,this.callSuper(q))},setValue:function(q){f(this,"value",q)},setLabel:function(q){this.label!==q&&(this.getIDE().textContent=this.label=q,this.inited&&this.fireEvent("label",q))},isSelected:function(){return this.getIDE().selected},canSelect:function(q){return!this.disabled&&
!this.getIDE().selected&&this.parent===q},canDeselect:function(q){return!this.disabled&&this.getIDE().selected&&this.parent===q}}),p=t.BaseInputText=new x("BaseInputText",g,{include:[t.TextSupport],initNode:function(q,r){r.bgColor??(r.bgColor="transparent");r.spellcheck??(r.spellcheck=!1);this.callSuper(q,r);this.attachToDom(this,"__syncToDom","input");this.attachToDom(this,"__filterInputPress","keypress");this.attachToDom(this,"__filterInput","keyup")},setText:function(q){this.callSuper(q);this.setValue(q)},
setSpellcheck:function(q){f(this,"spellcheck",q)},setMaxLength:function(q){f(this,"maxLength",null==q||0>q?void 0:q)},setAllowedChars:function(q){this.allowedChars=q},setPlaceholder:function(q){f(this,"placeholder",q)},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(m)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},__filterInput:function(q){this.setDomValue(this.filterInput(this.getDomValue()))},__filterInputPress:function(q){const r=
q.value,z=this.allowedChars;z&&!z.includes(h.getKeyFromEvent(q))&&r.preventDefault();this.filterInputPress(r)},filterInput:q=>q,filterInputPress:q=>{},__syncToDom:function(q){this.setValue(this.getDomValue())},getCaretPosition:function(){if(document.selection){const q=document.selection.createRange();q.moveStart("character",-this.getDomValue().length);return q.text.length}return this.getIDE().selectionStart||0},setCaretPosition:function(q,r){if(null==r||q===r){if(this.getCaretPosition()===q)return;
r=q}var z=this.getIDE();z.setSelectionRange?z.setSelectionRange(q,r):z.createTextRange&&(z=z.createTextRange(),z.collapse(!0),z.moveEnd("character",r),z.moveStart("character",q),z.select())},setCaretToStart:function(){this.setCaretPosition(0)},setCaretToEnd:function(){this.setCaretPosition(this.getDomValue().length)},selectAll:function(){this.getIDE().select()},getSelection:function(){const q=this.getIDE();return{start:q.selectionStart,startElem:q,end:q.selectionEnd,endElem:q}},setSelection:function(q){q&&
this.setCaretPosition(q.start,q.end)},saveSelection:function(q){this._selRange=q||this.getSelection()||this._selRange},restoreSelection:function(){this.setSelection(this._selRange)}}),n=t.InputText=new x("InputText",p,{include:[t.SizeHeightToDom],initNode:function(q,r){this.inputType=!0===r.password?"password":"text";this.callSuper(q,r);this.setCaretToEnd()},setPassword:function(q){this.set("password",q,!0);this.inited&&(this.getIDE().type=q?"password":"text")}});t.EditableText=new x("EditableText",
p,{include:[l],initNode:function(q,r){r.tagName??(r.tagName="div");r.inputType=null;r.whiteSpace??(r.whiteSpace="pre");r.contentEditable??(r.contentEditable=!0);this.callSuper(q,r);this.attachToDom(this,"__cleanInput","keydown");this.attachToDom(this,"__userInteraction","keyup");this.attachToDom(this,"__userInteraction","mouseup");this.setCaretToEnd()},setMinWidth:function(q){e(this,q,"minWidth")},setMinHeight:function(q){e(this,q,"minHeight")},setPadding:function(q){this.setPaddingTop(q);this.setPaddingRight(q);
this.setPaddingBottom(q);this.setPaddingLeft(q)},setPaddingTop:function(q){e(this,q,"paddingTop")},setPaddingRight:function(q){e(this,q,"paddingRight")},setPaddingBottom:function(q){e(this,q,"paddingBottom")},setPaddingLeft:function(q){e(this,q,"paddingLeft")},setContentEditable:function(q){f(this,"contentEditable",q)},filterInputPress:function(q){const r=this.maxLength;0<=r&&this.getCharacterCount()===r&&q.preventDefault();this.callSuper(q)},getDomValue:function(){return this.getIDE().innerHTML},
setDomValue:function(q){const r=this.getIDE();r.innerHTML!==q&&(r.innerHTML=q,this.sizeViewToDom(),this.restoreSelection())},__cleanInput:function(q){h.isEnterKeyEvent(q)&&(q.value.preventDefault(),"nowrap"!==this.whitespace&&document.execCommand("insertHTML",!1,this.isCaretAtEnd()?"\n\n":"\n"))},__syncToDom:function(q){this.callSuper(q);this.saveSelection();this.sizeViewToDom();this.restoreSelection()},getCharacterCount:function(){return this.getIDE().firstChild?.length??0},isCaretAtEnd:function(){return this.getCaretPosition()===
this.getCharacterCount()},getCaretPosition:function(){return this.getSelection()?.end??0},setCaretPosition:function(q,r){if(null==r||q===r){if(this.getCaretPosition()===q)return;r=q}this.saveSelection({start:q,startElem:this.getIDE().firstChild,end:r,endElem:this.getIDE().firstChild})},doFocus:function(){this.callSuper();this.restoreSelection()},__userInteraction:function(q){this.saveSelection();return!0},getSelection:function(){let q;if(window.getSelection){const r=window.getSelection();if(0<r.rangeCount){if(r.extentNode===
this.getIDE())return;q=r.getRangeAt(0)}}else document.selection&&(q=document.selection.createRange());return{start:q?q.startOffset:0,startElem:q?q.startContainer:this.getIDE().firstChild,end:q?q.endOffset:0,endElem:q?q.endContainer:this.getIDE().firstChild}},setSelection:function(q){if(q){const {startElem:r,endElem:z}=q;if(r&&r.parentNode&&z&&z.parentNode){const E=document.createRange();E.setStart(r,w(q.start,r.length));E.setEnd(z,w(q.end,z.length));window.getSelection?(q=window.getSelection(),0<
q.rangeCount&&q.removeAllRanges(),q.addRange(E)):document.selection&&E.select()}}}});t.InputTextArea=new x("InputTextArea",p,{initNode:function(q,r){r.tagName??(r.tagName="textarea");r.inputType=null;r.resize??(r.resize="none");r.wrap??(r.wrap="soft");this.callSuper(q,r)},destroy:function(){this.__resizeObserver?.unobserve(this.getIDE());this.callSuper()},setResize:function(q){const r=this;r.resize!==q&&(q=r.resize=r.getIDS().resize=q||"none",r.inited&&r.fireEvent("resize",q),"none"!==q&&(r.__resizeObserver??
(r.__resizeObserver=new ResizeObserver(()=>{r.doResize()}))).observe(r.getIDE()))},setWrap:function(q){f(this,"wrap",q)},doResize:function(){const q=this.resize;"both"!==q&&"horizontal"!==q||l.sizeWidth(this);"both"!==q&&"vertical"!==q||l.sizeHeight(this)}});t.ComboBox=new x("ComboBox",n,{include:[t.Activateable,t.KeyActivation,t.ListViewAnchor],initNode:function(q,r){this.filterItems=!0;r.activationKeys??(r.activationKeys=[a.CODE_ENTER,a.CODE_ESC,a.CODE_ARROW_UP,a.CODE_ARROW_DOWN]);r.bgColor??(r.bgColor=
"#fff");r.borderWidth??(r.borderWidth=1);r.borderStyle??(r.borderStyle="solid");r.floatingAlignOffset??(r.floatingAlignOffset=r.borderWidth);r.fullItemConfig??(r.fullItemConfig=[]);r.listViewAttrs={...r.listViewAttrs,maxHeight:r.listViewAttrs?.maxHeight??99};this.callSuper(q,r)},setFullItemConfig:function(q){this.fullItemConfig=q},setFilterItems:function(q){this.filterItems=q},__syncToDom:function(q){const r=this.value;this.callSuper(q);r!==this.value&&this.showFloatingPanel()},showFloatingPanel:function(q){const r=
this.getFloatingPanel(q);if(r){let E;if(this.filterItems){E=[];var z=this.value;z=null==z?"":(""+z).toLowerCase();const G=this.fullItemConfig,L=G.length;for(let J=0;L>J;){const N=G[J++],y=N.attrs.text.toLowerCase(),k=y.indexOf(z);0===k?y!==z&&E.push(N):0<k&&E.push(N)}}else E=this.fullItemConfig;0<E.length?(r.setMinWidth(this.width-2*this.borderWidth),this.setItemConfig(E),this.callSuper(q)):this.hideFloatingPanel(q)}},doItemActivated:function(q){this.setValue(null==q.value?q.text:q.value);this.callSuper(q)},
doActivated:function(){this.toggleFloatingPanel()}});t.InputSelect=new x("InputSelect",g,{include:[l],initNode:function(q,r){r.tagName??(r.tagName="select");r.inputType=null;r.multiple??(r.multiple=!1);r.size??(r.size=r.multiple?4:1);this.callSuper(q,r);this.attachToDom(this,"__syncToDom","change");this.__syncToDom()},setMultiple:function(q){f(this,"multiple",q)},setSize:function(q){f(this,"size",q)},setOptions:function(q){this.destroyAllOptions();if(u(q))for(const r of q)this.addOption(r)},getOptions:function(){return this.getSubviews().slice()},
setValue:function(q){u(q)&&t.areArraysEqual(q,this.value)||this.value===q||(this.value=q,this.inited&&this.fireEvent("value",q))},subviewAdded:function(q){q instanceof b||(t.dumpStack("Subview unsupported. Destroying it"),q.destroy())},showFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow(m)},hideFocusIndicator:function(){this.hideDefaultFocusIndicator();this.setBoxShadow()},getSelectedOptions:function(){return this.getOptions().filter(q=>q.isSelected())},getSelectedOptionValues:function(){return this.getSelectedOptions().map(q=>
q.value)},getOptionForValue:function(q){return this.getOptions().find(r=>r.value===q)},addOption:function(q){return new b(this,q)},destroyAllOptions:function(){for(const q of this.getOptions())q.destroy()},destroyOptionWithValue:function(q){if(q=this.getOptionForValue(q))if(q.destroy(),q.destroyed)return!0;return!1},deselectAll:function(){let q=!1;for(const r of this.getOptions())r.isSelected()&&(r.setSelected(!1),q=!0);q&&this.__doChanged()},selectValues:function(q){u(q)||(q=[q]);for(const r of q)this.selectValue(r)},
selectValue:function(q){this.select(this.getOptionForValue(q))},select:function(q){q?.canSelect(this)&&(q.setSelected(!0),this.__syncToDom())},deselectValue:function(q){this.deselect(this.getOptionForValue(q))},deselect:function(q){q?.canDeselect(this)&&(q.setSelected(!1),this.__syncToDom())},__doChanged:function(q){this.__syncToDom();this.doChanged()},doChanged:()=>{},__syncToDom:function(){this.setValue(this.multiple?this.getSelectedOptionValues():this.getDomValue())}})})(myt);
(t=>{const x=JS.Module,w=Math.round;var u=t.ValueComponent=new x("ValueComponent",{initNode:function(d,c){this.appendToEarlyAttrs("valueFilter","value");this.callSuper(d,c)},setValueFilter:function(d){this.valueFilter=d;this.inited&&d&&this.setValue(this.value)},setValue:function(d){this.valueFilter&&(d=this.valueFilter(d));this.value!==d&&(this.value=d,this.inited&&this.fireEvent("value",this.getValue()))},getValue:function(){return this.value},chainValueFilter:function(d,c){const h=this.valueFilter;
this.setValueFilter(h?"last"===c?m=>d(h(m)):m=>h(d(m)):d)}});const l=t.RangeComponent=new x("RangeComponent",{include:[u],setLowerValue:function(d){this.setValue({lower:d,upper:this.value&&void 0!==this.value.upper?this.value.upper:d})},getLowerValue:function(){return this.value?this.value.lower:void 0},setUpperValue:function(d){this.setValue({lower:this.value&&void 0!==this.value.lower?this.value.lower:d,upper:d})},getUpperValue:function(){return this.value?this.value.upper:void 0},setValue:function(d){if(d){var c=
this.value;const a=c?c.lower:void 0;c=c?c.upper:void 0;this.valueFilter&&(d=this.valueFilter(d));if(d.lower!==a||d.upper!==c){var h;(h=d).lower??(h.lower=d.upper);var m;(m=d).upper??(m.upper=d.lower);void 0!==d.lower&&void 0!==d.upper&&d.lower>d.upper&&(h=d.lower,d.lower=d.upper,d.upper=h);this.value=d;this.inited&&(this.fireEvent("value",this.getValue()),d.lower!==a&&this.fireEvent("lowerValue",d.lower),d.upper!==c&&this.fireEvent("upperValue",d.upper))}}else this.callSuper(d)},getValueCopy:function(){const d=
this.value;return{lower:d.lower,upper:d.upper}}});u=t.BoundedValueComponent=new x("BoundedValueComponent",{include:[u],initNode:function(d,c){const h=this;h.appendToEarlyAttrs("snapToInt","minValue","maxValue");c.snapToInt??(c.snapToInt=!0);c.valueFilter||(c.valueFilter=m=>{var a=h.maxValue;if(null!=a&&m>a)return a;a=h.minValue;return null!=a&&m<a?a:m});h.callSuper(d,c)},setSnapToInt:function(d){this.snapToInt!==d&&(this.snapToInt=d,this.inited&&(this.fireEvent("snapToInt",d),d&&(this.setMinValue(this.minValue),
this.setMaxValue(this.maxValue),this.setValue(this.value))))},setMinValue:function(d){this.snapToInt&&null!=d&&(d=w(d));if(this.minValue!==d){const c=this.maxValue;null!=c&&d>c&&(d=c);this.minValue!==d&&(this.minValue=d,this.inited&&(this.fireEvent("minValue",d),this.setValue(this.value)))}},setMaxValue:function(d){this.snapToInt&&null!=d&&(d=w(d));if(this.maxValue!==d){const c=this.minValue;null!=c&&d<c&&(d=c);this.maxValue!==d&&(this.maxValue=d,this.inited&&(this.fireEvent("maxValue",d),this.setValue(this.value)))}},
setValue:function(d){this.callSuper(this.snapToInt&&null!=d&&!isNaN(d)?w(d):d)}});t.BoundedRangeComponent=new x("BoundedRangeComponent",{include:[u,l],initNode:function(d,c){const h=this;c.valueFilter||(c.valueFilter=m=>{if(m){const a=h.maxValue,e=h.minValue;null!=a&&m.upper>a&&(m.upper=a);null!=e&&m.lower<e&&(m.lower=e)}return m});h.callSuper(d,c)},setValue:function(d){this.snapToInt&&null!=d&&(null==d.lower||isNaN(d.lower)||(d.lower=w(d.lower)),null==d.upper||isNaN(d.upper)||(d.upper=w(d.upper)));
this.callSuper(d)}})})(myt);
(t=>{const x=w=>{const u=w.label??"";w.setText('<i class="'+("solid"===w.checkboxStyle?"fas":"far")+" fa-"+(w.isChecked()?"check-":"")+'square"></i>'+(0<u.length?" "+u:""))};t.Checkbox=new JS.Class("Checkbox",t.Text,{include:[t.SimpleButtonStyle,t.ValueComponent],initNode:function(w,u){this.appendToEarlyAttrs("userUnselectable");u.value??(u.value=!1);u.focusIndicator??(u.focusIndicator=!1);u.checkboxStyle??(u.checkboxStyle="outline");u.activeColor??(u.activeColor="inherit");u.hoverColor??(u.hoverColor=
"inherit");u.readyColor??(u.readyColor="inherit");this.callSuper(w,u);t.FontAwesome.registerForNotification(this);x(this)},setValue:function(w){this.value!==w&&(this.callSuper(w),this.inited&&x(this))},setLabel:function(w){this.label!==w&&(this.set("label",w,!0),this.inited&&x(this))},setCheckboxStyle:function(w){this.checkboxStyle!==w&&(this.set("checkboxStyle",w,!0),this.inited&&x(this))},isChecked:function(){return!0===this.value},doActivated:function(){this.setValue(!this.value)},draw:function(w,
u=1){this.setOpacity(u);this.setTextColor(w)}})})(myt);
(t=>{let x;const {Class:w,Module:u}=JS,l=console.warn,{KeyObservable:d,UpdateableUI:c,dumpStack:h,global:m}=t,a=m.focus,e=m.keys,f={},g=(k,v)=>{if(k){const A=k.id;k.id?v(A):h("No ID")}else h("No processor")},b=k=>{g(k,v=>{f[v]=k})},p=k=>{const v=t.BAG.getGroup("selected",k.groupId);if(v){const A=v.getNodes();k=k.value;let B=A.length;for(;B;){const D=A[--B];if(D.optionValue===k){v.setTrue(D);break}}}},n=k=>{if(k.groupId){const v=t.BAG.getGroup("selected",k.groupId);v&&k.syncTo(v,"__syncValue","trueNode")}},
q=(k,v)=>{const A=[],B=k.__v;if(B)for(const D of B)v=D.isFormValid(k,null,A)&&v;k.setErrorMessages(A);k.setIsValid(v);return v},r=(k,v,A)=>{if(k=k.__vp)for(const B of k)B[A]&&(v=B.process(v));return v},z=t.ValueProcessor=new w("ValueProcessor",{initialize:function(k,v,A,B){this.id=k;this.runForDefault=!!v;this.runForRollback=!!A;this.runForCurrent=!!B},process:k=>k}),E=t.ToNumberValueProcessor=new w("ToNumberValueProcessor",z,{process:k=>{if(null==k||""===k||"-"===k)return k;const v=Number(k);return isNaN(v)?
k:v}}),G=t.TrimValueProcessor=new w("TrimValueProcessor",z,{initialize:function(k,v,A,B,D){this.callSuper(k,v,A,B);this.trim=D},process:function(k){k+="";switch(this.trim){case "start":case "left":return k.trimStart();case "end":case "right":return k.trimEnd();default:return k.trim()}}}),L=t.UndefinedValueProcessor=new w("UndefinedValueProcessor",z,{initialize:function(k,v,A,B,D){this.callSuper(k,v,A,B);this.defaultValue=D},process:function(k){return void 0===k?this.defaultValue:k}}),J=t.Form=new u("Form",
{extend:{ACCELERATOR_SCOPE_ROOT:"root",ACCELERATOR_SCOPE_ELEMENT:"element",ACCELERATOR_SCOPE_NONE:"none"},initNode:function(k,v){this.isChanged=this._lockCascade=!1;this.isValid=!0;this.__sf={};this.__v=[];this.__acc={};this.callSuper(k,v);this.form?.isA(J)&&this.form.addSubForm(this)},destroy:function(){this.form?.isA(J)&&this.form.removeSubForm(this.id);this.callSuper()},setErrorMessages:function(k){this.set("errorMessages",k,!0)},getFullId:function(){const k=[this.id];let v=this.form;for(;v&&v.id;)k.unshift(v.id),
v=v.form;return k.join(".")},setId:function(k){if(this.id!==k){const v=this.id;this.id=k;(k=this.form)&&this.inited&&(k.removeSubForm(v),k.addSubForm(this))}},setForm:function(k){if(this.form!==k){const v=this.form;this.form=k;v?.removeSubForm(this.id);this.inited&&k?.addSubForm(this)}},setIsValid:function(k){this.isValid=k;this.inited&&this.fireEvent("isValid",k);const v=this.form;v&&!this._lockCascade&&(k?v.verifyValidState(this):v.notifySubFormInvalid())},setIsChanged:function(k){if(this.isChanged!==
k){this.isChanged=k;this.inited&&this.fireEvent("isChanged",k);const v=this.form;v&&!this._lockCascade&&(k?v.notifySubFormChanged():v.verifyChangedState(this))}},setValidators:function(k){let v=k.length;for(;v;){const A=k[--v];"string"===typeof A&&(k[v]=m.validators.getValidator(A),k[v]||k.splice(v,1))}this.__v=k},getValue:function(){if(this.callSuper)return this.callSuper();if(this.isA(N))return this.value;const k={},v=this.__sf;for(const A in v)k[A]=v[A].getValue();return k},setValue:function(k){this.callSuper?.(k);
if("object"===typeof k&&!this.isA(N))for(const v in k){const A=this.getSubForm(v);A?k[v]=A.setValue(k[v]):l("ID in setValue for missing subform",v)}this.form?.notifyValueChanged(this);return k},getDefaultValue:function(){const k={};let v=this.__sf;for(const A in v)k[A]=v[A].getDefaultValue();return k},setDefaultValue:function(k){if("object"===typeof k)for(const v in k){const A=this.getSubForm(v);A?k[v]=A.setDefaultValue(k[v]):l("ID in setDefaultValue for missing subform",v)}return k},getRollbackValue:function(){const k=
{},v=this.__sf;for(const A in v)k[A]=v[A].getRollbackValue();return k},setRollbackValue:function(k){if("object"===typeof k)for(const v in k){const A=this.getSubForm(v);A?k[v]=A.setRollbackValue(k[v]):l("ID in setRollbackValue for missing subform",v)}return k},addAccelerator:function(k,v){this.__acc[k]=v},removeAccelerator:function(k){delete this.__acc[k]},invokeAccelerator:function(k,v){this.__acc[k]?.call(this,v??null)},addValidator:function(k){k&&this.__v.push(k)},removeValidator:function(k){if(k){const v=
this.__v;let A=v.length;for(;A;){const B=v[--A];if(B.id===k)return v.splice(A,1),B}}},getRootForm:function(){return this.form?this.form.getRootForm():this},addSubForm:function(k){const v=k.id;null!=this.getSubForm(v)?l("ID in use for subform, add aborted",v,k):(k.setForm(this),this.__sf[v]=k,k.isChanged&&this.notifySubFormChanged(),k.isValid||this.notifySubFormInvalid())},removeSubForm:function(k){const v=this.getSubForm(k);v&&(v.setForm(null),delete this.__sf[k],this.verifyChangedState(),this.verifyValidState());
return v},getSubForm:function(k){return this.__sf[k]},getSubForms:function(){return this.__sf},getInvalidSubformIds:function(k){k&&this.doValidation();const v=[];(function D(B){if(B.isA(N))B.isValid||v.push(B.getFullId());else{B=B.getSubForms();for(const H in B)D(B[H])}})(this);return v},getAllErrorMessages:function(){const k=this.__sf;let v=(this.errorMessages??[]).slice();for(const A in k)v.push(...k[A].getAllErrorMessages());return v},notifySubFormInvalid:function(){this.setIsValid(!1)},verifyValidState:function(k){const v=
this.__sf;let A=!0;for(const B in v){const D=v[B];D!==k&&(A=D.isValid&&A)}return q(this,A)},doValidation:function(){const k=this.__sf;let v=!0;for(const A in k)v=k[A].doValidation()&&v;this._lockCascade=!0;v=q(this,v);this._lockCascade=!1;return v},notifyValueChanged:function(k){this.form?.notifyValueChanged(k)},notifySubFormChanged:function(){this.setIsChanged(!0)},verifyChangedState:function(k){const v=this.__sf;let A=!1;for(const B in v){const D=v[B];D!==k&&(A=D.isChanged||A)}this.setIsChanged(A);
return A},setup:function(k,v,A){this._lockCascade=!0;this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;k??={};v??={};A??={};const B=this.__sf;for(const D in B)B[D].setup(k[D],v[D],A[D])},resetForm:function(){this._lockCascade=!0;const k=this.__sf;for(const v in k)k[v].resetForm();this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;const k=this.__sf;for(const v in k)k[v].rollbackForm();
this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){const k={},v=this.__sf;for(const A in v){const B=v[A];B.isChanged&&(k[A]=B.getChangedValue())}return k}}),N=t.FormElement=new u("FormElement",{include:[J],initNode:function(k,v){this.__vp=[];this.callSuper(k,v)},getValue:function(){return r(this,this.callSuper?this.callSuper():this.value,"runForCurrent")},setValue:function(k){void 0===k&&(k=this.getRollbackValue());this.value!==k&&
(this.callSuper(k),this.verifyChangedState());return k},getDefaultValue:function(){return r(this,this.defaultValue,"runForDefault")},setDefaultValue:function(k){this.defaultValue!==k&&(this.defaultValue=k,this.inited&&this.fireEvent("defaultValue",k),this.verifyChangedState());return k},getRollbackValue:function(){return r(this,this.rollbackValue,"runForRollback")},setRollbackValue:function(k){void 0===k&&(k=this.getDefaultValue());this.rollbackValue!==k&&(this.rollbackValue=k,this.inited&&this.fireEvent("rollbackValue",
k),this.verifyChangedState());return k},setValueProcessors:function(k){let v=k.length;for(;v;){const A=k[--v];"string"===typeof A&&(k[v]=f[A],k[v]||k.splice(v,1))}this.__vp=k},addValueProcessor:function(k){this.__vp.push(k)},removeValueProcessor:function(k){if(k){const v=this.__vp;let A=v.length;for(;A;){const B=v[--A];if(B.id===k)return v.splice(A,1),B}}},addSubForm:k=>{h("addSubForm unsupported on FormElement")},getSubForm:k=>{h("getSubForm unsupported on FormElement")},removeSubForm:k=>{h("removeSubForm unsupported on FormElement")},
verifyChangedState:function(k){k=this.getValue()!==this.getRollbackValue();this.setIsChanged(k);return k},setup:function(k,v,A){this._lockCascade=!0;this.value=this.rollbackValue=this.defaultValue=void 0;this.setDefaultValue(k);this.setRollbackValue(v);this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1;this.setValue(A)},resetForm:function(){this._lockCascade=!0;const k=this.getDefaultValue();this.setRollbackValue(k);this.setValue(k);this.setIsChanged(!1);this.setErrorMessages([]);
this.setIsValid(!0);this._lockCascade=!1},rollbackForm:function(){this._lockCascade=!0;this.setValue(this.getRollbackValue());this.setIsChanged(!1);this.setErrorMessages([]);this.setIsValid(!0);this._lockCascade=!1},getChangedValue:function(){return this.isChanged?this.getValue():void 0}}),y=t.FormInputTextMixin=new u("FormInputTextMixin",{include:[N,c],initNode:function(k,v){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor=
"#999";v.bgColor??(v.bgColor="#fff");v.borderWidth??(v.borderWidth=1);v.borderStyle??(v.borderStyle="solid");this.callSuper(k,v);this.addValueProcessor(x);this.attachToDom(this,"__hndlKeyDown","keydown");this.attachToDom(this,"__hndlKeyUp","keyup");this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(k){this.validateWhen=k},setAcceleratorScope:function(k){this.acceleratorScope=k},setErrorColor:function(k){this.errorColor=k},setActionRequiredColor:function(k){this.actionRequiredColor=
k},setNormalColor:function(k){this.normalColor=k},setIsChanged:function(k){this.callSuper(k);this.inited&&this.updateUI()},setIsValid:function(k){this.callSuper(k);this.inited&&this.updateUI()},setValue:function(k){k=this.callSuper(k);const v=this.validateWhen;"key"!==v&&"blurWithKeyFix"!==v||this.verifyValidState();return k},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");break;case "element":a.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");
break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},__hndlKeyDown:function(k){d.isEnterKeyEvent(k)&&this.invokeAccelerator("accept")},__hndlKeyUp:function(k){d.isEscKeyEvent(k)&&this.invokeAccelerator("reject")},doBlur:function(){this.callSuper();const k=this.validateWhen;"blur"!==k&&"blurWithKeyFix"!==k||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});
t.RootForm=new u("RootForm",{include:[J],initNode:function(k,v){this.callSuper(k,v);this.addAccelerator("submit",this.doSubmit);this.addAccelerator("cancel",this.doCancel)},doSubmit:function(){this.isChanged&&(this.doValidation()?this.doValidSubmit(this.getValue()):this.doInvalidSubmit())},doValidSubmit:k=>{},doInvalidSubmit:()=>{},doCancel:function(){this.rollbackForm();this.doValidation()}});t.FormCheckbox=new w("FormCheckbox",t.Checkbox,{include:[N],initNode:function(k,v){this.rollbackValue=this.defaultValue=
!1;this.callSuper(k,v)}});t.FormComboBox=new w("FormComboBox",t.ComboBox,{include:[N,c],initNode:function(k,v){this.acceleratorScope="element";this.validateWhen="key";this.errorColor="#f99";this.actionRequiredColor="#966";this.normalColor="#999";this.callSuper(k,v);this.addValueProcessor(x);this.addAccelerator("accept",this.doAccept);this.addAccelerator("reject",this.doReject)},setValidateWhen:function(k){this.validateWhen=k},setAcceleratorScope:function(k){this.acceleratorScope=k},setErrorColor:function(k){this.errorColor=
k},setActionRequiredColor:function(k){this.actionRequiredColor=k},setNormalColor:function(k){this.normalColor=k},setIsChanged:function(k){this.callSuper(k);this.inited&&this.updateUI()},setIsValid:function(k){this.callSuper(k);this.inited&&this.updateUI()},setValue:function(k){k=this.callSuper(k);const v=this.validateWhen;"key"!==v&&"blurWithKeyFix"!==v||this.verifyValidState();return k},doAccept:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("submit");
break;case "element":a.next(!1)}},doReject:function(){if(!this.disabled)switch(this.acceleratorScope){case "root":this.getRootForm().invokeAccelerator("cancel");break;case "element":this.rollbackForm(),this.getRootForm().doValidation(),this.form?.verifyChangedState(this)}},notifyPanelShown:function(k){this._isShown=!0},notifyPanelHidden:function(k){this._isShown=!1},doActivationKeyDown:function(k,v){k!==e.CODE_ESC||this._isShown?this.callSuper(k,v):this.invokeAccelerator("reject")},doActivationKeyUp:function(k){k!==
e.CODE_ENTER||this._isShown?this.callSuper(k):this.invokeAccelerator("accept")},doBlur:function(){this.callSuper();const k=this.validateWhen;"blur"!==k&&"blurWithKeyFix"!==k||this.verifyValidState()},updateUI:function(){this.setBorderColor(this.isValid?this.normalColor:this.isChanged?this.errorColor:this.actionRequiredColor)}});t.FormEditableText=new w("FormEditableText",t.EditableText,{include:[y],__hndlKeyDown:function(k){"nowrap"===this.whitespace&&this.callSuper(k)}});t.FormInputText=new w("FormInputText",
t.InputText,{include:[y]});t.FormInputTextArea=new w("FormInputTextArea",t.InputTextArea,{include:[y],__hndlKeyDown:k=>{}});t.FormInputSelect=new w("FormInputSelect",t.InputSelect,{include:[N],setValue:function(k){if(!this.__abortSetValue)return k=this.callSuper(k),this.__abortSetValue=!0,this.deselectAll(),this.selectValues(k),this.__abortSetValue=!1,this.verifyValidState(),k}});t.FormRadioGroup=new w("FormRadioGroup",t.Node,{include:[t.ValueComponent,N],initNode:function(k,v){v.groupId??(v.groupId=
t.generateGuid());this.callSuper(k,v);void 0!==this.value&&p(this);n(this)},setValue:function(k){k=this.callSuper(k);this.inited&&p(this);return k},setGroupId:function(k){if(this.groupId!==k){if(this.groupId){const v=t.BAG.getGroup("selected",this.groupId);v&&this.detachFrom(v,"__syncValue","trueNode")}this.groupId=k;this.inited&&n(this)}},__syncValue:function(k){k=k.value;this.setValue(k?k.optionValue:null)}});t.UseOtherFieldIfEmptyValueProcessor=new w("UseOtherFieldIfEmptyValueProcessor",z,{initialize:function(k,
v,A,B,D){this.callSuper(k,v,A,B);this.otherField=D},process:function(k){return null==k||""===k?this.otherField.getValue():k}});new JS.Singleton("GlobalValueProcessorRegistry",{initialize:function(){b(x=new L("undefToEmpty",!0,!0,!0,""));b(new E("toNumber",!0,!0,!0));b(new G("trimLeft",!0,!0,!0,"left"));b(new G("trimRight",!0,!0,!0,"right"));b(new G("trimBoth",!0,!0,!0,"both"));m.register("valueProcessors",this)},getValueProcessor:k=>f[k],register:b,unregister:k=>{g(k,v=>{f[v]&&delete f[v]})}})})(myt);
(t=>{const x=JS.Class,w=t.dumpStack,u=Math.round,l={gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",ico:"image/vnd.microsoft.icon"},d=(a,e)=>{a[e](a,"doDragOver","dragover",!1);a[e](a,"doDragEnter","dragenter",!1);a[e](a,"doDragLeave","dragleave",!1);a[e](a,"doDrop","drop",!1)},c=t.DragDropSupport=new JS.Module("DragDropSupport",{include:[t.DragDropObservable],initNode:function(a,e){this.callSuper(a,e);this.disabled||this.setupDragListeners()},
setDisabled:function(a){this.disabled!==a&&(this.getIDE().disabled=a,this.callSuper(a),this.inited&&(a?this.teardownDragListeners():this.setupDragListeners()))},setupDragListeners:function(){d(this,"attachToDom")},teardownDragListeners:function(){d(this,"detachFromDom")},doDragOver:a=>{},doDragEnter:a=>{},doDragLeave:a=>{},doDrop:function(a){this.handleFiles(a.value.dataTransfer.files,a)},handleFiles:function(a,e){if(void 0!==a){let f=a.length;for(;f;){const g=this.filterFiles(a[--f]);g&&this.handleDroppedFile(g,
e)}}else w("No File API")},filterFiles:a=>a,handleDroppedFile:(a,e)=>{}}),h=t.Uploader=new x("Uploader",t.View,{include:[c,t.Disableable,t.FormElement],extend:{FILE_ATTR_SERVER_PATH:"serverPath",readFile:(a,e,f)=>{if(void 0!==FileReader){const g=new FileReader;g.onload=b=>{e(b.target.result)};f?g.readAsText(a):g.readAsDataURL(a)}},isSameFile:(a,e)=>null!=a&&null!=e&&a.name===e.name&&a.type===e.type&&a.size===e.size,createFile:a=>{const e=(new t.URI(a)).file;return{name:e,serverPath:a,size:-1,type:l[t.getExtension(e)]}}},
initNode:function(a,e){const f=this;f.files=[];e.requestFileParam??(e.requestFileParam="file");e.maxFiles??(e.maxFiles=-1);f.callSuper(a,e);f.fileInput=new t.NativeInputWrapper(f,{percentOfParentWidth:100,percentOfParentHeight:100,opacity:.01,disabled:f.disabled,overflow:"hidden"},[t.SizeToParent,{initNode:function(g,b){this.inputType="file";this.callSuper(g,b);this.attachToDom(this,"_hndlInput","change");this.getIDE().multiple=1<f.maxFiles},_hndlInput:function(g){f.handleFiles(this.getIDE().files,
g)}}])},setValue:function(a){this.clearFiles();if(a){Array.isArray(a)||(a=[a]);for(const e of a)this.addFile(h.createFile(e))}return this.callSuper?this.callSuper(a):a},getValue:function(){return this.value},setDisabled:function(a){this.callSuper(a);this.fileInput?.setDisabled(a)},setMaxFiles:function(a){this.maxFiles!==a&&(this.maxFiles=a,this.inited&&this.fireEvent("maxFiles",a),this.fileInput&&(this.fileInput.getIDE().multiple=1<a))},setUploadUrl:function(a){this.set("uploadUrl",a,!0)},setRequestFileParam:function(a){this.set("requestFileParam",
a,!0)},bringSubviewToFront:function(a){a===this.fileInput?this.callSuper(a):this.sendSubviewBehind(a,this.fileInput)},subviewAdded:function(a){this.callSuper(a);this.fileInput&&this.bringSubviewToFront(this.fileInput)},handleDroppedFile:function(a,e){this.addFile(a)},filterFiles:function(a){return 0<=this.maxFiles&&this.files.length>=this.maxFiles?null:a},uploadFiles:function(a,e){a??=this.uploadUrl;const f=this.files;let g=f.length;for(;g;)this.uploadFile(f[--g],a,e)},makeFetchOptionsForUpload:a=>
({method:"POST",body:a}),uploadFile:function(a,e,f){const g=this,b=new FormData;b.append(f??g.requestFileParam,a,a.name.replaceAll("%20"," "));t.doFetch(e??g.uploadUrl,g.makeFetchOptionsForUpload(b),!1,p=>{g.handleUploadSuccess(a,p)},p=>{g.handleUploadFailure(a,p)})},handleUploadSuccess:function(a,e){a[h.FILE_ATTR_SERVER_PATH]=this.parseServerPathFromResponse(a,e);this.updateValueFromFiles()},handleUploadFailure:(a,e)=>{w("Upload failure:"+e.status+":"+e.message)},parseServerPathFromResponse:(a,e)=>
null,addFile:function(a){this.files.push(a);this.updateValueFromFiles();this.fireEvent("addFile",a)},removeFile:function(a){const e=this.files;let f=e.length;for(;f;)if(h.isSameFile(e[--f],a)){e.splice(f,1);this.updateValueFromFiles();this.fireEvent("removeFile",a);break}},updateValueFromFiles:function(){const a=[];var e=this.files;let f=e.length;for(;f;){const g=e[--f][h.FILE_ATTR_SERVER_PATH];g&&a.push(g)}e=a.length;this.value=1===e?a[0]:0===e?void 0:a;this.value||(this.fileInput.getIDE().value=
"");this.verifyChangedState();this.form?.notifyValueChanged(this);this.fireEvent("value",this.value)},clearFiles:function(){const a=this.files;let e=a.length;for(;e;)this.removeFile(a[--e])}}),m=t.ImageUploader=new x("ImageUploader",h,{extend:{isImageFile:a=>/image/i.test(a.type)},initNode:function(a,e){e.maxFiles=1;this.callSuper(a,e)},setWidth:function(a){this.callSuper(a);this.inited&&this.updateImageSize()},setHeight:function(a){this.callSuper(a);this.inited&&this.updateImageSize()},filterFiles:function(a){if(m.isImageFile(a)||
this.allowNonImages){for(;0<this.files.length;)this.removeFile(this.files[0]);return this.callSuper(a)}},addFile:function(a){const e=this,f=m.isImageFile(a);e.callSuper(a);const g=e.image=new t.Image(e,{useNaturalSize:!1,align:"center",valign:"middle"});g.file=a;const b=p=>{const n=new Image;n.onload=()=>{a.width=n.width;a.height=n.height;g&&!g.destroyed&&e.updateImage(a,g,n.src)};n.src=p};f?-1===a.size?b(a.serverPath):m.isImageFile(a)&&h.readFile(a,b):-1===a.size?e.updateImage(a,g,a.serverPath):
h.readFile(a,p=>{e.updateImage(a,g,p)})},scaleToFit:(a,e,f,g)=>f/g>a/e?[a,g*a/f]:[f*e/g,e],removeFile:function(a){this.callSuper(a);const e=this.getSubviews();let f=e.length;for(;f;){const g=e[--f];if(h.isSameFile(g.file,a)){g.destroy();break}}},handleDroppedFile:function(a,e){this.callSuper(a,e);this.uploadFile(a,this.uploadUrl)},updateImage:function(a,e,f){this.nativeWidth=a.width;this.nativeHeight=a.height;this.updateImageSize();e.setImageUrl(f)},updateImageSize:function(){const a=this.image;if(a&&
!a.destroyed){var e=this.scaleToFit(this.width,this.height,this.nativeWidth,this.nativeHeight);const f=u(e[0]);e=u(e[1]);a.setImageSize(f+"px "+e+"px");a.setWidth(f);a.setHeight(e)}},getImageSize:function(){return this.files.length?{width:this.nativeWidth,height:this.nativeHeight}:null}})})(myt);
(t=>{const x=(w,u,l,d)=>{l=l.bind(w);"y"!==w.axis&&(l(u,d,"x"),l(u,d,"boundsWidth"));"x"!==w.axis&&(l(u,d,"y"),l(u,d,"boundsHeight"));l(u,d,"visible")};t.SizeToChildren=new JS.Class("SizeToChildren",t.Layout,{initNode:function(w,u){this.axis="x";this.paddingX=this.paddingY=0;this.callSuper(w,u)},setAxis:function(w){this.axis!==w&&(this.inited?(this.stopMonitoringAllSubviews(),this.axis=w,this.startMonitoringAllSubviews(),this.fireEvent("axis",w),this.update()):this.axis=w)},setPaddingX:function(w){this.paddingX!==
w&&(this.paddingX=w,this.inited&&(this.fireEvent("paddingX",w),this.update()))},setPaddingY:function(w){this.paddingY!==w&&(this.paddingY=w,this.inited&&(this.fireEvent("paddingY",w),this.update()))},update:function(){if(this.canUpdate()){this.incrementLockedCounter();const u=this.parent;if(!u.isBeingDestroyed){const l=this.subviews;var w=l.length;const d=this.axis,c=Math.max;let h,m;if("y"!==d){h=w;for(m=0;h;){const a=l[--h];a.visible&&(m=c(m,a.x+(0<a.boundsWidth?a.boundsWidth:0)))}u.setWidth(m+
this.paddingX)}if("x"!==d){h=w;for(m=0;h;)w=l[--h],w.visible&&(m=c(m,w.y+(0<w.boundsHeight?w.boundsHeight:0)));u.setHeight(m+this.paddingY)}}this.decrementLockedCounter()}},startMonitoringSubview:function(w){x(this,w,this.attachTo,"update")},stopMonitoringSubview:function(w){x(this,w,this.detachFrom,"update")}})})(myt);
(t=>{let x=0;const w=JS.Class,{View:u,SizeToParent:l,RootView:d}=t,c=t.Dimmer=new w("Dimmer",u,{include:[l],extend:{OPACITY:.35,COLOR:"#000"},initNode:function(m,a){this.restoreFocus=!0;a.focusable=a.focusCage=!0;a.percentOfParentWidth??(a.percentOfParentWidth=100);a.percentOfParentHeight??(a.percentOfParentHeight=100);a.visible??(a.visible=!1);a.ignoreLayout??(a.ignoreLayout=!0);this.callSuper(m,a);this.overlay=new u(this,{ignorePlacement:!0,opacity:c.OPACITY,bgColor:c.COLOR,percentOfParentWidth:100,
percentOfParentHeight:100},[l]);for(const e of"mouseover mouseout mousedown mouseup click dblclick mousemove".split(" "))this.attachDomObserver(this,"eatMouseEvent",e);d.setupCaptureDrop(this)},destroy:function(){d.teardownCaptureDrop(this);this.callSuper()},setRestoreFocus:function(m){this.restoreFocus=m},eatMouseEvent:m=>!0,show:function(){const m=t.global.focus;this.prevFocus=m.focusedView??m.focusedDom;this.makeHighestZIndex();this.focusable&&this.focus();this.setVisible(!0)},hide:function(m){this.visible&&
(this.setVisible(!1),!m&&this.restoreFocus&&this.prevFocus?.focus())}}),h=t.ModalPanel=new w("ModalPanel",c,{extend:{PADDING_X:20,PADDING_Y:15,MARGIN_TOP:40,MARGIN_LEFT:40,MARGIN_BOTTOM:40,MARGIN_RIGHT:40,getOpenModalPanelCount:()=>x,hasOpenModalPanels:()=>0<x},initNode:function(m,a){const e={name:"content",ignorePlacement:!0},f={...e,align:"center",valign:"middle"};this.defaultPlacement="content";a.sizingStrategy??(a.sizingStrategy="children");a.marginTop??(a.marginTop=h.MARGIN_TOP);a.marginLeft??
(a.marginLeft=h.MARGIN_LEFT);a.marginBottom??(a.marginBottom=h.MARGIN_BOTTOM);a.marginRight??(a.marginRight=h.MARGIN_RIGHT);a.paddingX??(a.paddingX=h.PADDING_X);a.paddingY??(a.paddingY=h.PADDING_Y);this.callSuper(m,a);switch(this.sizingStrategy){case "children":new t.SizeToChildren(new u(this,f),{name:"sizeToChildren",axis:"both",paddingX:this.paddingX,paddingY:this.paddingY});break;case "parent":new u(this,{...e,x:this.marginLeft,y:this.marginTop,percentOfParentWidthOffset:-this.marginLeft-this.marginRight,
percentOfParentHeightOffset:-this.marginTop-this.marginBottom,percentOfParentWidth:100,percentOfParentHeight:100},[l]);break;case "basic":new u(this,f);break;default:new u(this,e)}},setSizingStrategy:function(m){this.sizingStrategy=m},setMarginTop:function(m){this.marginTop=m},setMarginLeft:function(m){this.marginLeft=m},setMarginBottom:function(m){this.marginBottom=m},setMarginRight:function(m){this.marginRight=m},setPaddingX:function(m){this.paddingX=m},setPaddingY:function(m){this.paddingY=m},
show:function(){this.callSuper();x++},hide:function(m){this.callSuper(m);x=Math.max(0,x-1)}})})(myt);
(t=>{const x=u=>{u[u.visible?"addDomClass":"removeDomClass"]("mytCenterSpin")},w=u=>{const l=u.size,d=u.getIDS();u.setWidth(l);u.setHeight(l);d.width=d.height=l-2*u.borderWidth+"px"};t.Spinner=new JS.Class("Spinner",t.View,{initNode:function(u,l){this.lateAttrs=["spinColor"];l.visible??(l.visible=!1);l.borderWidth??(l.borderWidth=5);l.borderColor??(l.borderColor="#fff");l.borderStyle??(l.borderStyle="solid");l.spinColor??(l.spinColor="#000");this.callSuper(u,l);this.getIDS().borderRadius="50%";w(this);
x(this)},setSize:function(u){this.size!==u&&(this.size=u,this.inited&&w(this))},setSpinColor:function(u){this.spinColor!==u&&(this.getIDS().borderTopColor=this.spinColor=u,this.inited&&this.fireEvent("spinColor",u))},setBorderWidth:function(u){this.borderWidth!==u&&(this.callSuper(u),this.inited&&w(this))},setVisible:function(u){this.visible!==u&&(this.callSuper(u),this.inited&&x(this))}})})(myt);
(t=>{const x=" fa-lg fa-2x fa-3x fa-4x fa-5x".split(" "),w=d=>{if(Array.isArray(d)){let c=d.length;if(0<c){d.unshift("fa");c++;d[1].startsWith("fa-")||(d[1]="fa-"+d[1]);3<=c&&(d[2]=x[d[2]]??"");if(3<c)for(let h=3;c>h;h++)d[h].startsWith("fa-")||(d[h]="fa-"+d[h]);return'<i class="'+d.join(" ")+'"></i>'}}t.dumpStack("Error making tag");console.error(d);return""},u=d=>{let c=d.properties;c=c?"string"===typeof c?c.split(" "):c.slice():[];c.unshift(d.icon,d.size);d.setHtml(w(c))},l=d=>{for(const c of["Free 400",
"Free 900","Brands 400"])t.registerForFontNotification(d,"Font Awesome 5 "+c)};t.FontAwesome=new JS.Class("FontAwesome",t.Markup,{extend:{makeTag:w,registerForNotification:l},initNode:function(d,c){this.size=0;this.icon="";this.callSuper(d,c);u(this);l(this)},setIcon:function(d){const c=this.icon;this.set("icon",d,!0);this.inited&&c!==d&&u(this)},setSize:function(d){const c=this.size;this.set("size",d,!0);this.inited&&c!==d&&u(this)},setProperties:function(d){this.properties=d;this.fireEvent("properties",
d);this.inited&&u(this)}});t.loadCSSFonts(["https://use.fontawesome.com/releases/v5.15.4/css/all.css"])})(myt);
(t=>{let x,w,u,l,d=0,c=0,h=0,m=255,a=[],e,f,g,b,p,n,q,r,z,E,G,L,J,N,y,k,v,A,B,D,H,K,Q,S,M,V;const ea=JS.Class,{View:T,Text:la,ModalPanel:ba,SizeToChildren:va,SpacedLayout:Ba,WrappingLayout:Ca,SelectionManager:Da,Color:qa,LocalStorage:Ea,Button:wa,TextButton:na,Draggable:Fa,FontAwesome:{makeTag:oa}}=t,{min:ha,max:ia}=Math,ma=[1,"solid","#333"],Ga=[1,"solid","#999"],xa=[1,"solid","#fff"],Ka=new ea("DialogButton",na,{initNode:function(C,F){F.height??(F.height=17);F.paddingTop??(F.paddingTop=3);F.paddingLeft??
(F.paddingLeft=10);F.paddingRight??(F.paddingRight=10);F.activeColor??(F.activeColor="#bbb");F.hoverColor??(F.hoverColor="#ddd");F.readyColor??(F.readyColor="#ccc");F.domClass="mytButtonText";this.callSuper(C,F)}}),La=oa(["check"]),Ia=C=>{for(let F of C)7===F?.length&&(F+="ff"),Ha[F]=!0},Ha={},Ma=new ea("Swatch",T,{include:[wa],initNode:function(C,F){const I=F.width=F.height=16;F.border=Ga;F.domClass="mytCheckerboardPattern";const O=F.bgColor;this.callSuper(C,F);this.colorView=new T(this,{width:I,
height:I,bgColor:O});O===l&&(C=qa.makeColorFromHexString(l),new la(this,{x:2,y:2,text:La,fontSize:"12px",textColor:382.5>C.red+C.green+C.blue?"#fff":"#000"}))},setBgColor:function(C){this.colorView?.setBgColor(C);this.setTooltip(C)},doActivated:function(){x.setColor(this.colorView.bgColor)},drawHoverState:function(){this.setBorder(ma)},drawReadyState:function(){this.setBorder(Ga)}}),Na=t.ColorPicker=new ea("ColorPicker",T,{initNode:function(C,F){x=this;x._isReady=!1;let I=F.color??"transparent";delete F.color;
u=F.alphaChannel??!1;delete F.alphaChannel;e=F.palette??[];Ia(e);delete F.palette;w="transparent"===I;x.callSuper(C,F);f=new T(x,{width:160,height:170});new Ca(f,{spacing:4,lineSpacing:4});g=new T(x,{x:170,width:139,height:139,border:ma},[Fa,{requestDragPosition:function(O,P){g.callSuper(g.x,g.y);const U=this.getPagePosition();c=parseFloat(ia(0,ha(1,(O+this.dragInitX-U.x)/this.width)));h=parseFloat(1-ia(0,ha(1,(P+this.dragInitY-U.y)/this.height)));w=!1;x.updateUI()}}]);C=new T(g,{width:139,height:139});
F=new T(C,{width:139,height:139});C.getIDS().backgroundImage="linear-gradient(to right, #fff, rgba(204, 154, 129, 0))";F.getIDS().backgroundImage="linear-gradient(to top, #000, rgba(204, 154, 129, 0))";b=new T(F,{width:6,height:6,bgColor:"#000",border:xa,roundedCorners:4});p=new T(x,{x:315,y:30,width:24,height:109,border:ma},[Fa,{requestDragPosition:function(O,P){this.callSuper(p.x,p.y);d=parseFloat(ia(0,ha(1,(P+this.dragInitY-this.getPagePosition().y)/this.height)));w=!1;x.updateUI()}}]);p.getIDS().background=
"linear-gradient(to top, #f00 0%, #f0f 17%, #00f 33%, #0ff 50%, #0f0 67%, #ff0 83%, #f00 100%)";n=new T(p,{x:-1,width:24,height:2,bgColor:"#fff",border:[1,"solid","#000"]});new T(x,{x:315,width:24,height:24,border:ma,tooltip:"Set to transparent.",domClass:"mytCheckerboardPattern"},[wa,{doActivated:()=>{x.setColor("transparent")}}]);C=146;u&&(z=new t.LabelSlider(x,{x:170,y:C,width:171,minValue:0,maxValue:255,flipThreshold:55,labelColor:"#fff"},[{setText:function(O,P){P=O.value;if(null==P||isNaN(P))P=
0;O.value=t.formatAsPercentage(P/255,0);this.callSuper(O,!0);m=P;x._isReady&&(w=!1,x.updateUI())}}]),C+=23);q=new t.InputText(x,{x:236,y:C,width:105,height:25,roundedCorners:3,textColor:"#333",border:ma,maxLength:11,fontFamily:"monospace"});x.attachToDom(q,"_submitInput","blur");x.attachToDom(q,"_handleKeyDown","keydown");q.getIDS().paddingLeft="6px";C=new T(x,{x:170,y:C,width:60,height:23,border:ma,domClass:"mytCheckerboardPattern"});new T(C,{width:30,height:23,focusIndicator:!1,bgColor:I},[wa,{doActivated:()=>
{x.setColor(I)}}]);r=new T(C,{x:30,width:30,height:23});if(C=Ea.getItem("myt.default"))a=C.split(";"),Ia(a);x.setColor(I);x._isReady=!0},_handleKeyDown:C=>{t.KeyObservable.isEnterKeyEvent(C)&&x._submitInput()},_submitInput:()=>{x.setColor(q.value)},addToPalette:C=>{C&&"transparent"!==C&&!Ha[C]&&(a.unshift(C),a.length=ha(a.length,56),Ea.setItem("myt.default",a.join(";")))},setColor:C=>{const F=C&&"transparent"!==C;if(u){let I="ff";F&&7<C.length&&(I=C.slice(7,9),C=C.slice(0,7));z.setValue(parseInt(I,
16))}else F&&7<C.length&&(C=C.slice(0,7));F?(C=qa.makeColorFromHexString(C).getHSV(),d=C.h/360,c=C.s,h=C.v,w=!1):w=!0;x.updateUI()},getColor:()=>{if(w)return"transparent";let C="";u&&(C=m.toString(16),2>C.length&&(C="0"+C));return qa.makeColorFromHSV(360*d,100*c,100*h).getHtmlHexString()+C},updateUI:()=>{const C=!w;n.setVisible(C);b.setVisible(C);C&&(b.setX(ia(0,ha(1,c)*(g.width+2))-5),b.setY(ia(0,ha(1,1-h)*(g.height+2))-5),n.setY(d*(p.height-2)-1));g.setBgColor(qa.makeColorFromHSV(360*d,100,100).getHtmlHexString());
l=x.getColor();q.setValue(l);r.setBgColor(l);x.redrawPalette()},redrawPalette:t.debounce(()=>{f.destroyAllSubviews();const C=new Set;e.push(...a);for(let F of e)if(u||7===F.length)7===F.length&&(F+="ff"),C.has(F)||(new Ma(f,{bgColor:F}),C.add(F))},50)}),ya=C=>{C=C.split(":");return[ia(0,ha(23,parseInt(C[0]))),ia(0,ha(60,parseInt(C[1])))]},Ja=new ea("SelectableBtn",na,{include:[t.Selectable],setSelected:function(C){this.callSuper(C);this.updateUI()},updateUI:function(){this.callSuper();this.isSelected()?
(this.setBgColor("#666"),this.setTextColor("#fff")):this.setTextColor()}}),Oa=new ea("TimeBtn",Ja,{initNode:function(C,F){F.width=J?175:49;this.callSuper(C,F)},doActivated:function(){this.callSuper();const C=this.text,F=ya(C);V.selectById(C);H.setHours(F[0]);H.setMinutes(F[1])}}),Pa=new ea("DayBtn",Ja,{initNode:function(C,F){F.width=23;F.border=xa;this.callSuper(C,F)},setData:function(C){this.data=C},setIsAnotherMonth:function(C){this.isAnotherMonth=C},setIsToday:function(C){this.isToday=C},setIsSunday:function(C){this.isSunday=
C},setIsSaturday:function(C){this.isSaturday=C},updateUI:function(){this.destroyed||(this.callSuper(),this.isSelected()||this.setTextColor(this.isAnotherMonth?"#ccc":this.isSunday?"#d40":this.isSaturday?"#04a":null),this.setBorderColor(this.isToday?"#090":"#fff"))},doActivated:function(){this.callSuper();const C=new Date(this.data);C.setHours(H.getHours());C.setMinutes(H.getMinutes());pa(C)}}),pa=C=>{C.setSeconds(0);C.setMilliseconds(0);var F=6>=y.length,I;if(F)for(I=7;I--&&!y.includes(C.getDay());)C.setDate(C.getDate()+
1);H=C;const O=V.getODE().scrollTop;var P=new Date,U=P.getFullYear(),R=P.getMonth(),W=P.getDate();P.getHours();P.getMinutes();const aa=C.getFullYear(),ca=C.getMonth(),ka=C.getDate();var da=C.getTime();P=C.getHours();C=C.getMinutes();const ra=(new Date(aa,ca,1)).getDay()-N,sa=(new Date(aa,ca+1,0)).getDate(),za=(new Date(aa,ca,0)).getDate(),ta=new Date(aa,ca,0),ua=new Date(aa,ca+2,0);U=U==aa&&R==ca;if(!J){R=M;R.deselectAll();R.destroyAllSubviews();I=new Date(da);const ja=7+N;R=G.days;Q.setText(aa+" "+
G.sep+" "+G.months[ca]);I.setMinutes(59);I.setHours(23);I.setSeconds(59);I.setDate(0);K.setVisible(null==k||k<I.getTime());I.setMinutes(0);I.setHours(0);I.setSeconds(0);I.setDate(1);I.setMonth(ca+1);S.setVisible(null==v||v>I.getTime());for(I=0;7>I;I++)new la(M,{width:23,height:20,textAlign:"center",text:R[(I+ja)%7],textColor:"#999"});I=0;let fa=42;0>ra&&(I=-7,fa=35);R=new Date(da);R.setHours(0);R.setMinutes(0);for(R.setSeconds(0);I<fa;I++){var X=I+1-ra;const Aa=(I+ja)%7,Y=new Pa(M);ra>I?(Y.setText(za+
X),Y.setData(ta.getFullYear()+"/"+(ta.getMonth()+1)+"/"+(za+X)),Y.setIsAnotherMonth(!0),R.setDate(za+X),R.setMonth(ta.getMonth()),R.setYear(ta.getFullYear())):I<ra+sa?(Y.setText(X),Y.setData(aa+"/"+(ca+1)+"/"+X),R.setDate(X),R.setMonth(ca),R.setYear(aa)):(Y.setText(X-sa),Y.setData(ua.getFullYear()+"/"+(ua.getMonth()+1)+"/"+(X-sa)),Y.setIsAnotherMonth(!0),R.setDate(X-sa),R.setMonth(ua.getMonth()),R.setYear(ua.getFullYear()));F&&!y.includes(Aa)?Y.setDisabled(!0):(0===Aa?Y.setIsSunday(!0):6===Aa&&Y.setIsSaturday(!0),
X===ka&&(M.select(Y),Y.focus()),U&&X===W&&Y.setIsToday(!0),X=new Date(R.getTime()),X.setHours(23),X.setMinutes(59),X.setSeconds(59),(null!=k&&k>X.getTime()||null!=v&&v<R.getTime())&&Y.setDisabled(!0));Y.updateUI()}}if(!L){F=60*B[0]+B[1];W=V;W.deselectAll();W.destroyAllSubviews();let [ja,fa]=A;for(R=new Date(da);60*ja+fa<F;)da=new Oa(V,{text:("0"+ja).slice(-2)+":"+("0"+fa).slice(-2)}),ja===P&&fa===C&&V.select(da),R.setHours(ja),R.setMinutes(fa),W=R.getTime(),(null!=k&&k>W||null!=v&&v<W)&&da.setDisabled(!0),
fa+=D,60<=fa&&(fa-=60,ja++);V.scrollYTo(O)}},Qa=t.DatePicker=new ea("DatePicker",T,{initNode:function(C,F){E=this;const I={current:null,dateOnly:!1,timeOnly:!1,locales:null,locale:"",minuteInterval:30,firstDayOfWeek:0,showTodayButton:!0,minDate:null,maxDate:null,minTime:"00:00",maxTime:"23:59",allowedDays:null,...F.opt};delete F.opt;E.callSuper(C,F);G=I.locales[I.locale??"en"];L=I.dateOnly;J=I.timeOnly;N=I.firstDayOfWeek;D=ia(5,ha(30,I.minuteInterval));y=I.allowedDays;Array.isArray(y)&&0!==y.length||
(y=[0,1,2,3,4,5,6]);k=Date.parse(I.minDate);k=isNaN(k)?null:k;v=Date.parse(I.maxDate);v=isNaN(v)?null:v;A=ya(I.minTime);B=ya(I.maxTime);C=new T(E,{visible:!J});I.showTodayButton&&new na(C,{width:24,text:oa(["home"]),tooltip:G.today},[{doActivated:()=>{pa(new Date)}}]);K=new na(C,{width:24,x:28,text:oa(["chevron-left"]),tooltip:G.prevMonth},[{doActivated:()=>{const O=(new Date(H.getFullYear(),H.getMonth(),0)).getDate();O<H.getDate()&&H.setDate(O);H.setMonth(H.getMonth()-1);pa(H);K.focus()}}]);Q=new la(C,
{width:100,x:52,textAlign:"center"});S=new na(C,{width:24,x:152,text:oa(["chevron-right"]),tooltip:G.nextMonth},[{doActivated:()=>{var O=(new Date(H.getFullYear(),H.getMonth()+1,0)).getDate();O<H.getDate()&&H.setDate(O);O=(new Date(H.getFullYear(),H.getMonth()+2,0)).getDate();O<H.getDate()&&H.setDate(O);H.setMonth(H.getMonth()+1);pa(H);S.focus()}}]);M=new T(E,{y:25,width:175,height:175,visible:!J,maxSelected:1,itemSelectionId:"data"},[Da]);new Ca(M,{spacing:2,lineInset:2,lineSpacing:3});V=new T(E,
{x:J?0:195,y:J?0:25,width:(J?175:49)+t.DomElementProxy.getScrollbarSize(),height:J?200:175,overflow:"autoy",visible:!L,maxSelected:1,itemSelectionId:"text"},[Da]);new Ba(V,{axis:"y",inset:1,spacing:3});E.setWidth(V.visible?V.x+V.width:M.width);pa(I.current??new Date)},getPickedDate:()=>H}),Z=t.Dialog=new ea("Dialog",ba,{extend:{RADIUS:12,BUTTON_CLASS:Ka,SHADOW:[0,4,20,"#666"],BORDER:xa,BGCOLOR:"#fff",WRAP_TEXT_DEFAULTS:{width:200,fontWeight:"bold",whiteSpace:"normal",wordWrap:"break-word"},NO_WRAP_TEXT_DEFAULTS:{width:"auto",
fontWeight:"bold",whiteSpace:"nowrap",wordWrap:"break-word"},CONFIRM_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Confirm",maxContainerHeight:300,showClose:!1},COLOR_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Color",color:"#000000",alphaChannel:!1},DATE_PICKER_DEFAULTS:{cancelTxt:"Cancel",confirmTxt:"Choose",titleText:"Choose a Date",timeOnlyTitleText:"Choose a Time",color:"#000",locales:{en:{days:"Su Mo Tu We Th Fr Sa".split(" "),months:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
sep:"-",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"}},locale:"en"}},initNode:function(C,F){F.buttonClass??(F.buttonClass=Z.BUTTON_CLASS);this.callSuper(C,F);C=this.content;C.setRoundedCorners(Z.RADIUS);C.setBgColor(Z.BGCOLOR);C.setBoxShadow(Z.SHADOW);C.setBorder(Z.BORDER);C.setFocusCage(!0);this.makeCloseButton(C)},setButtonClass:function(C){this.buttonClass=C},setCallbackFunction:function(C){this.callbackFunction=C},makeButton:function(C,F){const I=this;return new I.buttonClass(C,
F,[{doActivated:function(){I.doCallback(this)}}])},makeCloseButton:function(C){return C.closeBtn=this.makeButton(C,{ignoreLayout:!0,y:2,align:"right",alignOffset:2,width:19,height:16,paddingLeft:0,paddingRight:0,roundedCorners:10,activeColor:"#c00",hoverColor:"#f33",readyColor:"#f00",textColor:"#fff",text:oa(["times"]),tooltip:"Close Dialog."})},hide:function(C){this.spinner&&(this.spinner.setVisible(!1),this.spinner=void 0);this.callSuper(C)},destroyContent:function(){this.spinner&&(this.spinner.setVisible(!1),
this.spinner=void 0);const C=this.content,F=C.sizeToChildren;C.destroyAllSubviews(I=>"closeBtn"!==I.name);C.setVisible(!0);this.overlay.setBgColor(t.Dimmer.COLOR);this.setCallbackFunction();F.setPaddingY(ba.PADDING_Y);F.setPaddingX(ba.PADDING_X);C.setRoundedCorners(Z.RADIUS);C.setBgColor(Z.BGCOLOR);C.setBoxShadow(Z.SHADOW);C.setBorder(Z.BORDER)},doCallback:function(C){const F=this.callbackFunction;F&&F.call(this,C.name)||this.hide()},showBlank:function(C){this.destroyContent();this.content.setVisible(!1);
C?.bgColor&&this.overlay.setBgColor(C.bgColor);this.show()},showMessage:function(C,F,I){const O=this.content,P=O.closeBtn;I={...Z.WRAP_TEXT_DEFAULTS,...I};this.destroyContent();this.setCallbackFunction(F);C=O.msg=new la(O,{text:C,whiteSpace:I.whiteSpace,wordWrap:I.wordWrap,fontWeight:I.fontWeight,x:null==I.msgX?ba.PADDING_X:I.msgX,y:null==I.msgY?ba.PADDING_Y:I.msgY,width:I.width});I.titleText&&(this.setupTitle(O,I.titleText),C.setY(C.y+24));this.show();!1===I.showClose?P.setVisible(!1):(P.setVisible(!0),
P.focus())},showSimple:function(C,F,I,O){I=I??{};const P=this.content,U=P.closeBtn,R=I.maxContainerHeight;this.destroyContent();I.bgColor&&P.setBgColor(I.bgColor);I.roundedCorners&&P.setRoundedCorners(I.roundedCorners);I.boxShadow&&P.setBoxShadow(I.boxShadow);I.border&&P.setBorder(I.border);P.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=P.contentContainer=new T(P,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){W>R&&(W=R);this.callSuper(W)}}]);C.call(this,F);new va(F,{axis:"both"});
this.show();U.setVisible(!0);U.focus();I.titleText&&(this.setupTitle(P,I.titleText),F.setY(this.header.height+1));F.initialFocus?.focus();O?.(this)},showConfirm:function(C,F,I){I={...Z.CONFIRM_DEFAULTS,...I};this.showMessage(C,F,I);this.setupFooterButtons(this.content.msg,I)},showContentConfirm:function(C,F,I,O){I={...Z.CONFIRM_DEFAULTS,...I};const P=this.content,U=P.closeBtn,R=I.maxContainerHeight;this.destroyContent();P.sizeToChildren.setPaddingX(1);this.setCallbackFunction(F);F=P.contentContainer=
new T(P,{x:1,y:25,overflow:"auto"},[{setHeight:function(W){this.callSuper(W>R?R:W)}}]);C.call(this,F);new va(F,{axis:"both"});this.show();U.setVisible(!0);U.focus();this.setupTitle(P,I.titleText);F.setY(this.header.height+1);this.setupFooterButtons(F,I);F.initialFocus?.focus();O?.(this)},showSpinner:function(C,F){const I=this.content;F={...Z.NO_WRAP_TEXT_DEFAULTS,...F};this.destroyContent();const O=this.spinner=new t.Spinner(I,{align:"center",visible:!0,borderColor:"#ccc",size:50,y:null==F.msgY?ba.PADDING_Y:
F.msgY});C&&new la(I,{text:C,whiteSpace:F.whiteSpace,wordWrap:F.wordWrap,fontWeight:F.fontWeight,x:null==F.msgX?ba.PADDING_X:F.msgX,y:O.y+O.size+ba.PADDING_Y,width:F.width});this.show();I.closeBtn.setVisible(!1);this.focus()},showColorPicker:function(C,F){const I=this,O=I.content,P=O.closeBtn;F={...Z.COLOR_PICKER_DEFAULTS,...F};I.destroyContent();I.setCallbackFunction(U=>{switch(U){case "closeBtn":case "cancelBtn":C.call(I,U);break;case "confirmBtn":const R=x.getColor();x.addToPalette(R);C.call(I,
U,R)}x.destroy()});x=new Na(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,width:337,height:177+(F.alphaChannel?23:0),color:F.color,alphaChannel:F.alphaChannel,palette:"#000000 #111111 #222222 #333333 #444444 #555555 #666666 #777777 #888888 #999999 #aaaaaa #bbbbbb #cccccc #dddddd #eeeeee #ffffff".split(" ")});I.show();P.setVisible(!0);P.focus();I.setupFooterButtons(x,F);I.setupTitle(O,F.titleText)},showDatePicker:function(C,F){const I=this,O=I.content,P=O.closeBtn;F={...Z.DATE_PICKER_DEFAULTS,...F};I.destroyContent();
I.setCallbackFunction(U=>{switch(U){case "closeBtn":case "cancelBtn":C.call(I,U);break;case "confirmBtn":C.call(I,U,E.getPickedDate())}E.destroy()});E=new Qa(O,{x:ba.PADDING_X,y:ba.PADDING_Y+24,height:195,opt:{current:new Date(F.initialDate??Date.now()),dateOnly:F.dateOnly||!1,timeOnly:F.timeOnly||!1,locales:F.locales,locale:F.locale}});I.show();P.setVisible(!0);P.focus();I.setupFooterButtons(E,F);I.setupTitle(O,F.timeOnly?F.timeOnlyTitleText:F.titleText)},setupTitle:function(C,F){const I=Z.RADIUS;
(this.header=new T(C,{ignoreLayout:!0,width:C.width,height:24,bgColor:"#eee",roundedTopLeftCorner:I,roundedTopRightCorner:I})).sendToBack();C.title=new la(C,{x:I,y:4,text:F,fontWeight:"bold"})},setupFooterButtons:function(C,F){const I=this.content;var O=ba.PADDING_Y,P=O/2;C=I.btnContainer=new T(I,{y:C.y+C.height+O,align:"center"});const U=["active","hover","ready","text"];O=F.cancelAttrs??{};var R;(R=O).name??(R.name="cancelBtn");let W;(W=O).text??(W.text=F.cancelTxt);for(let da of U)da+="Color",
null!=F[da]&&(O[da]=F[da]);R=this.makeButton(C,O);O=F.confirmAttrs??{};var aa;(aa=O).name??(aa.name="confirmBtn");let ca;(ca=O).text??(ca.text=F.confirmTxt);for(var ka of U)ka+="Color",aa=ka+"Confirm",null!=F[aa]&&(O[ka]=F[aa]);this.makeButton(C,O);if(ka=F.button)for(const da of ka)this.makeButton(C,da);new va(C,{axis:"y"});new Ba(C,{spacing:4,collapseParent:!0});I.sizeToChildren.setPaddingY(P);P=C.y-P;(new T(I,{ignoreLayout:!0,y:P,width:I.width,height:I.height-P,bgColor:"#eee"})).sendToBack();!1===
F.showClose&&R.focus()}})})(myt);
(t=>{const x=JS.Class,w=t.dumpStack,u={},l=(f,g)=>{if(f){const b=f.id;f.id?g(b):w("No ID")}else w("No validator")},d=f=>{l(f,g=>{u[g]=f})},c=t.Validator=new x("Validator",{initialize:function(f){this.id=f},isValid:(f,g,b)=>!0,isFormValid:function(f,g,b){g??={};g.form=f;return this.isValid(f.getValue(),g,b)}}),h=t.RequiredFieldValidator=new x("RequiredFieldValidator",c,{isValid:(f,g,b)=>null==f||""===f||"string"===typeof f&&""===f.trim()?(b?.push("This value is required."),!1):!0}),m=t.EqualsIgnoreCaseValidator=
new x("EqualsIgnoreCaseValidator",c,{isValid:(f,g,b)=>{g=g.form.getRollbackValue();return f&&g&&f.toLowerCase()===g.toLowerCase()?(b?.push("Value must differ by more than just case."),!1):!0}}),a=t.URLValidator=new x("URLValidator",c,{initialize:function(f,g){this.callSuper(f);this.originalRawQuery=g},isValid:function(f,g,b){return(new t.URI(f)).toString(this.originalRawQuery)!==f?(b?.push("Invalid URL."),!1):!0}}),e=t.JSONValidator=new x("JSONValidator",c,{isValid:(f,g,b)=>{try{return JSON.parse(f),
!0}catch(p){return b?.push(p),!1}}});t.EqualFieldsValidator=new x("EqualFieldsValidator",c,{initialize:function(f,g,b){this.callSuper(f);this.fieldA=g;this.fieldB=b},isValid:function(f,g,b){if(f&&this.fieldA.getValue()===this.fieldB.getValue())return!0;b?.push('The field "'+this.fieldA.key+'" must be equal to the field "'+this.fieldB.key+'".');return!1}});t.LengthValidator=new x("LengthValidator",c,{initialize:function(f,g,b){this.callSuper(f);this.min=g;this.max=b},isValid:function(f,g,b){f=f?f.length:
0;g=this.min;const p=this.max;return void 0!==g&&g>f?(b?.push("The value must not be less than "+g+" characters long."),!1):void 0!==p&&p<f?(b?.push("The value must not be greater than "+p+" characters long."),!1):!0}});t.NumericRangeValidator=new x("NumericRangeValidator",c,{initialize:function(f,g,b){this.callSuper(f);this.min=g;this.max=b},isValid:function(f,g,b){if(""===f)return!0;f=Number(f);g=this.min;const p=this.max;return isNaN(f)?(b?.push("Value is not a number."),!1):void 0!==g&&g>f?(b?.push("Value must not be less than "+
g+"."),!1):void 0!==p&&p<f?(b?.push("Value must not be greater than "+p+"."),!1):!0}});t.CompoundValidator=new x("CompoundValidator",c,{initialize:function(f,...g){this.callSuper(f);for(f=g.length;f;){let b=g[--f];"string"===typeof b&&((g[f]=b=u[b])||g.splice(f,1))}this.__v=g},addValidator:function(f){"string"===typeof f&&(f=u[f]);f&&this.__v.push(f)},isValid:function(f,g,b){const p=this.__v,n=p.length;let q=!0,r=0;for(;n>r;)q=p[r++].isValid(f,g,b)&&q;return q}});new JS.Singleton("GlobalValidatorRegistry",
{initialize:function(){d(new h("required"));d(new m("equalsIgnoreCase"));d(new a("url"));d(new e("json"));t.global.register("validators",this)},getValidator:f=>u[f],register:d,unregister:f=>{l(f,g=>{u[g]&&delete u[g]})}})})(myt);
(t=>{const x=JS.Class,{min:w,max:u,round:l,abs:d}=Math,c=t.View,h=new x("SliderThumb",t.SimpleButton,{include:[t.Draggable,t.ArrowKeyActivation],initNode:function(a,e){const f=e.width=a.thumbWidth,g=e.height=a.thumbHeight;e.roundedCorners=w(g,f)/2;e.repeatKeyDown=!0;e.activationKeys=t.global.keys.ARROW_KEYS;e.activeColor="#bbb";e.readyColor="#ccc";e.hoverColor="#ddd";e.boxShadow=[0,0,4,"#666"];this.callSuper(a,e);this["x"===a.axis?"setY":"setX"](a.thumbOffset);this.syncTo(a,"setDisabled","disabled");
a._syncThumbToValue(this,a.getValue())},setDisabled:function(a){this.callSuper(this.valueFromEvent(a))},setFocused:function(a){this.callSuper(a);a&&this.makeHighestZIndex()},setX:function(a){this.x!==a&&(this.callSuper(a),a=this.parent,"x"===a.axis&&a.syncValueToThumb(this))},setY:function(a){this.y!==a&&(this.callSuper(a),a=this.parent,"y"===a.axis&&a.syncValueToThumb(this))},requestDragPosition:function(a,e){if(!this.disabled){const f=this.parent,g=f.getMinPixelValueForThumb(this),b=f.getMaxPixelValueForThumb(this),
p=f.snapThreshold;let n;"x"===f.axis?(n=this.width/2,e="setX"):(n=this.height/2,a=e,e="setY");if(f.allowSnap(this))for(let q of f.getSnapValuesAsPx())if(q-=n,d(a-q)<=p){a=q;break}this[e](w(u(a,g-n),b-n))}},doKeyArrowLeftOrUp:function(a,e){a?this.parent.nudgeValueLeft(this):this.parent.nudgeValueUp(this);return!0},doKeyArrowRightOrDown:function(a,e){a?this.parent.nudgeValueRight(this):this.parent.nudgeValueDown(this);return!0}}),m=t.BaseSlider=new x("BaseSlider",c,{include:[t.Disableable],initNode:function(a,
e){e.axis??(e.axis="x");"x"===e.axis?(e.width??(e.width=100),e.height??(e.height=18)):(e.width??(e.width=18),e.height??(e.height=100));e.bgColor??(e.bgColor="#999");e.roundedCorners??(e.roundedCorners=9);e.trackInset??(e.trackInset=9);e.trackOutset??(e.trackOutset=9);e.thumbWidth??(e.thumbWidth=16);e.thumbHeight??(e.thumbHeight=16);e.thumbOffset??(e.thumbOffset=1);e.nudgeAmount??(e.nudgeAmount=1);e.snapThreshold??(e.snapThreshold=8);e.snapValues??(e.snapValues=[]);this.callSuper(a,e)},setAxis:function(a){this.axis=
a},setTrackInset:function(a){this.trackInset=a},setTrackOutset:function(a){this.trackOutset=a},setThumbWidth:function(a){this.thumbWidth=a},setThumbHeight:function(a){this.thumbHeight=a},setThumbOffset:function(a){this.thumbOffset=a},setNudgeAmount:function(a){this.nudgeAmount=a},setSnapThreshold:function(a){this.snapThreshold=a},setSnapValues:function(a){this.snapValues=a},getSnapValuesAsPx:function(){const a=[];for(const e of this.snapValues)a.push(this.convertValueToPixels(e));return a},allowSnap:function(a){var e=
a.__lastMousePosition;const f=t.DomElementProxy.getRelativePosition(a.getODE()),g="x"===this.axis;a=g?a.height:a.width;e=g?e.y-f.y:e.x-f.x;return 0<e&&e<a},convertValueToPixels:function(a){const e=this.minValue,f=this.trackInset;return f+(("x"===this.axis?this.width:this.height)-f-this.trackOutset)/(this.maxValue-e)*(a-e)},convertPixelsToValue:function(a){const e=this.minValue,f=this.trackInset;return(this.maxValue-e)/(("x"===this.axis?this.width:this.height)-f-this.trackOutset)*(a-f)+e},nudgeValueLeft:function(a){this._nudge(a,
!1)},nudgeValueUp:function(a){this._nudge(a,!1)},nudgeValueRight:function(a){this._nudge(a,!0)},nudgeValueDown:function(a){this._nudge(a,!0)},_nudge:(a,e)=>{},_syncThumbToValue:function(a,e){e=this.convertValueToPixels(e);"x"===this.axis?a.setX(e-a.width/2):a.setY(e-a.height/2)},syncValueToThumb:function(a){this.inited&&!this.__lockSync&&(this.__lockSync=!0,this._syncValueToThumb(a,this.convertPixelsToValue("x"===this.axis?a.x+a.width/2:a.y+a.height/2)),this.__lockSync=!1)},_syncValueToThumb:(a,e)=>
{},getMinPixelValueForThumb:function(a){return this.convertValueToPixels(this.minValue)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels(this.maxValue)}});t.RangeSlider=new x("RangeSlider",m,{include:[t.BoundedRangeComponent],initNode:function(a,e){this.callSuper(a,e);a=this.rangeFill=new c(this,{bgColor:"#666"});"x"===this.axis?(a.setY(this.thumbOffset),a.setHeight(this.thumbHeight),a.setRoundedCorners(this.thumbHeight/2)):(a.setX(this.thumbOffset),a.setWidth(this.thumbWidth),
a.setRoundedCorners(this.thumbWidth/2));this.thumbLower=new h(this);this.thumbUpper=new h(this);this._syncRangeFillToValue()},setValue:function(a){this.callSuper(a);this.inited&&(this.__lockSync||(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,a)),this._syncRangeFillToValue())},setWidth:function(a){const e=this.width;this.callSuper(a);this.inited&&"x"===this.axis&&this.width!==e&&(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,
a))},setHeight:function(a){const e=this.height;this.callSuper(a);this.inited&&"y"===this.axis&&this.height!==e&&(a=this.getValue(),this._syncThumbToValue(this.thumbLower,a),this._syncThumbToValue(this.thumbUpper,a))},_syncRangeFillToValue:function(){const a=this.rangeFill;var e=this.getValue();const f=this.convertValueToPixels(e.lower);e=this.convertValueToPixels(e.upper)-f;"x"===this.axis?(a.setX(f),a.setWidth(e)):(a.setY(f),a.setHeight(e))},_syncThumbToValue:function(a,e){this.callSuper(a,"thumbLower"===
a.name?e.lower:e.upper)},_syncValueToThumb:function(a,e){let f=this.getValueCopy();f["thumbLower"===a.name?"lower":"upper"]=e;this.setValue(f);f=this.getValue();this.thumbLower&&this._syncThumbToValue(this.thumbLower,f);this.thumbUpper&&this._syncThumbToValue(this.thumbUpper,f)},_nudge:function(a,e){const f=this.getValueCopy();e=this.nudgeAmount*(e?1:-1);"thumbLower"===a.name?f.lower=w(f.lower+e,f.upper):f.upper=u(f.upper+e,f.lower);this.setValue(f)},getMinPixelValueForThumb:function(a){return this.convertValueToPixels("thumbLower"===
a.name?this.minValue:this.getValue().lower)},getMaxPixelValueForThumb:function(a){return this.convertValueToPixels("thumbLower"===a.name?this.getValue().upper:this.maxValue)}});t.Slider=new x("Slider",m,{include:[t.BoundedValueComponent],initNode:function(a,e){this.callSuper(a,e);this.thumb=new h(this)},setValue:function(a){this.callSuper(a);this.inited&&!this.__lockSync&&this._syncThumbToValue(this.thumb,this.getValue())},setWidth:function(a){const e=this.width;this.callSuper(a);this.inited&&"x"===
this.axis&&this.width!==e&&this._syncThumbToValue(this.thumb,this.getValue())},setHeight:function(a){const e=this.height;this.callSuper(a);this.inited&&"y"===this.axis&&this.height!==e&&this._syncThumbToValue(this.thumb,this.getValue())},_syncValueToThumb:function(a,e){this.setValue(e);this._syncThumbToValue(a,this.getValue())},_nudge:function(a,e){this.setValue(this.getValue()+this.nudgeAmount*(e?1:-1))}});t.LabelSlider=new x("LabelSlider",t.Slider,{initNode:function(a,e){const f=this;e.labelX??
(e.labelX=8);e.labelY??(e.labelY=2);e.labelFontSize??(e.labelFontSize="12px");e.labelColor??(e.labelColor="#000");e.flipThreshold??(e.flipThreshold=l((e.maxValue-e.minValue)/2)||0);f.quickSet(["labelX","labelY","labelFontSize","labelColor","flipThreshold"],e);f.callSuper(a,e);const g=f.labelX;f.labelTxt=new t.Text(f,{x:g,y:f.labelY,textColor:f.labelColor,fontSize:f.labelFontSize},[{initNode:function(b,p){this.targetX=g;this.callSuper(b,p)},updateX:function(b){const p=f.getValue()>=f.flipThreshold?
g:f.width-this.width-g;this.targetX!==p&&(this.targetX=p,this.stopActiveAnimators("x"),b?this.setX(p):this.animate({attribute:"x",to:p,duration:250}))}}]);f.syncTo(f,"setText","value")},setWidth:function(a){this.callSuper(a);this.labelTxt?.updateX(!0)},setText:function(a,e){const f=this.labelTxt;f&&(f.setText(a.value),f.updateX(e))}})})(myt);
(t=>{const x=JS.Class,{abs:w,min:u}=Math,{CODE_ENTER:l,CODE_SPACE:d,ARROW_KEYS:c}=t.global.keys,h=a=>{const e="y"===a.axis?"height":"width";a.constrain("__limitToParent",[a,"limitToParent",a,e,a.parent,e])};var m=t.NudgeMixin=new JS.Module("NudgeMixin",{initNode:function(a,e){e.nudgeTargetValue??(e.nudgeTargetValue="value");e.nudgeIncrement??(e.nudgeIncrement=1);e.nudgeMin??(e.nudgeMin=1);e.nudgeMax??(e.nudgeMax=64);this.__nudgeAcc=e.nudgeMin;this.callSuper(a,e)},setNudgeIncrement:function(a){this.set("nudgeIncrement",
w(a),!0)},setNudgeMin:function(a){this.set("nudgeMin",w(a),!0)},setNudgeMax:function(a){this.set("nudgeMax",w(a),!0)},setNudgeTargetValue:function(a){this.set("nudgeTargetValue",a,!0)},nudge:function(a,e){const f=this.nudgeTargetValue;e=this.__nudgeAcc=e?u(this.__nudgeAcc+this.nudgeIncrement,this.nudgeMax):this.nudgeMin;this.set(f,(this.get(f)||0)+(a?1:-1)*e);return!0}});m=new x("BaseDivider",t.SimpleButton,{include:[t.BoundedValueComponent,t.Draggable,t.ArrowKeyActivation,m],initNode:function(a,
e){e.activeColor??(e.activeColor="#bbb");e.hoverColor??(e.hoverColor="#ddd");e.readyColor??(e.readyColor="#ccc");e.axis??(e.axis="x");e.minValue??(e.minValue=0);e.value??(e.value=e.minValue);e.expansionState??(e.expansionState=2);e.focusIndicator??(e.focusIndicator=!1);e.repeatKeyDown??(e.repeatKeyDown=!0);e.activationKeys??(e.activationKeys=[l,d,...c]);"y"===e.axis?(e.height??(e.height=6),e.cursor??(e.cursor="row-resize")):(e.width??(e.width=6),e.cursor??(e.cursor="col-resize"));this.quickSet(["axis"],
e);this.callSuper(a,e);null==e.restoreValue&&this.setRestoreValue(this.value);null!=this.limitToParent&&h(this);this.attachDomObserver(this,"doPrimaryAction","dblclick")},setExpansionState:function(a){this.expansionState=a},setRestoreValue:function(a){this.restoreValue=a},setLimitToParent:function(a){this.limitToParent!==a&&(this.limitToParent=a,this.inited&&(this.fireEvent("limitToParent",a),null==a?this.releaseConstraint("__limitToParent"):h(this)))},setAxis:function(a){this.inited?console.warn("Axis not updatable after instantiation"):
this.axis=a},setValue:function(a){this.callSuper(a);a=this.value;"y"===this.axis?this.setY(a):this.setX(a)},__limitToParent:function(a){a="y"===this.axis?"height":"width";this.setMaxValue(this.parent[a]-this.limitToParent-this[a])},doActivationKeyDown:function(a,e){this.callSuper(a,e);switch(a){case l:case d:this.doPrimaryAction()}},doKeyArrowLeftOrUp:function(a,e){return this.nudge(!1,e)},doKeyArrowRightOrDown:function(a,e){return this.nudge(!0,e)},nudge:function(a,e){a=this.callSuper(a,e);this.setExpansionState(2);
this.setRestoreValue(this.value);return a},doPrimaryAction:function(){const {restoreValue:a,maxValue:e,minValue:f}=this;let g;switch(this.expansionState){case 0:null!=a&&(this.setExpansionState(1),a===f?a!==e&&this.doPrimaryAction():g=a);break;case 1:null!=e&&(this.setExpansionState(3),this.value===e?this.doPrimaryAction():g=e);break;case 2:null!=f&&(this.setExpansionState(0),this.value===f?this.doPrimaryAction():g=f);break;case 3:null!=a&&(this.setExpansionState(2),a===e?this.doPrimaryAction():g=
a)}this.animateToValue(g)},animateToValue:function(a,e=250){null!=a&&(this.stopActiveAnimators("value"),this.animate({attribute:"value",to:a,duration:e}))},requestDragPosition:function(a,e){this.disabled||(a="y"===this.axis?e:a,e=this.value,a!==e&&(this.setValue(a),this.setRestoreValue(a),this.setExpansionState(e>a?2:1)))}});t.HorizontalDivider=new x("HorizontalDivider",m,{initNode:function(a,e){e.axis="x";this.callSuper(a,e)}});t.VerticalDivider=new x("VerticalDivider",m,{initNode:function(a,e){e.axis=
"y";this.callSuper(a,e)}})})(myt);
(t=>{let x=0;const {Class:w,Module:u}=JS,{min:l,max:d}=Math,{View:c,SpacedLayout:h,Node:{DEFAULT_PLACEMENT:m}}=t,a=y=>{const k=y.columnHeaders,[v,A]=y.sort??["",""];let B=k.length;for(;B;){const D=k[--B];D.columnId===v?D.sortable&&D.setSortState(A):D.setSortState("none")}y.locked||y.doSort()},e=(y,k,v,A)=>{if(0!==k){const K=0<k,Q=[];for(var B=y.length;B;){var D=y[--B];D.resizable&&(v?0<D.flex:0===D.flex)&&Q.push({hdr:D,limit:(K?D.maxValue:D.minValue)-D.value,amt:0})}y=Q.length;if(0<y){for(B=0;0!==
k;){x>=y&&(B=x=0);D=Q[x];var H=D.hdr;D.full?++B:(K?(H=l(v?H.flex:1,k),D.amt+H>D.limit&&(H=D.limit-D.amt,D.full=!0)):(H=d(v?-H.flex:-1,k),D.amt+H<D.limit&&(H=D.limit-D.amt,D.full=!0)),D.amt+=H,k-=H);if(B===y)break;++x}for(const S of Q)S.hdr.setValue(S.hdr.value+S.amt);A?.(k)}}},f=y=>(y=y.gridController?.getPrevHdr(y))?y.maxValue-y.value+f(y):0,g=y=>(y=y.gridController?.getNextHdr(y))?y.maxValue-y.value+g(y):0,b=y=>(y=y.gridController?.getPrevHdr(y))?y.minValue-y.value+b(y):0,p=y=>(y=y.gridController?.getNextHdr(y))?
y.minValue-y.value+p(y):0,n=(y,k)=>{y=y.gridController?.getPrevHdr(y);var v=0;if(y){v=y.value+k;y.resizable&&y.setValue(v);const A=v-y.value;v=k-A;0>A&&(v+=n(y,A))}return v},q=(y,k)=>{y=y.gridController?.getPrevHdr(y);var v=0;if(y){v=y.value+k;y.resizable&&y.setValue(v);const A=v-y.value;v=k-A;0<A&&(v+=q(y,A))}return v},r=(y,k)=>{if(y=y.gridController?.getNextHdr(y))k=y.value+k,y.resizable&&y.setValue(k),k-=y.value,0>k&&r(y,k)},z=(y,k)=>{if(y=y.gridController?.getNextHdr(y))k=y.value+k,y.resizable&&
y.setValue(k),k-=y.value,0<k&&z(y,k)},E=y=>{let k="";if(y.sortable)switch(y.sortState){case "ascending":k="chevron-up";break;case "descending":k="chevron-down"}y.sortIcon.setIcon(k)},G=y=>{const k=y.textView;k?.setWidth(y.width-y.outset-k.x)},L=t.GridController=new u("GridController",{initNode:function(y,k){this.columnHeaders=[];this.rows=[];this.maxWidth=this.minWidth=this.gridWidth=0;this.fitToWidth=this.locked=!0;this.callSuper(y,k);this.fitHeadersToWidth();a(this)},setMaxWidth:function(y){this.set("maxWidth",
y,!0)},setMinWidth:function(y){this.set("minWidth",y,!0)},setFitToWidth:function(y){this.fitToWidth=y},setSort:function(y){t.areArraysEqual(y,this.sort)||(this.sort=y,this.inited&&(this.fireEvent("sort",y),a(this)))},setLastColumn:function(y){const k=this.lastColumn;k!==y&&(k?.setLast(!1),this.lastColumn=y,y?.setLast(!0))},setLocked:function(y){this.locked=y;if(this.inited&&!y){this.__tempLock=!0;this.fitHeadersToWidth();this.__tempLock=!1;this.setMaxWidth(0);this.setMinWidth(0);this.__skipInvisibleHeaders=
!0;for(const k of this.columnHeaders)this.notifyHdrXChange(k),this.notifyHdrWidthChange(k),this.notifyHdrVisibilityChange(k);this.__skipInvisibleHeaders=!1;this.doSort()}},isLocked:function(){return this.locked||this.__tempLock},setGridWidth:function(y){y=this.valueFromEvent(y);this.gridWidth!==y&&(this.gridWidth=y,this.inited&&this.fitHeadersToWidth())},setHdrChangeListener:function(y){this.hdrChangeListener=y},doSort:()=>{},getPrevHdr:function(y){const k=this.columnHeaders;y=this.getHdrIndex(y);
if(0<y)for(;y;){const v=k[--y];if(v.visible)return v}},getNextHdr:function(y){const k=this.columnHeaders,v=k.length;y=this.getHdrIndex(y)+1;if(0<y&&y<v)for(;v>y;){const A=k[y++];if(A.visible)return A}},hasHdr:function(y){return this.columnHeaders.includes(y)},getHdrIndex:function(y){return this.columnHeaders.indexOf(y)},getHdrById:function(y){for(const k of this.columnHeaders)if(k.columnId===y)return k},getVisibleHdrs:function(){return this.columnHeaders.filter(y=>y.visible)},notifyAddHdr:function(y){this.hasHdr(y)||
(this.columnHeaders.push(y),y.visible&&this.setLastColumn(y),this.fixupResizerCursors())},notifyRemoveHdr:function(y){const k=this.getHdrIndex(y);-1<k&&(this.columnHeaders.splice(k,1),y.visible&&y.last&&this.setLastColumn(this.getPrevHdr(y)),this.fixupResizerCursors())},notifyHdrXChange:function(y){if(!this.isLocked()){for(const k of this.rows)k.notifyHdrXChange(y);this._notifyHdrChange("X",y)}},notifyHdrWidthChange:function(y){if(!this.isLocked()){for(const k of this.rows)k.notifyHdrWidthChange(y);
this._notifyHdrChange("Width",y)}},notifyHdrVisibilityChange:function(y){if((!this.__skipInvisibleHeaders||y.visible)&&!this.isLocked()){this.updateRowsForVisibilityChange(y);var k=this.setLastColumn;a:{var v=this.columnHeaders;let A=v.length;for(;A;){const B=v[--A];if(B.visible){v=B;break a}}v=void 0}k.call(this,v);k=y.visible?1:-1;this.setMaxWidth(this.maxWidth+y.maxValue*k);this.setMinWidth(this.minWidth+y.minValue*k);this.fitHeadersToWidth();this.fixupResizerCursors();this._notifyHdrChange("Visibility",
y)}},_notifyHdrChange:function(y,k){const v=this.hdrChangeListener;if(v)v["notifyHdr"+y+"Change"](k)},updateRowsForVisibilityChange:function(y){for(const k of this.rows)k.notifyHdrVisibilityChange(y)},hasRow:function(y){return this.rows.includes(y)},getRowIndex:function(y){return this.rows.indexOf(y)},getRowById:function(y,k=v=>v.model.id===y){return this.rows.find(k)},getPrevRow:function(y){y=this.getRowIndex(y)-1;return this.rows[0>y?this.rows.length-1:y]},getNextRow:function(y){y=this.getRowIndex(y)+
1;return this.rows[y<this.rows.length?y:0]},notifyAddRow:function(y,k){if(!this.hasRow(y)&&(this.rows.push(y),!this.locked)){const v=this.width;for(const A of this.columnHeaders)y.setWidth(v),y.notifyHdrXChange(A),y.notifyHdrWidthChange(A),y.notifyHdrVisibilityChange(A);k||this.doSort()}},notifyRemoveRow:function(y){y=this.getRowIndex(y);-1<y&&this.rows.splice(y,1)},fitHeadersToWidth:function(){if(!this.locked&&this.fitToWidth){const y=this.getVisibleHdrs();let k=0;for(const v of y)k=d(k,v.x+v.width);
e(y,this.gridWidth-k,!0,v=>{e(y,v,!1,null)})}},fixupResizerCursors:function(){const y=this.getVisibleHdrs();let k=!0,v=0;y.forEach((H,K)=>{k&&H.isFixed()?H.setResizerCursor("",!0):(k&&(v=K),k=!1,H.restoreResizerCursor())});let A=!0,B=y.length,D=B-1;for(;B>v;){const H=y[--B];A?H.setResizerCursor("",!0):H.restoreResizerCursor();H.isFixed()||(A&&(D=B),A=!1)}v===D&&y[v].setResizerCursor("",!0)}}),J=t.GridColHdr=new u("GridColHdr",{include:[t.BoundedValueComponent],initNode:function(y,k){const v=this,
A=k.resizerCursor??"col-resize";delete k.resizerCursor;k.minValue??(k.minValue=16);k.maxValue??(k.maxValue=1E3);k.value??(k.value=k.minValue);k.resizable??(k.resizable=!0);k.flex??(k.flex=0);k.cellXAdj??(k.cellXAdj=0);k.cellWidthAdj??(k.cellWidthAdj=0);k.sortable??(k.sortable=!0);k.sortState??(k.sortState="none");k.placement??(k.placement=m);v.callSuper(y,k);const B=v.gridController;v.resizer=new c(v,{cursor:A,width:10,zIndex:1,percentOfParentHeight:100,align:"right",alignOffset:-5,draggableAllowBubble:!1},
[t.SizeToParent,t.Draggable,{requestDragPosition:function(D,H){H=D-this.x;if(B.fitToWidth&&(0<H?H=l(H,-p(v),v.maxValue-v.value+f(v)):0>H&&(H=d(H,-g(v),v.minValue-v.value+b(v))),0===H))return;D=v.value+H;v.resizable&&v.setValue(D);D-=v.value;H=D-H;let K=0;0>D?K=n(v,D):0<D&&(K=q(v,D));this.dragInitX+=K;H-=K;B.fitToWidth&&(0>H?r(v,H):0<H&&z(v,H))}}]);B&&(B.notifyAddHdr(v),B.notifyHdrXChange(v),B.notifyHdrVisibilityChange(v));v.setWidth(v.value);v.resizer.setVisible(!(v.last&&v.gridController.fitToWidth))},
destroy:function(y){this.setGridController();this.callSuper(y)},setSortable:function(y){this.set("sortable",y,!0)},setSortState:function(y){this.set("sortState",y,!0)},setResizable:function(y){this.set("resizable",y,!0)},setCellWidthAdj:function(y){this.cellWidthAdj=y},setCellXAdj:function(y){this.cellXAdj=y},setFlex:function(y){this.flex=y},setColumnId:function(y){this.columnId=y},setResizerCursor:function(y,k){const v=this.resizer,A=v.cursor;y!==A&&(k&&(this.__rrc=A),v.setCursor(y))},restoreResizerCursor:function(){const y=
this.__rrc;y&&(this.setResizerCursor(y),this.__rrc=null)},isFixed:function(){return this.minValue===this.maxValue},setLast:function(y){this.last=y;this.inited&&this.resizer.setVisible(!(this.last&&this.gridController.fitToWidth))},setGridController:function(y){const k=this.gridController;k!==y&&(k?.notifyRemoveHdr(this),this.gridController=y,this.inited&&y&&(y.notifyAddHdr(this),y.notifyHdrXChange(this),y.notifyHdrWidthChange(this),y.notifyHdrVisibilityChange(this)))},setValue:function(y){this.callSuper(y);
this.inited&&this.setWidth(this.value)},setMinValue:function(y){const k=this.minValue??0,v=this.gridController;this.callSuper(y);this.inited&&k!==this.minValue&&v?.setMinWidth(v.minWidth+this.minValue-k)},setMaxValue:function(y){const k=this.maxValue??0,v=this.gridController;y??=1E3;this.callSuper(y);this.inited&&k!==this.maxValue&&v?.setMaxWidth(v.maxWidth+this.maxValue-k)},setWidth:function(y){const k=this.width;this.callSuper(y);this.inited&&k!==this.width&&this.gridController?.notifyHdrWidthChange(this)},
setX:function(y){const k=this.x;this.callSuper(y);this.inited&&k!==this.x&&this.gridController?.notifyHdrXChange(this)},setVisible:function(y){const k=this.visible;this.callSuper(y);this.inited&&k!==this.visible&&this.gridController?.notifyHdrVisibilityChange(this)}}),N=t.GridRow=new u("GridRow",{initNode:function(y,k){k.placement??(k.placement=m);this.callSuper(y,k);this.gridController?.notifyAddRow(this)},destroy:function(y){this.setGridController();this.callSuper(y)},setGridController:function(y){const k=
this.gridController;k!==y&&(k?.notifyRemoveRow(this),this.gridController=y,this.inited&&y?.notifyAddRow(this))},notifyHdrXChange:function(y){this[y.columnId+"View"]?.setX(y.x+y.cellXAdj)},notifyHdrWidthChange:function(y){this[y.columnId+"View"]?.setWidth(y.width+y.cellWidthAdj)},notifyHdrVisibilityChange:function(y){this[y.columnId+"View"]?.setVisible(y.visible)}});t.Grid=new w("Grid",c,{include:[L],initNode:function(y,k){k.overflow??(k.overflow="autox");k.bgColor??(k.bgColor="#ccc");k.rowSpacing??
(k.rowSpacing=1);k.columnSpacing??(k.columnSpacing=1);var v=k.isAutoScrolling;delete k.isAutoScrolling;this.callSuper(y,k);y=this.header=new c(this,{overflow:"hidden"});y.xLayout=new h(y,{locked:!0,collapseParent:!0,spacing:this.columnSpacing});y.yLayout=new t.SizeToChildren(y,{locked:!0,axis:"y"});k=this.sizeHeightToRows;v=this.content=new c(this,{overflow:k?"hidden":"autoy"},v?[t.AutoScroller]:[]);v.yLayout=new h(v,{locked:!0,axis:"y",spacing:this.rowSpacing,collapseParent:k});this.syncTo(this,
"setGridWidth","width");this.syncTo(y,"_updateContentWidth","width");this.constrain("_updateContentHeight",[k?v:this,"height",y,"height",y,"y"])},setSizeHeightToRows:function(y){this.sizeHeightToRows=y},setRowSpacing:function(y){this.rowSpacing!==y&&(this.rowSpacing=y,this.inited&&this.content.yLayout.setSpacing(y))},setColumnSpacing:function(y){this.columnSpacing!==y&&(this.columnSpacing=y,this.inited&&this.header.xLayout.setSpacing(y))},setLocked:function(y){if(this.inited)for(const k of[this.header.xLayout,
this.header.yLayout,this.content.yLayout])y?k.incrementLockedCounter():(k.decrementLockedCounter(),k.update());this.callSuper(y)},_updateContentWidth:function(y){const k=this.content;y=y.value;k.setWidth(y);for(const v of k.getSubviews())v.setWidth(y)},_updateContentHeight:function(y){const {header:k,content:v}=this;y=k.y+k.height;v.setY(y);this.sizeHeightToRows?this.setHeight(y+v.height):v.setHeight(this.height-y)},determinePlacement:function(y,k){if(y===m){let v;k.isA(N)?v=this.content:k.isA(J)&&
(v=this.header);if(v)return k.gridController!==this&&k.setGridController(this),v}return this.callSuper(y,k)},doSort:function(){const [y,k]=this.sort??["",""],v=this.getSortFunction(y,k);if(v){const A=this.content,B=A.yLayout;this.rows.sort(v);A.sortSubviews(v);B.sortSubviews(v);B.update()}},getSortFunction:(y,k)=>{if(y){const v="ascending"===k?1:-1,A=y+"View";return(B,D)=>{B=B[A].text;D=D[A].text;return B>D?v:D>B?-v:0}}}});t.SimpleGridColHdr=new w("SimpleGridColHdr",t.SimpleTextButton,{include:[J],
initNode:function(y,k){const v=this;k.activeColor??(k.activeColor="#999");k.hoverColor??(k.hoverColor="#bbb");k.readyColor??(k.readyColor="#aaa");k.inset??(k.inset=2);k.sortIconColor??(k.sortIconColor="#666");const A=k.outset??2;delete k.outset;v.callSuper(y,k);v.sortIcon=new t.FontAwesome(v,{align:"right",alignOffset:3,valign:"middle",textColor:v.sortIconColor},[{initNode:function(B,D){this.callSuper(B,D);this.getIDS().fontSize="0.7em"},sizeViewToDom:function(){this.callSuper();v.setOutset(this.width+
A);G(v)}}]);v.textView.enableEllipsis();v.setDisabled(!v.sortable);G(v);E(v)},setSortIconColor:function(y){this.sortIconColor=y;this.sortIcon?.setTextColor(y)},setSortable:function(y){this.callSuper(y);this.inited&&(y&&this.setOutset(14),this.setDisabled(!y),E(this))},setSortState:function(y){this.callSuper(y);this.inited&&E(this)},setWidth:function(y){this.callSuper(y);this.inited&&G(this)},doActivated:function(){this.disabled||(this.setSortState("ascending"===this.sortState?"descending":"ascending"),
this.gridController.setSort([this.columnId,this.sortState]))},drawDisabledState:function(){this.draw(this.readyColor,1)}})})(myt);
(t=>{const {Class:x,Module:w}=JS,u=Math,l=u.max,{View:d,global:{focus:c,keys:h},getAlphaObjSortFunc:m}=t,a=r=>{const z=r.selectedRow;z&&(z.setSelected(!1),r.set("selectedRow",null,!0))},e=t.InfiniteListRow=new w("InfiniteListRow",{include:[t.Reusable],setInfiniteOwner:function(r){this.infiniteOwner=r},setModel:function(r){this.model=r},setClassKey:function(r){this.classKey=r},notifyRefreshed:()=>{}}),f=t.SelectableInfiniteListRow=new w("SelectableInfiniteListRow",{include:[e,t.Selectable]}),g=t.InfiniteList=
new x("InfiniteList",d,{initNode:function(r,z){let E=z.rowClasses;delete z.rowClasses;if("function"===typeof E){const G={};G["default"]=E;E=G}z.modelIDName??(z.modelIDName="id");z.numericSort??(z.numericSort=!0);z.ascendingSort??(z.ascendingSort=!0);z.overflow??(z.overflow="autoy");z.bgColor??(z.bgColor="#ccc");z.rowSpacing??(z.rowSpacing=1);z.rowInset??(z.rowInset=0);z.rowOutset??(z.rowOutset=0);z.rowHeight??(z.rowHeight=30);z.overscrollBehavior??(z.overscrollBehavior="auto contain");this._rowExtent=
this.rowSpacing=this.rowHeight=0;this._startIdx=this._endIdx=-1;this._visibleRowsByIdx={};this.callSuper(r,z);r=this._listView=new d(this);this._scrollAnchorView=new d(r,{width:1,height:1,bgColor:"transparent"});this._itemPool=this.makePool(E,r);this.attachTo(this,"refreshListUI","height");this.attachToDom(this,"refreshListUI","scroll")},makePool:(r,z)=>new t.TrackActivesMultiPool(r,z),setOverscrollBehavior:function(r){this.overscrollBehavior=r;this.getIDS().overscrollBehavior=r},setCollectionModel:function(r){this.collectionModel=
r},setModelIDName:function(r){this.modelIDName=r},setRowSpacing:function(r){this.rowSpacing=r;this._rowExtent=this.rowSpacing+this.rowHeight},setRowHeight:function(r){this.rowHeight=r;this._rowExtent=this.rowSpacing+this.rowHeight},getListData:function(){return this._listData},setWidth:function(r){if(0<r&&(this.callSuper(r),this.inited)){r=this._listView;const z=this.width;r.setWidth(z);for(const E of r.getSubviews())E.setWidth(z)}},getVisibleRows:function(){return Object.values(this._visibleRowsByIdx??
{})},getVisibleRowForModel:function(r){const z=this.getVisibleRows();let E=z.length;for(;E;){const G=z[--E];if(G.model===r)return G}},getListViewHeight:function(){return this._listView.height},isScrolledToEnd:function(){return this.getIDE().scrollTop+this.height===this._listView.height},getSortFunction:function(){const r=this.modelIDName,z=this.ascendingSort;return this.numericSort?t.getNumericObjSortFunc(r,z):m(r,z,!1)},getFilterFunction:()=>{},scrollModelIntoView:function(r,z){var E=this.getIndexOfModelInData(r);
let G=!1;if(0<=E){var L=this._rowExtent;const J=this.getIDE().scrollTop,N=J+this.height;E=this.rowInset+E*L;L=E+L;E<=J?(this.scrollYTo(E,!0),G=!0):L>=N&&(this.scrollYTo(L-this.height,!0),G=!0);z&&((z=this.getVisibleRowForModel(r))?z.focus():this._focusToModel=r)}return G},isModelInData:function(r){return 0<=this.getIndexOfModelInData(r)},getNextModel:function(r,z=!0,E=!0){const G=this.getListData(),L=G.length;r=this.getIndexOfModelInData(r);if(0<=r)return r+=1,r>=L?z?G[0]:G[L-1]:G[r];if(E&&0<L)return G[L-
1]},getPrevModel:function(r,z=!0,E=!0){const G=this.getListData(),L=G.length;r=this.getIndexOfModelInData(r);if(0<=r)return--r,0>r?z?G[L-1]:G[0]:G[r];if(E&&0<L)return G[0]},getIndexOfModelInData:function(r){if(r){const z=this.getListData();let E=z.length;for(;E;)if(this.areModelsEqual(z[--E],r))return E}return-1},areModelsEqual:function(r,z){const E=this.modelIDName;return r[E]===z[E]},getActiveRowForModel:function(r){if(r){const z=this._itemPool.getActives();let E=z.length;for(;E;){const G=z[--E];
if(this.areModelsEqual(G.model,r))return G}}},refreshListData:function(r,z){this._listData=this.collectionModel.getAsSortedList(this.getSortFunction(),this.getFilterFunction());this.resetListUI(r,z)},resetListUI:function(r,z){const E=this.getListData().length,G=this._listView,L=this._scrollAnchorView;G.setHeight(E*this._rowExtent-(0<E?this.rowSpacing:0)+this.rowInset+this.rowOutset);L.setY(G.height-L.height);this._startIdx=this._endIdx=-1;this.forceFullResetOnNextRefresh=z;r||0===this.getIDE().scrollTop?
this.refreshListUI():this.scrollYTo(0,!0)},putRowBackInPool:function(r){if(c.focusedView?.isDescendantOf(r)){const z=this.getFocusTrap();z?z.focus():c.clear()}r.setVisible(!1);this._itemPool.putInstance(r)},refreshListUI:function(r){r=this._rowExtent;const z=this.rowInset,E=this.forceFullResetOnNextRefresh;var G=this.getIDE().scrollTop;const L=this.getListData()??[];var J=l(0,u.floor((G-z)/r));G=u.min(L.length,u.ceil((G-z+this.height)/r));this.forceFullResetOnNextRefresh&&(this.forceFullResetOnNextRefresh=
!1);if(this._startIdx!==J||this._endIdx!==G||E){const y=this.width,k=this.rowHeight,v=this._visibleRowsByIdx,A=this._focusToModel;this._startIdx=J;this._endIdx=G;for(var N in v)if(N<J||N>=G)this.putRowBackInPool(v[N]),delete v[N];for(N=J;N<G;N++){J=v[N];const B=L[N],D=this.getClassKey(B);let H=!1;J&&J.classKey===D||(J&&this.putRowBackInPool(J),v[N]=J=this._itemPool.getInstance(D),J.setInfiniteOwner(this),J.setClassKey(D),J.setWidth(y),J.setHeight(k),J.setY(z+N*r),J.setVisible(!0),H=!0);!E&&J.model&&
this.areModelsEqual(J.model,B)?H&&this.updateRow(J):(J.setModel(B),this.updateRow(J));J.notifyRefreshed();J.bringToFront();A&&this.areModelsEqual(A,B)&&(J.focus(),this._focusToModel=null)}}},getClassKey:r=>"default",updateRow:r=>{}}),b=t.SimpleSelectableInfiniteListRow=new x("SimpleSelectableInfiniteListRow",t.SimpleButton,{include:[f,t.ArrowKeyActivation],initNode:function(r,z){z.selectedColor??(z.selectedColor="#ccf");z.activeColor??(z.activeColor="#f8f8f8");z.hoverColor??(z.hoverColor="#eee");
z.readyColor??(z.readyColor="#fff");z.focusIndicator??(z.focusIndicator=!1);z.activationKeys??(z.activationKeys=h.LIST_KEYS);this.callSuper(r,z)},destroy:function(){this.selected&&this.infiniteOwner.setSelectedRow();this.callSuper()},setSelected:function(r){this.callSuper(r);this.inited&&this.updateUI()},clean:function(){this.setMouseOver(!1);this.setMouseDown(!1);this.focused&&this.blur();this.callSuper()},updateUI:function(){this.callSuper();this.selected&&this.setBgColor(this.selectedColor)},doActivated:function(){this.callSuper();
this.infiniteOwner.setSelectedRow(this)},doActivationKeyDown:function(r,z){r===h.CODE_ESC?this.selected&&this.infiniteOwner.setSelectedRow():this.callSuper(r,z)},doKeyArrowLeftOrUp:function(r,z){this.infiniteOwner.selectPrevRowForModel(this.model);return!0},doKeyArrowRightOrDown:function(r,z){this.infiniteOwner.selectNextRowForModel(this.model);return!0},doActivationKeyUp:function(r){switch(r){case h.CODE_ENTER:case h.CODE_SPACE:this.doActivated()}}}),p=t.SelectableInfiniteList=new x("SelectableInfiniteList",
g,{setSelectedRow:function(r){const z=this.selectedRow;r!==z&&(z?.setSelected(!1),this.setSelectedRowModel(),this.set("selectedRow",r,!0),r&&(this.setSelectedRowModel(r.model),r.setSelected(!0)))},setSelectedRowModel:function(r){this.set("selectedRowModel",r,!0);this.scrollModelIntoView(this.selectedRowModel,!1)},getActiveSelectedRow:function(){return this.getActiveRowForModel(this.selectedRowModel)},selectRowForModel:function(r,z,E){r&&(a(this),this.setSelectedRowModel(r),this.refreshListUI(),z&&
this.getActiveSelectedRow()?.focus())},selectNextRowForModel:function(r,z=!0){this.selectRowForModel(this.getNextModel(r),z,!0)},selectPrevRowForModel:function(r,z=!0){this.selectRowForModel(this.getPrevModel(r),z,!1)},resetListUI:function(r,z){this.isModelInData(this.selectedRowModel)?a(this):this.setSelectedRow();this.callSuper(r,z)},putRowBackInPool:function(r){r.selected&&a(this);this.callSuper(r)},refreshListUI:function(r){r=c.focusedView;this.callSuper();const z=this.getActiveSelectedRow();
z&&(this.set("selectedRow",z,!0),z.setSelected(!0),r&&r!==z||z.focus(!0))}}),n=new w("InfiniteGridRowMixin",{notifyXChange:function(r){this[r.columnId+"View"]?.setX(r.x+r.cellXAdj)},notifyWidthChange:function(r){this[r.columnId+"View"]?.setWidth(r.width+r.cellWidthAdj)},notifyVisibilityChange:function(r){this[r.columnId+"View"]?.setVisible(r.visible)}}),q=new w("InfiniteGridMixin",{setGridHeader:function(r){(this.gridHeader=r)?.setGrid(this)},makeReady:function(r,z){const E=this.gridHeader;E?(this.forceFullResetOnNextRefresh=
z,E.setSort(r),E.setLocked(!1)):this.refreshListData(!1,z)},getSortFunction:function(){const [r,z]=this.gridHeader.sort??["",""];return r?m(r,"ascending"===z,!1):this.callSuper()},updateRow:function(r){const z=this.gridHeader;if(z)for(const E of z.columnHeaders)r.notifyXChange(E),r.notifyWidthChange(E),r.notifyVisibilityChange(E)},notifyXChange:function(r){for(const z of this.getVisibleRows())z.notifyXChange(r)},notifyWidthChange:function(r){for(const z of this.getVisibleRows())z.notifyWidthChange(r)},
notifyVisibilityChange:function(r){for(const z of this.getVisibleRows())z.notifyVisibilityChange(r)}});t.InfiniteGridRow=new w("InfiniteGridRow",{include:[e,n]});t.SelectableInfiniteGridRow=new w("SelectableInfiniteGridRow",{include:[f,n]});t.SimpleSelectableInfiniteGridRow=new x("SimpleSelectableInfiniteGridRow",b,{include:[n]});t.InfiniteGrid=new x("InfiniteGrid",g,{include:[q]});t.SelectableInfiniteGrid=new x("InfiniteGrid",p,{include:[q]});t.InfiniteGridHeader=new x("InfiniteGridHeader",d,{include:[t.GridController],
initNode:function(r,z){z.columnSpacing??(z.columnSpacing=1);z.overflow="hidden";this.callSuper(r,z);new t.SpacedLayout(this,{spacing:this.columnSpacing})},setGrid:function(r){this.grid=r},setColumnSpacing:function(r){this.columnSpacing=r},getColumnSpacingInUse:function(){return 0===this.columnSpacing?0:l(0,this.getVisibleHdrs().length-1)*this.columnSpacing},setHeight:function(r){this.callSuper(r);if(this.inited){r=this.height;for(const z of this.columnHeaders)z.setHeight(r)}},setWidth:function(r){this.callSuper(l(this.minWidth,
r));this.inited&&(r=this.width,this.setGridWidth(r),this.grid.setWidth(r))},subviewAdded:function(r){this.callSuper(r);r.isA(t.GridColHdr)&&(r.setGridController(this),r.setHeight(this.height))},doSort:function(){this.grid.refreshListData(!0,this.grid.forceFullResetOnNextRefresh)},notifyHdrXChange:function(r){this.isLocked()||(this.grid.notifyXChange(r),this._notifyHdrChange("X",r))},notifyHdrWidthChange:function(r){this.isLocked()||(this.grid.notifyWidthChange(r),this._notifyHdrChange("Width",r))},
updateRowsForVisibilityChange:function(r){this.grid.notifyVisibilityChange(r);this.isLocked()||this._notifyHdrChange("Visibility",r)}})})(myt);
(t=>{const x=JS.Class,w=t.PanelStackTransition=new x("PanelStackTransition",t.Node,{to:u=>Promise.resolve(u),from:u=>Promise.resolve(u)});t.PanelStack=new x("PanelStack",t.View,{include:[t.SelectionManager],initNode:function(u,l){l.overflow="hidden";l.itemSelectionId??(l.itemSelectionId="panelId");l.maxSelected??(l.maxSelected=1);this.callSuper(u,l);this.syncTo(this,"__updateHeight","height");this.syncTo(this,"__updateWidth","width")},setTransition:function(u){this.set("transition",u,!0)},__updateWidth:function(u){this.getActivePanel()?.setWidth(u.value)},
__updateHeight:function(u){this.getActivePanel()?.setHeight(u.value)},getActivePanel:function(){return this.getSelected()[0]},getPanel:function(u){return this.getSelectableItem(u)},selectPanel:function(u){this.selectById(u)},doSelected:function(u){u.setWidth(this.width);u.setHeight(this.height)},doStackTransition:function(u){this["doStackTransition"+(u.selected?"To":"From")](u)},doStackTransitionTo:function(u){const l=this;l.doBeforeTransitionTo(u);const d=l.transition;d?d.to(u).then(c=>{l.doAfterTransitionTo(c)}):
(u.makeHighestZIndex(),u.setVisible(!0),l.doAfterTransitionTo(u))},doBeforeTransitionTo:u=>{},doAfterTransitionTo:u=>{},doStackTransitionFrom:function(u){const l=this;l.doBeforeTransitionFrom(u);const d=l.transition;d?d.from(u).then(c=>{l.doAfterTransitionFrom(c)}):(u.setVisible(!1),l.doAfterTransitionFrom(u))},doBeforeTransitionFrom:u=>{},doAfterTransitionFrom:u=>{}});t.StackablePanel=new JS.Module("StackablePanel",{include:[t.Selectable],initNode:function(u,l){l.visible=l.selected=!1;l.bgColor??
(l.bgColor="#fff");l.panelId??(l.panelId=l.name);this.callSuper(u,l);this.selected&&this.doStackTransition()},setPanelStack:function(u){this.panelStack=u},getPanelStack:function(){return this.panelStack??this.parent},setPanelId:function(u){this.panelId=u},setSelected:function(u){this.selected!==u&&(this.callSuper(u),this.inited&&this.doStackTransition())},doStackTransition:function(){this.getPanelStack().doStackTransition(this)}});t.PanelStackFadeTransition=new x("PanelStackFadeTransition",w,{initNode:function(u,
l){l.duration??(l.duration=1E3);this.callSuper(u,l)},setDuration:function(u){this.duration=u},to:function(u){return new Promise((l,d)=>{u.stopActiveAnimators("opacity");u.setVisible(!0);u.animate({attribute:"opacity",to:1,duration:this.duration}).next(c=>{u.makeHighestZIndex();l(u)})})},from:function(u){return new Promise((l,d)=>{u.stopActiveAnimators("opacity");u.animate({attribute:"opacity",to:0,duration:this.duration}).next(c=>{u.setVisible(!1);l(u)})})}});t.PanelStackSlideTransition=new x("PanelStackSlideTransition",
w,{initNode:function(u,l){l.duration??(l.duration=1E3);l.direction??(l.direction="right");this.callSuper(u,l)},setDuration:function(u){this.duration=u},setDirection:function(u){this.direction=u},to:function(u){const l=u.getPanelStack(),d=this.duration;let c,h;switch(this.direction){case "left":h="x";c=l.width;break;case "right":h="x";c=-l.width;break;case "up":h="y";c=l.height;break;case "down":h="y",c=-l.height}u.stopActiveAnimators(h);u.set(h,c);u.setVisible(!0);return new Promise((m,a)=>{a=e=>
{u.makeHighestZIndex();m(u)};0<d?u.animate({attribute:h,to:0,duration:d}).next(a):(u.set(h,0),u.makeHighestZIndex(),m(u))})},from:function(u){const l=u.getPanelStack(),d=this.duration;let c,h;switch(this.direction){case "left":h="x";c=-l.width;break;case "right":h="x";c=l.width;break;case "up":h="y";c=-l.height;break;case "down":h="y",c=l.height}u.stopActiveAnimators(h);return new Promise((m,a)=>{a=e=>{u.setVisible(!1);m(u)};0<d?u.animate({attribute:h,to:c,duration:d}).next(a):(u.set(h,c),u.setVisible(!1),
m(u))})}})})(myt);
(t=>{const x=JS.Module,{Draggable:w,global:{dragManager:u,mouse:l}}=t,d=(h,m,a)=>{for(const e of[m,a])h["__is"+e]=!1,h["__tmrId"+e]=null},c=t.DragGroupSupport=new x("DragGroupSupport",{initNode:function(h,m){this.__dgs={"*":!0};this.__drpgs={"*":!0};this.__anyDG=this.__anyDRPG=!0;this.callSuper(h,m)},setDragGroups:function(h){const m=this.__dgs={};for(const a in h)m[a]=!0;this.__anyDG=m.hasOwnProperty("*")},getDragGroups:function(){return this.__dgs},setDropGroups:function(h){const m=this.__drpgs=
{};for(const a in h)m[a]=!0;this.__anyDRPG=m.hasOwnProperty("*")},getDropGroups:function(){return this.__drpgs},addDragGroup:function(h){h&&(this.__dgs[h]=!0,"*"===h&&(this.__anyDG=!0))},removeDragGroup:function(h){h&&(delete this.__dgs[h],"*"===h&&(this.__anyDG=!1))},isAnyDragGroup:function(){return this.__anyDG},addDropGroup:function(h){h&&(this.__drpgs[h]=!0,"*"===h&&(this.__anyDRPG=!0))},removeDropGroup:function(h){h&&(delete this.__drpgs[h],"*"===h&&(this.__anyDRPG=!1))},isAnyDropGroup:function(){return this.__anyDRPG}});
t.DropSource=new x("DropSource",{include:[w],initNode:function(h,m){m.distanceBeforeDrag??(m.distanceBeforeDrag=2);m.dropParent??(m.dropParent=h.getRoot());this.callSuper(h,m)},setDropClass:function(h){this.dropClass=t.resolveClassname(h)},setDropClassAttrs:function(h){this.dropClassAttrs=h},setDropParent:function(h){this.dropParent=h},startDrag:function(h){const m=this.dropable=this.makeDropable();if(m){const a=m.distanceBeforeDrag;m.distanceBeforeDrag=0;m.doMouseDown(h);m.__doMouseDown(h);m.distanceBeforeDrag=
a}},doMouseUp:function(h){this.callSuper(h);const m=this.dropable;m&&(m.__doMouseUp(h),m.doMouseUp(h),this.dropable=null)},makeDropable:function(){const h=this.dropClass,m=this.dropParent;if(h&&m){const a=t.DomElementProxy.getRelativePosition(this.getIDE(),m.getIDE());return new h(m,{...this.dropClassAttrs,x:a.x??0,y:a.y??0})}}});t.DropTarget=new x("DropTarget",{include:[c],initNode:function(h,m){this.callSuper(h,m);u.registerDropTarget(this)},destroy:function(){u.unregisterDropTarget(this);this.callSuper()},
willAcceptDrop:function(h){return!this.disabled&&this.isVisible()},notifyDragStart:h=>{},notifyDragStop:h=>{},notifyDragEnter:h=>{},notifyDragLeave:h=>{},notifyDrop:h=>{}});t.Dropable=new x("Dropable",{include:[w,c],setDropTarget:function(h){this.dropTarget=h},setDropped:function(h){this.dropped=h},setDropFailed:function(h){this.dropFailed=h},willPermitDrop:h=>!0,startDrag:function(h){this.setDropped(!1);this.setDropFailed(!1);u.startDrag(this);this.callSuper(h)},updateDrag:function(h){u.updateDrag(h,
this);this.callSuper(h)},stopDrag:function(h,m){u.stopDrag(h,this,m);this.callSuper(h,m);m?this.notifyDropAborted():this.dropFailed&&this.notifyDropFailed()},notifyDragEntering:function(h){this.setDropTarget(h)},notifyDragLeaving:function(h){this.setDropTarget()},notifyDropped:function(h,m){this.setDropped(!0);this.dropTarget||this.setDropFailed(!0)},notifyDropFailed:()=>{},notifyDropAborted:()=>{}});t.AutoScroller=new x("AutoScroller",{include:[c],initNode:function(h,m){this.scrollBorder=40;this.scrollFrequency=
50;this.scrollAmount=2;this.scrollAcceleration=7;m.overflow??(m.overflow="auto");this.callSuper(h,m);u.registerAutoScroller(this)},destroy:function(){u.unregisterAutoScroller(this);this.callSuper()},setScrollBorder:function(h){this.scrollBorder=Math.max(1,h)},setScrollFrequency:function(h){this.scrollFrequency=h},setScrollAmount:function(h){this.scrollAmount=h},setScrollAcceleration:function(h){this.scrollAcceleration=h},notifyAutoScrollerDragStart:function(h){h=this.getIDE();(h.scrollHeight>h.clientHeight||
h.scrollWidth>h.clientWidth)&&this.attachToDom(l,"__hndlMove","mousemove",!0)},notifyAutoScrollerDragStop:function(h){this.detachFromDom(l,"__hndlMove","mousemove",!0);d(this,"Up","Down");d(this,"Left","Right")},__hndlMove:function(h){const m=this;let {pageX:a,pageY:e}=h.value;if(m.containsPoint(a,e)){h=m.getPagePosition();const f=m.scrollBorder,g=(b,p)=>{m["__is"+b]&&(m.getIDE()["scroll"+("Up"===b||"Down"===b?"Top":"Left")]+=p*m["__amt"+b],m["__tmrId"+b]=setTimeout(()=>{g(b,p)},m.scrollFrequency))};
a-=h.x;e-=h.y;e<f?(m.__isUp=!0,m.__amtUp=Math.round(m.scrollAmount*(1+m.scrollAcceleration*(1-e/f))),m.__tmrIdUp||g("Up",-1)):m.height-e<f?(m.__isDown=!0,m.__amtDown=Math.round(m.scrollAmount*(1+m.scrollAcceleration*(1-(m.height-e)/f))),m.__tmrIdDown||g("Down",1)):d(m,"Up","Down");a<f?(m.__isLeft=!0,m.__amtLeft=Math.round(m.scrollAmount*(1+m.scrollAcceleration*(1-a/f))),m.__tmrIdLeft||g("Left",-1)):m.width-a<f?(m.__isRight=!0,m.__amtRight=Math.round(m.scrollAmount*(1+m.scrollAcceleration*(1-(m.width-
a)/f))),m.__tmrIdRight||g("Right",1)):d(m,"Left","Right")}else d(m,"Up","Down"),d(m,"Left","Right")}})})(myt);
(t=>{const {max:x,cos:w,sin:u,PI:l}=Math,d=t.Geometry.degreesToRadians,c=f=>{var g=d(f.startAngle),b=d(f.endAngle);if(g>b){var p=g;g=b;b=p}p=f.__path;var n=f.width/2,q=f.thickness;const r=f.radius,z=r+q;var E=b-g;const G=E+1E-4>=2*l;G&&(g=0,b=l);const L=[n+z*w(g),n+z*u(g)],J=[n+z*w(b),n+z*u(b)];b=[n+r*w(b),n+r*u(b)];g=[n+r*w(g),n+r*u(g)];n=["M"+L.join()];G?n.push("A"+[z,z,0,1,1,J].join(),"A"+[z,z,0,1,1,L].join(),"L"+b.join(),"A"+[r,r,0,1,0,g].join(),"A"+[r,r,0,1,0,b].join()):(E=E%(2*l)>l?1:0,q/=2,
n.push("A"+[z,z,0,E,1,J].join(),f.endCapRounding?"A"+[q,q,0,0,1,b].join():"L"+b.join(),"A"+[r,r,0,E,0,g].join(),f.startCapRounding?"A"+[q,q,0,0,1,L].join():""));n.push("z");p.setAttribute("d",n.join(" "));p.setAttribute("fill",f.color)},h=f=>{const g=2*(f.radius+f.thickness),b=f.__svg;f.setWidth(g);f.setHeight(g);b.setAttribute("viewBox","0 0 "+g+" "+g);b.setAttribute("width",g);b.setAttribute("height",g);c(f)},m=(f,g,b)=>{f[g]!==b&&(f[g]=b,f.inited&&(c(f),f.fireEvent(g,b)))},a=(f,g,b)=>{f[g]!==b&&
(f[g]=b=x(0,b),f.inited&&(h(f),f.fireEvent(g,b)))},e=(f,g)=>{f=document.createElementNS("http://www.w3.org/2000/svg",f);g?.appendChild(f);return f};t.Annulus=new JS.Class("Annulus",t.BackView,{initNode:function(f,g){this.radius=this.thickness=this.startAngle=this.endAngle=0;this.startCapRounding=this.endCapRounding=!1;this.callSuper(f,g);h(this)},createOurDomElement:function(f){f=this.callSuper(f);var g=Array.isArray(f)?f[1]:f;g=this.__svg=e("svg",g);this.__path=e("path",g);g.style.pointerEvents=
"none";return f},setRadius:function(f){a(this,"radius",f)},setThickness:function(f){a(this,"thickness",f)},setStartAngle:function(f){m(this,"startAngle",f)},setEndAngle:function(f){m(this,"endAngle",f)},setStartCapRounding:function(f){m(this,"startCapRounding",f)},setEndCapRounding:function(f){m(this,"endCapRounding",f)},setColor:function(f){m(this,"color",f)},isColorAttr:function(f){return"color"===f||this.callSuper(f)}})})(myt);
(t=>{let x;const w=JS.Class,{mouse:u,windowResize:l,dragManager:d}=t.global,{min:c,max:h,round:m}=Math,a=b=>{if(b.tooltip){const p=b._lastPos;if(b.tooltip.parent.containsPoint(p.x,p.y))return!0}b.hideTip();return!1},e=t.BaseTooltip=new w("BaseTooltip",t.View,{include:[t.RootView],extend:{TIP_DELAY:500,TIP_HIDE_DELAY:100},initNode:function(b,p){this.tipDelay=this.nextTipDelay=e.TIP_DELAY;this.tipHideDelay=e.TIP_HIDE_DELAY;p.visible??(p.visible=!1);this.callSuper(b,p)},setTooltip:function(b){this.inited&&
(this.tooltip=b)&&(this.attachToDom(u,"__hndl_mousemove","mousemove",!0),this.attachToDom(b.parent,"hideTip","mousedown",!0),this.attachToDom(b.parent,"hideTip","mouseup",!0))},__hndl_mousemove:function(b){const p=this;p._lastPos=t.MouseObservable.getMouseFromEvent(b);a(p)&&(p.__checkTID&&(clearTimeout(p.__checkTID),delete p.__checkTID),p.__checkTID=setTimeout(()=>{delete p.__checkTID;a(p)&&p.showTip()},p.nextTipDelay))},hideTip:function(b){this.__checkTID&&(clearTimeout(this.__checkTID),delete this.__checkTID);
if(b=this.tooltip?.parent)this.detachFromDom(b,"hideTip","mousedown",!0),this.detachFromDom(b,"hideTip","mouseup",!0),this.detachFromDom(u,"__hndl_mousemove","mousemove",!0),this.nextTipDelay=this.tipDelay,this.setVisible(!1);return!0},showTip:function(){d.getDragView()||(this.nextTipDelay=this.tipHideDelay,this.bringToFront(),this.setVisible(!0))}}),f=t.Tooltip=new w("Tooltip",e,{extend:{EDGE_SIZE:0,EDGE_COLOR:"#444",SHADOW_SIZE:2,SHADOW_COLOR:"#00000033",HORIZONTAL_INSET:6,VERTICAL_INSET:3,TIP_BG_COLOR:"#444",
TIP_TEXT_COLOR:"#eee"},initNode:function(b,p){p.edgeSize??(p.edgeSize=f.EDGE_SIZE);p.edgeColor??(p.edgeColor=f.EDGE_COLOR);p.shadowSize??(p.shadowSize=f.SHADOW_SIZE);p.shadowColor??(p.shadowColor=f.SHADOW_COLOR);p.insetH??(p.insetH=f.HORIZONTAL_INSET);p.insetV??(p.insetV=f.VERTICAL_INSET);p.tipBgColor??(p.tipBgColor=f.TIP_BG_COLOR);p.tipTextColor??(p.tipTextColor=f.TIP_TEXT_COLOR);this.callSuper(b,p);this._tipText=new t.Text(this,{fontSize:"12px",x:this.insetH,y:this.insetV,textColor:this.tipTextColor,
whiteSpace:"inherit"})},setEdgeSize:function(b){this.edgeSize=b},setEdgeColor:function(b){this.edgeColor=b},setShadowSize:function(b){this.shadowSize=b},setShadowColor:function(b){this.shadowColor=b},setInsetH:function(b){this.insetH=b},setInsetV:function(b){this.insetV=b},setTipBgColor:function(b){this.tipBgColor=b},setTipTextColor:function(b){this.tipTextColor=b},showTip:function(){const b=this.tooltip;var p=b.text;const n=b.parent;var q=this._tipText;const r=this.edgeSize,z=this.shadowSize;q.text!==
p&&q.setText(p);q.setWidth("auto");var E=c(q.measureNoWrapWidth(),b.maxTextWidth);p=E+2*q.x;const G=p+2*r;q.setWidth(E);q.sizeViewToDom();E=n.getPagePosition();q=q.height+2*q.y;const L=q+2*r,J=E.y-L+("below"===b.tipvalign?n.height+L:0);E=E.x;switch(b.tipalign){case "right":E-=G;case "farright":E+=n.width;break;case "farleft":E-=G}this.setX(m(c(h(E,0),l.getWidth()-G)));this.setY(m(c(h(J,0),l.getHeight()-L)));this.setWidth(p);this.setHeight(q);this.setBgColor(this.tipBgColor);this.setBorder([r,"solid",
this.edgeColor]);this.setBoxShadow([z,z,z,this.shadowColor]);this.callSuper()}}),g=t.TooltipMixin=new JS.Module("TooltipMixin",{extend:{TIP_CLASS:f,MAX_TEXT_WIDTH:280},setTooltip:function(b){this.callSuper("");this.set("tooltip",b,!0)},getTooltip:function(){return this.tooltip},setTipAlign:function(b){this.set("tipAlign",b,!0)},setTipValign:function(b){this.set("tipValign",b,!0)},setMaxTextWidth:function(b){this.set("maxTextWidth",b,!0)},setTipClass:function(b){this.set("tipClass",b,!0)},doSmoothMouseOver:function(b){const p=
this.getTooltip();this.callSuper(b);if(b&&p){b=this.tipClass??g.TIP_CLASS;!x||x instanceof b||(x.destroy(),x=null);if(!x){let n=document.getElementById("tooltipDiv");n||(n=t.DomElementProxy.createElement("div",{position:"absolute"}),t.getElement().appendChild(n));x=new b(n,{domId:"tooltipDiv"})}x.setTooltip({parent:this,text:p,tipalign:this.tipAlign,tipvalign:this.tipValign,maxTextWidth:this.maxTextWidth||g.MAX_TEXT_WIDTH})}}})})(myt);
(t=>{const x=Math,{min:w,max:u}=x;t.Path=new JS.Class("Path",{initialize:function(l){this.setVectors(l??[])},setVectors:function(l){this._boundingBox=null;this.vectors=l},copyFrom:function(l){this.vectors=l.vectors.slice();this._boundingBox=null},drawInto:function(l){l.beginPath();const d=this.vectors;let c=d.length,h=0;for(l.moveTo(d[h++],d[h++]);c>h;)l.lineTo(d[h++],d[h++]);l.closePath()},translate:function(l,d){const c=this.vectors;let h=c.length;for(;h;)c[--h]+=d,c[--h]+=l;this._boundingBox=null},
scale:function(l){const d=this.vectors;let c=d.length;for(;c;)d[--c]*=l,d[--c]*=l;this._boundingBox=null},rotate:function(l){const d=x.cos(l);l=x.sin(l);const c=this.vectors,h=c.length;for(let m=0;h>m;){const a=c[m]*d-c[m+1]*l,e=c[m]*l+c[m+1]*d;c[m++]=a;c[m++]=e}this._boundingBox=null},rotateAroundOrigin:function(l,d,c){this.translate(-d,-c);this.rotate(l);this.translate(d,c)},getBoundingBox:function(){if(this._boundingBox)return this._boundingBox;const l=this.vectors;let d=l.length,c,h,m,a;if(2<=
d){m=a=l[--d];for(c=h=l[--d];d;){const e=l[--d],f=l[--d];m=w(e,m);a=u(e,a);c=w(f,c);h=u(f,h)}return this._boundingBox={x:c,y:m,width:h-c,height:a-m}}return this._boundingBox=null},getCenter:function(){const l=this.getBoundingBox();return l?{x:l.x+l.width/2,y:l.y+l.height/2}:null},isPointInPath:function(l,d){"object"===typeof l&&(d=l.y,l=l.x);return t.Geometry.isPointInPath(l,d,this.getBoundingBox(),this.vectors)}})})(myt);
(t=>{const x=console.warn,w=Math.PI,u=w/2,l=3*w/2,d=t.AccessorSupport,c={};for(const h of"save restore scale rotate translate transform setTransform clearRect fillRect strokeRect beginPath closePath moveTo lineTo quadraticCurveTo bezierCurveTo arcTo rect arc fill stroke clip isPointInPath fillText strokeText drawImage createImageData putImageData".split(" "))c[h]=function(...m){this.__ctx[h](...m)};for(const h of["createLinearGradient","createRadialGradient","createPattern","measureText","getImageData"])c[h]=
function(...m){return this.__ctx[h](...m)};for(const h of"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineWidth lineCap lineJoin miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation".split(" "))c[d.generateSetterName(h)]=function(m){this.__ctx[h]=m},c[d.generateGetterName(h)]=function(){return this.__ctx[h]};t.Canvas=new JS.Class("Canvas",t.BackView,{include:[c],createOurDomElement:function(h){h=this.callSuper(h);const m=Array.isArray(h)?h[1]:h,
a=this.__cvs=document.createElement("canvas");a.className="mytUnselectable";m.appendChild(a);a.style.position="absolute";this.__ctx=a.getContext("2d");return h},setWidth:function(h){0>h&&(h=0);this.__cvs.setAttribute("width",h);this.callSuper(h)},setHeight:function(h){0>h&&(h=0);this.__cvs.setAttribute("height",h);this.callSuper(h)},clear:function(){const h=this.__ctx;h.save();h.setTransform(1,0,0,1,0,0);h.clearRect(0,0,this.width,this.height);h.restore()},dataURItoBlob:function(h,m){h=atob(h.split(",")[1]);
const a=h.length,e=[];for(let f=0;f<a;)e.push(h.charCodeAt(f++));return new Blob([new Uint8Array(e)],{type:m})},getDataURL:function(h,m){return this.__cvs.toDataURL(h,m)},getImageFile:function(h,m,a){switch(h){case "png":case "PNG":h="png";break;case "jpg":case "JPG":case "jpeg":case "JPEG":h="jpeg";a??=.5;break;default:x("Unexpected image type",h),h=h.toLowerCase()}const e="image/"+h;a=this.dataURItoBlob(this.getDataURL(e,a),e);m&&(a.name=m+"."+h);return a},circle:function(h,m,a){this.__ctx.arc(h,
m,a,0,2*w)},drawRoundedRect:function(h,m,a,e,f,g){const b=this.lineTo.bind(this),p=this.arc.bind(this);g=e+g;f=a+f;this.beginPath();this.moveTo(a,e+h);b(a,g-h);p(a+h,g-h,h,w,u,!0);b(f-h,g);p(f-h,g-h,h,u,0,!0);b(f,e+h);p(f-h,e+h,h,0,l,!0);b(a+h,e);p(a+h,e+h,h,l,w,!0);this.closePath();0<m&&(h-=m,a+=m,f-=m,e+=m,g-=m,this.moveTo(a,e+h),p(a+h,e+h,h,w,l),b(f-h,e),p(f-h,e+h,h,l,0),b(f,g-h),p(f-h,g-h,h,0,u),b(a+h,g),p(a+h,g-h,h,u,w),this.closePath());return this},drawRectOutline:function(h,m,a,e,f){f=a+f;
e=m+e;const g=m+h,b=e-h,p=a+h;h=f-h;const n=this.lineTo.bind(this);this.beginPath();this.moveTo(m,a);n(m,f);n(e,f);n(e,a);n(m,a);n(g,p);n(b,p);n(b,h);n(g,h);n(g,p);this.closePath();return this},drawPartiallyRoundedRect:function(h,m,a,e,f,g,b,p){p=g+p;b=f+b;const n=this.lineTo.bind(this),q=this.quadraticCurveTo.bind(this);this.beginPath();this.moveTo(f,g+h);n(f,p-a);0<a&&q(f,p,f+a,p);n(b-e,p);0<e&&q(b,p,b,p-e);n(b,g+m);0<m&&q(b,g,b-m,g);n(f+h,g);0<h&&q(f,g,f,g+h);this.closePath();return this},drawAnnulus:function(h,
m,a,e,f,g,b,p=60){const n=t.Color;for(var q of b)"string"===typeof q.color&&(q.color=n.makeColorFromHexString(q.color));1>p&&(x("Invalid segements",p),p=60);p=w/p;q=0;for(var r=b.length-1;q<r;){var z=b[q++];const {angle:A,color:B}=z,{angle:D,color:H}=b[q];var E=Math.round((D-A)/p),G=B.getDiffFrom(H);z.colorDelta={red:G.red/E,green:G.green/E,blue:G.blue/E}}a=new t.Path([h+a,m,h+e,m]);a.rotateAroundOrigin(f,h,m);e=a.vectors;let [L,J,N,y]=e,k=0,v=w/360;for(q=0;g>f;){E=L;G=J;r=N;z=y;f+=p;f>g&&(p+=g-f,
v=0,f=g);a.rotateAroundOrigin(p+v,h,m);[L,J,N,y]=e;this.beginPath();this.moveTo(E,G);this.lineTo(r,z);this.lineTo(N,y);this.lineTo(L,J);this.closePath();const {color:A,colorDelta:B}=b[q];this.setFillStyle(n.rgbToHex(A.red+k*B.red,A.green+k*B.green,A.blue+k*B.blue,!0));this.fill();0<v&&(a.rotateAroundOrigin(-v,h,m),[L,J,N,y]=e);k++;f>=b[q+1].angle&&(k=0,q++)}return this}})})(myt);myt.all=!0;
//# sourceMappingURL=./myt.min.js.map
